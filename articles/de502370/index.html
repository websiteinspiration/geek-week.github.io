<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“’ ğŸ‘©ğŸ¾â€ğŸš€ ğŸ‘­ Das Spiel "Snake" auf das Steckbrett legen. Teil 1: Zustandsautomaten ğŸ‘©â€ğŸ”§ ğŸ± ğŸ–¤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In meiner Freizeit studieren mein Sohn und ich digitale Elektronik. KÃ¼rzlich sind wir zum Kapitel Ã¼ber endliche Zustandsmaschinen gekommen. Dieses The...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Das Spiel "Snake" auf das Steckbrett legen. Teil 1: Zustandsautomaten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502370/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In meiner Freizeit studieren mein Sohn und ich digitale Elektronik. KÃ¼rzlich sind wir zum Kapitel Ã¼ber endliche Zustandsmaschinen gekommen. Dieses Thema ist voll von typischen Aufgaben wie einem Semaphor oder einem Verkaufsautomaten. Aber sie sind alle langweilig und zu einfach, und einige sind im Allgemeinen, ehrlich gesagt, weit hergeholt. Nachdem ich einfache Beispiele studiert hatte, wollte ich etwas interessanteres und komplexeres machen. Das klassische Spiel â€Schlangeâ€œ fiel mir auf (mein Sohn spielte es am Telefon) und ich schlug vor, es auf Zustandsautomaten zu machen. Immerhin ist der Status des Spiels ziemlich endgÃ¼ltig (besonders wenn Sie sich auf ein kleines Feld beschrÃ¤nken), und von den Eingaben gibt es nur 4 Tasten. Und das haben wir bekommen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/9e/m3/wq9em3hfdynwkdketucwhzg6x38.gif"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Spiel Snake (sie ist eine Schlange, Python, Boa Constrictor usw.) ist allen bekannt. Sie stammt aus den fernen 70ern, aber ich werde ihre Geschichte, die Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf Wikipedia</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vielen </font></font></u></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikeln</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ã¼ber HabrÃ© </font><font style="vertical-align: inherit;">lesen kÃ¶nnen, nicht wiederholen </font><font style="vertical-align: inherit;">. Das Spiel hat ziemlich einfache Regeln und zugleich fesselndes Gameplay)) Dank dieser Tatsache </font><font style="vertical-align: inherit;">wird es oft </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verwendet</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fÃ¼r </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tutorien</font></font></u></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;">Code </font></u></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proben</font></font></u></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In hÃ¶heren Programmiersprachen ist es einfach genug, ein solches Spiel zu erstellen. Unter eingeschrÃ¤nkteren Bedingungen beginnt das Interessanteste beispielsweise mit einer Implementierung in </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">LabVIEW</font></a><font style="vertical-align: inherit;"> . Es gibt auch viele Optionen auf FPGA: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Link 1</font></a><font style="vertical-align: inherit;"> , </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Link 2</font></a><font style="vertical-align: inherit;"> , </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Link 3</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><u><font style="vertical-align: inherit;"></font></u></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link 4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es gab jedoch keine einzige Option fÃ¼r separate TTL-Chips der Standardreihe. Das werden wir also tun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass FPGA-LÃ¶sungen fÃ¼r uns am nÃ¤chsten sind und Sie von dort viel ausleihen kÃ¶nnen? Aber in allen Optionen, die ich mir angesehen habe, sind sie leicht in den Registern links und rechts verstreut. Beispielsweise wird sehr oft jeder Feldzelle ein separates Bit oder eine separate Nummer zugewiesen. Wir kÃ¶nnen dies nicht mit losem Pulver tun, da jedes neue Register eine separate Mikroschaltung ist, die irgendwo platziert und dann angeschlossen werden muss. Daher streichen wir alle Erfahrungen anderer Entwickler durch und werden alles von Grund auf neu machen. Als Bonus sammeln wir alles auf inlÃ¤ndischen (und besser sowjetischen) Chips der Serie k555 / kr1533, mit Ausnahme von ROMs, die frisch genommen werden mÃ¼ssen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formulierung des Problems</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden solche EinschrÃ¤nkungen haben: ein Feld mit einer GrÃ¶ÃŸe von 8 Ã— 8 Zellen (chinesische </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED-Matrix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), eine SchwanzlÃ¤nge von 8 Zellen. </font><font style="vertical-align: inherit;">Eine Schlange kann durch WÃ¤nde gehen, aber wir werden den Schnittpunkt mit dem Schwanz zunÃ¤chst nicht verarbeiten (um das Design nicht zu komplizieren, kÃ¶nnen Sie dies spÃ¤ter hinzufÃ¼gen). </font><font style="vertical-align: inherit;">Um den gesamten Status des Spiels zu beschreiben, benÃ¶tigen wir:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopfposition (X = 0..7, Y = 0..7, 6 Bits)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bewegungsrichtung (â†‘ â†“ â† â†’, 2 Bit)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apple Position (X, Y, 6 Bit)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SchwanzlÃ¤nge (0..7, 3 Bit)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Position der Schwanzzellen (von 0 bis 7 StÃ¼ck Ã  6 Bit)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt werden 65 Bits erhalten, selbst wenn wir Register mit jeweils 8 Bits verwenden, werden nur 8 solcher Mikroschaltungen (und ein weiterer Trigger) benÃ¶tigt, um den Zustand zu speichern. Dies ist ziemlich viel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber der Schwanz kann nicht lokalisiert werden, wo er will, er "wÃ¤chst" aus dem Kopf. </font><font style="vertical-align: inherit;">Daher kÃ¶nnen wir nicht die vollstÃ¤ndigen Koordinaten jedes Abschnitts des Schwanzes speichern, sondern nur die Richtung, in die Richtung von der vorherigen Zelle (oder dem Kopf) gezeichnet werden muss. </font><font style="vertical-align: inherit;">Dann benÃ¶tigen wir anstelle von 6 Ã— 8 = 48 Bit 4 Ã— 8 = 16 Bit, und dies spart bis zu vier RegisterfÃ¤lle!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatische Maschinen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir, alles auf Maschinen zu machen, die Moore oder Miles Ã¤hnlich sind. </font><font style="vertical-align: inherit;">Um einen solchen Automaten zu implementieren, reicht es aus, ein bisschen Zustandsspeicher (Register) und kombinatorische Logik zu haben, um zwischen ihnen zu wechseln. </font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Wikipedia-</font></a></i></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/o-/oq/f4o-oqkcsvqo5ohkwugmxc7vwb4.png"><br clear="all">
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bild</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Normalerweise wird eine Zustandsmaschine als Diagramm von ZustÃ¤nden und ÃœbergÃ¤ngen zwischen ihnen beschrieben. </font><font style="vertical-align: inherit;">Manchmal ist es bequemer, eine Tabelle mit ÃœbergÃ¤ngen in einen neuen Zustand zu erstellen, das einfachste Beispiel (aus Wikipedia): </font></font><br>
<img src="https://habrastorage.org/webt/dm/e6/3i/dme63iuq9yaq1jelbizwkcxyi-y.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weitere Informationen und schÃ¶ne Bilder finden Sie beispielsweise in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesem Artikel Ã¼ber HabrÃ©</font></font></a></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kleiner Exkurs</font></font></b>
                        <div class="spoiler_text">  , ,        .     ,  ROM       ,        ROM. <i>(  ,      )</i>.<br>
<br>
      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">, , </a>. <br>
<br>
<img src="https://habrastorage.org/webt/ni/sb/99/nisb99zh_hwtazsponzz_ksr_ua.png"><br>
        ,      Â« Â»       .<br>
<br clear="all">
<hr></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Schlange verschiedener ZustÃ¤nde (wenn Sie die Position des Apfels nicht berÃ¼cksichtigen) kann 2 ^ 8 + 2 ^ 10 + ... + 2 ^ 24 â‰ˆ 32 Millionen haben. </font><font style="vertical-align: inherit;">Es ist nicht mÃ¶glich, sie in die Tabelle zu schreiben, und noch mehr, ein Ãœbergangsdiagramm zu zeichnen. </font><font style="vertical-align: inherit;">Die meisten ÃœbergÃ¤nge sind jedoch ziemlich gleich (der Kopf bewegt nur eine benachbarte Zelle und der Schwanz bewegt einen Abschnitt pro Umdrehung). </font><font style="vertical-align: inherit;">In diesem Fall kÃ¶nnen wir nicht jeden einzelnen Zustand beschreiben, sondern einen neuen Zustand als Funktion des vorherigen formulieren. </font><font style="vertical-align: inherit;">DarÃ¼ber hinaus kÃ¶nnen wir das ganze Spiel in mehrere parallele Automaten unterteilen: 1) eine automatische Richtungsmaschine, 2) eine automatische Positionierungsmaschine des Kopfes, 3) eine automatische Maschine fÃ¼r den Schwanz. </font><font style="vertical-align: inherit;">Und um jeden von ihnen so einzustellen, wie es bequemer ist:</font></font><br>
<br>
<pre><code class="plaintext hljs">1) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†        â†/â†“/â†‘     â”‚ â†<font></font>
   â†          â†’       â”‚ â†’<font></font>
   â†‘        â†‘/â†/â†’     â”‚ â†‘<font></font>
   â†‘          â†“       â”‚ â†“<font></font>
   ......          â”‚<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">2) ,  â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†             (x,y) â”‚ (x-1, y)<font></font>
   â†’             (x,y) â”‚ (x+1, y)<font></font>
   â†‘             (x,y) â”‚ (x, y-1)<font></font>
   â†“             (x,y) â”‚ (x, y+1)<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">3) ,                       â”‚  <font></font>
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<font></font>
   â†            (t1,t2,t3,t4,t5,t6,t7,t8)  â”‚ (â†,t1,t2,t3,t4,t5,t6,t7)<font></font>
   ......                               â”‚<font></font>
</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Richtung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginnen wir mit der Richtungsmaschine. </font><font style="vertical-align: inherit;">Wenn Sie sorgfÃ¤ltig Ã¼berlegen, kÃ¶nnen Sie es auf einer separaten Logik zusammenstellen. </font><font style="vertical-align: inherit;">Da die Aufgabe insgesamt jedoch bereits ziemlich umfangreich ist, habe ich beschlossen, dass es einfacher ist, eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachschlagetabelle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aus dem EEPROM zu </font><font style="vertical-align: inherit;">erstellen </font><font style="vertical-align: inherit;">und die Ãœbergangstabelle manuell zu schreiben. </font><font style="vertical-align: inherit;">Es wird 6 EingÃ¤nge haben, was nur 64 Werte bedeutet, die wir einfach in den Hex-Editor fahren kÃ¶nnen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/08/hw/vb08hwgm-lxgjmqawc6zkeigrmm.jpeg"><br>
<a name="snake_head"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kopf</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FÃ¼r eine Kopfpositionsmaschine ist das Schreiben einer solchen Tabelle viel schwieriger. Es enthÃ¤lt jedoch im Wesentlichen nur zwei Operationen: +1 und -1. Sie kÃ¶nnen auf einem 4-Bit-Addierer K155IM6 implementiert werden. FÃ¼r +1 addieren wir unsere Koordinate mit b'0001 und fÃ¼r -1 mit b'1111 (was im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zusÃ¤tzlichen Code</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tatsÃ¤chlich -1 ist </font><font style="vertical-align: inherit;">). Wir brauchen zwei Addierer (fÃ¼r x und y), ein bisschen Logik, und wir werden den Zustand im 8-Bit-Register IR27 speichern (wir brauchen noch viele davon):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gy/d_/zb/gyd_zbcbp4jntzurp2_-zjo2jbk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie es uns auf der Platine zusammenbauen, und zur ÃœberprÃ¼fung werden wir die LED-Matrix sofort mit zwei Decodern verbinden. Der Decoder mit inversen AusgÃ¤ngen ist ID7, und fÃ¼r den direkten wÃ¤re es mÃ¶glich, K561ID1 (CD4028) zu nehmen, aber ich hatte ihn nicht zur Hand. Eine andere MÃ¶glichkeit besteht darin, 8 Transistoren als SchlÃ¼ssel zu verwenden, aber ich wollte dies nicht tun, also musste ich dumm ein anderes EEPROM ausgeben (nur 8 Zellen dort schreiben). </font><i><font style="vertical-align: inherit;">Die Logik der neuen Kopfposition auf einer separaten Platine oben </font></i><b><font style="vertical-align: inherit;">Ein weiterer Exkurs</font></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/ur/bi/oz/urbiozx7zqk7bi33vx3k7oxkglo.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Machen wir eine kurze Pause und bewahren das Steckbrett (und einige Chip-HÃ¼llen) auf. </font><font style="vertical-align: inherit;">Wir werden wieder die Tatsache ausnutzen, dass jede Kombinationsschaltung durch eine LUT ersetzt werden kann, indem die Tabelle in den ROM geschrieben wird. </font><font style="vertical-align: inherit;">Aber wie geht das fÃ¼r einen so groÃŸen Tisch? </font><font style="vertical-align: inherit;">Wir werden einen anderen Trick anwenden - wir werden das Gegenteil tun: Ersetzen Sie das EEPROM durch unsere Logikschaltung und setzen Sie es in den Programmierer ein. </font><sub><i><font style="vertical-align: inherit;">Nicht benutzte Beine sind Ã¼ber WiderstÃ¤nde mit der Erde verbunden. </font></i></sub><sub><i><font style="vertical-align: inherit;">(Dies wÃ¤re nicht mÃ¶glich, wenn Sie sich mit den Einstellungen des ProgrammiergerÃ¤ts befassen.)</font></i></sub><font style="vertical-align: inherit;"> 
Nun lesen wir unser Logikdiagramm als ROM und erhalten eine Tabelle. </font><font style="vertical-align: inherit;">Wir schreiben es mit demselben Programmierer in ein echtes EEPROM, das wir anstelle einer Schaltung aus separaten Elementen einsetzen.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/fr/0d/ve/fr0dve-4fubq-v6y-8ilwnqomfs.jpeg"></a><br>
<sub><i><font style="vertical-align: inherit;"></font></i></sub><br>
<br><font style="vertical-align: inherit;"></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/u0/bm/5u/u0bm5uhoa8tbq9_k79djxlhcnfc.jpeg"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwanz</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Schwanz hat eine LÃ¤nge (in unseren EinschrÃ¤nkungen) von 2 bis 8 Zellen. </font><font style="vertical-align: inherit;">Um diese LÃ¤nge zu speichern, kÃ¶nnen Sie einen herkÃ¶mmlichen ZÃ¤hler mit einer Eingabe fÃ¼r die KontoauflÃ¶sung verwenden. </font><font style="vertical-align: inherit;">TatsÃ¤chlich wird es dieselbe endliche Zustandsmaschine sein, in der der neue Zustand S 'gleich S + 1 oder nur S ist (wenn das Konto verboten ist). </font><font style="vertical-align: inherit;">Den Schwanz selbst (oder besser gesagt die Richtung, in der er wÃ¤chst) werden in zwei Registern mit 8 Bits gespeichert. </font><font style="vertical-align: inherit;">Theoretisch kÃ¶nnte man vorgefertigte Schieberegister (zum Beispiel IR8) nehmen, aber sie waren nicht zur Hand, so dass genau das gleiche IR27 verwendet wurde. </font><font style="vertical-align: inherit;">Bei jedem Schritt wird die aktuelle Kopfbewegungsrichtung in das erste Bit des Registers und der Wert des vorherigen in das zweite und das nÃ¤chste geschrieben. </font><font style="vertical-align: inherit;">Um die Richtung des Schwanzwachstums daraus zu ermitteln, mÃ¼ssen wir nur ein Bit umkehren. </font><font style="vertical-align: inherit;">Sie kÃ¶nnen dies sofort bei der Aufnahme tun, aber ich entschied, dass es besser ist, die Umkehrung fÃ¼r die verbleibende Schaltung zu belassen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Planen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt hat unsere Next-Move-Maschine folgende Form: </font><i><font style="vertical-align: inherit;">Dieses Bild ist (wie alle anderen auch) anklickbar. </font></i><font style="vertical-align: inherit;">
Dies ist ein eher â€reinerâ€œ (aus theoretischer Sicht) Teil des Schemas. </font><font style="vertical-align: inherit;">Fast perfektes Beispiel fÃ¼r eine </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ausgabecodierte Moore-Maschine</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">U1 ist verantwortlich fÃ¼r die neue Richtung, U2 fÃ¼r die Position des Kopfes, die in U5 gespeichert sind. </font><font style="vertical-align: inherit;">U3 und U4 werden fÃ¼r den Schwanz verwendet, und seine LÃ¤nge wird in U6 gespeichert (und erhÃ¶ht). </font><font style="vertical-align: inherit;">
Als nÃ¤chstes mÃ¼ssen wir alles anzeigen, was wir auf dem Bildschirm haben, und es wird auch ein Raumschiff geben, nur in einer schmutzigeren Form. </font><font style="vertical-align: inherit;">Neben einem primitiven Zufallszahlengenerator ein Ãœbergang zwischen Schaltungen mit einem anderen Taktsignal und anderen Hacks.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/vs/ou/yl/vsouyl-r2rmfrwnnniwue9hojuq.png"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zwischensumme</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich hoffe, dass dieser Artikel Sie interessiert hat und ich werde versuchen, den zweiten Teil schnell abzuschlieÃŸen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und wenn Sie bereits in die Schlacht gerissen sind und mit Steckbrettern, Mikroschaltungen und Punktbildschirmen bestÃ¼ckt sind, ist diesem Artikel eine Datei mit der ROM-Schaltung und der Firmware beigefÃ¼gt. </font><font style="vertical-align: inherit;">Mini-Spoiler: Um das Design zu wiederholen, benÃ¶tigen Sie ungefÃ¤hr 6 Prototypen, 4 EEPROM 28C16 und etwas mehr als zwei Dutzend andere Chips. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, wie es sein sollte: wie, teilen, retweeten, sich anmelden, die Glocke drÃ¼cken usw. ...)) Und fÃ¼r heute alles, danke fÃ¼r Ihre Aufmerksamkeit! </font><font style="vertical-align: inherit;">Fortsetzung folgtâ€¦</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archiv mit ROM-Firmware und dem allgemeinen</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
UPD- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Schema</font></a><font style="vertical-align: inherit;"> : Der zweite Teil ist </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verfÃ¼gbar </font><font style="vertical-align: inherit;">.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de502358/index.html">Implementierung von MVP basierend auf ApplicationController und IoC in einer WinForms-Anwendung</a></li>
<li><a href="../de502360/index.html">Grizzly Discharges oder Super Drill</a></li>
<li><a href="../de502362/index.html">Lernereignisverfolgung fÃ¼r Windows: Theorie und Praxis</a></li>
<li><a href="../de502366/index.html">Vergleichen Sie die Arbeit von Open Source Python - Bibliotheken zur Erkennung benannter EntitÃ¤ten</a></li>
<li><a href="../de502368/index.html">Wir pumpen das Laufband</a></li>
<li><a href="../de502372/index.html">Probleme und Prinzipien der Anpassung der Box-Version von Bitrix24</a></li>
<li><a href="../de502374/index.html">FT8-Kommunikationsprotokoll - wie es funktioniert</a></li>
<li><a href="../de502380/index.html">Sellerie + Asyncio</a></li>
<li><a href="../de502382/index.html">Interface Bikes Giftiger GroÃŸvater. "LÃ¼gen, Drohungen und Erpressung." (s1 e6)</a></li>
<li><a href="../de502384/index.html">Spieltheorie und ihre Anwendung im Leben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>