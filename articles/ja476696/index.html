<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤣 🍝 ✋🏾 フルスタックReactアプリケーションを作成してデプロイする方法 👩‍👩‍👦‍👦 🤾 🐎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル！Frank Zickertによる記事「フルスタックのReact-Appをビルドしてデプロイする方法」の翻訳を紹介します。
 
 インフラストラクチャコンポーネントを使用すると、本格的なReactアプリケーションを簡単に作成、実行、デプロイできます。これらのReactコンポーネント...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>フルスタックReactアプリケーションを作成してデプロイする方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476696/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル！</font><font style="vertical-align: inherit;">Frank Zickertによる</font><font style="vertical-align: inherit;">記事</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「フルスタックのReact-Appをビルドしてデプロイする方法」の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳を</font><font style="vertical-align: inherit;">紹介します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インフラストラクチャコンポーネントを使用すると、本格的なReactアプリケーションを簡単に作成、実行、デプロイできます。これらのReactコンポーネントを使用すると、アプリケーションのビジネスロジックの記述に集中できます。その構成について心配する必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フルスタックの開発者になりたいですか？フルスタックアプリケーションは、インタラクティブなReact Webインターフェイスをサーバーとデータベースで補完します。ただし、このようなアプリケーションには、単純な1ページのアプリケーションよりもはるかに多くの設定が必要です。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インフラストラクチャコンポーネント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用してい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらのReactコンポーネントを使用すると、インフラストラクチャアーキテクチャをReactアプリケーションの一部として定義できます。</font><font style="vertical-align: inherit;">Webpack、Babel、Serverlessなどの他の設定は必要なくなりました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開始</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトは次の3つの方法で設定できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムボイラープレートコードを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.infrastructure-components.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からダウンロードします</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または、この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub-repositoryの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クローンを作成し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または手動でライブラリをインストールします。詳細については、この投稿を参照してください。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
依存関係を確立すると（実行</font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、次の1つのコマンドでプロジェクトをビルドできます</font></font><code>npm run build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビルドスクリプトは、package.jsonにさらに3つのスクリプトを追加します。</font></font><br>
<br>
<ul>
<li><code>npm run{your-project-name}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Reactアプリケーションをローカルで起動します（hot-devモード、サーバー部分とデータベースなし）</font></font></li>
<li><code>npm run start-{your-env-name}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソフトウェアスタック全体をローカルで起動します。</font><font style="vertical-align: inherit;">注：データベースをオフラインで実行するには、Java 8 JDKが必要です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDKのインストール方法は次のとおり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font></li>
<li><code>npm run deploy-{your-env-name}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> アプリケーションをAWSにデプロイします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注意。</font><font style="vertical-align: inherit;">アプリケーションをAWSにデプロイするには、これらの権限を持つIAMテクニカルユーザーが必要です。</font><font style="vertical-align: inherit;">次のように、ユーザー資格情報を.envファイルに入れます。</font></font><br>
<br>
<pre><code class="plaintext hljs">AWS_ACCESS_KEY_ID = ***<font></font>
AWS_SECRET_ACCESS_KEY = ***</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> アプリケーションアーキテクチャを定義する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インフラストラクチャコンポーネントに基づくプロジェクトには、明確な構造があります。トップレベルのコンポーネントが1つあります。これは、アプリケーションの全体的なアーキテクチャを定義します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サブコンポーネント（子コンポーネント）は、アプリケーションの動作を調整（拡張）し、機能を追加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の例では、コンポーネント</font></font><code>&lt;ServiceOrientedApp /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は最上位のコンポーネントです。これをデフォルトファイルとしてファイルエントリポイント（</font></font><code>src / index.tsx)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (
   <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ServiceOrientedApp</span>
       <span class="hljs-attr">stackName</span> = <span class="hljs-string">"soa-dl"</span>
       <span class="hljs-attr">buildPath</span> = <span class="hljs-string">'build'</span>
       <span class="hljs-attr">region</span>=<span class="hljs-string">'eu-west-1'</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Environment</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dev"</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">Route</span>
           <span class="hljs-attr">path</span>=<span class="hljs-string">'/'</span>
           <span class="hljs-attr">name</span>=<span class="hljs-string">'My Service-Oriented React App'</span>
           <span class="hljs-attr">render</span>=<span class="hljs-string">{()</span>=&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">DataForm</span> /&gt;</span>}
       /&gt;
       <span class="hljs-tag">&lt;<span class="hljs-name">DataLayer</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"datalayer"</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">UserEntry</span> /&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">GetUserService</span> /&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">AddUserService</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-name">DataLayer</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">ServiceOrientedApp</span>&gt;</span></span>
);</code></pre><br>
 <code>&lt;ServiceOrientedApp /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インタラクティブなWebアプリケーションです。指定した子コンポーネントを使用して、このアプリケーションの機能を明確にする（拡張する）ことができます。これは、コンポーネントをサポートし</font></font><code>&lt;Environment /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>&lt;Route /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>&lt;Service /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>&lt;DataLayer /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<code>&lt;Envrionment /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのランタイムを決定します。たとえば、devバージョンとprodバージョンを使用できます。それぞれを個別に実行およびデプロイできます。</font></font><br>
<br>
<code>&lt;Route /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのページです。これは</font></font><code>&lt;Route /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、react-routerの</font><font style="vertical-align: inherit;">よう</font><font style="vertical-align: inherit;">に機能します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、ルートの操作方法に関するチュートリアル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<code>&lt;Service /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー側で実行される関数を定義します。</font></font><code>&lt;Middleware /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子として</font><font style="vertical-align: inherit;">1つ以上の</font><font style="vertical-align: inherit;">コンポーネントを</font><font style="vertical-align: inherit;">持つことができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<code>&lt;Middleware /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Express.js-middlewareのように動作します。</font></font><br>
<code>&lt;DataLayer /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NoSQLデータベースをアプリケーションに追加します。</font><font style="vertical-align: inherit;">&lt;Entry /&gt;-コンポーネントを子として受け入れます。</font><font style="vertical-align: inherit;">&lt;Entry /&gt;は、データベース内のアイテムのタイプを示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのコンポーネントは、フルスタックアプリケーションを作成するために必要なすべてです。</font><font style="vertical-align: inherit;">ご覧のとおり、このアプリケーションには、1つのランタイム、1つのページ、2つのサービス、および1つのレコードを持つデータベースがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネント構造は、アプリケーションの明確なビューを提供します。</font><font style="vertical-align: inherit;">アプリケーションが大きくなるほど、それは重要になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたはあなた</font></font><code>&lt;Service /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がの子供で</font><font style="vertical-align: inherit;">あることに気づいたかもしれません</font></font><code>&lt;DataLayer /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これには簡単な説明があります。</font><font style="vertical-align: inherit;">私たちは、サービスがデータベースにアクセスできるようにしたいと考えています。</font><font style="vertical-align: inherit;">とても簡単です！</font></font><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベース設計</font></font></h2><br>
<code>&lt;DataLayer /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon DynamoDBを作成します。</font><font style="vertical-align: inherit;">これはKey-Valueデータベース（NoSQL）です。</font><font style="vertical-align: inherit;">あらゆる規模で高性能を発揮します。</font><font style="vertical-align: inherit;">ただし、リレーショナルデータベースとは異なり、複雑なクエリはサポートしていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベーススキーマには</font></font><code>primaryKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>rangeKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">との</font><font style="vertical-align: inherit;">3つのフィールド</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">あり</font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">キーによってのみエントリを検索できることを知っておく必要があるため、これは重要です。</font><font style="vertical-align: inherit;">による</font></font><code>primaryKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、またはによる</font></font><code>rangeKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、または両方による。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この知識を得て、私たちを見てみましょう</font></font><code>&lt;Entry /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> USER_ENTRY_ID = <span class="hljs-string">"user_entry"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">UserEntry</span> (<span class="hljs-params">props</span>)  </span>{
	<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Entry</span>
    	<span class="hljs-attr">id</span>=<span class="hljs-string">{</span> <span class="hljs-attr">USER_ENTRY_ID</span> }
        <span class="hljs-attr">primaryKey</span>=<span class="hljs-string">"username"</span>
        <span class="hljs-attr">rangeKey</span>=<span class="hljs-string">"userid"</span>
    	<span class="hljs-attr">data</span>=<span class="hljs-string">{{</span>
        	<span class="hljs-attr">age:</span> <span class="hljs-attr">GraphQLString</span>,
        	<span class="hljs-attr">address:</span> <span class="hljs-attr">GraphQLString</span>
    	}}
	/&gt;</span></span>
};</code></pre><br>
<code>&lt;Entry /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データの構造を説明します。</font><font style="vertical-align: inherit;">primaryKeyとrangeKeyの名前を定義します。</font><font style="vertical-align: inherit;">ここにあるDynamoDBキーワード以外の名前を使用できます。</font><font style="vertical-align: inherit;">ただし、使用する名前には機能的な意味があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースにアイテムを追加するとき、これらのキー名の値を提供する必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方のキーの組み合わせは、データベース内の一意の要素を表します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 同じキー名を持つ別の&lt;Entry /&gt;があってはなりません（1つの名前は同じかもしれませんが、両方ではありません）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">少なくとも1つのキー名の値がある場合にのみ、データベース内の要素を見つけることができます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、これは次のことを意味します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各ユーザーにはユーザー名とユーザーIDが必要です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じユーザー名と同じユーザーIDを持つ2番目のユーザーは存在できません。</font><font style="vertical-align: inherit;">データベースの観点から見ると、2人のユーザーが異なるユーザーIDを持っているときに2人のユーザーが同じユーザー名を持っていれば（またはその逆も）いいでしょう。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースにprimaryKey = "username"およびrangeKey = "userid"の別の&lt;Entry /&gt;を含めることはできません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー名または</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー</font><font style="vertical-align: inherit;">名がある場合は、データベースでユーザーを照会できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、年齢や住所でのご請求はできません。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースにアイテムを追加する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、2つの</font></font><code>&lt;Service /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント</font><font style="vertical-align: inherit;">を識別しました</font></font><code>&lt;ServiceOrientedApp /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code> POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーをデータベースに追加する</font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-service </font><font style="vertical-align: inherit;">、およびユーザーをデータベース</font><font style="vertical-align: inherit;">から抽出する-service。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
から始めましょう</font></font><code>&lt;AddUserService /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このサービスのコードは次のとおりです。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> {<font></font>
	callService,<font></font>
	Middleware,<font></font>
	mutate,<font></font>
	Service,<font></font>
    serviceWithDataLayer<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">"infrastructure-components"</span>;<font></font>
<font></font>
<span class="hljs-keyword">import</span> { USER_ENTRY_ID, IUserEntry } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user-entry'</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> ADDUSER_SERVICE_ID = <span class="hljs-string">"adduser"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AddUserService</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Service</span>
    	<span class="hljs-attr">id</span>=<span class="hljs-string">{</span> <span class="hljs-attr">ADDUSER_SERVICE_ID</span> }
        <span class="hljs-attr">path</span>=<span class="hljs-string">"/adduser"</span>
        <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>&gt;</span>
     	<span class="hljs-tag">&lt;<span class="hljs-name">Middleware</span>
            <span class="hljs-attr">callback</span>=<span class="hljs-string">{serviceWithDataLayer(async</span> <span class="hljs-attr">function</span> (<span class="hljs-attr">dataLayer</span>, <span class="hljs-attr">req</span>, <span class="hljs-attr">res</span>, <span class="hljs-attr">next</span>) {
                <span class="hljs-attr">const</span> <span class="hljs-attr">parsedBody:</span> <span class="hljs-attr">IUserEntry</span> = <span class="hljs-string">JSON.parse(req.body);</span>
 
                <span class="hljs-attr">await</span> <span class="hljs-attr">mutate</span>(
                    <span class="hljs-attr">dataLayer.client</span>,
                    <span class="hljs-attr">dataLayer.setEntryMutation</span>(<span class="hljs-attr">USER_ENTRY_ID</span>, <span class="hljs-attr">parsedBody</span>)
                );
 
                <span class="hljs-attr">res.status</span>(<span class="hljs-attr">200</span>)<span class="hljs-attr">.set</span>({
                    "<span class="hljs-attr">Access-Control-Allow-Origin</span>" <span class="hljs-attr">:</span> "*", // <span class="hljs-attr">Required</span> <span class="hljs-attr">for</span> <span class="hljs-attr">CORS</span> <span class="hljs-attr">support</span> <span class="hljs-attr">to</span> <span class="hljs-attr">work</span>
            	})<span class="hljs-attr">.send</span>("<span class="hljs-attr">ok</span>");
 
        	})}/&gt;</span>
 
	<span class="hljs-tag">&lt;/<span class="hljs-name">Service</span>&gt;</span></span>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネント</font></font><code>&lt;Service /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-3つのパラメーターを受け入れます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">識別子（</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は一意の文字列である必要があります。</font><font style="vertical-align: inherit;">他のコンポーネント</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を参照する必要がある場合は、</font><font style="vertical-align: inherit;">識別子（</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を使用し</font></font><code>service</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パス（</font></font><code>path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）（/付き）は、サービスURLの相対パスを示します</font></font></li>
<li>(<code>method</code>)     <code>GET</code>, <code>POST</code>, <code>UPDATE</code>, <code>DELETE</code>.   HTTP-,      .</li>
</ul><br><font style="vertical-align: inherit;"></font><code>&lt;Middleware /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子供として</font><font style="vertical-align: inherit;">
追加</font><font style="vertical-align: inherit;">しています。これ</font></font><code>&lt;Middleware /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はパラメータとしてコールバック関数を取ります。 Express.jsミドルウェアを直接提供できます。データベースにアクセスしたいので、関数をでラップします</font></font><code>serviceWithDataLayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは</font></font><code>dataLayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、コールバックの最初のパラメーターとして</font><font style="vertical-align: inherit;">追加さ</font><font style="vertical-align: inherit;">れます。</font></font><br>
<br>
<code>DataLayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースへのアクセスを提供します。方法を見てみましょう！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非同期関数</font></font><code>mutate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、データベース内のデータに変更を適用します。これには、パラメーターとしてクライアントと変異コマンドが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要素データは、必要なすべてのキーと値のペアを持つJavascriptオブジェクトです。サービスでは、リクエストの本文からこのオブジェクトを取得します。以下のため</font></font><code>User</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のオブジェクトは、以下の構造を有します：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> interface IUserEntry {
	<span class="hljs-attr">username</span>: string,
	<span class="hljs-attr">userid</span>: string,
	<span class="hljs-attr">age</span>: string,
	<span class="hljs-attr">address</span>: string<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このオブジェクトは、で</font><font style="vertical-align: inherit;">定義し</font><font style="vertical-align: inherit;">た名前</font></font><code>primaryKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>rangeKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのデータキーを</font><font style="vertical-align: inherit;">受け入れ</font><font style="vertical-align: inherit;">ます</font></font><code>&lt;Entry /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：現在サポートされているタイプは、&lt;Entry /&gt;の定義でGraphQLStringに一致する文字列のみです。</font><font style="vertical-align: inherit;">ボディから</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データを取得することを前述</font></font><code>IUserEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しました。</font><font style="vertical-align: inherit;">これはどのように起こりますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インフラストラクチャコンポーネントは、非同期機能を提供します</font></font><code>callService (serviceId, dataObject)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この関数は、サービス識別子、Javascriptオブジェクト（使用時にリクエストボディとして送信される</font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、関数</font></font><code>success</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、およびエラーコールバック</font><font style="vertical-align: inherit;">関数を受け入れ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のスニペットは、この関数を使用してを呼び出す方法を示しています</font></font><code>&lt;AddUserService /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">を示します</font></font><code>serviceId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして合格</font></font><code>userData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これを関数のパラメーターとして使用します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callAddUserService</span> (<span class="hljs-params">userData: IUserEntry</span>) </span>{
	<span class="hljs-keyword">await</span> callService(<font></font>
    	ADDUSER_SERVICE_ID,<font></font>
    	userData,<font></font>
    	(data: any) =&gt; {<font></font>
        	<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"received data: "</span>, data);<font></font>
    	},<font></font>
    	(error) =&gt; {<font></font>
        	<span class="hljs-built_in">console</span>.log(<span class="hljs-string">"error: "</span> , error)<font></font>
    	}<font></font>
	);<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、</font></font><code>callAddUserService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいユーザーを追加するときに必要なのは関数だけです。</font><font style="vertical-align: inherit;">たとえば、ユーザーがボタンをクリックしたときに呼び出します。</font></font><br>
<br>
<pre><code class="javascript hljs">&lt;button onClick={() =&gt; callAddUserService({
	<span class="hljs-attr">username</span>: username,
	<span class="hljs-attr">userid</span>: userid,
	<span class="hljs-attr">age</span>: age,
	<span class="hljs-attr">address</span>: address<font></font>
})}&gt;Save&lt;/button&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これをオブジェクトで呼び出すだけ</font></font><code>IUserEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">識別子（</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）で</font><font style="vertical-align: inherit;">示されるように、正しいサービスを呼び出します</font><font style="vertical-align: inherit;">。</font></font><code>userData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエストボディ</font><font style="vertical-align: inherit;">に入れ</font><font style="vertical-align: inherit;">ます。</font></font><code>&lt;AddUserService /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本文からデータを取得し、データベースに入れます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースからアイテムを取得する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースからアイテムを取得するのは、アイテムを追加するのと同じくらい簡単です。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GetUserService</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Service</span>
    	<span class="hljs-attr">id</span>=<span class="hljs-string">{</span> <span class="hljs-attr">GETUSER_SERVICE_ID</span> }
    	<span class="hljs-attr">path</span>=<span class="hljs-string">"/getuser"</span>
    	<span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span>&gt;</span>
 
    	<span class="hljs-tag">&lt;<span class="hljs-name">Middleware</span>
            <span class="hljs-attr">callback</span>=<span class="hljs-string">{serviceWithDataLayer(async</span> <span class="hljs-attr">function</span> (<span class="hljs-attr">dataLayer</span>, <span class="hljs-attr">req</span>, <span class="hljs-attr">res</span>, <span class="hljs-attr">next</span>) {
        	
            	<span class="hljs-attr">const</span> <span class="hljs-attr">data</span> = <span class="hljs-string">await</span> <span class="hljs-attr">select</span>(
                	<span class="hljs-attr">dataLayer.client</span>,
                    <span class="hljs-attr">dataLayer.getEntryQuery</span>(<span class="hljs-attr">USER_ENTRY_ID</span>, {
                    	<span class="hljs-attr">username:</span> <span class="hljs-attr">req.query.username</span>,
                    	<span class="hljs-attr">userid:</span> <span class="hljs-attr">req.query.userid</span>
       	         })
            	);
 
            	<span class="hljs-attr">res.status</span>(<span class="hljs-attr">200</span>)<span class="hljs-attr">.set</span>({
                    "<span class="hljs-attr">Access-Control-Allow-Origin</span>" <span class="hljs-attr">:</span> "*", // <span class="hljs-attr">Required</span> <span class="hljs-attr">for</span> <span class="hljs-attr">CORS</span> <span class="hljs-attr">support</span> <span class="hljs-attr">to</span> <span class="hljs-attr">work</span>
            	})<span class="hljs-attr">.send</span>(<span class="hljs-attr">JSON.stringify</span>(<span class="hljs-attr">data</span>));
 
        	})}/&gt;</span>
 
	<span class="hljs-tag">&lt;/<span class="hljs-name">Service</span>&gt;</span></span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでも、&lt;Service /&gt;、&lt;Middleware /&gt;、およびデータベースにアクセスできるコールバック関数を使用します。</font><font style="vertical-align: inherit;">データベースにアイテムを追加する</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数の代わりに、関数</font></font><code>mutate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用します</font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。この関数は、取得するクライアントを要求します</font></font><code>dataLayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 2番目のパラメーターはコマンド</font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。チームと同じように</font></font><code>mutation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々はチームを作成することができます</font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font></font><code>dataLayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回は関数を使用します</font></font><code>getEntryQuery</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">受け取りたい要素の</font><font style="vertical-align: inherit;">識別子（</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を提供</font></font><code>&lt;Entry /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">します。また</font><font style="vertical-align: inherit;">、JavaScriptオブジェクトの特定の要素に</font><font style="vertical-align: inherit;">キー（</font></font><code>primaryKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>rangeKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を提供します</font><font style="vertical-align: inherit;">。両方のキーを提供するため、1つの要素が返されます。存在する場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、リクエストからキー値を取得しています。しかし、今回はから</font></font><code>request.query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ではなくから</font><font style="vertical-align: inherit;">取得します</font></font><code>request.body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。その理由は、このサービスが</font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-methodを</font><font style="vertical-align: inherit;">使用するためです</font><font style="vertical-align: inherit;">。このメソッドは、リクエストの本文をサポートしていません。ただし、すべてのデータはクエリパラメータとして提供されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数</font></font><code>callService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がこれを処理します。のように</font></font><code>callAddUserService-function</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">呼び出す</font><font style="vertical-align: inherit;">識別子（</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を提供</font></font><code> &lt;Service /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">します。必要なデータを提供します。ここでは鍵のみです。そして、コールバック関数を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コールバックが成功すると、応答が返されます。 json形式の応答本文には、見つかった要素が含まれています。キーを介してこのアイテムにアクセスできます</font></font><code>get_user_entry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 " </font></font><code>Get_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"選択関数に配置したクエリを定義します。 」</font></font><code>User_entry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「私たちの鍵です</font></font><code>&lt;Entry /&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callGetUserService</span> (<span class="hljs-params">username: string, userid: string, onData: (userData: IUserEntry</span>) =&gt; <span class="hljs-title">void</span>) </span>{<font></font>
 <font></font>
	<span class="hljs-keyword">await</span> callService(<font></font>
        GETUSER_SERVICE_ID,<font></font>
    	{<font></font>
        	<span class="hljs-attr">username</span>: username,
        	<span class="hljs-attr">userid</span>: userid<font></font>
    	},<font></font>
    	<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response: any</span>) </span>{
            <span class="hljs-keyword">await</span> response.json().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                <span class="hljs-built_in">console</span>.log(data[<span class="hljs-string">`get_<span class="hljs-subst">${USER_ENTRY_ID}</span>`</span>]);<font></font>
                onData(data[<span class="hljs-string">`get_<span class="hljs-subst">${USER_ENTRY_ID}</span>`</span>]);<font></font>
        	});<font></font>
    	},<font></font>
    	(error) =&gt; {<font></font>
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"error: "</span> , error)<font></font>
    	}<font></font>
	);<font></font>
 <font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動作中のフルスタックアプリを見てください。</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリをまだ起動していない場合は、今すぐ実行してください</font></font><code>npm run start-{your-env-name}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単一のコマンドでアプリケーションをAWSにデプロイすることもできます</font></font><code>npm run deploy-{your-env-name}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">（AWS認証情報を.envファイルに含めることを忘れないでください）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この投稿では、データベースに入力したデータの入力方法と結果の表示方法については説明していません。</font></font><code>callAddUserService </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして</font></font><code>callGetUserService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスやデータベースに固有のすべてをカプセル化します。</font><font style="vertical-align: inherit;">JavaScriptオブジェクトをそこに配置して、それを取り戻すだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubリポジトリに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、この例のソースコードがあり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">非常にシンプルなユーザーインターフェイスが含まれています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476682/index.html">Phaserでサッパーを作成し、HTML5開発者テストタスクを実行する方法</a></li>
<li><a href="../ja476686/index.html">Raspberry CM3 +に基づくIoTゲートウェイの開発</a></li>
<li><a href="../ja476688/index.html">OTUSからの新しいコース。「IOS開発者。上級コースV 2.0»</a></li>
<li><a href="../ja476692/index.html">コンテンツマーケティングの原則</a></li>
<li><a href="../ja476694/index.html">Farida Roslovets氏とエレクトロニークRPA企業のディレクターによるビジネスロボット化について</a></li>
<li><a href="../ja476698/index.html">Как Apple убивает веб технологии</a></li>
<li><a href="../ja476700/index.html">鋼ラジエーターの生産における混乱</a></li>
<li><a href="../ja476702/index.html">奥地の小さな町がいかにして国際的なeコマースの中心地になったか</a></li>
<li><a href="../ja476704/index.html">同じタイプの要素を持つ電子メールのレイアウトを自動化する方法：スマートオブジェクトを使用します</a></li>
<li><a href="../ja476706/index.html">Cerebras Systemsは、世界最大のプロセッサを搭載した22×22センチメートルのコンピュータを発表しました</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>