<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆚 👩🏼‍🎤 🏞️ Installation de ou-tools avec SCIP et GLPK dans un environnement virtuel Python 3.7 sous Linux 👼🏽 👆🏼 👨🏽‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'ai décidé de participer au concours et il a fallu lui utiliser des packages pour résoudre des problèmes d'optimisation. J'ai choisi l'outil ou les o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Installation de ou-tools avec SCIP et GLPK dans un environnement virtuel Python 3.7 sous Linux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488346/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai décidé de participer au </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concours</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et il a fallu lui utiliser des packages pour résoudre des problèmes d'optimisation. J'ai choisi l'outil ou les outils Google, qui est une interface pour différents solveurs (ou résolus? Solveurs?). Il contient plusieurs outils d'optimisation, mais les créateurs revendiquent la prise en charge de plusieurs packages externes, notamment Gurobi commercial et CPLEX. Cependant, nous ne sommes pas riches et nous utiliserons gratuitement SCIP et GLPK (d'un développeur national, en passant). À ma grande surprise, pas une seule instruction sur la façon de faire fonctionner toute cette splendeur dans un environnement virtuel en python, je ne l'ai pas trouvé sur les espaces ouverts de nos segments Internet et anglophones et j'ai dû bricoler un peu. Pour ceux qui sont pressés, lisez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, Je suggère au reste de se familiariser avec la qualité douteuse de ma graphomanie, qui décrit les hauts et les bas de l'installation du logiciel Google. </font><font style="vertical-align: inherit;">Oui, j'ai oublié de dire tout de suite que tout était installé dans Manjaro Linux.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/75/gw/8m/75gw8mhfuapb7_nnlw5sqojqqsy.jpeg"><a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premiers pas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les trois packages existent dans le référentiel python, nous installons donc depuis via pip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chacun d'eux a sa propre interface, et or-tools a été choisi juste pour essayer différents packages, sans réécriture importante du programme, donc la tâche est que or-tools récupère ces solveurs et les laisse s'exécuter. Et qu'en penses-tu? Installé via pip ou-tools ne voit pas les solveurs installés via pip, et ils ne le voient pas (qui aurait pensé). Donc, vous devez toujours regarder ce qu'ils écrivent dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur les quais, ils écrivent ce qui doit être collecté à la source afin que or-tools récupère les packages externes. Nous essayons de collecter, et rien ne sort, car les solveurs installés via pip ne sont pas visibles.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, les moyens les plus simples d'installer tous les packages via pip ne fonctionnent pas, car or-tools ne tire pas les solveurs, les solveurs n'installent pas les bibliothèques comme le veut or-tools, tout le monde vous déforme, ils vous appellent stupide et rient de toutes les manières possibles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus loin dans les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docks, ils</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> écrivent qu'il est nécessaire de collecter les solveurs à partir des codes source, puis de la source pour collecter les outils eux-mêmes. À peine dit que c'était fait! SCIP installé, GLPK installé, mais la question qui se posait non décrite dans la documentation était de savoir comment mettre ou-tools dans un environnement virtuel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La seule commande make python sur les docks installe le paquet globalement sur le système (étonnamment, hein?).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, j'ai eu de la chance: au cours d'une recherche d'ingénierie utilisant la méthode du singe sans fin, j'ai accidentellement tapé make help et on m'a donné une liste de toutes les options de construction de or-tools, parmi lesquelles la possibilité de construire un package de roues. </font><font style="vertical-align: inherit;">Il s'agit de la commande make python_package, si cela (je le répéterai à la fin). </font><font style="vertical-align: inherit;">Alors, est-il temps de construire et de lancer?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dn/qt/ik/dnqtikqqxkpq0cikdeztah5vbhy.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous cherchez un problème</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rien ne fonctionne à la phase de construction de or-tools, cela ne jure que par les mauvaises bibliothèques GLPK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s7/jk/hf/s7jkhfkk7dsth24dsdu0nioeoeo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La construction avec SCIP avec les paramètres de la documentation est réussie, mais or-tools refuse toujours de fonctionner au moment de l'importation. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zo/wi/z0/zowiz0hm9zym0_ujyvnje0doxbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je n'ai pas pu trouver de solution à ces problèmes par moi-même, alors je suis allé voir les développeurs github pour demander pourquoi l'installation selon leurs instructions produit des erreurs quelque part dans leur code. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/oa/yr/ftoayrje4g6tl7kx2mfbcadualw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hmm, merci pour les clarifications.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pendant que j'attendais une réponse sur le github, j'ai fouillé sur Internet, espérant trouver quelque chose qui pourrait m'aider. Et comme ce n'est pas surprenant, je l'ai trouvé. C'était </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dirigé par </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">une</font></a><font style="vertical-align: inherit;"> équipe de projet où il a écrit sur la façon de lier GLPK à des outils or. Et cette méthode a finalement fonctionné! Maintenant, si vous construisez tout sans SCIP, mais avec GLPK, vous pouvez même travailler avec cela. Déjà des progrès.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, le chef d'équipe or-tools n'a pas conseillé d'utiliser GLPK, disant que les résultats ne sont pas importants, et je veux toujours vaincre SCIP et le faire fonctionner. </font><font style="vertical-align: inherit;">Voisins </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans le blog est tombé sur l'idée que package de </font><font style="vertical-align: inherit;">version de </font><font style="vertical-align: inherit;">Google fonctionne avec les </font><font style="vertical-align: inherit;">versions spécifiques. </font><font style="vertical-align: inherit;">Nous regardons la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liste des changements de version</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et y voyons une indication explicite de la version 6.0.0. </font><font style="vertical-align: inherit;">Malgré le fait que la version 6.0.2 soit indiquée dans le makefile, nous essayons d'installer une version plus ancienne et le tour est joué! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant encore, une séquence d'actions de travail.</font></font><br>
<a name="guide"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Séquence d'installation</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Téléchargez l'archive SCIP, en vous assurant qu'il </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">existe un</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> support clairement indiqué pour la version que vous téléchargez (dans mon cas, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">developers.google.com/optimization/support/release_notes#support-for-scip-6.0.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et décompressez.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Téléchargez GLPK (au moment de publier la dernière version 4.65) et décompressez.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer la commande SCIP </font></font><br>
<br>
<pre><code class="bash hljs">make GMP=<span class="hljs-literal">false</span> READLINE=<span class="hljs-literal">false</span> TPI=tny ZIMPL=<span class="hljs-literal">false</span> scipoptlib install INSTALLDIR=&lt;path&gt;/scipoptsuite-6.0.0
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez GLPK avec la commande:</font></font><br>
<br>
<pre><code class="bash hljs">./configure --prefix=&lt;install_path&gt; --with-pic --<span class="hljs-built_in">enable</span>-shared<font></font>
make<font></font>
make install<font></font>
</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Télécharger OR-Tools depuis github</font></font><br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/google/or-tools</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez OR-Tools avec les commandes:</font></font><br>
<br>
<pre><code class="bash hljs">make third_party<font></font>
make python_package<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la dernière commande ne fonctionne pas, installez wheel avec la commande:</font></font><br>
<br>
<pre><code class="bash hljs">pip install wheel</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour activer l'environnement virtuel, allez dans le dossier contenant le package Python et installez-le à partir de là. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous devez installer non pas dans un environnement virtuel, mais globalement pour l'ensemble du système:</font></font><br>
<br>
<pre><code class="bash hljs">make python_package</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
exécutez la commande:</font></font><br>
<br>
<pre><code class="bash hljs">make python
</code></pre></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr488332/index.html">Zéro, un, deux, Freddy viendra te chercher</a></li>
<li><a href="../fr488336/index.html">Conseils d'utilisation de l'algorithme de réduction de la fonction d'onde</a></li>
<li><a href="../fr488338/index.html">Stages Google: Zurich, Londres et Silicon Valley</a></li>
<li><a href="../fr488340/index.html">Profession: Développeur Backend</a></li>
<li><a href="../fr488342/index.html">Random Forest, la méthode des principaux composants et l'optimisation des hyperparamètres: un exemple de résolution du problème de classification en Python</a></li>
<li><a href="../fr488348/index.html">Webinaire «Les dix principaux défis agiles et les moyens de les surmonter en une heure» 17 février à 20 h, heure de Moscou</a></li>
<li><a href="../fr488352/index.html">Comparaison des coûts VDI: sur site et cloud public</a></li>
<li><a href="../fr488356/index.html">Formation à l'Université technique maritime de Saint-Pétersbourg pour les produits Dassault Systèmes</a></li>
<li><a href="../fr488360/index.html">Mythes du Big Data et culture numérique</a></li>
<li><a href="../fr488362/index.html">Classification multi-taguée</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>