<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏻 👨🏻‍🎨 🈁 Laravel：基本的な概念を分析します。パート3：最終 👀 🐩 👦🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="OTUSからの新しいコース「Framework Laravel」の開始まで数日残っています。コースの開始を見越して、Laravelの基本概念に関する著者の出版物の最後の部分を共有します。重要：このシリーズの出版物は、コースの教育プログラムとは関係がなく、初心者には少し役立つ資料です。コースプログラム...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Laravel：基本的な概念を分析します。パート3：最終</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/473114/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OTUSからの新しいコース</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Framework Laravel」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の開始まで数日残ってい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">コースの開始を見越して、Laravelの基本概念に関する著者の出版物の最後の部分を共有します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要：このシリーズの出版物は、コースの教育プログラムとは関係がなく、初心者には少し役立つ資料です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コースプログラムは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/yx/1u/tr/yx1utrpgu8ucbkhazc8ktkfww7w.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 前回の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ユーザーがログインして登録し、説明、カバー、名前でアルバムを作成できるギャラリーの作成を開始しました。</font><font style="vertical-align: inherit;">作成されたアプリケーションには私たちの主要な意味が</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり、今それを少し拡張する必要があります。</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 また、既存のコードは少し改善する価値が</font><font style="vertical-align: inherit;">あり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに2つのコントローラー- </font></font><code>AlbumController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とがあり</font></font><code>ImageController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">文字列の操作を担当する追加クラスのインポートを追加します。</font></font><br>
<br>
<pre><code class="plaintext hljs">    use Illuminate\Support\Str;   
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 そして、データベース内のランダムな画像名の生成を担当する行を変更します。</font></font><br>
<br>
<pre><code class="plaintext hljs">     $random_name = Str::random(8);
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 さらに、アプリケーションの信頼性を高めるために移行コードを少し変更する価値があります。ユーザーはフィールドを空白のままにする権利を持っている必要があります</font></font><code>description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（それ以外の場合は、ダイナマイトを持つLaravelがエラーを通知します）。</font><font style="vertical-align: inherit;">画像テーブルに関連付けられている移行に進み、画像の説明に関連する行を次のように修正します。</font></font><br>
<br>
<pre><code class="php hljs">     $table-&gt;string(<span class="hljs-string">'description'</span>)-&gt;nullable();
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 さて、アプリケーションの「リファクタリング」が終了しました。</font><font style="vertical-align: inherit;">次に、アプリケーションの外観を完成させる必要があります。</font><font style="vertical-align: inherit;">ユーザーがアルバムを作成できるフォームを作成し</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ファイル</font></font><code>addimage.blade.php</code><br>
<br>
<pre><code class="php hljs">    @<span class="hljs-keyword">include</span>(<span class="hljs-string">'includes.header'</span>)<font></font>
      &lt;body&gt;<font></font>
    @<span class="hljs-keyword">include</span>(<span class="hljs-string">'includes.nav'</span>)<font></font>
        &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">container</span>" <span class="hljs-title">style</span>="<span class="hljs-title">text</span>-<span class="hljs-title">align</span>: <span class="hljs-title">center</span>;"&gt;
          &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">span4</span>" <span class="hljs-title">style</span>="<span class="hljs-title">display</span>: <span class="hljs-title">inline</span>-<span class="hljs-title">block</span>; <span class="hljs-title">margin</span>-<span class="hljs-title">top</span>:100<span class="hljs-title">px</span>;"&gt;
            @<span class="hljs-title">if</span> (<span class="hljs-title">isset</span>($<span class="hljs-title">errors</span>) &amp;&amp; $<span class="hljs-title">errors</span>-&gt;<span class="hljs-title">has</span>(''))
              &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">alert</span> <span class="hljs-title">alert</span>-<span class="hljs-title">block</span> <span class="hljs-title">alert</span>-<span class="hljs-title">error</span> <span class="hljs-title">fade</span> <span class="hljs-title">in</span>"<span class="hljs-title">id</span>="<span class="hljs-title">error</span>-<span class="hljs-title">block</span>"&gt;
               &lt;?<span class="hljs-title">php</span>
                $<span class="hljs-title">messages</span> = $<span class="hljs-title">errors</span>-&gt;<span class="hljs-title">all</span>('&lt;<span class="hljs-title">li</span>&gt;:<span class="hljs-title">message</span>&lt;/<span class="hljs-title">li</span>&gt;');
               ?&gt;
    &lt;<span class="hljs-title">button</span> <span class="hljs-title">type</span>="<span class="hljs-title">button</span>" <span class="hljs-title">class</span>="<span class="hljs-title">close</span>"<span class="hljs-title">data</span>-<span class="hljs-title">dismiss</span>="<span class="hljs-title">alert</span>"&gt;×&lt;/<span class="hljs-title">button</span>&gt;
                &lt;<span class="hljs-title">h4</span>&gt;<span class="hljs-title">Warning</span>!&lt;/<span class="hljs-title">h4</span>&gt;
                &lt;<span class="hljs-title">ul</span>&gt;
                  @<span class="hljs-title">foreach</span>($<span class="hljs-title">messages</span> <span class="hljs-title">as</span> $<span class="hljs-title">message</span>)
                    </span>{{$message}}<font></font>
                  @<span class="hljs-keyword">endforeach</span><font></font>
                &lt;/ul&gt;<font></font>
              &lt;/div&gt;<font></font>
            @<span class="hljs-keyword">endif</span>
            &lt;form name=<span class="hljs-string">"createnewalbum"</span> method=<span class="hljs-string">"POST"</span>action=<span class="hljs-string">"{{route('create_album')}}"</span> enctype=<span class="hljs-string">"multipart/form-data"</span>&gt;<font></font>
              {{ csrf_field() }}<font></font>
              &lt;fieldset&gt;<font></font>
              &lt;legend&gt; &lt;/legend&gt;<font></font>
               &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">form</span>-<span class="hljs-title">group</span>"&gt;
               &lt;<span class="hljs-title">label</span> <span class="hljs-title">for</span>="<span class="hljs-title">name</span>"&gt; &lt;/<span class="hljs-title">label</span>&gt;
     &lt;<span class="hljs-title">input</span> <span class="hljs-title">name</span>="<span class="hljs-title">name</span>" <span class="hljs-title">type</span>="<span class="hljs-title">text</span>" <span class="hljs-title">class</span>="<span class="hljs-title">form</span>-<span class="hljs-title">control</span>"<span class="hljs-title">placeholder</span>=" " <span class="hljs-title">value</span>="</span>{{old(<span class="hljs-string">'name'</span>)}}<span class="hljs-string">"&gt;
                &lt;/div&gt;
                &lt;div class="</span>form-group<span class="hljs-string">"&gt;
               &lt;label for="</span>description<span class="hljs-string">"&gt; &lt;/label&gt;
               &lt;textarea name="</span>description<span class="hljs-string">" type="</span>text<span class="hljs-string">"class="</span>form-control<span class="hljs-string">" placeholder="</span> <span class="hljs-string">"&gt;{{old('descrption')}}&lt;/textarea&gt;
            &lt;/div&gt;
           &lt;div class="</span>form-group<span class="hljs-string">"&gt;
        &lt;label for="</span>cover_image<span class="hljs-string">"&gt;   &lt;/label&gt;
              {{Form::file('cover_image')}}
            &lt;/div&gt;
      &lt;button type="</span>submit<span class="hljs-string">" class=«btn btn-default"</span>&gt;!&lt;/button&gt;<font></font>
              &lt;/fieldset&gt;<font></font>
            &lt;/form&gt;<font></font>
          &lt;/div&gt;<font></font>
        &lt;/div&gt; <font></font>
        &lt;script src=<span class="hljs-string">"https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"</span>&gt;&lt;/script&gt;<font></font>
        &lt;script src=<span class="hljs-string">"//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"</span>&gt;&lt;/script&gt;<font></font>
      &lt;/body&gt;<font></font>
    &lt;/html&gt;<font></font>
    </code></pre><br><font style="vertical-align: inherit;"></font><code>includes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページ</font><font style="vertical-align: inherit;">
 の</font><font style="vertical-align: inherit;">上部には、前の部分で説明したナビゲーションとライブラリが使用されている</font><font style="vertical-align: inherit;">ことを思い出し</font><font style="vertical-align: inherit;">てください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、外観を追加する必要があります</font></font><code>album.blade.php</code><br>
<br>
<pre><code class="plaintext hljs">    @include('includes.header')<font></font>
      &lt;body&gt;<font></font>
      @include('includes.nav')<font></font>
        &lt;div class="container"&gt;<font></font>
       &lt;div class="starter-template"&gt;<font></font>
            &lt;div class="media"&gt;<font></font>
              &lt;img class="media-object pull-left"alt="{{$album-&gt;name}}" src="/albums/{{$album-&gt;cover_image}}" width="350px"&gt;<font></font>
              &lt;div class="media-body"&gt;<font></font>
                &lt;h2 class="media-heading" style="font-size: 26px;"&gt; :&lt;/h2&gt;<font></font>
                &lt;p&gt;{{$album-&gt;name}}&lt;/p&gt;<font></font>
              &lt;div class="media"&gt;<font></font>
              &lt;h2 class="media-heading" style="font-size: 26px;"&gt;  :&lt;/h2&gt;<font></font>
              &lt;p&gt;{{$album-&gt;description}}&lt;p&gt;<font></font>
              &lt;a href="{{route('add_image',array('id'=&gt;$album-&gt;id))}}"&gt;&lt;button type="button"class="btn btn-primary btn-large"&gt;    &lt;/button&gt;&lt;/a&gt;<font></font>
              &lt;a href="{{route('delete_album',array('id'=&gt;$album-&gt;id))}}" onclick="return confirm(' ?')"&gt;&lt;button type="button"class="btn btn-danger btn-large"&gt; &lt;/button&gt;&lt;/a&gt;<font></font>
            &lt;/div&gt;<font></font>
          &lt;/div&gt;<font></font>
        &lt;/div&gt;<font></font>
        &lt;/div&gt;<font></font>
        &lt;div class="row"&gt;<font></font>
            @foreach($album-&gt;Photos as $photo)<font></font>
              &lt;div class="col-lg-3"&gt;<font></font>
                &lt;div class="thumbnail" style="max-height: 350px;min-height: 350px;"&gt;<font></font>
                  &lt;img alt="{{$album-&gt;name}}" src="/albums/{{$photo-&gt;image}}"&gt;<font></font>
                  &lt;div class="caption"&gt;<font></font>
                    &lt;p&gt;{{$photo-&gt;description}}&lt;/p&gt;<font></font>
                  <font></font>
                    &lt;p&gt; :  {{ date("d F Y",strtotime($photo-&gt;created_at)) }}at {{ date("g:ha",strtotime($photo-&gt;created_at)) }}&lt;/p&gt;<font></font>
                    &lt;a href="{{route('delete_image',array('id'=&gt;$photo-&gt;id))}}" onclick="returnconfirm(' ?')"&gt;&lt;button type="button"class="btn btn-danger btn-small"&gt; &lt;/button&gt;&lt;/a&gt;<font></font>
                    &lt;p&gt;     :&lt;/p&gt;<font></font>
                    &lt;form name="movephoto" method="POST"action="{{route('move_image')}}"&gt;<font></font>
                        {{ csrf_field() }}<font></font>
                      &lt;select name="new_album"&gt;<font></font>
                        @foreach($albums as $others)<font></font>
                          &lt;option value="{{$others-&gt;id}}"&gt;{{$others-&gt;name}}&lt;/option&gt;<font></font>
                        @endforeach<font></font>
                      &lt;/select&gt;<font></font>
                      &lt;input type="hidden" name="photo"value="{{$photo-&gt;id}}" /&gt;<font></font>
                      &lt;button type="submit" class="btn btn-smallbtn-info" onclick="return confirm(' ?')"&gt; &lt;/button&gt;<font></font>
                    &lt;/form&gt;<font></font>
                  &lt;/div&gt;<font></font>
                &lt;/div&gt;<font></font>
              &lt;/div&gt;<font></font>
          @endforeach<font></font>
        &lt;/div&gt;<font></font>
        &lt;/div&gt;<font></font>
        &lt;script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0-rc1/js/bootstrap.min.js"&gt;&lt;/script&gt;<font></font>
        &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"&gt;&lt;/script&gt;<font></font>
      &lt;/body&gt;<font></font>
    &lt;/html&gt;<font></font>
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 さらに、たとえば次のように、ルーティングをわずかに更新できます</font></font><code>nav.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">     &lt;li&gt;&lt;a href="{{URL::route('create_album_form')}}"&gt;  &lt;/a&gt;&lt;/li&gt;
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 より新しく、よりファッショナブルなオプションへ：</font></font><br>
<br>
<pre><code class="plaintext hljs">    &lt;li&gt;&lt;a href="{{route('create_album_form')}}"&gt;  &lt;/a&gt;&lt;/li&gt;
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 一方、以前のバージョンは6 Laravelで動作しました。</font><font style="vertical-align: inherit;">これで、ユーザーがアルバムに写真を追加できるフォームが既にあり、アルバムのメインのフォームがあります</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、1枚の写真の処理を担当するコントローラーを追加する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そこで、個々の写真を操作するコントローラーを作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">    php artisan make:controller ImageController
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 だから、私たちの中にあるべきもの：</font></font><br>
<br>
<pre><code class="php hljs">    <span class="hljs-meta">&lt;?php</span><font></font>
    <font></font>
    <span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Controllers</span>;<font></font>
    <font></font>
    <span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;
    <span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">MessageBag</span>;
    <span class="hljs-keyword">use</span> <span class="hljs-title">Validator</span>; <span class="hljs-comment">//      </span>
    <span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Album</span>;
    <span class="hljs-keyword">use</span> <span class="hljs-title">App</span>\<span class="hljs-title">Image</span>;
    <span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">Str</span>;<font></font>
    <font></font>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
    </span>{
        <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getForm</span>(<span class="hljs-params">$id</span>)
      </span>{<font></font>
        $album = Album::find($id);<font></font>
        <span class="hljs-keyword">return</span> view(<span class="hljs-string">'addimage'</span>)<font></font>
        -&gt;with(<span class="hljs-string">'album'</span>,$album);
        <span class="hljs-comment">//  ,         </span><font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postAdd</span>(<span class="hljs-params">Request $request</span>)
      </span>{
          <span class="hljs-comment">//    ,      </span><font></font>
        $rules = [<font></font>
          <span class="hljs-string">'album_id'</span> =&gt; <span class="hljs-string">'required|numeric|exists:albums,id'</span>,
          <span class="hljs-string">'image'</span>=&gt;<span class="hljs-string">'required|image'</span><font></font>
        ];<font></font>
    <font></font>
        $input = [<span class="hljs-string">'album_id'</span> =&gt; <span class="hljs-literal">null</span>];<font></font>
    <font></font>
        $validator = Validator::make($request-&gt;all(), $rules);<font></font>
        <span class="hljs-keyword">if</span>($validator-&gt;fails()){
            <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'add_image'</span>, [<span class="hljs-string">'id'</span> =&gt; $request-&gt;get(<span class="hljs-string">'album_id'</span>)])-&gt;withErrors($validator)-&gt;withInput();<font></font>
        }<font></font>
    <font></font>
        $file = $request-&gt;file(<span class="hljs-string">'image'</span>);
        <span class="hljs-comment">//  </span>
        $random_name = Str::random(<span class="hljs-number">8</span>);
        <span class="hljs-comment">// </span>
        $destinationPath = <span class="hljs-string">'albums/'</span>;<font></font>
        $extension = $file-&gt;getClientOriginalExtension();<font></font>
        $filename=$random_name.<span class="hljs-string">'_album_image.'</span>.$extension;<font></font>
        $uploadSuccess = $request-&gt;file(<span class="hljs-string">'image'</span>)-&gt;move($destinationPath, $filename);<font></font>
        Image::create(<span class="hljs-keyword">array</span>(
          <span class="hljs-string">'description'</span> =&gt; $request-&gt;get(<span class="hljs-string">'description'</span>), <span class="hljs-comment">//  </span>
          <span class="hljs-string">'image'</span> =&gt; $filename, <span class="hljs-comment">//  </span>
          <span class="hljs-string">'album_id'</span>=&gt; $request-&gt;get(<span class="hljs-string">'album_id'</span>)  <span class="hljs-comment">//        </span><font></font>
        ));<font></font>
    <font></font>
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'show_album'</span>,[<span class="hljs-string">'id'</span>=&gt;$request-&gt;get(<span class="hljs-string">'album_id'</span>)]);<font></font>
      }<font></font>
      <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDelete</span>(<span class="hljs-params">$id</span>)
      //      
      </span>{<font></font>
        $image = Image::find($id);<font></font>
        $image-&gt;delete();<font></font>
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'show_album'</span>,[<span class="hljs-string">'id'</span>=&gt;$image-&gt;album_id]);<font></font>
      }<font></font>
    <font></font>
      <span class="hljs-comment">//      </span>
      <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postMove</span>(<span class="hljs-params">Request $request</span>)
    </span>{<font></font>
      $rules = <span class="hljs-keyword">array</span>(<font></font>
    <font></font>
        <span class="hljs-string">'new_album'</span> =&gt; <span class="hljs-string">'required|numeric|exists:albums,id'</span>,
        <span class="hljs-string">'photo'</span>=&gt;<span class="hljs-string">'required|numeric|exists:images,id'</span><font></font>
    <font></font>
      );<font></font>
      <span class="hljs-comment">//   </span><font></font>
      $validator = Validator::make($request-&gt;all(), $rules);<font></font>
    <font></font>
      <span class="hljs-keyword">if</span>($validator-&gt;fails()){<font></font>
    <font></font>
        <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'index'</span>);<font></font>
      }<font></font>
    <font></font>
      $image = Image::find($request-&gt;get(<span class="hljs-string">'photo'</span>));<font></font>
      $image-&gt;album_id = $request-&gt;get(<span class="hljs-string">'new_album'</span>);<font></font>
      $image-&gt;save();<font></font>
      <span class="hljs-keyword">return</span> redirect()-&gt;route(<span class="hljs-string">'show_album'</span>, [<span class="hljs-string">'id'</span>=&gt;$request-&gt;get(<span class="hljs-string">'new_album'</span>)]);<font></font>
    }<font></font>
    }<font></font>
    </code></pre><br>
<img src="https://habrastorage.org/webt/jp/0h/e_/jp0he_0gbimkbbxjcwm83x39pfs.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 登録と承認 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 現在、アプリケーションはほぼ準備が整っています。ただし、アプリケーションへの登録、ログアウト、および既存のアカウントへのログインの機能をさらに強化する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後の部分では、私たちの外見をすでに示しました</font></font><code>includes/nav.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。なぜなら私たちは望ん</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でログを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示するボタン</font><font style="vertical-align: inherit;">と</font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ユーザはまだ登録していないとき、および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アウトログイン</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボタン</font><font style="vertical-align: inherit;">彼はとき</font><font style="vertical-align: inherit;">にログインする</font><font style="vertical-align: inherit;">私達と。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから、これは私たちが今リストを見る方法です</font></font><code>includes/nav.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">      &lt;ul class="nav navbar-nav"&gt;<font></font>
           @if (Auth::check())<font></font>
            &lt;li&gt;<font></font>
       &lt;button type="button" class="btn btn-primary"&gt;<font></font>
            &lt;!--   ,  -&gt;   --&gt;<font></font>
            {{{ Auth::user()-&gt;name}}}<font></font>
            &lt;/button&gt;<font></font>
            &lt;/li&gt;<font></font>
              &lt;li&gt;&lt;a href="{{route('create_album_form')}}"&gt;  &lt;/a&gt;&lt;/li&gt;<font></font>
           @else<font></font>
           &lt;!--    --&gt;<font></font>
              &lt;li&gt;&lt;a href="{{route('register')}}"&gt;&lt;/a&gt;&lt;/li&gt;<font></font>
              &lt;li&gt;&lt;a href="{{route('login')}}"&gt;&lt;/a&gt;&lt;/li&gt;<font></font>
                    @endif<font></font>
              @if (Auth::check())<font></font>
              &lt;!--  ,       --&gt;<font></font>
              &lt;!--      --&gt;<font></font>
                &lt;li&gt;<font></font>
                &lt;a href="{{url('/logout') }}"<font></font>
                  onclick="event.preventDefault();<font></font>
                  document.getElementById('logout-form').submit();"&gt;<font></font>
                   &lt;/a&gt;<font></font>
                &lt;form id="logout-form" action="{{ url('/logout') }}"<font></font>
                  method="POST" style="display: none;"&gt;<font></font>
                    {{ csrf_field() }}<font></font>
                &lt;/form&gt;<font></font>
               &lt;/li&gt;<font></font>
                @endif<font></font>
            &lt;/ul&gt;<font></font>
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 design </font></font><code>Auth::check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とelementary </font><font style="vertical-align: inherit;">を使用して、</font><font style="vertical-align: inherit;">ユーザーが登録されているかどうかに応じて、</font></font><code>if else</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更を構築</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、</font></font><code>view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルとコントローラーを作成</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">前</font><font style="vertical-align: inherit;">の変更</font><font style="vertical-align: inherit;">により、エンジンより少し先に実行します。認証を行うために、Laravel 6にある既製の迅速なソリューションをすべて使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、</font><i><font style="vertical-align: inherit;">ユーザー</font></i><font style="vertical-align: inherit;">モデルについて</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-箱に入っているものを使用します。</font><font style="vertical-align: inherit;">一方では、本格的なアプリケーションには明らかに十分ではありません。他方では、1つの特定のアプリケーションの範囲に限定したくありません。</font><font style="vertical-align: inherit;">どんなギャラリーが欲しいですか？</font><font style="vertical-align: inherit;">ユーザーはどこにもアクセスできない自分のプライベートアルバムをどこで作成できますか？</font><font style="vertical-align: inherit;">または、誰もがどこで写真を共有しますか？</font><font style="vertical-align: inherit;">私たちのアプリケーションに制限はありません-私は読者が彼の味と色に何の問題もなくそれらを仕上げることができると思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、Laravel 6では、認証の作成がさらに簡単になりました。</font><font style="vertical-align: inherit;">アプリケーションのコマンドラインに移動します。</font></font><br>
<br>
<pre><code class="plaintext hljs">    composer require laravel/ui —dev
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 これにより、必要なパッケージが提供されます。</font><font style="vertical-align: inherit;">次に作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">    php artisan ui:auth
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 このチームは何を提供してくれますか？第一に、私たちはしなければならない</font></font><code>resources/views</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいフォルダ持っている</font></font><code>auth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々は、すべての構成されている</font></font><code>views</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザ認証と登録のために必要なことを：</font></font><code>login</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>register</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>verify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>passwords</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスワードのリセットと回復専用</font><font style="vertical-align: inherit;">のサブフォルダーもあり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">ユーザー登録後にホームページにリダイレクトするために必要な</font><font style="vertical-align: inherit;">フォルダ</font></font><code>Http/Controllers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が現れました</font></font><code>HomeController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。また、そのサブフォルダー</font></font><code>layouts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が配置される</font><font style="vertical-align: inherit;">サブフォルダーもあり、</font></font><code>app.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日は分解しませんが、ゼロから作成したアプリケーションの優れた基盤になる場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生成されたブレードテンプレートには、に合わせて調整された元のレイアウトがすでにあります</font></font><code>Bootstrap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。彼はすでに私たちとつながってい</font></font><code>header.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 さらに、でルーティングを少し更新しました</font></font><code>routes/web.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次の行が追加されました。</font></font><br>
<br>
<pre><code class="plaintext hljs">    Auth::routes();<font></font>
    <font></font>
    Route::get('/home', 'HomeController@index')-&gt;name('home');<font></font>
    <font></font>
    Route::post('/logout', 'Auth\LoginController@logout')-&gt;name('logout');<font></font>
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 へのパスは</font></font><code>home</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動的に生成され、</font></font><code>logout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自分自身に</font><font style="vertical-align: inherit;">リダイレクトしました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
生成されたテンプレートでの作業へのごレイアウトのために、私たちはそれらに接続します</font></font><code>nav</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>header</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">    @include('includes.header')<font></font>
      &lt;body&gt;<font></font>
      @include('includes.nav')<font></font>
    @extends('layouts.app')<font></font>
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 これで準備はすべて整いました。登録してみてください。パスワードの確認も機能するはずです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6n/h6/0l/6nh60lmhlkzsm1wqrvhcrhkqf9k.png"><br>
<br>
<img src="https://habrastorage.org/webt/2q/zu/z0/2qzuz0pqdygk5cdkvph9dh2m9d0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将来的には、ユーザーがアクセスしたいサービスのページを選択できます（または、リーダーが自分でリダイレクトを行うこともできますが、それほど難しくはありません）。細かい部分を修正する必要があります。登録済みの承認されたユーザーだけが貴重なアルバムを見ることができるようにするためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、ユーザーがログインしてアルバムにアクセスできるように、ルーティングに条件を追加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは更新します</font></font><code>web.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">    Route::get('/', array('as' =&gt; 'index','uses' =&gt; 'AlbumsController@getList')) -&gt;middleware('auth');;<font></font>
    //middleware     http   <font></font>
    Route::get('/createalbum', array('as' =&gt; 'create_album_form','uses' =&gt; 'AlbumsController@getForm')) -&gt;middleware('auth');;<font></font>
    //   <font></font>
    Route::post('/createalbum', array('as' =&gt; 'create_album','uses' =&gt; 'AlbumsController@postCreate')) -&gt;middleware('auth');;<font></font>
    //  <font></font>
    Route::get('/deletealbum/{id}', array('as' =&gt; 'delete_album','uses' =&gt; 'AlbumsController@getDelete')) -&gt;middleware('auth');;<font></font>
    //  <font></font>
    Route::get('/album/{id}', array('as' =&gt; 'show_album','uses' =&gt; 'AlbumsController@getAlbum')) -&gt;middleware('auth');;<font></font>
    //  <font></font>
    </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 基本的に、この段階ではすでに終了しています。</font><font style="vertical-align: inherit;">私が読者に任せたいのは、彼がどのアプリケーションを作成するかを決定することです。プライベートアルバムを使用するか、パブリックアルバムを使用するかです。</font><font style="vertical-align: inherit;">純粋に理論的には、登録の可能性を見極め、データベースに直接ユーザーを個別に作成した場合、たとえば、あなたと同僚がプライベートアルバムを整理しようとしていて、何らかの理由で他のサービスを使用したくない場合は、アプリケーションを既に使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご清聴ありがとうございました！</font><font style="vertical-align: inherit;">いつものように、便利なリンク：</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Laravel 6での承認の作成について</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションでさらに多くの既製の承認ソリューションが必要な場合は、クールなライブラリ</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja473096/index.html">高度なデータ構造。パート1：方向性非循環グラフ</a></li>
<li><a href="../ja473098/index.html">FFmpegをWebAssembly（= ffmpeg.js）にコンパイルする：パート1-クッキング</a></li>
<li><a href="../ja473100/index.html">非同期通信は、リモート作業がより効率的な本当の理由です。</a></li>
<li><a href="../ja473102/index.html">タイルラスタライザのしくみ</a></li>
<li><a href="../ja473108/index.html">AngularのAgularコンポーネント</a></li>
<li><a href="../ja473118/index.html">Siemens Digital Industries Softwareが電気システム設計アプローチを変更</a></li>
<li><a href="../ja473120/index.html">開発者はスタートアップに行きたがっています。雇用主に何をすべきか？</a></li>
<li><a href="../ja473124/index.html">ソリューションの評価とバグの発見にマルコフチェーンを使用する方法。Pythonスクリプトを使用</a></li>
<li><a href="../ja473128/index.html">FutureVSNovel-＃X5TechFutureNightで</a></li>
<li><a href="../ja473130/index.html">ビデオプロセッサーの歴史：1976-1995</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>