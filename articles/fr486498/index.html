<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ò£Ô∏è ü§™ ü•™ Masques de jeu ax√©s sur le visage sur Instagram ou double-cliquez sur les yeux üéê üë©‚Äçüåæ üî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quelle absurdit√©, pensez-vous. Quel genre de mots insignifiants? Mais, h√©las ou acclamations - quelqu'un comme √ßa, aujourd'hui ce n'est pas un non-sen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Masques de jeu ax√©s sur le visage sur Instagram ou double-cliquez sur les yeux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486498/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qr/9p/o1/qr9po1b7d633kt3pmdsf2esb9io.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle absurdit√©, pensez-vous. Quel genre de mots insignifiants? Mais, h√©las ou acclamations - quelqu'un comme √ßa, aujourd'hui ce n'est pas un non-sens, mais une r√©alit√©. L'article portera sur un jeu que j'ai √©crit pour Instagram dans lequel votre visage est utilis√© comme contr√¥leur, ou plut√¥t non seulement, mais parfois toute la t√™te. Se d√©placer sur le terrain de jeu se fait en tournant et en inclinant la t√™te, et le choix de l'action consiste √† ouvrir la bouche ou √† double-cliquer (clignoter) des yeux. Un double clignotement m√©riterait probablement de l'appeler ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh brave nouveau monde! Les hipsters du futur d√©velopperont probablement des scripts pour g√©n√©rer une belle fum√©e color√©e derri√®re leurs capsules spatiales l√©g√®res ou √©crire des shaders pour donner des effets visuels int√©ressants aux portes noires d'un t√©l√©port personnel, comme des flocons de neige qui tombent (Web 100.0) ou du brouillard fractal (WebGL 100.0) ou ... Non, peut-√™tre Je n'ai pas assez d'imagination pour imaginer √† quel genre de b√™tises nous pourrions faire face √† l'avenir: j'essaie de penser de mani√®re trop logique. Mais il y a une trentaine d'ann√©es, nous n'aurions certainement pas pens√©, en aucun cas, que nous cr√©erions aujourd'hui des masques pour un r√©seau social appel√© Instagram. Et en plus, √† l'int√©rieur de ces masques, des jeux √† part enti√®re appara√Ætront. Je suis devenu effray√© et int√©ressant. Dans l'ensemble, effrayant int√©ressant. Et, comme vous l'avez d√©j√† compris, je n'ai pas pu r√©sister et j'ai √©galement √©crit un tel jeu.Bien s√ªr, pour y jouer, vous devez disposer d'un smartphone sur Android ou iOS avec une cam√©ra frontale et l'application Instagram install√©e.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce jeu est Tic Tac Toe. </font><font style="vertical-align: inherit;">En g√©n√©ral, c'est l'un des premiers jeux que j'ai cr√©√©s dans ma vie, et peut-√™tre m√™me le tout premier - je ne m'en souviens plus maintenant. </font><font style="vertical-align: inherit;">Mais je l'ai √©crit en Pascal, puis j'ai gliss√© cet ancien algorithme dans Delphi. </font><font style="vertical-align: inherit;">Apr√®s cela, le jeu, bien s√ªr, est √©galement apparu sur le Web, sur mon site Web: eh bien, o√π sur votre page personnelle sans votre propre tic-tac-toe ... Et maintenant, il est temps de mettre ce jeu √©pique sur Instagram. </font><font style="vertical-align: inherit;">En g√©n√©ral, si j'√©tais un poignard ou un tac toe dans ce jeu (plut√¥t, probablement un orteil), je pourrais en dire beaucoup sur ma longue et int√©ressante vie ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De quel genre de masques s'agit-il?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer - une br√®ve digression historique. Les masques sur Instagram sont apparus gr√¢ce √† l'√©quipe bi√©lorusse qui a d√©velopp√© l'application selfie MSQRD. Apr√®s le rachat de cette application par Facebook, l'√©quipe de la soci√©t√© a continu√© d'int√©grer sa technologie dans les produits Facebook. Il y avait donc une plate-forme offrant des fonctionnalit√©s de r√©alit√© augment√©e, Spark AR. En ao√ªt 2019, la plateforme a quitt√© le statut b√™ta et est devenue accessible √† tous les utilisateurs qui peuvent d√©sormais cr√©er du contenu en r√©alit√© augment√©e pour Facebook et Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les masques ont √©t√© con√ßus comme des filtres pour donner des effets amusants √† leur physionomie avec le placement ult√©rieur d'un selfie sur un r√©seau social. Quant aux jeux masqu√©s, je n'en ai pas trouv√© autant. Il y a un Flying Face, un analogue de Flappy Bird, o√π un oiseau vole √† travers l'√©cran, et vous devez l'emp√™cher de s'√©craser sur les obstacles, de clignoter au bon moment. J'ai √©galement vu un jeu o√π vous devez attraper la nourriture qui tombe de haut en bas. Un tireur comme Invaders. Et un coureur 3D o√π un personnage court le long d'une rue de la ville et saute par-dessus les obstacles. Il y en a peut-√™tre d'autres. En g√©n√©ral, le sujet est assez nouveau.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de cr√©ation de contenu se d√©roule dans l'environnement de d√©veloppement Spark AR Studio, qui peut √™tre t√©l√©charg√© gratuitement pour Windows. En outre, il vaut la peine de t√©l√©charger l'application Spark AR Player pour tester les effets que vous cr√©ez sur les appareils mobiles Andrioid ou iOS, auxquels ces effets sont, en fait, destin√©s. La connexion √† l'ordinateur se fait via un c√¢ble USB, du moins dans mon cas avec un smartphone Android. Apr√®s avoir t√©l√©charg√© le masque via le composant Facebook / sparkarhub et pass√© la mod√©ration, votre masque (ou jeu) sera disponible pour tous les utilisateurs d'Instagram depuis Internet. Le masque peut √™tre obtenu par lien direct ou depuis la page de son cr√©ateur sur Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comprendre comment travailler dans Spark AR Studio n'est pas du tout difficile. </font><font style="vertical-align: inherit;">Je ne m'attarderai pas l√†-dessus en d√©tail, d'autant plus qu'Internet regorge de le√ßons sur ce sujet. </font><font style="vertical-align: inherit;">Je note seulement qu'il y a deux fa√ßons de d√©velopper une application plus ou moins interactive qui implique quelque chose de plus que simplement appliquer une sorte de sprite statique au visage: cela cr√©e les soi-disant correctifs et √©crit des scripts. </font><font style="vertical-align: inherit;">La premi√®re m√©thode ressemble visuellement √† l'utilisation de mat√©riaux dans un √©diteur 3D, et la seconde consiste simplement √† programmer en Javascript √† l'aide d'une API sp√©cialis√©e. </font><font style="vertical-align: inherit;">J'ai choisi la deuxi√®me option. </font><font style="vertical-align: inherit;">Cependant, personne n'interdit de combiner les deux m√©thodes: √† partir des scripts, il est possible d'acc√©der √† tout ce qui se passe dans les correctifs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arts graphiques</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, pour commencer, ce serait bien de cr√©er des √©l√©ments graphiques qui seront utilis√©s dans le jeu. </font><font style="vertical-align: inherit;">Ouvrez votre programme de mod√©lisation 3D pr√©f√©r√© et cr√©ez. </font><font style="vertical-align: inherit;">J'utilise Blender. </font><font style="vertical-align: inherit;">En principe, vous pouvez cr√©er des sprites s√©par√©s, puis leur demander une logique de comportement √† l'aide de Spark AR et ne pas utiliser l'√©diteur 3D du tout. </font><font style="vertical-align: inherit;">Mais j'ai d√©cid√© de faire des figures volumineuses de croix et d'orteils, donc je ne pouvais pas me passer d'un tel √©diteur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La premi√®re chose √† faire est de cr√©er une texture 2D. </font><font style="vertical-align: inherit;">Combinez toutes les textures dans un seul atlas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9y/ii/n8/9yiin8wu1jf3emkzbnyjn88jmgq.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Texture satin</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant sur les mod√®les 3D. En tant qu'espace de jeu 3D, un plan de deux triangles est utilis√©, sur lequel le marquage de champ est √©tir√© (voici ce grand fragment de maillage de l'atlas de texture). L'atlas lui-m√™me est dot√© d'un canal alpha transparent. 9 carr√©s bleus, compos√©s √©galement de deux triangles chacun, seront ins√©r√©s dans le champ. De plus, en plus des neuf bleus, le mod√®le 3D contiendra dans les m√™mes coordonn√©es 9 carr√©s verts et rouges qui seront cach√©s au d√©but du jeu. Cela signifie que dans l'√©tat normal, la couleur de tous les carr√©s du champ est bleue et que le vert et le rouge sont utilis√©s comme curseur pour s√©lectionner la position dans laquelle vous souhaitez d√©finir une croix ou un z√©ro, respectivement. De plus, le vert et le rouge sont utilis√©s pour mettre en √©vidence la rang√©e gagnante de trois cellules √† la fin de chaque tour. Il suffirait, bien s√ªr,utilisez 9 carr√©s bleus et seulement 3 carr√©s verts et rouges, mais alors vous devrez, en plus de montrer / masquer, leur donner une sorte de logique de mouvement. Il me semblait que les cacher et les afficher sans aucune manipulation des coordonn√©es dans l'espace serait plus facile, et le mod√®le 3D le chargerait de mani√®re insignifiante.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vy/fk/bs/vyfkbs_c_hezcstqfoebd2xyjoy.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le terrain de jeu</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dans le jeu, les positions de trois cases dans chacun des neuf groupes co√Øncident bien s√ªr. Ici, je les ai juste dispers√©s verticalement dans l'une des cellules pour montrer clairement en quoi consiste le mod√®le 3D dans son ensemble. Notez que les cases portent des noms (dans la figure de droite) d'une certaine mani√®re: de b11 √† b33, de g11 √† g33 et de r11 √† r33, o√π chaque chiffre change dans la plage de 1 √† 3. En d'autres termes, la lettre d√©signe une couleur, et les nombres sont la ligne et la colonne. Cela est n√©cessaire pour acc√©der aux bo√Ætes (mailles, dans la terminologie 3D) par les noms du script, afin qu'il soit pratique de les masquer et de les afficher.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, j'ai mod√©lis√© les figures de croix et d'orteils eux-m√™mes, en les pla√ßant √©galement par paires dans chaque cellule. </font><font style="vertical-align: inherit;">(Pour plus de clart√©, il a soulev√© l'un des z√©ros.) Ne regardez pas le fait que leur texture soit si ¬´gaie¬ª jusqu'√† pr√©sent. </font><font style="vertical-align: inherit;">J'ai fait cela pour la commodit√© d'appliquer un scan UV. </font><font style="vertical-align: inherit;">Ensuite, dans l'atlas de texture, j'ai remplac√© les textures des personnages par des textures plus calmes, que vous pouvez voir dans le jeu lui-m√™me.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/qc/cp/qqqccp5siugamnwegcpegomgank.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi√®ces de jeu</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Enfin, j'ai mod√©lis√© 4 fl√®ches plates qui indiqueront la direction dans laquelle le curseur se d√©place dans le jeu. </font><font style="vertical-align: inherit;">J'ai appliqu√© une texture √† leur g√©om√©trie: dans la feuille de sprite, il s'agit d'une fl√®che triangulaire blanche dans un trait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous exportons tous les mod√®les 3D (les trois, c'est-√†-dire le champ, les formes et les fl√®ches) au format FBX, ce qui n√©cessite Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importer dans Spark AR Studio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, lancez Spark AR Studio et importez-y des mod√®les 3D. Ils appara√Ætront dans la liste des actifs en bas √† gauche. Dans le m√™me temps, nous cr√©erons pour nous-m√™mes un masque th√©matique avec de la peinture de guerre sous la forme de ¬´tatouages¬ª de croix et d'orteil sur le visage. Vous pouvez apprendre comment cr√©er un masque textur√© √† partir de milliers de le√ßons dans le r√©seau mondial ou √† partir de la documentation officielle sur la plate-forme, je ne me concentrerai pas sur cela. En bref: t√©l√©chargez le "vide", ouvrez-le dans votre √©diteur graphique pr√©f√©r√©, dessinez quelque chose sur le dessus, enregistrez, importez l'image dans Spark AR Studio, ajustez les param√®tres de mati√®re et de texture.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/-d/aw/pv-dawxo7-dqxkgd2rxga-umd7w.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faites glisser nos mod√®les d'Assets vers la liste des sc√®nes ci-dessus. De plus, nous avons besoin qu'ils soient rendus dans un certain ordre: d'abord le champ (field.fbx), puis le mod√®le des figures (fieldxo.fbx) et, enfin, les fl√®ches (arrows.fbx). En outre, sur la couche inf√©rieure, il y aura √©galement faceTracker avec faceMesh - c'est un masque pour votre visage. Vous pouvez probablement lancer des mod√®les sur la sc√®ne dans n'importe quel ordre.Cependant, j'ai l'intention de d√©sactiver le test de profondeur et le test de profondeur et l'√©criture dans le tampon de profondeur (dans les propri√©t√©s du mat√©riau) pour tous les mat√©riaux (sauf les figures), alors laissez-les s'afficher dans l'ordre que j'ai d√©fini manuellement: masque - champ - chiffres - fl√®ches.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les mat√©riaux de chaque calque, d√©finissez Mode de fusion = Alpha afin que les objets deviennent transparents dans les parties o√π cela est sp√©cifi√© dans la texture. </font><font style="vertical-align: inherit;">Et nous allons d√©finir les textures Filtering = Medium pour le lissage. </font><font style="vertical-align: inherit;">(Si vous s√©lectionnez un mat√©riau ou une texture dans la liste de gauche, toutes les propri√©t√©s disponibles pour eux seront affich√©es sur le c√¥t√© droit de la fen√™tre.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, ajoutez l'√©l√©ment Script aux √©l√©ments (en cliquant en bas √† gauche + Ajouter un √©l√©ment). </font><font style="vertical-align: inherit;">Et en plus des mod√®les 3D, script.js appara√Ætra dans la liste, en cliquant sur lequel votre √©diteur de texte externe de scripts s'ouvrira. </font><font style="vertical-align: inherit;">Lorsque vous enregistrez dans l'√©diteur, votre programme red√©marre dans Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au d√©but du script, connectez les modules dont nous avons besoin dans ce projet. </font><font style="vertical-align: inherit;">Il s'agit d'une sc√®ne, d'un suivi de visage, de modules pour travailler avec le temps, le son et l'animation.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> Scene = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Scene'</span>);
<span class="hljs-keyword">const</span> FaceTracking = <span class="hljs-built_in">require</span>(<span class="hljs-string">'FaceTracking'</span>);
<span class="hljs-keyword">const</span> Time = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Time'</span>);
<span class="hljs-keyword">const</span> Audio = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Audio'</span>);
<span class="hljs-keyword">const</span> Animation = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Animation'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe de nombreuses fa√ßons d'impl√©menter tic-tac-toe en Javascript. </font><font style="vertical-align: inherit;">Cet article ne concerne pas l'impl√©mentation de ce jeu dans un langage de programmation donn√©, mais la gestion avec l'aide d'une personne. </font><font style="vertical-align: inherit;">Je d√©crirai les points cl√©s sp√©cifiques √† l'interaction avec le syst√®me Spark AR afin que le principe soit compris. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acc√®s au fragment nomm√© du mod√®le 3D (maillage), par exemple, au carr√© bleu de la premi√®re ligne, deuxi√®me colonne du terrain de jeu:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'b12'</span>);</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Rappel b12 - c'est ainsi que nous avons appel√© ce maillage dans l'√©diteur 3D.)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Acc√®s √† la croix √† cette position:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'x12'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cacher un orteil (o), mettre une croix (x) et colorier en vert (g) les cellules du champ '32' (troisi√®me rang√©e, deuxi√®me colonne):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// figure</span>
Scene.root.find(<span class="hljs-string">'o32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'x32'</span>).hidden = <span class="hljs-literal">false</span>;
<span class="hljs-comment">// background</span>
Scene.root.find(<span class="hljs-string">'b32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'g32'</span>).hidden = <span class="hljs-literal">false</span>;<font></font>
Scene.root.find(<span class="hljs-string">'r32'</span>).hidden = <span class="hljs-literal">true</span>;</code></pre><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/xg/bz/tkxgbzthiw7ubagtismtw7pmedk.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Croix verte avec r√©tro-√©clairage vert dans le champ ¬´32¬ª.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Abonnez-vous aux √©v√©nements de rotation et d'inclinaison de la t√™te pour vous d√©placer dans le champ.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//vert: fov+ back-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationX.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//hor: rt+ dn-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationY.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, tout est tr√®s simple. </font><font style="vertical-align: inherit;">Nous prenons de l'√©v√©nement les valeurs de la rotation ou de l'inclinaison de la t√™te (event.newValue) et v√©rifions si elles sont hors d'une certaine plage. </font><font style="vertical-align: inherit;">Si oui, d√©placez visuellement le curseur (case verte) dans la direction souhait√©e. </font><font style="vertical-align: inherit;">Une valeur n√©gative de la rotation de la t√™te correspond √† sa rotation √† gauche, positive - √† droite. </font><font style="vertical-align: inherit;">De m√™me - pour incliner la t√™te d'avant en arri√®re pour se d√©placer le long des lignes. </font><font style="vertical-align: inherit;">La plage enti√®re va de -1 √† +1. </font><font style="vertical-align: inherit;">Ainsi, vous pouvez impl√©menter le mouvement du curseur et ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et puis il m'est apparu</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai soudain r√©alis√© que contr√¥ler le curseur sur le champ de la mani√®re que je choisissais n'√©tait pas pratique: vous devez tourner la t√™te pour d√©placer une cellule, puis remettre votre t√™te dans sa position d'origine, puis la tourner √† nouveau pour l'√©tape suivante et ainsi de suite. Et pourquoi ne pas simplement utiliser les valeurs fractionnaires de tourner la t√™te sur les c√¥t√©s et d'incliner d'avant en arri√®re afin de se concentrer imm√©diatement sur la cellule souhait√©e sur le terrain? Autrement dit, comment indiquer au curseur sa position avec un regard, ou plut√¥t, avec la direction de la t√™te. Et puis la premi√®re m√©thode est un entra√Ænement trop dur pour le cou. L'√©ducation physique est bien s√ªr bonne, mais pas dans la m√™me mesure. Naturellement, nous nous souviendrons de la position actuelle quelque part dans ap.cur = {x: 1, y: 1} afin d'effacer le curseur √† la position pr√©c√©dente et de sauvegarder les coordonn√©es de la nouvelle position, qui est ensuite n√©cessaire pour le ¬´clic¬ª. Au faitles fl√®ches visuelles pour indiquer la direction du mouvement du curseur ne sont plus n√©cessaires: nous lan√ßons un mod√®le 3D (arrows.fbx) du projet. Vous pouvez √©galement effacer l'image de la fl√®che de la texture.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Double clignement?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, nous sommes arriv√©s au plus int√©ressant. </font><font style="vertical-align: inherit;">Double-cliquez sur les yeux. </font><font style="vertical-align: inherit;">Avouez-le, vous vouliez le faire √† partir du moment o√π vous en avez eu connaissance au d√©but de l'article? </font><font style="vertical-align: inherit;">Vous allez maintenant dire √† vos amis que la souris est d√©j√† d√©pass√©e et que le double clignotement est utilis√© pour un clic aujourd'hui! </font><font style="vertical-align: inherit;">Double clignotement. </font><font style="vertical-align: inherit;">Pourquoi doubler? </font><font style="vertical-align: inherit;">Tout est simple: une seule personne le fait p√©riodiquement de mani√®re involontaire, donc suspendre tous les √©v√©nements en un seul clin d'≈ìil serait du sadisme.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qb/ke/8j/qbke8jqkze91tmgkb2xrhxhjrbm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Spark AR, il existe des √©v√©nements leftEye.openness et rightEye.openness, en vous abonnant, vous pouvez obtenir la valeur d'ouverture de chaque ≈ìil dans event.newValue dans la plage de 0 √† 1. Nous consid√©rerons l'≈ìil ferm√© avec une valeur inf√©rieure √† 0,1. </font><font style="vertical-align: inherit;">Et nous appellerons la fonction de traitement des clignements ap.blink1 () (ap est un espace de noms, c'est juste plus pratique pour moi).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).leftEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).rightEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fonction de traitement des clignotements elle-m√™me, nous d√©finissons l'intervalle minimum entre les clignotements de 200 millisecondes afin que cette fonction ne fonctionne pas imm√©diatement deux fois lors du clignotement avec les deux yeux, car son appel est suspendu sur chaque ≈ìil. </font><font style="vertical-align: inherit;">Je pense que c'est clair. </font><font style="vertical-align: inherit;">De plus, nous d√©finissons le temps maximum de double clignotement - 1 sec. </font><font style="vertical-align: inherit;">Si nous nous situons dans cette plage, la fonction action () fonctionnera, qui affiche la croix √† la position actuelle. </font><font style="vertical-align: inherit;">Dans le m√™me temps, nous accrocherons l'action () √† l'√©v√©nement bouche.ouverture - afin que le joueur ait le choix de mettre une croix en double clignotant ou en ouvrant la bouche.</font></font><br>
<br>
<pre><code class="javascript hljs">blink1:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">var</span> tmNew = <span class="hljs-built_in">Date</span>.now();
	<span class="hljs-keyword">if</span>  (tmNew - ap.blinkStart &gt; <span class="hljs-number">200</span>) {<font></font>
		ap.blinkCount++;<font></font>
		<span class="hljs-keyword">if</span>  (ap.blinkCount &gt; <span class="hljs-number">1</span>) {
			<span class="hljs-comment">//action</span>
			<span class="hljs-keyword">if</span> (tmNew - ap.blinkStart &lt; <span class="hljs-number">1000</span>) {<font></font>
				ap.action();<font></font>
			};<font></font>
			ap.blinkCount = <span class="hljs-number">0</span>;<font></font>
			ap.blinkStart = <span class="hljs-number">0</span>;<font></font>
		} <span class="hljs-keyword">else</span> {<font></font>
			ap.blinkStart = tmNew;<font></font>
		};<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-attr">action</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">if</span>  (ap.fProc == <span class="hljs-literal">false</span>) {<font></font>
		ap.fProc = <span class="hljs-literal">true</span>;<font></font>
		xo.putx();<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-comment">//mouth</span>
FaceTracking.face(<span class="hljs-number">0</span>).mouth.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &gt; <span class="hljs-number">0.2</span>) {<font></font>
		ap.action();<font></font>
	};<font></font>
});</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des sons</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je les ai trouv√©s dans les sections libres de droits de divers sites d'effets sonores. D√©tail important: Spark AR n√©cessite des fichiers audio d'un certain format, √† savoir M4A, mono, 44,1 kHz, 16 bits. Les convertisseurs en ligne de wav et mp3 en m4a sont en stock dans le r√©seau mondial. J'ai ajout√© du son √† quatre √©v√©nements: bouger, gagner des poignards, gagner du tac toe et tirer. Le volume total de tous les sons apr√®s conversion √©tait de 105 Ko. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour utiliser des sons dans un script, vous devez connecter un module audio dans le script, ajouter le nombre souhait√© de haut-parleurs √† la sc√®ne par le nombre de sons (j'ai obtenu Speaker0, Speaker1, Speaker2, Speaker3), ajouter le module Playback Controllers aux actifs, cr√©er le nombre n√©cessaire de sous-√©l√©ments audioPlaybackController en fonction du nombre de sons et attachez un son √† chaque enceinte.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/ib/s8/zzibs8wwtsk_0dzinsuzxu4klb4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, vous pouvez lire le son du script comme suit (par exemple, le son d'un clic):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> audioClick = Audio.getPlaybackController(<span class="hljs-string">'audioPlaybackControllerClick'</span>);<font></font>
audioClick.reset();<font></font>
audioClick.setPlaying(<span class="hljs-literal">true</span>);</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version finale</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cr√©er des versions pour tous les appareils mobiles pris en charge (Android, iOs), cliquez simplement sur Fichier -&gt; Exporter. Le volume du jeu pour chaque plate-forme mobile avec tous les mod√®les et textures 3D dans mon cas √©tait d'environ 1 Mo. Ensuite, vous devez passer par le navigateur pour le Spark AR Hub sur Facebook / sparkarhub et y t√©l√©charger le fichier export√©. Vous devez √©galement remplir une description, rechercher des mots cl√©s et t√©l√©charger une vid√©o de d√©monstration. De plus, il doit √™tre film√© au t√©l√©phone via la cam√©ra Instagram. Pour ce faire, dans le hub il y a une section "Aper√ßu de la cam√©ra" contenant un lien. Ce lien peut √™tre ouvert sur un appareil mobile. L'application Instagram d√©marrera et votre masque (jeu) s'y ouvrira. Le lien peut √©galement √™tre envoy√© pour test √† tous vos amis, qui, bien s√ªr, doivent avoir un smartphone avec l'application Instagram install√©e.Jusqu'√† la fin du processus de mod√©ration, le masque ne sera pas visible par tous les utilisateurs et ils ne pourront pas l'ajouter √† leur liste d'effets tant qu'il ne sera visible que par ce lien.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de mod√©ration prend g√©n√©ralement quelques jours (cela peut prendre jusqu'√† 10 jours ouvrables). Si je comprends bien, au d√©but, l'effet est soumis √† des tests de machine, au moins une vid√©o de d√©monstration - bien s√ªr, car une seconde apr√®s l'envoi, j'ai re√ßu un message indiquant que la mod√©ration n'a pas r√©ussi. Raison - la vid√©o contient du texte. En g√©n√©ral, pour une raison quelconque, le texte masqu√© n'est fondamentalement pas le bienvenu, comme le disent les r√®gles. J'ai d√ª repenser l'interface de jeu afin que le score ne pende pas constamment au-dessus de la t√™te du joueur, comme je l'avais fait auparavant, mais n'apparaisse qu'√† la fin de chaque manche. Et reprenez la vid√©o. Apr√®s avoir fait tous les changements, j'ai soumis √† nouveau mon jeu pour mod√©ration.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trois jours plus tard, le jeu a √©t√© approuv√©, apr√®s l'avoir d√©plac√© dans la section ¬´Styles de cam√©ra¬ª. </font><font style="vertical-align: inherit;">Honn√™tement, je ne me souviens pas dans quelle section je l'ai plac√©e initialement (et la section, ou, en d'autres termes, la cat√©gorie, devait √™tre s√©lectionn√©e). </font><font style="vertical-align: inherit;">Ce n'est pas √©vident, car il n'y a pas de section de jeux pour Instagram. </font><font style="vertical-align: inherit;">Mais bon, maintenant nous saurons o√π mettre de nouveaux jeux. </font><font style="vertical-align: inherit;">Si les jeux apparaissent √† l'avenir, alors, Instagram devrait probablement ajouter une nouvelle section.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez essayer un masque en allant sur le profil de son cr√©ateur sur Instagram et en cliquant sur l'ic√¥ne de ses masques ci-dessous (√©motic√¥ne avec deux plus). </font><font style="vertical-align: inherit;">Il en va de m√™me, bien entendu, pour les jeux masqu√©s. </font><font style="vertical-align: inherit;">Auparavant, lors des tests b√™ta des masques, il √©tait √©galement n√©cessaire de souscrire √† l'auteur. </font><font style="vertical-align: inherit;">Mais maintenant, cette r√®gle a √©t√© annul√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ils ne paient pas d'argent pour cr√©er des masques et il n'y a pas de magasin de masques pay√©s o√π ils peuvent √™tre vendus, comme les applications dans les magasins bien connus. De plus, vous n'avez pas besoin de payer pour le placement du masque que vous avez cr√©√© dans votre profil. Il suffit d'attendre le passage de la mod√©ration. Cependant, de nombreux blogueurs et entreprises commandent le d√©veloppement de masques de marque pour eux-m√™mes. Bien s√ªr, vous pouvez demander √† vos abonn√©s d'essayer les masques que vous avez cr√©√©s et de jouer √† vos jeux, en diffusant tout cela sur Instagram. De telles actions peuvent produire un effet dit viral, surtout si le jeu est int√©ressant. Cela peut aider √† promouvoir votre compte. Cependant, maintenant tout le monde n'est pas trop paresseux pour faire des masques. Mais l'id√©e des jeux masqu√©s Instagram est encore assez nouvelle. De plus, il y a un seuil d'entr√©e plus √©lev√© et moins de concurrence,car tous les fabricants de masques ne sont pas programmeurs pour √©crire un jeu √† part enti√®re.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr486498/">https://habr.com/ru/post/fr486498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr486480/index.html">Waymo Robocars (Google) commence √† livrer des colis √† Phoenix, aux √âtats-Unis</a></li>
<li><a href="../fr486482/index.html">Visages uniques: compter les visiteurs, rechercher les √©trangers, identification dans les syst√®mes de reconnaissance</a></li>
<li><a href="../fr486484/index.html">Novel Coronavirus nCOV / 2019-nCoV / NCP / COVID19: pr√©visions, statistiques, protection, actualit√©s [4√®me r√©impression, rev.07.03]</a></li>
<li><a href="../fr486488/index.html">Syst√®me d'exploitation Sivelkiriya: description introductive</a></li>
<li><a href="../fr486492/index.html">Phishers Icloud et o√π vivent-ils</a></li>
<li><a href="../fr486500/index.html">Composants Web et normes ouvertes</a></li>
<li><a href="../fr486506/index.html">Num√©ro 30: Formation informatique - probl√®mes et d√©fis actuels des grandes entreprises</a></li>
<li><a href="../fr486510/index.html">Affichage des informations d'exception avant la sortie d'urgence</a></li>
<li><a href="../fr486512/index.html">En bref sur la fa√ßon d'enseigner aux MFP Brother √† num√©riser dans Windows Server</a></li>
<li><a href="../fr486514/index.html">Week-end de lecture: 10 documents sur les r√©pliques de cartes son, les biblioth√®ques de sons ouvertes et les logiciels audio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>