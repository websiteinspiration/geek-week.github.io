<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ⓜ️ 🏴 👩🏿‍🏭 Imagens prontas para produção para k8s 👇🏻 👴🏼 🏳️‍🌈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta história é sobre como usamos contêineres no ambiente de supermercado, especialmente no Kubernetes. O artigo é dedicado à coleta de métricas e log...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Imagens prontas para produção para k8s</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/exness/blog/488392/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta história é sobre como usamos contêineres no ambiente de supermercado, especialmente no Kubernetes. </font><font style="vertical-align: inherit;">O artigo é dedicado à coleta de métricas e logs de contêineres, bem como à criação de imagens.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4o/r6/tm/4or6tm3pqygawzhld3ht0opp_3e.jpeg" alt="imagem"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somos da empresa fintech Exness, que atua no desenvolvimento de serviços para comércio on-line e produtos fintech para B2B e B2C. </font><font style="vertical-align: inherit;">Existem muitas equipes diferentes em nossa pesquisa e desenvolvimento, no departamento de desenvolvimento de mais de 100 funcionários. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Representamos a equipe responsável pela plataforma de coleta e execução de código por nossos desenvolvedores. </font><font style="vertical-align: inherit;">Em particular, somos responsáveis ​​por coletar, armazenar e fornecer métricas, logs e eventos de aplicativos. </font><font style="vertical-align: inherit;">Atualmente, operamos em torno de três mil contêineres Docker no ambiente do produto, suportamos nosso armazenamento de big data de 50 TB e fornecemos soluções arquitetônicas construídas em torno de nossa infraestrutura: Kubernetes, Rancher e vários provedores de nuvem pública.&nbsp;</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nossa motivação</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que está queimando? </font><font style="vertical-align: inherit;">Ninguém pode responder. </font><font style="vertical-align: inherit;">Onde fica a lareira? </font><font style="vertical-align: inherit;">Difícil de entender. </font><font style="vertical-align: inherit;">Quando pegou fogo? </font><font style="vertical-align: inherit;">Você pode descobrir, mas não imediatamente.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/915/b6a/807/915b6a8072231adcddda50f86093038e.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que alguns contêineres ficam em pé enquanto outros caem? </font><font style="vertical-align: inherit;">Qual recipiente foi o culpado? </font><font style="vertical-align: inherit;">De fato, fora dos contêineres são os mesmos, mas dentro de cada um tem seu próprio Neo. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/182/9b5/e14/1829b5e14acf8849524f20c5cbb907d3.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossos desenvolvedores são caras alfabetizados. </font><font style="vertical-align: inherit;">Eles fazem bons serviços que fazem a empresa lucrar. </font><font style="vertical-align: inherit;">Mas há fakapy quando contêineres com aplicativos vão aleatoriamente. </font><font style="vertical-align: inherit;">Um contêiner consome muita CPU, o outro consome rede, o terceiro consome operações de E / S e o quarto geralmente não está claro o que faz com soquetes. </font><font style="vertical-align: inherit;">Tudo isso cai e o navio afunda.&nbsp;</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agentes</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para entender o que está acontecendo lá dentro, decidimos colocar agentes diretamente em contêineres. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/405/66a/551/40566a55180bbdda60ad9c49f790b22b.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses agentes são programas de contenção que mantêm os contêineres em um estado em que não se quebram. Os agentes são padronizados, e isso permite uma abordagem padronizada para o manuseio de contêineres.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No nosso caso, os agentes devem fornecer logs em um formato padrão, marcados e com trote. Eles também devem nos fornecer métricas padronizadas, extensíveis em termos de aplicativos de negócios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agentes também significam utilitários para operação e manutenção, capazes de trabalhar em diferentes sistemas de orquestração, suportando imagens diferentes (Debian, Alpine, Centos, etc.).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, os agentes devem oferecer suporte a um CI / CD simples, incluindo arquivos do Docker. </font><font style="vertical-align: inherit;">Caso contrário, o navio desmoronará, porque os contêineres começarão a ser entregues em trilhos "curvos".</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processo de montagem e imagem do dispositivo de destino</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que tudo seja padronizado e gerenciável, você deve aderir a algum processo de montagem padrão. </font><font style="vertical-align: inherit;">Portanto, decidimos coletar contêineres por contêineres - tal recursão. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ad3/41a/ada/ad341aadafbc26fadf0df4e14616cae1.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui os contêineres são representados por contornos sólidos. </font><font style="vertical-align: inherit;">Ao mesmo tempo, eles decidiram distribuir neles para que "a vida não parecesse framboesa". </font><font style="vertical-align: inherit;">Por que isso foi feito, descreveremos abaixo. </font></font><br>
&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado é uma ferramenta de construção - um contêiner de uma determinada versão, que se refere a certas versões de distribuições e certas versões de scripts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como usamos? </font><font style="vertical-align: inherit;">Temos um Docker Hub no qual o contêiner está. </font><font style="vertical-align: inherit;">Nós o espelhamos dentro do nosso sistema para nos livrarmos de dependências externas. </font><font style="vertical-align: inherit;">O recipiente resultante está marcado em amarelo. </font><font style="vertical-align: inherit;">Criamos um modelo para instalar no contêiner todas as distribuições e scripts que precisamos. </font><font style="vertical-align: inherit;">Depois disso, coletamos uma imagem pronta para operação: os desenvolvedores colocam o código e algumas dependências especiais.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que essa abordagem é boa?&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em primeiro lugar, controle total da versão das ferramentas de construção - construa versões de contêiner, scripts e distribuições.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em segundo lugar, alcançamos a padronização: da mesma maneira que criamos modelos, intermediários e prontos para a operação.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em terceiro lugar, os contêineres nos fornecem portabilidade. </font><font style="vertical-align: inherit;">Hoje usamos o Gitlab, e amanhã mudaremos para o TeamCity ou o Jenkins e, da mesma forma, poderemos lançar nossos contêineres.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quarto, minimizando dependências. </font><font style="vertical-align: inherit;">Não é por acaso que colocamos distribuições no contêiner, pois isso nos permite não baixá-las sempre da Internet.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em quinto lugar, a velocidade da montagem aumentou - a disponibilidade de cópias locais de imagens permite que você não perca tempo fazendo o download, pois existe uma imagem local.&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, alcançamos um processo de montagem controlado e flexível. </font><font style="vertical-align: inherit;">Usamos as mesmas ferramentas para criar qualquer contêiner com versão completa.&nbsp;</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como nosso procedimento de compilação funciona</font></font></h1><br>
<img src="https://habrastorage.org/getpro/habr/post_images/36f/569/f11/36f569f111cc0f0f7e963ec9944e7656.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A montagem é iniciada com um comando, o processo é realizado na imagem (destacada em vermelho). O desenvolvedor possui um arquivo Docker (destacado em amarelo); nós o renderizamos substituindo as variáveis ​​por valores. E, ao longo do caminho, adicionamos cabeçalhos e rodapés - esses são nossos agentes.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O cabeçalho adiciona distribuições das imagens correspondentes. E o rodapé instala nossos serviços dentro, configura o lançamento da carga de trabalho, o log e outros agentes, substitui o ponto de entrada, etc.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a58/668/435/a58668435efa2b0ce59e6d2c0fc6fc3e.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pensamos por um longo tempo sobre a possibilidade de definir um supervisor. No final, eles decidiram que precisávamos dele. Escolha S6. O supervisor fornece controle do contêiner: permite conectar-se a ele em caso de queda no processo principal e fornece controle manual do contêiner sem recriá-lo. Logs e métricas são processos executados dentro de um contêiner. Eles também precisam ser controlados de alguma forma, e fazemos isso com a ajuda de um supervisor. Finalmente, o S6 cuida de tarefas domésticas, processamento de sinais e outras tarefas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como usamos diferentes sistemas de orquestração, após a montagem e o lançamento, o contêiner deve entender em que ambiente está e agir de acordo com a situação. Por exemplo:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso nos permite coletar uma imagem e lançá-la em diferentes sistemas de orquestração, e ela será lançada levando em consideração as especificidades desse sistema de orquestração. </font></font><br>
<br>
&nbsp;<img src="https://habrastorage.org/getpro/habr/post_images/9cf/fed/b5e/9cffedb5e38cfc8d67d3c107d4f4cc49.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o mesmo contêiner, obtemos diferentes árvores de processo no Docker e no Kubernetes: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/83b/56d/46f/83b56d46fcf929d8ae6365822be7a5ee.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A carga útil é executada no supervisor S6. Preste atenção ao coletor e aos eventos - esses são nossos agentes responsáveis ​​por logs e métricas. O Kubernetes não os possui, mas o Docker os possui. Por quê?&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você observar a especificação do "forno" (doravante - pod Kubernetes), veremos que o contêiner de eventos é executado no forno, no qual existe um contêiner coletor separado que executa a função de coletar métricas e logs. </font><font style="vertical-align: inherit;">Podemos usar os recursos do Kubernetes: executar contêineres em uma lareira, em um único processo e / ou espaço de rede. </font><font style="vertical-align: inherit;">Na verdade, apresente seus agentes e execute algumas funções. </font><font style="vertical-align: inherit;">E se o mesmo contêiner for lançado no Docker, ele receberá os mesmos recursos na saída, ou seja, poderá fornecer logs e métricas, uma vez que os agentes serão lançados no interior.&nbsp;</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Métricas e logs</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A entrega de métricas e logs é uma tarefa difícil. Existem vários aspectos em sua decisão. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A infraestrutura é criada para atender a carga útil, e não a entrega em massa de logs. Ou seja, esse processo deve ser executado com requisitos mínimos para recursos de contêiner. Nós nos esforçamos para ajudar nossos desenvolvedores: "Pegue o contêiner do Docker Hub, inicie-o e podemos entregar os logs".&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo aspecto é a limitação do volume de logs. Se em vários contêineres houver uma situação de aumento no volume de logs (o aplicativo exibe um rastreamento de pilha no loop), a carga na CPU, canais de comunicação, o sistema de processamento de logs aumenta e isso afeta a operação do host como um todo e de outros contêineres no host, às vezes isso leva a "Queda" do host.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O terceiro aspecto - você precisa suportar o maior número possível de métodos de coleta de métricas. Da leitura de arquivos e sondagem do ponto final Prometheus ao uso de protocolos de aplicativos específicos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o último aspecto - você precisa minimizar o consumo de recursos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escolhemos uma solução Go de código aberto chamada Telegraf. Este é um conector universal que suporta mais de 140 tipos de canais de entrada (plugins de entrada) e 30 tipos de saída (plugins de saída). Nós finalizamos e agora contaremos como é usado com o Kubernetes como exemplo.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/951/b60/324/951b603240a67d0e2867a66c3ce2f13a.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que um desenvolvedor implante uma carga e o Kubernetes receba uma solicitação para criar uma lareira. </font><font style="vertical-align: inherit;">Nesse ponto, um contêiner chamado Collector é criado automaticamente para cada pod (usamos o webhook de mutação). </font><font style="vertical-align: inherit;">O coletor é nosso agente. </font><font style="vertical-align: inherit;">No início, esse contêiner se configura para funcionar com o Prometheus e o sistema de coleta de logs.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para fazer isso, ele usa as anotações da lareira e, dependendo do seu conteúdo, cria, por exemplo, o ponto final do Prometeu;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com base na especificação da lareira e nas configurações específicas dos contêineres, ele decide como entregar os logs.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coletamos logs através da API do Docker: basta que os desenvolvedores os coloquem em stdout ou stderr e, em seguida, o Collector descobrirá. </font><font style="vertical-align: inherit;">Os logs são coletados por partes com algum atraso para evitar possível congestionamento do host.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As métricas são coletadas em instâncias de carga de trabalho (processos) em contêineres. </font><font style="vertical-align: inherit;">Tudo é marcado: namespace, abaixo e assim por diante, e depois convertido para o formato Prometheus - e fica disponível para coleta (exceto para logs). </font><font style="vertical-align: inherit;">Além disso, enviamos logs, métricas e eventos para Kafka e mais:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os logs estão disponíveis no Graylog (para análise visual);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logs, métricas e eventos são enviados à Clickhouse para armazenamento a longo prazo.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma forma, tudo funciona na AWS, apenas estamos substituindo o Graylog do Kafka pelo Cloudwatch. </font><font style="vertical-align: inherit;">Enviamos logs para lá e tudo resulta muito conveniente: fica imediatamente claro a quem o cluster e o contêiner pertencem. </font><font style="vertical-align: inherit;">O mesmo vale para o Google Stackdriver. </font><font style="vertical-align: inherit;">Ou seja, nosso esquema funciona tanto no local com Kafka quanto na nuvem.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se não temos Kubernetes com pods, o esquema é um pouco mais complicado, mas funciona com os mesmos princípios. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/dc3/8ff/e25/dc38ffe25475cb321c11e0bb41f30901.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os mesmos processos são executados dentro do contêiner, eles são orquestrados usando o S6. </font><font style="vertical-align: inherit;">Todos os mesmos processos estão em execução no mesmo contêiner.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eventualmente</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criamos uma solução completa para montar e iniciar imagens em operação, com opções para coletar e fornecer logs e métricas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolveu uma abordagem padronizada para a montagem de imagens, com base no desenvolvimento de modelos de IC;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agentes de coleta de dados são nossas extensões ao Telegraf. </font><font style="vertical-align: inherit;">Nós os executamos bem na produção;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usamos o webhook de mutação para implementar contêineres com agentes nos pods;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integrado ao ecossistema Kubernetes / Rancher;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Podemos executar os mesmos contêineres em diferentes sistemas de orquestração e obter o resultado que esperamos;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criou uma configuração de gerenciamento de contêiner totalmente dinâmica.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Co-autor: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ilya Prudnikov</font></font></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt488380/index.html">O início mais fácil no STM através de "um local"</a></li>
<li><a href="../pt488382/index.html">Eu adiciono um atraso de 3-25 segundos aos sites que visito</a></li>
<li><a href="../pt488386/index.html">Casos para aplicar ferramentas de análise de anomalias de rede: ataques através de plug-ins de navegador</a></li>
<li><a href="../pt488388/index.html">Autenticação básica de login e HTTP novamente</a></li>
<li><a href="../pt488390/index.html">Como fazer amigos do Telegram bot com o OpenId Connect</a></li>
<li><a href="../pt488404/index.html">Jogos que vale a pena esperar em 2020</a></li>
<li><a href="../pt488406/index.html">IPv6 - você está fazendo errado</a></li>
<li><a href="../pt488408/index.html">Gateway IoT Ethernet-RS485 STM32</a></li>
<li><a href="../pt488410/index.html">7 lições que aprendi em dez anos em desenvolvimento</a></li>
<li><a href="../pt488412/index.html">Criando um bot do Discord com base no discord.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>