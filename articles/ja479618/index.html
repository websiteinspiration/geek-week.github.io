<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕴🏿 👀 🎉 Postgres Pro Standard 12.1がリリースされました 💇 👢 📃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Postgres Pro Standard DBMSは、PostgreSQLを使用するよりも速くユーザーに製品を提供するために発明されました。 PostgreSQLにはまだ含まれていませんが、そこにしっかりとしたパスにある機能は、Postgres Pro Standardに含まれています。また、Po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Postgres Pro Standard 12.1がリリースされました</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/479618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postgres Pro Standard DBMSは、PostgreSQLを使用するよりも速くユーザーに製品を提供するために発明されました。 PostgreSQLにはまだ含まれていませんが、そこにしっかりとしたパスにある機能は、Postgres Pro Standardに含まれています。また、Postgres Pro Standardには、お客様が要求するいくつかの拡張機能が含まれていますが、標準のPostgreSQLディストリビューションでは使用できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Postgres Pro Standardの場合、例外があり、ユーザーの要求に応じて、ユーザーの満足のために、それほど重要ではない機能が含まれていますが、これはPostgres Pro Enterpriseでのみ有効な場所です。特に、以下のPTRACKです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてではありませんが、Standardに含まれる追加の拡張機能とユーティリティのかなりの部分がPostgres Professionalによって開発されました。すべてのPostgres Proパッチは、私たち自身の努力によって発明および実装されました。データベースエンジンへの介入を必要とする改善から始めましょう。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Postgres Pro StandardはPostgreSQLとは2つのレベルで異なります。アセンブリに含まれる拡張機能とユーティリティのセット、およびカーネル自体です。</font><font style="vertical-align: inherit;">パフォーマンスを最適化するいくつかの有用なパッチ（ブレーキなしのロック検出器など）とユーティリティと拡張機能の効率を向上させるパッチ（たとえば、pg_probackupを最大限の強度で動作させるために、PTRACK 2.0パッチが適用されています）。</font><font style="vertical-align: inherit;">標準とPostgreSQLのコアバージョンの違いは、互換性を最大限に高めるために最小限に抑えられています。</font><font style="vertical-align: inherit;">pg_pathman拡張機能がStandardの一部であるとしましょう。ただし、githubからダウンロードしてビルドし、バニラPostgreSQLにインストールできます。互換性の問題はありません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カーネルの変更から始めましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ICUバージョンの確認</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostgreSQLでは、デフォルトで、標準Cライブラリを使用して文字列を比較することにより文字列を並べ替えます</font><font style="vertical-align: inherit;">が、IBM </font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">開発</font><font style="vertical-align: inherit;">した</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ICU</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリを同じ目的で使用することもでき</font><font style="vertical-align: inherit;">ます。このライブラリは、主にプラットフォームに依存しない並べ替えを提供するため、私たちにとって貴重です。そのため、たとえば、1Cで使用されており、PostgreSQLの「for one-es」アセンブリはこのライブラリで長い間使用されてきました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ICUを介した文字列比較は、libcを介した場合よりも高速な場合があり、既知の文字数が多くなります。一般的に、便利なライブラリ。 Postgres Pro Standardは、最初のバージョン（9.5）から作業を続けています。 PostgreSQLでは、バージョン10以降、ICUでの作業が可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライブラリは便利ですが、いくつかの緊急事態に留意する必要があります。</font><font style="vertical-align: inherit;">DBMSユーザーがOSのアップグレードを決定したとします。</font><font style="vertical-align: inherit;">OSと一緒に、ICUライブラリもアップグレードでき、並べ替えの語順が変更されます。</font><font style="vertical-align: inherit;">その後、すぐにすべてのインデックスが使用できなくなります。インデックス検索では誤った結果が返されます。</font><font style="vertical-align: inherit;">そのような場合、基地はICUのバージョンが変更されて停止したと言った。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これは痛いほど難しい決断です。</font><font style="vertical-align: inherit;">顧客との話し合いと調査の結果、行動を和らげることが決定されました。</font><font style="vertical-align: inherit;">現在、COLLATION（ソート規則）のバージョンのみがチェックされます。</font><font style="vertical-align: inherit;">データベースで使用されているCOLLATIONのバージョンが変更されている場合、DBMSは起動時に警告を発しますが、停止はしません。</font><font style="vertical-align: inherit;">また、各セッションの開始時にユーザーに通知します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロック、結合、GROUP BYの最適化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デッドロック検出メカニズムは、パフォーマンスを低下させる可能性があります。標準では、それはできなくなりました。カーネルパッチにより、ブレーキをかけることなく機能することができます。検証メカニズムの大幅な改善後、これらの問題は多数のコアと接続でのみ発生します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
適切なインデックスが存在する場合の結合結果数の推定の改善。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、適切なインデックスを使用してフィールドをグループ化およびソートできます。この機能は、Standard 11.1.1およびEnterprise 11.2.1に最初に組み込まれました。標準12にも1つあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Postgres ProfessionalのCTOであるFedor Sigaevは、これらの有用なパッチをコミュニティに提供しており、検討中であり、バージョンPG 13に含まれることが期待されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GROUP BY操作の最適化について例を挙げて説明します。これらは明確で簡単に再現できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このパッチのポイントは、PostgresがGROUP BYにリストされているフィールドの順序を最適化しなかったことです。</font><font style="vertical-align: inherit;">また、実行時間はグループ化の順序に依存します（同じクエリ結果を使用）。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ハッカーの</font></a><font style="vertical-align: inherit;">メーリングリストの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">議論</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">詳細</font><font style="vertical-align: inherit;">があり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
処理される最初の列の値が一意である場合、他に何も比較する必要はありません。</font><font style="vertical-align: inherit;">別の列から始める場合は、比較する必要があります。</font><font style="vertical-align: inherit;">
テストを始める：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> btg;<font></font>
<font></font>
<span class="hljs-keyword">SELECT</span>
	i <span class="hljs-keyword">AS</span> id,<font></font>
	i/<span class="hljs-number">2</span> <span class="hljs-keyword">AS</span> p,<font></font>
	format(<span class="hljs-string">'%60s'</span>, i%<span class="hljs-number">2</span>) <span class="hljs-keyword">AS</span> v
	<span class="hljs-keyword">INTO</span> btg
<span class="hljs-keyword">FROM</span>
	generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">1000000</span>) i;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テキストボックスvでは、60個のスペースが生成され、その後に0または1の数字が続きます。エントリは次のようになります。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> btg <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id <span class="hljs-keyword">DESC</span> <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">3</span>;<font></font>
   id    |   p    |                              v                               <font></font>
<span class="hljs-comment">---------+--------+--------------------------------------------------------------</span>
 <span class="hljs-number">1000000</span> | <span class="hljs-number">500000</span> |                                                            <span class="hljs-number">0</span>
  <span class="hljs-number">999999</span> | <span class="hljs-number">499999</span> |                                                             <span class="hljs-number">1</span>
  <span class="hljs-number">999998</span> | <span class="hljs-number">499999</span> |                                                             <span class="hljs-number">0</span>
(<span class="hljs-number">3</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">VACUUM</span> btg;
<span class="hljs-keyword">ANALYSE</span> btg;<font></font>
<font></font>
<span class="hljs-keyword">SET</span> enable_hashagg=<span class="hljs-keyword">off</span>;
<span class="hljs-keyword">SET</span> max_parallel_workers= <span class="hljs-number">0</span>;
<span class="hljs-keyword">SET</span> max_parallel_workers_per_gather = <span class="hljs-number">0</span>;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果をグループ化します。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">VACUUM</span> btg;
<span class="hljs-keyword">EXPLAIN</span> <span class="hljs-keyword">ANALYZE</span>
<span class="hljs-keyword">SELECT</span><font></font>
	count(*)<font></font>
<span class="hljs-keyword">FROM</span><font></font>
	btg<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span>
	p, v;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostgreSQLプラン：</font></font><br>
<br>
<pre><code class="pgsql hljs">                QUERY PLAN                                                         
<span class="hljs-comment">------------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">204036.84</span>.<span class="hljs-number">.218981</span><span class="hljs-number">.05</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">494421</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">843.999</span>.<span class="hljs-number">.1194</span><span class="hljs-number">.985</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: p, v<font></font>
   -&gt;  Sort  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">204036.84</span>.<span class="hljs-number">.206536</span><span class="hljs-number">.84</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">843.990</span>.<span class="hljs-number">.946</span><span class="hljs-number">.769</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Sort Key: p, v<font></font>
         Sort <span class="hljs-keyword">Method</span>: <span class="hljs-keyword">external</span> sort  Disk: <span class="hljs-number">73320</span>kB<font></font>
         -&gt;  Seq Scan <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.00</span>.<span class="hljs-number">.22346</span><span class="hljs-number">.00</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.158</span>.<span class="hljs-number">.151</span><span class="hljs-number">.645</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
 Planning <span class="hljs-type">time</span>: <span class="hljs-number">0.317</span> ms<font></font>
 Execution <span class="hljs-type">time</span>: <span class="hljs-number">1250.086</span> ms<font></font>
(<span class="hljs-number">8</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで逆の順序で：v、そしてそのときだけp：</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">EXPLAIN</span> <span class="hljs-keyword">ANALYZE</span>
<span class="hljs-keyword">SELECT</span><font></font>
	count(*)<font></font>
<span class="hljs-keyword">FROM</span><font></font>
	btg<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><font></font>
	v, p;<font></font>
<font></font>
           QUERY PLAN                                                         <font></font>
<span class="hljs-comment">------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">204036.84</span>.<span class="hljs-number">.218981</span><span class="hljs-number">.05</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">494421</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">2552.477</span>.<span class="hljs-number">.3353</span><span class="hljs-number">.890</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: v, p<font></font>
   -&gt;  Sort  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">204036.84</span>.<span class="hljs-number">.206536</span><span class="hljs-number">.84</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">2552.469</span>.<span class="hljs-number">.3111</span><span class="hljs-number">.516</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Sort Key: v, p<font></font>
         Sort <span class="hljs-keyword">Method</span>: <span class="hljs-keyword">external</span> merge  Disk: <span class="hljs-number">76264</span>kB<font></font>
         -&gt;  Seq Scan <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.00</span>.<span class="hljs-number">.22346</span><span class="hljs-number">.00</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.082</span>.<span class="hljs-number">.126</span><span class="hljs-number">.578</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
 Planning <span class="hljs-type">time</span>: <span class="hljs-number">0.060</span> ms<font></font>
 Execution <span class="hljs-type">time</span>: <span class="hljs-number">3411.048</span> ms<font></font>
(<span class="hljs-number">8</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
逆は著しく遅いことがわかります。</font><font style="vertical-align: inherit;">これは</font></font><code>v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、値の広がりが小さい</font><font style="vertical-align: inherit;">フィールド</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">最初に分析されるため</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">残りのフィールド（ここでは、フィールドp）に対して多くのチェックを行う必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
列の処理に最適な順序を選択するパッチを使用して、同じクエリがどのように機能するかを見てみましょう。</font></font><br>
<br>
<pre><code class="pgsql hljs">            QUERY PLAN                                                         
<span class="hljs-comment">----------------------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">237400.11</span>.<span class="hljs-number">.252417</span><span class="hljs-number">.09</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">501698</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">415.541</span>.<span class="hljs-number">.703</span><span class="hljs-number">.647</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: p, v<font></font>
   -&gt;  Sort  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">237400.11</span>.<span class="hljs-number">.239900</span><span class="hljs-number">.11</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">415.533</span>.<span class="hljs-number">.507</span><span class="hljs-number">.785</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Sort Key: p, v<font></font>
         Sort <span class="hljs-keyword">Method</span>: <span class="hljs-keyword">external</span> merge  Disk: <span class="hljs-number">73488</span>kB<font></font>
         -&gt;  Seq Scan <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.00</span>.<span class="hljs-number">.22346</span><span class="hljs-number">.00</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.059</span>.<span class="hljs-number">.139</span><span class="hljs-number">.587</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
 Planning <span class="hljs-type">Time</span>: <span class="hljs-number">0.123</span> ms<font></font>
 Execution <span class="hljs-type">Time</span>: <span class="hljs-number">742.118</span> ms<font></font>
(<span class="hljs-number">8</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして逆の順序で：</font></font><br>
<br>
<pre><code class="pgsql hljs">     QUERY PLAN                                                         
<span class="hljs-comment">------------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">237400.11</span>.<span class="hljs-number">.252417</span><span class="hljs-number">.09</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">501698</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">414.322</span>.<span class="hljs-number">.714</span><span class="hljs-number">.593</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: p, v<font></font>
   -&gt;  Sort  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">237400.11</span>.<span class="hljs-number">.239900</span><span class="hljs-number">.11</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">414.312</span>.<span class="hljs-number">.517</span><span class="hljs-number">.707</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Sort Key: p, v<font></font>
         Sort <span class="hljs-keyword">Method</span>: <span class="hljs-keyword">external</span> merge  Disk: <span class="hljs-number">76384</span>kB<font></font>
         -&gt;  Seq Scan <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.00</span>.<span class="hljs-number">.22346</span><span class="hljs-number">.00</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.071</span>.<span class="hljs-number">.129</span><span class="hljs-number">.835</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
 Planning <span class="hljs-type">Time</span>: <span class="hljs-number">0.140</span> ms<font></font>
 Execution <span class="hljs-type">Time</span>: <span class="hljs-number">753.031</span> ms<font></font>
(<span class="hljs-number">8</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
計画では、あちこちで処理順序は同じであると説明されています。</font><font style="vertical-align: inherit;">したがって、時間はほぼ同じです。</font><font style="vertical-align: inherit;">次に、インデックスが使用されたときに何が起こるかを比較します。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> <span class="hljs-keyword">ON</span> btg(p, v);
<span class="hljs-keyword">SET</span> enable_seqscan=<span class="hljs-keyword">off</span>;
<span class="hljs-keyword">SET</span> enable_bitmapscan=<span class="hljs-keyword">off</span>;
<span class="hljs-keyword">VACUUM</span> btg;<font></font>
<font></font>
<span class="hljs-keyword">EXPLAIN</span> <span class="hljs-keyword">ANALYZE</span>
<span class="hljs-keyword">SELECT</span><font></font>
	count(*)<font></font>
<span class="hljs-keyword">FROM</span><font></font>
	btg<font></font>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span><font></font>
	v, p<font></font>
;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostgreSQLの場合：</font></font><br>
<br>
<pre><code class="pgsql hljs">               QUERY PLAN                                                                  
<span class="hljs-comment">---------------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.55</span>.<span class="hljs-number">.74660</span><span class="hljs-number">.04</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">494408</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.013</span>.<span class="hljs-number">.391</span><span class="hljs-number">.317</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: p, v<font></font>
   -&gt;  <span class="hljs-keyword">Index</span> <span class="hljs-keyword">Only</span> Scan <span class="hljs-keyword">using</span> btg_p_v_idx <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.55</span>.<span class="hljs-number">.62216</span><span class="hljs-number">.16</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">999974</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.009</span>.<span class="hljs-number">.120</span><span class="hljs-number">.298</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Heap Fetches: <span class="hljs-number">0</span>
 Planning <span class="hljs-type">time</span>: <span class="hljs-number">0.078</span> ms<font></font>
 Execution <span class="hljs-type">time</span>: <span class="hljs-number">442.923</span> ms<font></font>
(<span class="hljs-number">6</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして逆の順序で：</font></font><br>
<br>
<pre><code class="pgsql hljs">            QUERY PLAN                                                                     
<span class="hljs-comment">------------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">243904.22</span>.<span class="hljs-number">.258848</span><span class="hljs-number">.04</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">494408</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">2558.485</span>.<span class="hljs-number">.3352</span><span class="hljs-number">.240</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: v, p<font></font>
   -&gt;  Sort  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">243904.22</span>.<span class="hljs-number">.246404</span><span class="hljs-number">.16</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">999974</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">2558.478</span>.<span class="hljs-number">.3110</span><span class="hljs-number">.242</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Sort Key: v, p<font></font>
         Sort <span class="hljs-keyword">Method</span>: <span class="hljs-keyword">external</span> merge  Disk: <span class="hljs-number">76264</span>kB<font></font>
         -&gt;  <span class="hljs-keyword">Index</span> <span class="hljs-keyword">Only</span> Scan <span class="hljs-keyword">using</span> btg_p_v_idx <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.55</span>.<span class="hljs-number">.62216</span><span class="hljs-number">.16</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">999974</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.011</span>.<span class="hljs-number">.133</span><span class="hljs-number">.563</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
               Heap Fetches: <span class="hljs-number">0</span>
 Planning <span class="hljs-type">time</span>: <span class="hljs-number">0.093</span> ms<font></font>
 Execution <span class="hljs-type">time</span>: <span class="hljs-number">3409.335</span> ms<font></font>
(<span class="hljs-number">9</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今スタンダードに：</font></font><br>
<br>
<pre><code class="pgsql hljs">        QUERY PLAN                                                                  
<span class="hljs-comment">--------------------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.55</span>.<span class="hljs-number">.74196</span><span class="hljs-number">.82</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">501685</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.150</span>.<span class="hljs-number">.412</span><span class="hljs-number">.174</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: p, v<font></font>
   -&gt;  <span class="hljs-keyword">Index</span> <span class="hljs-keyword">Only</span> Scan <span class="hljs-keyword">using</span> btg_p_v_idx <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.55</span>.<span class="hljs-number">.61680</span><span class="hljs-number">.16</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">999974</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.134</span>.<span class="hljs-number">.149</span><span class="hljs-number">.669</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Heap Fetches: <span class="hljs-number">0</span>
 Planning <span class="hljs-type">Time</span>: <span class="hljs-number">0.175</span> ms<font></font>
 Execution <span class="hljs-type">Time</span>: <span class="hljs-number">448.635</span> ms<font></font>
(<span class="hljs-number">6</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして逆の順序で：</font></font><br>
<br>
<pre><code class="pgsql hljs">           QUERY PLAN                                                                  
<span class="hljs-comment">-------------------------------------------------------------</span>
 GroupAggregate  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.55</span>.<span class="hljs-number">.74196</span><span class="hljs-number">.82</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">501685</span> width=<span class="hljs-number">73</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.014</span>.<span class="hljs-number">.307</span><span class="hljs-number">.258</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)
   <span class="hljs-keyword">Group</span> Key: p, v<font></font>
   -&gt;  <span class="hljs-keyword">Index</span> <span class="hljs-keyword">Only</span> Scan <span class="hljs-keyword">using</span> btg_p_v_idx <span class="hljs-keyword">on</span> btg  (<span class="hljs-keyword">cost</span>=<span class="hljs-number">0.55</span>.<span class="hljs-number">.61680</span><span class="hljs-number">.16</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">999974</span> width=<span class="hljs-number">65</span>) (actual <span class="hljs-type">time</span>=<span class="hljs-number">0.008</span>.<span class="hljs-number">.89</span><span class="hljs-number">.204</span> <span class="hljs-keyword">rows</span>=<span class="hljs-number">1000000</span> loops=<span class="hljs-number">1</span>)<font></font>
         Heap Fetches: <span class="hljs-number">0</span>
 Planning <span class="hljs-type">Time</span>: <span class="hljs-number">0.054</span> ms<font></font>
 Execution <span class="hljs-type">Time</span>: <span class="hljs-number">337.766</span> ms<font></font>
(<span class="hljs-number">6</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間は再び同じです。これは自然なことです。結局のところ、本質的に、アクションは同じです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">起動時のnullバイトの置き換え</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Postgres Proはデータのnullバイト（0x00）を受け入れないため、COPY FROMでそれらを置き換える必要</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">そうしないとエラーになります</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、CSVファイルからデータをインポートしているときにお客様が遭遇した実際の問題です。</font><font style="vertical-align: inherit;">その解決策は、nullバイトを指定されたASCII文字で置き換えることです。</font><font style="vertical-align: inherit;">これは、COPY FROMの実行時に使用されるQUOTEおよびDELIMITER文字とは異なる必要があります。</font><font style="vertical-align: inherit;">そうしないと、予期しない結果になる可能性があります。</font><font style="vertical-align: inherit;">デフォルトでは、変数の値はnul_byte_replacement_on_import（文字列） '\ 0'です。つまり、置換は実行されません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WaitLSN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LSNは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log内の連続番号</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、つまりWAL（ログシーケンス番号）内の位置へのポインターです。 WAITLSNコマンドは、指定されたLSNの再生を待機しています。アプリケーションがマスターとレプリカの両方で動作する場合、それらが時々同期していることを確認する必要があります。 WAITLSNは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同期レプリケーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">同期</font></a><font style="vertical-align: inherit;">を制御するPostgreProのプロセス間メカニズム</font><font style="vertical-align: inherit;">です。デフォルトでは、待ち時間は無制限です。 Ctrl + Cキーを押すか、postgresサーバーを停止すると、待機を中止できます。 TIMEOUTを追加してタイムアウトを設定したり、NOWAITを使用して待機せずにターゲットLSNのステータスを確認したりすることもできます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションが特定のアクションを実行し、マスターのDBMSからLSN番号を受信し、レプリカのアクションがマスターと同期することを確認したいとします。</font><font style="vertical-align: inherit;">アプリケーションは、ウィザードで記録したものがレプリカにすでに到着しており、読み取る準備ができていることを確認できます。</font><font style="vertical-align: inherit;">デフォルトでは、これは通常保証されません。</font><font style="vertical-align: inherit;">WAITLSNを使用すると、この対話を制御し、デフォルトでINFINITELYからTIMEOUTおよびNOWAITまでのスリープモードを選択できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前のrecovery.confからの変数の再読み取り</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SIGHUPシグナルで、PostgreSQLはpostgresql.confを再読み取りしますが、recovery.confは再読み取りしません。</font><font style="vertical-align: inherit;">StandardおよびEnterprise 10.4.1で導入された比較的新しいカーネルパッチ。</font><font style="vertical-align: inherit;">再読み取りとrecovery.confを強制しました。</font><font style="vertical-align: inherit;">しかし、Postgresバージョン12では、recovery.confファイルはまったくありません。それからのすべての変数はpostgresql.confに転送されます。</font><font style="vertical-align: inherit;">それにもかかわらず、ファイル全体が再読み取りされても、recovery.confからの変数はSIGHUPによって再定義されませんでしたが、Postgresの再起動が必要でした。</font><font style="vertical-align: inherit;">標準では、これは必須ではありません。すべてが読み取られ、再定義されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PTRACKのサポート</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PTRACK 2.0は、StandardおよびEnterpriseバージョン11以前用に再設計されたPTRACKメカニズムです。 DBMSレベルでは、カーネルパッチのおかげで機能し、ptrack拡張が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッチに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加されました</font><font style="vertical-align: inherit;">。 PTRACK 2.0はデータページの変更を監視し、この情報を取得するためのインターフェイスを提供します。これは、診断目的、たとえば、ログ（LSN）で連続番号として設定された特定の時点に対してインスタンスが「変化」した強さを把握するためと、増分バックアップを作成するための両方で使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、増分バックアップ手順の最も困難で「費用のかかる」部分は、変更されたページのサブセットをクラスター内のページのセット全体から分離することです。サーバーがこのタスクを引き受け、変更されたページに関する情報を迅速に提供できるため、PTRACKを使用した増分バックアップの時間が大幅に削減されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PTRACK 2.0は、共有メモリ内の指定されたサイズのハッシュテーブルを使用し、定期的にptrack.mapファイルと同期されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部動作メカニズムの根本的な変更と古いバージョンと互換性のないユーザーインターフェイスのため、ptrack拡張機能はPostgresPro StandardおよびEnterpriseの12番目のバージョンでのみ使用でき、PostgreSQL 12のパッチおよび拡張機能として使用できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windowsのpsqlでコマンドを編集する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windowsのpsqlで入力コマンドを編集するための高度なサポートは、WinEditLineを使用して実装されます。</font><font style="vertical-align: inherit;">これで、異なるアルファベットの文字を同時に表示できます（特に、キリル文字は通常、ロシア語以外のWindowsで表示されます）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統一パッケージ構造</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのLinuxディストリビューションのバイナリパッケージパッケージの構造は、パッケージ間の移行を簡素化するために統一されており、競合することなくいくつかの異なるPostgreSQLベースの製品を一緒にインストールできます。</font><font style="vertical-align: inherit;">これ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">第16章に</font></a><font style="vertical-align: inherit;">記載されてい</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、拡張機能について：</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dump_stat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは早くも9.5で登場しました。データを転送または復元する場合、通常、蓄積された統計は転送されません。 ANALYZEコマンドで再アセンブルすると、指定したデータベースではなく、クラスター全体に対して実行されます。大規模なデータベースの場合、これには多くの追加時間が必要になる場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dump_stat拡張</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、pg_statisticテーブルのコンテンツをアンロードおよび復元できるように</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">する関数</font></a><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">提供し</font></a><font style="vertical-align: inherit;">ます。データのアップロード/リカバリを実行するとき、dump_statを使用して、クラスター全体に対してANALYZEコマンドを実行しなくても、既存の統計を新しいサーバーに転送できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dump_statistic関数は、pg_statisticシステムカタログの内容をアンロードします。</font><font style="vertical-align: inherit;">information_schemaスキーマとpg_catalogスキーマのテーブルに関する統計を含むものを除いて、pg_statisticの各タプルに対してINSERTを生成します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jsquery</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> JSではなく、JSON（B）を操作するため</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の拡張</font></a><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">
あることを思い出してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらのデータ型を処理するための一連の関数を提供します。</font><font style="vertical-align: inherit;">これは、インデックスを使用してJSONで検索を効率的に行うための特別なクエリ言語です（B）。</font><font style="vertical-align: inherit;">では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハブの記事、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたはたとえばJSONPath（これらの両方は、当社が開発している）、jsqueryとJSON（B）での作業の代替方法のいくつかの例を見ることができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">online_analyze</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この拡張機能</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、INSERT、UPDATE、DELETE、またはSELECT INTO操作の後に指定されたテーブルの統計を即座に更新</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">する</font></a><font style="vertical-align: inherit;">一連の関数を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">提供</font></a><font style="vertical-align: inherit;">します。</font><font style="vertical-align: inherit;">拡張機能の作成者はFedor Sigaevです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
online_analyzeモジュールを使用するには、共有ライブラリをダウンロードする必要があります。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">LOAD</span> <span class="hljs-string">'online_analyze'</span>;&nbsp;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
統計の更新はカスタマイズできます。</font><font style="vertical-align: inherit;">たとえば、テーブルのサイズのパーセンテージまたは行の変更の最小（しきい値）数を設定すると、統計がすぐに収集されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_pathman</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Postgres Professional </font><font style="vertical-align: inherit;">
の拡張機能</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_pathman</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、PostgreSQLカーネルよりも早く作成され、セクション（パーティション）を作成するためのかなり完全な関数セットを実装しました。したがって、セクションを使用した多くの操作は、どちらか一方のメカニズムで実行できます。宣言的なパーティション分割とpg_pathmanによって作成されたセクションを混在させないことをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これまでは、pg_pathmanを使用した多くの操作が高速で、PostgreSQLの一部の機能がありません。たとえば、セクションの自動作成（カット）。 PostgreSQLでは、各セクションの境界を設定する必要があります。事前にわからないデータを、セクションの数と散在させる必要のあるセクションに入力する場合は、間隔を設定し、ソフトウェアがセクション自体を必要なだけカットするのが便利です。 pg_pathmanはその方法を知っていますが、PostgreSQLはそうではありません。ただし、PG 11以降では、デフォルトセクション（デフォルト）があり、指定された境界を持つセクションに分類されないすべてのレコードをダンプできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostgreSQLコミュニティのリーダーとの基本的な合意はありますが、将来的にはpg_pathmanの独自の機能がメインブランチに含まれるようになります。</font><font style="vertical-align: inherit;">しかし、それまでは、pg_pathmanはアプリケーションDB管理者とアプリケーションプログラマーの生活を楽にします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
拡張機能を作成します。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">EXTENSION</span> pg_pathman;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pg_pathmanを使用すると、大きなテーブルをセクションに分割して、便利なAPI-セクションを作成して操作するための一連の関数を提供できます。</font><font style="vertical-align: inherit;">たとえば、関数の使用</font></font><br>
<br>
<pre><code class="pgsql hljs">create_range_partitions(relation <span class="hljs-type">REGCLASS</span>,<font></font>
                  expression	<span class="hljs-type">TEXT</span>,<font></font>
                  start_value	<span class="hljs-type">ANYELEMENT</span>,<font></font>
                  p_interval	<span class="hljs-type">INTERVAL</span>,<font></font>
                  p_count	<span class="hljs-type">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<font></font>
                        	partition_data	<span class="hljs-type">BOOLEAN</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">TRUE</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは尋ねることができます </font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SELECT</span> create_range_partitions(<span class="hljs-string">'log'</span>, <span class="hljs-string">'dt'</span>, <span class="hljs-keyword">NULL</span>::<span class="hljs-type">date</span>, <span class="hljs-string">'1 month'</span>::<span class="hljs-type">interval</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、セクションを追加します。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SELECT</span> add_range_partition(<span class="hljs-string">'log'</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-string">'2017-01-01'</span>::<span class="hljs-type">date</span>, <span class="hljs-string">'log_archive'</span>, <span class="hljs-string">'ts0'</span>);
<span class="hljs-keyword">SELECT</span> add_range_partition(<span class="hljs-string">'log'</span>, <span class="hljs-string">'2017-01-01'</span>::<span class="hljs-type">date</span>, <span class="hljs-string">'2017-02-01'</span>::<span class="hljs-type">date</span>, <span class="hljs-string">'log_1'</span>);
<span class="hljs-keyword">SELECT</span> add_range_partition(<span class="hljs-string">'log'</span>, <span class="hljs-string">'2017-02-01'</span>::<span class="hljs-type">date</span>, <span class="hljs-string">'2017-03-01'</span>::<span class="hljs-type">date</span><span class="hljs-string">', log_2'</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アーカイブログはts0テーブルスペースに作成され、残りはデフォルトで作成されます。</font><font style="vertical-align: inherit;">ただし、セクションを明示的に指定することはできませんが、間隔を設定してセクションを1つのステップで作成することにより、このDBMS操作を信頼できます。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SELECT</span> create_range_partitions(<span class="hljs-string">'log'</span>, <span class="hljs-string">'dt'</span>, <span class="hljs-string">'2017-01-01'</span>::<span class="hljs-type">date</span>, <span class="hljs-string">'1 month'</span>::<span class="hljs-type">interval</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単純なテーブルでは、次のようになります。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> pg_pathmania(id <span class="hljs-type">serial</span>, val <span class="hljs-type">float</span>);<font></font>
<font></font>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> pg_pathmania(val) <span class="hljs-keyword">SELECT</span> random() * <span class="hljs-number">1000</span> <span class="hljs-keyword">FROM</span> generate_series(<span class="hljs-number">1</span>, <span class="hljs-number">1000</span>);<font></font>
<font></font>
<span class="hljs-keyword">SELECT</span> create_range_partitions(<span class="hljs-string">'pg_pathmania'</span>, <span class="hljs-string">'id'</span>, <span class="hljs-number">0</span>, <span class="hljs-number">50</span>);<font></font>
<font></font>
test_parti=# \d+ pg_pathmania<font></font>
                                                    <span class="hljs-keyword">Table</span> "public.pg_pathmania"
 <span class="hljs-keyword">Column</span> |       <span class="hljs-keyword">Type</span>       | <span class="hljs-keyword">Collation</span> | Nullable |                 <span class="hljs-keyword">Default</span>                  | <span class="hljs-keyword">Storage</span> | S<font></font>
tats target | Description <font></font>
<span class="hljs-comment">--------+------------------+-----------+----------+-----------------------+---------+------+------</span>
 id     | <span class="hljs-type">integer</span>          |           | <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> | nextval(<span class="hljs-string">'pg_pathmania_id_seq'</span>::<span class="hljs-type">regclass</span>) | plain   |  <font></font>
            | <font></font>
 val    | <span class="hljs-type">double</span> <span class="hljs-type">precision</span> |           |          |                                          | plain   |  <font></font>
            | <font></font>
Child <span class="hljs-keyword">tables</span>: pg_pathmania_1,<font></font>
              pg_pathmania_10,<font></font>
              pg_pathmania_11,<font></font>
              pg_pathmania_12,<font></font>
              pg_pathmania_13,<font></font>
              pg_pathmania_14,<font></font>
              pg_pathmania_15,<font></font>
              pg_pathmania_16,<font></font>
              pg_pathmania_17,<font></font>
              pg_pathmania_18,<font></font>
              pg_pathmania_19,<font></font>
              pg_pathmania_2,<font></font>
              pg_pathmania_20,<font></font>
              pg_pathmania_21,<font></font>
              pg_pathmania_3,<font></font>
              pg_pathmania_4,<font></font>
              pg_pathmania_5,<font></font>
              pg_pathmania_6,<font></font>
              pg_pathmania_7,<font></font>
              pg_pathmania_8,<font></font>
              pg_pathmania_9</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostgreSQLでは、独自のチームで各セクションを作成する必要があります。</font><font style="vertical-align: inherit;">もちろん、そのような場合、必要なDDLコードを自動的に生成するスクリプトを記述します。</font><font style="vertical-align: inherit;">pg_pathmanでスクリプトを書く必要はありません。すべてがすでにそこにあります。</font><font style="vertical-align: inherit;">しかし、これは最も興味深いものではありません。</font><font style="vertical-align: inherit;">既存のセクションのいずれかにIDを取得しないだけでなく、最も近いセクションにも該当しないレコードを挿入します。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> pg_pathmania(id, val) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2000</span>, <span class="hljs-number">277.835794724524</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度、\ d + pg_pathmaniaでテーブルの内容を確認します。</font></font><br>
<br>
<pre><code class="pgsql hljs">Child <span class="hljs-keyword">tables</span>: pg_pathmania_1,<font></font>
              pg_pathmania_10,<font></font>
...<font></font>
              pg_pathmania_39,<font></font>
              pg_pathmania_4,<font></font>
              pg_pathmania_40,<font></font>
              pg_pathmania_41,</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pg_pathmanは、id = 2000のレコードが既に作成されているセクションに分類されないことを確認し、作成する必要がある数を計算し、テーブルが以前にパーティション化されたRANGE間隔を把握し、新しいレコードが含まれるセクションを作成しました。古いセクションの上部境界と新しいセクションの下部境界の間のすべてのセクション。</font><font style="vertical-align: inherit;">これは非常に便利です。更新されたデータの分割フィールドの値の予測が不十分な場合、これはpg_pathmanの重大な利点です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_query_state</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たち</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発したこの拡張機能</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">により</font></a><font style="vertical-align: inherit;">、サービス提供プロセスにおけるリクエスト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の</font></a><font style="vertical-align: inherit;">現在の状態</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">を見つける</font></a><font style="vertical-align: inherit;">ことが</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">でき</font></a><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これはバージョン9.5から存在しており、顧客管理者からの数多くのリクエストの誕生によるものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、EXPLAIN ANALYZEを使用すると、プランツリーの各ノードから収集された実行統計を表示できますが、これらの統計はクエリが完了した後にのみ収集されます。</font><font style="vertical-align: inherit;">しかし、悲しいかな人生の中で、リクエストがまだ完了しておらず、終了しない可能性があることを確認する必要がある状況があります。</font><font style="vertical-align: inherit;">pg_query_stateを使用すると、外部サービスプロセスで実行されているクエリの現在の統計を表示できます。</font><font style="vertical-align: inherit;">この場合、結果の出力の形式は、通常のEXPLAIN ANALYZEコマンドの出力とほぼ同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーティリティ：</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pgBouncer</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人気のある接続プーラー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なので、ここでそれについて話すのは奇妙です。</font><font style="vertical-align: inherit;">それは標準の一部であるだけであり、バニラPostgreSQLの場合は別途インストールする必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_probackup</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_probackup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、最も人気のある開発の1つです。</font><font style="vertical-align: inherit;">これは、主にAnastasia Lubennikova、Grigory Smolkin、およびユーザーコミュニティによって開発および更新されているバックアップおよびリカバリマネージャーです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pg_probackupの競争上の利点：ブロック単位の増分バックアップ（8KB）、3つの増分バックアップモード（PAGE、DELTA、PTRACK）、オンデマンドバックアップの整合性チェック、PostgreSQLクラスター検証、バックアップ圧縮、部分的リカバリなど</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。PTRACK増分バックアップモード、</font><font style="vertical-align: inherit;">再設計されたメカニズムの一部として</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じ名前の拡張に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存する</font><font style="vertical-align: inherit;">-PTRACK 2.0-はさらに速くなり、今やpg_probackupモードの中で最も高速で「最も安価」です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_repack</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_repackは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人気のあるユーティリティで、その操作はVACUUM FULLまたは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLUSTERに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">似てい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">テーブルを再パッケージしてボイドを削除するだけでなく、クラスター化インデックスの物理的な順序を復元する方法も知っています。</font><font style="vertical-align: inherit;">CLUSTERおよびVACUUM FULLとは異なり、これらの操作は「外出先」で実行され、例外的なテーブルロックなしで実行され、通常は効率的に機能します。</font><font style="vertical-align: inherit;">通常のバージョンには含まれていません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_variables</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
habrでのこの拡張について</font><font style="vertical-align: inherit;">、従業員Ivan Frolkovの</font><font style="vertical-align: inherit;">興味深い</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事があり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。拡張の理由は、中間結果の処理が不便で費用がかかる場合があるためです。この記事では代替案を探ります。これらの中で最も一般的なのは一時テーブルです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一時的なデータウェアハウスとして、pg_variables拡張は一時的なテーブルよりもはるかに効率的で（記事にはpgbenchテストがあります）、データセットは「パッケージと変数」のペアによって定義され、パラメーターとして渡されたり、関数から返されたりします。変数を操作するための設定/取得関数があります。したがって、たとえば、多くの変数を格納できます（packageはパッケージの名前で、小数点以下の式はこのパッケージの変数です：</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SELECT</span> pgv_set_int(<span class="hljs-string">'package'</span>,<span class="hljs-string">'#'</span>||n,n), n <span class="hljs-keyword">FROM</span> generate_series(<span class="hljs-number">1</span>,<span class="hljs-number">1000000</span>) <span class="hljs-keyword">AS</span> gs(n);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数には興味深いプロパティがあります。バグや利点ではなく、機能です。拡張機能によって保存されたデータはトランザクションの外部に存在します。トランザクションを修正した場合とロールバックした場合の両方で保存されます。</font><font style="vertical-align: inherit;">さらに、別のコマンドを実行した場合でも、部分的なデータを取得できます。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SELECT</span> pgv_insert(<span class="hljs-string">'package'</span>, <span class="hljs-string">'errs'</span>, <span class="hljs-keyword">row</span>(n)) <span class="hljs-keyword">FROM</span> generate_series(<span class="hljs-number">1</span>,<span class="hljs-number">5</span>) <span class="hljs-keyword">AS</span> gs(n) <span class="hljs-keyword">WHERE</span> <span class="hljs-number">1.0</span>/(n<span class="hljs-number">-3</span>)&lt;&gt;<span class="hljs-number">0</span>;<font></font>
ERROR:  there <span class="hljs-keyword">is</span> a <span class="hljs-type">record</span> <span class="hljs-keyword">in</span> the variable "errs" <span class="hljs-keyword">with</span> same key<font></font>
test_parti=# <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> pgv_select(<span class="hljs-string">'package'</span>,<span class="hljs-string">'errs'</span>) <span class="hljs-keyword">AS</span> r(i <span class="hljs-type">int</span>);<font></font>
 i <font></font>
<span class="hljs-comment">---</span>
 <span class="hljs-number">1</span>
 <span class="hljs-number">2</span>
(<span class="hljs-number">2</span> <span class="hljs-keyword">rows</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方で、これはあまり便利ではありません。誤って入力されたデータを削除する必要がある場合もありますが、トランザクションがロールバックされた場合でも一部のデータを保存するなど、非常に便利な場合もあります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントには、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">詳細があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、さらにいくつかの拡張：</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sr_plan、plantuner</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sr_plan </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クエリプランを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">保存および復元し</font></a><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">次のように含めます。</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SET</span> sr_plan.write_mode = <span class="hljs-keyword">true</span>;</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、後続のすべてのクエリのプランは、この変数がfalseに設定されるまでsr_plansテーブルに格納されます。</font><font style="vertical-align: inherit;">繰り返しのリクエストを含むすべてのリクエストのプランが保存されます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plantuner </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クエリの実行時に、スケジューラが指定されたインデックスを接続または切断するため</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の</font></a><font style="vertical-align: inherit;">ヒントを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">サポートし</font></a><font style="vertical-align: inherit;">ています。</font><font style="vertical-align: inherit;">GUC変数は2つしかありません：enable_index / desable_index：</font></font><br>
<br>
<pre><code class="pgsql hljs"><span class="hljs-keyword">SET</span> plantuner.disable_index=<span class="hljs-string">'id_idx2'</span>;</code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全文検索の拡張機能：shared_ispell、pg_tsparser</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">辞書</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を共有メモリ</font><font style="vertical-align: inherit;">
に配置できるshared_ispell拡張機能</font><font style="vertical-align: inherit;">は標準であり、PostgreSQLにはありません。</font><font style="vertical-align: inherit;">hunspell-dictセットには、言語用の辞書があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hunspell_en_us、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hunspell_fr、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hunspell_nl_nl、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hunspell_ru_ru</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pg_tsparser拡張子は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキスト検索</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アナライザ</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この拡張機能は、アンダースコア、アンダースコアで区切られた数字と文字を含む単語の標準的なテキスト解析戦略を変更します。</font><font style="vertical-align: inherit;">デフォルトで返される単語の個々の部分に加えて、pg_tsparserは単語全体も返します。</font><font style="vertical-align: inherit;">これは、プログラムコードが見つかったこのような技術ドキュメントや記事にとって非常に重要であり、その中には「pg_tsparser」、「pg_probackup」、「jsonb_build_object」などの単語があります。</font><font style="vertical-align: inherit;">このパーサーは、これらの単語をコンポーネントのセットとしてだけでなく、単一のトークンとしても認識するため、検索の品質が向上します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1Cの拡張</font></font></h3><br>
<ul>
<li><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mchar</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Microsoft SQL Serverとの互換性のためのオプションのデータ型です。</font></font></li>
<li><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fulleq</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -Microsoft SQL Serverとの互換性のために追加の等価演算子を提供します。</font></font></li>
<li><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fasttrun-</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一時テーブルを切り捨てるためのトランザクション安全でない関数を提供します。これにより、pg_classディレクトリが大きくなるのを防ぎます。</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これでこの短いレビューは終わりましたが、PostgresPro StandardとPostgreSQLの違いはありません。</font><font style="vertical-align: inherit;">主なものについて説明しましたが</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このページから</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開始するなどして詳細にバージョンを比較でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja479588/index.html">12月10日のJavaダイジェスト</a></li>
<li><a href="../ja479592/index.html">どのようにあなたの目標を達成するには？</a></li>
<li><a href="../ja479598/index.html">猫と犬がロボットに餌をやる</a></li>
<li><a href="../ja479600/index.html">検証用の別のDSL</a></li>
<li><a href="../ja479602/index.html">フルゲノムとは何ですか、なぜそれが必要なのですか</a></li>
<li><a href="../ja479620/index.html">逆論理</a></li>
<li><a href="../ja479622/index.html">Wavesブロックチェーンでの匿名トランザクションのプロトタイプの仕組み</a></li>
<li><a href="../ja479624/index.html">Postgres Professionalのgendar Oleg BartunovがFaride RoslovetsにPostgreSQLとロシアでのビジネスについて語った</a></li>
<li><a href="../ja479626/index.html">物理学者が知らないひねりを加えた共振器</a></li>
<li><a href="../ja479630/index.html">注意のために戦う</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>