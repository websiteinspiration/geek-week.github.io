<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧒🏻 👈🏿 👨🏿‍⚕️ Kubernetes：オープンソースとベンダー 🧙 👩🏾‍💻 💮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、私の名前はドミトリークラスノフです。5年以上の間、私はKubernetesクラスターを管理し、複雑なマイクロサービスアーキテクチャを構築してきました。今年の初めに、Containerumに基づくKubernetesクラスタ管理サービスを開始しました。この機会を利用して、このKuberne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes：オープンソースとベンダー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/500728/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、私の名前はドミトリークラスノフです。</font><font style="vertical-align: inherit;">5年以上の間、私はKubernetesクラスターを管理し、複雑なマイクロサービスアーキテクチャを構築してきました。</font><font style="vertical-align: inherit;">今年の初めに、Containerumに基づくKubernetesクラスタ管理サービスを開始しました。</font><font style="vertical-align: inherit;">この機会を利用して、このKubernetesとは何か、ベンダーとの統合がオープンソースとどのように異なるかをお話します。</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesとは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、多数のホスト上のコンテナーを管理するためのシステムです。</font><font style="vertical-align: inherit;">ちなみにギリシャ語からは「パイロット」や「舵取り」と訳されています。</font><font style="vertical-align: inherit;">もともとはGoogleによって開発され、その後、グローバルな非営利組織であるCloud Native Computing Foundationが、主要なグローバルデベロッパー、エンドユーザー、コンテナテクノロジープロバイダーを結集し、技術的貢献として移管されました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/lu/gn/jjlugngazzbnhu-fyxvlpchazjw.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多数のコンテナを操縦する </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、これらがどのような種類のコンテナであるかを見てみましょう。</font><font style="vertical-align: inherit;">このアプリケーションとそのすべての環境-主にプログラムが依存するライブラリ。</font><font style="vertical-align: inherit;">これらはすべてアーカイブにパッケージ化され、テストだけでなくオペレーティングシステムに関係なく実行できるイメージの形式で提供されます。</font><font style="vertical-align: inherit;">しかし、問題があります。多数のホストでコンテナを管理することは非常に困難です。</font><font style="vertical-align: inherit;">したがって、Kubernetesが作成されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンテナイメージは、アプリケーションとその依存関係です。アプリケーション、その依存関係、およびOSファイルシステムのイメージは、イメージのさまざまな部分、いわゆるレイヤーに配置されています。レイヤーはさまざまなコンテナーに再利用できます。たとえば、社内のすべてのアプリケーションで、Ubuntuベースレイヤーを使用できます。コンテナーを開始するとき、1つのベースレイヤーの複数のコピーをホストに保存する必要はありません。これにより、画像の保存と配信を最適化できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンテナーからアプリケーションを開始する場合、必要なレイヤーが互いに重ね合わされ、オーバーレイファイルシステムが形成されます。記録用のレイヤーが上に重ねられ、コンテナが停止すると削除されます。これにより、コンテナーを起動したときに、アプリケーションは常に同じ環境になり、変更できなくなります。これにより、異なるホストオペレーティングシステムでの環境の再現性が保証されます。 UbuntuでもCentOSでも、環境は常に同じです。さらに、コンテナは、Linuxカーネルに組み込まれたメカニズムを使用してホストから分離されています。コンテナー内のアプリケーションは、ファイル、ホストのプロセス、および隣接するコンテナーを認識しません。アプリケーションをホストOSから分離することで、セキュリティがさらに強化されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ホスト上のコンテナーを管理するための多くのツールがあります。</font><font style="vertical-align: inherit;">これらの中で最も人気のあるのはDockerです。</font><font style="vertical-align: inherit;">コンテナのライフサイクル全体を保証できます。</font><font style="vertical-align: inherit;">ただし、1つのホストでのみ機能します。</font><font style="vertical-align: inherit;">複数のホストでコンテナーを管理する必要がある場合、Dockerはエンジニアの生活を地獄に変えることができます。</font><font style="vertical-align: inherit;">それがKubernetesが作成された理由です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesの需要は、複数のホスト上にあるコンテナーのグループをいくつかの単一のエンティティーとして操縦する機能によるものです。</font><font style="vertical-align: inherit;">システムの人気により、DevOpsまたは開発オペレーションを構築する機能が提供されます。このオペレーションでは、Kubernetesを使用してこのDevOps自体のプロセスを開始します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/4k/fm/l14kfmzc4n0ohovryr9sb0m1pbc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図1. Kubernetesが機能する仕組みの概略図</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全自動化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevOpsは、原則として、開発プロセスの自動化です。大まかに言えば、開発者はリポジトリに注がれるコードを記述します。次に、このコードをすべてのライブラリーを含むコンテナーにすぐに自動的に収集し、テストして次のステージ（ステージング）にロールアウトし、すぐに本番環境に展開できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevOpsをKubernetesと一緒に使用すると、このプロセスを自動化して、開発者自身がほとんどまたはまったく参加せずに処理を進めることができます。これにより、開発者は自分のコンピューターでこれを行う必要がないため、アセンブリが大幅に高速化されます。コードを記述してコードをリポジトリーにプッシュするだけで、パイプラインが開始され、アセンブリ、テスト、ロールアウトプロセスが含まれる場合があります。これはすべてのコミットで発生するため、テストが進行中です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、コンテナを使用すると、このプログラムの環境全体が、テストされた形式で正確に本番環境に移行することが保証されます。</font><font style="vertical-align: inherit;">つまり、「テストではいくつかのバージョンがあり、本番には他のバージョンがありましたが、設定するとすべて落ちました」というカテゴリの問題はありません。</font><font style="vertical-align: inherit;">そして今日、マイクロサービスアーキテクチャの傾向があるため、1つの巨大なアプリケーションの代わりに何百もの小さなアプリケーションがある場合、それらを手動で管理するためには、巨大なスタッフが必要になります。</font><font style="vertical-align: inherit;">そのため、Kubernetesを使用しています。</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">長所、長所、長所</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラットフォームとしてのKubernetesの利点について説明すると、マイクロサービスアーキテクチャの管理という点で大きな利点があります。 </font></font><br>
<br>
<ul>
<li> <b>  .</b>   —      .    , —         .          .     ,  Kubernetes      . </li>
<li> <b> .</b>   Kubernetes         .       .       ,     .     Kubernetes  ,        Service Discovery.       IP-       Kubernetes.   health check`         .</li>
<li> <b> . </b>         .    Kubernetes    ConfigMap`.             .         ,     . </li>
<li> <b>Persistent Volumes. </b>          ,    ,  .        .      Kubernetes      — Persistent Volumes.       ,      ,   .        ,        .</li>
<li> <b>Load Balancer.</b>   ,   Kubernetes      Deployment, StatefulSet  ..,            .         . Kubernetes         .     ,   ?        ,        .      Kubernetes    Load Balancer.             .              .       ,     .        Kubernetes.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetesは、マイクロサービスアーキテクチャの起動に最適です。</font><font style="vertical-align: inherit;">古典的なアーキテクチャでシステムを実装することは可能ですが、無意味です。</font><font style="vertical-align: inherit;">アプリケーションが複数のレプリカで機能しない場合、違いは何ですか-Kubernetesでかどうか。</font></font><br>
 <br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンソースのKubernetes</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オープンソースのKubernetesはすばらしいものです。インストールして機能します。</font><font style="vertical-align: inherit;">アイアンサーバー、インフラストラクチャ、すべてのアプリケーションを実行するウィザードとワーカーに配置できます。</font><font style="vertical-align: inherit;">そして最も重要なこと-これはすべて無料です。</font><font style="vertical-align: inherit;">ただし、ニュアンスがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つ目は、これらすべてを展開して同行する管理者とエンジニアの知識と経験の厳格さです。</font><font style="vertical-align: inherit;">クライアントはクラスター内でアクションの完全な自由を受け取るため、クラスターの操作性の責任を負います。</font><font style="vertical-align: inherit;">そして、ここですべてを壊すことは非常に簡単です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つ目は、統合の欠如です。</font><font style="vertical-align: inherit;">一般的な仮想化プラットフォームなしでKubernetesを実行すると、プログラムのすべてのメリットが得られません。</font><font style="vertical-align: inherit;">永続ボリュームやロードバランサーサービスの使用など。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/yl/qy/s-/ylqys-vszsb7e9t4pmjylyhhh0u.png"> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図2. k8sアーキテクチャー</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベンダーのKubernetes</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラウドプロバイダーとの統合には、次の2つのオプションがあります。 </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 最初に、「クラスターの作成」ボタンをクリックするだけで、すでに構成され、作動する準備ができているクラスターを取得できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 次に、ベンダー自体がクラスターをセットアップし、クラウドとの統合を構成します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはどのように起こっていますか。クラスターを起動するエンジニアは、必要なワーカーの数とパラメーターを示します（たとえば、5つのワーカー、それぞれに10個のCPU、16 GBのRAM、たとえば100 GBのディスク）。次に、すでに形成されているクラスターにアクセスします。同時に、負荷が起動されたワーカーは完全にクライアントに与えられますが、管理プレーン全体はベンダーの責任範囲に残ります（サービスがマネージドサービスモデルに従って提供される場合）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかしながら、そのような方式には欠点があります。</font><font style="vertical-align: inherit;">管理プレーンはベンダーに残っているため、ベンダーはクライアントへの完全なアクセス権を付与せず、Kubernetesを操作する際の柔軟性が低下します。</font><font style="vertical-align: inherit;">場合によっては、クライアントがLDAP経由の認証など、特定の機能をKubernetesに結び付けたい場合がありますが、管理プレーン構成ではこれが許可されていません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/xi/lp/mexilpixodhnuve_i3i2kop5rko.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">図3.クラウドプロバイダーのKubernetesクラスターの例</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選択するもの：オープンソースまたはベンダー</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では、オープンソースのKubernetesまたはベンダーですか？</font><font style="vertical-align: inherit;">オープンソースのKubernetesを使用する場合、ユーザーは自分のしたいことをしたいと考えています。</font><font style="vertical-align: inherit;">しかし、足で自分を撃つ絶好のチャンス。</font><font style="vertical-align: inherit;">ベンダーの場合、すべてが考えられ、会社のために構成されるため、これはより複雑になります。</font><font style="vertical-align: inherit;">オープンソースのKubernetesの最大の欠点は、専門家の要件です。</font><font style="vertical-align: inherit;">ベンダーがあれば、この頭痛の種を免れることができますが、専門家に支払うかベンダーに支払うかを決める必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/te/g1/uu/teg1uu2nmmwdork-m0khn56_3ru.png"><br>
<br>
<img src="https://habrastorage.org/webt/-2/fi/vf/-2fivf91q1hgvh5j515dccobviy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、長所は明らかで、短所も知られています。</font><font style="vertical-align: inherit;">常に1つのこと：Kubernetesは、複数のコンテナーの管理を自動化することで多くの問題を解決します。</font><font style="vertical-align: inherit;">そして、オープンソースとベンダーのどちらを選択するか-誰もが自分で決める。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事は、プロバイダー#CloudMTSのContainerumサービスの主任アーキテクトであるDmitry Krasnovが作成しました。</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja500712/index.html">Digital Coronavirus-ランサムウェアとInfostealerの組み合わせ</a></li>
<li><a href="../ja500718/index.html">リモートモードのEPAM：仕組み</a></li>
<li><a href="../ja500720/index.html">新しい情報セキュリティ基準：攻撃者の生活をより困難にします</a></li>
<li><a href="../ja500722/index.html">「Bake until ready」：珍しい方法で珍しいテープ録音を保存する人</a></li>
<li><a href="../ja500724/index.html">米国の金融機関がゲームの減少への悪影響を制限する方法</a></li>
<li><a href="../ja500732/index.html">人工知能と意識理論の危機</a></li>
<li><a href="../ja500734/index.html">＃AWS Fargateの要件管理と自動CIスケーリングを備えたGitLab 12.10がリリースされました</a></li>
<li><a href="../ja500742/index.html">クラスタリングの品質評価：プロパティ、メトリック、GitHubコード</a></li>
<li><a href="../ja500744/index.html">「あなたの声をもっとよく聞くために、私のスピーカー」：自宅からよりよく放送する方法</a></li>
<li><a href="../ja500746/index.html">SMDおよびその他の小さなもの用のボクシングラック</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>