<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¼â€ğŸ­ â™ˆï¸ ğŸ§ğŸ» Kontrak publik, bagaimana memastikan konsistensinya ğŸ‘³ ğŸ“‚ ğŸšŒ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- Apakah sistem Anda terdiri dari banyak layanan yang saling berhubungan?
- masih memperbarui kode layanan secara manual saat mengubah API publik?
- p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kontrak publik, bagaimana memastikan konsistensinya</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/directum/blog/502652/"><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah sistem Anda terdiri dari banyak layanan yang saling berhubungan?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">masih memperbarui kode layanan secara manual saat mengubah API publik?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perubahan layanan Anda sering merusak pekerjaan orang lain, dan pengembang lain membenci Anda karena ini?</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menjawab ya setidaknya sekali, selamat datang!</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketentuan</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrak publik, spesifikasi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - antarmuka publik tempat Anda dapat berinteraksi dengan layanan. </font><font style="vertical-align: inherit;">Dalam teks mereka memiliki arti yang sama.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang apa artikel itu</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelajari cara mengurangi waktu yang dihabiskan untuk mengembangkan layanan web menggunakan alat untuk deskripsi kontrak dan pembuatan kode otomatis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penggunaan teknik dan alat yang dijelaskan di bawah ini akan memungkinkan Anda untuk dengan cepat meluncurkan fitur baru dan tidak merusak yang lama.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti apa masalahnya</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada sistem yang terdiri dari beberapa layanan. </font><font style="vertical-align: inherit;">Layanan ini ditugaskan untuk tim yang berbeda. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-e/nt/tj/-enttjd6jjg8qoq2c51pw4fha0a.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan konsumen tergantung pada penyedia layanan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistem berkembang, dan suatu hari penyedia layanan mengubah kontrak publiknya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hk/sf/qs/hksfqs6qfhp-ptvnfidpouif2ki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika layanan konsumen tidak siap untuk perubahan, maka sistem berhenti bekerja sepenuhnya.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1u/iv/iq/1uiviq4rc31xzihqfa4rc2qzgdy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana mengatasi masalah ini</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tim layanan pemasok akan memperbaiki semuanya</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini dapat dilakukan jika tim pemasok memiliki area subjek layanan lain dan memiliki akses ke repositori git mereka. </font><font style="vertical-align: inherit;">Ini akan bekerja hanya dalam proyek-proyek kecil ketika ada beberapa layanan dependen. </font><font style="vertical-align: inherit;">Ini adalah opsi termurah. </font><font style="vertical-align: inherit;">Jika memungkinkan, Anda harus menggunakannya.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perbarui kode layanan Anda ke tim konsumen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengapa ada yang rusak, tetapi apakah kita sedang memperbaiki? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, pertanyaan utamanya adalah bagaimana cara memperbaiki layanan Anda, seperti apa kontraknya sekarang? </font><font style="vertical-align: inherit;">Anda perlu mempelajari kode layanan penyedia baru atau menghubungi tim mereka. </font><font style="vertical-align: inherit;">Kami menghabiskan waktu mempelajari kode dan berinteraksi dengan tim lain.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pikirkan apa yang harus dilakukan untuk mencegah masalah muncul</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Opsi paling masuk akal dalam jangka panjang. </font><font style="vertical-align: inherit;">Pertimbangkan itu di bagian selanjutnya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana mencegah manifestasi suatu masalah </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siklus hidup pengembangan perangkat lunak dapat direpresentasikan dalam tiga tahap: desain, implementasi dan pengujian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap langkah perlu diperluas sebagai berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada tahap desain secara deklaratif mendefinisikan kontrak;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selama implementasi, kami menghasilkan kode server dan klien di bawah kontrak;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saat menguji, kami memeriksa kontrak dan mencoba mempertimbangkan kebutuhan pelanggan (CDC).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap langkah dijelaskan lebih lanjut sebagai contoh dari masalah kita.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana masalah terlihat dengan kita</font></font></h3><br>
<img src="https://habrastorage.org/webt/ws/qh/3j/wsqh3j_vzqriz0hufhvw5k4j_1i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti inilah ekosistem kita. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lingkaran adalah layanan, dan panah adalah saluran komunikasi di antara mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Frontend adalah aplikasi klien berbasis web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagian besar panah mengarah ke Layanan Penyimpanan. Ini menyimpan dokumen. Ini adalah layanan yang paling penting. Bagaimanapun, produk kami adalah sistem manajemen dokumen elektronik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika layanan ini mengubah kontraknya, sistem akan segera berhenti bekerja. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4t/mx/xx/4tmxxxgjb3e888bmekaqofdxhq8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sumber sistem kami sebagian besar ditulis dalam c #, tetapi ada juga layanan di Go dan Python. Dalam konteks ini, tidak masalah apa yang dilakukan layanan lain dalam gambar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rt/qw/pu/rtqwpuk7eea5fyotxyspnctk2iq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap layanan memiliki implementasi klien sendiri untuk bekerja dengan layanan penyimpanan. Saat mengganti kontrak, Anda harus memperbarui kode secara manual di setiap proyek.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya ingin menghindari pembaruan manual ke otomatis. </font><font style="vertical-align: inherit;">Ini akan membantu meningkatkan laju perubahan kode klien dan mengurangi kesalahan. </font><font style="vertical-align: inherit;">Kesalahan adalah kesalahan ketik pada URL, kesalahan karena kecerobohan, dll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, pendekatan ini tidak memperbaiki kesalahan dalam logika bisnis klien. </font><font style="vertical-align: inherit;">Anda hanya dapat menyesuaikannya secara manual.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dari masalah ke tugas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus kami, diperlukan untuk menerapkan </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pembuatan kode klien secara otomatis. </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, hal-hal berikut harus dipertimbangkan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sisi server - pengendali sudah ditulis;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">browser adalah klien dari layanan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layanan berkomunikasi melalui HTTP.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generasi harus disetel. </font><font style="vertical-align: inherit;">Misalnya, untuk mendukung JWT.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pertanyaan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam penyelesaian masalah, muncul pertanyaan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alat mana yang harus dipilih;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cara mendapatkan kontrak;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di mana menempatkan kontrak;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di mana menempatkan kode klien;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pada titik apa yang harus dilakukan generasi.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut ini adalah jawaban untuk pertanyaan-pertanyaan ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat mana yang harus dipilih</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alat untuk bekerja dengan kontrak disajikan dalam dua arah - RPC dan REST. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wy/3e/3k/wy3e3k54sqffxjda4tvynid6rcy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RPC dapat dipahami hanya sebagai panggilan jarak jauh, sementara REST membutuhkan ketentuan tambahan untuk kata kerja dan URL HTTP.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perbedaan dalam panggilan RPC dan REST disajikan di sini.</font></font></b>
                        <div class="spoiler_text"><div class="scrollable-table"><table>
<tbody><tr>
<td colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RPC - Panggilan prosedur jarak jauh</font></font></td>
<td colspan="2">REST Representational State Transfer</td>
</tr>
<tr>
<td colspan="2">  </td>
<td colspan="2">, HTTP-  URL</td>
</tr>
<tr>
<td></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Restaurant</a>:8080/Orders/PlaceOrder</td>
<td>POST</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Restaurant</a>:8080/Orders</td>
</tr>
<tr>
<td></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Restaurant</a>:8080/Orders/GetOrder?OrderNumber=1</td>
<td>GET</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Restaurant</a>:8080/Orders/1</td>
</tr>
<tr>
<td></td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Restaurant</a>:8080/Orders/UpdateOrder</td>
<td>PUT</td>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Restaurant</a>:8080/Orders/1</td>
</tr>
</tbody></table></div><br>
</div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tabel menunjukkan perbandingan alat untuk bekerja dengan REST dan RPC.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Properti</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openapi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wsdl</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penghematan</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gRPC</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebuah tipe</font></font></td>
<td colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BERISTIRAHAT</font></font></td>
<td colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rpc</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peron</font></font></td>
<td colspan="4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak tergantung</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lidah</font></font></td>
<td colspan="4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak tergantung</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Urutan pengembangan *</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode terlebih dahulu, spek dulu</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode terlebih dahulu, spek dulu</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spec pertama</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode terlebih dahulu, spek dulu</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protokol transportasi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP / 1.1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">any (REST membutuhkan HTTP)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sendiri</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP / 2</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melihat</font></font></td>
<td colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spesifikasi</font></font></td>
<td colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kerangka </font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komentar</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambang entri rendah, banyak dokumentasi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redundansi XML, SABUN, dll.</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambang entri tinggi, sedikit dokumentasi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambang entri rata-rata, dokumentasi yang lebih baik</font></font></td>
</tr>
</tbody></table></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode pertama</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pertama kita menulis bagian server, dan kemudian kita mendapatkan kontrak untuk itu. </font><font style="vertical-align: inherit;">Lebih mudah ketika sisi server sudah ditulis. </font><font style="vertical-align: inherit;">Tidak perlu menggambarkan kontrak secara manual. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spec pertama</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pertama kita mendefinisikan kontrak, lalu kita mendapatkan bagian klien dan bagian server dari mereka. </font><font style="vertical-align: inherit;">Lebih mudah di awal pengembangan ketika belum ada kode. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Output</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
WSDL tidak cocok karena redundansi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apache Thrift terlalu eksotis dan sulit dipelajari.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GRPC membutuhkan net Core 3.0 dan net Standard 2.1. </font><font style="vertical-align: inherit;">Pada saat analisis, net Core 2.2 dan net Standard 2.0 digunakan. </font><font style="vertical-align: inherit;">Tidak ada dukungan GRPC di browser di luar kotak, solusi tambahan diperlukan. </font><font style="vertical-align: inherit;">GRPC menggunakan serialisasi biner Protobuf dan HTTP / 2. </font><font style="vertical-align: inherit;">Karena itu, berbagai utilitas untuk menguji API seperti tukang pos, dll. Semakin menyempit. </font><font style="vertical-align: inherit;">Pengujian beban melalui beberapa JMeter mungkin memerlukan upaya tambahan. </font><font style="vertical-align: inherit;">Tidak cocok, beralih ke GRPC membutuhkan banyak sumber daya. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAPI tidak memerlukan pembaruan tambahan. </font><font style="vertical-align: inherit;">Ini memikat banyak alat yang mendukung bekerja dengan REST dan spesifikasi ini. </font><font style="vertical-align: inherit;">Kami memilihnya.</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat untuk bekerja dengan OpenAPI</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tabel menunjukkan perbandingan alat untuk bekerja dengan OpenAPI.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swashbuckle</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSwag</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openapitools</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versi Spesifikasi yang Didukung</font></font></td>
<td colspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dapat menghasilkan spesifikasi dalam format OpenApi v2, v3</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukungan kode pertama</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bahasa Server yang Didukung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banyak</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bahasa pelanggan yang didukung</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #, TypeScript, AngularJS, Angular (v2 +), window.fetch API</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banyak</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengaturan Generasi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melihat</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket nuget</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Paket nuget + utilitas terpisah</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilitas terpisah</font></font></td>
</tr>
</tbody></table></div><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan dari</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Swashbuckle tidak cocok, karena </font><font style="vertical-align: inherit;">memungkinkan Anda untuk hanya mendapatkan spesifikasinya. </font><font style="vertical-align: inherit;">Untuk menghasilkan kode klien, Anda perlu menggunakan solusi tambahan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenApiTools adalah alat yang menarik dengan banyak pengaturan, tetapi tidak mendukung kode terlebih dahulu. </font><font style="vertical-align: inherit;">Keuntungannya adalah kemampuan untuk menghasilkan kode server dalam banyak bahasa. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSwag nyaman karena merupakan paket Nuget. </font><font style="vertical-align: inherit;">Sangat mudah untuk terhubung saat membangun proyek. </font><font style="vertical-align: inherit;">Mendukung semua yang kami butuhkan: pendekatan kode pertama dan pembuatan kode klien dalam c #. </font><font style="vertical-align: inherit;">Kami memilihnya.</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di mana mengatur kontrak. </font><font style="vertical-align: inherit;">Cara mengakses layanan ke kontrak</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah solusi untuk mengatur penyimpanan kontrak. </font><font style="vertical-align: inherit;">Solusinya terdaftar dalam urutan meningkatnya kompleksitas.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Folder proyek layanan penyedia adalah pilihan termudah. </font><font style="vertical-align: inherit;">Jika Anda perlu menjalankan pendekatan, maka pilihlah.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">folder bersama adalah opsi yang valid jika proyek yang diinginkan dalam repositori yang sama. </font><font style="vertical-align: inherit;">Dalam jangka panjang, akan sulit untuk mempertahankan integritas kontrak dalam folder tersebut. </font><font style="vertical-align: inherit;">Ini mungkin memerlukan alat tambahan untuk menjelaskan berbagai versi kontrak, dll.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositori terpisah untuk spesifikasi - jika proyek berada dalam repositori yang berbeda, maka kontrak harus ditempatkan di tempat umum. </font><font style="vertical-align: inherit;">Kerugiannya sama dengan folder bersama.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melalui API layanan (swagger.ui, swaggerhub) - layanan terpisah yang berhubungan dengan manajemen spesifikasi.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memutuskan untuk menggunakan opsi paling sederhana - untuk menyimpan kontrak di folder proyek penyedia layanan. </font><font style="vertical-align: inherit;">Ini cukup bagi kita pada tahap ini, jadi mengapa membayar lebih?</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada titik apa yang Anda hasilkan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang Anda perlu memutuskan pada titik apa untuk melakukan pembuatan kode. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kontrak dibagikan, layanan konsumen dapat menerima kontrak dan menghasilkan kode sendiri jika perlu. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memutuskan untuk menempatkan kontrak dalam folder dengan proyek penyedia layanan. </font><font style="vertical-align: inherit;">Ini berarti bahwa pembangkitan dapat dilakukan setelah perakitan proyek layanan pemasok itu sendiri.</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di mana menempatkan kode klien</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode klien akan dihasilkan oleh kontrak. </font><font style="vertical-align: inherit;">Masih mencari tahu di mana menempatkannya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sepertinya ide yang bagus untuk meletakkan kode klien dalam proyek StorageServiceClientProxy terpisah. </font><font style="vertical-align: inherit;">Setiap proyek akan dapat menghubungkan perakitan ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manfaat dari solusi ini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode klien dekat dengan layanannya dan selalu terbaru;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konsumen dapat menggunakan tautan ke proyek dalam satu gudang.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kekurangan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak akan berfungsi jika Anda perlu membuat klien di bagian lain dari sistem, misalnya, repositori yang berbeda. </font><font style="vertical-align: inherit;">Itu dipecahkan menggunakan setidaknya folder bersama untuk kontrak;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konsumen harus ditulis dalam bahasa yang sama. </font><font style="vertical-align: inherit;">Jika Anda membutuhkan klien dalam bahasa lain, Anda perlu menggunakan OpenApiTools.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami kencangkan NSwag</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atribut Kontroler</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu memberi tahu NSwag cara membuat spesifikasi yang benar untuk pengontrol kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melakukan ini, Anda perlu mengatur atributnya.</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.Routing.Route(<span class="hljs-meta-string">"[controller]"</span>)</span>]  <span class="hljs-comment">//  url</span>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.ApiController</span>] <span class="hljs-comment">//     </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DescriptionController</span> : <span class="hljs-title">ControllerBase</span> {<font></font>
[<span class="hljs-meta">NSwag.Annotations.OpenApiOperation(<span class="hljs-meta-string">"GetDescription"</span>)</span>] <span class="hljs-comment">//    </span>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.ProducesResponseType(typeof(ConversionDescription), 200)</span>] <span class="hljs-comment">//    200  </span>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.ProducesResponseType(401)</span>] <span class="hljs-comment">//    401</span>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.ProducesResponseType(403)</span>] <span class="hljs-comment">//    403</span>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.HttpGet(<span class="hljs-meta-string">"{pluginName}/{binaryDataId}"</span>)</span>] <span class="hljs-comment">//  url</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> ActionResult&lt;ConversionDescription&gt; <span class="hljs-title">GetDescription</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> pluginName, Guid binaryDataId</span>)</span> { 
 <span class="hljs-comment">// ... </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, NSwag tidak dapat menghasilkan spesifikasi yang benar untuk aplikasi tipe MIME / octet-stream. </font><font style="vertical-align: inherit;">Misalnya, ini bisa terjadi ketika file ditransfer. </font><font style="vertical-align: inherit;">Untuk memperbaikinya, Anda perlu menulis atribut dan prosesor Anda untuk membuat spesifikasi.</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.Route(<span class="hljs-meta-string">"[controller]"</span>)</span>]<font></font>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.ApiController</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FileController</span> : <span class="hljs-title">ControllerBase</span> {<font></font>
[<span class="hljs-meta">NSwag.Annotations.OpenApiOperation(<span class="hljs-meta-string">"SaveFile"</span>)</span>]<font></font>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.ProducesResponseType(401)</span>]<font></font>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.ProducesResponseType(403)</span>]<font></font>
[<span class="hljs-meta">Microsoft.AspNetCore.Mvc.HttpPost(<span class="hljs-meta-string">"{pluginName}/{binaryDataId}/{fileName}"</span>)</span>]<font></font>
[<span class="hljs-meta">OurNamespace.FileUploadOperation</span>] <span class="hljs-comment">//  </span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">SaveFile</span>(<span class="hljs-params"></span>)</span> { <span class="hljs-comment">// ... }</span>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prosesor untuk menghasilkan spesifikasi untuk operasi file</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idenya adalah Anda dapat menulis atribut dan prosesor Anda untuk menangani atribut ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menggantung atribut pada controller, dan ketika NSwag memenuhinya, itu akan memprosesnya menggunakan prosesor kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengimplementasikan ini, NSwag menyediakan kelas OpenApiOperationProcessorAttribute dan IOperationProcessor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam proyek kami, kami membuat ahli waris kami:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FileUploadOperationAttribute: OpenApiOperationProcessorAttribute</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FileUploadOperationProcessor: IOperationProcessor</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca lebih lanjut tentang menggunakan prosesor di sini.</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasi NSwag untuk pembuatan spec dan kode</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam konfigurasi 3 bagian utama:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">runtime - Menentukan runtime .net. </font><font style="vertical-align: inherit;">Misalnya, NetCore22;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentGenerator - menjelaskan cara membuat spesifikasi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codeGenerators - mendefinisikan cara membuat kode sesuai dengan spesifikasi.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NSwag berisi banyak pengaturan, yang pada awalnya membingungkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk kenyamanan, Anda dapat menggunakan NSwag Studio. </font><font style="vertical-align: inherit;">Dengan menggunakannya, Anda dapat melihat secara real time bagaimana berbagai pengaturan memengaruhi hasil pembuatan atau spesifikasi kode. </font><font style="vertical-align: inherit;">Setelah itu, secara manual pilih pengaturan yang dipilih dalam file konfigurasi. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca lebih lanjut tentang pengaturan konfigurasi di sini</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menghasilkan spesifikasi dan kode klien ketika merakit proyek penyedia layanan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sehingga setelah perakitan proyek penyedia layanan, spesifikasi dan kode dihasilkan, lakukan hal berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat proyek WebApi untuk klien.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menulis konfigurasi untuk Nswag CLI - Nswag.json (dijelaskan di bagian sebelumnya).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menulis Target PostBuild di dalam proyek penyedia layanan csproj.</font></font></li>
</ol><br>
<code>&lt;Target Name="GenerateWebApiProxyClientâ€œ AfterTargets="PostBuildEvent"&gt;<br>
&lt;Exec Command="$(NSwagExe_Core22) run nswag.jsonâ€/&gt;<br>
</code><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ (NSwagExe_Core22) jalankan nswag.json - jalankan utilitas NSwag di bawah .bet runtine netCore 2.2 dengan konfigurasi nswag.json </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Target melakukan hal berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSwag menghasilkan spesifikasi dari unit layanan vendor.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSwag menghasilkan kode klien sesuai spesifikasi.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah setiap perakitan proyek penyedia layanan, proyek klien diperbarui. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek klien dan penyedia layanan berada dalam solusi yang sama. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Majelis berlangsung sebagai bagian dari solusi. </font><font style="vertical-align: inherit;">Solusinya dikonfigurasi bahwa proyek klien harus dirakit setelah proyek layanan pemasok. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NSwag juga memungkinkan Anda untuk menyesuaikan spesifikasi / pembuatan kode secara imperatif melalui API perangkat lunak.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana cara menambahkan dukungan untuk JWT</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami perlu melindungi layanan kami dari permintaan yang tidak sah. </font><font style="vertical-align: inherit;">Untuk ini, kami akan menggunakan token JWT. </font><font style="vertical-align: inherit;">Mereka harus dikirim dalam tajuk dari setiap permintaan HTTP sehingga penyedia layanan dapat memeriksanya dan memutuskan apakah akan memenuhi permintaan atau tidak. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Informasi lebih lanjut tentang JWT sini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jwt.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas bermuara pada kebutuhan untuk memodifikasi header permintaan HTTP keluar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk melakukan ini, generator kode NSwag dapat menghasilkan titik ekstensi - metode CreateHttpRequestMessageAsync. </font><font style="vertical-align: inherit;">Di dalam metode ini ada akses ke permintaan HTTP sebelum dikirim.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh kode</font></font></b>
                        <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">protected</span> Task&lt;HttpRequestMessage&gt; <span class="hljs-title">CreateHttpRequestMessageAsync</span>(<span class="hljs-params">CancellationToken cancellationToken</span>)</span> {
      <span class="hljs-keyword">var</span> message = <span class="hljs-keyword">new</span> HttpRequestMessage();<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">string</span>.IsNullOrWhiteSpace(<span class="hljs-keyword">this</span>.AuthorizationToken)) {<font></font>
        message.Headers.Authorization =<font></font>
          <span class="hljs-keyword">new</span> System.Net.Http.Headers.AuthenticationHeaderValue(BearerScheme, <span class="hljs-keyword">this</span>.AuthorizationToken);<font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword">return</span> Task.FromResult(message);<font></font>
    }<font></font>
</code></pre><br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami memilih opsi dengan OpenAPI, karena </font><font style="vertical-align: inherit;">Mudah diimplementasikan, dan alat untuk bekerja dengan spesifikasi ini sangat berkembang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesimpulan tentang OpenAPI dan GRPC: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAPI</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spesifikasinya adalah verbose;</font></font></li>
<li>          ,  ;</li>
<li>     ;</li>
<li>    .</li>
</ul><br>
<b>GRPC</b><br>
<br>
<ul>
<li>  ,      URL, HTTP  ..;</li>
<li>      OpenAPI;</li>
<li>    ;</li>
<li>           ;</li>
<li>     HTTP/2.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, kami menerima spesifikasi berdasarkan kode pengendali yang sudah tertulis. </font><font style="vertical-align: inherit;">Untuk melakukan ini, perlu untuk menggantung atribut khusus pada pengontrol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian, berdasarkan spesifikasi yang diterima, kami menerapkan pembuatan kode klien. </font><font style="vertical-align: inherit;">Sekarang kita tidak perlu memperbarui kode klien secara manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Studi telah dilakukan di bidang pembuatan versi dan pengujian kontrak. </font><font style="vertical-align: inherit;">Namun, itu tidak mungkin untuk menguji semuanya dalam praktik karena kurangnya sumber daya.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrak Versi Publik</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa mengubah kontrak publik?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah perubahan penyedia layanan, seluruh sistem harus tetap dalam keadaan operasional yang konsisten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Melanggar perubahan dalam API publik harus dihindari agar tidak merusak klien.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsi solusi</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanpa versi kontrak publik</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tim penyedia layanan itu sendiri memperbaiki layanan konsumen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f0/k3/_6/f0k3_6ed1gt10sz1k5ol2brrj80.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendekatan ini tidak akan berfungsi jika tim penyedia layanan tidak memiliki akses ke repositori layanan konsumen atau tidak memiliki kompetensi. </font><font style="vertical-align: inherit;">Jika tidak ada masalah seperti itu, maka Anda bisa melakukannya tanpa versi.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-8/dd/ri/-8ddri4wch4oiugyd2bvz28zvzk.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gunakan versi kontrak publik</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tim penyedia layanan meninggalkan versi kontrak sebelumnya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-v/xg/e9/-vxge9yyrzws2i3lbm5b6rrvbyq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pendekatan ini tidak memiliki kelemahan dari yang sebelumnya, tetapi menambah kesulitan lain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda harus memutuskan yang berikut ini:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alat mana yang digunakan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kapan harus memperkenalkan versi baru;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berapa lama mempertahankan versi lama.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alat mana yang digunakan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tabel tersebut menunjukkan fitur-fitur OpeanAPI dan GRPC yang terkait dengan versi.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gRPC</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openapi</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atribut versi</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada tingkat protobuf, ada paket atribut [packageName]. [Versi]</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pada tingkat spesifikasi, ada atribut basePath (untuk URL) dan Versi</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atribut usang untuk metode</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya, tetapi tidak diperhitungkan oleh pembuat kode di bawah C #</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya, ini ditandai sebagai Usang </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
. NSwag tidak didukung dengan kode terlebih dahulu, Anda harus menulis prosesor Anda</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atribut usang untuk parameter</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ditandai sebagai Usang</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya, ini ditandai sebagai Usang </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
. NSwag tidak didukung dengan kode terlebih dahulu, Anda harus menulis prosesor Anda</font></font><br>
</td>
</tr>
</tbody></table></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dihentikan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> berarti API ini tidak layak lagi digunakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kedua alat mendukung versi dan atribut yang tidak digunakan lagi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menggunakan OpenAPI dan pendekatan kode pertama, sekali lagi Anda perlu menulis prosesor untuk membuat spesifikasi yang tepat.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kapan memperkenalkan versi baru</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versi baru harus diperkenalkan ketika perubahan kontrak tidak mempertahankan kompatibilitas ke belakang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana cara memverifikasi bahwa perubahan melanggar kompatibilitas antara versi kontrak baru dan lama?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk OpenAPI ada alat Azure opeanapi-diff untuk memeriksa kompatibilitas antara 2 spesifikasi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/Azure/openapi-diff;</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak ada alat otomatis ditemukan untuk gRPC, hanya ada kebijakan versi; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">general </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/grpc/grpc/blob/master/doc/versioning.md;</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di bawah .Net </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.microsoft.com/en-us/aspnet/core/grpc/versioning?view=aspnetcore-3.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berapa lama untuk mempertahankan versi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada jawaban yang tepat untuk pertanyaan ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menghapus dukungan untuk versi lama, Anda perlu tahu siapa yang menggunakan layanan Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini akan menjadi buruk jika versi dihapus, dan orang lain menggunakannya. </font><font style="vertical-align: inherit;">Terutama sulit jika Anda tidak mengendalikan pelanggan Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi apa yang bisa dilakukan dalam situasi ini?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beri tahu pelanggan bahwa versi lama tidak akan lagi didukung. </font><font style="vertical-align: inherit;">Dalam hal ini, kami dapat kehilangan pendapatan pelanggan;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mendukung seluruh rangkaian versi. </font><font style="vertical-align: inherit;">Biaya dukungan perangkat lunak meningkat;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk menjawab pertanyaan ini, Anda perlu menanyakan bisnis - apakah pendapatan dari pelanggan lama melebihi biaya untuk mendukung versi perangkat lunak yang lebih lama? </font><font style="vertical-align: inherit;">Mungkinkah lebih menguntungkan untuk meminta pelanggan memperbarui?</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satu-satunya saran dalam situasi ini adalah lebih memperhatikan kontrak publik untuk mengurangi frekuensi perubahan mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika kontrak publik digunakan dalam sistem tertutup, Anda dapat menggunakan pendekatan CDC. </font><font style="vertical-align: inherit;">Jadi kita bisa mengetahui kapan pelanggan berhenti menggunakan versi perangkat lunak yang lebih lama. </font><font style="vertical-align: inherit;">Setelah itu, Anda dapat menghapus dukungan dari versi lama.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gunakan versi hanya jika Anda tidak bisa melakukannya tanpa itu. </font><font style="vertical-align: inherit;">Jika Anda memutuskan untuk menggunakan versi, maka saat merancang kontrak, pertimbangkan kompatibilitas versi. </font><font style="vertical-align: inherit;">Keseimbangan harus dicapai antara biaya mendukung versi yang lebih lama dan manfaat yang diberikannya. </font><font style="vertical-align: inherit;">Anda juga perlu memutuskan kapan Anda bisa berhenti mendukung versi yang lama.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrak Pengujian dan CDC</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagian ini diterangi secara dangkal, seperti </font><font style="vertical-align: inherit;">Tidak ada prasyarat serius untuk penerapan pendekatan ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrak yang digerakkan konsumen (CDC)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDC adalah jawaban untuk pertanyaan tentang bagaimana memastikan bahwa pemasok dan konsumen menggunakan kontrak yang sama. </font><font style="vertical-align: inherit;">Ini adalah semacam tes integrasi yang bertujuan memeriksa kontrak. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Idenya adalah sebagai berikut:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsumen menggambarkan kontrak.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemasok mengimplementasikan kontrak ini di rumah.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrak ini digunakan dalam proses CI di konsumen dan pemasok. </font><font style="vertical-align: inherit;">Jika prosesnya dilanggar, maka seseorang telah berhenti mematuhi kontrak.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pakta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PACT adalah alat yang mengimplementasikan ide ini.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsumen menulis tes menggunakan perpustakaan PACT.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes ini dikonversi ke file pakta artefak. </font><font style="vertical-align: inherit;">Ini berisi informasi tentang kontrak.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penyedia dan konsumen menggunakan file pakta untuk menjalankan tes.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selama tes klien, rintisan penyedia dibuat, dan selama tes pemasok, rintisan klien dibuat. </font><font style="vertical-align: inherit;">Kedua bertopik ini menggunakan file pakta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perilaku penciptaan stub sama dapat dicapai melalui menyombongkan Mock Validator </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bitbucket.org/atlassian/swagger-mock-validator/src/master</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan yang bermanfaat tentang Pakta</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pact broker - pact solusi solusi manajemen file </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.pact.io/pact_broker</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pakta belum mendukung GRPC. </font><font style="vertical-align: inherit;">Baca lebih lanjut tentang roadmap Pact </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pact.canny.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informasi lebih lanjut tentang PACT di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.pact.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa Anda harus menggunakan PACT </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.pact.io/faq/convinceme</font></font></a></li>
</ul><br>
<img src="https://habrastorage.org/webt/0u/qv/-f/0uqv-fhceairtmtcfyv6fy9b-xg.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana CDC dapat tertanam dalam CI</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menyebarkan Pakta + Pakta broker sendiri;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membeli solusi SaaS Pact Flow yang sudah jadi.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pakta dibutuhkan untuk memastikan kepatuhan kontrak. </font><font style="vertical-align: inherit;">Ini akan ditampilkan ketika perubahan kontrak melanggar harapan layanan konsumen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alat ini cocok ketika pemasok beradaptasi dengan pelanggan - pelanggan. </font><font style="vertical-align: inherit;">Ini hanya mungkin di dalam sistem yang terisolasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda membuat layanan untuk dunia luar dan tidak tahu siapa pelanggan Anda, maka Pact bukan untuk Anda.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id502636/index.html">Bisnis dan cyberpunk: campur, pertahankan, gunakan</a></li>
<li><a href="../id502638/index.html">Cara mengembangkan blog di Instagram pada tahun 2020: analisis kasus Sasha Mitroshina</a></li>
<li><a href="../id502642/index.html">Menempatkan game "Snake" di papan tempat memotong roti. Bagian 2: tampilan "vektor"</a></li>
<li><a href="../id502644/index.html">Bagaimana Sherpaa Menransmisikan Harapan Modal Ventura yang Tidak Realistis</a></li>
<li><a href="../id502648/index.html">10 kesalahpahaman teratas tentang porting Hadoop ke cloud</a></li>
<li><a href="../id502654/index.html">Jack Ma memiliki banyak kesalahan dalam bahasa Inggris, tetapi keterampilan berbicaranya lebih tinggi daripada kebanyakan siswa. Mengapa demikian?</a></li>
<li><a href="../id502656/index.html">Microminiaturisasi: semikonduktor magnetik dua atom</a></li>
<li><a href="../id502660/index.html">Bagaimana menerjemahkan "partisipasi" / "peserta" tanpa bagian / berpartisipasi</a></li>
<li><a href="../id502662/index.html">Kehidupan sehari-hari "alkemis"</a></li>
<li><a href="../id502666/index.html">Majelis 486 - pemilihan komponen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>