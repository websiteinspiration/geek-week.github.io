<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСМЁЯП╛ ЁЯСйтАНЁЯСжтАНЁЯСж ЁЯСйЁЯП╗тАНЁЯПн рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЖрдИрдкреА рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕реНрдорд╛рд░реНрдЯ рдШрд░ рддрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдкрд╣реБрдВрдЪ (рднрд╛рдЧ 2) тЧ╝я╕П ЁЯСйЁЯП╝тАНЁЯдЭтАНЁЯСиЁЯП┐ ЁЯХЦ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд░рд┐рдЪрдп
 рдкрд╣рд▓реЗ рднрд╛рдЧ рдореЗрдВ, рдореИрдВрдиреЗ рд╕рдорд╕реНрдпрд╛ рдХрдерди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦрд╛ рдФрд░ рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рдХреЛ рдХреИрд╕реЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдЕрдВрдд рдореЗрдВ, рдореИрдВрдиреЗ рдУрдкрдирд╡реАрдкреАрдПрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рд▓...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЖрдИрдкреА рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕реНрдорд╛рд░реНрдЯ рдШрд░ рддрдХ рд╕реБрд░рдХреНрд╖рд┐рдд рдкрд╣реБрдВрдЪ (рднрд╛рдЧ 2)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505412/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдЪрдп</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рднрд╛рдЧ рдореЗрдВ,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореИрдВрдиреЗ рд╕рдорд╕реНрдпрд╛ рдХрдерди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦрд╛ рдФрд░ рд╡рд┐рд╢рд▓рд┐рд╕реНрдЯ рдХреЛ рдХреИрд╕реЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ред </font><font style="vertical-align: inherit;">рдЕрдВрдд рдореЗрдВ, рдореИрдВрдиреЗ рдУрдкрдирд╡реАрдкреАрдПрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди, рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдореИрдВрдиреЗ рдбреЙрдХрдЯрд░ рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рд╕рдм рдХреБрдЫ рдЪрд▓рд╛рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рдпрд╣ рдЗрддрдирд╛ рдЖрд╕рд╛рди рдирд╣реАрдВ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореБрдЭреЗ рддреБрд░рдВрдд рдХрд╣рдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдмрд╛рдж рдореЗрдВ рдореИрдВрдиреЗ рдлрд┐рд░ рд╕реЗ рд╕рдм рдХреБрдЫ рднреБрдирд╛рдпрд╛, рдирддреАрдЬрддрди рдореИрдВрдиреЗ рдмрд╛рд╣рд░реА рд╡реАрдкреАрдПрд╕ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЪреВрдВрдХрд┐ рд╕рдм рдХреБрдЫ рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рд╣реИ, рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдореИрдВ рдХрдИ рджрд┐рд▓рдЪрд╕реНрдк рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд╕рд╛рде рдЖрдпрд╛, рдЬрд┐рди рдкрд░ рдЪрд░реНрдЪрд╛ рдХреА рдЬрд╛рдПрдЧреАред</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдерд╛рдкрдирд╛</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВ рдХреЗрд╡рд▓ рдореБрдЦреНрдп рдмрд┐рдВрджреБрдУрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реВрдВрдЧрд╛ред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ioBroker</font></font></h3><br>
<pre><code class="plaintext hljs">docker run -d --name iobhost  --net=host -v /opt/iobroker/:/opt/iobroker/ --device=/dev/ttyACM0 --env-file /opt/ioBroker_env.list --restart=always buanet/iobroker:latest
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪреВрдВрдХрд┐ рдореЗрд░реЗ рдкрд╛рд╕ рдорд┐рд╣реЛрдо рдЧреЗрдЯрд╡реЗ рд╣реИ, рд╕реЗрдВрд╕рд░ рдЗрд╕рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реИрдВ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдХрдИ рдкрд░рд┐рджреГрд╢реНрдп рднреА рд╕реНрдерд╛рдкрд┐рдд рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдореИрдВ рдЕрднреА рддрдХ рдирд╣реАрдВ рддреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддрд╛, рдореИрдВрдиреЗ рдЗрд╕реЗ ioBroker рд╕реЗ рдЬреЛрдбрд╝рд╛ред рдЙрдиреНрд╣реЛрдВрдиреЗ рд╕реЗрдВрд╕рд░ рдХреЛ рджреЗрдЦрд╛, рдЙрдиреНрд╣реЗрдВ рдЬрд╝рд┐рдЧрдмреА рд╕реНрдЯрд┐рдХ рдореЗрдВ рдлрд┐рд░ рд╕реЗ рдмрд╛рдБрдзрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рдереА (рд╣рд╛рд▓рд╛рдБрдХрд┐ рд╡рд╣рд╛рдБ рднреА рд╣реИрдВ, рдФрд░ рдХреБрдЫ рдмрдЯрди рдЗрд╕рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реИрдВ)ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдБ, ioBroker рдХреЗ рд▓рд┐рдП MiHome рдЧреЗрдЯрд╡реЗ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рдЗрд╕реЗ --net = рд╣реЛрд╕реНрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред рдЙрдиред рдпрд╣ рд╣реЛрд╕реНрдЯ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ; рдЖрдкрдХреЛ рдпрд╣ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХрдВрдЯреЗрдирд░ рдХреЛ рдХрд┐рд╕ рдкреЛрд░реНрдЯ рдХреЛ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░рдирд╛ рд╣реИред рдЗрд╕рдХреЗ рдмрд┐рдирд╛, рд╡рд╣ рдЧреЗрдЯрд╡реЗ рдирд╣реАрдВ рджреЗрдЦ рд╕рдХрддрд╛ рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рд╡рд╣ рдорд▓реНрдЯреАрдХрд╛рд╕реНрдЯ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХрдВрдЯреЗрдирд░ рдореЗрдВ Zigbee USB рд╕реНрдЯрд┐рдХ рдХреЛ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреИрд░рд╛рдореАрдЯрд░ --device = / dev / ttyACM0 рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </font><font style="vertical-align: inherit;">рд╕рд╛рде рд╣реА /opt/ioBroker_env.list рдореЗрдВ рдореБрдЭреЗ USBDEVICES = "/ dev / ttyACM0" рд▓рд╛рдЗрди рдЬреЛрдбрд╝рдирд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдХрдВрдЯреЗрдирд░ рдХреА рдкрд╣рд▓реА рд╢реБрд░реБрдЖрдд рдХреЗ рд╕рдордп рдпрд╣ рд░реЗрдЦрд╛ рдореМрдЬреВрдж рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рдЬрдм рдпрд╣ рдПрдХ рдЦрд╛рд▓реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рджреЗрдЦрддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдк рдЗрд╕реЗ рдмрд╛рдж рдореЗрдВ, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рдмреЙрдбреА рдореВрд╡рдореЗрдВрдЯ рдХрд░рдиреЗ рд╣реЛрдВрдЧреЗред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MQTT рд╕рд░реНрд╡рд░</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдПрдХ рдмрд╛рд╣рд░реА рд╡реАрдкреАрдПрд╕ рдкрд░, рдЗрд╕рдиреЗ рдордЪреНрдЫрд░ рдХрд╛ рдЧреНрд░рд╣рдг рд╢реБрд░реВ рдХрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рдореИрдВрдиреЗ рд▓реЗрдЯреНрд╕ рдЗрдирдХреНрд░рд┐рдкреНрдЯ рд╕рд░реНрдЯрд┐рдлрд┐рдХреЗрдЯ рдЬрд╛рд░реА рдХрд░рдХреЗ рдЙрд╕рдХреЗ рд▓рд┐рдП рдЯреАрдПрд▓рдПрд╕ рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреАред </font><font style="vertical-align: inherit;">рддрдм рдЙрдиреНрд╣реЛрдВрдиреЗ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рд╣реА рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб (bruteforce рд╕реЗ рд╕реБрд░рдХреНрд╖рд╛)ред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЗрд╕реЗ рд╕реНрд╡-рд╣рд╕реНрддрд╛рдХреНрд╖рд░рд┐рдд рд╕реЗ рдореБрдХреНрдд рдХрд░рддрд╛ рд╣реВрдВ, рддрд╛рдХрд┐ рдЧреНрд░рд╛рд╣рдХ рдкреНрд░рдорд╛рдг рдкрддреНрд░ рд▓рд┐рдЦ рд╕рдХреЗрдВред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenVPN</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдбреЙрдХрдЯрд░ рд╣рдм рдХреЗ рд╕рд╛рде рд▓реЛрдХрдкреНрд░рд┐рдп рдЫрд╡рд┐рдпреЛрдВ рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП (VPS) рдХрд╛рдЗрд▓рдорд╛рдирд╛ / Openvpnред </font><font style="vertical-align: inherit;">рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд▓рд┐рдП (рд╣реЛрдо рд╕рд░реНрд╡рд░ рдЬрд╣рд╛рдВ ioBroker рд╕реНрдерд╛рдкрд┐рдд рд╣реИ) - ekristen / openvpn- рдХреНрд▓рд╛рдЗрдВрдЯред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреБрдХреВрд▓рди</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдВ рдореБрдЭреЗ рдЯрд┐рдВрдХрд░ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдореИрдВрдиреЗ рдбреЙрдХрдЯрд░ рдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдкрд╣рд▓реБрдУрдВ рдХреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдорд╣рд╕реВрд╕ рдХрд┐рдпрд╛, iptables рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реБрдП, рдПрдХ рдирдпрд╛ рдЦреЛрдЬ рдХрд┐рдпрд╛, рдЬрд┐рд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ </font><font style="vertical-align: inherit;">netplan рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдореЗрд░рд╛ рдкрд╣рд▓реЗ рдХреЛрдИ рд╡реНрдпрд╡рд╕рд╛рдп рдирд╣реАрдВ рдерд╛ред </font><font style="vertical-align: inherit;">рджрд░рдЕрд╕рд▓, рдЗрд╕рд▓рд┐рдП, рдореИрдВрдиреЗ рдЗрд╕ рд▓реЗрдЦ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реАрдкреАрдПрд╕ рд╕рд░реНрд╡рд░</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenVPN рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд╕рд╛рде, рд╕рдм рдХреБрдЫ рдорд╛рдирдХ рд╣реИ, рдЬреИрд╕рд╛ </font><font style="vertical-align: inherit;">рдХрд┐ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://hub.docker.com/r/kylemanna/openvpn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ </font><font style="vertical-align: inherit;">рд▓рд┐рдЦрд╛ </font><font style="vertical-align: inherit;">рдЧрдпрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдореИрдВрдиреЗ VPS рдФрд░ рд╣реЛрдо рд╕рд░реНрд╡рд░ рдкрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рд▓реВрдкрдмреИрдХ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдХрд┐рдпрд╛ред </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/netplan/01-netcfg.yaml</font></font></i><br>
<br>
<pre><code class="plaintext hljs">	# This file describes the network interfaces available on your system<font></font>
	# For more information, see netplan(5).<font></font>
	network:<font></font>
	  version: 2<font></font>
	  renderer: networkd<font></font>
	  &lt;b&gt;ethernets:<font></font>
	    lo:<font></font>
	      renderer: networkd<font></font>
	      match:<font></font>
	        name: lo<font></font>
	      addresses:<font></font>
        - 192.168.16.1/32&lt;/b&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмреЛрд▓реНрдб рдиреЗ "рдпреЛрдЧрд╛рддреНрдордХ" рдкрд░ рдкреНрд░рдХрд╛рд╢ рдбрд╛рд▓рд╛ред рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡реЗ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рдкрддреЗ рд╣реЛрдо рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП 192.168.6.0 рдФрд░ рд▓реВрдкрдмреИрдХ рдХреЗ рд▓рд┐рдП 192.168.16.0 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред рдореИрдВ рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдХрд╣реАрдВ рднреА рдЧрд▓рддреА рди рд╣реЛред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореЗрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openvpn.conf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬреЛрдбрд╝рд╛</font></font><br>
<br>
<pre><code class="plaintext hljs">server 192.168.16.192 255.255.255.192<font></font>
push "dhcp-option DNS 192.168.16.6"<font></font>
push "route 192.168.16.0 255.255.255.128"<font></font>
client-to-client<font></font>
client-config-dir       /etc/openvpn/ccd/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВрдиреЗ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ 192.168.16.0/25 рд╕реЗ рдПрдХ рд▓реВрдкрдмреИрдХ рдмрдирд╛рдпрд╛ рд╣реИ, рдФрд░ рдореИрдВ 192.168.16.128/25 рд╕реЗ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдкрддреЗ рджреЗрддрд╛ рд╣реВрдВ, рддрд╛рдХрд┐ рдмрд╛рдж рдореЗрдВ iptables рдореЗрдВ рд╣рд▓ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдирд┐рдпрдореЛрдВ рдХреЛ рдПрдХ рдПрдХрд▓ рдЧреНрд░рд┐рдб 192.168.16.0/24 рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, рдЗрд╕рд▓рд┐рдП VPS рдореЗрдВ 192.168.16.1.1 рдХрд╛ рд▓реВрдкрдмреИрдХ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣реЛрдо рд╕рд░реНрд╡рд░ рдореЗрдВ 192.168.16.6 рд╣реИред рд╣реЛрдо рдХреНрд▓рд╛рдЗрдВрдЯреНрд╕ рдХреЗ рд▓рд┐рдП iobroker, aka dns рд╣реИ, рд╣реЛрдо рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдпрд╛ рд╡реАрдкреАрдПрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдбреЛрдореЗрди рдирд╛рдореЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдЕрдкрдирд╛ "рд╡рд╛рд╕реНрддрд╡рд┐рдХ" рдЖрдИрдкреА рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рд░ рдЬрдЧрд╣ рдПрдХ рд╡рд┐рдЪрд╛рд░ рдерд╛ред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iroute 192.168.6.6 255.255.255.255 </font><font style="vertical-align: inherit;">рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">ccd </font><font style="vertical-align: inherit;">/ iobroker рдореЗрдВ рдЯрд╛рдЗрдк рдХрд░реЗрдВ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди, рдЬрд╛рд╣рд┐рд░рд╛ рддреМрд░ рдкрд░ рдЗрд╕ рддрдереНрдп рд╕реЗ рдХрд┐ рдпрд╣ рд╣реЛрдо рд▓реИрдкрдЯреЙрдк рдХреЗ рд╡рд╛рдИрдлрд╛рдИ рдЗрдВрдЯрд░рдлреЗрд╕ рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдПрдХ рдкрддрд╛ рд╣реИ, рдФрд░ рдХрдИ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЧреЗрдЯрд╡реЗ рд╣реИ, рдЧреНрд▓рд┐рдЪ рдереЗред рдЬрд┐рд╕рдореЗрдВ рд╕реНрдорд╛рд░реНрдЯрдлреЛрди рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред рдФрд░ рдореИрдВ рдЪрд╛рд╣рддрд╛ рдерд╛ рдХрд┐ рд╣реЛрдо рдиреЗрдЯрд╡рд░реНрдХ рдПрдХ рд╕рдХреНрд░рд┐рдп рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд╕рд╛рде рдФрд░ рдЙрд╕рдХреЗ рдмрд┐рдирд╛ рджреЛрдиреЛрдВ рдХрд╛рдо рдХрд░реЗред рдФрд░ рдореБрдЭреЗ рдЧреНрд░рд╛рд╣рдХ рдХреЛ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рдереА, рдЕрдиреНрдп рд╕рдВрд╕рд╛рдзрдиреЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдШрд░ рдЖ рд░рд╣рд╛ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рдореИрдВрдиреЗ рдЗрд╕ рд╕рд░реНрд╡рд░ рдФрд░ рдЗрд╕рдХреЗ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЛ рд╣рдореЗрд╢рд╛ рд▓реВрдкрдмреИрдХ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛, рднрд▓реЗ рд╣реА рд╡реАрдкреАрдПрди рд╕рдХреНрд░рд┐рдп рд╣реЛред рдФрд░ рдЙрд╕реА рдкрддреЗ рдкрд░ рдкрддрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреЛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ccd / iobroker рдореЗрдВ</font></font></i><br>
<br>
<pre><code class="plaintext hljs">iroute 192.168.16.6 255.255.255.255</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡реИрд╕реЗ, рд╕рднреА рд╡реАрдкреАрдПрди рдХреНрд▓рд╛рдЗрдВрдЯ рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ 192.168.16.0/24 рдиреЗрдЯрд╡рд░реНрдХ рд╡реАрдкреАрдПрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реИред рдпрджрд┐ рд╡реЗ рдкреИрдХреЗрдЯ рдХреЛ 192.168.16.1 (рд▓реВрдкрдмреИрдХ рд╡реАрдкреАрдПрд╕) рдкрд░ рднреЗрдЬрддреЗ рд╣реИрдВ, рддреЛ рдкреИрдХреЗрдЯ рдХреЛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдУрдкрдирд╡реИрдк рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЬрд╛рддрд╛ рд╣реИ, рдбрд┐рдХреНрд░рд┐рдкреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рд░реНрдЧ 172.17.0.1 (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЧреЗрдЯрд╡реЗ) рдкрд░ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣ рдореЗрдЬрдмрд╛рди рдХреЛ рдорд┐рд▓рддрд╛ рд╣реИ, рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдореИрдВ рд╡реАрдкреАрдПрд╕ рд╣реЛрд╕реНрдЯ рд╕реЗ рд╡реАрдкреАрдПрди рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ "рдкрд┐рдВрдЧ" рдХреИрд╕реЗ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ рдпрд╛ 192.168.16.6 рдкрддреЗ рдХреЗ рд╕рд╛рде рд╣реЛрдо рд╕рд░реНрд╡рд░ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реВрдВ (рдФрд░ рдУрдкрди рд╡реАрдкреАрдПрди рдХрдВрдЯреЗрдирд░ рдХреЗ рдЕрдВрджрд░ рд╡реАрдкреАрдПрди рд╕реБрд░рдВрдЧ рдкрд░ рдЗрд╕рдХрд╛ рдЕрд╕реНрдерд╛рдпреА рдЖрдИрдкреА рдирд╣реАрдВ рд╣реИ)? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдореЗрд╖ 192.168.16.0 рдХреЛ OpenVPN рдХрдВрдЯреЗрдирд░ рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдмреЗрд╢рдХ, рдореИрдВ рджреЗрдЦ рд╕рдХрддрд╛ рд╣реВрдВ рдХрд┐ рдпрд╣ 172.17.0.3 рд╣реИред рд▓реЗрдХрд┐рди рдПрдХ рджрд┐рди рдпрд╣ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ OpenVPN рд╕рд░реНрд╡рд░ рдкрд░ рд╕реАрдзреЗ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдирд╣реАрдВ, рддреЛ рд╕рдм рдХреБрдЫ рдЕрдкрдиреЗ рдЖрдк рдХрд╛рдо рдХрд░реЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдФрд░ рдлрд┐рд░ рдореБрдЭреЗ рдЗрд╕реЗ рдзреВрд░реНрддрддрд╛ рд╕реЗ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред </font><font style="vertical-align: inherit;">рдореИрдВ рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рддрд╛ рд╣реВрдВ рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдирд╡реАрдирддрдо рджреНрд╡рд╛рд░рд╛ рдХрд╛рдо рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕реЗ рдЗрд╕рдореЗрдВ рдбрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="plaintext hljs">ipaddr=$(docker inspect -f '{{.NetworkSettings.IPAddress}}' vpn-client)<font></font>
route add -net 192.168.16.0/24 gw $ipaddr</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЙрдиред </font><font style="vertical-align: inherit;">docker рдирд┐рд░реАрдХреНрд╖рдг рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдореБрдЭреЗ рдкрддрд╛ рдЪрд▓ рд░рд╣рд╛ рд╣реИ рдХрд┐ рдХрдВрдЯреЗрдирд░ рдХрд╛ IP рдкрддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдореИрдВ рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЗ рд╕реЗ рдЧреНрд░рд┐рдб рдХреЛ рд░реВрдЯ рдХрд░рддрд╛ рд╣реВрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╛рдорд╛рдиреНрдп rc.local рдХреЗ рд╡рд┐рдкрд░реАрдд, рдореБрдЭреЗ рдЗрд╕реЗ Google рдХрд░рдирд╛ рдерд╛, рд▓реЗрдХрд┐рди рдХреИрд╕реЗ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреЛ рдЕрдВрддрд┐рдо рдЪрд▓рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдирд┐рд░реНрджреЗрд╢ рд╣реИ: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/etc/systemd/system/custom.target</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">[Unit] <font></font>
Description=My Custom Target<font></font>
Requires=multi-user.target<font></font>
After=multi-user.target<font></font>
AllowIsolate=yes<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдлрд╝рд╛рдЗрд▓ </font><i><font style="vertical-align: inherit;">/etc/systemd/system/last_command.service</font></i><font style="vertical-align: inherit;"> рдмрдирд╛рдПрдБ</font></font><i><font style="vertical-align: inherit;"></font></i> <br>
<br>
<pre><code class="plaintext hljs">[Unit]<font></font>
Description=My custom command<font></font>
After=multi-user.target<font></font>
[Service]<font></font>
Type=simple<font></font>
ExecStart=/usr/local/bin/my_last_command.sh<font></font>
[Install]<font></font>
WantedBy=custom.target<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ </font><i><font style="vertical-align: inherit;">/etc/systemd/system/custom.target.wants</font></i><font style="vertical-align: inherit;"> рдмрдирд╛рдПрдБ</font></font><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<pre><code class="plaintext hljs">ln -s /etc/systemd/system/last_command.service \   /etc/systemd/system/custom.target.wants/last_command.service<font></font>
systemctl daemon-reload<font></font>
systemctl set-default custom.target</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдк рдПрдХ рд░рд┐рдмреВрдЯ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд┐рдП рдмрд┐рдирд╛, рддреБрд░рдВрдд рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: systemctl рдЕрд▓рдЧ custom.target </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм, рд░рд┐рдмреВрдЯ рдХреЗ рдмрд╛рдж </font><font style="vertical-align: inherit;">, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/usr/local/bin/my_last_command.sh</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдлрд╝рд╛рдЗрд▓ </font><font style="vertical-align: inherit;">ExecStart рдореЗрдВ рд╡рд░реНрдгрд┐рдд </font><font style="vertical-align: inherit;">рд▓рд╛рдВрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд┐рдЫрд▓реЗ рд╣реЛ рдЬрд╛рдПрдЧрд╛ </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iptables</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mqtt рд╕рд░реНрд╡рд░ рдкрд░, рдореЗрд░реЗ рдкрд╛рд╕ 2 рдкреЛрд░реНрдЯ рд╣реИрдВ: 8883 рдЯреАрдПрд▓рдПрд╕ рдФрд░ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд╕рд╛рде, рд░рд┐рдореЛрдЯ рд╕реЗрдВрд╕рд░ рдХреЗ рд▓рд┐рдП рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рд╕реБрд▓рднред рд╣рд╛рдВ, рдФрд░ рдореИрдВ рдЦреБрдж рдХрд┐рд╕реА рддрд░рд╣ рдПрдордХреНрдпреВрдЯреАрдЯреА рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ рдФрд░ рдЬрд╛рдВрдЪ рд╕рдХрддрд╛ рд╣реВрдВ рдХрд┐ рдХреНрдпрд╛ рдФрд░ рдХреИрд╕реЗред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1883 рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЯреАрдПрд▓рдПрд╕ рдХреЗ рдмрд┐рдирд╛, рдХреЗрд╡рд▓ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдШрд░ рдХреЗ рд▓рд┐рдП рд╕реЛрдирдСрдл rfBridge рдХреА рдЬрд░реВрд░рдд рд╣реИ, рдЬреЛ TLS рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдХреИрд╕реЗред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдбрд░рд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдШрд░ рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ iobroker рдХреЗ рд╕рд╛рде рд╕рд░реНрд╡рд░ рдкрд░ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдХрд┐ 192.168.16.0 рдХреЗ рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЧреЗрдЯрд╡реЗ рд╣реИ, рдпрд╣ рдкреИрдХреЗрдЯ рдХреЛ OpenVPN, рдЖрджрд┐ рдХреЗ рд╕рд╛рде рдПрдХ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░реЗрдЧрд╛ред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдЕрдВрджрд░ рд╕реЗ рдкреЛрд░реНрдЯ 1883 рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреА рд╣реЛрдЧреАред рдЙрдиред iptablesред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдорд╛рдирдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╣реАрдВ рд╕реЗ рднреА рдЗрд╕ рдмрдВрджрд░рдЧрд╛рд╣ рддрдХ рдкрд╣реБрдВрдЪ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рдирд╛ рд╣реИ, рдлрд┐рд░ рдЙрд╕ рдирд┐рдпрдо рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ рдЬреЛ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдкрд╣реБрдВрдЪ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред</font></font><br>
<br>
<pre><code class="plaintext hljs">iptables -I INPUT -p tcp -m tcp --dport 1883 -j DROP<font></font>
iptables -I INPUT -s 172.17.0.0/24 -p tcp -m tcp --dport 1883 -j ACCEPT</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЧреНрд░рд┐рдб рдХреЛ рдпрд╣рд╛рдВ 172.17.0.0 рд╕реЗ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдУрдкрдирд╡реАрдкреАрдПрди рд╕реЗ "рдкрдбрд╝реЛрд╕рд┐рдпреЛрдВ" рддрдХ рдореИрдВ рдЕрдВрдд рдореЗрдВ рдПрдирдПрдЯреА рдХреЛ рдЫрд┐рдкрд╛рдиреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЬрд╛ рд░рд╣рд╛ рд╣реВрдВ (рдЬреЛ рдХрд┐ рдПрдХ iobroker рдХрдВрдЯреЗрдирд░ рд╣реИ рдХрд┐ rfBridge рдПрдХ рд╡рд╛рдИрдлрд╛рдИ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рд╣реИ), рдФрд░ рдореВрд▓ рд▓реЛрдЧреЛрдВ рд╕реЗ рдирд╣реАрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЗрд╕рд▓рд┐рдП рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдПрдХ рдЕрддрд┐ рд╕реВрдХреНрд╖реНрдо рдЕрдВрддрд░ рд╣реИред </font><font style="vertical-align: inherit;">рдореЗрд░рд╛ рдкреЛрд░реНрдЯ 1883 mqtt рдХрдВрдЯреЗрдирд░ рдореЗрдВ рднреЗрдЬрд╛ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░, рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдирд┐рдХрд▓рд╛, iptables рдкрд╣рд▓реЗ DOCKER-USER рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЛ рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣реА рд╣реИ, рдЗрд╕ рдирд┐рдпрдо рдХреЗ рд╕рд╛рде, рдкреЛрд░реНрдЯ 1883 рддрдХ рдкрд╣реБрдВрдЪ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдирд┐рдпрдо рдХреА рдЕрдиреБрдорддрд┐ рджреА рдЧрдИ рдереАред </font><font style="vertical-align: inherit;">рдФрд░ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ, рдЖрдк рдЗрд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DOCKER-USER рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдПрдХ рдЕрд╡рд░реБрджреНрдз рдирд┐рдпрдо рдмрдирд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП!</font></font><br>
<br>
<pre><code class="plaintext hljs">iptables -I DOCKR-USER -p tcp -m tcp --dport 1883 -j DROP<font></font>
iptables -I INPUT -s 172.17.0.0/24 -p tcp -m tcp --dport 1883 -j ACCEPT</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдирд┐рдЪрд▓реЗ рдПрдХ, рдХрд┐рд╕реА рдХрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рд╕реЗ рдкрд╣реБрдВрдЪ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, INPUT рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реЛрдо рд╕рд░реНрд╡рд░</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореБрдЦреНрдп рднрд╛рдЧ рд╡рд╣реА рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡рд╣ рдПрдХ рдЧреНрд░рд╛рд╣рдХ рдерд╛, рдЙрд╕реЗ рд╡реАрдкреАрдПрд╕ рдкрд░ mqtt рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд╛рдИрдлрд╛рдИ рдиреЗрдЯрд╡рд░реНрдХ (rfBridge) рд╕реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рд░реВрдЯ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред </font><font style="vertical-align: inherit;">рдЙрдиред </font><font style="vertical-align: inherit;">рдЯреНрд░реИрдлрд╝рд┐рдХ рдореВрд╡рдореЗрдВрдЯ: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rfBridge (192.168.6.8) -&gt; iobroker рд╣реЛрд╕реНрдЯ (192.168.6.6) -&gt; vpn- рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдВрдЯреЗрдирд░ (172.17.0?)? -&gt; рд╡реАрдкреАрдПрд╕ рдкрд░ opevpn рдХрдВрдЯреЗрдирд░&gt;&gt; рд▓реВрдкрдмреИрдХ VPS (192.168.16.1) -&gt; mqtt рдХрдВрдЯреЗрдирд░ред (рдкреЛрд░реНрдЯ 1883) рд╣рдо </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЧреНрд░рд╛рд╣рдХреЛрдВ рдФрд░ рд▓реВрдкрдмреИрдХ рдХреЗ рд╕рд╛рде рдЧреНрд░рд┐рдб рдХреЗ рд▓рд┐рдП "рдлреЙрд░рд╡рд░реНрдб" рдкреИрдХреЗрдЯ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="plaintext hljs">iptables -A FORWARD -d 192.168.16.0/24 -j ACCEPT</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдХрдВрдЯреЗрдирд░ рдХреА рдмрд╛рд░реАрдХрд┐рдпреЛрдВ рдкрд░ рдЬрд╛рдПрдВред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реНрдп 1</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдХреЛ рдпрд╛рдж рд╣реИ, рд╕рдмрд╕рд┐рд╕реНрдЯрдо рдХреЗ рдмреАрдЪ рдХреА рдмрд╛рддрдЪреАрдд рдЬреЛ рдореИрдВрдиреЗ рд▓реВрдкрдмреИрдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рд╣реИред </font><font style="vertical-align: inherit;">рдЙрдиред </font><font style="vertical-align: inherit;">рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рд╡реАрдкреАрдПрди-рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЗ 192.168.16.6 рдкрд░ рдкреИрдХреЗрдЯ рд╣реЛрд╕реНрдЯ (172.17.0.1) рдкрд░ рдЬрд╛рдПрдВ, рдФрд░ рд╡реАрдкреАрдПрди рд╕реБрд░рдВрдЧ рдореЗрдВ рдирд╣реАрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдк рдЗрд╕ рдХрдорд╛рдВрдб рдХреЛ рд░рдирд┐рдВрдЧ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ рд╕рдм рдХреБрдЫ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рд░рд┐рдмреВрдЯ рдХреЗ рдмрд╛рдж, рдпрд╣ рднреВрд▓ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдЖрдк iobroker.ovpn рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font></font><br>
<code>route 192.168.16.6 255.255.255.255 172.17.0.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдХрдВрдЯреЗрдирд░ рд╢реБрд░реВ рд╣реЛрдиреЗ рдкрд░ рдУрдкрдирд╡реИрдк рдЗрд╕ рдорд╛рд░реНрдЧ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕реЗ рдорд╛рдирдХ рддрд░реАрдХреЗ рд╕реЗ рдЖрд╕рд╛рдиреА рд╕реЗ рд╣рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯрд╛рд╕реНрдХ реи</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣реЛрдо рдиреЗрдЯрд╡рд░реНрдХ 192.168.6.0 (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, rfBridge рд╕реЗ) рдХреЗ рдкреИрдХреЗрдЯ iobroker рд╣реЛрд╕реНрдЯ рдореЗрдВ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рд╡реАрдкреАрдПрди-рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореИрдВ рдЬрд╛рдирдмреВрдЭрдХрд░ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдбреЛрдореЗрди рдореЗрдВ 192.168.6.0 рдиреЗрдЯрд╡рд░реНрдХ рдХреЛ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реВрдВ, рд╡реАрдкреАрдПрд╕ рдкрд░ рдУрдкрдирд╡реАрдкреАрдПрди рдХрдВрдЯреЗрдирд░ рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЗрд╕ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд╕рд╛рде рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИред рд╕реНрдкрд╖реНрдЯ рд╕рдорд╛рдзрд╛рди рд╣реИ рдХрд┐ NAT рдХреЛ vpn-client рдХреЗ рдЕрдВрджрд░ рдмрдирд╛рдпрд╛ рдЬрд╛рдП рддрд╛рдХрд┐ VPS рдкрд░ рдкреИрдХреЗрдЯ рдЙрд╕рдХреЗ рдкрддреЗ рд╕реЗ рдЖрдПред рд▓реЗрдХрд┐рди рдПрдХ рдЕрддрд┐ рд╕реВрдХреНрд╖реНрдо рдЕрдВрддрд░ рд╣реИред рдХрдВрдЯреЗрдирд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЖрд╡рд╢реНрдпрдХ iptables рдХрдорд╛рдВрдб рдХреИрд╕реЗ рдмрдЪрд╛рдПрдВ? Iptables-persistent рдХреЗ рд▓рд┐рдП рд╡рд╣рд╛рдБ рд░рдЦрдирд╛ рдЗрддрдирд╛ рдЖрд╕рд╛рди рдирд╣реАрдВ рд╣реИ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдк рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдПрдбрд┐рдЯрд┐рд╡реНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рдирдП рдХрдВрдЯреЗрдирд░ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд▓реЗрдХрд┐рди рдореИрдВ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛, рдХреНрдпреЛрдВрдХрд┐ рдЙрдиреНрдирдпрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реЛ рдЬрд╛рдПрдЧреАред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп "рдорд╛рд░ рджрд┐рдпрд╛ рдФрд░ рдирд╡реАрдирддрдо рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛, рдФрд░ рдЙрд╕рдиреЗ рдорд╛рдЙрдВрдЯреЗрдб рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рдЦреАрдВрдЪ рд▓рд┐рдпрд╛", рдпрд╣ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛ ... рдЗрд╕рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рдХрд┐ рдореИрдВ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░ рд░рд╣рд╛ рд╣реВрдВред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рдореИрдВрдиреЗ "рдХрдВрдЯреЗрдирд░ рдХреА рд╢реБрд░реБрдЖрдд рдХреЗ рдмрд╛рдж, рдЬрдмрд░рди рдЗрд╕рдореЗрдВ рдЖрджреЗрд╢реЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЬреЛ рдХрд┐ iptables рдХреЛ NAT рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддреЗ рд╣реИрдВред" </font><font style="vertical-align: inherit;">рдореИрдВрдиреЗ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЯреАрдо рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ </font></font><br>
<code>docker events --filter "container=vpn-client" --filter "event=start"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд╣ рдлрд╝рд┐рд▓реНрдЯрд░ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдИрд╡реЗрдВрдЯ рдХреЗ рд▓рд┐рдП рд▓рдЯрдХрд╛ рд░рд╣рддрд╛ рд╣реИ рдФрд░ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрдВрдЯреЗрдирд░ рд╢реБрд░реВ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдЙрд╕рдХреЗ рдмрд╛рдж, docker execute рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, рдореИрдВ рдЗрд╕рдореЗрдВ рд╣реЛрд╕реНрдЯ рд╕реЗ рдЖрд╡рд╢реНрдпрдХ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реВрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, VPS рдХреЗ рд╕рд╛рде рд╕рд╛рджреГрд╢реНрдп рджреНрд╡рд╛рд░рд╛, рдореИрдВ </font><i><font style="vertical-align: inherit;">/usr/local/bin/my_last_command.sh рдХреЛ</font></i><font style="vertical-align: inherit;"> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реВрдВ</font></font><i><font style="vertical-align: inherit;"></font></i><br>
<br>
<pre><code class="plaintext hljs">#!/bin/bash<font></font>
cont="vpn-client"<font></font>
ipaddr=$(docker inspect -f '{{.NetworkSettings.IPAddress}}' $cont)<font></font>
route add -net 192.168.16.0/24 gw $ipaddr<font></font>
for (( ; ; ))<font></font>
do<font></font>
  docker events --filter "container=$cont" --filter "event=start"<font></font>
  docker exec -it $cont iptables -t nat -I POSTROUTING -s 192.168.16.0/255.255.255.0 -j MASQUERADE<font></font>
  docker exec -it $cont iptables -t nat -I POSTROUTING -s 192.168.6.0/255.255.255.0 -j MASQUERADE<font></font>
done<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдРрд╕реЗ рдЙрджрд╛рд╣рд░рдг рд╣реИрдВ рдЬрд┐рдирдореЗрдВ рдбреЙрдХ рдЗрд╡реЗрдВрдЯ рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ awk рдЗрдирдкреБрдЯ рдХреЛ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдпрд╣ рдореБрдЭреЗ рдШрдЯрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ "рд▓рдЯрдХрд╛", рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ, рдФрд░ рдлрд┐рд░ рд╕реЗ рдШрдЯрдирд╛ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╕рд╛рди рд▓рдЧ рд░рд╣рд╛ рдерд╛ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд╖реНрдХрд░реНрд╖</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ, рдореИрдВ рдЗрд╕ рдкреЛрд╕реНрдЯ рдХреЛ рд▓рд┐рдЦрдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рдерд╛ред рдореБрдЭреЗ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдЕрдиреБрднрд╡ рдкреНрд░рд╛рдкреНрдд рд╣реБрдЖ, рд▓реЗрдХрд┐рди рдпрд╣ "рд╕реБрдВрджрд░ рдирд╣реАрдВ" рдирд┐рдХрд▓рд╛, рдпрд╣ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рдореИрдВ рдЗрд╕реЗ рдЗрддрдирд╛ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд░рддрд╛ред рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдлрд┐рд░ рд╕реЗ рд╕рдм рдХреБрдЫ рднреБрдирд╛рдпрд╛, рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рд╡реАрдкреАрдПрд╕ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ред рд▓реЗрдХрд┐рди рдЬрдм рд╕реЗ рдореИрдВрдиреЗ рджреВрд╕рд░реЗ рднрд╛рдЧ рдХрд╛ рд╡рд╛рджрд╛ рдХрд┐рдпрд╛ рд╣реИ ... рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рдбреЙрдХ рдЗрд╡реЗрдВрдЯ рдХреЗ рд╕рд╛рде рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдерд╛, рдореИрдВ рдЗрд╕реЗ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ред рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдХрд╛рдо рдЖрдПрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдВрдд рдореЗрдВ, рдореИрдВрдиреЗ рдРрд╕рд╛ рддрдп рдХрд┐рдпрд╛ред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪреВрдВрдХрд┐ рдореИрдВ рд░рд┐рд╡рд░реНрд╕ рдкреНрд░реЙрдХреНрд╕реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рдЬрд╝рди рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рдерд╛, рдФрд░ рдореИрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рдПрдХ рд╕реЗрд╡рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдмрд╛рд╣рд░ рд╕реЗ mqtt рд▓реЗ рд╕рдХрддрд╛ рд╣реВрдВ, рдореБрдЭреЗ рдЗрд╕ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рд╡реАрдкреАрдПрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред рдореИрдВ OTA рдЕрдкрдбреЗрдЯ рдХреЗ рд▓рд┐рдП рдлрд░реНрдорд╡реЗрдпрд░ рдХреЛ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ, рдЗрд╕рд╕реЗ рднреА рдлрд╛рдпрджрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдПред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mqtt wqtt.ru рдкрд░ рд▓рд┐рдпрд╛ред </font><font style="vertical-align: inherit;">рдЯреАрдПрд▓рдПрд╕ рд╣реИ (рдкрд╛рд╕рд╡рд░реНрдб рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рдореЗрдВ рднреЗрдЬреЗ рдЧрдП рд╣реИрдВ)ред </font><font style="vertical-align: inherit;">рдЧрддрд┐ рдЙрддреНрдХреГрд╖реНрдЯ рд╣реИ (mymqtthub рдХреЗ рд▓рд┐рдП 10ms рдмрдирд╛рдо 80ms)ред </font><font style="vertical-align: inherit;">рд╡рд┐рд╖рдп '$ рдбрд┐рд╡рд╛рдЗрд╕ / &lt;рдкрд╛рдЧрд▓ рдЖрдИрдбреА&gt; / рдШрдЯрдирд╛рдУрдВ' (рдЬреИрд╕реЗ рдпрд╛рдВрдбреЗрдХреНрд╕) рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрдиред </font><font style="vertical-align: inherit;">рдЬрд┐рд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЖрдк рдХрд╣реАрдВ рднреА рдЖрд╕рд╛рдиреА рд╕реЗ рдХреВрдж рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдХреАрдордд рд╕рд╕реНрддреА рд╣реИ (рдкреНрд░рддрд┐ рд╡рд░реНрд╖ 300 рд░реВрдмрд▓)ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВ рд╣реЛрд╕реНрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдореМрдЬреВрджрд╛ рдПрдХ рдкрд░ рдУрдЯреАрдП рдХреЗ рд▓рд┐рдП рдлрд░реНрдорд╡реЗрдпрд░ рдкреЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реВрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬрд╝реАрд░реЛрдЯрд┐рдпрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╡рд┐рдЬрд╝ рдХреА рдкрд╣реБрдВрдЪ рдЕрднреА рднреА рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рдФрд░ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рд╡реЗ рдЯреВрдЯ рдЧрдП рд╣реИрдВ, рддреЛ рдЗрд╕рдХреЗ рд▓рд┐рдП рдореЗрд░реЗ рдШрд░ рдореЗрдВ CO2 рдХреЗ рд╕реНрддрд░ рдХреЛ рджреЗрдЦрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдЕрдЧрд░ рдРрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рднреА рдпрд╣ рдЬрд▓реНрдж рд╣реА рдкреНрд░рд╕рд┐рджреНрдз рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдпрджрд┐ рд╡реЗ рдореБрдЭреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рддреЛрдбрд╝ рджреЗрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдм рдХреБрдЫ рд╕реБрдВрджрд░ рд╣реИ, рдпрд╣ рд╡рд┐рдлрд▓рддрд╛рдУрдВ рдХреЗ рдмрд┐рдирд╛ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ, рдХреЛрдИ рдЕрдирд╛рд╡рд╢реНрдпрдХ рд╕рд░реНрд╡рд░ рдирд╣реАрдВ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рд░рдЦрд░рдЦрд╛рд╡ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдореИрдВ рд╕рдВрддреБрд╖реНрдЯ рд╣реВрдВред</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi505394/index.html">рдкреНрд░рд╛рдЪреАрди рд╡рд╕реНрддреБрдПрдБ: рдиреЛрдХрд┐рдпрд╛ E90, рдирд╡реАрдирддрдо рд╕рдВрдЪрд╛рд░рдХ</a></li>
<li><a href="../hi505398/index.html">рдпрд╛рдВрдбреЗрдХреНрд╕ рдореЗрдВ рдХрд╛рдо рдХреЗ рдЕрдВрдзреЗрд░реЗ рдФрд░ рд╣рд▓реНрдХреЗ рдкрдХреНрд╖</a></li>
<li><a href="../hi505400/index.html">рдореЙрдбрд▓ рдХреИрд╕рд╛ рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП?</a></li>
<li><a href="../hi505402/index.html">P5.js (рднрд╛рдЧ 2 - рдХреНрдпреВрдм рдкрд░ рдПрдХ рдкреИрдЯрд░реНрди рд▓рд╛рдЧреВ рдХрд░рдирд╛) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ 3 рдбреА рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд░ 2 рдбреА рдмрдирд╛рд╡рдЯ рдХреЛ рд╕реБрдкрд░рд┐рдордкреЛрдЬ рдХрд░рдирд╛</a></li>
<li><a href="../hi505404/index.html">TED рд╡реАрдбрд┐рдпреЛ рдХреЗ рд╕рд╛рде рдЕрдВрдЧреНрд░реЗрдЬреА рд╕реАрдЦрдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛</a></li>
<li><a href="../hi505416/index.html">рдкреБрдирд░рд╛рд╡рд░реНрддрдХ рдореЛрдб рдореЗрдВ рдорд┐рдХреНрд░реЛрдЯрд┐рдХ - рдЬреИрд╕реЗ рд╡рди-рдЯреВ-рдереНрд░реА</a></li>
<li><a href="../hi505418/index.html">[рдкреНрд░рд╢реНрди] рдХреНрдпрд╛ рдЖрдкрдиреЗ рдРрд╕реЗ рд▓реЛрдЧреЛрдВ рдХреЛ рджреЗрдЦрд╛ рд╣реИ рдЬреЛ рдореЛрдмрд╛рдЗрд▓ рд╕рд╛рдордЧреНрд░реА рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ?</a></li>
<li><a href="../id486176/index.html">Memo Korespondensi Email Perusahaan</a></li>
<li><a href="../id486178/index.html">Berita FOSS No. 1 - ulasan berita sumber terbuka dan gratis untuk 27 Januari - 2 Februari 2020</a></li>
<li><a href="../id486180/index.html">Kiat dan sumber untuk membuat aplikasi tanpa server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>