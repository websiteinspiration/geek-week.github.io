<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👷🏻 🔅 ✍️ Apa yang terjadi ketika modul JS diimpor dua kali? 👲 ☕️ 👩🏽‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mari kita mulai artikel ini dengan sebuah pertanyaan. Modul ES2015 incrementberisi kode berikut:
 
 

// increment.js let counter = 0; counter++;  exp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Apa yang terjadi ketika modul JS diimpor dua kali?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/492504/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mari kita mulai artikel ini dengan sebuah pertanyaan. </font><font style="vertical-align: inherit;">Modul ES2015 </font></font><code>increment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berisi kode berikut:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// increment.js</span>
<span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>;<font></font>
counter++;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> counter;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam modul lain, yang akan kita panggil </font></font><code>consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, modul di atas diimpor 2 kali:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// consumer.js</span>
<span class="hljs-keyword">import</span> counter1 <span class="hljs-keyword">from</span> <span class="hljs-string">'./increment'</span>;
<span class="hljs-keyword">import</span> counter2 <span class="hljs-keyword">from</span> <span class="hljs-string">'./increment'</span>;<font></font>
<font></font>
counter1; <span class="hljs-comment">// =&gt; ???</span>
counter2; <span class="hljs-comment">// =&gt; ???</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sekarang, sebenarnya, sebuah pertanyaan. </font><font style="vertical-align: inherit;">Apa yang masuk dalam variabel </font></font><code>counter1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>counter2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setelah modul </font></font><code>consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">
Untuk menjawab pertanyaan ini, Anda perlu memahami bagaimana JavaScript mengeksekusi modul, dan bagaimana mereka diimpor.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/-e/gq/3p/-egq3px2qo7a_nyjchhabkyhms4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eksekusi modul</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memahami bagaimana mekanisme JavaScript internal berfungsi, penting untuk melihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spesifikasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menurut spesifikasi, setiap modul JavaScript dikaitkan dengan entitas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Record Modul</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Entri ini memiliki metode </font></font><code>Evaluate()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang dijalankan oleh modul: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika modul ini telah berhasil dieksekusi, kembalikan tidak terdefinisi; </font><font style="vertical-align: inherit;">[...] </font><font style="vertical-align: inherit;">Jika tidak, jalankan semua dependensi dari modul ini secara transparan dan kemudian jalankan modul ini. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasilnya, ternyata modul yang sama dijalankan hanya sekali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sayangnya, apa yang perlu Anda ketahui untuk menjawab pertanyaan kami tidak terbatas pada ini. </font><font style="vertical-align: inherit;">Cara memastikan bahwa panggilan instruksi</font></font><code>import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan jalur yang sama akan mengembalikan modul yang sama?</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Izinkan perintah impor</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operasi abstrak </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HostResolveImportedModule ()</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bertanggung jawab untuk mengaitkan path ke modul (specifier) ​​dengan modul tertentu </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kode impor modul terlihat seperti ini:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> <span class="hljs-built_in">module</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah apa yang dikatakan oleh spec tentang itu: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementasi HostResolveImportedModule harus memenuhi persyaratan berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nilai pengembalian normal harus merupakan turunan dari subkelas tertentu dari Catatan Modul.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika entitas Record Modul yang sesuai dengan pasangan referensi ScriptOrModule, specifier tidak ada, atau entitas seperti itu tidak dapat dibuat, pengecualian harus dilemparkan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap kali operasi ini dipanggil dengan memberikannya sebagai argumen sepasang referensiencingScriptOrModule, specifier, ia harus, dalam kasus eksekusi yang biasa, mengembalikan instance yang sama dari entitas Record Modul.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang pertimbangkan ini dengan cara yang lebih dimengerti. </font></font><br>
<br>
<code>HostResolveImportedModule(referencingScriptOrModule, specifier)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- sebuah operasi abstrak yang kembali modul sesuai dengan sepasang parameter </font></font><code>referencingScriptOrModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>specifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameternya </font></font><code>referencingScriptOrModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah modul saat ini, yaitu modul yang mengimpor.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter </font></font><code>specifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adalah string yang cocok dengan lintasan modul dalam instruksi </font></font><code>import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhir deskripsi, </font></font><code>HostResolveImportedModule()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dikatakan bahwa ketika mengimpor modul yang sesuai dengan jalur yang sama, modul yang sama diimpor:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> moduleA <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> moduleB <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> moduleC <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;<font></font>
<font></font>
<span class="hljs-comment">// moduleA, moduleB  moduleC -    </span><font></font>
<font></font>
moduleA === moduleB; <span class="hljs-comment">// =&gt; true</span>
moduleB === moduleC; <span class="hljs-comment">// =&gt; true</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menariknya, spesifikasi menunjukkan bahwa host (browser, lingkungan Node.js, secara umum - apa pun yang mencoba mengeksekusi kode JavaScript) harus menyediakan implementasi spesifik </font></font><code>HostResolveImportedModule()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menjawab</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah membaca spesifikasi dengan cermat, menjadi jelas bahwa modul JavaScript dieksekusi hanya sekali selama impor. </font><font style="vertical-align: inherit;">Dan ketika mengimpor modul menggunakan jalur yang sama, instance modul yang sama dikembalikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita kembali ke pertanyaan kita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul </font></font><code>increment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selalu dijalankan hanya sekali:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// increment.js</span>
<span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>;<font></font>
counter++;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> counter;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terlepas dari berapa kali modul diimpor </font></font><code>increment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ekspresi </font></font><code>counter++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hanya dievaluasi satu kali. </font><font style="vertical-align: inherit;">Variabel yang </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diekspor menggunakan mekanisme ekspor standar penting </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang lihat modul </font></font><code>consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// consumer.js</span>
<span class="hljs-keyword">import</span> counter1 <span class="hljs-keyword">from</span> <span class="hljs-string">'./increment'</span>;
<span class="hljs-keyword">import</span> counter2 <span class="hljs-keyword">from</span> <span class="hljs-string">'./increment'</span>;<font></font>
<font></font>
counter1; <span class="hljs-comment">// =&gt; 1</span>
counter2; <span class="hljs-comment">// =&gt; 1</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perintah </font></font><code>import counter1 from './increment'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>import counter2 from './increment'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gunakan jalur yang sama - </font></font><code>'./increment'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Hasilnya, ternyata instance modul yang sama diimpor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata </font><font style="vertical-align: inherit;">nilai yang sama 1 ditulis </font><font style="vertical-align: inherit;">ke variabel </font></font><code>counter1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>counter2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ke </font></font><code>consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ringkasan</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah memeriksa pertanyaan sederhana, kami dapat mengetahui lebih lanjut tentang bagaimana modul JavaScript dieksekusi dan diimpor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aturan yang digunakan saat mengimpor modul cukup sederhana: modul yang sama dijalankan hanya sekali. Dengan kata lain, apa yang ada dalam lingkup level modul hanya dilakukan sekali. Jika modul yang sudah dijalankan sekali diimpor kembali, maka tidak akan dieksekusi lagi. Saat mengimpor modul, modul ini menggunakan apa yang diperoleh sebagai hasil dari sesi sebelumnya untuk mengetahui apa yang sebenarnya diekspor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika suatu modul diimpor beberapa kali, tetapi penentu modul (jalur ke sana) tetap sama, spesifikasi JavaScript memastikan bahwa instance modul yang sama diimpor. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembaca yang budiman!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Seberapa sering Anda resor untuk membaca spesifikasi JavaScript, mencari tahu fitur fungsi konstruksi bahasa tertentu?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id492488/index.html">OpenID Connect: otorisasi aplikasi internal dari generik ke standar</a></li>
<li><a href="../id492492/index.html">NikiRobot - sebuah evolusi dalam robotika pendidikan</a></li>
<li><a href="../id492496/index.html">Contoh SPA Simple Notes di Mithril.js</a></li>
<li><a href="../id492500/index.html">Garasi Sains dalam bahasa Rusia. Pengalaman menerjemahkan pertunjukan Amerika</a></li>
<li><a href="../id492502/index.html">MIP * = RE: bukti pembuatan zaman dari bidang ilmu komputer yang menyebabkan efek domino dalam fisika dan matematika</a></li>
<li><a href="../id492506/index.html">3 cara membuat daftar besar di Angular</a></li>
<li><a href="../id492508/index.html">Pesan Kubernetes untuk DevOps</a></li>
<li><a href="../id492510/index.html">Modul ES6 di browser: apakah siap atau tidak?</a></li>
<li><a href="../id492512/index.html">CSS: petualangan di tanah tembus cahaya</a></li>
<li><a href="../id492514/index.html">Bagaimana cara membangun aliran dokumen rekanan elektronik yang signifikan secara hukum di Rusia dan Kazakhstan?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>