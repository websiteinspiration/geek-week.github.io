<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüëß üôçüèº üç™ Apenas mais uma ferramenta: conhecer a configura√ß√£o do servi√ßo com a Configura√ß√£o do estado desejado¬† ‚öíÔ∏è üåî ‚ùáÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A Configura√ß√£o do Estado Desejado (DSC) √© uma ferramenta de gerenciamento de configura√ß√£o do servidor. Com ele, voc√™ pode configurar o servidor (fazer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Apenas mais uma ferramenta: conhecer a configura√ß√£o do servi√ßo com a Configura√ß√£o do estado desejado¬†</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/503072/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A Configura√ß√£o do Estado Desejado (DSC) √© uma ferramenta de gerenciamento de configura√ß√£o do servidor. Com ele, voc√™ pode configurar o servidor (fazer altera√ß√µes no registro, copiar arquivos, instalar e remover componentes), monitorar o status atual das configura√ß√µes e reverter rapidamente para as configura√ß√µes b√°sicas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DSC √© interessante para quem segue a abordagem do DevOps. Essa ferramenta se adapta bem √† infraestrutura como paradigma de c√≥digo: os desenvolvedores podem adicionar seus requisitos √† configura√ß√£o e inclu√≠-los no sistema de controle de vers√£o, e as equipes podem implantar o c√≥digo sem usar processos "manuais". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juntamente com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stanislav Buldakov,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Raiffeisenbank</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Combinamos nossa experi√™ncia com o mecanismo DSC e dividimos em 2 artigos. </font><font style="vertical-align: inherit;">No primeiro, analisaremos os princ√≠pios b√°sicos do trabalho e nos familiarizaremos com os recursos de uso em exemplos pr√°ticos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúDescompacte a caixa‚Äù com o mecanismo DSC, veja quais s√£o os recursos por padr√£o e mostre onde obter recursos adicionais;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos ver como descrever a configura√ß√£o no DSC;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aprenderemos como o agente de configura√ß√£o local do agente interno aplica configura√ß√µes no servidor, mostra como ele √© configurado usando meta-configura√ß√µes;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vamos passar para casos de configura√ß√£o mais complexos: configura√ß√µes parciais e configura√ß√µes de stub.</font></font><br>
</li>
</ul><br>
<img src="https://habrastorage.org/webt/6p/cb/my/6pcbmyoaiunjv7xpcgcckapk4ok.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O DSC √© um mecanismo leve e r√°pido. </font><font style="vertical-align: inherit;">Por exemplo, usando-o, voc√™ pode instalar o .NET Framework 3.5 em m√°quinas virtuais muito mais rapidamente. </font><font style="vertical-align: inherit;">Aqui est√° o que o ajuda a acelerar o processo de configura√ß√£o do servi√ßo:</font></font><br>
<br>
<ul>
<li><b> ¬´ ¬ª   Windows   PowerShell.&nbsp;</b><br>
DSC     PowerShell      Windows Management Framework.  Linux  .  ,     PowerShell.&nbsp;</li>
<li><b>,       .&nbsp;</b><br>
 ,     ,   ,     .         DSC.&nbsp;</li>
<li><b>,            .</b> <br>
DSC          ,     .           .<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As configura√ß√µes s√£o sempre realizadas seq√ºencialmente, sem condi√ß√µes e ramifica√ß√µes. </font><font style="vertical-align: inherit;">Portanto, brevemente, o algoritmo de opera√ß√£o DSC se parece com o seguinte:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o Gerenciador de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> configura√ß√£o </font><b><font style="vertical-align: inherit;">local (LCM)</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esse √© o agente interno respons√°vel pela aplica√ß√£o das configura√ß√µes no servidor. </font><font style="vertical-align: inherit;">Dizemos a ele como as configura√ß√µes declaradas devem funcionar e em que ordem.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se forem necess√°rios recursos adicionais, instale e conecte-os com anteced√™ncia.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De forma declarativa, escrevemos a ordem de configura√ß√£o.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≥s transmitimos a configura√ß√£o no formato do arquivo MOF.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enviamos a configura√ß√£o para o servidor rec√©m-implantado ou existente de destino.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O LCM recebe a configura√ß√£o (arquivo MOF), al√©m de instru√ß√µes para configurar o pr√≥prio LCM.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A configura√ß√£o √© aplicada imediatamente por nossa equipe.</font></font><br>
</li>
</ol><br>
<img src="https://habrastorage.org/webt/xi/-k/br/xi-kbrc_in9acfygcdn5a_o9fly.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um diagrama simplificado da arquitetura DSC. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come√ßaremos a conhecer o mecanismo estudando os recursos predefinidos. </font><font style="vertical-align: inherit;">Em seguida, tente escrever a configura√ß√£o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos DSC&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os recursos DSC s√£o uma esp√©cie de an√°logo aos m√≥dulos do PowerShell. </font><font style="vertical-align: inherit;">Qualquer servidor Windows j√° possui um conjunto predefinido de recursos DSC; eles est√£o no mesmo diret√≥rio que os m√≥dulos do PowerShell. </font><font style="vertical-align: inherit;">A lista pode ser obtida atrav√©s do cmdlet Get-DscResourse. </font><font style="vertical-align: inherit;">Aqui est√° a apar√™ncia dessa lista no Windows 10 1809:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; Get-DscResource | Sort-Object -Property Name | ft ImplementedAs, Name -a<font></font>
&nbsp;<font></font>
ImplementedAs Name<font></font>
------------- ----<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Archive<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Environment<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary File<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Group<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite GroupSet<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary Log<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Package<font></font>
&nbsp;&nbsp;&nbsp;PowerShell PackageManagement<font></font>
&nbsp;&nbsp;&nbsp;PowerShell PackageManagementSource<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite ProcessSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Registry<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Script<font></font>
&nbsp;&nbsp;&nbsp;PowerShell Service<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite ServiceSet<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binary SignatureValidation<font></font>
&nbsp;&nbsp;&nbsp;PowerShell User<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForAll<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForAny<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WaitForSome<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsFeature<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite WindowsFeatureSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsOptionalFeature<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Composite WindowsOptionalFeatureSet<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsPackageCab<font></font>
&nbsp;&nbsp;&nbsp;PowerShell WindowsProcess</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os nomes dos recursos d√£o uma compreens√£o do que eles trabalham:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivo - com embalagem e descompacta√ß√£o de arquivos;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambiente - com vari√°veis ‚Äã‚Äãde ambiente;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquivo - com arquivos;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grupo - com grupos de usu√°rios locais;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Log - com logs;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pacote - com pacotes de software;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registro - com chaves do registro e seu status;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßo - com servi√ßos e seu status;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usu√°rio - com contas de usu√°rio local;</font></font><br>
</li>
<li>WindowsFeature ‚Äî   Windows Server;<br>
</li>
<li>WindowsProcess ‚Äî   Windows;<br>
</li>
<li>Script ‚Äî&nbsp;   PowerShell-   .  3  : SetScript ‚Äî  -, TestScript ‚Äî ,      , GetScript ‚Äî    .<br>
</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na maioria das vezes, os recursos DSC prontos para uso n√£o s√£o suficientes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nesse caso, voc√™ pode escrever seus pr√≥prios scripts para tudo que vai al√©m do m√≥dulo padr√£o. Para n√£o reinventar a roda, voc√™ pode usar os recursos DSC escritos por outros desenvolvedores. Por exemplo, aqui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/PowerShell/DscResources</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PSGallery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp; </font></font><br>
&nbsp;<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como instalar recursos adicionais</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Usamos o cmdlet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install-Module</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Instalar recursos √© simplesmente copiar arquivos de recursos ao longo de um dos caminhos na vari√°vel de ambiente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ env: PSModulePath</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Os recursos instalados n√£o s√£o conectados automaticamente durante a compila√ß√£o; portanto, mais tarde, os conectaremos adicionalmente na pr√≥pria configura√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar um recurso, voc√™ precisa instal√°-lo localmente e no servidor de destino. </font><font style="vertical-align: inherit;">Nas infra-estruturas locais, uma pol√≠tica de seguran√ßa normalmente pro√≠be o acesso √† Internet para servidores. </font><font style="vertical-align: inherit;">Nesse caso, o servidor DSC n√£o poder√° carregar recursos adicionais de fontes externas. </font><font style="vertical-align: inherit;">Para publicar arquivos com m√≥dulos, implantamos um reposit√≥rio NuGet local ou um servidor da web comum. </font><font style="vertical-align: inherit;">Voc√™ pode instalar recursos adicionais para o servidor da Web descompactando o m√≥dulo no diret√≥rio C: \ Arquivos de Programas \ WindowsPowerShell \ Modules \. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â exatamente isso que o cmdlet Install-Module faz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No segundo artigo, examinaremos mais de perto a diferen√ßa entre a configura√ß√£o dos modos Push e Pull.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lise de configura√ß√£o simples</font></font></h2><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A configura√ß√£o</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma descri√ß√£o simples e consistente do que precisa ser feito no servidor. </font><font style="vertical-align: inherit;">√â assim que uma configura√ß√£o simples do DSC se parece:&nbsp;</font></font><br>
<br>
<pre><code class="powershell hljs">Configuration EnvironmentVariable_Path<font></font>
{<font></font>
<span class="hljs-keyword">param</span> ()
<span class="hljs-built_in">Import-DscResource</span> <span class="hljs-literal">-ModuleName</span> <span class="hljs-string">'PSDscResources'</span><font></font>
Node localhost<font></font>
&nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; Environment CreatePathEnvironmentVariable<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Name = <span class="hljs-string">'TestPathEnvironmentVariable'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value = <span class="hljs-string">'TestValue'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ensure = <span class="hljs-string">'Present'</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Path = <span class="hljs-variable">$true</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Target = <span class="hljs-selector-tag">@</span>(<span class="hljs-string">'Process'</span>, <span class="hljs-string">'Machine'</span>)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
EnvironmentVariable_Path <span class="hljs-literal">-OutputPath</span>:<span class="hljs-string">"C:\EnvironmentVariable_Path"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o exemplo dela, vamos ver em que consiste a configura√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O bloco de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configura√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um tipo especial de fun√ß√£o do PowerShell que descreve o que queremos obter.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro do bloco cont√©m:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloco </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com par√¢metros que podem ser usados ‚Äã‚Äãinternamente;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bloquear com chamadas adicionais do PowerShell. </font><font style="vertical-align: inherit;">Aqui, no in√≠cio da configura√ß√£o, sempre executamos </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import-Resource</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para conectar recursos adicionais;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blocos com configura√ß√µes para servidores espec√≠ficos do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≥</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> $ servername.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro do bloco </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≥</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">indicamos quais recursos em um servidor espec√≠fico iremos configurar. </font><font style="vertical-align: inherit;">No exemplo acima, isso est√° criando uma vari√°vel de ambiente usando um recurso de ambiente regular. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos analisar um pouco mais e analisar a sintaxe de um recurso espec√≠fico atrav√©s do comando Get-DscResource -Name Environment -Syntax:</font></font><br>
&nbsp;<br>
<pre><code class="powershell hljs">
<span class="hljs-built_in">PS</span> C:\windows\system32&gt; <span class="hljs-built_in">Get-DscResource</span> <span class="hljs-literal">-Name</span> Environment <span class="hljs-literal">-Syntax</span>
Environment [<span class="hljs-built_in">String</span>] <span class="hljs-comment">#ResourceName</span><font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Name = [<span class="hljs-built_in">string</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">DependsOn</span> = [<span class="hljs-built_in">string</span>[]]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Ensure</span> = [<span class="hljs-built_in">string</span>]{ <span class="hljs-type">Absent</span> | <span class="hljs-type">Present</span> }]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Path</span> = [<span class="hljs-built_in">bool</span>]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">PsDscRunAsCredential</span> = [<span class="hljs-type">PSCredential</span>]]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">Value</span> = [<span class="hljs-built_in">string</span>]]<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste exemplo:&nbsp;</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - o nome da vari√°vel de ambiente.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DependsOn,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especificamos a depend√™ncia de outros recursos. </font><font style="vertical-align: inherit;">√â importante lembrar que a opera√ß√£o n√£o ser√° executada at√© que o recurso especificado aqui seja conclu√≠do.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Garantir,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especificamos as condi√ß√µes de configura√ß√£o. </font><font style="vertical-align: inherit;">Se essa vari√°vel estiver ausente, n√≥s a criaremos; </font><font style="vertical-align: inherit;">se estiver presente, esse recurso n√£o ser√° configurado.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caminho</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especifica se a vari√°vel de ambiente cont√©m um caminho.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PsDscRunAsCredential,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> credenciais especificadas.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - o valor da vari√°vel de ambiente.&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alvo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode ser indicado em rela√ß√£o a quem a configura√ß√£o √© aplicada.</font></font><br>
</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como iniciar a compila√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Apenas chamamos a configura√ß√£o pelo nome com os par√¢metros necess√°rios. </font><font style="vertical-align: inherit;">O resultado ser√° um arquivo mof, que √© usado posteriormente pelo mecanismo DSC para configurar um servidor espec√≠fico:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; EnvironmentVariable_Path -OutputPath:"C:\EnvironmentVariable_Path"<font></font>
&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Directory: C:\EnvironmentVariable_Path<font></font>
&nbsp;<font></font>
Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LastWriteTime &nbsp; &nbsp; &nbsp; &nbsp; Length Name<font></font>
----&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------------- &nbsp; &nbsp; &nbsp; &nbsp; ------ ----<font></font>
-a---- &nbsp; &nbsp; &nbsp; 25.02.2020 &nbsp; &nbsp; 14:05 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2172 localhost.mof</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar o Gerenciador de configura√ß√£o local</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O gerenciador de configura√ß√£o local √© respons√°vel por aplicar as configura√ß√µes que compilamos nos arquivos mof. </font><font style="vertical-align: inherit;">√â ele quem monitora a preserva√ß√£o do estado definido na configura√ß√£o. </font><font style="vertical-align: inherit;">Se o sistema sair desse estado, o LCM chamar√° o c√≥digo nos recursos para restaurar o estado especificado.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver as configura√ß√µes do gerenciador de configura√ß√£o local por meio de Get-DscLocalConfigurationManager:</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; Get-DscLocalConfigurationManager<font></font>
&nbsp;<font></font>
ActionAfterReboot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ContinueConfiguration<font></font>
AgentId&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 1FB3A2EE-57C9-11EA-A204-58A023EF3A48<font></font>
AllowModuleOverWrite &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : False<font></font>
CertificateID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
ConfigurationDownloadManagers&nbsp; : {}<font></font>
ConfigurationID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
ConfigurationMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ApplyAndMonitor<font></font>
ConfigurationModeFrequencyMins : 15<font></font>
Credential &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
DebugMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {NONE}<font></font>
DownloadManagerCustomData&nbsp; &nbsp; &nbsp; :<font></font>
DownloadManagerName&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
LCMCompatibleVersions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {1.0, 2.0}<font></font>
LCMState &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : Idle<font></font>
LCMStateDetail &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
LCMVersion &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 2.0<font></font>
StatusRetentionTimeInDays&nbsp; &nbsp; &nbsp; : 10<font></font>
SignatureValidationPolicy&nbsp; &nbsp; &nbsp; : NONE<font></font>
SignatureValidations &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
MaximumDownloadSizeMB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 500<font></font>
PartialConfigurations&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
RebootNodeIfNeeded &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : False<font></font>
RefreshFrequencyMins &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 30<font></font>
RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : PUSH<font></font>
ReportManagers &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
ResourceModuleManagers &nbsp; &nbsp; &nbsp; &nbsp; : {}<font></font>
PSComputerName &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<font></font>
</code></pre><br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O RefreshMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cont√©m o modo de opera√ß√£o LCM - Push ou Pull. </font><font style="vertical-align: inherit;">Falaremos mais sobre os modos no segundo artigo.</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mostra o modo de aplicativo de configura√ß√£o atual. </font><font style="vertical-align: inherit;">No nosso caso, √© o ApplyAndMonitor - aplique e rastreie as altera√ß√µes. </font><font style="vertical-align: inherit;">Os modos ApplyOnly tamb√©m est√£o dispon√≠veis (o LCM n√£o rastrear√° altera√ß√µes na configura√ß√£o) e os modos ApplyAndAutocorrect (o LCM n√£o rastrear√° apenas as altera√ß√µes, mas tamb√©m as reverter√° para a configura√ß√£o base).</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RebootNodeIfNeeded</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pode reiniciar o servidor ap√≥s a conclus√£o da configura√ß√£o, se necess√°rio, para aplicar as configura√ß√µes.&nbsp;</font></font><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationModeFrequencyMins</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Corrige a frequ√™ncia com que o LCM verifica as altera√ß√µes na configura√ß√£o.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Altere as configura√ß√µes do LCM na meta-configura√ß√£o. </font><font style="vertical-align: inherit;">Aqui est√° o exemplo dela:</font></font><br>
&nbsp;<br>
<pre><code class="powershell hljs"><font></font>
Configuration LCMConfiguration<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;Node Localhost<font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LocalConfigurationManager<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeeded = <span class="hljs-variable">$True</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
LCMConfiguration</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mesmo para a vers√£o mais recente do WMF com coment√°rios:</font></font><br>
<br>
<pre><code class="powershell hljs"><font></font>
&nbsp;<font></font>
[<span class="hljs-type">DSCLocalConfigurationManager</span>()]<font></font>
Configuration LCMConfiguration<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>[]]<span class="hljs-variable">$Server</span> = <span class="hljs-string">"localhost"</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  LCM:</span>
<span class="hljs-comment">#  ,  </span>
<span class="hljs-comment"># : PUSH</span>
<span class="hljs-comment">#    30 </span>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeded = <span class="hljs-variable">$True</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">'Push'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshFrequencyMins = <span class="hljs-number">30</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#   </span>
LCMConfiguration <span class="hljs-literal">-Server</span> <span class="hljs-string">"localhost"</span> <span class="hljs-literal">-OutputPath</span> <span class="hljs-string">"C:\DSC\MetaConfigurations\EnvironmentVariable_Path\"</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apresenta metaconfigura√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ao escrever uma metaconfigura√ß√£o, usamos os mesmos blocos que para uma configura√ß√£o DSC regular. </font><font style="vertical-align: inherit;">A exce√ß√£o √© o bloco interno LocalConfigurationManager (v4) ou o atributo DSCLocalConfigurationManager (v5) para um servidor espec√≠fico. </font><font style="vertical-align: inherit;">Eles descrevem todas as configura√ß√µes necess√°rias.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A metaconfigura√ß√£o tamb√©m √© compilada em um arquivo mof, mas para us√°-lo, o cmdlet Set-DSCLocalConfigurationManager √© usado, e n√£o o Start-DSCConfiguration.</font></font><br>
&nbsp;<br>
<pre><code class="plaintext hljs">PS C:\windows\system32&gt; LCMConfiguration -OutputPath C:\EnvironmentVariable_Path\<font></font>
&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Directory: C:\EnvironmentVariable_Path<font></font>
&nbsp;<font></font>
Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LastWriteTime &nbsp; &nbsp; &nbsp; &nbsp; Length Name<font></font>
----&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------------- &nbsp; &nbsp; &nbsp; &nbsp; ------ ----<font></font>
-a---- &nbsp; &nbsp; &nbsp; 26.02.2020 &nbsp; &nbsp; 20:05 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1016 Localhost.meta.mof<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
PS C:\windows\system32&gt; Set-DscLocalConfigurationManager -Path C:\EnvironmentVariable_Path\<font></font>
PS C:\windows\system32&gt; Get-DscLocalConfigurationManager<font></font>
&nbsp;<font></font>
‚Ä¶<font></font>
RebootNodeIfNeeded &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : True<font></font>
‚Ä¶</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Teoricamente, nada nos impede de combinar a configura√ß√£o do LCM e recursos convencionais dentro da mesma configura√ß√£o. </font><font style="vertical-align: inherit;">Mas, para simplificar, √© recomend√°vel que a ortografia e a aplica√ß√£o da configura√ß√£o e da metaconfigura√ß√£o sejam separadas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√µes Parciais&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configura√ß√µes parciais - v√°rias configura√ß√µes que s√£o executadas seq√ºencialmente uma ap√≥s a outra. </font><font style="vertical-align: inherit;">Eles s√£o √∫teis quando v√°rias equipes trabalham no servi√ßo. </font><font style="vertical-align: inherit;">Cada um dos comandos indica as configura√ß√µes para sua parte do servi√ßo, e a configura√ß√£o parcial aplica todas as configura√ß√µes sequencialmente. </font><font style="vertical-align: inherit;">Nas configura√ß√µes do LCM, especificamos configura√ß√µes parciais em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PartialConfigurations</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em configura√ß√µes parciais, devemos considerar a l√≥gica direta do DSC. </font><font style="vertical-align: inherit;">O mecanismo n√£o permite ramifica√ß√£o; portanto, s√£o necess√°rios recursos adicionais para atender a v√°rias condi√ß√µes. </font><font style="vertical-align: inherit;">Vamos analisar isso com alguns exemplos.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que desejamos entregar com seguran√ßa a configura√ß√£o ao servidor e prosseguir de acordo com o seguinte algoritmo:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro, verifique se os m√≥dulos necess√°rios est√£o instalados no servidor.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realizamos a configura√ß√£o, que trar√° o servidor para o estado desejado.</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja como √© uma metaconfigura√ß√£o com v√°rias configura√ß√µes consecutivas dentro:</font></font><br>
<br>
<pre><code class="powershell hljs">
<span class="hljs-comment">#   </span>
[<span class="hljs-type">DSCLocalConfigurationManager</span>()]<font></font>
configuration MetaPushConfig<font></font>
{<font></font>
<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-type">ValidateNotNullOrEmpty</span>()]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>] <span class="hljs-variable">$NodeName</span> = <span class="hljs-string">'localhost'</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$NodeName</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;	<font></font>
 <span class="hljs-comment">#      LCM,    </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PartialConfiguration ModulesDownloadConfig<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description = <span class="hljs-string">'Download and install modules'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode = <span class="hljs-string">'Push'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#        </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PartialConfiguration ServerOSConfig<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[PartialConfiguration]ModulesDownloadConfig"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Description = <span class="hljs-string">'Configuration'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode = <span class="hljs-string">'Push'</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#   LCM</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Settings<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshMode&nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">'Push'</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefreshFrequencyMins = <span class="hljs-number">30</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RebootNodeIfNeeded = <span class="hljs-variable">$true</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
&nbsp;<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  </span>
MetaPushConfig <span class="hljs-literal">-NodeName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-OutputPath</span> c:\DSC\MetaConfigurations<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#      </span>
<span class="hljs-variable">$cred</span> = (<span class="hljs-built_in">Get-Credential</span> <span class="hljs-literal">-UserName</span> Administrator <span class="hljs-literal">-Message</span> <span class="hljs-string">"Enter admin credentials"</span>)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  LCM   </span>
<span class="hljs-built_in">Set-DscLocalConfigurationManager</span> <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">"c:\DSC\MetaConfigurations"</span> <span class="hljs-literal">-Verbose</span> <span class="hljs-literal">-Force</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#  </span>
<span class="hljs-built_in">Publish-DscConfiguration</span> c:\DSC\Configurations\ModulesDownloadConfig <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span>
<span class="hljs-built_in">Publish-DscConfiguration</span> c:\DSC\Configurations\ServerOSConfig <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
<span class="hljs-comment">#    </span>
<span class="hljs-built_in">Start-DscConfiguration</span> <span class="hljs-literal">-UseExisting</span> <span class="hljs-literal">-ComputerName</span> <span class="hljs-string">"NewServer.contoso.com"</span> <span class="hljs-literal">-Credential</span> <span class="hljs-variable">$cred</span> <span class="hljs-literal">-Force</span> <span class="hljs-literal">-Verbose</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira parte da configura√ß√£o diz </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baixar e instalar os m√≥dulos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : baixe e instale os recursos necess√°rios. </font><font style="vertical-align: inherit;">A segunda parte do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerOSConfig</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> leva o servidor ao estado desejado. </font><font style="vertical-align: inherit;">Quais s√£o as nuances da franqueza da DSC aqui:&nbsp;</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se a primeira parte da configura√ß√£o retornou inicialmente FALSE e foi conclu√≠da completamente, o LCM n√£o ir√° para a segunda configura√ß√£o. </font><font style="vertical-align: inherit;">De acordo com a l√≥gica do DSC, primeiro voc√™ precisa trazer o servidor para o primeiro estado descrito.&nbsp;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como tratar: execute a configura√ß√£o duas vezes ou automatize todo o processo em um script.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o servidor ap√≥s a instala√ß√£o de qualquer componente exigir uma reinicializa√ß√£o, a configura√ß√£o n√£o ir√° al√©m at√© que n√≥s mesmos reiniciemos o servidor. </font><font style="vertical-align: inherit;">Mesmo se dissermos ao LCM que RebootNodeIfNeeeded = $ True, o agente aguardar√° nossa solu√ß√£o durante a configura√ß√£o. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como tratar: o recurso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xPendingReboot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> chega ao </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">resgate</font></a><font style="vertical-align: inherit;"> , que controla a chave do Registro ap√≥s a reinicializa√ß√£o. </font><font style="vertical-align: inherit;">Este recurso reinicia o servidor para n√≥s.</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um exemplo de configura√ß√£o para baixar e instalar recursos no cen√°rio "sangrenta empresa", quando o servidor n√£o tem acesso √† Internet. </font><font style="vertical-align: inherit;">Ele pressup√µe a presen√ßa de um servidor da Web, onde os recursos pr√©-baixados est√£o dispon√≠veis para todos por meio do protocolo http.</font></font><br>
<br>
<pre><code class="powershell hljs"><font></font>
Configuration ModulesDownloadConfig<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">param</span><font></font>
&nbsp;&nbsp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hljs-built_in">string</span>[]]<span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;)<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#   </span>
&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Import-DscResource</span> <span class="hljs-literal">-ModuleName</span> <span class="hljs-string">"PSDesiredStateConfiguration"</span><font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#  </span>
&nbsp;&nbsp;&nbsp;Node <span class="hljs-variable">$Server</span><font></font>
&nbsp;&nbsp;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment">#  IE Security</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registry DisableIEESC<span class="hljs-literal">-Admin</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key = <span class="hljs-string">"HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueName = <span class="hljs-string">"IsInstalled"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueData = <span class="hljs-number">0</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueType = <span class="hljs-string">"DWORD"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Registry DisableIEESC<span class="hljs-literal">-User</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key = <span class="hljs-string">"HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A8-37EF-4b3f-8CFC-4F3A74704073}"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueName = <span class="hljs-string">"IsInstalled"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueData = <span class="hljs-string">"0"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ValueType = <span class="hljs-string">"DWORD"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#    ,    </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File CreateDistribDir {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">"present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DestinationPath = <span class="hljs-string">"C:\Install\PSModules"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">Type</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-string">"Directory"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   NetworkingDsc (&lt;a href="https://www.powershellgallery.com/packages/NetworkingDsc/8.0.0-preview0004"&gt;https://www.powershellgallery.com/packages/NetworkingDsc/8.0.0-preview0004&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script NetworkingDscDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/NetworkingDsc.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\NetworkingDsc"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;<span class="hljs-comment">#   NetworkingDsc  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackNetworkingDsc {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]NetworkingDscDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\NetworkingDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
&nbsp;<span class="hljs-comment">#   ComputerManagementDsc (&lt;a href="https://www.powershellgallery.com/packages/ComputerManagementDsc/8.2.1-preview0001"&gt;https://www.powershellgallery.com/packages/ComputerManagementDsc/8.2.1-preview0001&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script ComputerManagementDscDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/ComputerManagementDsc.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\ComputerManagementDsc"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   ComputerManagementDsc  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackComputerManagementDsc {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]ComputerManagementDscDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\ComputerManagementDsc.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   xPendingReboot (&lt;a href="https://www.powershellgallery.com/packages/xPendingReboot/0.4.0.0"&gt;https://www.powershellgallery.com/packages/xPendingReboot/0.4.0.0&lt;/a&gt;),      </span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Script xPendingRebootDownLoad {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetScript = { <span class="hljs-built_in">Invoke-WebRequest</span> <span class="hljs-literal">-Uri</span> <span class="hljs-string">"http://repo.contoso.com/repo/modules/xPendingReboot.zip"</span> <span class="hljs-literal">-OutFile</span> <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = { <span class="hljs-keyword">return</span> <span class="hljs-selector-tag">@</span>{ Result = <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetScript = <span class="hljs-variable">$GetScript</span>; SetScript = <span class="hljs-variable">$SetScript</span>; TestScript = <span class="hljs-variable">$TestScript</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestScript = { <span class="hljs-built_in">Test-Path</span> <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\xPendingReboot"</span> }<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;<font></font>
<font></font>
	<font></font>
 <span class="hljs-comment">#   xPendingReboot  C:\Program Files\WindowsPowerShell\Modules</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Archive UnpackxPendingReboot {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensure = <span class="hljs-string">"Present"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DependsOn = <span class="hljs-string">"[Script]xPendingRebootDownLoad"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path = <span class="hljs-string">"C:\Install\PSModules\xPendingReboot.zip"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Destination = <span class="hljs-string">"C:\Program Files\WindowsPowerShell\Modules\"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre seguran√ßa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O m√≠nimo de gordura do DSC no terreno √© a falta de Contas Executar como. </font><font style="vertical-align: inherit;">Esse mecanismo armazena com seguran√ßa as contas na forma de nome de usu√°rio + "hash sal da senha" e as transfere para o servi√ßo, respons√°vel pela autentica√ß√£o. </font><font style="vertical-align: inherit;">Sem ele, o DSC n√£o pode gerenciar contas em nome de outro servi√ßo. </font><font style="vertical-align: inherit;">E se precisarmos nos autenticar em uma conta com privil√©gios especiais, o processo de automa√ß√£o ser√° muito complicado. </font><font style="vertical-align: inherit;">Por exemplo, esse ser√° o caso ao inserir o servidor no dom√≠nio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo √† nossa disposi√ß√£o:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">credenciais s√£o armazenadas em texto sem formata√ß√£o,</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">credenciais criptografadas funcionam apenas no PC onde foram geradas.</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na pr√°tica, existem v√°rias solu√ß√µes.&nbsp;</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Azure Automation Run As Accounts</a>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Azure Automation State Configuration</a>.                     ¬´ ¬ª  Azure. ,  Run As   On-Premise    .    ¬´ ¬ª   ,   .<br>
</li>
<li>   DSC  -,          .&nbsp;<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Stubs" s√£o bons quando a previsibilidade do comportamento do servidor deve ser garantida. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fazemos um "stub" ap√≥s a configura√ß√£o do servidor em v√°rios casos, se usamos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reboot (recurso xPendingReboot)&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transfer√™ncia de credenciais&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outros recursos que podem afetar o desempenho do servidor em rela√ß√£o a reinicializa√ß√µes ou seguran√ßa n√£o planejadas.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, crie e republique configura√ß√µes SEM blocos contendo o recurso xPendingReboot e configura√ß√µes com credenciais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa abordagem se aplica apenas ao cen√°rio Push, pois o Pull √© bastante direto e n√£o implica uma altera√ß√£o de configura√ß√£o em tempo real. </font><font style="vertical-align: inherit;">No pr√≥ximo artigo de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buldakov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Examinaremos mais de perto as configura√ß√µes e os recursos de trabalho nos modos Push e Pull. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E tamb√©m discutimos as nuances da tecnologia DSC e os limites de sua aplica√ß√£o em 28 de maio, √†s 18h00, na primeira reuni√£o on-line da comunidade Raiffeisenbank DGTL Communications. </font><font style="vertical-align: inherit;">Tamb√©m na reuni√£o, falaremos sobre como fazer amigos do ELK e do Exchange e o que o Microsoft Endpoint Manager pode fazer no gerenciamento de dispositivos. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui est√° o registro para o mitap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt503056/index.html">23 de maio pub online: holivarim sobre nuvens, JS e telefones celulares</a></li>
<li><a href="../pt503062/index.html">–†–µ–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∂–∏–∑–Ω–∏ –≤ –ö—Ä–µ–º–Ω–∏–µ–≤–æ–π –î–æ–ª–∏–Ω–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</a></li>
<li><a href="../pt503064/index.html">IoT onde voc√™ n√£o esperou (parte 3). Construindo um modelo de simula√ß√£o</a></li>
<li><a href="../pt503068/index.html">Na encruzilhada entre tecnologia e neg√≥cios: l√≠deres de TI abrem uma nova universidade na Su√≠√ßa</a></li>
<li><a href="../pt503070/index.html">Caneca el√©trica. Construindo uma scooter el√©trica louca / bicicleta el√©trica</a></li>
<li><a href="../pt503074/index.html">Detalhes sobre o pacote Provider for Flutter</a></li>
<li><a href="../pt503082/index.html">Telegrama como NAS / FTP</a></li>
<li><a href="../pt503084/index.html">Revis√£o do Curso Lightbend Academy - Arquitetura Reativa</a></li>
<li><a href="../pt503086/index.html">Os servi√ßos de transcri√ß√£o online s√£o seguros e confidenciais?</a></li>
<li><a href="../pt503088/index.html">Como selecionamos carga para transportadoras</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>