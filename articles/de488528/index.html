<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✂️ 🛅 🚃 Verwenden von kryptografischen Token-Mechanismen für PKCS # 11 auf der Android-Plattform 🛐 🏆 👡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es ist an der Zeit, PKCS # 1 1- Kryptografiemechanismen auf der Android-Plattform zu verwenden. Jemand könnte sagen, dass es keine Hardware-Token für ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Verwenden von kryptografischen Token-Mechanismen für PKCS # 11 auf der Android-Plattform</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488528/"><img src="https://habrastorage.org/webt/7r/mo/fw/7rmofwangbuwxcas42acik2b-fs.png" align="left" width="150"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist an der Zeit, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PKCS # 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1- </font><font style="vertical-align: inherit;">Kryptografiemechanismen </font><font style="vertical-align: inherit;">auf der Android-Plattform zu verwenden. Jemand könnte sagen, dass es keine Hardware-Token für Android gibt. Wenn dies jedoch so ist, ist dies nur ein vorübergehendes Phänomen. Aber heute können Sie ein Software-Token setzen oder ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud-Token verwenden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Da das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dienstprogramm cryptoarmpkcs-A</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für die Android-Plattform unter Verwendung von Androwish in der Skriptsprache Tcl / Tk entwickelt wurde, wird das Paket </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TclPKCS11 Version 1.0.1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zum Verbinden von Token verwendet </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war jedoch keine Bearbeitung des Pakets erforderlich. Es wurde lediglich ein Skript zum Projekt hinzugefügt, um eine in </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">C</font></a><font style="vertical-align: inherit;"> geschriebene Paketbibliothek zu erstellen</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, für Android und die Bibliotheksverteilung selbst. </font><font style="vertical-align: inherit;">Es wurde beschlossen, die Bibliotheken der Software-Token ls11sw2016 und Cloud-Token ls11cloud für verschiedene Plattformen zum selben Projekt hinzuzufügen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Rest ist einfach. </font><font style="vertical-align: inherit;">Fügen Sie die Schaltflächen zum Auswählen des Arbeitstokens zum zweiten Fenster hinzu und erhalten Sie:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Software-Token ls11sw2016;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud-Token ls11cloud;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ein weiteres PKCS11 # 11-Token.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/s0/jq/mr/s0jqmregvxkcgvkwvsx7rmie2j0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Standardmäßig ist ein Software-Token verbunden. Wenn es noch nicht erstellt wurde, wird vorgeschlagen, es zu initialisieren. Denken Sie daran, dass die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initialisierung des Tokens darin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> besteht, ein Label </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xb/pc/ql/xbpcqlq7gvfyl8jst-eg4khvwx0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
zuzuweisen und </font><font style="vertical-align: inherit;">einen benutzerdefinierten PIN-Code </font><font style="vertical-align: inherit;">festzulegen </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Beachten Sie, dass das Software-Token gemäß den Empfehlungen von PKCS # 11 v.2.40 und TK-26 entworfen wurde. Um vollständige Informationen über das Token einschließlich der unterstützten kryptografischen Mechanismen zu erhalten, klicken Sie einfach im Hauptmenü auf die Schaltfläche „Informationen zum Token und seiner Kryptografie“ („Funktional“). Heutzutage verfügt kein einziges Hardware-Token mit Unterstützung für russische Kryptografie über diese Funktionalität:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qz/wp/qc/qzwpqcl1ba_uttm162zxb-pm1cs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich die Frage: - wie ein persönliches Zertifikat für ein Token installiert wird. Es gibt zwei Möglichkeiten. Die erste Option besteht darin, das Zertifikat selbst und sein Schlüsselpaar über den PKCS # 12-Container zu importieren (die Schaltfläche „Mit PKCS12 / PFX arbeiten“): Die </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4s/a_/np/4sa_npp7rxr868puvwxjwoykljy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
zweite Option umfasst das Erstellen einer Anforderung (PKCS # 10) für das Zertifikat. Diese Option (die Funktion </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">„Anforderung von Zertifikat“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) bietet direkt auf der Token - </font><font style="vertical-align: inherit;">Schlüsselpaar Generation: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f4/ib/sp/f4ibspc8cputip8abq-faar69ia.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können Sie die Anforderung für Flash - </font><font style="vertical-align: inherit;">Laufwerke speichern und zur gehen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zertifizierungsstelle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit den Unterlagen </font><font style="vertical-align: inherit;">für das Zertifikat. Wenn Sie das Zertifikat zu Testzwecken oder für </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unternehmensinterne</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zwecke verwenden, kann das </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">CAFL63-</font></a><font style="vertical-align: inherit;"> Dienstprogramm auch zum Ausstellen des Zertifikats verwendet werden </font><font style="vertical-align: inherit;">. Das empfangene Zertifikat wird in das Token auf der Registerkarte "Anforderung / Zertifikat anzeigen" importiert:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/4e/o9/ez4eo9ybytryui-9d_uz2477wdc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt können Sie Dokumente mit auf dem Token gespeicherten Zertifikaten über die Registerkarte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Dokument</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> signieren" signieren </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im nächsten Artikel erfahren Sie, wie Sie eine Verbindung zu einem Cloud-Token herstellen. </font><font style="vertical-align: inherit;">Und die Frage bleibt bis jetzt bei der Übertragung von Funktionen zur Zertifikatserstellung auf die mobile Plattform. </font><font style="vertical-align: inherit;">Gibt es eine Notwendigkeit dafür? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die aktualisierte Version des Dienstprogramms cryptoarmpkcs-A für die Android-Plattform kann hier heruntergeladen werden:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AndroWishApp-debug.apk</font></font></a> </li>
</ul><br>
<h3><font color="blue"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS-Speicherjournal</font></font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Erstellen des Pakets wird das Dienstprogramm Bones aus dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AndroWish SDK verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nach dem erfolgreichen Zusammenstellen des Pakets wird die Schaltfläche Installieren und Ausführen angezeigt, nachdem Sie darauf geklickt haben, dass ein Protokollfenster geöffnet wird, in dem die Ausgabe von adb logcat (Android Debug Bridge-Protokollierungsfunktion) angezeigt wird. </font><font style="vertical-align: inherit;">Der Nachteil dieses Bildschirms besteht darin, dass es schwierig ist, eine Fehlermeldung darin zu finden, insbesondere wenn das Flag "V" (ausführlich) aktiviert ist. </font><font style="vertical-align: inherit;">Daher wurde die Schaltfläche „Speichern“ hinzugefügt, mit der das Protokoll in der Datei /tmp/logBone.txt gespeichert wird (es handelt sich um Linux): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gh/lt/mz/ghltmzkds3yf44as2-m28lbeulo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem Aufkommen dieser Schaltfläche wurde das Debuggen der Anwendung erheblich vereinfacht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um eine Schaltfläche hinzuzufügen, fügen Sie der Bones-Datei nach Zeile 2591 einfach den folgenden Code hinzu:</font></font><br>
<br>
<pre><code class="plaintext hljs">	    ttk::button $l.frame.clear -text "Clear" -width 6 \<font></font>
		-command [list adb_logcat_clear $l.text]<font></font>
# <font></font>
	    ttk::button $l.frame.save -text "Save" -width 6 \<font></font>
		-command [list adb_logcat_save $l.text]<font></font>
<font></font>
	    ttk::button $l.frame.run -text "Run" -width 6 \<font></font>
		-command [list adb_logcat_run $l]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Speicherbefehl adb_logcat_save hat die folgende Form:</font></font><br>
<br>
<pre><code class="plaintext hljs">proc adb_logcat_save {text} {<font></font>
    set tt [$text get 1.0 end]<font></font>
    set file "/tmp/logBone.txt"<font></font>
    file delete -force $file<font></font>
  #   <font></font>
    set fd [open $file w]<font></font>
    chan configure $fd -translation binary<font></font>
    puts -nonewline $fd $tt<font></font>
    close $fd<font></font>
}</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488514/index.html">Android Remote Debugger - Remote-Debugging von Android-Anwendungen</a></li>
<li><a href="../de488516/index.html">Umfassende Iframe-Tag-Anleitung</a></li>
<li><a href="../de488518/index.html">Vergleichende Überprüfung der E-Books ONYX BOOX Livingstone und Amazon Kindle Paperwhite (2018)</a></li>
<li><a href="../de488520/index.html">Patzer und Schnörkel. 2</a></li>
<li><a href="../de488522/index.html">JOOQ und sein Kaninchenbau. Wie man ohne Winterschlaf überlebt</a></li>
<li><a href="../de488530/index.html">Was ist Reaktivität?</a></li>
<li><a href="../de488534/index.html">DIY UV-Lampe 400-405 nm zur Polymerisation von 3D-Photopolymermodellen</a></li>
<li><a href="../de488536/index.html">Überlegen Sie sorgfältig, bevor Sie Docker-in-Docker für CI oder Testumgebungen verwenden.</a></li>
<li><a href="../de488540/index.html">Пушка Гаусса</a></li>
<li><a href="../de488544/index.html">Entfernen Sie die Codeabdeckung aus einer bereits ausgeführten Node.JS-Anwendung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>