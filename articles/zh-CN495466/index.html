<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹 🔤 👶 黑客陷阱。使用Canarytokens尽早发现黑客入侵 ⚱️ 🎫 👨🏼‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="蜜币（Honey Tokens）（英文-“ honey sign / signs / identifiers”）是Honeypot想法的变体之一，它是入侵者用来检测骇客事实或识别其来源的诱饵。当攻击者已经进入系统时，他可能会执行普通用户不寻常的操作。这可以用作检测黑客攻击的方法。在本文中，我们将研究...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>黑客陷阱。使用Canarytokens尽早发现黑客入侵</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495466/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蜜币（Honey Tokens）（英文-“ honey sign / signs / identifiers”）是Honeypot想法的变体之一，它是入侵者用来检测骇客事实或识别其来源的诱饵。</font><font style="vertical-align: inherit;">当攻击者已经进入系统时，他可能会执行普通用户不寻常的操作。</font><font style="vertical-align: inherit;">这可以用作检测黑客攻击的方法。</font><font style="vertical-align: inherit;">在本文中，我们将研究使您自己的触发器在早期阶段检测黑客行为有多么容易。</font><font style="vertical-align: inherit;">这样的陷阱对于担心数据私密性的系统管理员甚至普通用户都是有用的。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/xq/wk/ks/xqwkksjf6adatsv3lhu-am4ph6w.jpeg"></div></a><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在发明气体分析仪之前，矿工们带着金丝雀去了矿井。</font><font style="vertical-align: inherit;">由于身材矮小和新陈代谢迅速，鸟类对空气中的有害气体做出了更早的反应，并警告矿工。</font></font></i></font><a name="habracut"></a><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么需要这个？</font></font></font></h3><br>
<img src="https://habrastorage.org/webt/ji/uf/cb/jiufcbwkepg-izswuadwxjkerxe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
进入新系统的黑客开始四处张望，因为一个小偷侵入了公寓，开始打开所有盒子寻找珠宝。</font><font style="vertical-align: inherit;">攻击者无法预先知道哪些特定数据有价值，但是他很有可能会检查所有可能的选项。</font><font style="vertical-align: inherit;">因此，重要的是，陷阱应看起来像真实数据，并尽可能吸引攻击者。</font><font style="vertical-align: inherit;">所有者越早注意到陷阱被触发，他越早意识到自己被黑客入侵并且能够做出响应。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">金丝雀令牌服务</font></font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">canarytokens.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一项在线服务，可方便地创建您自己的黑客标记（hanitokens）。</font><font style="vertical-align: inherit;">它支持多个触发器选项，并允许您生成带有附件邮件的现成触发器，如果​​触发器起作用，将在其中发送通知。</font></font><br>
<img src="https://habrastorage.org/webt/dt/as/lm/dtaslm6-vs_4c-cl6h5nqzlqh70.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该服务是完全免费的，无需注册即可立即生成触发器。</font><font style="vertical-align: inherit;">对于那些喜欢在其基础架构上保密的人，还有一个自托管版本。</font><font style="vertical-align: inherit;">接下来，我们将研究每个触发器的工作方式，最后，我们将在Docker容器中部署我们自己的canarytokens服务器。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开.doc和pdf文件时触发</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/x9/mw/tn/x9mwtnlqxhixsnu5o6fod1tgwao.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果程序打开了文档以进行查看，它将起作用。</font><font style="vertical-align: inherit;">我经常使用这个技巧。</font><font style="vertical-align: inherit;">在每台计算机和闪存驱动器上，我都有一些名称很有吸引力的文档，例如Passwords.pdf或Bitcoins.doc。</font><font style="vertical-align: inherit;">我喜欢看有好奇心的会计师如何检查转移到他们的闪存驱动器上的所有文件。</font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 我认为此触发器对于从信息安全专业人员到初学者的所有类别的用户都是最有效和有用的。</font><font style="vertical-align: inherit;">几乎没有人知道PDF查看器可以将打开文件的事实传达给文档所有者。</font><font style="vertical-align: inherit;">每个人都遇到这个。</font></font><br>
 &nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 有几种方法可以捕获打开文档的事实。</font><font style="vertical-align: inherit;">Canarytokens使用嵌入在文档中的文档特定的URL来验证已撤销的SSL证书（证书吊销列表）。</font><font style="vertical-align: inherit;">结果，程序转到该地址，触发器触发。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过DNS解析触发</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/am/i1/wh/ami1whax3utfizv4zfgxuerxc9g.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是一个非常有趣的触发因素，其好处并不立即显而易见。</font><font style="vertical-align: inherit;">如果有人要求生成的子域的IP地址，则该地址将起作用，该子域是专门生成的，因此不会被偶然猜测或扭曲。</font><font style="vertical-align: inherit;">因此，排除了意外操作。</font><font style="vertical-align: inherit;">此触发器使用了以下描述的许多技术，包括检测打开文件夹的事实以及作为MS SQL数据库中的触发器。</font><font style="vertical-align: inherit;">实际上，有很多使用此触发器的选项。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网址触发</font></font></font></h3><br>
<img width="500" src="https://habrastorage.org/webt/60/mk/dn/60mkdnqqsqvla-5cc7-2nbkotrs.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，通过引用执行GET，POST或HEAD请求就足够了。</font><font style="vertical-align: inherit;">这将触发触发器。</font><font style="vertical-align: inherit;">除了通常使用外，它还可以在脚本中用于检查跟随链接以显示内容预览的解析器。</font><font style="vertical-align: inherit;">例如，即时通讯程序也是如此：只需在您从即时通讯程序服务器中单击的输入字段中编写一个链接。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图片</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
跟踪在线广告的每个人都知道经典的1x1像素图像。</font><font style="vertical-align: inherit;">如果已上传图片文件，则触发器将起作用。</font><font style="vertical-align: inherit;">这样的像素可以插入任何html页面或字母中。</font><font style="vertical-align: inherit;">如果必要的条件有效，可以从页面上的JS脚本调用它。</font><font style="vertical-align: inherit;">您也可以用自己的图像替换标准像素。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电子邮件触发</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/mo/4e/sm/mo4esmyilw_y8lzwqhhw2-kaemq.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果有任何信件到达生成的邮箱，则触发器将起作用。</font><font style="vertical-align: inherit;">使用电子邮件地址，联系人列表等来监视数据库的泄漏很方便，</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例如，您可以将此地址添加到联系人列表中，并找出何时手机上的笔记本会被某些请求访问联系人列表的应用程序合并。</font><font style="vertical-align: inherit;">所有员工也可以在计算机，电话，电子邮件客户端的笔记本上添加不同的触发地址，并跟踪联系人的来源。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
专门生成了不可预测的电子邮件地址，因此，排除了选择和意外触发的可能性。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows文件夹打开触发器</font></font></font></h3><br>
<img width="100" src="https://habrastorage.org/webt/fp/zd/hx/fpzdhxc0olbpomnpgglqlhrd9f4.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，很多人都看到每个Windows文件夹中都有一个隐藏的desktop.ini文件。</font><font style="vertical-align: inherit;">原来他不是那么简单。</font><font style="vertical-align: inherit;">在其中，您可以使用UNC路径（这些路径用于网络驱动器并以\\开头）在远程服务器上指定图标的地址，而Windows将在该图标的链接中指定的域上执行DNS解析并激活触发器。</font><font style="vertical-align: inherit;">可以将desktop.ini文件与其他文件一起打包到归档文件中，如果解压缩了归档文件，它将可以工作。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网站克隆触发器</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
网页的简单脚本，如果未从您的域中打开该页面，则可以使用。</font><font style="vertical-align: inherit;">可能对检测网络钓鱼有用。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.domain != <span class="hljs-string">"mydomain.com"</span>) {
    <span class="hljs-keyword">var</span> l = location.href;
    <span class="hljs-keyword">var</span> r = <span class="hljs-built_in">document</span>.referrer;
    <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">new</span> Image();<font></font>
    m.src = <span class="hljs-string">"http://canarytokens.com/"</span>+
            <span class="hljs-string">"blablabla.jpg?l="</span>+
            <span class="hljs-built_in">encodeURI</span>(l) + <span class="hljs-string">"&amp;r="</span> + <span class="hljs-built_in">encodeURI</span>(r);<font></font>
}</code></pre><br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">触发以运行EXE文件或DLL</font></font></font></h3><br>
<img width="300" src="https://habrastorage.org/webt/co/3f/q5/co3fq5b-ivp-imere3zbbdcmmfe.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
允许将触发器与现有的可执行.exe文件或库粘合在一起。</font><font style="vertical-align: inherit;">它不会被防病毒软件检测到。</font><font style="vertical-align: inherit;">应该牢记的是，这种粘合会破坏某些程序，因此最好使用简单的方法。</font><font style="vertical-align: inherit;">实际上，这是一种众所周知的传播木马和病毒的方法，仅在我们这种情况下，隐藏的功能才完全无害。</font><font style="vertical-align: inherit;">但是，应该记住，可执行文件可能会给攻击者带来更大的警觉性，并且也无法在其操作系统上运行。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">触发MS SQL</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MS SQL允许您添加执行INSERT，SELECT，DELETE等的触发器。要触发触发器，请使用与desktop.ini文件相同的方法，即通过UNC路径解析DNS名称。</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MS SQL的触发示例</font></font></b><div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 创建</font><font style="vertical-align: inherit;">将对ping canarytoken进行ping的存储过程</font><font style="vertical-align: inherit;">CREATE proc ping_canarytoken </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 AS </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 声明</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户名</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar（最大值）， </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varchar（max），@ tokendomain varchar（128），@ unc varchar（128）， </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尺寸</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 整型 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">做完了</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 整型 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随机</font></font></a> varchar(3);<br>
<br>
--setup the variables<br>
 set @tokendomain = 'qo2dd6tftntl1pej9j68v31k6.canarytokens.com';<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">size</a> = 128;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">done</a> = 0;<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">random</a> = cast(round(rand()*100,0) as varchar(2));<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">random</a> = concat(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">random</a>, '.');<br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">username</a> = SUSER_SNAME();<br>
<br>
--loop runs until the UNC path is 128 chars or less<br>
 while <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">done</a> &lt;= 0<br>
 begin<br>
 --convert username into base64<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">base64</a> = (SELECT<br>
 CAST(N'' AS XML).value(<br>
 'xs:base64Binary(xs:hexBinary(sql:column(«bin»)))'<br>
, 'VARCHAR(MAX)'<br>
 ) Base64Encoding<br>
 FROM (<br>
 SELECT CAST(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">username</a> AS VARBINARY(MAX)) AS bin<br>
 ) AS bin_sql_server_temp);<br>
<br>
--replace base64 padding as dns will choke on =<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">base64</a> = replace(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">base64</a>,'=','-')<br>
<br>
--construct the UNC path<br>
 select @unc = concat('\\',@base64,'.',@random,@tokendomain,'\a')<br>
<br>
 — if too big, trim the username and try again<br>
 if len(@unc) &lt;= <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">size</a><br>
 set <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">done</a> = 1<br>
 else<br>
 --trim from the front, to keep the username and lose domain details<br>
 select <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">username</a> = substring(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">username</a>, 2, len(<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">username</a>)-1)<br>
 end<br>
 exec master.dbo.xp_fileexist @unc;<br>
 END<br>
<br>
--add a trigger if data is altered<br>
 CREATE TRIGGER TRIGGER1<br>
 ON TABLE1<br>
 AFTER INSERT<br>
 AS<br>
 BEGIN<br>
 exec ping_canarytoken<br>
 end<br>
</div></div><br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amazon Web Services登录触发器</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
亚马逊服务API密钥应诱使攻击者查看其中的内容。</font><font style="vertical-align: inherit;">如果此API密钥用于登录，则会触发触发器。</font><font style="vertical-align: inherit;">当然，在这种情况下，那里没有数据。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他触发因素</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
canarytokens.org服务还支持其他触发器，例如SVN钩子，Web重定向，读取QR码，Slack API密钥等。</font><font style="vertical-align: inherit;">它们都使用类似的原理，并且，如果您愿意，您可以独立创建自己的触发器，在您的武器库中具有DNS名称，带有图片的链接，邮件地址和流行服务的API密钥。</font><font style="vertical-align: inherit;">除电子邮件通知外，如果触发触发器，则Canarytokens可以拉动Web钩子。</font><font style="vertical-align: inherit;">操作机制在文档中进行了描述。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Canarytokens本机服务器</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
经验丰富的破解者，在源代码中看到canarytokens.org地址后，便会立即猜测所有内容。</font><font style="vertical-align: inherit;">因此，要在公司中使用，最好部署自己的canarytokens实例，以便所有触发地址都到达公司的内部域，并且与真实的内部服务没有区别。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开发人员提供了一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现成的Docker映像</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于任何映像，安装过程都是非常典型的，因此我们不会涉及该主题。</font><font style="vertical-align: inherit;">让我们仅关注非显而易见的问题。</font><font style="vertical-align: inherit;">在安装之前，您将必须编辑文件</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">frontend.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switchboard.env</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># ()       </span>
<span class="hljs-comment">#     IP-    Docker.        SSL-.</span><font></font>
CANARY_DOMAINS=example1.com,example2.com<font></font>
<font></font>
<span class="hljs-comment">#            PDF-</span>
<span class="hljs-comment">#    NS-          .</span>
<span class="hljs-comment">#   example3.com     example1.com  example2.com</span><font></font>
CANARY_NXDOMAINS=example3.com<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要发送邮件，我建议使用Mailgun服务，因为Sendgrid不稳定。</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结论</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这样的陷阱确实有效。</font><font style="vertical-align: inherit;">就我而言，带有PDF文件的触发器特别有用。</font><font style="vertical-align: inherit;">该服务对普通用户和有经验的测试者都将有用。</font><font style="vertical-align: inherit;">即使是知道Hanipots和Hanitokens的存在的老练攻击者，也无法抵制至少清醒文档中找到的子域的诱惑。</font><font style="vertical-align: inherit;">如果您谨慎而明智地使用陷阱，则可以在早期发现饼干。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这些技术可以在服务器，台式计算机，文件存储甚至电话上使用。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您想在自己的Docker实例中部署canarytoken，请在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">市场上的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一键式安装Docker的虚拟机</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">上</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此外，我们使用</font><b><font style="vertical-align: inherit;">DONTPANIC</font></b><font style="vertical-align: inherit;">促销代码为所有服务器提供15％的折扣</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN495456/index.html">回顾14个适用于Figma的新插件，这些插件将有助于我们提高生产力</a></li>
<li><a href="../zh-CN495458/index.html">当孩子们围着你问时，如何编写代码：“你会做什么？”</a></li>
<li><a href="../zh-CN495460/index.html">在天王星上爆炸的气泡是地球大小的22,000倍</a></li>
<li><a href="../zh-CN495462/index.html">.NET Core：虚拟机上的x86_64本征</a></li>
<li><a href="../zh-CN495464/index.html">信息404-不仅是错误，而且是假期</a></li>
<li><a href="../zh-CN495468/index.html">价签识别算法，即使在数据收集终端上也可以使用</a></li>
<li><a href="../zh-CN495472/index.html">转向素食主义者并不能阻止人们感染像COVID-19这样的疾病</a></li>
<li><a href="../zh-CN495474/index.html">DataGrip 2020.1：启动配置，导出到Excel，在编辑器中显示结果等</a></li>
<li><a href="../zh-CN495476/index.html">为什么Atari DeepMind AI成功令人失望</a></li>
<li><a href="../zh-CN495478/index.html">大小数据测试仪：趋势，理论，我的故事</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>