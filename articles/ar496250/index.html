<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙅🏽 🚠 🎳 كيف يخفي رمز غريب الأخطاء؟ تحليل TensorFlow.NET 📼 🚶🏼 👨🏽‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="يعد التحليل الثابت أداة مفيدة للغاية لأي مطور ، حيث أنه يساعد في العثور على الوقت ليس فقط الأخطاء ، ولكن أيضًا أجزاء مشبوهة وغريبة من التعليمات البرمج...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>كيف يخفي رمز غريب الأخطاء؟ تحليل TensorFlow.NET</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/496250/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/765/bb4/d84/765bb4d84187d986358a301bbeed082f.png" alt="TensorFlow.NET و PVS-Studio"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يعد التحليل الثابت أداة مفيدة للغاية لأي مطور ، حيث أنه يساعد في العثور على الوقت ليس فقط الأخطاء ، ولكن أيضًا أجزاء مشبوهة وغريبة من التعليمات البرمجية التي يمكن أن تسبب حيرة للمبرمجين الذين قد يضطرون للعمل معه في المستقبل. سيتم توضيح هذه الفكرة من خلال تحليل لمشروع TensorFlow.NET open C # المفتوح ، والذي يتم تطويره للعمل مع مكتبة TensorFlow الشهيرة للتعلم الآلي.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
اسمي نيكيتا ليبيلين. </font><font style="vertical-align: inherit;">منذ فترة انضممت إلى قسم المبرمجين C # في PVS-Studio. </font><font style="vertical-align: inherit;">تقليديا ، يكتب جميع الوافدين الجدد إلى الفريق مقالات تناقش نتائج فحص مختلف المشاريع المفتوحة باستخدام محلل ثابت PVS-Studio. </font><font style="vertical-align: inherit;">تساعد هذه المقالات الموظفين الجدد على التعرف على المنتج بشكل أفضل ، وفي نفس الوقت توفر مزايا إضافية من حيث تعميم منهجية التحليل الثابت. </font><font style="vertical-align: inherit;">أقترح أن تتعرف على أول عمل لي حول موضوع تحليل المشاريع المفتوحة.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المقدمة</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مجموعة متنوعة من الأخطاء المحتملة في رمز البرنامج مذهلة. يكشف بعضهم عن أنفسهم على الفور ، بعد فحص سطحي للتطبيق الذي تم إنشاؤه ، قد يكون من الصعب ملاحظة البعض الآخر حتى عند إجراء مراجعة التعليمات البرمجية من قبل فريق من المطورين ذوي الخبرة. ومع ذلك ، يحدث أيضًا أنه بسبب الإهمال أو سبب آخر ، يكتب المبرمج في بعض الأحيان ببساطة رمزًا غريبًا وغير منطقي ، والذي ، مع ذلك ، يبدو أنه يؤدي وظيفته بنجاح. ولكن أبعد من ذلك ، عند العودة إلى ما تم كتابته ، أو عندما يدرس الآخرون هذا الرمز ، تبدأ الأسئلة في الظهور والتي لا يمكن الإجابة عليها.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكن أن تتحول إعادة هيكلة الرمز القديم إلى مشاكل ، خاصة إذا كانت أجزاء أخرى من البرنامج تعتمد عليه ، لذلك عندما تجد حتى بعض الإنشاءات المنحنية بصراحة ، the هل يعمل؟ لا تلمسها! ″. وبالتالي ، فإن هذا يجعل من الصعب دراسة المصدر ، وبالتالي يصبح من الصعب توسيع القدرات المتاحة. انسداد قاعدة التعليمات البرمجية ، هناك احتمال أن بعض المشاكل الداخلية الصغيرة وغير المرئية ، ولكن من المحتمل أن تكون غير سارة للغاية ، لن يتم إصلاحها في الوقت المناسب.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في مرحلة ما ، سيتم الشعور بعواقب هذا الخطأ ، لكن بحثه سيستغرق الكثير من الوقت ، لأن شكوك المطور ستقع على عدد كبير من أجزاء الشفرة الغريبة التي لم يتم إعادة كتابتها في وقت واحد. ويترتب على ذلك أنه يجب تصحيح مختلف المشاكل والغرائب ​​في جزء معين فور كتابته. في حالة وجود أسباب معقولة لترك كل شيء كما هو (على سبيل المثال ، إذا كان الرمز مكتوبًا على أنه نوع من الفراغ ″ في وقت لاحق ″) ، فيجب أن يكون هذا الجزء مصحوبًا بتعليق توضيحي.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وتجدر الإشارة أيضًا إلى أنه بغض النظر عن مؤهلات المطور ، فإن بعض اللحظات الإشكالية وغير الناجحة يمكن أن تفلت من نظرته ، وفي بعض الأحيان يمكن تطبيق "حل مؤقت" في مكان ما ، والذي سيتم نسيانه قريبًا ويصبح "دائمًا". في وقت لاحق ، فإن تحليل مثل هذا الرمز (على الأرجح ، سيشارك مطور آخر في هذا) سوف يستغرق الكثير من الجهد غير المقبول. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في مثل هذه الحالات ، يمكن أن تساعد مراجعة التعليمات البرمجية. ومع ذلك ، إذا كانت المهمة خطيرة للغاية ، فإن هذا الخيار سيتطلب الكثير من الوقت. بالإضافة إلى ذلك ، عندما يكون هناك الكثير من الأخطاء أو العيوب الصغيرة ، فقد لا يلاحظ الفاحص وراءها أخطاء عالية المستوى. يصبح التحقق من الشفرة روتينًا مملًا ، وتنخفض فعالية المراجعة تدريجيًا.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من الواضح أن المهام الروتينية سيتم نقلها بشكل أفضل بكثير من شخص لآخر. يستخدم هذا النهج في العديد من مجالات الحداثة. أتمتة العمليات المختلفة هي مفتاح الازدهار. ما هو الأتمتة في سياق هذا الموضوع؟ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يعد التحليل الثابت مساعدًا موثوقًا به في حل مشكلة كتابة رمز عمل معقول ومستقر. في كل مرة قبل إرسال نتائج أنشطتهم إلى المراجعة ، سيكون المبرمج قادرًا على إجراء فحص آلي ولن يثقل كاهل المطورين الآخرين (ونفسه) بالعمل غير الضروري. سيتم إرسال الرمز للتحقق فقط بعد أخذ جميع تحذيرات المحلل بعين الاعتبار: تم إصلاح الأخطاء ، وإعادة كتابة اللحظات الغريبة أو على الأقل شرحها بالتعليق.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالطبع ، لا تختفي الحاجة إلى مراجعة التعليمات البرمجية ، ولكن التحليل الثابت يكمل وييسر تنفيذها بشكل كبير. </font><font style="vertical-align: inherit;">سيتم إصلاح جزء كبير بما فيه الكفاية من الأخطاء بفضل المحلل ، ولن يتم نسيان اللحظات الغريبة وتمييزها وفقًا لذلك. </font><font style="vertical-align: inherit;">وفقًا لذلك ، من خلال مراجعة الكود ، سيكون من الممكن التركيز على التحقق من صحة تنفيذ التفاعلات المنطقية المعقدة وإيجاد المشكلات الأساسية التي ، للأسف ، لا يمكن للمحلل اكتشافها (حتى الآن).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TensorFlow.NET</font></font></h2><br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d02/39d/72d/d0239d72ded7154a696d5c975a0555d1.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هذه المقالة مستوحاة من مشروع TensorFlow.NET. إنه يمثل تنفيذ القدرة على العمل مع وظائف مكتبة التعلم الآلي TensorFlow الشهيرة من خلال كود C # (بالمناسبة ، </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اختبرناها</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> أيضًا </font><font style="vertical-align: inherit;">). بدت هذه الفكرة مثيرة للاهتمام تمامًا ، لأنه في وقت كتابة هذا التقرير ، كان العمل مع المكتبة متاحًا فقط في Python و Java و Go. </font><font style="vertical-align: inherit;">يتم تحديث </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
شفرة المصدر المتاحة على </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> باستمرار والآن حجمها يزيد قليلاً عن مائة ألف سطر. بعد دراسة سطحية ، كانت هناك رغبة في إجراء التحقق باستخدام التحليل الثابت. تم استخدام PVS-Studio كأداة محددة ، أثبتت فعاليتها في عدد كبير إلى حد ما من </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المشاريع المختلفة</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/261/70b/247/26170b247e9b81a3643bd5682b7d5203.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالنسبة إلى TensorFlow.NET ، عرض المحلل عددًا من التحذيرات: 39 مستويات عالية و 227 مستويات متوسطة و 154 مستويات منخفضة (يمكنك القراءة حول مستويات التحذير </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هنا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في القسم الفرعي "مستويات التحذير ومجموعات قواعد التشخيص"). من شأن التحليل التفصيلي لكل منها أن يجعل هذه المقالة عملاقة ، وبالتالي فإن تلك التي بدت أكثر إثارة للاهتمام بالنسبة لي موصوفة أدناه. من الجدير بالذكر أيضًا أن بعض المشكلات التي تم العثور عليها تمت مواجهتها عدة مرات في المشروع ، وأن تحليل كل جزء من التعليمات البرمجية يتجاوز نطاق هذه المقالة.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يضع المشروع نفسه على عاتقه مهمة جادة إلى حد ما ، ولسوء الحظ ، فإن ظهور أنواع مختلفة من أجزاء التعليمات البرمجية الغريبة أمر لا مفر منه. </font><font style="vertical-align: inherit;">في هذه المقالة سأحاول أن أوضح أن استخدام التحليل الثابت يمكن أن يبسط عمل المبرمجين بشكل كبير ، مشيرًا إلى المجالات التي قد تسبب أسئلة. </font><font style="vertical-align: inherit;">لا يشير التحذير دائمًا إلى وجود خطأ ، ولكنه غالبًا ما يشير إلى رمز قد يتسبب في تساؤلات في الشخص. </font><font style="vertical-align: inherit;">وفقًا لذلك ، فإن احتمال إعادة تصميم رمز غريب إما ، أو التعليق عليه وفقًا لذلك ، يزداد بشكل ملحوظ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">شظايا جذبت الانتباه عند دراسة تقرير المحلل</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في الواقع ، يمكن استدعاء عدد كبير إلى حد ما من تحذيرات المحللين لهذا المشروع ليس الكثير من الأخطاء ، بل بالأحرى رمز غريب. عند عرض الخطوط التي تم إصدار تحذير لها ، تنشأ حيرة على الأقل. بالطبع ، بعض الأمثلة أدناه هي على الأرجح "حلول مؤقتة" ، لكنهم لا يعطون أي تعليقات حول هذه المشكلة ، مما يعني أن الشخص الذي سيعمل مع هذا الرمز في المستقبل سيكون لديه أسئلة ، يبحث عن إجابات سيستغرق وقتًا إضافيًا.</font></font><br>
<br>
<p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/263/3fc/e7c/2633fce7cba470cd8a0c16e6751b3513.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في الوقت نفسه ، تشير بعض التحذيرات إلى رمز من الواضح أنه ليس غريبًا فحسب ، بل خاطئ فقط. </font><font style="vertical-align: inherit;">هذا هو الخطر الرئيسي لـ `` كود غريب '' - من الصعب للغاية ملاحظة خطأ حقيقي إذا رأيت هنا وهناك حلول غير مفهومة وتعتاد تدريجيًا على حقيقة أن الرمز يبدو غير صحيح.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">جولة جمع متطورة</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> _RemoveDefaultAttrs(....)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
  producer_op_list.Op.Select(op =&gt;<font></font>
  {<font></font>
    producer_op_dict[op.Name] = op;<font></font>
    <span class="hljs-keyword">return</span> op;<font></font>
  }).ToArray();           <font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010 مطلوب</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> القيمة المرجعة للدالة 'ToArray' لاستخدامها. importer.cs 218 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يعتبر المحلل أن استدعاء </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في هذه المرحلة أمر مريب ، لأن القيمة التي أرجعتها هذه الوظيفة لم يتم تعيينها لمتغير. ومع ذلك ، فإن مثل هذا الرمز ليس خطأ. وتستخدم هذه التركيبة لتجميع </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">producer_op_dict</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> القاموس مع </font><font style="vertical-align: inherit;">القيم المقابلة لعناصر </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">producer_op_list.Op</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> القائمة </font><font style="vertical-align: inherit;">. من </font><font style="vertical-align: inherit;">الضروري </font><font style="vertical-align: inherit;">استدعاء </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بحيث </font><i><font style="vertical-align: inherit;">يتم</font></i><font style="vertical-align: inherit;"> استدعاء </font><font style="vertical-align: inherit;">الدالة التي تم تمريرها كوسيطة إلى الأسلوب </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Select</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لجميع العناصر في المجموعة.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في رأيي ، لا يبدو الرمز الأفضل. </font><font style="vertical-align: inherit;">ملء القاموس غير واضح إلى حد ما ، وقد يرغب بعض المطورين في إزالة استدعاء "غير ضروري" لـ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">سيكون من الأسهل والأكثر قابلية للفهم استخدام </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حلقة foreach</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هنا </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">var</span> producer_op_dict = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, OpDef&gt;();<font></font>
<font></font>
<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> op <span class="hljs-keyword">in</span> producer_op_list.Op)<font></font>
{<font></font>
  producer_op_dict[op.Name] = op;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذه الحالة ، يبدو الرمز بسيطًا قدر الإمكان. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تبدو لحظة أخرى مماثلة على النحو التالي:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  inference_graph.Node.Select(x =&gt; map_name_to_node[x.Name] = x).ToArray();<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3010 مطلوب</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> القيمة المرجعة للدالة 'ToArray' لاستخدامها. </font><font style="vertical-align: inherit;">graph_util_impl.cs 48 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
والفرق الوحيد هو أن مثل هذا الإدخال يبدو أكثر اختصارًا ، ولكن الإغراء لإزالة مكالمة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ToArray</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هنا لا يختفي ، ولا يزال يبدو غير واضح.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حل مؤقت</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> GraphDef <span class="hljs-title">convert_variables_to_constants</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">var</span> source_op_name = get_input_name(node);
  <span class="hljs-keyword">while</span>(map_name_to_node[source_op_name].Op == <span class="hljs-string">"Identity"</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException);<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "رمية" غير مشروطة داخل حلقة. graph_util_impl.cs 73 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في المشروع قيد النظر ، غالبًا ما يتم استخدام النهج التالي: إذا كان يجب تنفيذ بعض السلوك لاحقًا ، فسيتم طرح </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في المكان المناسب </font><font style="vertical-align: inherit;">. من الواضح لماذا يحذر المحلل من خطأ محتمل في هذه القطعة: استخدام </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بينما</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بدلاً من </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إذا</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لا يبدو معقولًا جدًا حقًا. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هذا ليس التحذير الوحيد الذي يظهر بسبب استخدام الحلول المؤقتة. على سبيل المثال ، هناك طريقة:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _SoftmaxCrossEntropyWithLogitsGrad(<font></font>
  Operation op, Tensor[] grads<font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> grad_loss = grads[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> grad_grad = grads[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> softmax_grad = op.outputs[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> grad = _BroadcastMul(grad_loss, softmax_grad);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> logits = op.inputs[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span>(grad_grad != <span class="hljs-literal">null</span> &amp;&amp; !IsZero(grad_grad)) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"_SoftmaxCrossEntropyWithLogitsGrad"</span>);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[] <font></font>
  {<font></font>
    grad,<font></font>
    _BroadcastMul(grad_loss, -nn_ops.log_softmax(logits))<font></font>
  };<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><font style="vertical-align: inherit;">تعبير </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'grad_grad! = Null &amp;&amp;! IsZero (grad_grad)' خطأ دائمًا. </font><font style="vertical-align: inherit;">nn_grad.cs 93 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في الواقع ، </font><font style="vertical-align: inherit;">لن يتم طرح </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotImplementedException ("_ SoftmaxCrossEntropyWithLogitsGrad")</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لأن هذا الرمز غير قابل للوصول. </font><font style="vertical-align: inherit;">لكشف السبب ، يجب أن تذهب إلى رمز وظيفة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsZero</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsZero</span>(<span class="hljs-params">Tensor g</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-keyword">string</span>[] { <span class="hljs-string">"ZerosLike"</span>, <span class="hljs-string">"Zeros"</span> }.Contains(g.op.type))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
<font></font>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"IsZero"</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الأسلوب إما إرجاع </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> أو يطرح استثناء. </font><font style="vertical-align: inherit;">هذا الرمز ليس خطأ - من الواضح أن التطبيق هنا ترك لوقت لاحق. </font><font style="vertical-align: inherit;">الشيء الرئيسي هو أن ″ إذن ″ وصل بالفعل. </font><font style="vertical-align: inherit;">حسنًا ، اتضح بنجاح كبير أن PVS-Studio لن يسمح لك بنسيان وجود مثل هذا النقص هنا :)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هل Tensor هو Tensor؟</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Tensor[] _ExtractInputShapes(Tensor[] inputs)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> sizes = <span class="hljs-keyword">new</span> Tensor[inputs.Length];
  <span class="hljs-keyword">bool</span> fully_known = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; inputs.Length; i++)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> x = inputs[i];<font></font>
<font></font>
    <span class="hljs-keyword">var</span> input_shape = array_ops.shape(x);
    <span class="hljs-keyword">if</span> (!(input_shape <span class="hljs-keyword">is</span> Tensor) || input_shape.op.type != <span class="hljs-string">"Const"</span>)<font></font>
    {<font></font>
      fully_known = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    sizes[i] = input_shape;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3051</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> فحص نوع مفرط. </font><font style="vertical-align: inherit;">الكائن من نوع "Tensor" بالفعل. </font><font style="vertical-align: inherit;">array_grad.cs 154 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نوع الإرجاع لطريقة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الشكل</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هو </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">لذا ، فإن إدخال </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الإدخال هو</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> فحص </font><i><font style="vertical-align: inherit;">Tensor</font></i><font style="vertical-align: inherit;"> يبدو غريبًا على الأقل. </font><font style="vertical-align: inherit;">ربما ، بمجرد أن تعيد الطريقة قيمة من نوع مختلف ويصبح التحقق منطقيًا ، ولكن من الممكن أيضًا أنه بدلاً من Tensor ، يجب أن تحدد الحالة نوعًا من الوريث لهذه الفئة. </font><font style="vertical-align: inherit;">بطريقة أو بأخرى ، يجب على المطور الانتباه إلى هذا الجزء.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فحص شامل</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _BaseFusedBatchNormGrad(....)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  <span class="hljs-keyword">var</span> results = grad_fun(<span class="hljs-keyword">new</span> FusedBatchNormParams<font></font>
  {<font></font>
    YBackprop = grad_y,<font></font>
    X = x,<font></font>
    Scale = scale,<font></font>
    ReserveSpace1 = pop_mean,<font></font>
    ReserveSpace2 = pop_var,<font></font>
    ReserveSpace3 = version == <span class="hljs-number">2</span> ? op.outputs[<span class="hljs-number">5</span>] : <span class="hljs-literal">null</span>,<font></font>
    Epsilon = epsilon,<font></font>
    DataFormat = data_format,<font></font>
    IsTraining = is_training<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">var</span> (dx, dscale, doffset) = (results[<span class="hljs-number">0</span>], results[<span class="hljs-number">1</span>], results[<span class="hljs-number">2</span>]);
  <span class="hljs-keyword">if</span> (data_format == <span class="hljs-string">"NCHW"</span>) <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">""</span>);<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذيرات محلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3021</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يوجد </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">عبارتان</font></a><font style="vertical-align: inherit;"> 'if' مع تعبيرات شرطية متطابقة. </font><font style="vertical-align: inherit;">تحتوي العبارة 'if' الأولى على طريقة الإرجاع. </font><font style="vertical-align: inherit;">هذا يعني أن العبارة 'if' الثانية هي nn_grad.cs 230 عديمة المعنى</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3022</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Expression 'data_format == "NCHW"' خطأ دائمًا. </font><font style="vertical-align: inherit;">nn_grad.cs 247</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
على عكس بعض الأمثلة السابقة ، من الواضح أن هناك خطأ ما في التعليمات البرمجية. </font><font style="vertical-align: inherit;">الفحص الثاني لا معنى له ، لأنه إذا كان الشرط صحيحًا ، فإن تنفيذ البرنامج لن يصل إليه على الإطلاق. </font><font style="vertical-align: inherit;">ربما يُسمح ببعض الأخطاء المطبعية هنا ، أو أن أحد الفحوصات غير ضرورية بشكل عام.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">وهم الاختيار</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> Tensor <span class="hljs-title">Activate</span>(<span class="hljs-params">Tensor x, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  ....<font></font>
  Tensor negative_part;<font></font>
  <span class="hljs-keyword">if</span> (Math.Abs(_threshold) &gt; <span class="hljs-number">0.000001f</span>)<font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  } <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    negative_part = gen_ops.relu(-x + _threshold);<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004 العبارة</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "ثم" تعادل العبارة "آخر". gen_nn_ops.activations.cs 156 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
عرض مسلي إلى حد ما لفعالية استخدام التحليل الثابت في التنمية. من الصعب التوصل إلى سبب معقول وراء كتابة المطور لهذا الرمز المحدد - على الأرجح ، هذا خطأ نموذجي في النسخ واللصق (على الرغم من أن هذا ، بالطبع ، قد يكون آخر ″ في وقت لاحق ″). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هناك أجزاء أخرى من خطة مماثلة ، على سبيل المثال:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Operation _GroupControlDeps(
  <span class="hljs-keyword">string</span> dev, Operation[] deps, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span><font></font>
)<font></font>
{<font></font>
  <span class="hljs-keyword">return</span> tf_with(ops.control_dependencies(deps), ctl =&gt;<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (dev == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      <span class="hljs-keyword">return</span> gen_control_flow_ops.no_op(name);<font></font>
    }<font></font>
  });<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3004 العبارة</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "ثم" تعادل العبارة "آخر". </font><font style="vertical-align: inherit;">control_flow_ops.cs 135 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ربما بمجرد أن يصبح الشيك منطقيًا ، ولكنه اختفى بمرور الوقت ، أو تم التخطيط لبعض التغييرات الإضافية في المستقبل. </font><font style="vertical-align: inherit;">ومع ذلك ، لا يبدو أن أيًا من هذين الخيارين يعد مبررًا كافيًا لترك شيء مشابه في التعليمات البرمجية ، دون توضيح هذه الغرابة بأي شكل من الأشكال. </font><font style="vertical-align: inherit;">مع درجة عالية من الاحتمال ، تم إجراء خطأ النسخ واللصق بنفس الطريقة تمامًا.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الشيك المتأخر</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] <span class="hljs-title">Input</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] batch_shape = <span class="hljs-literal">null</span>,
  TF_DataType dtype = TF_DataType.DtInvalid,
  <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>,
  <span class="hljs-keyword">bool</span> sparse = <span class="hljs-literal">false</span>,
  Tensor tensor = <span class="hljs-literal">null</span></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> batch_size = batch_shape[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">var</span> shape = batch_shape.Skip(<span class="hljs-number">1</span>).ToArray(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
  InputLayer input_layer = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">if</span> (batch_shape != <span class="hljs-literal">null</span>)                   <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
  <span class="hljs-keyword">else</span><font></font>
    ....<font></font>
<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3095</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تم استخدام كائن "batch_shape" قبل التحقق من صحته. </font><font style="vertical-align: inherit;">التحقق من الخطوط: 39 ، 42. keras.layers.cs 39 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
خطأ كلاسيكي وخطير إلى حد ما بشأن الاستخدام المحتمل لمتغير ، وهو رابط إلى أي مكان. </font><font style="vertical-align: inherit;">في هذه الحالة ، يشير الرمز صراحة إلى احتمال أن </font><font style="vertical-align: inherit;">يكون </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">batch_shape </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فارغًا</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - وهذا واضح من كل من قائمة الحجج ومن التحقق اللاحق للمتغير نفسه. </font><font style="vertical-align: inherit;">وبالتالي ، يشير المحلل هنا إلى خطأ واضح.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">آخر ″ لوقت لاحق ″؟</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MnistDataSet</span>(<span class="hljs-params">
  NDArray images, NDArray labels, Type dataType, <span class="hljs-keyword">bool</span> reshape // &lt;=
</span>)</span> <font></font>
{<font></font>
  EpochsCompleted = <span class="hljs-number">0</span>;<font></font>
  IndexInEpoch = <span class="hljs-number">0</span>;<font></font>
<font></font>
  NumOfExamples = images.shape[<span class="hljs-number">0</span>];<font></font>
<font></font>
  images = images.reshape(<font></font>
    images.shape[<span class="hljs-number">0</span>], images.shape[<span class="hljs-number">1</span>] * images.shape[<span class="hljs-number">2</span>]<font></font>
  );<font></font>
  images = images.astype(dataType);<font></font>
  <span class="hljs-comment">// for debug np.multiply performance</span>
  <span class="hljs-keyword">var</span> sw = <span class="hljs-keyword">new</span> Stopwatch();<font></font>
  sw.Start();<font></font>
  images = np.multiply(images, <span class="hljs-number">1.0f</span> / <span class="hljs-number">255.0f</span>);<font></font>
  sw.Stop();<font></font>
  Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{sw.ElapsedMilliseconds}</span>ms"</span>);<font></font>
  Data = images;<font></font>
<font></font>
  labels = labels.astype(dataType);<font></font>
  Labels = labels;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3117</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> معلمة </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">المُنشئ</font></a><font style="vertical-align: inherit;"> ' </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">reshape</font></a><font style="vertical-align: inherit;"> ' غير مستخدمة. </font><font style="vertical-align: inherit;">MnistDataSet.cs 15 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مثل بعض الشذوذ الأخرى ، هذا على الأرجح يرجع إلى حقيقة أن الوظيفة بعيدة عن التنفيذ الكامل ومن المحتمل جدًا أن </font><font style="vertical-align: inherit;">يتم استخدام </font><font style="vertical-align: inherit;">معلمة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إعادة التشكيل</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بطريقة أو بأخرى في هذا المُنشئ في المستقبل. </font><font style="vertical-align: inherit;">ولكن في الوقت الحاضر ، يبدو كما لو أنه تم طرحه هنا بهذه الطريقة. </font><font style="vertical-align: inherit;">إذا تم ذلك حقًا ″ في وقت لاحق ″ ، فمن الحكمة وضع علامة على ذلك ببعض التعليقات. </font><font style="vertical-align: inherit;">إذا لم يكن الأمر كذلك ، فقد اتضح أن الشفرة التي تنشئ الكائن ستضطر إلى إلقاء معلمة إضافية في المنشئ ، ومن المحتمل جدًا أنه سيكون من الملائم أكثر عدم القيام بذلك.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بعيد المنال ممكن الاشارة</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor[] _GatherV2Grad(Operation op, Tensor[] grads)<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span>((<span class="hljs-keyword">int</span>)axis_static == <span class="hljs-number">0</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> params_tail_shape = params_shape.slice(<span class="hljs-keyword">new</span> NumSharp.Slice(start:<span class="hljs-number">1</span>));
    <span class="hljs-keyword">var</span> values_shape = array_ops.concat(
      <span class="hljs-keyword">new</span>[] { indices_size, params_tail_shape }, <span class="hljs-number">0</span><font></font>
    );<font></font>
    <span class="hljs-keyword">var</span> values = array_ops.reshape(grad, values_shape);<font></font>
    indices = array_ops.reshape(indices, indices_size);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Tensor[]<font></font>
    {<font></font>
      <span class="hljs-keyword">new</span> IndexedSlices(values, indices, params_shape), <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-literal">null</span>,
      <span class="hljs-literal">null</span><font></font>
    };<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3146</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> احتمال عدم الإشارة إلى قيمة "القيم" في الوسيطة الأولى للوسيطة الأولى. يمكن أن يُرجع "_outputs.FirstOrDefault ()" قيمة فارغة افتراضية. array_grad.cs 199 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لفهم ماهية المشكلة ، يجب عليك أولاً الانتقال إلى </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">رمز</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> مُنشئ </font><i><font style="vertical-align: inherit;">الشرائح المفهرس</font></i><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IndexedSlices</span>(<span class="hljs-params">
  Tensor values, Tensor indices, Tensor dense_shape = <span class="hljs-literal">null</span>
</span>)</span><font></font>
{<font></font>
  _values = values;<font></font>
  _indices = indices;<font></font>
  _dense_shape = dense_shape;<font></font>
<font></font>
  _values.Tag = <span class="hljs-keyword">this</span>; <span class="hljs-comment">// &lt;=</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من الواضح أن تمرير قيمة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فارغة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> إلى هذا المُنشئ سيؤدي إلى استثناء. ومع ذلك ، لماذا يعتبر المحلل أن متغير </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القيم</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> قد يحتوي على قيمة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خالية</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ؟ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يستخدم PVS-Studio تقنية تحليل تدفق البيانات ، والتي تتيح لك العثور على مجموعات القيم المحتملة للمتغيرات في أجزاء مختلفة من التعليمات البرمجية. يخبرك تحذير بأنه يمكن إرجاع قيمة خالية في المتغير المحدد بالسطر التالي: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ومع ذلك ، بالنظر إلى الكود أعلاه ، يمكنك أن تجد أن قيمة متغير </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القيم</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يتم </font><font style="vertical-align: inherit;">الحصول عليها عن طريق استدعاء </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape (grad، القيم_شكل)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . فأين </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault () إذن</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ؟</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
والحقيقة هي أنه عند تحليل دفق البيانات ، لا يتم النظر فقط في الوظيفة الحالية ، ولكن يتم استدعاؤها أيضًا ؛ </font><font style="vertical-align: inherit;">يحصل PVS-Studio على معلومات حول مجموعة القيم المحتملة لأي متغير في أي مكان. </font><font style="vertical-align: inherit;">وبالتالي ، فإن التحذير يعني أن تطبيق </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array_ops.reshape (grad، value_shape)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يحتوي على استدعاء لـ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_outputs.FirstOrDefault ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، والتي يتم إرجاع </font><i><font style="vertical-align: inherit;">نتيجتها</font></i><font style="vertical-align: inherit;"> في النهاية. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
للتحقق من ذلك ، انتقل إلى تطبيق </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إعادة التشكيل</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
            =&gt; gen_array_ops.reshape(tensor, shape, <span class="hljs-literal">null</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ثم انتقل إلى طريقة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إعادة التشكيل التي</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تسمى بالداخل:</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Tensor reshape&lt;T1, T2&gt;(T1 tensor, T2 shape, <span class="hljs-keyword">string</span> name = <span class="hljs-literal">null</span>)<font></font>
{<font></font>
  <span class="hljs-keyword">var</span> _op = _op_def_lib._apply_op_helper(
    <span class="hljs-string">"Reshape"</span>, name, <span class="hljs-keyword">new</span> { tensor, shape }<font></font>
  );<font></font>
  <span class="hljs-keyword">return</span> _op.output;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تُرجع </font><font style="vertical-align: inherit;">
الدالة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_apply_op_helper</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> كائنًا من فئة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">العملية</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> يحتوي على خاصية </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الإخراج</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . عند استلام قيمته يسمى الرمز الموصوف في التحذير:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> Tensor output =&gt; _outputs.FirstOrDefault();</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هو بالطبع نوع مرجعي ، لذلك ستكون القيمة الافتراضية له </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فارغة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">من كل هذا يمكن ملاحظة أن PVS-Studio يحلل بدقة البنية المنطقية للكود ، ويخترق عمق بنية المكالمات. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
أكمل المحلل عمله ، مشيراً إلى مكان يحتمل أن يكون مشكلة. </font><font style="vertical-align: inherit;">يجب على المبرمج التحقق مما إذا كان قد ينشأ موقف عندما تكون العناصر في </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">المخرجات</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> غير موجودة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وبالتالي ، فإن التحليل الثابت سيجبر المطور على الأقل على الانتباه إلى الجزء المريب من أجل تقييم ما إذا كان الخطأ قد يحدث بالفعل هناك. </font><font style="vertical-align: inherit;">باستخدام هذا النهج ، سيتم تقليل عدد الأخطاء التي لم تتم ملاحظتها بسرعة.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">انتظار غير موثوق به؟</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> (LoopVar&lt;TItem&gt;, Tensor[]) _BuildLoop&lt;TItem&gt;(<font></font>
  ....<font></font>
) <span class="hljs-keyword">where</span> ....<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-comment">// Finds the closest enclosing non-None control pivot.</span>
  <span class="hljs-keyword">var</span> outer_context = _outer_context;
  <span class="hljs-keyword">object</span> control_pivot = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">while</span> (outer_context != <span class="hljs-literal">null</span> &amp;&amp; control_pivot == <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
  {<font></font>
<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (control_pivot != <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3032</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> لا يمكن الاعتماد على انتظار هذا التعبير ، حيث أن المترجم قد يحسن بعض المتغيرات. </font><font style="vertical-align: inherit;">استخدم متغير (متغيرات) متغيرة أو بدائية التزامن لتجنب ذلك. </font><font style="vertical-align: inherit;">whileContext.cs 212 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يشير المحلل إلى أن مثل هذا التطبيق للتوقعات يمكن تحسينه من قبل المترجم ، لكني أشك في أنهم حاولوا حقًا تنفيذ الانتظار هنا - على الأرجح ، ببساطة لم تتم إضافة الشفرة وسيتم تطويرها في المستقبل. </font><font style="vertical-align: inherit;">قد يكون من المفيد طرح </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">استثناء</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> غير </font><i><font style="vertical-align: inherit;">مُطبق هنا</font></i><font style="vertical-align: inherit;"> ، نظرًا لأن هذه الممارسة تُستخدم في مكان آخر من المشروع. </font><font style="vertical-align: inherit;">بطريقة أو بأخرى ، أعتقد أنه من الواضح أن بعض التعليقات التوضيحية لن تضر.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كسر الحدود</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TensorShape</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[][] dims</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span>(dims.Length == <span class="hljs-number">1</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">switch</span> (dims[<span class="hljs-number">0</span>].Length)<font></font>
    {<font></font>
      <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: shape = <span class="hljs-keyword">new</span> Shape(<span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: shape = Shape.Vector((<span class="hljs-keyword">int</span>)dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: shape = Shape.Matrix(dims[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], dims[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]); <span class="hljs-keyword">break</span>; <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">default</span>: shape = <span class="hljs-keyword">new</span> Shape(dims[<span class="hljs-number">0</span>]); <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException(<span class="hljs-string">"TensorShape int[][] dims"</span>);<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3106 من</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> المحتمل أن يكون المؤشر خارج </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">النطاق</font></a><font style="vertical-align: inherit;"> . يشير مؤشر "1" إلى ما وراء حدود "التعتيم". TensorShape.cs 107 من </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بين المقتطفات الغريبة من الشفرة التي رأيتها ، كان هناك خطأ حقيقي يصعب </font><font style="vertical-align: inherit;">ملاحظته </font><font style="vertical-align: inherit;">. الجزء التالي خاطئ هنا: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dims [1] [2]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . من الواضح أن الحصول على عنصر باستخدام الفهرس 1 من مصفوفة عنصر واحد خطأ. في نفس الوقت ، إذا قمت بتغيير الجزء إلى </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خافت [0] [2]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، يظهر خطأ آخر - الحصول على عنصر مع الفهرس 2 من الصفيف </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[0]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، طوله في هذه الحالة هو الفرع 2. وبالتالي ، تحولت هذه المشكلة إلى كما لو كان مع "قاع مزدوج".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في أي حال ، يجب دراسة جزء الشفرة هذا وتصحيحه من قبل المطور. </font><font style="vertical-align: inherit;">في رأيي ، هذا المثال هو توضيح ممتاز لأداء تحليل تدفق البيانات في PVS-Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">أولباتكا؟</font></font></h3><br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> _init_from_args(<span class="hljs-keyword">object</span> initial_value = <span class="hljs-literal">null</span>, ....) <span class="hljs-comment">// &lt;=</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> init_from_fn = initial_value.GetType().Name == <span class="hljs-string">"Func`1"</span>; <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
  tf_with(...., scope =&gt;<font></font>
  {<font></font>
    ....<font></font>
    tf_with(...., <span class="hljs-keyword">delegate</span><font></font>
    {<font></font>
      initial_value = ops.convert_to_tensor(  <span class="hljs-comment">// &lt;=</span>
        init_from_fn ? (initial_value <span class="hljs-keyword">as</span> Func&lt;Tensor&gt;)():initial_value,<font></font>
        name: <span class="hljs-string">"initial_value"</span>,<font></font>
        dtype: dtype<font></font>
      );<font></font>
    });<font></font>
    _shape = shape ?? (initial_value <span class="hljs-keyword">as</span> Tensor).TensorShape;<font></font>
    _initial_value = initial_value <span class="hljs-keyword">as</span> Tensor; <span class="hljs-comment">// &lt;=</span><font></font>
    ....<font></font>
    _dtype = _initial_value.dtype.as_base_dtype(); <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
    <span class="hljs-keyword">if</span> (_in_graph_mode)<font></font>
    {<font></font>
      ....<font></font>
<font></font>
      <span class="hljs-keyword">if</span> (initial_value != <span class="hljs-literal">null</span>) <span class="hljs-comment">// &lt;=</span><font></font>
      {<font></font>
        ....<font></font>
      }<font></font>
<font></font>
      ....<font></font>
    }<font></font>
<font></font>
    ....<font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لفهم الشفرة أعلاه ، يجدر أيضًا تنفيذ تطبيق وظيفة tf_with:</font></font><br>
<br>
<pre><code class="cs hljs">[<span class="hljs-meta">DebuggerStepThrough</span>] <span class="hljs-comment">// with "Just My Code" enabled this lets the </span>
[<span class="hljs-meta">DebuggerNonUserCode()</span>]  <span class="hljs-comment">//debugger break at the origin of the exception</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> tf_with&lt;T&gt;(<font></font>
  T py, Action&lt;T&gt; action<font></font>
) <span class="hljs-keyword">where</span> T : ITensorFlowObject<font></font>
{<font></font>
  <span class="hljs-keyword">try</span><font></font>
  {<font></font>
    py.__enter__();<font></font>
    action(py);<font></font>
  }<font></font>
  <span class="hljs-keyword">finally</span><font></font>
  {<font></font>
    py.__exit__();<font></font>
    py.Dispose();<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحذير المحلل</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : V3019 ربما تتم مقارنة متغير غير صحيح بالصفر بعد تحويل النوع باستخدام الكلمة الأساسية "as". تحقق من المتغيرات "الأولي_قيمة" ، "القيمة الأولية". ResourceVariable.cs 137 </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_init_from_args</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هي دالة ضخمة إلى حد ما ، لذلك تم حذف العديد من الأجزاء. يمكنك رؤيته بالكامل بالضغط على </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الرابط</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . على الرغم من أن التحذير في البداية لم يبدو جادًا حقًا بالنسبة لي ، بعد الدراسة ، أدركت أن هناك خطأ ما في الرمز. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
أولاً ، تجدر الإشارة إلى أنه يمكن استدعاء الطريقة بدون تمرير المعلمات </font><font style="vertical-align: inherit;">وستكون </font><i><font style="vertical-align: inherit;">فارغة </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">افتراضيًا</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> في </font><i><font style="vertical-align: inherit;">القيمة الأولية</font></i><font style="vertical-align: inherit;"> . في هذه الحالة ، سيتم طرح استثناء على السطر الأول. </font><font style="vertical-align: inherit;">
ثانياً ، التحقق</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القيمة الأولية</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> إلى عدم المساواة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فارغة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> تبدو غريبة: إذا </font><font style="vertical-align: inherit;">أصبحت </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القيمة الأولية</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> فعلاً </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فارغة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> بعد استدعاء </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ops.convert_to_tensor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، فإن </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القيمة الأولية</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ستكون </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">فارغة</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، مما يعني أن استدعاء </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_initial_value.dtype.as_base_dtype ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> سيؤدي أيضًا إلى استثناء. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تلميحات المحلل التي قد تحتاج إلى التحقق من وجود قيمة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">خالية</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هي </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_initial_value</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ، ولكن كما هو موضح أعلاه ، فإن الإشارة إلى هذا المتغير تحدث قبل هذا الاختبار ، لذلك سيكون هذا الخيار أيضًا غير صحيح. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هل يمكن ملاحظة هذا الخطأ الصغير في مثل هذه الوظيفة العملاقة بدون PVS-Studio؟ </font><font style="vertical-align: inherit;">أنا أشك في ذلك كثيرا.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">استنتاج</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في مشروع يحتوي على الكثير من الأمثلة للرموز الغريبة ، يمكن إخفاء الكثير من المشاكل. المبرمج ، الذي اعتاد على رؤية المفهوم ، يتوقف عن ملاحظة الأخطاء في نفس الوقت. يمكن أن تكون العواقب محزنة للغاية. في الواقع ، من بين تحذيرات المحللين هناك أيضًا تحذيرات خاطئة ، ومع ذلك ، في معظم الحالات ، تشير التحذيرات على الأقل إلى أجزاء من التعليمات البرمجية التي يمكن أن تسبب أسئلة عندما ينظر إليها شخص. في حالة كتابة الرمز الغريب عمدًا ، يجدر ترك التفسيرات بحيث تكون القطعة واضحة للمطور الذي سيعمل مع هذا الرمز في المستقبل (حتى لو كان ذلك يعني ترك التعليقات لنفسه).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في الوقت نفسه ، يمكن لأدوات التحليل الثابتة ، مثل PVS-Studio ، أن تساعد بشكل كبير في العثور على الأخطاء والشذوذ المحتمل بحيث تكون مرئية ولا يتم نسيانها ، ويتم بعد ذلك تحسين جميع الحلول المؤقتة وتحويلها إلى عمل نظيف ومنظم ومستقر الرمز.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذا كنت ترغب في مشاركة هذه المقالة مع جمهور يتحدث الإنجليزية ، فيرجى استخدام رابط الترجمة: Nikita Lipilin. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">كيف يخفي رمز غريب الأخطاء؟ </font><font style="vertical-align: inherit;">تحليل TensorFlow.NET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar496234/index.html">السبب الرئيسي لماذا لا لينكس</a></li>
<li><a href="../ar496238/index.html">ثمانية وعشرون خطوات للبقاء والنجاح في الأزمات</a></li>
<li><a href="../ar496240/index.html">اكتشاف المنتج 101 لمدير المنتج</a></li>
<li><a href="../ar496242/index.html">Cyberpunk موجود بالفعل هنا: يدرس أطفال المدارس في Minecraft ، ويخضع الطلاب لاختبارات في CS: GO</a></li>
<li><a href="../ar496248/index.html">التحديات والرؤوس الصلعاء والنبيذ. كيف نتحمل العزلة الذاتية في HFLabs</a></li>
<li><a href="../ar496252/index.html">تعويض الأيرودينامية الطائرات المتمركزة</a></li>
<li><a href="../ar496254/index.html">كيف قامت Rostelecom بإعادة توجيه حركة المرور عن طريق الخطأ إلى Google و AWS و Cloudflare وما إلى ذلك.</a></li>
<li><a href="../ar496256/index.html">التعلم الآلي على R: تقنيات متخصصة للتحليل التنبئي</a></li>
<li><a href="../ar496258/index.html">holivar عبر الإنترنت: شكل جديد لتبادل الخبرات. هذا السبت</a></li>
<li><a href="../ar496260/index.html">نصائح الأمن السيبراني للعمل من المنزل</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>