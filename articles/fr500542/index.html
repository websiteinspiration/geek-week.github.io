<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛹🏽 🤜🏿 ⛓️ Hack Age of Empires III pour modifier les paramètres de qualité du shader 👨🏻‍🎓 👨🏾‍🏫 📧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Début mai 2020 - si vous êtes comme moi, alors la quarantaine vous a fait refaire des jeux qui n'avaient pas été lancés depuis de nombreuses années. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hack Age of Empires III pour modifier les paramètres de qualité du shader</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500542/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Début mai 2020 - si vous êtes comme moi, alors la quarantaine vous a fait refaire des jeux qui n'avaient pas été lancés depuis de nombreuses années. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et si vous êtes encore plus comme moi, alors vous pourriez avoir un disque d'Age of Empires 3. Peut-être que vous jouez sur un Mac, peut-être que vous n'avez pas encore mis à niveau vers Catalina et que vous souhaitez commander Morgan Black. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, vous démarrez le jeu, entrez dans le menu principal et remarquez immédiatement que quelque chose ne va pas ... Le menu a l'air </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dégoûtant</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5be/dfa/a66/5bedfaa660037faa86c176d9586f9d1a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si vous vous demandez ce qu'est exactement «dégoûtant», alors faites attention à l'eau. </font><font style="vertical-align: inherit;">Tout le reste est terrible aussi, mais c'est moins évident.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/578/2d3/34f/5782d334f3be69385a0b69072ef6b7ed.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, vous allez dans les options, augmentez tous les paramètres au maximum ... Mais le jeu est toujours moche. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous remarquez que les options « </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shader Quality</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> » </font><font style="vertical-align: inherit;">sont </font><font style="vertical-align: inherit;">étrangement verrouillées sur « </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Low</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ».</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentative n ° 1 - pirater les paramètres</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, vous commencez à rechercher le dossier du jeu, qui aurait été créé quelque part dans le dossier Documents, car le jeu était en 2005, puis tout le monde l'a fait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que cherchons-nous? Bien sûr, le fichier dans lequel les paramètres sont stockés. L'interface de menu ne nous permet pas de modifier les paramètres, mais nous sommes délicats, non? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous trouvons le XML requis, car le jeu est 2005 et c'est, bien sûr, XML, où nous </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tombons</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur l'option " </font><em><font style="vertical-align: inherit;">optiongrfxshaderquality</font></em><font style="vertical-align: inherit;"> ", qui est définie sur 0. Il semble que nous le cherchions, alors nous augmentons la valeur à 100, car il n'y a pas beaucoup de qualité. Ici, je suis d'accord avec vous.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/61d/de5/d85/61dde5d85e5442f781fe9c4eaeb46a55.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez également remarquer qu'il s'agit d'une utilisation terrible de XML. Heureusement, il n'a pas de bonnes utilisations.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Satisfait de nous-mêmes, nous lançons le jeu. Hélas, rien n'a changé. En regardant à nouveau le fichier XML, nous voyons que le paramètre est à nouveau réglé sur 0. Ensemble Studios (qu'il repose en paix) regarde avec mépris toute votre ingéniosité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, nous </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pourrions abandonner</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il s'agit d'un Mac, par conséquent, les correctifs écrits par les utilisateurs sont peu susceptibles d'être trouvés (en fait, j'ai vérifié - il existe toutes sortes de solutions douteuses qui peuvent fonctionner). Tout tourne autour des graphismes. Il semble que le problème sera difficile à résoudre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais nous n'abandonnerons pas. </font><font style="vertical-align: inherit;">Parce que nous nous souvenons à quoi devrait ressembler l'Âge 3. Nous nous souvenons de la façon dont nous admirions cette belle eau ondulée. </font><font style="vertical-align: inherit;">Ces effets de particules. </font><font style="vertical-align: inherit;">Ces énormes navires qui ne rentrent tout simplement pas dans le cadre. </font><font style="vertical-align: inherit;">Et c'est juste que la caméra a été zoomée, à quoi pensais-je juste?</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentative n ° 1 - piratage de données</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au tout début du dossier dans Documents, il y a un fichier journal. Le jeu y a écrit une carte graphique et a signalé qu'il avait sélectionné le paramètre «dx7 générique». Il indique que vous avez installé Intel GMA 950, qui était vraiment sur l'ordinateur précédent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais là-dessus, vous avez Intel Iris Graphics 6100. Quelque chose ne va vraiment pas. Vous faites une hypothèse - le jeu détermine les capacités graphiques de l'ordinateur, en le comparant avec une base de données de cartes graphiques au lieu de vérifier les capacités de la carte elle-même. Parce que c'est exactement ce que font les développeurs AAA, et si vous avez travaillé sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RTS open-source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , vous savez comment cela se produit.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b6e/8b3/fb2/b6e8b3fb28030917e8300cdce5653fac.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le contenu du fichier journal. Si vous trouvez drôle qu'Intel soit désigné comme 0x8086, alors vous avez choisi l'article approprié.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Par hasard, vous trouvez d'anciennes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">notes de mise à jour</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui confirment vos préoccupations. Vous regardez dans le dossier GameData, mais il n'y a que des </font><em><font style="vertical-align: inherit;">fichiers </font></em></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.bar</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.xmb</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui sont pour la plupart illisibles. </font><em><font style="vertical-align: inherit;">Vous recherchez</font></em><font style="vertical-align: inherit;"> grep " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " et " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dx7</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". Rien ne se passe. Supprimer plusieurs fichiers ... Rien ne se passe. Mais vous savez que les jeux AAA peuvent stocker des ressources dans des endroits étranges, et c'est le portage des jeux Windows sur Mac, donc tout peut être très bizarre ici.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, vous trouvez le fichier «render.bar», si vous le déplacez, le jeu plante au démarrage. Ce n'est pas très clair, mais pas mal. Nous ouvrons le fichier dans </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Fiend</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car ce programme vous permet généralement d'apprendre quelque chose sur les fichiers binaires. Et il s'avère donc. Une partie de ces données est du texte lisible. Certains d'entre eux sont des shaders. Mais la plupart des données sont étrangement divisées par un espace vide ...</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d1/3a2/6f5/9d13a26f5dfff14c2b44f59dbc69b673.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface Hex Fiend C'est minimaliste, mais ça marche. Les premiers octets sont les lettres «ESPN», qui sont très probablement l'en-tête .bar.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Vous vous exclamez: "Évidemment, c'est UTF-16!" Le jeu a été créé pour Windows, il est donc logique qu'il stocke du texte en UTF-16, gaspillant près de la moitié d'un fichier de données de 30 mégaoctets. Après tout, Windows adorait l'UTF-16 (bien </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'il ne devrait pas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), alors pourquoi ne pas utiliser cet encodage et ces shaders ASCII dans un seul fichier. C'est une idée logique! </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(En fait, il m'a fallu environ un jour pour le comprendre)</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Hex Fiend a la possibilité d'analyser les octets comme UTF-16, donc nous recherchons à nouveau la chaîne grep dx7. Il y a plusieurs entrées. Nous les remplaçons par la ligne dx9, qui se trouve également dans les données, enregistrons le fichier et lancons le jeu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ouais De nouveau, les journaux n'affichent pas "dx9". Cela se situe probablement ailleurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons autre chose. Supposons que le jeu reconnaisse les cartes graphiques et que leurs identificateurs hexadécimaux soient stockés dans les journaux (dans mon cas, 0x8086 est Intel, et également 0x2773). Nous recherchons «8086» dans Hex Fiend, nous trouvons quelque chose et une partie du texte semble prometteuse. L'Intel 9 Series est la série GMA 950, et Age 3 n'a probablement pas très bien fonctionné.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af6/b22/f44/af6b22f4473691b673cb5dba2fd197f0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certains numéros sont comme des identifiants de carte (2582, 2592); peut-être que si vous les remplacez, quelque chose changera. Nous avons quand même fait une copie du fichier, vous pouvez donc essayer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hélas, c'est aussi une impasse. En fait, nous étudions le mauvais dossier. Heureusement, je peux vous dire cela parce que j'y ai passé beaucoup de temps et que j'ai </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trop</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> essayé </font><font style="vertical-align: inherit;">. Cette fichue chose a pris environ 20 heures. Et cela ne compte pas le temps pour toutes les captures d'écran ... Le </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fichier souhaité s'appelle "DataP.bar", et si nous remplaçons judicieusement l'ID, nous verrons quelque chose de complètement nouveau dans les journaux:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/445/e79/6a2/445e796a2ca507e1f1a056da1cbd30a3.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je ne comprends pas très bien pourquoi ce «dx7 générique» n'est pas le même que dans la capture d'écran ci-dessus. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, dans le jeu, nous sommes toujours limités par les paramètres «bas», c'est-à-dire que les journaux ne mentent pas. </font><font style="vertical-align: inherit;">Nous espérions un Medium, mais </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hélas</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semble que plus de piratage de données ne puisse être réalisé. </font><font style="vertical-align: inherit;">Il est temps de prendre les outils au sérieux.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentative n ° 2 - piratage</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, si rien ne réussit, il nous reste une dernière chose: changer le fichier exécutable lui-même (c'est-à-dire, comme ils l'ont dit en 2005, «le casser»). </font><font style="vertical-align: inherit;">Il semble qu'aujourd'hui, il soit simplement appelé piratage, mais ce terme a été conservé dans le domaine du piratage de jeux (bien sûr, je </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne l'ai jamais</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fait personnellement). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous passons à la partie la plus intéressante de l'article (oui, vous avez déjà lu mille mots, mais n'était-ce pas curieux?).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trémie de démontage</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A ce stade, notre outil sera un désassembleur: une application qui reçoit le code binaire du fichier exécutable et le transforme en code assembleur lisible (ha ha). Le plus populaire d'entre eux est IDA Pro, mais il est incroyablement cher et je ne sais pas si cela fonctionne sur un Mac, donc j'utiliserai </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hopper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ce n'est pas gratuit (coûte 90 $), mais il peut être utilisé librement pendant 30 minutes à la fois avec presque toutes les fonctions nécessaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne vais pas expliquer l'interface en détail, car </font><font style="vertical-align: inherit;">tout est bien présenté </font><font style="vertical-align: inherit;">dans le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutoriel Hopper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais je vais vous dire ce que je vais faire et essayer de prendre suffisamment de captures d'écran pour que vous puissiez apprendre quelque chose.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez d'abord dire: il m'a fallu cinq jours pour résoudre, et de nombreuses tentatives infructueuses ont été faites. Fondamentalement, je parlerai des étapes réussies, donc cela semblera magique. Mais c'était </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">difficile</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ne vous inquiétez pas si vous avez des problèmes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et encore une remarque: le «cracking» est le plus souvent illégal et / ou effectué à des fins illégales. Je démontre un exemple assez rare d'une utilisation assez légitime, qui en même temps est complètement «chapeau blanc», donc tout est en ordre ici. Je suppose que, à strictement parler, cela est illégal / contraire à l'accord de l'utilisateur final, mais, bien sûr, il s'agit d'un cas de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">force majeure</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Quoi qu'il en soit, payez ce que vous aimez, et seulement pour cela, car l'anti-consumérisme est cool.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a04/597/b6a/a04597b6a9ad1979e14216547ecf61d6.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db3/dfb/1e3/db3dfb1e3ec50890530001d69a22cdd2.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/605/66d/e69/60566de69653b745f83d196f56679263.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faites glisser l'application Age 3 pour l'ouvrir. </font><font style="vertical-align: inherit;">Sélectionnez simplement "x86" au lieu de powerPC, car le jeu date de 2005.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Étape 1 - recherchez le fragment souhaité</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étonnamment, cela peut être le plus difficile. </font><font style="vertical-align: inherit;">Nous avons un code désassemblé, mais nous ne savons pas où chercher. </font><font style="vertical-align: inherit;">Oui, certains jeux ont des symboles de débogage, vous pouvez donc lire les noms des fonctions, mais pas dans notre cas. </font><font style="vertical-align: inherit;">Hopper nous donne des noms comme "sub_a8cbb6", que nous devons gérer seuls. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Heureusement, nous avons une longueur d'avance: notre </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fichier journal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Il est très probable que </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">des littéraux de chaîne</font></a><font style="vertical-align: inherit;"> soient utilisés lors de l'écriture dans le journal</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, c'est-à-dire que l'ASCII est flashé dans le fichier exécutable. </font><font style="vertical-align: inherit;">Nous pouvons les rechercher avec grep, car nous ne nous en débarrasserons par aucune compilation (cependant, ils peuvent être cachés par un obscurcissement de code. Heureusement, cela ne s'est pas produit.). </font><font style="vertical-align: inherit;">La recherche de littéraux de chaîne grep est généralement la première chose qu'ils font lors du démontage d'un programme. </font><font style="vertical-align: inherit;">Alors, saisissons «vendeur trouvé» dans la boîte de recherche de la trémie et il trouvera quelque chose:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da7/114/b61/da7114b61ecba23df73633ad41ab338f.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oh oui, les littéraux à cordes, je les adore. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En soi, cela ne nous a pas tellement avancés. </font><font style="vertical-align: inherit;">Mais comme l'adresse de cette "chaîne de littéraux" est codée en dur, nous pouvons y trouver des liens. </font><font style="vertical-align: inherit;">Hopper les a surlignés en vert à droite: "DATA XREF = sub_1d5908 + 1252." </font><font style="vertical-align: inherit;">Double-cliquez sur la ligne, nous allons passer à notre procédure hero - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sub_1d5908</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d6d/d6a/e8b/d6dd6ae8bbe346215273e7beb930b0a7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous trouvons le code assembleur. </font><font style="vertical-align: inherit;">On pense qu'il est difficile à lire, mais ce n'est pas le cas. </font><font style="vertical-align: inherit;">Le plus difficile est de le comprendre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par défaut, Hopper utilise la "syntaxe Intel", c'est-à-dire que le premier opérande est le récepteur et le second la source. </font><font style="vertical-align: inherit;">Dans la ligne en surbrillance, nous voyons </font></font><code>mov dword [esp+0x1DC8+var_1DC4], aXmlRenderConfi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Faisons-le.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre première ligne d'assembleur</font></font></h2><br>
<code>mov</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est une équipe MOV connue pour être sur x86 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turing-complete</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il déplace (copie en fait) les données de A vers B, ce qui signifie essentiellement lire A et écrire dans B. Sur la base de ce qui précède, </font></font><code>aXmlRenderConfi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c'est A, et </font></font><code>dword [esp+0x1DC8+var_1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c'est B, le destinataire. Examinons cela de plus près. </font></font><br>
<br>
<code>aXmlRenderConfi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- c'est la valeur que Hopper nous aide. Il s'agit en fait d'un alias pour l'adresse mémoire du littéral de chaîne sur lequel nous avons cliqué il y a quelques secondes. Si vous divisez la fenêtre et regardez le code en mode Hex (qui est le </font><font style="vertical-align: inherit;">mode </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">préféré</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des hackers), nous le verrons </font></font><code>88 18 83 00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d3/d74/31d/0d3d7431d27f6a03c2af6142f27c9a9b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hopper met en évidence les mêmes fragments sélectionnés dans les deux fenêtres.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si la valeur «flip» est correcte, nous obtiendrons 0x00831888 - l'adresse mémoire du littéral de chaîne (dans l'une des captures d'écran ci-dessus, elle est même surlignée en jaune). Ainsi, une énigme est résolue: le code exécute MOV, c'est-à-dire qu'il écrit l'adresse 0x00831888. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi est-il écrit comme ça </font></font><code>88 18 83 00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pas comment </font></font><code>00 83 18 88</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Cela s'est produit en raison de l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ordre des octets</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un sujet plutôt déroutant qui a généralement peu d'impact. C'est l'une de ces choses qui font dire aux gens que «les ordinateurs ne fonctionnent pas». Pour nous, cela signifie que ce problème se produira dans tous les nombres avec lesquels nous travaillerons aujourd'hui.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous remarquerez peut-être que j'ai dit "écrivez l'adresse", et c'est vrai: nous ne nous soucions pas vraiment du contenu, qui s'est avéré être un littéral de chaîne avec un octet zéro à la fin. Nous notons l'adresse car le code fera plus tard référence à cette adresse. Ceci est un pointeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et alors </font></font><code>dword [esp+0x1DC8+var_1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Ici, tout est plus compliqué. </font></font><code>dword</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signifie que nous travaillons avec des "mots doubles (mots doubles)", c'est-à-dire avec 16 * 2 bits. Autrement dit, nous copions 32 bits. Rappel: notre adresse est</font></font><code>0x00831888</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, c'est-à-dire 8 caractères hexadécimaux, et chaque caractère hexadécimal peut avoir 16 valeurs, soit 4 bits de données. Nous obtenons donc 8 * 4 = 32. Soit dit en passant, la notation «32 bits» pour les systèmes informatiques est venue d'ici. Si nous utilisions 64 bits, l'adresse mémoire serait écrite comme 0x001122334455667788, serait deux fois plus longue et 2 ^ 32 fois plus grande, et nous devions copier 16 octets. Nous aurions donc beaucoup plus de mémoire, mais la copie du pointeur nécessiterait deux fois plus de travail, et donc 64 bits ne sont en fait pas deux fois plus rapides que 32 bits. Soit dit en passant, une explication plus détaillée du terme «mot» peut être trouvée </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Parce que c'est, bien sûr, plus compliqué que mon explication.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, qu'en est-il de la partie entre crochets? Les crochets signifient que nous calculons ce qui est à l'intérieur et le considérons comme un pointeur. Par conséquent, la commande MOV écrira à l'adresse mémoire obtenue à partir des calculs. Examinons-le à nouveau plus en détail (et ne vous inquiétez pas, lorsque vous aurez terminé, vous saurez essentiellement lire le code assembleur avec la syntaxe Intel). </font></font><br>
<br>
<code>esp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c'est un </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">registre</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui dans l'assembleur est l'équivalent le plus proche d'une variable. Il existe de nombreux registres dans l’architecture x86, et différents registres ont des modes d’application différents, mais cela nous importe peu. Apprenez-en plus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sachez simplement qu'il existe des registres spéciaux pour les nombres à virgule flottante, ainsi que des «indicateurs» qui sont utilisés pour les comparaisons et les opérations similaires. Tout le reste n'est que des nombres hexadécimaux que Hopper a retravaillé un peu pour nous aider. </font></font><code>var_1DC4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ceci </font></font><code>-0x1DC4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nous pouvons le voir au début de la procédure, ou dans le panneau de droite. Cela signifie que le résultat du calcul </font></font><code>[esp+0x1DC8+var_1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sera </font></font><code>[esp + 0x1DC8 — 0x1DC4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">égal à </font></font><code>[esp + 4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Essentiellement, cela signifie «prendre la valeur 32 bits du registre ESP, ajouter 4 et interpréter le résultat comme une adresse mémoire». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, nous répétons: nous écrivons l'adresse du littéral de chaîne en «esp + 4». Ce sont des informations correctes, mais elles sont complètement inutiles. Qu'est-ce que ça veut dire?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est la difficulté de lire le code assembleur: en analysant ce qu'il doit faire. </font><font style="vertical-align: inherit;">Ici, nous avons une longueur d'avance: nous savons qu'il écrit très probablement quelque chose dans le journal. </font><font style="vertical-align: inherit;">Par conséquent, nous pouvons nous attendre à un appel à une fonction qui écrit dans le journal. </font><font style="vertical-align: inherit;">Cherchons pour elle.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c57/7f8/827/c577f8827feb59247a7c69ed0467fef2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la capture d'écran ci-dessus, il existe plusieurs appels similaires, ainsi que la commande </font></font><code>call</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui appelle la procédure. </font><font style="vertical-align: inherit;">Hopper en parle généralement (je ne sais pas pourquoi il ne l'a pas fait ici), mais en substance, nous donnons des arguments pour appeler la fonction. </font><font style="vertical-align: inherit;">Si vous cliquez sur différents appels de sous-programme, nous trouvons quelque chose appelé imp___jump_table___Z22StringVPrintfExWorkerAPcmmPS_PmmPKcS_. </font><font style="vertical-align: inherit;">C'est le </font><font style="vertical-align: inherit;">nom </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">décodé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la fonction, et la partie «Printf» suffit pour comprendre qu'elle sort vraiment quelque chose. </font><font style="vertical-align: inherit;">Peu nous importe comment elle le fait.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prendre du recul</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, nous nous sommes complètement écartés de ce que nous avons fait: nous avons essayé de convaincre le jeu que notre carte graphique 2015 était suffisamment puissante pour lancer le jeu 2005. Résumons. Nous avons trouvé l'endroit où le journal est enregistré. Si nous avons de la chance, voici le code qui vérifie les paramètres et les capacités des cartes graphiques. Heureusement, nous avons vraiment eu de la chance (il y a de fortes chances que sinon cet article ne l'aurait pas été). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour avoir une vue d'ensemble, nous utiliserons la fonction Hopper Control Flow Graph, qui divise le code en petits blocs et trace des flèches indiquant différentes transitions. C'est beaucoup plus facile à comprendre que dans un assembleur ordinaire, dans lequel souvent tout est en désordre.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e3a/4bd/1b1/e3a4bd1b1528d0344f4f1174b16be79c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'appel à l'entrée du journal est au milieu d'une fonction terriblement longue, car cela se produit généralement dans les jeux AAA. </font><font style="vertical-align: inherit;">Ici, nous devons rechercher d'autres littéraux et "astuces" de chaîne Hopper, dans l'espoir de trouver quelque chose. </font><font style="vertical-align: inherit;">Au début de la procédure se trouve le reste de la journalisation, et ci-dessous il y a des parties intéressantes sur les options de «forçage dx7» et «Très élevé», ainsi qu'un problème avec la version des pixel shaders ... </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que nous avons.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le journal de nos données "piratées" a rapporté que nous avions des pixel shaders de la version 0.0, et ils sont incompatibles avec les paramètres "High". </font><font style="vertical-align: inherit;">Ce code est situé dans le coin inférieur gauche de notre fonction, et si vous regardez attentivement, vous pouvez voir quelque chose de curieux (mis en évidence par votre humble serviteur): il s'agit du même code répété quatre fois pour les paramètres "Très élevé", "Haut", "Moyen" et "Bas". </font><font style="vertical-align: inherit;">Et oui, il m'a fallu plusieurs heures pour trouver cela.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27b/132/603/27b13260328e5da3cbef4323e840563f.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai surligné en bleu le bloc dans lequel «pixel shader version 0.0 High» est affiché dans le journal. J'ai mis en évidence des parties similaires avec d'autres belles couleurs.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Les seules différences sont que nous écrivons «0x0», «0x1», «0x2» et «0x3» à différents endroits. Ceci est étrangement similaire au fichier de paramètres que nous avons examiné ci-dessus et au paramètre </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optiongrfxshaderquality</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (vous ne le comprenez peut-être pas encore. Mais il l'est, croyez-moi). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, nous pouvons essayer d'aller de différentes manières, ce que j'ai fait. Mais je serai bref - nous ferons le plus nécessaire: découvrez pourquoi la vérification du pixel shader échoue. Cherchons une branche. Le bloc de sortie du journal est linéaire, ce qui signifie qu'il devrait être quelque part au-dessus.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/724/d53/3a7/724d533a7f9af2353f611c6bea4f15b7.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les fans de SEMVER, voir un format de version plus avancé: les nombres à virgule flottante.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Et en fait, juste au-dessus, il y a </font></font><code>jb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une commande de transition (pensez à «goto»). Il s'agit d'un " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saut conditionnel</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " et la condition est " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si moins</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". Les «ifs» de l'assembleur fonctionnent via </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des indicateurs de registre</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dont j'ai brièvement parlé ci-dessus. Il suffit de savoir que nous devons regarder la commande ci-dessus: très probablement, elle définit le drapeau. Il s'agit souvent d'une commande </font></font><code>cmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais utilisée ici </font></font><code>ucomiss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. C'est de la barbarie. Mais elle google facilement: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ucomiss</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Il s'agit d'une commande de comparaison à virgule flottante, ce qui explique pourquoi le code a</font></font><code>xmm0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Il s'agit d'un registre de nombres à virgule flottante. C'est logique: les journaux indiquent que notre version des pixel shaders est «0.0», qui est une valeur à virgule flottante. Alors, qu'est-ce qui se trouve à l'adresse mémoire 0x89034c? Les données hexadécimales ont un aspect </font></font><code>00 00 00 40</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et elles peuvent être déroutantes. Mais nous savons que nous devons nous attendre à des nombres à virgule flottante, alors interprétons les données comme ça: cela signifie </font></font><code>2.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Qui est une valeur logique à virgule flottante pour la version des pixel shaders que Microsoft a réellement utilisée dans son </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">langage d'ombrage de haut niveau</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur lequel les shaders DirectX sont écrits. </font><font style="vertical-align: inherit;">Et Age 3 est un jeu DirectX, même si le port sur Mac utilise OpenGL. </font><font style="vertical-align: inherit;">Il est également logique qu'en 2005, des pixel shaders de la version 2.0 soient nécessaires pour activer le paramètre High, nous allons donc dans la bonne direction. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment réparons nous ça? </font><font style="vertical-align: inherit;">Cette instruction de comparaison effectue une comparaison avec la valeur à </font></font><code>xmm0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">laquelle est donnée dans la ligne ci - </font><font style="vertical-align: inherit;">dessus: </font></font><code>movss xmm0, dword [eax+0xA2A8]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">MOVSS est une commande spéciale de «déplacement» pour les registres à virgule flottante, et nous écrivons 32 bits à partir de l'adresse, qui est le résultat de l'évaluation de eax + 0xA2A8. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vraisemblablement, cette valeur n'est pas de 2,0, mais plutôt de 0,0. </font><font style="vertical-align: inherit;">Corrigeons-le.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faire du vrai piratage</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, nous sommes prêts à accéder aux paramètres du jeu High. Nous voulons suivre le chemin "rouge" et sauter toute la logique avec la "mauvaise version des pixel shaders". Cela peut être fait en passant avec succès la comparaison, c'est-à-dire en inversant la condition de transition, mais nous avons une astuce de plus: le code est composé de telle manière que lors de la suppression de la transition, nous irons dans le sens "rouge". Remplaçons simplement la transition par </font></font><code>nop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une opération qui ne fait rien (il est impossible de simplement supprimer ou ajouter des données au fichier exécutable car un décalage se produira et tout se cassera). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je recommande de quitter CFG pour cela, car sinon Hopper commence à devenir fou. Si tout est fait correctement, alors dans la fenêtre Hex, nous verrons des lignes rouges.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/903/09d/db2/90309ddb2fecf42031e8bf9d4a6abe88.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/010/d39/b35/010d39b355b0cb7e5b55fc83007e17ae.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le rouge montre les changements que nous avons apportés. </font><font style="vertical-align: inherit;">À ce stade, si vous avez payé Hopper, vous pouvez simplement enregistrer le fichier. </font><font style="vertical-align: inherit;">Mais je n'ai pas payé, je vais donc ouvrir le fichier exécutable dans Hex Fiend, trouver la zone souhaitée (en copiant la zone de Hopper dans l'onglet Rechercher à l'intérieur de Hex Fiend) et la modifier manuellement. </font><font style="vertical-align: inherit;">Faites attention ici, vous pouvez tout casser, donc je recommande de copier quelque part le fichier exécutable source. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela fait, lancez le jeu, allez dans les options ... Et bravo - nous pouvons sélectionner "High". </font><font style="vertical-align: inherit;">Mais on ne peut pas choisir "moyen". </font><font style="vertical-align: inherit;">Et nous ne pouvons pas utiliser les paramètres élevés des ombres. </font><font style="vertical-align: inherit;">Néanmoins, nous progressons!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3df/3a2/bba/3df3a2bbaa02e57ce2997e53137bdb56.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jetez un œil à ces magnifiques reflets dans l'eau!</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Améliorations</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, vous pouvez résoudre ce problème de la meilleure façon. Notre solution a fonctionné, mais nous pouvons faire en sorte que la condition soit remplie correctement: faire croire au jeu que notre carte graphique a en fait des shaders de la version 2.0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme nous nous en souvenons, le jeu charge la valeur à l'adresse </font></font><code>eax+0xA2A8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Vous pouvez utiliser Hopper pour découvrir ce qui a été enregistré à l'origine. Nous devons trouver une commande dans laquelle 0xA2A8 est utilisé comme opérande destinataire (j'ai choisi 0xA2A8 parce que c'est une valeur assez spécifique, et nous ne pouvons pas être sûrs que le même registre n'est pas utilisé ailleurs). Ici, le rétro-éclairage de la trémie nous est très utile, car nous pouvons simplement cliquer sur 0xA2A8 et rechercher les parties jaunes dans CFG.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bbd/5ed/75b/bbd5ed75b7b712a39861769efc3f63cd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre victoire est un peu plus élevée: comme prévu, nous écrivons la valeur d'une sorte de registre à virgule flottante. J'avoue que je ne comprends pas vraiment ce qui se passe avant cela (ma meilleure supposition: le jeu vérifie la possibilité de compression de texture), mais ce n'est pas particulièrement important. Écrivons «2.0» et continuons le travail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, nous utiliserons les «instructions d'assemblage» de l'application Hopper, puis effectuerons les mêmes manipulations dans Hex Fiend.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/92d/3d1/637/92d3d1637e2c46321c9983f68ffda742.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/784/a8f/f5b/784a8ff5bb2755f378143d4740d4201f.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9b6/fed/ff0/9b6fedff0d7cbbeb9713c34513776468.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous utilisons MOV au lieu de MOVSS car nous écrivons la valeur habituelle, et non la valeur spéciale du registre à virgule flottante. De plus, il est en ordre d'octets direct, c'est-à-dire inversé.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Vous remarquerez qu'il se passe quelque chose d'étrange: nous avons «mangé» l'équipe </font></font><code>jb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Cela est arrivé parce que la nouvelle commande prend plus d'octets que la précédente, et comme je l'ai dit, nous ne pouvons pas ajouter ou supprimer des données du fichier exécutable pour enregistrer les décalages. Par conséquent, Hopper n'a d'autre choix que de détruire l'équipe </font></font><code>jb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Cela peut devenir un problème et nous pouvons l'éliminer en déplaçant la commande vers le haut (après tout, nous n'avons plus besoin d'écrire la valeur xmm3). Cela fonctionnera ici, car dans tous les cas, nous faisons le branchement sur le bon chemin. Chanceux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous démarrez le jeu ... alors rien ne changera beaucoup. </font><font style="vertical-align: inherit;">J'ai suggéré que la série Intel 9 n'est pas assez rapide, donc le jeu se plaint. </font><font style="vertical-align: inherit;">Ce n'est pas un problème, car en réalité nous nous efforçons de «très élevé». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelle était la carte la plus puissante autour de 2004? </font><font style="vertical-align: inherit;">NVIDIA GeforceFX 6800. Voyons comment convaincre le jeu que nous l'avons installé.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le trou de lapin</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, c'est une toute nouvelle section. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous savons que le jeu utilise des codes Hex pour désigner les cartes graphiques et qu'il reçoit des informations des fichiers de données. Nous savons que cela devrait se produire dans la fonction que nous étudions (au moins ce serait étrange si ce n'était pas le cas). Nous pouvons donc trouver le code qui fait cela. Mais cela peut encore être difficile, car nous ne savons pas exactement quoi chercher. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons un indice: les options se comportent étrangement; il y a Low / High, mais pas de Medium. Il y a donc peut-être un autre code qui gère tous ces «très haut», «haut», «moyen» et «bas». Et il est en fait, dans la même fonction. Il est beaucoup plus tôt au CFG et semble intéressant.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e73/73a/ea1/e7373aea138358b603c609d8704cfed0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons supposer que les données brutes sont stockées dans une sorte de XML, car il est très probable, car il existe plusieurs autres fichiers de données qui sont XML. Et XML est essentiellement un tas de pointeurs et d'attributs. Par conséquent, le code ici vérifie très probablement certains attributs XML (et en fait, ci-dessous est «attendu un ID, très élevé ...», ce qui est très similaire à la vérification de l'exactitude du fichier). Nous pouvons imaginer une structure XML similaire dans laquelle les valeurs booléennes déterminent la qualité des shaders:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4e8/bf7/411/4e8bf7411dd677f1415ae71c887cbef5.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il convient de considérer qu'il s'agit d'une supposition très arbitraire. </font><font style="vertical-align: inherit;">Tout peut sembler un peu différent. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une partie très intéressante est affichée sur le côté gauche du CFG (pour vous, cela peut être à droite, mais à gauche dans la capture d'écran): nous voyons le même </font></font><code>var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qui est utilisé dans le code qui écrit l'ID de l'appareil dans le journal. </font><font style="vertical-align: inherit;">Autrement dit </font></font><code>ebp+var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, se réfère probablement à l'ID de notre appareil, 0x2773. </font><font style="vertical-align: inherit;">Ce qui est étrange, c'est qu'il n'y a pas de littéral de chaîne dans la première «vérification», mais il s'agit d'un bogue Hopper: l'adresse 0x0089da8e contient des données hexadécimales 69006400, qui en UTF-16 signifie «id» (en fait, probablement Hopper n'a pas pu comprendre cela à cause de UTF16). </font><font style="vertical-align: inherit;">Et nous </font><font style="vertical-align: inherit;">cherchons </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">juste</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> une pièce d'identité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous savez quoi? </font><font style="vertical-align: inherit;">Lançons le débogueur et vérifions tout dans la réalité.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Débogage du jeu</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ouvrez une fenêtre de terminal et exécutez lldb (tapez simplement lldb et appuyez sur Entrée). Nous devons d'abord dire à LLDB de suivre l'âge de 3 ans, puis nous pouvons commencer le jeu en appelant </font></font><code>run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Le jeu démarre et nous n'obtenons rien d'utile.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/47b/0f2/279/47b0f227957a0414bc739002abafb432.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous devons ajouter un point d'arrêt: pour confirmer nos hypothèses, nous voulons arrêter l'exécution lorsque nous arrivons au code indiqué ci-dessus. Nous n'avons pas de code source, mais cela n'a pas d'importance: nous pouvons définir un point d'arrêt à l'adresse mémoire. Et nous avons l'adresse dans le code. Ajoutons un arrêt à un appel MOV qui reçoit un "id", son adresse est 0x001d5e68. Pour ajouter un point d'arrêt, entrez simplement </font></font><code>br set -a 001D5E68</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Après avoir démarré le jeu, il s'arrête et LLDB affiche le code désassemblé (dans la syntaxe AT&amp;T, pas Intel, donc tous les opérandes sont inversés, mais on voit que c'est le même code). Vous pouvez remarquer que LLDB dans ce cas est en fait plus intelligent que Hopper; il nous dit que nous effectuons des opérations liées à XML et à la sortie printf.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd0/2fa/07c/cd02fa07c9a2dbd13ed07558f0983595.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/95d/fa6/710/95dfa671088f1c7097b439851f586b24.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Envie d'un hacker? </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour continuer, prenons une «instruction par étapes». </font><font style="vertical-align: inherit;">Une commande courte pour cela </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 est </font></font><code>ni</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En répétant plusieurs fois, nous remarquons que nous revenons à notre point de départ. </font><font style="vertical-align: inherit;">Ceci est un cycle! </font><font style="vertical-align: inherit;">Et c'est tout à fait logique: nous itérons probablement autour d'une sorte de XML. </font><font style="vertical-align: inherit;">En fait, Hopper nous l'a montré - si nous suivons le CFG, nous verrons un cycle (possible).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70f/63f/fdd/70f63ffddb8c3c073dcc257af70581d8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela signifie:</font></font><code>if (*(ebp+var_CC) == *(ebp+var_28)) { *(ebp+var_1D84)=edi }</code></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sa condition de sortie est que la valeur </font></font><code>ebp+var_1D84</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soit différente de zéro. </font><font style="vertical-align: inherit;">Et nous voyons un paramètre de code intéressant dans celui mis en évidence par moi </font></font><code>var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutons un point d'arrêt sur celui-ci </font></font><code>cmp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et nous le découvrirons.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a3/c32/d3a/9a3c32d3a01dd202e192648f5ef6609c.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/593/bc4/34d/593bc434d505cb29799846d61cb177bb.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gauche: définissez un point d'arrêt sur le CMP et poursuivez l'exécution. A droite, nous surveillons les registres et la mémoire.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nous regardons les registres avec </font></font><code>reg r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et la valeur de la mémoire avec </font></font><code>mem read $ebp-0x28</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et contient réellement 0x2773, et la valeur en mémoire est maintenant 0x00A0. Si vous l'exécutez plusieurs fois </font></font><code>thread c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, nous verrons que l'itération se produit sur différents ID à la recherche de correspondances. À un certain stade, les valeurs coïncideront, la boucle se terminera et le jeu commencera. Maintenant, nous savons comment le gérer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelez-vous le fichier journal: il a identifié à la fois l'appareil et le fabricant. Quelque part, il y a probablement un cycle similaire pour les noms des fabricants. Et en fait, il est très similaire et situé dans le CFG directement au-dessus de notre cycle. Cette boucle est un peu plus simple, et nous recherchons la chaîne «vendor». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette fois, la comparaison est effectuée avec</font></font><code>var_D0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cette variable est en fait utilisée comme ID fabricant. </font><font style="vertical-align: inherit;">Si nous mettons un point d'arrêt ici et vérifions tout, nous verrons le 0x8086 familier à </font></font><code>eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et en même temps, une comparaison avec 0x10DE se produit. </font><font style="vertical-align: inherit;">Écrivons-le </font></font><code>eax</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et voyons ce qui se passe.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4a/014/fd5/e4a014fd58bcc6408f48de1411db83b8.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03b/9ce/7d0/03b9ce7d056048ecdf69987c3e8d774a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensationnel. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, 0x10DE est NVIDIA. </font><font style="vertical-align: inherit;">En fait, on pourrait comprendre cela en étudiant un fichier de données, mais ce n'est pas très intéressant. </font><font style="vertical-align: inherit;">Maintenant, la question est: quel est l'identifiant du GeforceFX 6800? </font><font style="vertical-align: inherit;">Nous pouvons utiliser LLDB et vérifier simplement chaque identifiant, mais cela prendra du temps (il y en a beaucoup, j'ai essayé de trouver le bon). </font><font style="vertical-align: inherit;">Jetons donc un coup d'œil à render.bar cette fois.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cbc/605/7f4/cbc6057f454e5ee95865324fea40e271.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supposons qu'il s'agisse de «XMB», la représentation binaire de XML utilisée à l'age 3.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ce fichier est assez chaotique. Mais après les balises Geforce FX 6800, nous voyons plusieurs identifiants. Très probablement, nous en avons besoin. Essayons 00F1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le moyen le plus simple de tester cela est d'utiliser LLDB et de définir les points d'arrêt souhaités. Je vais sauter cette étape, mais je dirai que 00F1 est apparu (heureusement). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce stade, nous devons répondre à la question: «Comment rendre ce changement permanent?» Il semble qu'il sera plus facile de changer les valeurs </font></font><code>var_CC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>var_D0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur 0X00F1 et 0X10DE. Pour ce faire, nous avons juste besoin d'avoir de l'espace pour le code.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une solution simple serait de remplacer l'un des appels d'enregistrement de journal par un NOP, par exemple, un appel de sous-système. </font><font style="vertical-align: inherit;">Cela nous libérera plusieurs dizaines d'octets, et c'est encore plus que nécessaire. </font><font style="vertical-align: inherit;">Sélectionnons tout cela et remplaçons-le par NOP. </font><font style="vertical-align: inherit;">Ensuite, nous avons juste besoin d'écrire des informations en utilisant les variables MOV: assembleur </font></font><code>mov dword [ebp+var_CC], 0xF1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>mov dword [ebp+var_D0], 0x10DE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6f/eb6/d19/e6feb6d1903ca8305714594fe1911413.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/79c/096/783/79c096783f59920be40a85fdac85f44f.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avant et après</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Lançons le jeu. </font><font style="vertical-align: inherit;">Enfin, nous avons réalisé quelque chose: vous pouvez choisir entre Faible, Moyen ou Élevé, ainsi qu'activer les paramètres Élevés pour les ombres.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/370/8b5/7cb/3708b57cb8d0d5e405e54e4c5ee99eb8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais nous ne pouvons toujours pas activer Très élevé, et c'est triste. </font><font style="vertical-align: inherit;">Que ce passe-t-il?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e16/2e6/732/e162e673279757ba3cac035fa5f9b0f6.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ah, j'ai compris.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il s'est avéré que le Geforce FX 6800 devrait prendre en charge la version 3.0 pixel shaders, et nous ne définissons que la version 2.0. Maintenant, il est facile pour nous de le réparer: il suffit d'écrire 3.0 en virgule flottante </font></font><code>ebp+0xA2A8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Cette valeur est 0x40400000. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, le jeu n'est plus capricieux, et nous pouvons profiter de paramètres très élevés.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3c/24e/2c1/f3c24e2c156feb16f1d34bf67aa33d5a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Étrange, mais ça a l'air complètement différent. Les couleurs sont beaucoup moins vibrantes et un brouillard dépendant de la plage est apparu. Il y a aussi un petit problème de conflit d'ombres (il est également dans les captures d'écran ci-dessus, cela est dû aux paramètres d'ombre élevés, pas à la qualité des shaders), que je n'ai pas encore pu résoudre.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Et c'est la fin de notre voyage, merci pour la lecture. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, je donnerai des exemples de l'apparence de chacun des paramètres du jeu, car toutes les captures d'écran trouvées en ligne sont terribles ou incomplètes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les graphismes sur Medium sont tout à fait acceptables, mais souffrent d'un manque d'ombres. Pour autant que je sache, très élevé ajoute pour la plupart une LUT complètement différente (une bonne explication de ce terme peut être trouvée dans la section Gradation des couleurs de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cet article.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), du brouillard au loin et peut-être même un modèle d'éclairage complètement différent? </font><font style="vertical-align: inherit;">L'image est très différente et c'est plutôt étrange.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5a/ed3/00d/b5aed300d967d53f67bf3e8798615525.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c8/0b8/bd7/1c80b8bd77a9cdfb4fdbd1da13146035.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45a/73b/776/45a73b7760497a9424b4e92984071e2c.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/817/12a/54c/81712a54ca17e71925eea886f628db3f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De haut en bas: très élevé, élevé (avec les options d'ombre élevée), moyen (juste avec l'ombre activée), faible (avec l'ombre désactivée).</font></font></i><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autres liens utiles</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le blog que j'ai lié ci-dessus contient une merveilleuse analyse des pipelines de rendu modernes: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://www.adriancourreges.com/blog/</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Rate 0 AD est un jeu RTS open-source du même genre: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://play0ad.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Elle a besoin de développeurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous voulez en savoir plus sur le format XMB, vous pouvez lire </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son code en 0 AD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Je n'ai pas vérifié, mais je suis sûr que c'est le même format, car la personne qui a écrit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le décodeur XMB pour Age 3 sur Age of Empires heaven a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> également implémenté ces fichiers dans le code source 0 AD en 2004. Donc, ce sera une leçon amusante en paléontologie de code. Merci pour tout le travail, Ykkrosh.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je me souviens exactement que j'ai lu un excellent tutoriel sur l'utilisation de Hopper, mais maintenant je ne trouve pas le lien. </font><font style="vertical-align: inherit;">Si quelqu'un sait de quoi je parle, supprimez le lien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au final, je voudrais mentionner le projet Cosmic Frontier: un remake de la série classique Escape Velocity (plus d'Override, mais il est également compatible avec Nova). </font><font style="vertical-align: inherit;">C'est un jeu incroyable et il est très triste que peu de gens le connaissent. </font><font style="vertical-align: inherit;">Maintenant, les créateurs ont lancé une campagne sur Kickstarter, et le développeur principal a un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> développement très intéressant </font><font style="vertical-align: inherit;">, qui parle d'utiliser Hex Fiend pour inverser les formats de données du jeu original. </font><font style="vertical-align: inherit;">Ceci est une excellente lecture. </font><font style="vertical-align: inherit;">Si vous pensez que </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mon article</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> était fou. </font><font style="vertical-align: inherit;">puis dans l'un des postes, ils:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons lancé l'émulateur Mac classique pour utiliser les API obsolètes depuis longtemps pour lire un fichier de données crypté.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cryptage d'ingénierie inverse à partir du code du jeu</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ils ont utilisé un hack de système de fichiers pour accéder aux mêmes données sur un Mac moderne.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, ce sont des gens vraiment passionnés, et j'espère que leur projet sera mené à bien, car EV Nova est mon jeu préféré.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500516/index.html">Transfert rapide depuis les messageries instantanées - Portefeuille Android QIWI</a></li>
<li><a href="../fr500518/index.html">Itérations d'introduction de Scrum dans une entreprise</a></li>
<li><a href="../fr500520/index.html">Comment utiliser vos applications dans le monde entier: 10 conseils du PDG Wachanga</a></li>
<li><a href="../fr500528/index.html">À propos de la traduction de "pratique" / "pratique" sans pratique / pratique</a></li>
<li><a href="../fr500530/index.html">Mémo API Canvas</a></li>
<li><a href="../fr500546/index.html">Créer un document de tableau simple à l'aide de la boîte à outils ODF</a></li>
<li><a href="../fr500552/index.html">Comment accélérer la révision du code</a></li>
<li><a href="../fr500554/index.html">Modèle de serveur d'arrière-plan Golang - partie 2 (API REST)</a></li>
<li><a href="../fr500556/index.html">Deux ans de transformation numérique en deux mois</a></li>
<li><a href="../fr500558/index.html">Une sélection d'articles sur l'apprentissage automatique: études de cas, guides et recherches pour avril 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>