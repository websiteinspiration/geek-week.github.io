<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐒 🌈 🧑🏿‍🤝‍🧑🏽 De quel côté êtes-vous: pousser et tirer dans la configuration de l'état souhaité 🕐 👨🏿‍🚒 🔖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous avons déjà décrit comment décrire la configuration dans DSC (Desired State Configuration) et désassemblé l'agent LCM (Local Configuration Manager...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>De quel côté êtes-vous: pousser et tirer dans la configuration de l'état souhaité</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/503672/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons déjà décrit comment décrire la configuration dans DSC (Desired State Configuration) et désassemblé l'agent LCM (Local Configuration Manager) intégré pour appliquer la configuration sur le serveur. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la première partie de l'article, nous avons</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> abordé pas à pas les principales fonctionnalités de l'outil avec </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evgeny Parfenov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataLine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous plongeons dans les paramètres et les fonctionnalités des modes Push et Pull.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ri/1q/uv/ri1quvznkudmbtrsw1djyw1tjpc.jpeg"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce que nous dirons:</font></font></h4> <br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Différences entre les modes Push et Pull</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode push en détail</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode Pull en détail</font></font></a></li>
</ol> <a name="habracut"></a><br>
<a name="1"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Différences entre les modes Push et Pull</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mode Push, nous lançons manuellement ou par script le processus d'application des modifications au serveur (localement ou à distance). </font><font style="vertical-align: inherit;">Local Configuration Manager (LCM) applique la configuration de manière interactive. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mode Pull, l'agent LCM planifié sur le serveur compare sa configuration avec la configuration publiée dans le référentiel de configuration partagé. </font><font style="vertical-align: inherit;">S'il y a des changements, la configuration est copiée localement et appliquée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les avantages et les inconvénients des deux modes de fonctionnement sont assez évidents.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pousser</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tirer</font></font></th>
</tr>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></th>
<td><ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coût. </font><font style="vertical-align: inherit;">Il ne nécessite pas l'installation de serveurs supplémentaires.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture simple. </font><font style="vertical-align: inherit;">Toutes les configurations sont stockées localement sous la forme qui convient à l'administrateur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convient pour les tests. </font><font style="vertical-align: inherit;">DSC</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevOps Way. </font><font style="vertical-align: inherit;">Lors du déploiement de serveurs, il est très facile à automatiser et s'inscrit dans la philosophie de l'infrastructure en tant que code.</font></font></li>
<li>  run-once     .</li>
</ol></td>
<td><ol>
<li>  .      .</li>
<li>    .      DSC   .</li>
<li>     Azure Automation State Configuration,        Windows Server 2012R2+</li>
</ol></td>
</tr>
<tr>
<th>–</th>
<td><ol>
<li> On-Premise   c   .         ,    .</li>
</ol></td>
<td><ol>
<li>   ,       .</li>
<li> On-Premise        GPO,          .</li>
<li>  —    ,           .</li>
</ol></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La définition des ressources est également légèrement différente pour les différents modes. </font><font style="vertical-align: inherit;">Comme nous nous en souvenons, pour utiliser une ressource, vous devez l'installer localement et sur le serveur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas de l'utilisation du mode Push, l'administrateur doit d'abord installer toutes les ressources nécessaires sur le serveur géré et sur le PC, d'où la configuration sera soumise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mode Pull, l'agent DSC sur le serveur géré peut installer indépendamment toutes les ressources nécessaires à partir du serveur Pull; la tâche de l'administrateur consiste à les placer sur le serveur Pull. </font><font style="vertical-align: inherit;">Cependant, nous gardons à l'esprit qu'il est impossible de prédire l'application de la configuration en mode Pull, car le GPO n'est pas une livraison garantie des paramètres.</font></font><br>
<br>
<a name="2"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode push en détail</font></font></h2><br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/xb/4v/td/xb4vtdh2aro8hh5-en6fqymutkm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le </font><font style="vertical-align: inherit;">
processus de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">niveau supérieur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d'écriture et d'application des configurations DSC peut être représenté comme suit: </font><font style="vertical-align: inherit;">À la première étape ( </font><b><font style="vertical-align: inherit;">création</font></b><font style="vertical-align: inherit;"> ), nous décrivons la configuration à l'aide de n'importe quel IDE qui nous convient (Bloc-notes, PowerShell ISE, Visual Studio Code et autres). </font><font style="vertical-align: inherit;">À la fin, nous compilons les fichiers de configuration mof (le processus de compilation est décrit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans notre article précédent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la deuxième étape ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Staging / Compilation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), nous commençons à appliquer la configuration à partir du fichier mof compilé à l'aide de l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">applet de commande Start-DSCConfiguration</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans le processus, le serveur de gestion transmet le fichier .mof du serveur LCM, qui doit appliquer la configuration. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, il est préférable d'utiliser le commutateur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Verbose.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pour un contrôle complet du processus de configuration:</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">PS</span> C:\windows\system32&gt; <span class="hljs-built_in">Start-DscConfiguration</span> <span class="hljs-literal">-Path</span> C:\EnvironmentVariable_Path\ <span class="hljs-literal">-Wait</span> <span class="hljs-literal">-Verbose</span><font></font>
<font></font>
<span class="hljs-comment"># C </span>
VERBOSE: Perform operation <span class="hljs-string">'Invoke CimMethod'</span> with following parameters, <span class="hljs-string">''</span>methodName<span class="hljs-string">' =
SendConfigurationApply,'</span>className<span class="hljs-string">' = MSFT_DSCLocalConfigurationManager,'</span>namespaceName<span class="hljs-string">' =
root/Microsoft/Windows/DesiredStateConfiguration'</span>.<font></font>
VERBOSE: An LCM method call arrived from computer COMPUTER with user sid<font></font>
S<span class="hljs-literal">-1</span><span class="hljs-literal">-5</span><span class="hljs-literal">-21</span><span class="hljs-literal">-SID</span>.<font></font>
<font></font>
<span class="hljs-comment">#  </span>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Set</span>      ]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Resource</span> ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
<font></font>
<span class="hljs-comment">#       (test)</span>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Test</span>     ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]:                            [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>] Environment variable
<span class="hljs-string">'TestPathEnvironmentVariable'</span> does not exist.<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Test</span>     ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]  <span class="hljs-keyword">in</span> <span class="hljs-number">0.1320</span> seconds.
<span class="hljs-comment">#      “Environment variable 'TestPathEnvironmentVariable' does not exist”</span><font></font>
<font></font>
<span class="hljs-comment">#       </span>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">Start</span>  <span class="hljs-type">Set</span>      ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]:                            [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>] Environment variable
<span class="hljs-string">'TestPathEnvironmentVariable'</span> created with value <span class="hljs-string">'TestValue'</span>.<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Set</span>      ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]  <span class="hljs-keyword">in</span> <span class="hljs-number">0.0690</span> seconds.<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Resource</span> ]  [[<span class="hljs-type">Environment</span>]<span class="hljs-type">CreatePathEnvironmentVariable</span>]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Set</span>      ]<font></font>
VERBOSE: [<span class="hljs-type">COMPUTER</span>]: LCM:  [ <span class="hljs-type">End</span>    <span class="hljs-type">Set</span>      ]    <span class="hljs-keyword">in</span>  <span class="hljs-number">2.1900</span> seconds.
<span class="hljs-comment">#  </span><font></font>
<font></font>
<span class="hljs-comment">#  </span>
VERBOSE: Operation <span class="hljs-string">'Invoke CimMethod'</span> complete.<font></font>
VERBOSE: Time taken <span class="hljs-keyword">for</span> configuration job to complete is <span class="hljs-number">2.749</span> seconds
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On peut voir que le moteur a vérifié la présence de la variable, ne l'a pas trouvée et en a créé une nouvelle, selon la configuration spécifiée: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/by/o3/dkbyo3keloynhfzvrbc8cjkfp-c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans la troisième étape ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exécution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), l'agent DSC LCM entre en jeu. </font><font style="vertical-align: inherit;">Il reçoit un fichier mof, le vérifie, le place dans un dossier </font></font><code>$env:systemRoot/system32/configuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et lance un workflow d'application du fichier de configuration:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LCM reçoit, applique le fichier de configuration. </font><font style="vertical-align: inherit;">Le fichier est renommé en attente.mof et placé dans</font></font><code>$env:systemRoot/system32/configuration</code><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si l'application du fichier de configuration échoue, le fichier pending.mof reste et LCM tentera de l'appliquer au cycle suivant.</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si le fichier current.mof est déjà dans le dossier, il est renommé en previous.mof</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si l'application du fichier de configuration se termine avec succès, LCM le renomme en courant.mof</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le fichier current.mof est copié dans le fichier backup.mof</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Graphiquement, le flux de travail peut être représenté comme suit: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/eh/p-/ljehp-7jyylqlyudn9b8vg1wcfi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour gérer différents fichiers de configuration, il existe une applet de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commande Remove-DSCConfigurationDocument</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui vous permet de supprimer des documents spécifiques si cela est nécessaire pour une raison quelconque. </font><font style="vertical-align: inherit;">Cependant, rien ne nous empêche de les supprimer manuellement.</font></font><br>
 <br>
<a name="3"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mode Pull en détail</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mode Pull est plus difficile à déployer et à configurer, mais il simplifie considérablement le processus de gestion des serveurs qui lui sont connectés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le schéma général ressemblera à ceci: le </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ca/sf/ak/casfakkvmnriykgrpve7tl-z-k0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mode Pull nécessite le déploiement d'un serveur Pull. En fait, il s'agit d'un serveur Web classique, qui peut donner aux clients des fichiers mof et des ressources qui peuvent être nécessaires lors de l'application de configurations à partir de fichiers mof. Ce dernier simplifie considérablement le processus de gestion et de configuration des serveurs, car la tâche de fournir les ressources nécessaires incombe au client. Le serveur Pull agit en même temps comme un référentiel \ référentiel de ressources. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pull-server peut fournir l'accès aux ressources et aux fichiers de configuration via deux protocoles:</font></font><br>
<br>
<ol>
<li><b>SMB.</b>        .     DFS-R.  ,      ,          .  SMB     ,                 Kerberos.</li>
<li><b>Http\https.</b>          .   IIS.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'installation du serveur d'extraction peut être effectuée via les ressources régulières proposées par l'équipe de développement DSC. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus de détails peuvent être trouvés ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ou utilisez des solutions axées sur la communauté: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le flux de travail pour les travaux ultérieurs avec le serveur d'extraction est le suivant:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous configurons les clients (LCM) pour fonctionner avec un pull-server.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous téléchargeons des fichiers de ressources sur le serveur pull.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous préparons les fichiers de configuration client (écriture et compilation) et les fichiers avec sommes de contrôle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profitez du résultat.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration des clients (LCM) pour fonctionner avec un serveur pull</font></font></h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour ce faire, utilisez les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paramètres LocalConfigurationManager (v5) suivants</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bloc de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paramètres:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indique l'empreinte digitale du certificat pour protéger les connexions / mots de passe transmis dans la configuration.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - contient le GUID du client. </font><font style="vertical-align: inherit;">Seules les configurations qui contiennent son GUID dans le nom du fichier de configuration seront appliquées au client. </font><font style="vertical-align: inherit;">Le paramètre est laissé pour la compatibilité avec les anciennes versions du serveur pull. </font><font style="vertical-align: inherit;">Il est préférable d'utiliser le paramètre RegistrationKey.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RefreshMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - pour travailler avec des serveurs Pull, spécifiez Pull dans ce paramètre.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bloquer la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">configurationRepositoryWeb:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AllowUnsecureConnection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - autorise \ n'autorise pas la connexion sans authentification.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indique l'empreinte digitale du certificat sur le client, qui sera utilisée dans le processus d'authentification mutuelle avec le serveur.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationNames</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un tableau de noms de configuration qui seront appliqués au client.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RegistrationKey</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un secret généré sur le serveur, qui est utilisé par le client pour s'inscrire sur le serveur.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerURL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - URL du serveur Pull avec des configurations.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ResourceRepositoryWeb:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AllowUnsecureConnection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - autorise \ n'autorise pas la connexion sans authentification.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indique l'empreinte digitale du certificat sur le client, qui sera utilisée dans le processus d'authentification mutuelle avec le serveur.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RegistrationKey</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un secret généré sur le serveur, qui est utilisé par le client pour s'inscrire sur le serveur.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerURL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - URL du serveur Pull avec des ressources.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bloc </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReportServerWeb:</font></font></b><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AllowUnsecureConnection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - autorise \ n'autorise pas la connexion sans authentification.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CertificateID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - indique l'empreinte digitale du certificat sur le client, qui sera utilisée dans le processus d'authentification mutuelle avec le serveur.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RegistrationKey</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un secret généré sur le serveur, qui est utilisé par le client pour s'inscrire sur le serveur.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ServerURL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - URL du serveur Pull avec des rapports.</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Téléchargement de fichiers de ressources sur le serveur Pull </font></font></h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après avoir appliqué les nouveaux paramètres sur LCM, qui lui apprendront à utiliser le serveur Pull, vous pouvez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">télécharger des fichiers de ressources sur le serveur</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les ressources sont téléchargées sur le serveur sous forme de fichiers zip (le dossier contenant la ressource est compressé en zip). </font><font style="vertical-align: inherit;">Règle pour nommer un tel fichier:</font></font><br>
<br>
<pre><code class="powershell hljs">{ModuleName}_{Version}.zip</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'emplacement de fichier par défaut </font></font><code>$env:PROGRAMFILES\WindowsPowerShell\DscService\Modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Lors de l'installation du serveur Pull, ce dossier peut être redéfini. </font><font style="vertical-align: inherit;">En plus du fichier avec le dossier de ressources compressé en zip, vous devez également placer le fichier avec la somme de contrôle de cette ressource compressée au même endroit. </font><font style="vertical-align: inherit;">Par exemple, comme ceci:</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">New-DscChecksum</span> <span class="hljs-literal">-Path</span> .\xPSDesiredStateConfiguration_8.<span class="hljs-number">4.4</span>.<span class="hljs-number">0</span>.zip</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placement des fichiers de configuration client sur le serveur Pull</font></font></h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il est important de noter ici que nous pouvons utiliser deux modes de fonctionnement client dans ce cas (en fait deux ans et demi): le client recevra la configuration du serveur à l'aide de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationID</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ou le client utilisera le nom de configuration - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConfigurationName</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . S'il est nécessaire d'appliquer plusieurs configurations, toutes peuvent être spécifiées dans ConfigurationName, mais vous devrez configurer LCM pour fonctionner avec des configurations partielles.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'utilisation de ConfigurationID, il faut souligner que le fichier de configuration mof qui sera appliqué au client contiendra un GUID (il est contenu dans ConfigurationID). </font><font style="vertical-align: inherit;">Dans le cas de l'utilisation de ConfigurationName, le fichier mof contiendra le nom de configuration, que nous spécifierons dans ConfigurationName. </font><font style="vertical-align: inherit;">Dans les deux cas, en plus du fichier mof, le fichier de contrôle de configuration y sera également placé:</font></font><br>
<br>
<pre><code class="powershell hljs"><span class="hljs-built_in">New-DscChecksum</span> <span class="hljs-literal">-Path</span> <span class="hljs-string">'.\'</span> <span class="hljs-literal">-Force</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En conclusion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons examiné deux façons d'appliquer des modifications au serveur en modes Push et Pull. </font><font style="vertical-align: inherit;">Nous sommes passés en revue les fonctionnalités d'utilisation et avons essayé d'expliquer toutes les nuances qui peuvent survenir lorsque vous travaillez avec ces modes dans DSC. </font><font style="vertical-align: inherit;">Si vous avez encore des questions - discutons-en dans les commentaires. </font><font style="vertical-align: inherit;">Et si vous n'aviez pas assez de visibilité, rendez-vous à notre réunion en ligne le 28 mai: nous analyserons les systèmes de communications unifiées et les installations de communication (configuration du téléchargement des journaux Exchange dans Elastic, Microsoft Endpoint Manager pour gérer iOS, Android et Windows 10) et discutons plus en détail des limites de l'applicabilité Configuration de l'état souhaité de PowerShell. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il vous suffit de vous inscrire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr503660/index.html">Testez des projets sans douleur. Rapport Yandex</a></li>
<li><a href="../fr503662/index.html">NOUVEAU - Téléphone VoIP Snom D335</a></li>
<li><a href="../fr503666/index.html">Traduction de cours de démarrage et d'affaires de l'Université de Stanford. Conférence numéro 1. Comment démarrer une startup</a></li>
<li><a href="../fr503668/index.html">Circle Squared: Visual Evidence</a></li>
<li><a href="../fr503670/index.html">Mac OS ralentit-il? - Catalina vérifie tout code non signé sur Internet au démarrage</a></li>
<li><a href="../fr503676/index.html">Trois projets geek pour la Geek Pride Day</a></li>
<li><a href="../fr503678/index.html">Vuex rompt l'encapsulation</a></li>
<li><a href="../fr503680/index.html">DBA: à la recherche d'écluses volantes</a></li>
<li><a href="../fr503682/index.html">Snom Exchange de A à Z</a></li>
<li><a href="../fr503688/index.html">Joel Spolsky: Qu'est-ce que cela signifie d'être développeur de logiciels (Préface du codeur au développeur)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>