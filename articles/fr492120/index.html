<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ†‘ ğŸ”¹ ğŸ™‹ğŸ¼ Surveillance dans le centre de donnÃ©es: comment nous avons changÃ© l'ancien BMS en un nouveau. Partie 1 â˜¯ï¸ ğŸ“´ ğŸŒ«ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qu'est-ce qu'un BMS
 Le systÃ¨me de surveillance des systÃ¨mes d'ingÃ©nierie dans le centre de donnÃ©es est un Ã©lÃ©ment clÃ© de l'infrastructure qui affecte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Surveillance dans le centre de donnÃ©es: comment nous avons changÃ© l'ancien BMS en un nouveau. Partie 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/linxdatacenter/blog/492120/"><img src="https://habrastorage.org/getpro/habr/post_images/664/c21/53f/664c2153f646d342beb54c99478d0d8d.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qu'un BMS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le systÃ¨me de surveillance des systÃ¨mes d'ingÃ©nierie dans le centre de donnÃ©es est un Ã©lÃ©ment clÃ© de l'infrastructure qui affecte directement un indicateur aussi important pour le centre de donnÃ©es que la vitesse de rÃ©ponse du personnel aux urgences et, par consÃ©quent, la durÃ©e de fonctionnement ininterrompu.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les systÃ¨mes de surveillance BMS (Building Monitoring System) sont proposÃ©s par de nombreux fournisseurs mondiaux d'Ã©quipements de datacenter. </font><font style="vertical-align: inherit;">Au cours des travaux de Linxdatacenter en Russie, nous avons eu l'occasion de nous familiariser avec diffÃ©rents systÃ¨mes et de rencontrer des approches diamÃ©tralement opposÃ©es de fournisseurs pour exploiter ces systÃ¨mes.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vous expliquons comment nous avons complÃ¨tement mis Ã  jour notre systÃ¨me BMS au cours de l'annÃ©e Ã©coulÃ©e et pourquoi.&nbsp;&nbsp;</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La racine du problÃ¨me</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout a commencÃ© il y a 10 ans avec le lancement du centre de donnÃ©es Linxdatacenter Ã  Saint-PÃ©tersbourg. Le systÃ¨me BMS, selon les normes de l'industrie de ces annÃ©es, Ã©tait un serveur physique avec un logiciel installÃ© accessible via un programme client (le soi-disant client Â«Ã©paisÂ»).&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã€ l'Ã©poque, peu d'entreprises offraient de telles solutions. Leurs produits Ã©taient la norme, la seule rÃ©ponse Ã  une demande existante. Et nous devons leur donner leur dÃ»: Ã  l'Ã©poque et aujourd'hui, les leaders du marchÃ© dans leur ensemble font face Ã  leur tÃ¢che de base - la livraison de solutions fonctionnelles pour le fonctionnement des centres de donnÃ©es.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le choix logique pour nous Ã©tait la solution BMS de l'un des plus grands fabricants mondiaux. Le systÃ¨me sÃ©lectionnÃ© Ã  l'Ã©poque rÃ©pondait Ã  toutes les exigences de surveillance d'une installation d'ingÃ©nierie intÃ©grÃ©e, qui est un centre de donnÃ©es.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, au fil du temps, les exigences et les attentes des utilisateurs (c'est-Ã -dire nous, les opÃ©rateurs de centres de donnÃ©es) vis-Ã -vis des solutions informatiques ont changÃ©. Et les grands fournisseurs, comme le montre l'analyse du marchÃ© des solutions proposÃ©es, n'Ã©taient pas prÃªts pour cela. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le marchÃ© de l'informatique d'entreprise a Ã©tÃ© fortement influencÃ© par l'industrie B2C. Les solutions numÃ©riques d'aujourd'hui devraient garantir la commoditÃ© de l'utilisateur final - c'est l'objectif que les dÃ©veloppeurs se sont fixÃ©s. Cela est Ã©vident dans l'amÃ©lioration des interfaces utilisateur (UI) et la qualitÃ© de l'expÃ©rience utilisateur (UX) de nombreuses applications d'entreprise.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une personne s'habitue Ã  se rÃ©conforter dans tout ce qui concerne les outils numÃ©riques dans la vie de tous les jours, et impose les mÃªmes exigences aux outils qu'elle utilise pour les tÃ¢ches professionnelles. Les utilisateurs attendent des applications d'entreprise la mÃªme visibilitÃ©, intuitivitÃ©, simplicitÃ© et transparence qui leur sont offertes dans les services financiers, les taxis ou les achats en ligne. Les professionnels de l'informatique qui mettent en Å“uvre des solutions dans l'environnement de l'entreprise s'efforcent Ã©galement d'obtenir tous les "goodies" modernes: dÃ©ploiement et mise Ã  l'Ã©chelle simples, tolÃ©rance aux pannes et options de personnalisation illimitÃ©es.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les grands fournisseurs internationaux nÃ©gligent souvent ces tendances. </font><font style="vertical-align: inherit;">Sur la base de leurs nombreuses annÃ©es d'autoritÃ© dans l'industrie, les entreprises qui travaillent avec les clients sont souvent catÃ©goriques et rigides. </font><font style="vertical-align: inherit;">L'illusion de leur propre caractÃ¨re indispensable ne leur permet pas de voir comment les jeunes entreprises technologiques apparaissent littÃ©ralement sous leur nez, offrant des solutions alternatives adaptÃ©es Ã  un client spÃ©cifique, et sans surpayer pour la marque.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InconvÃ©nients de l'ancien systÃ¨me BMS&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principal inconvÃ©nient de la solution BMS obsolÃ¨te existante pour nous Ã©tait sa lenteur. L'enquÃªte sur plusieurs Ã©vÃ©nements liÃ©s Ã  la rÃ©action insuffisamment rapide du personnel en service nous a permis de comprendre que parfois des Ã©vÃ©nements Ã©taient affichÃ©s dans le systÃ¨me BMS avec un long retard. Dans le mÃªme temps, le systÃ¨me n'Ã©tait pas surchargÃ© ou dÃ©fectueux, seules les versions de ses composants (par exemple, JAVA) Ã©taient obsolÃ¨tes et ne pouvaient pas fonctionner correctement avec de nouvelles versions de systÃ¨mes d'exploitation sans mises Ã  jour. Il Ã©tait possible de les mettre Ã  jour uniquement avec le systÃ¨me BMS, tandis que le fournisseur n'assurait pas la continuitÃ© automatique de la version, c'est-Ã -dire que pour nous, le processus serait presque aussi laborieux que la transition vers un nouveau systÃ¨me, et la nouvelle solution conserverait certaines des lacunes de l'ancien.&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ajoutons ici quelques "petites choses" plus dÃ©sagrÃ©ables:</font></font><br>
<br>
<ol>
<li>       Â« IP- â€“   Â»;&nbsp;<br>
</li>
<li>       (            BMS);<br>
</li>
<li>  ;&nbsp;<br>
</li>
<li>  Â«Â» ,          ;<br>
</li>
<li>Â«Â»     ,    .           â€“            ;<br>
</li>
<li>Â«Â»  ,  ,         ;<br>
</li>
<li> -      ,  ,      -  ;<br>
</li>
<li>    â€“      -Â«Â»   .   â€“    ;<br>
<br>
    :<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6f0/c64/710/6f0c647101177fb535d396699097d7cc.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/44a/302/656/44a3026565568d4b1fbf1f679ffecd6f.png"></li>
<li>     â€“    ,              ,   ;&nbsp;<br>
</li>
<li>          -  (,      );<br>
</li>
<li>     -   BMS    .&nbsp;<br>
</li>
</ol><br>
<br>
<h2>    BMS</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de ce qui prÃ©cÃ¨de, nos principales exigences sont les suivantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deux machines indÃ©pendantes se rÃ©servant mutuellement avec synchronisation automatique, fonctionnant sur deux plates-formes cloud diffÃ©rentes dans diffÃ©rents centres de donnÃ©es (dans notre cas, les centres de donnÃ©es Linxdatacenter Saint-PÃ©tersbourg et Moscou);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajoutez de nouveaux appareils gratuitement;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise Ã  jour gratuite du logiciel et de ses composants (Ã  l'exception des amÃ©liorations fonctionnelles);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code open source qui nous permet de supporter indÃ©pendamment le systÃ¨me en cas de problÃ¨me du cÃ´tÃ© du dÃ©veloppeur;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La possibilitÃ© de recevoir et d'utiliser des donnÃ©es de BMS, par exemple sur le site Web ou dans votre compte personnel;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AccÃ¨s via un navigateur WEB sans client "Ã©pais";</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser des comptes d'utilisateurs de domaine pour accÃ©der au BMS;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La prÃ©sence d'animation et bien d'autres petits et pas trÃ¨s vÅ“ux qui se sont matÃ©rialisÃ©s dans un Ã©noncÃ© de travail dÃ©taillÃ©.</font></font><br>
</li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DerniÃ¨re paille</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d31/ad0/8f8/d31ad08f84082858ebe1d8ec8a20f207.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ã€ ce moment, lorsque nous avons rÃ©alisÃ© que le centre de donnÃ©es avait dÃ©passÃ© son BMS, la solution la plus Ã©vidente Ã©tait la mise Ã  jour du systÃ¨me existant. "Ils ne changent pas de chevaux au croisement", non?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, les grandes entreprises n'offrent gÃ©nÃ©ralement pas de modification personnalisÃ©e de leurs dÃ©cennies de solutions Â«raffinÃ©esÂ» vendues dans des dizaines de pays. Alors que les jeunes entreprises testent l'idÃ©e ou le prototype d'un futur produit pour les consommateurs potentiels et s'appuient sur les avis des utilisateurs dans le dÃ©veloppement de produits, les sociÃ©tÃ©s continuent de vendre des licences pour un produit autrefois vraiment cool, mais hÃ©las obsolÃ¨te et peu flexible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et nous avons ressenti la diffÃ©rence d'approche sur nous-mÃªmes. Au cours de la correspondance avec le fabricant de l'ancien BMS, il est rapidement devenu clair que la mise Ã  niveau proposÃ©e par le fournisseur du systÃ¨me existant nous amÃ¨nerait en fait Ã  acheter un nouveau systÃ¨me avec un transfert semi-automatique de la base, un coÃ»t Ã©levÃ© et des piÃ¨ges pendant le transfert, que mÃªme le fabricant lui-mÃªme ne pouvait pas prÃ©dire. Bien sÃ»r, dans ce cas, le coÃ»t du support technique de la solution mise Ã  jour a augmentÃ©, et il restait la nÃ©cessitÃ© d'acheter des licences pour l'expansion.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et le pire, c'est que le nouveau systÃ¨me n'a pas pu satisfaire pleinement nos exigences de redondance. Le systÃ¨me BMS mis Ã  jour pourrait Ãªtre implÃ©mentÃ©, comme nous le voulions, sur une plateforme cloud, ce qui nous permettrait d'abandonner le matÃ©riel, mais l'option de rÃ©servation n'Ã©tait pas incluse dans le prix. Pour sauvegarder les donnÃ©es, nous devions acheter un deuxiÃ¨me serveur BMS virtuel et un ensemble supplÃ©mentaire de licences. Au coÃ»t d'une licence d'environ 76 $ et du nombre d'adresses IP de 1 000 unitÃ©s, 76 000 $ de dÃ©penses supplÃ©mentaires s'accumulent uniquement pour la licence de la machine de sauvegarde.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La Â«cerise sur le gÃ¢teauÂ» dans la nouvelle version de BMS Ã©tait la nÃ©cessitÃ© d'acheter des licences supplÃ©mentaires Â«pour tous les appareilsÂ» - mÃªme pour le serveur principal. </font><font style="vertical-align: inherit;">Ici, il est nÃ©cessaire de prÃ©ciser qu'il existe des appareils connectÃ©s au BMS via des passerelles. </font><font style="vertical-align: inherit;">La passerelle a une adresse IP, mais contrÃ´le plusieurs appareils (en moyenne 10). </font><font style="vertical-align: inherit;">Dans l'ancien BMS, cela nÃ©cessitait une licence par adresse IP de passerelle, les statistiques ressemblaient Ã  ceci: Â«Adresses IP / licences 1000, appareils 1200Â». </font><font style="vertical-align: inherit;">Le BMS mis Ã  jour fonctionnait sur un principe diffÃ©rent et les statistiques ressembleraient Ã  Â«adresses IP 1000, appareils / licences 1200Â». </font><font style="vertical-align: inherit;">Autrement dit, le fournisseur de la nouvelle version a changÃ© le principe d'attribution des licences, et nous avons dÃ» acheter environ 200 licences supplÃ©mentaires.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le budget de la Â«mise Ã  jourÂ» en consÃ©quence se composait de quatre points:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le coÃ»t de la version cloud et de ses services de migration;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des licences supplÃ©mentaires pour le package existant pour les appareils connectÃ©s via des passerelles;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coÃ»t de la version cloud de sauvegarde;&nbsp;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ensemble de licences pour la machine de sauvegarde.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le coÃ»t total du projet Ã©tait de plus de 100 000 $! </font><font style="vertical-align: inherit;">Et cela sans oublier la nÃ©cessitÃ© d'acheter des licences pour de nouveaux appareils Ã  l'avenir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consÃ©quence, nous avons rÃ©alisÃ© qu'il serait plus facile pour nous - et peut-Ãªtre moins cher - de commander un systÃ¨me crÃ©Ã© Ã  partir de zÃ©ro, en tenant compte de toutes nos exigences et en prÃ©voyant la possibilitÃ© d'une modernisation Ã  l'avenir. </font><font style="vertical-align: inherit;">Mais ceux qui voulaient dÃ©velopper un systÃ¨me aussi complexe devaient trouver, comparer les propositions, choisir et suivre avec le finaliste le chemin des savoirs traditionnels Ã  la mise en Å“uvre ... Lisez-le trÃ¨s bientÃ´t dans la deuxiÃ¨me partie du matÃ©riel.&nbsp;</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492108/index.html">Comment se rendre Ã  la Silicon Valley: 7 faÃ§ons pour le dÃ©marrage</a></li>
<li><a href="../fr492110/index.html">Utilisation d'un jeton cloud avec prise en charge de la cryptographie russe sur la plate-forme Android</a></li>
<li><a href="../fr492112/index.html">Alexander Plyushchev Ã  propos de la politisation d'Internet, de la numÃ©risation du pouvoir et des robots qui remplaceront les journalistes (mais ce n'est pas exact)</a></li>
<li><a href="../fr492116/index.html">Essayer de faire face aux diffÃ©rences frappantes de mortalitÃ© par coronavirus en Italie et en CorÃ©e du Sud</a></li>
<li><a href="../fr492118/index.html">5 mythes sur UPS, leur rÃ©futation et la rÃ©alitÃ©</a></li>
<li><a href="../fr492122/index.html">Migration de Gitolite vers GitLab avec un script Shell</a></li>
<li><a href="../fr492128/index.html">Interface Tales of Toxic Grandfather "Obtenez un chiffon!" (s1 e4)</a></li>
<li><a href="../fr492130/index.html">MathÃ©matiques floues. Relations et queues de loup</a></li>
<li><a href="../fr492134/index.html">Avantages et inconvÃ©nients de faire des affaires aux Ã‰tats-Unis: impressions aprÃ¨s trois ans de dÃ©veloppement de deux sociÃ©tÃ©s</a></li>
<li><a href="../fr492138/index.html">Pourquoi surestimons-nous (Ã©ventuellement) la lÃ©talitÃ© de COVID-19</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>