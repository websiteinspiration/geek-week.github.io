<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆑 🔹 🙋🏼 Surveillance dans le centre de données: comment nous avons changé l'ancien BMS en un nouveau. Partie 1 ☯️ 📴 🌫️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qu'est-ce qu'un BMS
 Le système de surveillance des systèmes d'ingénierie dans le centre de données est un élément clé de l'infrastructure qui affecte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Surveillance dans le centre de données: comment nous avons changé l'ancien BMS en un nouveau. Partie 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/linxdatacenter/blog/492120/"><img src="https://habrastorage.org/getpro/habr/post_images/664/c21/53f/664c2153f646d342beb54c99478d0d8d.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qu'un BMS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le système de surveillance des systèmes d'ingénierie dans le centre de données est un élément clé de l'infrastructure qui affecte directement un indicateur aussi important pour le centre de données que la vitesse de réponse du personnel aux urgences et, par conséquent, la durée de fonctionnement ininterrompu.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les systèmes de surveillance BMS (Building Monitoring System) sont proposés par de nombreux fournisseurs mondiaux d'équipements de datacenter. </font><font style="vertical-align: inherit;">Au cours des travaux de Linxdatacenter en Russie, nous avons eu l'occasion de nous familiariser avec différents systèmes et de rencontrer des approches diamétralement opposées de fournisseurs pour exploiter ces systèmes.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous vous expliquons comment nous avons complètement mis à jour notre système BMS au cours de l'année écoulée et pourquoi.&nbsp;&nbsp;</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La racine du problème</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout a commencé il y a 10 ans avec le lancement du centre de données Linxdatacenter à Saint-Pétersbourg. Le système BMS, selon les normes de l'industrie de ces années, était un serveur physique avec un logiciel installé accessible via un programme client (le soi-disant client «épais»).&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'époque, peu d'entreprises offraient de telles solutions. Leurs produits étaient la norme, la seule réponse à une demande existante. Et nous devons leur donner leur dû: à l'époque et aujourd'hui, les leaders du marché dans leur ensemble font face à leur tâche de base - la livraison de solutions fonctionnelles pour le fonctionnement des centres de données.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le choix logique pour nous était la solution BMS de l'un des plus grands fabricants mondiaux. Le système sélectionné à l'époque répondait à toutes les exigences de surveillance d'une installation d'ingénierie intégrée, qui est un centre de données.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, au fil du temps, les exigences et les attentes des utilisateurs (c'est-à-dire nous, les opérateurs de centres de données) vis-à-vis des solutions informatiques ont changé. Et les grands fournisseurs, comme le montre l'analyse du marché des solutions proposées, n'étaient pas prêts pour cela. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le marché de l'informatique d'entreprise a été fortement influencé par l'industrie B2C. Les solutions numériques d'aujourd'hui devraient garantir la commodité de l'utilisateur final - c'est l'objectif que les développeurs se sont fixés. Cela est évident dans l'amélioration des interfaces utilisateur (UI) et la qualité de l'expérience utilisateur (UX) de nombreuses applications d'entreprise.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une personne s'habitue à se réconforter dans tout ce qui concerne les outils numériques dans la vie de tous les jours, et impose les mêmes exigences aux outils qu'elle utilise pour les tâches professionnelles. Les utilisateurs attendent des applications d'entreprise la même visibilité, intuitivité, simplicité et transparence qui leur sont offertes dans les services financiers, les taxis ou les achats en ligne. Les professionnels de l'informatique qui mettent en œuvre des solutions dans l'environnement de l'entreprise s'efforcent également d'obtenir tous les "goodies" modernes: déploiement et mise à l'échelle simples, tolérance aux pannes et options de personnalisation illimitées.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les grands fournisseurs internationaux négligent souvent ces tendances. </font><font style="vertical-align: inherit;">Sur la base de leurs nombreuses années d'autorité dans l'industrie, les entreprises qui travaillent avec les clients sont souvent catégoriques et rigides. </font><font style="vertical-align: inherit;">L'illusion de leur propre caractère indispensable ne leur permet pas de voir comment les jeunes entreprises technologiques apparaissent littéralement sous leur nez, offrant des solutions alternatives adaptées à un client spécifique, et sans surpayer pour la marque.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inconvénients de l'ancien système BMS&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le principal inconvénient de la solution BMS obsolète existante pour nous était sa lenteur. L'enquête sur plusieurs événements liés à la réaction insuffisamment rapide du personnel en service nous a permis de comprendre que parfois des événements étaient affichés dans le système BMS avec un long retard. Dans le même temps, le système n'était pas surchargé ou défectueux, seules les versions de ses composants (par exemple, JAVA) étaient obsolètes et ne pouvaient pas fonctionner correctement avec de nouvelles versions de systèmes d'exploitation sans mises à jour. Il était possible de les mettre à jour uniquement avec le système BMS, tandis que le fournisseur n'assurait pas la continuité automatique de la version, c'est-à-dire que pour nous, le processus serait presque aussi laborieux que la transition vers un nouveau système, et la nouvelle solution conserverait certaines des lacunes de l'ancien.&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ajoutons ici quelques "petites choses" plus désagréables:</font></font><br>
<br>
<ol>
<li>       « IP- –   »;&nbsp;<br>
</li>
<li>       (            BMS);<br>
</li>
<li>  ;&nbsp;<br>
</li>
<li>  «» ,          ;<br>
</li>
<li>«»     ,    .           –            ;<br>
</li>
<li>«»  ,  ,         ;<br>
</li>
<li> -      ,  ,      -  ;<br>
</li>
<li>    –      -«»   .   –    ;<br>
<br>
    :<br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6f0/c64/710/6f0c647101177fb535d396699097d7cc.png"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/44a/302/656/44a3026565568d4b1fbf1f679ffecd6f.png"></li>
<li>     –    ,              ,   ;&nbsp;<br>
</li>
<li>          -  (,      );<br>
</li>
<li>     -   BMS    .&nbsp;<br>
</li>
</ol><br>
<br>
<h2>    BMS</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu de ce qui précède, nos principales exigences sont les suivantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deux machines indépendantes se réservant mutuellement avec synchronisation automatique, fonctionnant sur deux plates-formes cloud différentes dans différents centres de données (dans notre cas, les centres de données Linxdatacenter Saint-Pétersbourg et Moscou);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajoutez de nouveaux appareils gratuitement;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour gratuite du logiciel et de ses composants (à l'exception des améliorations fonctionnelles);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code open source qui nous permet de supporter indépendamment le système en cas de problème du côté du développeur;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La possibilité de recevoir et d'utiliser des données de BMS, par exemple sur le site Web ou dans votre compte personnel;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accès via un navigateur WEB sans client "épais";</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser des comptes d'utilisateurs de domaine pour accéder au BMS;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La présence d'animation et bien d'autres petits et pas très vœux qui se sont matérialisés dans un énoncé de travail détaillé.</font></font><br>
</li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dernière paille</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d31/ad0/8f8/d31ad08f84082858ebe1d8ec8a20f207.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À ce moment, lorsque nous avons réalisé que le centre de données avait dépassé son BMS, la solution la plus évidente était la mise à jour du système existant. "Ils ne changent pas de chevaux au croisement", non?&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, les grandes entreprises n'offrent généralement pas de modification personnalisée de leurs décennies de solutions «raffinées» vendues dans des dizaines de pays. Alors que les jeunes entreprises testent l'idée ou le prototype d'un futur produit pour les consommateurs potentiels et s'appuient sur les avis des utilisateurs dans le développement de produits, les sociétés continuent de vendre des licences pour un produit autrefois vraiment cool, mais hélas obsolète et peu flexible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et nous avons ressenti la différence d'approche sur nous-mêmes. Au cours de la correspondance avec le fabricant de l'ancien BMS, il est rapidement devenu clair que la mise à niveau proposée par le fournisseur du système existant nous amènerait en fait à acheter un nouveau système avec un transfert semi-automatique de la base, un coût élevé et des pièges pendant le transfert, que même le fabricant lui-même ne pouvait pas prédire. Bien sûr, dans ce cas, le coût du support technique de la solution mise à jour a augmenté, et il restait la nécessité d'acheter des licences pour l'expansion.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et le pire, c'est que le nouveau système n'a pas pu satisfaire pleinement nos exigences de redondance. Le système BMS mis à jour pourrait être implémenté, comme nous le voulions, sur une plateforme cloud, ce qui nous permettrait d'abandonner le matériel, mais l'option de réservation n'était pas incluse dans le prix. Pour sauvegarder les données, nous devions acheter un deuxième serveur BMS virtuel et un ensemble supplémentaire de licences. Au coût d'une licence d'environ 76 $ et du nombre d'adresses IP de 1 000 unités, 76 000 $ de dépenses supplémentaires s'accumulent uniquement pour la licence de la machine de sauvegarde.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La «cerise sur le gâteau» dans la nouvelle version de BMS était la nécessité d'acheter des licences supplémentaires «pour tous les appareils» - même pour le serveur principal. </font><font style="vertical-align: inherit;">Ici, il est nécessaire de préciser qu'il existe des appareils connectés au BMS via des passerelles. </font><font style="vertical-align: inherit;">La passerelle a une adresse IP, mais contrôle plusieurs appareils (en moyenne 10). </font><font style="vertical-align: inherit;">Dans l'ancien BMS, cela nécessitait une licence par adresse IP de passerelle, les statistiques ressemblaient à ceci: «Adresses IP / licences 1000, appareils 1200». </font><font style="vertical-align: inherit;">Le BMS mis à jour fonctionnait sur un principe différent et les statistiques ressembleraient à «adresses IP 1000, appareils / licences 1200». </font><font style="vertical-align: inherit;">Autrement dit, le fournisseur de la nouvelle version a changé le principe d'attribution des licences, et nous avons dû acheter environ 200 licences supplémentaires.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le budget de la «mise à jour» en conséquence se composait de quatre points:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le coût de la version cloud et de ses services de migration;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des licences supplémentaires pour le package existant pour les appareils connectés via des passerelles;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coût de la version cloud de sauvegarde;&nbsp;&nbsp;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ensemble de licences pour la machine de sauvegarde.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le coût total du projet était de plus de 100 000 $! </font><font style="vertical-align: inherit;">Et cela sans oublier la nécessité d'acheter des licences pour de nouveaux appareils à l'avenir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, nous avons réalisé qu'il serait plus facile pour nous - et peut-être moins cher - de commander un système créé à partir de zéro, en tenant compte de toutes nos exigences et en prévoyant la possibilité d'une modernisation à l'avenir. </font><font style="vertical-align: inherit;">Mais ceux qui voulaient développer un système aussi complexe devaient trouver, comparer les propositions, choisir et suivre avec le finaliste le chemin des savoirs traditionnels à la mise en œuvre ... Lisez-le très bientôt dans la deuxième partie du matériel.&nbsp;</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492108/index.html">Comment se rendre à la Silicon Valley: 7 façons pour le démarrage</a></li>
<li><a href="../fr492110/index.html">Utilisation d'un jeton cloud avec prise en charge de la cryptographie russe sur la plate-forme Android</a></li>
<li><a href="../fr492112/index.html">Alexander Plyushchev à propos de la politisation d'Internet, de la numérisation du pouvoir et des robots qui remplaceront les journalistes (mais ce n'est pas exact)</a></li>
<li><a href="../fr492116/index.html">Essayer de faire face aux différences frappantes de mortalité par coronavirus en Italie et en Corée du Sud</a></li>
<li><a href="../fr492118/index.html">5 mythes sur UPS, leur réfutation et la réalité</a></li>
<li><a href="../fr492122/index.html">Migration de Gitolite vers GitLab avec un script Shell</a></li>
<li><a href="../fr492128/index.html">Interface Tales of Toxic Grandfather "Obtenez un chiffon!" (s1 e4)</a></li>
<li><a href="../fr492130/index.html">Mathématiques floues. Relations et queues de loup</a></li>
<li><a href="../fr492134/index.html">Avantages et inconvénients de faire des affaires aux États-Unis: impressions après trois ans de développement de deux sociétés</a></li>
<li><a href="../fr492138/index.html">Pourquoi surestimons-nous (éventuellement) la létalité de COVID-19</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>