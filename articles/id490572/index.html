<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍒 🦄 🤷 Autopilot buatan rumah pada papan Tinker Single Board Computer (SBC) dan Arduino DUE ◀️ 👨🏿‍🔬 🐛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gagasan membangun autopilot muncul sekitar 2 tahun yang lalu. Saya ingin membuat alat yang sepenuhnya otonom yang dapat bergerak dari titik A ke titik...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Autopilot buatan rumah pada papan Tinker Single Board Computer (SBC) dan Arduino DUE</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490572/"><img src="https://habrastorage.org/getpro/habr/post_images/61d/7fa/23b/61d7fa23bfc1c4a76018dbf13eb0adb6.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gagasan membangun autopilot muncul sekitar 2 tahun yang lalu. </font><font style="vertical-align: inherit;">Saya ingin membuat alat yang sepenuhnya otonom yang dapat bergerak dari titik A ke titik B dengan kemungkinan menghindari tabrakan dan terbang di sekitar rintangan, mampu mengatasi zona kemacetan atau tidak adanya sinyal satelit. </font><font style="vertical-align: inherit;">Saya juga ingin memiliki kontrol yang mudah dan sederhana dengan mouse seperti yang diterapkan dalam permainan (strategi) mengendalikan pergerakan pesawat dengan bantuan poin. </font><font style="vertical-align: inherit;">Saya harus memulai semuanya dari awal, seperti artikel ini, jadi jika ada kesalahan, tulis di komentar. </font><font style="vertical-align: inherit;">Saya akan mulai dalam rangka.</font></font><br>
<br>
<a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perangkat keras</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Awalnya, saya tidak tahu perangkat keras mana yang lebih baik untuk digunakan untuk proyek ini, tetapi pada akhirnya saya sampai pada kesimpulan bahwa pilihan terbaik adalah sekelompok mikrokontroler (MK) + komputer papan tunggal. Di mana MK memecahkan masalah stabilisasi pesawat terbang (LA), pergerakannya pada jalur dan ketinggian tertentu, dan komputer papan tunggal memecahkan masalah navigasi dan pergerakan di sepanjang rute. Karena rencananya adalah untuk menghindari tabrakan, komputer harus cukup kuat untuk memproses informasi dari sensor deteksi hambatan, kompak dan tidak terlalu mahal pada waktu itu TinkerBoard adalah yang paling cocok untuk deskripsi ini, Raspbery kemudian 3B + dan jauh lebih rendah dalam karakteristik. Sebagai MK, saya ingin memiliki pengontrol yang kompatibel dengan Arduino Arduino memiliki basis besar sketsa siap pakai dan karena itu pilihan jatuh pada DUE 84 MHz, 32bit ARM Cortex-M3 karenadia yang paling kuat dan harus mengimbangi keterusterangan tangan saya)).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Awalnya, saya berencana menggunakan MPU 9250 dengan filter Majevik sebagai sensor orientasi, dan hasilnya sangat baik. Keuntungan utama dari opsi ini adalah bahwa semua perhitungan, termasuk kalibrasi sensor (akselerometer, giroskop dan magnetometer), ada di MK. Tapi ada masalah, filter tidak mendapat kompensasi untuk akselerasi linier, yang terus-menerus terjadi selama guncangan atau perubahan yang tajam tentu saja. Ini diungkapkan dalam pembacaan pitch and roll, pada saat akselerasi mereka mulai melayang pergi, dan melewati regulator diferensial (PD) proporsional dan terutama bagian diferensial, masalah yang diciptakan mengambang. Karena itu, saya harus menggunakan sensor dengan filter BNO 055 yang sudah diterapkan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berbeda dengan MPU 9250, BNO memiliki onboard Cortex M0 MK terintegrasi, yang segera menghitung orientasi dalam sudut Euler, quaternine orientasi absolut dan menghitung percepatan linier, meskipun sensor ini juga memiliki beberapa kelemahan. Masalah utama dari sensor ini adalah kalibrasi otomatis, atau lebih tepatnya, yang tidak dapat dimatikan, itu adalah "fit" dari sensor ini dan kalibrasi ini memiliki sifat yang tidak menyenangkan untuk menghilang, kadang-kadang benar-benar tiba-tiba bahkan hanya berada di satu tempat tanpa gerakan. Hal ini terutama tercermin pada yaw yang melekat pada magnetometer pada sensor ini dan harus menunjukkan arah ke kutub utara magnet (tentu saja), tetapi kadang-kadang ini menunjukkan 100 derajat dalam strona, dan kemudian setelah dikalibrasi dapat kembali))). Dalam hal lain, masalah kursus masih dapat diselesaikan dengan menggunakan sinkronisasi dengan GPS. Jika tidak, sensor berfungsi dengan baik,ia selalu menentukan pitch and roll dengan benar, dan akselerasi linear tidak terlalu memengaruhi pekerjaannya, kecuali, tentu saja akselerasi tidak melebihi 2G, karena ambang ini digunakan untuk mengukur vektor gravitasi dan mengkompensasi penyimpangan giroskop.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sisanya dari set besi adalah sebagai berikut: GPS Ublox Neo M8N dengan output USB, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
barometer BMP 280, HSCR 04 sonar untuk menerima data ketersediaan di darat dan kecepatan vertikal yang lebih akurat, EEPROM 24c16 untuk menyimpan data kalibrasi dan pengaturan PID, modul GSM Neoway M509E untuk mengirim pesan tentang koordinat pesawat jika terjadi kecelakaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diagram fungsional ditunjukkan pada Gambar 1: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/7f7/9e3/9df/7f79e39df3579c4508abd884aba32236.png" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 1 - Diagram fungsional Autopilot</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perangkat lunak</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk pengembangan perangkat lunak, saya menggunakan QT bersama dengan IDE QT Creator. dia paling akrab bagi saya, dan juga berkat fungsionalitas lintas platform, saya dapat menjalankan program saya pada PC papan tunggal dengan Debian dan desktop dengan Windows, yang sangat nyaman. Untuk pengembangan perangkat lunak mikrokontroler, Arduino IDE digunakan. Untuk kejelasan, saya akan mencoba menyajikan semua bagian dalam Gambar 2. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6fa/dcb/48d/6fadcb48dd175a45e40ca07bf2870961.png" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 2. - Arsitektur AP (BNO 080 ditambahkan untuk masa depan).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1) Antarmuka kontrol grafis - adalah peta satelit dengan bantuan yang mengendalikan pesawat. Program tampilan gambar satelit itu sendiri bukan milik saya, itu dicuri oleh saya di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (penulisnya juga mencoba melakukan hal serupa).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat mengontrol pesawat menggunakan titik (marker) atau tombol WADS. Untuk mengontrol titik, perlu meletakkan rute penerbangan dengan spidol hijau, mereka ditempatkan dengan mouse (RMB), dan klik memuat rute, atau menggunakan penanda bergerak (merah) instan (LMB) dan kemudian pesawat dari posisi saat ini akan terbang ke titik ini, untuk operasinya perlu mengatur checkbox di kotak centang "Manual" dari klik yang tidak disengaja.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua parameter penanda dimasukkan dalam bidang yang sesuai pada formulir, Anda dapat menghapus penanda dengan mengklik dua kali tombol tengah mouse, sementara mereka akan tetap berada di memori pesawat, Anda harus menggunakan tombol hapus rute untuk menghapusnya dari memori. Setelah mencapai titik, seperti dalam strategi pesawat, itu akan berputar di sekitarnya. Kontrol tombol WADS secara langsung mengontrol roda kemudi menggunakan pengontrol PD. Ketika setiap tombol ditekan, nilai dimasukkan ke input controller, misalnya, ketika S ditekan, pitch 30 dan ketika dilepaskan adalah 0. Ketika W -30 ditekan, dll. WADS dihidupkan menggunakan kotak centang: "manual", "tombol". Mode ini membantu memeriksa fungsionalitas semua kemudi sebelum memulai. Antarmuka grafis berjalan pada laptop, perintah kontrol dari antarmuka grafis menggunakan soket TCP ditransfer ke kernel. Antarmuka kontrol grafis ditunjukkan pada Gambar 3:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/687/2ad/ff3/6872adff36543236e64e5f75af0842cd.jpg" alt="gambar"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 3 - Antarmuka manajemen grafis.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) Inti dari autopilot adalah bagian dari perangkat lunak yang dihitung pada komputer papan tunggal TinkerBoard. </font><font style="vertical-align: inherit;">Kernel bertanggung jawab untuk navigasi dan pergerakan sepanjang rute. </font><font style="vertical-align: inherit;">Untuk melakukan ini, sensor GPS terhubung ke komputer. </font><font style="vertical-align: inherit;">Dengan menggunakannya, Anda bisa mendapatkan posisi pesawat saat ini (lintang dan bujur) dan membandingkan posisi ini dengan apa yang ada di rute penerbangan. </font><font style="vertical-align: inherit;">Sebagai hasil dari operasi ini, azimuth ke target diperoleh, yang dikirim ke mikrokontroler bersama dengan sisa parameter penerbangan. </font><font style="vertical-align: inherit;">Di masa depan, kernel dapat dilengkapi dengan sensor IMU untuk mengimplementasikan JST. </font><font style="vertical-align: inherit;">Misalnya, Anda dapat menggunakan BNO 080 untuk mengintegrasikan, mempercepat dan mendapatkan kecepatan, dan dengan mengintegrasikan kecepatan, dapatkan jarak. </font><font style="vertical-align: inherit;">Jarak yang diterima dari JST perlu diterjemahkan ke dalam sistem koordinat GPS (lintang dan bujur) untuk digunakan dalam menghitung azimuth.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JST tersebut dapat digunakan bersama dengan sensor GPS jika terjadi kehilangan komunikasi sementara dengan satelit sehingga pesawat tidak melewatkan "belokan" ke suatu titik. Pada saat operasi dari GPS, JST akan terus-menerus disesuaikan dengan pembacaannya dan mengisi kesenjangan antara periode pembaruan sensor GPS. Dengan cara yang sama, algoritma visi mesin atau SLAM harus disesuaikan dengan mengubah ketinggian titik dan menciptakan bias dari azimuth yang dihitung. Setelah perhitungan rute selesai, kernel mengirimkan data UART: azimuth, ketinggian, sudut serangan, jenis titik, dan juga apakah rotasi di sekitar titik ini diperlukan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3) Mikrokontroler melakukan perintah inti, tugas utama MK adalah mengikuti kursus yang diberikan pada ketinggian tertentu. Untuk ini, MKU dilengkapi dengan sensor IMU BNO 055, bometer 280 bmp dan sonar. Untuk gerakan di sepanjang jalur, azimuth yang diperoleh dari inti digunakan, dibandingkan dengan laju saat ini dan ketidakcocokan yang dihasilkan ditransmisikan ke pengontrol PD untuk menguap dan menggelinding. Kontrol pitch dilakukan oleh 2 pengontrol PD: yang pertama menentukan ketidakcocokan ketinggian saat ini dan yang telah ditentukan, yang diumpankan ke input dari pengontrol ke-2, sedangkan output dari pengontrol ketinggian dibatasi oleh sudut serangan saat ini untuk mengendalikan setnya. Jika dalam antarmuka grafis, jenis titik dipilih untuk lepas landas atau mendarat, sonar digunakan untuk menentukan ketinggian. Kesaksiannya dikombinasikan dengan data barometer,untuk paling akurat menentukan jarak ke tanah dan kecepatan vertikal. Selain fungsi dasar, MK juga mengumpulkan telemetri tentang pengoperasian sensor IMU, arah dan ketinggian saat ini, mentransfernya ke kernel, di mana data ini dilengkapi oleh data dari GPS dan masuk ke antarmuka grafis.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kesimpulan </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat ini, autopilot masih dalam tahap uji terbang dan belum sepenuhnya dikonfigurasi. </font><font style="vertical-align: inherit;">Namun, saya hanya menghabiskan dua awal dan belum mengambil koefisien untuk regulator. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, regulator PD tampaknya tidak stabil untuk saya dan saya ingin menggantinya dengan sesuatu yang lebih dapat diandalkan, terutama karena mereka sudah usang. </font><font style="vertical-align: inherit;">Juga diperlukan untuk mengganti perhitungan dengan sudut Euler dengan perhitungan dalam angka empat, karena </font><font style="vertical-align: inherit;">yang terakhir berperilaku lebih stabil ketika memutar pesawat pada sudut lebih dari 120 derajat dan terbang saat angin.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Foto avionik yang lebih detail</font></font></b>
                        <div class="spoiler_text"> <br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d4d/ff2/ca1/d4dff2ca14a27c848142db0092ba0c9b.jpg" alt="gambar"><br>
<br>
</div>
                    </div><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tautan ke kode sumber racun (dengan perpustakaan) </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github di sini hanya sumber tetapi lebih baru</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id490558/index.html">Penginjil vs. Manusia Serigala</a></li>
<li><a href="../id490560/index.html">Hackathon dari awal dalam dua minggu</a></li>
<li><a href="../id490566/index.html">Lingkungan penyebaran perangkat lunak</a></li>
<li><a href="../id490568/index.html">Tembakan Plastik: Amunisi Atypical</a></li>
<li><a href="../id490570/index.html">Go: Haruskah saya menggunakan pointer daripada salinan struktur saya?</a></li>
<li><a href="../id490574/index.html">Apa kesamaan rekursi, halaman arahan, dan pemasaran konten: kata pendiri lembaga Embacy</a></li>
<li><a href="../id490576/index.html">Mandi ultrasonik. Bagian 1</a></li>
<li><a href="../id490578/index.html">Intisari materi menarik untuk pengembang seluler # 335 (24 Februari - 1 Maret)</a></li>
<li><a href="../id490584/index.html">Infineon telah menerapkan sertifikat penandatanganan silang dalam chip kriptografiknya</a></li>
<li><a href="../id490586/index.html">Apa itu Spring Framework? Dari Injeksi Ketergantungan ke Web MVC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>