<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîû ‚õèÔ∏è üë®‚Äçüç≥ Terraform, Mono-Repositories und Compliance als Code ü§≤üèΩ ‚úåüèæ üë©‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo alle zusammen. OTUS er√∂ffnete die Rekrutierung f√ºr eine neue Gruppe im Kurs ‚ÄûInfrastrukturplattform basierend auf Kubernetes‚Äú . In diesem Zusamm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Terraform, Mono-Repositories und Compliance als Code</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/496162/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo alle zusammen. </font><font style="vertical-align: inherit;">OTUS er√∂ffnete die Rekrutierung f√ºr eine neue Gruppe im Kurs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄûInfrastrukturplattform basierend auf Kubernetes‚Äú</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . In diesem Zusammenhang haben wir eine √úbersetzung von interessantem Material zu diesem Thema vorbereitet.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/_-/a_/zq/_-a_zqk4jh1yeiuysg6pmfprejm.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√∂glicherweise geh√∂ren Sie zu denjenigen, die terraform for Infrastructure als Code verwenden, und Sie fragen sich, wie Sie es produktiver und sicherer verwenden k√∂nnen. Im Allgemeinen hat dies in letzter Zeit viele gest√∂rt. Wir alle schreiben Konfiguration und Code mit verschiedenen Tools und Sprachen und verbringen viel Zeit damit, sie lesbarer, erweiterbarer und skalierbarer zu machen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/v9/dq/ctv9dqpci5uhnejvqacfdlzve5q.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vielleicht liegt das Problem bei uns selbst?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Geschriebener Code sollte Wert schaffen oder ein Problem l√∂sen sowie f√ºr die Deduplizierung wiederverwendbar sein. Typischerweise wird diese Art von Diskussion endet mit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄûLassen Sie </font><font style="vertical-align: inherit;">uns die </font><font style="vertical-align: inherit;">Verwendung Module</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><i><font style="vertical-align: inherit;">‚Äú</font></i><font style="vertical-align: inherit;"> Wir alle verwenden Terraform-Module, oder? Ich k√∂nnte viele Geschichten mit Problemen aufgrund √ºberm√§√üiger Modularit√§t schreiben, aber dies ist eine v√∂llig andere Geschichte, und ich werde es nicht tun.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/up/tu/x2/uptux2lqssssnc_yyadvetw4sa0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nein, werde ich nicht. Bestehen Sie nicht darauf, nein ... Okay, vielleicht sp√§ter.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es ist allgemein bekannt, Code zu kennzeichnen, wenn Module zum Sperren des Root-Moduls verwendet werden, um dessen Funktion auch beim √Ñndern des Modulcodes zu gew√§hrleisten. Dieser Ansatz sollte zu einem Teamprinzip werden, bei dem die entsprechenden Module gekennzeichnet und entsprechend verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... aber was ist mit Abh√§ngigkeiten? Was ist, wenn ich </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">120</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Module in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">120</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verschiedenen Repositorys habe und das √Ñndern eines Moduls 20 andere Module betrifft </font><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Bedeutet dies, dass wir </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20 + 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pull-Anfragen ausf√ºhren m√ºssen? Wenn die Mindestanzahl von Gutachtern 2 betr√§gt, bedeutet dies </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21 x 2 = 44</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rezension. Ernsthaft! Wir l√§hmen den Befehl einfach, indem wir ‚Äûein Modul √§ndern‚Äú, und jeder beginnt, Meme oder Gifs des Herrn der Ringe zu senden, und der Rest des Tages geht verloren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/97/hp/mh97hpwsk28i70xcrk_g-jkie-u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine PR, um alle zu benachrichtigen, eine PR, um alle zusammenzubringen, zu fesseln und in die Dunkelheit zu st√ºrzen.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Lohnt es sich zu arbeiten? Sollten wir die Anzahl der Gutachter reduzieren? Oder machen Sie vielleicht eine Ausnahme f√ºr die Module und ben√∂tigen Sie keine PR, wenn die √Ñnderung gro√üe Auswirkungen hat. "Ja wirklich?" M√∂chtest du blind in einem tiefen dunklen Wald gehen? Oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sie alle zusammenbringen, langweilen und in die Dunkelheit eintauchen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nein, √§ndern Sie nicht die Reihenfolge der √úberpr√ºfung. Wenn Sie der Meinung sind, dass die Arbeit mit PR richtig ist, bleiben Sie dabei. Wenn Sie intelligente Pipelines haben oder auf Master dr√§ngen, bleiben Sie bei diesem Ansatz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall ist das Problem nicht </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Wie arbeiten Sie?"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Sondern </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Wie ist die Struktur Ihrer Git-Repositorys?"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q9/qd/1m/q9qd1mffdrpnnfs2ywarhzzojwk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies √§hnelt dem, was ich f√ºhlte, als ich den folgenden Vorschlag zum ersten Mal anwendete. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kehren wir zu den Grundlagen zur√ºck. </font><font style="vertical-align: inherit;">Was sind die allgemeinen Anforderungen an ein Repository mit Terraform-Modulen?</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es muss markiert sein, damit keine wesentlichen √Ñnderungen vorgenommen werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede √Ñnderung sollte getestet werden k√∂nnen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ñnderungen m√ºssen einer gegenseitigen √úberpr√ºfung unterzogen werden.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann schlage ich Folgendes vor: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie KEINE </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikro-Repositorys f√ºr Terraform-Module. </font><font style="vertical-align: inherit;">Verwenden Sie ein Mono-Repository</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen das gesamte Repository mit Tags versehen, wenn eine √Ñnderung / Anforderung vorliegt</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede √Ñnderung, PR oder Push kann getestet werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede √Ñnderung kann durch die √úberpr√ºfung gehen.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ff/si/dm/ffsidmva0173goa0qakuisrr5o4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe Kraft!</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ok, aber wie wird dieses Repository aufgebaut sein? In den letzten vier Jahren hatte ich viele Fehler im Zusammenhang damit und bin zu dem Schluss gekommen, dass ein separates Verzeichnis f√ºr das Modul die beste L√∂sung w√§re. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/0j/0g/rs0j0gfsrkk45cfmo0j8oemoe-4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel f√ºr eine Verzeichnisstruktur f√ºr ein Mono-Repository. Siehe die √Ñnderung tags_override?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ein Modulwechsel, der 20 andere Module betrifft, ist also nur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 PR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! Selbst wenn Sie dieser PR 5 Reviewer hinzuf√ºgen, ist die Review im Vergleich zu Micro-Repositories sehr schnell. Wenn Sie Github verwenden, ist dies sogar noch besser! Sie k√∂nnen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CODEOWNERS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºr Module verwenden, die Betreuer / Eigent√ºmer haben. </font><b><font style="vertical-align: inherit;">Alle</font></b><font style="vertical-align: inherit;"> √Ñnderungen an diesen Modulen M√úSSEN von diesem Eigent√ºmer genehmigt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gro√üartig, aber wie benutzt man ein solches Modul, das sich im Mono-Repository-Verzeichnis befindet? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einfach:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">module</span> <span class="hljs-string">"from_mono_repo"</span> {<font></font>
 source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;repo&gt;.git//&lt;my_module_dir&gt;"</span><font></font>
 ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_mono_repo_with_tags"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://..../&lt;org&gt;/&lt;repo&gt;.git//&lt;mod_dir&gt;?ref=1.2.4"</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_micro_repo"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;mod_repo&gt;.git"</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_micro_repo_with_tags"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;mod_repo&gt;.git?ref=1.2.4"</span><font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was sind die Nachteile dieser Art von Struktur? </font><font style="vertical-align: inherit;">Wenn Sie versuchen, "jedes Modul" mit PR / change zu testen, erhalten Sie 1,5 Stunden CI-Pipelines. </font><font style="vertical-align: inherit;">Sie m√ºssen die ge√§nderten Module in PR finden. </font><font style="vertical-align: inherit;">So mach ich es:</font></font><br>
<br>
<pre><code class="java hljs">changed_modules=$(git diff --name-only $(git rev-parse origin/master) HEAD | cut -d <span class="hljs-string">"/"</span> -f1 | grep ^aws- | uniq)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt noch einen weiteren Nachteil: Wenn Sie "terraform init" ausf√ºhren, wird das gesamte Repository in das Verzeichnis .terraform geladen. Ich hatte jedoch nie ein Problem damit, da ich meine Pipes in skalierbaren AWS CodeBuild-Containern ausf√ºhre. Wenn Sie Jenkins und persistente Jenkins-Slaves verwenden, liegt m√∂glicherweise dieses Problem vor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/fd/jz/cmfdjzpaet7z2bwg5wjvclj2sm4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bring uns nicht zum Weinen.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Mit einem Mono-Repository haben Sie immer noch alle Vorteile von Mikro-Repositorys, aber als Bonus reduzieren Sie die Kosten f√ºr die Wartung Ihrer Module. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ehrlich gesagt sollte nach der Arbeit in diesem Modus der Vorschlag, Mikro-Repositories f√ºr Terraform-Module zu verwenden, als Straftat angesehen werden.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gro√üartig, was ist mit Unit-Tests? Ben√∂tigen Sie das wirklich? ... Was genau meinen Sie im Allgemeinen mit Unit-Tests? √úberpr√ºfen Sie wirklich, ob die AWS-Ressource korrekt erstellt wurde? Wessen Verantwortung ist dies: Terraform oder eine API, die die Ressourcenerstellung √ºbernimmt? Vielleicht sollten wir uns mehr auf </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">negative Tests und die Idempotenz des Codes konzentrieren</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Idempotenz des Codes zu √ºberpr√ºfen, bietet terraform einen hervorragenden Parameter namens </font></font><code>-detailed-exitcode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Renn einfach:</font></font><br>
<br>
<pre><code class="java hljs">&gt; terraform plan -detailed-exitcode</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach laufen </font></font><code>terraform apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und fertig. Zumindest werden Sie sicher sein, dass Ihr Code idempotent ist und keine neuen Ressourcen aufgrund einer zuf√§lligen Zeichenfolge oder etwas anderem erstellt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist mit negativen Tests? Was sind negative Tests im Allgemeinen? In der Tat unterscheidet sich dies nicht sehr von Unit-Tests, aber Sie achten auf negative Situationen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beispielsweise </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">darf niemand einen unverschl√ºsselten und √∂ffentlichen S3-Bucket erstellen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anstatt zu √ºberpr√ºfen, ob tats√§chlich ein S3-Bucket erstellt wird, √ºberpr√ºfen Sie anhand einer Reihe von Richtlinien, ob Ihr Code eine Ressource erstellt. Wie kann man das machen? Terraform Enterprise bietet hierf√ºr ein gro√üartiges Tool, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sentinel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... aber es gibt auch Open Source Alternativen. Derzeit gibt es viele Tools zur statischen Analyse von HCL-Code. Mit diesen Tools, die auf g√§ngigen Best Practices basieren, k√∂nnen Sie keine unerw√ºnschten Aktionen ausf√ºhren. Was ist jedoch, wenn Sie nicht den erforderlichen Test haben? Oder, noch schlimmer, wenn Ihre Situation etwas anders ist? Sie m√∂chten beispielsweise zulassen, dass einige S3-Buckets unter bestimmten Bedingungen ver√∂ffentlicht werden. Dies ist in der Tat ein Sicherheitsfehler f√ºr diese Tools. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier erscheint die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform-Konformit√§t</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mit diesem Tool k√∂nnen Sie nicht nur Ihre eigenen Tests schreiben, in denen Sie bestimmen k√∂nnen, WAS Sie als Unternehmensrichtlinie w√ºnschen, sondern auch Sicherheit und Entwicklung voneinander trennen, indem Sie die Sicherheit nach links verschieben. </font><font style="vertical-align: inherit;">Klingt ziemlich kontrovers, oder? </font><font style="vertical-align: inherit;">Nein. </font><font style="vertical-align: inherit;">W√§hrend? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2g/sc/i1/2gsci1q3cc5xgjy2-iazueeaere.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform-Compliance-Logo Bei</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Terraform-Compliance wird zun√§chst Behavior Driven Development (BDD) verwendet.</font></font><br>
<br>
<pre><code class="java hljs">Feature: Ensure that we have encryption everywhere.<font></font>
<font></font>
    Scenario: Reject <span class="hljs-keyword">if</span> an S3 bucket is not encrypted<font></font>
        Given I have aws_s3_bucket defined<font></font>
        Then it must contain server_side_encryption_configuration</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úberpr√ºfen Sie, ob die Verschl√ºsselung aktiviert ist.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn dies f√ºr Sie nicht ausreicht, k√∂nnen Sie detaillierter schreiben:</font></font><br>
<br>
<pre><code class="java hljs">Feature: Ensure that we have encryption everywhere.<font></font>
<font></font>
    Scenario: Reject <span class="hljs-keyword">if</span> an S3 bucket is not encrypted with KMS<font></font>
        Given I have aws_s3_bucket defined<font></font>
        Then it must contain server_side_encryption_configuration<font></font>
        And it must contain rule<font></font>
        And it must contain apply_server_side_encryption_by_default<font></font>
        And it must contain sse_algorithm<font></font>
        And its value must match the <span class="hljs-string">"aws:kms"</span> regex</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir gehen tiefer und √ºberpr√ºfen, ob KMS f√ºr die Verschl√ºsselung verwendet wird.</font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der Terraform-Code f√ºr diesen Test:</font></font><br>
<br>
<pre><code class="java hljs">resource <span class="hljs-string">"aws_kms_key"</span> <span class="hljs-string">"mykey"</span> {<font></font>
 description             = <span class="hljs-string">"This key is used to encrypt bucket objects"</span>
 deletion_window_in_days = <span class="hljs-number">10</span><font></font>
}<font></font>
<font></font>
resource <span class="hljs-string">"aws_s3_bucket"</span> <span class="hljs-string">"mybucket"</span> {<font></font>
 bucket = <span class="hljs-string">"mybucket"</span><font></font>
<font></font>
 server_side_encryption_configuration {<font></font>
   rule {<font></font>
     apply_server_side_encryption_by_default {<font></font>
       kms_master_key_id = <span class="hljs-string">"${aws_kms_key.mykey.arn}"</span>
       sse_algorithm     = <span class="hljs-string">"aws:kms"</span><font></font>
     }<font></font>
   }<font></font>
 }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Somit werden die Tests von ALLES in Ihrer Organisation verstanden. Hier k√∂nnen Sie das Schreiben dieser Tests an einen Sicherheitsdienst oder an Entwickler mit ausreichenden Sicherheitskenntnissen delegieren. Mit diesem Tool k√∂nnen Sie auch BDD-Dateien in einem anderen Repository speichern. Dies hilft dabei, die Verantwortung zu differenzieren, wenn √Ñnderungen am Code und √Ñnderungen an den Sicherheitsrichtlinien, die Ihrem Code zugeordnet sind, zwei verschiedene Einheiten sind. Dies k√∂nnen verschiedene Teams mit unterschiedlichen Lebenszyklen sein. Erstaunlich, oder? Zumindest f√ºr mich war es das. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere Informationen zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform-Konformit√§t finden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sie in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieser Pr√§sentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben viele Probleme mit </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">der Einhaltung</font></a><font style="vertical-align: inherit;"> von </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Terraforms</font></a><font style="vertical-align: inherit;"> gel√∂st</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies gilt insbesondere dann, wenn Sicherheitsdienste von den Entwicklungsteams weit entfernt sind und m√∂glicherweise nicht verstehen, was die Entwickler tun. Sie raten bereits, was in solchen Organisationen passiert. Normalerweise beginnt der Sicherheitsdienst, alles zu blockieren, was f√ºr sie verd√§chtig ist, und baut ein Sicherheitssystem auf, das auf der Sicherheit des Perimeters basiert. Oh Gott ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In vielen Situationen hat die Verwendung von </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform-Compliance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºr Teams, die die Infrastruktur entwerfen (oder / und begleiten), dazu beigetragen, dass diese beiden unterschiedlichen Teams am selben Tisch sitzen. Wenn Ihr Sicherheitsteam anf√§ngt, etwas mit sofortigem Feedback von allen Entwicklungspipelines zu entwickeln, bekommt es normalerweise die Motivation, immer mehr zu tun. Normalerweise ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir Terraform verwenden, strukturieren wir Git-Repositorys daher wie folgt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/d_/ln/vld_ln5d9trbudgjtb2wft-32vk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nat√ºrlich ist dies ziemlich arrogant. </font><font style="vertical-align: inherit;">Aber ich hatte Gl√ºck (oder nicht Gl√ºck?), In mehreren Organisationen mit einer detaillierteren Struktur zu arbeiten. </font><font style="vertical-align: inherit;">Leider endete das alles nicht sehr gut. </font><font style="vertical-align: inherit;">Das Happy End sollte in Nummer 3 versteckt sein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie mich wissen, wenn Sie Erfolgsgeschichten mit Mikro-Repositories haben, ich bin wirklich interessiert!</font></font><br>
<br>
<hr><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir laden Sie zu einer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kostenlosen Lektion ein,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wir die Komponenten einer zuk√ºnftigen Infrastrukturplattform betrachten und sehen, wie unsere Anwendung korrekt bereitgestellt wird</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de496148/index.html">Strukturelle Entwurfsmuster in ES6 + am Beispiel des Game of Thrones</a></li>
<li><a href="../de496152/index.html">Netzwerkautomatisierung. Fall des Lebens</a></li>
<li><a href="../de496154/index.html">Customer Service Automation: Eine End-to-End-L√∂sung von DeepPavlov</a></li>
<li><a href="../de496156/index.html">Wie Verkehrsanalysesysteme Hacker-Taktiken erkennen von MITRE ATT & CK, Teil 3</a></li>
<li><a href="../de496160/index.html">Wir untersuchen die Mediastreamer2 VoIP-Engine. Teil 5</a></li>
<li><a href="../de496164/index.html">W√§hrend der Krise habe ich meinen Job verloren und jetzt habe ich Angst, intelligenten Code zu schreiben, um die neuesten Jobs nicht abzuschrecken</a></li>
<li><a href="../de496166/index.html">Doctrine ResultSetMapping mit Beispielen</a></li>
<li><a href="../de496170/index.html">Wir sind zum Scheitern verurteilt # 1 // Udalenka in der Krise und im Tod der Originalit√§t</a></li>
<li><a href="../de496174/index.html">Die gestiegene Nachfrage nach Analysen, Produktteams, Amazon, Israel, Singapur, Remote-Arbeit usw. wurde viel diskutiert.</a></li>
<li><a href="../de496176/index.html">Gro√üe virtuelle Konferenz: Erfahrungen aus der Praxis beim Schutz von Daten vor modernen digitalen Unternehmen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>