<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèæ‚Äçüè≠ üôèüèæ üè° Localizador de servicios - Disipando mitos üë¶üèø ü•ö ü•É</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Es sorprendente c√≥mo se demoniza una pr√°ctica que demuestra un buen rendimiento y usabilidad para una plataforma en un campo de seguidores de otra pla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Localizador de servicios - Disipando mitos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498194/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/q0/yb/tf/q0ybtf5xhq0ygzxuevhduuup9k0.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es sorprendente c√≥mo se demoniza una pr√°ctica que demuestra un buen rendimiento y usabilidad para una plataforma en un campo de seguidores de otra plataforma. </font><font style="vertical-align: inherit;">Este destino se siente completamente por el patr√≥n de Service Locator, que es muy popular en .Net y tiene una mala reputaci√≥n en iOS.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En algunos art√≠culos, ServiceLocator se descuida, llam√°ndolo "bicicleta". </font><font style="vertical-align: inherit;">Otros argumentan que es antipatr√≥n. </font><font style="vertical-align: inherit;">Hay quienes intentan mantener la neutralidad describiendo los lados positivo y negativo del localizador. </font><font style="vertical-align: inherit;">En gran medida, el propio Habrahabr contribuye a estas persecuciones, que contienen varios art√≠culos similares con referencias cruzadas. </font><font style="vertical-align: inherit;">Cada nuevo desarrollador que se encuentra con la implementaci√≥n de Latitude se infecta casi inmediatamente con negligencia; bueno, muchos desarrolladores no pueden criticar lo mismo sin razones objetivas.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culos</font></font></b>
                        <div class="spoiler_text"><ul>
<li>2010: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">https://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern</a>/</li>
<li>2015 :<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> https://habr.com/ru/company/rambler-co/blog/258325/</a></li>
<li>2015: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://habr.com/ru/post/270005/</a></li>
<li>2016: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://habr.com/ru/company/jugru/blog/300886/</a></li>
<li>2017: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://habr.com/ru/company/badoo/blog/344506/</a></li>
<li>2018: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://habr.com/ru/company/redmadrobot/blog/352088</a></li>
</ul><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øEs realmente? En palabras de un personaje famoso, ‚Äú¬øNo te gustan los gatos? ¬°S√≠, simplemente no los tienes! " De hecho, ¬øhas intentado comer carne sin sal? ¬øY crudo crudo? No tiene que hacer un esfuerzo para descubrir qu√© comer carne de cerdo es malo, especialmente el viernes por la noche. Entonces, con el patr√≥n Localizador de servicios, cuanto mayor es la prevalencia de la informaci√≥n en bruto, mayor es el prejuicio contra ella.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c-/gf/0d/c-gf0dpfbeujk8--liho9lp_wwm.jpeg" align="left" width="300"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una de las mentes m√°s grandes de la antig√ºedad, Titus Lucretius Car estaba convencido de que el sol gira alrededor de la tierra a pesar del hecho de que en las partes restantes de su libro "Sobre la naturaleza de las cosas", relacionado con el siglo I a. C. Se han hecho muchas predicciones cient√≠ficas precisas, desde la fuerza de la gravedad hasta la f√≠sica nuclear. Sin cuestionar el poder de la autoridad, mostramos que algunos prejuicios se nivelan f√°cilmente usando una palanca de la longitud correcta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, recuerde qu√© es un localizador de servicios y para qu√© se puede utilizar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un servicio es un objeto aut√≥nomo que encapsula la l√≥gica empresarial dentro de s√≠ mismo y puede tener enlaces a otros objetos. De hecho, una instancia de cualquier clase puede actuar como un servicio. Muy a menudo, en lugar del concepto de servicio, se utiliza el concepto de "gerente". Sin embargo, una situaci√≥n com√∫n es cuando una clase est√°tica act√∫a como un administrador, que manipula los datos del repositorio. La esencia del servicio es que es una instancia de la clase, con todas las consecuencias resultantes. Esto significa que no puede existir en el vac√≠o: debe tener un soporte al que est√© conectado durante toda la vida √∫til de la aplicaci√≥n. Tal operador es un localizador de servicios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El usuario (aplicaci√≥n o desarrollador) solicita un servicio del tipo especificado del localizador de servicios y recibe una instancia lista para usar. Muy similar a una f√°brica abstracta, ¬øverdad? La diferencia es que cada vez que solicita una instancia del tipo especificado del localizador de servicios, recibir√° la misma instancia una y otra vez, que almacena los datos que ya se han utilizado. Parece que el servicio se comporta como un singleton t√≠pico, pero esto no es as√≠. Puede crear tantas instancias del servicio como desee y utilizarlas de forma independiente a su discreci√≥n. Al mismo tiempo, cada uno de ellos encapsular√° los datos que publique all√≠ a lo largo de su vida.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e0/yp/wf/e0ypwfrqeyyykocycqh6lz8gtjy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© podr√≠a ser esto necesario? El ejemplo m√°s obvio y querido es el perfil del usuario. Si no utiliza ning√∫n almacenamiento en forma de UserSettings o CoreData, durante la vigencia de la aplicaci√≥n deber√° mantener el enlace a la instancia de la clase UserProfile en alg√∫n lugar para usarlo en varias pantallas de la aplicaci√≥n. Adem√°s, si dicha instancia no es un singleton, deber√° transferirse de una forma a otra. La dificultad inevitablemente surgir√° cuando en alg√∫n ciclo de desarrollo de la aplicaci√≥n tenga que crear un usuario temporal o un usuario independiente. Sington se convierte inmediatamente en un cuello de botella. Y las instancias independientes comienzan a sobrecargar la l√≥gica de la aplicaci√≥n, cuya complejidad aumenta exponencialmente a medida que se agregan m√°s y m√°s controladores interesados ‚Äã‚Äãen la instancia.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hk/pm/yf/hkpmyf9gnih2yltehozvkdqdbew.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El localizador de servicios resuelve este problema con elegancia: si tiene una clase abstracta de UserProfile y las clases espec√≠ficas DefaultUserPrifile y TemporatyUserProfile heredan de ella (con una implementaci√≥n absolutamente vac√≠a, es decir, pr√°cticamente id√©ntica), acceder al localizador de servicios le devolver√° dos objetos independientes id√©nticos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra aplicaci√≥n del localizador es la transferencia de instancias de datos a trav√©s de una cadena de controladores: en el primer controlador, crea (recibe) un objeto y lo modifica, y en el √∫ltimo: use los datos que ingres√≥ en el primer objeto. Si el n√∫mero de controladores es bastante grande y est√°n ubicados en la pila, entonces ser√° bastante dif√≠cil usar un delegado para estos fines. De manera similar, a menudo existe la necesidad en la ra√≠z de la pila de mostrar informaci√≥n que cambi√≥ en su parte superior inmediatamente despu√©s de minimizar la pila (recordamos que a la pila le gusta eliminar todas las instancias creadas en su copia). Sin embargo, si en la parte superior de la pila recibe un servicio y lo modifica, y luego inicia el plegado de la pila, cuando el controlador ra√≠z est√© disponible para el usuario, los datos modificados se guardar√°n y estar√°n disponibles para su visualizaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En t√©rminos generales, si usa el patr√≥n "Coordinador", como se describe en la mayor√≠a de los tutoriales (por ejemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), debe colocar su instancia de la clase en AppDelegate o pasar un enlace al coordinador a todos los ViewControllers que lo usar√© ¬øNecesario? ¬øY por qu√©, en realidad?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/e0/yp/wf/e0ypwfrqeyyykocycqh6lz8gtjy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Personalmente, prefiero que AppDelegate brille limpiamente. </font><font style="vertical-align: inherit;">Y para heredar de ICoordinatable y establecer el campo coordinador, no solo pasa tiempo (que, como sabemos, es equivalente al dinero), sino que tambi√©n priva la posibilidad de programaci√≥n declarativa humana a trav√©s de guiones gr√°ficos. </font><font style="vertical-align: inherit;">No, este no es nuestro m√©todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crear un coordinador como un servicio hace que las desventajas de las ventajas sean graciosas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No necesita preocuparse por mantener la integridad del coordinador;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el coordinador est√° disponible en toda la aplicaci√≥n, incluso en aquellos controladores que no se heredan de ICoordinatable;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Usted inicia un coordinador solo cuando lo necesita.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede usar el coordinador junto con el gui√≥n gr√°fico en cualquier orden (conveniente para usted).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El uso de un coordinador con un gui√≥n gr√°fico le permite crear mecanismos de navegaci√≥n no obvios pero efectivos.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el coordinador es la mitad del patr√≥n "Navegador" (el mecanismo para moverse por la aplicaci√≥n a trav√©s de una ruta calculada usando un enrutador). </font><font style="vertical-align: inherit;">Con su implementaci√≥n, la complejidad aumenta en un orden de magnitud. </font><font style="vertical-align: inherit;">Caracter√≠sticas del navegador junto con el localizador de servicios: este es un tema amplio aparte. </font><font style="vertical-align: inherit;">Volvamos a nuestro localizador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las razones objetivas que conducen a la raz√≥n por la cual el Localizador de servicios es malo incluyen la complejidad de su mantenimiento para un servicio en particular y la incapacidad de controlar el estado de la memoria del localizador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mecanismo tradicional para crear un servicio es este c√≥digo:</font></font><br>
<br>
<pre><code class="swift hljs">...
 <span class="hljs-type">ServiceLocator</span>.shared.addService(<span class="hljs-type">CurrentUserProvider</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">CurrentUserProviding</span>)<font></font>
...<font></font>
<span class="hljs-keyword">let</span> userProvider: <span class="hljs-type">UserProviding?</span> =  <span class="hljs-type">ServiceLocator</span>.shared.getService()
<span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> provider =  userProvider <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
<span class="hljs-keyword">self</span>.user = provider.currentUser()
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o as√≠:</font></font><br>
<br>
<pre><code class="swift hljs">&nbsp;<span class="hljs-keyword">if</span> let_:<span class="hljs-type">ProfileService</span> = <span class="hljs-type">ServiceLocator</span>.service() {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.addService(<span class="hljs-type">ProfileService</span>())<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp;<span class="hljs-keyword">let</span> service:<span class="hljs-type">ProfileService</span> = <span class="hljs-type">ServiceLocator</span>.service()!<font></font>
&nbsp; service.update(name: <span class="hljs-string">"MyName"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øEs terrible? </font><font style="vertical-align: inherit;">Primero debe registrar el servicio y luego extraerlo para poder usarlo. </font><font style="vertical-align: inherit;">En el primer caso, se garantiza que existir√° cuando se solicite. </font><font style="vertical-align: inherit;">Pero el segundo no crea el servicio antes de que sea necesario. </font><font style="vertical-align: inherit;">Si necesita retirar el servicio en muchos lugares, entonces la alternativa de elecci√≥n puede volverlo loco. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero es f√°cil convertir todo esto en dicho c√≥digo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ProfileService</span>.service.update(name: <span class="hljs-string">"MyName"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ se garantiza que la instancia de servicio existe, porque si est√° ausente, es creada por el propio servicio. </font><font style="vertical-align: inherit;">Nada extra </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo reclamo del localizador aparentemente se debe al hecho de que los desarrolladores que realizan el rastreo de patrones con C # se olvidan del trabajo del recolector de basura y no se molestan en proporcionar la capacidad de limpiar el localizador de una instancia innecesaria, aunque esto no es del todo dif√≠cil:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ProfileService</span>.service.remove()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no hace esto, cuando recurra a ProfileService.service (), obtendremos una instancia del servicio con el que ya trabajamos anteriormente en un lugar arbitrario en la aplicaci√≥n. Pero si elimina (), al acceder al servicio, obtendr√° una copia limpia. En algunos casos, en lugar de remove (), puede hacer clear () borrando la parte predefinida de los datos y continuando trabajando con la misma instancia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La aplicaci√≥n de prueba demuestra el trabajo coordinado de dos servicios: perfil de usuario y coordinador. El coordinador no es el prop√≥sito del art√≠culo, sino solo un ejemplo conveniente.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/d3/n5/pi/d3n5pivlyhibh_g6b9yoqrmpvpu.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El video muestra que el valor ingresado en el campo se transmite a cada pantalla posterior de la aplicaci√≥n. </font><font style="vertical-align: inherit;">Y en la pantalla final, se llama al coordinador para iniciar la aplicaci√≥n desde la primera pantalla. </font><font style="vertical-align: inherit;">Tenga en cuenta que el plegado tradicional de la pila de navegaci√≥n no ocurre aqu√≠: se expulsa por completo de la memoria, una nueva pila comienza en su lugar. </font><font style="vertical-align: inherit;">Si comenta la l√≠nea para eliminar el servicio de perfil, el nombre de usuario se transferir√° a la primera pantalla, como si hubi√©ramos minimizado la pila de navegaci√≥n.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ProfileService</span>.service.remove()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La aplicaci√≥n completa consta de dos controladores de vista, con un m√≠nimo de operaciones preparatorias.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/no/k_/sd/nok_sdvjddqny_nnk-v5te7tkhm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StartViewController:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StartViewController</span>: <span class="hljs-title">UIViewController</span> </span>{<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> nameField: <span class="hljs-type">UITextField!</span><font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.viewDidLoad()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.nameField.text = <span class="hljs-type">ProfileService</span>.service.info.name<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBAction</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">startAction</span><span class="hljs-params">(<span class="hljs-number">_</span> sender: UIButton)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ProfileService</span>.service.update(name: <span class="hljs-keyword">self</span>.nameField.text ?? <span class="hljs-string">""</span>)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">CoordinatorService</span>.service.coordinator.startPageController()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PageViewController:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PageViewController</span>: <span class="hljs-title">UIViewController</span> </span>{<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> nameLabel: <span class="hljs-type">UILabel!</span><font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.viewDidLoad()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.nameLabel.text = <span class="hljs-type">ProfileService</span>.service.info.name<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBAction</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">finishAction</span><span class="hljs-params">(<span class="hljs-number">_</span> sender: UIButton)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ProfileService</span>.service.remove()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">CoordinatorService</span>.service.coordinator.start()<font></font>
&nbsp; &nbsp; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el primer controlador, se crea una instancia de perfil en el m√©todo viewDidLoad (), y la informaci√≥n del nombre de usuario se carga en el campo de entrada. Y despu√©s de hacer clic en el bot√≥n Iniciar sesi√≥n, los datos del servicio se actualizan nuevamente. Despu√©s de lo cual hay una transici√≥n forzada a la primera p√°gina del asistente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro del asistente, los datos se muestran en la pantalla. Pero el evento est√° vinculado a un bot√≥n solo en la √∫ltima pantalla del gui√≥n gr√°fico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que puede ser complicado? Pero en los √∫ltimos 5 a√±os, me he encontrado constantemente con desarrolladores que no entienden c√≥mo funciona todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, todo el trabajo principal se lleva a cabo en el localizador y en el servicio en s√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Locador:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IService</span> </span>{
&nbsp; &nbsp; <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> service: <span class="hljs-type">Self</span> {<span class="hljs-keyword">get</span>}<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span></span><font></font>
}<font></font>
<span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IServiceLocator</span> </span>{
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">service</span>&lt;T&gt;<span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">T?</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ServiceLocator</span>: <span class="hljs-title">IServiceLocator</span> </span>{<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> instance = <span class="hljs-type">ServiceLocator</span>()
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-built_in">lazy</span> <span class="hljs-keyword">var</span> services: [<span class="hljs-type">String</span>: <span class="hljs-type">Any</span>] = [:]<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-comment">// MARK: - Public methods</span>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">service</span>&lt;<span class="hljs-title">T</span>&gt;() -&gt; <span class="hljs-title">T</span>? </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> instance.service()<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">addService</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-title">_</span> <span class="hljs-title">service</span>: <span class="hljs-title">T</span>) </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> instance.addService(service)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">clear</span>() </span>{<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; instance.services.removeAll()<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">func</span> <span class="hljs-title">removeService</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-title">_</span> <span class="hljs-title">service</span>: <span class="hljs-title">T</span>) </span>{<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; instance.removeService(service)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">service</span>&lt;T&gt;<span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">T?</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> key = typeName(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> services[key] <span class="hljs-keyword">as</span>? <span class="hljs-type">T</span><font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-comment">// MARK: - Private methods</span>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> fun caddService&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-number">_</span> service: <span class="hljs-type">T</span>) {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> key = typeName(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; services[key] = service<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">removeService</span>&lt;T&gt;<span class="hljs-params">(<span class="hljs-number">_</span> service: T)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> key = typeName(<span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; services.removeValue(forKey: key)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">typeName</span><span class="hljs-params">(<span class="hljs-number">_</span> some: <span class="hljs-keyword">Any</span>)</span></span> -&gt; <span class="hljs-type">String</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> (some isAny.<span class="hljs-type">Type</span>) ? <span class="hljs-string">"\(some)"</span> : <span class="hljs-string">"\(type(of: some))"</span><font></font>
&nbsp; &nbsp; }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si observa m√°s de cerca, notar√° que puede limpiar todo el √°rea de datos del localizador con una sola acci√≥n: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ServiceLocator.clear () Un </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
perfil de servicio no es mucho m√°s complicado:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfileService</span>: <span class="hljs-title">IService</span> </span>{<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> (<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> info = <span class="hljs-type">ProfileInfo</span>()<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">var</span> <span class="hljs-title">service</span>: <span class="hljs-title">ProfileService</span> </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> service: <span class="hljs-type">ProfileService</span> = <span class="hljs-type">ServiceLocator</span>.service() {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> service = <span class="hljs-type">ProfileService</span>()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.addService(service)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.info = <span class="hljs-type">ProfileInfo</span>()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.removeService(<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(name: String)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.info.name = name<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ProfileInfo</span> </span>{<font></font>
&nbsp; &nbsp; varname = <span class="hljs-string">""</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se puede simplificar a√∫n m√°s moviendo el √°rea de datos dentro del propio servicio. </font><font style="vertical-align: inherit;">Pero de esta forma, queda claro el √°rea de responsabilidad del modelo de datos y el servicio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es posible que para el trabajo de sus servicios necesite llevar a cabo algunas operaciones preparatorias, como es el caso de la creaci√≥n de un servicio coordinador.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CoordinatorService</span>: <span class="hljs-title">IService</span> </span>{<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> (<span class="hljs-keyword">set</span>)<span class="hljs-keyword">var</span> coordinator: <span class="hljs-type">MainCoordinator!</span><font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">var</span> navController: <span class="hljs-type">UINavigationController</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.coordinator.navigationController<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">var</span> <span class="hljs-title">service</span>: <span class="hljs-title">CoordinatorService</span> </span>{
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> service: <span class="hljs-type">CoordinatorService</span> = <span class="hljs-type">ServiceLocator</span>.service() {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> service = <span class="hljs-type">CoordinatorService</span>()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; service.load()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.addService(service)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> service<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">remove</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">ServiceLocator</span>.removeService(<span class="hljs-keyword">self</span>)<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-comment">// MARK - Private</span>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">load</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> nc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-type">UINavigationController</span>()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; nc.navigationBar.isHidden = <span class="hljs-literal">true</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.coordinator&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = <span class="hljs-type">MainCoordinator</span>(navigationController:nc)<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede ver que en el momento en que el servicio se coloca en el localizador, la pila de navegaci√≥n se crea y se pasa a la instancia de clase del coordinador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si est√° utilizando iOS 13 (aparentemente arriba), aseg√∫rese de modificar la clase SceneDelegate. </font><font style="vertical-align: inherit;">Es necesario garantizar la ejecuci√≥n de este c√≥digo:</font></font><br>
<br>
<pre><code class="swift hljs">&nbsp;<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(<span class="hljs-number">_</span> scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> scene = (scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: scene)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; window.rootViewController = <span class="hljs-type">CoordinatorService</span>.service.navController
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.window = window
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-type">CoordinatorService</span>.service.coordinator.start()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; window.makeKeyAndVisible()<font></font>
&nbsp; &nbsp; }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, extraemos la pila de navegaci√≥n predeterminada y la asociamos con la ventana principal de la aplicaci√≥n, y luego abrimos la ventana de inicio de la aplicaci√≥n con el controlador StartViewController. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo fuente para el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caso de prueba est√° disponible en GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es498178/index.html">Trabajamos desde casa: difusi√≥n de fotos</a></li>
<li><a href="../es498180/index.html">Volver a comprobar Newton Game Dynamics con el analizador est√°tico PVS-Studio</a></li>
<li><a href="../es498186/index.html">Servicios basados ‚Äã‚Äãen redes neuronales para dise√±adores.</a></li>
<li><a href="../es498188/index.html">Teor√≠as de probabilidad: preparaci√≥n para una entrevista y resoluci√≥n de "paradojas"</a></li>
<li><a href="../es498192/index.html">Bolsa de cosm√©ticos con esteroides: XD Design Urban Bumbag Review</a></li>
<li><a href="../es498196/index.html">FunCorp est√° buscando ingenieros de control de calidad: realice una entrevista y reciba una oferta el mismo d√≠a</a></li>
<li><a href="../es498200/index.html">Plataforma de datos para informes regulatorios</a></li>
<li><a href="../es498202/index.html">Landing Digest. Especialista en seguridad de la informaci√≥n</a></li>
<li><a href="../es498206/index.html">Crear un backend graphql en Golang</a></li>
<li><a href="../es498208/index.html">Semana de la seguridad 17: Implicaciones del ataque al servidor Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>