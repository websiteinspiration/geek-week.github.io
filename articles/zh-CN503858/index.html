<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ½â€ğŸ”§ ğŸ‘¨ğŸ¼â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ• ã€Š Terraformï¼šä»£ç çº§åˆ«çš„åŸºç¡€æ¶æ„ã€‹ä¸€ä¹¦ ğŸ¤² ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ¼ ğŸ™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ‚¨å¥½ï¼Œhabrozhiteliï¼è¯¥ä¹¦é€‚ç”¨äºæ‰€æœ‰å·²ç¼–å†™ä»£ç çš„è´Ÿè´£äººã€‚è¿™é€‚ç”¨äºç³»ç»Ÿç®¡ç†å‘˜ï¼Œè¿è¥ä¸“å®¶ï¼Œå‘è¡Œç‰ˆï¼ŒSRï¼ŒDevOpså·¥ç¨‹å¸ˆï¼ŒåŸºç¡€æ¶æ„å¼€å‘äººå‘˜ï¼Œå…¨å‘¨æœŸå¼€å‘äººå‘˜ï¼Œå·¥ç¨‹å›¢é˜Ÿè´Ÿè´£äººå’ŒæŠ€æœ¯æ€»ç›‘ã€‚æ— è®ºæ‚¨å¤„äºä»€ä¹ˆä½ç½®ï¼Œå¦‚æœæ‚¨æ¶‰åŠåŸºç¡€æ¶æ„ï¼Œéƒ¨ç½²ä»£ç ï¼Œé…ç½®æœåŠ¡å™¨ï¼Œæ‰©å±•é›†ç¾¤ï¼Œå¤‡ä»½æ•°æ®ï¼Œç›‘æ§åº”ç”¨ç¨‹åºå¹¶åœ¨å‡Œæ™¨ä¸‰ç‚¹é’Ÿæ¥...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ã€Š Terraformï¼šä»£ç çº§åˆ«çš„åŸºç¡€æ¶æ„ã€‹ä¸€ä¹¦</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/503858/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/el/eg/lp/eleglpt_bkgjd7cftgp1yrmg_gk.jpeg" align="left" alt="å›¾ç‰‡"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¥½ï¼Œhabrozhiteliï¼è¯¥ä¹¦é€‚ç”¨äºæ‰€æœ‰å·²ç¼–å†™ä»£ç çš„è´Ÿè´£äººã€‚è¿™é€‚ç”¨äºç³»ç»Ÿç®¡ç†å‘˜ï¼Œè¿è¥ä¸“å®¶ï¼Œå‘è¡Œç‰ˆï¼ŒSRï¼ŒDevOpså·¥ç¨‹å¸ˆï¼ŒåŸºç¡€æ¶æ„å¼€å‘äººå‘˜ï¼Œå…¨å‘¨æœŸå¼€å‘äººå‘˜ï¼Œå·¥ç¨‹å›¢é˜Ÿè´Ÿè´£äººå’ŒæŠ€æœ¯æ€»ç›‘ã€‚æ— è®ºæ‚¨å¤„äºä»€ä¹ˆä½ç½®ï¼Œå¦‚æœæ‚¨æ¶‰åŠåŸºç¡€æ¶æ„ï¼Œéƒ¨ç½²ä»£ç ï¼Œé…ç½®æœåŠ¡å™¨ï¼Œæ‰©å±•é›†ç¾¤ï¼Œå¤‡ä»½æ•°æ®ï¼Œç›‘æ§åº”ç”¨ç¨‹åºå¹¶åœ¨å‡Œæ™¨ä¸‰ç‚¹é’Ÿæ¥å¬ç”µè¯ï¼Œè¿™æœ¬ä¹¦éƒ½æ˜¯é€‚åˆæ‚¨çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›è´£ä»»åŠ åœ¨ä¸€èµ·é€šå¸¸è¢«ç§°ä¸ºè¿è¥æ´»åŠ¨ï¼ˆæˆ–ç³»ç»Ÿç®¡ç†ï¼‰ã€‚</font><font style="vertical-align: inherit;">ä»¥å‰ï¼Œç»å¸¸ä¼šé‡åˆ°çŸ¥é“å¦‚ä½•ç¼–å†™ä»£ç ä½†ä¸äº†è§£ç³»ç»Ÿç®¡ç†çš„å¼€å‘äººå‘˜ã€‚</font><font style="vertical-align: inherit;">ç³»ç»Ÿç®¡ç†å‘˜ç»å¸¸é‡åˆ°æ²¡æœ‰ç¼–å†™ä»£ç çš„èƒ½åŠ›ã€‚</font><font style="vertical-align: inherit;">ä¸€æ—¦å¯ä»¥æ¥å—è¿™ç§åˆ†ç¦»ï¼Œä½†æ˜¯åœ¨ç°ä»£ä¸–ç•Œä¸­ï¼Œå¦‚æœæ²¡æœ‰äº‘è®¡ç®—å’ŒDevOpsè¿åŠ¨å°±æ— æ³•æƒ³è±¡è¿™ç§åˆ†ç¦»ï¼Œå‡ ä¹æ‰€æœ‰å¼€å‘äººå‘˜éƒ½éœ€è¦ç®¡ç†æŠ€èƒ½ï¼Œå¹¶ä¸”ä»»ä½•ç³»ç»Ÿç®¡ç†å‘˜éƒ½å¿…é¡»èƒ½å¤Ÿç¼–ç¨‹ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨ä¸ä»…å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨Terraformä»¥ä»£ç å½¢å¼ç®¡ç†åŸºç¡€ç»“æ„ï¼Œè¿˜å°†å­¦ä¹ å¦‚ä½•å°†å…¶é€‚åº”DevOpsçš„æ•´ä½“æ¦‚å¿µã€‚</font><font style="vertical-align: inherit;">é€šè¿‡é˜…è¯»æœ¬ä¹¦ï¼Œæ‚¨å¯ä»¥å›ç­”ä»¥ä¸‹é—®é¢˜ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºä»€ä¹ˆè¦å®Œå…¨ä½¿ç”¨IaCï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é…ç½®ç®¡ç†ï¼Œä¸šåŠ¡æµç¨‹ï¼Œèµ„æºåˆå§‹åŒ–å’ŒæœåŠ¡å™¨æ¨¡æ¿ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨Terraformï¼ŒChefï¼ŒAnsibleï¼ŒPuppetï¼ŒSaltï¼ŒCloudFormationï¼ŒDockerï¼ŒPackeræˆ–Kubernetesï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraformç³»ç»Ÿå¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥ç®¡ç†åŸºç¡€ç»“æ„ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•åˆ›å»ºé€‚åˆé‡ç”¨çš„Terraformæ¨¡å—ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•ä¸ºTerraformç¼–å†™è¶³å¤Ÿå¯é çš„å®ç”¨ä»£ç ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•æµ‹è¯•Terraformä»£ç ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•å°†Terraformçº³å…¥æ‚¨çš„è‡ªåŠ¨éƒ¨ç½²è¿‡ç¨‹ï¼Ÿ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨å›¢é˜Ÿåˆä½œä¸­ä½¿ç”¨Terraformçš„æœ€ä½³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</font></font></li>
</ul><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬äºŒç‰ˆçš„æ–°åŠŸèƒ½</font></font></b>
                        <div class="spoiler_text">    2017 .   2019-         ,      !                 .  ,        .<br>
<br>
        ,  ,     ,    Terraform,    .<br>
<br>
<ul>
<li>   Terraform.    ,   Terraform  0.8.     Terraform   0.12.       ,     .  ,   !</li>
<li>   .           Terraform.    , ,    ,  ,    ,  ,  ,    .</li>
<li>  .      Terraform   .  , ,               â€” ,      .</li>
<li>   .  8      ,      Terraform    . ,  ,      ,          : ,      .</li>
<li>HCL2.  Terraform 0.12   HCL   HCL2.        (       ${â€¦}!),   ,     ,   null, for_each  for,    .          HCL2,         5  6.</li>
<li>   .  Terraform 0.9    .        Terraform    .  Terraform 0.9     ,       ;     0.10      .       3.</li>
<li>    Terraform.  Terraform 0.10         (    AWS, GCP, Azure  . .).         ,         .          terraform init  ,       .       2  7.</li>
<li>   .  2016   Terraform        (AWS, GCP  Azure).      100,  ,  ,   1.               (,     Alicloud, Oracle Cloud Infrastructure, VMware vSphere  .),       ,     (GitHub, GitLab  BitBucket),   (MySQL, PostreSQL  InfluxDB),     ( DataDog, New Relic  Grafana),   Kubernetes, Helm, Heroku, Rundeck  Rightscale   .  ,       : ,   AWS     ,        ,   CloudFormation!</li>
<li>  Terraform.  2017   HashiCorp    Terraform (registry.terraform.io) â€”  ,         Terraform,  .  2018          .  Terraform 0.11        .       Â« Â»  . 153.</li>
<li>  .  Terraform 0.9    :         ,    ,   errored.tfstate.  Terraform 0.12    .    ,            ,     .</li>
<li>   .      ,     (.  Â«  Â»  . 144),  Â« Â»         (,  Â«  TerraformÂ»  . 242),  plan    apply (.  Â«  Â»  . 64),     create_before_destroy,    count,           (.  Â«Â»  . 160),    ,   provider   .</li>
</ul></div>
                    </div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘˜æŠ„ã€‚</font><font style="vertical-align: inherit;">å¦‚ä½•æµ‹è¯•Terraformä»£ç </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ï¼ˆç¨å</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°†</font><font style="vertical-align: inherit;">åœ¨æœ¬ä¹¦ä¸­å¯¹è‡ªåŠ¨æµ‹è¯•çš„é—®é¢˜ç»™äºˆæ›´å¤šçš„å…³æ³¨ï¼‰</font><font style="vertical-align: inherit;">DevOpsä¸–ç•Œå……æ»¡äº†å„ç§ææƒ§ï¼šæ¯ä¸ªäººéƒ½å®³æ€•è®©äº‹æƒ…æ­£å¸¸è¿›è¡Œï¼Œä¸¢å¤±æ•°æ®æˆ–è¢«é»‘å®¢å…¥ä¾µã€‚è¿›è¡Œä»»ä½•æ›´æ”¹æ—¶ï¼Œæ‚¨æ€»æ˜¯é—®è‡ªå·±å°†ä¼šäº§ç”Ÿä»€ä¹ˆåæœã€‚å®ƒåœ¨æ‰€æœ‰ç¯å¢ƒä¸­çš„è¡Œä¸ºéƒ½ä¸€æ ·å—ï¼Ÿä¼šå¯¼è‡´å†æ¬¡ä¸­æ–­å—ï¼Ÿè€Œä¸”ï¼Œå¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ‚¨è¿™æ¬¡éœ€è¦ç•™å¤šå°‘æ—¶é—´æ¥ä¿®å¤å®ƒï¼Ÿéšç€å…¬å¸çš„å‘å±•ï¼Œé£é™©è¶Šæ¥è¶Šå¤§ï¼Œä½¿éƒ¨ç½²è¿‡ç¨‹å˜å¾—æ›´ç³Ÿï¼Œå¹¶å¢åŠ äº†å‡ºé”™çš„é£é™©ã€‚è®¸å¤šå…¬å¸è¯•å›¾é€šè¿‡å‡å°‘éƒ¨ç½²é¢‘ç‡æ¥æœ€å¤§ç¨‹åº¦åœ°é™ä½è¿™ç§é£é™©ï¼Œä½†æ˜¯ç»“æœæ˜¯ï¼Œæ¯ä¸ªå•ç‹¬çš„éƒ¨ç½²éƒ½ä¼šå˜å¾—æ›´å¤§å¹¶ä¸”æ›´å®¹æ˜“å‡ºé”™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœä»¥ä»£ç å½¢å¼ç®¡ç†åŸºç¡€æ¶æ„ï¼Œåˆ™æœ‰æ›´å¥½çš„æ–¹æ³•æ¥æœ€å¤§ç¨‹åº¦åœ°é™ä½é£é™©ï¼šæµ‹è¯•ã€‚</font><font style="vertical-align: inherit;">ä»–ä»¬çš„ç›®æ ‡æ˜¯ç»™æ‚¨è¶³å¤Ÿçš„ä¿¡å¿ƒè¿›è¡Œæ›´æ”¹ã€‚</font><font style="vertical-align: inherit;">è¿™é‡Œçš„å…³é”®è¯æ˜¯ä¿¡å¿ƒï¼šæ²¡æœ‰æµ‹è¯•å¯ä»¥ä¿è¯æ²¡æœ‰é”™è¯¯ï¼Œå› æ­¤æ‚¨æ›´æœ‰å¯èƒ½åº”å¯¹æ¦‚ç‡ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨å¯ä»¥å°†æ‰€æœ‰åŸºç¡€ç»“æ„å’Œéƒ¨ç½²è¿‡ç¨‹æ•è·ä¸ºä»£ç ï¼Œåˆ™å¯ä»¥åœ¨æµ‹è¯•ç¯å¢ƒä¸­æµ‹è¯•æ­¤ä»£ç ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæˆåŠŸï¼Œåˆ™ç›¸åŒçš„ä»£ç å¾ˆæœ‰å¯èƒ½åœ¨å·¥ä¸šç¯å¢ƒä¸­è¿è¡Œã€‚</font><font style="vertical-align: inherit;">åœ¨å……æ»¡ææƒ§å’Œä¸ç¡®å®šæ€§çš„ä¸–ç•Œä¸­ï¼Œé«˜æ¦‚ç‡å’Œé«˜ä¿¡å¿ƒæ˜¯æ˜‚è´µçš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»æµ‹è¯•åŸºç¡€ç»“æ„ä»£ç ï¼ˆæ‰‹åŠ¨å’Œè‡ªåŠ¨ï¼‰çš„è¿‡ç¨‹ï¼Œé‡ç‚¹æ˜¯åè€…ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰‹åŠ¨æµ‹è¯•ï¼š</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰‹åŠ¨æµ‹è¯•çš„åŸºç¡€ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµ‹è¯•åæ¸…æ´èµ„æºã€‚</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªåŠ¨åŒ–æµ‹è¯•ï¼š</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å•å…ƒæµ‹è¯•ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•´åˆæµ‹è¯•ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç«¯åˆ°ç«¯æµ‹è¯•ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶ä»–æµ‹è¯•æ–¹æ³•ã€‚</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰‹åŠ¨æµ‹è¯•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€ƒè™‘å¦‚ä½•æµ‹è¯•Terraformä»£ç æ—¶ï¼Œå°†æµ‹è¯•ä¸ä½¿ç”¨é€šç”¨ç¼–ç¨‹è¯­è¨€ï¼ˆä¾‹å¦‚Rubyï¼‰ç¼–å†™çš„ä»£ç è¿›è¡Œä¸€äº›æ¯”è¾ƒæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</font><font style="vertical-align: inherit;">æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨æ­£åœ¨web-server.rbæ–‡ä»¶ä¸­ç¼–å†™ä¸€ä¸ªç®€å•çš„Ruby WebæœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebServer</span> &lt; <span class="hljs-title">WEBrick</span>::<span class="hljs-title">HTTPServlet</span>::<span class="hljs-title">AbstractServlet</span>
  <span class="hljs-title">def</span> <span class="hljs-title">do_GET</span>(<span class="hljs-title">request</span>, <span class="hljs-title">response</span>)
     <span class="hljs-title">case</span> <span class="hljs-title">request</span>.<span class="hljs-title">path</span>
     <span class="hljs-title">when</span> "/"
         <span class="hljs-title">response</span>.<span class="hljs-title">status</span> </span>= <span class="hljs-number">200</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Hello, World'</span>
     <span class="hljs-keyword">else</span>
         response.status = <span class="hljs-number">404</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Not Found'</span><font></font>
     end<font></font>
  end<font></font>
end</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ®µä»£ç å°†è¿”å›200 OKå“åº”ï¼ŒURLä¸ºæ­£æ–‡â€œ Helloï¼ŒWorldâ€ã€‚</font><font style="vertical-align: inherit;">å¯¹äºå…¶ä»–ä»»ä½•åœ°å€ï¼Œç­”æ¡ˆå°†ä¸º404ã€‚æ‚¨å°†å¦‚ä½•æ‰‹åŠ¨æµ‹è¯•æ­¤ä»£ç ï¼Ÿ</font><font style="vertical-align: inherit;">é€šå¸¸ï¼Œæ·»åŠ æ›´å¤šä»£ç ä»¥åœ¨æœ¬åœ°è¿è¡ŒWebæœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="java hljs">#   ,      <font></font>
#  ,       <font></font>
<span class="hljs-keyword">if</span> __FILE__ == $<span class="hljs-number">0</span>
  #      <span class="hljs-number">8000</span>
  server = WEBrick::HTTPServer.new :Port =&gt; <span class="hljs-number">8000</span>
  server.mount <span class="hljs-string">'/'</span>, WebServer<font></font>
<font></font>
  #    Ctrl+C<font></font>
  trap <span class="hljs-string">'INT'</span> <span class="hljs-keyword">do</span> server.shutdown end<font></font>
<font></font>
  #  <font></font>
  server.start<font></font>
end</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœåœ¨ç»ˆç«¯ä¸­è¿è¡Œæ­¤æ–‡ä»¶ï¼Œå®ƒå°†åœ¨ç«¯å£8000ä¸ŠåŠ è½½WebæœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="java hljs">$ ruby web-server.rb<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick <span class="hljs-number">1.3</span><span class="hljs-number">.1</span>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO ruby <span class="hljs-number">2.3</span><span class="hljs-number">.7</span> (<span class="hljs-number">2018</span>-<span class="hljs-number">03</span>-<span class="hljs-number">28</span>) [universal.x86_64-darwin17]<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick::HTTPServer#start: pid=<span class="hljs-number">19767</span> port=<span class="hljs-number">8000</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦æ£€æŸ¥æ­¤æœåŠ¡å™¨çš„è¿è¡Œæƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–curlï¼š</font></font><br>
<br>
<pre><code class="java hljs">$ curl localhost:<span class="hljs-number">8000</span>/<font></font>
Hello, World<font></font>
<font></font>
$ curl localhost:<span class="hljs-number">8000</span>/invalid-path<font></font>
Not Found</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬é€šè¿‡å‘å…¶æ·»åŠ ä¸€ä¸ª/ apiå…¥å£ç‚¹ï¼ˆè¿”å›201 Createdå’Œä¸€ä¸ªJSONæ ¼å¼çš„ä¸»ä½“ï¼‰æ¥æ›´æ”¹æ­¤ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebServer</span> &lt; <span class="hljs-title">WEBrick</span>::<span class="hljs-title">HTTPServlet</span>::<span class="hljs-title">AbstractServlet</span>
  <span class="hljs-title">def</span> <span class="hljs-title">do_GET</span>(<span class="hljs-title">request</span>, <span class="hljs-title">response</span>)
     <span class="hljs-title">case</span> <span class="hljs-title">request</span>.<span class="hljs-title">path</span>
     <span class="hljs-title">when</span> "/"
         <span class="hljs-title">response</span>.<span class="hljs-title">status</span> </span>= <span class="hljs-number">200</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Hello, World'</span>
     when <span class="hljs-string">"/api"</span>
         response.status = <span class="hljs-number">201</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'application/json'</span>
         response.body = <span class="hljs-string">'{"foo":"bar"}'</span>
     <span class="hljs-keyword">else</span>
         response.status = <span class="hljs-number">404</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Not Found'</span><font></font>
     end<font></font>
  end<font></font>
end</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦æ‰‹åŠ¨æµ‹è¯•æ­¤æ›´æ–°çš„ä»£ç ï¼Œè¯·æŒ‰Ctrl + Cï¼Œç„¶åå†æ¬¡è¿è¡Œè„šæœ¬é‡æ–°å¯åŠ¨WebæœåŠ¡å™¨ï¼š</font></font><br>
<br>
<pre><code class="java hljs">$ ruby web-server.rb<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick <span class="hljs-number">1.3</span><span class="hljs-number">.1</span>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO ruby <span class="hljs-number">2.3</span><span class="hljs-number">.7</span> (<span class="hljs-number">2018</span>-<span class="hljs-number">03</span>-<span class="hljs-number">28</span>) [universal.x86_64-darwin17]<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick::HTTPServer#start: pid=<span class="hljs-number">19767</span> port=<span class="hljs-number">8000</span><font></font>
^C<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">15</span>:<span class="hljs-number">54</span>] INFO going to shutdown ...<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">15</span>:<span class="hljs-number">54</span>] INFO WEBrick::HTTPServer#start done.<font></font>
<font></font>
$ ruby web-server.rb<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick <span class="hljs-number">1.3</span><span class="hljs-number">.1</span>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO ruby <span class="hljs-number">2.3</span><span class="hljs-number">.7</span> (<span class="hljs-number">2018</span>-<span class="hljs-number">03</span>-<span class="hljs-number">28</span>) [universal.x86_64-darwin17]<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick::HTTPServer#start: pid=<span class="hljs-number">19767</span> port=<span class="hljs-number">8000</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦æ£€æŸ¥æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥å†æ¬¡ä½¿ç”¨curlå‘½ä»¤ï¼š</font></font><br>
<br>
<pre><code class="java hljs">$ curl localhost:<span class="hljs-number">8000</span>/api<font></font>
{<span class="hljs-string">"foo"</span>:<span class="hljs-string">"bar"</span>}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰‹åŠ¨æµ‹è¯•åŸºç¡€</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ç§æ‰‹åŠ¨æµ‹è¯•åœ¨Terraformä¸­ä¼šæ˜¯ä»€ä¹ˆæ ·ï¼Ÿ</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œåœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæ‚¨ä»ç„¶å…·æœ‰ç”¨äºéƒ¨ç½²ALBçš„ä»£ç ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯æ¨¡å—/ç½‘ç»œ/ alb / main.tfæ–‡ä»¶çš„ç‰‡æ®µï¼š</font></font><br>
<br>
<pre><code class="java hljs">resource <span class="hljs-string">"aws_lb"</span> <span class="hljs-string">"example"</span> {<font></font>
   name                     = <span class="hljs-keyword">var</span>.alb_name<font></font>
   load_balancer_type = <span class="hljs-string">"application"</span>
   subnets                  = <span class="hljs-keyword">var</span>.subnet_ids<font></font>
   security_groups      = [aws_security_group.alb.id]<font></font>
}<font></font>
<font></font>
resource <span class="hljs-string">"aws_lb_listener"</span> <span class="hljs-string">"http"</span> {<font></font>
   load_balancer_arn = aws_lb.example.arn<font></font>
   port                      = local.http_port<font></font>
   protocol                = <span class="hljs-string">"HTTP"</span><font></font>
<font></font>
   #      <span class="hljs-number">404</span><font></font>
   default_action {<font></font>
      type = <span class="hljs-string">"fixed-response"</span><font></font>
<font></font>
      fixed_response {<font></font>
        content_type = <span class="hljs-string">"text/plain"</span>
        message_body = <span class="hljs-string">"404: page not found"</span>
        status_code = <span class="hljs-number">404</span><font></font>
      }<font></font>
    }<font></font>
}<font></font>
<font></font>
resource <span class="hljs-string">"aws_security_group"</span> <span class="hljs-string">"alb"</span> {<font></font>
   name = <span class="hljs-keyword">var</span>.alb_name<font></font>
}<font></font>
<font></font>
# (...)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœå°†æ­¤æ¸…å•ä¸Rubyä»£ç è¿›è¡Œæ¯”è¾ƒï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªæ˜æ˜¾çš„ä¸åŒï¼šAWS ALBï¼Œç›®æ ‡ç»„ï¼Œä¾¦å¬å™¨ï¼Œå®‰å…¨ç»„ä»¥åŠä»»ä½•å…¶ä»–èµ„æºéƒ½æ— æ³•éƒ¨ç½²åœ¨æ‚¨è‡ªå·±çš„è®¡ç®—æœºä¸Šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…³äºNo.1æµ‹è¯•çš„ä¸»è¦ç»“è®ºæ˜¯ï¼šTerraformä»£ç æµ‹è¯•ä¸èƒ½åœ¨æœ¬åœ°è¿›è¡Œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ä¸ä»…é€‚ç”¨äºTerraformï¼Œè€Œä¸”é€‚ç”¨äºå¤§å¤šæ•°IaCå·¥å…·ã€‚åœ¨Terraformä¸­è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•çš„å”¯ä¸€å®ç”¨æ–¹æ³•æ˜¯åœ¨å®é™…ç¯å¢ƒä¸­ï¼ˆå³åœ¨AWSä¸­ï¼‰éƒ¨ç½²ä»£ç ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨é˜…è¯»æœ¬ä¹¦æ—¶ç‹¬ç«‹å¯åŠ¨çš„terraform applyå’Œterraform destroyå‘½ä»¤æ˜¯Terraformä¸­çš„æ‰‹åŠ¨æµ‹è¯•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æ¯ä¸ªæ¨¡å—çš„examplesæ–‡ä»¶å¤¹ä¸­æ‹¥æœ‰æ˜“äºéƒ¨ç½²çš„ç¤ºä¾‹å¦‚æ­¤é‡è¦çš„åŸå› ä¹‹ä¸€ï¼ˆè¯·å‚è§ç¬¬6ç« ï¼‰ã€‚</font><font style="vertical-align: inherit;">è¦æµ‹è¯•albæ¨¡å—ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨æ‚¨åœ¨examples / albä¸­åˆ›å»ºçš„æ¼”ç¤ºä»£ç ï¼š</font></font><br>
<br>
<pre><code class="java hljs">provider <span class="hljs-string">"aws"</span> {<font></font>
   region = <span class="hljs-string">"us-east-2"</span><font></font>
<font></font>
   #     AWS  <span class="hljs-number">2</span>.x<font></font>
   version = <span class="hljs-string">"~&gt; 2.0"</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"alb"</span> {<font></font>
    source = <span class="hljs-string">"../../modules/networking/alb"</span><font></font>
<font></font>
    alb_name = <span class="hljs-string">"terraform-up-and-running"</span>
    subnet_ids = data.aws_subnet_ids.<span class="hljs-keyword">default</span>.ids<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦éƒ¨ç½²æ­¤ç¤ºä¾‹ï¼Œæ‚¨éœ€è¦è¿è¡Œterraform applyå‘½ä»¤ï¼Œå°±åƒæ‚¨é‡å¤åšçš„é‚£æ ·ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">$ terraform <span class="hljs-title">apply</span>

<span class="hljs-params">(...)</span>

Apply complete! Resources: 5 added, 0 changed, 0 destroyed.

Outputs:

alb_dns_name </span>= hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨éƒ¨ç½²ç»“æŸæ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨curlç­‰å·¥å…·æ¥ç¡®ä¿é»˜è®¤æƒ…å†µä¸‹ALBè¿”å›404ï¼š</font></font><br>
<br>
<pre><code class="java hljs">$ curl \<font></font>
   -s \<font></font>
   -o /dev/<span class="hljs-keyword">null</span> \<font></font>
   -w <span class="hljs-string">"%{http_code}"</span> \<font></font>
hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com<font></font>
<font></font>
<span class="hljs-number">404</span></code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŸºç¡€è®¾æ–½æ£€æŸ¥</font></font><br>
<br>
      ,   HTTP, ,     ,   curl  HTTP-.        . ,        MySQL,       MySQL.      VPN-,      VPN.      ,      ,       SSH    - .    .   ,    ,      .       ,    .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è®©æˆ‘æé†’æ‚¨ï¼šç”±äºé…ç½®ä¸­ä¸å­˜åœ¨å…¶ä»–ä¾¦å¬å™¨è§„åˆ™ï¼Œå› æ­¤ALBè¿”å›404ï¼Œå¹¶ä¸”albæ¨¡å—ä¸­çš„é»˜è®¤æ“ä½œçš„å“åº”ä¸º404ï¼š</font></font><br>
<br>
<pre><code class="java hljs">resource <span class="hljs-string">"aws_lb_listener"</span> <span class="hljs-string">"http"</span> {<font></font>
   load_balancer_arn = aws_lb.example.arn<font></font>
   port                      = local.http_port<font></font>
   protocol                = <span class="hljs-string">"HTTP"</span><font></font>
<font></font>
   #      <span class="hljs-number">404</span><font></font>
   default_action {<font></font>
      type = <span class="hljs-string">"fixed-response"</span><font></font>
<font></font>
      fixed_response {<font></font>
       content_type = <span class="hljs-string">"text/plain"</span>
       message_body = <span class="hljs-string">"404: page not found"</span>
       status_code = <span class="hljs-number">404</span><font></font>
      }<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œæ‚¨å·²ç»çŸ¥é“å¦‚ä½•è¿è¡Œå’Œæµ‹è¯•ä»£ç ã€‚</font><font style="vertical-align: inherit;">ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹è¿›è¡Œæ›´æ”¹äº†ã€‚</font><font style="vertical-align: inherit;">æ¯æ¬¡æ›´æ”¹æŸé¡¹ï¼ˆä¾‹å¦‚ï¼Œé»˜è®¤æ“ä½œè¿”å›401ï¼‰æ—¶ï¼Œéƒ½éœ€è¦ä½¿ç”¨terraform applyå‘½ä»¤æ¥éƒ¨ç½²æ–°ä»£ç ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">$ terraform <span class="hljs-title">apply</span>

<span class="hljs-params">(...)</span>

Apply complete! Resources: 0 added, 1 changed, 0 destroyed.

Outputs:

alb_dns_name </span>= hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦æ£€æŸ¥æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥é‡æ–°å¯åŠ¨curlï¼š</font></font><br>
<br>
<pre><code class="java hljs">$ curl \<font></font>
   -s \<font></font>
   -o /dev/<span class="hljs-keyword">null</span> \<font></font>
   -w <span class="hljs-string">"%{http_code}"</span> \<font></font>
   hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com
<span class="hljs-number">401</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Œæˆåï¼Œè¿è¡Œterraform destroyå‘½ä»¤ä»¥åˆ é™¤èµ„æºï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">$ terraform <span class="hljs-title">destroy</span>

<span class="hljs-params">(...)</span>

Apply complete! Resources: 0 added, 0 changed, 5 destroyed.</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¢å¥è¯è¯´ï¼Œåœ¨ä½¿ç”¨Terraformæ—¶ï¼Œæ¯ä¸ªå¼€å‘äººå‘˜éƒ½éœ€è¦è‰¯å¥½çš„ä»£ç ç¤ºä¾‹è¿›è¡Œæµ‹è¯•ä»¥åŠçœŸå®çš„å¼€å‘ç¯å¢ƒï¼ˆä¾‹å¦‚AWSè´¦æˆ·ï¼‰ï¼Œè¯¥ç¯å¢ƒç›¸å½“äºæœ¬åœ°è®¡ç®—æœºå¹¶ç”¨äºè¿è¡Œæµ‹è¯•ã€‚åœ¨æ‰‹åŠ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæ‚¨å¾ˆå¯èƒ½å¿…é¡»åˆ›å»ºå’Œåˆ é™¤å¤§é‡åŸºç¡€ç»“æ„ç»„ä»¶ï¼Œè¿™å¯èƒ½å¯¼è‡´è®¸å¤šé”™è¯¯ã€‚åœ¨è¿™æ–¹é¢ï¼Œåº”å°†ç¯å¢ƒä¸ç”¨äºæœ€ç»ˆæµ‹è¯•ï¼Œå°¤å…¶æ˜¯å·¥ä¸šåº”ç”¨çš„æ›´ç¨³å®šçš„ç¯å¢ƒå®Œå…¨éš”ç¦»ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‰´äºä»¥ä¸Šæ‰€è¿°ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ¯ä¸ªå¼€å‘å›¢é˜Ÿå‡†å¤‡ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œåœ¨å…¶ä¸­æ‚¨å¯ä»¥åˆ›å»ºå’Œåˆ é™¤ä»»ä½•åŸºç¡€ç»“æ„è€Œä¸ä¼šäº§ç”Ÿä»»ä½•åæœã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†æœ€å¤§ç¨‹åº¦åœ°å‡å°‘ä¸åŒå¼€å‘äººå‘˜ä¹‹é—´å‘ç”Ÿå†²çªçš„å¯èƒ½æ€§ï¼ˆå‡è®¾ä¸¤ä¸ªå¼€å‘äººå‘˜è¯•å›¾åˆ›å»ºä¸€ä¸ªå…·æœ‰ç›¸åŒåç§°çš„è´Ÿè½½å¹³è¡¡å™¨ï¼‰ï¼Œç†æƒ³çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸ºæ¯ä¸ªå›¢é˜Ÿæˆå‘˜æä¾›ä¸€ä¸ªå•ç‹¬çš„ï¼Œå®Œå…¨éš”ç¦»çš„ç¯å¢ƒã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œå¦‚æœå°†Terraformä¸AWSç»“åˆä½¿ç”¨ï¼Œåˆ™æ¯ä¸ªå¼€å‘äººå‘˜ç†æƒ³æƒ…å†µä¸‹éƒ½åº”è¯¥æ‹¥æœ‰è‡ªå·±çš„å¸æˆ·ï¼Œä»–ä»¬å¯ä»¥åœ¨å…¶ä¸­æµ‹è¯•æ‰€éœ€çš„ä¸€åˆ‡ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµ‹è¯•åèµ„æºæ¸…ç†</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æé«˜å¼€å‘äººå‘˜çš„ç”Ÿäº§åŠ›ï¼Œå¿…é¡»å­˜åœ¨è®¸å¤šéš”ç¦»çš„ç¯å¢ƒï¼Œä½†æ˜¯å¦‚æœæ‚¨ä¸è°¨æ…æ“ä½œï¼Œåˆ™å¯èƒ½ä¼šç§¯ç´¯è®¸å¤šé¢å¤–çš„èµ„æºï¼Œè¿™äº›èµ„æºä¼šä½¿æ‚¨çš„æ‰€æœ‰ç¯å¢ƒæ‚ä¹±æ— ç« ï¼Œå¹¶èŠ±è´¹å¤§é‡èµ„é‡‘ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æ§åˆ¶æˆæœ¬ï¼Œè¯·å®šæœŸæ¸…æ´éš”ç¦»çš„ä»‹è´¨ã€‚è¿™æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµ‹è¯•2å·</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><i><font style="vertical-align: inherit;">å…³é”®ç»“è®º</font></i><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è‡³å°‘ï¼Œåœ¨æµ‹è¯•åï¼Œå½“å¼€å‘äººå‘˜ä½¿ç”¨terraform destroyå‘½ä»¤åˆ é™¤éƒ¨ç½²çš„æ‰€æœ‰å†…å®¹æ—¶ï¼Œæ‚¨åº”è¯¥åœ¨å›¢é˜Ÿä¸­åˆ›å»ºè¿™ç§æ–‡åŒ–ã€‚å¯èƒ½ä¼šæ‰¾åˆ°ç”¨äºæ¸…ç†å¯ä»¥å®šæœŸè¿è¡Œçš„å¤šä½™æˆ–æ—§èµ„æºçš„å·¥å…·ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨cronï¼‰ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹ä¸åŒéƒ¨ç½²ç¯å¢ƒçš„ä¸€äº›ç¤ºä¾‹ã€‚</font></font><br>
<br>
<ul>
<li>cloud-nuke (http://bit.ly/2OIgM9r).      ,         .        AWS ( Amazon EC2 Instances, ASG, ELB  . .).      (Google Cloud, Azure)   .    â€”    ,    . , cloud-nuke      cron,           .   ,   ,      ,      :<br>
<br>
<pre><code class="java hljs">$ cloud-nuke aws --older-than <span class="hljs-number">48</span>h</code></pre></li>
<li>Janitor Monkey (http://bit.ly/2M4GoLB).      ,   AWS  ,    (  â€”   ).    ,  ,    ,            .    Netflix Simian Army,      Chaos Monkey    .   ,    Simian Army    ,       : ,   Janitor Monkey   Swabbie (http://bit.ly/2OLrOLb).</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aws-nukeï¼ˆhttp://bit.ly/2ZB8lOeï¼‰ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ä¸€ä¸ªåˆ é™¤AWSè´¦æˆ·æ‰€æœ‰å†…å®¹çš„å¼€æºå·¥å…·ã€‚</font><font style="vertical-align: inherit;">åœ¨é…ç½®æ–‡ä»¶ä¸­ä»¥YAMLæ ¼å¼æŒ‡å®šè¦åˆ é™¤çš„å¸æˆ·å’Œèµ„æºï¼š</font></font><br>
<br>
<pre><code class="java hljs">#   <font></font>
regions:<font></font>
- us-east-<span class="hljs-number">2</span><font></font>
<font></font>
#    <font></font>
accounts:<font></font>
   <span class="hljs-string">"111111111111"</span>: {}<font></font>
<font></font>
#    <font></font>
resource-types:<font></font>
   targets:<font></font>
   - S3Object<font></font>
   - S3Bucket<font></font>
   - IAMRole</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aws-nukeå¼€å§‹å¦‚ä¸‹ï¼š</font></font><br>
<br>
<pre><code class="java hljs">$ aws-nuke -<span class="hljs-number">5</span>c config.yml</code></pre></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªåŠ¨åŒ–æµ‹è¯•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è‡ªåŠ¨æµ‹è¯•çš„æ¦‚å¿µæ˜¯ç¼–å†™æµ‹è¯•æ¥æµ‹è¯•å®é™…ä»£ç çš„è¡Œä¸ºã€‚</font><font style="vertical-align: inherit;">åœ¨ç¬¬8ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ ä½¿ç”¨CIæœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨æ¯æ¬¡å•ç‹¬æäº¤åè¿è¡Œè¿™äº›æµ‹è¯•ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæœªå®Œæˆï¼Œåˆ™å¯ä»¥ç«‹å³æ’¤æ¶ˆæˆ–æ›´æ­£å›ºå®šã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæ‚¨çš„ä»£ç å°†å§‹ç»ˆå¯æ“ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…±æœ‰ä¸‰ç§ç±»å‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</font></font><br>
<br>
<ul>
<li> .       â€” .    ,             .   (,  , -    )   mock-.       (, mock-     ,  )    ,        .</li>
<li> .      .          ,          .      mock-: ,     ,     ,      ,   , ,  ,  mock-.</li>
<li> .      (, ,  ,  )       .          : , Selenium        .         - mock-,          (        ,  ).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¯ç§ç±»å‹çš„æµ‹è¯•éƒ½æœ‰å…¶è‡ªå·±çš„ç›®çš„ï¼Œåœ¨å®ƒä»¬çš„å¸®åŠ©ä¸‹ï¼Œæ‚¨å¯ä»¥è¯†åˆ«å„ç§é”™è¯¯ï¼Œå› æ­¤åº”å°†å®ƒä»¬ä¸€èµ·ä½¿ç”¨ã€‚å•å…ƒæµ‹è¯•é€Ÿåº¦å¾ˆå¿«ï¼Œå¯è®©æ‚¨ç«‹å³äº†è§£æ‰€åšçš„æ›´æ”¹å¹¶æ£€æŸ¥å„ç§ç»„åˆã€‚è¿™ä½¿æ‚¨ç¡®ä¿¡ä»£ç çš„åŸºæœ¬ç»„ä»¶ï¼ˆå•ä¸ªæ¨¡å—ï¼‰çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚ä½†æ˜¯ï¼Œæ¨¡å—å•ç‹¬æ­£ç¡®å·¥ä½œçš„äº‹å®å¹¶ä¸æ„å‘³ç€å®ƒä»¬å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œå› æ­¤ï¼Œä¸ºäº†ç¡®ä¿åŸºæœ¬ç»„ä»¶å…¼å®¹ï¼Œéœ€è¦è¿›è¡Œé›†æˆæµ‹è¯•ã€‚å¦ä¸€æ–¹é¢ï¼Œç³»ç»Ÿä¸åŒéƒ¨åˆ†çš„æ­£ç¡®è¡Œä¸ºå¹¶ä¸èƒ½ä¿è¯è¯¥ç³»ç»Ÿåœ¨å·¥ä¸šç¯å¢ƒä¸­éƒ¨ç½²åèƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå› æ­¤éœ€è¦é€šè¿‡æµ‹è¯•æ¥åœ¨æ¥è¿‘å®é™…æ¡ä»¶ä¸‹æµ‹è¯•æ‚¨çš„ä»£ç ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Â»å…³äºè¿™æœ¬ä¹¦çš„æ›´å¤šä¿¡æ¯ä¸Šå¯ä»¥æ‰¾åˆ°</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡ºç‰ˆå•†çš„ç½‘ç«™</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Â» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›®å½•</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Â» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘˜å½•</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
çš„ä¼˜æƒ åˆ¸Khabrozhiteley 25ï¼…çš„æŠ˜æ‰£- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åœ¨ç¼´ä»˜ä¹¦çš„çº¸è´¨ç‰ˆæœ¬ï¼Œç”µå­ä¹¦æ˜¯é€šè¿‡ç”µå­é‚®ä»¶å‘é€ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN503842/index.html">å¤§è„‘å‡ä½“ï¼šäººå·¥å’Œç”Ÿç‰©ç¥ç»ç½‘ç»œçš„åŒæ­¥</a></li>
<li><a href="../zh-CN503844/index.html">åªéœ€å‡ æ­¥å³å¯åŠ å¿«MatTableæ¸²æŸ“é€Ÿåº¦</a></li>
<li><a href="../zh-CN503846/index.html">é—ªè¿‡ï¼Œâ€œä»–æ˜¯å¦å†æ¬¡æ­»å»è¿˜ä¸çŸ¥é“ï¼Œä½†æ˜¯èŠ±æœµæ¶ˆå¤±äº†â€¦â€¦â€</a></li>
<li><a href="../zh-CN503848/index.html">æˆ‘ä»¬é‚€è¯·æ‚¨å…è´¹åœ¨Sinterit 26.05å’Œ3Dæ‰«æä»ªä¸Šä½¿ç”¨SLSæ‰“å°åœ¨çº¿ç ”è®¨ä¼š28.05</a></li>
<li><a href="../zh-CN503854/index.html">æœ€å¤§é™åº¦åœ°ä½¿ç”¨SIL</a></li>
<li><a href="../zh-CN503860/index.html">è®¾ç½®ç¥ç»ç½‘ç»œç¯å¢ƒMask R-CNN</a></li>
<li><a href="../zh-CN503862/index.html">å¿ƒç†é—®é¢˜æ˜¯æˆåŠŸåˆ›é€ çªç ´æ€§äº§å“çš„å›æŠ¥</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>