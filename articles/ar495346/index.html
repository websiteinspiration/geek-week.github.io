<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฎ ๐ ๐ค๐ป ูู ุงูุฎุทุฃ ุฅูู ุงูุชูุจูู ุจุงูุฅุฌุฑุงุกุงุช ๐ค๐พ ๐ ๐คต๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุงุจุฑ! ุจุงููุณุจุฉ ูููุณุชุฎุฏู ุ ุบุงูุจูุง ูุง ุชุจุฏู ุฑุณุงุฆู ุงูุฎุทุฃ ูุซู "ููุงู ุฎุทุฃ ูุง ุ AAAA!". ุจุงูุทุจุน ุ ููุฏ ุจุฏูุงู ูู ุงูุฃุฎุทุงุก ุฃู ูุฑู ุงูุฎุทุฃ ุงูุณุญุฑู "ุฅุตูุงุญู ููู"...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ูู ุงูุฎุทุฃ ุฅูู ุงูุชูุจูู ุจุงูุฅุฌุฑุงุกุงุช</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/manychat/blog/495346/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุญุจุง ูุง ูุงุจุฑ! </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ูููุณุชุฎุฏู ุ ุบุงูุจูุง ูุง ุชุจุฏู ุฑุณุงุฆู ุงูุฎุทุฃ ูุซู "ููุงู ุฎุทุฃ ูุง ุ AAAA!". </font><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ููุฏ ุจุฏูุงู ูู ุงูุฃุฎุทุงุก ุฃู ูุฑู ุงูุฎุทุฃ ุงูุณุญุฑู "ุฅุตูุงุญู ููู". </font><font style="vertical-align: inherit;">ุญุณูุง ุ ุฃู ุฎูุงุฑุงุช ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุจุฏุฃูุง ูู ุฅุถุงูุฉ ูุฐู ุฅูู ุฃููุณูุง ุจูุดุงุท ุ ูุฃูุฏ ุฃู ุฃุชุญุฏุซ ุนู ููููุฉ ุงูููุงู ุจุฐูู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6q/cf/s3/6qcfs3uiu0o9ajdlcfi8frjb5pg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุฃูุฏู ููุณู - ุงุณูู ุฃููุณูุฏุฑ ุ ูู ุงูุณููุงุช ุงูุณุช ุงูุฃุฎูุฑุฉ ุงูุชู ุฎุตุตุชููุง ูุชุทููุฑ iOS. </font><font style="vertical-align: inherit;">ุฃูุง ุงูุขู ูุณุคูู ุนู ุชุทุจูู ุงููุงุชู ุงููุญููู ManyChat ูุณุฃุญู ุงููุดููุงุช ุจุงุณุชุฎุฏุงู ูุซุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุตูุบ ุนูู ุงูููุฑ ูุง ุณููุนูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูุธููุฉ ุฅูู ููุน ุงูุฎุทุฃ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูู ุงูุฃุฎุทุงุก ุฅูู ุชูุจููุงุช ุณููุฉ ุงูุงุณุชุฎุฏุงู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑุถ ุงูุฅุฌุฑุงุกุงุช ุงูุฅุถุงููุฉ ุงููุญุชููุฉ ูู ุงููุงุฌูุฉ ููุนุงูุฌ ููุฑุงุชูู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุฐุง ุณูููู ุนูู Swift :)</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูููู ุจุญู ุงููุดููุฉ ุจูุซุงู. </font><font style="vertical-align: inherit;">ุนุฑุถ ุงูุฎุงุฏู ุฎุทุฃ ุจุฑูุฒ 500 ุจุฏูุงู ูู 200 ุงููุชููุน. ูุงุฐุง ูุฌุจ ุฃู ููุนู ุงููุทูุฑุ </font><font style="vertical-align: inherit;">ุนูู ุงูุฃูู ุ ูุน ุงูุญุฒู ูุฅุจูุงุบ ุงููุณุชุฎุฏู - ุชุนุฐุฑ ุชูุฒูู ุงููุดุงุฑูุฉ ุงููุชููุนุฉ ูุน ุงูุฃุฎุชุงู. </font><font style="vertical-align: inherit;">ูู Apple ุ ูููู ุงูููุท ุงูููุงุณู ูู ุญุงูุฉ ุชุฃูุจ ุ ูุฐุง ุฏุนูุง ููุชุจ ูุธููุฉ ุจุณูุทุฉ:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FeedViewController</span>: <span class="hljs-title">UIViewController</span> </span>{
  <span class="hljs-comment">// -   </span><font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handleFeedResponse</span><span class="hljs-params">(...)</span></span> {
	<span class="hljs-comment">/// -    </span>
	<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error = error {
		<span class="hljs-keyword">let</span> alertVC = <span class="hljs-type">UIAlertController</span>(<font></font>
			title: <span class="hljs-string">"Error"</span>,<font></font>
			message: <span class="hljs-string">"Error connecting to the server"</span>,<font></font>
			preferredStyle: .alert)<font></font>
		<span class="hljs-keyword">let</span> action = <span class="hljs-type">UIAlertAction</span>(title: <span class="hljs-string">"OK"</span>, style: .<span class="hljs-keyword">default</span>, handler: <span class="hljs-literal">nil</span>)<font></font>
		alertVC.addAction(action)<font></font>
		<span class="hljs-keyword">self</span>.present(alertVC, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)<font></font>
	}<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุญุตูู ุนูู ุงูุจุณุงุทุฉ ุ ุณุชููู ูุนุธู ุงูุดูุฑุฉ ูู ูุญุฏุฉ ุงูุชุญูู. </font><font style="vertical-align: inherit;">ุฃูุช ุญุฑ ูู ุงุณุชุฎุฏุงู ููุณ ุงูุฃุณุงููุจ ูู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ ุงูุฎุงุตุฉ ุจู. </font><font style="vertical-align: inherit;">ุณูููู ุฑูุฒ ุงูููุงูุฉ ูุชุงุญูุง ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุชูุฏุน</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููู ููุงูุฉ ุงูููุงูุฉ ุณูููู ูุฐุง ุงูุฑุงุจุท ุฃูุถูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุตู ุนูู ุงูุตูุฑุฉ ุงูุชุงููุฉ: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/ra/ee/9oraeel1k7noyxjplcumz1b56jy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ุฃููููุง ุงููููุฉ. </font><font style="vertical-align: inherit;">ููู ููุงู ุนุฏุฉ ุฃุดูุงุก ูุงุถุญุฉ ุนูู ุงูููุฑ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููุญ ุงููุฑุตุฉ ููุชุจุฏูู ุจุทุฑููุฉ ูุง ูู ุณููุงุฑูู ุฎุงุทุฆ ุฅูู ุณููุงุฑูู ูุงุฌุญ. </font><font style="vertical-align: inherit;">ุญุณููุง ูู ุงูุญุงูุฉ ุงูุญุงููุฉ ุ ูุฅูู ูุฎูู ุงูุชูุจูู - ููุฐุง ููุณ ุญูุงู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฌูุฉ ูุธุฑ ุงูุทุจุงุน ุงููุณุชุฎุฏู ุ ูุฌุจ ุฃู ูููู ุงููุต ุฃูุซุฑ ูุถูุญูุง ููุญุงูุฏุฉ. </font><font style="vertical-align: inherit;">ุญุชู ูุง ูุฎุงู ุงููุณุชุฎุฏู ููุง ูุนูู ููุถุน ูุฌูุฉ ูุงุญุฏุฉ ูู AppStore ูุชุทุจููู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ูู ุงููููุฏ ููุง ูุต ููุตู ุนูุฏ ุชุตุญูุญ ุงูุฃุฎุทุงุก</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ูููู ุตุงุฏููู - ุงูุชูุจููุงุช ูุฏููุฉ ุฅูู ุญุฏ ูุง ูุญู (ุนูู ูุญู ูุชุฒุงูุฏ ุ ุชุธูุฑ ุดุงุดุงุช ููููุฉ ุฃู ูุฎุจ ูู ุงูุชุทุจููุงุช). </font><font style="vertical-align: inherit;">ูููู ูุฐุง ุณุคุงู ูุฌุจ ููุงูุดุชู ุจุดูู ูููุตู ูุน ุงููุฑูู</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงูู ุ ุงูุฎูุงุฑ ุงููุนุฑูุถ ุฃุฏูุงู ูุจุฏู ุฃูุซุฑ ุชุนุงุทููุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/0z/oz/jv0zozzv3foowtocsqkk_pjdifo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุง ูุงู ุงูุฎูุงุฑ ุงูุฐู ุชุฎุชุงุฑู ุ ูุจุงููุณุจุฉ ูุฃู ูููุง ุณุชุญุชุงุฌ ุฅูู ุงูุชูููุฑ ูู ูุซู ูุฐู ุงูุขููุฉ ูุนุฑุถ ุฑุณุงูุฉ ุชุจุฏู ุฑุงุฆุนุฉ ุนูุฏ ุญุฏูุซ ุฎุทุฃ ุชุนุณูู ุ ูุณูู ุชูุฏู ูููุณุชุฎุฏู ูุตูุง ูุงุถุญูุง ููุฒูุฏ ูู ุงูุนูู ูู ุงูุชุทุจูู ูุชููุฑ ูุฌููุนุฉ ูู ุงูุฅุฌุฑุงุกุงุช. </font><font style="vertical-align: inherit;">ุงูุญู ูู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ูุงุจูุฉ ููุชูุณูุน. </font><font style="vertical-align: inherit;">ูุญู ูุนูู ุฌููุนูุง ุนู ุชููุจ ุงูุชุตููู ุงููุชุฃุตู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ุขููุชูุง ุฌุงูุฒุฉ ูุฃู ุดูุก</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชู ุฅุถุงูุชู ุฅูู ุงููุงุฆู (ูุฅุฒุงูุชู) ูู ุณุทุฑูู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุงุฑ ุฌูุฏ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุจู ุฐูู ุ ุฏุนูุง ูุบุฑู ูู ุงูุญุฏ ุงูุฃุฏูู ุงููุธุฑู ููุฃุฎุทุงุก ูู Swift. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃ ูู Swift</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ุงูููุฑุฉ ูู ูุธุฑุฉ ุนุงูุฉ ุนูู ุฃุนูู ูุณุชูู ููุฃุฎุทุงุก ุจุดูู ุนุงู. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุณุชุฎุฏู ุจุงููุนู ุฃุฎุทุงุฆู ุจูุดุงุท ูู ุงูุชุทุจูู ุ ูููููู ุงููุชุงุจุนุฉ ุจุฃูุงู ุฅูู ุงูููุฑุฉ ุงูุชุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูู ุงูุฎุทุฃุ </font><font style="vertical-align: inherit;">ููุน ูู ุงูุนูู ุงูุฎุงุทุฆ ุฃู ูุชูุฌุฉ ุบูุฑ ุตุญูุญุฉ. </font><font style="vertical-align: inherit;">ุบุงูุจูุง ูุง ูููููุง ุงูุชุฑุงุถ ุงูุฃุฎุทุงุก ุงููุญุชููุฉ ููุตููุง ูุณุจููุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงูุญุงูุฉ ุ ุชุนุทููุง Apple ููุน ุงูุฎุทุฃ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุชุญูุง ูุซุงุฆู Apple ุ ูุณูุธูุฑ Error ุจูุฐุง ุงูุดูู (ุฐู ุตูุฉ ุจู Swift 5.1):</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">Error</span> </span>{<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุฑุฏ ุจุฑูุชูููู ุจุฏูู ูุชุทูุจุงุช ุฅุถุงููุฉ. </font><font style="vertical-align: inherit;">ุชูุถุญ ุงููุซุงุฆู ุจูุทู - ูุณูุญ ููุต ุงููุนููุงุช ุงููุทููุจุฉ ุจุงุณุชุฎุฏุงู ุฃู ููุน ูู ูุธุงู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู Swift. </font><font style="vertical-align: inherit;">ูุน ูุฐุง ุงูุจุฑูุชูููู ุงููุทูู ุ ุณูุนูู ุจุจุณุงุทุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุชุจุงุฏุฑ ุฅูู ุฐููู ููุฑุฉ ุงุณุชุฎุฏุงู ุงูุชุนุฏุงุฏ ุนูู ุงูููุฑ: ููุงู ุนุฏุฏ ูุญุฏูุฏ ูุนุฑูู ูู ุงูุฃุฎุทุงุก ุ ูุฏ ูููู ูุฏููู ููุน ูู ุงููุนููุงุช. </font><font style="vertical-align: inherit;">ููู ูุง ุชูุนูู ุดุฑูุฉ ุขุจู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ุชููุฑ ูู ุชูููุฐ ุฎุทุฃ ูู ุงูุชุฑููุฒ:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">DecodingError</span> : <span class="hljs-title">Error</span> </span>{<font></font>
    <font></font>
        <span class="hljs-comment">/// ,     . </span>
    	<span class="hljs-comment">///  ,    </span>
        <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Context</span> </span>{<font></font>
    <font></font>
    	    <span class="hljs-comment">///      </span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">let</span> codingPath: [<span class="hljs-type">CodingKey</span>]
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">let</span> debugDescription: <span class="hljs-type">String</span><font></font>
    <font></font>
    	    <span class="hljs-comment">/// ,    . </span>
            <span class="hljs-comment">///      .   </span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">let</span> underlyingError: <span class="hljs-type">Error?</span><font></font>
    <font></font>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">init</span>(codingPath: [<span class="hljs-type">CodingKey</span>], debugDescription: <span class="hljs-type">String</span>, underlyingError: <span class="hljs-type">Error?</span> = <span class="hljs-literal">nil</span>)<font></font>
        }<font></font>
    <font></font>
    	<span class="hljs-comment">/// N    </span>
        <span class="hljs-keyword">case</span> typeMismatch(<span class="hljs-type">Any</span>.<span class="hljs-type">Type</span>, <span class="hljs-type">DecodingError</span>.<span class="hljs-type">Context</span>)
        <span class="hljs-keyword">case</span> valueNotFound(<span class="hljs-type">Any</span>.<span class="hljs-type">Type</span>, <span class="hljs-type">DecodingError</span>.<span class="hljs-type">Context</span>)<font></font>
    <font></font>
    ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุณุชูุฏ ูู ุฃูุถู ููุงุฑุณุงุช Apple. </font><font style="vertical-align: inherit;">ุชุฎูู ูุฌููุนุฉ ูู ุฃุฎุทุงุก ุงูุดุจูุฉ ุงููุญุชููุฉ ูู ุดูู ูุจุณุท:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">NetworkError</span>: <span class="hljs-title">Error</span> </span>{
       <span class="hljs-comment">//  500 </span>
	<span class="hljs-keyword">case</span> serverError
        <span class="hljs-comment">//   ,   </span>
	<span class="hljs-keyword">case</span> responseError
        <span class="hljs-comment">//  ,   ,  </span>
	<span class="hljs-keyword">case</span> internetError<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุ ูู ุฃู ููุงู ูู ุชุทุจูููุง ุญูุซ ูุญุฏุซ ุงูุฎุทุฃ ุ ูููููุง ุงุณุชุฎุฏุงู ุดุจูุชูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุชุนูู ูุน ุงูุจูุ ููุงู ุขููุฉ ุงูุตูุฏ. ุฅุฐุง ูุงู ุจุฅููุงู ุฅุญุฏู ุงููุธุงุฆู ุฃู ุชุฎุทุฆ ุ ูุณูุชู ุชูููุฒูุง ุจูููุฉ ุงููููุงุช ุงูุฃุณุงุณูุฉ. ุงูุขู ูุทููุจ ูู ูู ูู ูุณุชุฎุฏููู ุงููุตูู ุฅููู ูู ุฎูุงู ุจูุงุก ุงูุตูุฏ. ุฅุฐุง ูู ููู ููุงู ุฎุทุฃ ุ ูุณูู ููุน ูู ูุชูุฉ do ุ ูุน ูุฌูุฏ ุฎุทุฃ ุ ูู block catch. ูููู ุฃู ุชููู ุงููุธุงุฆู ุงูุชู ุชุคุฏู ุฅูู ุงูุฎุทุฃ ุฃู ุฑูู ูู ูุชูุฉ ุงูููุงู. ุงูุณูุจูุฉ ุงููุญูุฏุฉ ูู ุฃูู ูู ุงูุตูุฏ ูุญุตู ุนูู ุฎุทุฃ ูู ููุน Error. ุณุชุญุชุงุฌ ุฅูู ุฅุฑุณุงู ุงูุฎุทุฃ ุฅูู ุงูููุน ุงููุทููุจ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏูู ุ ูููููุง ุงุณุชุฎุฏุงู ุงูุฎูุงุฑ ุงูุงุฎุชูุงุฑู ุ ุฃู ุงูุญุตูู ุนูู ุตูุฑ ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ูุงูุชุฎูุต ูู ุงูุชุตููู ุงูุถุฎู. ูู ุจุนุถ ุงูุฃุญูุงู ูููู ุงูุฃูุฑ ุฃูุซุฑ ููุงุกูุฉ: ุฏุนูุง ูููู ุนูุฏูุง ูุญุตู ุนูู ูุชุบูุฑ ุงุฎุชูุงุฑู ุ ุซู ูุทุจู ุฏุงูุฉ ุงูุฑููุงุช ุนููู. ูููู ูุถุน ุงูุฑูุฒ ูู ูุชูุฉ if / guard ูุงุญุฏุฉ ุ ูุณุชุธู ููุฌุฒุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ูุซุงู ููุนูู ูุน ูุธููุฉ ุงูุฑููุงุช:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">blah</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">String</span> <span class="hljs-keyword">throws</span> {
    	<span class="hljs-keyword">throw</span> <span class="hljs-type">NetworkError</span>.serverError<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">do</span> {
    	<span class="hljs-keyword">let</span> string = <span class="hljs-keyword">try</span> blah()
    	<span class="hljs-comment">//     ,      </span>
    	<span class="hljs-keyword">let</span> anotherString = <span class="hljs-keyword">try</span> blah()<font></font>
    } <span class="hljs-keyword">catch</span> {
    	<span class="hljs-comment">//  NetworkError.serverError</span>
    	<span class="hljs-built_in">print</span>(error)<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">//  string = nil</span>
    <span class="hljs-keyword">let</span> string = <span class="hljs-keyword">try</span>? blah()</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ุชุฎูุท ูุน ุงูุตูุฏ ูู ูุบุงุช ุฃุฎุฑู. ูุง ูููู Swift ุจุฅููุงุก ุงุณุชุซูุงุก ุ ูููู ููุชุจ ูููุฉ ุงูุฎุทุฃ (ุฅุฐุง ุญุฏุซ) ูู ุณุฌู ุฎุงุต. ุฅุฐุง ูุงูุช ููุงู ูููุฉ ุ ูุฅููุง ุชุฐูุจ ุฅูู ูุชูุฉ ุงูุฎุทุฃ ุ ุฅุฐุง ูู ุชูู ูุฐูู ุ ุชุณุชูุฑ ูุชูุฉ do. ุงููุตุงุฏุฑ ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ูููุถูู: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.mikeash.com/pyblog/friday-qa-2017-08-25-swift-error-handling-implementation.html</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุฐู ุงูุทุฑููุฉ ุฌูุฏุฉ ููุชุนุงูู ูุน ุงูุฃุญุฏุงุซ ุงููุชุฒุงููุฉ ูููุณุช ููุงุณุจุฉ ุฌุฏูุง ููุนูููุงุช ุงูุทูููุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ุทูุจ ุงูุจูุงูุงุช ุนุจุฑ ุงูุดุจูุฉ) ุ ููุง ูุฏ ูุณุชุบุฑู ููุชูุง ุทูููุงู. ุซู ููููู ุงุณุชุฎุฏุงู ุฅููุงู ุจุณูุท.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏูู ูู Swift 5 ุ ุชู ุชูุฏูู ุงููุชูุฌุฉ - ุชุนุฏุงุฏูุง ูุญุชูู ุนูู ุฎูุงุฑูู - ุงููุฌุงุญ ูุงููุดู. </font><font style="vertical-align: inherit;">ูู ุญุฏ ุฐุงุชู ุ ูุง ูุชุทูุจ ุงุณุชุฎุฏุงู ุงูุฎุทุฃ. </font><font style="vertical-align: inherit;">ูููุณ ููุง ุนูุงูุฉ ูุจุงุดุฑุฉ ุจุงูุชุฒุงูู. </font><font style="vertical-align: inherit;">ููู ุงูุนูุฏุฉ ุจุฏูุฉ ุฅูู ูุฐุง ุงูููุน ุฅูู ุงูุงูุชูุงู ุฃูุซุฑ ููุงุกูุฉ ููุฃุญุฏุงุซ ุบูุฑ ุงููุชุฒุงููุฉ (ูุฅูุง ุณูุชุนูู ุนููู ุงูููุงู ุจุงุซููู ูู ุงูุฅููุงู ูุงููุฌุงุญ ูุงููุดู ุ ุฃู ุฅุฑุฌุงุน ูุนููุชูู). </font><font style="vertical-align: inherit;">ูููุชุจ ูุซุงูุงู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">blah</span>&lt;ResultType&gt;<span class="hljs-params">(handler: @escaping <span class="hljs-params">(Swift.Result&lt;ResultType, Error&gt;)</span></span></span> -&gt; <span class="hljs-type">Void</span>) {<font></font>
	handler(.failure(<span class="hljs-type">NetworkError</span>.serverError)<font></font>
}<font></font>
<font></font>
blah&lt;<span class="hljs-type">String</span>&gt;(handler { result <span class="hljs-keyword">in</span> 
	<span class="hljs-keyword">switch</span> result {
		<span class="hljs-keyword">case</span> .success(<span class="hljs-keyword">let</span> value):
			<span class="hljs-built_in">print</span>(value)
		<span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
			<span class="hljs-built_in">print</span>(error)<font></font>
	}<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ุงููุนูููุงุช ูุงููุฉ ููุง ููุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฉ ุฃุฎุฑู ุจุฅูุฌุงุฒ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุฎุทุงุก ูู Swift ูู ุจุฑูุชูููู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุงุฆู ุชูุฏูู ุงูุฃุฎุทุงุก ูู ุดูู ุงูุชุนุฏุงุฏ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุทุฑููุชุงู ููุชุนุงูู ูุน ุงูุฃุฎุทุงุก - ูุชุฒุงูู (ุงุตุทูุงุฏ) ูุบูุฑ ูุชุฒุงูู (ููุงูุณู ุฃู ุงููุชูุฌุฉ ุงูุฎุงุตุฉ ุจู)</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุต ุงูุฎุทุฃ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูุนูุฏ ุฅูู ููุถูุน ุงูููุงู. </font><font style="vertical-align: inherit;">ูู ุงูููุฑุฉ ุฃุนูุงู ุ ุฃูุดุฃูุง ููุน ุงูุฃุฎุทุงุก ุงูุฎุงุต ุจูุง. </font><font style="vertical-align: inherit;">ูุง ูู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">NetworkError</span>: <span class="hljs-title">Error</span> </span>{
        <span class="hljs-comment">//  500 </span>
	<span class="hljs-keyword">case</span> serverError
        <span class="hljs-comment">//   ,   </span>
	<span class="hljs-keyword">case</span> responseError
        <span class="hljs-comment">//  ,   ,  </span>
	<span class="hljs-keyword">case</span> internetError<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชุงุฌ ุงูุขู ุฅูู ูุทุงุจูุฉ ูู ุฎุทุฃ ูุน ูุต ูููู ูููุณุชุฎุฏู ุฃู ููููู. </font><font style="vertical-align: inherit;">ุณูุนุฑุถู ูู ุงููุงุฌูุฉ ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ. </font><font style="vertical-align: inherit;">ูุณุฑุน ุจุฑูุชูููู LocalizedError ููุณุงุนุฏุชูุง. </font><font style="vertical-align: inherit;">ูุฑุซ ุฎุทุฃ ุงูุจุฑูุชูููู ูููููู ูุน 4 ุฎุตุงุฆุต:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">LocalizedError</span> : <span class="hljs-title">Error</span> </span>{
    <span class="hljs-keyword">var</span> errorDescription: <span class="hljs-type">String?</span> { <span class="hljs-keyword">get</span> }
    <span class="hljs-keyword">var</span> failureReason: <span class="hljs-type">String?</span> { <span class="hljs-keyword">get</span> }
    <span class="hljs-keyword">var</span> recoverySuggestion: <span class="hljs-type">String?</span> { <span class="hljs-keyword">get</span> }
    <span class="hljs-keyword">var</span> helpAnchor: <span class="hljs-type">String?</span> { <span class="hljs-keyword">get</span> }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุฐ ุงูุจุฑูุชูููู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">NetworkError</span>: <span class="hljs-title">LocalizedError</span> </span>{
    	<span class="hljs-keyword">var</span> errorDescription: <span class="hljs-type">String?</span> {
            <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
            <span class="hljs-keyword">case</span> .serverError, .responseError:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Error"</span>
    	    <span class="hljs-keyword">case</span> .internetError:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"No Internet Connection"</span><font></font>
            }<font></font>
        }<font></font>
    <font></font>
        <span class="hljs-keyword">var</span> failureReason: <span class="hljs-type">String?</span> {
            <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
            <span class="hljs-keyword">case</span> .serverError, .responseError:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Something went wrong"</span>
    	    <span class="hljs-keyword">case</span> .internetError:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><font></font>
            }<font></font>
        }<font></font>
    <font></font>
        <span class="hljs-keyword">var</span> recoverySuggestion: <span class="hljs-type">String?</span> {
            <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
            <span class="hljs-keyword">case</span> .serverError, .responseError:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Please, try again"</span>
    	    <span class="hljs-keyword">case</span> .internetError:
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Please check your internet connection and try again"</span><font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุงุฏ ุณูุชุบูุฑ ุนุฑุถ ุงูุฎุทุฃ:</font></font><br>
<br>
<pre><code class="swift hljs">	<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error = error {
		<span class="hljs-keyword">let</span> errorMessage = [error.failureReason, error.recoverySuggestion].<span class="hljs-built_in">compactMap</span>({ $<span class="hljs-number">0</span> }).joined(separator: <span class="hljs-string">". "</span>)
		<span class="hljs-keyword">let</span> alertVC = <span class="hljs-type">UIAlertController</span>(<font></font>
			title: error.errorDescription,<font></font>
			message: errorMessage,<font></font>
			preferredStyle: .alert)<font></font>
		<span class="hljs-keyword">let</span> action = <span class="hljs-type">UIAlertAction</span>(title: <span class="hljs-string">"OK"</span>, style: .<span class="hljs-keyword">default</span>) { (<span class="hljs-number">_</span>) -&gt; <span class="hljs-type">Void</span> <span class="hljs-keyword">in</span> }<font></font>
		alertVC.addAction(action)<font></font>
		<span class="hljs-keyword">self</span>.present(alertVC, animated: <span class="hljs-literal">true</span>, competion: <span class="hljs-literal">nil</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑุงุฆุน ุ ูุงู ูู ุดูุก ุณููุงู ูุน ุงููุต. </font><font style="vertical-align: inherit;">ุฏุนูุง ููุชูู ุฅูู ุงูุฃุฒุฑุงุฑ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทุฃ ุงูุงุณุชุฑุฏุงุฏ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ููุฏู ุฎูุงุฑุฒููุฉ ูุนุงูุฌุฉ ุงูุฎุทุฃ ูู ูุฎุทุท ุจุณูุท. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ูุนุฑุถ ูููุง ุ ูุชูุฌุฉ ูุฎุทุฃ ูุง ุ ูุฑุจุน ุญูุงุฑ ูุน ุฎูุงุฑุงุช ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ุ ูุฅูุบุงุก ุงูุฎูุงุฑุงุช ุ ูุฑุจูุง ุจุนุถ ุงูุฎูุงุฑุงุช ุงููุญุฏุฏุฉ ุ ูุญุตู ุนูู ุงููุฎุทุท: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a9/te/n3/a9ten3zbrffm7sz8kkupfo8xsuy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุจุฏุฃ ูู ุญู ุงููุดููุฉ ูู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ูุธููุฉ ุชูุธูุฑ ุชูุจูููุง ุจุฎูุงุฑุงุช n + 1. </font><font style="vertical-align: inherit;">ูุฑูู ุ ููุง ููุฏ ุฃู ูุธูุฑ ุฎุทุฃ:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RecovableAction</span> </span>{
    	<span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    	<span class="hljs-keyword">let</span> action: () -&gt; <span class="hljs-type">Void</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showRecovableOptions</span><span class="hljs-params">(actions: [RecovableAction], from viewController: UIViewController)</span></span> {
    	<span class="hljs-keyword">let</span> alertActions = actions.<span class="hljs-built_in">map</span> { <span class="hljs-type">UIAlertAction</span>(name: $<span class="hljs-number">0</span>.title, action: $<span class="hljs-number">0</span>.action) }
    	<span class="hljs-keyword">let</span> cancelAction = <span class="hljs-type">UIAlertAction</span>(name: <span class="hljs-string">"Cancel"</span>, action: <span class="hljs-literal">nil</span>)
    	<span class="hljs-keyword">let</span> alertController = <span class="hljs-type">UIAlertController</span>(actions: alertActions)<font></font>
    	viewController.present(alertController, complition: <span class="hljs-literal">nil</span>)<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธููุฉ ุชุญุฏุฏ ููุน ุงูุฎุทุฃ ูุชููู ุฅุดุงุฑุฉ ูุนุฑุถ ุชูุจูู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handleError</span><span class="hljs-params">(error: Error)</span></span> {
	<span class="hljs-keyword">if</span> error <span class="hljs-keyword">is</span> <span class="hljs-type">RecovableError</span> {<font></font>
		showRecovableOptions(actions: error.actions, from: viewController)<font></font>
		<span class="hljs-keyword">return</span><font></font>
	}<font></font>
	showErrorAlert(...)<font></font>
} </code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุน ูุจูุฑ ูู ุงูุฎุทุฃ ุ ูุงูุฐู ูู ุณูุงู ูููู ููุง ูุฌุจ ูุนูู ุจูุฐุง ุงูุฎูุงุฑ ุฃู ุฐุงู.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RecovableError</span>: <span class="hljs-title">Error</span> </span>{
	<span class="hljs-keyword">let</span> recovableACtions: [<span class="hljs-type">RecovableAction</span>]
	<span class="hljs-keyword">let</span> context: <span class="hljs-type">Context</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุณู ุงูุฑุฃุณ ุนูู ุงูููุฑ ุฑุณููุง ุชุฎุทูุทููุง ูุฏุฑุงุฌุชู. </font><font style="vertical-align: inherit;">ูููู ุฃููุงู ุ ุฏุนูุง ูุชุญูู ูู ุฃุฑุตูุฉ Apple. </font><font style="vertical-align: inherit;">ุฑุจูุง ุฌุฒุก ูู ุงูุขููุฉ ูู ุฃูุฏููุง ุจุงููุนู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูููุฐ ุงูุฃุตููุ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููููู ูู ุงูุจุญุซ ุนูู ุงูุฅูุชุฑูุช ุณูุคุฏู ุฅูู ุจุฑูุชูููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RecoverableError</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">// A specialized error that may be recoverable by presenting several potential recovery options to the user.</span>
<span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">RecoverableError</span> : <span class="hljs-title">Error</span> </span>{
    <span class="hljs-keyword">var</span> recoveryOptions: [<span class="hljs-type">String</span>] { <span class="hljs-keyword">get</span> }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">attemptRecovery</span><span class="hljs-params">(optionIndex recoveryOptionIndex: Int, resultHandler handler: @escaping <span class="hljs-params">(Bool)</span></span></span> -&gt; <span class="hljs-type">Void</span>)
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">attemptRecovery</span><span class="hljs-params">(optionIndex recoveryOptionIndex: Int)</span></span> -&gt; <span class="hljs-type">Bool</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃููุง ูุจุญุซ ุนู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recoveryOptions: [ุณูุณูุฉ] - ุฎุงุตูุฉ ุชุฎุฒู ุฎูุงุฑุงุช ุงูุงุณุชุฑุฏุงุฏ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func tryRecovery (optionIndex: Int) -&gt; Bool - ูุณุชุนูุฏ ูู ุฎุทุฃ ุจุดูู ูุชุฒุงูู. </font><font style="vertical-align: inherit;">ุตุญูุญ - ุนูู ุงููุฌุงุญ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">func tryRecovery (optionIndex: Intุ resultHandler: (Bool) -&gt; Void) - ุฎูุงุฑ ุบูุฑ ูุชุฒุงูู ุ ุงูููุฑุฉ ูู ููุณูุง</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุน ุฃุฏูุฉ ุงูุงุณุชุฎุฏุงู ุ ูู ุดูุก ุฃูุซุฑ ุชูุงุถุนุง. </font><font style="vertical-align: inherit;">ูุคุฏู ุจุญุซ ุตุบูุฑ ุนูู ูููุน Apple ูุงูููุทูุฉ ุงููุญูุทุฉ ุฅูู ูุชุงุจุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุญูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชูุจ ูุจู ุฅุนูุงูุงุช Swift ุงูุนุงูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฌุฒ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงูุชูููุฑ ูู ุงูุขููุฉ ูุชุทุจููุงุช MacOs ูุชุนุฑุถ ูุฑุจุน ุญูุงุฑ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุจูุงุคู ูู ุงูุฃุตู ุญูู NSError.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุบููู ูุงุฆู RecoveryAttempter ุฏุงุฎู ุงูุฎุทุฃ ูู userInfo ุ ูุงูุฐู ูุนุฑู ุนู ุดุฑูุท ุงูุฎุทุฃ ูููููู ุงุฎุชูุงุฑ ุฃูุถู ุญู ูููุดููุฉ. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃูุง ูููู ุงููุงุฆู ุตูุฑุงู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูุฏุนู RecoveryAttempter ุงูุจุฑูุชูููู ุบูุฑ ุงูุฑุณูู NSErrorRecoveryAttempting</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถุง ูู userInfo ูุฌุจ ุฃู ูููู ุฎูุงุฑ ุงูุงุณุชุฑุฏุงุฏ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุดูุก ูุฑุชุจุท ุจุงุณุชุฏุนุงุก ุฃุณููุจ PresentError ุ ุงูููุฌูุฏ ููุท ูู macOS SDK. </font><font style="vertical-align: inherit;">ูุธูุฑ ุชูุจูู</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุนุฑุถ ุงูุชูุจูู ูู ุฎูุงู PresentError ุ ูุนูุฏูุง ุชุญุฏุฏ ุฎูุงุฑูุง ูู ุงููุงูุฐุฉ ุงูููุจุซูุฉ ูู AppDelegate ุ ูุชู ุชุดููุด ูุธููุฉ ูุซูุฑุฉ ููุงูุชูุงู:</font></font></li>
</ul><br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">attemptRecovery</span><span class="hljs-params">(fromError error: Error, optionIndex recoveryOptionIndex: Int, delegate: <span class="hljs-keyword">Any</span>?, didRecoverSelector: Selector?, contextInfo: UnsafeMutableRawPointer?)</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจูุง ุฃูู ููุณ ูุฏููุง ุฎุทุฃ ูู ุงูุญุงุถุฑ ุ ููุง ูููููุง ุณุญุจู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vp/xo/cj/vpxocjapqc5ywmiq8hhq3djow6o.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ูุฐู ุงูููุทุฉ ุ ูุจุฏู ุฃููุง ุญูุฑูุง ุฌุซุฉ ุจุฏูุงู ูู ููุฒ. </font><font style="vertical-align: inherit;">ุณูุชุนูู ุนูููุง ุชุญููู ุงูุฎุทุฃ ุฅูู NSError ููุชุงุจุฉ ูุธููุชูุง ุงูุฎุงุตุฉ ูุนุฑุถ ุงูุชูุจูู ุจูุงุณุทุฉ ุงูุชุทุจูู. </font><font style="vertical-align: inherit;">ุญููุฉ ูู ุงูุงุชุตุงูุงุช ุงูุถูููุฉ. </font><font style="vertical-align: inherit;">ุฅูู ุฃูุฑ ูููู ูุตุนุจ ูุบูุฑ ูุงุถุญ ุชูุงููุง - "ููุงุฐุงุ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุซูุงุก ุชุญุถูุฑ ููุฌุงู ุงูุดุงู ุงูุชุงูู ุ ูุฏ ูุชุณุงุกู ุงููุฑุก ุนู ุณุจุจ ุงุณุชุฎุฏุงู ุงููุธููุฉ ุฃุนูุงู ุงููููุถ ูุซู ุฃู ูุชุฌุงูุฒ ุงููุญุฏุฏ. </font><font style="vertical-align: inherit;">ุงูุฌูุงุจ ุฃุฏูุงู:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฌุงุจุฉ</font></font></b><div class="spoiler_text">      iOS 2.          !         ( ,   ).  :)<br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุงุก ุฏุฑุงุฌุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุฐ ุงูุจุฑูุชูููู ุ ูู ูุคุฐููุง:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RecoverableError</span>: <span class="hljs-title">Foundation</span>.<span class="hljs-title">RecoverableError</span> </span>{
	<span class="hljs-keyword">let</span> error: <span class="hljs-type">Error</span>
	<span class="hljs-keyword">var</span> recoveryOptions: [<span class="hljs-type">String</span>] {
		<span class="hljs-keyword">return</span> [<span class="hljs-string">"Try again"</span>]s<font></font>
	}<font></font>
	<font></font>
	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">attemptRecovery</span><span class="hljs-params">(optionIndex recoveryOptionIndex: Int)</span></span> -&gt; <span class="hljs-type">Bool</span> {
		<span class="hljs-comment">//  ,    </span>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><font></font>
	}<font></font>
	<font></font>
	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">attemptRecovery</span><span class="hljs-params">(optionIndex: Int, resultHandler: <span class="hljs-params">(Bool)</span></span></span> -&gt; <span class="hljs-type">Void</span>) {
		<span class="hljs-comment">//      . </span>
               <span class="hljs-comment">//      </span>
		<span class="hljs-keyword">switch</span> optionIndex {
			<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
				resultHandler(<span class="hljs-literal">true</span>)
			<span class="hljs-keyword">default</span>: <font></font>
				resultHandler(<span class="hljs-literal">false</span>)<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุจุนูุฉ ุงูููุฑุณ ููุณุช ุงูุญู ุงูุฃูุซุฑ ููุงุกูุฉ (ูููููุง ุจุณูููุฉ ุชุฌุงูุฒ ุงูุตููู ูุชุนุทู ุงูุชุทุจูู). </font><font style="vertical-align: inherit;">ูููู ู MVP ุณุชูุนู. </font><font style="vertical-align: inherit;">ุฎุฐ ููุฑุฉ ุขุจู ุ ููุท ูู ุจุชุญุฏูุซูุง. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ูุงุฆู Attempter ูููุตู ูุฎูุงุฑุงุช ุฒุฑ ุณููุฏููุง ูู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RecoveryAttemper</span> </span>{
    	<span class="hljs-comment">//   </span>
    	<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> _recoveryOptions: [<span class="hljs-type">RecoveryOptions</span>]<font></font>
    <font></font>
    	<span class="hljs-keyword">var</span> recoveryOptionsText: [<span class="hljs-type">String</span>] {
    		<span class="hljs-keyword">return</span> _recoveryOptions.<span class="hljs-built_in">map</span>({ $<span class="hljs-number">0</span>.title })<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-keyword">init</span>(options: [<span class="hljs-type">RecoveryOptions</span>] {<font></font>
    		_recoveryOptions = recoveryOptions<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-comment">//    </span>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">attemptRecovery</span><span class="hljs-params">(fromError error: Error, optionIndex: Int)</span></span> -&gt; <span class="hljs-type">Bool</span> {
    		<span class="hljs-keyword">let</span> option = _recoveryOptions[optionIndex]
    				<span class="hljs-keyword">switch</span> option {
    				<span class="hljs-keyword">case</span> .tryAgain(<span class="hljs-keyword">let</span> action)<font></font>
    					action()<font></font>
    					<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    				<span class="hljs-keyword">case</span> .cancel:
    					<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><font></font>
    				}<font></font>
    		}<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">//  enum,       </span>
    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">RecoveryOptions</span> </span>{
    	<span class="hljs-comment">//      (,     )</span>
    	<span class="hljs-keyword">case</span> tryAgain(action: (() -&gt; <span class="hljs-type">Void</span>))
    	<span class="hljs-keyword">case</span> cancel<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฃูุช ุจุญุงุฌุฉ ูุฅุธูุงุฑ ุงูุฎุทุฃ. </font><font style="vertical-align: inherit;">ุฃูุง ุญูุง ุฃุญุจ ุงูุจุฑูุชููููุงุช ุ ูุฐูู ุณุฃุญู ุงููุดููุฉ ูู ุฎูุงููู. </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุจุฑูุชูููู ุนุงููู ูุฅูุดุงุก UIAlertController ูู ุงูุฃุฎุทุงุก:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ErrorAlertCreatable</span>: <span class="hljs-title">class</span>, <span class="hljs-title">ErrorReasonExtractable</span> </span>{
    	<span class="hljs-comment">//     </span>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createAlert</span><span class="hljs-params">(<span class="hljs-keyword">for</span> error: Error)</span></span> -&gt; <span class="hljs-type">UIAlertController</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - Default implementation</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ErrorAlertCreatable</span> <span class="hljs-title">where</span> <span class="hljs-title">Self</span>: <span class="hljs-title">UIViewController</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createAlert</span><span class="hljs-params">(<span class="hljs-keyword">for</span> error: Error)</span></span> -&gt; <span class="hljs-type">UIAlertController</span> {
    		<span class="hljs-comment">//      </span>
    		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> recoverableError = error <span class="hljs-keyword">as</span>? <span class="hljs-type">RecoverableError</span> {
    			<span class="hljs-keyword">return</span> createRecoverableAlert(<span class="hljs-keyword">for</span>: recoverableError)<font></font>
    		}<font></font>
    		<span class="hljs-keyword">let</span> defaultTitle = <span class="hljs-string">"Error"</span>
    		<span class="hljs-keyword">let</span> description = errorReason(from: error)<font></font>
    <font></font>
    		<span class="hljs-comment">//          </span>
    		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> localizedError = error <span class="hljs-keyword">as</span>? <span class="hljs-type">LocalizedError</span> {
    			<span class="hljs-keyword">return</span> createAlert(<font></font>
    				title: localizedError.errorDescription ?? defaultTitle,<font></font>
    				message: description,<font></font>
    				actions: [.okAction],<font></font>
    				aboveAll: aboveAll)<font></font>
    		}<font></font>
    <font></font>
    		<span class="hljs-keyword">return</span> createAlert(title: defaultTitle, message: description, actions: [.okAction])<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-keyword">fileprivate</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createAlert</span><span class="hljs-params">(title: String?, message: String?, actions: [UIAlertAction])</span></span> -&gt; <span class="hljs-type">UIAlertController</span> {
    		<span class="hljs-keyword">let</span> alertViewController = <span class="hljs-type">UIAlertController</span>(title: title, message: message, preferredStyle: .alert)<font></font>
    		actions.forEach({ alertViewController.addAction($<span class="hljs-number">0</span>) })
    		<span class="hljs-keyword">return</span> alertViewController<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-keyword">fileprivate</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createRecoverableAlert</span><span class="hljs-params">(<span class="hljs-keyword">for</span> recoverableError: RecoverableError)</span></span> -&gt; <span class="hljs-type">UIAlertController</span> {
    		<span class="hljs-keyword">let</span> title = recoverableError.errorDescription
    		<span class="hljs-keyword">let</span> message = recoverableError.recoverySuggestion
    		<span class="hljs-comment">//     . </span>
    		<span class="hljs-keyword">let</span> actions = recoverableError.recoveryOptions.enumerated().<span class="hljs-built_in">map</span> { (element) -&gt; <span class="hljs-type">UIAlertAction</span> <span class="hljs-keyword">in</span>
    		<span class="hljs-keyword">let</span> style: <span class="hljs-type">UIAlertAction</span>.<span class="hljs-type">Style</span> = element.offset == <span class="hljs-number">0</span> ? .cancel : .<span class="hljs-keyword">default</span>
    		<span class="hljs-keyword">return</span> <span class="hljs-type">UIAlertAction</span>(title: element.element, style: style) { <span class="hljs-number">_</span> <span class="hljs-keyword">in</span><font></font>
    			recoverableError.attemptRecovery(optionIndex: element.offset)<font></font>
    		      }<font></font>
    		}<font></font>
    		<span class="hljs-keyword">return</span> createAlert(title: title, message: message, actions: actions)<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createOKAlert</span><span class="hljs-params">(with text: String)</span></span> -&gt; <span class="hljs-type">UIAlertController</span> {
    		<span class="hljs-keyword">return</span> createAlert(title: text, message: <span class="hljs-literal">nil</span>, actions: [.okAction])<font></font>
    	}<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ERror</span>
    
    //     <span class="hljs-title">ok</span>
    <span class="hljs-title">extension</span> <span class="hljs-title">UIAlertAction</span> </span>{
    	<span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> okAction = <span class="hljs-type">UIAlertAction</span>(title: <span class="hljs-string">"OK"</span>, style: .cancel) { (<span class="hljs-number">_</span>) -&gt; <span class="hljs-type">Void</span> <span class="hljs-keyword">in</span> }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">//    </span>
    <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ErrorReasonExtractable</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">errorReason</span><span class="hljs-params">(from error: Error)</span></span> -&gt; <span class="hljs-type">String?</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - Default implementation</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ErrorReasonExtractable</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">errorReason</span><span class="hljs-params">(from error: Error)</span></span> -&gt; <span class="hljs-type">String?</span> {
    		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> localizedError = error <span class="hljs-keyword">as</span>? <span class="hljs-type">LocalizedError</span> {
    			<span class="hljs-keyword">return</span> localizedError.recoverySuggestion<font></font>
    		}<font></font>
    		<span class="hljs-keyword">return</span> <span class="hljs-string">"Something bad happened. Please try again"</span><font></font>
    	}<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฑูุชูููู ุฅุธูุงุฑ ุงูุชูุจููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ErrorAlertPresentable</span>: <span class="hljs-title">class</span> </span>{
	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentAlert</span><span class="hljs-params">(from error: Error)</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// MARK: - Default implementation</span>
<span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ErrorAlertPresentable</span> <span class="hljs-title">where</span> <span class="hljs-title">Self</span>: <span class="hljs-title">ErrorAlertCreatable</span> &amp; <span class="hljs-title">UIViewController</span> </span>{
	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentAlert</span><span class="hljs-params">(from error: Error)</span></span> {
		<span class="hljs-keyword">let</span> alertVC = createAlert(<span class="hljs-keyword">for</span>: error)<font></font>
		present(alertVC, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุชุถุญ ุฃููุง ูุฑููุฉ ุ ูููู ูููู ุงูุชุญูู ูููุง. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุดุงุก ุทุฑู ุฌุฏูุฏุฉ ูุฅุธูุงุฑ ุฎุทุฃ (ุนูู ุณุจูู ุงููุซุงู ุ ูุฎุจ ุฃู ุฅุธูุงุฑ ุทุฑููุฉ ุนุฑุถ ูุฎุตุตุฉ) ูุชุณุฌูู ุงูุชูููุฐ ุงูุงูุชุฑุงุถู ุฏูู ุชุบููุฑ ุฃู ุดูุก ูู ุงูุทุฑููุฉ ุงููุทููุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุชุฑุถ ูุง ุฅุฐุง ูุงูุช ูุฌูุฉ ูุธุฑูุง ูุดูููุฉ ุจุจุฑูุชูููู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ViewControllerInput</span>: <span class="hljs-title">class</span> </span>{
     <span class="hljs-comment">//  </span><font></font>
    }<font></font>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewControllerInput</span>: <span class="hljs-title">ErrorAlertPresentable</span> </span>{ }<font></font>
    <font></font>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">ErrorAlertCreatable</span> </span>{ }
    <span class="hljs-comment">//  ,         ,    </span>
    <span class="hljs-comment">//    </span><font></font>
    <font></font>
    <span class="hljs-comment">//       "",    ErrorAlertPresentable      . </span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">ErrorToastCreatable</span> </span>{ }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุซุงููุง ุฃุจุณุท ุจูุซูุฑ ุ ูุฐูู ูุฏุนู ููุง ุงูุจุฑูุชูููููู ููุดุบู ุงูุชุทุจูู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">requestFeed</span><span class="hljs-params">(...)</span></span> {<font></font>
    		service.requestObject { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] (result) <span class="hljs-keyword">in</span>
    			<span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> `<span class="hljs-keyword">self</span>` = <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
    			<span class="hljs-keyword">switch</span> result {
    			<span class="hljs-keyword">case</span> .success:
    				<span class="hljs-keyword">break</span>
    			<span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
    				<span class="hljs-comment">//           </span>
    				<span class="hljs-comment">// -     (   viewController)  ,</span>
    				<span class="hljs-comment">//    .     tryAgainOption </span>
    				<span class="hljs-keyword">let</span> tryAgainOption = <span class="hljs-type">RecoveryOptions</span>.tryAgain {
    					<span class="hljs-keyword">self</span>.requestFeed(...)<font></font>
    				}<font></font>
    				<span class="hljs-keyword">let</span> recoveryOptions = [tryAgainOption]
    				<span class="hljs-keyword">let</span> attempter = <span class="hljs-type">RecoveryAttemper</span>(recoveryOptions: recoveryOptions)
    				<span class="hljs-keyword">let</span> recovableError = <span class="hljs-type">RecoverableError</span>(error: error, attempter: attempter)
    				<span class="hljs-keyword">self</span>.presentAlert(from: recovableError)<font></font>
    			}<font></font>
    		}<font></font>
    	}<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - ErrorAlertCreatable</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">ErrorAlertCreatable</span> </span>{ }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - ErrorAlertPresentable</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">ErrorAlertPresentable</span> </span>{ }</code></pre><br>
<img src="https://habrastorage.org/webt/3h/fl/vh/3hflvhmxpfkuzgskzcpe9hodl2k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฃู ูู ุดูุก ูุนูู. </font><font style="vertical-align: inherit;">ูุงู ุฃุญุฏ ุงูุดุฑูุท ุงูุฃูููุฉ ูู 2-3 ุฎุทูุท. </font><font style="vertical-align: inherit;">ุณูููู ุจุชูุณูุน ูุญุงููุชูุง ูุน ููุดุฆ ููุงุณุจ:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RecoveryAttemper</span> </span>{
    	<span class="hljs-comment">//</span><font></font>
    	...<font></font>
    	<span class="hljs-comment">//</span>
    	<span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">tryAgainAttempter</span><span class="hljs-params">(block: @escaping <span class="hljs-params">(<span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type">Void</span>)) -&gt; <span class="hljs-type">Self</span> {
    		<span class="hljs-keyword">return</span> <span class="hljs-type">RecoveryAttemper</span>(recoveryOptions: [.cancel, .tryAgain(action: block)])<font></font>
    	}<font></font>
    }<font></font>
    <font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">requestFeed</span><span class="hljs-params">()</span></span> {<font></font>
    		service.requestObject { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] (result) <span class="hljs-keyword">in</span>
    			<span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> `<span class="hljs-keyword">self</span>` = <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
    			<span class="hljs-keyword">switch</span> result {
    			<span class="hljs-keyword">case</span> .success:
    				<span class="hljs-keyword">break</span>
    			<span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
    				<span class="hljs-comment">//    </span>
    				<span class="hljs-keyword">let</span> recovableError = <span class="hljs-type">RecoverableError</span>(error: error, attempter: .tryAgainAttempter(block: {
    					<span class="hljs-keyword">self</span>.requestFeed()<font></font>
    				}))<font></font>
    				<span class="hljs-keyword">self</span>.presentAlert(from: recovableError)<font></font>
    			}<font></font>
    		}<font></font>
    	}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุญุตููุง ุนูู ุญู MVP ุ ููู ูููู ูู ุงูุตุนุจ ุนูููุง ุงูุงุชุตุงู ุจู ูุงูุงุชุตุงู ุจู ูู ุฃู ููุงู ูู ุชุทุจูููุง. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ูู ุงูุชุญูู ูู ุงูุญุงูุงุช ุงููุชุทูุฑุฉ ููุงุจููุฉ ุงูุชูุณุน.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ูู ูุงู ูุฏููุง ุนุฏุฉ ุณููุงุฑูููุงุช ุฎุฑูุฌุ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุฑุถ ุฃู ุงููุณุชุฎุฏู ูุฏูู ูุณุชูุฏุน ูู ุชุทุจูููุง. </font><font style="vertical-align: inherit;">ุงููุจู ูู ุญุฏ ุงูููุงู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุฏู ุงููุณุชุฎุฏู ุณููุงุฑูููุงู ููุฎุฑูุฌ ูู ุงูุฎุทุฃ: ูููู ูููุณุชุฎุฏู ุฅูุง ุชุญุฑูุฑ ูุณุงุญุฉ ุฃู ุดุฑุงุก ุงููุฒูุฏ. </font><font style="vertical-align: inherit;">ุณููุชุจ ุงูููุฏ ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//  </span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">runOutOfSpace</span><span class="hljs-params">()</span></span> {<font></font>
    		service.runOfSpace { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] (result) <span class="hljs-keyword">in</span>
    			<span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> `<span class="hljs-keyword">self</span>` = <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
    			<span class="hljs-keyword">switch</span> result {
    			<span class="hljs-keyword">case</span> .success:
    				<span class="hljs-keyword">break</span>
    			<span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
    				<span class="hljs-keyword">let</span> notEnoughSpace = <span class="hljs-type">RecoveryOptions</span>.freeSpace {
    					<span class="hljs-keyword">self</span>.freeSpace()<font></font>
    				}<font></font>
    <font></font>
    				<span class="hljs-keyword">let</span> buyMoreSpace = <span class="hljs-type">RecoveryOptions</span>.buyMoreSpace {
    					<span class="hljs-keyword">self</span>.buyMoreSpace()<font></font>
    				}<font></font>
    				<span class="hljs-keyword">let</span> options = [notEnoughSpace, buyMoreSpace]
    				<span class="hljs-keyword">let</span> recovableError = <span class="hljs-type">RecoverableError</span>(error: error, attempter: .cancalableAttemter(options: options))
    				<span class="hljs-keyword">self</span>.presentAlert(from: recovableError)<font></font>
    			}<font></font>
    		}<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">freeSpace</span><span class="hljs-params">()</span></span> {
    		<span class="hljs-keyword">let</span> alertViewController = createOKAlert(with: <span class="hljs-string">"Free space selected"</span>)<font></font>
    		present(alertViewController, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">buyMoreSpace</span><span class="hljs-params">()</span></span> {
    		<span class="hljs-keyword">let</span> alertViewController = createOKAlert(with: <span class="hljs-string">"Buy more space selected"</span>)<font></font>
    		present(alertViewController, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)<font></font>
    	}<font></font>
    <font></font>
    <font></font>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">RecoveryAttemper</span> </span>{
    	<span class="hljs-comment">//</span><font></font>
    	...<font></font>
    	<span class="hljs-comment">//</span>
    	<span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">cancalableAttemter</span><span class="hljs-params">(options: [RecoveryOptions])</span></span> -&gt; <span class="hljs-type">Self</span> {
    		<span class="hljs-keyword">return</span> <span class="hljs-type">RecoveryAttemper</span>(recoveryOptions: [.cancel] + options)<font></font>
    	}<font></font>
    }<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/d5/eg/zq/d5egzquyykwxtjorhevcq2pe1mg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุงูุชุนุงูู ูุน ูุฐุง ุจุณูููุฉ. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ูุฑุบุจ ูู ุฅุธูุงุฑ ุชูุจูู ุ ุจู ุนุฑุถ ูุนูููุงุช ูู ููุชุตู ุงูุดุงุดุฉุ</font></font></h3><br>
<img src="https://habrastorage.org/webt/fg/xr/pq/fgxrpqsgg_yqmy4txescavcvdvc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุญู ุฒูุฌุงู ูู ุงูุจุฑูุชููููุงุช ุงูุฌุฏูุฏุฉ ุนู ุทุฑูู ุงูููุงุณ ูุดููุชูุง:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ErrorViewCreatable</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createErrorView</span><span class="hljs-params">(<span class="hljs-keyword">for</span> error: Error)</span></span> -&gt; <span class="hljs-type">ErrorView</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - Default implementation</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ErrorViewCreatable</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createErrorView</span><span class="hljs-params">(<span class="hljs-keyword">for</span> error: Error)</span></span> -&gt; <span class="hljs-type">ErrorView</span> {
    		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> recoverableError = error <span class="hljs-keyword">as</span>? <span class="hljs-type">RecoverableError</span> {
    			<span class="hljs-keyword">return</span> createRecoverableAlert(<span class="hljs-keyword">for</span>: recoverableError)<font></font>
    		}<font></font>
    <font></font>
    		<span class="hljs-keyword">let</span> defaultTitle = <span class="hljs-string">"Error"</span>
    		<span class="hljs-keyword">let</span> description = errorReason(from: error)
    		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> localizedError = error <span class="hljs-keyword">as</span>? <span class="hljs-type">LocalizedError</span> {
    			<span class="hljs-keyword">return</span> createErrorView(<font></font>
    				title: localizedError.errorDescription ?? defaultTitle,<font></font>
    				message: description)<font></font>
    		}<font></font>
    		<span class="hljs-keyword">return</span> createErrorView(title: defaultTitle, message: description)<font></font>
    		}<font></font>
    <font></font>
    	<span class="hljs-keyword">fileprivate</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createErrorView</span><span class="hljs-params">(title: String?, message: String?, actions: [ErrorView.Action] = [])</span></span> -&gt; <span class="hljs-type">ErrorView</span> {
    		<span class="hljs-comment">//  ErrorView        . </span>
                <span class="hljs-comment">//     github</span>
    		<span class="hljs-keyword">return</span> <span class="hljs-type">ErrorView</span>(title: title, description: message, actions: actions)<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-keyword">fileprivate</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createRecoverableAlert</span><span class="hljs-params">(<span class="hljs-keyword">for</span> recoverableError: RecoverableError)</span></span> -&gt; <span class="hljs-type">ErrorView</span> {
    		<span class="hljs-keyword">let</span> title = recoverableError.errorDescription
    		<span class="hljs-keyword">let</span> message = errorReason(from: recoverableError)
    		<span class="hljs-keyword">let</span> actions = recoverableError.recoveryOptions.enumerated().<span class="hljs-built_in">map</span> { (element) -&gt; <span class="hljs-type">ErrorView</span>.<span class="hljs-type">Action</span> <span class="hljs-keyword">in</span>
    			<span class="hljs-keyword">return</span> <span class="hljs-type">ErrorView</span>.<span class="hljs-type">Action</span>(title: element.element) {<font></font>
    				recoverableError.attemptRecovery(optionIndex: element.offset)<font></font>
    			}<font></font>
    		}<font></font>
    		<span class="hljs-keyword">return</span> createErrorView(title: title, message: message, actions: actions)<font></font>
    	}<font></font>
    }</code></pre><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ErrorViewAddable</span>: <span class="hljs-title">class</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentErrorView</span><span class="hljs-params">(from error: Error)</span></span><font></font>
    <font></font>
    	<span class="hljs-keyword">var</span> errorViewSuperview: <span class="hljs-type">UIView</span> { <span class="hljs-keyword">get</span> }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - Default implementation</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ErrorViewAddable</span> <span class="hljs-title">where</span> <span class="hljs-title">Self</span>: <span class="hljs-title">ErrorViewCreatable</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentErrorView</span><span class="hljs-params">(from error: Error)</span></span> {
    		<span class="hljs-keyword">let</span> errorView = createErrorView(<span class="hljs-keyword">for</span>: error)<font></font>
    		errorViewSuperview.addSubview(errorView)<font></font>
    		errorView.center = errorViewSuperview.center<font></font>
    	}<font></font>
    }<font></font>
    <font></font>
    <font></font>
    <span class="hljs-comment">//    </span><font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - ErrorAlertCreatable</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">ErrorViewCreatable</span> </span>{ }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - ErrorAlertPresentable</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">ErrorViewAddable</span> </span>{
    	<span class="hljs-keyword">var</span> errorViewSuperview: <span class="hljs-type">UIView</span> {
    		<span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span><font></font>
    	}<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ุงูุขู ุฅุธูุงุฑ ุงูุฃุฎุทุงุก ูู ุดูู ุนุฑุถ ูุนูููุงุช. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูููููุง ุฃู ููุฑุฑ ููู ูุธูุฑ ููู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุฑุฉ ุงูุฃููู ุงูุชู ุชุฏุฎู ูููุง ุงูุดุงุดุฉ ูุงูุฎุทุฃ - ุฅุธูุงุฑ ุนุฑุถ ุงููุนูููุงุช. </font><font style="vertical-align: inherit;">ูุฅุฐุง ุชู ุชุญููู ุงูุดุงุดุฉ ุจูุฌุงุญ ุ ูููู ุงูุฅุฌุฑุงุก ุนูู ุงูุดุงุดุฉ ุฃุนุงุฏ ุฎุทุฃ - ุฅุธูุงุฑ ุชูุจูู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ููุงู ูุตูู ุฅูู ุทุฑููุฉ ุงูุนุฑุถุ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุจุนุถ ุงูุฃุญูุงู ุชุญุชุงุฌ ุฅูู ุฅููุงุก ุฎุทุฃ ุ ูููู ูุง ููุฌุฏ ูุตูู ุฅูู ุงูุนุฑุถ. </font><font style="vertical-align: inherit;">ุฃู ูุง ูุนุฑู ุฃู ุนุฑุถ ูุดุท ุญุงูููุง ุ ููุฑูุฏ ุฃู ูุนุฑุถ ุชูุจูููุง ููู ูู ุดูุก. </font><font style="vertical-align: inherit;">ููููุฉ ุญู ูุฐู ุงููุดููุฉุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุญุฏุฉ ูู ุฃุณูู ุงูุทุฑู (ูู ุฑุฃูู) ููููุงู ุจููุณ ุงูุดูุก ุงูุฐู ุชูุนูู Apple ูุน ููุญุฉ ุงูููุงุชูุญ. </font><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ูุงูุฐุฉ ุฌุฏูุฏุฉ ุฃุนูู ุงูุดุงุดุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูููู ุจู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-meta">@UIApplicationMain</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppDelegate</span>: <span class="hljs-title">UIResponder</span>, <span class="hljs-title">UIApplicationDelegate</span> </span>{<font></font>
<font></font>
	<span class="hljs-comment">//   โ   . </span>
	<span class="hljs-comment">//              DI</span>
	<span class="hljs-keyword">static</span> <span class="hljs-keyword">private</span>(<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> errorWindow: <span class="hljs-type">UIWindow</span> = {
		<span class="hljs-keyword">let</span> alertWindow = <span class="hljs-type">UIWindow</span>.<span class="hljs-keyword">init</span>(frame: <span class="hljs-type">UIScreen</span>.main.bounds)<font></font>
		alertWindow.backgroundColor = .clear<font></font>
<font></font>
		<span class="hljs-comment">//  rootViewController,    present   viewController</span>
		<span class="hljs-keyword">let</span> viewController = <span class="hljs-type">UIViewController</span>()<font></font>
		viewController.view.backgroundColor = .clear<font></font>
		alertWindow.rootViewController = viewController<font></font>
<font></font>
		<span class="hljs-keyword">return</span> alertWindow<font></font>
	}()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅูุดุงุก ุชูุจูู ุฌุฏูุฏ ูููู ุฃู ูุธูุฑ ุนูู ุฑุฃุณ ูู ุดูุก:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AboveAllAlertController</span>: <span class="hljs-title">UIAlertController</span> </span>{
	<span class="hljs-keyword">var</span> alertWindow: <span class="hljs-type">UIWindow</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-type">AppDelegate</span>.alertWindow<font></font>
	}<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">let</span> topWindow = <span class="hljs-type">UIApplication</span>.shared.windows.last
		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> topWindow = topWindow {<font></font>
			alertWindow.windowLevel = topWindow.windowLevel + <span class="hljs-number">1</span><font></font>
		}<font></font>
<font></font>
		alertWindow.makeKeyAndVisible()<font></font>
		alertWindow.rootViewController?.present(<span class="hljs-keyword">self</span>, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewWillDisappear</span><span class="hljs-params">(<span class="hljs-number">_</span> animated: Bool)</span></span> {
		<span class="hljs-keyword">super</span>.viewWillDisappear(animated)<font></font>
<font></font>
		alertWindow.isHidden = <span class="hljs-literal">true</span><font></font>
	}<font></font>
}</code></pre><br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ErrorAlertCreatable</span>: <span class="hljs-title">class</span> </span>{
    	<span class="hljs-comment">//      </span>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createAlert</span><span class="hljs-params">(<span class="hljs-keyword">for</span> error: Error, aboveAll: Bool)</span></span> -&gt; <span class="hljs-type">UIAlertController</span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - Default implementation</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ErrorAlertCreatable</span> <span class="hljs-title">where</span> <span class="hljs-title">Self</span>: <span class="hljs-title">UIViewController</span> </span>{<font></font>
    	...<font></font>
    	<span class="hljs-comment">//     </span>
    	<span class="hljs-keyword">fileprivate</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">createAlert</span><span class="hljs-params">(title: String?, message: String?, actions: [UIAlertAction], aboveAll: Bool)</span></span> -&gt; <span class="hljs-type">UIAlertController</span> {
    		<span class="hljs-keyword">let</span> alertViewController = aboveAll ?
    			<span class="hljs-type">AboveAllAlertController</span>(title: title, message: message, preferredStyle: .alert) :
    			<span class="hljs-type">UIAlertController</span>(title: title, message: message, preferredStyle: .alert)<font></font>
    		actions.forEach({ alertViewController.addAction($<span class="hljs-number">0</span>) })
    		<span class="hljs-keyword">return</span> alertViewController<font></font>
    	}<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">//     </span>
    <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ErrorAlertPresentable</span>: <span class="hljs-title">class</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentAlert</span><span class="hljs-params">(from error: Error)</span></span>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentAlertAboveAll</span><span class="hljs-params">(from error: Error)</span></span><font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">// MARK: - Default implementation</span>
    <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ErrorAlertPresentable</span> <span class="hljs-title">where</span> <span class="hljs-title">Self</span>: <span class="hljs-title">ErrorAlertCreatable</span> &amp; <span class="hljs-title">UIViewController</span> </span>{
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentAlert</span><span class="hljs-params">(from error: Error)</span></span> {
    		<span class="hljs-keyword">let</span> alertVC = createAlert(<span class="hljs-keyword">for</span>: error, aboveAll: <span class="hljs-literal">false</span>)<font></font>
    		present(alertVC, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">presentAlertAboveAll</span><span class="hljs-params">(from error: Error)</span></span> {
    		<span class="hljs-keyword">let</span> alertVC = createAlert(<span class="hljs-keyword">for</span>: error, aboveAll: <span class="hljs-literal">true</span>)
    		<span class="hljs-comment">//         </span>
    		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> alertVC = alertVC <span class="hljs-keyword">as</span>? <span class="hljs-type">AboveAllAlertController</span> {<font></font>
    			alertVC.show()<font></font>
    			<span class="hljs-keyword">return</span><font></font>
    		}<font></font>
    		<span class="hljs-comment">//    ,  - </span>
    		<span class="hljs-built_in">assert</span>(<span class="hljs-literal">false</span>, <span class="hljs-string">"Should create AboveAllAlertController"</span>)<font></font>
    		present(alertVC, animated: <span class="hljs-literal">true</span>, completion: <span class="hljs-literal">nil</span>)<font></font>
    	}<font></font>
    }</code></pre><br>
<img src="https://habrastorage.org/webt/qr/es/uo/qresuobexdwaxevl3gnmsfjsc6i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุธูุฑ ุ ูู ูุชุบูุฑ ุดูุก ุ ูููููุง ุงูุขู ุชุฎูุตูุง ูู ุงูุชุณูุณู ุงููุฑูู ููุญุฏุงุช ุงูุชุญูู ูู ุงูุนุฑุถ. </font><font style="vertical-align: inherit;">ุฃูุตู ุจุดุฏุฉ ุจุนุฏู ุงูุงุจุชุนุงุฏ ุนู ูุฐู ุงููุฑุตุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุฃูุถู ุงุณุชุฏุนุงุก ุฑูุฒ ุงูุนุฑุถ ูู ุฌูุงุฒ ุชูุฌูู ุฃู ููุงู ูู ููุณ ุงูุญููู. </font><font style="vertical-align: inherit;">ุจุงุณู ุงูุดูุงููุฉ ูุงููุถูุญ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏููุง โโูููุณุชุฎุฏููู ุฃุฏุงุฉ ุฑุงุฆุนุฉ ูุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุงููุฑุบูุจ ููู ุฃุซูุงุก ุงูุฃุนุทุงู ูุงูุตูุงูุฉ ููุง ุฅูู ุฐูู. </font><font style="vertical-align: inherit;">ูุง ุงูุฐู ูููููุง ุชุญุณูููุ</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏ ุงูุฃุฏูู ูู ููุช ุงูุทูุจ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุชุฑุถ ุฃููุง ุฃุบูููุง ุงูุฅูุชุฑูุช ูุญุงูููุง ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูู ุจุชุดุบูู ุงููุญูู. </font><font style="vertical-align: inherit;">ุณูุฃุชู ุงูุฌูุงุจ ุนูู ุงูููุฑ ูุงูุญุตูู ุนูู ูุนุจุฉ ูุตุบุฑุฉ "Clicker". </font><font style="vertical-align: inherit;">ูุน ุงูุฑุณูู ุงููุชุญุฑูุฉ ุงููุงูุถุฉ. </font><font style="vertical-align: inherit;">ููุณ ูุทูููุง ุฌุฏูุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/3n/mu/uz3nmu7_ag_k4swmsiy8gw2y1z0.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูุญูู ุงูุฎุทุฃ ุงูููุฑู ุฅูู ุนูููุฉ. </font><font style="vertical-align: inherit;">ุงูููุฑุฉ ุจุณูุทุฉ - ุณูุฌุนู ุงูุญุฏ ุงูุฃุฏูู ูู ููุช ุงูุทูุจ. </font><font style="vertical-align: inherit;">ููุง ูุนุชูุฏ ุงูุชูููุฐ ุนูู ุฃุณููุจู ูู ุงูุชูุงุตู. </font><font style="vertical-align: inherit;">ูููุชุฑุถ ุฃููู ุฃุณุชุฎุฏู ุงูุนูููุฉ ุ ููุจุฏู ูู ููุง ููู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DelayOperation</span>: <span class="hljs-title">AsyncOperation</span> </span>{
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> _delayTime: <span class="hljs-type">Double</span><font></font>
<font></font>
	<span class="hljs-keyword">init</span>(delayTime: <span class="hljs-type">Double</span> = <span class="hljs-number">0.3</span>) {<font></font>
		_delayTime = delayTime<font></font>
	}<font></font>
	<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">super</span>.main()<font></font>
<font></font>
		<span class="hljs-type">DispatchQueue</span>.global().asyncAfter(deadline: .now() + _delayTime) {
			<span class="hljs-keyword">self</span>.state = .finished<font></font>
		}<font></font>
	}<font></font>
}<font></font>
		<font></font>
<span class="hljs-comment">// -  </span>
<span class="hljs-keyword">let</span> flowListOperation = flowService.list(<span class="hljs-keyword">for</span>: pageID, path: path, limiter: limiter)
<span class="hljs-keyword">let</span> handler = createHandler(<span class="hljs-keyword">for</span>: flowListOperation)
<span class="hljs-keyword">let</span> delayOperation = <span class="hljs-type">DelayOperation</span>(delayTime: <span class="hljs-number">0.5</span>)
<span class="hljs-comment">///  &gt;&gt;&gt;  addDependency. </span><font></font>
[flowListOperation, delayOperation] &gt;&gt;&gt; handler<font></font>
operationQueue.addOperations([flowListOperation, delayOperation, handler])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ููุญุงูุฉ ุงูุนุงูุฉ ุ ูููููู ุชูุฏูู ูุฐุง ุงูุชุตููู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//  global      </span>
<span class="hljs-type">DispatchQueue</span>.global().asyncAfter(deadline: .now() + <span class="hljs-number">0.15</span>) {
    <span class="hljs-comment">// your code here</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ูููููุง ุฅุฌุฑุงุก ุชุฌุฑูุฏ ุนูู ุฃูุนุงููุง ุบูุฑ ุงููุชุฒุงููุฉ ูุฅุถุงูุฉ ุฅููุงููุฉ ุงูุฅุฏุงุฑุฉ ุฅูููุง:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Task</span> </span>{
    	<span class="hljs-keyword">let</span> closure: () -&gt; <span class="hljs-type">Void</span><font></font>
    <font></font>
    	<span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _delayTime: <span class="hljs-type">Double?</span><font></font>
    <font></font>
    	<span class="hljs-keyword">init</span>(closure: @escaping () -&gt; <span class="hljs-type">Void</span>) {
    		<span class="hljs-keyword">self</span>.closure = closure<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-keyword">fileprivate</span> <span class="hljs-keyword">init</span>(closure: @escaping () -&gt; <span class="hljs-type">Void</span>, time: <span class="hljs-type">Double</span>) {
    		<span class="hljs-keyword">self</span>.closure = closure<font></font>
    		_delayTime = time<font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-meta">@discardableResult</span>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">Self</span> {
    		<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> delayTime = _delayTime {
    			<span class="hljs-type">DispatchQueue</span>.global().asyncAfter(deadline: .now() + delayTime) {
    				<span class="hljs-keyword">self</span>.closure()<font></font>
    			}<font></font>
    			<span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span><font></font>
    		}<font></font>
    		closure()<font></font>
    		<span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span><font></font>
    	}<font></font>
    <font></font>
    	<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">delayedTask</span><span class="hljs-params">(time: Double)</span></span> -&gt; <span class="hljs-type">Self</span> {
    		<span class="hljs-keyword">return</span> <span class="hljs-type">Task</span>(closure: closure, time: time)<font></font>
    	}<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-comment">//    </span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">requestObject</span><span class="hljs-params">(completionHandler: @escaping <span class="hljs-params">(<span class="hljs-params">(Result&lt;Bool, Error&gt;)</span></span></span></span> -&gt; <span class="hljs-type">Void</span>)) -&gt; <span class="hljs-type">Task</span> {
    		<span class="hljs-keyword">return</span> <span class="hljs-type">Task</span> {<font></font>
    			completionHandler(.failure(<span class="hljs-type">NetworkError</span>.internetError))<font></font>
    		}<font></font>
    			.delayedTask(time: <span class="hljs-number">0.5</span>)<font></font>
    		.run()<font></font>
    	}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูู ุชุจุฏู ุงูุฑุณูู ุงููุชุญุฑูุฉ ุงูุฎุงุตุฉ ุจูุง ุญุงุฏุฉ ููุบุงูุฉ ุ ุญุชู ุนูุฏ ุนุฏู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช. </font><font style="vertical-align: inherit;">ุฃูุตู ุจุงุณุชุฎุฏุงู ูุฐุง ุงูููุฌ ูู ูุนุธู ุงูุฃูุงูู ูุน ุงูุฑุณูู ุงููุชุญุฑูุฉ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9k/oq/46/9koq46qq0wffoivy0ucs18om1cm.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุณุจุฉ ุฅูู ูุถุน ุงูุทุงุฆุฑุฉ ุ ูู ุงูุฌูุฏ ุนุฑุถ ูุทุงูุจุฉ ุชูุจูู (ูููู ูููุณุชุฎุฏู ุฃู ููุณู ุฅููุงู ุชุดุบูู ุงููุถุน ูุจุฏุก ุงูุนูู ูุน ุงูุชุทุจูู). </font><font style="vertical-align: inherit;">ููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุนู ุจุฑููุฉ. </font><font style="vertical-align: inherit;">ูุจุงููุณุจุฉ ุฅูู ุงูุงุณุชูุณุงุฑุงุช ุงููููุฉ ุ ูู ุงูุฌูุฏ ุฃู ุชูุฑุฑ ุนุฏุฉ ูุฑุงุช ุชุญุช ุบุทุงุก ุงููุญุฑู ูุจู ุฅุธูุงุฑ ุชูุจูู ... ูููู ุงููุฒูุฏ ุนู ุฐูู ูุฑุฉ ุฃุฎุฑู :)</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุจููุฉ ุงูุงุฎุชุจุงุฑ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ูุชู ุงูุชุฎูุต ูู ูู ุงูููุทู ูู viewController (ููุง ูุฏููุง ุงูุขู) ุ ููู ุงูุตุนุจ ุงุฎุชุจุงุฑู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุฅุฐุง ุชูุช ูุดุงุฑูุฉ viewController ูุน ููุทู ุงูุฃุนูุงู ุ ูุตุจุญ ุงูุงุฎุชุจุงุฑ ูููุฉ ุชุงููุฉ. </font><font style="vertical-align: inherit;">ุจููุฑุฉ ูู </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุฑูุงู</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฐุฑุงุน </font><s><font style="vertical-align: inherit;">ุ</font></s><font style="vertical-align: inherit;"> ูุชุญูู ููุทู ุงูุฃุนูุงู ุฅูู:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">requestFeed</span><span class="hljs-params">()</span></span> {<font></font>
		service.requestObject { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] (result) <span class="hljs-keyword">in</span>
			<span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> `<span class="hljs-keyword">self</span>` = <span class="hljs-keyword">self</span> <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
			<span class="hljs-keyword">switch</span> result {
			<span class="hljs-keyword">case</span> .success:
				<span class="hljs-keyword">break</span>
			<span class="hljs-keyword">case</span> .failure(<span class="hljs-keyword">let</span> error):
				<span class="hljs-type">DispatchQueue</span>.main.async {
					<span class="hljs-keyword">let</span> recoverableError = <span class="hljs-type">RecoverableError</span>(error: error, attempter: .tryAgainAttempter(block: {
						<span class="hljs-keyword">self</span>.requestFeed()<font></font>
					}))<font></font>
					<span class="hljs-comment">//     </span>
					<span class="hljs-keyword">self</span>.viewInput?.presentAlert(from: recoverableError)<font></font>
				}<font></font>
			}<font></font>
		}<font></font>
	}</code></pre><br>
<pre><code class="swift hljs"><span class="hljs-comment">// -  </span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testRequestFeedFailed</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// Put out mock that conform to AlertPresntable protocol</span>
	controller.viewInput = <span class="hljs-type">ViewInputMock</span>()<font></font>
<font></font>
	<span class="hljs-comment">//  .    ,    </span>
	<span class="hljs-comment">//    expectation</span><font></font>
	controller.requestFeed()<font></font>
<font></font>
	<span class="hljs-comment">// Our mocked object should save to true to bool variable when method called</span>
	<span class="hljs-type">XCTAssert</span>(controller.viewInput.presentAlertCalled)
	<span class="hljs-comment">// Next we could compare recoverable error attempter to expected attempter</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุน ูุฐู ุงูููุงูุฉ ูููู ุจูุง ููู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตูุน ุขููุฉ ููุงุฆูุฉ ูุนุฑุถ ุงูุชูุจููุงุช</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุนุทู ุงููุณุชุฎุฏููู ุฎูุงุฑ ุฅุนุงุฏุฉ ูุญุงููุฉ ุนูููุฉ ุบูุฑ ูุงุฌุญุฉ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุงูู ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ูุน ุชุทุจูููุง</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
โ&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุงุจุท ุฅูู ุงูููุฏ</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุดูุฑุง ููู ุฌููุนุง ุนูู ููุชูู ุ ูุณุนุฏูู ุฃู ุฃุฌูุจ ุนูู ุฃุณุฆูุชูู ูู ุงูุชุนูููุงุช.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar495336/index.html">ุงููุชูุฉ ูุฑุณูู ููุดุฑูุงุช ูููุณ ููุท</a></li>
<li><a href="../ar495338/index.html">ุฃูุถู ุงูููุงุฑุณุงุช ูุงููุจุงุฏุฆ ุงูุชูุฌูููุฉ ูุฅุทูุงู ุงูุญุงููุงุช ู Kubernetes ูู ุจูุฆุงุช ุงูุฅูุชุงุฌ</a></li>
<li><a href="../ar495340/index.html">ููููุฉ ุชุบููุฑ ุนูู ุงููุณุคูู ูู ูุทุนู ููุญุตูู ุนูู ูุธููุฉ ุฌูุฏุฉ ูู ูุฌุงู ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
<li><a href="../ar495342/index.html">ุชุณููุฉ ุงูุจุทุงูุงุช ุงููุตุฑููุฉ ูู ุงูุชุฌุงุฑุฉ - ุฅูุดุงุก ูุฌููุนุฉ ุจูุงูุงุช ููุชูุญุฉ ูุฑุณููุงุช ูุนูููุงุชูุฉ ูู Google Data Studio</a></li>
<li><a href="../ar495344/index.html">ุชูุญูุฏู: ููู ุชุฌุนู Lamoda ุฎุฏูุงุช Go ูุชุณูุฉ</a></li>
<li><a href="../ar499818/index.html">ุงูุชุณููู ุจุฑููุฉ ุฃูุฒุจููุฉ</a></li>
<li><a href="../ar499820/index.html">ููุงุฐุง ุงุฎุชุฑูุง Kotlin ูุฅุญุฏู ุงููุบุงุช ุงููุณุชูุฏูุฉ ูุฏููุง. ุงูุฌุฒุก 2: Kotlin Multiplatform</a></li>
<li><a href="../ar499822/index.html">ููุทุฉ ูุตูู ูุงุณูููุฉ ููุงุจู ุฌูุงุฒ ุชูุฌูู: ูุง ูู ุงูุงุฎุชูุงูุงุชุ</a></li>
<li><a href="../ar499824/index.html">ููุฎุต ุงูุฃุญุฏุงุซ ูููุธูู ุชูุธูู ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุชูููููุฌูุง ุงููุนูููุงุช ูู ูุงูู 2020</a></li>
<li><a href="../ar499826/index.html">ุถุบุท ุงูุฏู ุงูููุฒุน</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>