<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤔 🙎 👴🏾 1000人以上のユーザーがいるサイズ691 GBのデータベース用にFirebirdとLinuxをチューニングする 👨🏾‍🤝‍👨🏽 🌐 🐛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Firebirdはロシアで非常に人気のあるオープンDBMSであり、騒々しいマーケティングキャンペーンがないにもかかわらず、特に医療および状態自動化システムなど、多数の重要なシステムで使用されています。
 
 データベースのサイズと、そのようなシステムでのアクティブユーザー数はので、この記事では、私は...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>1000人以上のユーザーがいるサイズ691 GBのデータベース用にFirebirdとLinuxをチューニングする</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476636/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firebirdはロシアで非常に人気のあるオープンDBMSであり、騒々しいマーケティングキャンペーンがないにもかかわらず、特に医療および状態自動化システムなど、多数の重要なシステムで使用されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースのサイズと、そのようなシステムでのアクティブユーザー数はので、この記事では、私はで大きなFirebirdのデータベースの具体的な実施例に基づいて火の鳥とLinuxの設定の最適化の経験について話します、通常はかなり大きいです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BeZdorov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（インゴスストラフ）、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AlfaZdravを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、と私はなり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">触れ</font></a><font style="vertical-align: inherit;">、他の最適化企業の経験Firebird + Linux。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最適化の対象を詳しく見てみましょう。Firebird3.0.5 DBMS（HQbird拡張機能付き）は、691GBのデータベース（現在）に1000〜1100人の日次ユーザーを提供し、Linux CentOS 7で実行され、サーバーはHP DL380アイロンを使用します。バックアップサーバーへのレプリケーションはデータベース用に構成されています（レプリケーションの問題はこの記事の範囲外です）。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DBMSは、ロシアで</font><font style="vertical-align: inherit;">最も人気のある医療情報システムの1つで</font><font style="vertical-align: inherit;">ある医療情報システムInfoklinika（ロシアの会社</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smart Delta Systemsが製造</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースの詳細（スクリーンショットはHQbirdから取得）を見てみましょう：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データは</font><font style="vertical-align: inherit;">データベースに</font><font style="vertical-align: inherit;">集中的に挿入されます-約</font><font style="vertical-align: inherit;">0.4-0.5 </font><font style="vertical-align: inherit;">GB </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vf/v7/4k/vfv74kl3pcxkou42snnuyv98fqg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000-1100接続の</font><font style="vertical-align: inherit;">毎日の増加は</font><font style="vertical-align: inherit;">通常の毎日の負荷です：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/73/qj/5t/73qj5tu1spoxlkq7debfz8ifn2q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
集中的な増加とアクティブな作業にもかかわらず、データベースには含まれていませんレコードのかなりの数のガベージバージョン-マルチバージョンアーキテクチャの十分な知識で書かれたアプリケーションのおかげで、そして適切に構成されたガベージコレクションのおかげで</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sy/zg/rj/syzgrjtckhyhydolkmeufwwgb_q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
：グリーンゾーンのトランザクションマーカー：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vn/1h/wu/vn1hwu2celimgvpgtioyfugumsi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、データベースのデータは文字列であり、blobは存在しますが、その数は少ないことに注意してください。合計サイズの690 GBのうち10 GBのみです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースの負荷の性質はさまざまで、読み取り操作の75％と書き込みの25％です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k2/gr/xz/k2grxztnytufblqb0y6idmfljeo.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鉄</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このシステムにサービスを提供するサーバーは悪くありませんが、トップエンドにはほど遠いものです。</font></font><br>
<br>
<pre><code class="plaintext hljs">HP ProLiant DL380p Gen8, Gen8 2x Xeon(R) CPU E5v2 @ 2.60GHz, 24 logical cores with HT<font></font>
320Gb RAM, 4 network cards</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディスクサブシステムは、ローカル745Gbディスクと、1.8Tbパーティションを持つSANへのデュアル2ファイバーチャネル接続の2つの部分で構成されています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーティング・システム</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CentOS 7、カーネルバージョンを使用：</font></font><br>
<br>
<pre><code class="plaintext hljs">Linux version 3.10.0-957.21.3.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC) ) #1 SMP Tue Jun 18 16:35:19 UTC 2019
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
論理的な質問、なぜ最新のカーネルとCentOS 8が使用されないのかという答えも論理的です-重要なシステムの移行は、いくつかのマイナーリリースと厳密なテストのリリース後にのみ発生します-これは、既知のバグが2つの未知のものよりも優れているケースの1つです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、2017年までシステムはCentOS 6.xで動作し、移行後はパフォーマンスインジケーターの大幅な改善が認められたことに注意してください。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linuxのセットアップ</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firebirdの絶対不可欠なLinuxカスタマイズ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firebirdが実行されているすべてのLinuxサーバーで2つのパラメーターを増やす必要があります。仮想メモリー領域（VMA）の数と、Firebirdプロセスのオープンファイルの数です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. VMA</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
デフォルトの</font><b><font style="vertical-align: inherit;">VMA</font></b><font style="vertical-align: inherit;">番号は64Kで、4倍にする必要があります。これには、sysctl.confに行を追加する必要があります。</font></font><br>
<br>
<pre><code class="bash hljs">vm.max_map_count=262144</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の値を確認するには、次のコマンドを使用します </font></font><br>
<br>
<pre><code class="bash hljs">sysctl vm.max_map_count</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.最大オープンファイル</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
データベースへの接続ごとに、Firebirdは最大で20の記述子（ファイルハンドル）を開きます（Linuxではすべてのリソースがファイルのように見えるという事実を前提とします）。したがって、デフォルトで開いているファイルの最大数（通常は4096）はすぐに使い果たされます。 。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firebirdで利用可能なファイル数を確認するには、Firebird実行可能ファイルの制限を確認するのが最善です。</font></font><br>
<br>
<pre><code class="bash hljs">cat /proc/$(pgrep firebird)/limits</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Max Open Filesの値を確認し、必要に応じて値を増やす場所。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FirebirdのMax Open Filesパラメータを増やすために、[service]セクションのfirebird-superserver.serviceファイルに次の行を追加しました。</font></font><br>
<br>
<pre><code class="bash hljs">LimitNOFILE=49999</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションのLinuxセットアップ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このサーバーで次の設定も行いました</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。1.スワップネスの削減</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サーバーはFirebird DBMS専用であり、DBMSキャッシュとオペレーティングシステムファイルキャッシュでRAMを効率的に使用したいため、スワップネスをデフォルトの60％から10％に削減しました。 sysctl.confに追加</font></font><br>
<br>
<pre><code class="bash hljs">vm.swappiness=10</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.特別なOSプロセス用の最小予約メモリサイズを増やしました</font></font></b> <br>
<br>
<pre><code class="bash hljs">vm.min_free_kbytes=1048576</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、1GBのメモリ。</font><font style="vertical-align: inherit;">この設定は、メモリの最適化に間接的に影響します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この設定は個別のものであることに注意してください-320GBのRAMがあるため、1GBはそれほど多くありませんが、少量のメモリ（たとえば、32GB）の場合、1GBは多すぎる可能性があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.キープアライブの削減</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Firebirdは、キープアライブ間隔を使用して接続ステータスを確認します。キープアライブのデフォルト値は非常に大きくなる可能性があります。</font><font style="vertical-align: inherit;">300秒に制限すると、ハングしている接続がなくなります</font></font><br>
<br>
<pre><code class="bash hljs">net.ipv4.tcp_keepalive_time=300<font></font>
net.ipv4.tcp_keepalive_probes=5<font></font>
net.ipv4.tcp_keepalive_intvl=15</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linuxのチューニングを増やす</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜこのような少数のLinux設定に制限されるのですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つ目は、控えめな方法でLinuxでサーバーをチューニングすることです（新しいバージョンごとに次第に良くなっています）。2つ目は、このFirebirdデータベースが極端に大きくなく、負荷も高くなく、Linuxが指定された設定に対応していることです。あなたのタスクで。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、LinuxでのFirebirdの作業を最適化するために使用できる設定が他にもいくつかあります。たとえば、</font><font style="vertical-align: inherit;">連邦</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保安局の3 TB Firebirdデータベース（RedBaza）に関するプレゼンテーションで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、いくつかの興味深いことが発表されました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firebirdを構成する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
firebirdsql.orgを使用したFirebirdコミュニティの構成ファイルは非常に保守的に構成されており、多かれ少なかれ強力なサーバーでは、構成ファイルを変更し、使用するアーキテクチャを慎重に選択する必要があります（Firebird 3.0では、2種類の接続：EmbeddedとNetworkServer、3種類のアーキテクチャ：SuperServerがあります。 、SuperClassic、Classic）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、各データベースの設定を使用する必要があります。重要な設定を特定のデータベースを参照して、databases.confに配置します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回のケースでは、バージョン3.0で最も人気のあるSuperServerアーキテクチャを選択しました。マルチコアプロセッサを効率的に使用し、すべての接続でキャッシュを共有します（ただし、データベースごとに個別）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は構成ファイルです（パフォーマンスに関連する値のみ）：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firebird.conf-サーバー上のすべてのデータベースの構成ファイル</font></font></b><br>
<br>
<pre><code class="plaintext hljs">DefaultDbCachePages = 50K    	# pages <font></font>
FileSystemCacheThreshold = 300K  # pages <font></font>
TempBlockSize = 2M			# bytes <font></font>
TempCacheLimit = 20480M		# bytes <font></font>
LockMemSize = 30M			# bytes <font></font>
LockHashSlots = 30011		<font></font>
WireCompression = true <font></font>
ServerMode = Super <font></font>
ExtConnPoolSize = 500		 # HQBird<font></font>
ExtConnPoolLifeTime = 14200	 # HQBird  <font></font>
SortDataStorageThreshold = 8192 	 #HQbird reports queries</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パフォーマンスの観点から、主要なパラメーターは次のとおりです</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。1. DefaultDbCachePages = 50K＃データベースのページで測定（16K = 0.8Gb）</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
firebird.confの</font><b><font style="vertical-align: inherit;">DefaultDbCachePages</font></b><font style="vertical-align: inherit;">ページキャッシュ</font><b><font style="vertical-align: inherit;">の</font></b><font style="vertical-align: inherit;">サイズは、デフォルトで800Mbに特別に設定されています-誤ってサーバー上で起動したテストデータベースは、大量のRAMを占有しようとしませんでした。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. FileSystemCacheThreshold = 300K＃ページ</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
OSファイルキャッシュを使用できるようにするには、このパラメーターをDefaultDBCachePagesより大きい値に設定することが重要です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. TempCacheLimit = 20480M＃bytes</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このパラメーターは、</font><b><font style="vertical-align: inherit;">並べ</font></b><font style="vertical-align: inherit;">替え（およびその他の操作）を伴うクエリのメモリサイズを設定し、システムごとに異なります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソートのサイズを監視した結果、このデータベースには20GBが最適であることがわかりました。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. LockMemSizeおよびLockHashSlots-ロックテーブルの</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パラメーターこれらのパラメーターは、ロックテーブルの初期サイズとハッシュ関数を計算するためのスロット数を決定します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. WireCompression = Trueに</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
設定すると、クライアントとサーバー間のトラフィックが圧縮されます。これは、クライアントアプリケーションによって実行される集中的な外部ステートメントの実行で特に役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残りのパラメーターは、firebird.conf自体と、FirebirdおよびHQbirdの関連ドキュメントに記載されています。</font><font style="vertical-align: inherit;">正確なデータベースを使用して、</font><b><font style="vertical-align: inherit;">databases.conf</font></b><font style="vertical-align: inherit;">で</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も重要な設定を行いました</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs">database1 = /data/database1.fdb {<font></font>
DefaultDbCachePages = 14080K  # 16K pages, 220 GB <font></font>
FileSystemCacheThreshold = 15361K <font></font>
TempSpaceCacheThreshold=2G  #HQbird only, track big sorts<font></font>
LockHashSlots = 40099 <font></font>
LockMemSize = 50M <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご想像のとおり、この場合の主な問題は、大規模なデータベースによって割り当てられたメモリのサイズを正しく計算する方法です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SuperServerアーキテクチャを備えたFirebird 3.0の場合、2つのアプローチがあります。これは、ページキャッシュに割り当てられるRAMが25％以下であり、それ以外の場合はファイルオペレーティングシステムに依存する少量のRAM（最大32GBを含む）を備えたサーバーで使用されます。システム、および微調整、ソートの最適サイズを正確に決定する場合、OSカーネルに特定のメモリサイズを割り当て、大量のファイル操作（バックアップなど）用に特定の量のメモリを予約し、残りをページキャッシュに割り当てます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のケースでは、ロードの性質はデータベースのタイプによって大きく異なる可能性があるため、最適なキャッシュサイズをすぐに取得することはできませんが、数回の反復の後、優れた結果を得ることができます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firebirdの設定でよくある間違い</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的なエラーには次のものがあります</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。1）DBヘッダーページで明示的に指定されたページキャッシュのサイズ。firebird.confおよびdatabases.confで指定された値を上書きします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特にこのエラーは、アーキテクチャをClassic / SuperClassicからSuperServerに変更するときに発生します。Classic/ SuperClassic接続のキャッシュサイズが明確に示された小さい（500〜2000ページ）サイズで正常に機能する場合、SuperServerにははるかに大きなキャッシュが必要です。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確認するには、次のコマンドを実行します</font></font><br>
<br>
<pre><code class="plaintext hljs">gstat -h databasepathname</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 値を確認します</font></font><code>Page Buffers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-0でなければなりません。Firebirdは、databases.confまたはfirebird.confの値を使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘッダーページのページキャッシュ設定をリセットするには、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">gfix -buff 0 databasepathname</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2）ページキャッシュを増やすと、FileSystemCacheThresholdを増やすのを忘れます。これにより、ファイルキャッシュがシャットダウンし、パフォーマンスが低下します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3）デフォルトのデータベースページサイズ（4096または8192）を使用しますが、大きなデータベースの場合は16Kを使用する必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、Linuxで構成され、Firebirdで構成された負荷に対応する、1000人以上のFirebirdユーザーが問題なく動作します。</font><font style="vertical-align: inherit;">このサーバーには、パフォーマンスの面でマージンがあります。これは、1500〜1800ユーザーまでのピーク負荷でテストされました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様の負荷を持つFirebirdデータベース用のLinuxディストリビューションの中で、最も人気のあるのはCentOS 7で、推奨バージョンはFirebird 3.0です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご不明な点がございましたら、コメントまたはメールak@ibase.ruでお答えいたします。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja476610/index.html">少しのビジネスプロセス理論</a></li>
<li><a href="../ja476618/index.html">フォーカスキットの開発方法</a></li>
<li><a href="../ja476620/index.html">SP701 + PCAM-5C + 15分+ VITIS = FPGAのEasy MIPI</a></li>
<li><a href="../ja476624/index.html">モバイル開発における質の高いパイプライン、パート1：Android</a></li>
<li><a href="../ja476628/index.html">PVS-Studioがクラウドに移行：GitLab CI / CD</a></li>
<li><a href="../ja476640/index.html">総当たり攻撃やDoS攻撃からのZimbra OSEの保護</a></li>
<li><a href="../ja476644/index.html">言語レイヤー</a></li>
<li><a href="../ja476646/index.html">werfでの3ウェイマージ：Helmを「ステロイド」としてKubernetesにデプロイ</a></li>
<li><a href="../ja476648/index.html">FINOPOLIS 2019でのLenovo</a></li>
<li><a href="../ja476650/index.html">今日の変化する世界における列挙型の場所</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>