<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💶 🤸🏼 👸🏽 フロントエンドのパフォーマンス：重要なメトリックの解析 🎷 🙃 🎽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="通常、パフォーマンスは特定の時間間隔での操作の数として理解され、それらの数が多いほど優れています。しかし、そのような定義、およびアプローチ全体としては、各ユーザーが独自の「フロントエンド」を持つため、フロントエンドへの適用はほとんどありません。それがまさに私が話したいことであり、実際にあなたの一番上...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>フロントエンドのパフォーマンス：重要なメトリックの解析</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/454920/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ou/4k/ny/ou4knymbtseyhgwt9_zcalajm4s.png"></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常、パフォーマンスは特定の時間間隔での操作の数として理解され、それらの数が多いほど優れています。しかし、そのような定義、およびアプローチ全体としては、各ユーザーが独自の「フロントエンド」を持つため、フロントエンドへの適用はほとんどありません。それがまさに私が話したいことであり、実際にあなたの一番上のMacBookではなく、反対側のユーザーと一緒に「そこに」何が起こるかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これに加えて、コードの最適化の一般的なルールと、注目に値するいくつかのエラーについて簡単に検討します。また</font><font style="vertical-align: inherit;">、プロファイリングだけでなく、すぐに使用できるアプリケーションのパフォーマンスに関する基本的なメトリックの集まりを収集するのに役立つ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について</font><font style="vertical-align: inherit;">も説明します（この記事を最後までお読みください）。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に、フロントエンドのパフォーマンスとは何かを決定し、次にそれを測定する方法に移ります。</font><font style="vertical-align: inherit;">したがって、前述したように、特定の操作数/秒は測定しません。プロジェクトの作業の各段階でプロジェクトで正確に何が発生するのかという疑問に答える実際のデータが必要です。</font><font style="vertical-align: inherit;">これを行うには、次のメトリックのセットが必要です。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロード速度;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のレンダリングの時間と対話性（インタラクティブまでの時間）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーの操作に対する反応速度。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクロールとアニメーションのためのFPS。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの初期化。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPAがある場合は、ルート間の切り替えに費やした時間を測定する必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリとトラフィックの消費。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして...今のところ十分です。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらはすべて基本的なメトリックであり、これがないとフロントエンドで何が起こっているのかを正確に理解することは不可能です。</font><font style="vertical-align: inherit;">そして、フロントエンドだけでなく、実際にはエンドユーザーも同様です。</font><font style="vertical-align: inherit;">ただし、これらのメトリックの収集を開始するには、まずそれらを測定する方法を学ぶ必要があるため、パフォーマンス分析にはどのような方法があるかを思い出してみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず始めに、もちろんPerformance APIです。</font><font style="vertical-align: inherit;">つまり、</font><font style="vertical-align: inherit;">ユーザーがプロジェクトを開くのにかかった時間を知ることができる</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance.timing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">ただし、Performance APIはメトリックの一部のみをカバーし、残りは自分で測定する必要があります。これには、次のツールがあります。</font></font><br>
<sub><div class="scrollable-table"><table>
<tbody><tr>
<th></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">長所</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マイナス</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">console.time（ 'ラベル'）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのまま使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンソールに表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevTools-&gt; Performance-&gt; User Timingに表示されます。</font></font></td>
<td>   DevTools,      (..       ).<br>
<br>
 <code>console.timeEnd</code> c  <code>label</code>.<br>
<br>
  .<br>
<br>
  (-  <code>console.group</code> / <code>groupEnd</code>).</td>
</tr>
<tr>
<td>performance.now()</td>
<td>     .<br>
<br>
   .<br>
<br>
</td>
<td>   .<br>
<br>
   DevTools -&gt; Performance -&gt; User Timing.<br>
<br>
   «».<br>
<br>
 .</td>
</tr>
<tr>
<td>performance.mark / measure</td>
<td>     .<br>
<br>
   .<br>
<br>
  DevTools -&gt; Performance -&gt; User Timing.</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンソールには何も表示されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何かを測定するには、3つの一意のラベルを設定し、2つのメソッドを呼び出す必要がありますが</font></font><code>performance.clearMarks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>performance.clearMeasures</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それ</font><font style="vertical-align: inherit;">以上のニーズが</font><font style="vertical-align: inherit;">あり</font><font style="vertical-align: inherit;">、非常に不便です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グループ化なし。</font></font></td>
</tr>
</tbody></table></div></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その瞬間、私は上記の利点を組み合わせて、できればマイナスのない工具を切る必要があることに気付きました。</font><font style="vertical-align: inherit;">したがって、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PerfKeeper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ました</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">香水店 </font></font></h2><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開始と終了を完全に制御します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーに送信できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンソールに表示されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DevTools-&gt; Performance-&gt; User Timingをサポートします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グループ化があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">色分けがあります（測定単位と同様に、時間だけでなく測定も可能です）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張機能をサポートします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではAPIを記述せず、この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関するドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を記述していません</font><font style="vertical-align: inherit;">。また、記事はそれについてではありませんが、メトリックの収集方法を続けます。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページダウンロード速度 </font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私はすでに述べたように、あなたはからダウンロード速度を見つけることができ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">performance.timing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：（DomReadyと読み込み時）（、HTTPハンドシェイクをインストールする要求を処理し、解決のDNSへの時間）フルページの読み込みに使用すると、ページの読み込みが開始されてから完全なサイクルを見つけることができます、</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/eaf/320/48c/eaf32048c515e0a77ebeaa63e862def4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、次の一連のメトリックを取得する必要があります。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/getpro/habr/post_images/051/23d/b6a/05123db6af6359cc9f364b939f22fbcf.png"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/0d7/297/cdb/0d7297cdbd0c28f16849706a72bc54b5.png"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/6c0/ddc/21b/6c0ddc21b01640151d9e48b0018f2190.png"></td>
</tr>
</tbody></table></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ナビゲーション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張</font><font style="vertical-align: inherit;">のため</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ PERF-ツール/キーパー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
しかし、これだけでは十分ではなく、基本的な値しか受け取っていないのに、何が時間がかかったのか正確にはわかりません。そして、それを見つけるには、HTMLメトリックも含める必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すでに述べた</font><font style="vertical-align: inherit;">ように、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PerfKeeper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用した例を示す</font><font style="vertical-align: inherit;">ので、最初にPerfKeeper </font></font><code>&lt;hed/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自体（2.5 Kb）以降</font><font style="vertical-align: inherit;">をインライン化し</font><font style="vertical-align: inherit;">ます。</font></font><img src="https://habrastorage.org/getpro/habr/post_images/dc8/a62/0b1/dc8a620b1d143b6fd2d328fed332e6ee.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、コンソールにそのような美しさが表示されます。</font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/463/655/c0c/463655c0c0b6d5c23f0edb0828a4040b.png" width="350"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、昔ながらの古典的な測定方法であり、100％機能します。しかし、世界は止まっておらず、より正確な測定のために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resource Timing API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が用意されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">（リソースが別の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Timing-Allow-Origin</font></a><font style="vertical-align: inherit;">ドメインにある場合）</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたを助けること）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ここでは、ページの最初の読み込み中のクラシックエラーについて説明する価値があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GZipとHTTP / 2の欠如（はい、これはまだ一般的です）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不当なフォントの使用（フォントは、1つのヘッダーまたはフッター0_oの電話番号のためにのみ接続される場合があります）;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS / JSバンドルが一般的すぎます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ページの読み込みを最適化する方法：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GZipの代わりにBrotli（またはSDCH）を使用し、HTTP / 2を有効にします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要なCSS（重要）のみを収集し、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSOを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">忘れないでください</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最小のCOREバンドルを分離することでJSバンドルのサイズを最小化し、残りをオンデマンドでロードします。</font><font style="vertical-align: inherit;">非同期;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSとCSSを非ブロッキングモードで</font></font><code>/&gt;  &lt;sript src="..."/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読み込み</font><font style="vertical-align: inherit;">、動的に作成し</font><font style="vertical-align: inherit;">、理想的にはメインコンテンツの後にJSを読み込みます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PNGの代わりにSVGを使用します。JSと組み合わせると、冗長なXMLが削除されます（たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">font-awesomeなど</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像とiframeの両方に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">遅延読み込み</font></a><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">使用します</font></a><font style="vertical-align: inherit;">（これに加えて、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ネイティブサポート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は近い将来に表示されます</font><font style="vertical-align: inherit;">）。</font></font></li>
</ul> <br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のレンダリング時間と対話性（TTI）</font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロード後の次の段階は、ユーザーが結果を見た瞬間であり、インターフェースはインタラクティブモードに入りました。</font><font style="vertical-align: inherit;">これには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance Paint Timing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PerformanceObserver</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が必要</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つ目は、すべてがシンプルなので、呼び出して</font></font><code>performance.getEntriesByType('paint')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つのメトリックを取得します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first-paint-最初のレンダリング。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first-contentful-paint-完全な最初のレンダリング。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/getpro/habr/post_images/ef7/230/acb/ef7230acbfdcace32596ce157bb00706.png" width="350"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペイント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張</font><font style="vertical-align: inherit;">のため</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ PERF-ツール/キーパー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、次の指標であるTime To Interactiveは、もう少し興味深いものです。</font><font style="vertical-align: inherit;">アプリケーションがインタラクティブになったことを確認する正確な方法はありません。</font><font style="vertical-align: inherit;">ユーザーがアクセスできますが、これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">長いタスク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がないことで間接的に理解できます</font><font style="vertical-align: inherit;">。</font></font><br>
<pre><code class="javascript hljs">    <span class="hljs-comment">// TTI</span>
    <span class="hljs-keyword">let</span> ttiLastEntry: PerformanceEntry | <span class="hljs-literal">undefined</span>;
    <span class="hljs-keyword">let</span> ttiPerfObserver: PerformanceObserver;<font></font>
<font></font>
    <span class="hljs-keyword">try</span> {<font></font>
        ttiPerfObserver = <span class="hljs-keyword">new</span> PerformanceObserver(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {<font></font>
            ttiLastEntry = list.getEntries().pop();<font></font>
        });<font></font>
<font></font>
        ttiPerfObserver.observe({<font></font>
            <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'longtask'</span>],<font></font>
        });<font></font>
    } <span class="hljs-keyword">catch</span> (_) {}<font></font>
<font></font>
    domReady(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-comment">// TTI Check</span>
        <span class="hljs-keyword">if</span> (ttiPerfObserver) {
            <span class="hljs-keyword">let</span> tti: number;
            <span class="hljs-keyword">const</span> check = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                <span class="hljs-keyword">if</span> (ttiLastEntry) {<font></font>
                    tti = ttiLastEntry.startTime + ttiLastEntry.duration;<font></font>
<font></font>
                    <span class="hljs-keyword">if</span> (now() - tti &gt;= options.ttiDelay) {
                        <span class="hljs-comment">//  logntask  ,  ,</span>
                        <span class="hljs-comment">//     ;]</span>
                        send(<span class="hljs-string">'tti'</span>, <span class="hljs-string">'value'</span>, <span class="hljs-number">0</span>, tti);<font></font>
                        ttiPerfObserver.disconnect();<font></font>
                    } <span class="hljs-keyword">else</span> {<font></font>
                        setTimeout(check, options.ttiDelay);<font></font>
                    }<font></font>
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (tti) {<font></font>
                    send(<span class="hljs-string">'tti'</span>, <span class="hljs-string">'value'</span>, <span class="hljs-number">0</span>, tti);<font></font>
                    ttiPerfObserver.disconnect();<font></font>
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">//   logntask,         ,</span>
                    <span class="hljs-comment">//  ,       DOMReady!</span><font></font>
                    tti = now();<font></font>
                    setTimeout(check, <span class="hljs-number">500</span>);<font></font>
                }<font></font>
            }<font></font>
<font></font>
            <span class="hljs-comment">//  </span><font></font>
            check();<font></font>
        }<font></font>
    });<font></font>
</code></pre><br>
<img src="https://habrastorage.org/getpro/habr/post_images/a03/dcb/6e1/a03dcb6e138ee982ab4cd90a2c1b7f09.png" width="350"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張の作業の例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のために</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、@ PERF-ツール/キーパー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの基本的なメトリックに加えて、アプリケーション準備メトリックも必要です。</font><font style="vertical-align: inherit;">あなたのコードのどこかは次のようになります：</font></font><pre><code class="javascript hljs">Import { system } <span class="hljs-keyword">from</span> <span class="hljs-string">'@perf-tools/keeper'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applicationBoot</span>(<span class="hljs-params">el, data</span>) </span>{
    <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> Application(el, data);<font></font>
<font></font>
    <span class="hljs-comment">//    </span>
    app.ready(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
            system.add(<span class="hljs-string">'application-ready'</span>, <span class="hljs-number">0</span>, system.perf.now());
            <span class="hljs-comment">// ️application-ready: 3074.000ms</span><font></font>
      });<font></font>
<font></font>
    <span class="hljs-keyword">return</span> app;<font></font>
}</code></pre><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーアクションへの応答速度</font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指標には非常に大きなフィールドがあり、それらは非常に個別であるため、どのプロジェクトにも適合する2つの基本的な指標について説明します。つまり、</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のイベント</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><b><font style="vertical-align: inherit;">最初のイベント</font></b><font style="vertical-align: inherit;">の時間、たとえば最初のクリック（ユーザーが行った場所を分割）など、この指標はすべての種類の検索結果、商品のリスト、ニュースフィードなど。これを使うと、制御することができますどのようにあなたの行動からの応答時間とユーザフロー（の変化：デザイン/新機能/最適化、など）</font></font><img src="https://habrastorage.org/getpro/habr/post_images/31a/f2c/e7e/31af2ce7e1ed48f7bfc4cacc6a6ddb0e.png" width="350"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の拡張の例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のために</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、@ PERF-ツール/キーパー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイテンシ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -などの特定のイベントの処理遅延</font></font><code>click</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>submit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>scroll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
遅延を測定するには、イベントハンドラーを</font></font><code>window</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sに</font><font style="vertical-align: inherit;">ぶら下げて</font><font style="vertical-align: inherit;">、差</font></font><code>capture = true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font><code>requestAnimationFrame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算します。これが遅延になります。</font></font><pre><code class="javascript hljs"><span class="hljs-built_in">window</span>.addEventListener(eventType, ({target}) =&gt; {
    <span class="hljs-keyword">const</span> start = now();<font></font>
<font></font>
    requestAnimationFrame(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> latency = now() - start;<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (latency &gt;= minLatency) {
            <span class="hljs-comment">// ….</span><font></font>
        }<font></font>
    });<font></font>
}, <span class="hljs-literal">true</span>);
</code></pre><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e68/e3e/07d/e68e3e07d64825c3f07175625d477283.png" width="350"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張の作業の例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のために</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、@ PERF-ツール/キーパー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算された数Fibonnachiをクリックします。</font></font></i><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクロールおよびアニメーション時のFPS</font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは最も興味深いメトリックであり、通常はを介して測定さ</font></font><code>requestAnimationFrame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れます。一定のFPS測定を実行する必要がある場合は、クラシック</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FPSMeter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が実行します（過度に楽観的です）。ただし、ページスクロールの滑らかさを測定する必要がある場合は、まったく機能しません。彼はウォームアップが必要です。そして、私は非常に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">興味深い方法に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出くわしました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
独創的に、実際には、単純に透明なdiv（1x1px）を作成し、それ</font></font><code>transition: left 300ms linear</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加して</font><font style="vertical-align: inherit;">1つのコーナーから別のコーナーに実行します。アニメーションしている間に</font></font><code>requestAnimationFrame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、実際の左</font><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">左</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">確認し、新しい長さが前のものと異なる場合は、描画されるフレームの数を増やします（それ以外の場合は、ドローダウンFPSがあります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それだけではありません</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">。FF</font></a><font style="vertical-align: inherit;">を使用している場合、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">mozPaintCount</font></a><font style="vertical-align: inherit;">はそこにあります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、レンダリングされるフレームの数、つまり </font><font style="vertical-align: inherit;">「DO」を覚えて</font></font><code>transitionend</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その差を計算します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全体として、ウォーミングアップなしで、ブラウザがフレームを再描画したかどうかは確かです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らはすぐに通常のAPIを約束します：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">http</font></a><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//wicg.github.io/frame-timing/</font></font></a><div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/getpro/habr/post_images/5c9/17b/d15/5c917bd15c349dd2101e10ce687294c5.png" width="350"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/964/4cc/6bb/9644cc6bb9c21671b5c7c7e34b596ff8.png" width="350"></td>
</tr>
</tbody></table></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fpsの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張</font><font style="vertical-align: inherit;">のため</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ PERF-ツール/キーパー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクロールの最適化：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最も簡単なことは、スクロールで何もしないこと、または、またはを介して実行を遅らせる</font></font><code>requestAnimationFrame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こと</font></font><code>requestIdleCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">慎重</font></font><code>pointer-events: none</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">てください。オンとオフを切り替えると逆の効果が生じる可能性があるため、A / B実験を行う場合</font></font><code>pointer-events</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と行わない場合の</font><font style="vertical-align: inherit;">両方を行うことをお勧めし</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仮想化されたリストを忘れないでください。ほとんどすべてのビューエンジンにそのようなコンポーネントが含まれていますが、ここでも注意してください。そのようなリストの要素はできるだけ単純にするか、スクロールが完了した後に実際の要素に置き換えられる「ダミー」を使用する必要があります。</font><font style="vertical-align: inherit;">自分で仮想化リストを作成する場合、内部HTMLはなく、DOMリサイクルを忘れないでください（これは、くしゃみごとにDOM要素を作成せずに再利用する場合です）。</font></font></li>
</ul><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの初期化</font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルールは1つだけです。詳細は、アプリケーションの初期化から最後の起動までにかかった時間を正確に回答できるようにするためです。</font><font style="vertical-align: inherit;">その結果、少なくとも以下のメトリックを取得する必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各依存症を解決するのにかかった時間;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのデータを受け取って準備する時間。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロックごとの詳細でアプリケーションをレンダリングします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それら。</font><font style="vertical-align: inherit;">出力では、ドローダウンがどのフェーズにあるかを正確に追跡できるようなメトリックを取得する必要があります。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作業例</font></font></b><div class="spoiler_text"><b>Console</b><img src="https://habrastorage.org/getpro/habr/post_images/678/c35/91f/678c3591fc9c9d1b46481a67be2d4551.png"><br>
<br>
<b>User Timing</b><img src="https://habrastorage.org/getpro/habr/post_images/b1e/67e/8c4/b1e67e8c408d8ad929ee6e404889a593.png"></div></div><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPAがある場合、ルーティング時間を測定する必要があります</font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まず、全体としてパフォーマンス（ルートの通過時間）を評価するための一般的な指標が必要ですが、各ルートの指標も必要です（たとえば、「スレッドのリスト」、「スレッドの読み取り」、「検索」など）。 d。）、メトリック自体はメトリックに分割する必要があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データの受信（どのデータの内訳を含む）</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">処理</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レンダリング</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トータルアプリケーション</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロック（たとえば、「左の列」（別名​​「フォルダのリスト」）、「スマート検索バー」、「文字のリスト」など）</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このすべてがなければ、問題がどこで始まるかを理解することは不可能であるため、ボックスからの多くのモジュールにはタイミングがあります（たとえば、XHRの同じモジュールが</font></font><code>startTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり</font></font><code>endTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、自動的にログに記録されます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これらのメトリックは、何が起こっているのかを適切に評価するには不十分です。彼らはあまりにも一般的です私たちがSPAについて話しているとき、あなたは間違いなくある種のランタイムキャッシュを持っているので（すでにそこにいる場合に再びサーバーにアクセスしないようにするため）、メトリックはさらに、キャッシュありとなしのルーティングに分けられます。また、具体的には、メトリックをエンティティ内のエンティティの数で除算します。つまり、1つのメトリックに1、5、10、または100以上の文字を含む「スレッド」ビューを追加できないため、リストが表示されている場合は、ブレークポイントを選択してメトリックをさらに分離する必要があります。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリとトラフィックの消費</font></font></h2><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリから始めましょう</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">そして、ここでは大きな失望を待っています。</font><font style="vertical-align: inherit;">現時点では、標準化されていない（Chromeのみ）のperformance.memoryしかなく、これは途方もなく低い数値を示しています。</font><font style="vertical-align: inherit;">しかし、それでも測定して、時間の経過に伴うアプリケーションの「フロー」を監視する必要があります。</font></font><div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/getpro/habr/post_images/985/6f9/3f0/9856f93f0823ac906bd1938f2cf1f11c.png"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/983/1bf/437/9831bf437924eb2ecf577f897d934e45.png"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/c08/e33/577/c08e335770d4fa05b70d8d653ae1b38f.png"></td>
</tr>
</tbody></table></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕事の例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拡張</font><font style="vertical-align: inherit;">のため</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ PERF-ツール/キーパー</font></font></a></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トラフィック</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">トラフィックをカウントするには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Timing-Allow-Origin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（リソースが別のドメインにある場合）と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resource Timing APIが必要です</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これは、トラフィックの計算だけでなく、詳細にも役立ちます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用されているプロトコル（HTTP / 1、HTTP / 2など）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロードされたリソースのタイプ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードにかかった時間。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに、リソースがネットワーク経由でロードされているのか、キャッシュから取得されているのかを理解することもできます。</font></font></li>
</ul><div class="scrollable-table"><table>
<tbody><tr>
<td><img src="https://habrastorage.org/getpro/habr/post_images/c65/c03/c66/c65c03c660ea8d6bb70ee6597d643245.png"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/aa3/ba4/973/aa3ba4973933bebafe516ed63e779700.png"></td>
<td><img src="https://habrastorage.org/getpro/habr/post_images/35a/a87/d0d/35aa87d0d53ca31ea88ad249bacd057a.png"></td>
</tr>
</tbody></table></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の拡張</font><font style="vertical-align: inherit;">のため</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ PERF-ツール/キーパー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何がトラフィックをカウントしますか？</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最も重要なことは、通常のCSS + JSではなく実際の画像を見ることができることであり、それを超えて、この「画像」が時間とともにどのように変化するかです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に、ロードされているものを正確に分析したり、リソースをグループに分割したりできます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッシングがいかにうまく機能するか。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえば、操作の15分後にコードに再帰が発生し、リソースが無限にロードされるなどの異常はありますか。トラフィックの監視が役立ちます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ええと、</font><font style="vertical-align: inherit;">このトピックに関する</font><font style="vertical-align: inherit;">私の同僚の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Igor Druzhinin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からのキャッチアップレポート</font><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの品質の評価-トラフィック消費の監視</font></font></a><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析</font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メトリックを設定してから、何をしますか？</font><font style="vertical-align: inherit;">そして、それらはどこかに送られる必要があります。</font><font style="vertical-align: inherit;">そして、ここでは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラファイト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を手に取るか</font><font style="vertical-align: inherit;">、手始めに、個人的な利益の</font><font style="vertical-align: inherit;">ためのデータ集計に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Googleアナリティクス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などを</font><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
忘れずに、スケジュールを取得するだけでは不十分です。すべての重要な指標には、たとえば、プロジェクトが&lt;1s、&lt;2s、&lt;3s、&lt;5s、5s +などでロードしているオーディエンスのパーセンテージがわかるパーセンタイルが必要です。</font></font><br>
<br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高性能コードを書く</font></font></h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初、私はここで意味のある何かを書きたかった、彼らはWebWorkerを使用していると言いました、</font></font><code>requestIdleCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえばSharedWorkerまたはServiceWorkerを使用しているブラウザのタブを介してランタイムキャッシュを介して（それはキャッシングだけではありません）、エキゾチックなものを</font><font style="vertical-align: inherit;">忘れないでください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">しかし、これはすべて非常に抽象的なものであり、多くのトピックは不可能にぶつかるので、次のように書いてください。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初に、パフォーマンスを測定するメトリックでコードをカバーします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jsperfのベンチマークを信じないでください。</font><font style="vertical-align: inherit;">それらの大部分は不十分に書かれており、単に文脈から外されています。</font><font style="vertical-align: inherit;">最良のベンチマークは、プロジェクトの実際のメトリックであり、これにより、アクションの効果がわかります。</font></font></li>
<li>   ,     — .  ,    ,    ,        20 %,     .        .</li>
<li> ,  .      ,    XSS,         HTML   ,    DOM’.</li>
<li>           ,    <code>object</code>  <code>Set</code> (  <code>successSteps.includes(currentStep)</code>  <code>successSteps.hasOwnProperty(currentStep)</code>), O(1)  .</li>
<li> «  —   » —    ,    .   ,  ,  .</li>
</ol><br>
<br>
<div class="spoiler"><b class="spoiler_title">         </b><div class="spoiler_text"><b>DOM</b>.     «  DOM» — , , ,    ,        .     ,    ,     view  -.<br>
<br>
    DOM,       DOM,     deattach-.     ,      <code>requestIdleCallback</code> ( ),       :   .<br>
<br>
 ,     ,      .<br>
<br>
       ,  « ».    ,     «»    ,   « »   «».       «»,     DOM ( ),     ,    .   ,     « ».<br>
<br>
       .<br>
<br>
<b></b>.        Worker,   WebAssembly,    .<br>
<br>
<b></b>. ,      ,  ,   ,   . ,    ,    .          .   DevTools    source map.<br>
<br>
  ,   ,     babel  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">playground</a>   ,          ,      <code>yeild</code>, <code>await</code>  <code>for of</code>.<br>
<br>
<b> </b>.       ,    bind  …    <code>handleEvent</code>!<br>
<br>
<b>  </b>.  ,  .  ,      «»,       . ,    « »   N-    «»,          «»,    «».        ,   JS. , « » —    (- ),        ,     ,   .<br>
<br>
<b></b>.   ,     ,    ,    ,  ,    «» React,       Suspense    .       ,             .<br>
<br>
     ,  ,  view,   -,       «».     «» ,        ,     .  ,        -,   , ..   -     «»,          ,   ,     Runtime Cache (   ).    ,        .<br>
<br>
       ,     ,      :<ul>
<li>    ,    ,        300-500 ;</li>
<li>       ,      .</li>
</ul><br>
   ,          «»  .   ,   —  ,   .</div></div><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">質問があれ</font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ば</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">PerfKeeper</font></a><font style="vertical-align: inherit;">（</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ライブの例</font></a><font style="vertical-align: inherit;">）だけでなく、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私のgithub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も</font><font style="vertical-align: inherit;">
測定、分析、使用して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja454906/index.html">ITにおける追加の教育サイトの評価：マイサークル調査の結果による</a></li>
<li><a href="../ja454912/index.html">ドワーフ要塞タルンアダムスがゲーム開発について語る</a></li>
<li><a href="../ja454914/index.html">Yii2を使用しています。別のCMSを書くか、最小限のオーバーヘッドで開発を大幅にスピードアップする試み</a></li>
<li><a href="../ja454916/index.html">同時に実行するアクションを指定する機能を備えたRLアルゴリズムを実装するためのニューラルネットワークアーキテクチャ</a></li>
<li><a href="../ja454918/index.html">SAP上の2つの小売業者の裏を12時間で組み合わせる方法</a></li>
<li><a href="../ja454922/index.html">PD法後の外国人の顧客とロシアでの仕事の特徴に関する物語</a></li>
<li><a href="../ja454924/index.html">Veeam Backup for Microsoft Office 365 v3の認証設定</a></li>
<li><a href="../ja454926/index.html">あなたがword2vecについて知っていたすべては真実ではありません</a></li>
<li><a href="../ja454928/index.html">RDPセッションでWindowsロック画面をバイパスする方法</a></li>
<li><a href="../ja454930/index.html">V8のガベージコレクション：新しいOrinoco GCのしくみ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>