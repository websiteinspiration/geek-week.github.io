<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÆ üèº üë©üèº‚Äçüé® Pourquoi l'hyperconvergence? Pr√©sentation et tests de Cisco HyperFlex üë®üèª‚Äçüåæ üë®üèø‚Äçüåæ üòÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En informatique, l'essentiel est trois lettres
 La t√¢che de toute infrastructure informatique est de fournir une plate-forme fiable pour les processus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pourquoi l'hyperconvergence? Pr√©sentation et tests de Cisco HyperFlex</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cti/blog/497024/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En informatique, l'essentiel est trois lettres</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La t√¢che de toute infrastructure informatique est de fournir une plate-forme fiable pour les processus commerciaux de l'entreprise. On estime traditionnellement que la qualit√© de l'infrastructure des technologies de l'information est √©valu√©e selon trois param√®tres principaux: accessibilit√©, s√©curit√©, fiabilit√©. Cependant, l'√©valuation de ce triple n'est en aucun cas li√©e √† l'entreprise et aux revenus / pertes directs de l'entreprise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trois lettres principales r√©gissent l'informatique. Si les lettres ¬´RUB¬ª ne se trouvent pas en t√™te de la hi√©rarchie informatique, alors vous construisez votre infrastructure informatique de mani√®re incorrecte. Bien s√ªr, il est difficile de construire directement l'informatique, √† partir uniquement des revenus / d√©penses, il existe donc une hi√©rarchie de ¬´trois lettres¬ª - des plus importantes aux plus priv√©es. SLA, RPO, RTO, GRC - tout cela est connu des experts de l'industrie et a longtemps √©t√© utilis√© dans la construction d'infrastructures. Malheureusement, ne pas toujours lier ces indicateurs dans une hi√©rarchie de bout en bout.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/wm/6n/ojwm6n6_0mqymccxwojckh8q4fi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nombreuses entreprises construisent aujourd'hui des infrastructures pour l'avenir en utilisant la technologie d'hier sur l'architecture d'hier. </font><font style="vertical-align: inherit;">Et en m√™me temps, l'acc√©l√©ration du d√©veloppement de l'informatique montre que les services modernes changent fondamentalement non seulement les entreprises mais aussi la soci√©t√© - les gens de l'√®re num√©rique sont habitu√©s au fait que quelques secondes suffisent pour acc√©der √† n'importe quelle information. </font><font style="vertical-align: inherit;">L'informatique issue d'une technologie incompr√©hensible est devenue monnaie courante pour les masses, comme les hamburgers ou les caf√©s. </font><font style="vertical-align: inherit;">Cela a ajout√© de nouvelles lettres extr√™mement importantes √† l'informatique. </font><font style="vertical-align: inherit;">Ces lettres - TTM (Time to market) - la veille du lancement d'un service productif sur le march√©.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ot/k1/ns/otk1nsmpnwofr1v2bzlexp5a9j8.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sds</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'un autre c√¥t√©, un kraken est sorti des profondeurs de la technologie, retournant l'informatique et le style de vie traditionnels. Avec l'augmentation de la puissance de calcul des processeurs x86, les syst√®mes de stockage de logiciels sont devenus le premier tentacule. Les syst√®mes de stockage classiques √©taient des pi√®ces de fer tr√®s sp√©cifiques remplies de ¬´silicium personnalis√©¬ª, divers acc√©l√©rateurs mat√©riels propri√©taires et des logiciels sp√©cialis√©s. Et il √©tait administr√© par une personne sp√©cialement form√©e qui √©tait pratiquement ador√©e dans l'entreprise en tant que pr√™tre d'un culte obscur. √âlargir le syst√®me de stockage op√©rant dans l'entreprise √©tait tout un projet, avec beaucoup de calculs et d'approbations - apr√®s tout, c'est cher!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le co√ªt √©lev√© et la complexit√© ont stimul√© la cr√©ation de syst√®mes de stockage de logiciels en plus du mat√©riel x86 habituel avec un syst√®me d'exploitation g√©n√©ral commun - Windows, Linux, FreeBSD ou Solaris. Seuls les logiciels restaient du mat√©riel personnalis√© complexe, ne fonctionnant m√™me pas dans le noyau, mais au niveau de l'utilisateur. Les premiers syst√®mes logiciels √©taient bien s√ªr assez simples et limit√©s en fonctionnalit√©s, il s'agissait souvent de solutions de niche sp√©cialis√©es, mais le temps passait. Et maintenant, m√™me les grands fournisseurs de syst√®mes de stockage ont commenc√© √† abandonner les solutions mat√©rielles sp√©cialis√©es - le TTM pour de tels syst√®mes ne pouvait plus r√©sister √† la concurrence, et le co√ªt de l'erreur est devenu tr√®s √©lev√©. En fait, √† de rares exceptions pr√®s, m√™me les syst√®mes de stockage classiques d'ici 2020 sont devenus les serveurs x86 les plus courants, juste avec de belles museli√®res en plastique et un tas d'√©tag√®res de disque.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me tentacule du kraken qui approche est l'apparition et l'adoption massive par le march√© de la technologie de m√©moire flash, qui est devenue un pilier en b√©ton brisant le dos d'un √©l√©phant.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les performances des disques magn√©tiques n'ont pas chang√© depuis de nombreuses ann√©es et les processeurs des contr√¥leurs de stockage ont compl√®tement g√©r√© des centaines de disques. </font><font style="vertical-align: inherit;">Mais h√©las, la quantit√© se transformera t√¥t ou tard en qualit√© - et le syst√®me de stockage est d√©j√† √† un niveau moyen, sans parler du niveau initial, il a une limite sup√©rieure sur le nombre significatif de lecteurs flash. </font><font style="vertical-align: inherit;">Avec une certaine quantit√© (litt√©ralement √† partir de dix disques), les performances du syst√®me ne cessent de cro√Ætre, mais elles peuvent √©galement commencer √† baisser en raison de la n√©cessit√© de traiter un volume toujours plus important. </font><font style="vertical-align: inherit;">Apr√®s tout, la puissance de traitement et le d√©bit des contr√¥leurs ne changent pas avec l'augmentation de la capacit√©. </font><font style="vertical-align: inherit;">La solution, en th√©orie, √©tait l'√©mergence de syst√®mes √©volutifs qui peuvent assembler de nombreuses √©tag√®res ind√©pendantes avec des disques et des ressources de processeur en un seul cluster qui regarde de l'ext√©rieur comme un syst√®me de stockage multi-contr√¥leur unique. </font><font style="vertical-align: inherit;">Il ne restait qu'un pas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyper convergence</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'√©tape la plus √©vidente vers l'avenir a √©t√© l'unification de points de stockage et de traitement des donn√©es auparavant disparates. En d'autres termes, pourquoi ne pas impl√©menter le stockage distribu√© non pas sur des serveurs s√©par√©s, mais directement sur les h√¥tes de virtualisation, refusant ainsi un r√©seau de stockage sp√©cial et du mat√©riel d√©di√©, et donc combinant des fonctions. Le kraken s'est r√©veill√©. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais permettez-moi de dire, vous voyez, parce que la combinaison est la convergence. D'o√π vient ce stupide pr√©fixe hyper?</font></font><br>
<blockquote>        .        +  + .    .    ,      ‚Äú ‚Äù.<br>
‚Ä¶<br>
 ,  ,            ,        .       ‚Äî       SDS.<br>
<br>
:<br>
<br>
<ul>
<li>  ‚Äî , ,       ,   /.    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Syst√®me converg√© - le tout √† partir d'une seule source, d'un seul support, d'un seul num√©ro de partenaire. </font><font style="vertical-align: inherit;">√Ä ne pas confondre avec l'auto-assemblage d'un fournisseur.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et il s'av√®re que le terme de notre architecture convergente est d√©j√† pris. </font><font style="vertical-align: inherit;">Exactement la m√™me situation qu'avec le superviseur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Syst√®me hyperconverg√© - Un syst√®me converg√© avec une architecture convergente.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les d√©finitions sont extraites de l'article ¬´ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Th√©orie g√©n√©rale et arch√©ologie de la virtualisation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬ª, dans l'√©criture duquel j'ai pris une part vivante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce qui donne l'approche hyperconverg√©e dans l'application aux trois lettres mentionn√©es?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commencez avec un volume minimum (et un co√ªt minimum)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La capacit√© de stockage augmente avec la puissance de calcul</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaque n≈ìud du syst√®me est son contr√¥leur - et le probl√®me du ¬´plafond de verre¬ª est supprim√© (les disques le peuvent, mais le contr√¥leur n'existe plus)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gestion du stockage consid√©rablement simplifi√©e</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le dernier paragraphe, les syst√®mes hyperconverg√©s sont tr√®s d√©test√©s par les administrateurs de stockage √† l'ancienne mode qui sont utilis√©s pour administrer les files d'attente sur les ports Fibre Channel. </font><font style="vertical-align: inherit;">L'espace est allou√© en quelques clics de souris depuis la console de gestion de l'infrastructure virtuelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, seuls les nuages ‚Äã‚Äãsont plus rapides que les syst√®mes hyperconverg√©s lors du lancement d'un produit, mais les nuages ‚Äã‚Äãne conviennent pas √† tout le monde et / ou pas toujours. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous √™tes un administrateur technicien et lisez-le jusqu'ici - r√©jouissez-vous, les mots g√©n√©raux sont termin√©s et maintenant je vais vous parler de ma vision personnelle du syst√®me Cisco Hyperflex, que j'ai obtenue avec des pattes tenaces pour effectuer divers tests sur celui-ci.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cisco Hyperflex</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi Cisco</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cisco est principalement connu comme le fournisseur dominant sur le march√© des √©quipements de r√©seau, mais en m√™me temps, il est assez largement pr√©sent dans d'autres segments du march√© des centres de donn√©es, offrant √† la fois des solutions serveur et hyperconverg√©es, ainsi que des syst√®mes d'automatisation et de contr√¥le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtonnamment, d'ici 2020, il y a encore du monde: ¬´Serveurs Cisco? Et de qui les prend-elle? ¬ª</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cisco a commenc√© √† traiter avec des serveurs d√®s 2009, choisissant √† cette √©poque la voie des solutions lames en pleine croissance. L'id√©e de Cisco √©tait de mettre en ≈ìuvre l'approche des calculatrices anonymes. Le r√©sultat a √©t√© un syst√®me UCS (Unified Computing System) compos√© de deux commutateurs sp√©cialis√©s (ils s'appelaient Fabric Interconnect), et de 1 √† 20 ch√¢ssis (8 lames demi-taille) ou jusqu'√† 160 serveurs. Dans le m√™me temps, le ch√¢ssis est devenu g√©n√©ralement stupide avec un morceau de fer aliment√©, toute la logique et la commutation sont effectu√©es dans Fabric Interconnect; le ch√¢ssis est juste un moyen d'h√©berger des serveurs et de les connecter au syst√®me. Fabric Interconnect est enti√®rement responsable de toutes les interactions du serveur avec le monde ext√©rieur - Ethernet, FC et gestion. Il semblerait que les lames et les lames, ce qui est l√†, sauf pour la commutation externe, et pas comme tout le monde dans le ch√¢ssis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un moment cl√© dans la mise en place de ces m√™mes ¬´calculatrices anonymes¬ª. Dans le cadre du concept Cisco UCS, les serveurs n'ont pas de personnalit√© autre qu'un num√©ro de s√©rie. Ni MAC, ni WWN, ni rien d'autre. Le syst√®me de gestion UCS aliment√© par Fabric Interconnect est bas√© sur des profils de serveur et des mod√®les. Apr√®s avoir connect√© un ensemble de serveurs dans le ch√¢ssis, ils doivent se voir attribuer un profil appropri√©, dans lequel toutes les adresses et identifiants d'identification sont d√©finis. Bien s√ªr, si vous n'avez qu'une douzaine de serveurs, le jeu n'en vaut pas la peine. Mais quand il y en a au moins deux, voire trois douzaines, c'est un s√©rieux avantage. Il devient facile et rapide de migrer des configurations ou, plus important encore, de r√©pliquer les configurations de serveurs en quantit√© appropri√©e, d'appliquer imm√©diatement les modifications √† un grand nombre de serveurs,g√©rer essentiellement un ensemble de serveurs (par exemple, une batterie de serveurs de virtualisation) comme une entit√© unique. L'approche propos√©e dans le syst√®me UCS permet, avec la bonne approche, de simplifier s√©rieusement la vie des administrateurs, d'augmenter la flexibilit√© et de r√©duire consid√©rablement les risques, de sorte que les lames UCS litt√©ralement en 2-3 ans sont devenues la plate-forme de lame la plus vendue dans l'h√©misph√®re occidental, et aujourd'hui elles sont mondiales l'une des deux plates-formes dominantes, avec HPE.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est rapidement devenu clair que la m√™me approche bas√©e sur une usine universelle avec une gestion int√©gr√©e bas√©e sur des politiques et des mod√®les est pleinement demand√©e et s'applique non seulement aux serveurs lames, mais √©galement aux serveurs en rack. Et dans ce sens, les serveurs Cisco mont√©s en rack connect√©s √† Fabric Interconnect b√©n√©ficient des m√™mes avantages qui rendent les serveurs lames si populaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui, je vais parler d'HyperFlex, une solution hyperconverg√©e Cisco bas√©e sur des serveurs mont√©s en rack connect√©s √† Fabric Interconnect. Ce qui rend HyperFlex int√©ressant et m√©rite d'√™tre consid√©r√© dans la revue:</font></font><br>
<br>
<ul>
<li>  Cisco   ,  , ¬´¬ª ‚Äì        ,      HyperFlex;     , ,   ,         HyperFlex    ;</li>
<li>   ‚Äì          ;  HyperFlex  ,    ,      ;          ,       .</li>
<li> ¬´  ¬ª ‚Äî     ¬´ ¬ª,       ,       ;</li>
<li>           Fabric Interconnect    Cisco   -,     SAN ,       native FC;</li>
<li>    ‚Äú‚Äù ‚Äì  ,  ,     ;</li>
<li>   Cisco      ,   ,            ,      ;</li>
<li>  ,      , Cisco        HCI,      , HyperFlex      ,   ,   .</li>
</ul><br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HyperFlex est un v√©ritable syst√®me hyperconverg√© avec des VM de contr√¥leur d√©di√©es. </font><font style="vertical-align: inherit;">Permettez-moi de vous rappeler que le principal avantage d'une telle architecture est sa portabilit√© potentielle pour diff√©rents hyperviseurs. </font><font style="vertical-align: inherit;">Aujourd'hui, Cisco a impl√©ment√© la prise en charge de VMware ESXi et Microsoft Hyper-V, mais il est possible qu'une des options KVM apparaisse √† mesure que sa popularit√© augmente dans le segment des entreprises. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consid√©rons le m√©canisme de travail sur l'exemple d'ESXi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les p√©riph√©riques utilisant la technologie VM_DIRECT_PATH - disque de cache et disques de niveau de stockage - sont directement envoy√©s √† la machine virtuelle du contr√¥leur (ci-apr√®s CVM). </font><font style="vertical-align: inherit;">Par cons√©quent, nous excluons l'effet de la pile de disques de l'hyperviseur sur les performances. </font><font style="vertical-align: inherit;">Des paquets VIB suppl√©mentaires sont install√©s dans l'hyperviseur lui-m√™me:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visi√®re IO: fournit le point de montage de la banque de donn√©es NFS pour l'hyperviseur</font></font></li>
<li>VAAI:   VMware  API  ¬´ ¬ª </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les blocs de disques virtuels sont r√©partis uniform√©ment sur tous les h√¥tes d'un cluster avec une granularit√© relativement faible. Lorsque la machine virtuelle sur l'h√¥te effectue certaines op√©rations sur le disque, via la pile de disques de l'hyperviseur, l'op√©ration va au magasin de donn√©es, puis √† IO Visor, puis elle se tourne vers le CVM responsable de ces blocs. Dans ce cas, CVM peut √™tre situ√© sur n'importe quel h√¥te du cluster. Compte tenu des ressources tr√®s limit√©es d'IO Visor, il n'y a bien s√ªr pas de tables de m√©tadonn√©es et le choix est d√©termin√© math√©matiquement. Ensuite, le CVM auquel la demande est parvenue la traite. Dans le cas de la lecture, il envoie des donn√©es soit depuis l'un des niveaux de cache (RAM, cache d'√©criture, cache de lecture) soit depuis les disques de son h√¥te. Dans le cas d'un enregistrement, il √©crit dans le journal local et duplique l'op√©ration pour un (RF2) ou deux (RF3) CVM.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/hq/eq/k_hqeqytlifhbevdrf8r7mk_rv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peut-√™tre que cela suffit pour comprendre le principe du travail dans le cadre de cette publication, sinon je prendrai du pain aupr√®s des formateurs Cisco et j'aurai honte. </font><font style="vertical-align: inherit;">Pas vraiment, mais encore assez.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Question sur les tests synth√©tiques</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Navigateur, √©lectrom√©nagers! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 36! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Qu'est-ce que 36? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Et les appareils? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui, quelque chose comme √ßa ressemble √† la plupart des tests synth√©tiques des syst√®mes de stockage. Pourquoi donc? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jusqu'√† relativement r√©cemment, la plupart des syst√®mes de stockage √©taient plats avec un acc√®s uniforme. Qu'est-ce que √ßa veut dire? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'espace disque total disponible a √©t√© collect√© √† partir de disques ayant les m√™mes caract√©ristiques. Par exemple, 300 disques de 15k. Et la performance √©tait la m√™me dans tout l'espace. Avec l'av√®nement de la technologie de stockage hi√©rarchis√©, les syst√®mes de stockage sont devenus non stables - les performances varient au sein d'un m√™me espace disque. Et ce n'est pas seulement diff√©rent, mais aussi impr√©visible, selon les algorithmes et les capacit√©s d'un mod√®le de stockage particulier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et tout ne serait pas aussi int√©ressant si les syst√®mes hyperconverg√©s avec localisation des donn√©es n'apparaissaient pas. </font><font style="vertical-align: inherit;">En plus de l'in√©galit√© de l'espace disque lui-m√™me (fatigues, caches flash), il y a √©galement un acc√®s in√©gal √† celui-ci - selon que l'une des copies de donn√©es se trouve sur les disques locaux du n≈ìud ou qu'elle doit √™tre accessible via le r√©seau. </font><font style="vertical-align: inherit;">Tout cela conduit au fait que le nombre de tests synth√©tiques peut √™tre absolument nul et ne pas parler de quoi que ce soit pratiquement significatif. </font><font style="vertical-align: inherit;">Par exemple, la consommation de carburant d'une voiture selon une brochure publicitaire que vous ne pourrez jamais atteindre dans la vraie vie.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Question sur le dimensionnement</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le revers des num√©ros de test synth√©tiques √©tait les num√©ros de taille et les sp√©cifications sous le clavier de pr√©vente. Les pr√©ventes dans ce cas sont divis√©es en deux cat√©gories - certaines mart√®lent stupidement vos savoirs traditionnels dans le configurateur du fournisseur, et le second les prendra eux-m√™mes, car ils comprennent comment cela fonctionne. Mais avec le second, vous devrez consid√©rer en d√©tail ce que vous avez √©crit dans votre savoir traditionnel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous le savez, sans savoir traditionnel - le r√©sultat de HZ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nk/li/uq/nkliuqyn2iv0ogsigw-nd_m94ky.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exp√©rience pratique - lors du dimensionnement d'un syst√®me hyperconverg√© plut√¥t lourd dans une comp√©tition avec l'un des clients, j'ai personnellement, apr√®s le pilote, pris les indicateurs de charge du syst√®me et les ai compar√©s avec ce qui √©tait √©crit dans le TOR. Il s'est av√©r√© comme dans une blague:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Rabinovich, est-il vrai que vous avez gagn√© un million √† la loterie? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Oh, qui vous a dit √ßa? </font><font style="vertical-align: inherit;">Pas un million, mais dix roubles, pas √† la loterie, mais de pr√©f√©rence, et n'a pas gagn√©, mais perdu.</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, la situation GIGO classique - Garbage In Garbage Out - Garbage input = Garbage in the output. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le dimensionnement applicable pratique pour l'hyperconvergence est presque garanti de deux types: prenez-nous avec une marge, ou pendant longtemps nous conduirons un pilote et prendrons des indicateurs.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a un autre point avec le dimensionnement et l'√©valuation des sp√©cifications. Diff√©rents syst√®mes sont construits diff√©remment et fonctionnent diff√©remment avec les disques; leurs contr√¥leurs interagissent diff√©remment. Par cons√©quent, il est pratiquement inutile de comparer ¬´t√™te-√†-t√™te¬ª selon les sp√©cifications le nombre et le volume de disques. Vous disposez d'une sorte de savoirs traditionnels au sein desquels vous comprenez le niveau de charge. Et puis il y a un certain nombre de bo√Ætes de vitesses, dans lesquelles on vous propose diff√©rents syst√®mes qui r√©pondent aux exigences de performance et de fiabilit√©. Quelle est la diff√©rence fondamentale, combien co√ªte un disque et quel type dans le syst√®me 1, et que dans le syst√®me 2, il y en a plus / moins si les deux r√©ussissent √† ex√©cuter la t√¢che.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que les performances sont souvent d√©termin√©es par des contr√¥leurs vivant sur les m√™mes h√¥tes que les machines virtuelles, pour certains types de charges, elles peuvent nager de mani√®re assez significative simplement parce que les processeurs de fr√©quences diff√©rentes sont situ√©s dans des clusters diff√©rents, toutes choses √©tant √©gales par ailleurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, m√™me l'architecte-archimage de pr√©vente le plus exp√©riment√© ne vous dira pas les sp√©cifications plus pr√©cis√©ment que vous formulez les exigences, et plus pr√©cis√©ment, que ¬´bien, quelque part SAM-VOSEM¬ª sans projets pilotes.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/79/su/eq/79sueqtcnez6nz-kop4mp1i4qlq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos des instantan√©s</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HyperFlex peut effectuer ses instantan√©s natifs de machines virtuelles √† l'aide de la technologie de redirection sur √©criture. Et ici il faut s'arr√™ter s√©par√©ment pour consid√©rer diff√©rentes technologies de snapshots. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initialement, il y avait des instantan√©s du type Copie sur √©criture (CoW), et les instantan√©s natifs de VMware vSphere peuvent √™tre pris comme exemple classique. Le principe de fonctionnement est le m√™me avec vmdk au-dessus de VMFS ou NFS, qui avec des syst√®mes de fichiers natifs tels que VSAN. Apr√®s avoir cr√©√© un instantan√© CoW, les donn√©es d'origine (blocs ou fichiers vmdk) sont fig√©es et lorsque vous essayez d'√©crire dans des blocs fig√©s, une copie est cr√©√©e et les donn√©es sont √©crites dans un nouveau bloc / fichier (fichier delta pour vmdk). Par cons√©quent, au fur et √† mesure que l'arborescence de clich√©s se d√©veloppe, le nombre d'acc√®s au disque ¬´parasites¬ª qui n'ont aucune signification productive augmente, et</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les baisses / retards de performances augmentent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, des instantan√©s de redirection sur √©criture (RoW) ont √©t√© invent√©s, dans lesquels au lieu de cr√©er des copies de blocs avec des donn√©es, une copie des m√©tadonn√©es est cr√©√©e, et l'enregistrement se poursuit simplement sans retards et lectures et v√©rifications suppl√©mentaires. Avec une impl√©mentation correcte des instantan√©s RoW, l'effet sur les performances du syst√®me de disques est presque nul. Le deuxi√®me effet du travail avec des m√©tadonn√©es au lieu des donn√©es en direct elles-m√™mes n'est pas seulement la cr√©ation instantan√©e de clich√©s, mais aussi les clones de VM, qui imm√©diatement apr√®s la cr√©ation ne prennent pas du tout d'espace (nous ne consid√©rons pas la surcharge syst√®me pour les fichiers de service VM).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et le troisi√®me point cl√© qui distingue radicalement RoW des instantan√©s CoW pour les syst√®mes productifs est la suppression instantan√©e des instantan√©s. Il semblerait que ce soit le cas? Cependant, vous devez vous rappeler comment fonctionnent les instantan√©s CoW et que la suppression d'un instantan√© n'est pas vraiment une suppression delta, mais sa validation. Et ici, le moment de son commit d√©pend extr√™mement de la taille du delta accumul√© et des performances du syst√®me de disque. Les instantan√©s RoW sont valid√©s instantan√©ment simplement parce que peu importe le nombre de t√©raoctets de diff√©rence accumul√©s, la suppression (validation) des instantan√©s RoW est une mise √† jour de la table de m√©tadonn√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ici, une application int√©ressante d'instantan√©s RoW appara√Æt - d√©posez le RPO √† des valeurs de dizaines de minutes. Faire des sauvegardes toutes les 30 minutes est presque impossible dans le cas g√©n√©ral, et dans la plupart des cas, elles sont effectu√©es une fois par jour, ce qui donne un RPO de 24 heures. Mais en m√™me temps, nous pouvons simplement cr√©er des instantan√©s RoW selon un calendrier, ce qui porte le RPO √† 15-30 minutes et les stocker pendant un jour ou deux. Aucune p√©nalit√© pour les performances, d√©pense uniquement la capacit√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais il y a quelques nuances.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le bon fonctionnement des instantan√©s natifs et l'int√©gration avec VMware, HyperFlex n√©cessite un instantan√© officiel appel√© Sentinel. Le snapshot Sentinel est cr√©√© automatiquement lorsque vous cr√©ez pour la premi√®re fois un snapshot pour une VM donn√©e via HXConnect, et vous ne devez pas le supprimer, vous ne devez pas y "revenir", il vous suffit de supporter le fait que dans l'interface de la liste des snapshots, il s'agit du premier snapshot de service de Sentinel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/xv/fk/6vxvfkz6yuhzkylorocntklep1w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les instantan√©s HyperFlex peuvent s'ex√©cuter en mode coh√©rent avec les pannes ou en mode coh√©rent avec les applications. Le second type implique le "vidage des tampons" √† l'int√©rieur de la machine virtuelle, il n√©cessite VMTools et il d√©marre si la case "Quiesce" est coch√©e dans le menu d'instantan√©s HXConnect.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus des instantan√©s HyperFlex, personne n'interdit l'utilisation d'instantan√©s VMware ¬´natifs¬ª. </font><font style="vertical-align: inherit;">Il est utile pour une machine virtuelle sp√©cifique de d√©terminer les instantan√©s que vous utiliserez et, √† l'avenir, de vous concentrer sur cette technologie, en ne ¬´d√©rangeant¬ª pas diff√©rents instantan√©s pour une machine virtuelle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cadre du test, j'ai essay√© de cr√©er des instantan√©s et de v√©rifier leur FIO. </font><font style="vertical-align: inherit;">Et pourtant, oui, je peux confirmer que les instantan√©s sont vraiment RoW, ils n'affectent pas les performances. </font><font style="vertical-align: inherit;">Les instantan√©s sont vraiment cr√©√©s rapidement (quelques secondes en fonction du profil de charge et de la taille de l'ensemble de donn√©es), je peux donner la recommandation suivante en fonction des r√©sultats: si votre charge a beaucoup d'op√©rations d'√©criture al√©atoires, vous devriez commencer √† cr√©er un instantan√© √† partir de l'interface HXConnect, avec la coche ¬´Quiesce¬ª et avec une pr√©liminaire la pr√©sence d'un instantan√© Sentinel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les tests</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plateforme de test</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plateforme suivante est tomb√©e dans des pattes tenaces:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 x C220 M4 (2630v4 10c x 2,20 GHz, 256, 800 + 6 * 960)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vSphere 6.7</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HX Data Platform 4.0.2</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test de patch clair</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quel genre de test sans CrystalDisk? C'est vrai, cela ne peut pas √™tre, les gars normaux d√©marrent toujours un disque cristallis√©! Eh bien, si c'est n√©cessaire, alors c'est n√©cessaire. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hp/tl/x5/hptlx5eb-ojjdbwet5l87h6wjx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le disque Crystal, une machine virtuelle sp√©cialement cr√©√©e avec 2 vCPU 4 Go et Windows 7 √† bord a √©t√© cr√©√©e. Oh, et j'en ai eu marre d'y mettre des patchs, je vais vous le dire! Le test a √©t√© r√©alis√© dans les meilleures traditions des meilleures maisons de Londres et Paris - √† savoir, un seul disque virtuel suivant-suivant-finition a √©t√© ajout√© sans aucune r√©flexion et le test a √©t√© lanc√©. Oui, et en passant, bien s√ªr, CrystalDiskMark lui-m√™me n'est pas impliqu√© dans les tests, il s'agit simplement d'une interface, mais charge directement le syst√®me de disques avec le package DiskSpd bien connu inclus dans le kit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ns/wt/i9/nswti9u6hmne-srf37nniqjevzq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui m'a frapp√© litt√©ralement - pour une raison quelconque, tous ont saut√© le choix des unit√©s dans le coin sup√©rieur droit. Et alle op!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/3y/th/kg3ythef08dpqq3zcsrr20wmq8w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âcoutez, honn√™tement, je ne m'attendais pas √† 75 000 IOPS et plus de 1 gigaoctet par seconde de la micromachine en mode suivant-suivant-finition! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour faire simple, toutes les entreprises en Russie n'ont pas des charges qui d√©passent ces indicateurs au total. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'autres tests ont √©t√© effectu√©s √† l'aide de VMware HCI Bench et Nutanix XRay, comme ¬´id√©ologiquement hostiles¬ª √† HyperFlex, et en cons√©quence, il √©tait pr√©vu que nous ne ferions pas de prisonniers. Les chiffres se sont r√©v√©l√©s extr√™mement proches, de sorte que les r√©sultats du package XRay ont √©t√© pris comme base simplement parce qu'il dispose d'un syst√®me de rapport plus pratique et de mod√®les de charge pr√™ts √† l'emploi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ceux qui ne font confiance √† personne et veulent un contr√¥le total sur le processus, je vous rappelle mon article sur la construction de votre propre syst√®me pour g√©n√©rer la charge sur une plate-forme hyperconverg√©e - "</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Test de performance des syst√®mes et SDS giperkonvergentnyh de leurs propres mains</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Achtung! </font><font style="vertical-align: inherit;">Uwaga! </font><font style="vertical-align: inherit;">Pozor!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les autres r√©sultats et leurs interpr√©tations sont l'opinion de l'auteur de l'article, et sont donn√©s par eux-m√™mes dans le cadre de l'√©tude du syst√®me. </font><font style="vertical-align: inherit;">La plupart des tests sont des synth√©tiques nus et ne s'appliquent qu'√† la compr√©hension des indicateurs de limite dans des cas extr√™mes et d√©g√©n√©r√©s, ce que vous n'atteindrez jamais dans la vie r√©elle.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microbenchmark FourCorners</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le microtest √† 4 c√¥t√©s est con√ßu pour √©valuer le syst√®me ¬´rapidement¬ª pour les performances th√©oriques ultimes et les performances de pointe des contr√¥leurs. L'application pratique de ce test est de v√©rifier le syst√®me imm√©diatement apr√®s le lancement pour toute erreur de configuration et d'environnement, en particulier les erreurs de r√©seau. Ceux. si vous utilisez r√©guli√®rement de tels syst√®mes, vous savez alors √† quels chiffres vous devez vous attendre ¬´si tout va bien¬ª. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/wl/70/imwl70bqxpwhlum10vhlhm1kbk0.png"><br>
<br>
<img src="https://habrastorage.org/webt/61/xf/ss/61xfss1sc92seaez55-aq_shz2i.png"><br>
<br>
<img src="https://habrastorage.org/webt/4x/38/l7/4x38l7clygg4y5lavoks-lecrfs.png"><br>
<br>
<img src="https://habrastorage.org/webt/si/he/kg/sihekgnrrioansimgwwetryowme.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre final: 280k / 174k IOPS, 3,77 / 1,72 Go / s (lecture / √©criture) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment nos contr√¥leurs se sont-ils comport√©s?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-_/co/qv/-_coqvha1rwj6l78ng3fl_kowoi.png"><br>
<br>
<img src="https://habrastorage.org/webt/xu/hd/8s/xuhd8szlg-hrwoyeasjl-nqybbm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'o√π on peut noter que la consommation totale de ressources pour 4 contr√¥leurs et 4 charges VM √©tait de 49 c≈ìurs de 2,2. Selon les statistiques VMware, l'utilisation CPU des contr√¥leurs √©tait jusqu'√† 80%, soit en fait, les performances √©taient limit√©es par les performances des contr√¥leurs, et en particulier des processeurs. La vitesse des op√©rations s√©quentielles reposait sp√©cifiquement sur la vitesse du r√©seau 10G. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons encore. Les performances de pointe sur un petit cluster √† 4 n≈ìuds avec les processeurs de 2,2 GHz les moins rapides sont de pr√®s de 300 000 IOPS √† 4U de hauteur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La conversation ¬´ici, nous avons 10, 20 ou m√™me 40% plus / moins¬ª est pratiquement d√©nu√©e de sens en raison de l'ordre des nombres. C'est comme commencer √† mesurer "et je peux avoir une voiture 240, j'en ai 280" malgr√© le fait que la limite soit de 80.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
280k / 4 n≈ìuds donne une performance de pointe de 70k / n≈ìud, ce qui d√©passe par exemple les chiffres de la calculatrice VMware VSAN, qui suppose que le n≈ìud AF n'√©met pas plus de 46k par groupe de disques. </font><font style="vertical-align: inherit;">Dans notre cas, ici, dans la terminologie VMware, il n'y a qu'un seul groupe de disques, qui s'ex√©cute r√©ellement √† x1.8.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Effet de la taille du bloc de magasin de donn√©es</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la cr√©ation d'un magasin de donn√©es HyperFlex, vous pouvez choisir la taille du bloc de donn√©es - 4k ou 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu'est-ce que cela affectera? </font><font style="vertical-align: inherit;">Ex√©cutez le m√™me test quadrangulaire. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/rc/vf/70rcvfpf8-l_zewvlxiawo6lgmm.png"><br>
<br>
<img src="https://habrastorage.org/webt/gd/s6/ys/gds6ysghq6zmspmh1aiprlngtni.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si l'image est presque identique √† la lecture, le dossier au contraire importe. </font><font style="vertical-align: inherit;">Le test quadrangulaire utilise une charge de 8k. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre total: 280k / 280k, 172-158k / 200-180k (4k 8k). </font><font style="vertical-align: inherit;">Lorsque la taille du bloc correspond, + 15% des performances d'√©criture sont obtenues. </font><font style="vertical-align: inherit;">Si vous pr√©voyez une quantit√© d'enregistrement importante avec un petit bloc (4k) dans la charge - cr√©ez une banque de donn√©es pour cette charge particuli√®re avec un bloc 4k, sinon utilisez 8k.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OLTP Simulator</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une image beaucoup plus proche de la r√©alit√© est donn√©e par un autre test. </font><font style="vertical-align: inherit;">Dans ce cadre, deux g√©n√©rateurs sont lanc√©s avec un profil proche d'un SGBD transactionnel et un niveau de charge de 6000 + 400 IOPS. </font><font style="vertical-align: inherit;">Ici, le retard est mesur√©, qui devrait rester √† un niveau bas stable. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/aw/tb/ty/awtbtyfcnnow6yydbgr28dpgiqc.png"><br>
<br>
<img src="https://habrastorage.org/webt/o9/kd/m1/o9kdm1zv2lksnqi1g7qk8o5gl7m.png"><br>
<br>
<img src="https://habrastorage.org/webt/cp/3n/oh/cp3noh9aqrp7y0kfrdgehpd19xe.png"><br>
<br>
<img src="https://habrastorage.org/webt/rn/qh/0j/rnqh0jmup291dks_4ir4eg1ssu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le retard pour la charge VM √©tait de 1,07 / 1,08 ms. </font><font style="vertical-align: inherit;">Dans l'ensemble un excellent r√©sultat, mais ajoutons un peu de chaleur!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colocation de la base de donn√©es: haute intensit√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment la base transactionnelle se comportera, en fonction des retards, si soudainement un voisin cons√©cutif bruyant se forme. </font><font style="vertical-align: inherit;">Eh bien, tr√®s bruyant. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0s/wg/1w/0swg1wykmap5tqivoahd3qymfbe.png"><br>
<br>
<img src="https://habrastorage.org/webt/kr/uy/xh/kruyxhmfiswvbc2tue7whwpwu60.png"><br>
<br>
<img src="https://habrastorage.org/webt/jw/3l/ib/jw3libpbrez473tlexzbilmepyy.png"><br>
<br>
<img src="https://habrastorage.org/webt/p1/4g/2j/p14g2jumznxoh8oyw2y1f3slyge.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, la base OLTP sur le n≈ìud 1 g√©n√®re 4200 IOPS avec un retard de 0,85 ms. </font><font style="vertical-align: inherit;">Que se passe-t-il apr√®s qu'un syst√®me DSS commence soudainement √† consommer des ressources dans des op√©rations s√©quentielles? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deux g√©n√©rateurs sur les n≈ìuds 2 et 3 chargent la plate-forme √† 1,18 / 1,08 Go / s, respectivement, ces 2,26 Go / s au total. </font><font style="vertical-align: inherit;">Le retard sur OLTP augmente bien s√ªr et devient moins plat, mais la valeur moyenne reste de 1,85 ms, et la base re√ßoit ses 4200 IOPS sans aucun probl√®me.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impact de l'instantan√©</font></font></h3><br>
<img src="https://habrastorage.org/webt/n0/eo/w8/n0eow8pfcfna7kqwhrt0xblqq8g.png"><br>
<br>
<img src="https://habrastorage.org/webt/-a/0h/dl/-a0hdlvysga1zwnpwtyvb1zq1_c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le syst√®me prend s√©quentiellement plusieurs instantan√©s une fois par heure sur une base OLTP. </font><font style="vertical-align: inherit;">Il n'y a rien de surprenant dans le calendrier, et de plus, c'est g√©n√©ralement un indicateur du fonctionnement des instantan√©s classiques VMware, car Nutanix XRay ne sait pas comment travailler avec des instantan√©s natifs, sauf le sien. </font><font style="vertical-align: inherit;">Vous n'avez pas besoin d'utiliser r√©guli√®rement des instantan√©s vSphere, car tous les yaourts ne sont pas √©galement utiles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les instantan√©s natifs HyperFlex fonctionnent beaucoup mieux, utilisez-les et vos cheveux deviendront doux et soyeux!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ingestion de Big Data</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment HyperFlex va-t-il dig√©rer une grande quantit√© de donn√©es t√©l√©charg√©es s√©quentiellement? </font><font style="vertical-align: inherit;">Eh bien, disons 1 To. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0f/ll/m7/0fllm7dze4walp1c2xff9msn-wg.png"><br>
<br>
<img src="https://habrastorage.org/webt/vx/go/ig/vxgoigfhqqpqguabodmsmklgmma.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le test a dur√© 27 minutes, y compris le clonage, le r√©glage et le d√©marrage des g√©n√©rateurs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âvolutivit√© du d√©bit</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, chargez progressivement l'ensemble du cluster et regardez les nombres stables. Pour commencer par la lecture al√©atoire, puis l'√©criture. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/kb/jy/iukbjyoms8btipiqv8ckw7-oikg.png"><br>
<br>
<img src="https://habrastorage.org/webt/zw/zj/gy/zwzjgyqeu9wn4ofiatztt5umy70.png"><br>
<br>
<img src="https://habrastorage.org/webt/zd/eu/r2/zdeur21emet_sylypa1p7btvg9c.png"><br>
<br>
<img src="https://habrastorage.org/webt/_u/z1/_p/_uz1_p1ht5ll4bihnaeuxj_znoa.png"><br>
<br>
<img src="https://habrastorage.org/webt/-c/ms/o4/-cmso46htkcgb6ixeetyowyninq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous voyons une image stable avec une diminution progressive des performances de la charge de la machine de 78k √† 55-57k IOPS, avec des √©tag√®res lisses. Dans le m√™me temps, il y a une augmentation constante des performances globales de 78 √† 220k IOPS. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/cj/w0/tocjw0zga3ug1recbqb8oa133sq.png"><br>
<br>
<img src="https://habrastorage.org/webt/3z/nt/df/3zntdf3yigfx_acxr0ra6n5nwfa.png"><br>
<br>
<img src="https://habrastorage.org/webt/od/4x/jh/od4xjhnjcvxthkezbcrncc33c5a.png"><br>
<br>
<img src="https://habrastorage.org/webt/mu/zj/mz/muzjmzjtko49unkx1iwzzm_zzo0.png"><br>
<br>
<img src="https://habrastorage.org/webt/v4/wr/0j/v4wr0jbbzvpfz94majmfgisny1m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'enregistrement est un peu moins lisse, mais toujours des √©tag√®res stables de 64k √† 19-21k par voiture. Dans le m√™me temps, la charge sur les contr√¥leurs est beaucoup plus faible. Si lors de la lecture le niveau de charge total du processeur est pass√© de 44 √† 109, alors √† l'enregistrement de 57 √† 73 GHz.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, vous pouvez observer l'exemple le plus simple et le plus √©vident des caract√©ristiques des syst√®mes hyperconverg√©s - le seul consommateur n'est tout simplement pas en mesure d'utiliser compl√®tement toutes les ressources du syst√®me, et lorsque la charge est ajout√©e, il n'y a pas de baisse significative des performances. </font><font style="vertical-align: inherit;">La chute que nous assistons est d√©j√† le r√©sultat de charges synth√©tiques extr√™mes con√ßues pour tout presser jusqu'√† la derni√®re goutte, ce qui n'est presque jamais le cas dans un produit normal.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rompre OLTP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä ce moment-l√†, il √©tait devenu ennuyeux de voir √† quel point HyperFlex √©tait pr√©visible. </font><font style="vertical-align: inherit;">Besoin urgent de casser quelque chose! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/rq/da/nwrqdazu_dn_gpyg6cdu3z0paju.png"><br>
<br>
<img src="https://habrastorage.org/webt/wr/fw/ks/wrfwkshatwbjd5gr2rvvtevdf8s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le point rouge marque le moment o√π la machine virtuelle du contr√¥leur s'arr√™te sur l'un des h√¥tes avec une charge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que par d√©faut, la reconstruction dans HyperFlex d√©marre imm√©diatement uniquement lorsque le disque est perdu et lorsque le n≈ìud est perdu, le d√©lai d'expiration est de 2 heures, le moment de la reconstruction forc√©e est marqu√© d'un point vert.</font></font><br>
<br>
<pre><code class="plaintext hljs">login as: admin<font></font>
 HyperFlex StorageController 4.0(2a)<font></font>
admin@192.168.***.***'s password:<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 0<font></font>
    rebalanceState: cluster_rebalance_not_running<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance start -f<font></font>
msgstr: Successfully started rebalance<font></font>
params:<font></font>
msgid: Successfully started rebalance<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt; stcli rebalance status<font></font>
rebalanceStatus:<font></font>
    percentComplete: 16<font></font>
    rebalanceState: cluster_rebalance_ongoing<font></font>
rebalanceEnabled: True<font></font>
&lt;b&gt;admin@SpringpathController0VY9B6ERXT:~$&lt;/b&gt;</code></pre><br>
<img src="https://habrastorage.org/webt/sh/ry/qo/shryqousd3rdr6w7pwmdemcjpzk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les op√©rations ont gel√© pendant quelques secondes et se sont √† nouveau poursuivies, remarquant presque la reconstruction. </font><font style="vertical-align: inherit;">Il est dans un √©tat stable lorsqu'il est loin de la surcharge du cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pourquoi Cisco 2 heures n'est-il pas un probl√®me, alors que les concurrents ont moins de num√©ros? </font><font style="vertical-align: inherit;">Cisco recommande fortement d'utiliser RF3 comme niveau de base de protection des donn√©es pour tout sauf les machines qui ne sont pas dommage. </font><font style="vertical-align: inherit;">Vous avez d√©cid√© d'installer des correctifs ou de faire quelque chose avec l'h√¥te, d√©sactivez-le. </font><font style="vertical-align: inherit;">Et il y a une chance que juste √† ce moment un autre h√¥te √©choue - et alors dans le cas de RF2 tout deviendra un enjeu, et avec RF3 il y aura une copie active des donn√©es. </font><font style="vertical-align: inherit;">Et oui, en effet, il est tout √† fait possible de survivre 2 heures dans un accident sur RF2 jusqu'√† ce que la r√©cup√©ration en RF3 commence.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cassez-moi compl√®tement!</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Briser - si briser. </font><font style="vertical-align: inherit;">Pleine charge. </font><font style="vertical-align: inherit;">Dans ce cas, j'ai cr√©√© un test avec un profil ressemblant plus ou moins √† une charge r√©elle (70% lu, 20% al√©atoire, 8k, 6d 128q). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4k/6l/rr/4k6lrrwh29qbybibwy2_gvq9y-e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devinez o√π CVM a √©t√© d√©sactiv√© et o√π la reconstruction a-t-elle commenc√©? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0h/ur/am/0huramdwazcpyvzycht-hn1bwks.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la situation de la reconstruction, HyperFlex a plut√¥t bien fonctionn√©, sans provoquer une baisse catastrophique des performances ou une augmentation multiple des retards, m√™me sous charge sous les tomates m√™mes. </font><font style="vertical-align: inherit;">La seule chose que j'aimerais vraiment, c'est cher Cisco, faire tout de m√™me le timeout √† moins de 2 heures par d√©faut.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour conclure, je rappelle l'objectif du test: √©tudier le syst√®me Cisco HyperFlex aujourd'hui, sans regarder l'historique, √©tudier ses performances √† l'aide de synth√©tiques et tirer des conclusions sur son applicabilit√© √† un produit r√©el. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sur les performances. Les performances sont tr√®s bonnes et vous ne ferez aucun autre commentaire ici. √âtant donn√© que j'avais un syst√®me de la g√©n√©ration pr√©c√©dente lors du test, je peux dire exactement une chose - sur HyperFlex All Flash, vous ex√©cuterez en capacit√©, en processeur, en m√©moire, mais pas en disques. Sauf peut-√™tre 1% des applications surcharg√©es, mais vous devez mener une conversation avec elles personnellement. Les instantan√©s natifs RoW fonctionnent. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, selon disponibilit√©. Le syst√®me, apr√®s avoir d√©tect√© une panne, est assez bon (sans baisse des performances parfois); Il y a une l√©g√®re plainte dans le d√©lai d'attente par d√©faut de 2 heures avant de d√©marrer la r√©cup√©ration (si l'h√¥te est perdu), mais √©tant donn√© le RF3 hautement recommand√©, c'est plus tatillon. La r√©cup√©ration apr√®s une d√©faillance du disque commence imm√©diatement. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion 3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en prix et en comparaison avec les concurrents. </font><font style="vertical-align: inherit;">Le prix du syst√®me peut varier plusieurs fois en fonction de la configuration d'un projet sp√©cifique. </font><font style="vertical-align: inherit;">Une grande partie du co√ªt du projet sera constitu√©e de syst√®mes et de logiciels d'application sous licence, qui fonctionneront au-dessus de la plate-forme d'infrastructure. </font><font style="vertical-align: inherit;">Par cons√©quent, la seule fa√ßon de comparer avec les concurrents est de comparer des offres commerciales sp√©cifiques qui r√©pondent aux exigences techniques, sp√©cifiquement pour votre entreprise pour un projet sp√©cifique. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion finale</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : le syst√®me fonctionne, assez mature pour une utilisation dans le produit pour avril 2020, si les recommandations du vendeur sont lues et appliqu√©es, plut√¥t que de fumer.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497010/index.html">Investir en p√©riode de repli des march√©s: 3 strat√©gies de comportement en bourse</a></li>
<li><a href="../fr497014/index.html">Qui √™tes-vous, ing√©nieur QA ou testeur?</a></li>
<li><a href="../fr497016/index.html">13 avril Java Digest</a></li>
<li><a href="../fr497020/index.html">DocuSign, un service de signature num√©rique populaire, prend d√©sormais en charge l'infrastructure GlobalSign</a></li>
<li><a href="../fr497022/index.html">Mise √† jour de l'acc√®s au r√©seau d'entreprise. Nouveaux commutateurs Gigabit ExtremeSwitching X435</a></li>
<li><a href="../fr497028/index.html">Bienvenue sur Robot Operating System MeetUp</a></li>
<li><a href="../fr497030/index.html">Exp√©rience dans la mise en ≈ìuvre d'usines de r√©seau bas√©es sur EVPN VXLAN et Cisco ACI et une petite comparaison</a></li>
<li><a href="../fr497032/index.html">Entreprise de services et crise: histoires de r√©ussite. Comment pensez-vous que vous sortez des sentiers battus?</a></li>
<li><a href="../fr497034/index.html">Qu'est-ce que le nouveau SDK nRF Connect pour les pays nordiques? √âvolution, r√©volution ou alternative?</a></li>
<li><a href="../fr497036/index.html">Quand arr√™ter le processus de reconnaissance de s√©quence vid√©o?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>