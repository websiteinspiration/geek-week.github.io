<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèæ üôçüèº üåú How to work around errors when building reporting in Power BI and come to the construction of an upload system for big data üí™üèø üë≠ üïñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Behind beautiful and understandable Power BI dashboards is often weeks of preparation and data mining. Especially when it comes to building useful BI ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How to work around errors when building reporting in Power BI and come to the construction of an upload system for big data</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/agima/blog/492204/"><img src="https://habrastorage.org/webt/2d/wo/vr/2dwovr1h5boyixwojsztgjctksk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Behind beautiful and understandable Power BI dashboards is often weeks of preparation and data mining. </font><font style="vertical-align: inherit;">Especially when it comes to building useful BI reporting in a large organization with a traffic volume of tens of millions of visitors every month. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, I want to describe a number of negative aspects that I encountered when building BI reporting based on data from web analytics systems in a number of companies (large representatives of Russian e-commerce, insurance companies, etc.). </font><font style="vertical-align: inherit;">The article does not aim to make anti-advertising, or vice versa, the advertising of certain tools or decisions. </font><font style="vertical-align: inherit;">It is prepared in order to help avoid possible negative moments to other users and indicate options for solutions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disclaimer</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am talking about large amounts of data and show examples of uploading and sampling from Google Analytics 360. On projects with a small amount of data, such difficulties may not exist. </font><font style="vertical-align: inherit;">I met all the identified problems in practice and in the article I describe only my experience in solving - yours can be completely different.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connector to Yandex.Metrica</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandex.Metrica has milder sampling conditions and an intuitive interface compared to Google Analytics. Therefore, many marketers prefer Yandex.Metrica and build BI reporting on data uploading from there. To do this, use the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connector of</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maxim Uvarov. This method is unsafe and does not allow processing complex requests. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Large companies need a guarantee that confidential information will not fall into the hands of detractors, and financial indicators will be used only for stakeholders and exclusively within the company. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first big minus is that in order to use the connector, in Power BI you need to enable the ‚ÄúIgnore privacy levels‚Äù setting, otherwise it just won‚Äôt work.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ty/pg/eb/typgebof8euu4d6s2pgljyfqs4k.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, confidential data can fall into the hands of any unauthorized user. This is confirmed by an excerpt from Power BI Help. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xd/2j/86/xd2j860l6kp0j7wuswlge0jor3u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data connection is anonymous. However, there is no authorization or check for permission to use this data to those users who are really allowed to. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gd/b3/dn/gdb3dni9wi_kxd27btthfhuk5h0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For these connectors to work, you need to get an oauth access token. The description of the connector provides a link on how to give the application access to your account. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-y/nq/gx/-ynqgxssteulef1kedj3smcflkk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, a third-party application will gain access to your account. Nobody bears a guarantee for the safety of your data.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tm/ux/23/tmux237gyybnovyelwetareee4g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second minus is that Yandex.Metrica API cannot process large amounts of data on large projects, and as a result, the connector also refuses to work with complex queries on raw Yandex.Metrica data - it does not unload them. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, you need to upload data for a year, without any complex filters. The connector throws an error: ‚ÄúThe request is too complex. Please reduce the date spacing or sampling. " </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xs/vx/fi/xsvxfi4zsihgayia1fo87_pbj88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, this is a translation of the error of the Yandex.Metrica API itself. However, in this case, we have no choice to download data with a breakdown by month or day - for example, to cycle data for each month and combine them into a single dataset overcoming an API error. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you significantly reduce the period, then the API allows you to pump data, but this is only a small part of what we need.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xd/gd/6q/xdgd6qonfgcyjthxhjj65_ophyu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To build large reports, unloading for short periods is impractical and inconvenient. </font><font style="vertical-align: inherit;">In practice, you often need unloading through complex open site funnels with a huge number of visits per day. </font><font style="vertical-align: inherit;">Especially when using complex segments of visits, it is practically impossible to upload the necessary data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Even if you were able to load the data, it is not a fact that it will be possible to upload to the data model to build the reporting itself, because various loading errors pop up every now and then. </font><font style="vertical-align: inherit;">For some reason, even with a normally loaded table, errors occur.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/wk/9d/u8/wk9du8sdgpdqe1gb7cr-n2uk6_8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For all stakeholders within the company to be able to use the report built on the Yandex.Metrica API connector, you need to publish the report in PowerBI Service. </font><font style="vertical-align: inherit;">In this case, privacy levels will also have to be ignored.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/dg/i8/qcdgi8gck0lkcdp-t--vedkmuiw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When the visualization is configured and the report is published in the Microsoft cloud, the connector will display a combined query error and will not be updated through the Power BI Service - you will not be able to configure the scheduled update of your report. The error occurs when one of the queries, which forms the final upload table, contains the logic of simultaneous work with the external and internal query. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the error, the ‚ÄúCalled function‚Äù </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0-/ci/rt/0-cirtjh6ifdkpe-ajduldxstsc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
table is </font><font style="vertical-align: inherit;">just indicated: </font><font style="vertical-align: inherit;">This table is obtained due to the PQYM function, which works with an external data source - Yandex.Metrica API. The reporting update mechanism in Power BI does not work and asks to redo the combination of queries. This is due to the internal links of one request to connect to an external request, as well as due to the structure of the function itself.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/lv/mb/vvlvmbnqatqohghiivpcofsgxze.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We decided not to use such a connector when building reporting and switched to unloading data from the Yandex.Metrica API via Python scripts, more about this later in the article.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Analytics Connector</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To build reporting on Google Analytics data (we are talking about direct downloading from the analytics system), there is also a </font><font style="vertical-align: inherit;">Maxim Uvarov </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">connector</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here you will also have to set ‚ÄúIgnoring privacy levels‚Äù. Access to the API of your analytics system, which contains data on online sales, takes place on an anonymous connection. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/ke/x1/pwkex1vkvifxlkqne2kbvo0pvsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
According to the instructions, again you will have to open access to a third-party application, only for a Google account, which contains a threat to the privacy of your data. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/qr/0f/zxqr0fyqjpqp_6umz9y_o5_i83a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can rewrite some data in the connector itself and start using it for your own application. To do this, register ‚ÄúOAuth 2.0 Client ID‚Äù on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud.google.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, get access tokens and enter the necessary access keys in its mechanism of work. But even these actions will not help in the fight against sampling and updating your reporting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Whenever you touch the aggregated data of the Google Analytics API, we will always encounter sampling. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The connector has the option of unloading one day, but even it does not always save. The sampling indicator built into the connector shows that it is there even in one day. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/kj/5l/dkkj5lp-e3zi8drcbylxc1hzmjk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, session data broken down by Shopping Stage cannot be uploaded without sampling on such amounts of data. This will lead to large errors in data and measures when building reports, especially when it is necessary to accurately calculate the conversion of the transition from one step to another, or to upload data on funnels with a complex structure of segments.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Even if data loss is not critical for you, you still cannot configure the scheduled update of your reports through the Power BI Service. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/5q/61/sh5q61niklucdiieoedjfltnp3c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The same error of the mechanism of work interferes, only the PQGA functions.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/k0/ft/uy/k0ftuyqfzkqptqvupuotawgo1my.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also refused to work with this connector.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Analytics Native Connector</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sometimes Google and Microsoft make concessions to each other: Power BI out of the box has a standard Google Analytics connector. </font><font style="vertical-align: inherit;">Unfortunately, there is no such option for Yandex.Metrica.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xl/hk/po/xlhkpo-a4h95gz-nksi6ws_613k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The mechanism for working with the Google Analytics API is more conveniently implemented here than in Maxim Uvarov‚Äôs connector, but while downloading a large number of indicators, the data is too sampled. </font><font style="vertical-align: inherit;">The repeating numbers in the screenshot are the sampled data.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lw/ba/n_/lwban_daksuitnrmfw5sihfjqpm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can avoid sampling if you unload mini-tables broken down only by date and any one indicator. For example, date, number of sessions and device type. And then from these tables to collect the necessary reporting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you do not have millions of traffic, this may help. However, reporting will not be informative and with limitations on scalability: because of the many mini-tables in the data model, it is difficult to create relationships between them. This imposes a restriction on the creation of filters and slices. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can rewrite the standard connector and force it to upload data for each day, while the data will be close to the real numbers in the GA interface, but you will not be able to avoid sampling.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/br/oc/fg/brocfgwihu2rpcqfjrdmhsvbsdc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
According to my observations, in the breakdown of Shopping Stage sessions, not a single connector has been able to normally upload data without sampling on large amounts of data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the standard connector, you cannot customize the download dates. </font><font style="vertical-align: inherit;">All that is is simply a selection of parameters and metrics from the Google Analytics APIs arranged in folders.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/he/_n/tt/he_ntt6qogkz6vm-3mjnbmn0rya.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This connector is suitable for small and medium-sized Internet projects with little traffic. </font><font style="vertical-align: inherit;">Here, a similar situation arises with obtaining data from Yandex.Metrica. </font><font style="vertical-align: inherit;">All the necessary information without loss of accuracy can only be downloaded directly through the API using scripts or special data streaming services - more on this later in the article.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sticks in Wheels by Google</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recently, we noticed a strange lock - when trying to configure the update for the "native" connector to Google Analytics, an authorization error appeared through a Google account in the Power BI Service interface. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o0/wt/yr/o0wtyrw-caxzwahcpjjb_pgfrbe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We tried to find out from Google what to do in such a situation and how to ‚Äúwhitewash‚Äù the account‚Äôs reputation, but our attempts failed. We tried to register new accounts and log in through different devices - Google blocked any authorization attempts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
About a month after the blocking, we still managed to log in through the same account, but such an incident can greatly interfere with the release of the necessary BI-reporting on time and put the customer in an awkward position. </font><font style="vertical-align: inherit;">Immediately after the lock, we began to look for a possible way out of the situation. </font><font style="vertical-align: inherit;">To avoid unexpected locks, we decided to create our own controlled environment with the necessary data for BI reporting.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution options</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Get the necessary BI-reporting for medium and large organizations, and even without sampling is possible. </font><font style="vertical-align: inherit;">But you need to try a little and choose one of several ways. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can use ready-made services for streaming data. </font><font style="vertical-align: inherit;">Their main purpose is to upload data from the analytics system, various advertising systems, CRM and other services to any storage. </font><font style="vertical-align: inherit;">Convenient, fast and practical, but not free. </font><font style="vertical-align: inherit;">On large volumes of data or data with multiple sources, the amounts are tangible. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The most famous services:</font></font></b><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renta.im</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OWOX BI Pipeline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myBI Connect</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each of these systems allows you to configure daily streaming of non-sampled data from web analytics systems (Yandex.Metrics and Google Analytics) to databases (for example, BigQuery, Azure SQL Database, Microsoft SQL Server or ClickHouse) for connecting via Power BI and creating reports. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the above tools cost the company too much, you can try to implement your data upload system and use Power BI + Python + Any Cloud Server (or Yandex.Cloud) + PostgreSQL. This is the method we use when building BI reporting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
System Interaction Scheme:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kb/iu/um/kbiuumx6q6a_k5wxdq1g78ukehg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Such a scheme of work provides the necessary preservation, autonomy and aggregation of data. Having established such a scheme once, you will not need to waste time collecting information - everything is in the repository, you just have to connect and start making a report on Power BI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Python scripts ‚Äúpull‚Äù all the API data from the necessary sources, write to the database, or form uploads (for example, in csv format). Scripts for uploading from the API and loading into the database deserve a separate article, and someday I will write it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, there are a lot of templates and ready-made solutions on the Internet, but for further scaling it is necessary to know the individual needs of the system under which the scripts for unloading are created.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data is written to a pre-created and configured database - in our case, PostgreSQL. </font><font style="vertical-align: inherit;">Scripts pump out data for each day and write them to tables according to a schedule. </font><font style="vertical-align: inherit;">They are located on a cloud server under our control or under the control of the client‚Äôs IT-security service. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are a large number of companies that provide cloud storage services. </font><font style="vertical-align: inherit;">Based on personal preferences, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yandex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">Cloud</font></a><font style="vertical-align: inherit;"> was selected </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advantages of Yandex.Cloud:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convenient configuration and server rental with preinstalled PostgreSQL.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extensive documentation in Russian, which is clearly stated and allows you to quickly learn how to use the service. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convenient server management.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fast support of specialists.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The flexibility of various equipment settings and tariffs: no one imposes any ready-made configuration packages, you choose the configuration of your equipment yourself, plus you can immediately order the preset of any database.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yt/f6/_-/ytf6_-9xrfcobvmfbwaajwyl8bm.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The resulting uploads are written to the PostgreSQL database. </font><font style="vertical-align: inherit;">This database was chosen because it is an object-relational DBMS (working with multidimensional arrays and JSON support from the ‚Äúbox‚Äù - for complex data structures must have). </font><font style="vertical-align: inherit;">It is flexible, reliable, free, and it also has a huge community of support. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Power BI has a built-in direct connector in PostgreSQL. </font><font style="vertical-align: inherit;">At the first connection, you need to install additional </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Npgsql</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Power BI notifies you of this and provides a link.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ju/n_/wf/jun_wfcjtsnm0khj3wf9pzj8h2s.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To configure report updates when using cloud storage, you must configure the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Power BI Gateway</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . It is needed to configure updating BI reporting and ensuring the security of confidential data when transferring it from a database, which should be located in the internal IT circuit of your organization, or on a secure cloud server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The gateway provides fast and secure data transfer between data stores located on the organization‚Äôs internal network and Microsoft cloud services. The data transmission between Power BI and the gateway is secure, and all credentials provided by the gateway administrators are encrypted to protect information in the cloud and are decrypted only on the gateway computer.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mm/hd/re/mmhdrebvglgmfz1zfbncjck835w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After downloading </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Power BI Gateway</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and launching it, a dialog box appears.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/or/q7/4z/orq74zn_gyemebomwqxzfxcwkfu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To register and operate the gateway, the credentials of the Power BI Service cloud service are required.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/4z/pq/ft/4zpqft8l1urixndm8dfndrrje4s.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After all the settings, a window about the working gateway will appear. </font><font style="vertical-align: inherit;">Next, you need to make </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">additional settings.</font></font></a><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sw/mb/t2/swmbt2b7ldkzf42k56px-ucc4re.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A simpler alternative to customizing PostgreSQL is Google BigQuery. </font><font style="vertical-align: inherit;">Power BI has a built-in connector in Google BigQuery. </font><font style="vertical-align: inherit;">In this case, it is necessary to follow the principle of "seven times to calculate the cost, once to fulfill the request."</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/3m/gv/7a/3mgv7a-1zf0i3g8oxj-jiabgke4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BigQuery can be used for free for a year, simply by tying a bank card upon agreement to use the service. </font><font style="vertical-align: inherit;">Money after the deadline without your knowledge will not be debited. </font><font style="vertical-align: inherit;">Further tariffing - according to the tariffs of the system itself, but with a few pleasant "pluses". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the downloaded data from your systems does not reach 10 GB per month (!), There will be no charge for downloading.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bg/il/hj/bgilhj19p3rswgrnp5co7lw75dq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If monthly data processing does not exceed 1 TB, no fee will be charged for this either. </font><font style="vertical-align: inherit;">If more, then $ 5 for each treatment 1 TB.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ff/gk/4l/ffgk4l0whznxxacywqupqmuht1i.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you need to store more than 10 GB per month, each subsequent gigabyte will cost $ 0.010.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/bn/7z/lhbn7zv038ot99ogeahedobx5bc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The tariffs are described in more detail on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the BigQuery page.</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you need data from various analytics systems, and at the same time, safety, security, continuous aggregation, usability and lack of sampling are fundamental to you, you have two ways. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first is streaming services. </font><font style="vertical-align: inherit;">They are easy to use, they have ongoing technical support and ready-made integration with data warehouses. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disadvantages:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tangible costs on large amounts of data.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limited type of integration provided.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uncontrolled processes on the side of the streaming service provider to work with your information.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second is its own data upload and aggregation stream. Scalable, controlled, with data security. It may seem complicated and time consuming to implement. If the company needs an effective organization of BI reporting, its further scalability and data security, then this option is the most acceptable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All those who are only thinking about full-fledged BI reporting need to add the motto ‚ÄúAccumulate, structure and protect these data from youth‚Äù into the corporate culture. There is nothing better than a full-fledged fault-tolerant database with a regular backup and with differentiated rights to use it for different categories of stakeholders.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is necessary to accumulate, structure and aggregate your data from analytics systems, and from a mobile application, and from other client services. </font><font style="vertical-align: inherit;">All this in the future will help to analyze both your audience and products in any sections. </font><font style="vertical-align: inherit;">Information and data now rule the world and sometimes cost more than money. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôll talk about how to implement the approach described in the article for transferring analytics data to a PostgreSQL database using Python scripts and implementation details in the following articles.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492190/index.html">Russian SaaS 2019 - results</a></li>
<li><a href="../en492192/index.html">In search of pocket excellence</a></li>
<li><a href="../en492194/index.html">Meet a guy selling wireless devices to quickly steal luxury cars</a></li>
<li><a href="../en492200/index.html">Test Automation: Java or Python?</a></li>
<li><a href="../en492202/index.html">–ö–æ—Ä–æ–Ω–∞–≤–∏—Ä—É—Å COVID-19: —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç—ã, –±–µ–∑ –ø–∞–Ω–∏–∫–∏</a></li>
<li><a href="../en492210/index.html">Infinidat Storage Architecture Technical Overview</a></li>
<li><a href="../en492212/index.html">Frontend development of portals on open source software: share experience</a></li>
<li><a href="../en492214/index.html">Why is it worth making meetings while walking? Proven by science, confirmed by the mafia</a></li>
<li><a href="../en492216/index.html">Saving Values ‚Äã‚Äãin a .Net Application at the Build Stage</a></li>
<li><a href="../en492218/index.html">Icon Design Rules to Remember</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>