<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåüèº üî∂ ‚õ∫Ô∏è Actualice RouterOS en su MikroTik üë• üíáüèº üòÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la tarde del 10 de marzo, el servicio de soporte Mail.ru comenz√≥ a recibir quejas de los usuarios sobre la imposibilidad de conectarse a los servid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Actualice RouterOS en su MikroTik</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/492094/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/2d/e9/3g2de9kzpmcrx2conlbddund3xw.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la tarde del 10 de marzo, el servicio de soporte Mail.ru comenz√≥ a recibir quejas de los usuarios sobre la imposibilidad de conectarse a los servidores Mail.ru IMAP / SMTP a trav√©s de programas de correo electr√≥nico. </font><font style="vertical-align: inherit;">Al mismo tiempo, algunas de las conexiones no pasaron y algunas muestran un error de certificado. </font><font style="vertical-align: inherit;">El error es causado por el hecho de que el "servidor" emite un certificado TLS autofirmado.</font></font><br>
<a name="habracut"></a>&nbsp;<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ki/7g/ek/ki7gekkwh6sqysnyuyb3x-punie.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En dos d√≠as, m√°s de 10 quejas llegaron de usuarios de una variedad de redes y con una variedad de dispositivos, lo que hizo improbable que un solo proveedor tuviera un problema en la red. </font><font style="vertical-align: inherit;">Un an√°lisis m√°s detallado del problema revel√≥ que hay una sustituci√≥n del servidor imap.mail.ru (as√≠ como de otros servidores y servicios de correo) a nivel DNS. </font><font style="vertical-align: inherit;">Adem√°s, con la asistencia activa de nuestros usuarios, descubrimos que el motivo era una entrada incorrecta en la memoria cach√© de su enrutador, que en combinaci√≥n es un solucionador de DNS local, y que en muchos casos (pero no en todos) result√≥ ser el dispositivo MikroTik, que es muy popular en redes corporativas peque√±as y en peque√±os proveedores de internet.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cu√°l es el problema</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En septiembre de 2019, los investigadores </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encontraron</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varias vulnerabilidades en MikroTik RouterOS (CVE-2019-3976, CVE-2019-3977, CVE-2019-3978, CVE-2019-3979) que permitieron el ataque de envenenamiento de cach√© DNS, es decir. </font><font style="vertical-align: inherit;">la capacidad de falsificar registros DNS en la memoria cach√© DNS del enrutador, y CVE-2019-3978 permite que un atacante no espere a que alguien de la red interna solicite un registro en su servidor DNS para envenenar la memoria cach√© del resolutor, sino que inicie dicha solicitud a trav√©s del puerto 8291 (UDP y TCP). </font><font style="vertical-align: inherit;">La vulnerabilidad fue corregida por MikroTik en las versiones de RouterOS 6.45.7 (estable) y 6.44.6 (a largo plazo) el 28 de octubre de 2019, sin embargo, seg√∫n los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estudios, la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mayor√≠a de los usuarios no han instalado parches en este momento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es obvio que ahora este problema est√° siendo explotado activamente "en vivo".</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Porque es peligroso</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un atacante puede reemplazar el registro DNS de cualquier host al que acceda un usuario en la red interna, interceptando as√≠ el tr√°fico hacia √©l. </font><font style="vertical-align: inherit;">Si la informaci√≥n confidencial se transmite sin cifrado (por ejemplo, a trav√©s de http: // sin TLS) o el usuario acepta aceptar un certificado falso, el atacante puede recibir todos los datos que se env√≠an a trav√©s de la conexi√≥n, por ejemplo, inicio de sesi√≥n o contrase√±a. </font><font style="vertical-align: inherit;">Desafortunadamente, la pr√°ctica muestra que si un usuario tiene la oportunidad de aceptar un certificado falso, lo usar√°.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por qu√© servidores SMTP e IMAP, y qu√© salvaron a los usuarios</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øPor qu√© los atacantes intentaron interceptar con precisi√≥n el tr√°fico SMTP / IMAP de las aplicaciones de correo, y no el tr√°fico web, aunque la mayor√≠a de los usuarios van al correo a trav√©s del navegador HTTPS? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No todos los programas de correo SMTP e IMAP / POP3 protegen al usuario de errores al no permitirle enviar un nombre de usuario y contrase√±a a trav√©s de una conexi√≥n insegura o comprometida, aunque de acuerdo con el est√°ndar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RFC 8314</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adoptado en 2018 (e implementado en Mail.ru mucho antes), deben proteger al usuario de interceptar una contrase√±a a trav√©s de cualquier conexi√≥n insegura. Adem√°s, aunque el protocolo OAuth se usa muy raramente en clientes de correo (es compatible con los servidores de correo Mail.ru), sin √©l, el nombre de usuario y la contrase√±a se transmiten en cada sesi√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los navegadores pueden estar ligeramente mejor protegidos de los ataques Man-in-the-Middle. En todos los dominios cr√≠ticos de mail.ru, adem√°s de HTTPS, se incluye la pol√≠tica HSTS (seguridad estricta de transporte HTTP). Cuando HSTS est√° habilitado, un navegador moderno no le brinda al usuario una oportunidad simple de aceptar un certificado falso, incluso si el usuario lo desea. Adem√°s de HSTS, los usuarios se salvaron por el hecho de que desde 2017, los servidores Mail.ru SMTP, IMAP y POP3 proh√≠ben la transmisi√≥n de contrase√±as a trav√©s de una conexi√≥n insegura, todos nuestros usuarios usaron TLS para acceder a trav√©s de SMTP, POP3 e IMAP, y por lo tanto, pueden iniciar sesi√≥n y contrase√±a interceptar solo si el propio usuario acepta aceptar el certificado falsificado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para los usuarios m√≥viles, siempre recomendamos usar las aplicaciones Mail.ru para acceder al correo, como </font><font style="vertical-align: inherit;">trabajar con el correo en ellos es m√°s seguro que en los navegadores o en los clientes SMTP / IMAP integrados.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lo que debe hacerse</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debe actualizar el firmware de MikroTik RouterOS a una versi√≥n segura. </font><font style="vertical-align: inherit;">Si por alguna raz√≥n esto no es posible, es necesario filtrar el tr√°fico en el puerto 8291 (tcp y udp), esto complicar√° la operaci√≥n del problema, aunque no eliminar√° la posibilidad de inyecci√≥n pasiva en la cach√© DNS. </font><font style="vertical-align: inherit;">Los proveedores de servicios de Internet deben filtrar este puerto en sus redes para proteger a los usuarios corporativos.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los usuarios que aceptaron un certificado falsificado deben cambiar urgentemente la contrase√±a del correo electr√≥nico y otros servicios para los que se acept√≥ este certificado. </font><font style="vertical-align: inherit;">Por nuestra parte, notificaremos a los usuarios que ingresan el correo a trav√©s de dispositivos vulnerables. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PD: todav√≠a hay una vulnerabilidad relacionada descrita en la publicaci√≥n</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LukaSafonov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La vulnerabilidad de backport en RouterOS amenaza a cientos de miles de dispositivos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ".</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es492076/index.html">Un ejemplo de arquitectura hexagonal en Java</a></li>
<li><a href="../es492078/index.html">Los materiales m√°s importantes y √∫tiles sobre el coronavirus COVID-19</a></li>
<li><a href="../es492082/index.html">C√≥mo simplificar la administraci√≥n de dispositivos dom√©sticos y asegurarlos (compartir ideas sobre Kauri Safe Smart Home)</a></li>
<li><a href="../es492086/index.html">Coronavirus vs negocio ruso de TI: ¬øest√°n las empresas listas para transferir empleados a una ubicaci√≥n remota?</a></li>
<li><a href="../es492088/index.html">Probar el motor del juego Amazon Lumberyard. Enfoques y herramientas</a></li>
<li><a href="../es492100/index.html">Probar tarjetas de video para trabajar con KOMPAS-3D</a></li>
<li><a href="../es492102/index.html">Creaci√≥n de chatbot VK basado en VkBotCore C #</a></li>
<li><a href="../es492106/index.html">Mecanografiado: comportamiento incorrecto o indulgencias de fiabilidad</a></li>
<li><a href="../es492108/index.html">C√≥mo llegar a Silicon Valley: 7 formas de iniciarlo</a></li>
<li><a href="../es492110/index.html">Uso de un token en la nube con soporte para criptograf√≠a rusa en la plataforma Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>