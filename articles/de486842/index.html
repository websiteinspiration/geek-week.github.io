<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßíüèº üßöüèº ‚§µÔ∏è Konsul + iptables =: 3 üç∏ üå± ü•ô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im Jahr 2010 hatte Wargaming 50 Server und ein einfaches Netzwerkmodell: Backend, Frontend und Firewall. Die Anzahl der Server wuchs, das Modell wurde...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Konsul + iptables =: 3</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/486842/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Jahr 2010 hatte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wargaming</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 50 Server und ein einfaches Netzwerkmodell: Backend, Frontend und Firewall. Die Anzahl der Server wuchs, das Modell wurde komplizierter: Staging, isolierte VLANs mit ACLs, dann VPNs mit VRF, VLANs mit ACLs zu L2, VRFs von ACLs zu L3. Kopf dreht sich? Mehr wird mehr Spa√ü machen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Server anfingen, 16.000 ohne Tr√§nen mit so vielen heterogenen Segmenten zu arbeiten, wurde es unm√∂glich. Deshalb haben sie eine andere L√∂sung gefunden. Wir haben den Netfilter-Stack genommen, Consul als Datenquelle hinzugef√ºgt und eine schnell verteilte Firewall erhalten. Sie ersetzten die ACL auf den Routern und wurden als externe und interne Firewall verwendet. F√ºr das dynamische Werkzeugmanagement haben wir das BEFW-System entwickelt, das √ºberall eingesetzt wird: von der Kontrolle des Benutzerzugriffs auf das Lebensmittelnetzwerk bis zur Isolierung der Netzwerksegmente voneinander.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/od/wg/bd/odwgbdlxcjww7ln1u_btv23hyvq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie das alles funktioniert und warum Sie sich dieses System genauer ansehen sollten, sagt </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ivan Agarkov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">annmuor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) - der Leiter der Infrastruktursicherheitsgruppe der Wartungseinheit im Minsker Unternehmensentwicklungszentrum. </font><font style="vertical-align: inherit;">Ivan ist ein SELinux-Fan, liebt Perl, schreibt Code. </font><font style="vertical-align: inherit;">Als Leiter der IB-Gruppe arbeitet er regelm√§√üig mit Protokollen, Backups und F &amp; E, um Wargaming vor Hackern zu sch√ºtzen und den Betrieb aller Spieleserver im Unternehmen sicherzustellen.</font></font><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/4zP67uYnsR4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschichtsreferenz</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor ich erz√§hle, wie wir es gemacht haben, werde ich Ihnen sagen, wie wir dazu gekommen sind und warum es gebraucht wurde. Dazu √ºbertragen wir vor 9 Jahren: 2010 erschien nur die World of Tanks. Wargaming hatte ungef√§hr 50 Server. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e6/qf/6h/e6qf6hugl_efcmn73qn16mcyeoc.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wachstumsdiagramm der Unternehmensserver.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir hatten ein Netzwerkmodell. F√ºr diese Zeit war es optimal. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bi/zw/vj/bizwvjhrfphzbrhme6v1avzjxag.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Netzwerkmodell im Jahr 2010.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Am Frontend gibt es B√∂sewichte, die uns brechen wollen, aber es gibt eine Firewall darin. Es gibt keine Firewall im Backend, aber es gibt 50 Server, wir alle kennen sie. Alles funktioniert gut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seit 4 Jahren ist die Serverflotte um das 100-fache auf 5000 gewachsen. Die ersten isolierten Netzwerke erschienen - Phasen: Sie k√∂nnen nicht in Produktion gehen, und oft drehten sich dort Dinge, die gef√§hrlich sein k√∂nnten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z0/6e/ba/z06ebavv-r6yu7fuhy2zvvhsnw0.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzwerkmodell im Jahr 2014.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aufgrund der Tr√§gheit wurden dieselben Eisenst√ºcke verwendet, und alle Arbeiten wurden an isolierten VLANs durchgef√ºhrt: ACLs werden in das VLAN geschrieben, die jede Verbindung zulassen oder verbieten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Jahr 2016 erreichte die Anzahl der Server 8000. Wargaming absorbierte andere Studios, zus√§tzliche Affiliate-Netzwerke erschienen. Sie scheinen uns zu geh√∂ren, aber nicht ganz: VLAN funktioniert oft nicht f√ºr Partner, Sie m√ºssen ein VPN mit VRF verwenden, die Isolation wird komplizierter. Eine Mischung von ACL-Isolaten wuchs. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w-/zj/ej/w-zjej3fr8frinvbg4z1thbwdre.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Netzwerkmodell im Jahr 2016.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Zu Beginn des Jahres 2018 wuchs die Fahrzeugflotte auf 16.000. Es gab 6 Segmente, den Rest, einschlie√ülich der geschlossenen, in denen Finanzdaten gespeichert waren, wurden nicht ber√ºcksichtigt. Es gibt Containernetzwerke (Kubernetes), DevOps, Cloud-Netzwerke, die beispielsweise √ºber VPN √ºber das IVS verbunden sind. Es gab viele Regeln - es tat weh. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iv/zf/cd/ivzfcdz9lzxsiugegpfthzwubik.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzwerkmodell und Isolationsmethoden im Jahr 2018.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Isolierung verwendeten wir: VLAN mit ACL auf L2, VRF mit ACL auf L3, VPN und vieles mehr. </font><font style="vertical-align: inherit;">Zu viel.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probleme</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder lebt mit ACLs und VLANs. </font><font style="vertical-align: inherit;">Was ist im Allgemeinen falsch? </font><font style="vertical-align: inherit;">Harold, der den Schmerz versteckt, wird diese Frage beantworten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y2/hi/tl/y2hitlbrqlvcbm6rjg59tzaaqxw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gab viele Probleme, aber es gab f√ºnf massive.</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geometrische Preiserh√∂hungen f√ºr die neuen Regeln</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Jede neue Regel wurde l√§nger als die vorherige hinzugef√ºgt, da Sie zuerst pr√ºfen mussten, ob es bereits eine solche Regel gab.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Innerhalb der Segmente befindet sich keine Firewall</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Segmente waren irgendwie voneinander getrennt, im Inneren gibt es bereits nicht gen√ºgend Ressourcen.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Regeln werden seit langem angewendet. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H√§nde, die ein lokaler Regeloperator in einer Stunde schreiben k√∂nnte. </font><font style="vertical-align: inherit;">Global hat mehrere Tage gedauert.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwierigkeiten bei der Pr√ºfung der Regeln</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Genauer gesagt war es nicht m√∂glich. </font><font style="vertical-align: inherit;">Die ersten Regeln wurden bereits 2010 geschrieben und die meisten ihrer Autoren arbeiteten nicht mehr f√ºr das Unternehmen.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geringe Kontrolle √ºber die Infrastruktur</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies ist das Hauptproblem - wir wussten nicht genau, was mit uns los war.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sah der Netzwerktechniker 2018 aus, als er h√∂rte: ‚ÄûWir brauchen noch mehr ACLs.‚Äú</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hh/rl/_i/hhrl_ig_xefe7lps5yrz_liioam.png" width="350"></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L√∂sungen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anfang 2018 wurde beschlossen, etwas dagegen zu unternehmen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Preis f√ºr die Integration steigt st√§ndig.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Ausgangspunkt war, dass gro√üe Rechenzentren keine isolierten VLANs und ACLs mehr unterst√ºtzten, da der Speicher auf den Ger√§ten knapp wurde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L√∂sung: Entfernen Sie den Faktor Mensch und automatisieren Sie die Bereitstellung des maximalen Zugriffs. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neue Regeln gelten seit langem.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L√∂sung: Beschleunigen Sie die Anwendung der Regeln, machen Sie sie verteilt und parallel. Dazu ben√∂tigen Sie ein verteiltes System, damit die Regeln selbst ohne rsync oder SFTP pro tausend Systeme geliefert werden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Fehlen einer Firewall innerhalb der Segmente.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Firewall innerhalb der Segmente begann zu uns zu fliegen, als verschiedene Dienste innerhalb desselben Netzwerks angezeigt wurden. L√∂sung: Verwenden Sie eine hostbasierte Firewall. Fast √ºberall haben wir Linux und iptables sind √ºberall, das ist kein Problem. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwierigkeiten bei der Pr√ºfung der Regeln.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L√∂sung: Bewahren Sie alle Regeln zur √úberpr√ºfung und Verwaltung an einem einzigen Ort auf, damit wir alles pr√ºfen k√∂nnen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geringe Kontrolle √ºber die Infrastruktur.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L√∂sung: F√ºhren Sie eine Bestandsaufnahme aller Dienste und Zugriffe zwischen ihnen durch.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist eher ein administrativer als ein technischer Prozess. </font><font style="vertical-align: inherit;">Manchmal haben wir 200-300 Neuerscheinungen pro Woche, besonders w√§hrend Werbeaktionen und an Feiertagen. </font><font style="vertical-align: inherit;">Dies gilt jedoch nur f√ºr ein Team unserer DevOps. </font><font style="vertical-align: inherit;">Bei so vielen Releases ist es unm√∂glich zu erkennen, welche Art von Ports, IP und Integration erforderlich sind. </font><font style="vertical-align: inherit;">Deshalb brauchten wir speziell ausgebildete Servicemanager, die die Teams interviewten: ‚ÄûWas gibt es und warum haben Sie es angesprochen?‚Äú </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach all dem, was wir gestartet haben, sah der Netzwerktechniker 2019 so aus.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yv/fx/qi/yvfxqisjbogjxfy6czj0p6xmvuw.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsul</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir beschlossen, alles, was wir gefunden hatten, mithilfe von Servicemanagern in Consul zu platzieren und von dort aus iptables-Regeln zu schreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie haben wir uns dazu entschieden?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sammeln alle Dienste, Netzwerke und Benutzer.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lassen Sie uns darauf basierende iptables-Regeln erstellen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steuerung automatisieren.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PROFITIEREN.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consul ist keine Remote-API, sondern kann auf jedem Knoten arbeiten und in iptables schreiben. </font><font style="vertical-align: inherit;">Es bleibt nur eine automatische Steuerung zu entwickeln, die den √úberschuss beseitigt, und die meisten Probleme werden gel√∂st! </font><font style="vertical-align: inherit;">Wir werden den Rest des Prozesses abschlie√üen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum Konsul?</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gut etabliert.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In den Jahren 2014-15 haben wir es als Backend f√ºr Vault verwendet, in dem wir Passw√∂rter speichern. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verliert keine Daten</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . W√§hrend des Gebrauchs hat Consul bei keinem Unfall Daten verloren. Dies ist ein gro√ües Plus f√ºr das Firewall-Management-System. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P2P-Kommunikation beschleunigt die Verbreitung von Ver√§nderungen</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mit P2P kommen alle √Ñnderungen schnell und Sie m√ºssen nicht stundenlang warten. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktische REST-API.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wir haben auch Apache ZooKeeper in Betracht gezogen, aber es gibt keine REST-API. Sie m√ºssen Kr√ºcken setzen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es funktioniert als Keystore (KV) und als Verzeichnis (Service Discovery)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Sie k√∂nnen Services, Kataloge und Rechenzentren sofort speichern. Dies ist nicht nur f√ºr uns, sondern auch f√ºr benachbarte Teams praktisch, da wir beim Aufbau eines globalen Service gro√ü denken.</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschrieben in Go, das Teil des Wargaming-Stacks ist. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir lieben diese Sprache, wir haben viele Go-Entwickler. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leistungsstarkes ACL-System. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Consul k√∂nnen Sie mithilfe von ACLs verwalten, wer und was geschrieben werden soll. </font><font style="vertical-align: inherit;">Wir garantieren, dass sich die Regeln der Firewall nicht mit anderen √ºberschneiden und wir keine Probleme damit haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber der Konsul hat seine Nachteile.</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird nicht innerhalb des Rechenzentrums skaliert, wenn Sie keine Gesch√§ftsversion haben. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird nur vom Verband skaliert.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sehr abh√§ngig von Netzwerkqualit√§t und Serverlast. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consul funktioniert normalerweise nicht als Server auf einem ausgelasteten Server, wenn im Netzwerk Verz√∂gerungen auftreten, z. B. ungleichm√§√üige Geschwindigkeit. </font><font style="vertical-align: inherit;">Dies liegt an P2P-Verbindungen und Update-Verteilungsmodellen.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwierigkeiten bei der √úberwachung der Zug√§nglichkeit</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Im Status des Konsuls kann man sagen, dass alles in Ordnung ist, aber er ist schon lange gestorben.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben die meisten dieser Probleme w√§hrend der Operation von Consul gel√∂st und uns daf√ºr entschieden. </font><font style="vertical-align: inherit;">Das Unternehmen hat Pl√§ne f√ºr ein alternatives Backend, aber wir haben gelernt, mit Problemen umzugehen, und leben immer noch mit Consul zusammen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie der Konsul funktioniert</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im bedingten Rechenzentrum installieren wir Server - von drei bis f√ºnf. </font><font style="vertical-align: inherit;">Ein oder zwei Server funktionieren nicht: Sie k√∂nnen kein Quorum organisieren und entscheiden, wer richtig und wer falsch ist, wenn die Daten nicht √ºbereinstimmen. </font><font style="vertical-align: inherit;">Mehr als f√ºnf machen keinen Sinn, die Leistung wird sinken. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/bb/ms/ljbbms9ipssmvl-pooll-judvgs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clients stellen in beliebiger Reihenfolge eine Verbindung zu den Servern her: dieselben Agenten, nur mit einem Flag </font></font><code>server = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jx/ku/ub/jxkuubjet3kolzk07yqq0qkak8m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach erhalten Clients eine Liste der P2P-Verbindungen und bauen Verbindungen untereinander auf. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ow/st/ca/owstcacfv-iuaz42vdlyk1cmes8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf globaler Ebene verbinden wir mehrere Rechenzentren miteinander. </font><font style="vertical-align: inherit;">Sie verbinden auch P2P und kommunizieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/5r/s5/gx5rs5yetwzbe63odrgx6ppfnm4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir Daten von einem anderen Rechenzentrum sammeln m√∂chten, geht die Anforderung von Server zu Server. </font><font style="vertical-align: inherit;">Ein solches Schema wird als </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Serf-Protokoll bezeichnet</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Das Serf-Protokoll wird wie Consul von HashiCorp entwickelt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einige wichtige Fakten zum Konsul</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Konsul hat Unterlagen, die seine Arbeit beschreiben. </font><font style="vertical-align: inherit;">Ich werde nur ausgew√§hlte Fakten nennen, die es wert sind, kennengelernt zu werden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konsulenserver w√§hlen Meister unter den W√§hlern aus</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Consul w√§hlt den Assistenten aus der Liste der Server f√ºr jedes Rechenzentrum aus, und alle Anforderungen werden unabh√§ngig von der Anzahl der Server nur an diesen gesendet. </font><font style="vertical-align: inherit;">Das Aufh√§ngen des Assistenten f√ºhrt nicht zur Wiederwahl. </font><font style="vertical-align: inherit;">Wenn der Assistent nicht ausgew√§hlt ist, werden die Anforderungen von niemandem bearbeitet.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√∂chten Sie eine horizontale Skalierung? </font><font style="vertical-align: inherit;">Entschuldigung, nein.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine Anfrage an ein anderes Rechenzentrum geht von Master zu Master, unabh√§ngig davon, auf welchen Server sie gelangt ist. </font><font style="vertical-align: inherit;">Der ausgew√§hlte Master empf√§ngt 100% der Last, mit Ausnahme der Last f√ºr die Weiterleitungsanforderungen. </font><font style="vertical-align: inherit;">Alle Rechenzentrumserver verf√ºgen √ºber eine aktuelle Kopie der Daten, aber nur eine Antwort.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die einzige M√∂glichkeit zur Skalierung besteht darin, den veralteten Modus auf dem Client zu aktivieren.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im veralteten Modus k√∂nnen Sie ohne Quorum antworten. Dies ist ein Modus, in dem wir die Datenkonsistenz ablehnen, aber etwas schneller als gew√∂hnlich lesen und jeder Server antwortet. Die Aufnahme erfolgt nat√ºrlich nur √ºber den Master. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consul kopiert keine Daten zwischen Rechenzentren</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Beim Sammeln von Verb√§nden hat jeder Server nur seine eigenen Daten. F√ºr andere wendet er sich immer an jemand anderen. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Atomizit√§t von Operationen ist au√üerhalb der Transaktion nicht garantiert</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Denken Sie daran, dass nicht nur Sie etwas √§ndern k√∂nnen. Wenn Sie es anders wollen, f√ºhren Sie eine Transaktion mit einer Sperre durch. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blockierungsvorg√§nge garantieren keine Blockierung</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die Anforderung geht von Master zu Master und nicht direkt. Daher gibt es keine Garantie daf√ºr, dass die Sperre funktioniert, wenn Sie beispielsweise in einem anderen Rechenzentrum sperren.</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACLs garantieren auch keinen Zugriff (in vielen F√§llen)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die ACL funktioniert m√∂glicherweise nicht, da sie in einem Rechenzentrum des Verbunds gespeichert ist - im ACL-Rechenzentrum (prim√§rer DC). Wenn der DC Ihnen nicht antwortet, funktioniert die ACL nicht. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein schwebender Assistent friert den gesamten Verband ein</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Zum Beispiel gibt es im Verband 10 Rechenzentren, und in einem gibt es ein schlechtes Netzwerk, und ein Master f√§llt aus. Jeder, der mit ihm kommuniziert, steckt im Kreis: Es wird eine Anfrage gestellt, es gibt keine Antwort darauf, der Faden h√§ngt. Es wird nicht m√∂glich sein herauszufinden, wann dies geschehen wird, nur in ein oder zwei Stunden wird der gesamte Verband fallen. Du kannst nichts dagegen tun.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Status, Quorum und Wahlen werden in einem separaten Thread verarbeitet. </font><font style="vertical-align: inherit;">Eine erneute Auswahl erfolgt nicht, der Status zeigt nichts an. </font><font style="vertical-align: inherit;">Sie denken, Sie haben einen lebenden Konsul, fragen Sie, und nichts passiert - es gibt keine Antwort. </font><font style="vertical-align: inherit;">Dar√ºber hinaus zeigt der Status, dass alles in Ordnung ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir waren mit diesem Problem konfrontiert und mussten bestimmte Teile von Rechenzentren neu erstellen, um dies zu vermeiden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Business-Version von Consul Enterprise weist einige der oben genannten Nachteile nicht auf</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es hat viele n√ºtzliche Funktionen: Abstimmung, Verteilung, Skalierung. </font><font style="vertical-align: inherit;">Es gibt nur ein "aber" - ein Lizenzsystem f√ºr ein verteiltes System ist sehr teuer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Life Hack: </font></font><code>rm -rf /var/lib/consul</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ein Heilmittel f√ºr alle Krankheiten des Wirkstoffs. </font><font style="vertical-align: inherit;">Wenn etwas f√ºr Sie nicht funktioniert, l√∂schen Sie einfach Ihre Daten und laden Sie die Daten von der Kopie herunter. </font><font style="vertical-align: inherit;">Der Konsul wird h√∂chstwahrscheinlich arbeiten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befw</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns nun dar√ºber sprechen, was wir dem Konsul hinzugef√ºgt haben. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEFW</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eine Abk√ºrzung f√ºr </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bed and</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ack </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nd </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the F</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the ire of </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the W</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> all. </font><font style="vertical-align: inherit;">Es war notwendig, das Produkt irgendwie zu benennen, als ich das Repository erstellte, um die ersten Test-Commits darin zu platzieren. </font><font style="vertical-align: inherit;">Dieser Name bleibt erhalten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regelvorlagen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regeln werden in iptables-Syntax geschrieben.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-N BEFW</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-P INPUT DROP</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-A INPUT -m state - state RELATED, ESTABLISHED -j ACCEPT</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-A EINGANG -i lo -j AKZEPTIEREN</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-A EINGANG -j BEFW</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir alle gehen zu BEFW Kette, mit der </font><font style="vertical-align: inherit;">Ausnahme </font></font><code>ESTABLISHED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>RELATED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und localhost. </font><font style="vertical-align: inherit;">Die Vorlage kann alles sein, dies ist nur ein Beispiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wof√ºr ist BEFW n√ºtzlich?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dienstleistungen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben einen Dienst, er hat immer einen Port, den Knoten, auf dem er arbeitet. </font><font style="vertical-align: inherit;">Von unserem Knoten aus k√∂nnen wir den Agenten vor Ort fragen und herausfinden, dass wir einen Service haben. </font><font style="vertical-align: inherit;">Sie k√∂nnen auch Tags einf√ºgen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fm/lc/7n/fmlc7n4h4rmyqbeemb7lcn6lzco.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder Dienst, der ausgef√ºhrt und bei Consul registriert wird, wird zu einer iptables-Regel. </font><font style="vertical-align: inherit;">Wir haben SSH - Open Port 22. Das Bash-Skript ist einfach: Curl und Iptables, sonst wird nichts ben√∂tigt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kunden</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie kann man den Zugang nicht f√ºr alle √∂ffnen, sondern selektiv? </font><font style="vertical-align: inherit;">F√ºgen Sie dem KV-Repository √ºber den Namen des Dienstes IP-Listen hinzu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pg/y4/nu/pgy4nufltcqaimdqv7ncfpntix0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir m√∂chten beispielsweise, dass jeder aus dem zehnten Netzwerk auf den Dienst SSH_TCP_22 zugreifen kann. </font><font style="vertical-align: inherit;">Ein kleines TTL-Feld hinzuf√ºgen? </font><font style="vertical-align: inherit;">und jetzt haben wir zum Beispiel vor√ºbergehende Berechtigungen f√ºr einen Tag.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zugriffe</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verbinden Services und Kunden: Wir haben einen Service, denn jeder KV-Speicher ist bereit. </font><font style="vertical-align: inherit;">Jetzt gew√§hren wir nicht jedem Zugang, sondern selektiv.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f1/yo/vn/f1yovnkwz7qddj1sw267obg3gvk.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gruppen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir jedes Mal Tausende von IPs f√ºr Zugriffe schreiben, werden wir m√ºde. </font><font style="vertical-align: inherit;">Lassen Sie uns Gruppierungen erstellen - eine separate Teilmenge in KV. </font><font style="vertical-align: inherit;">Wir werden es Alias ‚Äã‚Äã(oder Gruppen) nennen und dort Gruppen nach dem gleichen Prinzip speichern. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vz/un/um/vzunum6qz9s9fs8odlwiwlz6vsc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verbinden: Jetzt k√∂nnen wir SSH nicht speziell f√ºr P2P √∂ffnen, sondern f√ºr eine ganze Gruppe oder mehrere Gruppen. </font><font style="vertical-align: inherit;">Ebenso gibt es TTL - Sie k√∂nnen der Gruppe hinzuf√ºgen und vor√ºbergehend aus der Gruppe entfernen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ao/2w/as/ao2was0eioehjrwnn1ypgh4zj5w.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integration</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Problem ist der menschliche Faktor und die Automatisierung. Bisher haben wir es so gel√∂st. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8g/pv/j0/8gpvj0liyxy64mamjpwr8nbn4xc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir arbeiten mit Puppet und √ºbertragen alles, was mit dem System (Anwendungscode) zu tun hat, darauf. Puppetdb (regul√§res PostgreSQL) speichert eine Liste der Dienste, die dort ausgef√ºhrt werden. Sie finden sie nach Ressourcentyp. Dort finden Sie, wer wohin geht. Wir haben auch ein Pull-Request- und Merge-Request-System daf√ºr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben befw-sync geschrieben, die einfachste L√∂sung, mit der Daten √ºbertragen werden k√∂nnen. Zuerst gehen Synchronisierungs-Cookies zu Puppetdb. Dort ist die HTTP-API konfiguriert: Wir fragen, welche Dienste wir haben, was zu tun ist. Dann stellen sie eine Anfrage an den Konsul.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gibt es Integration? </font><font style="vertical-align: inherit;">Ja, sie haben die Regeln geschrieben und d√ºrfen die Pull-Anfrage akzeptieren. </font><font style="vertical-align: inherit;">Ben√∂tigen Sie einen Port oder f√ºgen Sie einer Gruppe einen Host hinzu? </font><font style="vertical-align: inherit;">Pull Request, Review - nicht mehr "Finde 200 andere ACLs und versuche etwas dagegen zu tun."</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimierung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Localhost-Ping mit einer leeren Regelkette dauert 0,075 ms. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_j/6p/ce/_j6pceeghhejvrabuazobzgbfmw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºgen Sie dieser Kette 10.000 iptables hinzu. </font><font style="vertical-align: inherit;">Infolgedessen erh√∂ht sich der Ping um das F√ºnffache: iptables ist vollst√§ndig linear, die Verarbeitung jeder Adresse dauert einige Zeit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/v9/ic/erv9ic34w6oqhoy7aekpfimpys4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr die Firewall, in die wir Tausende von ACLs migrieren, gibt es viele Regeln, was zu einer Verz√∂gerung f√ºhrt. </font><font style="vertical-align: inherit;">F√ºr Spielprotokolle ist dies schlecht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir jedoch </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.000 Adressen in ipset</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ping </font><strong><font style="vertical-align: inherit;">eingeben,</font></strong><font style="vertical-align: inherit;"> wird dies sogar abnehmen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_l/zb/qs/_lzbqsckkctv-01v3vu-irjhvcq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Punkt ist, dass das "O" (Algorithmuskomplexit√§t) f√ºr ipset immer 1 ist, egal wie viele Regeln es gibt. </font><font style="vertical-align: inherit;">Es stimmt, es gibt eine Einschr√§nkung - es kann nicht mehr als 65535 Regeln geben. Im Moment leben wir damit: Sie k√∂nnen sie kombinieren, erweitern, zwei ipsets in einem erstellen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lager</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die logische Fortsetzung des Iterationsprozesses ist die Speicherung von Kundeninformationen f√ºr den Dienst in ipset. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x0/up/dv/x0updv72n35faryycb_ntjmpqik.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir das gleiche SSH und schreiben nicht sofort 100 IP, sondern setzen den Namen ipset f√ºr die Kommunikation und die folgende Regel </font></font><code>DROP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sie k√∂nnen die Regel "Wer nicht hier ist, das ist DROP" wiederholen, aber klarer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir Regeln und S√§tze. </font><font style="vertical-align: inherit;">Die Hauptaufgabe besteht darin, vor dem Schreiben der Regel einen Satz zu erstellen, da sonst iptables die Regel nicht schreibt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allgemeines Schema</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Form eines Diagramms sieht alles, was ich gesagt habe, so aus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9w/qa/i-/9wqai-52aq3i3onq1dovwbfzpfc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commit to Puppet, alles wird an den Host gesendet, Dienste sind hier, ipset ist da und wer dort nicht registriert ist, ist nicht erlaubt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zulassen &amp; verweigern</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Welt schnell zu retten oder jemanden schnell auszuschalten, haben wir am Anfang aller Ketten zwei ipset gemacht: </font></font><code>rules_allow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>rules_deny</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wie es funktioniert? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Beispiel erzeugt jemand mit Bots eine Last in unserem Web. </font><font style="vertical-align: inherit;">Zuvor war es erforderlich, die IP-Adresse anhand der Protokolle zu ermitteln und an die Netzwerktechniker weiterzuleiten, damit diese die Quelle des Datenverkehrs finden und verbieten konnten. </font><font style="vertical-align: inherit;">Jetzt sieht es anders aus. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/so/xq/a6soxqdkwf8qokucl-ztjs6xdde.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir versenden zum Konsul, warten 2,5 s und Sie sind fertig. </font><font style="vertical-align: inherit;">Da sich Consul schnell √ºber P2P verbreitet, funktioniert es √ºberall und √ºberall auf der Welt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einmal habe ich WOT irgendwie komplett gestoppt und einen Fehler mit der Firewall gemacht. </font></font><code>rules_allow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Dies ist unsere Versicherung gegen solche F√§lle. </font><font style="vertical-align: inherit;">Wenn wir irgendwo einen Fehler mit der Firewall gemacht haben, irgendwo etwas blockiert ist, k√∂nnen wir immer eine Bedingung senden, </font></font><code>0.0/0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um schnell alles zu erh√∂hen. </font><font style="vertical-align: inherit;">Dann werden wir alles mit unseren H√§nden reparieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andere S√§tze</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen beliebige andere S√§tze im Raum hinzuf√ºgen </font></font><code>$IPSETS$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/md/hv/jf/mdhvjfb8t36heje-udbnw5fly0m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wozu? </font><font style="vertical-align: inherit;">Manchmal ben√∂tigt jemand beispielsweise ein ipset, um die Trennung eines Teils des Clusters zu emulieren. </font><font style="vertical-align: inherit;">Jeder kann irgendwelche Sets mitbringen, sie anrufen und sie werden vom Konsul genommen. </font><font style="vertical-align: inherit;">Gleichzeitig k√∂nnen die Sets sowohl an den iptables-Regeln teilnehmen als auch wie ein Team sein </font></font><code>NOOP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Die Konsistenz wird vom Daemon unterst√ºtzt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzer</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fr√ºher war es so: Ein Benutzer, der mit einem Netzwerk verbunden war und Parameter √ºber eine Dom√§ne empfing. </font><font style="vertical-align: inherit;">Bis zur n√§chsten Generation von Firewalls konnte Cisco nicht verstehen, wo sich der Benutzer befindet und wo sich die IP befindet. </font><font style="vertical-align: inherit;">Daher wurde der Zugriff nur √ºber Hostnamen-Maschinen gew√§hrt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was haben wir getan? </font><font style="vertical-align: inherit;">Zum Zeitpunkt des Empfangs der Adresse eingeklemmt. </font><font style="vertical-align: inherit;">Normalerweise ist es dot1x, Wi-Fi oder VPN - alles l√§uft √ºber RADIUS. </font><font style="vertical-align: inherit;">Erstellen Sie f√ºr jeden Benutzer eine Gruppe nach Benutzernamen und geben Sie eine IP mit TTL ein, die der dhcp.lease entspricht. Sobald diese abl√§uft, verschwindet die Regel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tf/ps/ad/tfpsad3jh-egdfn_uehr3yvmcao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt k√∂nnen wir den Zugriff auf Dienste sowie auf andere Gruppen √ºber den Benutzernamen √∂ffnen. </font><font style="vertical-align: inherit;">Wir haben die Schmerzen mit dem Hostnamen beim √Ñndern beseitigt und die Netzwerktechniker entlastet, weil sie Cisco nicht mehr ben√∂tigten. </font><font style="vertical-align: inherit;">Jetzt schreiben die Ingenieure selbst den Zugriff auf ihre Server vor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isolierung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parallel dazu begannen wir, die Isolierung zu zerlegen. </font><font style="vertical-align: inherit;">Service Manager haben eine Bestandsaufnahme durchgef√ºhrt und alle unsere Netzwerke analysiert. </font><font style="vertical-align: inherit;">Wir zerlegen sie in dieselben Gruppen, und auf den erforderlichen Servern wurden die Gruppen hinzugef√ºgt, um sie beispielsweise abzulehnen. </font><font style="vertical-align: inherit;">Jetzt wird dieselbe Staging-Isolation in der Produktion in rules_deny ausgef√ºhrt, jedoch nicht in der Produktion selbst. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/9g/ed/fd9gedlbs2_9gyyg-5lwm_fp75m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Schema funktioniert schnell und einfach: Entfernen Sie alle ACLs von den Servern, entladen Sie die Hardware und reduzieren Sie die Anzahl der isolierten VLANs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integrit√§tskontrolle</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuvor funktionierte f√ºr uns ein spezieller Ausl√∂ser, der informierte, wenn jemand die Firewall-Regel mit den H√§nden √§nderte. </font><font style="vertical-align: inherit;">Ich habe einen riesigen Firewall-Regelpr√ºfer geschrieben, es war schwierig. </font><font style="vertical-align: inherit;">Jetzt kontrolliert die Integrit√§t BEFW. </font><font style="vertical-align: inherit;">Er sorgt eifrig daf√ºr, dass sich die Regeln, die er aufstellt, nicht √§ndern. </font><font style="vertical-align: inherit;">Wenn jemand die Regeln der Firewall √§ndert, gibt er alles zur√ºck. </font><font style="vertical-align: inherit;">‚ÄûIch habe hier schnell einen Proxy f√ºr die Arbeit von zu Hause aus eingerichtet‚Äú - solche Optionen gibt es nicht mehr. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEFW steuert das ipset √ºber die Dienste und listet in befw.conf die Dienstregeln in der BEFW-Kette auf. </font><font style="vertical-align: inherit;">Aber folgt nicht anderen Ketten und Regeln und anderen ipset.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unfallschutz</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEFW speichert immer den letzten erfolgreichen Zustand direkt in der Bin√§rstruktur von state.bin. Wenn etwas schief gelaufen ist, wird es immer in diesen Zustand zur√ºckgesetzt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2z/fe/ru/2zferuy2qiohwpa6odt1s0d642g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist die instabile Versicherung von Consul, wenn er keine Daten gesendet hat oder jemand einen Fehler gemacht und Regeln verwendet hat, die nicht angewendet werden konnten. Damit wir nicht ohne Firewall bleiben, wird BEFW auf den letzten Status zur√ºckgesetzt, wenn irgendwann ein Fehler auftritt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In kritischen Situationen ist dies eine Garantie daf√ºr, dass wir bei einer funktionierenden Firewall bleiben. Wir √∂ffnen alle grauen Netzwerke in der Hoffnung, dass der Administrator kommt und das Problem behebt. Eines Tages werde ich es in Konfigurationen herausnehmen, aber jetzt haben wir nur drei graue Netzwerke: 10/8, 172/12 und 192.168 / 16. Als Teil unseres Konsuls ist dies ein wichtiges Merkmal, das zur Weiterentwicklung beitr√§gt.</font></font><br>
<br>
<em>:      -  BEFW.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> GitHub</a>.</em><br>
<br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich erz√§hle Ihnen von den Fehlern, auf die wir gesto√üen sind. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipset add set 0.0.0.0/0.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Was passiert, wenn Sie zu ipset 0.0.0.0/0 hinzuf√ºgen? Werden alle IPs hinzugef√ºgt? Wird der Internetzugang ge√∂ffnet? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nein, wir bekommen einen Fehler, der uns zwei Stunden Ausfallzeit gekostet hat. Dar√ºber hinaus funktioniert der Fehler seit 2016 nicht mehr, er liegt in RedHat Bugzilla unter der Nummer 1297092 und wir haben ihn zuf√§llig gefunden - aus dem Bericht des Entwicklers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt hat BEFW eine strenge Regel, die </font></font><code>0.0.0.0/0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sich in zwei Adressen verwandelt: </font></font><code>0.0.0.0/1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>128.0.0.0/1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ipset restore set &lt;Datei.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Was macht ipset, wenn Sie es sagen </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Glaubst du, es funktioniert genauso wie iptables? Daten wiederherstellen? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nichts dergleichen - er f√ºhrt eine Zusammenf√ºhrung durch und die alten Adressen verschwinden nicht, Sie schlie√üen den Zugriff nicht.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben einen Fehler gefunden, als wir die Isolation getestet haben. Jetzt gibt es ein ziemlich kompliziertes System - anstatt </font></font><code>restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ausgef√ºhrt zu werden </font></font><code>create temp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dann </font></font><code>restore flush temp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>restore temp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Am Ende des Austauschs: Aus Gr√ºnden der Atomizit√§t, denn wenn Sie das erste Mal ausf√ºhren </font></font><code>flush</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und in diesem Moment ein Paket eintrifft, wird es verworfen und etwas wird schief gehen. Daher gibt es ein wenig schwarze Magie. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consul kv get -datacenter = other.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wie gesagt, wir denken, dass wir einige Daten anfordern, aber wir werden entweder Daten oder einen Fehler erhalten. Wir k√∂nnen dies durch den Konsul vor Ort tun, aber in diesem Fall h√§ngen sowohl der eine als auch der andere. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der lokale Consul-Client ist ein Wrapper √ºber die HTTP-API. Aber es h√§ngt nur und antwortet weder mit Strg + C noch mit Strg + Z, egal was passiert</font></font><code>kill -9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der angrenzenden Konsole. </font><font style="vertical-align: inherit;">Wir sind darauf gesto√üen, als wir einen gro√üen Cluster aufgebaut haben. </font><font style="vertical-align: inherit;">Aber wir haben noch keine L√∂sung, wir bereiten uns darauf vor, diesen Fehler in Consul zu korrigieren. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Konsulf√ºhrer antwortet nicht. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unser Master im Rechenzentrum antwortet nicht, wir denken: "Wahrscheinlich wird der Neuauswahlalgorithmus jetzt funktionieren?" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nein, es wird nicht funktionieren und die √úberwachung wird nichts zeigen: Der Konsul wird sagen, dass es einen Verpflichtungsindex gibt, ein F√ºhrer gefunden wurde, alles in Ordnung ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie bek√§mpfen wir das? </font></font><code>service consul restart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in cron jede stunde. </font><font style="vertical-align: inherit;">Wenn Sie 50 Server haben - keine gro√üe Sache. </font><font style="vertical-align: inherit;">Wenn es 16.000 geben wird, werden Sie verstehen, wie es funktioniert.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Ergebnis haben wir folgende Vorteile erhalten:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100% Abdeckung aller Linux-Maschinen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geschwindigkeit.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automatisierung</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Befreit Eisen- und Netzwerktechniker von der Sklaverei.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt nahezu unbegrenzte Integrationsm√∂glichkeiten: sogar mit Kubernetes, sogar mit Ansible, sogar mit Python.</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachteile</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Konsul, mit dem wir jetzt leben, und ein sehr hoher Fehlerpreis. </font><font style="vertical-align: inherit;">Zum Beispiel habe ich einmal um 18 Uhr (Hauptsendezeit in Russland) etwas auf den Netzwerklisten geregelt. </font><font style="vertical-align: inherit;">Wir haben gerade bei BEFW D√§mmstoffe gebaut. </font><font style="vertical-align: inherit;">Ich habe mich anscheinend irgendwo geirrt, ich habe die falsche Maske angegeben, aber alles fiel in zwei Sekunden. </font><font style="vertical-align: inherit;">Die √úberwachung leuchtet auf, der Dienstoffizier kommt herein: ‚ÄûAlles liegt bei uns!‚Äú </font><font style="vertical-align: inherit;">Der Abteilungsleiter wurde grau, als er dem Unternehmen erkl√§rte, warum dies geschah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Preis f√ºr den Fehler ist so hoch, dass wir unser eigenes kompliziertes Prophylaxeverfahren entwickelt haben. </font><font style="vertical-align: inherit;">Wenn Sie es in einer gro√üen Produktion implementieren, m√ºssen Sie nicht jedem einen Master-Token √ºber Consul geben. </font><font style="vertical-align: inherit;">Es wird schlecht enden. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kosten.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe den Code allein 400 Stunden lang geschrieben. </font><font style="vertical-align: inherit;">Um mein 4-k√∂pfiges Team zu unterst√ºtzen, verbringe ich insgesamt 10 Stunden im Monat. </font><font style="vertical-align: inherit;">Im Vergleich zum Preis einer Firewall der neuen Generation ist diese kostenlos. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pl√§ne. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der langfristige Plan ist die Suche nach alternativen Transportmitteln als Gegenleistung f√ºr oder zus√§tzlich zu Consul. </font><font style="vertical-align: inherit;">Vielleicht ist es Kafka oder so √§hnlich. </font><font style="vertical-align: inherit;">Aber in den kommenden Jahren werden wir vom Konsul leben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sofortpl√§ne: Integration mit Fail2ban, mit √úberwachung, mit nftables, m√∂glicherweise mit anderen Distributionen, Metriken, erweiterter √úberwachung, Optimierung. </font><font style="vertical-align: inherit;">Die Unterst√ºtzung von Kubernetes ist ebenfalls irgendwo in den Pl√§nen, da wir derzeit mehrere Cluster und W√ºnsche haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer Plan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suche nach Verkehrsanomalien;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Netzwerkkartenverwaltung;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes Unterst√ºtzung;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montage von Paketen f√ºr alle Systeme;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web-Benutzeroberfl√§che</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir arbeiten st√§ndig daran, die Konfiguration zu erweitern, die Metriken zu erh√∂hen und zu optimieren. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Treten Sie dem Projekt bei. </font><font style="vertical-align: inherit;">Das Projekt erwies sich als cool, aber leider ist dies immer noch ein Projekt einer Person. </font><font style="vertical-align: inherit;">Kommen Sie zu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und versuchen Sie etwas zu tun: Festschreiben, testen, etwas anbieten, Ihre Bewertung abgeben.</font></font></i><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der Zwischenzeit bereiten wir uns auf </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saint HighLoad ++ vor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das am 6. und 7. April in St. Petersburg stattfinden wird, und wir laden Entwickler </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">hochgeladener</font></a><font style="vertical-align: inherit;"> Systeme ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, einen Bericht zu beantragen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Erfahrene Redner wissen bereits, was zu tun ist, und wir empfehlen Neulingen, es zumindest zu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">versuchen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Die Teilnahme an der Konferenz als Redner hat mehrere Vorteile. </font><font style="vertical-align: inherit;">Was Sie zum Beispiel am Ende </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieses Artikels</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lesen k√∂nnen </font><font style="vertical-align: inherit;">.</font></font></blockquote></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486822/index.html">[An den Docks] Flattern. Teil 4. F√ºr Webentwickler</a></li>
<li><a href="../de486824/index.html">Schlechter Rat bei der Arbeit mit ANTLR</a></li>
<li><a href="../de486826/index.html">Erstellen eines vollwertigen Viberbot auf Django 2 und der Viber REST-API. Erster Teil - Webhook</a></li>
<li><a href="../de486828/index.html">Food Design Digest, Januar 2020</a></li>
<li><a href="../de486832/index.html">Wie viele Jahre Taiga vergehen - verstehe nein</a></li>
<li><a href="../de486844/index.html">Die Entwicklung der Facebook-Webhook-Verarbeitung: von null auf 25.000 pro Sekunde</a></li>
<li><a href="../de486850/index.html">Neuer reservierter Sitzplatz - wie ein Kapselhotel</a></li>
<li><a href="../de486858/index.html">Erstellen eines vollwertigen Viberbot. Teil zwei - erster Kontakt oder "convert_started"</a></li>
<li><a href="../de486860/index.html">ATX12VO - Essen auf eine neue Art und Weise</a></li>
<li><a href="../de486862/index.html">5 Gr√ºnde, warum Motion Design Ihnen hilft, mit Menschen in Kontakt zu treten</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>