<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìõ üë®üèø‚ÄçüöÄ üë®üèΩ‚Äçüç≥ The book ‚ÄúPerfect Algorithm. Greedy Algorithms and Dynamic Programming ¬ª ‚õÖÔ∏è üìõ üëÜüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, habrozhiteli! In the new book, Tim Rafgarden talks about greedy algorithms (the planning problem, minimal spanning trees, clustering, Huffman c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>The book ‚ÄúPerfect Algorithm. Greedy Algorithms and Dynamic Programming ¬ª</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/489014/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/zt/4e/yp/zt4eypq-gybnz_assyf-7wpz3vu.jpeg" align="left" alt="image"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, habrozhiteli! In the new book, Tim Rafgarden talks about greedy algorithms (the planning problem, minimal spanning trees, clustering, Huffman codes) and dynamic programming (the backpack problem, sequence alignment, shortest paths, optimal search trees). This post presents an excerpt "Developing a greedy algorithm." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Greedy algorithms appear to be well suited to the task of scheduling work, minimizing the weighted sum of completion times. The output has an iterative structure, where the work is processed one at a time. Why not use a greedy algorithm that iteratively decides which job will be next?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first step of our plan is to solve two special cases of the general problem. </font><font style="vertical-align: inherit;">Our solutions to these cases will show how a greedy algorithm might look like in the general case. </font><font style="vertical-align: inherit;">Then we narrow down the domain to one candidate algorithm and prove that it is this candidate that solves the problem correctly. </font><font style="vertical-align: inherit;">The process by which we come to this algorithm is more important for remembering than the algorithm itself; </font><font style="vertical-align: inherit;">this process is repeatable and you can use it in your own applications.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.3.1. </font><font style="vertical-align: inherit;">Two special cases</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's assume that for the task of minimizing the weighted sum of completion dates, in fact, there is a correct greedy algorithm. </font><font style="vertical-align: inherit;">What would it look like if we assume that all works have the same length (but possibly different weights) or, conversely, have the same weight (but possibly different lengths)?</font></font><br>
<blockquote> 13.2<br>
<br>
(1)      ,          ?<br>
(2)      ,           ?<br>
) ; <br>
) ; <br>
) ; <br>
) ; <br>
(   .   13.3.3.)</blockquote><br>
<h3>13.3.2.   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In general, the work may have different weights and different lengths. Whenever our two rules of thumb ‚Äî to prefer shorter work and work with higher weights ‚Äî are fortunate for a couple of jobs to coincide, we know which one to plan first (shorter with higher weights). But what if these two rules give conflicting advice? What should we do with one short work with low weight and one long work with high weight?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What will be the simplest greedy algorithm that will work as it should? Each work has two parameters, and the algorithm should look at both. The best option would be to develop a formula that compiles the length and weight of each work into a single mark (contribution), so that planning work from the highest to the lowest mark is guaranteed to minimize the amount of weighted completion dates. If such a formula exists, then from our two particular cases it follows that it should have two properties: (i) leaving the length fixed, it should increase by the weight of the work; (ii) leaving the weight fixed, it should decrease from the length of the work (recall that the higher the mark, the better). Spend a minute brainstorming several formulas that have both of these properties.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/-d/il/vm/-dilvmx9eulm9e96z9avlykyavg.jpeg" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhaps the simplest function, which increases in weight and decreases in length, is the difference between them: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
proposal No. 1 for the mark of the work. </font></font><img src="https://habrastorage.org/webt/rx/du/mi/rxdumiqofl604y3nzq_xoihf_su.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The indicated mark could be negative, but this does not pose any obstacles to the consistent construction of works from the highest to the lowest mark . </font><font style="vertical-align: inherit;">However, there are many other options. </font><font style="vertical-align: inherit;">For example, the ratio of two parameters is another candidate: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proposal No. 2 for marking the work. </font></font><img src="https://habrastorage.org/webt/wc/es/rk/wcesrkmtu6wqde7gcbjhvqb3rts.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These two functions for calculating the mark lead to two different greedy algorithms.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GREEDY DIFFERENCE GREEDYDIFF </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plan work in descending order </font></font><img src="https://habrastorage.org/webt/e-/r2/8x/e-r28xu0dqhniboc96n0xh7mui4.jpeg" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(arbitrarily breaking the coincidence of values).</font></font></blockquote><blockquote>  GREEDYRATIO<br>
<br>
     <img src="https://habrastorage.org/webt/ww/p_/vg/wwp_vgagganqj0q5ztncmnt-u04.jpeg" alt="image"><br>
(   ).</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, already our first case study illustrates the first topic of the greedy paradigm (section 13.1.2): to propose for the task several competing greedy algorithms is usually not difficult. But which of the two algorithms, if any, is correct? A quick way to exclude one of them is to find an instance in which two algorithms display different schedules with different values ‚Äã‚Äãof the objective function. For any algorithm whose results are worse in this example, we can conclude that it is not always optimal. In two special cases with works of the same weight or the same length, both algorithms act correctly. The simplest possible example of the exclusion of one of them may be an instance of a task in which two works have different weights and lengths,as a result, both algorithms plan to work in opposite orders. That is, we are looking for two works whose order in difference is opposite to their order in relation. Example:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bk/2e/i8/bk2ei8vmvkm0p-poglz62vgncbw.jpeg" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first work has a larger large ratio </font></font><img src="https://habrastorage.org/webt/mm/k-/fk/mmk-fksrqtkrdi-k3reiw6zqgwk.jpeg" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">but a larger difference (‚Äì2 vs. ‚Äì1). </font><font style="vertical-align: inherit;">Thus, the algorithm </font></font><code>GreedyDiff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plans the second work first, while the algorithm </font></font><code>GreedyRatio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plans the opposite.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXERCISE 13.3 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What is the sum of the weighted completion dates in the schedules deduced by the </font></font><code>GreedyDiff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font><font style="vertical-align: inherit;">algorithms, respectively </font></font><code>GreedyRatio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
a) 22 and 23 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
b) 23 and 22 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c) 17 and 17 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
d) 17 and 11 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(For a solution and explanation, see section 13.3.3.)</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We moved forward by excluding the algorithm </font></font><code>GreedyDiff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from further consideration. However, the result of exercise 13.3 does not directly lead to the fact that the algorithm </font></font><code>GreedyRatio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will always be optimal. As far as we know, there are other cases when this algorithm produces an non-optimal schedule. You should always be skeptical of an algorithm that is not accompanied by a proof of its correctness, even if this algorithm does the right thing in several test cases and is extremely skeptical of greedy algorithms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In our case, the algorithm </font></font><code>GreedyRatio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, in fact, is guaranteed to minimize the amount of weighted completion dates. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Theorem 13.1 (the correctness of the algorithm </font></font><code>GreedyRatio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For each set of positive work weights</font></font><img src="https://habrastorage.org/webt/x2/pm/zv/x2pmzvo-1kgq9_qmlmve49gp_e0.jpeg" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and positive job lengths, the </font></font><img src="https://habrastorage.org/webt/hb/ez/xz/hbezxznweju_oegojdnbertn1ag.jpeg" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algorithm </font></font><code>GreedyRatio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">displays a schedule with the smallest possible sum of weighted completion dates.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
This logical statement is not obvious, and you should not trust him without receiving evidence. In accordance with the third theme of the greedy paradigm (section 13.1.2), this proof takes up the entire next section.</font></font><br>
<blockquote> ,   . .<br>
<br>
         .  ‚Äî   ,      (         ).  ‚Äî  ,       , ,   .    ¬´¬ª (       )    ,       .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The remaining theme of the greedy paradigm is the simplicity of run-time analysis (section 13.1.2). </font><font style="vertical-align: inherit;">Here, of course, it is. </font><font style="vertical-align: inherit;">The GreedyRatio algorithm only sorts the jobs by relation, which takes O (n log n) time, where n is the number of jobs in the input (see footnote 1 on p. 24).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.3.3. </font><font style="vertical-align: inherit;">Exercise Solutions 13.2‚Äì13.3</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The solution to exercise 13.2 The </font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">correct answer is: (a)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . First, suppose that all n jobs have the same length, say 1. Then each schedule has exactly the same set of deadlines - {1, 2, 3, ..., n} - and the only question is what kind of job gets completion date and what is the deadline. Our semantics for work weights certainly imply that work with greater weight should receive shorter completion times, and this is true. For example, you would not want to plan work with a weight of 10 third (with a deadline of 3) and work with a weight of 20 fifth (with a deadline of 5); you would be better off changing the positions of these two works, which would reduce the sum of the weighted completion deadlines by 20 (as you can see for yourself).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second case, in which all works have the same weight, is slightly thinner. Here you want to give preference to shorter work. For example, consider two jobs of unit weight with lengths of 1 and 2. If you first plan a shorter work, then the completion deadlines will be 1 and 3 with a total of 4. In the reverse order, the deadlines will be 2 and 3 with the worst outcome 5. In general, the planned the work first contributes to the completion time of all work, since all work must wait for the completion of the first. All things being equal, planning the shortest work first minimizes this negative impact. The second job contributes to all completion dates except the first job, so the second shortest job should be scheduled for the next, etc. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exercise 13.3 Solution</font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The correct answer is: (b). </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The algorithm </font></font><code>GreedyDiff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plans a second job first. </font><font style="vertical-align: inherit;">The deadline for completing this work is </font></font><img src="https://habrastorage.org/webt/8g/bc/eb/8gbcebnbsfr9eofdsf1znkmtihs.jpeg" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">whereas the deadline for completing another work is </font></font><img src="https://habrastorage.org/webt/om/qi/nm/omqinmdtfr7xnkccaazw3h63eb0.jpeg" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum of the weighted deadlines for completion then</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gz/98/68/gz98683gqg4kf6uotkfcs0loxui.jpeg" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The algorithm </font></font><code>GreedyRatio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plans the first work first, resulting in deadlines </font></font><img src="https://habrastorage.org/webt/rl/5h/bw/rl5hbwytgo1arwgetzmxqavafw0.jpeg" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
and the sum of weighted deadlines equal to</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ta/6f/qx/ta6fqxxmfcxvmhsyajnc_6tri0i.jpeg" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the algorithm </font></font><code>GreedyDiff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fails to calculate the optimal schedule </font><font style="vertical-align: inherit;">for this example </font><font style="vertical-align: inherit;">, it is not always correct. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬ªMore information about the book can be found on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the publisher‚Äôs website</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬ª </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contents</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬ª </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excerpt</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
For Khabrozhiteley 25% discount on the coupon - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithms</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Upon payment of the paper version of the book, an electronic book is sent by e-mail.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489002/index.html">Distributed wheelset registry: experience with Hyperledger Fabric</a></li>
<li><a href="../en489004/index.html">Cell Phone with Disc Dialer</a></li>
<li><a href="../en489008/index.html">Routing in complex chatbots with the Hobot framework</a></li>
<li><a href="../en489010/index.html">We share the largest in Russia layer of data on online training with projects in linguistics, personalization, peddesign, ML</a></li>
<li><a href="../en489012/index.html">Google Cloud Spanner: good, bad, evil</a></li>
<li><a href="../en489016/index.html">German Gref: ‚ÄúWe tried to organize a discussion about the AGI, and not a single self-respecting scientist came to it‚Äù</a></li>
<li><a href="../en489020/index.html">The study of one malicious</a></li>
<li><a href="../en489022/index.html">Using RabbitMQ with MonsterMQ Part 2</a></li>
<li><a href="../en489024/index.html">Webix JavaScript library through the eyes of a beginner. Part 5. Work with data on the user side</a></li>
<li><a href="../en489026/index.html">Changing Google AdSense Algorithms May Lead to Site Owners and Webmasters</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>