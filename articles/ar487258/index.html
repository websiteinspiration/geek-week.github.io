<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๏ธ ๐ฅ ๐๐พ PHP ุบูุฑ ูุชุฒุงูู ๐๏ธ ๐จ๐ฝโโ๏ธ ๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุจู ุนุดุฑ ุณููุงุช ุ ูุงู ูุฏููุง ูุฌููุนุฉ LAMP ููุงุณูููุฉ: Linux ู Apache ู MySQL ู PHP ุ ูุงูุชู ุนููุช ูู ุงููุถุน ุงูุจุทูุก ูู mod_php. ููุฏ ุชุบูุฑ ุงูุนุงูู ุ ููุนู ุฃูููุฉ ุงูุณ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PHP ุบูุฑ ูุชุฒุงูู</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/487258/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุนุดุฑ ุณููุงุช ุ ูุงู ูุฏููุง ูุฌููุนุฉ LAMP ููุงุณูููุฉ: Linux ู Apache ู MySQL ู PHP ุ ูุงูุชู ุนููุช ูู ุงููุถุน ุงูุจุทูุก ูู mod_php. ููุฏ ุชุบูุฑ ุงูุนุงูู ุ ููุนู ุฃูููุฉ ุงูุณุฑุนุฉ. ุธูุฑ PHP-FPM ุ ููุง ุณูุญ ุจุฒูุงุฏุฉ ุฃุฏุงุก ุงูุญููู ุจุดูู ูุจูุฑ ูู PHP ุ ูุนุฏู ุฅุนุงุฏุฉ ุงููุชุงุจุฉ ุจุณุฑุนุฉ ุฅูู ุดูุก ุฃุณุฑุน. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ููุงุฒุงุฉ ุฐูู ุ ุชู ุชุทููุฑ ููุชุจุฉ ReactPHP ุจุงุณุชุฎุฏุงู ููููู Event Loop ููุนุงูุฌุฉ ุงูุฅุดุงุฑุงุช ูู ูุธุงู ุงูุชุดุบูู ูุชูุฏูู ูุชุงุฆุฌ ููุนูููุงุช ุบูุฑ ุงููุชุฒุงููุฉ. ุชุทููุฑ ููุฑุฉ ReactPHP - AMPHP. ุชุณุชุฎุฏู ูุฐู ุงูููุชุจุฉ ููุณ ุญููุฉ ุงูุฃุญุฏุงุซ ุ ูููููุง ุชุฏุนู coroutines ุ ุนูู ุนูุณ ReactPHP. ุชุณูุญ ูู ุจูุชุงุจุฉ ููุฏ ุบูุฑ ูุชุฒุงูู ูุจุฏู ูุชุฒุงูู. ุฑุจูุง ูููู ูุฐุง ูู ุฃุญุฏุซ ุฅุทุงุฑ ูุชุทููุฑ ุงูุชุทุจููุงุช ุบูุฑ ุงููุชุฒุงููุฉ ูู PHP.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tf/03/e6/tf03e6u08mt8gake9o4lbbfbdca.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุงูุณุฑุนุฉ ูุทููุจุฉ ุฃูุซุฑ ูุฃูุซุฑ ุ ูุงูุฃุฏูุงุช ููุณุช ูุงููุฉ ุจุงููุนู ุ ูุฐุง ูุฅู ููุฑุฉ ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู PHP ูู ุฅุญุฏู ุงูุทุฑู ูุชุณุฑูุน ูุนุงูุฌุฉ ุงูุงุณุชุนูุงู ูุงุณุชุฎุฏุงู ุงูููุงุฑุฏ ุจุดูู ุฃูุถู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชุญุฏุซ ุนูู ุฃูุทูู ุดุงุจููุชุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zloyusr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ูุทูุฑ ูู Onliner. </font><font style="vertical-align: inherit;">ุฎุจุฑุฉ ุฃูุซุฑ ูู 10 ุณููุงุช: ููุฏ ุจุฏุฃุช ุจุชุทุจููุงุช ุณุทุญ ุงูููุชุจ ูู C / C ++ ุ ุซู ุงูุชููุช ุฅูู ุชุทููุฑ ุงูููุจ ูู PHP. </font><font style="vertical-align: inherit;">ููุชุจ ูุดุงุฑูุน "ููุฒููุฉ" ูู C # ู Python 3 ุ ููู PHP ูููู ุจุชุฌุฑุจุฉ DDD ู CQRS ู Event Sourcing ู Async Multitasking.</font></font><br>
<a name="habracut"></a><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชูุฏ ูุฐู ุงูููุงูุฉ ุฅูู ูุต ุชูุฑูุฑ ุฃูุชูู ุญูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP Russia 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุณูููู ููู ุนูููุงุช ุงูุญุฌุจ ูุบูุฑ ุงูุญุฌุจ ูู PHP ุ ูุณูุฏุฑุณ ุจููุฉ ุญููุฉ ุงูุญุฏุซ ูุงูุฃููููุงุช ุบูุฑ ุงููุชุฒุงููุฉ ุ ูุซู Promise ู coroutines ุ ูู ุงูุฏุงุฎู. </font><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ุณููุชุดู ูุง ููุชุธุฑูุง ูู ext-async ู AMPHP 3 ู PHP 8.</font></font></i><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/w75P9RrVgKg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏู ุจุนุถ ุงูุชุนุงุฑูู. </font><font style="vertical-align: inherit;">ููุชุฑุฉ ุทูููุฉ ุญุงููุช ุงูุนุซูุฑ ุนูู ุชุนุฑูู ุฏููู ูุนูููุงุช ุบูุฑ ูุชุฒุงููุฉ ูุบูุฑ ูุชุฒุงููุฉ ุ ููููู ูู ุฃุฌุฏ ููุชุจุช ูู.</font></font><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asynchrony</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุฏุฑุฉ ุงููุธุงู ุงูุจุฑูุฌู ุนูู ุนุฏู ููุน ุณูุณูุฉ ุงูุชูููุฐ ุงูุฑุฆูุณูุฉ. </font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุนูููุฉ ูุง ุชููุน ุชุฏูู ุชูููุฐ ุงูุจุฑูุงูุฌ ุญุชู ุชูุชูู.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุงูุฃูุฑ ุจุณูุทูุง ุ ูููู ุนููู ุฃููุงู ุฃู ุชููู ุงูุนูููุงุช ุงูุชู ุชููุน ุชุฏูู ุงูุชูููุฐ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุงุช ุงูุญุธุฑ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP ูู ูุบุฉ ูุชุฑุฌู. </font><font style="vertical-align: inherit;">ููุฑุฃ ุณุทุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุณุทุฑุงู ุ ููุชุฑุฌู ุฅูู ุชุนูููุงุชู ููููุฐูุง. </font><font style="vertical-align: inherit;">ูู ุฃู ุณุทุฑ ูู ุงููุซุงู ุฃุฏูุงู ุณูุชู ุญุธุฑ ุงูุฑูุฒุ</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params">User $user</span>)</span><font></font><span class="hljs-function">
</span>{<font></font>
    <span class="hljs-keyword">try</span> {<font></font>
        $sql = <span class="hljs-string">'UPDATE users SET ...'</span>;<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;connection-&gt;execute($sql, $user-&gt;data());<font></font>
    } <span class="hljs-keyword">catch</span> (\PDOException $error) {<font></font>
        log($error-&gt;getMessage());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู ููุง ุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุนู ุทุฑูู ุดุฑูุฉ ุชูููุฉ ููุท ุนูุงูุ ุณูุชู ุญุธุฑ ููุถูุน ุงูุชูููุฐ ุนูู ุณูุณูุฉ ุงูุงุณุชุนูุงู ุฅูู SQL ุฎุงุฏู: </font></font><code>return $this-&gt;connection-&gt;execute($sql, $user-&gt;data());</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุฃู PHP ูุง ูุนุฑู ุงููุฏุฉ ุงูุชู ุณูุนุงูุฌ ูููุง ุฎุงุฏู SQL ูุฐุง ุงูุงุณุชุนูุงู ููุง ุฅุฐุง ูุงู ุณูุชู ุชูููุฐู ุนูู ุงูุฅุทูุงู. </font><font style="vertical-align: inherit;">ููุชุธุฑ ุงุณุชุฌุงุจุฉ ูู ุงูุฎุงุฏู ููู ูุชู ุชุดุบูู ุงูุจุฑูุงูุฌ ุทูุงู ูุฐุง ุงูููุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููุน PHP ุฃูุถูุง ุชุฏูู ุงูุชูููุฐ ุนูู ุฌููุน ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ.</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุงู ุงููููุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><code>fwrite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>file_get_contents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุนุฏ ุงูุจูุงูุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><code>PDOConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>RedisClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุนูู ุฌููุน ููุญูุงุช ุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชูุฑูุจูุง ูู ูุถุน ุงูุญุธุฑ ุงูุชุฑุงุถููุง.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูููุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><code>exec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>system</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>proc_open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐู ุนูููุงุช ุญุธุฑ ุ ุญูุซ ุฃู ูู ุงูุนูู ูุน ุงูุนูููุงุช ูุชู ูู ุฎูุงู ููุงููุงุช ุงููุธุงู.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูู ูุน ุงููุฏุฎู / ุงููุฎุฑุฌ ุงููุนูุงุฑู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><code>readline</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>echo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชู ุญุธุฑ ุงูุชูููุฐ ุนูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุคูุชุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><code>sleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>usleep</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐู ูู ุงูุนูููุงุช ุงูุชู ูุทูุจ ูููุง ุจูุถูุญ ูู ุงูุฎูุท ุฃู ููุงู ููุชุฑุฉ ูู ุงูููุช. </font><font style="vertical-align: inherit;">ุณูู ูููู PHP ุฎุงููุงู ุทูุงู ูุฐุง ุงูููุช.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููู SQL ุบูุฑ ูุชุฒุงูู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู PHP ุงูุญุฏูุซุฉ ูู ูุบุฉ ููุฃุบุฑุงุถ ุงูุนุงูุฉ ุ ูููุณ ููุท ููููุจ ูุซู PHP / FI ูู ุนุงู 1997. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููููุง ูุชุงุจุฉ ุนููู SQL ุบูุฑ ูุชุฒุงูู ูู ุงูุจุฏุงูุฉ. </font><font style="vertical-align: inherit;">ุงููููุฉ ููุณุช ุงูุฃูุซุฑ ุชุงููุฉ ุ ูููู ูุงุจูุฉ ููุญู.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execAsync</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> $query, <span class="hljs-keyword">array</span> $params = []</span>)</span><font></font><span class="hljs-function">
</span>{<font></font>
    $socket = stream_socket_client(<span class="hljs-string">'127.0.0.1:3306'</span>, ...);<font></font>
<font></font>
    stream_set_blocking($socket, <span class="hljs-literal">false</span>);<font></font>
<font></font>
    $data = <span class="hljs-keyword">$this</span>-&gt;packBinarySQL($query, $params);<font></font>
    <font></font>
    socket_write($socket, $data, strlen($data));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฐุง ููุนู ูุซู ูุฐุง ุงูุนูููุ </font><font style="vertical-align: inherit;">ุฅูู ูุชุตู ุจุฎุงุฏู SQL ุงูุฎุงุต ุจูุง ุ ููุถุน ุงูููุจุณ ูู ูุถุน ุบูุฑ ูุงุจู ููุญุธุฑ ุ ููุญุฒู ุงูุทูุจ ุจุชูุณูู ุซูุงุฆู ููููู ุฎุงุฏู SQL ุ ูููุชุจ ุงูุจูุงูุงุช ุฅูู ุงูููุจุณ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุง ุฃู ุงูููุจุณ ูู ูุถุน ุนุฏู ุงูุญุฌุจ ุ ูุฅู ุนูููุฉ ุงููุชุงุจุฉ ูู PHP ุชููู ุณุฑูุนุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุงุฐุง ุณูุนูุฏ ูุชูุฌุฉ ููุฐู ุงูุนูููุฉุ </font><font style="vertical-align: inherit;">ูุญู ูุง ูุนุฑู ูุง ุณูุฑุฏ ุนููู ุฎุงุฏู SQL. </font><font style="vertical-align: inherit;">ูุฏ ูุณุชุบุฑู ุงูุฃูุฑ ููุชูุง ุทูููุงู ูุฅููุงู ุงูุทูุจ ุฃู ุนุฏูู ุนูู ุงูุฅุทูุงู. </font><font style="vertical-align: inherit;">ูููู ูุฌุจ ุฅุนุงุฏุฉ ุดูุก ูุงุ </font><font style="vertical-align: inherit;">ุฅุฐุง ุงุณุชุฎุฏููุง PDO ููููุง ุจุงุณุชุฏุนุงุก </font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุณุชุนูุงู ุนูู ุฎุงุฏู SQL ุ ูุณูุชู ุฅุฑุฌุงุนูุง </font></font><code>affected rows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุชู ุชุบููุฑ ุนุฏุฏ ุงูุตููู ุจูุงุณุทุฉ ูุฐุง ุงูุงุณุชุนูุงู. </font><font style="vertical-align: inherit;">ูุง ูููููุง ุฅุนุงุฏุชู ุญุชู ุงูุขู ุ ูุฐูู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุท </font><font style="vertical-align: inherit;">ุจุงูุนูุฏุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ููููู ูู ุนุงูู ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนุฏ ูู ูุงุฆู ูุฌููุน ููู ูุชูุฌุฉ ุนูููุฉ ุบูุฑ ูุชุฒุงููุฉ. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูุง ุชุฒุงู ูุชูุฌุฉ ุงูุนูููุฉ ุบูุฑ ูุนุฑููุฉ ููุง.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุง ููุฌุฏ ูุนูุงุฑ Promise ูุงุญุฏ ุ ููุง ูููู ููู ุงููุนุงููุฑ ูุจุงุดุฑุฉ ูู ุนุงูู JavaScript ุฅูู PHP.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุนูู ุงููุนุฏ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุนุฏู ูุฌูุฏ ูุชูุฌุฉ ุญุชู ุงูุขู ุ ูููููุง ููุท ุฅูุดุงุก ุจุนุถูุง </font></font><code>callbacks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/n1/qq/ian1qqvr_xs0faonifptkfrd2jc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ุชููุฑ ุงูุจูุงูุงุช ุ ูู ุงูุถุฑูุฑู ุชูููุฐ ุฑุฏ ุงุชุตุงู </font></font><code>onResolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8v/bk/sf/8vbksfxvsfxskeozp3jckft5rmg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ุ ุณูุชู ุชูููุฐ ุฑุฏ ุงุชุตุงู </font></font><code>onReject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุนุงูุฌุฉ ุงูุฎุทุฃ. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8x/hw/0v/8xhw0vsdhfryxyxalvsydiydfsc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุจุฏู ูุงุฌูุฉ Promise ุดูุฆูุง ูุซู ูุฐุง.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Promise</span></span><font></font><span class="hljs-class">
</span>{<font></font>
    <span class="hljs-keyword">const</span><font></font>
        STATUS_PENDING = <span class="hljs-number">0</span>,<font></font>
        STATUS_RESOLVED = <span class="hljs-number">1</span>,<font></font>
        STATUS_REJECTED = <span class="hljs-number">2</span><font></font>
    ;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onResolve</span>(<span class="hljs-params"><span class="hljs-keyword">callable</span> $callback</span>)</span>;<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onReject</span>(<span class="hljs-params"><span class="hljs-keyword">callable</span> $callback</span>)</span>;<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolve</span>(<span class="hljs-params">$data</span>)</span>;<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reject</span>(<span class="hljs-params">\<span class="hljs-built_in">Throwable</span> $error</span>)</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููุนุฏ ูู ุญุงูุฉ ูุทุฑู ูุถุจุท ุงูุงุณุชุฑุฌุงุนุงุช ูููุก ( </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ุงููุนุฏ ุจุงูุจูุงูุงุช ุฃู ุงูุฎุทุฃ ( </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">ูููู ููุงู ุงุฎุชูุงูุงุช ูุงุฎุชูุงูุงุช. </font><font style="vertical-align: inherit;">ูุฏ ูุชู ุงุณุชุฏุนุงุก ุงูุฃุณุงููุจ ุจุดูู ูุฎุชูู ุ ุฃู ุจุฏูุงู ูู ุทุฑู ูููุตูุฉ ูุฅูุดุงุก ุนูููุงุช ุฑุฏ ุงูุงุชุตุงู ุ </font><font style="vertical-align: inherit;">ููุฏ ูููู </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุถ ุงูุทุฑู ุ ููุง ูู AMPHP ุ ุนูู ุณุจูู ุงููุซุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุชูููุงุช ูููุก ูุนุฏ </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃุฎุฐ ุจูุง ูู ูุงุฆู ูููุตู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงููุคุฌูุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ูุธููุฉ ุบูุฑ ูุชุฒุงูู ุฏููุฉ ุงูุชุฎุฒูู. </font><font style="vertical-align: inherit;">ูููู ุงุนุชุจุงุฑู ููุนูุง ูู ูุตูุน ูุนุฏ. </font><font style="vertical-align: inherit;">ูุฑุฉ ูุงุญุฏุฉ: ูุคุฌู ูุงุญุฏ ูุนุทู ูุนุฏูุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/on/aq/bqonaqi04ql4kdhakfezn9nu25g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุฉ ุชุทุจูู ูุฐุง ูู ุนููู SQL ุฅุฐุง ูุฑุฑูุง ูุชุงุจุชู ุจุฃููุณูุงุ</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููู SQL ุบูุฑ ูุชุฒุงูู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ุฃูุดุฃูุง ูุคุฌู ุ ููููุง ุจูู ุงูุนูู ุจุงุณุชุฎุฏุงู ูุขุฎุฐ ุ ููุชุจูุง ุงูุจูุงูุงุช ูุฃุนุฏูุง ุงููุนุฏ - ูู ุดูุก ุจุณูุท.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execAsync</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> $query, <span class="hljs-keyword">array</span> $params = []</span>)</span><font></font><span class="hljs-function">
</span>{<font></font>
    $deferred = <span class="hljs-keyword">new</span> Deferred;<font></font>
<font></font>
    $socket = stream_socket_client(<span class="hljs-string">'127.0.0.1:3306'</span>, ...);<font></font>
    stream_set_blocking($socket, <span class="hljs-literal">false</span>);<font></font>
<font></font>
    $data = <span class="hljs-keyword">$this</span>-&gt;packBinarySQL($query, $params);<font></font>
    socket_write($socket, $data, strlen($data));<font></font>
<font></font>
    <span class="hljs-keyword">return</span> $deferred-&gt;promise();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ูุญุตู ุนูู ูุนุฏ ุ ูููููุง ุนูู ุณุจูู ุงููุซุงู:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนููู ุฑุฏ ุงูุงุชุตุงู ูุงูุญุตูู ุนูู ุชูู </font></font><code>affected rows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชู ุชุนูุฏ ุฅูููุง </font></font><code>PDOConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌุฉ ุงูุฎุทุฃ ุ ุฅุถุงูุฉ ุฅูู ุงูุณุฌู ุ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุนุฏ ูุญุงููุฉ ุงูุงุณุชุนูุงู ุฅุฐุง ุงุณุชุฌุงุจ ุฎุงุฏู SQL ุจุฎุทุฃ.</font></font></li>
</ul><br>
<pre><code class="php hljs">$promise = <span class="hljs-keyword">$this</span>-&gt;execAsync($sql, $user-&gt;data());<font></font>
<font></font>
$promise-&gt;onResolve(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-keyword">int</span> $rows</span>) </span>{<font></font>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"Affected rows: {$rows}"</span>;<font></font>
});<font></font>
<font></font>
$promise-&gt;onReject(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">\<span class="hljs-built_in">Throwable</span> $error</span>) </span>{<font></font>
    log($error-&gt;getMessage());<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจูู ุงูุณุคุงู: ูููุง ุจุชุนููู ุฑุฏ ุงูุงุชุตุงู ุ ููู ุณูุชุตู </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููุฉ ุงูุญุฏุซ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ููููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููุฉ ุงูุญุฏุซ - ุญููุฉ ุงูุญุฏุซ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููู ูุงุฏุฑ ุนูู ูุนุงูุฌุฉ ุงูุฑุณุงุฆู ูู ุจูุฆุฉ ุบูุฑ ูุชุฒุงููุฉ. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุบูุฑ ุงููุชุฒุงูู ุ ุณุชููู ูุฐู ุฑุณุงุฆู ูู ูุธุงู ุงูุชุดุบูู ุฌุงูุฒ ูููุฑุงุกุฉ ุฃู ุงููุชุงุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุชุนูู.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฎุจุฑ ุงูุนููู Event Loop ุฃูู ููุชู ุจููุน ูู ูุฃุฎุฐ ุงูุชูุตูู.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุชูุตู ุญููุฉ ุงูุญุฏุซ ูุธุงู ุงูุชุดุบูู ูู ุฎูุงู ุงุณุชุฏุนุงุก ุงููุธุงู </font></font><code>stream_select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: ูู ุงูููุจุณ ุฌุงูุฒ ุ ูู ุฌููุน ุงูุจูุงูุงุช ุงูููุชูุจุฉ ุ ูู ุงูุจูุงูุงุช ุงููุงุฏูุฉ ูู ุงูุฌุงูุจ ุงูุขุฎุฑ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุฃูุงุฏ ูุธุงู ุงูุชุดุบูู ุฃู ุงูููุจุณ ููุณ ุฌุงูุฒูุง ุ ููุฏ ุชู ุญุธุฑู ุ ูุฅู ุชูุฑุงุฑ ุญููุฉ ุงูุญุฏุซ ููุฑุฑ ุงูุญููุฉ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุฎุทุฑ ูุธุงู ุงูุชุดุบูู ุฃู ุงูููุจุณ ุฌุงูุฒ ุ ุชุฑุฌุน Event Loop ุงูุชุญูู ุฅูู ุงูุนููู ูุชููู ( </font></font><code>resolve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>reject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ูุนุฏ.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ln/ey/bb/lneybbz-tylmfanfoizqm2hscik.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุจุฑ ุนู ูุฐุง ุงูููููู ูู ุงูููุฏ: ุฎุฐ ุฃุจุณุท ุงูุญุงูุงุช ุ ุฃุฒู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงููุฑูู ุงูุฏูููุฉ ุงูุฃุฎุฑู ุ ุจุญูุซ ุชุจูู ุญููุฉ ูุงุญุฏุฉ ูุง ููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูู ูู ุชูุฑุงุฑ ุ ุณูู ูููู ุจุงุณุชุทูุงุน ูุธุงู ุงูุชุดุบูู ุญูู ูุขุฎุฐ ุงูุชูุตูู ุงูุฌุงูุฒุฉ ูููุฑุงุกุฉ ุฃู ุงููุชุงุจุฉ ุ ูุงูุงุชุตุงู ุจุงุณุชุฏุนุงุก ูููุจุณ ูุนูู.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>)</span><font></font><span class="hljs-function">
</span>{<font></font>
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {<font></font>
        stream_select($readSockets, $writeSockets, <span class="hljs-literal">null</span>, <span class="hljs-number">0</span>);<font></font>
        <font></font>
        <span class="hljs-keyword">foreach</span> ($readSockets <span class="hljs-keyword">as</span> $i =&gt; $socket) {<font></font>
            call_user_func(<span class="hljs-built_in">self</span>::readCallbacks[$i], $socket);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-comment">// Do same for write sockets</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุนููู SQL ูุฏููุง. </font><font style="vertical-align: inherit;">ูุจูุบ Event Loop ุฃูู ุจูุฌุฑุฏ ูุตูู ุงูุจูุงูุงุช ูู ุฎุงุฏู SQL ุฅูู ุงูููุจุณ ุงูุฐู ูุนูู ูุนู ุ ูุญุชุงุฌ ุฅูู ุฅุญุงูุฉ Defired ุฅูู ุงูุญุงูุฉ "ููุชููุฉ" ูููู ุงูุจูุงูุงุช ูู ุงูููุจุณ ุฅูู Promise.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">execAsync</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> $query, <span class="hljs-keyword">array</span> $params = []</span>)</span><font></font><span class="hljs-function">
</span>{<font></font>
    $deferred = <span class="hljs-keyword">new</span> Deferred;<font></font>
    ...<font></font>
    Loop::onReadable($socket, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$socket</span>) <span class="hljs-title">use</span> (<span class="hljs-params">$deferred</span>) </span>{<font></font>
        $deferred-&gt;resolve(socket_read($socket));<font></font>
    });<font></font>
<font></font>
    <span class="hljs-keyword">return</span> $deferred-&gt;promise();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุญุฏุซ ุญููุฉ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฏุฑุฉ ุนูู ุงูุชุนุงูู ุฏููุง I / O</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู ูุน ูุขุฎุฐ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุงุฐุง ูููู ุฃู ููุนูุ</font></font><br>
<br>
<ul>
<li> JavaScript   <code>setTimeout</code>  <code>setInterval</code> โ .             N . <strong>Event Loop      </strong>.</li>
<li>Event Loop  <strong>   </strong>.    <code>process control</code>,       .</li>
</ul><br>
<h3> Event Loop</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุงุจุฉ ุญููุฉ ุงูุฃุญุฏุงุซ ุงูุฎุงุตุฉ ุจู ููุณุช ููููุฉ ูุญุณุจ ุ ุจู ุถุฑูุฑูุฉ ุฃูุถูุง. ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงูุนูู ูุน PHP ุบูุฑ ุงููุชุฒุงูู ุ ููู ุงูููู ูุชุงุจุฉ ุงูุชูููุฐ ุงูุจุณูุท ุงูุฎุงุต ุจู ูููู ููููุฉ ุนูู ุฐูู. ููู ูู ุงูุฅูุชุงุฌ ุ ุจุงูุทุจุน ุ ูู ูุณุชุฎุฏูู ุ ููููุง ุณูุฃุฎุฐ ุชุทุจููุงุช ุฌุงูุฒุฉ: ูุณุชูุฑุฉ ูุฎุงููุฉ ูู ุงูุฃุฎุทุงุก ููุซุจุชุฉ ูู ุงูุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุซูุงุซุฉ ุชุทุจููุงุช ุฑุฆูุณูุฉ. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุฏ PHP</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฃูุฏู ูุดุฑูุน ุ ุจุฏุฃ ูู PHP 5.3. ุงูุขู ุงูุญุฏ ุงูุฃุฏูู ุงููุทููุจ ูู ุฅุตุฏุงุฑ PHP ูู 5.3.8. ูููู ุงููุดุฑูุน ุจุชูููุฐ ูุนูุงุฑ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนูุฏ / A</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุนุงูู JavaScript. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AMPHP</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุฐุง ูู ุงูุชุทุจูู ุงูุฐู ุฃูุถู ุงุณุชุฎุฏุงูู. ุงูุญุฏ ุงูุฃุฏูู ูู ุงููุชุทูุจุงุช ูู PHP 7.0 ุ ูุจูุง ุฃู ุงูุฅุตุฏุงุฑ ุงูุชุงูู ูู ุจุงููุนู 7.3. ูุณุชุฎุฏู coroutines ุนูู ุฑุฃุณ ูุนุฏ. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณููู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ุฅุทุงุฑ ุตููู ูุซูุฑ ููุงูุชูุงู ูุญุงูู ููู ุงููุทูุฑูู ููู ุจุนุถ ุงูููุงููู ูู ุนุงูู Go ุฅูู PHP. </font><font style="vertical-align: inherit;">ุงููุซุงุฆู ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุบูุฑ ููุชููุฉ ุ ูุนุธููุง ุนูู GitHub ุจุงููุบุฉ ุงูุตูููุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุชุนุฑู ุงููุบุฉ ุ ูุชุงุจุน ุ ูููู ุฎุงุฆูุฉ ุญุชู ุงูุขู ูู ุงูุนูู.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zo/n3/cq/zon3cqtbmsf-vnd0uliqqupphoo.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุฏ PHP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุฑู ููู ุณูุจุฏู ุงูุนููู ุจุงุณุชุฎุฏุงู ReactPHP ูู MySQL.</font></font><br>
<br>
<pre><code class="php hljs">$connection = (<span class="hljs-keyword">new</span> ConnectionFactory)-&gt;createLazyConnection();<font></font>
<font></font>
$promise = $connection-&gt;query(<span class="hljs-string">'UPDATE users SET ...'</span>);<font></font>
$promise-&gt;then(<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">QueryResult $command</span>) </span>{<font></font>
        <span class="hljs-keyword">echo</span> count($command-&gt;resultRows) . <span class="hljs-string">' row(s) in set.'</span>;<font></font>
    },<font></font>
    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-built_in">Exception</span> $error</span>) </span>{<font></font>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'Error: '</span> . $error-&gt;getMessage();<font></font>
    });</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูุก ุชูุฑูุจูุง ูู ููุณู ููุง ูุชุจูุง: ููุดุฆ </font></font><code>onnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุฐ ุงูุทูุจ. </font><font style="vertical-align: inherit;">ูููููุง ุถุจุท ุฑุฏ ุงูุงุชุตุงู ููุนุงูุฌุฉ ุงููุชุงุฆุฌ (ุงูุนูุฏุฉ </font></font><code>affected rows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="php hljs">    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">QueryResult $command</span>) </span>{<font></font>
        <span class="hljs-keyword">echo</span> count($command-&gt;resultRows) . <span class="hljs-string">' row(s) in set.'</span>;<font></font>
    },</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุณุชุฏุนุงุก ููุนุงูุฌุฉ ุงูุฎุทุฃ:</font></font><br>
<br>
<pre><code class="php hljs">    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-built_in">Exception</span> $error</span>) </span>{<font></font>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'Error: '</span> . $error-&gt;getMessage();<font></font>
    });</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช ูุฐู ุ ููููู ุจูุงุก ุณูุงุณู ุทูููุฉ ุ ูุฃู ูู ูุชูุฌุฉ </font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ReactPHP ุชูุนูุฏ ุฃูุถูุง Promise.</font></font><br>
<br>
<pre><code class="php hljs">$promise<font></font>
    -&gt;then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$data</span>) </span>{<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Promise(...);<font></font>
    })<font></font>
    -&gt;then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$data</span>) </span>{<font></font>
        ...<font></font>
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$error</span>) </span>{<font></font>
        log($error);<font></font>
    })<font></font>
    ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุญู ููุดููุฉ ุชุณูู ุฑุฏ ุงูุงุชุตุงู ุงูุฌุญูู. </font><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูู ุชุทุจูู ReactPHP ุ ูุคุฏู ูุฐุง ุฅูู ูุดููุฉ "Promise hell" ุ ุนูุฏูุง </font><strong><font style="vertical-align: inherit;">ุชููู </font></strong></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุญุงุฌุฉ ูุงุณุชุฏุนุงุก 10-11 ูุงุณุชุฏุนุงุก RabbitMQ ุจุดูู ุตุญูุญ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ุงูุตุนุจ ุงูุนูู ูุน ูุฐุง ุงูุฑูุฒ ูุฅุตูุงุญู. </font><font style="vertical-align: inherit;">ุฃุฏุฑูุช ุจุณุฑุนุฉ ุฃู ูุฐุง ูู ููู ูููู ูุชุญููุช ุฅูู AMPHP.</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุจ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุงููุดุฑูุน ุฃุตุบุฑ ูู ReactPHP ููุนุฒุฒ ููููููุง ูุฎุชูููุง - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coroutines</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅุฐุง ูุธุฑุช ุฅูู ุงูุนูู ูุน MySQL ูู AMPHP ุ ููููู ุฃู ุชุฑู ุฃู ูุฐุง ููุงุซู ุชูุฑูุจูุง ุงูุนูู </font></font><code>PDOConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู PHP.</font></font><br>
<br>
<pre><code class="php hljs">$pool = Mysql\pool(<span class="hljs-string">"host=127.0.0.1 port=3306 db=test"</span>);<font></font>
<font></font>
<span class="hljs-keyword">try</span> {<font></font>
    $result = <span class="hljs-keyword">yield</span> $pool-&gt;query(<span class="hljs-string">"UPDATE users SET ..."</span>);<font></font>
<font></font>
    <span class="hljs-keyword">echo</span> $result-&gt;affectedRows . <span class="hljs-string">' row(s) in set.'</span>;<font></font>
} <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Throwable</span> $error) {<font></font>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">'Error: '</span> . $error-&gt;getMessage();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูููู ุจุฅูุดุงุก ุชุฌูุน ูุชูุตูู ูุชูููุฐ ุงูุทูุจ. </font><font style="vertical-align: inherit;">ูููููุง ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ูู ุฎูุงู ุงูุฃุฎุทุงุก ุงููุนุชุงุฏุฉ </font></font><code>try...catch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ูุญุชุงุฌ ุฅูู ุฑุฏ ุงูุงุชุตุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุจู ุงูููุงููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุ ุชุธูุฑ ุงููููุฉ ุงูุฑุฆูุณูุฉ - ููุง </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฏุงุช ููุฑุจุงุก</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงููููุฉ ุงูุฑุฆูุณูุฉ </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญูู ูุธููุชูุง ุฅูู ูููุฏ.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generator</span>(<span class="hljs-params">$counter = <span class="hljs-number">1</span></span>)</span><font></font><span class="hljs-function">
</span>{<font></font>
    <span class="hljs-keyword">yield</span> $counter++;<font></font>
<font></font>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"A"</span>;<font></font>
<font></font>
    <span class="hljs-keyword">yield</span> $counter;<font></font>
<font></font>
    <span class="hljs-keyword">echo</span> <span class="hljs-string">"B"</span>;<font></font>
<font></font>
    <span class="hljs-keyword">yield</span> ++$counter;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุฌุฑุฏ ุฃู ููุงุฌู ูุชุฑุฌู PHP </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุงุฆู ูู ุงูุฌุณู ุ ูุฅูู ูุฏุฑู ุฃูู ูุธููุฉ ูููุฏ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุงูุชูููุฐ ุ ูุชู ุฅูุดุงุก ูุงุฆู ูุฆุฉ ุนูุฏ ุงุณุชุฏุนุงุคู </font></font><code>Generator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฑุซ ุงููููุฏุงุช ูุงุฌูุฉ ุงูููุฑุฑ.</font></font><br>
<br>
<pre><code class="php hljs">$generator = <span class="hljs-built_in">generator</span>(<span class="hljs-number">1</span>);<font></font>
<font></font>
<span class="hljs-keyword">foreach</span> ($generator <span class="hljs-keyword">as</span> $value) {<font></font>
    <span class="hljs-keyword">echo</span> $value;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">while</span> ($generator-&gt;valid()) {<font></font>
    <span class="hljs-keyword">echo</span> $generator-&gt;current();<font></font>
<font></font>
    $generator-&gt;next();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ูุฐููุ ููู ุงููููู ูุชุดุบูู ุฏูุฑุงุช </font></font><code>foreach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุบูุฑูุง. </font><font style="vertical-align: inherit;">ูููู ุงููุซูุฑ ููุงูุชูุงู ุฃู ุงูููุฑุฑ ูุฏูู ุทุฑู </font></font><code>current</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>next</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฐูุจ ูู ุฎูุงููู ุฎุทูุฉ ุจุฎุทูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฏุงุฑุฉ ูุธููุชูุง </font></font><code>generator($counter = 1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุณูู ุทุฑููุฉ ุงููููุฏ </font></font><code>current()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูุชู ุฅุฑุฌุงุน ูููุฉ ุงููุชุบูุฑ </font></font><code>$counter++</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจูุฌุฑุฏ ุชูููุฐ ุงููููุฏ </font></font><code>next()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุณูุฐูุจ ุงูุฑูุฒ ุฅูู ุงูููุงููุฉ ุงูุชุงููุฉ ุฏุงุฎู ุงููููุฏ </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชู ุชูููุฐ </font><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงููุงูู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจูู ุงูุงุซููู </font><font style="vertical-align: inherit;">ุ ููุฐุง ุฑุงุฆุน. </font><font style="vertical-align: inherit;">ุจุงูุงุณุชูุฑุงุฑ ูู ุชุฏููุฑ ุงููููุฏ ุ ูุญุตู ุนูู ุงููุชูุฌุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coroutines</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูููููุฏ ูุธููุฉ ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู - ูููููุง ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุงููููุฏ ูู ุงูุฎุงุฑุฌ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุฐุง ููุณ ูููุฏูุง ุชูุงููุง ุ ููููู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑูุชูู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃู ููุฑูุชูู.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printer</span>(<span class="hljs-params"></span>) </span>{  <font></font>
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {     <font></font>
        <span class="hljs-keyword">echo</span> <span class="hljs-keyword">yield</span>;       <font></font>
    }                             <font></font>
}                                <font></font>
<font></font>
$print = printer();<font></font>
$print-&gt;send(<span class="hljs-string">'Hello'</span>);<font></font>
$print-&gt;send(<span class="hljs-string">' PHPRussia'</span>);<font></font>
$print-&gt;send(<span class="hljs-string">' 2019'</span>);<font></font>
$print-&gt;send(<span class="hljs-string">'!'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ุงููุณู ูู ุงูุฑูุฒ ุ ูู ุงููุซูุฑ ููุงูุชูุงู ุฃูู </font></font><code>while (true)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููุน ุชุฏูู ุงูุชูููุฐ ุ ูููู ุณูุชู ุชูููุฐู ูุฑุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ุฃุฑุณููุง ุงูุจูุงูุงุช ุฅูู Corutin ูุชููู </font></font><code>'Hello'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃุฑุณู ุงููุฒูุฏ - ูุฑุฏุช </font></font><code>'PHPRussia'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงููุจุฏุฃ ูุงุถุญ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุงููููุฏ ุ ููููู ุฅุฑุณุงู ุงูุฃุฎุทุงุก ููุนุงูุฌุชูุง ูู ุงูุฏุงุฎู ุ ููู ุฃูุฑ ููุงุณุจ.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printer</span>(<span class="hljs-params"></span>) </span>{<font></font>
    <span class="hljs-keyword">try</span> {<font></font>
        <span class="hljs-keyword">echo</span> <span class="hljs-keyword">yield</span>;<font></font>
    } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Throwable</span> $e) {<font></font>
        <span class="hljs-keyword">echo</span> $e-&gt;getMessage();<font></font>
    }<font></font>
}<font></font>
<font></font>
printer()-&gt;throw(<span class="hljs-keyword">new</span> \<span class="hljs-built_in">Exception</span>(<span class="hljs-string">'Ooops...'</span>));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุชุฎุชุตุฑ. </font><font style="vertical-align: inherit;">Corutin ูู ุฃุญุฏ ููููุงุช ุงูุจุฑูุงูุฌ ุงูุฐู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏุนู ุงูุชููู ูุงูุชูููุฐ ุงููุณุชูุฑ ูุน ุงูุญูุงุธ ุนูู ุงูุญุงูุฉ ุงูุญุงููุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุชุฐูุฑ Corutin ููุฏุณ ููุงููุงุชู ูุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุฏุงุฎูู ูููููู ุงุณุชุฎุฏุงููุง ูู ุงููุณุชูุจู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฏุงุช ูุงููุนุฏ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุงุฌูุงุช ุงููููุฏ ู Promise.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Generator</span></span><font></font><span class="hljs-class">
</span>{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send</span>(<span class="hljs-params">$data</span>)</span>;<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throw</span>(<span class="hljs-params">\<span class="hljs-built_in">Throwable</span> $error</span>)</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Promise</span></span><font></font><span class="hljs-class">
</span>{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolve</span>(<span class="hljs-params">$data</span>)</span>;<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reject</span>(<span class="hljs-params">\<span class="hljs-built_in">Throwable</span> $error</span>)</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุจุฏู ูุชุดุงุจูุฉ ุ ุจุงุณุชุซูุงุก ุฃุณูุงุก ุงูุทุฑู ุงููุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุฅุฑุณุงู ุงูุจูุงูุงุช ูุฅููุงุก ุฎุทุฃ ููู ูู ุงููููุฏ ู Promise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ูุณุชุทุชูุน ุงู ูุณุชุนูู ูุฐุงุ </font><font style="vertical-align: inherit;">ูููุชุจ ุฏุงูุฉ.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recoil</span>(<span class="hljs-params">\<span class="hljs-built_in">Generator</span> $generator</span>)</span><font></font><span class="hljs-function">
</span>{<font></font>
    $promise = $generator-&gt;current();<font></font>
<font></font>
    $promise-&gt;onResolve(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$data</span>) <span class="hljs-title">use</span> (<span class="hljs-params">$generator</span>) </span>{<font></font>
        $generator-&gt;send($data);<font></font>
        recoil($generator);<font></font>
    };<font></font>
<font></font>
    $promise-&gt;onReject(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$error</span>) <span class="hljs-title">use</span> (<span class="hljs-params">$generator</span>) </span>{<font></font>
        $generator-&gt;throw($error);<font></font>
        recoil($generator);<font></font>
    });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฃุฎุฐ ุงูุฏุงูุฉ ุนูู ุงููููุฉ ุงูุญุงููุฉ ูููููุฏ: </font></font><code> $promise = $generator-&gt;current();</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุบุช ููููุง. </font><font style="vertical-align: inherit;">ูุนู ุ ูุฌุจ ุฃู ูุชุญูู ูู ุฃู ุงููููุฉ ุงูุญุงููุฉ ุงูุชู ูุชู ุฅุฑุฌุงุนูุง ุฅูููุง ูู ููุน ูู </font></font><code>instanceof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุนุฏ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููููููุง ุฃู ูุทูุจ ููู ูุนุงูุฏุฉ ุงูุงุชุตุงู. </font><font style="vertical-align: inherit;">ูุฑุณู ุงูุจูุงูุงุช ุฏุงุฎูููุง ุฅูู ุงููููุฏ ุนูุฏ ูุฌุงุญ Promise ููุจุฏุฃ ุงููุธููุฉ ุจุดูู ูุชูุฑุฑ </font></font><code>recoil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="php hljs">    $promise-&gt;onResolve(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$data</span>) <span class="hljs-title">use</span> (<span class="hljs-params">$generator</span>) </span>{<font></font>
        $generator-&gt;send($data);<font></font>
        recoil($generator);<font></font>
    };</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุงูููุงู ุจููุณ ุงูุดูุก ูุน ุงูุฃุฎุทุงุก. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุดู Promise ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุงู ุฎุงุฏู SQL: "ุนุฏุฏ ูุจูุฑ ุฌุฏูุง ูู ุงูุงุชุตุงูุงุช" ุ ููููููุง ุฅููุงุก ุงูุฎุทุฃ ุฏุงุฎู ุงููููุฏ ูุงูุงูุชูุงู ุฅูู ุงูุฎุทูุฉ ุงูุชุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ูููููุง ุฅูู ุงูููููู ุงูููู ูุชุนุฏุฏ ุงูููุงู ุงูุชุนุงููู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุฏุฏ ุงูููุงู ุงูุชุนุงูููุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ููุน ูู ุชุนุฏุฏ ุงูููุงู ุ ุญูุซ ูุชู ุชูููุฐ ุงููููุฉ ุงูุชุงููุฉ ููุท ุจุนุฏ ุฃู ุชุนูู ุงููููุฉ ุงูุญุงููุฉ ุตุฑุงุญุฉ ุฃููุง ูุณุชุนุฏุฉ ูุฅุนุทุงุก ุงููุนุงูุฌ ููุชูุง ูููุงู ุฃุฎุฑู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฏุฑูุง ูุง ุตุงุฏูุช ุดูุฆูุง ุจุณูุทูุง ุ ูุซู ุงูุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช ูุงุญุฏุฉ ููุท. ูู ุฃุบูุจ ุงูุฃุญูุงู ุ ูู ุนูููุฉ ุชุญุฏูุซ ุงููุณุชุฎุฏู ุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูู ููุฑุณ ุงูุจุญุซ ุ ุซู ุชูุธูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฃู ุชุญุฏูุซูุง ุ ุซู ุฅุฑุณุงู 15 ุฑุณุงูุฉ ุฃุฎุฑู ุฅูู RabbitMQ. ูู PHP ุ ูุจุฏู ูู ูุฐุง. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m6/w7/5n/m6w75nkbjrduxzynamn9qiinfwm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุชูููุฐ ุงูุนูููุงุช ูุงุญุฏูุง ุชูู ุงูุขุฎุฑ: ูููุง ุจุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูููุฑุณ ุซู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช. ูููู ุจุดูู ุงูุชุฑุงุถู ุ ูููู PHP ุจุญุธุฑ ูุซู ูุฐู ุงูุนูููุงุช (I / O) ุ ูุฐูู ุฅุฐุง ูุธุฑุช ุนู ูุซุจ ุ ูู ุงููุงูุน ุ ูู ุดูุก ูุฐูู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/3d/wc/wk3dwckb_gjjfnoprw63gxnoxlm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฃุฌุฒุงุก ุงููุธููุฉ ุญุฌุจูุง. ูุฃุฎุฐูู ูุนุธู ุงูููุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุนูููุง ูู ูุถุน ุบูุฑ ูุชุฒุงูู ุ ูุฅู ูุฐู ุงูุฃุฌุฒุงุก ููุณุช ููุงู ุ ูุฅู ุงูุฌุฏูู ุงูุฒููู ููุชูููุฐ ูุชูุทุน.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qj/mx/xv/qjmxxv9oiwkix-_oebyl48qbio4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ูุตููุง ูููุง ูุนูุง ูุตูุน ุงููุทุน ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t0/o0/x5/t0o0x5ddiw6pij4rlmvzst2oyaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุง ูู ูุฐุงุ </font><font style="vertical-align: inherit;">ุฅุฐุง ูุธุฑุช ุฅูู ุญุฌู ุงููุฎุทุท ุงูุฒููู ุ ูู ุงูุจุฏุงูุฉ ูุณุชุบุฑู ุงููุซูุฑ ูู ุงูููุช ุ ูููู ุจูุฌุฑุฏ ุฃู ููุตูู ูุนูุง ุ ูุชุณุงุฑุน ุงูุชุทุจูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุทุงููุง ุงุณุชุฎุฏู ููููู ุญููุฉ ุงูุฃุญุฏุงุซ ูุชุนุฏุฏ ุงูููุงู ุงูุชุนุงููู ูู ุชุทุจููุงุช ูุฎุชููุฉ: Nginx ู Node.js ู Memcached ู Redis. </font><font style="vertical-align: inherit;">ูููู ูุณุชุฎุฏููู ุฏุงุฎู ุญููุฉ ุงูุญุฏุซ ููุชู ุจูุงุคูุง ุนูู ููุณ ุงููุจุฏุฃ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฐ ุฃู ุจุฏุฃูุง ูุชุญุฏุซ ุนู ุฎูุงุฏู ุงูููุจ Nginx ู Node.js ุ ููุชุฐูุฑ ููู ุชุชู ูุนุงูุฌุฉ ุงูุทูุจุงุช ูู PHP.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌุฉ ุงูุทูุจ ูู PHP</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุณู ุงููุชุตูุญ ุทูุจูุง ุ ููุตู ุฅูู ุฎุงุฏู HTTP ุงูุฐู ููุฌุฏ ุฎููู ูุฌููุนุฉ ูู ุชุฏููุงุช FPM. </font><font style="vertical-align: inherit;">ูุจุฏุฃ ุฃุญุฏ ุณูุงุณู ุงูุนูููุงุช ูุฐุง ุงูุทูุจ ูู ุงูุนูู ุ ููุฑุจุท ููุฏูุง ููุจุฏุฃ ูู ุชูููุฐู. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bg/s1/p_/bgs1p_g8r9ytthxrst0mszi7_bw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ูุตูู ุงูุทูุจ ุงูุชุงูู ุ ุณูู ููุชูุทู ูุคุดุฑ ุชุฑุงุจุท FPM ุขุฎุฑ ุ ููุฑุจุท ุงูููุฏ ูุณูุชู ุชูููุฐู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฒุงูุง</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฎุทุฉ ุงูุนูู ูุฐู </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุจุณูุทุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅุฐุง ุญุฏุซ ุฎุทุฃ ูุง ูุณูุท ุฃุญุฏ ุงูุทูุจุงุช ุ ููุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฃู ุดูุก - ุณูุฃุชู ุงูุทูุจ ุงูุชุงูู ุ ููุฐุง ูู ูุคุซุฑ ุนูู ุนููู.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููุฑ ูู ุงูุฐุงูุฑุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุณูุง ุจุญุงุฌุฉ ูุชูุธูู ุฃู ูุฑุงูุจุฉ ุงูุฐุงูุฑุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุทูุจ ุงูุชุงูู ุ ุณูุชู ูุณุญ ูู ุงูุฐุงูุฑุฉ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุฎุทุท ุฑุงุฆุน ูุนูู ูู PHP ููุฐ ุงูุจุฏุงูุฉ ููุง ูุฒุงู ูุนูู ุจูุฌุงุญ. </font><font style="vertical-align: inherit;">ูููู ููุงู ุฃูุถูุง </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุจ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏ ูู ุนุฏุฏ ุงูุนูููุงุช</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง 50 ุณูุณูุฉ ุฑุณุงุฆู ูู ุงูุฏูููุฉ ุนูู ุงูุฎุงุฏู ุ ูุจูุฌุฑุฏ ูุตูู ุงูุทูุจ 51 ุ ุณููุชุธุฑ ุญุชู ูุตุจุญ ุฃุญุฏ ุณูุงุณู ุงููุญุงุฏุซุงุช ูุฌุงูููุง.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุงููู ุชุจุฏูู ุงูุณูุงู</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูููู ูุธุงู ุงูุชุดุบูู ุจุชุจุฏูู ุงูุทูุจุงุช ุจูู ุชุฏููุงุช FPM. </font><font style="vertical-align: inherit;">ูุฐู ุงูุนูููุฉ ุนูู ูุณุชูู ุงููุนุงูุฌ ุชุณูู ุชุจุฏูู ุงูุณูุงู. </font><font style="vertical-align: inherit;">ุฅููุง ููููุฉ ูุชุฏูุฑ ุนุฏุฏูุง ูุจูุฑูุง ูู ุงูุฅุฌุฑุงุกุงุช. </font><font style="vertical-align: inherit;">ูู ุงูุถุฑูุฑู ุญูุธ ุฌููุน ุงูุชุณุฌููุงุช ุ ููุฏุณ ุงูุงุชุตุงู ุ ูู ุดูุก ููุฌูุฏ ูู ุงููุนุงูุฌ ุ ุซู ุงูุชุจุฏูู ุฅูู ุนูููุฉ ุฃุฎุฑู ุ ูุชุญููู ุชุณุฌููุงุชู ูููุฏุณ ุงูููุงููุงุช ุงูุฎุงุต ุจู ุ ูุชูููุฐ ุดูุก ููุงู ูุฑุฉ ุฃุฎุฑู ุ ูุงูุชุจุฏูู ูุฑุฉ ุฃุฎุฑู ุ ูุงูุญูุธ ูุฑุฉ ุฃุฎุฑู ... ููุชุฑุฉ ุทูููุฉ.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูุชุนุงูู ูุน ุงูุณุคุงู ุจุดูู ูุฎุชูู - ุณููุชุจ ุฎุงุฏู HTTP ูู PHP ููุณู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุงุฏู HTTP ุบูุฑ ูุชุฒุงูู</font></font></h2><br>
<img src="https://habrastorage.org/webt/nd/dy/yt/nddyyt6dhjy0dxnkmpokppvvcr4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฅูุฌุงุฒู. </font><font style="vertical-align: inherit;">ููุฏ ุชุนูููุง ุจุงููุนู ููููุฉ ุงูุนูู ูุน ุงูููุงุจุณ ูู ูุถุน ุนุฏู ุงูุญุธุฑ ุ ูุงุชุตุงู HTTP ูู ููุณ ุงูููุจุณ. </font><font style="vertical-align: inherit;">ููู ุณุชุจุฏู ูุชุนููุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุซุงู ุนูู ุจุฏุก ุฎูุงุฏู HTTP ูู ุฅุทุงุฑ ุนูู AMPHP.</font></font><br>
<br>
<pre><code class="php hljs">Loop::run(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<font></font>
    $app = <span class="hljs-keyword">new</span> Application();<font></font>
    $app-&gt;bootstrap();<font></font>
<font></font>
    $sockets = [Socket\listen(<span class="hljs-string">'0.0.0.0:80'</span>)];<font></font>
<font></font>
    $server = <span class="hljs-keyword">new</span> Server($sockets, <span class="hljs-keyword">new</span> CallableRequestHandler(<font></font>
        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Request $request</span>) <span class="hljs-title">use</span> (<span class="hljs-params">$app</span>) </span>{<font></font>
            $response = <span class="hljs-keyword">yield</span> $app-&gt;dispatch($request);<font></font>
<font></font>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Response(Status::OK, [], $response);<font></font>
        })<font></font>
    );<font></font>
<font></font>
    <span class="hljs-keyword">yield</span> $server-&gt;start();<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุดูุก ุจุณูุท ููุบุงูุฉ: ูู ุจุชุญููู </font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก ุชุฌูุน ูุฃุฎุฐ ุชูุตูู (ูุงุญุฏ ุฃู ุฃูุซุฑ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฐูู ุ ูุจุฏุฃ ุงูุฎุงุฏู ุงูุฎุงุต ุจูุง ุ ููููู ุจุชุนูููู </font></font><code>Handler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุฐู ุณูุชู ุชูููุฐู ูู ูู ุทูุจ ูุฅุฑุณุงู ุงูุทูุจ ุฅูู ูููุนูุง </font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุตูู ุนูู ุฑุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุขุฎุฑ ุดูุก ูุนูู ูู ุจุฏุก ุชุดุบูู ุงูุฎุงุฏู </font></font><code>yield $server-&gt;start();</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ReactPHP ุณุชุจุฏู ูุชุดุงุจูุฉ ุชูุฑูุจูุง ุ ูููู ูู ูููู ููุงู ุณูู 150 ุฑุฏ ููุฎูุงุฑุงุช ุงููุฎุชููุฉ ุ ููู ุฃูุฑ ุบูุฑ ููุงุฆู ููุบุงูุฉ.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดุงูู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุงูุนุฏูุฏ ูู ุงููุดููุงุช ุงููุชุนููุฉ ุจุงูุชุฒุงูู ูู PHP. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏู ูุฌูุฏ ูุนุงููุฑ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุฅุทุงุฑ ุนูู: Swoole ุฃู ReactPHP ุฃู AMPHP ุ ูููุฐ ูุงุฌูุฉ Promise ุงูุฎุงุตุฉ ุจู ุ ููู ุบูุฑ ูุชูุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุฃู ูุชูุงุนู AMPHP ูุธุฑููุง ูุน Promise ูู ReactPHP ุ ูููู ููุงู ุชุญุฐูุฑ. ุฅุฐุง ูู ููู ุฑูุฒ ReactPHP ููุชูุจูุง ุจุดูู ุฌูุฏ ููุบุงูุฉ ุ ููู ููุงู ูุง ูุณุชุฏุนู ุฃู ููุดุฆ ุถููููุง ุญููุฉ ุญุฏุซ ุ ูุนูุฏุฆุฐู ูุชุจูู ุฃู ุญููุชูู ูู ุงูุฃุญุฏุงุซ ุณุชุฏูุฑุงู ูู ุงูุฏุงุฎู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฌุงูุง ุณูุฑูุจุช ูุฏููุง ูุนูุงุฑ ุฌูุฏ ูููุนูุฏ / A + ูููุฐ Guzzle. ุณูููู ูู ุงููุทูู ุฃู ุชุชุจุนู ุงูุฃุทุฑ. ููู ุญุชู ุงูุขู ููุณ ูุฐุง. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณุฑูุจุงุช ุงูุฐุงูุฑุฉ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุนูุฏูุง ูุนูู ูู PHP ูู ูุถุน FPM ุงููุนุชุงุฏ ุ ูุฏ ูุง ูููุฑ ูู ุงูุฐุงูุฑุฉ. ุญุชู ุฅุฐุง ูุณู ูุทูุฑู ุจุนุถ ุงูุฅุถุงูุงุช ูุชุงุจุฉ ุฑูุฒ ุฌูุฏ ุ ููุณู ุชุดุบููู ูู ุฎูุงู Valgrind ุ ููู ููุงู ูุง ุฏุงุฎู ุงูุฐุงูุฑุฉ ูุชุฏูู ุ ููุง ุจุฃุณ - ุณูู ูุชู ูุณุญ ุงูุทูุจ ุงูุชุงูู ููุจุฏุฃ ูู ุฌุฏูุฏ. ูููู ูู ุงููุถุน ุบูุฑ ุงููุชุฒุงูู ุ ูุง ููููู ุชุญูู ุฐูู ุ ูุฃููุง ุนุงุฌูุงู ุฃู ุขุฌูุงู ุณูู ูุณูุท ุจุจุณุงุทุฉ </font></font><code>OutOfMemoryException</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููููู ุฅุตูุงุญูุง ุ ููููุง ุตุนุจุฉ ููุคููุฉ. ูู ุจุนุถ ุงูุญุงูุงุช ุ ูุณุงุนุฏ Xdebug ุ ูู ุญุงูุงุช ุฃุฎุฑู ุ ุนูู ุชุญููู ุงูุฃุฎุทุงุก ุงูุชู ุชุณุจุจุช ูููุง </font></font><code>OutOfMemoryException</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูููุงุช ุงูุญุธุฑ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูู ุงูุถุฑูุฑู ุนุฏู ุญุธุฑ ุญููุฉ ุงูุฃุญุฏุงุซ ุนูุฏูุง ููุชุจ ุฑูุฒูุง ุบูุฑ ูุชุฒุงูู. ูุชุจุงุทุฃ ุงูุชุทุจูู ุจูุฌุฑุฏ ุนุฑููุฉ ุชุฏูู ุงูุชูููุฐ ุ ูุจุฏุฃ ูู ููุฑูุชููุง ูู ุงูุนูู ุจุดูู ุฃุจุทุฃ.</font></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชุณุงุนุฏ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุญุฒูุฉ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">kelunik / loop-block ูู</font></a><font style="vertical-align: inherit;"> ุงูุนุซูุฑ ุนูู ูุซู ูุฐู ุงูุนูููุงุช ูู AMPHP </font><font style="vertical-align: inherit;">. ูููู ุจุชุนููู ุงููุคูุช ุนูู ูุงุตู ุฒููู ุตุบูุฑ ุฌุฏูุง. ุฅุฐุง ูู ูุนูู ุงููุคูุช ุ ูุณูุญุธุฑ ูู ููุงู ูุง. ุชุณุงุนุฏ ุงูุญุฒูุฉ ูู ุงูุนุซูุฑ ุนูู ุฃูุงูู ุงูุญุธุฑ ุ ูููู ููุณ ุฏุงุฆููุง: ูุฏ ูุง ูุชู ููุงุญุธุฉ ุงูุญุธุฑ ูู ุจุนุถ ุงูุงูุชุฏุงุฏุงุช. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนู ุงูููุชุจุฉ: Cassandraุ Influxุ ClickHouse</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ูุฌููุน PHP ุบูุฑ ุงููุชุฒุงูู ูู ุฏุนู ุงูููุชุจุงุช. ูุง ูููููุง ุงุณุชุฎุฏุงู ุงููุนุชุงุฏุฉ </font></font><code>PDOConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>RedisClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุงุฆููู ุงูุขุฎุฑูู ูู </font><font style="vertical-align: inherit;">ุฌููุน </font><font style="vertical-align: inherit;">- ูุญุชุงุฌ ุชุทุจููุงุช ุบูุฑ ูุคูู. ูุฌุจ ุฃูุถูุง ูุชุงุจุชูุง ูู PHP ูู ูุถุน ุนุฏู ุงูุญุธุฑ ุ ูุฃู ุจุฑุงูุฌ ุชุดุบูู C ูุงุฏุฑูุง ูุง ุชููุฑ ูุงุฌูุงุช ูููู ุฏูุฌูุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููุชุฒุงููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุบุฑุจ ุชุฌุฑุจุฉ ุญุตูุช ุนูููุง ูุน ุงูุณุงุฆู ููุงุนุฏุฉ ุจูุงูุงุช ูุงุณุงูุฏุฑุง. ุฃููุง ุชููุฑ ุนูููุงุช</font></font><code>ExecuteAsync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>GetAsync</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุขุฎุฑูู ุ ูููู ูู ููุณ ุงูููุช ูุนูุฏูู ูุงุฆููุง </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุทุฑููุฉ ูุงุญุฏุฉ ูุชู </font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุธุฑูุง. </font><font style="vertical-align: inherit;">ููุงู ูุฑุตุฉ ููุญุตูู ุนูู ุดูุก ูุง ุจุดูู ุบูุฑ ูุชุฒุงูู ุ ูููู ูุงูุชุธุงุฑ ุงููุชูุฌุฉ ุ ุณูุณุชูุฑ ูู ุญุธุฑ ุงูุญููุฉ ุจุงููุงูู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุจุทุฑููุฉ ูุฎุชููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุฎูุงู ุงูุงุณุชุฑุฌุงุนุงุช ุ ูุง ูุนูู. </font><font style="vertical-align: inherit;">ููุฏ ูุชุจุช ุญุชู ููููู ูู Cassandra ุ ูุฃููุง ูุณุชุฎุฏููุง ูู ุนูููุง. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุดุงุฑุฉ ุงูููุน</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฐู ูุดููุฉ AMPHP ู corutin.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRepository</span></span><font></font><span class="hljs-class">
</span>{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">find</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> $id</span>): \<span class="hljs-title">Generator</span></span><font></font><span class="hljs-function">
    </span>{<font></font>
        $data = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">$this</span>-&gt;db-&gt;query(<span class="hljs-string">'SELECT ...'</span>, $id);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> User::fill($data);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุญุฏุซ ูู ุฏุงูุฉ </font></font><code>yield</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฅูู ูุตุจุญ ูููุฏูุง. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ูู ูุนุฏ ุจุฅููุงููุง ุชุญุฏูุฏ ุฃููุงุน ุจูุงูุงุช ุงูุฅุฑุฌุงุน ุงูุตุญูุญุฉ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP 8</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฐุง ููุชุธุฑูุง ูู PHP 8ุ </font><font style="vertical-align: inherit;">ุณุฃุฎุจุฑู ุนู ุงูุชุฑุงุถุงุชู ุฃู ุจุงูุฃุญุฑู ุฑุบุจุงุชู ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุญุธุฉ ุงููุญุฑุฑ: ุฏููุชุฑู ุณุชูุฌูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฑู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุง ุณูุธูุฑ ุจุงููุนู ูู PHP 8</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญููุฉ ุงูุญุฏุซ </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุงุญุชูุงู ุฃู ุชุธูุฑ ุ ูุฃู ุงูุนูู ุฌุงุฑ ูุฅุญุถุงุฑ Event Loop ุจุดูู ูุง ุฅูู ุงูููุงุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุญุฏุซ ุฐูู ุ ูุณูููู ูุฏููุง ูุธููุฉ </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุซู JavaScript ุฃู C # ุ ูุงูุชู ุณุชุณูุญ ููุง ุจุงูุชุธุงุฑ ูุชูุฌุฉ ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ููุงู ูุนูู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูู ูุญุชุงุฌ ุฅูู ุฃู ููุญูุงุช ุ ูู ุดูุก ุณูุนูู ุจุดูู ุบูุฑ ูุชุฒุงูู ุนูู ูุณุชูู ุงูููุงุฉ.</font></font><br>
<br>
<pre><code class="php hljs"><font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRepository</span></span><font></font><span class="hljs-class">
</span>{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">find</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> $id</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt;</span><font></font><span class="hljs-function">
    </span>{<font></font>
        $data = await <span class="hljs-keyword">$this</span>-&gt;db-&gt;query(<span class="hljs-string">'SELECT ...'</span>, $id);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> User::fill($data);<font></font>
    }<font></font>
}</code></pre><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุซุฉ </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go ููุชุธุฑ Generics ุ ูุญู ููุชุธุฑ Generics ุ ูุงูุฌููุน ููุชุธุฑ Generics.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRepository</span></span><font></font><span class="hljs-class">
</span>{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">find</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> $id</span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">User</span>&gt;</span><font></font><span class="hljs-function">
    </span>{<font></font>
        $data = <span class="hljs-keyword">yield</span> <span class="hljs-keyword">$this</span>-&gt;db-&gt;query(<span class="hljs-string">'SELECT ...'</span>, $id);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> User::fill($data);<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุง ูุง ููุชุธุฑ Generics ูููุฌููุนุงุช ุ ูููู ููุฅุดุงุฑุฉ ุฅูู ุฃู ูุชูุฌุฉ Promise ุณุชููู ุจุงูุถุจุท ูุงุฆู ุงููุณุชุฎุฏู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูู ูุฐุงุ</font></font></h2><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุฑุนุฉ ูุงูุฃุฏุงุก.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุบุฉ PHP ูู ูุบุฉ ุชููู ูุนุธู ุงูุนูููุงุช ูููุง ูุฑุชุจุทุฉ ุจุฅุฏุฎุงู / ุฅุฎุฑุงุฌ. </font><font style="vertical-align: inherit;">ูุงุฏุฑูุง ูุง ููุชุจ ุฑูุฒูุง ูุฑุชุจุทูุง ุจุดูู ูุจูุฑ ุจุงูุญุณุงุจุงุช ูู ุงููุนุงูุฌ. </font><font style="vertical-align: inherit;">ุนูู ุงูุฃุฑุฌุญ ุ ูุนูู ูุน ูุขุฎุฐ: ูุญู ุจุญุงุฌุฉ ุฅูู ุชูุฏูู ุทูุจ ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ููุฑุงุกุฉ ุดูุก ูุง ุ ูุฅุฑุฌุงุน ุงุณุชุฌุงุจุฉ ุ ูุฅุฑุณุงู ููู. </font><font style="vertical-align: inherit;">ูุณูุญ ูู ุนุฏู ุงูุชุฒุงูู ุจุชุณุฑูุน ูุซู ูุฐุง ุงูุฑูุฒ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุธุฑูุง ุฅูู ูุชูุณุท โโููุช ุงูุงุณุชุฌุงุจุฉ ูู 1000 ุทูุจ ุ ูููููุง ุงูุชุณุฑูุน ุจูุญู 8 ูุฑุงุช ุ ูุจ 10000 ุทูุจ ุจูุญู 6 ุทูุจุงุช!</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13 ูุงูู 2020 ุ ุณูู ูุฌุชูุน ูููุฑุฉ ุงูุซุงููุฉ ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP ุฑูุณูุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุงูุดุฉ ุงููุบุฉ ูุงูููุชุจุงุช ูุงูุฃุทุฑ ูุทุฑู ุฒูุงุฏุฉ ุงูุฅูุชุงุฌูุฉ ููุฒุงูู ุญููู ุงูุถุฌูุฌ. </font><font style="vertical-align: inherit;">ููุฏ ูุจููุง </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุงุฑูุฑ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุฑุจุนุฉ ุงูุฃููู </font><font style="vertical-align: inherit;">ุ ูููู ูุง ุชุฒุงู ุฏุนูุฉ ููุฃูุฑุงู ูุงุฏูุฉ. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏู ุทูุจู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุดุงุฑูุฉ ุชุฌุฑุจุชู ูุน ุงููุฌุชูุน.</font></font></blockquote></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar487258/">https://habr.com/ru/post/ar487258/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar487246/index.html">ูุฌูุฒ ูููุฆุฉ ุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช ูู Tensor ุงุฎุชุฑุงู ุงูููุงุชูุญ ุงูุฎุงุตุฉ ููุนููุงุก</a></li>
<li><a href="../ar487248/index.html">ุงููุฒูุฏ ุนู ุงูุงุฎุชุจุงุฑ ุบูุฑ ุงูุณููู</a></li>
<li><a href="../ar487250/index.html">ูุฒุฌ ุงููุง ุงููุชุฃุฎุฑ</a></li>
<li><a href="../ar487254/index.html">ููููุฉ ุงุณุชุฎุฏุงู ูุงููุฑุงุช CCTV ููุณ ููุท ููุฑุงูุจุฉ ุงููุชุณูููู</a></li>
<li><a href="../ar487256/index.html">ุญุฑู ูุงูุนูุฏุฉ ูู ุงูุฑูุงุฏ ุฃู ุงููุงุณ ูููููุณ</a></li>
<li><a href="../ar487260/index.html">NoVerify: linter PHP ูุนูู ุจุณุฑุนุฉ</a></li>
<li><a href="../ar487262/index.html">ูุคุชูุฑ ููุชูุญ PHP Russia Online</a></li>
<li><a href="../ar487266/index.html">ุชู ุฅุตุฏุงุฑ GitLab 12.7 ูุน ุฎุทูุท ุฃูุงุจูุจ ุงููุงูุฏูู ูุงูุทูู ูุงูุฅุตุฏุงุฑ ุงูุชุฌุฑูุจู ูู ูุนุงูุฌุงุช ุงููุธุงุฆู ุงูุดุงุฆุนุฉ ููุธุงู ุงูุชุดุบูู Windows</a></li>
<li><a href="../ar487270/index.html">ูููู ูู Perovskites ุฅุทุงูุฉ ุนูุฑ ุดุงุดุงุช ุงูุฃุฏูุงุช</a></li>
<li><a href="../ar487272/index.html">ุงูุฅุดุงุฑุงุช ุงููุฑุฌุนูุฉ - ุงูุชูู ุงูุนุฏ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>