<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•ü üòÄ üë®üèø‚Äçü§ù‚Äçüë®üèΩ MASK-RCNN para encontrar techos a partir de im√°genes de drones üèÇüèΩ üïõ üóÉÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En una ciudad blanca y blanca en una calle blanca y blanca hab√≠a casas blancas y blancas ... ¬øY qu√© tan r√°pido puedes encontrar todos los techos de la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>MASK-RCNN para encontrar techos a partir de im√°genes de drones</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/500752/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad9/eb5/21e/ad9eb521e7c2fcb232116aa876742ee3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En una ciudad blanca y blanca en una calle blanca y blanca hab√≠a casas blancas y blancas ... ¬øY qu√© tan r√°pido puedes encontrar todos los techos de las casas en esta foto? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada vez m√°s, uno puede escuchar acerca de los planes del gobierno para llevar a cabo un inventario completo de bienes ra√≠ces con el fin de aclarar los datos catastrales. Para la soluci√≥n principal a este problema, se puede aplicar un m√©todo simple basado en el c√°lculo del √°rea del techo de los edificios capitales a partir de fotograf√≠as a√©reas y una comparaci√≥n adicional con los datos catastrales. Desafortunadamente, la b√∫squeda y el c√°lculo manuales requieren mucho tiempo, y dado que las casas nuevas se demuelen y construyen continuamente, el c√°lculo debe repetirse una y otra vez. La hip√≥tesis surge inmediatamente de que este proceso puede automatizarse utilizando algoritmos de aprendizaje autom√°tico, en particular, la visi√≥n por computadora. En este art√≠culo hablar√© sobre c√≥mo estamos en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NORBIT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> resolvi√≥ este problema y las dificultades que encontraron.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spoiler: lo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hicimos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El servicio ML desarrollado se basa en un modelo de aprendizaje autom√°tico profundo basado en redes neuronales de convoluci√≥n. </font><font style="vertical-align: inherit;">El servicio acepta im√°genes de veh√≠culos a√©reos no tripulados como entrada; en la salida, genera un archivo GeoJSON con el marcado de objetos de construcci√≥n de capital encontrados con referencia a coordenadas geogr√°ficas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, se ve as√≠:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ab/892/528/0ab892528db9a5c84fd26d0e30329b5a.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos con los problemas t√©cnicos que encontramos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">existe una diferencia significativa entre las fotograf√≠as a√©reas de invierno y verano (un modelo entrenado solo en fotograf√≠as de verano es completamente incapaz de encontrar techos en invierno);</font></font></li>
<li>            ,       ;</li>
<li>  ,          (  ),     (     )      ,           ;</li>
<li>   ,     ,         (     ).        ;</li>
<li>  (,   )     .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y los drones a veces traen estas fotos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/663/809/821/66380982148bc07c8309f8d106ecfc38.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n me gustar√≠a se√±alar los problemas que podr√≠an haber sido, pero no nos preocuparon:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no tuvimos la tarea de realizar inferencia durante un tiempo limitado (por ejemplo, directamente en el momento del vuelo), lo que resolvi√≥ de inmediato todos los posibles problemas con el rendimiento;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la entrada para el procesamiento, recibimos de inmediato im√°genes de alta resoluci√≥n y alta calidad (usando lentes con una longitud focal de 21 mm a una altura de 250 m, que es 5 cm / px) de nuestro cliente, la compa√±√≠a Shakhty, podr√≠a usar su experiencia en geolocalizaci√≥n de objetos en mapas, y Tambi√©n tuvieron la oportunidad de establecer un conjunto espec√≠fico de requisitos para futuros vuelos de veh√≠culos a√©reos no tripulados, que en √∫ltima instancia redujo en gran medida la probabilidad de fichas muy √∫nicas que no estaban en el conjunto de entrenamiento;</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La primera soluci√≥n al problema, trazo usando el cuadro L√≠mite&nbsp;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunas palabras sobre las herramientas que utilizamos para crear la soluci√≥n.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anaconda es un conveniente sistema de gesti√≥n de paquetes para Python y R.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensorflow es una biblioteca de software de aprendizaje autom√°tico de c√≥digo abierto desarrollada por Google.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keras es un complemento para los marcos Deeplearning4j, TensorFlow y Theano.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV es una biblioteca de algoritmos de visi√≥n por computadora, procesamiento de im√°genes y algoritmos num√©ricos de c√≥digo abierto de uso general.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flask es un marco para crear aplicaciones web en el lenguaje de programaci√≥n Python.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como el sistema operativo utilizaba Ubuntu 18.04. </font><font style="vertical-align: inherit;">Con los controladores en la GPU (NVIDIA) en Ubuntu, todo est√° en orden, por lo que la tarea generalmente se resuelve con un comando:</font></font><br>
<br>
<code>&gt; sudo apt install nvidia-cuda-toolkit</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preparaci√≥n de azulejos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera tarea que enfrentamos fue dividir las im√°genes de sobrevuelo en mosaicos (2048x2048 px). </font><font style="vertical-align: inherit;">Podr√≠as escribir tu propio gui√≥n, pero luego tendr√≠as que pensar en mantener la ubicaci√≥n geogr√°fica de cada mosaico. </font><font style="vertical-align: inherit;">Era m√°s f√°cil usar una soluci√≥n preparada, por ejemplo, GeoServer: es un software de c√≥digo abierto que le permite publicar geodatos en el servidor. </font><font style="vertical-align: inherit;">Adem√°s, GeoServer resolvi√≥ otro problema para nosotros: la visualizaci√≥n conveniente del resultado del marcado autom√°tico en el mapa. </font><font style="vertical-align: inherit;">Esto se puede hacer localmente, por ejemplo, en qGIS, pero para un comando distribuido y una demostraci√≥n, un recurso web es m√°s conveniente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para realizar el mosaico, debe especificar la escala y el tama√±o necesarios en la configuraci√≥n.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/688/b29/4d1/688b294d129f14dddc810ca0defdef44.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para las traducciones entre sistemas de coordenadas, utilizamos la biblioteca pyproj:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> pyproj <span class="hljs-keyword">import</span> Proj, transform<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Converter</span>:</span>
&nbsp;&nbsp;&nbsp;&nbsp;P3857 = Proj(init=<span class="hljs-string">'epsg:3857'</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;P4326 = Proj(init=<span class="hljs-string">'epsg:4326'</span>)<font></font>
...<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">from_3857_to_GPS</span>(<span class="hljs-params">self, point</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x, y = point<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> transform(self.P3857, self.P4326, x, y)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">from_GPS_to_3857</span>(<span class="hljs-params">self, point</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x, y = point<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> transform(self.P4326, self.P3857, x, y)<font></font>
...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, fue posible formar f√°cilmente una capa grande de todos los pol√≠gonos y colocarla sobre el sustrato.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b8/9f6/428/2b89f642889bdc551871a35ba43a7c03.png"></div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para instalar el software GeoServer, debe completar los siguientes pasos.</font></font></b>
                        <div class="spoiler_text"><ol>
<li> Java  8.</li>
<li> GeoServer.       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a></li>
<li>     , ,&nbsp;<code>/usr/share/geoserver</code></li>
<li>      &nbsp;<br>
<br>
<strong><code>echo ¬´export GEOSERVER_HOME=/usr/share/geoserver¬ª &gt;&gt; ~/.profile</code></strong></li>
<li>   :<br>
<br>
<strong><code>sudo groupadd geoserver</code></strong></li>
<li> ,     ,   :<br>
<br>
<strong><code>sudo usermod -a -G geoserver &lt;user_name&gt;</code></strong></li>
<li> -  :<br>
<br>
<strong><code>sudo chown -R :geoserver /usr/share/geoserver/</code></strong></li>
<li>    :<br>
<br>
<strong><code>sudo chmod -R g+rwx /usr/share/geoserver/</code></strong></li>
<li> GeoServer&nbsp;<br>
<br>
<strong><code>cd geoserver/bin &amp;&amp; sh startup.sh</code></strong></li>
</ol></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GeoServer no es la √∫nica aplicaci√≥n que nos permite resolver nuestro problema. </font><font style="vertical-align: inherit;">Como alternativa, por ejemplo, puede considerar ArcGIS for Server, pero este producto es propietario, por lo que no lo usamos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, cada teja ten√≠a que encontrar todos los techos visibles. </font><font style="vertical-align: inherit;">El primer enfoque para resolver el problema fue utilizar la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">detecci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">objetos</font></a><font style="vertical-align: inherit;"> del </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">conjunto</font></a><font style="vertical-align: inherit;"> de modelos / investigaci√≥n Tensorflow. </font><font style="vertical-align: inherit;">De esta forma, las clases de im√°genes se pueden encontrar y localizar con una selecci√≥n rectangular (cuadro de l√≠mite).&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marcado de datos de entrenamiento&nbsp;</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, para entrenar el modelo necesita un conjunto de datos etiquetado. Por una coincidencia afortunada, adem√°s de dar vueltas, en nuestros contenedores, el conjunto de datos para 50 mil techos se conserv√≥ de los viejos tiempos, cuando todos los conjuntos de datos para capacitaci√≥n todav√≠a estaban en el dominio p√∫blico en todas partes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tama√±o exacto de la muestra de entrenamiento requerida para obtener una precisi√≥n aceptable del modelo es bastante dif√≠cil de predecir de antemano. Puede variar seg√∫n la calidad de las im√°genes, su grado de diferencia entre s√≠ y las condiciones en que se utilizar√° el modelo en la producci√≥n. Tuvimos casos en los que 200 piezas eran suficientes y, a veces, tambi√©n faltaban 50 mil muestras marcadas. En caso de escasez de im√°genes marcadas, generalmente agregamos m√©todos de aumento: giros, reflejos de espejo, gradaci√≥n de color, etc.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora hay muchos servicios disponibles que le permiten marcar im√°genes, tanto con c√≥digo fuente abierto para la instalaci√≥n en su computadora / servidor como con soluciones corporativas, incluido el trabajo de asesores externos, por ejemplo Yandex.Toloka. </font><font style="vertical-align: inherit;">En este proyecto, utilizamos el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anotador de imagen VGG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> m√°s simple </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Alternativamente, puedes probar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coco-annotator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label-studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Usualmente usamos este √∫ltimo para marcar archivos de texto y audio.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b1/46b/39c/5b146b39c6413ebde30c1a0a6f25421a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la capacitaci√≥n sobre el marcado de varios anotadores, generalmente debe realizar un peque√±o cambio de campo, un ejemplo para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VGG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para calcular correctamente el √°rea del techo que cay√≥ en el √°rea de asignaci√≥n rectangular, es necesario observar varias condiciones:</font></font><br>
<br>
<ul>
<li>     /     .          :</li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0c/41a/80e/b0c41a80e0ae785794143da7b38dfbbf.png"></div><br>
<ul>
<li>,    ,      :</li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/092/1de/dcb/0921dedcbc4effc0430d11cd8dea8401.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver el segundo problema, puede intentar entrenar un modelo separado que determine el √°ngulo de rotaci√≥n correcto de la baldosa para marcar, pero todo result√≥ un poco m√°s f√°cil. </font><font style="vertical-align: inherit;">Las personas se esfuerzan por reducir la entrop√≠a, por lo que alinean todas las estructuras hechas por el hombre en relaci√≥n entre s√≠, especialmente con edificios densos. </font><font style="vertical-align: inherit;">Si mira desde arriba, entonces en un √°rea localizada, las cercas, los pasillos, la plantaci√≥n, los invernaderos, los cenadores ser√°n paralelos o perpendiculares a los l√≠mites de los techos. </font><font style="vertical-align: inherit;">Solo queda encontrar todas las l√≠neas claras y calcular el √°ngulo de inclinaci√≥n m√°s com√∫n a la vertical. </font><font style="vertical-align: inherit;">Para esto, OpenCV tiene una gran herramienta HoughLinesP.&nbsp;</font></font><br>
<br>
<pre><code class="python hljs">...<font></font>
<font></font>
lines = cv2.HoughLinesP(edges, <span class="hljs-number">1</span>, np.pi/<span class="hljs-number">180</span>, <span class="hljs-number">50</span>, minLineLength=minLineLength, maxLineGap=<span class="hljs-number">5</span>)
<span class="hljs-keyword">if</span> lines <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;length = image.shape[<span class="hljs-number">0</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;angles = []<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span> x1, y1, x2, y2 <span class="hljs-keyword">in</span> lines[<span class="hljs-number">0</span>]:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;angle = math.degrees(math.atan2(y2 ‚Äî y1, x2 - x1))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;angles.append(angle)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;parts_angles.append(angles)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;median_angle = np.median(angles)<font></font>
...<font></font>
<font></font>
<span class="hljs-comment">#    &nbsp;</span><font></font>
<font></font>
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, image.shape[<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>, image.shape[<span class="hljs-number">0</span>] // count_crops):
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, image.shape[<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>, image.shape[<span class="hljs-number">1</span>] // count_crops):<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_line(image[x:x+image.shape[<span class="hljs-number">0</span>]//count_crops, y:y+image.shape[<span class="hljs-number">1</span>]//count_crops, :])<font></font>
...<font></font>
<font></font>
<span class="hljs-comment">#      </span><font></font>
<font></font>
np.median([a <span class="hljs-keyword">if</span> a&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">90</span>+a <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> np.array(parts_angles).flatten()])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de encontrar el √°ngulo, rotamos la imagen usando la transformaci√≥n af√≠n:</font></font><br>
<br>
<pre><code class="python hljs">
h, w = image.shape[:<span class="hljs-number">2</span>]<font></font>
image_center = (w/<span class="hljs-number">2</span>, h/<span class="hljs-number">2</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span> size <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;radians = math.radians(angle)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;sin = math.sin(radians)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;cos = math.cos(radians)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;size = (int((h * abs(sin)) + (w * abs(cos))), int((h * abs(cos)) + (w * abs(sin))))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix = cv2.getRotationMatrix2D(image_center, angle, <span class="hljs-number">1</span>)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>] += ((size[<span class="hljs-number">0</span>] / <span class="hljs-number">2</span>) ‚Äî image_center[<span class="hljs-number">0</span>])<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] += ((size[<span class="hljs-number">1</span>] / <span class="hljs-number">2</span>) ‚Äî image_center[<span class="hljs-number">1</span>])
<span class="hljs-keyword">else</span>:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;rotation_matrix = cv2.getRotationMatrix2D(image_center, angle, <span class="hljs-number">1</span>)<font></font>
<font></font>
cv2.warpAffine(image, rotation_matrix, size)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de ejemplo completo est√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As√≠ es como se ve:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b2/032/15c/2b203215c7a688dc7639e7993643a99e.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/594/423/c1b/594423c1b3e52a8e4fcd383b20a04b05.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo de torneado de tejas y marcado con rect√°ngulos funciona m√°s r√°pido que el marcado con m√°scaras, se encuentran casi todos los techos, pero en la producci√≥n este m√©todo se usa solo como auxiliar debido a varios inconvenientes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hay muchos sobrevuelos donde hay una gran cantidad de techos no rectangulares, debido a esto hay demasiado trabajo manual para refinar el √°rea,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a veces se encuentra en casa con diferentes orientaciones en el mismo mosaico,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a veces hay muchas l√≠neas falsas en las fichas, lo que finalmente conduce a un giro equivocado. </font><font style="vertical-align: inherit;">Se parece a esto:</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d4/ba0/30c/6d4ba030c0784c6ee7366486b3a8f03c.png"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/691/5fd/a10/6915fda10769dc9b5d96522737d6aef6.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La soluci√≥n final basada en Mask-RCNN</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo intento fue buscar y resaltar los tejados por m√°scaras p√≠xel por p√≠xel, y luego delinear autom√°ticamente los contornos de las m√°scaras encontradas y crear pol√≠gonos vectoriales.&nbsp;&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya hay suficientes materiales sobre los principios de operaci√≥n, tipos y tareas de las redes neuronales convolucionales, incluidas las de Rusia, por lo que no los abordaremos en este art√≠culo. Deteng√°monos solo en una implementaci√≥n espec√≠fica, Mask-RCNN, una arquitectura para localizar y resaltar los contornos de los objetos en las im√°genes. Existen otras soluciones excelentes con sus ventajas y desventajas, por ejemplo, UNet, pero fue posible lograr una mejor calidad en Mask-RCNN.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el proceso de su desarrollo, pas√≥ por varias etapas. La primera versi√≥n de R-CNN se desarroll√≥ en 2014. El principio de su trabajo es resaltar peque√±as √°reas en la imagen, para cada una de las cuales se realiza una estimaci√≥n de la probabilidad de la presencia de un objeto objetivo en esta √°rea. R-CNN hizo un excelente trabajo con la tarea, pero su velocidad dej√≥ mucho que desear. El desarrollo l√≥gico fue las redes Fast R-CNN y Faster R-CNN, que recibieron mejoras en el algoritmo de rastreo de im√°genes, lo que permiti√≥ aumentar significativamente la velocidad. A la salida de Faster R-CNN, aparece una marca con una selecci√≥n rectangular que indica los l√≠mites del objeto, lo que no siempre es suficiente para resolver el problema.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√°scara R-CNN tambi√©n agrega una superposici√≥n de m√°scara p√≠xel por p√≠xel para obtener el contorno exacto del objeto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cuadro de l√≠mite y las m√°scaras se pueden ver claramente en el resultado de la operaci√≥n del modelo (el filtro por el √°rea m√≠nima de construcci√≥n est√° activado):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d6e/d0c/756/d6ed0c7567ed2894bbe11161fc91af55.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Convencionalmente, hay 4 etapas en la operaci√≥n de esta red:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est√°ndar para todas las redes neuronales convolucionales, la asignaci√≥n de caracter√≠sticas en la imagen, como l√≠neas, curvas, l√≠mites contrastantes y otros;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La Red de Propuesta de Regi√≥n (RPN) escanea peque√±os fragmentos de la imagen, llamados anclajes (anclajes) y determina si este ancla contiene signos espec√≠ficos de la clase objetivo (en nuestro caso, el techo);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regi√≥n de inter√©s Clasificaci√≥n y cuadro delimitador. </font><font style="vertical-align: inherit;">En esta etapa, la red, basada en los resultados de la etapa anterior, est√° tratando de resaltar grandes √°reas rectangulares en la fotograf√≠a, presumiblemente conteniendo el objeto objetivo;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√°scaras de segmentaci√≥n. </font><font style="vertical-align: inherit;">En esta etapa, la m√°scara del objeto deseado se obtiene del √°rea rectangular obtenida aplicando el cuadro de l√≠mite.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, la red result√≥ tener una configuraci√≥n muy flexible y pudimos reconstruirla para procesar im√°genes con capas de informaci√≥n adicionales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usar solo im√°genes RGB por s√≠ solas no nos permiti√≥ lograr la precisi√≥n de reconocimiento necesaria (el modelo perdi√≥ edificios enteros, hubo un error promedio de 15% al ‚Äã‚Äãcalcular el √°rea del techo), por lo que proporcionamos al modelo datos √∫tiles adicionales, por ejemplo, mapas de altura obtenidos por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fotogrametr√≠a.</font></font></a>&nbsp;<br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7cc/801/ac8/7cc801ac8060a3b99a2bb26415d2fe38.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©tricas utilizadas para evaluar la calidad del modelo.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al determinar la calidad de los modelos, con mayor frecuencia usamos la m√©trica Intersecci√≥n sobre Uni√≥n (IoU)</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8cc/486/5be/8cc4865be494cc0bee045c618df9ff59.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√≥digo de muestra para calcular IoU usando la biblioteca geometry.shapely:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> shapely.geometry <span class="hljs-keyword">import</span> Polygon<font></font>
<font></font>
true_polygon = Polygon([(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">2</span>)])<font></font>
predicted_polygon = Polygon([(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">7</span>), (<span class="hljs-number">6</span>, <span class="hljs-number">7</span>), (<span class="hljs-number">6</span>, <span class="hljs-number">3</span>)])<font></font>
print(true_polygon.intersection(predicted_polygon).area / true_polygon.union(predicted_polygon).area)<font></font>
<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">0.3333333333333333</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El seguimiento del proceso de capacitaci√≥n de los modelos se controla convenientemente utilizando Tensorboard, una herramienta de control m√©trica conveniente que le permite recibir datos en tiempo real sobre la calidad del modelo y compararlos con otros modelos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31c/a7a/b20/31ca7ab20d4583360b3058b59277bc10.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tensorboard proporciona datos sobre muchas m√©tricas diferentes. </font><font style="vertical-align: inherit;">Los m√°s interesantes para nosotros son:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val_mrcnn_bbox_loss: muestra qu√© tan bien el modelo ubica los objetos (es decir, impone un cuadro de l√≠mite);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val_mrcnn_mask_loss: muestra qu√© tan bien segmenta el modelo los objetos (es decir, impone una m√°scara).</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo de entrenamiento y validaci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante el entrenamiento, utilizamos la pr√°ctica est√°ndar de dividir aleatoriamente un conjunto de datos en 3 partes: entrenamiento, validaci√≥n y prueba. En el proceso de aprendizaje, la calidad del modelo se eval√∫a en una muestra de validaci√≥n y, una vez finalizada, pasa la prueba final sobre los datos de prueba que se cerraron en el proceso de aprendizaje.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hicimos nuestro primer inicio de entrenamiento en un peque√±o conjunto de fotos de verano y, al decidir comprobar qu√© tan bueno ser√° nuestro modelo en invierno, se esperaba un resultado decepcionante. </font><font style="vertical-align: inherit;">La opci√≥n de usar diferentes modelos para diferentes estaciones, por supuesto, es una excelente manera de salir de la situaci√≥n, pero implicar√≠a una serie de inconvenientes, por lo que decidimos intentar que el modelo sea universal. </font><font style="vertical-align: inherit;">Al experimentar con diferentes configuraciones de las capas, y tambi√©n al cerrar el peso de las capas individuales de los cambios de peso, encontramos la estrategia √≥ptima para entrenar el modelo al aplicar alternativamente im√°genes de verano e invierno a la entrada.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crear un servicio en segundo plano para el reconocimiento</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora que tenemos un modelo funcional, podemos hacer un servicio API en segundo plano a partir de un script de reconocimiento que toma una imagen como entrada y genera json con pol√≠gonos de techo encontrados en la salida. </font><font style="vertical-align: inherit;">Esto no afecta directamente la soluci√≥n del problema, pero puede ser √∫til para alguien.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu usa systemd, y se dar√° un ejemplo espec√≠ficamente para este sistema. </font><font style="vertical-align: inherit;">El c√≥digo del servicio en s√≠ se puede ver </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Las unidades de usuario se encuentran en el directorio / etc / systemd / system, donde crearemos nuestro archivo de servicio. </font><font style="vertical-align: inherit;">
Edite el archivo:</font></font><br>
<br>
<code>cd /etc/systemd/system<br>
<br>
sudo touch my_srv.service</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">sudo vim my_srv.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La unidad systemd consta de tres secciones:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Unidad]: describe el orden y la condici√≥n del inicio (por ejemplo, puede indicarle al proceso que espere el inicio de un determinado servicio y solo luego lo inicie usted mismo);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Servicio]: describe los par√°metros de inicio;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Instalar]: describe el comportamiento del servicio al agregarlo al inicio.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, nuestro archivo se ver√° as√≠:</font></font><br>
<br>
<pre><code class="bash hljs">[Unit]<font></font>
Description=my_test_unit<font></font>
<font></font>
[Service]<font></font>
WorkingDirectory=/home/user/test_project<font></font>
User=root<font></font>
ExecStart=/home/user/test_project/venv/bin/python3 /home/user/test_project/script.py<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora vuelva a cargar la configuraci√≥n systemd y ejecute nuestro servicio:</font></font><br>
<br>
<pre><code class="bash hljs">sudo systemctl daemon-reload<font></font>
sudo systemctl start my_srv.service<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un ejemplo simple de un proceso en segundo plano, systemd admite muchos par√°metros diferentes que le permiten configurar de manera flexible el comportamiento del servicio, pero no se requiere nada m√°s complicado para nuestra tarea.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recomendaciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El principal resultado del proyecto fue la capacidad de detectar autom√°ticamente inconsistencias en el desarrollo real y la informaci√≥n contenida en los datos catastrales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado de la evaluaci√≥n de la precisi√≥n del modelo en los datos de prueba, se obtuvieron los siguientes valores: el n√∫mero de cubiertas encontradas - 91%, la precisi√≥n de los pol√≠gonos del contorno de la cubierta - 94%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fue posible lograr una calidad aceptable de los modelos en vuelos de verano e invierno, pero la calidad de reconocimiento puede disminuir en las im√°genes inmediatamente despu√©s de una nevada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, incluso la √ìpera de Sydney no se escapar√° de los ojos de nuestra modelo.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zs/c1/yl/zsc1yl0dgkkhjahgjk3vssn8swc.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Planeamos poner este servicio con un modelo entrenado en nuestro demostand. </font><font style="vertical-align: inherit;">Si est√° interesado en probar el servicio en sus propias fotos, env√≠e las solicitudes a ai@norbit.ru.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es500728/index.html">Kubernetes: c√≥digo abierto vs vendedor</a></li>
<li><a href="../es500732/index.html">Inteligencia artificial y la crisis de las teor√≠as de la conciencia.</a></li>
<li><a href="../es500734/index.html"># GitLab 12.10 lanzado con gesti√≥n de requisitos y escalado autom√°tico de CI en AWS Fargate</a></li>
<li><a href="../es500744/index.html">"Para escuchar mejor que t√∫, mi orador": c√≥mo transmitir mejor desde casa</a></li>
<li><a href="../es500746/index.html">Estante de boxeo para SMD y otras cosas peque√±as</a></li>
<li><a href="../es500754/index.html">C√≥mo convertirte en millonario en 30 a√±os, tumbado en el sof√°</a></li>
<li><a href="../es500756/index.html">Remoto Todo Poder. ¬øC√≥mo funciona la transmisi√≥n en l√≠nea en las conferencias de JUG Ru Group?</a></li>
<li><a href="../es500758/index.html">Tendencias clave en el mercado de ciberseguridad y seguridad de la informaci√≥n 2020-2021 versus pron√≥stico 2019-2020</a></li>
<li><a href="../es500760/index.html">C√≥mo matar zombies de manera m√°s eficiente con ZeroTier</a></li>
<li><a href="../es500764/index.html">Dibuja un discurso: Software boca autom√°tica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>