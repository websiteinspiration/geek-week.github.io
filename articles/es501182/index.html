<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🉐 👍🏿 👩🏿‍🤝‍👩🏼 oVirt en 2 horas. Parte 2. Instalación del administrador y los hosts 😠 😾 🔟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artículo es el siguiente de una serie sobre oVirt, que comienza aquí .
 
 Artículos
 

1. Introducción
2. Instalación del administrador (ovirt-en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>oVirt en 2 horas. Parte 2. Instalación del administrador y los hosts</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501182/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este artículo es el siguiente de una serie sobre oVirt, que comienza </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artículos</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducción</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalación del administrador (ovirt-engine) e hipervisores (hosts) - Estamos aquí</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajustes adicionales</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Operaciones básicas</font></font></a></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, consideraremos los problemas de la instalación inicial de los componentes ovirt-engine y ovirt-host.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siempre puede ver los procesos de instalación en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con más detalle </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenido</font></font></h2><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar ovirt-engine</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar ovirt-host</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar un nodo a oVirtN</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de interfaz de red</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de FC</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar FCoE</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almacenamiento de imagen ISO</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primera VM</font></font></a></li>
</ol><br>
<a name="setup-engine"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar ovirt-engine</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para Engine, los requisitos mínimos son 2 núcleos / 4 GiB de RAM / 25 GiB de almacenamiento. Recomendado: a partir de 4 núcleos / 16 GiB de RAM / 50 GiB de almacenamiento. Utilizamos la opción Administrador independiente cuando el motor se ejecuta en una máquina física o virtual dedicada fuera de un clúster administrado. Para nuestra instalación, tomemos una máquina virtual, por ejemplo, en un ESXi </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> separado </font><font style="vertical-align: inherit;">. Es conveniente utilizar herramientas de automatización de implementación o clonación a partir de una plantilla preparada previamente o instalar kickstart. </font></font><br>
<br>
<i><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nota: para un sistema de producción, esta es una mala idea porque el gerente trabaja sin reservas y se convierte en un cuello de botella. En este caso, es mejor considerar la opción Motor autohospedado.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Si es necesario, el procedimiento para convertir Standalone a Self Hosted se describe en detalle en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentación</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En particular, el host debe recibir el comando de reinstalación con soporte para el motor alojado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale CentOS 7 en la configuración mínima en la VM, luego actualice y reinicie el sistema:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum update -y &amp;&amp; sudo reboot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para una máquina virtual, es útil instalar un agente invitado:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install open-vm-tools</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para hosts VMware ESXi o para oVirt:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install ovirt-guest-agent</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conectamos el repositorio e instalamos el administrador:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install https://resources.ovirt.org/pub/yum-repo/ovirt-release43.rpm<font></font>
$ sudo yum install ovirt-engine<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuración básica:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-setup</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la mayoría de los casos, la configuración predeterminada seleccionada es suficiente; para su uso automático, puede iniciar la configuración con la tecla:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo engine-setup --accept-defaults</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora podemos conectarnos a nuestro nuevo motor en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ovirt.lab.example.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Todavía está vacío aquí, así que pasemos a instalar hipervisores.</font></font><br>
<a name="setup-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar ovirt-host</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale CentOS 7 en la configuración mínima en el host físico, luego conecte el repositorio, actualice y reinicie el sistema:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo yum install https://resources.ovirt.org/pub/yum-repo/ovirt-release43.rpm<font></font>
$ sudo yum update -y &amp;&amp; sudo reboot<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: es conveniente usar herramientas de automatización de implementación o instalación kickstart para la instalación.</font></font></i><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ejemplo de archivo Kickstart</font></font></b>
                        <div class="spoiler_text">! <b>   !</b>  !<br>
<br>
<pre><code class="plaintext hljs"># System authorization information<font></font>
auth --enableshadow --passalgo=sha512<font></font>
# Use CDROM installation media<font></font>
cdrom<font></font>
# Use graphical install<font></font>
graphical<font></font>
# Run the Setup Agent on first boot<font></font>
firstboot --enable<font></font>
ignoredisk --only-use=sda<font></font>
# Keyboard layouts<font></font>
keyboard --vckeymap=us --xlayouts='us','ru' --switch='grp:alt_shift_toggle'<font></font>
# System language<font></font>
lang ru_RU.UTF-8<font></font>
<font></font>
# Network information<font></font>
network  --bootproto=dhcp --device=ens192 --ipv6=auto --activate<font></font>
network  --hostname=kvm01.lab.example.com<font></font>
<font></font>
# Root password 'monteV1DE0'<font></font>
rootpw --iscrypted $6$6oPcf0GW9VdmJe5w$6WBucrUPRdCAP.aBVnUfvaEu9ozkXq9M1TXiwOm41Y58DEerG8b3Ulme2YtxAgNHr6DGIJ02eFgVuEmYsOo7./<font></font>
# User password 'metroP0!is'<font></font>
user --name=mgmt --groups=wheel --iscrypted --password=$6$883g2lyXdkDLbKYR$B3yWx1aQZmYYi.aO10W2Bvw0Jpkl1upzgjhZr6lmITTrGaPupa5iC3kZAOvwDonZ/6ogNJe/59GN5U8Okp.qx.<font></font>
# System services<font></font>
services --enabled="chronyd"<font></font>
# System timezone<font></font>
timezone Europe/Moscow --isUtc<font></font>
# System bootloader configuration<font></font>
bootloader --append=" crashkernel=auto" --location=mbr --boot-drive=sda<font></font>
# Partition clearing information<font></font>
clearpart --all<font></font>
# Disk partitioning information<font></font>
part /boot --fstype xfs --size=1024 --ondisk=sda  --label=boot<font></font>
part pv.01 --size=45056 --grow<font></font>
volgroup HostVG pv.01 --reserved-percent=20<font></font>
logvol swap --vgname=HostVG --name=lv_swap --fstype=swap --recommended<font></font>
logvol none --vgname=HostVG --name=HostPool --thinpool --size=40960 --grow<font></font>
logvol / --vgname=HostVG --name=lv_root --thin --fstype=ext4 --label="root" --poolname=HostPool --fsoptions="defaults,discard" --size=6144 --grow<font></font>
logvol /var --vgname=HostVG --name=lv_var --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=16536<font></font>
logvol /var/crash --vgname=HostVG --name=lv_var_crash --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=10240<font></font>
logvol /var/log --vgname=HostVG --name=lv_var_log --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=8192<font></font>
logvol /var/log/audit --vgname=HostVG --name=lv_var_audit --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=2048<font></font>
logvol /home --vgname=HostVG --name=lv_home --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=1024<font></font>
logvol /tmp --vgname=HostVG --name=lv_tmp --thin --fstype=ext4 --poolname=HostPool --fsoptions="defaults,discard" --size=1024<font></font>
<font></font>
%packages<font></font>
@^minimal<font></font>
@core<font></font>
chrony<font></font>
kexec-tools<font></font>
<font></font>
%end<font></font>
<font></font>
%addon com_redhat_kdump --enable --reserve-mb='auto'<font></font>
<font></font>
%end<font></font>
<font></font>
%anaconda<font></font>
pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty<font></font>
pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok<font></font>
pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty<font></font>
%end<font></font>
# Reboot when the install is finished.<font></font>
reboot --eject<font></font>
</code></pre><br>
  , .,  <a href="" rel="nofollow">ftp.example.com/pub/labkvm.cfg</a>.           'Install CentOS 7',     ( Tab)    ( ,  )  <br>
<br>
<pre><code class="plaintext hljs">' inst.ks=ftp://ftp.example.com/pub/labkvm.cfg'</code></pre>.<br>
      /dev/sda,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a> (      lsblk).     kvm01.lab.example.com (     hostnamectl set-hostname kvm03.lab.example.com),  IP  — ,   — ,    .<br>
<br>
  root: monteV1DE0,   mgmt: metroP0!is.<br>
<b>!    !  !</b><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repita (o ejecute en paralelo) en todos los hosts. </font><font style="vertical-align: inherit;">Desde encender el servidor "vacío" hasta el estado final, teniendo en cuenta 2 descargas largas, se tarda unos 20 minutos.</font></font><br>
<a name="add-host"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar un nodo a oVirt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es muy simple: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calcular → Hosts → Nuevo → ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el asistente, los campos obligatorios son Nombre (nombre para mostrar, por ejemplo, kvm03), Nombre de host (FQDN, por ejemplo kvm03.lab.example.com) y la sección Autenticación - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usuario raíz (invariable)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - contraseña o clave pública SSH. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Después de hacer clic en el botón </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aceptar</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">recibirá el mensaje </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"No ha configurado la administración de energía para este host. ¿Estás seguro de que quieres continuar? "</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Esto es normal: consideraremos la administración de energía más tarde, después de una conexión de host exitosa. Sin embargo, si las máquinas en las que están instalados los hosts no son compatibles con la administración (IPMI, iLO, DRAC, etc.), recomiendo desactivarlo: Calcular → Clústeres → Predeterminado → Editar → Cercado Ploicy → Habilitar cercado, desactívelo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el repositorio de oVirt no estaba conectado al host, la instalación fallará, pero está bien, debe agregarlo, luego haga clic en Instalar -&gt; Reinstalar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La conexión del host no toma más de 5-10 minutos.</font></font><br>
<a name="host-nic"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de interfaz de red</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A medida que creamos un sistema tolerante a fallas, la conexión de red también debe proporcionar una conexión redundante, que se realiza en la pestaña Compute → Hosts → </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HOST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> → Interfaces de red - Configurar redes de host. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dependiendo de las capacidades de su equipo de red y enfoques de arquitectura, las opciones son posibles. Es mejor conectarse a la pila de conmutadores de la parte superior del bastidor para que, cuando uno falla, la disponibilidad de la red no se interrumpa. Considere el ejemplo de un canal LACP agregado. Para configurar el canal agregado, "tome" el segundo adaptador no utilizado con el mouse y "llévelo" al primero. Se abre la ventana </font><b><font style="vertical-align: inherit;">Crear nuevo enlace</font></b><font style="vertical-align: inherit;"> .</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">donde LACP (Modo 4, Agregación de enlace dinámico, 802.3ad) está seleccionado de forma predeterminada. </font><font style="vertical-align: inherit;">En el lado del interruptor, se realiza la configuración normal del grupo LACP. </font><font style="vertical-align: inherit;">Si no es posible construir una pila de conmutadores, puede usar el modo Active-Backup (Modo 1). </font><font style="vertical-align: inherit;">Consideraremos la configuración de VLAN en el próximo artículo y, con más detalle, las recomendaciones sobre la configuración de red en el documento de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guía de planificación y requisitos previos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="host-fc"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuración de FC</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fibre Channel (FC) es compatible de fábrica, su uso es sencillo. </font><font style="vertical-align: inherit;">No configuraremos la red de almacenamiento, incluida la configuración de los sistemas de almacenamiento y la zonificación de los conmutadores de tela como parte de la configuración de oVirt.</font></font><br>
<a name="ovirt-fcoe"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar FCoE</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FCoE, en mi opinión, no se usaba ampliamente en redes de almacenamiento, pero a menudo se usa en servidores como la "última milla", por ejemplo, en HPE Virtual Connect.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La configuración de FCoE requiere pasos simples adicionales.</font></font></b>
                        <div class="spoiler_text"><h4>Setup FCoE Engine</h4><br>
   Red Hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">B.3. How to Set Up Red Hat Virtualization Manager to Use FCoE<br>
On the Manager</a>,         :<br>
<br>
<pre><code class="bash hljs">
$ sudo engine-config -s UserDefinedNetworkCustomProperties=<span class="hljs-string">'fcoe=^((enable|dcb|auto_vlan)=(yes|no),?)*$'</span><font></font>
$ sudo systemctl restart ovirt-engine.service<font></font>
</code></pre><br>
<h4>Setup Node FCoE</h4><br>
 oVirt-Host'   <br>
<br>
<pre><code class="bash hljs">$ sudo yum install vdsm-hook-fcoe</code></pre><br>
   FCoE,   Red Hat: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">25.5. Configuring a Fibre Channel over Ethernet Interface</a>.<br>
<br>
 Broadcom CNA   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">User Guide FCoE Configuration for Broadcom-Based Adapters</a>.<br>
<br>
,    (   minimal):<br>
<br>
<pre><code class="bash hljs">$ sudo yum install fcoe-utils lldpad</code></pre><br>
   ( ens3f2  ens3f3   CNA,    ):<br>
<br>
<pre><code class="bash hljs">$ sudo cp /etc/fcoe/cfg-ethx /etc/fcoe/cfg-ens3f2<font></font>
$ sudo cp /etc/fcoe/cfg-ethx /etc/fcoe/cfg-ens3f3<font></font>
$ sudo vim /etc/fcoe/cfg-ens3f2<font></font>
$ sudo vim /etc/fcoe/cfg-ens3f3<font></font>
</code></pre><br>
<b></b>:      DCB/DCBX,  DCB_REQUIRED     no.<br>
<br>
DCB_REQUIRED=«yes» → <b>#</b>DCB_REQUIRED=«yes»<br>
<br>
  ,  adminStatus    ,  ..   FCoE:<br>
<br>
<pre><code class="bash hljs">$ sudo lldptool <span class="hljs-built_in">set</span>-lldp -i ens3f0 adminStatus=disabled<font></font>
...<font></font>
$ sudo lldptool <span class="hljs-built_in">set</span>-lldp -i ens3f3 adminStatus=disabled
</code></pre><br>
    ,   LLDP:<br>
<br>
<pre><code class="bash hljs">$ sudo systemctl start lldpad<font></font>
$ sudo systemctl <span class="hljs-built_in">enable</span> lldpad
</code></pre><br>
  ,    DCB/DCBX,  DCB_REQUIRED     <b>no</b>      .<br>
<br>
<pre><code class="bash hljs">$ sudo dcbtool sc ens3f2 dcb on<font></font>
$ sudo dcbtool sc ens3f3 dcb on<font></font>
$ sudo dcbtool sc ens3f2 app:fcoe e:1<font></font>
$ sudo dcbtool sc ens3f3 app:fcoe e:1<font></font>
$ sudo ip link <span class="hljs-built_in">set</span> dev ens3f2 up<font></font>
$ sudo ip link <span class="hljs-built_in">set</span> dev ens3f3 up<font></font>
$ sudo systemctl start fcoe<font></font>
$ sudo systemctl <span class="hljs-built_in">enable</span> fcoe
</code></pre><br>
      :<br>
<br>
<pre><code class="bash hljs">$ sudo vim /etc/sysconfig/network-scripts/ifcfg-ens3f2<font></font>
$ sudo vim /etc/sysconfig/network-scripts/ifcfg-ens3f3<font></font>
</code></pre><br>
<pre><code class="plaintext hljs">ONBOOT=yes</code></pre><br>
  FCoE ,      .<br>
<br>
<pre><code class="bash hljs">$ sudo fcoeadm -i</code></pre><br>
  FCoE     FC.<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La siguiente es la configuración de los sistemas y redes de almacenamiento: zonificación, hosts SAN, creación y presentación de volúmenes / LUN, después de lo cual el almacenamiento se puede conectar a ovirt-hosts: Almacenamiento → Dominios → Nuevo dominio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Función de dominio dejamos Datos, Tipo de almacenamiento - Canal de fibra, Host - cualquiera, nombre - por ejemplo, storNN-volMM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seguramente su sistema de almacenamiento permite que la conexión no sea solo una reserva de rutas, sino también un equilibrio. </font><font style="vertical-align: inherit;">Muchos sistemas modernos son capaces de transmitir datos a lo largo de todas las rutas de manera igualmente óptima (ALUA activo / activo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para habilitar todas las rutas en un estado activo, necesita configurar multipassing, más sobre eso en los siguientes artículos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La configuración de NFS e iSCSI se realiza de manera similar.</font></font><br>
<a name="host-iso"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Almacenamiento de imagen ISO</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instalar el sistema operativo, necesitará sus archivos de instalación, a menudo disponibles en forma de imágenes ISO. </font><font style="vertical-align: inherit;">Puede usar la ruta incorporada, pero para trabajar con imágenes en oVirt se desarrolla un tipo especial de almacenamiento: ISO, que puede dirigirse a un servidor NFS. </font><font style="vertical-align: inherit;">
Agréguelo </font><font style="vertical-align: inherit;">: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Almacenamiento → Dominios → Nuevo dominio, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Función de dominio → ISO, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruta de exportación - por ejemplo, mynfs01.example.com:/exports/ovirt-iso (en el momento de la conexión, la carpeta debe estar vacía, el administrador debe poder escribir en ella), </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nombre, por ejemplo, mynfs01-iso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para almacenar imágenes, el administrador creará la estructura </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ exportaciones / ovirt-iso </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ &lt;algún UUID&gt; / images / 11111111-1111-1111-1111-111111111111 /</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si ya tiene imágenes ISO en nuestro servidor NFS, es conveniente vincularlas a esta carpeta en lugar de copiar archivos para ahorrar espacio.</font></font><br>
<a name="1stVM"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primera VM</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta etapa, ya puede crear la primera máquina virtual, instalar el sistema operativo y el software de la aplicación. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Calcular → Máquinas virtuales → Nuevo </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la nueva máquina, especifique un nombre (Nombre), cree un disco (Imágenes de instancia → Crear) y conecte la interfaz de red (Instale interfaces de red de VM seleccionando un perfil vNIC → elija el único ovirtmgmt de la lista hasta ahora). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el lado del cliente, necesita un navegador moderno y un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cliente SPICE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para interactuar con la consola. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera máquina se inició con éxito. </font><font style="vertical-align: inherit;">Sin embargo, para una operación más completa del sistema, se requieren varias configuraciones adicionales, que continuaremos en los siguientes artículos.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es501166/index.html">oVirt en 2 horas. Parte 1. Abra la plataforma de virtualización de conmutación por error</a></li>
<li><a href="../es501168/index.html">Los ordenanzas se salvan a sí mismos: ¿guardan, salvan, se queman?</a></li>
<li><a href="../es501172/index.html">Mi computadora Mikrosh: continúa la semana de nostalgia</a></li>
<li><a href="../es501178/index.html">Cómo ver porno afecta la productividad del trabajo y el estudio</a></li>
<li><a href="../es501180/index.html">[Post-pregunta] ¿Necesita un movimiento de TI para HECHOS sobre el coronavirus y los "efectos secundarios"</a></li>
<li><a href="../es501184/index.html">Cómo configurar Apollo para trabajar con GraphQL en Android</a></li>
<li><a href="../es501188/index.html">Cómo procesar imágenes satelitales con Sen2Cor</a></li>
<li><a href="../es501190/index.html">Cómo iniciar una startup, ingresar al mercado chino y obtener 15 millones de inversión</a></li>
<li><a href="../es501192/index.html">Los 5 mejores consejos para mejorar las habilidades blandas en inglés</a></li>
<li><a href="../es501194/index.html">A raíz de las partículas calientes. La cámara de Wilson</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>