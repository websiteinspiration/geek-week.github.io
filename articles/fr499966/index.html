<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤖 🦔 🎻 Mesurer l'UVA UVB 👨‍👦 👐🏿 👨🏼‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous aimons tous le soleil et bien sûr, nous connaissons les dangers du rayonnement ultraviolet pour la peau humaine. Évidemment, vous ne pouvez pas b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mesurer l'UVA UVB</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499966/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous aimons tous le soleil et bien sûr, nous connaissons les dangers du rayonnement ultraviolet pour la peau humaine. </font><font style="vertical-align: inherit;">Évidemment, vous ne pouvez pas bronzer longtemps sur la plage. </font><font style="vertical-align: inherit;">Mais ce n’est pas du tout évident, est-il possible de marcher sous le T-shirt sous le soleil, et de nager, de marcher dans les montagnes? </font><font style="vertical-align: inherit;">Après une autre «brûlure» du soleil dans les montagnes de Krasnaya Polyana, la question s'est posée - comment mesurer l'indice instantané du rayonnement ultraviolet et savoir quand il est temps de se cacher à l'ombre. </font><font style="vertical-align: inherit;">En conséquence, ce petit appareil est né - un capteur de rayonnement UV avec un certain nombre de fonctions supplémentaires.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lp/o8/0g/lpo80gvoszy35k9hzmltwzls640.png"></div><a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que doit pouvoir l'appareil</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fonction principale est de mesurer l'indice de rayonnement UV. </font><font style="vertical-align: inherit;">De plus, je voulais mesurer la température de l'air et la température de l'eau, avec une précision d'au moins 0,5 degrés (en particulier lorsque nous nous baignions dans une piscine d'eau glacée et regardions un thermomètre chinois, qui nageait à - 28 degrés, et n'était pas là). </font><font style="vertical-align: inherit;">Et bien sûr, la puissance de la batterie.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Composants principaux: VEML6075 + MCP3421 + STM8</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il n'y a pas beaucoup de capteurs pour mesurer l'indice UV. </font><font style="vertical-align: inherit;">Une sonde UV couramment utilisée est un phototransistor. </font><font style="vertical-align: inherit;">Mais il s'est avéré assez difficile à calibrer. </font><font style="vertical-align: inherit;">Le choix s'est porté sur le capteur numérique - VEML6075. </font><font style="vertical-align: inherit;">Il s'est avéré être très bon. </font><font style="vertical-align: inherit;">Le seul point négatif est qu'il est difficile d'acheter, la livraison a dû attendre environ un mois via les canaux officiels - "Le cinquième élément" (la Chine ne l'a pas considéré - il est désagréable de deviner la qualité dans un appareil unique). </font><font style="vertical-align: inherit;">Avantages du capteur:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calibrage facile à la maison</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">réponse cosinus de la surface du capteur - prise en compte de l'incidence des rayons</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lectures d'index précises dans deux plages - UVA UVB</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faible consommation</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Communication I2C - capteur entièrement numérique</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au départ, la taille du capteur était effrayante 2x2 mm, il n'y avait pas de pistolet à air chaud, je pensais qu'il serait difficile de souder une telle bagatelle avec un fer à souder ordinaire - mais cela s'est bien passé.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2g/rf/34/2grf34roitfitmtsmw0fbuwirkw.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxième question - la mesure de la température de l'eau, décidée avec un thermocouple. Pour une lecture précise des données de ce capteur, utilisez un ADC très précis, avec une source de tension de référence intégrée - MCP3421. Une résolution de 18 bits + une amplification de signal 8x pour un thermocouple de type K donne une résolution de température de 0,01 degré - plus que suffisant. Compte tenu de la nécessité de mesurer la température du composé, la précision était de l'ordre de 0,2 degré. Vérifié en mesurant l'eau bouillante et la glace. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant que microcontrôleur - l'option la plus simple et la moins chère - STM8S003F3. Tout est à bord - minuteries, I2C - nécessaire pour le capteur, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que l'appareil doit fonctionner au soleil, un écran LCD est utilisé comme indicateur. Je voulais de la compacité - j'ai choisi celle-ci:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hq/xp/mm/hqxpmmnlgkhbuyw75ngmqkkemag.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec la direction a dû tourmenter. </font><font style="vertical-align: inherit;">Le multiplexage des broches LCD sur un microcontrôleur conventionnel est toujours cette tâche, mais en général, tout s'est bien passé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le boîtier a choisi un petit modèle compact de la société Sanhe modèle "20-31". </font><font style="vertical-align: inherit;">Taille externe - 35x45x18 mm. </font><font style="vertical-align: inherit;">Tout est en forme - la carte, l'indicateur et la batterie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne donnerai pas le circuit et la carte, tout est sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Étalonnage du capteur UV</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir reçu les lectures du capteur - ils n'étaient pas très satisfaits, ils n'étaient pas similaires aux lectures de l '"hydro-centre". J'ai dû apprendre à calibrer correctement le capteur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de calculer correctement l'indice de rayonnement UV en fonction des lectures du capteur, il est nécessaire d'utiliser plusieurs constantes. Comment les calculer sans équipement spécial? Voici la formule complète de calcul de l'indice: Les </font></font><br>
<img src="https://habrastorage.org/webt/kn/l0/45/knl045dun5ltafhqfxurbbhbhhu.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
constantes k1 et k2 ne peuvent pas être calculées sans équipement. Mais ils sont nécessaires pour le calcul le plus précis, afin qu'ils puissent être pris comme une unité. Les constantes de sensibilité du capteur peuvent être extraites du tableau:</font></font><br>
<img src="https://habrastorage.org/webt/m-/qw/gz/m-qwgzn9s3emcnggn5mwlivxpum.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons besoin des constantes de la première ligne, car le capteur n'est pas recouvert de Téflon (nous n'avons pas pu acheter de Téflon optique, donc le capteur est enfin ouvert). UVAresp et UVBresp. Mais les constantes a, b, c, d doivent être calculées. Je l'ai fait avec un débogueur. Il est nécessaire d'obtenir les données uva, uvb, uvcomp1, uvcomp2 et de calculer les constantes dans Excel. Il n'est pas pratique de les afficher à l'écran - il y a trop peu de chiffres. C'est là que le débogueur est nécessaire. Définissez un point d'arrêt après avoir reçu les données et voir les valeurs calculées. Vous pouvez également utiliser la possibilité de déconnecter le lien ST de STM8 pendant le débogage et la connexion inverse. Dans ce cas, la session de débogage n'est pas interrompue! Une autre option consiste à utiliser STM8 STUDIO. Ce programme spécial vous permet d'obtenir des variables à tout moment.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour calculer les constantes sans équipement spécial, utilisons-le (cela est décrit dans la note d'application au capteur). La lumière du soleil dans son spectre a un rayonnement UV, un rayonnement IR et un rayonnement visible. Pour calculer l'intensité du rayonnement UV, il est nécessaire de soustraire les données excessives sur le rayonnement IR et le rayonnement visible. Pour ce faire, utilisez les données uvcomp1 (responsable du rayonnement visible) et uvcomp2 (responsable du rayonnement IR). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour calculer les constantes dans la formule utilisée, deux sources de lumière artificielle sont nécessaires: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 • une lampe à incandescence ordinaire - elle émet dans le spectre IR et le rayonnement visible, il n'y a pas de rayonnement UV </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 • Lampe LED - elle n'émet que dans le rayonnement visible, il n'y a pas de rayonnement UV et IR</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous commençons par la lampe LED. Puisqu'il n'y a pas de rayonnement UV, l'indice correspondant sera nul. </font></font><br>
<img src="https://habrastorage.org/webt/bq/z5/5w/bqz55wsnzk-wkzmntjp6uhyi-ou.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lampe LED n'a pas de rayonnement IR, donc UVcomp2 sera 0. Et dans ce cas, vous pouvez trouver les coefficients </font></font><br>
<img src="https://habrastorage.org/webt/ka/-7/vn/ka-7vnca8jipxdomakrheh53_ok.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant ces coefficients, il n'est pas difficile de trouver les coefficients b et d lorsque vous utilisez une lampe conventionnelle, lorsque UVcomp2 n'est pas égal à zéro. </font></font><br>
<img src="https://habrastorage.org/webt/hk/s-/0-/hks-0-eysabxkag42fy15lz8b2c.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant cette méthode simple, vous pouvez obtenir les constantes nécessaires. Un tel étalonnage doit être effectué le soir lorsqu'il n'y a pas de soleil et d'autres sources de lumière. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un capteur correctement calibré est très facile à vérifier. Par une journée ensoleillée, à midi, lorsqu'il n'y a pas de nuages ​​dans le ciel, vous devez mesurer l'intensité en pointant le capteur exactement vers le soleil. Les relevés doivent correspondre aux données transmises sur les sites météo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du bronzage, pour mesurer avec précision le rayonnement, le capteur doit être maintenu parallèle à la surface du corps. </font><font style="vertical-align: inherit;">Pour obtenir l'indice de courant maximum, le capteur doit être dirigé vers le soleil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le capteur a commencé à afficher les meilleurs résultats avec le temps moyen de moyenne des données (le capteur a la possibilité de définir ce paramètre - le temps pendant lequel il fait lui-même la moyenne des indicateurs) - 800 ms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de rendre les lectures absolument parfaites, nous avons également dû suivre les recommandations du développeur - peindre la carte en noir afin qu'elle ne réfléchisse pas et n'entoure pas le capteur avec un entonnoir noir.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utiliser l'expérience</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je dirai tout de suite à propos de la consommation - elle est extrêmement petite, elle est d'environ 2 mA lorsque tous les capteurs et le microcontrôleur fonctionnent. Avec une utilisation peu fréquente, la batterie dure environ 3 mois sur une seule charge. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je considère que la précision des lectures est très élevée. J'ai vérifié dans plusieurs régions (Moscou, Sotchi, Crimée) - les lectures coïncident à midi avec les sites météorologiques. Par conséquent, je pense que par temps nuageux, on peut lui faire confiance. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la fabrication du capteur, j'ai dû étudier ce qu'est le rayonnement UV et comment il est toujours nocif. Quels types de ce sont. Comment cela affecte-t-il la peau? Comment la position du soleil à l'horizon et si le rayonnement UV est nocif pour les yeux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Personnellement, j'ai vérifié tous les articles sur la «brûlure» sur moi-même. Le capteur s'est révélé excellent. Maintenant, après avoir vu l'index 13 sur le capteur dans les montagnes, je mets une chemise moulante et couvre toutes les parties du corps. Et le soir, lorsque l'indice 5 - je marche calmement et me prélasse sous les chauds rayons du soleil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai appris que par une journée ensoleillée, vous pouvez obtenir un bon coup de soleil à Moscou - l'indice atteint 9 à midi. Et aussi, qu'en nageant, le temps passé au soleil double. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour moi, cet appareil était très utile, je l'utilise toujours, toute la famille fait confiance au témoignage.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le moment, il a ajouté un capteur d'humidité très précis - HTS221. </font><font style="vertical-align: inherit;">Il fonctionne également sur I2C, donc je viens de créer une mini-carte et de la coller à l'intérieur. </font><font style="vertical-align: inherit;">Soudé avec un fil verni de 0,15 mm. </font><font style="vertical-align: inherit;">Donc, maintenant, il montre également l'humidité, beaucoup plus précisément que les compteurs chinois vendus sur le marché. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais écrire un peu sur le gros moins gras - selon les recommandations du développeur, il est préférable de fermer le capteur avec du Téflon optique pour isoler le capteur de la poussière et de la saleté. </font><font style="vertical-align: inherit;">Cela n'a pas fonctionné de trouver un tel téflon dans le rail, donc le capteur devient poussiéreux et parfois je l'essuie avec un coton-tige.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr499954/index.html">Storacle - stockage de fichiers décentralisé</a></li>
<li><a href="../fr499958/index.html">Créez une démo en ligne du 1er mai en un peu plus de trois heures</a></li>
<li><a href="../fr499960/index.html">JanusGraph graphique expérience SGBD pour résoudre le problème de trouver des chemins appropriés</a></li>
<li><a href="../fr499962/index.html">Quelques faits sur les classificateurs en cascade, qui sont rarement sérieusement pris en compte dans les articles scientifiques.</a></li>
<li><a href="../fr499964/index.html">La NASA a sélectionné trois entreprises qui participeront au programme de création d'un navire pour l'atterrissage sur la lune</a></li>
<li><a href="../fr499968/index.html">Liste des mitaps en ligne les plus persistants qui ont lieu même en mai</a></li>
<li><a href="../fr499970/index.html">Nous étudions le moteur VoIP Mediastreamer2. Partie 12</a></li>
<li><a href="../fr499972/index.html">Les événements en ligne de mai résument</a></li>
<li><a href="../fr499974/index.html">Jeux 3D sur Instagram Javascript, ou trajectoire de vol de saucisse</a></li>
<li><a href="../fr499978/index.html">Traduction du livre d'Andrew Un, Passion for Machine Learning, chapitres 36 et 37</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>