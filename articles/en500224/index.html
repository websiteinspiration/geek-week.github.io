<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶Ö ‚èèÔ∏è üêº DIY electronic nose üë®üèø‚Äçü§ù‚Äçüë®üèæ üßëüèæ‚Äçü§ù‚Äçüßëüèæ üññüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Working on previous projects with PM 2.5 particles[small, potentially inhalable particles, about 2.5 microns / approx. transl.] I noticed one inconven...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>DIY electronic nose</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500224/"><img src="https://habrastorage.org/getpro/habr/post_images/c18/906/c29/c18906c29912d98a77ea1ee23ae3e254.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Working on previous projects with PM </font><sub><font style="vertical-align: inherit;">2.5</font></sub><font style="vertical-align: inherit;"> particles</font></font><sub><font style="vertical-align: inherit;"></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[small, potentially inhalable particles, about 2.5 microns / approx. </font><font style="vertical-align: inherit;">transl.] I noticed one inconvenience - I could not recognize the sources of pollution emitting small particles. </font><font style="vertical-align: inherit;">Most of the data received on the earth and from satellites cannot tell you where the pollution comes from and how to get rid of it. </font><font style="vertical-align: inherit;">I decided to upgrade the Honeywell particle sensor. </font><font style="vertical-align: inherit;">He has his own fan, inlet and outlet openings, and I only had to think of a way to direct air flow from specific objects into it. </font><font style="vertical-align: inherit;">And before that, of course, I already made a 3D model of the dog‚Äôs nose and printed it on a 3D printer. </font><font style="vertical-align: inherit;">Therefore, I could only develop a case in the form of a pistol with a trigger, which would allow me to carefully examine the sources of particles that are killing for me.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/getpro/habr/post_images/faf/af7/b8f/fafaf7b8fdcae9f75f03dafd4fa24c4c.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/bb5/4ff/065/bb54ff065827d3ac8df81cca0b659254.jpg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 1: collecting materials</font></font></h2><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/fB5FgvBTKpk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ba3/bcb/7bb/ba3bcb7bbeffcf1b657cbf988cbc0217.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f4c/632/4d5/f4c6324d5adeba1a629213eb79f55dbe.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e57/165/d32/e57165d32253a3521d503acb525e179b.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I used the Honeywell HPMA Particle Sensor because it is a reliable and inexpensive device. As in previous projects, I use the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP32 microcontroller</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> with integrated wireless communications. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Particle Sensor: HONEYWELL HPMA115S0-TIR PM2.5 Particle Sensor laser pm2.5 air quality detection sensor module Super dust sensor PMS5003 - $ 18 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Wireless module: ESP32 MINI KIT Module WiFi + Bluetooth Internet Development Board D1 MINI Upgraded based ESP8266 Fully functional - $ 6 (AliExpress) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Power plate for the module: MH-ET LIVE Battery Shield for ESP32 MINI KIT D1 MINI single lithium battery charging &amp; boost - $ 1 (AliExpress) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. 18650 battery with wires - $ 4 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Display: IZOKEE 0.96 '' I </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C IIC 12864 128X64 Pixel OLED $ 4 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. </font><font style="vertical-align: inherit;">Power </font><font style="vertical-align: inherit;">Button: Rugged Metal On / Off Switch with Green LED Ring - 16mm Green On / Off $ 5 (Adafruit) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. 3D Printer (Ender 3) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8. Antrader KW4-3Z-3 Switch Micro Switch KW4 Limit $ 1.00 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
9. LED Ring Light: NeoPixel Ring - 12 x 5050 RGB LED with Integrated Drivers $ 7.50</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 2: design and 3D printing</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/31d/b5d/3ff/31db5d3ff0f7a7314ad5897c76678caf.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/ab1/0ea/737/ab10ea737847039c3c4961150bdd54a1.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I specially designed the case so that the openings coincided with the fans built into the HoneyWell sensor, the nostril openings directly went to the sensor input, and the blown air exited through several openings in the fairing of the case (sorry that sounds like a patent application). The large handle allows you to place a fairly voluminous battery and the rest of the electronics. The charging port is flush with the bottom of the handle. The Neopixel ring should highlight the top of the case. The design is made so that the upper part of the case can be printed with transparent PLA, then switch to gray PLA for the handle, and again switch to transparent plastic at the bottom of the handle so that the indicator LEDs are visible during charging. The switching mechanism is equipped with a hinge and is printed together with the housing, but must move freely.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All files are made with the standard settings in the Cura program for the Ender 3 printer. No backups were needed. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">content.instructables.com/ORIG/FYP/9343/K8CH414S/FYP9343K8CH414S.stl </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">content.instructables.com/ORIG/F93/2Q86/K8CH414T/F932Q86K8CH414T.stl </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">content.instructables.com/ORIG/FK2/96114/861UCH4K4KIUCH stl </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">content.instructables.com/ORIG/FT9/N577/K8CH414V/FT9N577K8CH414V.stl </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">content.instructables.com/ORIG/FUU/575L/K8CH414W/FUU575LK8CH414W.stl </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">content.instructables.com/ORIG/FSFS/BPDFUKW9B954KW9B9FK/KB854 .f3d</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 3: connect</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/14c/669/ee2/14c669ee2dfb8080d2228fb368f001ae.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/82b/544/46d/82b54446d8c5d35dd11dd00b4823d891.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c1f/c50/1e2/c1fc501e231af8ebeb4b43546832b56a.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/72b/ce2/df3/72bce2df32ec6aef4c748b27f822906d.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The connection diagram is practically the same as in my project of an </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analogue pollution meter for a bicycle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [based, in turn, on the project of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an amateur air pollution sensor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ], except that there is no servo motor and the output is used for the data line of the Neopixel ring. In this case, the power button supplies battery power only to the power shield for the wireless module. The 5 V on the power plate is controlled by a limit switch in the handle, which works like a trigger. It supplies power from the shield to the sensor, to the ESP32, and to the Neopixel ring at the same time. Display I </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C gets 3V with ESP32. </font><font style="vertical-align: inherit;">Most of the connection needs to be done before assembling the handle, passing the wires through the various holes. </font><font style="vertical-align: inherit;">Be sure to pre-check the diagram on the prototyping board!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 4: Build</font></font></h2><br>
<img src="https://habrastorage.org/getpro/habr/post_images/6fa/742/46e/6fa74246e0ac594a49b92d17740e8028.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/05b/106/893/05b106893be88756a4774e63c53c7cf4.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8e2/452/5ea/8e24525eaf6116da0ee33d931270a0cb.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/0f6/bd0/af1/0f6bd0af17ddacb93ae775192d2e831d.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/999/f6f/5e2/999f6f5e20d5dd064dec9f673cc5deb3.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/70c/811/cd1/70c811cd16346d86c0d1435082285ec0.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, the Neopixel ring adheres to the nose body so that it does not warp or break its strong connection to the main body. </font><font style="vertical-align: inherit;">Pass the three wires through the side hole of the main body and then into the handle. </font><font style="vertical-align: inherit;">The Neopixel ring should look into the translucent part of the case. </font><font style="vertical-align: inherit;">Then the air sensor is located in the case so that its inlet openings look towards the nostrils, and the fan blows back. </font><font style="vertical-align: inherit;">Pull the wires from the back to the middle of the handle - there they will need to be soldered to the ESP32. </font><font style="vertical-align: inherit;">Screen I </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C connects to the front, and its output wires pass through the slot into the handle and fit to the main board. The round visor then sticks over the screen. I use E6000 glue, but superglue will do. The nose with nostrils sticks to the front. The limit switch is connected to the wires and glued into place, like the main power button. The ESP board is inserted inside, after which the 18650 battery is installed. The power shield is glued to the bottom of the device so that the charging port is exactly opposite the hole. After checking the functionality, glue the bottom of the case to the case. The trigger is glued over the metal strip of the limit switch so that it is easily pushed to its lowest position. Caution - Do not glue the switch mechanism.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 5: program</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The software uses a serial port to download information from the sensor. </font><font style="vertical-align: inherit;">One of the problems with this sensor is that it does not use I </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C with libraries - that would be much easier. </font><font style="vertical-align: inherit;">No servomotor is used as the output as the draft with a bicycle tow and SSD1306 bus I </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C. Ring Neopixel controlled via Adafruit Neopixel Library library, and produces one of the three colors, slowly changing brightness, and designating the level Card PM </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in The nostrils. </font><font style="vertical-align: inherit;">If the level is less than 25, it flashes blue, if from 25 to 80 - green, if above 80 - red. </font><font style="vertical-align: inherit;">These levels are configured in the program code. </font><font style="vertical-align: inherit;">You can also change the fonts and screen size. </font><font style="vertical-align: inherit;">The sensor reads the information once per second.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">content.instructables.com/ORIG/FG5/LCS8/K8CH74GE/FG5LCS8K8CH74GE.ino</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 6: use</font></font></h2><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/qB9_xywU7jQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9b2/1ba/575/9b21ba575a67a144be5bfd54e476c30b.jpg"><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/007/c52/48b/007c5248b75d677a3f775f49a6673933.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the midst of quarantine with this device, you don‚Äôt particularly take a walk on the street, so I took a walk around the house and took video clips for YouTube to understand how bad things can be at home. </font><font style="vertical-align: inherit;">So I would immediately go to the exhaust pipe of the nearest diesel pickup, or stand on the leeward side of the place where the coffee is roasted - yes, yes, I know how much you harm my lungs!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The device boots up in 4 seconds after pressing the button. </font><font style="vertical-align: inherit;">First, it shows an erroneously high value, and then in 5 seconds it stabilizes the indicators. </font><font style="vertical-align: inherit;">Most of the samples coincided with the readings from the National Sampler project, located half a block from me. </font><font style="vertical-align: inherit;">The usual shocking indicators of the toaster I posted at the beginning of the article. </font><font style="vertical-align: inherit;">Another video shows the result of measuring granola. </font><font style="vertical-align: inherit;">She exuded small particles with a concentration of 50 ppm for more than an hour after I took it out of the oven. </font><font style="vertical-align: inherit;">It happens that the "nostrils" for some time hold the smell and show a high level of particle content, so before you can quickly re-read them, you can blow them first. </font><font style="vertical-align: inherit;">Two months ago, PM </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> particles </font><font style="vertical-align: inherit;">were a serious problem, and now no one remembers them. </font><font style="vertical-align: inherit;">Not to mention global warming.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500214/index.html">List of Famous SMR Drives</a></li>
<li><a href="../en500216/index.html">Forget the Anthropocene: we have entered the synthetic age</a></li>
<li><a href="../en500218/index.html">Epidemiological model Covid-19</a></li>
<li><a href="../en500220/index.html">Vinyl records and cassettes right in your Android</a></li>
<li><a href="../en500222/index.html">Cordless Phones from British WWI Biplanes</a></li>
<li><a href="../en500228/index.html">How Gatsby circumvented Next.js</a></li>
<li><a href="../en500232/index.html">Learning Akka.NET: Server of a simple online game</a></li>
<li><a href="../en500234/index.html">Why I made a personal expense accounting project for Git + JS</a></li>
<li><a href="../en500238/index.html">Tell me what's bothering you</a></li>
<li><a href="../en500244/index.html">Outside the array</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>