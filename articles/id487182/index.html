<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧚🏻 🚣 🗺️ Cara membuat API di aplikasi Android apa pun. Contoh WhatsApp 👨🏽‍🌾 🚼 👨🏽‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salam pembuka! Tugas saya telah diambil: perlu untuk mengintegrasikan messenger ke dalam sistem CRM, jika tidak sulit untuk menganalisis pekerjaan man...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Cara membuat API di aplikasi Android apa pun. Contoh WhatsApp</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487182/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salam pembuka! </font><font style="vertical-align: inherit;">Tugas saya telah diambil: perlu untuk mengintegrasikan messenger ke dalam sistem CRM, jika tidak sulit untuk menganalisis pekerjaan manajer ketika mereka berkomunikasi dengan klien menggunakan satu telepon "bekerja" yang umum. </font><font style="vertical-align: inherit;">Dan hal pertama yang harus dilakukan adalah menghubungkan WhatsApp, sebagai salah satu messenger instan paling populer untuk audiens target kami.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analisis situasi ...</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yang tampaknya diperlukan hanyalah mengirim dan menerima pesan. </font><font style="vertical-align: inherit;">Dan begitu banyak jebakan ...</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. API Resmi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada API resmi dalam rilis itu. </font><font style="vertical-align: inherit;">Tetapi Facebook berhasil mengirim tautan ke formulir untuk menghubungkan API resmi, yang sedang diuji.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Layanan pihak ketiga. </font><font style="vertical-align: inherit;">Koneksi melalui WhatsApp WEB</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menganggap opsi metode "abu-abu", penggunaan layanan tidak resmi yang mengirim pesan melalui antarmuka WEB, terhubung dengan memindai kode QR. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi ini adalah ketergantungan pada API orang lain, setiap saat semuanya bisa jatuh, dan saya tidak ingin mentransfer nomor klien ke layanan orang lain. </font><font style="vertical-align: inherit;">Dan menulis di bawah API penulis lain, dan bahkan menulis ulang ketika Anda pindah ke layanan lain, juga menyenangkan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yah, Anda juga perlu menghidupkan telepon (meskipun beberapa layanan dengan biaya tambahan menyelesaikan masalah ini :)</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Mode manual</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tanam seseorang, biarkan salin dan tempel pesan ke pelanggan </font><font style="vertical-align: inherit;">Bercanda sebagai lelucon, tetapi dari ide ini lahirlah solusi!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keputusan</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengiriman pesan</font></font></h4><br>
<img src="https://habrastorage.org/webt/so/gq/rf/sogqrfasclcuugve3ytmcgzpmuu.jpeg" alt="gambar" align="right" width="200"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ada program semacam itu untuk tindakan otomatisasi untuk Android, yang disebut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tasker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , salah satu dari program semacam itu. </font><font style="vertical-align: inherit;">Tapi saya tidak memahaminya pertama kali ... Saya mencari analog, saya menemukan program </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Automagic</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Di dalamnya, peristiwa, tindakan dan cabang digambar sebagai diagram blok.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Offtop</font></font></b><div class="spoiler_text">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">HiAsm</a>,        .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan di dalamnya saya menemukan solusi, kita tidak perlu hak root. </font><font style="vertical-align: inherit;">Ternyata menggunakan metode poke ilmiah untuk menggambar skrip pengiriman pesan, maka saya akan memanggil aliran, sehingga setiap algoritma yang ditarik individu dipanggil dalam program ini. </font><font style="vertical-align: inherit;">Dan sekarang kita akan menganalisis karyanya:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Screenshot aliran pesan WhatsApp</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/so/gq/rf/sogqrfasclcuugve3ytmcgzpmuu.jpeg" alt="image"><br>
</div></div><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setiap 5 detik, suatu peristiwa dihasilkan oleh penghitung waktu berkala dan dikirimkan ke blok berikutnya.</font></font></li>
<li> HTTP Request   ,      ,   ?    PHP.</li>
<li>   JSON.</li>
<li>      ,    ,  .</li>
<li>,    ,  ,  ,    .    ,     ,  ,   , :</li>
<li>    ,            WhatsApp'</li>
<li> .  Control UI.            (   ),          .<br>
<br>
<div class="spoiler"><b class="spoiler_title">   ,  ,   </b><div class="spoiler_text"><pre><code class="plaintext hljs">sleep(2000);  // 2    <font></font>
 <font></font>
sle = 200;<font></font>
ch_c = 0;<font></font>
ch = false;<font></font>
is_sended = false;<font></font>
 <font></font>
sleep(sle);<font></font>
ch = existsElementById("com.whatsapp:id/entry"); // ,      <font></font>
sleep(sle);<font></font>
if (ch == false) {<font></font>
  ch = existsElementById("com.whatsapp:id/entry"); //  <font></font>
  ch_c = ch_c + 1;<font></font>
  sleep(1500);<font></font>
}<font></font>
<font></font>
if (ch == false) {<font></font>
  ch = existsElementById("com.whatsapp:id/entry"); <font></font>
  ch_c = ch_c + 1;<font></font>
  sleep(5500);<font></font>
}<font></font>
<font></font>
ch = existsElementById("com.whatsapp:id/entry");<font></font>
sleep(sle);<font></font>
setText2ById("com.whatsapp:id/entry",text); //  <font></font>
sleep(sle);<font></font>
<font></font>
clickById("com.whatsapp:id/send");  //   <font></font>
sleep(sle);<font></font>
back();<font></font>
sleep(sle);<font></font>
back();<font></font>
status = 2;<font></font>
<font></font>
if(ch == true) {  //   , ,    <font></font>
  is_sended = true;<font></font>
  status = 1;<font></font>
}<font></font>
</code></pre><br>
</div></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengirim hasil pengiriman pesan ke server.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami kembali ke layar beranda.</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima pesan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menerima pesan jauh lebih mudah. </font><font style="vertical-align: inherit;">Kami menempatkan acara pada notifikasi dari kurir. </font><font style="vertical-align: inherit;">Segera setelah pemberitahuan tiba, tandai sudah dibaca, dan kirimkan ke server apa adanya. </font><font style="vertical-align: inherit;">Itu sudah mem-parsing penerima dan teks.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuplikan layar dari algoritma penerimaan pesan</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/bx/in/yk/bxinykvye4lswsi-ytvurajxkra.jpeg"><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pro, kontra, penyempurnaan, dan rencana</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algoritme melakukan fungsi utama mengirim pesan dengan sempurna. Karena antarmuka WEB tidak digunakan, mengambil mandi dari kurir kurang berisiko, seperti yang menurut saya. Saya menyewa server virtual yang lemah, menginstal Android di sana dan mentransfer semuanya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibutuhkan ~ 5 detik untuk mengirim satu pesan ke kontak baru. Untuk memeriksa pengiriman dan membaca pesan, saya mengembangkan aliran terpisah, tetapi dalam bentuk konsep dan kadang-kadang tidak berfungsi. Karena itu, tentang dia nanti. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat ini, fungsi menerima pesan media (foto, audio, lampiran) tidak diterapkan, tetapi ini dapat diunduh dari WhatsApp menggunakan tombol pesan berbagi di masa mendatang.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa saat kemudian saya ingin menulis trunk SIP di atas mesin virtual tempat messenger berjalan, di mana dimungkinkan untuk menelepon melalui WhatsApp melalui SIP ^. ^ Yang dapat menghemat biaya komunikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya juga ingin mengambil tangkapan layar avatar dan mengirimkannya ke server untuk melampirkan thumbnail ke kontak di sistem CRM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, secara umum, yang paling menarik: Metode pembungkus dalam API ini cocok untuk hampir semua aplikasi untuk Android :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya awalnya dikembangkan dan diluncurkan pada Android 9, xiaomi mi 9 se, root tidak benar.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id487182/">https://habr.com/ru/post/id487182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id487168/index.html">Tales Interface Kakek Toxic "Sampah Instrumental" (s1 e2)</a></li>
<li><a href="../id487172/index.html">Buka kursus "Deep Learning in NLP" dari pencipta DeepPavlov berdasarkan kursus cs224n</a></li>
<li><a href="../id487174/index.html">Naikkan instance Webogram Anda dengan proxy melalui nginx</a></li>
<li><a href="../id487176/index.html">Tahan COVID-19. Semua tentang penyaringan udara pandemi</a></li>
<li><a href="../id487178/index.html">Riset pasar timlid di Rusia</a></li>
<li><a href="../id487184/index.html">Bagaimana saya membawa TV "pintar" Samsung ke pikiran - ulasan panjang</a></li>
<li><a href="../id487186/index.html">Saya menerbitkan kode sumber aplikasi web pertama saya</a></li>
<li><a href="../id487188/index.html">TTY adalah terminal yang tidak untuk digunakan di rumah</a></li>
<li><a href="../id487196/index.html">OS Sivelkiriya: formulir misi dan peluncuran</a></li>
<li><a href="../id487198/index.html">Perhatian! Kesadaran Homo. saya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>