<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔫 🐄 ♉️ Pourquoi JavaScript dévore le HTML: exemples de code 🥂 🖥️ 👩🏿‍🤝‍👨🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le développement Web est en constante évolution. Récemment, une tendance est devenue populaire, ce qui contredit fondamentalement l'idée généralement ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pourquoi JavaScript dévore le HTML: exemples de code</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/492754/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le développement Web est en constante évolution. Récemment, une tendance est devenue populaire, ce qui contredit fondamentalement l'idée généralement acceptée de la façon de développer des applications Web. Certains ont de grands espoirs pour lui, tandis que d'autres sont déçus. Chacun a ses propres raisons, ce qui en un mot est difficile à expliquer.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oo/4k/1f/oo4k1fjtwxiesojbv9pwre0n2no.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code de page Web se compose traditionnellement de trois sections, chacune remplissant ses fonctions: le code HTML définit la structure et la sémantique, le code CSS détermine l'apparence et le code JavaScript détermine son comportement. Dans les équipes impliquant des concepteurs, des développeurs HTML / CSS et des développeurs JavaScript, cette séparation est naturelle: les concepteurs définissent des éléments visuels et une interface utilisateur, les développeurs HTML et CSS placent ces éléments visuels sur une page dans un navigateur, et les développeurs JavaScript ajoutent une interaction utilisateur à liez tout ensemble et «faites-le fonctionner». Chacun peut travailler sur ses tâches sans s'immiscer dans le code des deux autres catégories de développeurs. Mais tout cela est vrai pour le soi-disant «ancien style».</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces dernières années, les développeurs JavaScript ont commencé à déterminer la structure de la page en JavaScript et non en HTML (par exemple, en utilisant le framework </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> js </font><font style="vertical-align: inherit;">), ce qui contribue à simplifier la création et la maintenance du code d'interaction utilisateur. Sans cadres js, développer des sites Web modernes est beaucoup plus difficile. Bien sûr, lorsque vous dites à quelqu'un que le code HTML écrit par lui doit être divisé en morceaux et mélangé avec JavaScript, qu'il connaît très bien, cela (pour des raisons évidentes) peut être perçu avec hostilité. Au minimum, l'interlocuteur demandera pourquoi nous en avons besoin et comment nous en bénéficierons.</font></font><br>
<cut></cut><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tant que développeur JavaScript dans une équipe interfonctionnelle, cette question me est parfois posée, et il m'est souvent difficile d'y répondre. </font><font style="vertical-align: inherit;">Tous les documents que j'ai trouvés sur ce sujet sont écrits pour un public qui connaît déjà JavaScript. </font><font style="vertical-align: inherit;">Et ce n'est pas très bon pour ceux qui se spécialisent exclusivement en HTML et CSS. </font><font style="vertical-align: inherit;">Mais le modèle HTML-in-JS (ou quelque chose d'autre qui offre les mêmes avantages) est susceptible d'être demandé pendant un certain temps, donc je pense que c'est une chose importante que toutes les personnes impliquées dans le développement Web devraient comprendre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, je donnerai des exemples de code pour ceux qui sont intéressés, mais mon objectif est d'expliquer cette approche afin qu'elle puisse être comprise sans eux.</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Likbez: HTML, CSS et JavaScript</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour maximiser l'audience de cet article, je veux parler brièvement du rôle que jouent ces langues dans la création de pages Web et du type de séparation qui existait initialement entre elles. </font><font style="vertical-align: inherit;">Si vous le savez tous, vous pouvez ignorer cette section.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML: pour la structure et la sémantique</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code HTML (HyperText Markup Language) définit la structure et la sémantique du contenu qui sera placé sur la page. </font><font style="vertical-align: inherit;">Par exemple, le code HTML de cet article contient le texte que vous lisez maintenant et conformément à la structure spécifiée, ce texte est placé dans un paragraphe distinct, après l'en-tête et avant de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coller CodePen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, créez une page Web simple avec une liste de courses:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/vy/a-/ygvya-pjtq3-f_43xus3zz0w0bg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons enregistrer ce code dans un fichier, l'ouvrir dans un navigateur Web et le navigateur affichera le résultat. Comme vous pouvez le voir, le code HTML dans cet exemple est une page qui contient l'en-tête "Liste d'achats" (2 articles), une zone de texte de saisie, un bouton "Ajouter un article" et une liste de deux articles ("Oeufs" et «Pétrole»). L'utilisateur saisira l'adresse dans son navigateur Web, puis le navigateur demandera ce code HTML au serveur, le téléchargera et l'affichera. S'il y a déjà des éléments dans la liste, le serveur peut envoyer du HTML avec des éléments prêts à l'emploi, comme dans cet exemple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayez de taper quelque chose dans le champ de saisie et cliquez sur le bouton "Ajouter un élément". Vous verrez que rien ne se passe. Le bouton n'est associé à aucun code susceptible de modifier HTML, et HTML ne peut rien changer par lui-même. Nous y reviendrons dans une minute.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS: pour changer le look</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code CSS (feuilles de style en cascade) définit l'apparence de la page. </font><font style="vertical-align: inherit;">Par exemple, le CSS de cet article définit la police, l'espacement et la couleur du texte que vous lisez. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous avez peut-être remarqué que notre exemple de liste de courses semble très simple. </font><font style="vertical-align: inherit;">HTML ne permet pas de spécifier des éléments comme l'espacement, la taille des polices et les couleurs. </font><font style="vertical-align: inherit;">C'est pourquoi nous utilisons CSS. </font><font style="vertical-align: inherit;">Nous pourrions ajouter du code CSS pour cette page pour la décorer un peu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mt/em/k4/mtemk4giymqzyfu_sqy0yqhw-o0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, ce code CSS a changé la taille et l'épaisseur des caractères du texte, ainsi que la couleur d'arrière-plan. </font><font style="vertical-align: inherit;">Un développeur peut, par analogie, écrire des règles pour son propre style, et elles seront appliquées séquentiellement à toute structure HTML: si nous ajoutons des éléments </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section, bouton ou ul</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à cette page </font><font style="vertical-align: inherit;">, les mêmes changements de police s'appliqueront.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais le bouton Ajouter un élément ne fait toujours rien: ici, nous avons juste besoin de JavaScript.</font></font><br>
<br>
<h3><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript: pour implémenter le comportement</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code JavaScript définit le comportement des éléments interactifs ou dynamiques d'une page. Par exemple, CodePen est écrit en utilisant JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que le bouton Ajouter un élément dans notre exemple fonctionne sans JavaScript, nous devons utiliser un code HTML spécial pour le forcer à renvoyer des données au serveur ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;form action \ u003d '...'&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> si vous êtes soudain intéressé). De plus, le navigateur rechargera la version mise à jour de l'intégralité du fichier HTML sans enregistrer l'état actuel de la page. Si cette liste de courses faisait partie d'une grande page Web, tout ce que l'utilisateur faisait serait perdu. Peu importe le nombre de pixels que vous avez déplacés vers le bas lors de la lecture du texte - lorsque vous redémarrez le serveur vous ramènera au début, peu importe le nombre de minutes de la vidéo que vous avez regardée - lorsque vous redémarrez, elle recommencera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est ainsi que fonctionnaient toutes les applications Web: chaque fois qu'un utilisateur interagissait avec une page Web, il semblait fermer son navigateur Web et l'ouvrir à nouveau. Cela n'a pas beaucoup d'importance pour une simple étude de cas, mais pour une grande page complexe, qui peut prendre un certain temps à charger, cette approche n'est efficace ni pour le navigateur ni pour le serveur. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si nous voulons changer quelque chose sur la page sans recharger complètement cette page, nous devons utiliser JavaScript:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/qh/gd/vj/qhgdvjtm-0qokwslddjifxc_knu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Maintenant, lorsque nous tapons le texte dans le champ de saisie et cliquez sur le bouton Ajouter un élément, notre nouvel élément est ajouté à la liste et le nombre d'éléments en haut est mis à jour! Dans une application réelle, nous ajouterions également du code pour envoyer un nouvel élément au serveur en arrière-plan afin qu'il apparaisse lors du prochain chargement de la page.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La séparation de JavaScript de HTML et CSS est justifiée même dans cet exemple simple. </font><font style="vertical-align: inherit;">Des interactions plus complexes fonctionnent comme ceci: le HTML est chargé et affiché, et JavaScript est ensuite lancé pour y ajouter quelque chose et le changer. </font><font style="vertical-align: inherit;">Cependant, à mesure que la complexité de l'application Web augmente, nous devons surveiller attentivement quoi, où et quand notre code JavaScript change.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous continuions à développer cette application de liste d'achats, nous pourrions ajouter des boutons pour modifier ou supprimer des articles de la liste. </font><font style="vertical-align: inherit;">Supposons que nous écrivions du code JavaScript pour un bouton qui supprime un élément, mais oublions d'ajouter du code qui met à jour les informations sur le nombre total d'éléments en haut de la page. </font><font style="vertical-align: inherit;">Soudain, nous obtenons une erreur: après que l'utilisateur a supprimé l'élément, le nombre total indiqué sur la page ne correspondra pas à la liste!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dès que nous avons remarqué l'erreur, nous l'avons corrigée en ajoutant la même ligne totalText.innerHTML de notre code pour ajouter un élément au code pour supprimer un élément. Maintenant, nous avons le même code, qui est dupliqué à plusieurs endroits. Plus tard, disons, nous voulons changer ce code afin qu'au lieu de «(2 éléments)» en haut de la page, il affiche «Éléments: 2». Nous devons nous assurer de ne pas oublier de mettre à jour ce code aux trois endroits: en HTML, dans le code JavaScript pour le bouton Ajouter un élément et dans le code JavaScript pour le bouton Supprimer un élément. Si nous ne le faisons pas, nous aurons une autre erreur, à cause de laquelle ce texte changera considérablement après avoir interagi avec l'utilisateur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Déjà dans cet exemple simple, nous voyons combien il est facile de se confondre dans le code. </font><font style="vertical-align: inherit;">Bien sûr. </font><font style="vertical-align: inherit;">Il existe des approches et des pratiques pour rationaliser le code JavaScript afin de faciliter la résolution de ce problème. </font><font style="vertical-align: inherit;">Cependant, à mesure que les choses se compliquent, nous devrons poursuivre la restructuration et constamment réécrire le projet afin qu'il puisse être facilement développé et maintenu. </font><font style="vertical-align: inherit;">Bien que HTML et JavaScript soient stockés séparément, cela peut prendre beaucoup d'efforts pour assurer la synchronisation entre les deux. </font><font style="vertical-align: inherit;">C'est l'une des raisons pour lesquelles les nouveaux frameworks JavaScript tels que React sont devenus populaires: ils sont conçus pour fournir une relation plus formalisée et efficace entre HTML et JavaScript. </font><font style="vertical-align: inherit;">Pour comprendre comment cela fonctionne, nous devons d'abord aller un peu plus loin dans l'informatique.</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmation impérative vs déclarative</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La chose clé à comprendre est la différence de pensée. La plupart des langages de programmation vous permettent de suivre un seul paradigme, bien que certains d'entre eux prennent en charge deux à la fois. Il est important de comprendre les deux paradigmes afin d'apprécier le principal avantage de HTML-in-JS du point de vue du développeur JavaScript.</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>.  «»  ,       .         ( )   :        ,  ,    .        ,    ,   .  -     «».        Vanilla JavaScript   ,  jQuery. JavaScript        .<br>
 <ul>
<li>« X,   Y,   Z».</li>
<li>:     ,     .selected;        ,   .selected.</li>
</ul></li>
</ul><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>.    ,    .  ,   ,    «» (),       ,   - .        ,     .    (, React),     ,   ,     . ,        ,     ,       ,    .  ,      :<br>
<ul>
<li>«   XYZ.  ,   ,   .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple: cet élément a une classe .selected si l'utilisateur l'a sélectionné.</font></font></li>
</ul><br>
 </li>
</ul><br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML est un langage déclaratif</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oubliez JavaScript pendant un moment. </font><font style="vertical-align: inherit;">Voici un fait important: HTML est un langage déclaratif. </font><font style="vertical-align: inherit;">Dans le fichier HTML, vous pouvez déclarer quelque chose comme:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>My name is Mike.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque le navigateur Web lit ce code HTML, il détermine indépendamment les étapes nécessaires et les exécute:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créez un élément de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créez un élément d'en-tête de niveau 1 ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définissez le texte de l'élément de titre sur «Bonjour».</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placez l'élément title dans l'élément section.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créez un élément de paragraphe ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définissez le texte de l'élément de paragraphe sur "Mon nom est Mike".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placez un élément de paragraphe dans un élément de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Placez l'élément de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans un document HTML.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Affichez le document à l'écran.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un développeur Web, la façon dont le navigateur fait ces choses n'a pas d'importance: tout ce qui compte, c'est ce qu'il fait. </font><font style="vertical-align: inherit;">Ceci est un excellent exemple pour illustrer la différence entre les deux paradigmes de programmation. </font><font style="vertical-align: inherit;">En bref, HTML est une abstraction déclarative enroulée autour d'un moteur de rendu de navigateur Web implémenté de manière impérative. </font><font style="vertical-align: inherit;">Il se soucie de la façon dont vous n'avez qu'à vous soucier de quoi. </font><font style="vertical-align: inherit;">Vous pouvez profiter de la vie en écrivant du HTML déclaratif parce que les bonnes personnes de Mozilla, Google et Apple ont écrit un code impératif pour vous lors de la création de votre navigateur Web.</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript est un langage impératif</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons déjà examiné un exemple simple de JavaScript impératif dans l'exemple de liste d'achats ci-dessus, et j'ai décrit comment la complexité des fonctions d'application affecte l'effort requis pour les implémenter et la probabilité d'erreurs dans cette implémentation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons maintenant une tâche légèrement plus complexe et voyons comment elle peut être simplifiée à l'aide d'une approche déclarative. </font><font style="vertical-align: inherit;">Imaginez une page Web contenant les éléments suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une liste de drapeaux marqués, dont chaque ligne change de couleur lorsqu'elle est sélectionnée;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le texte ci-dessous, par exemple, «1 sur 4 sélectionné», qui doit être mis à jour lorsque les indicateurs sont modifiés;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bouton Sélectionner tout, qui doit être désactivé si toutes les cases à cocher sont déjà sélectionnées;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sélectionnez le bouton Aucun, qui doit être désactivé si les cases à cocher ne sont pas sélectionnées.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici une implémentation en HTML simple, CSS et JavaScript impératif:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8p/kx/5u/8pkx5uxweemg5tmpqietjhadqpw.png"><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> captionText = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'caption-text'</span>);
<span class="hljs-keyword">const</span> checkAllButton = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'check-all-button'</span>);
<span class="hljs-keyword">const</span> uncheckAllButton = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'uncheck-all-button'</span>);
<span class="hljs-keyword">const</span> checkboxes = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'input[type="checkbox"]'</span>);<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateSummary</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">let</span> numChecked = <span class="hljs-number">0</span>;<font></font>
  checkboxes.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkbox</span>) </span>{
    <span class="hljs-keyword">if</span> (checkbox.checked) {<font></font>
      numChecked++;<font></font>
    }<font></font>
  });<font></font>
  captionText.innerHTML = <span class="hljs-string">`<span class="hljs-subst">${numChecked}</span> of <span class="hljs-subst">${checkboxes.length}</span> checked`</span>;
  <span class="hljs-keyword">if</span> (numChecked === <span class="hljs-number">0</span>) {<font></font>
    checkAllButton.disabled = <span class="hljs-literal">false</span>;<font></font>
    uncheckAllButton.disabled = <span class="hljs-literal">true</span>;<font></font>
  } <span class="hljs-keyword">else</span> {<font></font>
    uncheckAllButton.disabled = <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (numChecked === checkboxes.length) {<font></font>
    checkAllButton.disabled = <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
}<font></font>
<font></font>
checkAllButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
  checkboxes.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkbox</span>) </span>{<font></font>
    checkbox.checked = <span class="hljs-literal">true</span>;<font></font>
    checkbox.closest(<span class="hljs-string">'tr'</span>).className = <span class="hljs-string">'checked'</span>;<font></font>
  });<font></font>
  updateSummary();<font></font>
});<font></font>
<font></font>
uncheckAllButton.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<font></font>
  checkboxes.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkbox</span>) </span>{<font></font>
    checkbox.checked = <span class="hljs-literal">false</span>;<font></font>
    checkbox.closest(<span class="hljs-string">'tr'</span>).className = <span class="hljs-string">''</span>;<font></font>
  });<font></font>
  updateSummary();<font></font>
});<font></font>
<font></font>
checkboxes.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">checkbox</span>) </span>{<font></font>
  checkbox.addEventListener(<span class="hljs-string">'change'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{<font></font>
    checkbox.closest(<span class="hljs-string">'tr'</span>).className = checkbox.checked ? <span class="hljs-string">'checked'</span> : <span class="hljs-string">''</span>;<font></font>
    updateSummary();<font></font>
  });<font></font>
});</code></pre><br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mal de tête tel quel</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour implémenter cette fonction en utilisant impérativement JavaScript, nous devons donner au navigateur des instructions détaillées. </font><font style="vertical-align: inherit;">Il s'agit d'une description verbale du code de l'exemple ci-dessus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre HTML, nous déclarons la structure de page d'origine:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a quatre éléments de ligne (une ligne d'un tableau, c'est une liste), chacun contenant un indicateur. </font><font style="vertical-align: inherit;">Le troisième drapeau est vérifié.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a un texte «1 sur 4 sélectionné».</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un bouton Sélectionner tout est activé.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a un bouton Ne rien sélectionner, qui est désactivé.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre JavaScript, nous écrivons des instructions sur ce qui doit être changé lorsque chacun de ces événements se produit: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsqu'un indicateur passe de non marqué à marqué:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez la ligne contenant la case à cocher et ajoutez-y la classe CSS .selected.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez tous les drapeaux dans la liste et calculez combien d'entre eux sont marqués et combien ne le sont pas.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez le texte et mettez-le à jour en indiquant le nombre correct d'achats sélectionnés et leur nombre total.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez le bouton Ne rien sélectionner et activez-le s'il a été désactivé.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si toutes les cases à cocher sont maintenant cochées, recherchez le bouton Sélectionner tout et désactivez-le.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsqu'un indicateur passe de marqué à non marqué:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez la ligne contenant l'indicateur et supprimez-en la classe .selected.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez toutes les cases à cocher dans la liste et calculez combien d'entre elles sont cochées et combien ne le sont pas.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez l'élément de texte de CV et mettez-le à jour avec le nombre et le total vérifiés.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez le bouton Sélectionner tout et activez-le s'il a été désactivé.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si toutes les cases ne sont pas cochées, recherchez le bouton Ne rien sélectionner et désactivez-le.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque le bouton Sélectionner tout est enfoncé:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez toutes les cases à cocher dans la liste et marquez-les.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez toutes les lignes de la liste et ajoutez-leur la classe .selected.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez le texte et mettez-le à jour.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez le bouton Sélectionner tout et désactivez-le.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez le bouton Ne rien sélectionner et activez-le.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous appuyez sur le bouton Ne rien sélectionner:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez toutes les cases à cocher dans la liste et décochez toutes les cases.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez toutes les lignes de la liste et supprimez-en la classe .selected.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez l'élément de texte de reprise et mettez-le à jour.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez le bouton Sélectionner tout et activez-le.</font></font></li>
</ul><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recherchez le bouton Ne rien sélectionner et désactivez-le.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wow ... C'est beaucoup, non? Eh bien, il vaut mieux ne pas oublier d'écrire du code pour toutes les situations possibles. Si nous oublions ou gâchons l'une de ces instructions, nous obtenons une erreur: les totaux ne correspondent pas aux cases à cocher, ou le bouton qui ne fait rien lorsque vous cliquez dessus, ou la ligne sélectionnée a la mauvaise couleur ou quelque chose, est activé pourtant, ce à quoi nous n'avons pas pensé et ne saurons pas tant que l'utilisateur ne se plaindra pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons vraiment un gros problème ici: il n'y a pas d'entité qui contiendrait des informations complètes sur l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">état</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de notre application (dans ce cas, c'est la réponse à la question «quels drapeaux sont marqués?») et serait responsable de la mise à jour de ces informations. </font><font style="vertical-align: inherit;">Les indicateurs, bien sûr, savent s'ils sont vérifiés, mais le code CSS des lignes du tableau, du texte et de chaque bouton doit également en être conscient. </font><font style="vertical-align: inherit;">Cinq copies de ces informations sont stockées séparément dans le code HTML, et lorsqu'elles changent dans l'un de ces endroits, le développeur JavaScript doit les capturer et écrire un code impératif pour se synchroniser avec les changements dans d'autres endroits.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ceci est toujours un exemple simple d'un petit composant de page. </font><font style="vertical-align: inherit;">Même si cet ensemble d'instructions ressemble à un mal de tête, imaginez la complexité et la fragilité d'une application Web plus grande lorsque vous devez implémenter tout cela en JavaScript impératif. </font><font style="vertical-align: inherit;">Pour de nombreuses applications Web complexes et modernes, cette solution n'est pas mise à l'échelle à partir du mot «complètement».</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous recherchons la source de la vérité</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des outils comme React permettent une utilisation déclarative de JavaScript. </font><font style="vertical-align: inherit;">Tout comme HTML est une abstraction déclarative sur les instructions d'affichage dans un navigateur Web, React est une abstraction déclarative sur JavaScript.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelez-vous comment HTML nous permet de nous concentrer sur la structure de la page plutôt que sur les détails d'implémentation, et comment le navigateur affiche-t-il cette structure? De même, lorsque nous utilisons React, nous pouvons nous concentrer sur la structure, la définir en fonction des données stockées en un seul endroit. Ce processus est appelé liaison unidirectionnelle et l'emplacement des données d'état de l'application est appelé «source unique de vérité». Lorsque la source de la vérité change, React mettra automatiquement à jour la structure de la page pour nous. Il s'occupera des étapes nécessaires dans les coulisses, comme le fait un navigateur Web pour HTML. Bien que React soit utilisé à titre d'exemple ici, cette approche fonctionne également pour d'autres cadres tels que Vue.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revenons à notre liste de cases à cocher de l'exemple ci-dessus. </font><font style="vertical-align: inherit;">Dans ce cas, la «vérité» que nous voulons savoir est assez concise: quels drapeaux sont vérifiés? </font><font style="vertical-align: inherit;">D'autres détails (par exemple, le texte, la couleur des lignes, les boutons activés) sont déjà des informations obtenues sur la base de la source de la vérité. </font><font style="vertical-align: inherit;">Et pourquoi devraient-ils avoir leur propre copie de ces informations? </font><font style="vertical-align: inherit;">Ils doivent simplement utiliser une seule source de vérité en lecture seule, et tous les éléments de la page doivent «simplement savoir» quelles cases sont cochées et se comporter en conséquence. </font><font style="vertical-align: inherit;">Vous pouvez dire que les lignes, le texte et les boutons du tableau devraient pouvoir répondre automatiquement à une case à cocher selon qu'elle est cochée ou non («voir ce qui s'y passe?»)</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dis-moi ce que tu veux (ce que tu veux vraiment)</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour implémenter cette page avec React, nous pouvons remplacer la liste par quelques descriptions de faits simples:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe une liste de valeurs vraies / fausses appelées checkboxValues ​​qui montre quels champs sont marqués.</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple: checkboxValues ​​\ u003d [faux, faux, vrai, faux]</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cette liste montre que nous avons quatre drapeaux, seul le troisième est défini.</font></font></li>
</ul></li>
</ul><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour chaque valeur de checkboxValues ​​dans le tableau, il y a une ligne qui:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a une classe CSS appelée .selected si la valeur est vraie, et</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contient un indicateur qui est vérifié si la valeur est vraie.</font></font></li>
</ul></li>
</ul><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe un élément de texte qui contient le texte "{x} de {y} sélectionné", où {x} est le nombre de vraies valeurs dans checkboxValues ​​et {y} est le nombre total de valeurs dans checkboxValues.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il existe un bouton Sélectionner tout qui est activé si checkboxValues ​​a de fausses valeurs.</font></font></li>
<li>  Select None,  ,   checkboxValues ​​  true.</li>
<li>  ,     checkboxValues.</li>
<li>  Select All ,     checkboxValues ​​ true.</li>
<li>   Select None    checkboxValues ​​  false.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous remarquerez que les trois derniers paragraphes sont toujours des instructions impératives («Lorsque cela se produit, faites-le»), mais c'est le seul code impératif que nous devons écrire. Ce sont trois lignes de code, et elles mettent toutes à jour une seule source de vérité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le reste est constitué d'instructions déclaratives («il y a ...»), qui sont désormais intégrées directement dans la définition de la structure de la page. Pour ce faire, nous écrivons du code pour nos éléments à l'aide d'une extension de syntaxe JavaScript spéciale - JavaScript XML (JSX). Il ressemble au HTML: JSX vous permet d'utiliser une syntaxe de type HTML pour décrire la structure de l'interface, ainsi que du JavaScript standard. Cela nous permet de mélanger la logique JS avec la structure HTML, de sorte que la structure peut être différente à tout moment. Tout dépend du contenu de checkboxValues.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous réécrivons notre exemple sur React:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/np/bv/zknpbvuumzprgv3vrejfyv99vkk.png"><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ChecklistTable</span>(<span class="hljs-params">{ columns, rows, initialValues, ...otherProps }</span>) </span>{
  <span class="hljs-keyword">const</span> [checkboxValues, setCheckboxValues] = React.useState(initialValues);<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkAllBoxes</span>(<span class="hljs-params"></span>) </span>{<font></font>
    setCheckboxValues(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(rows.length).fill(<span class="hljs-literal">true</span>));<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uncheckAllBoxes</span>(<span class="hljs-params"></span>) </span>{<font></font>
    setCheckboxValues(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(rows.length).fill(<span class="hljs-literal">false</span>));<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setCheckboxValue</span>(<span class="hljs-params">rowIndex, checked</span>) </span>{
    <span class="hljs-keyword">const</span> newValues = checkboxValues.slice();<font></font>
    newValues[rowIndex] = checked;<font></font>
    setCheckboxValues(newValues);<font></font>
  }<font></font>
  <font></font>
  <span class="hljs-keyword">const</span> numItems = checkboxValues.length;
  <span class="hljs-keyword">const</span> numChecked = checkboxValues.filter(<span class="hljs-built_in">Boolean</span>).length;<font></font>
  <font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pf-c-table pf-m-grid-lg"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"grid"</span> {<span class="hljs-attr">...otherProps</span>}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">caption</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{numChecked} of {numItems} items checked<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{checkAllBoxes}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{numChecked</span> === <span class="hljs-string">numItems}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"pf-c-button pf-m-primary"</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
        &gt;</span>
          Check all
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{uncheckAllBoxes}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{numChecked</span> === <span class="hljs-string">0}</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"pf-c-button pf-m-secondary"</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
        &gt;</span>
          Uncheck all
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">caption</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">td</span> /&gt;</span>
          {columns.map(function(column) {
            return <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">"col"</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{column}</span>&gt;</span>{column}<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>;
          })}
        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
        {rows.map(function(row, rowIndex) {
          const [firstCell, ...otherCells] = row;
          const labelId = `item-${rowIndex}-${firstCell}`;
          const isChecked = checkboxValues[rowIndex];
          return (
            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{firstCell}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isChecked</span> ? '<span class="hljs-attr">checked</span>' <span class="hljs-attr">:</span> ''}&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pf-c-table__check"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                  <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
                  <span class="hljs-attr">name</span>=<span class="hljs-string">{firstCell}</span>
                  <span class="hljs-attr">aria-labelledby</span>=<span class="hljs-string">{labelId}</span>
                  <span class="hljs-attr">checked</span>=<span class="hljs-string">{isChecked}</span>
                  <span class="hljs-attr">onChange</span>=<span class="hljs-string">{function(event)</span> {
                    <span class="hljs-attr">setCheckboxValue</span>(<span class="hljs-attr">rowIndex</span>, <span class="hljs-attr">event.target.checked</span>);
                  }}
                /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">data-label</span>=<span class="hljs-string">{columns[0]}</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{labelId}</span>&gt;</span>{firstCell}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
              {otherCells.map(function(cell, cellIndex) {
                return (
                  <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{cell}</span> <span class="hljs-attr">data-label</span>=<span class="hljs-string">{columns[1</span> + <span class="hljs-attr">cellIndex</span>]}&gt;</span>
                    {cell}
                  <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                );
              })}
            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
          );
        })}
      <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span></span><font></font>
  );<font></font>
};<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ShoppingList</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChecklistTable</span>
      <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Shopping list"</span>
      <span class="hljs-attr">columns</span>=<span class="hljs-string">{[</span>'<span class="hljs-attr">Item</span>', '<span class="hljs-attr">Quantity</span>']}
      <span class="hljs-attr">rows</span>=<span class="hljs-string">{[</span>
        ['<span class="hljs-attr">Sugar</span>', '<span class="hljs-attr">1</span> <span class="hljs-attr">cup</span>'],
        ['<span class="hljs-attr">Butter</span>', '½ <span class="hljs-attr">cup</span>'],
        ['<span class="hljs-attr">Eggs</span>', '<span class="hljs-attr">2</span>'],
        ['<span class="hljs-attr">Milk</span>', '½ <span class="hljs-attr">cup</span>'],
      ]}
      <span class="hljs-attr">initialValues</span>=<span class="hljs-string">{[false,</span> <span class="hljs-attr">false</span>, <span class="hljs-attr">true</span>, <span class="hljs-attr">false</span>]}
    /&gt;</span></span><font></font>
  );<font></font>
}<font></font>
<font></font>
ReactDOM.render(<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ShoppingList</span> /&gt;</span></span>,
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'shopping-list'</span>)<font></font>
);<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSX a l'air particulier. </font><font style="vertical-align: inherit;">Lorsque j'ai rencontré cela pour la première fois, il m'a semblé qu'il était tout simplement impossible de le faire. </font><font style="vertical-align: inherit;">Ma première réaction a été: «Quoi? </font><font style="vertical-align: inherit;">Le HTML ne peut pas être dans le code JavaScript! " </font><font style="vertical-align: inherit;">Et je n'étais pas le seul. </font><font style="vertical-align: inherit;">Cependant, ce n'est pas du HTML, mais du JavaScript habillé en HTML. </font><font style="vertical-align: inherit;">En fait, c'est une solution puissante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelez-vous ces 20 instructions impératives ci-dessus? </font><font style="vertical-align: inherit;">Nous en avons maintenant trois. </font><font style="vertical-align: inherit;">Les autres instructions impératives (internes) que React exécute pour nous dans les coulisses - à chaque fois que checkboxValues ​​change.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec ce code, une situation ne peut plus se produire lorsque le texte ou la couleur de la ligne ne correspond pas aux cases à cocher, ou lorsque le bouton est activé, bien qu'il doive être désactivé. </font><font style="vertical-align: inherit;">Il existe toute une catégorie d'erreurs qui ne peuvent tout simplement plus se produire dans notre application Web. </font><font style="vertical-align: inherit;">Tout le travail est effectué sur la base d'une seule source de vérité, et nous, développeurs, pouvons écrire moins de code et mieux dormir la nuit. </font><font style="vertical-align: inherit;">Eh bien, les développeurs JavaScript, au moins ...</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript a vaincu HTML: affamé</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À mesure que les applications Web deviennent plus complexes, le maintien de la séparation classique des tâches entre HTML et JavaScript devient de plus en plus pénible. </font><font style="vertical-align: inherit;">HTML a été initialement conçu pour les pages Web statiques. </font><font style="vertical-align: inherit;">Pour y ajouter des fonctions interactives plus complexes, il est nécessaire d'implémenter la logique appropriée en JavaScript impératif, qui avec chaque ligne de code devient de plus en plus confus et fragile.</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avantages de l'approche moderne: prévisibilité, réutilisabilité et combinaison</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La possibilité d'utiliser une seule source de vérité est l'avantage le plus important de ce modèle, mais il présente d'autres avantages. La définition de nos éléments de page dans le code JavaScript signifie que nous pouvons réutiliser des composants (blocs individuels d'une page Web), nous empêchant de copier et de coller le même code HTML à plusieurs endroits. Si nous devons changer un composant, changez simplement son code en un seul endroit. Dans ce cas, des modifications se produiront dans toutes les copies du composant (à l'intérieur d'une ou même dans de nombreuses applications Web, si nous utilisons des composants réutilisables).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous pouvons prendre des composants simples et les assembler comme des cubes LEGO, créant des composants plus complexes et utiles sans rendre leur logique trop confuse. </font><font style="vertical-align: inherit;">Et si nous utilisons des composants créés par d'autres développeurs, nous pouvons facilement reporter des mises à jour ou des corrections de bogues sans avoir à réécrire notre code.</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le même JavaScript, uniquement dans le profil</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces avantages ont un inconvénient. </font><font style="vertical-align: inherit;">Il y a de bonnes raisons pour lesquelles les gens apprécient la séparation entre HTML et JavaScript. </font><font style="vertical-align: inherit;">Comme je l'ai mentionné plus tôt, l'abandon des fichiers HTML classiques complique le flux de travail pour quelqu'un qui n'a pas travaillé avec JavaScript auparavant. </font><font style="vertical-align: inherit;">Ceux qui auparavant pouvaient apporter indépendamment des modifications à l'application web, doivent désormais acquérir des compétences complexes supplémentaires afin de maintenir leur autonomie, voire de se placer dans l'équipe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe également des défauts techniques. Par exemple, certains outils, tels que les linters et les analyseurs, n'acceptent que du HTML normal en entrée, et travailler avec des plug-ins JavaScript tiers peut être plus difficile à la place. De plus, JavaScript n'est pas la meilleure langue, mais c'est une norme uniforme acceptée pour les navigateurs Web. De nouveaux outils et fonctionnalités améliorent les choses, mais il y a encore des pièges que vous devez connaître avant de travailler avec. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autre problème potentiel: lorsque la structure sémantique de la page est divisée en composants abstraits, le développeur peut cesser de penser aux éléments HTML qui seront générés en conséquence. Balises HTML spécifiques telles que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section et apart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ont leur propre sémantique, qui est perdue lors de l'utilisation de balises à usage général telles que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">div et span</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - même si elles sont visuellement identiques sur la page. </font><font style="vertical-align: inherit;">Ceci est particulièrement important pour garantir la disponibilité de l'application Web pour différentes catégories d'utilisateurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, cela affectera le comportement du lecteur d'écran pour les utilisateurs malvoyants. </font><font style="vertical-align: inherit;">Ce ne sont peut-être pas les tâches les plus intéressantes pour le développeur, mais les développeurs JavaScript doivent toujours se rappeler que la préservation de la sémantique du HTML dans ce cas est la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tâche</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la plus importante </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="“#3AC1EF”"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Besoin conscient vs tendance inconsciente</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Récemment, l'utilisation de cadres dans chaque projet est devenue une tendance. Certaines personnes pensent que la séparation entre HTML et JavaScript est obsolète, mais ce n'est pas le cas. Pour un site Web statique simple qui ne nécessite pas d'interaction utilisateur complexe, c'est tout à fait juste. Les fans de React plus ardents peuvent être en désaccord avec moi ici, mais si tout votre JavaScript consiste à créer une page Web non interactive, vous ne devriez pas l'utiliser. JavaScript ne se charge pas aussi rapidement que le HTML standard. Par conséquent, si vous ne définissez pas la tâche d'acquérir une nouvelle expérience de développement ou d'améliorer la fiabilité du code, JavaScript ici fera plus de mal que de bien.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, il n'est pas nécessaire d'écrire l'intégralité de votre site Web dans React. Ou Vue! Ou quoi d'autre est là ... Beaucoup de gens ne le savent pas, car tous les tutoriels montrent essentiellement comment utiliser React pour développer un site à partir de zéro. Si vous n'avez qu'un seul petit widget complexe sur un site Web simple, vous pouvez utiliser </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React pour un composant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Vous n'avez pas toujours à vous soucier du webpack, de Redux, de Gatsby ou de toute autre chose que quelqu'un recommande comme «meilleures pratiques».</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais si l'application est assez complexe, l'utilisation d'une approche déclarative moderne en vaut vraiment la peine. </font><font style="vertical-align: inherit;">React est-il la meilleure solution? </font><font style="vertical-align: inherit;">Non. </font><font style="vertical-align: inherit;">Il a déjà de solides concurrents. </font><font style="vertical-align: inherit;">Et puis de plus en plus apparaîtra ... Mais la programmation déclarative n'ira nulle part, et dans un nouveau cadre, cette approche sera probablement repensée et mise en œuvre encore mieux.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr492730/index.html">Département américain de la Défense: éthique pour l'IA et les véhicules sans pilote</a></li>
<li><a href="../fr492742/index.html">Visualisez les données de l'application Node JS avec Prometheus + Grafana</a></li>
<li><a href="../fr492744/index.html">Quel système sera le plus bruyant et qui donnera le silence «absolu»: deux projets scientifiques intéressants</a></li>
<li><a href="../fr492746/index.html">Comment éviter l'indignation de la programmation? Conseils d'intégration</a></li>
<li><a href="../fr492748/index.html">Profession DevOps-engineer: une vue de l'administrateur système</a></li>
<li><a href="../fr492758/index.html">Podcasts pour les développeurs</a></li>
<li><a href="../fr492760/index.html">Grille CSS: saisie d'une mise en page de magazine réactive de 20 lignes</a></li>
<li><a href="../fr492762/index.html">Alphabet des investisseurs: qu'est-ce qu'un appel de marge et comment l'éviter</a></li>
<li><a href="../fr492766/index.html">Nous pompons le travail avec des événements dans Angular</a></li>
<li><a href="../fr492768/index.html">Greybox Fuzzing par l'exemple d'AFLSmart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>