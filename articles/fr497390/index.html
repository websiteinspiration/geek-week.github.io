<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëπ üßîüèø üçÖ Comment nous avons appris √† recommander des films et pourquoi vous ne devriez pas vous fier uniquement aux notes üôãüèº üéπ üéÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imaginez que vous vouliez passer la soir√©e √† regarder un film, mais vous ne savez pas lequel choisir. Les utilisateurs de Yandex se retrouvent souvent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons appris √† recommander des films et pourquoi vous ne devriez pas vous fier uniquement aux notes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/497390/"><img src="https://habrastorage.org/webt/vu/_4/oo/vu_4oolbpa8pde7nsycpg5vpokq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez que vous vouliez passer la soir√©e √† regarder un film, mais vous ne savez pas lequel choisir. Les utilisateurs de Yandex se retrouvent souvent dans la m√™me situation, donc notre √©quipe √©labore des recommandations qui peuvent √™tre trouv√©es sur Search et Air. Il semblerait que cela soit compliqu√©: nous prenons les notes des utilisateurs, avec leur aide, nous entra√Ænons la voiture √† trouver des films susceptibles de donner 5 points, nous obtenons une liste de films pr√™te √† l'emploi. Mais cette approche ne fonctionne pas. Pourquoi? C‚Äôest ce dont je vais vous parler aujourd‚Äôhui.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un peu d'histoire. En 2006, Netflix a lanc√© le concours d'apprentissage automatique du prix Netflix. Si vous avez soudainement oubli√©, la soci√©t√© n'a pas encore diffus√© sur Internet, mais a lou√© des films sur DVD. Mais m√™me alors, il √©tait important pour elle de pr√©dire la note de l'utilisateur afin de lui recommander quelque chose. Donc, l'essence de la concurrence: pr√©dire les notes des t√©l√©spectateurs est 10% mieux (selon la m√©trique RMSE) que Cinematch, le syst√®me de recommandation Netflix. Ce fut l'une des premi√®res comp√©titions de masse de ce type. L'int√©r√™t a chauff√© un √©norme ensemble de donn√©es (plus de 100 millions de notes), ainsi qu'un prix de 1 million de dollars.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le concours s'est termin√© en 2009. </font><font style="vertical-align: inherit;">Les √©quipes de BellKor Pragmatic Chaos et de l'Ensemble ont atteint la ligne d'arriv√©e avec le m√™me r√©sultat (RMSE = 0,8567), mais l'Ensemble a pris la deuxi√®me place car il a envoy√© la solution 20 minutes plus tard que les concurrents. </font><font style="vertical-align: inherit;">Les r√©sultats et les travaux peuvent √™tre trouv√©s </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Mais la chose la plus int√©ressante est diff√©rente. </font><font style="vertical-align: inherit;">Si vous croyez aux histoires r√©p√©t√©es lors de conf√©rences sp√©cialis√©es, les algorithmes gagnants ne sont pas apparus en production dans le service de streaming vid√©o qui a √©t√© lanc√© bient√¥t. </font><font style="vertical-align: inherit;">Je ne peux pas parler des raisons des d√©cisions des autres, mais je vais vous expliquer pourquoi nous avons fait de m√™me.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âvaluation personnelle</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis un certain temps maintenant, les utilisateurs de Yandex peuvent √©valuer les films qu'ils ont regard√©s. Et pas seulement chez KinoPoisk, mais aussi dans les r√©sultats de recherche. Au fil du temps, nous avons accumul√© des centaines de millions d'estimations de dizaines de millions de personnes. √Ä un moment donn√©, nous avons d√©cid√© d'utiliser ces donn√©es pour aider les utilisateurs √† comprendre √† quel point ils aimeraient un film. En fait, nous avons r√©solu le m√™me probl√®me qu'au concours du prix Netflix, c'est-√†-dire que nous avions pr√©dit quelle note l'utilisateur attribuerait au film. √Ä cette √©poque, il existait d√©j√† des notations KinoPoisk et IMDB, construites sur la base des notations des personnes. Nous avons construit une note personnelle, nous avons donc d√©cid√© d'utiliser une √©chelle s√©par√©e en pourcentage afin d'√©viter les similitudes visuelles et la confusion.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dd/tk/h7/ddtkh7i3ud_9q5lmqtvw-4ambgc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, la n√©cessit√© de corr√©ler l'√©chelle des points et le pourcentage est un casse-t√™te distinct et non √©vident, alors j'en parlerai bri√®vement. </font><font style="vertical-align: inherit;">Il semblerait que pour une √©chelle de 10 points, prenez 10% pour chaque point - et le point est dans le chapeau. </font><font style="vertical-align: inherit;">Mais non. </font><font style="vertical-align: inherit;">La raison en est la psychologie et les habitudes. </font><font style="vertical-align: inherit;">Par exemple, du point de vue des utilisateurs, une note de 8/10 est bien meilleure que 80%. </font><font style="vertical-align: inherit;">Comment corr√©ler cela? </font><font style="vertical-align: inherit;">Avec le crowdsourcing! </font><font style="vertical-align: inherit;">Et c'est ce que nous avons fait: nous avons lanc√© la t√¢che √† Tolok, dans laquelle les tireurs d√©crivaient les attentes des films avec un certain score ou pourcentage de note personnelle. </font><font style="vertical-align: inherit;">Sur la base de ce balisage, nous avons s√©lectionn√© une fonction qui traduit la pr√©diction du score du point au pourcentage afin que les attentes des utilisateurs soient maintenues.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemples de qu√™tes √† Tolok</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/tw/fv/ux/twfvuxxkjd7rnkave0yuudmzs5q.png"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est utile de pr√©voir les attentes du film, mais il serait √©galement utile de formuler des recommandations. </font><font style="vertical-align: inherit;">Autrement dit, montrez imm√©diatement √† la personne une liste de bons films. </font><font style="vertical-align: inherit;">√Ä ce moment-l√†, beaucoup d'entre vous pourraient penser: ¬´Et disons simplement trier les films que l'utilisateur n'a pas regard√©s par classement personnel.¬ª </font><font style="vertical-align: inherit;">Nous l'avons pens√© aussi au d√©but. </font><font style="vertical-align: inherit;">Mais j'ai d√ª r√©soudre deux probl√®mes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me d'outil</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsqu'un utilisateur recherche un film particulier (ou souhaite louer un DVD sp√©cifique), le service doit pr√©dire la note de ce film particulier. Exactement, ce probl√®me a √©t√© r√©solu lors du concours du prix Netflix, o√π la m√©trique RMSE a √©t√© utilis√©e. Mais les recommandations r√©solvent un probl√®me diff√©rent: vous n'avez pas besoin de deviner la note, mais de trouver un film qui sera finalement regard√©. Et la m√©trique RMSE fait un mauvais travail. Par exemple, la p√©nalit√© pour pr√©dire une note de 2 au lieu de 1 est exactement la m√™me que pour 5 au lieu de 4. Mais notre syst√®me ne devrait jamais recommander des films auxquels l'utilisateur met 2! Les m√©triques bas√©es sur des listes conviennent beaucoup mieux √† cette t√¢che, telles que Precision @ K, Recall @ K, MRR ou NDCG. Je ne peux pas m'emp√™cher de vous en dire un peu plus √† leur sujet (mais si vous n'√™tes pas int√©ress√© par les statistiques, sautez simplement le paragraphe suivant). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons par la m√©trique.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MRR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (rang r√©ciproque moyen). Nous verrons quelle position dans le classement sera le film avec lequel l'utilisateur a interagi (par exemple, regard√© ou f√©licit√©) pendant la p√©riode de test. La m√©trique MRR est la position inverse moyenne d'un utilisateur d'un tel film. C'est √† dire</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.7ex" height="4.259ex" viewBox="0 -1132.2 10204.2 1833.9" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-52" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-52" x="1811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-3D" x="2848" y="0"></use><g transform="translate(3626,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5367,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7833,0)"><g transform="translate(286,0)"><rect stroke="none" width="1964" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-31" x="1138" y="582"></use><g transform="translate(60,-403)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-61" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-6E" x="981" y="0"></use><g transform="translate(1118,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-75" x="737" y="-213"></use></g></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>M</mi><mi>R</mi><mi>R</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>‚àë</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><mfrac><mn>1</mn><mrow><mi>r</mi><mi>a</mi><mi>n</mi><msub><mi>k</mi><mi>u</mi></msub></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-1">MRR = \frac{1}{|U|} \sum_{u=1}^{|U|} \frac{1}{rank_u}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Une telle m√©trique, contrairement √† RMSE, √©value la liste enti√®re, mais, malheureusement, ne regarde que le premier √©l√©ment devin√©. Cependant, il est facile de modifier la m√©trique pour supprimer cet inconv√©nient. Nous pouvons calculer la somme des positions inverses de tous les films avec lesquels l'utilisateur a interagi. Cette m√©trique est appel√©e Classement r√©ciproque moyen. Cette m√©trique prend en compte tous les films devin√©s dans le num√©ro. Notez que la position k dans le paiement re√ßoit un poids de 1 / k pour un film devin√© et un poids de 0 pour un autre film. Souvent, 1 / log (k) est utilis√© au lieu de 1 / k: cela correspond plus probablement √† la probabilit√© que l'utilisateur d√©file jusqu'√† la position k. Le r√©sultat est une m√©trique DCG (gain cumul√© actualis√©)</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>U</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></munderover><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.927ex" height="4.384ex" viewBox="0 -1186 16329.6 1887.7" role="img" focusable="false" style="vertical-align: -1.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-43" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-47" x="1589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-3D" x="2653" y="0"></use><g transform="translate(3431,0)"><g transform="translate(397,0)"><rect stroke="none" width="1056" height="60" x="0" y="220"></rect><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-31" x="496" y="582"></use><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="1046" y="0"></use></g></g></g><g transform="translate(5172,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJSZ1-2211" x="0" y="0"></use><g transform="translate(1056,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-55" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-7C" x="1046" y="0"></use></g><g transform="translate(1056,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-75" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-3D" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-31" x="1351" y="0"></use></g></g><g transform="translate(7805,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJSZ1-2211" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-4E" x="1494" y="675"></use><g transform="translate(1056,-287)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-73" x="989" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-3D" x="1458" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-31" x="2237" y="0"></use></g></g><g transform="translate(10897,0)"><g transform="translate(286,0)"><rect stroke="none" width="5025" height="60" x="0" y="220"></rect><g transform="translate(1421,614)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-61" x="480" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-69" x="1010" y="0"></use><g transform="translate(958,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-6E" x="0" y="0"></use><g transform="translate(424,-107)"><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-6F" x="503" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-73" x="989" y="0"></use></g></g></g><g transform="translate(60,-442)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-78" x="1334" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-28" x="1862" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-31" x="2252" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-2C" x="2752" y="0"></use><g transform="translate(2143,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-6C"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-6F" x="278" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-67" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-28" x="4310" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-70" x="4700" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-6F" x="5203" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMATHI-73" x="5689" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-29" x="6158" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/company/yandex/blog/497390/&amp;usg=ALkJrhg79eH-SgVbZyvJS0dKMqff6ntpqA#MJMAIN-29" x="6548" y="0"></use></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>D</mi><mi>C</mi><mi>G</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></mfrac><munderover><mo>‚àë</mo><mrow class="MJX-TeXAtom-ORD"><mi>u</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>U</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></mrow></munderover><munderover><mo>‚àë</mo><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>N</mi></mrow></munderover><mfrac><mrow><mi>g</mi><mi>a</mi><mi>i</mi><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>p</mi><mi>o</mi><mi>s</mi></mrow></msub></mrow><mrow><mo movablelimits="true" form="prefix">max</mo><mo stretchy="false">(</mo><mn>1</mn><mo>,</mo><mi>log</mi><mo>‚Å°</mo><mo stretchy="false">(</mo><mi>p</mi><mi>o</mi><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-2">DCG = \frac{1}{|U|} \sum_{u=1}^{|U|} \sum_{pos=1}^{N} \frac{gain_{pos}}{\max(1, \log(pos))}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mais la contribution des diff√©rents utilisateurs √† la m√©trique est diff√©rente: pour quelqu'un, nous avons devin√© tous les films, pour quelqu'un, nous n'avons rien devin√©. </font><font style="vertical-align: inherit;">Par cons√©quent, en r√®gle g√©n√©rale, cette m√©trique est normalis√©e. </font><font style="vertical-align: inherit;">Divisez le DCG de chaque utilisateur en le DCG le mieux class√© pour cet utilisateur. </font><font style="vertical-align: inherit;">La mesure r√©sultante est appel√©e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NDCG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (gain cumulatif actualis√© normalis√©). </font><font style="vertical-align: inherit;">Il est largement utilis√© pour √©valuer la qualit√© du classement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, chaque t√¢che a sa propre m√©trique. </font><font style="vertical-align: inherit;">Mais le probl√®me suivant n'est pas si √©vident.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probl√®me de choix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est d√©j√† assez difficile √† d√©crire, mais je vais essayer. Il s'av√®re que les gens accordent des notes √©lev√©es non pas aux films qu'ils </font><font style="vertical-align: inherit;">regardent </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habituellement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Les chefs-d'≈ìuvre de films rares, les classiques, l'art et l'art obtiennent les meilleures notes, mais cela n'emp√™che pas les gens le soir apr√®s le travail de regarder avec plaisir une bonne com√©die, un nouveau film d'action ou un op√©ra spatial spectaculaire. Ajoutez √† cela que les utilisateurs de Yandex n'ont pas appr√©ci√© tous les films qu'ils ont regard√©s une fois et quelque part. Et si nous nous concentrons uniquement sur les notes les plus √©lev√©es, nous courons le risque d'obtenir un flux de film recommand√© qui semblera logique, les utilisateurs peuvent m√™me reconna√Ætre sa qualit√©, mais √† la fin ils ne regarderont rien.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, voici √† quoi ressemblerait mon flux de film si nous le classions par note personnelle et si nous ne savions rien de mes vues par le pass√©. Grands films. Mais je ne veux pas les revoir aujourd'hui.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5y/gz/ot/5ygzotyougvrodtwyb_nlbp03va.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'av√®re que dans les conditions de cotes √©parses et d'une p√©nurie de films avec des cotes √©lev√©es, il vaut la peine de regarder non seulement la cote. Eh bien, nous formons la voiture pour pr√©dire le visionnement du film recommand√©, et non la note. Cela semblerait logique, car l'utilisateur le souhaite. Qu'est-ce qui pourrait mal se passer? Le probl√®me est que la bande sera remplie de films, dont chacun est tout √† fait adapt√© √† un passe-temps facile le soir, mais leur cote personnelle sera faible. Les utilisateurs, bien s√ªr, feront attention au fait qu'il n'y a pas de ¬´chefs-d'≈ìuvre¬ª dans le flux, ce qui signifie que la cr√©dibilit√© des recommandations sera compromise, ils ne regarderont pas ce qu'ils verraient autrement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, nous avons compris qu'un √©quilibre entre les deux extr√™mes √©tait n√©cessaire. Il est n√©cessaire de former la machine afin que le potentiel de visualisation et la perception de la recommandation par une personne soient pris en compte.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment fonctionnent nos recommandations</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notre syst√®me fait partie de la recherche, nous devons donc formuler des recommandations tr√®s rapidement: le temps de r√©ponse du service doit √™tre inf√©rieur √† 100 millisecondes. </font><font style="vertical-align: inherit;">Par cons√©quent, nous essayons d'effectuer autant d'op√©rations lourdes que possible hors ligne, au stade de la pr√©paration des donn√©es. </font><font style="vertical-align: inherit;">Tous les films et utilisateurs du syst√®me de recommandation sont repr√©sent√©s par des profils (il est important de ne pas les confondre avec le compte), qui incluent des cl√©s d'objet, des compteurs et des incorporations (en d'autres termes, des vecteurs dans un certain espace). </font><font style="vertical-align: inherit;">Des profils de films sont pr√©par√©s chaque jour sur YT ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire ¬´Yt¬ª</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et charg√©s dans la RAM des machines qui r√©pondent aux demandes. </font><font style="vertical-align: inherit;">Mais avec les utilisateurs, tout est un peu plus compliqu√©.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chaque jour, nous cr√©ons √©galement le profil utilisateur principal sur YT et l'envoyons au magasin Yandex, √† partir duquel vous pouvez obtenir le profil en quelques dizaines de millisecondes. Mais les donn√©es deviennent rapidement obsol√®tes si une personne regarde et √©value activement la vid√©o. Ce n'est pas bon si les recommandations commencent √† prendre du retard. Par cons√©quent, nous lisons le flux d'√©v√©nements utilisateur et formons la partie dynamique du profil. Lorsqu'une personne saisit une demande, nous combinons le profil du r√©f√©rentiel avec un profil dynamique et obtenons un profil unique, qui peut √™tre en retard sur la r√©alit√© pendant quelques secondes seulement.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela se produit hors ligne (c'est-√†-dire √† l'avance), et maintenant nous passons directement √† l'ex√©cution. Ici, le syst√®me de recommandation comprend deux √©tapes. Le classement de la base de donn√©es compl√®te des films est trop long, donc √† la premi√®re √©tape, nous s√©lectionnons simplement plusieurs centaines de candidats, c'est-√†-dire que nous trouvons des films qui peuvent int√©resser le spectateur. Cela inclut √† la fois les peintures populaires et celles proches de l'utilisateur dans certaines int√©grations. Il existe plusieurs algorithmes pour trouver rapidement les voisins les plus proches, nous utilisons HNSW (Hierarchical Navigable Small World). Avec lui, nous trouvons les films les plus proches de l'utilisateur en seulement quelques millisecondes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la deuxi√®me √©tape, nous extrayons des fonctionnalit√©s (parfois elles sont √©galement appel√©es facteurs) par films, utilisateur et paire utilisateur / film et </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">classons les</font></a><font style="vertical-align: inherit;"> candidats √† l'aide de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CatBoost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Permettez-moi de vous rappeler: nous avons d√©j√† r√©alis√© que nous devons nous concentrer non seulement sur les vues, mais √©galement sur d'autres caract√©ristiques de qualit√© des recommandations, donc pour le classement, nous sommes arriv√©s √† une combinaison de plusieurs mod√®les CatBoost form√©s pour diff√©rentes cibles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour trouver des candidats, nous utilisons des plongements √† partir de plusieurs d√©compositions matricielles: de la version classique d'ALS, qui pr√©dit l'√©valuation, aux variations plus complexes bas√©es sur SVD ++. </font><font style="vertical-align: inherit;">En tant que fonctionnalit√©s de classement, des compteurs d'√©v√©nements et des films utilisateur simples, des CTR pour divers √©v√©nements, ainsi que des mod√®les pr√©-form√©s plus complexes sont utilis√©s. </font><font style="vertical-align: inherit;">Par exemple, la pr√©diction ALS agit √©galement comme une fonctionnalit√©. </font><font style="vertical-align: inherit;">L'un des mod√®les les plus utiles est le r√©seau neuronal Recommender DSSM, dont je parlerai probablement un peu plus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recommender DSSM</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DSSM est un r√©seau neuronal √† deux tours. Chaque tour construit son propre encastrement, puis la distance cosinus est prise en compte entre les encastrements, ce nombre est la sortie du r√©seau. Autrement dit, le r√©seau apprend √† √©valuer la proximit√© d'objets dans les tours gauche et droite. Des r√©seaux de neurones similaires sont utilis√©s, par exemple, dans une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recherche</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur le </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Web</font></a><font style="vertical-align: inherit;"> pour trouver des documents pertinents pour une requ√™te. Pour la t√¢che de recherche, une demande est envoy√©e √† l'une des tours et un document √† l'autre. Pour notre r√©seau, le r√¥le de la demande est jou√© par l'utilisateur, et les films agissent comme des documents.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tour du film construit une int√©gration bas√©e sur les donn√©es du film: c'est le titre, la description, le genre, le pays, les acteurs, etc. Cette partie du r√©seau est assez similaire √† la recherche. Cependant, pour le spectateur, nous voulons utiliser son histoire. Pour ce faire, nous agr√©gons l'int√©gration des films de l'histoire avec le fondu dans le temps depuis le moment de l'√©v√©nement. Ensuite, en plus de l'incorporation totale, nous appliquons plusieurs couches du r√©seau et, par cons√©quent, nous obtenons une incorporation de taille 400.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lt/3k/v0/lt3kv0xtsbzqiyxq_333j3sgkua.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous prenez imm√©diatement en compte l'int√©gralit√© de l'historique de l'utilisateur dans l'int√©gration, cela ralentira consid√©rablement la formation. </font><font style="vertical-align: inherit;">Par cons√©quent, nous allons √† l'astuce et apprenons le r√©seau en deux √©tapes. </font><font style="vertical-align: inherit;">Tout d'abord, apprenez le InnerDSSM plus simple. </font><font style="vertical-align: inherit;">A l'entr√©e, il ne re√ßoit que les 50 derniers √©v√©nements de l'historique de l'utilisateur sans se diviser en types d'√©v√©nements (vues, notes ...). </font><font style="vertical-align: inherit;">Ensuite, nous recyclons l'InnerDSSM r√©sultant tout au long de l'historique de l'utilisateur, mais avec une ventilation en types d'√©v√©nements. </font><font style="vertical-align: inherit;">Nous obtenons donc OuterDSSM, qui est utilis√© lors de l'ex√©cution. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisation d'un r√©seau d'ex√©cution dans le front n√©cessite beaucoup de ressources informatiques. </font><font style="vertical-align: inherit;">Par cons√©quent, nous enregistrons les incorporations de la tour de cin√©ma dans la base de donn√©es et les int√©grations en fonction de l'historique des utilisateurs sont mises √† jour presque en temps r√©el. </font><font style="vertical-align: inherit;">Ainsi, lors du traitement de la demande, il suffit d'appliquer une petite partie d'OuterDSSM et de calculer les cosinus, cela ne prend pas beaucoup de temps.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nos recommandations sont d√©j√† disponibles dans notre recherche (par exemple, sur demande </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[que voir]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), dans le service Yandex.Air, et une version adapt√©e de cette technologie est √©galement utilis√©e dans Yandex.Stations. </font><font style="vertical-align: inherit;">Mais cela ne signifie pas que nous pouvons nous d√©tendre. </font><font style="vertical-align: inherit;">Nous formons constamment de nouveaux mod√®les, appliquons de plus en plus de donn√©es, essayons de nouvelles approches de formation et de nouvelles m√©triques de qualit√©. </font><font style="vertical-align: inherit;">√Ä mon avis, plus la zone est ancienne, plus elle est difficile √† d√©velopper. </font><font style="vertical-align: inherit;">Mais c'est le principal int√©r√™t des sp√©cialistes.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497376/index.html">Que faire avec les joues rouges pour que votre nez ne grossisse pas</a></li>
<li><a href="../fr497382/index.html">8 difficult√©s des √©quipes Agile pendant la pand√©mie: ¬´Ndagwurugwu nke anya mmiri¬ª, ·ª•j·ªç, oke iwe, ag·ªçnar, COVID-19</a></li>
<li><a href="../fr497384/index.html">Comment √©tablir un acc√®s s√©curis√© aux serveurs en mode distant</a></li>
<li><a href="../fr497386/index.html">Les boursiers VK Fellowship parlent de l'avenir de l'enseignement √† distance, de la discipline et de la socialisation</a></li>
<li><a href="../fr497388/index.html">Un millioni√®me tireur √† partir de z√©ro: un parcours de d√©veloppeur ind√©pendant</a></li>
<li><a href="../fr497392/index.html">Comment √©voluer d'un √©tudiant ing√©nieur logiciel?</a></li>
<li><a href="../fr497394/index.html">Dix ressources avec des cours d'informatique disponibles gratuitement en avril</a></li>
<li><a href="../fr497396/index.html">Coll√®gues: ni ami ni ennemi, mais comment?</a></li>
<li><a href="../fr497398/index.html">Processeurs serveurs AMD EPYC Rome 7x32 - Enregistrer des performances monoc≈ìur</a></li>
<li><a href="../fr497402/index.html">Comment cr√©er un langage de programmation Python?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>