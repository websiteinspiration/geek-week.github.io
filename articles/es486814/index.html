<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§∑üèø üöµüèø üàπ Zabbix: la topolog√≠a de red es clara y autom√°tica üèáüèª üë©üèª‚Äçüç≥ üõåüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øAdministrar una red m√°s grande que un host local? ¬øNo controlas, pero quieres aprender? Te invitamos al curso ‚ÄúLinux. Nivel 5. Zabbix. Supervisi√≥n de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zabbix: la topolog√≠a de red es clara y autom√°tica</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/486814/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øAdministrar una red m√°s grande que un host local? ¬øNo controlas, pero quieres aprender? Te invitamos al curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúLinux. Nivel 5. Zabbix. Supervisi√≥n de la infraestructura de TI de una empresa "</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . En el seminario gratuito del Centro de capacitaci√≥n de especialistas en la Universidad T√©cnica del Estado de Mosc√∫ Bauman, aprender√° a ense√±arle a Zabbix a monitorear la red autom√°ticamente: encontrar nodos existentes y agregar nuevos, dibujar y actualizar la topolog√≠a. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iv/1c/ut/iv1cutamccowubgbjxpirduuwwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El seminario ser√° impartido por el maestro l√≠der del centro "Especialista" en Bauman MSTU, el administrador principal del sistema de la red de MSTU. N.E.Bauman Vyacheslav Aleksandrovich Lokhturov. Reg√≠strese (o mire las grabaciones) para nuestros </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seminarios gratuitos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Hola a todos! </font><font style="vertical-align: inherit;">Mi nombre es Vyacheslav Lokhturov. </font><font style="vertical-align: inherit;">Trabajo como ingeniero en la Universidad T√©cnica del Estado de Mosc√∫ Bauman. </font><font style="vertical-align: inherit;">Desde que me gradu√© en 1997, he estado trabajando como ingeniero. </font><font style="vertical-align: inherit;">Al mismo tiempo, ense√±o en el centro de capacitaci√≥n No. 1 "Especialista", una compa√±√≠a que es amigable MSTU. </font><font style="vertical-align: inherit;">Muchos otros maestros y personal trabajan all√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tema del seminario web ser√° parte de mi trabajo como ingeniero: un maravilloso sistema de monitoreo ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Topolog√≠a de red: antecedentes, Wikipedia en Baumanka, fuentes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La grabaci√≥n del seminario web se puede ver en este enlace: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://wiki.val.bmstu.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un formato wiki. Mis direcciones de correo electr√≥nico son: val@bmstu.ru, val@specialist.ru. Este </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lo uso como ingeniero. Hay muchos materiales diferentes. Si no le gusta, hay muchos materiales en Internet sobre su tema con nosotros ("Zabbix"). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde el punto de vista del material did√°ctico y la ense√±anza, utilizo la secci√≥n "Materiales sobre la metodolog√≠a de los cursos de lectura": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/xt/bc/dxxtbcel7fbzpfzncdnohifiopy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y hay una secci√≥n con seminarios web. Para cada una de las lecturas realizadas por m√≠ hay un registro aqu√≠: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y9/sy/on/y9syon5yqio6tinrekmuwju2qec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
inmediatamente dije: ‚ÄúSi lo hacemos, ¬°hagamos lo mejor! Veamos c√≥mo se crea autom√°ticamente la topolog√≠a de red en Zabbix. En 45 minutos tengo que decir esto.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cuanto a la topolog√≠a de la red: en Bauman MSTU, una red enorme; en consecuencia, la topolog√≠a de red es lo que realmente necesitamos durante mucho tiempo. Hist√≥ricamente, Zabbix no era el sistema que utilizamos en la etapa inicial. Al igual que todas las personas de departamentos como ciencias de la computaci√≥n, administraci√≥n, sistemas inform√°ticos, complejos y redes, a todos nos gustaba programarnos, y ahora programamos ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenemos una peque√±a Wikipedia que se utiliza para el trabajo. Y entre los elementos de esta Wikipedia hay una secci√≥n dedicada al cambio de red. El acceso a esta Wikipedia todav√≠a est√° cerrado por una peque√±a VPN: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/th/kw/nwthkwj2jsj-srqt6xkqrvgpps0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora te mostrar√© c√≥mo se ve la topolog√≠a de red en nuestra universidad. Vale la pena verlo; y luego comparar con el resultado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ma/a2/7h/maa27hc-e9fct-_lqqkig-pn6gs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me parece que todo est√° claro: todos los conmutadores y su ruta al conmutador ra√≠z; </font><font style="vertical-align: inherit;">Si falta algo, nos recuperaremos r√°pidamente de este archivo de texto. </font><font style="vertical-align: inherit;">La topolog√≠a de la red se construye a diario. </font><font style="vertical-align: inherit;">Todo est√° bien, pero no espectacular, por supuesto. </font><font style="vertical-align: inherit;">Es dif√≠cil de vender. </font><font style="vertical-align: inherit;">Por lo tanto, tenemos tal esquema en la universidad.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La topolog√≠a de red es necesaria cuando alg√∫n conmutador ha desaparecido. </font><font style="vertical-align: inherit;">Para entender d√≥nde estaba conectado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intentaremos ver algo m√°s espectacular. Y una cierta referencia a lo que haremos es este art√≠culo en el foro: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kj/an/rq/kjanrq-tf4gagfaq3sclcshi7ji.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5r/uw/v-/5ruwv-zvi6w7keseask1zaxrctm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dice que hay alg√∫n tipo de script maravilloso escrito en mi antiguo idioma Perl favorito, que el equipo de la red encuesta, hace algunos conclusiones y de alguna manera alimenta milagrosamente los resultados a Zabbix. Pero no usaremos Perl, sino que utilizaremos algo m√°s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos despedimos de lo que tenemos. Pasemos a practicar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fu/jf/vx/fujfvxfzwxeijmvenkvnsghzxzs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ser√© feliz si puedes reproducir todo esto en casa y tratar de prepararte para todo lo que sea posible. Despu√©s del seminario web, querr√° repetir todo y comenzar con el hecho de que necesita implementar Zabbix, una m√°quina virtual, una red. ¬øComo hacer esto?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En casa, escribe el comando ipconfig y ve que tiene una red IP de este tipo en casa (tal vez una diferente, pero a menudo esta): tengo la </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nw/0m/sd/nw0msdf_bqqc1rbf2v9poyhvd8m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quinta direcci√≥n (192.168.1.5) aqu√≠, y puede tener la 20 o 30 ... Seguramente hay un enrutador Wi-Fi que emite estas direcciones. </font><font style="vertical-align: inherit;">Por lo tanto, ahora dibujar√© una topolog√≠a basada en lo que puede haber en su hogar para que pueda reproducirla:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z_/il/pv/z_ilpvbesmx9x8x0ntvfyvgz6by.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tienes un enrutador WIFI.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El sistema en el que quieres jugar el webinar.</font></font></li>
<li>  192.168.1/24 ‚Äì 1-  WI-FI-,  5-, , ‚Äì   .<br>
   .   ,    ‚Äì   ,     2, 10, 20 ,     .  ,   linux-,    ¬´¬ª.            ,     100. ,       192.168.1.100.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øD√≥nde conseguir un auto? </font><font style="vertical-align: inherit;">Nada impide tomar la distribuci√≥n de Linux. </font><font style="vertical-align: inherit;">Soy un gran admirador de esta distribuci√≥n. </font><font style="vertical-align: inherit;">No criaremos holivares: lo amo, lo elijo, lo uso en cursos. </font><font style="vertical-align: inherit;">Puede tomar e instalar desde este sitio: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fw/0p/7_/fw0p7_zevdd2b-hy4_myzkofi78.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para que no pasemos 45 minutos instalando Debian, tomar√© una imagen preinstalada lista para usar. </font><font style="vertical-align: inherit;">Qui√©n lo necesita: escriba al correo, le enviar√© esta imagen, aunque no hay nada particularmente sobresaliente (solo para no perder el tiempo instalando): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hd/sv/ju/hdsvju1d3xv2tlcppgmw7ze0fhk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mientras est√° instalado, puede ver la secci√≥n en el manual ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despliegue de stand</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay una historia sobre el comando ipconfig: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/3m/a3/uz3ma3gdidyrxl4ni-foi1xerse.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y luego, cuando la m√°quina se da vuelta: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1r/by/6n/1rby6nfa4-ie37px_jgo2gzdmsg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puede dar un nombre en la configuraci√≥n, darle m√°s RAM: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yb/ru/el/ybruel8q66rozvw0tlyjxg3gaxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hay diferentes virtualizaciones: VirtualBox es bueno para uso dom√©stico. En la empresa, nosotros y mis amigos usamos VSphere (estamos muy satisfechos con el producto de VMware), pero hay cursos m√°s que suficientes para VirtualBox. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Red: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9s/ie/ao/9sieaok8u0wwjefjyo8fgmze0y4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dado que estamos diciendo que esta m√°quina estar√° conectada a nuestra red, podemos trabajar con ella; debe estar conectada por un puente a un adaptador f√≠sico. Regenerar√© la direcci√≥n Mac. Lanzo nuestra m√°quina virtual:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jx/tu/vw/jxtuvw-er7hyjbhh8de-zowhqcg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y despu√©s de comenzar, hago una configuraci√≥n. </font><font style="vertical-align: inherit;">El manual enumera los archivos que deben editarse: asigne un nombre a la m√°quina, es conveniente editar el archivo hosts, resolv.conf (responsable del cliente DNS) y la direcci√≥n IP elegida por nosotros; estos cuatro archivos deben editarse. </font><font style="vertical-align: inherit;">Intentar√© hacerlo lo m√°s r√°pido posible.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despliegue de Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La contrase√±a de este usuario (root) se establece inmediatamente en la imagen, ¬°nunca la use en la pr√°ctica! Solo para ahorrar tiempo, uso una cuenta privilegiada: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cf/dk/mt/cfdkmtiq3gditwh0q8d5obxhqyw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el manual enumera los archivos que deben editarse. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ou/ww/7a/ouww7abmkynaldx0c53orqbq1fi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, le doy el nombre a nuestra m√°quina (servidor de monitoreo Zabbix): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o7/aw/ey/o7aweyooy2otoditfxa76k4g6dw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
archivo Hosts: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/zu/m3/xkzum3abl5tgowzag-aq0eew_us.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cambie la direcci√≥n a la cent√©sima y el nombre de nuestro dominio inventado (cada oyente en nuestros cursos tiene su propio, individual, como una red con un dominio): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/sk/g3/imskg32tktggjcqyi-ue7phl_ww.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© m√°s queda? Resolv.conf (cliente DNS): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/_d/pb/dj_dpbav7eoi7w59gjgnaclace4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Corp1.un se acoplar√° a nombres cortos, y su enrutador WIFI generalmente funcionar√° como un servidor DNS: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nc/ao/mv/ncaomvyveyk93fjj6zklqzpvfni.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øqu√© queda? El archivo grande m√°s importante es la red / interfaces. Aqu√≠ hay una plantilla para diferentes cursos, muchas interfaces:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/yw/ak/dmywakkly3qdswu_mkrpp1dxy0u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero nuestro autom√≥vil tendr√° una interfaz. </font><font style="vertical-align: inherit;">Ser√° un servidor de monitoreo con la direcci√≥n n√∫mero 100 e ir√° a Internet a trav√©s del primero: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2h/og/jv/2hogjvlx7gd5uxfxlvgmbalopdq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tal vez, no es necesario, pero es m√°s r√°pido usar todos los archivos: reinicie la m√°quina.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar e iniciar un servicio en Debian</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los zabbiks se pueden instalar de varias maneras. Seg√∫n Zabbix, hay un excelente sitio web con documentaci√≥n (por cierto, en ruso se admite la secci√≥n activa). En consecuencia, se ofrecen varias opciones aqu√≠. Soy un gran defensor de la instalaci√≥n de software desde un repositorio regular. No es casualidad por eso eleg√≠ Debian: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-9/eu/2c/-9eu2cfgrndehx_bvjyjxo_gjwg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/pk/ha/la/pkhalax-z8jy1_vivipznmnozem.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
por cierto, si todo se hace bien, ahora deber√≠a poder conectarme a mi sistema. Intentemos hacerlo. Tomo mi cliente SSH favorito y me conecto al sistema 192.168.1.100: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sf/me/tr/sfmetrwaaftvvrjxe9jetdjpv3a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afortunado: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/qe/zb/reqezbzkzbnynazdnxp9blstocq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nuevo, no es muy correcto que la ra√≠z est√© permitida aqu√≠: ¬° </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/5j/_e/bu5j_eloihgsp4_8heomyuedskc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nunca haga esto en una empresa! Aqu√≠ solo ahorra tiempo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/en/kr/k6/enkrk6smoeftphgdxai8xooemcu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora tenemos que instalar Zabbix. </font><font style="vertical-align: inherit;">Siendo un gran amante y partidario del uso de software b√°sico y un oponente de conectar repositorios de terceros, pondr√© la versi√≥n que est√° en este Debian. </font><font style="vertical-align: inherit;">Una vez m√°s, gracias a los autores de "Debian", simplemente marque la instalaci√≥n de dicho paquete: ¬° </font></font><br>
<br>
<img src="https://habrastorage.org/webt/id/ad/4z/idad4z6qgksfxjtpl0zh8z6wu3c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
record√© una cosa m√°s! </font><font style="vertical-align: inherit;">Acabamos de instalar el sistema; necesitamos sincronizar el repositorio (actualizaci√≥n apta): por lo </font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/ho/1w/suho1w8zayqwukaczax17o2acgo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tanto, es suficiente escribir el comando de instalaci√≥n del servidor zabbix con soporte para la base de datos (DB) de su informaci√≥n en SQL, ya que se instalar√°n muchos componentes (se instalar√°n un par de minutos) :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/1y/ok/hj1yokti8khkpotcwlzkfu-lnji.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øEn qu√© consiste Zabbix?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix consta de los siguientes componentes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servidor "Zabbix";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âl est√° trabajando activamente con la configuraci√≥n, que configuraremos de forma manual y autom√°tica;</font></font></li>
<li>      ,       ;        MySQL (   ‚Äì   ),    ( ¬´¬ª      ‚Äì PostgreSQL,  Oracle ).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que podamos trabajar con Zabbix, se utiliza el llamado frontend. Frontend Zabbix es una aplicaci√≥n escrita probablemente en PHP (tal vez no todo, pero la mayor√≠a). En consecuencia, la propia aplicaci√≥n utiliza un servidor web. Hasta ahora, solo se ha puesto esta parte (ahora esperaremos su instalaci√≥n): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-p/f7/x1/-pf7x13a5ap9clor_mxdrs3nj2i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminado. Ahora, dado que Zabbix usa la base de datos, necesitamos crearla siguiendo la documentaci√≥n. Para crear una base de datos, usar√© un script simple: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/az/7j/lz/az7jlzl5ymcajcp1lkhebgv1nxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no detallar√© qu√© comandos significan qu√©. Si alguien trabaj√≥ con el DBMS, ver√° algo familiar: el nombre de la base de datos, etc. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6v/bd/kk/6vbdkkjydgvlkrnslc9_6s5xvr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, usando este script, creo la base de datos:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9-/ds/v2/9-dsv2o62nrjbkpzx6jevg4ax_q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y llene esta base de datos con metadatos. Hay varios archivos que describen qu√© tablas deber√≠an ser, qu√© atributos, par√°metros, etc. (todo esto se hace, nuevamente, de acuerdo con la documentaci√≥n): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/31/sd/zj31sdartmnaavfhghqy7im32bq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, ahora en MySQL estamos acumulando metadatos que Zabbix usar√° para almacenar la configuraci√≥n y los resultados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ro/1p/0b/ro1p0baiwev54t9ttf1k-36zyj4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Pasar√© un tiempo mirando lo que √©l crear√° all√≠ (habr√° una gran cantidad de tablas creadas). Zabbix como producto se ha desarrollado durante m√°s de diez a√±os y se esfuerza constantemente por mejorar cada vez m√°s, por lo tanto, la estructura de datos all√≠ es bastante pesada. Pero todo esto est√° "bajo el cap√≥". Nosotros, como administradores, trabajaremos con una aplicaci√≥n front-end externa, con la cual todo ser√° simple, claro y accesible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seg√∫n la documentaci√≥n, por alg√∫n motivo, varios archivos. Pero como lo hicieron, ¬°eso significa que saben lo que necesitan! La base de datos est√° lista: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/sf/pg/qlsfpgwecdjkq43bvi7-ddnbr4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora, de acuerdo con la documentaci√≥n, este componente debe explicarse: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u-/n0/vl/u-n0vlfpaz12mtjtdkvjekaf1za.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
explique que debe funcionar con la base de datos, conect√°ndose con un nombre de usuario y contrase√±a espec√≠ficos. Esto se hace a trav√©s del archivo de configuraci√≥n: </font><font style="vertical-align: inherit;">
Insertar al </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5x/pm/aa/5xpmaappvlhi6dtjmzb90m8dbb4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
final del archivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/89/gh/ul/89ghulcpbzbzw913qbznnaecsjm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n8/oo/_y/n8oo_yuz-elzo7w8scuvnwsjxo8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ describimos que el servidor de la base de datos est√° aqu√≠ bajo nuestra cuenta: El </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u5/vt/wi/u5vtwiauap-aibs5mbmgersdnji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paquete "Debian" para "Zabbix" no significa inicio autom√°tico. Aqu√≠ hay un equipo del gran y terrible SystemD, sobre el que hay una gran cantidad de holivars: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4t/mw/_9/4tmw_9on0khv1_i8flmuoufthkm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hace que el lanzamiento de Zabbix sea autom√°tico despu√©s del arranque del servidor. Inicie Zabbix: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/66/kt/aj/66ktajsilnljqvtg8rff03vw5ki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
estos dos componentes se est√°n ejecutando:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/pp/ih/jfppihb3mhcy6oc9ma6rzmxhqsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya puede monitorear, completar la configuraci√≥n. </font><font style="vertical-align: inherit;">Pero es dif√≠cil hacer algo bueno hasta que la interfaz est√© configurada ... Sin embargo, al principio, la etapa perdida ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despliegue de Zabbix </font><font style="vertical-align: inherit;">Localizaci√≥n de zona horaria</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desplegu√© la imagen y el momento equivocado: la </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/mw/-r/xumw-rual8waq_g1bs36hd660g8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fecha es correcta. </font><font style="vertical-align: inherit;">Nuestra zona horaria est√° mal, as√≠ que la correg√≠ de tal manera:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/if/st/aq/ifstaqnjg4rrepsxshjhw_4o9p0.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llegando a la interfaz. </font><font style="vertical-align: inherit;">Instalar e iniciar la interfaz web</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debian deber√≠a instalar dicho paquete (despu√©s de instalar el servidor web Apache): se instalar√° </font></font><br>
<br>
<img src="https://habrastorage.org/webt/al/pt/i5/alpti55pbgnyvxlkwg6cusjayje.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PHP, una biblioteca para conectar programas escritos en PHP con MySQL. En general, estoy lanzando: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oh/fx/ow/ohfxown1obtvst8-eqn988l5kjy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no es necesario realizar ninguna acci√≥n durante mucho tiempo, todo se har√° autom√°ticamente: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/gr/6q/fdgr6qma4k3n_ii43xiia9xpkmc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora estamos poniendo este componente aqu√≠: la interfaz de Zabbix; un servidor web, y le explicaremos que necesita trabajar con el servidor Zabbix y el DBMS: a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/xo/by/vuxobykpvrchotjwrd6locuvp7e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
trav√©s del servidor web gestionaremos el Zabbix y a trav√©s de √©l veremos qu√© supervis√≥ all√≠.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est√° casi establecido, y ahora veremos que tiene una relaci√≥n cercana con nuestro pa√≠s. </font><font style="vertical-align: inherit;">Fue desarrollado como una aplicaci√≥n de alguna persona que trabajaba en un banco. </font><font style="vertical-align: inherit;">Decidi√≥ configurar el monitoreo y lo tom√≥ y escribi√≥ su programa en lugar de usar el terminado. </font><font style="vertical-align: inherit;">Trabaj√≥ en Riga, y usted y yo estamos en Mosc√∫: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rd/p-/uu/rdp-uuppjegozljjxljdvkcyctk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en este archivo ‚Üë es necesaria la inicializaci√≥n de PHP ‚Üì para hacer esto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/zd/w6/afzdw6duwvdchcizhxre6pg-owm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n9/uv/11/n9uv119oq-21nip3nyevkey0c50.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no profundizar√© sobre c√≥mo se configura la aplicaci√≥n web en Debian. </font><font style="vertical-align: inherit;">Es suficiente para conectar la configuraci√≥n que vino del paquete Zabbix y reiniciar el servidor web Apache:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/wq/dw/cjwqdwnivhxabf6kbey1qs3yyso.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con√©ctese a la interfaz para configurar Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Casi listo para conectarse a la interfaz. </font><font style="vertical-align: inherit;">Solo queda explicarle d√≥nde se encuentra el servidor de la base de datos. </font><font style="vertical-align: inherit;">Hay dos opciones, y lo haremos a trav√©s del asistente. </font><font style="vertical-align: inherit;">Para ello, necesita un archivo donde se escribir√°n las configuraciones: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/hh/1i/nphh1imvszjdktstdx-insdzihs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
un servidor web debe tener permisos de escritura para este archivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x7/dj/_o/x7dj_oz6sci-rbq_xqem-hyt_sg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
despu√©s de lo cual puede intentar conectarse en un navegador. </font><font style="vertical-align: inherit;">Puedes hacerlo por direcci√≥n IP. </font><font style="vertical-align: inherit;">Mi DNS est√° configurado, as√≠ que aprovechar√© esta oportunidad: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0n/1h/lf/0n1hlfvvisfesceo4d-rv2mra7g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tenemos el Asistente Zabbix, donde har√© clic en Siguiente, ya que la mayor√≠a ya lo ha instalado: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5m/co/dc/5mcodckrskfsyf0rlu0omicrlnc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qo/qt/o_/qoqto_wcxr0gc_kwsr3ia12muhw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5w/1r/pu/5w1rpu_jvw5veghgbvrjltn722g.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/zg/jw/ng/zgjwngenwdojjj-jkx6um7kfnaa.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/li/i7/t2/lii7t2ybvosn2l1dg0wc4tf2exm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lz/gv/va/lzgvvams559x1iofedcqifizxy0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuestro Zabbix est√° listo para conectarse. </font><font style="vertical-align: inherit;">Ingresamos el nombre de usuario y la contrase√±a: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jx/tf/53/jxtf53atwbmrcyx9pjsiaqauffy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configuraci√≥n, hosts ... No monitorea ning√∫n host - "Zabbix" hasta ahora solo est√° listo para monitorearse a s√≠ mismo, si instalamos el Agente Zabbix:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/58/97/zv/5897zvb2kgkutggf-ccxvkpqlsy.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expande la nube de interruptores</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero no habr√° agentes de Zabbix para nuestro seminario web. ¬°Es demasiado simple y poco interesante! Usted y yo estaremos monitoreando una red distribuida, cadenas de interruptores de comunicaci√≥n, por lo que necesitamos esta cadena de interruptores. ¬øD√≥nde conseguirlos? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suger√≠ usar la virtualizaci√≥n de Virtual Box. Le permite emular PC (computadoras), y ahora le presentar√© otro emulador, tambi√©n utilizado en nuestros cursos. Un gran producto se llama Graphical Network Simulator (GNS): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/f8/d_/bef8d_bgqsw6r8xweossqbswqp8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
este emulador le permite emular equipos Cisco. Aqu√≠ implementaremos nuestra nube de conmutadores. Ser√° necesario volver a encontrar el nombre del proyecto (guardemos la configuraci√≥n, ¬øy si se necesita ma√±ana?):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vr/cw/xi/vrcwxiidkq-rt6rlkrw3bohkee8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si desea aprender a trabajar con equipos Cisco en casa, instale este GNS por usted mismo y haga lo que hacemos en el seminario, es decir, ahora implementaremos una nube de conmutadores. El problema es que GNS no tiene conmutadores (no hay emulaci√≥n aqu√≠), solo emulaci√≥n de enrutador. Por lo tanto, tenemos que poner el enrutador (arrastrar con el cursor del mouse): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3q/kf/w9/3qkfw98g1cll_antal4ffvb3j8e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y de alguna manera convertirlo en un interruptor. ¬øC√≥mo hacer una emulaci√≥n de interruptor en GNS? Necesitamos tomar el enrutador de la serie 36. Puede llamarlo un interruptor (haga clic derecho en el interruptor): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ds/hg/zr/dshgzra7cwuo96scx-s5vzxxgmc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede dibujar un interruptor: ¬ø </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dw/zb/xk/dwzbxklfnlvwgmewwyagg9ax61s.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/kh/ht/zl/khhtzlj_kwjdmmgofbbzrs1yove.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/v8/ly/wa/v8lywaans322t7f3vnrllvhidic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece? Pero se convertir√° en un verdadero interruptor solo cuando agregue dicha placa all√≠:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/x9/qk/cix9qkmxc6ow8v5iwqk-atxl_fu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta l√≠nea de enrutadores Cisco, puede colocar una placa Ethernet de 16 puertos. Y para una gran cantidad de trabajo de laboratorio relacionado con interruptores, esta placa es bastante adecuada. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Debemos tener una nube de interruptores, as√≠ que ahora har√© esta nube (cambiar el nombre, la imagen e insertar el tablero). Comencemos con tres interruptores, y si tenemos tiempo, agregaremos un cuarto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/ti/rv/bftirv6azk16f-do5lt1uqntz4m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nos conectaremos, sin apuntar particularmente hacia d√≥nde. Nuestra topolog√≠a tendr√° que construirse autom√°ticamente: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/4d/uf/n24dufxk_bsi44_xj95nvga6afi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/mq/9b/lq/mq9blquvwehjkbmvt5pjlplgsjs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wj/gt/f8/wjgtf8aqoy1vnx-h2-kiaw8oa7q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora estoy comenzando este negocio: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/e6/f1/pwe6f1uu9h0idchwsfqj6xpu_ae.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felicitaciones a quienes est√°n viendo por primera vez c√≥mo funciona Cisco, para que pueda configurar r√°pidamente el conmutador Cisco. Mientras tanto, comienzan con nosotros ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es nuestro sistema Windows (Windows 7) y Debian: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i6/ve/uk/i6veukk0v9begz_gtkanjnx5sme.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aqu√≠ la virtualizaci√≥n GNS3 y la nube de conmutadores:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xu/jw/6t/xujw6t_eaje5nbl_56akrkthhwk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora est√° claro lo que est√° sucediendo: se utilizan dos sistemas de virtualizaci√≥n en el marco de una m√°quina. Virtualizaci√≥n de sistemas de PC (a la derecha) y virtualizaci√≥n de sistemas de Cisco (a la izquierda): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/66/hx/m2/66hxm25qeoexjawmjhhqpxy0yqa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
es necesario hacer que el servidor monitoree el equipo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yo/ek/fz/yoekfz41z6ls3l72ik5yv6hltps.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y para que pueda monitorearlo, este equipo debe tener direcciones en la misma red: por lo </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/rk/8x/verk8xxlqj_ldywe8dgkr7nw974.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tanto, sin pensar por mucho tiempo, Decid√≠ darles direcciones a estos interruptores (puntos 101, 102, 103 para los interruptores primero, segundo y tercero, respectivamente). El n√∫mero 100 es nuestro Linux: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/xr/nf/fhxrnfp__tatacrxnf0i1egxato.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puede configurarlo de la siguiente manera: vaya a un curso autorizado de Cisco y le informar√°n de forma econ√≥mica.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que el conmutador sea accesible para la administraci√≥n, debe realizar las siguientes configuraciones: ingrese al modo de configuraci√≥n, asigne un nombre adecuado, asigne una direcci√≥n IP a la interfaz y copie el resultado en la memoria a largo plazo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xr/hs/of/xrhsof2vqmanjxahxyeeuwkitwy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
preparar√© el pescado para no perder mucho tiempo en √©l. El primer switch se llamar√° switch1, la direcci√≥n IP es la 101. Copio esta configuraci√≥n al conmutador: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/4q/tc/he4qtcdsyugl9n7zlbsuvv1vdfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
haga doble clic en el conmutador deseado (ahora - conmutador1): </font><font style="vertical-align: inherit;">configure el conmutador1 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/ga/d5/uxgad5fmtc4q8xsr5tiry-yhkma.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gc/mn/75/gcmn75v8xtwb9icgrakorfvo_o4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
. Ahora, la configuraci√≥n para el segundo conmutador: llamado switch2, IP - 102: en </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/h_/g6/rzh_g6y2i_5c3jxkrm2e3flbu-i.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/w3/5a/p6/w35ap6gewzm3zpsggptzpljb6xc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
consecuencia, actuamos con el tercer conmutador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, ser√° genial si no solo nuestro servidor est√° disponible desde nuestra computadora con Windows, sino tambi√©n lo que hemos configurado ahora:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/va/jr/4yvajrk9agiaacpycpxs6ojp6gq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GNS3 es un buen sistema. </font><font style="vertical-align: inherit;">Hago tanto √©nfasis porque hay suficientes problemas: es un poco defectuoso, un poco ... Pero para aprender, es suficiente. </font><font style="vertical-align: inherit;">Esta pausa es alarmante para m√≠: espero que todo salga bien y nuestro interruptor responda despu√©s de un tiempo: ¬°Pero </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/3q/sl/gq3qslehu1-r-_skqokqhowkvqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no, no responder√°, no importa cu√°nto espere! </font><font style="vertical-align: inherit;">La comunicaci√≥n no es suficiente entre nuestra computadora y GNS. </font><font style="vertical-align: inherit;">GNS en s√≠, por lo que falta un elemento m√°s:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/14/vf/v914vfcq1mexkh_tyr96b_b4qe4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connect Cloud</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que estos conmutadores est√©n disponibles, debe usar el objeto Cloud: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/uw/wq/riuwwqk1kguxglmtswubooqglas.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hoy, Cloud lo usa en un sentido completamente diferente. Autores de GNS como proveedor de servicios de internet. En la configuraci√≥n de este objeto, puedo conectarlo a mi tarjeta de red: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/ri/r-/gwrir-quzcq745winbjfqhdry88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
parece aterrador, pero esta es la misma tarjeta de red: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yl/zq/ux/ylzquxupsoni1diu2tm2zuwbbwc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lb/pl/sk/lbplskyzgznkrrla6utigrs0qr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puse Cloud. Ahora debe conectar uno de los conmutadores a la nube (solo entonces puede aparecer una conexi√≥n): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e9/kz/40/e9kz40sqnsx0avn3qmpijjuc7lu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sospecho que en nuestro caso es m√°s r√°pido reiniciar el conmutador para que todo est√© activo. Lo √∫nico que quiero es asegurarme de que se guarde su configuraci√≥n. Por cierto, dentro de los conmutadores de ping ya deber√≠a ir: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/dl/hw/v6dlhwwha_rpetf4u-mvds8sqkg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Cisco real! El primer paquete desaparece, todo lo dem√°s est√° ah√≠:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ju/nm/dz/junmdzk7lnakhvcrpzjmmkydkgm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, no se usa emulaci√≥n natural aqu√≠, sino iOS. Por lo tanto, detengo el primer interruptor y comienzo de nuevo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nq/vf/vo/nqvfvonfdf78rrmvlfy2bti50t4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/e-/hl/jo/e-hljocq_u863hcwtqwuoy7ulzi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si todo est√° en orden, entonces deber√≠amos ver la conexi√≥n a trav√©s de la nube: mi Windows 7 se conectar√° a este equipo a trav√©s de una tarjeta de red (el equipo tiene direcciones IP en la misma red que Windows) . En general, este es el punto de conexi√≥n entre GNS y Windows. Veamos que hay una conexi√≥n: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/vo/dh/dbvodhj8-wdkwxqf4iycwymwheu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
veamos c√≥mo se siente ... Desde aqu√≠ responde: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lr/zm/or/lrzmorkfuglvex1hz7ir5togsti.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬° </font><font style="vertical-align: inherit;">Joder </font><font style="vertical-align: inherit;">! Ver√°, la conexi√≥n ha aparecido: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/hr/gh/-chrghapsw8pu8kmycxcjyixida.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
me encanta GNS porque es gratis, funciona ... ¬°Pero no todo es simple! Aqu√≠ hay una situaci√≥n divertida: nuestro Linux responde al sistema Windows, nuestro conmutador responde a Windows, pero el conmutador no responde al sistema Linux:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1f/wu/re/1fwureh4q3tz4quhdcm7nybwwh8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Para que el profesor pueda ponerse gris! Est√°s dando una lecci√≥n, pero el stand no funciona para las personas ... Bueno, nada, ¬°lo convenceremos! Gratis, barato y alegre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La experiencia ha demostrado: para que la conexi√≥n sea entre los tres elementos (desde Windows - a Linux, desde Linux - a GNS), debe ir a la configuraci√≥n de la tarjeta de red y seleccionar la opci√≥n extra√±a - ‚ÄúModo inaudible‚Äù (‚ÄúPermitir todo‚Äù): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fp/w8/op/fpw8opcow_frnq3ph1ksbtivq6w.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/jr/jv/ve/jrjvveot5clomchekaw9_xmyxc0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Venga a Virtualizaci√≥n! Este modo indiscriminado est√° en todas las decisiones (y tambi√©n en la "Esfera"). Est√° asociado con el paso de paquetes Ethernet, direcciones mac, etc. Vamos curso sobre virtualizaci√≥n, los detalles est√°n ah√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comenzamos nuestro sistema nuevamente con la esperanza de que se restablezca la conectividad: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/8t/cy/my8tcyvvejsf5bt-cb5sh-va_lu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
solo ahora ser√° posible configurar el monitoreo de nuestros conmutadores desde Zabbix. Veamos c√≥mo sucede esto:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/ku/6m/geku6mzbdiqubhvfjx4pevfuiau.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se ponen los cimientos. </font><font style="vertical-align: inherit;">Si tenemos una conexi√≥n ahora, entonces todo estar√° listo. </font><font style="vertical-align: inherit;">En "Zabbix" muchos "Tsiska", inteligentemente conectados entre s√≠, puede comenzar a monitorear. </font><font style="vertical-align: inherit;">Nos conectamos con el usuario root con una contrase√±a y verificamos el ping: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/ln/pc/wqlnpckl6msf6vp_rmiyt_q2a5s.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/g7/9y/8z/g79y8z6hx_bix4mvyje3ju34uia.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
todo est√° listo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4m/qw/1q/4mqw1qfbb61ytex0d4ldrwaklee.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
como administrador del DNS local, tambi√©n hice posible enviar por nombres de ping.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo puede Zabbix monitorear el equipo de Cisco?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El agente no se puede instalar en el equipo de Cisco. Muchos de ustedes saben que el equipo de Cisco se supervisa perfectamente mediante SNMP. Ahora prepararemos el escenario para esto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora prepararemos el escenario para esto. Para monitorear el equipo usando el protocolo SNMP, primero debe instalar el soporte SNMP en el servidor de monitoreo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/pj/d_/rxpjd_oqrxzg3kyshufud5ydoik.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zabbix no incluye este soporte, usa bibliotecas externas incluidas en estos paquetes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y7/6r/v4/y76rv4b1ulvxexqwi69yhhqld1u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no le dir√© qu√© es la base de informaci√≥n de administraci√≥n: venga a cursos sobre interacci√≥n de Lunux y Cisco, all√≠ se describe en detalle. Y ahora solo ponemos los paquetes necesarios para monitorear en Linux: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0x/ze/ed/0xzeedg4nazeeohex3hvh-zqjho.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/yn/lo/pr/ynloprjiladptnptxhd2nowybrc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ponemos elementos de configuraci√≥n en nuestro Cisco que nos permitir√°n monitorearlos a su vez.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/yj/yt/u6yjyteqwobo-tckmhdnhm8clt4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠, el servidor SNMP simplemente comienza con la siguiente contrase√±a: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9t/ie/zo/9tiezomf0b9sk_r6tqf3a9hg8zw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y lo hacemos en nuestros tres conmutadores: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k-/cu/-v/k-cu-vr3kzxuq3fcelvdhwyuo3e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de estos pasos, verificaremos si nuestro servidor de monitoreo puede acceder al equipo de Cisco (cualquiera de estos conmutadores) a trav√©s de SNMP y, por ejemplo, descubre algo </font><font style="vertical-align: inherit;">Aqu√≠ hay opciones de prueba: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/yj/yt/u6yjyteqwobo-tckmhdnhm8clt4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puede sondear nuestros conmutadores utilizando los llamados OID (identificadores de objeto). </font><font style="vertical-align: inherit;">Aqu√≠ interrogamos al conmutador (solicitamos los valores del par√°metro switch1): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dh/qr/ek/dhqreksw-lbhj1_ky-kitwkcbdu.jpeg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y vemos que este Oid se refiere al nombre del conmutador, es decir, podemos extraer su nombre de cada conmutador (es muy √∫til para la topolog√≠a): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8e/ro/de/8erodew0gy2koqyma4o2k5xo5qi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y puede usar m√°s textos humanos - solicitamos sysName del conmutador (se puede pedir lo mismo desde el conmutador2, etc.):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/rk/ih/tirkihmj9zh3mbtljm-8mzuuva4.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalar la consola SNMP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra acci√≥n no es obvia: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9l/bh/if/9lbhif1jx-4eees2yl4g2n6sse4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/rf/xs/2f/rfxs2forhqzmhx1vb1pxzyecjzi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/5r/c6/qi/5rc6qi5sesktvgwhchqnlk14hwy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
seg√∫n el acuerdo de licencia, debe comentar las l√≠neas en este archivo ... Este es un maravilloso comando de p√°jaro carpintero que borr√≥ el contenido del archivo, que dec√≠a: "Para confirmar la licencia, comente todo lo que est√° all√≠". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consecuencia, el servidor Zabbix debe reiniciarse porque hemos instalado las bibliotecas que utilizar√°: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nh/n2/rv/nhn2rvgejooztpw-t-6iyqigdjw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/8u/j9/dw/8uj9dwokqg4-byvjdxbp59fhwdc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
muchas personas saben que ahora es suficiente ingresar a la secci√≥n Host, crear un host y seleccionar el protocolo SNMP. </font><font style="vertical-align: inherit;">Especificar direcci√≥n IP:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/cs/ug/gzcsuga-vjjumzjitkwe0zvy2ak.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bi/gv/kc/bigvkcnw1ji20omf739p434dzaa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero no estamos aqu√≠ para eso. </font><font style="vertical-align: inherit;">Intentemos que Zabbix encuentre autom√°ticamente todos nuestros interruptores. </font><font style="vertical-align: inherit;">Tenemos tres de ellos, y en Baumanka hay m√°s de cien (al parecer, 120). </font><font style="vertical-align: inherit;">No ser√≠a tan divertido agregar 100 interruptores, por lo que es una ventaja: veremos c√≥mo Zabbix encuentra nuestros interruptores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar dispositivos autom√°ticamente a Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
P√°gina "Agregar dispositivos autom√°ticamente a Zabbix": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/op/4h/3a/op4h3abcnttdjkx_h-zzpzb0zge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer esto, iremos a la secci√≥n "Configuraci√≥n" (subsecci√≥n Discovery) y no crearemos una nueva regla all√≠, pero usaremos la existente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto dice correctamente que necesita escanear esta red ... ¬øReconoce la nuestra? </font><font style="vertical-align: inherit;">Para no esperar mucho, indicar√© un rango limitado de 100-110 (suficiente para m√≠).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escanear una vez por hora es demasiado; </font><font style="vertical-align: inherit;">poner - cada 60 segundos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En dispositivos escaneados, nuestro Zabbix ahora est√° buscando un agente Zabbix. </font><font style="vertical-align: inherit;">Promet√≠ que usted y yo no tendremos agentes, as√≠ que lo elimino.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y digo que, de hecho, nuestro dispositivo es accesible a trav√©s de SNMPv2, comunidad - p√∫blico; </font><font style="vertical-align: inherit;">solicitamos tal OID:</font></font></li>
<li>       ,     . ,    .       (   ):</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, cada minuto, Zabbix recorre estas direcciones IP y solicita el nombre del dispositivo a trav√©s de SNMP. Si hay un dispositivo y es compatible con el protocolo SNMP, responder√°: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ha/xg/-o/haxg-ohyxs1bfr23wjr10quhgoa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto no es suficiente para que nuestros dispositivos aparezcan en esta lista: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1f/qq/ij/1fqqijogq1obsqxxxnqmd06l6l8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debe configurar acciones. Crearemos uno nuevo (lo nombrar√©, copiando del manual de capacitaci√≥n): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/ds/hi/zjdshidzytis9o614hr8ebunnsi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/qb/vr/7g/qbvr7grb1zx-e375rrkrndjtf0y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Condici√≥n: la solicitud debe devolver informaci√≥n de que se trata de un cambio. Por "coincidencia afortunada", tenemos todos los interruptores llamados switch (switch1, switch2, switch3), por lo que el valor recibido deber√≠a verse como (like) en el interruptor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/-q/ww/jo-qwwjs6zrndbxbnzinyj2gxog.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
todo esto est√° en el manual Queda por indicar qu√© hacer con √©l: ‚ÄúOperaciones‚Äù: en </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z_/q2/bo/z_q2boros4ugh7rmz9gkmg9uico.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
primer lugar, debe agregarlo a alg√∫n grupo. Usar√© el grupo de hosts descubiertos ya preparado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t-/na/jf/t-najf0u9b3jw2js5xuu0mb0gfg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gk/lj/7h/gklj7honujvnwncitifax5zcrfy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, lo m√°s importante, debemos explicar qu√© monitorear en este equipo. </font><font style="vertical-align: inherit;">En este caso, utilizaremos una plantilla preparada que sea adecuada para una gran cantidad de dispositivos SNMP diferentes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ze/lw/1n/zelw1nlbpyv9fnu82tieuv7klh0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/7v/a4/fe/7va4fejt0_p6_m83ru9xsdnr80o.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/km/ca/om/kmcaomawjtebabjjgaofcz1irls.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/2v/ma/et/2vmaet5v9zmyfx-gtmgbzpcyypw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/bd/_7/4_/bd_74_jpcajgez4osptj4gswxqy.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/j8/x6/jw/j8x6jwcwob9zgdcu4qexixn2kk8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/6h/do/_o/6hdo_oq76rh6esxpq-yc2hep0s8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si todo se hace correctamente, despu√©s de un tiempo aparecer√°n milagrosamente 3 interruptores en nuestro Zabbix. </font><font style="vertical-align: inherit;">Esperamos. </font><font style="vertical-align: inherit;">Aparecer√°n en la secci√≥n Hosts. </font><font style="vertical-align: inherit;">Hay una conexi√≥n (marcada por si acaso): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/d9/o9/mpd9o9nieg8be0a1nkw_nwjenkq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aparecida: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9o/eb/zc/9oebzchr5zpdmq9wux7pjfiih28.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
si tuvi√©ramos 100 interruptores, aparecer√≠an 100 interruptores. </font><font style="vertical-align: inherit;">Ahora podemos hablar sobre el tema principal: la construcci√≥n autom√°tica de la topolog√≠a de la red.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crea un mapa de red</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En "Zabbix" en la secci√≥n "Monitoreo" - subsecci√≥n "Mapas de red". Puede crear su propio mapa con cualquier nombre arbitrario (lo llamar√©, como en el manual de instrucciones - Mapa de interruptores): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dj/fo/pi/djfopijhurrskrzaa1vdz2xqb7w.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/91/u6/2n/91u62nyrphdsb1u2ypo1rsnjrx8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/n3/6d/m_/n36dm_svkvrglkplk7fl345msr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
puede agregar dispositivos a este mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ty/t1/df/tyt1df6wfkeq4j2amt9evassz88.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tenemos una operaci√≥n bastante aburrida para agregar nuestros cien interruptores completos aqu√≠: agrego un </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w9/g7/ih/w9g7ihwj13mcrzevcdh4xbu1seo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nuevo elemento y le digo al sistema que est√° encendido en realidad el host que est√° monitoreando; host switch1:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/uw/7x/npuw7xcetykmgf0mzoo_wf84obe.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/iw/kf/7o/iwkf7on2ppl3_k6pbqtp7ddwgxo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La gente a menudo pregunta si este proceso se puede hacer autom√°ticamente. Respuesta: "¬°Es posible!". Pero luego tenemos que resolver el fascinante problema: "¬øC√≥mo entendemos d√≥nde colocar qu√© interruptores?" Esa es la geometr√≠a. Posible soluci√≥n: puede especificar una marca de geolocalizaci√≥n en el interruptor (un par√°metro como ‚Äúusted est√° parado en el sexto piso, edificio AZLK, auditorio 666), dibujar el edificio del laboratorio educativo, todos sus p√∫blicos ... En general, este es un buen estudiante para el cuarto estudiante Curso de computaci√≥n. ¬°No tenemos planes para esto!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora agregar√© los 3 interruptores manualmente, pero prometo que no trazar√© l√≠neas de comunicaci√≥n entre ellos. Agrega el interruptor 101, lo agregamos autom√°ticamente a Zabbix; si lo dibuja en el mapa con bol√≠grafos. Un momento desagradable, pero hay un lugar para estar. No hay una soluci√≥n simple para este problema, por 45 minutos seguro. Y lo que obtenemos me parecer√° interesante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agrego r√°pidamente 3 interruptores: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/q4/5m/htq45ms1qrynn5vv6rbfltivtag.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øDije que no agregar√© l√≠neas? Lo har√©, pero solo para que luego podamos entender c√≥mo dibujarlos. Conectar√© estos dos interruptores (no </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/yy/3v/huyy3v7rbnxbz-vcvvcfscrc3nu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
conectamos el </font><font style="vertical-align: inherit;">primero al tercero): </font><font style="vertical-align: inherit;">los conectar√© (el interruptor 1 y el interruptor 3 est√°n resaltados): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/xx/4w/ygxx4wbqysq3gqcuqbdb8h7vdlo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nuestro sistema tendr√° que solucionar este problema: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1o/p1/da/1op1danyvogme8oxdl5mjy_c_sg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
es importante no olvidar guardar el resultado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wb/gg/wk/wbggwkhsx0s5v1n-2rximlephs0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/fu/vp/ld/fuvpldfvuoweq4md4vtd9tzpmgi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, sobre GNS, puedes hacerlo maravillosamente ... Ocultar su nombre de host, convertirlo en un interruptor y ponerlo uno debajo del otro, formando una nube de interruptores:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ne/uz/f7/neuzf7ylh_eb46psuqp7sq0nsp8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/fa/uh/iy/fauhiyblbluxal-l8g7mbu5gws4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/3l/cl/0o/3lcl0ofm4pg0qh8weeshyayu1pg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/oh/is/fv/ohisfv9b9hvxjtax_u2l73ysmfw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ua/1c/px/ua1cpxoki5x5akr4imn0wakcvxi.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øC√≥mo construimos una topolog√≠a? </font><font style="vertical-align: inherit;">Configurar la creaci√≥n y actualizaci√≥n autom√°tica de l√≠neas de comunicaci√≥n.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que la topolog√≠a se construya autom√°ticamente, necesitamos recibir informaci√≥n sobre ella autom√°ticamente. En la universidad, utilizamos equipos de Cisco, por lo que nos enamoramos del protocolo llamado protocolo de descubrimiento de Cisco: simplemente escriba show cdp neighbours en cualquier dispositivo y le dir√° que switch1 est√° conectado a la quinta interfaz: la </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u8/yg/vu/u8ygvuncowttw3o0nn6tjjzhep8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/lj/vo/rh/ljvorhmvhikkk-3r8ykhwgc2zoi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
alternativa a cdp es lldp (tenemos un segmento interruptores de la empresa "de miedo" Nortel - hay lldp). Ver√°, hay dos conmutadores: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-h/qq/vf/-hqqvfloaxvhgsplf-dz87zfr1y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el servidor Zabbix de alguna manera debe extraer esta informaci√≥n (lo veo en el propio Cisco). Hay muchas maneras. Uno de los m√°s r√°pidos, pero m√°s tontos, es usar el protocolo RSH. Un protocolo muy denso, y lo s√© solo por mi edad:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/44/xz/y-/44xzy-rmyoe9q-yl1c-pxipc61c.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ed/hq/o5/edhqo5l9mzpdzkgydqpi9hvrm4c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las personas normales de RSH no lo saben, pero puede usarlo r√°pidamente para hacer algo de forma remota con Cisco. </font><font style="vertical-align: inherit;">O, si estamos hablando de alg√∫n tipo de red de administraci√≥n donde no hay ning√∫n extra√±o, entonces puede usarlo en producci√≥n. </font><font style="vertical-align: inherit;">Sin embargo, los puntos de seguridad siguen siendo una costura completa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, configur√© el soporte para acceder al protocolo RSH a mis servidores Cisco desde esta direcci√≥n IP: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_r/fi/tt/_rfittxipjyhnofewteuvyojncu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora puedo instalar el cliente RSH en el servidor ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-i/ji/ns/-ijinsihdodtgzniujj7ps7iv-q.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k4/zm/yj/k4zmyjbq64rg_kuh5vzd7eovoyu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... y demostrar cu√°n f√°cil es ahora seguir las instrucciones que acabamos de seguir conect√°ndonos directamente al equipo Cisco desde la estaci√≥n de administraci√≥n - en el switch1 Seguir√© esta instrucci√≥n: en </font></font><br>
<br>
<img src="https://habrastorage.org/webt/87/nr/vn/87nrvnudd8y_alfjxwsbusezjdw.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/k7/kh/fz/k7khfzefhkhfbfip2whrfe7yick.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
consecuencia, deber√≠a aparecer en el switch2:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_k/tk/3x/_ktk3xdve_dtksfm1aj50nanqfa.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexi√≥n desde el servidor de monitoreo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√°s lejos. Los gerentes me escriben: ‚ÄúVyacheslav, ha recibido una solicitud del oyente. Quiere profundizar en Bash, Csh, Sed y Awk ". Estas son densas utilidades de Unix que la gente conoc√≠a en un a√±o peludo. En este momento habr√° un poco denso Unix. Instalaremos este paquete (necesitamos formatear el resultado para que est√© mejor estructurado): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/db/fg/zmdbfgngl98kq1y3gyimzhhl5u8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y todo el equipo se ver√° as√≠: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vx/wg/5b/vxwg5buzmtotxsyuz45_tkjmuj8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no dir√© c√≥mo el c√≥digo de retorno en Dos difiere de Unix. A continuaci√≥n, filtrar√© solo las l√≠neas que contienen el interruptor, eliminar√© los espacios adicionales y cortar√© los campos necesarios a trav√©s de los espacios:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/97/gz/dc/97gzdcixffxvpmffvo8nyjfo2t8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ck/oh/-o/ckoh-o4tmxqmak6u8yitnf3rv9a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veamos el resultado, y ver√° c√≥mo difiere del anterior. Un poco m√°s "m√°gico" de Unix. Procesar la transformaci√≥n de informaci√≥n en estructurada (por ejemplo, switch2). En lugar de esta informaci√≥n no estructurada (muchos espacios, algunas teclas extra√±as): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lh/ph/pu/lhphpuqqnrpivefwhm3r-26culq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aparece la salida: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/j6/wr/myj6wrr8s8yjn1xt5xduyuww43k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Switch2 est√° conectado al switch3 a trav√©s de las interfaces Fas 0/6 (del switch2) y Fas 0/5 (del switch3). Resulta que la tabla: alg√∫n tipo de interruptor con el cual a trav√©s de qu√© interfaces est√° conectado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras est√°n en este protocolo, RSH y CDP se van. Ahora que hemos recibido esta informaci√≥n, dibujamos estos enlaces en todos los conmutadores. Para hacer esto, necesitamos informaci√≥n sobre a qu√© conmutadores conectarse. Puede obtener un archivo de texto, donde enumerar todos los interruptores ... ¬°Pero no son deportes!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solo necesitamos agregar el interruptor f√≠sicamente, y Zabbix deber√≠a detectarlo autom√°ticamente. </font><font style="vertical-align: inherit;">Ya tenemos una base de datos de conmutadores en Zabbix. </font><font style="vertical-align: inherit;">¬øC√≥mo puede una aplicaci√≥n obtener informaci√≥n sobre los interruptores de Zabbix?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La API de Zabbix est√° escrita usando el "maravilloso" protocolo JSON. Termin√© de programar en esos d√≠as cuando JSON a√∫n no estaba, por lo tanto para m√≠, como para el administrador ... ¬°Hoy en d√≠a, no hab√≠a tanta basura! Aqu√≠ hay un archivo de texto para m√≠, esto es normal, pero JSON ... ( </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
es broma </font><font style="vertical-align: inherit;">) ¬° </font><font style="vertical-align: inherit;">JSON es tan JSON! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSON es el formato utilizado para intercambiar datos con el servidor web, y la utilidad cURL es una de esas pr√°cticas utilidades que le permiten enviar cualquier solicitud al servidor web: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/xy/fh/xkxyfhqtn9p-kllijsbwfda5pus.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/po/g0/qt/pog0qtpuciskhncsbhfespkg1n0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no profundizar√© en lo que es una solicitud POST, solicitud GET y Dir√© brevemente En Zabbix, que funciona aqu√≠: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xb/5x/bb/xb5xbbtwehskdqcmeygzyqczwfs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
esta aplicaci√≥n viene en: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/jf/gu/tijfguw4winkqmkpfbjusomxmbw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que est√° lista para aceptar dicha solicitud en llaves "aterradoras" (esto es JSON):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/an/cs/ezancsh3w2vyw6byftum-vjaoye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta solicitud indica lo que quiero hacer con Zabbix, los par√°metros est√°n indicados: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/46/h8/e-/46h8e-jkhyzj4dljmuo-rd3i1g8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
un Zabbix da una respuesta. </font><font style="vertical-align: inherit;">Aqu√≠ hay un ejemplo que dice: "Zabbix", por favor, dame una cadena de autenticaci√≥n para que pueda enviarte m√°s solicitudes ". </font><font style="vertical-align: inherit;">Confirmo mis credenciales con inicio de sesi√≥n y contrase√±a: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ti/8b/5n/ti8b5n7de63oqwt3emjs8wzf45u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
una solicitud JSON de este tipo ahora nos devolver√° una respuesta JSON: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/zw/af/orzwaf9ssguutgd98_tf0qk-yyy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y en esta respuesta JSON habr√° una l√≠nea de </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/fw/qa/dmfwqa_ulb9csqhjwlaw8vuphd8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
este tipo </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">este es un autenticador que se puede utilizar para las solicitudes restantes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajar con objetos host</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recordamos por qu√© comenzamos a estudiar JSON: queremos obtener la base de datos de conmutadores de Zabbix. ¬øQu√© interruptores para interrogar? ¬°Vamos a sacarlo! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conozca: la API de Zabbix incluye, entre otras cosas, el m√©todo host.get: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6h/9s/i9/6h9si95adtk44qyqujquhvjbkru.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Host: estos son nuestros hosts. Obtener es un regalo. Luego se√±alo: ¬°dame informaci√≥n de host! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/qh/jv/_hqhjvdgxtsbtlypqmjkrdbdndo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En los par√°metros que digo: muestra todo lo que sabes sobre los hosts: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g2/jp/as/g2jpasm8v_0jb59cmy2kcjgdcty.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pero debo acompa√±ar mi solicitud con esta l√≠nea: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qy/os/jj/qyosjjbate8nm6rcazxw_rz-bwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
demostr√©moslo. Para que sea conveniente para m√≠, </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/xl/lr/foxllrj0twd3dauxqpkdgt3key8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
copiar√© </font><font style="vertical-align: inherit;">esta solicitud: </font><font style="vertical-align: inherit;">e insertar√© el autenticador que me devolvi√≥ Zabbix: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/ve/mu/cqvemull9ck4ohbobg57x99mbuw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, Zabbix Api: vimos c√≥mo pedirle al Zabbix un autenticador para acceder. Y luego demuestro c√≥mo usar este autenticador para obtener alg√∫n tipo de respuesta:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/c1/pn/dfc1pnn8ohqpvdto28ls6glrskg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creo que todo est√° claro. Incluso puedes ver si llevas una lupa. ¬øReconoces switch1? En alg√∫n lugar hay un switch2 ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/70/2h/ev/702hevhmrlcdiegys1ae9dh6ndc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me </font><font style="vertical-align: inherit;">quebr√© </font><font style="vertical-align: inherit;">los ojos durante mucho tiempo y luego decid√≠ leer c√≥mo trabajar con este JSON en la l√≠nea de comandos. Y una de las recomendaciones fue: usar JSON Query. Ella es muy saludable, aclara la respuesta, vea: en </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9a/ei/jz/9aeijz-slee1ekq2iu1tq86cqle.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ha/jz/26/hajz26f3jvrfymevvidztnzizl8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
primer lugar, todo se ha coloreado, ya est√° bien; en segundo lugar, switch2, switch1 son claramente visibles aqu√≠:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/84/tp/qv84tptvurpqfkfqtmdbkfvh_wa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, un poco jugando con JSON Query, veremos muchas cosas interesantes. </font><font style="vertical-align: inherit;">Y para no copiar estos "cocodrilos" del cuaderno cada vez, sugiero determinar en qu√© programaremos el trabajo con nuestro "Zabbix". </font><font style="vertical-align: inherit;">Hay una API de Zabbix: este es JSON, hay un mont√≥n de lenguajes de programaci√≥n. </font><font style="vertical-align: inherit;">JSON parece estar relacionado con un script Java, pero de hecho, otros lenguajes se usan con mayor frecuencia para trabajar con Zabbix, por ejemplo, Perl, un script Perl que hace algo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacer solicitudes en forma de scripts Bash</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perl no es un lenguaje de moda hoy en d√≠a, obsoleto. Si volviera a comenzar la vida, probablemente comenzar√≠a a aprender Pyton. Y definitivamente se sabe que bajo "Python" hay una biblioteca conveniente para trabajar con "Zabbix". Pero, dado que nos hemos reunido aqu√≠ y no daremos preferencia a ning√∫n idioma, utilizo este idioma: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sk/fv/xp/skfvxpn5j9scrpc3evf7eyrvnj0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el idioma del administrador del sistema, es decir, yo - ¬°Bash! Por lo tanto, har√© estas solicitudes a Zabbix: las emitir√© </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/3i/mb/zh3imb6ja0rkpyvy7bl-gpospwc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en forma de guiones: los </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i0/fk/rg/i0fkrgjljz1l8gdq20zzqirqmno.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
guiones est√°n listos, los copiar√©. Se ven como el infierno. Creo que un buen c√≥digo de Python ser√° mucho m√°s legible. Pero, como yo mismo no conozco "Python" y no quiero dar ninguna preferencia, escribir√© sobre lo que est√° cerca del coraz√≥n del administrador del sistema:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/01/qj/z2/01qjz2tstbcljo7hlnjbiq-ri7m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No te dir√© cu√°les son estas barras invertidas (y que Dios las bendiga). Pero la cadena de autenticaci√≥n estar√° enmarcada en la forma de una variable que debemos exportar antes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ni/uc/xf/niucxfqzrmv1ouy4jrin3lrs7mg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/tt/wa/37/ttwa37gjveh9lxyfbqgnkoxhg-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© valor ten√≠a para nosotros? Y ahora, en lugar de copiar las l√≠neas largas, simplemente puedo ejecutar el script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/b0/xb/ggb0xbiuppm37ndovdlqev-81_u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el script devuelve una costura completa. Usando JSON Query, puede obtener esto hermoso: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lq/0r/ai/lq0raiqvp0e8ant2sj7ww2ruxkg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wh/k7/qg/whk7qgnjyn8amh0goeai98e05ne.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
recuerde la tarea: ¬°obtenga la base de datos de conmutadores que est√°n en Zabbix! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibujar√© inmediatamente el resultado. Durante mucho tiempo no dir√© qu√© es lo que hay aqu√≠ y c√≥mo. Tenemos una tarea desalentadora: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/ku/f9/uokuf9cd68jhy4n_3tke1cc9bge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
este es el resultado, vea lo que contiene. Aqu√≠ dice que tenemos tales interruptores en Zabbix, y este (10105, 10106, 10107) es el identificador interno del interruptor "Zabbiksk":</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/l0/ub/hxl0ubkxevyy-ngfijnfw3k3vsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado fue un archivo plano. </font><font style="vertical-align: inherit;">Cuando agrega cada nuevo modificador, debe ejecutar este script para crear un archivo. </font><font style="vertical-align: inherit;">Para que no tengamos tales "cocodrilos", incluir√© esta l√≠nea en el script en s√≠: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/em/jh/l1emjhywmibe_ehavajfptgx4r0.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/kq/el/r6/kqelr6wblri6snfkbwk0jfvuhtc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y nos devolver√° una vista ordenada de la tabla. </font><font style="vertical-align: inherit;">Ahora lo mostrar√©. </font><font style="vertical-align: inherit;">Ejecuto el script, muestra e inmediatamente guarda este archivo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-h/u0/dz/-hu0dz2hoymtx7eepiys0v4grhi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la utilidad tee es una buena utilidad que escribe el resultado en un archivo y lo pasa. </font><font style="vertical-align: inherit;">Ahora tenemos 3 interruptores y tenemos un archivo de texto en el que se enumeran todos los interruptores: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/bu/fz/urbufz8s11mczfb2uld8b_oxo8k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora puede consultar cada uno de estos interruptores a trav√©s de RSH y averiguar qui√©n est√° conectado con qu√©. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, tenemos la base de datos de conmutadores. </font><font style="vertical-align: inherit;">¬°Nuestro objetivo final son los mapas!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtener una lista de mapas y sus elementos de Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øC√≥mo trabajar con tarjetas? Aprendamos a leer informaci√≥n sobre tarjetas de Zabbix. Copiar√© este script: a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6t/9_/mb/6t9_mbgxpoyrttupz3cf-zsrmeg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/pz/g0/gw/pzg0gw6tel-pjkfgzxcqrsy0lf4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
quien le guste, puede tomar todos estos scripts. Trat√© de simplificarlos lo m√°s posible, no funciona m√°s f√°cilmente. Si encuentra c√≥mo simplificarlo, escriba, lo corregir√©: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oj/ex/kt/ojexktdpilhdilffqxopetdrgws.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
este script ‚Üë se dirige a Zabbix con una solicitud de map.get y dice: "H√°bleme de los enlaces y h√°bleme de los elementos que estos enlaces se conectan entre s√≠". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora ejecuto este script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zf/96/us/zf96uszqpiityn1vqaezvxj2odc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y muestro el resultado: al </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/nn/ep/fdnnepoivtufayskrat49ak6nu4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
igual que la informaci√≥n sobre hosts, es muy f√°cil obtener informaci√≥n sobre tarjetas de Zabbix. Cada tarjeta tiene su nombre: Los </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5n/wl/jt/5nwljtoelbudy0igqcrclgo6_v0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
siguientes son los elementos en esta tarjeta. ¬øReconoces el n√∫mero? Este es el elemento interno de Zabbix:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/yk/cz/myykczkfzf6iev4s2s_vz-co5nk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo m√°s desagradable es que en Zabbix los elementos se vuelven a numerar. </font><font style="vertical-align: inherit;">A la izquierda est√° el elemento id, a la derecha est√° la numeraci√≥n del elemento dentro del mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/ek/xi/wzekxi5xnw70eazz4fswo75s9-a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
es decir, en Zabbix cada host tiene un n√∫mero, y en el mapa hay otro n√∫mero: se obtiene esta cadena. </font><font style="vertical-align: inherit;">Es decir, el interruptor switch1 se llama 10105 en el Zabbix y 2 en el mapa (se obtiene una ligera complicaci√≥n de la tarea).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reunimos todo a trav√©s de CDP y RSH, descubra la conexi√≥n de conmutadores con interfaces</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La parte final de este script es que tengo que obtener informaci√≥n sobre qu√© identificadores de Zabbix est√°n asociados con qu√© identificadores en el mapa. Mire, en "Zabbix" este identificador (10105, 10106, etc.), y en el mapa - 2, 3, etc.: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/e2/kq/tde2kqrnxxq8mw2xvrmckzu-cr8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tradicionalmente, lo guardar√© en un archivo de texto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o6/ts/wi/o6tswi34dpttupdmkapyier25ki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora tenemos casi todo. Hay informaci√≥n sobre qu√© interruptores hay en este archivo (qu√© identificadores se usan dentro de Zabbix): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/uh/jn/yruhjnqamivzhfuufaefldqm-ya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y tenemos informaci√≥n sobre qu√© identificador de la tarjeta est√° asociado con qu√© identificador de Zabbix (por ejemplo, el interruptor 1 tiene el n√∫mero 10105 en Zabbix, y en el n√∫mero de tarjeta 10105 tiene el identificador 2):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yr/uh/jn/yruhjnqamivzhfuufaefldqm-ya.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/2e/ug/7s/2eug7srj1krpadc4iasvh1mtdye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Esa no es mi culpa! Los chicos escribieron esto en Zabbix. Pero estoy seguro de que hay una raz√≥n por la cual no usan identificadores directos en el mapa. Quiz√°s porque el mismo objeto se puede mostrar en el mapa varias veces y debe tener un identificador √∫nico. Por lo tanto, la cadena es m√°s larga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y aqu√≠, probablemente comentar√© sobre este peque√±o infierno. Reproducir: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/rs/tq/g8rstq6pvpa0xqgrofdazuk_txm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en el bucle, leo las l√≠neas que describen qu√© interruptor con qu√© identificador Zabbix </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ii/nh/eq/iinhequuyybluby-ybxdu7lkghw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/8h/xa/er8hxamulabcynmqppzokznfl-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
me </font><font style="vertical-align: inherit;">conecto a cada interruptor desde el Zabbix a trav√©s de RSH: </font><font style="vertical-align: inherit;">leo a qu√© hosts est√° conectado. Redirijo este resultado a otro ciclo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/hr/pl/olhrpl7refin5zcmakahdqgec4a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
que, a su vez, lee los identificadores y descubre qui√©n est√° conectado con qui√©n: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/98/wz/ww/98wzwwnjkx3qp65cl3iqlzfxlza.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mostrar√© los resultados de este script (chmod + x):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oi/qb/qy/oiqbqymkxfur8kd-i7xqglyxqd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el mapa, el segundo interruptor est√° conectado al tercero (recuerde que los identificadores en el mapa) a trav√©s de las interfaces correspondientes (Fas 0/5 - para el segundo, Fas 0/6 - para el tercero ‚Üë). </font><font style="vertical-align: inherit;">Debemos dibujar estos nombres en los enlaces, crear. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si hasta este momento solo leemos informaci√≥n de Zabbix (hosts, se leyeron tarjetas, etc.), ahora tendremos que escribir informaci√≥n a Zabbix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Guardemos el resultado:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gs/uh/wt/gsuhwt_0qiojiuheizaq3gt3wcg.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dibujando l√≠neas de comunicaci√≥n en Zabbix</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Decid√≠ escribir un gui√≥n simple que cambiar√° algo en Zabbix. Honestamente, estudi√© la API de esta manera: era importante para m√≠ que algo simple funcionara: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/ke/s0/ygkes0eksoonvbajier32-c0dw4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/gz/5g/_a/gz5g_anpr_docgcrlaxfm0jn-mw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el primer script no estar√° relacionado con las tareas, cambiar√° el nombre del mapa (para ver c√≥mo se hace). Si queremos cambiar algo en Zabbix, entonces tambi√©n debemos aplicar a trav√©s de la solicitud POST y describirlo en JSON, pero usando el m√©todo map.update. Entre los par√°metros, debemos indicar expl√≠citamente: MAPID, que encontrar√° el mapa deseado, y MAPNAME, que cambiar√° el nombre del mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kk/ms/3p/kkms3p-ixoafs4ifvpccikv1nd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
este es el conjunto m√≠nimo de par√°metros. Estos par√°metros en s√≠ mismos: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/fw/yv/imfwyviqvbgelp9gjmoeelpedic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pasan a trav√©s de las variables los argumentos del script. Hago el script ejecutable (chmod + x): lo ejecuto </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/xj/uz/hxxjuzo5h4galmyprunx1ftd7so.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, como est√° escrito en el manual de capacitaci√≥n. Si todo est√° correcto, la tarjeta deber√≠a llamarse Super MAP:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/va/qd/ervaqdxvi_h0twak7rxcz9zjh8u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Monitoreo - Mapas - voila: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/vf/yq/68vfyqjmwq8mlq6pacsj_c7mbnc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√°cil de cambiar - Super MAP2: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yf/xi/zx/yfxizx_w2ycib6jifb9cw_2qh5u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo funciona: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vx/eh/7o/vxeh7o3axqtxzzggktfy1g1hqqw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero nuestra tarea es complicada: ¬°cambiar las l√≠neas de comunicaci√≥n! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ve/j2/pb/vej2pbmp87qsuylhj6vx7sw5doo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es necesario generar JSON, que describir√° nuestro mapa y todas las l√≠neas de comunicaci√≥n. Para hacer esto, hago otro script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vc/aj/fd/vcajfdntlvggtwxr0qffvjyb-de.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/o6/o_/p5/o6o_p5msbpvhw27e-jo0xjfi6lg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el hecho de que tenga muchos scripts no significa que esto deba hacerse en la empresa. En la empresa, debe tomar un lenguaje normal que conozca ("Python", "Pearl" u otra cosa) y programar lo que est√° aqu√≠ usando un lenguaje normal. Estos ladrillos, cada uno de los cuales es simple, permiten comprender qu√©, por qu√© y c√≥mo hacerlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro script que sirve m√°s para comprender lo que hay que hacer y no copiar (no le vender√© el producto terminado aqu√≠): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v7/l8/uw/v7l8uwgwtmqbfuacxtnuqg89ery.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/cw/yn/ud/cwynudseywryxw-gkcajcp9vdua.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este script lee este archivo:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/gj/bt/iugjbtn5qbfhwnjw3ednxvxnqea.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qu√© establece qu√© elemento en el mapa con qu√© elemento en el mapa a trav√©s de qu√© interfaces est√° conectado. M√°s precisamente, tomaremos un elemento en el mapa, un elemento en el mapa y una etiqueta. Este es un elemento en el mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/yf/ae/fdyfaeounbojncqky7ionmzjaa0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y esta firma deber√≠a ser: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9z/ge/lp/9zgelpwjnjlu_bvsxbvwmkqgkzc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estoy leyendo este archivo. Ordeno todos los elementos en el mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/th/ls/lathlszamnf7drlctykzoe7rmlc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
programo enlaces - descripci√≥n de enlaces en forma de JASON. La solicitud final se ve as√≠: actualice el mapa (n√∫mero de tarjeta ‚Üì): los </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sr/bp/ga/srbpgaaeocsxrerwasxiw4eww-o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
enlaces se describir√°n en esta variable: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_s/jv/sb/_sjvsbsea4dfxn8xdhxu6wvq61s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
que se form√≥ en este ciclo (se enumeraron todos los elementos y firmas de las tarjetas): una </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tm/tr/le/tmtrleu4iz3hj-tpihsmg60ai6m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vez m√°s, tenemos una tarea desalentadora y la describimos en detalle en Shell ... Seguramente muchos de ustedes no programaron en Shell. Solo necesita mirar estos textos y programar lo que sea conveniente para usted.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tengo la expectativa de que ahora todo deber√≠a suceder. Lanc√© un script: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z6/ku/aj/z6kuajchdcyhzdsafzrgdwxrhbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recargar la p√°gina de Mapas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j_/36/6p/j_366pbhfsxwdf6r6-ptm-ajfqc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, ¬øc√≥mo? ¬°Al menos funciona! Agreguemos otro interruptor y ejecutemos el script nuevamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tomamos el interruptor, lo llamamos switch4: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/w6/2w/kiw62wjjoudkeqlbyqpwi8w_rum.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibujamos que es el interruptor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/1f/jv/4c1fjvsupwx_ujkfykki_nlytbk.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/4k/qe/qu/4kqequ32eiap57vjw0ntpguworm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurar </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Lo </font><font style="vertical-align: inherit;">conectamos </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3y/vg/51/3yvg51etfkdm13nua1ricw7hkge.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
como queramos (con un asterisco, puede dibujar una salchicha): </font><font style="vertical-align: inherit;">Configuramos el </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_e/-z/3e/_e-z3ebtugz-banoljrocvnnhkc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
interruptor. Comienzo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fo/cm/vm/focmvm2m5meqrgmfpbrstofgpsg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
todo lo que hicimos anteriormente (solo cambie al switch4 y la direcci√≥n es 104): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/jh/hu/qrjhhudyhklwds0vqvel8bl7oxq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
haga doble clic en el switch (pegue lo que copi√≥): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0b/ng/ga/0bnggamteyi65nog6igvrnzbw3s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nuevamente, ser√° m√°s r√°pido reiniciar el tercer switch (switch3), guardando la configuraci√≥n:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dv/k2/mr/dvk2mrpw11vgl6jraypfd1t7vva.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mientras tanto, se reinicia, verifique si est√° disponible en nuestro nuevo conmutador a trav√©s de SNMP. Cuando Zabbik lo encuentra, lo primero que debe preguntar es el nombre de host SNMP. Por lo tanto, agregamos este dise√±o a nuestro nuevo conmutador: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fb/yo/t2/fbyot2e9x1ugheuhu-du6jrf5gg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wx/ft/by/wxftbyv_y5abyoswch-ctg9cp3y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora estamos esperando que el conmutador est√© disponible. El 101¬∫, 102¬∫ est√°n disponibles, el 103¬∫ se reinicia: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ud/kq/q-/udkqq-alaw8aoldd5re6a0wgoow.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
el 103¬∫ </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/fr/ox/ftfroxxsep7orgxpyqhghouetsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
respondi√≥ </font><font style="vertical-align: inherit;">: el </font><font style="vertical-align: inherit;">104¬∫ respondi√≥. Compruebe si SNMP est√° disponible a trav√©s de SNMP4: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mx/ts/rd/mxtsrdsg1tvvdd6y_cjuigbnhxi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Disponible! Tenemos todas las posibilidades de verlo en la lista de hosts. Esperemos un minuto (cada minuto que tenemos una red escaneada): una </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/3c/ff/kb3cffka032ra7i5is9ayhewjya.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vez que ha aparecido, volvemos al primer script. √âl descarg√≥ informaci√≥n de nosotros que los interruptores en general son:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/np/ea/zo/npeazo2te4hbnfd2ncdm0vsr32y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sus hombres de cable corrieron, pusieron un nuevo interruptor, usted levant√≥ el enlace y apareci√≥ autom√°ticamente en Zabbix. </font><font style="vertical-align: inherit;">En consecuencia, aqu√≠ deber√≠amos ver que ha aparecido el cuarto interruptor: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v2/q-/kt/v2q-ktdybfjkhgn_sz0vee3toum.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nuestra base de datos se rellena autom√°ticamente.</font></font><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arreglamos el material (agregamos switch4), ejecutamos el script final</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, desafortunadamente, tiene que huir y mostrar nuestro interruptor en el mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/4a/5k/ux4a5kwj5gpfzmxbxnsqvncarpc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no solo sus hombres de cable corrieron, no solo configur√≥ el enlace, sino que tambi√©n tiene que ir aqu√≠ y decir: "Estamos agregando un nuevo interruptor". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g-/iz/nf/g-iznfb3qf_fillb6w40lmetgxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Localice donde se supone que debe hacerlo, e indique que tenemos un host, switch4, y tambi√©n dibuje que es un switch: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y3/bp/pm/y3bppmrcdmfoaerjlafxilst_gk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y actualice (¬°todav√≠a no estamos dibujando una l√≠nea de comunicaci√≥n!): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gs/fa/fk/gsfafkqzwjjpiwihul-lfc1nzfm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora recuerde que nuestros scripts de l√≠nea de comunicaci√≥n se basan en el protocolo CDP. Y para obtener informaci√≥n CDP del conmutador, debe configurar el acceso RSH al mismo. ¬øRecuerdas que decid√≠ usar este m√©todo?</font></font><br>
<br>
<img src="https://habrastorage.org/webt/84/q5/df/84q5dfhi0d4spzqawa1uumbn9gm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/wq/kl/xn/wqklxnrebbym3uce1hrsg-izdmy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo est√° bien, entonces puedo intentarlo, luego puedo probar RSH: solicite informaci√≥n sobre su conexi√≥n desde el cuarto interruptor. Aqu√≠ dice: "Estoy conectado al tercero, de mi lado, el d√©cimo, por otro lado, la octava interfaz". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/_a/ug/cy_augy2yrbswanujdpjpdkcwqc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo agregaron a la tarjeta, y tenemos una tabla de correspondencia entre los identificadores en el Zabbix y los identificadores en la tarjeta (ver, es el quinto en el mapa): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-i/t8/vs/-it8vsr54h_fnue2-srk6zxcwzs.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/je/j5/at/jej5atlnmnnazwy6aga4k8n5sfi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
plantearon RSH. Ahora podemos construir una conexi√≥n: qu√© interruptores est√°n conectados a trav√©s de qu√© enlaces (obtuvimos el archivo de texto): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/hl/zm/abhlzmj1mez4py4iecfw4e0mgs8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/g7/st/qm/g7stqmpv_mu4qsylijjuxwwibac.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intentemos ejecutar el script final, que leer√° este archivo de texto y generar√° una solicitud JASON para actualizar los mapas, redibujando todos los enlaces en el mapa: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/aq/iy/ctaqiy_1gdpvipgk4t3pzzc86os.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/dq/ld/ue/dqldueagtxz_ap1rbmxphccytba.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/c3/6v/fp/c36vfphix1om8_etfenkvo9oeco.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, ¬øc√≥mo? ¬øImpresionante? No me las arregl√© en 45 minutos planificados, pero a√∫n as√≠ r√°pidamente (unos 75 minutos), probablemente, no funcionar√° m√°s r√°pido.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Todas! </font><font style="vertical-align: inherit;">Soy muy feliz amigos, funcion√≥. </font><font style="vertical-align: inherit;">El manual de capacitaci√≥n est√° aqu√≠: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://wiki.val.bmstu.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Si no lo encuentra, escriba al correo: val@bmstu.ru, val@specialist.ru. Lo enviar√© con gusto. </font><font style="vertical-align: inherit;">Aparecer√° un seminario web en specialist.ru: lo comprobar√© con seguridad. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y lo m√°s importante, mis amigos, que todo esto no fue en vano, sino con el astuto prop√≥sito de persuadirlo a usted o a sus colegas a nuestro curso de 2 d√≠as, que comprende una gran cantidad de tareas relacionadas con Zabbix: detecci√≥n y ajuste de bajo nivel ... No en la cima, como lo es ahora, pero en detalle, con los de laboratorio: lo har√°s: hasta que lo hagas, no te dejar√© salir. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Estar√© encantado de verte, tus colegas! </font><font style="vertical-align: inherit;">Escribir cartas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Te veo pronto!</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZrNScBG9TnU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un poco de publicidad :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias por estar con nosotros. ¬øTe gustan nuestros art√≠culos? ¬øQuieres ver m√°s materiales interesantes? Ap√≥yenos haciendo un pedido o recomendando a sus amigos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPS basado en la nube para desarrolladores desde $ 4.99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an√°logo √∫nico de servidores de nivel b√°sico que inventamos para usted: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toda la verdad sobre VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10GB DDR4 480GB SSD 1Gbps desde $ 19 o c√≥mo dividir el servidor?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 veces m√°s barato en el centro de datos Equinix Tier IV en Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬°Solo tenemos </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV desde $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en los Pa√≠ses Bajos!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - ¬°desde $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lea sobre</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√≥mo construir un edificio de infraestructura. </font><font style="vertical-align: inherit;">clase c con servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es486800/index.html">Cassandra C√≥mo no morir si solo conoces a Oracle</a></li>
<li><a href="../es486802/index.html">La gente conoce los sistemas de recomendaci√≥n. Factorizaci√≥n</a></li>
<li><a href="../es486804/index.html">Inform√°tica sanitaria mundial: tecnolog√≠as en la nube</a></li>
<li><a href="../es486808/index.html">Prueba de embarazo electr√≥nica de una farmacia: c√≥mo funciona</a></li>
<li><a href="../es486810/index.html">Nueva interfaz de Odnoklassniki: lanzamiento de React en Java. Parte II</a></li>
<li><a href="../es486818/index.html">Portar Quake a iPod Classic</a></li>
<li><a href="../es486820/index.html">70 preguntas de la entrevista de Javascript</a></li>
<li><a href="../es486822/index.html">[Por los muelles] Aleteo. Parte 4. Para desarrolladores web</a></li>
<li><a href="../es486824/index.html">Mal consejo al trabajar con ANTLR</a></li>
<li><a href="../es486826/index.html">Creaci√≥n de un Viberbot completo en Django 2 y la API REST de Viber. Primera parte - Webhook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>