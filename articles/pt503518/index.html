<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍✈️ 👍 👩🏿‍🤝‍👩🏾 Neomorfismo usando SwiftUI. Parte 2: O que pode ser feito com acessibilidade? 🤦🏾 🕵🏾 👨🏾‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá a todos! Em antecipação ao lançamento do curso avançado “IOS Developer”, publicamos uma tradução da segunda parte do artigo sobre neomorfismo usan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Neomorfismo usando SwiftUI. Parte 2: O que pode ser feito com acessibilidade?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/503518/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olá a todos! </font><font style="vertical-align: inherit;">Em antecipação ao lançamento do curso avançado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“IOS Developer”,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> publicamos uma tradução da segunda parte do artigo sobre neomorfismo usando o SwiftUI ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leia a primeira parte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/he/yr/xx/heyrxxyvuyqlbcy3ky0-7wuosmu.png"><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tema escuro</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de começarmos a entender como podemos melhorar a disponibilidade do neomorfismo, vamos ver como podemos trabalhar com o efeito para criar outros estilos interessantes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro adicione mais duas cores à extensão, </font></font><code>Color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para que tenhamos vários valores constantes à mão:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> darkStart = <span class="hljs-type">Color</span>(red: <span class="hljs-number">50</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">60</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">65</span> / <span class="hljs-number">255</span>)
<span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> darkEnd = <span class="hljs-type">Color</span>(red: <span class="hljs-number">25</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">25</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">30</span> / <span class="hljs-number">255</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podemos usá-los como pano de fundo </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, substituindo o existente </font></font><code>Color.white</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, conforme mostrado aqui:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
    <span class="hljs-type">ZStack</span> {
        <span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O nosso </font></font><code>SimpleButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agora parece fora de lugar, porque impõe uma estilização brilhante em um fundo escuro. Então, criaremos um novo estilo escuro que funcione melhor aqui, mas desta vez vamos dividi-lo em duas partes: uma visualização em segundo plano que podemos usar em qualquer lugar, e um estilo de botão que o envolva com os modificadores de preenchimento e contentShape. Isso nos dará mais flexibilidade, como você verá mais adiante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A nova visualização de plano de fundo que adicionaremos nos permitirá especificar qualquer forma para nosso efeito visual, para que não fiquemos mais apegados a círculos. Ele também acompanhará se côncava nosso efeito convexo (interno ou externo), dependendo da propriedade </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que podemos mudar do lado de fora.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Começaremos com o mais simples, usando uma abordagem de inversão de sombra modificada para obter um efeito côncavo. </font><font style="vertical-align: inherit;">Adicione esta estrutura:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkBackground</span>&lt;<span class="hljs-title">S</span>: <span class="hljs-title">Shape</span>&gt;: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">var</span> isHighlighted: <span class="hljs-type">Bool</span>
    <span class="hljs-keyword">var</span> shape: <span class="hljs-type">S</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-keyword">if</span> isHighlighted {<font></font>
                shape<font></font>
                    .fill(<span class="hljs-type">Color</span>.darkEnd)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
<font></font>
            } <span class="hljs-keyword">else</span> {<font></font>
                shape<font></font>
                    .fill(<span class="hljs-type">Color</span>.darkEnd)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
                    .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A modificação é que, quando o botão é pressionado, o tamanho da sombra diminui - usamos uma distância de 5 pontos em vez de 10. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, podemos envolvê-lo com a ajuda de </font></font><code>DarkButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">padding e contentShape, como mostrado aqui:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkButtonStyle</span>: <span class="hljs-title">ButtonStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {<font></font>
        configuration.label<font></font>
            .padding(<span class="hljs-number">30</span>)<font></font>
            .contentShape(<span class="hljs-type">Circle</span>())<font></font>
            .background(<font></font>
                <span class="hljs-type">DarkBackground</span>(isHighlighted: configuration.isPressed, shape: <span class="hljs-type">Circle</span>())<font></font>
            )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finalmente, podemos aplicar isso ao nosso botão </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alterando-o </font></font><code>ButtonStyle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs">.buttonStyle(<span class="hljs-type">DarkButtonStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ver o que aconteceu - embora não tenhamos muito código, acho que o resultado parece bom o suficiente.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/va/7o/jzva7ocai47mzhaj-cft8nn7e6g.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algumas experiências</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora é a hora de experimentar o efeito, porque ele ajudará você a entender melhor do que o SwiftUI é especificamente capaz. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, podemos criar um botão convexo suave adicionando um gradiente linear a ele e girá-lo quando pressionado:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkEnd, <span class="hljs-type">Color</span>.darkStart))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
<font></font>
} <span class="hljs-keyword">else</span> {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você executar isso, verá que o botão anima suavemente para cima e para baixo quando pressionado e solto. </font><font style="vertical-align: inherit;">Eu acho que a animação é um pouco perturbadora, por isso recomendo desativá-la adicionando esse modificador ao método </font></font><code>makeBody()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font></font><code>DarkButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, após o modificador presente lá </font></font><code>background()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs">.animation(<span class="hljs-literal">nil</span>)</code></pre><br>
<img src="https://habrastorage.org/webt/g3/lo/n5/g3lon5maomyp_uldbmdvxiknxvs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse efeito do botão de almofada é encantador, mas se você planeja usá-lo, aconselho a tentar as três alterações a seguir para destacar o botão um pouco mais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em primeiro lugar, apesar do fato de que isso contradiz o princípio de baixo contraste do design neomórfico, eu substituiria o ícone cinza por um ícone branco para destacá-lo. </font><font style="vertical-align: inherit;">Então, </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">você precisaria do seguinte:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
    .foregroundColor(.white)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em segundo lugar, se você adicionar sobreposição para o botão no estado pressionado, isso não apenas fará com que pareça mais com um botão físico real pressionado uniformemente, mas também ajudará a distinguir seu estado pressionado do não pressionado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para implementar isso, você precisa inserir o modificador </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">depois </font></font><code>fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é verdade, como aqui:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkEnd, <span class="hljs-type">Color</span>.darkStart))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)</code></pre><br>
<img src="https://habrastorage.org/webt/dz/3r/ek/dz3rekiskxg_akiehpl0xp6iv9u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obter uma aparência ainda mais nítida, você pode remover dois modificadores </font></font><code>shadow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para o estado pressionado que se concentram na sobreposição. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em terceiro lugar, você também pode adicionar sobreposição ao estado não compactado, apenas para marcar que é um botão. </font><font style="vertical-align: inherit;">Coloque-o imediatamente depois </font></font><code>fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, assim:</font></font><br>
<br>
<pre><code class="swift hljs">} <span class="hljs-keyword">else</span> {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">Color</span>.darkEnd, lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/l7/5s/jf/l75sjfjt4ymqfaoeyshsdwto1ds.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicionando um estilo de switch</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das vantagens de separar um estilo de botão de um estilo de fundo não-mórfico é que agora podemos adicionar um estilo de opção usando o mesmo efeito. </font><font style="vertical-align: inherit;">Isso significa criar uma nova estrutura compatível com protocolo </font></font><code>ToggleStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">semelhante a </font></font><code>ButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, exceto que:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precisamos ler </font></font><code>configuration.isOn</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para determinar se o interruptor está ativado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precisamos fornecer um botão para lidar com o ato de mudar, ou pelo menos algo assim </font></font><code>onTapGesture()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font><font style="vertical-align: inherit;">algo assim </font><font style="vertical-align: inherit;">.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione esta estrutura ao seu projeto:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">DarkToggleStyle</span>: <span class="hljs-title">ToggleStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: {<font></font>
            configuration.isOn.toggle()<font></font>
        }) {<font></font>
            configuration.label<font></font>
                .padding(<span class="hljs-number">30</span>)<font></font>
                .contentShape(<span class="hljs-type">Circle</span>())<font></font>
        }<font></font>
        .background(<font></font>
            <span class="hljs-type">DarkBackground</span>(isHighlighted: configuration.isOn, shape: <span class="hljs-type">Circle</span>())<font></font>
        )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queremos colocar um deles </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para que você possa testá-lo, então comece adicionando esta propriedade:</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isToggled = <span class="hljs-literal">false</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, enrole o botão existente </font></font><code>VStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com espaçamento igual a 40 e coloque-o abaixo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Toggle</span>(isOn: $isToggled) {
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.toggleStyle(<span class="hljs-type">DarkToggleStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sua estrutura </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deve ficar assim:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isToggled = <span class="hljs-literal">false</span><font></font>
<font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd)<font></font>
<font></font>
            <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">40</span>) {
                <span class="hljs-type">Button</span>(action: {
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Button tapped"</span>)<font></font>
                }) {<font></font>
                    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
                        .foregroundColor(.white)<font></font>
                }<font></font>
                .buttonStyle(<span class="hljs-type">DarkButtonStyle</span>())<font></font>
<font></font>
                <span class="hljs-type">Toggle</span>(isOn: $isToggled) {
                    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
                        .foregroundColor(.white)<font></font>
                }<font></font>
                .toggleStyle(<span class="hljs-type">DarkToggleStyle</span>())<font></font>
            }<font></font>
        }<font></font>
        .edgesIgnoringSafeArea(.all)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E é tudo - aplicamos nosso design neomórfico comum em dois lugares!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melhoria da acessibilidade</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tivemos tempo suficiente para brincar com vários estilos neomórficos, mas agora quero me concentrar nos problemas desse design: uma extrema falta de contraste significa que botões e outros controles importantes não são suficientes para se destacar do ambiente, o que dificulta o uso de nossos aplicativos para pessoas com visão imperfeita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este é o momento em que observo alguns mal-entendidos, por isso quero dizer algumas coisas com antecedência:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sim, entendo que os botões padrão da Apple se parecem com texto azul e, portanto, não se parecem com botões familiares, pelo menos à primeira vista, mas eles têm uma alta taxa de contraste.</font></font></li>
<li>  «   ,      ,     » —  —   « »,  ,        ,     - .</li>
<li>    -     SwiftUI,  ,             VoiceOver     Apple.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você já viu como alteramos o ícone cinza para branco para obter aprimoramento instantâneo do contraste, mas os botões e interruptores ainda precisam de muito mais contraste se você quiser torná-los mais acessíveis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então, vamos considerar quais mudanças poderíamos fazer para que os elementos realmente se destacassem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, gostaria que você adicionasse duas novas cores à nossa extensão:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> lightStart = <span class="hljs-type">Color</span>(red: <span class="hljs-number">60</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">160</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">240</span> / <span class="hljs-number">255</span>)
<span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> lightEnd = <span class="hljs-type">Color</span>(red: <span class="hljs-number">30</span> / <span class="hljs-number">255</span>, green: <span class="hljs-number">80</span> / <span class="hljs-number">255</span>, blue: <span class="hljs-number">120</span> / <span class="hljs-number">255</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em segundo lugar, duplique o existente </font></font><code>DarkBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e nomeie a cópia </font></font><code>ColorfulBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nós vamos lidar com isso em um momento, mas, novamente, primeiro precisamos fazer alguma preparação. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terceiro, duplique o estilo escuro do botão e alterne, renomeie-o para </font></font><code>ColorfulButtonStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>ColorfulToggleStyle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, em seguida, faça-os usar o novo </font></font><code>ColorfulBackground</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como plano de fundo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então eles devem ficar assim:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ColorfulButtonStyle</span>: <span class="hljs-title">ButtonStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {<font></font>
        configuration.label<font></font>
            .padding(<span class="hljs-number">30</span>)<font></font>
            .contentShape(<span class="hljs-type">Circle</span>())<font></font>
            .background(<font></font>
                <span class="hljs-type">ColorfulBackground</span>(isHighlighted: configuration.isPressed, shape: <span class="hljs-type">Circle</span>())<font></font>
            )<font></font>
            .animation(<span class="hljs-literal">nil</span>)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ColorfulToggleStyle</span>: <span class="hljs-title">ToggleStyle</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">makeBody</span><span class="hljs-params">(configuration: <span class="hljs-keyword">Self</span>.Configuration)</span></span> -&gt; some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: {<font></font>
            configuration.isOn.toggle()<font></font>
        }) {<font></font>
            configuration.label<font></font>
                .padding(<span class="hljs-number">30</span>)<font></font>
                .contentShape(<span class="hljs-type">Circle</span>())<font></font>
        }<font></font>
        .background(<font></font>
            <span class="hljs-type">ColorfulBackground</span>(isHighlighted: configuration.isOn, shape: <span class="hljs-type">Circle</span>())<font></font>
        )<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, finalmente, edite o botão e alterne </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para usar o novo estilo:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">Button</span>(action: {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Button tapped"</span>)<font></font>
}) {<font></font>
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.buttonStyle(<span class="hljs-type">ColorfulButtonStyle</span>())<font></font>
<font></font>
<span class="hljs-type">Toggle</span>(isOn: $isToggled) {
    <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"heart.fill"</span>)<font></font>
        .foregroundColor(.white)<font></font>
}<font></font>
.toggleStyle(<span class="hljs-type">ColorfulToggleStyle</span>())</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode executar o aplicativo, se quiser, mas isso não faz sentido - ele não mudou. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para trazer nossa versão colorida da vida, mudaremos os modificadores </font></font><code> fill()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">os estados pressionado e não pressionado. </font><font style="vertical-align: inherit;">Assim, quando </font></font><code>isHighlighted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro, mudar </font></font><code>darkStart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tanto </font></font><code>darkEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para </font></font><code>lightStart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>lightEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como este:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">if</span> isHighlighted {<font></font>
    shape<font></font>
        .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightEnd, <span class="hljs-type">Color</span>.lightStart))<font></font>
        .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
        .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você executar o aplicativo novamente, verá que ele já melhorou significativamente: o estado pressionado agora possui uma cor azul brilhante, tornando-se claro quando os botões são pressionados e os comutadores estão ativos. </font><font style="vertical-align: inherit;">Mas podemos fazer outra coisa - podemos adicionar a mesma cor ao redor do botão quando ele não é pressionado, ajudando a chamar a atenção para ele. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/gb/lo/pogblok8qjgbcoiourimhye6tx4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, altere o </font></font><code>overlay()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estado não estressado </font><font style="vertical-align: inherit;">existente </font><font style="vertical-align: inherit;">para isso:</font></font><br>
<br>
<pre><code class="swift hljs">.overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o estilo do botão final deve ficar assim:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-type">ZStack</span> {
    <span class="hljs-keyword">if</span> isHighlighted {<font></font>
        shape<font></font>
            .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightEnd, <span class="hljs-type">Color</span>.lightStart))<font></font>
            .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">5</span>, y: <span class="hljs-number">5</span>)<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">5</span>, y: -<span class="hljs-number">5</span>)<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        shape<font></font>
            .fill(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.darkStart, <span class="hljs-type">Color</span>.darkEnd))<font></font>
            .overlay(shape.stroke(<span class="hljs-type">LinearGradient</span>(<span class="hljs-type">Color</span>.lightStart, <span class="hljs-type">Color</span>.lightEnd), lineWidth: <span class="hljs-number">4</span>))<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkStart, radius: <span class="hljs-number">10</span>, x: -<span class="hljs-number">10</span>, y: -<span class="hljs-number">10</span>)<font></font>
            .shadow(color: <span class="hljs-type">Color</span>.darkEnd, radius: <span class="hljs-number">10</span>, x: <span class="hljs-number">10</span>, y: <span class="hljs-number">10</span>)<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora execute o aplicativo novamente e você verá que um anel azul apareceu ao redor dos botões e interruptores e, quando clicado, é preenchido com azul - é muito mais acessível.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2r/gl/x7/2rglx7dgbgwzdh8ch3mvzrddsra.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na prática, você não terá vários estilos de botão diferentes em um projeto, pelo menos se não gostar de criar uma dor de cabeça para seus usuários. Mas este é um espaço interessante para experimentação, e espero que você entenda essa ideia do meu artigo, porque você pode criar efeitos realmente bonitos sem rasgar suas costas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu disse repetidamente que você deve sempre monitorar a disponibilidade do seu aplicativo, e isso significa mais do que apenas garantir que o VoiceOver funcione com a interface do usuário. Certifique-se de que seus botões pareçam interativos, verifique se os rótulos e os ícones de texto têm uma taxa de contraste suficiente em relação ao plano de fundo (pelo menos 4,5: 1, mas tendem a 7: 1) e verifique se as áreas clicáveis ​​são confortáveis ​​e grande (pelo menos 44x44 pixels).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, pelo amor de Deus, use o design neomórfico para experimentar e expandir seu conhecimento do SwiftUI, mas nunca se esqueça de que, se você sacrifica a usabilidade por uma nova tendência de design de moda, não ganha nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode obter o código-fonte completo para este projeto no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leia a primeira parte.</font></font></a><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saiba mais sobre o curso.</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt503488/index.html">Melhores práticas do Kubernetes. Desativar finalização correta</a></li>
<li><a href="../pt503490/index.html">Comparação de cenas de rap russas usando técnicas de mineração de texto e texto. Noize Mc, Oxxxymiron, tio Zhenya. Episódio 2</a></li>
<li><a href="../pt503494/index.html">Montando um gateway DIY para dispositivos Zigbee</a></li>
<li><a href="../pt503504/index.html">O projeto de ciência de dados mais bem-sucedido e mais escandaloso: Cambridge Analytica</a></li>
<li><a href="../pt503508/index.html">Escolas, professores, alunos, suas notas e classificações</a></li>
<li><a href="../pt503522/index.html">Mundo depois de 2020 (ensaio)</a></li>
<li><a href="../pt503524/index.html">Como registrador de domínio, o P01 Registrar entrega seus clientes</a></li>
<li><a href="../pt503526/index.html">Django ORM para iniciantes | Otimizamos solicitações</a></li>
<li><a href="../pt503530/index.html">Seu declínio profissional virá (muito) mais cedo do que você pensa</a></li>
<li><a href="../pt503532/index.html">Como as compras on-line nos EUA mudaram devido ao coronavírus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>