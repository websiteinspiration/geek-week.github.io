<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜö üè† üëãüèø NoVerify: um linter PHP que funciona r√°pido üë¨ üôèüèΩ üö¥üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existem bons utilit√°rios de an√°lise est√°tica para PHP: PHPStan, Salmo, Phan, Exakat. Os linters fazem seu trabalho bem, mas muito lentamente, porque q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NoVerify: um linter PHP que funciona r√°pido</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/487260/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Existem bons utilit√°rios de an√°lise est√°tica para PHP: PHPStan, Salmo, Phan, Exakat. </font><font style="vertical-align: inherit;">Os linters fazem seu trabalho bem, mas muito lentamente, porque quase todos s√£o escritos em PHP (ou Java). </font><font style="vertical-align: inherit;">Para uso pessoal ou um projeto pequeno, isso √© normal, mas para um site com milh√µes de usu√°rios, esse √© um fator cr√≠tico. </font><font style="vertical-align: inherit;">Uminterinter lento diminui a velocidade do pipeline do IC e torna imposs√≠vel us√°-lo como uma solu√ß√£o que pode ser integrada a um editor de texto ou IDE. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/zg/kr/ofzgkrouigpm_lqdgdxepukek4q.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um site com milh√µes de usu√°rios √© o VKontakte. </font><font style="vertical-align: inherit;">Desenvolvimento e adi√ß√£o de novas fun√ß√µes, teste e corre√ß√£o de bugs, revis√µes - tudo isso deve ocorrer rapidamente, nas condi√ß√µes de prazos r√≠gidos. </font><font style="vertical-align: inherit;">Portanto, um linter bom e r√°pido que pode verificar a base de c√≥digos em 5 milh√µes de linhas em 5 a 10 segundos √© algo insubstitu√≠vel.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o existem linters adequados no mercado, por isso Yuri Nasretdinov (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voc√™ √© demais</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) de VKontakte escreveu sua ajuda para equipes de desenvolvimento - NoVerify. </font><font style="vertical-align: inherit;">Este √© um ponteiro para PHP, escrito em Go. </font><font style="vertical-align: inherit;">Ele funciona de 10 a 30 vezes mais r√°pido que os an√°logos, pode encontrar algo que o PhpStorm n√£o avisa, se estende e se integra facilmente a projetos nos quais eles nunca ouviram falar de an√°lise est√°tica.&nbsp;</font><strong><font style="vertical-align: inherit;">Iskander Sharipov</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
contar√° sobre esse linter </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sob o gato: como escolher um linter e preferir escrever o seu, por que o NoVerify √© t√£o r√°pido e como √© organizado por dentro, por que est√° escrito em Go, o que pode encontrar e como se expande, quais compromissos voc√™ teve que fazer para ele e o que pode ser constru√≠do com base nele.</font></font><br>
<a name="habracut"></a><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/dlcDvUTQ5Lk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iskander Sharipov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quasilyte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) trabalha na infraestrutura de back-end do VKontakte e conhece bem o NoVerify. </font><font style="vertical-align: inherit;">No passado, ele estava envolvido no compilador Go da equipe da Intel. </font><font style="vertical-align: inherit;">Ele n√£o escreve em PHP, mas esta √© sua linguagem favorita para an√°lise est√°tica - h√° muitas coisas que podem dar errado. </font></font><br>
<br>
<i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota. </font></font></strong></i><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para entender os antecedentes, leia o artigo de Yuri Nasretdinov, autor do NoVerify on </font></font></i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habr√©,</font></font></i></a><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com um hist√≥rico e uma compara√ß√£o com alguns linters existentes, geralmente escritos em PHP. </font><font style="vertical-align: inherit;">Todas as declara√ß√µes na dire√ß√£o do PHP (no artigo de Yuri e aqui) s√£o uma piada. </font><font style="vertical-align: inherit;">Iskander adora PHP, todo mundo adora PHP.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvimento de Produto</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No VKontakte, este √© um desenvolvimento de site no KPHP. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A velocidade √© importante para o VKontakte:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> corrigindo bugs, adicionando e desenvolvendo novas fun√ß√µes desde a primeira fase at√© a √∫ltima. Mas a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">velocidade √© acompanhada de erros</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , especialmente quando h√° prazos r√≠gidos - estamos com pressa, nervosos e cometemos mais erros do que em uma situa√ß√£o calma. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erros afetam os usu√°rios</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . N√£o queremos que eles sofram, por isso controlamos a qualidade. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas o controle de qualidade atrasa o desenvolvimento</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Isso tamb√©m n√£o queremos, portanto o efeito deve ser minimizado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, poder√≠amos realizar </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais an√°lises de</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥digo sem falhas, contratar </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais testadores</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e escreva mais testes. </font><font style="vertical-align: inherit;">Mas tudo isso √© mal automatizado: a revis√£o deve ser feita e os testes devem ser escritos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As principais tarefas da minha equipe s√£o diferentes. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colete m√©tricas, analise e repare rapidamente</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se algo der errado, queremos revert√™-lo rapidamente, entender o que est√° errado, corrigi-lo e adicionar rapidamente o c√≥digo de trabalho √† produ√ß√£o. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitore o rigor do pipeline</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para que o c√≥digo n√£o operacional n√£o entre em produ√ß√£o - voc√™ n√£o precisa revert√™-lo. </font><font style="vertical-align: inherit;">Aqui os linters v√™m para o resgate - analisadores de c√≥digo est√°tico. </font><font style="vertical-align: inherit;">N√≥s vamos falar sobre isso.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escolha um linter</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos escolher um linter que adicionamos ao pipeline. Adotamos uma abordagem simples - formulamos os requisitos. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linter deve trabalhar r√°pido</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Existem v√°rias etapas em nosso pipeline: a opera√ß√£o do linter n√£o deve levar muito tempo e um desenvolvedor demorado, enquanto ele aguarda feedback. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte para "seus" cheques</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Provavelmente, o linter n√£o tem tudo o que precisamos - teremos que adicionar nossos pr√≥prios cheques. Eles devem encontrar problemas t√≠picos da nossa base de c√≥digo, verificar o c√≥digo do ponto de vista do nosso projeto. Nem tudo isso pode ser (ou convenientemente) coberto por testes. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suporte para verifica√ß√µes "pr√≥prias"</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Podemos escrever muitos testes, mas eles ser√£o bem suportados? </font><font style="vertical-align: inherit;">Por exemplo, se escrevermos em express√µes regulares, elas se tornar√£o mais complicadas quando voc√™ precisar levar em considera√ß√£o o contexto, a sem√¢ntica e a sintaxe da linguagem. </font><font style="vertical-align: inherit;">Portanto, os testes n√£o s√£o uma op√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maioria dos linters que analisamos s√£o escritos em PHP. </font><font style="vertical-align: inherit;">Mas eles n√£o transmitem a demanda. </font><font style="vertical-align: inherit;">Linters em PHP (ainda n√£o h√° compila√ß√£o da AOT) funcionam 10 a 20 vezes mais devagar que em outros idiomas - nosso maior arquivo pode ser analisado por dezenas de segundos. </font><font style="vertical-align: inherit;">Isso diminui muito e muito o fluxo de trabalho - essa √© uma </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falha fatal</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O que os desenvolvedores fazem neste caso? </font><font style="vertical-align: inherit;">Eles escrevem os seus pr√≥prios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, escrevemos nosso linter NoVerify PHP on Go. </font><font style="vertical-align: inherit;">Por qu√™? </font><font style="vertical-align: inherit;">Spoiler: n√£o apenas porque Jura decidiu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Noverify</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Go √© um bom compromisso entre velocidade de desenvolvimento e produtividade.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A primeira "prova" na imagem com "infogr√°ficos": boa velocidade de execu√ß√£o, suporte f√°cil. </font><font style="vertical-align: inherit;">Perdemos na velocidade do desenvolvimento, mas os dois primeiros pontos s√£o mais importantes para n√≥s.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c67/bfb/e53/c67bfbe537c7b8996cc429cef661c377.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As figuras s√£o tiradas da cabe√ßa, n√£o s√£o apoiadas por nada. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a segunda "evid√™ncia", ele argumentou de maneira mais simples.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c10/6e7/2e9/c106e72e9b04791cd5abd3097664c875.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHP √© mais lento, Go √© mais r√°pido e assim por diante.&nbsp;</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Escolhemos Go por tr√™s raz√µes. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ir como um idioma para utilit√°rios √© f√°cil de aprender em um n√≠vel b√°sico</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Na equipe de desenvolvimento do PHP, com certeza, algu√©m ouviu falar sobre o Go, olhou para o Docker, sabe que est√° escrito no Go, talvez at√© tenha visto a fonte. Com um entendimento b√°sico, ap√≥s uma ou duas semanas de intenso aprendizado do Go, eles poder√£o escrever c√≥digo nele. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go √© bastante eficaz</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mesmo um iniciante n√£o ser√° capaz de cometer muitos erros, porque o Go possui boa sintonia e muita interfer√™ncia. No Go, o c√≥digo m√©dio √© um pouco melhor do que em outros idiomas, porque h√° muito menos maneiras de fotografar sua pr√≥pria perna. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os aplicativos Go s√£o f√°ceis de manter.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go √© uma linguagem de programa√ß√£o bastante madura para a qual quase todas as ferramentas de desenvolvedor que voc√™ pode desejar est√£o dispon√≠veis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verificaremos o NoVerify com nossos requisitos.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O NoVerify √© </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√°rias vezes mais r√°pido que as alternativas</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para isso, voc√™ pode </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrever extens√µes</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tanto de c√≥digo aberto quanto as suas. </font><font style="vertical-align: inherit;">√â importante que possamos separar essas verifica√ß√µes e voc√™ pode escrever suas pr√≥prias.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√°cil de testar e desenvolver. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em parte, porque a distribui√ß√£o Go padr√£o tem uma estrutura padr√£o com cria√ß√£o de perfil e teste. </font><font style="vertical-align: inherit;">√â usado principalmente para testes de unidade. </font><font style="vertical-align: inherit;">Particularmente h√°bil pode ser usado para integra√ß√£o, como fazemos - temos testes de integra√ß√£o escritos atrav√©s de testes Go.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compromisso de integra√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar com o problema. </font><font style="vertical-align: inherit;">Quando voc√™ inicia qualquer linter pela </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeira vez</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em um projeto antigo que n√£o usou nenhuma an√°lise, provavelmente ver√° isso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rx/yu/qz/rxyuqz6edr8po3uc7xo87byzgpu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh meu c√≥digo! </font><font style="vertical-align: inherit;">Ningu√©m jamais corrigir√° tantos erros. </font><font style="vertical-align: inherit;">Quero fechar o projeto, remover o linter e nunca execut√°-lo novamente. </font><font style="vertical-align: inherit;">O que fazer para evitar isso?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integrar</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execute no modo diff</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . N√£o queremos executar todas as verifica√ß√µes em todo o projeto com um milh√£o de erros a cada etapa do IC. Talvez voc√™ conhe√ßa a linha de base: no NoVerify, isso est√° pronto para o uso, voc√™ n√£o precisa incorporar um utilit√°rio separado. Consideramos imediatamente que esse regime era necess√°rio. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicione legado (fornecedores) √†s exce√ß√µes</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . √â mais f√°cil n√£o tocar em algumas coisas, deixar de lado, mesmo com um defeito, para n√£o modific√°-lo e n√£o deixar uma marca na hist√≥ria. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Come√ßamos com um subconjunto de verifica√ß√µes</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Voc√™ n√£o pode conectar tudo o que inclui estilo. Para come√ßar, ele encontra bugs reais: encontraremos, corrigiremos e mudaremos para algo novo. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coletamos feedback de colegas</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Como entender quando √© hora de ativar outra coisa? </font><font style="vertical-align: inherit;">Pergunte aos colegas. </font><font style="vertical-align: inherit;">Assim que ficarem satisfeitos com o desaparecimento dos erros e quase nada for encontrado, ative outra coisa - √© hora de trabalhar.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o do Git</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modo Diff significa que voc√™ tem um sistema de controle de vers√£o - Git. Se voc√™ possui SVN, a instru√ß√£o n√£o ajuda, v√° para Git. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalamos o gancho pr√©-empurre com um linter</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e verificamos antes de iniciar o c√≥digo. Verificamos na m√°quina local </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uma </font><strong><font style="vertical-align: inherit;">op√ß√£o </font></strong></font><code>--no-verify</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para ignorar o linter</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Provavelmente seria mais conveniente usar um gancho de pr√©-recebimento e desativar o linter do lado do servidor, mas, por raz√µes hist√≥ricas, muitas coisas acontecem no VK em um gancho de pr√©-envio, portanto o NoVerify tamb√©m foi constru√≠do l√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o envio, as verifica√ß√µes de IC s√£o iniciadas. O NoVerify possui dois modos de opera√ß√£o: com an√°lise completa e sem ela. No IC, voc√™ provavelmente deseja (e pode) executar</font></font><code>--git-full-diff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- as m√°quinas no IC podem ser carregadas com mais for√ßa e verificam at√© os arquivos que n√£o foram alterados. </font><font style="vertical-align: inherit;">Em m√°quinas locais, podemos executar uma an√°lise menos rigorosa, mas mais r√°pida, apenas dos arquivos alterados (5-15 segundos mais r√°pido).&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Falso-positivo</font></font></h3><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c8/508/9c9/5c85089c909c79ed02c4c72f25bb9850.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere o exemplo abaixo: nesta fun√ß√£o, algo que cont√©m um campo √© aceito, mas o tipo n√£o √© descrito de forma alguma. </font><font style="vertical-align: inherit;">N√£o √© fato que exista um campo quando uma fun√ß√£o √© chamada de diferentes contextos. </font><font style="vertical-align: inherit;">Em uma vers√£o estrita, o linter poderia reclamar: "N√£o est√° claro de que tipo √©, como posso retornar um campo sem verifica√ß√µes?" </font><font style="vertical-align: inherit;">Mas isso n√£o √© necessariamente um erro.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_foo</span>(<span class="hljs-params">$obj</span>) </span>{
    <span class="hljs-keyword">return</span> $obj-&gt;foo;<font></font>
    ^^^<font></font>
}<font></font>
<font></font>
Warning:<font></font>
Property <span class="hljs-string">"foo"</span> does not exist</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os falsos positivos interferem.&nbsp;</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta √© a principal raz√£o para abandonar o linter. </font><font style="vertical-align: inherit;">As pessoas escolhem outras op√ß√µes que encontram menos erros, mas produzem menos falsos positivos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles costumam insistir quando algo funcionou, mas isso n√£o √© um erro. </font><font style="vertical-align: inherit;">Muitos t√™m um mecanismo para ignorar o linter - para executar com a bandeira sem verificar o linter. </font><font style="vertical-align: inherit;">Em nosso pa√≠s, essa bandeira foi chamada </font></font><code>no-verify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de gancho pr√©-push. </font><font style="vertical-align: inherit;">N√≥s o usamos frequentemente e o nome foi imortalizado no nome do linter.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pickiness</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra propriedade do linter. </font><font style="vertical-align: inherit;">Por exemplo, muitos n√£o entendem aliases. </font><font style="vertical-align: inherit;">No PHP, </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isso √© um an√°logo </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: n√£o calcula o tamanho, mas retorna o n√∫mero de elementos. </font><font style="vertical-align: inherit;">O modelo mental dos desenvolvedores de C tem um </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significado diferente. </font><font style="vertical-align: inherit;">Se na base de c√≥digo houver </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, provavelmente, m√©dia </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas isso √© nitpicking.</font></font><br>
<br>
<pre><code class="php hljs">$len = sizeof($x);<font></font>
    ^^^^^^<font></font>
<font></font>
Warning:<font></font>
<span class="hljs-keyword">use</span> "<span class="hljs-title">count</span>" <span class="hljs-title">instead</span> <span class="hljs-title">of</span> "<span class="hljs-title">sizeof</span>"</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que fazer com isso?</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seja rigoroso e force a governar tudo, sem exce√ß√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Impor regras, exigir, observar e n√£o permitir que elas contornem - nunca funciona. Para que essa rigidez funcione, a equipe deve ser composta pelas mesmas pessoas: car√°ter, n√≠vel de cultura, pedantismo e percep√ß√£o da qualidade do c√≥digo. Se n√£o for assim, haver√° um tumulto. √â mais f√°cil montar uma equipe com seus clones do que for√ßar a seguir todas as regras.&nbsp; </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o bloqueie push / comprometer em coment√°rios como a fixa√ß√£o </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Provavelmente, isso n√£o √© um erro, mas uma escolha de nit e n√£o afeta o c√≥digo. Por√©m, 99% das respostas ser√£o ignoradas (pela equipe) e sempre haver√° outras extras no c√≥digo </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permita algum n√≠vel de configura√ß√£o para diferentes equipes e desenvolvedores.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode configurar a configura√ß√£o para cada comando para que aqueles que n√£o querem a mudan√ßa </font></font><code>sizeof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para </font></font><code>count</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o posso fazer isso. </font><font style="vertical-align: inherit;">Deixe todo mundo seguir as regras. </font><font style="vertical-align: inherit;">Uma boa op√ß√£o, mas a consist√™ncia diminuir√° e, em alguns diret√≥rios, o c√≥digo ser√° um pouco pior. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execute essas verifica√ß√µes uma vez por m√™s, nos subbotniks</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As verifica√ß√µes podem ser executadas n√£o sempre no CI ou no gancho de pr√©-push, mas na rotina Cron uma vez por m√™s. </font><font style="vertical-align: inherit;">Execute e edite tudo o que encontrar ap√≥s o desenvolvimento ativo. </font><font style="vertical-align: inherit;">Mas este trabalho requer recursos para automa√ß√£o e verifica√ß√£o. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazer nada. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desativar verifica√ß√µes estil√≠sticas tamb√©m √© uma op√ß√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compromisso</font></font></h3><br>
<img src="https://habrastorage.org/webt/-l/jq/ao/-ljqaougomtrtjxnr_kl_b6rgyk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sempre haver√° um compromisso entre um desenvolvedor feliz e um linter feliz. </font><font style="vertical-align: inherit;">√â f√°cil fazer um linter feliz: o modo mais rigoroso e a falta de solu√ß√µes alternativas. </font><font style="vertical-align: inherit;">Talvez depois disso ningu√©m permane√ßa na equipe; portanto, se o interfer√™ncia interfere no trabalho, isso √© um problema.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A√ß√£o √∫til acima de tudo.</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Detalhes t√©cnicos NoVerify</font></font></h2><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cheques particulares VKontakte.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O Noverify est√° escrito assim. No GitHub, o reposit√≥rio NoVerify √© dividido em duas partes: a estrutura usada para implementar o linter e separar verifica√ß√µes, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vklints</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Isso √© feito para que o linter carregue verifica√ß√µes de terceiros: voc√™ pode escrever um m√≥dulo separado no Go e eles se registram na estrutura. Ap√≥s iniciar a partir do bin√°rio NoVerify, a estrutura carrega todos os conjuntos de verifica√ß√µes registrados e eles funcionam como um todo.&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/jj/5z/s8jj5zbegovtmxkg8ydhezx2mfw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NoVerify √© uma biblioteca e um bin√°rio (linter). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossos cheques s√£o chamados </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vklints</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Eles acham que n√£o v√™em o PhpStorm e o Open Source NoVerify - erros importantes que n√£o s√£o adequados para uso geral. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que √© vklints?</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verificar as especificidades do uso de determinadas fun√ß√µes</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , classes e at√© vari√°veis ‚Äã‚Äãglobais que n√£o seguem nossas conven√ß√µes. Isso √© algo que n√£o pode ser usado em locais especiais por v√°rias raz√µes descritas no guia de estilo. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verifica√ß√µes de estilo adicionais.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eles n√£o correspondem ao que √© aceito na comunidade PHP, n√£o s√£o descritos na Recomenda√ß√£o Padr√£o do PHP nem a contradizem, mas para n√≥s √© o padr√£o. N√£o faz sentido adicion√°-los ao c√≥digo aberto porque voc√™ n√£o deseja segui-los. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Requisitos de compara√ß√£o estritos para alguns tipos</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por exemplo, temos uma verifica√ß√£o que exige a compara√ß√£o de strings com um operador de compara√ß√£o </font></font><code>===</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Em particular, √© necess√°rio passar um sinalizador para compara√ß√£o estrita de fun√ß√µes para comparar seq√º√™ncias de caracteres. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaves de matriz suspeitas.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro erro interessante: √†s vezes, quando os desenvolvedores cometem, eles podem pressionar as combina√ß√µes de teclas antes de salvar o arquivo. </font><font style="vertical-align: inherit;">√Äs vezes, esses caracteres permanecem em uma sequ√™ncia ou em um peda√ßo de c√≥digo. </font><font style="vertical-align: inherit;">Uma vez, na chave da matriz estava a letra russa "Y". </font><font style="vertical-align: inherit;">Provavelmente, o desenvolvedor pressionou CTRL-S no layout russo, salvou o arquivo e confirmou. </font><font style="vertical-align: inherit;">√Äs vezes, encontramos essas chaves em matrizes, mas novos erros n√£o passam mais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regras din√¢micas s√£o um mecanismo de extens√£o NoVerify mais simples, descrito em PHP. </font><font style="vertical-align: inherit;">Um artigo separado foi escrito sobre isso: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como adicionar cheques ao NoVerify sem escrever uma √∫nica linha de c√≥digo Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como funciona o NoVerify</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para analisar o PHP, voc√™ precisa de um </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analisador</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">N√£o podemos usar o analisador de PHP no PHP: √© lento, do Go s√≥ pode ser usado atrav√©s de um wrapper em C. Portanto, usamos o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analisador</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este analisador tem v√°rios problemas. </font><font style="vertical-align: inherit;">Infelizmente, ele s√≥ pode trabalhar com UTF-8 e precisamos distinguir entre UTF-8 e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o UTF-8</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Al√©m do UTF-8, o Windows-1251 √© frequentemente encontrado em projetos PHP russos. </font><font style="vertical-align: inherit;">N√≥s tamb√©m temos esses arquivos. </font><font style="vertical-align: inherit;">Como os reconhecemos?&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O arquivo </font></font><code>encodings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lista todos os caminhos onde est√£o os arquivos com UTF-8. </font><font style="vertical-align: inherit;">Se encontrarmos um arquivo fora desses caminhos, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em tempo real,</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> transmitiremos para UTF-8 por streaming stream (sem converter antecipadamente).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c47/ace/5aa/c47ace5aa12a572a201925c6be5e522a.jpg"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lise e an√°lise</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclu√≠do em algumas etapas. </font><font style="vertical-align: inherit;">No primeiro - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carregamos metadados do phpstorm-stubs</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">S√£o dados que se parecem com o c√≥digo PHP, mas nunca s√£o executados e descrevem os tipos de entradas / sa√≠das de fun√ß√µes padr√£o. </font><font style="vertical-align: inherit;">Os metadados do phpStorm t√™m uma diretiva de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substitui√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √∫til para o linter </font><font style="vertical-align: inherit;">... Ele nos permite descrever, por exemplo, que aceitamos uma matriz de tipos </font></font><code>T[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e retornamos o tipo </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(√∫til para fun√ß√µes </font></font><code>array_pop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c62/a79/6a6/c62a796a6fc623a27e92633d80de56c2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O phpstorm-stubs √© carregado primeiro. </font><font style="vertical-align: inherit;">Usamos metadados como as informa√ß√µes iniciais do tipo - a base. </font><font style="vertical-align: inherit;">Essa base √© absorvida pelo linter e come√ßamos a analisar as fontes. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carregamos o mestre atual</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> antes da absor√ß√£o. </font><font style="vertical-align: inherit;">Verificamos o c√≥digo em dois modos:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mudan√ßas locais</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : em rela√ß√£o √† linha de base, encontramos novos erros no c√≥digo;</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indicamos a gama de revis√µes</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : a primeira e a √∫ltima revis√£o, e entre elas tudo √© inclusivo - esse √© o novo c√≥digo e tudo o que ‚Äúantes‚Äù √© antigo.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, vem a etapa de an√°lise.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e4/d05/03b/3e4d0503b0d2932b765ba30c6d8ef698.jpg"></div><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lise AST</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Agora temos metadados, digite informa√ß√µes. </font><font style="vertical-align: inherit;">Pegamos todo o c√≥digo-fonte do PHP, analisamos e analisamos diretamente acima do AST - n√£o temos uma representa√ß√£o intermedi√°ria no momento. </font><font style="vertical-align: inherit;">A an√°lise de um AST bruto n√£o √© muito conveniente, especialmente se voc√™ depende das bibliotecas e tipos de dados que ele representa.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/43c/864/84c/43c86484c14609526fb5db5228bb7f67.jpg"></div><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os resultados da an√°lise s√£o armazenados no cache</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . √â usado na rean√°lise, que √© muito mais r√°pida. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relat√≥rios e filtragem</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Em seguida, geramos </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">relat√≥rios ou avisos</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> duas vezes </font><font style="vertical-align: inherit;">: primeiro encontramos avisos para a vers√£o antiga do c√≥digo (antes da linha de base) e depois para a nova. Os relat√≥rios s√£o filtrados por compara√ß√£o (diff) - procuramos avisos que apareceram na nova vers√£o do c√≥digo e os passamos para o usu√°rio. Em alguns analisadores est√°ticos, isso √© chamado de "modo de linha de base".</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b0c/469/a6d/b0c469a6d2d66eb821b38a37fdd4b828.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A an√°lise de c√≥digo duplo (no modo diff) √© muito lenta. </font><font style="vertical-align: inherit;">Mas podemos pagar - o NoVerify ainda √© dezenas de vezes mais r√°pido que outros vinculadores PHP. </font><font style="vertical-align: inherit;">Ao mesmo tempo, possui uma reserva para acelera√ß√£o adicional, pelo menos em 30%. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como analisamos arquivos? </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No PHP, voc√™ pode chamar uma fun√ß√£o antes que ela seja definida - voc√™ precisa conhecer as informa√ß√µes sobre essa fun√ß√£o antes de analis√°-la. </font><font style="vertical-align: inherit;">Portanto, primeiro examinamos o arquivo inteiro no AST, indexamos, identificamos os tipos de todas as fun√ß√µes, registramos as classes e s√≥ depois as analisamos.&nbsp;</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a6/5f2/844/9a65f2844b9ba3cf78e8b4dee2616430.jpg"></div><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A an√°lise √© a segunda passagem pelo arquivo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A maioria dos int√©rpretes e compiladores tamb√©m trabalha com duas passagens e mais. </font><font style="vertical-align: inherit;">Para n√£o "digitalizar" o arquivo uma segunda vez, voc√™ deve ter declara√ß√µes antes de usar, como em C, por exemplo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infer√™ncia de tipo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A parte mais interessante √© que os erros s√£o mais frequentemente encontrados aqui. </font><font style="vertical-align: inherit;">Ainda n√£o corresponde √† corre√ß√£o do sistema de tipos PHP, que √© dif√≠cil de definir formalmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como √© o modelo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ae/8ec/ca9/8ae8ecca980c79343d149b8b1f15bb15.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo sem√¢ntico (demo). </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tipos de tipos:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esperado</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© o que descrevemos nos coment√°rios. Esperamos alguns tipos no programa, mas isso n√£o significa que eles sejam realmente usados ‚Äã‚Äãnele.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Real</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - reais que est√£o no programa. </font><font style="vertical-align: inherit;">Por exemplo, se atribuirmos um n√∫mero a alguma coisa, √© √≥bvio que </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(se esse for um n√∫mero de ponto flutuante) ser√£o tipos reais.&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os tipos reais parecem ser "mais fortes" - s√£o reais, verdadeiros. </font><font style="vertical-align: inherit;">Mas, √†s vezes, podemos obter um tipo apenas por anota√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As anota√ß√µes (nos tipos esperados) podem ser divididas em duas categorias: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confian√ßa</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desconfian√ßa</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por exemplo, o phpstorm-stubs pertence √† primeira categoria. </font><font style="vertical-align: inherit;">Eles s√£o considerados moderados (sem erros) antes de us√°-los. </font><font style="vertical-align: inherit;">Os n√£o confi√°veis ‚Äã‚Äãs√£o aqueles que outros desenvolvedores escrevem, porque podem ter erros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os tipos reais tamb√©m podem ser divididos em v√°rias partes: valores, asser√ß√£o, predicados e dica de tipo, o que estende os recursos do PHP 7. Mas h√° um problema que a dica de tipo n√£o resolve.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esperado x Real</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Digamos que uma classe </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tenha um herdeiro. Da classe descendente, podemos chamar m√©todos que n√£o est√£o no Foo, porque o descendente estende o pai. Mas se conseguirmos o herdeiro </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>new static()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com essa anota√ß√£o do tipo de retorno (de </font></font><code>self</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), em seguida, um problema ir√° surgir. Podemos chamar esse m√©todo, mas o IDE n√£o solicitar√° - voc√™ precisa especificar </font></font><code>static()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Esta √© uma </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liga√ß√£o est√°tica</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tardia </font><strong><font style="vertical-align: inherit;">no PHP</font></strong><font style="vertical-align: inherit;"> , quando o </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">herdeiro </font><font style="vertical-align: inherit;">da </font><font style="vertical-align: inherit;">classe </font><font style="vertical-align: inherit;">n√£o pode retornar </font><font style="vertical-align: inherit;">.&nbsp;</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> static */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newStatic</span>(<span class="hljs-params"></span>) : <span class="hljs-title">self</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">static</span>();<font></font>
    }<font></font>
}<font></font>
<span class="hljs-comment">// actual = Foo</span>
<span class="hljs-comment">// expected = static</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando escrevemos </font></font><code>new static()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, n√£o apenas a turma pode retornar </font></font><code>new Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Por exemplo, se uma </font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe √© herdada </font><font style="vertical-align: inherit;">de </font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ent√£o pode haver </font></font><code>new bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Portanto, precisamos de pelo menos duas informa√ß√µes de tipo. </font><font style="vertical-align: inherit;">Nenhum deles √© redundante - ambos s√£o necess√°rios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, o tipo Real aqui ser√° </font></font><code>self</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- para o int√©rprete PHP. </font><font style="vertical-align: inherit;">Mas para o IDE e para os linters funcionarem, precisamos </font></font><code>static</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Se chamarmos esse c√≥digo do contexto da classe herdeiro, precisaremos saber as informa√ß√µes de que essa n√£o √© a mesma classe base e que ela possui mais m√©todos.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> static */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newStatic</span>(<span class="hljs-params"></span>) : <span class="hljs-title">self</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">static</span>();<font></font>
    }<font></font>
}<font></font>
<span class="hljs-comment">// actual -  PHP </span>
<span class="hljs-comment">// expected -   IDE/</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digite dica</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digita√ß√£o est√°tica e dica de tipo n√£o s√£o a mesma coisa.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ deve ter ouvido falar que s√≥ pode verificar os limites das fun√ß√µes. </font><font style="vertical-align: inherit;">Nas fronteiras, verificamos as entradas e sa√≠das, onde a entrada √© o argumento da fun√ß√£o. </font><font style="vertical-align: inherit;">Dentro da fun√ß√£o, voc√™ pode fazer qualquer bobagem: atribua um </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valor </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, embora tenha descrito o que √© </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Voc√™ pode reclamar que est√° violando os tipos que declarou, mas para o PHP n√£o </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h√° erro</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">T $foo</span>) </span>{<font></font>
        $foo = <span class="hljs-number">10</span>; <span class="hljs-comment">//  int</span>
        <span class="hljs-keyword">return</span> $foo;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo √© mais dif√≠cil - voltamos </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">No in√≠cio da fun√ß√£o, determinamos que </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">era </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e n√£o h√° informa√ß√µes sobre o retorno.&nbsp;</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">T $foo</span>) </span>{<font></font>
    $foo = <span class="hljs-number">10</span>; <span class="hljs-comment">//  int</span>
    <span class="hljs-keyword">return</span> $foo;<font></font>
}<font></font>
<span class="hljs-comment">// ? 1. f -&gt; int</span>
<span class="hljs-comment">// ? 2. f -&gt; T|int</span>
<span class="hljs-comment">// ? 3. f -&gt; T</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que tipo est√° correto? </font><font style="vertical-align: inherit;">Os dois primeiros, analisaremos a diferen√ßa entre eles. </font><font style="vertical-align: inherit;">PhpStorm e linter produzem a segunda op√ß√£o. </font><font style="vertical-align: inherit;">Apesar de sempre retornar </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o tipo </font></font><code>T|int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© </font><font style="vertical-align: inherit;">deduzido </font><font style="vertical-align: inherit;">- a "uni√£o" dos tipos. </font><font style="vertical-align: inherit;">Este √© um tipo que pode ser atribu√≠do a esses dois valores: primeiro, tivemos informa√ß√µes sobre o tipo T, depois as atribu√≠mos </font></font><code>10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; portanto, o tipo da vari√°vel </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deve ser compat√≠vel com esses dois tipos.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anota√ß√µes</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Coment√°rios e anota√ß√µes podem mentir.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No exemplo abaixo, escrevemos que estamos retornando um n√∫mero, mas retornando uma string. </font><font style="vertical-align: inherit;">Se o linter funcionasse apenas no n√≠vel das anota√ß√µes e da dica de tipo, considerar√≠amos que ele sempre retorna </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas tipos reais apenas ajudam a se afastar disso: aqui, o tipo esperado √© esse </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e o tipo real √© uma string. </font><font style="vertical-align: inherit;">Linter sabe que a string √© retornada e pode avisar que voc√™ prometeu retornar </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Essa separa√ß√£o √© importante para n√≥s.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-comment">/** <span class="hljs-doctag">@return</span> int */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I lied!"</span>; }</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heran√ßa de anota√ß√µes. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqui, quero dizer que uma classe que implementa algum tipo de interface possui um m√©todo. </font><font style="vertical-align: inherit;">O m√©todo possui bons coment√°rios, documenta√ß√£o, tipos - √© necess√°rio implementar a interface. </font><font style="vertical-align: inherit;">Mas n√£o h√° coment√°rios na implementa√ß√£o: existe apenas </font></font><code>@inheritdoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou nada.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> int */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>)</span>;<font></font>
}<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fooer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@inheritdoc</span> */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"10"</span>; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que retorna esse m√©todo? Parece que o que √© descrito na interface + √© retornado </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas na verdade uma string. Isso n√£o √© bom: o PHP √© o mesmo, mas a converg√™ncia √© importante para n√≥s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem duas op√ß√µes para corrigir esse c√≥digo. O √≥bvio √© </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voltar</font></font></strong><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mas talvez voc√™ precise retornar um tipo diferente. O que fazer? Escreva que </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retornamos a string</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nesse caso, informa√ß√µes expl√≠citas de tipo s√£o necess√°rias para o IDE e o linter para analisar corretamente o c√≥digo.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> int */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>)</span>;<font></font>
}<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fooer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IFoo</span> </span>{
    <span class="hljs-comment">/** <span class="hljs-doctag">@return</span> string */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"10"</span>; }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta informa√ß√£o n√£o seria necess√°ria se as pessoas escrevessem coment√°rios, n√£o </font></font><code>@inheritdoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">N√£o √© necess√°rio para o PhpStorm entender quais tipos voc√™ possui. </font><font style="vertical-align: inherit;">Mas se os tipos n√£o forem descritos corretamente, haver√° um problema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PhpStorm e o linter t√™m conjuntos de bugs disjuntos quando usamos os mesmos arquivos para metadados (tipos). </font><font style="vertical-align: inherit;">Se corrigirmos tudo o que precisamos no phpstorm-stubs do reposit√≥rio JetBrains, o IDE provavelmente ser√° interrompido. </font><font style="vertical-align: inherit;">Se voc√™ deixar tudo por padr√£o, nem tudo funcionar√° corretamente </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para n√≥s, portanto, temos um pequeno fork -&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VKCOM / phpstorm-stubs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Alguns patches foram adicionados para corrigir algo que n√£o se encaixa. </font><font style="vertical-align: inherit;">N√£o posso recomend√°-lo para o PhpStorm, mas √© necess√°rio que o linter funcione.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo aberto</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Noverify √© um projeto de c√≥digo aberto. √â postado no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instru√ß√µes breves "se algo der errado". </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se algo estiver quebrado ou n√£o iniciar.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A rea√ß√£o errada √© se ressentir e remover o NoVerify. A rea√ß√£o correta: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://github.com/login%3Freturn_to%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emitir um ticket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no GitHub e falar sobre o seu problema. Provavelmente, ele ser√° resolvido em 1-2 dias. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est√° faltando algum recurso.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rea√ß√£o incorreta: remova o NoVerify e escreva seu pr√≥prio linter (embora escrever seu pr√≥prio linter seja sempre legal). A rea√ß√£o correta: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://github.com/login%3Freturn_to%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emitir um ticket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no GitHub e, talvez, adicionaremos uma nova fun√ß√£o. √â mais complicado com recursos do que com erros - surge uma discuss√£o e cada pessoa tem uma vis√£o diferente da implementa√ß√£o na equipe. Mas no final, eles ainda est√£o sendo implementados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ estiver interessado no desenvolvimento do projeto ou apenas quiser falar sobre an√°lise est√°tica, acesse nossa sala de bate-papo - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">noverify_linter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  PHP-</a>,   ,  ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    </a>,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PHP Russia</a>.<br>
 <br>
     ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>.       ,    ,     .         telegram- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@PHPRussiaConfChannel</a>.   ,  . <br>
</blockquote></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487248/index.html">Um pouco mais sobre testes impr√≥prios</a></li>
<li><a href="../pt487250/index.html">Mistura alfa atrasada</a></li>
<li><a href="../pt487254/index.html">Como usar c√¢meras de CFTV, n√£o apenas para monitorar intrusos</a></li>
<li><a href="../pt487256/index.html">Queime e volte das cinzas ou do povo de Phoenix</a></li>
<li><a href="../pt487258/index.html">PHP ass√≠ncrono</a></li>
<li><a href="../pt487262/index.html">Confer√™ncia aberta PHP Russia Online</a></li>
<li><a href="../pt487266/index.html">GitLab 12.7 lan√ßado com pipelines pai-filho e vers√£o beta de manipuladores de tarefas comuns para Windows</a></li>
<li><a href="../pt487270/index.html">Os perovskitas podem prolongar a vida √∫til das telas dos gadgets</a></li>
<li><a href="../pt487272/index.html">Favoritos - a contagem est√° conclu√≠da</a></li>
<li><a href="../pt487274/index.html">Como fazer uma revis√£o de c√≥digo?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>