<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™‡ğŸ» ğŸ¤¸ ğŸ Praktik terbaik Kubernetes. Tes viabilitas Kubernetes dengan uji Readiness and Liveness ğŸšµ ğŸš˜ ğŸ‘·</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Praktik terbaik Kubernetes. Membuat Kontainer Kecil 
 Kubernetes Praktik Terbaik. Organisasi Kubernet dengan
 
 
 
 sistem terdistribusi namespace mun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Praktik terbaik Kubernetes. Tes viabilitas Kubernetes dengan uji Readiness and Liveness</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/502430/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik terbaik Kubernetes. Membuat Kontainer Kecil </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes Praktik Terbaik. Organisasi Kubernet dengan</font></font></a><br>
<br>
<img src="https://habrastorage.org/webt/2l/kw/qe/2lkwqe-zu3jhaxqfmla1cj65koq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
sistem terdistribusi </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">namespace</font></a><font style="vertical-align: inherit;"> mungkin sulit untuk dikelola karena faktanya mereka memiliki banyak elemen yang dapat dipindah-pindah, dan semuanya harus bekerja dengan baik untuk memastikan fungsionalitas sistem. Jika salah satu elemen gagal, maka sistem harus mendeteksi, memotong dan memperbaikinya, dan semua ini harus dilakukan secara otomatis. Dalam seri Praktik Terbaik Kubernetes ini, kita akan belajar cara mengonfigurasi tes Readiness and Liveness untuk menguji kelayakan cluster Kubernetes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pemeriksaan Kesehatan Pemeriksaan Kesehatan adalah cara mudah untuk memberi tahu sistem apakah instance aplikasi Anda sedang berjalan atau tidak. Jika instance aplikasi Anda tidak berfungsi, maka layanan lain tidak boleh mengaksesnya atau mengirim permintaan kepadanya. Sebagai gantinya, permintaan tersebut harus dikirim ke instance aplikasi lain yang sudah berjalan atau akan mulai nanti. Selain itu, sistem harus mengembalikan aplikasi Anda ke fungsi yang hilang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara default, Kubernetes akan mulai mengirimkan lalu lintas ke pod ketika semua kontainer di dalam perapian berjalan, dan memuat kembali kontainer saat crash. Sebagai permulaan, perilaku default sistem ini bisa sangat baik, tetapi Anda dapat meningkatkan keandalan penyebaran produk Anda menggunakan pemeriksaan kesehatan khusus.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/ug/fr/_w/ugfr_wdknpt2o0folyontpio334.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untungnya, Kubernetes memungkinkan Anda melakukan ini dengan cukup sederhana, jadi tidak ada alasan untuk mengabaikan cek semacam itu. Kubernetes menyediakan dua jenis tes Pemeriksaan Kesehatan, dan penting untuk memahami perbedaan dalam setiap aplikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Readiness Readiness Test dirancang untuk memberi tahu Kubernetes bahwa aplikasi Anda siap melayani lalu lintas. Sebelum mengizinkan layanan untuk mengirim lalu lintas ke pod, Kubernetes harus memverifikasi bahwa pemeriksaan ketersediaan berhasil. Jika uji Kesiapan gagal, Kubernetes akan berhenti mengirimkan lalu lintas ke pod hingga pengujian berhasil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liveness Viability Test memberi tahu Kubernetes apakah aplikasi Anda hidup atau mati. Dalam kasus pertama, Kubernetes akan meninggalkannya sendirian, di yang kedua, ia akan menghapus pod yang mati dan menggantinya dengan yang baru.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita bayangkan sebuah skenario di mana aplikasi Anda perlu 1 menit untuk "menghangat" dan berlari. Layanan Anda tidak akan mulai bekerja sampai aplikasi sepenuhnya dimuat dan mulai, meskipun alur kerja sudah dimulai. Dan Anda juga akan mengalami masalah jika Anda ingin meningkatkan skala penyebaran ini menjadi beberapa salinan, karena salinan ini tidak boleh menerima lalu lintas sampai mereka benar-benar siap. Namun, secara default, Kubernetes akan mulai mengirimkan lalu lintas segera setelah dimulainya proses di dalam wadah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat menggunakan uji kesiapan Kesiapan, Kubernetes akan menunggu sampai aplikasi sepenuhnya diluncurkan dan hanya setelah itu akan memungkinkan layanan untuk mengirim lalu lintas ke salinan baru.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3g/ol/wj/3golwjtf8e-peabrur40nlxmy08.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita bayangkan skenario lain di mana aplikasi membeku untuk waktu yang lama, menghentikan permintaan servis. Karena proses terus berjalan, secara default Kubernetes akan mempertimbangkan bahwa semuanya sudah beres dan terus mengirim permintaan ke pod yang tidak berfungsi. Tetapi ketika menggunakan Liveness, Kubernetes akan mendeteksi bahwa aplikasi tidak lagi melayani permintaan, dan secara default akan memulai kembali pod yang tidak berfungsi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-b/9z/-b/-b9z-bhznyyzrlsz9eh51nrkmmy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan cara menguji kesiapan dan vitalitas. Ada tiga metode pengujian - HTTP, ommommand, dan TCP. Anda dapat menggunakan salah satu dari mereka untuk verifikasi. Metode uji pengguna yang paling umum adalah probe HTTP.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahkan jika aplikasi Anda bukan server HTTP, Anda masih dapat membuat server HTTP ringan di dalam aplikasi Anda untuk berinteraksi dengan tes Liveness. Setelah itu, Kubernetes akan mulai melakukan ping pod, dan jika respons HTTP berada di kisaran 200 atau 300 ms, itu berarti pod tersebut â€œsehatâ€. Jika tidak, modul akan ditandai sebagai "tidak sehat". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vo/uy/pq/vouypq-yjyxuldceusrnb7njndw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk tes menggunakan Command, Kubernetes mengeksekusi perintah di dalam wadah Anda. Jika perintah kembali dengan kode keluar nol, maka wadah akan ditandai sebagai sehat, jika tidak, ketika nomor status keluar dari 1 hingga 255, wadah akan ditandai sebagai "sakit". Metode pengujian ini berguna jika Anda tidak dapat atau tidak ingin memulai server HTTP, tetapi Anda dapat menjalankan perintah yang akan memeriksa kesehatan aplikasi Anda.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/e6/ki/68e6kiogqoollyhciz0zdvdrp0s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mekanisme verifikasi terakhir adalah uji TCP. Kubernetes akan mencoba membuat koneksi TCP pada port yang ditentukan. Jika ini bisa dilakukan, wadah itu dianggap sehat, jika tidak, itu tidak layak. Metode ini mungkin berguna jika Anda menggunakan skrip di mana pengujian dengan permintaan HTTP atau eksekusi perintah tidak berfungsi dengan baik. Misalnya, layanan utama untuk memeriksa dengan TCP adalah gRPC atau FTP.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/or/mt/wpormt0xbafznizmg8ybwgfiay8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tes dapat dikonfigurasi dalam beberapa cara dengan berbagai parameter. Anda dapat menentukan seberapa sering mereka harus dieksekusi, berapa ambang batas untuk keberhasilan dan kegagalan, dan berapa lama menunggu jawaban. Lihat dokumentasi uji Kesiapan dan Hidup untuk informasi lebih lanjut. Namun, ada satu hal yang sangat penting dalam menyiapkan uji Liveness - pengaturan awal dari keterlambatan tes initialDelaySeconds. Seperti yang saya sebutkan, gagal tes ini akan me-restart modul. Karena itu, Anda perlu memastikan bahwa pengujian tidak dimulai sampai aplikasi siap digunakan, jika tidak maka akan mulai melalui siklus. Saya sarankan menggunakan waktu startup P99 atau waktu startup aplikasi rata-rata dari buffer. Jangan lupa untuk menyesuaikan nilai ini sebagaikarena waktu peluncuran aplikasi Anda semakin cepat atau lambat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagian besar ahli akan mengonfirmasi bahwa Pemeriksaan Kesehatan adalah pemeriksaan wajib untuk sistem yang didistribusikan, dan Kubernetes tidak terkecuali. </font><font style="vertical-align: inherit;">Menggunakan "kesehatan" pemeriksaan layanan memastikan Kubernetes dapat diandalkan dan uptime dan tidak membuat bekerja untuk pengguna. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akan dilanjutkan segera ...</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/mxEvAPQRwhw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit iklan :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terima kasih untuk tetap bersama kami. Apakah Anda suka artikel kami? Ingin melihat materi yang lebih menarik? Dukung kami dengan melakukan pemesanan atau merekomendasikan kepada teman Anda, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud VPS untuk pengembang dari $ 4,99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analog unik dari server entry-level yang diciptakan oleh kami untuk Anda: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seluruh kebenaran tentang VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps mulai dari $ 19 atau cara membagi server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (opsi tersedia dengan RAID1 dan RAID10, hingga 24 core dan hingga 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 kali lebih murah di pusat data Equinix Tier IV di Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hanya kami yang memiliki </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV dari $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di Belanda!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - mulai dari $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baca tentang</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cara Membangun Infrastruktur Bldg. </font><font style="vertical-align: inherit;">kelas c menggunakan server Dell R730xd E5-2650 v4 seharga 9.000 euro untuk satu sen?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id502418/index.html">Monitor gambar 3D</a></li>
<li><a href="../id502420/index.html">Temuan CSS yang Menarik dalam Desain Twitter</a></li>
<li><a href="../id502422/index.html">Pengurangan 60% dalam ukuran aplikasi Bereaksi Asli dalam beberapa langkah sederhana</a></li>
<li><a href="../id502424/index.html">Hentikan mengimpor seluruh paket JavaScript</a></li>
<li><a href="../id502428/index.html">Barang Sintaksis Julia</a></li>
<li><a href="../id502432/index.html">Intisari bahan segar dari dunia front-end untuk minggu terakhir No. 415 (11-17 Mei, 2020)</a></li>
<li><a href="../id502436/index.html">CI TeamCity - Otomatisasi proses pembuatan pengujian Android dan UI</a></li>
<li><a href="../id502438/index.html">Bahan Python. Kartu khusus dengan efek OpenGL</a></li>
<li><a href="../id502440/index.html">Membangun Aplikasi dengan Mediapipe</a></li>
<li><a href="../id502442/index.html">PHP Digest No. 180 (4 - 18 Mei 2020)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>