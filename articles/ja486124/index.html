<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🍳 🚯 🍶 Impala vs Hive vs Spark SQL：Cloudera Data Warehouseで適切に機能する適切なSQLエンジンの選択 🖨️ 💵 🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私たちは常にデータが不足しています。そして、私たちはより多くのデータが必要なだけではありません...製品、顧客、市場をよりよく理解できる新しいタイプのデータが必要です。私たちは常に新しいデータ、あらゆる形とサイズのデータ​​を探しています。私たちは、新しいデータベースとテクノロジーを熱心にオープンす...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Impala vs Hive vs Spark SQL：Cloudera Data Warehouseで適切に機能する適切なSQLエンジンの選択</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486124/"><img src="https://habrastorage.org/webt/bu/1w/sb/bu1wsbowqiicmki0x1nqsraewjw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは常にデータが不足しています。そして、私たちはより多くのデータが必要なだけではありません...製品、顧客、市場をよりよく理解できる新しいタイプのデータが必要です。私たちは常に新しいデータ、あらゆる形とサイズのデータ​​を探しています。私たちは、新しいデータベースとテクノロジーを熱心にオープンする新世代のビジネススペシャリストとテクニカルスペシャリストに門戸を開きたいと考えています。これにより、データとのやり取りの性質と、それらが私たちの生活に与える影響が変化します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたが私の意味をよりよく理解できるように私は人生の例を挙げます。約2年前、データは友人の娘の命を救いました。彼女が生まれたとき、彼女は7つの心臓欠陥と診断されました。インタラクティブな3Dグラフィックス、仮想モデリング、よりインテリジェントなECG分析、安静時の患者を監視するための最新のソリューション、およびデータに基づく他の高度な医療処置のおかげで、彼女は2つの心臓切開手術を成功させ、今では健康な生活を送っています。 。データは彼女の命を救った。これが、新しい革新的なソリューションと、他のソリューションよりも多くのデータを必要とするユーザーにデータをより速く転送する方法を探すことを毎日私に迫っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cloudera Data Platform（CDP）を搭載したCloudera Data Warehouse（CDW）チームの一員であることを誇りに思います。 CDPは、エンタープライズデータクラウドまたはエンタープライズデータクラウド（EDC）としてゼロから作成されました。 EDCは、1つのプラットフォームで多くのタスクを実装するための多機能ツールです。ハイブリッドシステムとマルチクラウドシステムを使用することで、CDPは、オペレーティングシステムのないプラットフォームでも、プライベートクラウドとパブリッククラウドでも、どこでも機能します。デジタル開発計画の一部として導入されるクラウドソリューションが増えるにつれ、ハイブリッドソリューションとマルチクラウドソリューションが新しい標準になりつつあります。ただし、これらの組み合わされたソリューションは、それらの管理に問題を引き起こし、その結果、新しいセキュリティリスクが生じますユーザーを追跡し、その後法律を破る可能性。これらの問題を解決するために、CDPには高度なセキュリティと制御機能があり、誰のセキュリティポリシーや法律に違反するリスクを冒すことなくデータへのアクセスを開くことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDW on CDPは、BI分析チーム用のセルフサービスデータウェアハウスを作成できる新しいサービスです。新しいデータウェアハウスをすばやく作成して自分で使用することも、グループへのアクセスを提供して単一のデータベースを使用することもできます。データウェアハウスを自分で管理できる時代を覚えていますか？プラットフォームとその運用に必要なインフラストラクチャーの参加なしでそれを管理しますか？これはこれまでに起こったことはありません。 CDWはこれを可能にしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDWのおかげで、さまざまなSQLエンジンが利用できるようになりましたが、混乱は素晴らしい選択肢をもたらします。 CDPのCDWで利用可能なSQLエンジンを見て、どのSQLオプションが特定のタスクにより適しているかを説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような素晴らしい選択！</font><font style="vertical-align: inherit;">インパラ？</font><font style="vertical-align: inherit;">ハイブLLAP？</font><font style="vertical-align: inherit;">スパーク？</font><font style="vertical-align: inherit;">何をいつ使用しますか？</font><font style="vertical-align: inherit;">それを理解しましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impala SQLエンジン</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Impalaは、Cloudera Distribution Hadoop（CDH）およびCDPの幅広い機能を備えた人気のあるオープンソースMPPエンジンです。 Impalaは、低レイテンシの高度にインタラクティブなSQLクエリで市場の信頼を得ています。 Impalaの機能は非常に幅広く、Impalaは、Parquet、最適化された行カラムナー（ORC-最適化されたストレージノード）、JavaScript Object Notation（JSON）、Avro、およびテキスト形式を備えたHadoop分散ファイルシステム（HDFS-Hadoop分散ファイルシステム）をサポートするだけでなく、 Kudu、Microsoft Azure Data Lake Storage（ADLS）、Amazon Simple Storage Service（S3）の組み込みサポートがあります。 Impalaは、セントリーまたはレンジャーのいずれかで高レベルのセキュリティを備えており、ご存知のように、数ペタバイトのデータセット上の数百のノードのクラスターを持つ数千のユーザーをサポートできます。インパラ全体のアーキテクチャを見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/on/f3/uk/onf3ukvs8cr_4lorbm6tkholx9c.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ImpalaはStateStoreを使用してクラスターの状態を確認します。何らかの理由でImpalaノードがオフラインになると、StateStoreはこれに関するメッセージをすべてのノードに送信し、アクセスできないノードをスキップします。 Impala Directory Serviceは、クラスター内のすべてのノードのすべてのSQLステートメントのメタデータを管理します。 StateStoreとディレクトリサービスは、Hive MetaStoreとデータを交換してブロックとファイルを格納し、メタデータを作業ノードに転送します。リクエストが到着すると、コンパイルが実行されて計画が開始される多くの一致するプログラムの1つに転送されます。計画の断片が返され、調整プログラムがその実装を編成します。中間結果はImpalaサービス間で渡されて返されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアーキテクチャは、通常、アドホック、セルフサービス、およびディスカバリータイプの場合のように、ビジネスインテリジェンスがクエリへの応答を低レイテンシで受信するためのデータマートが必要な場合に最適です。このシナリオでは、1秒未満から5秒までの複雑なクエリに対する回答を顧客から教えられています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モノのインターネット（IoT）データと関連シナリオの場合、Impalaは、NiFi、Kafka、Spark Streamingなどのストリーミングソリューション、およびKuduなどの関連データウェアハウスとともに、10秒未満の遅延時間で継続的なパイプラインを提供できます。 。</font><font style="vertical-align: inherit;">S3、ADLS、HDFS、Hive、HBaseなどの組み込みの読み取り/書き込み機能を備えたImpalaは、最大1000ノードのクラスター、および50BP以上のテーブルまたはデータセットで100兆を超える行を開始するときに使用する優れたSQLエンジンです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハイブLLAP</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Live Long And Process、またはLLAPとしても知られるLong Delay Analytics Processingは、同じキャッシングリソースと処理リソースを使用して長時間実行されるプロセスをサポートするHiveベースの実行エンジンです。この処理メカニズムは、要求されたリソースを開始する時間がないため、SQLからの応答を非常に低いレイテンシで提供します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pq/uw/fc/pquwfcyzx5gn55c8d8k1otqvica.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、LLAPはセキュリティポリシーの実行に対する制御を提供および確立するため、ユーザーのすべてのLLAP作業は透過的です。これにより、Hiveは、現在最も人気があり、従来から使用されているストレージメディアでも、ワークロードパフォーマンスの面で競争できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hive LLAPは、ビッグデータエコシステムで最も高度なSQLエンジンを提供します。 Hive LLAPは大量のデータ用に作成され、大量のデータの変換、長いクエリの実行、または何百もの結合を持つ重いSQLクエリの実行をサポートするEnterprise Data Warehouse（EDW）の幅広い機能をユーザーに提供します。 Hiveは、マテリアライズドビュー、サロゲートキー、および結果のクエリとデータのクエリのための組み込みキャッシュを含む、従来のリレーショナルデータベース管理システムと同様のさまざまな制限をサポートしています。 Hive LLAPは、応答時間を数分の1秒に短縮することで、繰り返し要求の負担を軽減できます。 Hive LLAPは、HDFS（Hadoop Distributed File System）とオブジェクトストアのフェデレーションリクエスト、およびリアルタイムストリーミングをサポートできます。カフカとドルイドと協力して。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、Hive LLAPはエンタープライズデータウェアハウス（EDW）ソリューションとして理想的であり、大規模な変換またはテーブルと大規模なデータセット間の複数の結合を必要とする多数の長いクエリに直面します。</font><font style="vertical-align: inherit;">Hive LLAPに含まれるキャッシングテクノロジーのおかげで、パーティションキーの有無にかかわらず、330億のレコードを他の920億のレコードと結合し、数秒で結果を得ることができるお客様がいます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スパークスクエア</font></font></h2><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sparkは、データの処理と配布をサポートし、幅広いアプリケーションを備えた、高性能の汎用データ処理エンジンです。</font><font style="vertical-align: inherit;">データサイエンスおよび機械学習の専門家向けのSparkデータライブラリが多数あり、開発を迅速化するための高レベルのプログラミングモデルをサポートしています。</font><font style="vertical-align: inherit;">Spark SQL、MLlib、Spark Streaming、GrapXはSparkの上にあります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u2/2n/gh/u22nghp80uvyrlof4kwul2pzmgu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spark SQLは、Hive、Avro、Parquet、ORC、JSON、およびJDBCをサポートする、さまざまなデータソースと互換性のある構造化データ処理モジュールです。</font><font style="vertical-align: inherit;">Spark SQLは、半構造化データセットで効率的であり、Hive MetaStoreおよびHBaseなどのNoSQLリポジトリと統合します。</font><font style="vertical-align: inherit;">Sparkは、Java、Python、R、Scalaなどのお気に入りのプログラミング言語のさまざまなソフトウェアAPIでよく使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sparkは、大量のデータと高負荷で動作する場合に、SparkプログラムにSQLクエリを埋め込む必要がある場合に非常に役立ちます。</font><font style="vertical-align: inherit;">Sparkは、Global 100企業で働く多くのユーザーがストリーミングデータの処理を減らすのに役立ちます。</font><font style="vertical-align: inherit;">これをMLlibと組み合わせると、データウェアハウスアプリケーションを操作するときに機械学習が可能な優れたシステムとして、Sparkに積極的に反応するお客様の数がわかります。</font><font style="vertical-align: inherit;">高性能、低遅延、サードパーティツールの優れた統合により、Spark SQLはプログラミングとSQLを切り替えるための最適な条件を提供します。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、どのSQLエンジンを使用するのでしょうか。</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDWの同じデータをCDPに結合できるため、データエンジニアリング、従来のEDW、アドホック分析、BIダッシュボード、オンライン分析処理（OLAP）、オンラインなど、ワークロードのタイプごとに適切なエンジンを選択できますトランザクション処理（OLTP）。</font><font style="vertical-align: inherit;">以下の図は、選択を簡略化することを目的としたいくつかの原則を示しています。これによれば、エンジンとそのメカニズムは、指定された各目標に適しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xw/st/ff/xwstffkvxlp9ubso_swhiinvdda.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EDWをサポートするBIダッシュボードを使用する場合、Hive LLAPが最良の結果を提供します。アドホック、セルフサービス、リサーチのデータウェアハウスが必要な場合は、Impalaのメリットに目を向けてください。クエリの実行時間が長く、同時実行性が高くないデータエンジニアリングを検討する場合は、Spark SQLが最適です。高い同時実行性のサポートが必要な場合は、Hive on Tezをご覧ください。時系列データを使用したOLAPサポートを探し、Druidを追加します。低レイテンシと高同時性を備えたOLTPを探している場合は、フェニックスを追加する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計-CDWからCDPには多くのSQLエンジンがあり、これは意図的に行われます。</font><font style="vertical-align: inherit;">決定を下す前に選択を行うことが、大規模なデータウェアハウスでマルチスレッド処理を行う高性能アプリケーションのプロセスを最適化する最良の方法です。</font><font style="vertical-align: inherit;">CDPのCDWは、セキュリティ、管理、データ追跡、メタデータの単一システム下でのデータ共有と共有を提供し、SQLコンポーネントを最適化されたリポジトリに結合できるようにします。</font><font style="vertical-align: inherit;">したがって、これにより、ユーザーはワークロードに応じて最適なSQLエンジンを自由に選択できます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja486112/index.html">Flask Webアプリケーション：循環インポートの処理方法</a></li>
<li><a href="../ja486114/index.html">神経科学の分野の主要な科学者がニューロネット産業組合の年次総会に集まる</a></li>
<li><a href="../ja486116/index.html">FermatとMiller-Rabinの単純性テスト</a></li>
<li><a href="../ja486120/index.html">逸脱の正規化。どのように悪い習慣が私たちの業界の標準になっている</a></li>
<li><a href="../ja486122/index.html">135行のコードを持つ子ReactJS</a></li>
<li><a href="../ja486126/index.html">Spring Bootによるマイクロサービス。パート5. Eurekaネームサーバーの使用</a></li>
<li><a href="../ja486128/index.html">クオリティアーキテクト：誰がいつ必要になるか</a></li>
<li><a href="../ja486130/index.html">GSoC 2019：2者間カウントとモナド変換器のチェック</a></li>
<li><a href="../ja486136/index.html">Linuxでのネットワーク問題の模倣</a></li>
<li><a href="../ja486138/index.html">「個人データはありますか？」そして私がそれを見つけたら？」ロシアでの個人データのローカリゼーションに関するウェビナー-2020年2月12日</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>