<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’³ ğŸŒ  ğŸ‘‰ğŸ¿ Contact Picker API, or how to share your contacts with a browser ğŸ¯ ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ» ğŸ‘¦ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we are waiting for the release of Chrome 80 , which means that the Contact Picker API is coming out of Origin Trials into adulthood , which allo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Contact Picker API, or how to share your contacts with a browser</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486892/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Today we are waiting for the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">release of Chrome 80</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which means </font><font style="vertical-align: inherit;">that the </font><strong><font style="vertical-align: inherit;">Contact Picker API is</font></strong><font style="vertical-align: inherit;"> coming out </font><font style="vertical-align: inherit;">of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Origin Trials</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> into adulthood </font><font style="vertical-align: inherit;">, which allows us to provide the site with access to user-selected contacts from his notebook. </font><font style="vertical-align: inherit;">In this article we will analyze the opportunities that have appeared, and some, perhaps, non-obvious points.</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font></p><a name="habracut"></a><br>
<h2 id="chto-eto-izachem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is this and why?</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagine: you want to invite your friend to your favorite site; make an online order and want to specify the contact number of the wife as the recipient; call a taxi for a colleague and indicate his number as the passenger number (yes, I understand that the most popular case is here first, but I also encountered the others in the last month) or else somehow and somewhere you indicate the phone number from your notebook . What are you doing? Turn off the browser or application, open the Phone application, from where you go to Contacts, look for the desired entry, go into it, copy the number, open the browser or application again, select the input field, paste the copied entry. Quest completed!</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contact Picker API allows the user to achieve the same goal much faster: click on the button, find the desired record, select it, click "Finish". </font><font style="vertical-align: inherit;">Cool? </font><font style="vertical-align: inherit;">Yes. </font><font style="vertical-align: inherit;">Difficult to implement? </font><font style="vertical-align: inherit;">No.</font></font></p><br>
<h2 id="gde-ikak-eto-rabotaet"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where and how does it work?</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So far, only for Android 6+ and only for Chrome 80+. </font><font style="vertical-align: inherit;">If you own this combination, here is a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demo from the developers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<p><img src="https://habrastorage.org/webt/q5/kz/o9/q5kzo9pufgfrwpnofcbblmama98.gif"></p><br>
<h2 id="api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The API includes a class </font></font><code>ContactsManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and an instance of this class by reference </font></font><code>window.navigator.contacts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are two asynchronous methods: one </font></font><code>getProperties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">that allows you to find out what kind of contact information a current bunch of browser and operating system can provide in general, and </font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">which just displays a request to the user to select data from the notebook.</font></font></p><br>
<p>&nbsp;     ,   API     : Â«addressÂ», Â«emailÂ», Â«iconÂ», Â«nameÂ» &nbsp;Â«telÂ». &nbsp; ,     , , &nbsp; &nbsp; ,  &nbsp; , &nbsp; &nbsp;  .</p><br>
<pre><code class="plaintext hljs">const supportedProps = await navigator.contacts.getProperties();<font></font>
if&nbsp;(supportedProps.includes('address') &amp;&amp;&nbsp;supportedProps.includes('icon')) {<font></font>
    //  ,      <font></font>
}</code></pre><br>
<p>  &nbsp; &nbsp;       .</p><br>
<p> <code>navigator.contacts.select</code>       ,   .          &nbsp;,   &nbsp;. &nbsp;,  &nbsp;&nbsp; , &nbsp;&nbsp;. ,       .    <code>multiple</code> (&nbsp; <code>false</code>), ..      ,  .</p><br>
<p>&nbsp;  &nbsp;  (,   &nbsp; <code>multiple</code>) - ,      , &nbsp;&nbsp;â€”  &nbsp; (&nbsp;â€” ). :</p><br>
<pre><code class="plaintext hljs">[{<font></font>
    "email": [],<font></font>
    "name": ["Queen Oâ€™Hearts"],<font></font>
    "tel": ["+1-206-555-1000", "+1-206-555-1111"]<font></font>
}]</code></pre><br>
<p> Â«emailÂ», Â«nameÂ» &nbsp;Â«telÂ»   .   &nbsp;  .      ,   ,   Android, &nbsp;&nbsp;        &nbsp;    <code>&lt;&gt; &lt;&gt; &lt;&gt; &lt;&gt;, &lt;/&gt;</code>.  Â«addressÂ»    ,   <code>ContactAddress</code>,  (&nbsp; &nbsp;)  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><code>PaymentAddress</code></a>.  Â«iconÂ»&nbsp;â€”   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">Blob</a>-.</p><br>
<p> &nbsp;    &nbsp; . </p><br>
<h2 id="chto-mozhet-poyti-netak">   &nbsp;</h2><br>
<p>    ,     .  ,  &nbsp;       ,  &nbsp;&nbsp;.      &nbsp; &nbsp;   .</p><br>
<p>    &nbsp;?      Â«Â», &nbsp; .          &nbsp;  .</p><br>
<p>&nbsp;,  &nbsp;   &nbsp;  ( &nbsp; ),    &nbsp;  , &nbsp; <code>TypeError: Unable to&nbsp;open a&nbsp;contact selector.</code></p><br>
<h2 id="opredelenie-podderzhki"> </h2><br>
<p>      :</p><br>
<pre><code class="plaintext hljs">const supported = ('contacts' in&nbsp;navigator &amp;&amp; 'ContactsManager' in&nbsp;window);</code></pre><br>
<p> , ,  , &nbsp;&nbsp;Android 5-&nbsp;   .    &nbsp;.      ,       <code>Unable to&nbsp;open a&nbsp;contact selector.</code></p><br>
<h2 id="bezopasnost-ipredostavlenie-dostupa"> &nbsp; </h2><br>
<p>   &nbsp; API,   &nbsp;   &nbsp; ,      . &nbsp;  &nbsp;     &nbsp;.  ,    &nbsp; &nbsp;     &nbsp; API.   &nbsp;  <em>  </em>, &nbsp;   &nbsp; , , &nbsp;,    , &nbsp; &nbsp;   <em>  </em>,     &nbsp;  &nbsp; &nbsp;. &nbsp;, &nbsp;&nbsp;     API  Permission API, &nbsp;    &nbsp; .</p><br>
<p>   &nbsp; &nbsp; ?  . :    <code>navigator.contacts.select</code>    ,  , ,     &nbsp;. :   ,  &nbsp;,   &nbsp;&nbsp;, &nbsp;&nbsp;      &nbsp; . &nbsp;,          .  ,    &nbsp;  ,      , &nbsp;     ,    &nbsp;   ,    .</p><br>
<h2 id="osobennosti-dizayna"> </h2><br>
<p>  :</p><br>
<ul>
<li>  API;</li>
<li> ,  &nbsp; &nbsp;   &nbsp; ;</li>
<li>,    &nbsp;&nbsp; ;</li>
<li>,    &nbsp; &nbsp;  ,   (&nbsp;,     ).</li>
</ul><br>
<h2 id="drugie-operacionnye-sistemy">  </h2><br>
<p>&nbsp;   API   &nbsp;Android.  &nbsp;     &nbsp;&nbsp;&nbsp;, , &nbsp;Windows 10&nbsp;  Contact Picker API   API <code>Windows.ApplicationModel.Contacts</code>, &nbsp;&nbsp;macOS â€” API <code>Contacts</code>. &nbsp;&nbsp;    &nbsp; Chrome &nbsp;    &nbsp;&nbsp;.</p><br>
<h2 id="drugie-brauzery"> </h2><br>
<p>   Chroimum-based- &nbsp;Android    API    &nbsp; ,   &nbsp;&nbsp;.          Samsung Internet &nbsp;Miui,     .</p><br>
<p>Firefox  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">&nbsp;</a> &nbsp;      API,  &nbsp;   .</p><br>
<p> -  ,  ,  &nbsp; Safari  ,          , &nbsp;      .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"></a>   Safari.</p><br>
<h2 id="zaklyuchenie"></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This API is another step </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of the Fugu Project</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> towards narrowing the gap between the web and native applications. </font><font style="vertical-align: inherit;">Of course, you wonâ€™t be able to write an alternative contact management application, but it seems to me that most of the use cases cover it and make your user a little happier. </font><font style="vertical-align: inherit;">Write your thoughts on this or share possible use cases!</font></font></p><br>
<h2 id="ssylki"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">References</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Draft Suggestions</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Offer Description</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Article on web.dev</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demo</font></font></a></li>
</ul></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en486878/index.html">Wings, legs and tails</a></li>
<li><a href="../en486880/index.html">Mistakes of translators that led to disastrous consequences</a></li>
<li><a href="../en486884/index.html">Japanese pharmaceutical company begins testing drugs synthesized using a neural network</a></li>
<li><a href="../en486888/index.html">The book â€œObject-Oriented Approach. 5th int. ed. "</a></li>
<li><a href="../en486890/index.html">Self-development: how I did not sit on two chairs and found a third</a></li>
<li><a href="../en486896/index.html">UID and Stalker Authorization on the MAG250</a></li>
<li><a href="../en486902/index.html">Protocol Oriented Programming in Swift 5.1</a></li>
<li><a href="../en486904/index.html">Showing developers the status of quality control of source code in SonarQube</a></li>
<li><a href="../en486908/index.html">Wulfric Ransomware is a cryptor that doesn't exist</a></li>
<li><a href="../en486912/index.html">Lowkiq. Why did we do it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>