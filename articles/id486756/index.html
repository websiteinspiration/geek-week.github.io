<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤺 🦕 👨🏼‍🚒 Python untuk tester: skrip panda c kecil membantu menguji dataset besar 🤖 🚜 🤞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya bekerja sebagai penguji pada suatu proyek, yang intinya adalah pengumpulan dan penyimpanan berbagai data dan pembentukan berbagai laporan dan ung...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Python untuk tester: skrip panda c kecil membantu menguji dataset besar</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486756/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya bekerja sebagai penguji pada suatu proyek, yang intinya adalah pengumpulan dan penyimpanan berbagai data dan pembentukan berbagai laporan dan unggahan file berdasarkan pada mereka. </font><font style="vertical-align: inherit;">Saat membuat laporan seperti itu, sejumlah besar kondisi untuk pemilihan data diperhitungkan, dan karena itu, saat pengujian, Anda harus banyak bekerja dengan kueri SQL dalam database. </font><font style="vertical-align: inherit;">Tetapi untuk memverifikasi pemilihan data yang benar dan mencari kelebihan / data yang hilang, ini sering tidak cukup, jadi saya harus mencari alat tambahan untuk ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena saya sudah memiliki beberapa pengetahuan dasar python, saya memutuskan untuk mencoba menulis skrip kecil yang memungkinkan saya untuk melakukan sesuatu dengan data yang ada dan dengan demikian memfasilitasi dan mempercepat proses pengujian. </font><font style="vertical-align: inherit;">Dalam artikel ini saya akan memberi tahu Anda apa yang terjadi.</font></font><br>
<a name="habracut"></a><br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merancang skrip skrip</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menulis skrip, Anda perlu mencari tahu apa yang harus dilakukan skrip, data apa yang perlu diinput dan data apa yang diharapkan menjadi output. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh langkah untuk skenario:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mendapatkan file dengan data dalam format tertentu (atau beberapa file)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dapatkan data dari file / file</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami memilih data yang diperlukan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami melakukan beberapa operasi pada data</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengunggah data ke file Excel, jika perlu (biasanya format ini yang paling nyaman untuk analisis dan penyimpanan lebih lanjut)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maka Anda perlu memikirkan bagaimana dan di mana Anda bisa mendapatkan input. </font><font style="vertical-align: inherit;">Ini bisa berupa file yang dibuat secara manual dengan data, mengunggah data ke UI ke file dengan mempertimbangkan filter akun, file dengan penguraian data menggunakan skrip lain, file untuk mengunggah hasil kueri SQL ke database (Anda dapat dengan cepat mengunggah data ke file csv dari database), json -file atau xml-file dengan data dari respons terhadap permintaan ke API, dll.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menulis skrip dengan python menggunakan panda dan perpustakaan lain</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menulis skrip dengan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">python,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anda perlu menginstal juru bahasa dan IDE yang sesuai. </font><font style="vertical-align: inherit;">Yang terbaik juga adalah menciptakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lingkungan virtual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terpisah </font><font style="vertical-align: inherit;">untuk proyek ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menggunakan pustaka yang berbeda untuk skrip, beberapa di antaranya adalah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pustaka python bawaan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , beberapa perlu diinstal tambahan:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">panda</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah perpustakaan untuk analisis data. </font><font style="vertical-align: inherit;">Ini memungkinkan Anda untuk bekerja dengan data dari file berbagai format, serta menerima data langsung dari database menggunakan kueri SQL. </font><font style="vertical-align: inherit;">Data dari file dimuat ke dalam bingkai data (secara visual tabel yang sama seperti di Excel), dengan data di mana Anda sudah dapat melakukan operasi yang berbeda: menggabungkan data dari berbagai kerangka data dengan analogi dengan bergabung / bergabung dalam SQL, pilih data yang Anda butuhkan dalam kondisi tertentu, bandingkan data di berbagai kolom bingkai data, dll.</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openpyxl, xlrd</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - perpustakaan untuk bekerja dengan Excel.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kerangka kerja skrip paling sederhana untuk bekerja dengan data dari file csv, json, Excel adalah sebagai berikut:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#   pandas</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<font></font>
<font></font>
<span class="hljs-comment">#    csv-  -</span>
<span class="hljs-comment"># (        )</span>
<span class="hljs-comment">#       csv-     ";"</span>
df = pd.read_csv(<span class="hljs-string">'./csv_file.csv'</span>, sep=<span class="hljs-string">';'</span>, encoding=<span class="hljs-string">'utf-8'</span>)<font></font>
<font></font>
<span class="hljs-comment"># </span>
<span class="hljs-comment">#    json-  -</span>
<span class="hljs-comment"># (        )</span>
<span class="hljs-comment"># df = pd.read_json('./json_file.json', encoding='utf-8')</span><font></font>
<font></font>
<span class="hljs-comment"># </span>
<span class="hljs-comment">#    Excel-  -,     </span>
<span class="hljs-comment"># (        )</span>
<span class="hljs-comment"># file_excel = 'Excel_file.xlsx'</span>
<span class="hljs-comment"># df = pd.ExcelFile(file_excel).parse('1')</span><font></font>
<font></font>
<font></font>
<span class="hljs-comment">#  -     -  </span>
<span class="hljs-comment">#    - final_df</span><font></font>
<font></font>
<font></font>
<span class="hljs-comment">#    Excel-,  </span>
<span class="hljs-comment">#          </span>
<span class="hljs-comment"># (      )</span>
writer = pd.ExcelWriter(<span class="hljs-string">'.xlsx'</span>)<font></font>
final_df.to_excel(writer, <span class="hljs-string">'1'</span>)<font></font>
writer.save()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam skrip ini, data dari file format yang diperlukan dimuat ke dalam bingkai data, data yang diperlukan dipilih dan beberapa operasi dilakukan pada mereka, maka data tersebut ditulis ke file Excel baru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda perlu bekerja dengan data yang diperoleh sebagai hasil dari query SQL ke database, Anda tidak bisa mengekspornya ke file csv, tetapi langsung memasukkannya ke dalam kerangka data dengan mengeksekusi query SQL dalam database dalam skrip itu sendiri:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#   pandas</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-comment">#      ,     PostgreSQL</span>
<span class="hljs-comment"># (   -    )</span>
<span class="hljs-keyword">import</span> psycopg2<font></font>
<font></font>
<span class="hljs-comment">#    </span>
conn = psycopg2.connect(dbname=<span class="hljs-string">'_'</span>, host=<span class="hljs-string">''</span>, port=<span class="hljs-string">''</span>,<font></font>
                        user=<span class="hljs-string">''</span>, password=<span class="hljs-string">''</span>)<font></font>
<font></font>
<span class="hljs-comment">#   SQL-</span>
q = <span class="hljs-string">"""select ... 
    from ... 
    where ..."""</span><font></font>
<font></font>
<span class="hljs-comment">#    -,  SQL-</span><font></font>
df = pd.read_sql_query(q, conn)<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#  -     -  </span>
<span class="hljs-comment">#    - final_df</span><font></font>
<font></font>
<font></font>
<span class="hljs-comment">#    Excel-,  </span>
<span class="hljs-comment">#          </span>
<span class="hljs-comment"># (      )</span>
writer = pd.ExcelWriter(<span class="hljs-string">'.xlsx'</span>)<font></font>
final_df.to_excel(writer, <span class="hljs-string">'1'</span>)<font></font>
writer.save()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda perlu mendapatkan data dari file xml, maka Anda dapat menggunakan perpustakaan yang dirancang untuk ini. </font><font style="vertical-align: inherit;">Saya menggunakan library </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bawaan ElementTree</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika data diterima dalam bingkai data, Anda dapat segera menggabungkannya dengan data dari kerangka data lain (analog gabungan atau gabungan dalam SQL) atau melakukan beberapa operasi pada mereka, misalnya, menghapus duplikat, menghapus baris dengan nilai kosong di sel tertentu , bandingkan data dalam banyak kolom, pilih baris / kolom yang diinginkan, dll. </font><font style="vertical-align: inherit;">Baca lebih lanjut di dokumentasi untuk panda.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsi Penggunaan Script</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sekarang kita menghidupkan alat utama tester dan memilih data / fitur pada proyek kami, untuk verifikasi yang mana skrip seperti itu akan berguna. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File dengan sejumlah kecil data uji yang dihasilkan menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generateata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dibuat untuk skrip </font><font style="vertical-align: inherit;">. Pada kenyataannya, file data berisi puluhan ribu baris dan sejumlah besar kolom. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skenario # 1</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ada tiga file dalam format csv dengan data. Untuk setiap baris data, ada bidang dengan id pengidentifikasi unik. Data dari file-file ini dipilih dengan mempertimbangkan kondisi tertentu dan dimasukkan ke dalam tabel dalam database, maka data ini ditampilkan dalam laporan dalam bentuk tabel di UI. Dimungkinkan untuk mengunggah data pada UI ke file Excel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan syarat untuk memilih data untuk laporan dari file sumber adalah sebagai berikut:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File dapat memiliki duplikat oleh id, dalam laporan, catatan dengan pengidentifikasi yang sama harus diperhitungkan hanya sekali (dalam hal ini, kami cukup memilih salah satu baris dengan pengenal ini dari data).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baris dengan data yang hilang di sel kolom reg_date tidak boleh dihitung.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bahkan, mungkin ada lebih banyak kondisi pemilihan, data juga dapat dibandingkan dengan data yang sudah ada dalam sistem dan hanya data yang memotong dengan id akan ditampilkan dalam laporan, tetapi misalnya kita akan mempertimbangkan hanya dua kondisi yang ditunjukkan di atas.</font></font></li>
</ul><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas penguji:</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Periksa bahwa garis-garis dengan objek yang diperlukan dipilih dengan benar dari file sumber dan bahwa semua objek ini ditampilkan dalam laporan di UI. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat skrip untuk skrip:</font></font></u><br>
<br>
<ul>
<li>  -      csv-,     - (   union  SQL),      id,       reg_date.</li>
<li>  UI     Excel-,   ,       -.</li>
<li> (merge)   -   (   outer join  SQL)          Excel-   .</li>
<li>              ,   ,   -   ,      ,   UI.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam file terakhir, data hanya akan berisi satu kolom dengan id, jika nama-nama kolom dalam bingkai data yang berbeda bertepatan, dan mungkin tidak jelas kolom / baris dari file mana. </font><font style="vertical-align: inherit;">Oleh karena itu, saya memberi nama kolom dengan pengidentifikasi unik dengan nama yang berbeda di file, atau menambahkan kolom terpisah "Baris dari file ini dan itu" ke setiap file dan meletakkan "Ya" di dalamnya - kemudian, ketika menganalisis file Excel yang dihasilkan, lebih mudah untuk menyaring dengan kolom ini karena </font><font style="vertical-align: inherit;">mereka selalu mengandung nilai dan, dengan memfilternya, Anda sudah bisa memahami data apa yang menyimpang di kolom terkait. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh data dari file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">example1_csv_1.csv</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/5j/_u/of5j_us3u07uset3ljspbbwtrr4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh data dari file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">report_UI.xlsx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uh/xy/1s/uhxy1sygvioxbbhlksppdpsar_e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skrip python terlihat seperti ini:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#   pandas</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<font></font>
<font></font>
<span class="hljs-comment">#     csv-    -</span>
<span class="hljs-comment"># (        )</span>
df_from_file1 = pd.read_csv(<span class="hljs-string">'./example1_csv_1.csv'</span>, sep=<span class="hljs-string">';'</span>, encoding=<span class="hljs-string">'utf-8'</span>,<font></font>
                            usecols=[<span class="hljs-string">'id'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'email'</span>, <span class="hljs-string">'reg_date'</span>])<font></font>
df_from_file2 = pd.read_csv(<span class="hljs-string">'./example1_csv_2.csv'</span>, sep=<span class="hljs-string">';'</span>, encoding=<span class="hljs-string">'utf-8'</span>,<font></font>
                            usecols=[<span class="hljs-string">'id'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'email'</span>,<span class="hljs-string">'reg_date'</span>])<font></font>
df_from_file3 = pd.read_csv(<span class="hljs-string">'./example1_csv_3.csv'</span>, sep=<span class="hljs-string">';'</span>, encoding=<span class="hljs-string">'utf-8'</span>,<font></font>
                            usecols=[<span class="hljs-string">'id'</span>, <span class="hljs-string">'name'</span>, <span class="hljs-string">'email'</span>, <span class="hljs-string">'reg_date'</span>])<font></font>
<font></font>
<span class="hljs-comment">#    -    - </span>
<span class="hljs-comment"># (   union  SQL)</span><font></font>
df_from_csv = pd.concat([df_from_file1, df_from_file2, df_from_file3]).\<font></font>
    reset_index(drop=<span class="hljs-literal">True</span>)<font></font>
print(df_from_csv)<font></font>
<font></font>
<span class="hljs-comment">#       </span>
df_from_csv.drop_duplicates(subset=<span class="hljs-string">'id'</span>, keep=<span class="hljs-string">'first'</span>, inplace=<span class="hljs-literal">True</span>)<font></font>
print(df_from_csv)<font></font>
<font></font>
<span class="hljs-comment">#     NaN ( )   reg_date</span><font></font>
df_from_csv = df_from_csv.dropna()<font></font>
print(df_from_csv)<font></font>
<font></font>
<span class="hljs-comment">#    Excel-   UI  -,</span>
<span class="hljs-comment">#       </span>
<span class="hljs-comment"># (        )</span>
file_excel = <span class="hljs-string">'report_UI.xlsx'</span>
df_from_excel = pd.ExcelFile(file_excel).parse(<span class="hljs-string">'1'</span>)<font></font>
print(df_from_excel)<font></font>
<font></font>
<span class="hljs-comment">#  -     - </span>
<span class="hljs-comment"># -       UI</span>
<span class="hljs-comment"># (   outer join  SQL)</span>
df = df_from_csv.merge(df_from_excel, left_on=<span class="hljs-string">'id'</span>, right_on=<span class="hljs-string">""</span>, how=<span class="hljs-string">'outer'</span>)<font></font>
print(df)<font></font>
<font></font>
<span class="hljs-comment">#     Excel-</span>
writer = pd.ExcelWriter(<span class="hljs-string">'.xlsx'</span>)<font></font>
df.to_excel(writer, <span class="hljs-string">'1'</span>)<font></font>
writer.save()<font></font>
</code></pre><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keterbatasan:</font></font></u><br>
<br>
<ul>
<li>               (  ,       30 000 ).</li>
<li>   (  Excel)  /           ,            .</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skenario No. 2</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bagian ini berisi data dalam bentuk tabel untuk objek tertentu dari satu sumber. Sistem akan menerima data dari sumber kedua (integrasi) dan memperbarui data tabel yang ada dengan data ini. Setiap catatan dalam tabel adalah data untuk satu objek yang memiliki pengidentifikasi unik. Jika dari sumber baru, data suatu objek oleh pengidentifikasi bertepatan dengan data objek yang ada, maka semua bidang catatan yang ada diperbarui dengan data dari sumber baru (dikonfirmasi). Jika tabel belum memiliki objek dengan pengenal dari sumber kedua, maka catatan baru dibuat di tabel dengan data dari sumber baru. Data dari sistem kedua dapat diunggah ke file json terlebih dahulu. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas penguji:</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siapkan file dengan data untuk pengujian terlebih dahulu, untuk memverifikasi bahwa catatan yang ada diperbarui dengan benar dan mereka ditempelkan dengan tanda konfirmasi dalam database jika ada kecocokan dengan pengidentifikasi, dan catatan baru dibuat dengan benar dan mereka ditandai dengan tanda menambahkan ke database jika catatan dengan demikian pengenal belum. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat skrip untuk skrip:</font></font></u><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengunggah data dari tabel partisi ke file Excel di UI (jika ini tidak memungkinkan, Anda selalu dapat mengekspor data dari hasil kueri SQL yang digunakan dalam kode untuk menampilkan data ke tabel ini di UI) dan mengisi data dari itu ke dalam frame data pertama .</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mendapatkan file json dengan data dari sumber kedua dan memuatnya ke dalam frame data kedua.</font></font></li>
<li>  (merge —    outer join  SQL)    -    -          Excel-,        .      ,        ,      .</li>
</ul><br>
<u>:</u><br>
<br>
<ul>
<li>               (  ,       30 000 ).</li>
<li>  json-     /  –           /,    -   json-   pandas        /.</li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skenario 3</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Permintaan dibuat ke API sistem, sebagai respons terhadap data objek mana dalam format json yang diterima. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas penguji:</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bandingkan data dari respons terhadap permintaan ke API dengan data dari hasil kueri SQL dalam database. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat skrip untuk skrip:</font></font></u><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengeksekusi query SQL dalam database, mengekspor data dari hasil query ke file csv, memuat data ini ke dalam frame data pertama.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menyimpan data dari respons terhadap permintaan ke API di file json, memuat data dari file ke dalam kerangka data kedua.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menggabungkan data (gabungan - dengan analogi dengan gabungan luar dalam SQL) dari dua bingkai data yang diterima menjadi satu bingkai data baru dengan pengidentifikasi unik dan membongkar data dari data tersebut ke dalam file Excel, di mana kami akan membandingkan data dengan kolom menggunakan fungsi dari Unggul</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atau data pada kolom dalam bingkai data umum dapat dibandingkan menggunakan panda, saat menurunkan baris dengan data yang sama / berbeda dalam kolom ke dalam kerangka data baru / file Excel untuk analisis.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh data dari file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">example3_csv.csv</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/e6/xz/zxe6xzjff9vbfwgntsfqb-qyykc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh data dari file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">example3_json.json</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="json hljs">[<font></font>
    {<font></font>
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"16421118-4116"</span>,
        <span class="hljs-attr">"name_json"</span>: <span class="hljs-string">"Tempor Consulting"</span>,
        <span class="hljs-attr">"email_json"</span>: <span class="hljs-string">"Nullam.lobortis.quam@***"</span>,
        <span class="hljs-attr">"tel_json"</span>: <span class="hljs-string">"1-821-805-****"</span>,
        <span class="hljs-attr">"reg_date_json"</span>: <span class="hljs-string">"12-11-16"</span>,
        <span class="hljs-attr">"city_json"</span>: <span class="hljs-string">"Natales"</span><font></font>
    },<font></font>
    {<font></font>
        <span class="hljs-attr">"id"</span>: <span class="hljs-string">"16040210-2206"</span>,
        <span class="hljs-attr">"name_json"</span>: <span class="hljs-string">"Odio Etiam Incorporated"</span>,
        <span class="hljs-attr">"email_json"</span>: <span class="hljs-string">"arcu@***"</span>,
        <span class="hljs-attr">"tel_json"</span>: <span class="hljs-string">"1-730-291-****"</span>,
        <span class="hljs-attr">"reg_date_json"</span>: <span class="hljs-string">"26-06-05"</span>,
        <span class="hljs-attr">"city_json"</span>: <span class="hljs-string">"Viddalba"</span><font></font>
    },<font></font>
...<font></font>
]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skrip python terlihat seperti ini:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#   pandas</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<font></font>
<font></font>
<span class="hljs-comment">#    csv-  -</span>
<span class="hljs-comment"># (        )</span>
<span class="hljs-comment">#       csv-     ";"</span>
df_from_csv = pd.read_csv(<span class="hljs-string">'./example3_csv.csv'</span>, sep=<span class="hljs-string">';'</span>, encoding=<span class="hljs-string">'utf-8'</span>)<font></font>
print(df_from_csv)<font></font>
<font></font>
<span class="hljs-comment">#    json-  -</span>
<span class="hljs-comment"># (        )</span>
df_from_json = pd.read_json(<span class="hljs-string">'./example3_json.json'</span>, encoding=<span class="hljs-string">'utf-8'</span>)<font></font>
print(df_from_json)<font></font>
<font></font>
<span class="hljs-comment">#  -    -</span>
<span class="hljs-comment"># (   outer join  SQL)</span>
df_csv_json = df_from_csv.merge(df_from_json, left_on=<span class="hljs-string">'id'</span>, <font></font>
                                right_on=<span class="hljs-string">"id"</span>, how=<span class="hljs-string">'outer'</span>)<font></font>
print(df_csv_json)<font></font>
<font></font>
<span class="hljs-comment">#    Excel-,   ,</span>
<span class="hljs-comment">#      -   ,</span>
<span class="hljs-comment">#          </span>
<span class="hljs-comment"># (      )</span>
<span class="hljs-comment"># writer = pd.ExcelWriter('.xlsx')</span>
<span class="hljs-comment"># df_csv_json.to_excel(writer, '1')</span>
<span class="hljs-comment"># writer.save()</span><font></font>
<font></font>
<span class="hljs-comment">#       </span>
<span class="hljs-comment"># (, name_csv  name_json) </span>
<span class="hljs-comment">#       Excel-  </span>
<span class="hljs-comment"># (        )</span>
unequal_data_df = df_csv_json.loc[df_csv_json[<span class="hljs-string">'name_csv'</span>] != <font></font>
                                  df_csv_json[<span class="hljs-string">'name_json'</span>]]<font></font>
unequal_data_df = unequal_data_df[[<span class="hljs-string">'id'</span>, <span class="hljs-string">'name_csv'</span>, <span class="hljs-string">'name_json'</span>]]<font></font>
print(unequal_data_df)<font></font>
<font></font>
writer = pd.ExcelWriter(<span class="hljs-string">'_name.xlsx'</span>)<font></font>
unequal_data_df.to_excel(writer, <span class="hljs-string">'1'</span>)<font></font>
writer.save()<font></font>
<font></font>
</code></pre><br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keterbatasan:</font></font></u><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ketika bekerja dengan file dengan jumlah baris yang sangat besar, Anda harus memecahnya menjadi file yang terpisah (di sini Anda perlu mencoba, saya jarang memiliki file lebih dari 30.000 baris).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jika file json memiliki beberapa level nesting objek / array data, maka dari level internal mereka akan dimuat ke dalam sel sebagai objek / array, oleh karena itu bekerja dengan file json dengan panda hanya nyaman untuk data tanpa objek nesting objek yang berlebihan / array.</font></font></li>
<li>       API         SQL-  ,             SQL-   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika respons terhadap permintaan terhadap API datang dalam format xml, maka Anda harus mengurai data yang diperlukan dari file xml menggunakan ElementTree atau pustaka lain dan kemudian memuatnya ke dalam bingkai data. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skenario No. 4</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Di UI file xml dengan data pada objek diunduh, yang dihasilkan dengan cepat dari data dalam subjek database dengan kondisi tertentu (misalnya, status, tanggal, tahun atau nilai parameter lainnya untuk objek diperhitungkan). </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas penguji:</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bandingkan id pengidentifikasi unik objek dari file xml yang ada dalam atribut tag perusahaan dengan pengidentifikasi objek dari hasil kueri SQL dalam database. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat skrip untuk skrip:</font></font></u><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menyimpan data dari respons terhadap permintaan ke API dalam file xml, mendapatkan data yang diperlukan dari file ini menggunakan pustaka ElementTree, memuat data ke dalam frame data pertama.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengeksekusi query SQL dalam database, mengekspor data dari hasil query ke file csv, memuat data ini ke dalam frame data kedua.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menggabungkan data (gabungan - dengan analogi dengan gabungan luar dalam SQL) dari dua bingkai data yang diterima menjadi satu bingkai data baru dengan pengidentifikasi unik dan membongkar data dari data tersebut ke dalam file Excel.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selanjutnya, buka file yang dihasilkan dan analisis jalur data.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh data dari file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">example4_csv.csv</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/zk/ou/gbzkou2bivh2gsnk6do0lthh1_g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh data dari file </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">example4_xml.xml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zh/x4/no/zhx4noe3virrsagqnaduwpqyp_w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skrip python terlihat seperti ini:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#   ElementTree</span>
<span class="hljs-keyword">from</span> xml.etree <span class="hljs-keyword">import</span> ElementTree
<span class="hljs-comment">#   pandas</span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<font></font>
<font></font>
<span class="hljs-comment">#    xml-   </span>
<span class="hljs-comment"># (        )</span>
tree = ElementTree.parse(<span class="hljs-string">"example4_xml.xml"</span>)<font></font>
<font></font>
<span class="hljs-comment">#   </span><font></font>
root = tree.getroot()<font></font>
<font></font>
<span class="hljs-comment">#  ,     </span><font></font>
data_list = []<font></font>
i = <span class="hljs-number">1</span><font></font>
<font></font>
<span class="hljs-comment">#    -   id_type1  id_type2</span>
<span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> root.iter(<span class="hljs-string">"companies"</span>):
    <span class="hljs-keyword">for</span> child_1 <span class="hljs-keyword">in</span> child.iter(<span class="hljs-string">"company"</span>):<font></font>
            data_list.append({<span class="hljs-string">""</span>: i, <span class="hljs-string">"id"</span>: child_1.get(<span class="hljs-string">"id_type1"</span>)
                                                <span class="hljs-keyword">or</span> child_1.get(<span class="hljs-string">"id_type2"</span>), 
                              <span class="hljs-string">"  xml"</span>: <span class="hljs-string">""</span>})<font></font>
            i += <span class="hljs-number">1</span><font></font>
<font></font>
<span class="hljs-comment">#     data_list  -</span>
df_from_xml = pd.DataFrame.from_dict(data_list, orient=<span class="hljs-string">'columns'</span>)<font></font>
print(df_from_xml)<font></font>
<font></font>
<span class="hljs-comment">#    csv-  -</span>
df_from_csv = pd.read_csv(<span class="hljs-string">'./example4_csv.csv'</span>, sep=<span class="hljs-string">';'</span>, encoding=<span class="hljs-string">'utf-8'</span>)<font></font>
print(df_from_csv)<font></font>
<font></font>
<span class="hljs-comment">#  -   -</span>
<span class="hljs-comment"># (   outer join  SQL)</span>
df = df_from_csv.merge(df_from_xml, left_on=<span class="hljs-string">'id'</span>, right_on=<span class="hljs-string">"id"</span>, how=<span class="hljs-string">'outer'</span>)<font></font>
print(df)<font></font>
<font></font>
<span class="hljs-comment">#    Excel-</span>
<span class="hljs-comment">#          </span>
<span class="hljs-comment"># (      )</span>
writer = pd.ExcelWriter(<span class="hljs-string">'.xlsx'</span>)<font></font>
df.to_excel(writer, <span class="hljs-string">'1'</span>)<font></font>
writer.save()<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skenario 5</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Di UI, bagian ini menampilkan data pada objek dalam bentuk tabel. </font><font style="vertical-align: inherit;">Dimungkinkan untuk mengunggah data ke file Excel. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tugas penguji:</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bandingkan data dari tabel partisi dengan data yang diunduh ke file Excel. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat skrip untuk skrip:</font></font></u><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami meminta pengembang untuk kueri SQL dalam database dari kode yang bertanggung jawab untuk mengeluarkan data ke tabel partisi pada UI.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menjalankan query SQL ini dalam database, mengunggah data ke file csv, memuat data dari itu ke dalam frame data pertama.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami mengunggah data dari tabel partisi ke file Excel di UI dan memuat data dari itu ke dalam kerangka data kedua.</font></font></li>
<li>  (merge —    outer join  SQL)    -    -          Excel-,             Excel.</li>
<li>      -     pandas,      /      -/Excel-  .</li>
</ul><br>
<u>:</u><br>
<br>
<ul>
<li>    ,     Excel-  UI, ,         ,          .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, skrip yang sama dapat digunakan hanya untuk mentransfer data dari file json atau file csv ke file Excel. </font><font style="vertical-align: inherit;">Atau, Anda dapat menggabungkan data dari beberapa file Excel di kolom tertentu dan mengunggahnya ke dalam satu file Excel baru.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini hanya beberapa contoh bagaimana Anda dapat menggunakan python + panda untuk mempercepat proses pengujian dan menemukan bug. </font><font style="vertical-align: inherit;">Bahkan, panda memiliki lebih banyak peluang untuk bekerja dengan data, Anda dapat membaca lebih lanjut tentang ini di dokumentasi untuk pustaka ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mungkin proyek Anda memiliki opsi lain untuk menggunakan skrip tersebut dan artikel ini akan membantu Anda mulai menggunakannya dalam karya penguji.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id486744/index.html">Korektor postur dalam negeri yang cerdas mulai dijual. Kami melihat produk baru - IBACK</a></li>
<li><a href="../id486746/index.html">Tulis, jangan potong. Apa yang mulai saya lewatkan dalam publikasi Habr</a></li>
<li><a href="../id486750/index.html">Seri "Untuk Semua Umat Manusia": dari kisah alternatif hingga sampah</a></li>
<li><a href="../id486752/index.html">Server web WSGI unik menggunakan ESP8266. Bagian 1</a></li>
<li><a href="../id486754/index.html">JIRA: aturan untuk persiapan tepat waktu perangkat lunak lezat. TLDR 2: manajemen persyaratan</a></li>
<li><a href="../id486760/index.html">Minggu Keamanan 06: pelacak iklan di aplikasi seluler</a></li>
<li><a href="../id486762/index.html">Tempat tidur hosting: praktik menyeramkan dari rumah hosting</a></li>
<li><a href="../id486764/index.html">Do-it-yourself Schema.org: menyesuaikan tata letak mikro tanpa pemrogram</a></li>
<li><a href="../id486766/index.html">Bagaimana cara mentransfer semua transaksi online di pasar anjak kuno? Pengalaman Anberbank Anjak</a></li>
<li><a href="../id486768/index.html">Revisi panel admin Webasyst</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>