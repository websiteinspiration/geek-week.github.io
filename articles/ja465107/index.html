<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↕️ 🌙 🖇️ カオスエンジニアリング：意図的な破壊の芸術。パート2 😒 🛬 🥫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注意 ペレフ。：この資料は、AWSシステムのエバンジェリストであるAdrian Hornsbyによる一連の素晴らしい記事の続きです。その目標は、ITシステムの障害の影響を軽減するために設計された実験の重要性を簡単かつ明確に説明することです。
 
 
 
 「計画の準備に失敗した場合、失敗することにな...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>カオスエンジニアリング：意図的な破壊の芸術。パート2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/465107/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意 </font><font style="vertical-align: inherit;">ペレフ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：この資料は、AWSシステムのエバンジェリストであるAdrian Hornsbyによる一連の素晴らしい記事の続きです。その目標は、ITシステムの障害の影響を軽減するために設計された実験の重要性を簡単かつ明確に説明することです。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/tn/na/uh/tnnauhgdmrxlor2xjlgtars0tje.jpeg"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「計画の準備に失敗した場合、失敗することになります。」</font><font style="vertical-align: inherit;">- ベンジャミンフランクリン</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この一連の記事</font><font style="vertical-align: inherit;">
の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の部分では</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、カオスエンジニアリングの概念を紹介し、システムの欠陥がプロダクションクラッシュにつながる前に、それを見つけて修正する方法を説明しました。</font><font style="vertical-align: inherit;">また、カオスエンジニアリングが組織内のポジティブな文化的変化にどのように貢献するかについても話しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の部分の終わりに、「システムに障害を導入するためのツールと方法」について話すことを約束しました。</font><font style="vertical-align: inherit;">悲しいかな、私の頭にはこの点に関して独自の計画がありました。この記事では、カオスエンジニアリングを行いたい人々から生じる最も一般的な質問に答えようと思い</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></b><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すばらしい質問です。</font><font style="vertical-align: inherit;">しかし、彼はこのパンダを本当に気にかけ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/kt/qn/hgktqnmprfoiqlmweqc_uvzeb6e.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いないようです... </font><i><font style="vertical-align: inherit;">カオスパンダをいじらないでください！</font></i></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">短い答え</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：リクエストパス上の重要なサービスを目指します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">長くてもわかりやすい回答</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：カオスで実験を開始する場所を理解するには、次の3つの領域に注意してください。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">障害</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><b><font style="vertical-align: inherit;">履歴を</font></b><font style="vertical-align: inherit;">見て、</font><font style="vertical-align: inherit;">パターンを特定します。</font></font></li>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要な依存関係を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定し</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いわゆるを使用します。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自信過剰効果</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おかしいですが、同じ成功を収めたこの部分は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「自己</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">認識</font><i><font style="vertical-align: inherit;">と啓発への旅」</font></i><font style="vertical-align: inherit;">と呼ぶことができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その中で、私たちはいくつかのクールなツールで「遊び」始めます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.答えは過去にある</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
覚えていれば、最初の部分で私はエラー修正（COE）の概念を導入しました-私たちが私たちの間違いを分析する方法：テクノロジー、プロセス、または組織のミス-それらの原因を理解し、将来の繰り返しを防ぐために。</font><font style="vertical-align: inherit;">一般に、これは始まるはずです。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「現在を理解するには、過去を知る必要があります。」</font><font style="vertical-align: inherit;">-カール・セーガン</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
失敗の履歴を見て、SOEまたは事後分析にタグを付け、分類します。</font><font style="vertical-align: inherit;">しばしば問題を引き起こす一般的なパターンを特定し、SOEごとに次の質問を自問してください。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「これは予見される可能性があるため、誤動作を導入することによって防止できますか？」</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャリアの最初の段階で失敗したことを思い出します。</font><font style="vertical-align: inherit;">いくつかの単純なカオス実験があれば、簡単に防ぐことができたでしょう。</font></font><br>
<br>
<blockquote>    backend'   health check'  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  (ELB</a>). ELB        «» .  ,    «», ELB     . ,    ,   ,  backend'    health check' ,  .  ,   health check'  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,      .<br>
<br>
  ,      .<br>
<br>
,      ,       ,  cron-   ETL.     cronjob'      100%.        health check' — ,  ELB ,      .   ,      , ,   ,         .<br>
<br>
       health check.<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいインスタンスの起動には、パッケージのダウンロードとインストールが必要で、オートスケールグループでELBがパッケージを1つずつ切断するよりもはるかに長い時間がかかりました。</font><font style="vertical-align: inherit;">プロセス全体がすぐに臨界点に達し、アプリケーションが落ちたことは明らかです。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、次の点を永遠に理解しました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいインスタンスを長期間作成するときにソフトウェアをインストールするには、不変のアプローチと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Golden AMI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を優先することをお</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">勧めし</font></a><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 困難な状況では、ヘルスチェックとELBへの回答を優先する必要があります。少なくとも、残りのインスタンスの寿命を複雑にしたい場合はその限りです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ヘルスチェックのローカルキャッシュ（数秒でも）は、非常に役立ちます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 困難な状況では、cronタスクやその他の重要でないプロセスを実行しないでください。最も重要なタスクのためにリソースを節約してください。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動スケーリングする場合は、より小さいインスタンスを使用します。</font><font style="vertical-align: inherit;">10の小さなコピーのグループは、4つの大きなコピーよりも優れています。</font><font style="vertical-align: inherit;">1つのインスタンスが落ちた場合、最初のケースでは、トラフィックの10％が9つのポイントに分散され、2番目のインスタンスでは、トラフィックの25％が3つのポイントに分散されます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは予見でき、問題を導入することで防ぐことができますか？</font></font></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そしていくつかの方法で。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>stress-ng</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font><font style="vertical-align: inherit;">などのツールを使用して高いCPU使用率をシミュレートします</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>cpuburn</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">❯ stress-ng --matrix 1 -t 60s</code></pre><br>
<img src="https://habrastorage.org/webt/d0/yt/if/d0ytifjietazwzk_l1odvcnmlfy.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ストレスng</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
次に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>wrk</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の同様のユーティリティ</font><font style="vertical-align: inherit;">を使用してインスタンスをオーバーロードします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="bash hljs">❯ wrk -t12 -c400 -d20s http://127.0.0.1/api/health</code></pre><br>
<img src="https://habrastorage.org/webt/zy/_2/wg/zy_2wgotuymrdqb15r4zv6b8d-s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実験は比較的単純ですが、実際の失敗のストレスを経験する必要なく、思考のための良い食べ物を提供できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そこで止まらない</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><b><font style="vertical-align: inherit;">ください</font></b><font style="vertical-align: inherit;">。テスト環境で障害を再現し、「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは予見されていたため、誤動作を導入することで防止でき</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たか」という質問への回答を確認してください</font><b><font style="vertical-align: inherit;">。</font></b><font style="vertical-align: inherit;">」これは、仮定をテストするためのカオス実験内のミニカオス実験ですが、失敗から始まります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d2/pz/6-/d2pz6-x-zv8k6kct4ffpm1tzw50.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それは夢でしたか、それとも本当に起こりましたか？</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
クラッシュ履歴を調査し、</font><b><font style="vertical-align: inherit;">COEを</font></b><font style="vertical-align: inherit;">分析する</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、タグ付けし、「敗北の半径」に従って、より正確には、影響を受ける顧客の数に従って分類し、パターンを探します。</font><font style="vertical-align: inherit;">これが問題を導入することによって予測され、防止された可能性があるかどうかを自問してください。</font><font style="vertical-align: inherit;">答えを確認してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、範囲が最大の最も一般的なパターンに切り替えます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.依存マップを作成する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションについて考えてみてください。依存関係の明確なマップはありますか？障害が発生した場合の影響を知っていますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションのコードにあまり詳しくない場合や、コードが大きくなりすぎた場合は、コードの機能とその依存関係を理解するのが難しい場合があります。これらの依存関係と、アプリケーションおよびユーザーへの影響の可能性を理解することは、カオスエンジニアリングをどこから始めればよいかを理解する上で重要です。破壊の半径が最大のコンポーネントが出発点になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依存関係マップの作成</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（依存関係マッピング）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる依存関係の識別と文書化</font><font style="vertical-align: inherit;">。これは通常、コードプロファイリングツールを使用して広範なコードベースを持つアプリケーションに対して実行されます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（コードプロファイリング）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および計装</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（計装）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ネットワークトラフィックを監視してマップを作成することもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、すべての依存関係が同じであるとは限りません（これによりプロセスがさらに複雑になります）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重大な</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ものもあれば</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二次</font></font></b> <font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">的な</font></b><font style="vertical-align: inherit;">ものもあります</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（少なくとも理論的には、クラッシュは重要でないと見なされていた依存関係の問題が原因で発生することが多いため）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要な依存関係がないと、サービスは機能しません。重要で</font><b><font style="vertical-align: inherit;">はない</font></b><font style="vertical-align: inherit;">依存関係」</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">»転倒時にサービスに影響を与えます。依存関係を処理するには、アプリケーションで使用されるAPIを明確に理解する必要があります。少なくとも大規模なアプリケーションでは、思ったよりもはるかに複雑になる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、すべてのAPIを並べ替えます。最も</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要で重要なものを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">強調表示し</font><font style="vertical-align: inherit;">ます。テイク</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードリポジトリ、レビューから</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の接続のログを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その後、チェック</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメントを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（それが存在する場合、当然のことながら-それ以外の場合は、あなたがまだ使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lshieの問題）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロファイリングとトレースの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ためのツールを使用して</font><font style="vertical-align: inherit;">、外部呼び出しをフィルターします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のようなプログラムを使用できます</font></font><code>netstat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-システム内のすべてのネットワーク接続（アクティブなソケット）のリストを表示するコマンドラインユーティリティ。たとえば、現在の接続をすべて表示するには、次のように入力します。</font></font><br>
<br>
<pre><code class="bash hljs">❯ netstat -a | more </code></pre><br>
<img src="https://habrastorage.org/webt/kc/4g/np/kc4gnphuxb_jw4yxdoyds5iwr4g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AWSは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フローログ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（フローログ）VPCを</font><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。VPCのネットワークインターフェースに着信する、またはネットワークインターフェースから着信するIPトラフィックに関する情報を収集する方法です。このようなログは、他のタスク、たとえば、特定のトラフィックがインスタンスに到達しない理由の答えを見つけるのに役立ちます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">AWS X-Rayを</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
使用することもでき</font><font style="vertical-align: inherit;">ます。 X-Rayを使用すると</font><font style="vertical-align: inherit;">、リクエストがアプリケーションを進行するときに、リクエストの</font><font style="vertical-align: inherit;">詳細な「エンド」</font><i><font style="vertical-align: inherit;">（エンドツーエンド）の</font></i><font style="vertical-align: inherit;">概要</font><font style="vertical-align: inherit;">を取得でき</font><font style="vertical-align: inherit;">、アプリケーションの基本コンポーネントのマップも作成できます。依存関係を特定する必要がある場合に非常に便利です。</font><i><font style="vertical-align: inherit;">AWS X-Rayコンソールの</font></i><font style="vertical-align: inherit;"> 
ネットワーク依存マップは、部分的なソリューションにすぎません。はい、どのアプリケーションがどのアプリケーションに関連付けられているかが表示されますが、他の依存関係があります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/uz/5d/zs/uz5dzsxizx7kkw0kc2esx048zha.png"><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのアプリケーションはDNSを使用して依存関係に接続しますが、他のアプリケーションはサービスディスカバリメカニズムを使用したり、構成ファイル内のハードコーディングされたIPアドレス（cなど</font></font><code>/etc/hosts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">を使用したりすることもできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラックホールDNS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成して、</font></font><code>iptables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何が壊れるかを確認</font><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これを行うには、次のコマンドを入力します。</font></font><br>
<br>
<pre><code class="bash hljs">❯ iptables -I OUTPUT -p udp --dport 53 -j REJECT -m comment --comment <span class="hljs-string">"Reject DNS"</span></code></pre><br>
<img src="https://habrastorage.org/webt/v4/57/8v/v4578vfcnxqj7zqqzujcz_kruhm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラックホールDNS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはその他の構成ファイルにIPアドレスが含まれている</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、</font></font><code>/etc/hosts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または構成ファイルが何もわからない場合（残念ながら、これが発生します）、再び救助に来る可能性があります</font></font><code>iptables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>8.8.8.8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これがGoogleのパブリックDNSサーバーのアドレスである</font><font style="vertical-align: inherit;">ことを見つけて</font><font style="vertical-align: inherit;">、知らないとします。</font><font style="vertical-align: inherit;">これを使用</font></font><code>iptables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すると、次のコマンドを使用して、このアドレスへの着信トラフィックと発信トラフィックを閉じることができます。</font></font><br>
<br>
<pre><code class="bash hljs">❯ iptables -A INPUT -s 8.8.8.8 -j DROP -m comment --comment <span class="hljs-string">"Reject from 8.8.8.8"</span>
❯ iptables -A OUTPUT -d 8.8.8.8 -j DROP -m comment --comment <span class="hljs-string">"Reject to 8.8.8.8"</span></code></pre><br>
<img src="https://habrastorage.org/webt/xc/-q/sw/xc-qswdeohmrg2885g4cmgwat-8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセス</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><i><font style="vertical-align: inherit;">拒否</font></i><font style="vertical-align: inherit;">最初のルールは、GoogleのパブリックDNSからすべてのパケットをドロップします。これは</font></font><code>ping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能しますが、パケットは返されません。 2番目のルールは、</font><i><font style="vertical-align: inherit;">許可されていない</font></i></font><code>ping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受信</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">への応答として、GoogleのパブリックDNSの方向にシステムから送信されるすべてのパケットを破棄します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注：この特定のケースでは</font></font><code>whois 8.8.8.8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">を使用する方が適切です</font><font style="vertical-align: inherit;">が、これは単なる例です。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
TCPとUDPを使用するすべてのものが実際にはIPに依存しているため、ウサギの穴にさらに深く入り込むことができます。ほとんどの場合、IPはARPに関連付けられています。ファイアウォールについて忘れないでください... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k7/rw/mp/k7rwmpx4rrj3-pbwpbbh3ivrzuk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">赤い丸薬を選択してください-ワンダーランドに留まり、ウサギの穴がどれほど深いかを示します。」</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
より根本的なアプローチは、</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">車を1つずつ</font><b><font style="vertical-align: inherit;">停止して、</font></b><font style="vertical-align: inherit;">何が壊れているかを確認してください。「混乱の猿」になります。</font><font style="vertical-align: inherit;">もちろん、多くの本番システムはこのような粗雑な攻撃用に設計されていませんが、少なくともテスト環境で試すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、依存マップの作成は非常に長い練習です。</font><font style="vertical-align: inherit;">私は最近、クライアントと話をしました。半自動モードで数百のマイクロサービスとチームの依存関係マップを生成するツールの開発に約2年を費やしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、結果は非常に興味深く、有用です。</font><font style="vertical-align: inherit;">システム、その依存関係、および操作について多くを学びます。</font><font style="vertical-align: inherit;">繰り返しますが、我慢してください。旅そのものが最も重要です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.傲慢さに注意する</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「誰が何を夢見ているにせよ、それを信じています。」</font><font style="vertical-align: inherit;">-デモステネス</font></font></blockquote><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自信過剰</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の</font><b><font style="vertical-align: inherit;">影響について</font></b><font style="vertical-align: inherit;">聞いたことがあり</font><font style="vertical-align: inherit;">ますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wikipediaによると、自信過剰の影響は、「特に自信のレベルが比較的高い場合に、行動と決定に対する個人の自信がこれらの判断の客観的精度よりもはるかに高い認知的歪み」です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vi/hp/4d/vihp4ddzqlozpqxsqk61y3p0lwi.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私の本能と経験に基づいて...</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
私自身の経験から、この歪みはカオスエンジニアリングを開始する場所の優れたヒントであると言えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自信のあるオペレーターに注意してください：</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャーリー：「このことは約5年間落ちていません、すべて元気です！」</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
失敗：「待ってください...もうすぐです！」</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自信の結果としてのバイアスは、それに影響を与えるさまざまな要因のために、陰湿で危険なことです。</font><font style="vertical-align: inherit;">これは、チームメンバーが特定のテクノロジに熱心に取り組んだり、「修正」に多くの時間を費やしたりした場合に特に当てはまります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要約する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カオス工学のための開始点の検索は常に予想以上の結果が得られ、そしてチームが速すぎる（混沌）のよりグローバルかつ興味深い本質を失う光景の周りのすべてを破るために開始</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンジニアリング</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -の創造的応用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">科学的手法</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実証的証拠</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の設計、開発のための（ソフトウェア）システムの運用、保守、改善。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、第二部は終わります。レビューを書いたり、意見を共有したり、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mediumに</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手を添えてください</font><font style="vertical-align: inherit;">。</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次の部分では、私がします</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本当に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システム障害を導入するためのツールやテクニックを見てください。まで！</font></font></s> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新しました</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（12月19日）：第</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3部</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">翻訳</font></a><font style="vertical-align: inherit;">が利用可能になりました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者からのPS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオスエンジニアリング：意図的な破壊の芸術。</font><font style="vertical-align: inherit;">パート1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（カオスエンジニアリングの概念と、それが生産の失敗につながる前に問題を発見/修正するのにどのように役立つかについて）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオスエンジニアリング：意図的な破壊の芸術。</font><font style="vertical-align: inherit;">第3部</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（このための障害と既存のツールを導入したカオスエンジニアリングの実践）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesでの高可用性の提供方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モニタリングとKubernetes（レビューとビデオレポート）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」;</font></font></li>
<li> «<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  kube-proxy     Kubernetes</a>».</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja465093/index.html">機械学習の秘訣-Kerasで複数のモデルを操作する</a></li>
<li><a href="../ja465095/index.html">教育ショー：デジタル専門家の初心者のための講義と競争</a></li>
<li><a href="../ja465097/index.html">Javaでの共用体型の実装</a></li>
<li><a href="../ja465101/index.html">あなたの完璧なテスター</a></li>
<li><a href="../ja465103/index.html">サイバー弁護士になる方法</a></li>
<li><a href="../ja465109/index.html">宿題のレッスン：ペバロの子供用ツールキット</a></li>
<li><a href="../ja465111/index.html">完全な匿名性：私たちはホームルーターを保護します</a></li>
<li><a href="../ja465113/index.html">募集。寒い夏2019</a></li>
<li><a href="../ja465119/index.html">あなたはコーディングを眠ることができません：チームを編成してハッカソンの準備をするには？</a></li>
<li><a href="../ja465121/index.html">ドゥロフのように：カリブ海の「黄金のパスポート」と降伏のためのオフショア新興企業</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>