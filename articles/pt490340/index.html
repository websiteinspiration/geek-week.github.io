<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóº üëØ ü¶Ñ Zen go üí™üèª üìû üò•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Avaliando meu trabalho, recentemente pensei muito em como escrever um bom c√≥digo. Dado que ningu√©m est√° interessado em escrever c√≥digo incorreto , sur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Zen go</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/490340/"><img src="https://habrastorage.org/webt/kr/ic/9k/kric9kwqdonbm71t_zw5b35ui4o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avaliando meu trabalho, recentemente pensei muito em como escrever um bom c√≥digo. </font><font style="vertical-align: inherit;">Dado que ningu√©m est√° interessado em escrever </font><font style="vertical-align: inherit;">c√≥digo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incorreto</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , surge a pergunta: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como voc√™ sabe se escreveu c√≥digo bom no Go</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">Se existe algum tipo de escala entre bom e ruim, como entender quais partes da escala pertencem ao bem? </font><font style="vertical-align: inherit;">Quais s√£o suas propriedades, atributos, caracter√≠sticas distintivas, padr√µes e express√µes idiom√°ticas?</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idiomatic go</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas considera√ß√µes me levaram ao Go idiom√°tico. </font><font style="vertical-align: inherit;">Se chamamos algo de ‚Äúidiom√°tico‚Äù, esse algo corresponde a um certo estilo de algum tempo. </font><font style="vertical-align: inherit;">Se algo n√£o √© idiom√°tico, n√£o corresponde ao estilo dominante. </font><font style="vertical-align: inherit;">Isso n√£o est√° na moda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais importante, quando dizemos que o c√≥digo de algu√©m n√£o √© idiom√°tico, isso n√£o explica o motivo. </font><font style="vertical-align: inherit;">Por que n√£o idiom√°tico? </font><font style="vertical-align: inherit;">A resposta √© dada pelo dicion√°rio.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Express√£o idiom√°tica (n.): Uma revolu√ß√£o da fala, usada como um todo, n√£o sujeita a decomposi√ß√£o adicional e geralmente n√£o permitindo permuta√ß√µes dentro de si.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Express√µes idiom√°ticas s√£o caracter√≠sticas de significados comuns. </font><font style="vertical-align: inherit;">Os livros n√£o ensinam o Go idiom√°tico; s√≥ √© conhecido quando voc√™ se torna parte de uma comunidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estou preocupado com o mantra idiom√°tico do Go, porque geralmente √© restritivo. </font><font style="vertical-align: inherit;">Ela diz: "voc√™ n√£o pode se sentar conosco". </font><font style="vertical-align: inherit;">N√£o √© isso que queremos dizer quando criticamos o trabalho de outra pessoa como "n√£o idiom√°tico"? </font><font style="vertical-align: inherit;">Eles fizeram errado. </font><font style="vertical-align: inherit;">Isso n√£o parece certo. </font><font style="vertical-align: inherit;">Isso n√£o est√° de acordo com o estilo da √©poca. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acredito que o Go idiom√°tico n√£o √© adequado para ensinar como escrever um bom c√≥digo, porque, em ess√™ncia, significa dizer √†s pessoas que elas fizeram algo errado. </font><font style="vertical-align: inherit;">√â melhor dar um conselho que n√£o afaste uma pessoa no momento em que ela mais deseja receber esse conselho.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prov√©rbios</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos nos distrair dos problemas idiom√°ticos. </font><font style="vertical-align: inherit;">Quais outros artefatos culturais s√£o inerentes aos programadores do Go? </font><font style="vertical-align: inherit;">V√° para a bela p√°gina de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prov√©rbios Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esses ditados s√£o uma ferramenta de aprendizado adequada? </font><font style="vertical-align: inherit;">Eles dizem aos iniciantes como escrever um bom c√≥digo Go? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acho que n√£o. </font><font style="vertical-align: inherit;">N√£o quero menosprezar o trabalho do autor. </font><font style="vertical-align: inherit;">Os ditos que ele comp√¥s s√£o meramente observa√ß√µes, n√£o defini√ß√µes de significados. </font><font style="vertical-align: inherit;">O dicion√°rio vem em socorro novamente:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prov√©rbio (n.): Uma declara√ß√£o curta que tem significado literal ou figurativo.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A miss√£o de Go Proverbs √© mostrar a ess√™ncia profunda da arquitetura da linguagem. </font><font style="vertical-align: inherit;">Mas ser√° √∫til aconselhar como "A </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface vazia n√£o diz nada</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " para um iniciante que veio de um idioma sem digita√ß√£o estrutural? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em uma comunidade em crescimento, √© importante reconhecer que o n√∫mero de estudantes da Go √© muito maior do que o n√∫mero de pessoas fluentes nesse idioma. </font><font style="vertical-align: inherit;">Ou seja, prov√©rbios provavelmente n√£o s√£o a melhor maneira de aprender em tal situa√ß√£o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valores de Design</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan Liu encontrou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uma apresenta√ß√£o antiga de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mark Lukowski sobre a cultura de design na equipe de desenvolvimento do Windows NT-Windows 2000. Mencionei isso porque Lukowski descreve a cultura como uma maneira comum de avaliar arquiteturas e fazer compromissos.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0cb/a0d/487/0cba0d4873afc7945a74500669efd389.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A id√©ia principal √© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tomar decis√µes baseadas em valor dentro de uma arquitetura desconhecida</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A equipe do NT tinha esses valores: portabilidade, confiabilidade, seguran√ßa e extensibilidade. </font><font style="vertical-align: inherit;">Simplificando, os valores do projeto s√£o uma maneira de resolver problemas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go Values</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quais s√£o os valores expl√≠citos do Go? </font><font style="vertical-align: inherit;">Quais s√£o os principais conceitos ou filosofias que determinam como os programadores do Go interpretam o mundo? </font><font style="vertical-align: inherit;">Como eles s√£o proclamados? </font><font style="vertical-align: inherit;">Como eles s√£o ensinados? </font><font style="vertical-align: inherit;">Como eles s√£o seguidos? </font><font style="vertical-align: inherit;">Como eles mudam com o tempo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ converte um programador Go, obt√©m os valores do design Go? </font><font style="vertical-align: inherit;">Ou como voc√™, um Go-pro experiente, proclama seus valores para as gera√ß√µes futuras? </font><font style="vertical-align: inherit;">E para que voc√™ entenda, esse processo de transfer√™ncia de conhecimento n√£o √© opcional? </font><font style="vertical-align: inherit;">Sem o influxo de novos participantes e novas id√©ias, nossa comunidade se torna m√≠ope e murcha.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valores de outras l√≠nguas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para preparar o caminho para o que quero dizer, podemos prestar aten√ß√£o a outras linguagens, a seus valores de design. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, em C ++ e Rust, acredita-se que um programador </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o deve pagar por um recurso que ele n√£o usa</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Se o programa n√£o usar algum recurso que consome muitos recursos da linguagem, n√£o poder√° ser for√ßado a arcar com o custo de manuten√ß√£o desse recurso. Esse valor √© projetado da linguagem para a biblioteca padr√£o e √© usado como crit√©rio para avaliar a arquitetura de todos os programas escritos em C ++. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Valor principal em Java, Ruby e Smalltalk - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tudo √© um objeto</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esse princ√≠pio √© subjacente ao design do programa em termos de transfer√™ncia de mensagens, oculta√ß√£o de informa√ß√µes e polimorfismo. </font><font style="vertical-align: inherit;">As arquiteturas que est√£o em conformidade com um paradigma processual ou funcional s√£o consideradas err√¥neas nessas linguagens. </font><font style="vertical-align: inherit;">Ou, como diria um programador do Go, n√£o idiom√°tico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos voltar √† nossa comunidade. </font><font style="vertical-align: inherit;">Quais valores de design os programadores Go professam? </font><font style="vertical-align: inherit;">As discuss√µes sobre esse t√≥pico geralmente s√£o fragmentadas, portanto, n√£o √© f√°cil formular um conjunto de significados. </font><font style="vertical-align: inherit;">√â imperativo chegar a um acordo, mas a dificuldade de alcan√ß√°-lo cresce exponencialmente com o crescente n√∫mero de participantes na discuss√£o. </font><font style="vertical-align: inherit;">Mas e se algu√©m fizesse esse trabalho dif√≠cil para n√≥s?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zen </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Go</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas d√©cadas atr√°s, Tim Peters sentou-se e escreveu </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP-20</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Zen de Python</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ele tentou documentar os valores de design aos quais Guido Van Rossum seguia como o ditador generoso do Python para a vida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos dar uma olhada no </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Zen of Python</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e ver se podemos aprender algo sobre os valores de design do designer Go.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um bom pacote come√ßa com um bom nome</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar com o afiado:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os namespaces s√£o uma √≥tima id√©ia, vamos aument√°-los! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Zen de Python, registro 19.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sem ambiguidade: os programadores de Python devem usar espa√ßos de nome. Muitos espa√ßos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na terminologia Go, um espa√ßo para nome √© um pacote. N√£o h√° d√∫vida de que a agrega√ß√£o favorece o design e a reutiliza√ß√£o. Mas pode haver confus√£o sobre como fazer isso, especialmente se voc√™ tiver muitos anos de experi√™ncia em programa√ß√£o em outra linguagem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Go, todos os pacotes devem ser projetados para algo. E o nome √© a melhor maneira de entender esse destino. Reformulando os pensamentos de Peteres, cada pacote no Go deve ser projetado para uma coisa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A ideia n√£o √© nova, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eu j√° falei sobre isso</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mas por que essa abordagem deve ser usada, e n√£o outra, em que pacotes s√£o usados ‚Äã‚Äãpara as necessidades de uma classifica√ß√£o detalhada? √â tudo sobre as mudan√ßas.</font></font><br>
<br>
<blockquote> ‚Äî    ,         .<br>
<br>
 </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mudan√ßa √© o nome do jogo em que estamos participando. N√≥s, como programadores, gerenciamos as mudan√ßas. Se fizermos isso bem, chamamos de arquitetura. E se estiver ruim, chamamos de d√≠vida t√©cnica ou c√≥digo legado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ escrever um programa que funcione perfeitamente uma vez com um conjunto fixo de dados de entrada, ningu√©m ficar√° interessado em saber se possui um bom c√≥digo, porque apenas o resultado do trabalho √© importante para os neg√≥cios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas isso </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o acontece</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Existem erros nos programas, requisitos e altera√ß√£o dos dados de entrada, e muito poucos programas s√£o gravados com uma √∫nica expectativa de execu√ß√£o. Ou seja, o programa </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ir√°</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mudar com o tempo. Talvez essa tarefa seja dada a voc√™, mas provavelmente algu√©m o far√°. Algu√©m precisa acompanhar esse c√≥digo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como facilitamos a troca de programas? </font><font style="vertical-align: inherit;">Adicionar interfaces em todos os lugares? </font><font style="vertical-align: inherit;">Fa√ßa tudo adequado para criar stubs? </font><font style="vertical-align: inherit;">Implantar depend√™ncias firmemente? </font><font style="vertical-align: inherit;">Talvez, para alguns tipos de programas, essas t√©cnicas sejam adequadas, mas n√£o para muitos. </font><font style="vertical-align: inherit;">No entanto, para a maioria dos programas, criar uma arquitetura flex√≠vel √© mais do que design. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E se, em vez de expandir os componentes, os substituiremos? </font><font style="vertical-align: inherit;">Se o componente n√£o fizer o que est√° especificado nas instru√ß√µes, √© hora de alter√°-lo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um bom pacote come√ßa com a escolha de um bom nome. </font><font style="vertical-align: inherit;">Considere uma breve apresenta√ß√£o que descreve a fun√ß√£o de um pacote com apenas uma palavra. </font><font style="vertical-align: inherit;">E quando o nome n√£o atender mais ao requisito, encontre uma substitui√ß√£o.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A simplicidade √© importante</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simples √© melhor que complexo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Zen de Python, entrada 3.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O PEP-20 afirma que o simples √© melhor que o complexo, e eu concordo completamente. </font><font style="vertical-align: inherit;">Alguns anos atr√°s eu escrevi:</font></font><br>
<br>
<div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="539576755254611968"></twitter-widget>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A maioria das linguagens de programa√ß√£o tenta ser simples no come√ßo, mas depois decide ser poderosa.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acordo com minhas observa√ß√µes, pelo menos naquela √©poca, n√£o conseguia me lembrar de uma linguagem que sabia que n√£o seria considerada simples. Como justificativa e tenta√ß√£o, os autores de cada nova linguagem declararam simplicidade. Mas descobri que a simplicidade n√£o era o valor principal de muitas linguagens da mesma idade que Go (Ruby, Swift, Elm, Go, NodeJS, Python, Rust). Talvez isso chegue a um ponto cr√≠tico, mas talvez o motivo seja que nenhuma dessas l√≠nguas seja simples. Ou seus autores n√£o os </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consideraram</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simples. A simplicidade n√£o foi inclu√≠da na lista de valores fundamentais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode me considerar antiquado, mas quando essa simplicidade saiu de moda? Por que a ind√∫stria de software comercial esquece constantemente e com alegria essa verdade fundamental?</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H√° duas maneiras de criar uma arquitetura de software: simplificar de maneira que a falta de falhas seja √≥bvia e torn√°-la t√£o complexa que n√£o possui falhas √≥bvias. </font><font style="vertical-align: inherit;">O primeiro m√©todo √© muito mais dif√≠cil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Charles Hoar, Roupas Antigas do Imperador, Palestra do Pr√™mio Turing, 1980</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simples n√£o significa f√°cil, sabemos disso. </font><font style="vertical-align: inherit;">Muitas vezes, √© preciso mais esfor√ßo para garantir a facilidade de uso, em vez da facilidade de cria√ß√£o.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplicidade √© a chave para a confiabilidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Edsger Dijkstra, EWD498, 18 de junho de 1975</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que lutar pela simplicidade? </font><font style="vertical-align: inherit;">Por que √© importante que os programas Go sejam simples? </font><font style="vertical-align: inherit;">Simples significa bruto, leg√≠vel e f√°cil de seguir. </font><font style="vertical-align: inherit;">Simples n√£o significa sem arte, significa confi√°vel, intelig√≠vel e compreens√≠vel.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O n√∫cleo da programa√ß√£o √© o gerenciamento de complexidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Brian Kernigan, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferramentas de software</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (1976)</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o Python segue seu mantra de simplicidade √© uma quest√£o discut√≠vel. </font><font style="vertical-align: inherit;">At Go, no entanto, a simplicidade √© um valor essencial. </font><font style="vertical-align: inherit;">Acho que todos concordamos que no Go o c√≥digo simples √© prefer√≠vel ao c√≥digo inteligente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evite estados no n√≠vel do pacote</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Expl√≠cito √© melhor que impl√≠cito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Zen de Python, entrada 2</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, Peters, na minha opini√£o, prefere sonhos do que aderir aos fatos. Em Python, muito n√£o √© expl√≠cito: decoradores, m√©todos de dunder, etc. Sem d√∫vida, essas s√£o ferramentas poderosas e existem por uma raz√£o. Na implementa√ß√£o de cada recurso, especialmente complexo, algu√©m trabalhou. Mas o uso ativo desses recursos dificulta a avalia√ß√£o do custo da opera√ß√£o ao ler o c√≥digo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, programadores do Go Go podem opcionalmente tornar o c√≥digo expl√≠cito. Talvez, para voc√™, manifesta√ß√£o possa ser sin√¥nimo de burocracia e verbosidade, mas essa √© uma interpreta√ß√£o superficial. Ser√° um erro focar apenas na sintaxe, cuidar do comprimento das linhas e da aplica√ß√£o dos princ√≠pios DRY √†s express√µes. Parece-me mais importante fornecer explica√ß√µes em termos de conex√£o e estados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conectividade √© uma medida da depend√™ncia de um em outro. Se um est√° intimamente relacionado ao outro, ambos se movem juntos. Uma a√ß√£o que afeta um √© refletida diretamente no outro. Imagine um trem no qual todos os carros est√£o conectados - ou melhor, conectados - juntos. Onde o trem a vapor vai, h√° os carros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A conectividade tamb√©m pode ser descrita pelo termo coes√£o - coes√£o. Esta √© uma medida de quanto um pertence ao outro. Em uma equipe soldada, todos os participantes s√£o t√£o adequados um ao outro, como se tivessem sido criados especialmente dessa maneira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que a coer√™ncia √© importante? Como no caso do trem, quando voc√™ precisa alterar um trecho de c√≥digo, √© necess√°rio alterar o restante do c√≥digo intimamente relacionado. Por exemplo, algu√©m lan√ßou uma nova vers√£o de sua API e agora seu c√≥digo n√£o √© compilado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma API √© uma fonte inevit√°vel de liga√ß√£o. Mas pode ser apresentado de formas mais insidiosas. Todo mundo sabe que se a assinatura da API foi alterada, os dados transferidos de e para a API tamb√©m ser√£o alterados. √â tudo sobre a assinatura da fun√ß√£o: pego os valores de um tipo e retorno os valores de outros tipos. E se a API come√ßar a transferir dados de uma maneira diferente? E se o resultado de cada chamada da API depender da chamada anterior, mesmo que voc√™ n√£o tenha alterado suas configura√ß√µes? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© chamado de estado, e o gerenciamento de estado √© um problema na ci√™ncia da computa√ß√£o.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> counter<font></font>
<font></font>
<span class="hljs-keyword">var</span> count <span class="hljs-keyword">int</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Increment</span><span class="hljs-params">(n <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> {<font></font>
        count += n<font></font>
        <span class="hljs-keyword">return</span> count<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui temos um pacote simples </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Para alterar o contador, voc√™ pode ligar </font></font><code>Increment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, voc√™ pode at√© recuperar o valor se incrementar com um valor zero. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Digamos que voc√™ precise testar esse c√≥digo. Como redefinir o contador ap√≥s cada teste? E se voc√™ deseja executar testes em paralelo, como isso pode ser feito? E suponha que voc√™ queira usar v√°rios contadores no programa, ter√° sucesso? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Claro que n√£o. Obviamente, a solu√ß√£o √© encapsular a vari√°vel </font></font><code>variable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no tipo</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> counter<font></font>
<font></font>
<span class="hljs-keyword">type</span> Counter <span class="hljs-keyword">struct</span> {<font></font>
        count <span class="hljs-keyword">int</span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Counter)</span> <span class="hljs-title">Increment</span><span class="hljs-params">(n <span class="hljs-keyword">int</span>)</span> <span class="hljs-title">int</span></span> {<font></font>
        c.count += n<font></font>
        <span class="hljs-keyword">return</span> c.count<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora imagine que o problema descrito n√£o se limita aos contadores, mas tamb√©m afeta a principal l√≥gica de neg√≥cios de seus aplicativos. </font><font style="vertical-align: inherit;">Voc√™ pode test√°-lo isoladamente? </font><font style="vertical-align: inherit;">Voc√™ pode testar em paralelo? </font><font style="vertical-align: inherit;">Voc√™ pode usar v√°rias inst√¢ncias ao mesmo tempo? </font><font style="vertical-align: inherit;">Se a resposta for n√£o para todas as perguntas, o motivo √© o estado no n√≠vel do pacote. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Evite essas condi√ß√µes. </font><font style="vertical-align: inherit;">Reduza a conectividade e o n√∫mero de a√ß√µes remotas de pesadelo, fornecendo aos tipos as depend√™ncias necess√°rias como campos, em vez de usar vari√°veis ‚Äã‚Äãde pacote.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fa√ßa planos para o fracasso, n√£o para o sucesso</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nunca passe erros silenciosamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Zen de Python, entrada 10</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© dito sobre idiomas que incentivam o tratamento de exce√ß√µes no estilo samurai: volte com uma vit√≥ria ou nunca mais volte. Nos idiomas baseados em exce√ß√µes, as fun√ß√µes retornam apenas resultados v√°lidos. Se a fun√ß√£o n√£o puder fazer isso, o fluxo de controle ser√° de uma maneira completamente diferente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, exce√ß√µes n√£o verificadas s√£o um modelo de programa√ß√£o inseguro. Como voc√™ pode escrever um c√≥digo confi√°vel na presen√ßa de erros, se voc√™ n√£o sabe quais express√µes podem gerar uma exce√ß√£o? Java tenta reduzir riscos com o conceito de exce√ß√µes verificadas. E at√© onde eu sei, em outras l√≠nguas populares, n√£o h√° an√°logos dessa solu√ß√£o. Existem exce√ß√µes em muitas linguagens e, em todos os lugares, exceto Java, elas n√£o s√£o verificadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, Go seguiu um caminho diferente. </font><font style="vertical-align: inherit;">Os programadores da Go acreditam que os programas confi√°veis ‚Äã‚Äãs√£o compostos de pe√ßas que lidam com falhas </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antes de</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> processar caminhos bem-sucedidos. </font><font style="vertical-align: inherit;">Dado que o idioma foi criado para o desenvolvimento do servidor, a cria√ß√£o de programas multithread, bem como programas que processam a entrada de dados na rede, os programadores devem se concentrar em trabalhar com dados inesperados e danificados, tempos limite e falhas de conex√£o. </font><font style="vertical-align: inherit;">Claro, se eles querem fazer produtos confi√°veis.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acredito que os erros devem ser tratados explicitamente, esse deve ser o principal valor da linguagem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peter Burgon, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GoTime # 91</font></font></a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Junto √†s palavras de Pedro, elas serviram de impulso √† reda√ß√£o deste artigo. </font><font style="vertical-align: inherit;">Acredito que o Go deve seu sucesso ao tratamento expl√≠cito de erros. </font><font style="vertical-align: inherit;">Os programadores pensam principalmente em poss√≠veis falhas. </font><font style="vertical-align: inherit;">Primeiro, resolvemos problemas como "e se". </font><font style="vertical-align: inherit;">O resultado s√£o programas nos quais as falhas s√£o tratadas no est√°gio de escrita do c√≥digo, e n√£o como ocorrem durante a opera√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A verbosidade deste c√≥digo</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">return</span> err<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supera a import√¢ncia de lidar deliberadamente com cada estado com falha no momento em que ocorre. </font><font style="vertical-align: inherit;">A chave para isso √© o valor de lidar explicitamente com cada erro.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Melhor voltar cedo do que investir profundamente</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Irm√£o √© melhor do que aninhar </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Zen of Python, entrada 5</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse conselho s√°bio vem de uma linguagem na qual o recuo √© a principal forma de fluxo de controle. Como interpretamos esta dica na terminologia Go? O gofmt gerencia toda a quantidade de espa√ßo vazio nos programas Go, portanto n√£o temos nada a fazer aqui. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu escrevi acima sobre nomes de pacotes. Talvez seja aconselh√°vel evitar uma hierarquia complexa de pacotes. Na minha experi√™ncia, quanto mais um programador tenta separar e classificar uma base de c√≥digo no Go, maior o risco de importa√ß√£o c√≠clica de pacotes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acredito que o melhor uso da quinta entrada de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Zen of Python</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© criar um fluxo de controle </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dentro de uma</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fun√ß√£o. Em outras palavras, evite um fluxo de controle que exija recuo de v√°rios n√≠veis.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A visibilidade direta √© uma linha reta ao longo da qual a vista n√£o √© obscurecida por nada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
May Ryer, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code: Alinhe o caminho feliz √† borda esquerda</font></font></a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
May Ryer descreve essa id√©ia como programa√ß√£o em linha de vis√£o direta:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use as instru√ß√µes de controle para retornar cedo se a pr√©-condi√ß√£o n√£o for atendida.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colocar a declara√ß√£o de retorno bem-sucedido no final da fun√ß√£o e n√£o dentro do bloco condicional.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduza o n√≠vel geral de aninhamento extraindo fun√ß√µes e m√©todos.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tente garantir que fun√ß√µes importantes nunca saiam da linha de vis√£o para a borda direita da tela. </font><font style="vertical-align: inherit;">Esse princ√≠pio tem um efeito colateral: voc√™ evitar√° disputas sem sentido com a equipe sobre o comprimento das linhas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada vez que voc√™ recua, voc√™ adiciona mais uma pr√©-condi√ß√£o aos chefes dos programadores, ocupando um dos seus 7 ¬± 2 slots de mem√≥ria de curto prazo. </font><font style="vertical-align: inherit;">Em vez de aprofundar o aninhamento, tente manter o caminho bem-sucedido da fun√ß√£o o mais pr√≥ximo poss√≠vel do lado esquerdo da tela.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ acha que algo est√° correndo devagar, prove com uma refer√™ncia</font></font></h2><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desista da tenta√ß√£o de adivinhar diante da ambiguidade. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Zen do Python 12</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A programa√ß√£o √© baseada em matem√°tica e l√≥gica. </font><font style="vertical-align: inherit;">Esses dois conceitos raramente usam o elemento da sorte. </font><font style="vertical-align: inherit;">Mas n√≥s, como programadores, fazemos in√∫meras suposi√ß√µes todos os dias. </font><font style="vertical-align: inherit;">O que essa vari√°vel faz? </font><font style="vertical-align: inherit;">O que essa op√ß√£o faz? </font><font style="vertical-align: inherit;">O que acontece se eu n√£o passar por aqui? </font><font style="vertical-align: inherit;">O que acontece se eu ligar para o registro duas vezes? </font><font style="vertical-align: inherit;">Na programa√ß√£o moderna, voc√™ precisa assumir muito, especialmente ao usar as bibliotecas de outras pessoas.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A API deve ser f√°cil de usar e dif√≠cil de usar incorretamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Josh Bloch</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das melhores maneiras que conhe√ßo para ajudar um programador a n√£o adivinhar ao criar uma API √© se </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concentrar nos m√©todos de uso padr√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O chamador deve poder executar opera√ß√µes normais da maneira mais f√°cil poss√≠vel. No entanto, antes de escrever muito e falar sobre o design da API, aqui est√° minha interpreta√ß√£o do registro 12: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o adivinhe o t√≥pico de desempenho</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apesar da sua atitude em rela√ß√£o aos conselhos de Knut, uma das raz√µes do sucesso da Go √© a efic√°cia de sua execu√ß√£o. Programas eficazes podem ser escritos neste idioma e, gra√ßas a isso, as pessoas </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ir√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escolha ir. </font><font style="vertical-align: inherit;">Existem muitos conceitos errados relacionados ao desempenho. </font><font style="vertical-align: inherit;">Portanto, quando voc√™ estiver procurando maneiras de melhorar o desempenho do c√≥digo ou seguir dicas dogm√°ticas, como "deixar as prateleiras mais lentas", "CGO √© caro" ou "sempre use opera√ß√µes at√¥micas em vez de mutexes", n√£o adivinhe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o complique seu c√≥digo devido a dogmas desatualizados. </font><font style="vertical-align: inherit;">E se voc√™ acha que algo est√° funcionando lentamente, primeiro certifique-se disso com a ajuda de uma refer√™ncia. </font><font style="vertical-align: inherit;">O Go possui √≥timas ferramentas gratuitas de benchmarking e cria√ß√£o de perfil. </font><font style="vertical-align: inherit;">Use-os para encontrar gargalos no desempenho do seu c√≥digo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antes de iniciar o gorutin, descubra quando ele ir√° parar</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acho que listei os itens valiosos do PEP-20 e talvez tenha expandido sua interpreta√ß√£o al√©m do bom gosto. </font><font style="vertical-align: inherit;">Isso √© bom, porque, embora este seja um dispositivo ret√≥rico √∫til, ainda estamos falando de dois idiomas diferentes.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escreva g, o, um espa√ßo e, em seguida, uma chamada de fun√ß√£o. </font><font style="vertical-align: inherit;">Tr√™s pressionamentos de bot√£o, n√£o podem ser mais curtos. </font><font style="vertical-align: inherit;">Tr√™s cliques no bot√£o e voc√™ iniciou o subprocesso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rob Pike, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplicidade √© Complicada</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dotGo 2015</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As pr√≥ximas duas dicas que eu dedico √†s goroutines. Gorutins s√£o uma caracter√≠stica da linguagem, nossa resposta √† competitividade de alto n√≠vel. Eles s√£o muito f√°ceis de usar: coloque uma palavra </font></font><code>go</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na frente do operador e voc√™ executa a fun√ß√£o de forma ass√≠ncrona. Sem encadeamentos de execu√ß√£o, executores de conjunto, sem IDs, sem rastreamento de status de conclus√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gorutins s√£o baratos. Devido √† capacidade do ambiente de tempo de execu√ß√£o de multiplexar goroutines em um pequeno n√∫mero de threads de execu√ß√£o (que voc√™ n√£o precisa gerenciar), √© poss√≠vel criar facilmente centenas de milhares ou milh√µes de goroutines. Isso permite criar arquiteturas que seriam impratic√°veis ‚Äã‚Äãao usar outros modelos competitivos, na forma de encadeamentos de execu√ß√£o ou retornos de chamada de evento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas por mais baratas que sejam as goroutinas, elas n√£o s√£o gratuitas. A pilha deles leva pelo menos alguns kilobytes. E quando voc√™ tem milh√µes de goroutines, isso se torna percept√≠vel. N√£o quero dizer que voc√™ n√£o precisa usar milh√µes de goroutines, se a arquitetura o levar a isso. Mas se voc√™ us√°-lo, √© extremamente importante monitor√°-los, uma vez que em tais quantidades as goroutines podem consumir muitos recursos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goroutines s√£o a principal fonte de propriedade do Go. Para ser √∫til, a goroutine deve fazer alguma coisa. Ou seja, quase sempre ele cont√©m um link para um recurso, ou seja, informa√ß√µes de propriedade: bloqueio, conex√£o de rede, buffer de dados enviando o final do canal. Enquanto a goroutine permanece, o bloqueio √© mantido, a conex√£o permanece aberta, o buffer √© salvo e os destinat√°rios do canal aguardam novos dados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maneira mais simples de liberar recursos √© vincul√°-los ao ciclo de vida das goroutinas. </font><font style="vertical-align: inherit;">Quando conclu√≠do, os recursos s√£o liberados. </font><font style="vertical-align: inherit;">E como √© muito f√°cil executar a goroutine, antes de escrever "v√° e espa√ßo", verifique se voc√™ tem respostas para estas perguntas:</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sob que condi√ß√£o a goroutine para? </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go n√£o pode dizer para a goroutine terminar. </font><font style="vertical-align: inherit;">Por um motivo espec√≠fico, n√£o h√° fun√ß√£o para parar ou interromper. </font><font style="vertical-align: inherit;">N√£o podemos ordenar que as goroutines parem, mas podemos pedir educadamente. </font><font style="vertical-align: inherit;">Isso quase sempre est√° relacionado √† opera√ß√£o do canal. </font><font style="vertical-align: inherit;">Quando fechado, o alcance √© feito em loop para sair do canal. </font><font style="vertical-align: inherit;">Ao fechar o canal, voc√™ pode selecion√°-lo. </font><font style="vertical-align: inherit;">O sinal de uma goroutine para outra √© melhor expresso como um canal fechado.</font></font></li>
<li><strong>    ?</strong>          ,        ,   :        ?</li>
<li><strong>     ,   ?</strong>     ,    -       .        ,       .           .          ,        .</li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Provavelmente em qualquer um dos seus programas s√©rios do Go, a simultaneidade √© usada. Isso geralmente leva ao problema de um padr√£o de trabalho - uma goroutine por conex√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um exemplo principal √© net / http. √â muito simples parar o servidor que possui o soquete de escuta, mas e as goroutines geradas por esse soquete? O net / http fornece um objeto de contexto dentro do objeto de solicita√ß√£o que pode ser usado para informar ao ouvinte que a solicita√ß√£o precisa ser cancelada e, portanto, interromper a goroutine. Mas n√£o est√° claro como descobrir quando tudo isso precisa ser feito. Uma coisa √© chamar </font></font><code>context.Cancel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, outra √© saber que o cancelamento est√° conclu√≠do.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Costumo encontrar falhas no net / http, mas n√£o porque √© ruim. Pelo contr√°rio, √© a API mais bem-sucedida, mais antiga e mais popular da base de c√≥digo Go. Portanto, sua arquitetura, evolu√ß√£o e falhas s√£o cuidadosamente analisadas. Considere esta lisonja, n√£o cr√≠tica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, quero trazer net / http como um contra-exemplo de boas pr√°ticas. Como cada conex√£o √© processada pela goroutin criada dentro do tipo </font></font><code>net/http.Server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, o programa fora do pacote net / http n√£o pode controlar as goroutins criadas pelo soquete receptor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta √°rea da arquitetura ainda est√° em desenvolvimento. Voc√™ pode recuperar </font></font><code>run.Group</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o go-kit, ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ErrGroup,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da equipe de desenvolvimento Go, que fornece uma estrutura para executar, cancelar e aguardar fun√ß√µes executadas de forma ass√≠ncrona.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para quem escreve c√≥digo que pode ser executado de forma ass√≠ncrona, o princ√≠pio principal da cria√ß√£o de arquiteturas √© que a responsabilidade pela execu√ß√£o de goroutines deve ser transferida para o chamador. </font><font style="vertical-align: inherit;">Deixe-o escolher como ele deseja executar, acompanhar e aguardar a conclus√£o de suas fun√ß√µes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escreva testes para bloquear o comportamento da API do seu pacote</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode ter esperado que, neste artigo, n√£o mencionarei testes. Desculpe, outra hora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seus testes s√£o um acordo sobre o que seu programa faz e o que n√£o faz. Os testes de unidade devem bloquear o comportamento de suas APIs no n√≠vel do pacote. Os testes descrevem em forma de c√≥digo o que o pacote promete fazer. Se houver um teste de unidade para cada convers√£o de entrada, voc√™, </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na forma de c√≥digo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e n√£o na documenta√ß√£o, definiu um acordo sobre o que o c√≥digo far√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A aprova√ß√£o deste contrato √© t√£o simples quanto escrever um teste. A qualquer momento, voc√™ pode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">afirmar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com um alto grau de confian√ßa </font><font style="vertical-align: inherit;">que o comportamento em que as pessoas se baseavam antes das altera√ß√µes feitas continuar√° a funcionar ap√≥s as altera√ß√µes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os testes bloqueiam o comportamento da API. </font><font style="vertical-align: inherit;">Quaisquer altera√ß√µes que adicionem, alterem ou removem a API p√∫blica devem incluir altera√ß√µes nos testes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modera√ß√£o √© uma virtude</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go √© uma linguagem simples, com apenas 25 palavras-chave. </font><font style="vertical-align: inherit;">De certa forma, isso destaca os recursos incorporados ao idioma. </font><font style="vertical-align: inherit;">Esses s√£o os recursos que permitem que a linguagem se promova: competi√ß√£o simples, tipagem estrutural etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acho que todos n√≥s estamos confusos ao tentar usar todos os recursos do Go de uma s√≥ vez. </font><font style="vertical-align: inherit;">Quantos de voc√™s foram t√£o inspirados pelo uso de canais que os usaram sempre que podem? </font><font style="vertical-align: inherit;">Eu descobri que os programas resultantes s√£o dif√≠ceis de testar, s√£o fr√°geis e muito complexos. </font><font style="vertical-align: inherit;">E voc√™?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tive a mesma experi√™ncia com goroutines. Tentando dividir o trabalho em pequenos fragmentos, criei a escurid√£o da goroutina, que era dif√≠cil de controlar, e perdi completamente de vista o fato de que a maioria deles sempre estava bloqueada devido √† expectativa de seus antecessores em concluir o trabalho. O c√≥digo era completamente consistente e eu tive que aumentar bastante a complexidade para obter uma pequena vantagem. Quantos de voc√™s j√° encontraram isso? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tive o mesmo com a incorpora√ß√£o. No come√ßo eu confundi com heran√ßa. Ent√£o, ele se deparou com o problema de uma classe base fr√°gil, combinando v√°rios tipos complexos que j√° tinham v√°rias tarefas em tipos enormes ainda mais complexos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este pode ser o conselho menos eficaz, mas considero importante mencion√°-lo. </font><font style="vertical-align: inherit;">O conselho √© o mesmo: mantenha a modera√ß√£o e os recursos do Go n√£o s√£o excep√ß√£o. </font><font style="vertical-align: inherit;">Sempre que poss√≠vel, n√£o use goroutines, canais, estruturas de incorpora√ß√£o, fun√ß√µes an√¥nimas, uma abund√¢ncia de pacotes e interfaces. </font><font style="vertical-align: inherit;">Use solu√ß√µes mais simples que as inteligentes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Facilidade de manuten√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, darei outra entrada do PEP-20:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legibilidade √© importante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Zen de Python, registro 7</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muito foi dito sobre a import√¢ncia da legibilidade do c√≥digo em todas as linguagens de programa√ß√£o. Quem promove o Go usa palavras como simplicidade, legibilidade, clareza, produtividade. Mas todos estes s√£o sin√¥nimos de um conceito - conveni√™ncia de manuten√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O objetivo real √© criar um c√≥digo f√°cil de manter. O c√≥digo que sobrevive ao autor. Um c√≥digo que pode existir n√£o apenas como investimento de tempo, mas como base para a obten√ß√£o de valor futuro. Isso n√£o significa que a legibilidade n√£o seja importante, apenas a conveni√™ncia da manuten√ß√£o √© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais importante</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Go n√£o √© um desses idiomas otimizados para programas de linha √∫nica. E n√£o um daqueles idiomas otimizados para programas com um n√∫mero m√≠nimo de linhas. N√£o otimizamos o tamanho do c√≥digo-fonte no disco ou a velocidade de grava√ß√£o de programas no editor. Queremos otimizar nosso c√≥digo para que ele se torne mais compreens√≠vel para os leitores. Porque s√£o eles que ter√£o que acompanh√°-lo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ escreve um programa para si mesmo, talvez ele seja iniciado apenas uma vez ou voc√™ √© o √∫nico que v√™ seu c√≥digo. </font><font style="vertical-align: inherit;">Nesse caso, fa√ßa qualquer coisa. </font><font style="vertical-align: inherit;">Por√©m, se mais de uma pessoa trabalhar no c√≥digo ou se ele for usado por um longo per√≠odo de tempo e os requisitos, recursos ou tempo de execu√ß√£o puderem mudar, o programa deve ser conveniente de manter. </font><font style="vertical-align: inherit;">Se o software n√£o puder ser mantido, n√£o poder√° ser reescrito. </font><font style="vertical-align: inherit;">E essa pode ser a √∫ltima vez que sua empresa investe no Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que voc√™ trabalha duro ser√° conveniente para acompanhar ap√≥s a sua partida? </font><font style="vertical-align: inherit;">Como voc√™ pode facilitar a manuten√ß√£o do seu c√≥digo para aqueles que o buscam hoje?</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt490324/index.html">Como encontramos erros n√£o √≥bvios nas interfaces de atribui√ß√£o online para crian√ßas</a></li>
<li><a href="../pt490328/index.html">Profiss√£o: Testador</a></li>
<li><a href="../pt490332/index.html">Fazemos um clone do servi√ßo de entrega de comida usando Nuxt.js, GraphQL, Strapi e Stripe. Parte 2/7</a></li>
<li><a href="../pt490336/index.html">Anatomia do canal em Go</a></li>
<li><a href="../pt490338/index.html">Em um experimento inovador, os f√≠sicos aprenderam a capturar √°tomos individuais.</a></li>
<li><a href="../pt490342/index.html">O que aprendemos ao testar o sistema de informa√ß√µes do estado</a></li>
<li><a href="../pt490344/index.html">Quem √© o techlide e por que a equipe precisa dele</a></li>
<li><a href="../pt490346/index.html">O papel do protocolo MQTT no desenvolvimento da Internet industrial das coisas</a></li>
<li><a href="../pt490348/index.html">Como dar feedback e n√£o come√ßar a Terceira Guerra Mundial</a></li>
<li><a href="../pt490354/index.html">Aprimorando a cultura de seguran√ßa da informa√ß√£o nas empresas de fintech</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>