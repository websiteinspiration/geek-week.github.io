<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎬 🛷 👨🏾‍🎨 Création d'une application de bureau à l'aide de Golang et Fyne 🔯 🏉 👨‍🌾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous allons développer une application de bureau sur Golang
 Développer une application de bureau golang n'est pas une tâche typique pour...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Création d'une application de bureau à l'aide de Golang et Fyne</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497148/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aujourd'hui, nous allons développer une application de bureau sur Golang</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Développer une application de bureau golang n'est pas une tâche typique pour un programmeur golang. </font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'y a pas tellement de bibliothèques open source prêtes à l'emploi pour Google pour le résoudre à la demande de golang desktop, des exemples de ce qui a été trouvé:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gotk</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fyne</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gxui</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fyne a été choisi parce que le référentiel github de ce projet contient le plus grand nombre d'étoiles, et il prend également en charge la conception de matériaux notoire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons quelles options pour afficher l'interface qu'il nous fournit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les widgets suivants sont disponibles dans la boîte:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bouton.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un conteneur (pour regrouper les widgets enfants et les diriger horizontalement ou verticalement).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Case à cocher, champs de saisie de texte ou de mot de passe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formes et groupes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hyperlien.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'icône.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'étiquette.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Barre de progression.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un conteneur déroulant.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commutateur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sélectionner</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Onglets.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Barre d'outils.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas où parmi les éléments d'interface le nécessaire n'était pas trouvé, il est possible d'implémenter des widgets personnalisés à l'aide d'une simple API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons d'écrire une application golang gui pour afficher les prévisions météorologiques pour les prochains jours en utilisant Fyne. </font><font style="vertical-align: inherit;">Le code d'application complet peut être trouvé sur le lien sur github. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, créez un projet vide sur Golang et installez Fyne.</font></font><br>
<br>
<pre><code class="bash hljs">go get fyne.io/fyne</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que l'application affichera des informations météorologiques, vous devez obtenir ces informations. </font><font style="vertical-align: inherit;">Pour ce faire, passez à l'API Open Weather Map.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getWeatherForecast</span><span class="hljs-params">(result <span class="hljs-keyword">interface</span>{})</span> <span class="hljs-title">error</span></span> {
  <span class="hljs-keyword">var</span> url = fmt.Sprintf(<span class="hljs-string">"https://api.openweathermap.org/data/2.5/forecast?q=Voronezh&amp;cnt=4&amp;units=metric&amp;appid=%s"</span>, openWeatherMapApiKey) <span class="hljs-comment">//    </span><font></font>
  response, err := http.Get(url)<font></font>
  <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
     fmt.Print(err)<font></font>
  }<font></font>
  <span class="hljs-keyword">defer</span> response.Body.Close()
  <span class="hljs-keyword">return</span> json.NewDecoder(response.Body).Decode(result)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour stocker des données, vous pouvez utiliser la structure suivante (je n'y ai laissé que certains des champs que l'API renvoie), il convient de prêter attention au fait que tous les champs de la structure sont en majuscules, mais dans la réponse de l'API, ils sont décrits avec un petit.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">type</span> WeatherInfo <span class="hljs-keyword">struct</span> {<font></font>
  List []WeatherListItem <span class="hljs-string">`json:list`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherListItem <span class="hljs-keyword">struct</span> {<font></font>
  Dt      <span class="hljs-keyword">int</span>           <span class="hljs-string">`json:dt`</span>
  Main    WeatherMain   <span class="hljs-string">`json:main`</span>
  Weather []WeatherType <span class="hljs-string">`json:weather`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherMain <span class="hljs-keyword">struct</span> {<font></font>
  Temp      <span class="hljs-keyword">float32</span> <span class="hljs-string">`json:temp`</span>
  FeelsLike <span class="hljs-keyword">float32</span> <span class="hljs-string">`json:feels_like`</span>
  Humidity  <span class="hljs-keyword">int</span>     <span class="hljs-string">`json:humidity`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">type</span> WeatherType <span class="hljs-keyword">struct</span> {<font></font>
  Icon <span class="hljs-keyword">string</span> <span class="hljs-string">`json:icon`</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous pouvons recevoir des données météorologiques sous la forme d'une structure. Il reste à implémenter l'interface de l'application de bureau golang.</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupUi</span><span class="hljs-params">(weatherInfo WeatherInfo)</span></span> {<font></font>
  app := app.New()<font></font>
<font></font>
  w := app.NewWindow(<span class="hljs-string">"   "</span>)<font></font>
<font></font>
  <span class="hljs-keyword">var</span> vBox = widget.NewVBox() <span class="hljs-comment">//        </span><font></font>
<font></font>
  <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">len</span>(weatherInfo.List); i++ {
     <span class="hljs-keyword">var</span> weatherForDay = weatherInfo.List[i] <span class="hljs-comment">//     </span>
     <span class="hljs-keyword">var</span> weatherMainGroup = widget.NewVBox(<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">": %.2f °C"</span>, weatherForDay.Main.Temp)),<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">" : %.2f °C"</span>, weatherForDay.Main.FeelsLike)),<font></font>
        widget.NewLabel(fmt.Sprintf(<span class="hljs-string">": %d%%"</span>, weatherForDay.Main.Humidity)),<font></font>
     ) <span class="hljs-comment">//  3    </span><font></font>
<font></font>
     <span class="hljs-keyword">var</span> weatherTypeGroup = widget.NewVBox()
     <span class="hljs-keyword">for</span> weatherTypeI := <span class="hljs-number">0</span>; weatherTypeI &lt; <span class="hljs-built_in">len</span>(weatherForDay.Weather); weatherTypeI++ {
        <span class="hljs-keyword">var</span> resource, _ = fyne.LoadResourceFromURLString(fmt.Sprintf(<span class="hljs-string">"http://openweathermap.org/img/wn/%s.png"</span>, weatherForDay.Weather[weatherTypeI].Icon)) <span class="hljs-comment">//   ,   </span>
        <span class="hljs-keyword">var</span> icon = widget.NewIcon(resource)<font></font>
        weatherTypeGroup.Append(icon)<font></font>
     }<font></font>
<font></font>
     <span class="hljs-keyword">var</span> time = time2.Unix(<span class="hljs-keyword">int64</span>(weatherInfo.List[i].Dt), <span class="hljs-number">0</span>).String()<font></font>
     vBox.Append(widget.NewGroup(time)) <font></font>
     vBox.Append(widget.NewHBox(weatherMainGroup, weatherTypeGroup))<font></font>
  }<font></font>
  vBox.Append(widget.NewButton(<span class="hljs-string">""</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {<font></font>
     app.Quit()<font></font>
  }))<font></font>
<font></font>
  w.SetContent(vBox) <span class="hljs-comment">//    </span><font></font>
<font></font>
  w.ShowAndRun() <span class="hljs-comment">//   </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous créons nos widgets, les remplissons de données et les collectons en groupes pour organiser l'ordre dans lequel ils sont affichés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terminé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste plus qu'à exécuter l'application et à voir à quoi elle ressemble. </font><font style="vertical-align: inherit;">Étant donné que le cadre est multiplateforme, vous pouvez l'exécuter à la fois sur Windows et macOS et Linux. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d36/269/9d6/d362699d6e617cfdd88314cff903ffc2.png" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancement de l'application golang mac os </font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6af/19d/18b/6af19d18b2c51392eba592f3c55264fb.png" alt="image"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et cela ressemble à une application golang windows</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En conséquence, il s'est avéré créer une application de bureau golang multiplateforme simple et essayer Fyne en action. </font><font style="vertical-align: inherit;">Malheureusement, go ne vaut guère la peine d'être considéré comme un langage approprié pour développer des applications de bureau modernes, cependant, il est toujours intéressant de toucher quelque chose de nouveau et d'inhabituel dans la pratique. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci à tous pour votre attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497136/index.html">«Save Concord» ou un rapport des tests du système radar russe pour rechercher des objets étrangers sur la piste</a></li>
<li><a href="../fr497140/index.html">Décryptage des données dans le bus CAN VW Polo berline</a></li>
<li><a href="../fr497142/index.html">Comment nous avons ajouté la prise en charge Harmony OS à l'application inDriver Android</a></li>
<li><a href="../fr497144/index.html">Coin par coin: utilisation du virus PIV5 pour créer un vaccin contre le MERS-CoV et éventuellement contre le SRAS-CoV-2</a></li>
<li><a href="../fr497146/index.html">Cryptographie appliquée. Comment nous avons restauré des bitcoins pour 300 mille dollars</a></li>
<li><a href="../fr497152/index.html">Où vit le cœur du produit: mesures pour mesurer le bonheur</a></li>
<li><a href="../fr497162/index.html">Courbe Ebbinghaus: comment pirater votre mémoire et mémoriser jusqu'à 95% des informations</a></li>
<li><a href="../fr497166/index.html">Une tentative de comprendre la multidimensionnalité de la théorie M</a></li>
<li><a href="../fr497170/index.html">Comment économiser du trafic sur un serveur Web</a></li>
<li><a href="../fr497174/index.html">Udalenka comme menace</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>