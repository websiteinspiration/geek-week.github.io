<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🚀 📯 👨🏻‍🚀 Androidプロジェクトのビルド時間を短縮する 🌈 🧒🏻 🚣🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="おはようございます！私たちは月曜日に、「Android-developer」というコースの学生のために特別に準備された資料から始めます。上級コース。」
 
 
 
 最近、AndroidコードベースをAndroidXのKureに移行しました。これは、プロジェクトの組み立てのスピードに取り組む絶好の機...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Androidプロジェクトのビルド時間を短縮する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/457374/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おはようございます！私たちは月曜日に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「Android-developer」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">というコースの学生のために特別に準備された資料から始め</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます。上級コース</font></a><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">」</font></a></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/gh/9u/cqgh9uzb-qlhdgfjiv_ayajrqde.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
最近、Androidコードベースを</font><font style="vertical-align: inherit;">AndroidXの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kure</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">移行しました</font><font style="vertical-align: inherit;">。これは、プロジェクトの組み立てのスピードに取り組む絶好の機会だと私には思えました。 Gradleの速度とリソースの消費により、常に評判が悪かったのですが、アセンブリ構成を少し変更するだけで速度が大幅に向上することを非常に驚きました。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最適化</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2k/yw/2w/2kyw2wlroiairpx8iiriwjdbejq.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> /最適</font><i><font style="vertical-align: inherit;">化</font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/ef/ss/u6/efssu62faz4yoi92zvmssa1pf0m.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">後の最適</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">化</font><i><font style="vertical-align: inherit;">前の</font></i><font style="vertical-align: inherit;">アセンブリのスキャンパフォーマンスを確認してください</font><i><font style="vertical-align: inherit;">️️5.5</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
分から</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17秒に</font></font></b><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">減少</font></i><font style="vertical-align: inherit;">しました</font><b><font style="vertical-align: inherit;">か？</font></b><b><font style="vertical-align: inherit;">うわー！</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
組み立て時間をさらに短縮するために、最適化でやり過ぎることはそれほど難しくありません。</font><font style="vertical-align: inherit;">しかし、初心者が投稿を理解できるようにするために、この指標に近づくために私が取ったマイナーで痛みのない対策に意図的に焦点を当てます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主に！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最適化を開始する前に、プロジェクトをテストして、構築にかかる時間を確認することが重要です。</font><font style="vertical-align: inherit;">Gradleには、タスクのパフォーマンスを分析するために使用できる便利なスキャンオプションがあります。</font><font style="vertical-align: inherit;">Android Studioでターミナルを起動し、次のコマンドを実行します。</font></font><br>
<br>
<pre><code class="kotlin hljs">./gradlew assembleDebug --scan</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アセンブリが正常に完了すると、スキャン結果をダウンロードするための利用規約に同意するよう求められます。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">入力</font><font style="vertical-align: inherit;">して続行します。公開が完了すると、スキャンをチェックするためのターミナルへのリンクが表示されます。それを開く。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイトにはかなりの数のオプションがありますが、簡潔にするために、最も重要なものだけを検討します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
概要には、完了したタスクとその完了時刻に関する概要情報が表示されます。しかし、ここで興味があるのは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンスの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セクション</font><font style="vertical-align: inherit;">です。以下に示すように、合計ビルド時間のより詳細な内訳を示します。</font><b><font style="vertical-align: inherit;">[</font></b></font><br>
<br>
<img src="https://habrastorage.org/webt/on/n_/he/onn_he0w_k-i5nkwr7jagda9mx4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
パフォーマンス]セクションには</font><b><font style="vertical-align: inherit;">[設定と提案</font></b><font style="vertical-align: inherit;"> ]タブがあります</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、アセンブリ速度を向上させるための推奨事項を提供します。</font><font style="vertical-align: inherit;">それらを見てみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/g0/l0/bu/g0l0buxdn5wy1pfkxnuc0f9i0gc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションでは、速度を改善するための簡単な修正をいくつか見つけることができます。</font><font style="vertical-align: inherit;">したがって、続けてこれらの修正をプロジェクトに適用します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ＃1：ツールをアップグレードする</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Androidチームは常にビルドシステムを改善および開発しています。したがって、ほとんどの場合、ツールキットの最新バージョンをインストールするだけで大​​幅な改善が得られます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このリファクタリングの間、私たちのプロジェクトは</font><font style="vertical-align: inherit;">Android StudioのGradleプラグインの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン3.2.1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後のリリースより古いいくつかのバージョン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）でした。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">このリンク</font></a><font style="vertical-align: inherit;">から最新バージョンのGradleプラグインを入手</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
できます</font><font style="vertical-align: inherit;">。この記事の執筆時点では、最新の</font><b><font style="vertical-align: inherit;">バージョンは3.4.0でした。</font></b><font style="vertical-align: inherit;"> 
ただし、ここで覚えておかなければならない</font><i><b><font style="vertical-align: inherit;">注意事項が</font></b></i><font style="vertical-align: inherit;">あります</font><i><font style="vertical-align: inherit;">（</font></i><i><b><font style="vertical-align: inherit;">注：</font></b></i></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/v0/b9/j9/v0b9j9xfqws0eknr0khchb4aoi0.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gradleバージョン5.0以降を使用する場合、Gradleデーモンのデフォルトサイズは1 GBから512 MBに削減されます。これにより、アセンブリのパフォーマンスが低下する可能性があります。このデフォルト設定を上書きするには、プロジェクトのgradle.propertiesファイル内のGradleデーモンのメモリサイズを指定します。）</font></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Https://developer.android.com/studio/releases/gradle-plugin </font></font></a><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用した場合</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のGradle 5.0以上を、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々は明示的に増やす必要がありますメモリサイズ。アセンブリの速度が低下しないようにします。すぐにこれに戻ります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
開いて</font><font style="vertical-align: inherit;">トップレベルの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">build.gradleの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">、あなたのプロジェクトのルートにあります、とに次の行を追加し</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、依存関係のセクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<code>classpath 'com.android.tools.build:gradle:3.4.0'</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたも更新する必要があります</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">distribution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にあるGradle Wrapperプロパティファイル</font><b><font style="vertical-align: inherit;">のURL</font></b></font><code><b>gradle/wrapper/gradle-wrapper.properties</b></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">URLを次のように更新します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このリンクは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Android Gradleプラグインのページ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で利用可能に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">なります</font></a><font style="vertical-align: inherit;">。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><br>
<br>
<code>distributionUrl=https\://services.gradle.org/distributions/gradle-5.1.1-all.zip</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kotlin Gradleプラグインのバージョンが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未満の場合、Kotlinを使用するとエラーが発生します</font><b><font style="vertical-align: inherit;">。</font></b><font style="vertical-align: inherit;">その場合は、IDEツールチップを使用して、KotlinのGradleプラグインを最新バージョンに更新します（これを書いている時点では、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン1.3.31です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では、ターミナルからビルドを再度実行して、改善点がないか確認してみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gg/lg/kf/gglgkfxrbccatt7ygkyswjrky28.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手順＃2：構成を更新する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ビルド時間から約2.5分を削減できましたが、それでもまだ十分ではありません。ターミナルで</font><i><font style="vertical-align: inherit;">ビルドログ</font></i><font style="vertical-align: inherit;">を調べたところ、興味のある行が</font><i><font style="vertical-align: inherit;">見つかりました</font></i><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gr/fo/pv/grfopv6dg9wjtertgdxun5danku.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（&gt;タスク：app：compileDevelopDebugJavawithJavac </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gradleは、インクリメンタルコンパイルを無効にできます。次のアノテーションプロセッサはインクリメンタルではないためです：butterknife-compiler-10.1.0.jar（com。 jakewharton：butterknife-compiler：10.1.0）、dagger-compiler-2.9.jar（com.google.dagger：dagger-compiler：2.9）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
処理を開始するには、gradle.propertiesファイルで試験的なandroid.enableSeparateAnnotationProcessing-trueフラグを設定することを検討してください別のタスクでの注釈と増分コンパイルの実行）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インクリメンタルコンパイルは、基本的にソースファイルのセット全体の無駄なコンパイルを防ぎ、変更されたファイルのみをコンパイルします。</font><font style="vertical-align: inherit;">ログから、この機能を使用していないことは明らかです。</font><font style="vertical-align: inherit;">彼はを使用するよう</font></font><code><b>android.enableSeparateAnnotationProcessing=true</b></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">提案しています</font><font style="vertical-align: inherit;">が、</font><font style="vertical-align: inherit;">私たちのプロジェクトではKotlinを使用している</font><font style="vertical-align: inherit;">ため、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「annotationProcessor」</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成を使用しない</font><font style="vertical-align: inherit;">でください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸い、</font><font style="vertical-align: inherit;">Kotlinの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バージョン1.3.30</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、アノテーションの段階的な処理のサポートが追加されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hq/ud/_r/hqud_rdvrv8fzj2z4fadmqbqtqc.jpeg"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://kotlinlang.org/docs/reference/kapt.html</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（注釈の増分処理（1.3.30以降）</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バージョン1.3.30以降</font></font><code>kapt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、実験的な機能としてアノテーションのインクリメンタル処理をサポートしています。</font><font style="vertical-align: inherit;">現在、注釈処理は、使用されるすべての注釈プロセッサがインクリメンタルである場合にのみ、インクリメンタルに実行できます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
増分注釈処理を有効にするには、ファイルに次の行を追加します</font></font><code>gradle.properties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<code>kapt.incremental.apt=true</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注増分注釈処理をすることを必要とすることに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インクリメンタルコンパイルを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も有効にする）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは、始めましょう：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">annotationProcessor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構成</font><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">kaptに</font></b><font style="vertical-align: inherit;">変更します</font></font><b><font style="vertical-align: inherit;"></font></b></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.実験的な</font><b><font style="vertical-align: inherit;">増分アノテーション処理</font></b><font style="vertical-align: inherit;">フラグを有効にする</font></font><b><font style="vertical-align: inherit;"></font></b></li>
</ol><br><font style="vertical-align: inherit;"></font><code><b>build.gradle</b></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュールレベルの</font><font style="vertical-align: inherit;">
ファイル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">開き</font><font style="vertical-align: inherit;">、次の行をファイルの先頭に追加します。</font></font><br>
<br>
<code>apply plugin: 'kotlin-kapt'</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、依存関係セクションのすべてのannotationProcessor構成を変更して、kaptを使用します。</font><font style="vertical-align: inherit;">次に例を示し</font><font style="vertical-align: inherit;">ます。プロジェクトのルートにある</font><b><font style="vertical-align: inherit;">gradle.properties</font></b><font style="vertical-align: inherit;"> 
ファイルを開いて</font><font style="vertical-align: inherit;">、次の行を追加します</font><font style="vertical-align: inherit;">
。ビルドを再度実行してみましょう。</font><font style="vertical-align: inherit;">
まあ、それは私たちがいくつかの進歩を遂げたように見えます。</font></font><br>
<br>
<code>//<br>
annotationProcessor 'com.google.dagger:dagger-compiler:2.9'<br>
//<br>
kapt 'com.google.dagger:dagger-compiler:2.9'</code><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<code>kapt.incremental.apt=true</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/bg/xk/wlbgxkwt2nlgrhbf6a-nxj5_jkw.jpeg"><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステップ＃3：Gradleプロパティ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いよいよ最終段階です。 Gradleプラグインのバージョンを更新するときに遭遇したトリックを覚えていますか？ Gradleの新しいバージョンでは、使用されるメモリのサイズが512 MBに減少していることがわかりました。これは、弱いマシンが大量のメモリを消費しないようにするためです。私は16ギガバイトのRAMを搭載したコンピューターを持っているので、Gradleデーモンに約2〜3ギガを供給する余裕がありますが、数値は異なる場合があります。</font><font style="vertical-align: inherit;">プロジェクトのルートにある</font><b><font style="vertical-align: inherit;">gradle.properties</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ファイルを開き、</font><font style="vertical-align: inherit;">次の行を追加します。要件やコンピュータの仕様に応じてサイズを選択してください。</font><font style="vertical-align: inherit;">
これを行っている間に、プロパティで並列アセンブリとオンデマンドチューニングも有効にします。</font><font style="vertical-align: inherit;">
ファイルの最終バージョンは次のようになります</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<code>org.gradle.jvmargs=-Xmx3072m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code><b>gradle.properties</b></code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="kotlin hljs">org.gradle.jvmargs=-Xmx3072m -XX:MaxPermSize=<span class="hljs-number">512</span>m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-<span class="hljs-number">8</span>
org.gradle.parallel=<span class="hljs-literal">true</span>
org.gradle.configureondemand=<span class="hljs-literal">true</span>
kapt.incremental.apt=<span class="hljs-literal">true</span></code></pre><br>
<br>
<ul>
<li><code>org.gradle.parallel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-このフラグを使用すると、Gradleはプロジェクト内のモジュールを順次ではなく並列にアセンブルできます。</font><font style="vertical-align: inherit;">これは、マルチモジュールプロジェクトでのみ役立ちます。</font></font></li>
<li><code>org.gradle.configureondemand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -このフラグは、プロジェクトに必要なモジュールのみを構成し、それらをすべて収集するわけではありません。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、アセンブリの速度インジケーターが表示されるようになりました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/42/g0/mu/42g0mugmqkhqo2ok7ynl-pqcf3e.jpeg"><br>
<img src="https://habrastorage.org/webt/3h/rb/p8/3hrbp8uyadmxzrzxioj6u6ghob4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それだけです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論のまとめ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、組み立て速度を最適化するためのあらゆる方法を網羅しているわけでは決してありません。</font><font style="vertical-align: inherit;">MultiDexを使用するときにminSdk 21を使用する、ライブラリに事前にインデックスを付ける、PNG圧縮を無効にするなど、この記事で取り上げていない他の多くのものはそれらのほんの一部です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、これらの構成のほとんどは、Androidビルドシステムをより深く理解し、大規模なマルチモジュールプロジェクトで作業した経験が必要です（メリットが最も明白です）。</font><font style="vertical-align: inherit;">上記の手順は、ジュニア開発者でもプロジェクトによって簡単に実装でき、大きなメリットがあります。</font><font style="vertical-align: inherit;">これがビルド速度の向上に役立つことを願っています！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また会いましょう、平安あれ！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja457350/index.html">オシロスコープに暗号化サポートが必要なのはなぜですか？</a></li>
<li><a href="../ja457352/index.html">バイヤーのディスプレイ上の情報表示</a></li>
<li><a href="../ja457354/index.html">パフォーマンステストのデータ難読化</a></li>
<li><a href="../ja457362/index.html">RUVDSからのプロモーション：夏にサーバーを準備する</a></li>
<li><a href="../ja457366/index.html">狂信者、鉄片、または観客-あなたはどのようなゲーマーですか？</a></li>
<li><a href="../ja457378/index.html">id Softwareがコマンダーキーンのテクノロジーに基づいてWolfenstein 3Dを作成した方法</a></li>
<li><a href="../ja457380/index.html">超近代的なOpenGL。パート2</a></li>
<li><a href="../ja457382/index.html">高性能プログラマーの7つの習慣</a></li>
<li><a href="../ja457386/index.html">Linux仮想インターフェースの紹介：トンネル</a></li>
<li><a href="../ja457390/index.html">マダガスカル-コントラストの島</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>