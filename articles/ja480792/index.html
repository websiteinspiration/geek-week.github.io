<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏼 ♋️ 🥕 ギフトエンジニアリング 🌌 👩🏼‍🤝‍👨🏾 👩🏻‍🎓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="窓の外は雨が降っており、12月はカレンダーです。休日の時期が近づいており、贈り物の時期が近づいています。同僚のPavelは新しいラップトップを、ガールフレンドのMashaは海沿いの家を望んでいます。そして、tyzhprogrammerの職業に値する給料にもかかわらず、私たちは無限の可能性の世界に住ん...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ギフトエンジニアリング</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480792/"><img src="https://habrastorage.org/webt/md/lw/ph/mdlwpht7vhixr2jkxrftetb8hv4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
窓の外は雨が降っており、12月はカレンダーです。休日の時期が近づいており、贈り物の時期が近づいています。同僚のPavelは新しいラップトップを、ガールフレンドのMashaは海沿いの家を望んでいます。そして、tyzhprogrammerの職業に値する給料にもかかわらず、私たちは無限の可能性の世界に住んでいません。つまり、私はこれらの人々に彼らが最も望むものを正確に与えることができません（Pashaは私の最高のPavelかもしれませんが、私は知っています、そしてマーシャは大丈夫です）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで「安いプレゼント」の問題が出てきます。</font><font style="vertical-align: inherit;">みんなに高価な贈り物をすることは不可能ですが、チョコレートの箱、ろうそく、または不明瞭な置物をもう1枚も贈りたくありません。</font><font style="vertical-align: inherit;">だからあなたはビジネスと喜びを組み合わせる必要があります-私は自分の手で物事を行うのが好きで、結果は贈り物として素晴らしいです。</font><font style="vertical-align: inherit;">これは、もう一度エンジニアのふりをして、いくつかの贈り物を手作りした物語です。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メイントピックから少し逸脱</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本題に直行できないので、遠くから始めます。数年前、ゲーム「ウィッチャー3」がリリースされました。私のガールフレンドは私に遊ぶように勧めました、そして一般的に私は本当にゲームを賞賛しました。次に何をすべきかを決め、ゲームに関連するテーマの何かを彼女に与えました...私はゲームの説明を深く掘り下げることはありません（Googleはすべての人を助けます）またはあまり思いつかなかったと思いますキーワード「ウィッチャー、エンジニア、ギフト」。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゲームの主人公は「ロシア」の演技で「ローチ」という名前の馬を持ち、ヒーローは時々「移動、ローチ」というフレーズで彼女を追いかけます。 「かき混ぜるゴキブリ」をテーマに機械式のおもちゃを作ることにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、贈り物は完全に役に立たず、愚かで面白いものとして考えられたので、計画は次のとおりでした。</font></font><br>
<br>
<ol>
<li> ,     .</li>
<li>   ,  ,    .</li>
<li> “”   .   ,    ,  ,     ( ),     “- ”.</li>
<li>     ,          .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
材料の選択の主な欠点と切断が順番に行われるという事実は、どの手段曲がった手と、ルールはすぐに自身が感じて作られた「7回測定し、」不遵守のすべての問題ことを、私はプロトタイプを作成する機会を失ったという事実だった：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bq/9h/e2/bq9he2doyiixrvhr47zha5frml0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、それがギャップが大きすぎることによるバックラッシュ機構の詳細の多くは、パーツとシャフトをかなり曲がって接続したという事実を補うのに役立ちました。ここで彼らが言うように、「マイナスマイナスはプラスを与える」とメカニズムは全体として意図したとおりに機能しました</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cn/x2/gf/cnx2gfjjm2rasl3jtcd3oah-ors.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/x9/uf/fex9ufxoprduhzobingucsoinm4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すると中身の動きを観察できるように箱を透明にする必要があると言う人もいますが、実は最初は機構全体と箱をきれいに綺麗に組み立てて傷つけないように組み立てられないと思っていましたボックスの透明な壁に目を通します。</font><font style="vertical-align: inherit;">したがって、不透明なボックスが必要な手段です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それを詰めるだけで、箱に蝶ネクタイを結び、贈り物の準備が整います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k9/47/k_/k947k_nkfln04gnb6adkqda9vs4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、実際に2枚の合板を接着した状況でエンジニアのようになりたいと思っていた内側の子供を混乱させないために、「ドローイング」を作成することにしました。</font><font style="vertical-align: inherit;">技術的な図面で何かを理解しているすべての人を許してください、なぜなら </font><font style="vertical-align: inherit;">これは実際の絵というよりは絵のパロディだと私は理解していますが、私には思えたので、彼は単純なおもちゃに価値を加えました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/t2/ms/pkt2msf9f2s496bchyrmdi6fs0w.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日私は...</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
運命は時々私たちと遊んで、何かがすぐに起こるはずであるという事実を何らかの形で示唆します。私のデバイスの1つの話はまったく同じように始まります。私は約5ドルの小型の電子機器を注文しました。これはいつものように1か月間外出先で過ごした後、地元の郵便局で荷物が待っているというSMSを受け取りました。箱は私が予想したよりもはるかに大きいことが判明し、すぐにその内容について疑問を投げかけました。疑いが確認されました-内部では、私が注文した小さなものに加えて、対角4.2インチの3色のeインクディスプレイもありました。私は売り手に連絡しました、彼は彼が梱包するとき何かを台無しにしたことを確認しました、しかし私はこれを贈り物と考えて、私が合うと思うようにそれを使うことができると言いました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
運命は私に新しいプロジェクトを始める時が来たとほのめかしました、そしてこのプロジェクトはe-inkディスプレイを備えたものになるでしょう。デバイスの仕様を簡単に理解し、ディスプレイをコントローラーに接続した後、更新時間について仕様が間違っていないことを確認しました。画面が10秒を超えて更新され、点滅して私にてんかん発作を起こさせようとした：（</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ni/w1/h5/niw1h5wpnfczyud_2593yvxq-mg.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はディスプレイを接続した初期の写真がないので、デバイスはすでにより意味のある外観を持っています）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
複雑なアニメーションを必要としないシンプルなデバイスが必要であることが明らかになりました（そしてアニメーション全般）。そして気分カレンダーに出くわした：</font></font><br>
<img src="https://habrastorage.org/webt/zm/a0/dg/zma0dglgpkea9lkxbnqlndawc-o.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ムードカレンダーは、シンプルな写真とそれらへの皮肉な署名のセットです。 「今日は私」という名前のカレンダー（実際にはまったくカレンダーではない）を作成することにしました...今日の「心の状態」を特徴付ける画像とその説明を毎日表示するシンプルなデバイスになります。さらに、カレンダーは他のいくつかの機能を持つことができますが、メインカレンダーはまさに「カレンダー」-毎日の独自の画像になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
電子ペーパーモジュールでは、3つの色（黒、赤、白）を表示でき、2つの画像（黒と白、赤と白）のように、モジュールに送信する必要があります。実際、画面はモノクロのビットマップを期待するだけであり、各ビットが1ピクセルの色を決定すると言う方が正しいでしょう（この用語が電子ペーパーに適用できるかどうかはわかりませんが、考え方が明確であることを願っています）。黒または赤のチャネルに個別のビットマップを設定できます。したがって、1に設定された各ビットがカラーピクセルに対応するバイトのセットがあり、0のままであるすべてのビットは画面上の白いピクセルになります。画面の解像度は400 x 300ピクセルです。白黒画像の場合、15,000バイトが必要です（8ピクセルは1バイトでエンコードされます）。 3色の場合、30,000バイトかかります。もっとコンパクトに詰めようとしないなら実装の観点から、ディスプレイの作成者はピクセルあたり2ビットを選択し、実際の状態（どこが赤、どこが黒、どこが白）を保存することもできますが、これには同じ30,000バイトが必要ですが、モノクロ画像でも30,000バイトの転送が必要になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の「工芸品」と同じように、すべてが「配線のプラグインとライブラリのダウンロード」にならないように、自分用のタスクを発明し始めました。コントローラー側で何らかの画像圧縮アルゴリズムを実装する機能を考慮に入れても、画像ファイル用の外部ストレージがないと、コントローラーが非常に落ち込んでしまうことが明らかになりました。 SDカードを使用して、FAT32を操作するための簡単なコードラッパーを作成することが決定されました。もちろん、ファイルシステムなしでデータを直接メモリカードに書き込むことも可能ですが、新しいファイルを追加するのはあまり便利ではないように思え、FAT32を操作するための基本的な操作を自分の手で実装するのは興味深いことでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなことをするとき、私は自分で物事を書く習慣があることを明確にすることが重要です（ライブラリの海があることは知らせないでください。私はそれについて、そしてGoogleについて知っています）。それ以前は、FAT32を低レベルで使用する喜びがなかったので、かなり面白いプロセスでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
FAT32とSDカード全体の操作の詳細については触れません。インターネットにはこのトピックに関する記事がたくさんあります（そして、私の話を仕様の改定に変えたくありません）が、実装する必要があるいくつかのことについて話します。ファイルの読み取りとファイルへの書き込みの機能（いくつかの設定と状態を同じSDカードに保存し、EEPROMには保存しないことにしました）だけでなく、ファイルシステムでファイルを検索する機能も実装する必要があります。通常の方法で。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メモリカード上のすべてのデータはクラスター（FAT32ファイルシステムのメインアドレス指定可能ユニット）に分割され、クラスターは既にセクターに分割されています。</font><font style="vertical-align: inherit;">FAT32のSDカードから「habr.txt」ファイルを読み取るには、次のものが必要です。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリーカードを初期化します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゼロアドレスのセクターを読み取り、FAT32ファイルシステムに特定のヘッダーがあることを確認します（運が良ければこの手順をスキップできます）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アドレス0のセクターを読み取り、「論理ブロックアドレス指定」（LBA）を取得します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受信したアドレス（LBA）のセクターを読み取り、そこから必要なデータを取得します（ルートであるクラスター-ルートディレクトリ、クラスター内のセクター数など）。</font></font></li>
<li> “Root Directory”  (     ,     ,    )   .          .     ,       .        :      ,    ,       (   ),    ,     .      ,  ,      (    ,      ),    .        ,         .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見つかったアドレスのクラスターを読み取ります。</font><font style="vertical-align: inherit;">さらにクラスターをさらに読み取り、すべてのデータが読み取られるまで次のクラスターを探します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リンクドリストを少なくとも1回実装した人にファイルシステムの原則を伝える方が簡単なようです。</font><font style="vertical-align: inherit;">実際、FAT32ファイルシステムは一連のデータブロックであり、次のデータブロックの検索場所を示す一種のテーブルです。</font><font style="vertical-align: inherit;">FAT32からのデータの読み取りは、データの読み取り、次のブロックのアドレスの検索、データの読み取り、次のブロックのアドレスの検索などのプロセスです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能なシナリオをすべて実装するのではなく、いくつかを簡略化しました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのファイルはメモリカードのルートにあり、ディレクトリの参照は使用されません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのファイルには短い名前が付いています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">起動時にコントローラはファイルのリストを読み取り、それらをメモリに格納して、各ファイルを再度検索しないようにします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルの最大数は定数によって制限されています（実際、私が描いた画像は数ダースしかありません）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要するに、上記のすべてが既製のライブラリを採用し、ドキュメントの読み取り、開発、デバッグに多くの時間を費やさないことの説得力のある理由です。</font><font style="vertical-align: inherit;">私はそのようなことを、教育目的のためだけに、または「楽しみのために」実装するようにアドバイスします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディスプレイには、次のようないくつかの制限もあります。</font><font style="vertical-align: inherit;">その上の画像はこのように表示されます：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスプレイを起動して初期化します（その寿命を延ばし、エネルギーを節約するために、ディスプレイは基本的にスリープします）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要なチャネル（たとえば、黒）を公開します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15000バイトの画像を転送します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要なチャネル（たとえば、赤）を公開します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15000バイトの画像を転送します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バッファからデータを描画するようディスプレイに指示します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスプレイの描画が完了するまで待ちます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスプレイをスリープさせる。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モノクロ画像の場合は、手順4と5をスキップできます。3色画像の場合、白黒画像と赤白画像の送信順序は重要ではありません。</font><font style="vertical-align: inherit;">赤は常に黒の上に描かれ、黒は白の上にのみ描かれ、ピクセルだけが白のままで、白と黒と白と赤と白です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単純にするために（ファイルの総数を増加させないように）、白黒と赤と白の画像を1つのファイルとして保存することにしました。赤と白は白黒の画像のすぐ後に続きます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qo/p-/4j/qop-4jlidhtf82tthoxxspebl2o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの画像を比較した結果は次のようなものでした（私にはそのように思われます）私たち一人一人が私たちの生活の中で少なくとも一度は角のある鹿のように感じました-足）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7o/tb/cs/7otbcsv6yqjrqivfjutep87b1am.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、2つの画像の後に、状態の説明を含む別の画像が続きました（ボタンをクリックすると、今日表示されている画像と一致する説明を取得できます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントローラのメモリは限られているため、メモリカードからのデータがコントローラのメモリに完全に読み込まれることはありません。</font><font style="vertical-align: inherit;">メモリカードからのイメージは、セクターのサイズによって決定されるフラグメントで読み取られ（簡単にするために、このサイズは常に静的であり、カードごとに変更できないと想定しています）、カードからのデータを処理するプロセスに分類されます。</font><font style="vertical-align: inherit;">私の実装では、ファイルを読み取る関数は、クラスター番号、ファイルサイズ、および各読み取りセクターごとに「プル」されるコールバックを入力として受け取ります。</font><font style="vertical-align: inherit;">このアプローチにより、画像自体またはその説明を読み取り、表示するために、ファイル処理のいくつかの異なる機能を使用することができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、次のロジックは、メモリカードから画像を読み取るコールバック関数に当てはまります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディスプレイにデータを送信する前に、必要なチャネルを設定します（チャネルはランダムに決定されます）。</font></font></li>
<li>   ,   ,       .</li>
<li> ,   .</li>
<li>,         (  )  .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
画面に表示するよりも多くのデータを含む画像を入力することにしたため、複雑でした。それら。背景で常に静的で画面のサイズに対応する画像がいくつかあります。ランダムな領域（画面のサイズ）を取得して表示する必要のある、はるかに大きな画像があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような画像は、ハンドラーに追加の要件を課しました-画面の現在の行から転送されたバイト数、次の呼び出しで追加する必要があるバイト数（行がセクターサイズの境界にある場合）、およびスキップするバイト数を計算する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
視覚的には、この状況は次のように示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/22/iy/sr/22iysrbf7x-8n4ptpq4mtbq6kjc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なサイズ（緑色のセクション）の「ウィンドウ」がある特定のバッファがあり、このウィンドウからデータを読み取るだけで、Nバイトのフラグメントでバッファからデータを読み取ることができます。このような読み取りプロセスを次のように視覚化することができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cp/me/qo/cpmeqoznzfnhkflphfxdhscxhq0.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、画面を操作するロジックを、常に512バイトのバッファーを受信し、これらの512バイトのどれが必要かを判断する必要がある（何かが必要な場合）関数に追加すると、解決するのがそれほど簡単ではないことが判明しました。 "正面から"。より正確には、タスクは日常のソリューションと比較して非標準ほど複雑ではなかったため、驚くべきことに、それを解決することは非常に興味深いことでした。私にとっては、「オリンピックタスク」のようなもので、2つのスプーン（各スプーンに1つのスプーン）を使用して、あるバケットから別のバケットに水を転送するために筋肉を収縮させるために必要な電力量を計算する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで問題が何であるかをよりよく理解するために、ここでは別のアニメーションを追加します。ファイル全体ではなく、クラスターのコンテンツの「観点から」のみです（他のすべての情報は個別に保存する必要があります）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/vk/zg/bavkzgmfovjycovxj1uasy7kwae.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
予定どおり、カレンダーには毎日新しい画像が表示されます。</font><font style="vertical-align: inherit;">時間を監視できる必要があります（オフの場合でも）。つまり、リアルタイムクロックモジュール（RTC）も必要です。</font><font style="vertical-align: inherit;">そして、私のコントローラーにはリアルタイムクロックが組み込まれているにもかかわらず、そのためのバッテリーを購入することはほとんど不可能です。</font><font style="vertical-align: inherit;">接点はボードに配線されていません。</font><font style="vertical-align: inherit;">コントローラーの脚にはんだ付けしようとして強姦しないことにし、中国の外部RTCを採用しました。</font><font style="vertical-align: inherit;">RTCでの作業は完全に単純であるはずです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オンにすると、中国のRTCから時刻を取得します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部RTCで時刻を設定します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部RTCを使用して時間を計算し、次のシャットダウンまでの中国人のことを忘れます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、コントローラーの内部RTCは通常の形式（UNIXタイムスタンプ）で時間を処理し、中国の友人は2進化10進数（BCD）を使用するため、ここではすべてがそれほど単純ではないことがわかりました。これ以前は、このフォーマットに出くわしていなかったため、Arduinoの最新のモジュールでも使用されていることに非常に驚いていました。形式の本質は非常に単純です。たとえば、1バイトで、秒数を格納します。最上位4ビットには10​​が格納され、最下位4ビットには単位が格納されます。このバイト自体の16進表記には読み取り可能な時間が含まれていることがわかります。バイト0x49は49秒の値に対応します（10進法では、このバイトは72に対応します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私が理解しているように、それは歴史的に起こったばかりで、RTCをスクリーンエンコーダーと直接使用してクロックを作成する方が簡単でしたが、ペンでBDCをUNIXタイムスタンプに変換する必要がありました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディスプレイ、リアルタイムクロックモジュール、メモリカード、およびそのためのファイルシステムに加えて、これらのすべてのグランドをケースで包む必要がありました。 "ドロー"。私の前回の出版物で遭遇したすべての苦痛についてより詳細に読むことができます、ここではすべてがまったく同じ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f_/6i/jh/f_6ijh7_nag2fpzyjwzkdkapips.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
でし</font><font style="vertical-align: inherit;">た：（</font><font style="vertical-align: inherit;">私は大量生産を計画していませんでした、周りのすべての詳細は不正確な測定または不十分に考えられたソリューション</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の結果です</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">結果として、ケースが引き出され、必要な詳細（画像に表紙はありません）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pg/k9/w-/pgk9w-ajyangtju3ianmi1dm9jo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボタンは、組み立てを簡単にするために別のパーツに配置されました（前回のプロジェクトの時からまだ何かを学んだようです）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lp/c_/i8/lpc_i8kkwazohmmz2ujiynl2lea.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アセンブリ（フロントカバーとバックカバーを除く）デバイスは次のようになります：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ah/yq/un/ahyqun2x2cwbvpn2hk5o59dupbw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ディスプレイはタイでケースに取り付けられています。</font><font style="vertical-align: inherit;">これは、ボルトで固定するよりもはるかに便利な方法であることがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、完璧主義者のためのちょっとした地獄（ワイヤーとコンポーネントのひげ）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tv/kh/pz/tvkhpznwutzclmhqaf_0q1abk_a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アセンブリはそのようなデバイスであることが判明し、私は小さな本を作りました-指示：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cw/s0/y9/cws0y9bk4nre9kwyjwjar2cvsui.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
裏蓋がボルトで固定されており、内部に追加の暴力が必要な場合はデバイスを分解できます</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ec/dj/d6/ecdjd6m9-d85udrkqee-vphi1qe.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい、海辺で家を買うほうが簡単です！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ここまで読んだ人はこう言います。「これは単純な贈り物に代わるものですか？はい、すぐに100500時間を投資する必要があります。これはお金よりもはるかに高価です。私はこのトピックについては議論しませんが、私にとってこれは瞑想的なプロセスであり、1石で2羽の鳥を殺します-一方では、誰もが必要としないことを行います（何かを開発するために私にお金を払うことはほとんどありません）など）、しかし私にとって興味深いことであり、人はユニークなオブジェクトを贈り物として受け取りますが、明白なペイロードはありませんが、笑顔を与えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、多くの時間を必要とするソリューションの後味がないように、もう少し短いストーリーを共有します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今では一般的に、3Dプリンターで物を印刷することが非常にファッショナブルになっています。</font><font style="vertical-align: inherit;">印刷装置ははるかに使いやすくなり、モデルを作成するためのソフトウェアは子供たちが理解できるほど簡単です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">助けを求める</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仕事で、助けが必要ならカモメを叫ぶだけで誰かが間違いなく助けてくれるという冗談を聞きました。実は、それが何に関係しているのか、このジョークがどこから来たのかはわかりませんが、社内通信ではカモメの写真がしばしば現れ始め、誰かが助けを必要としていることをほのめかしています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、オープンタイプのオフィス、および一部の同僚の内部の慎み深さのため、このような支援を求める機会を十分に活用することができませんでした。次に、「エンジニア以外のエンジニア」が救いに来ることを決め、Arduino用の中国の「MP3ミュージックプレーヤーモジュール」、Arduino Nanoの中国のクローン、いくつかのワイヤー、およびカモメの音を録音したmp3をいくつか持ちました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、私はさまざまなモジュールを割引価格で注文する癖があることに注意してください。いつか重宝するかもしれません。または、この電子機器を必要としなかった友人/知人からの贈り物として電子機器を受け取っています。</font><font style="vertical-align: inherit;">したがって、「横たわる」という言葉は偶然ではありませんが、状況を非常に正確に説明しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は3Dモデリングとはかけ離れた人物なので、カモメの頭の既製のモデルを取り、必要な変更を加えただけです。</font><font style="vertical-align: inherit;">つまり、変更から必要でした：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">くちばしをヘッドから分離して、くちばしを別の色で印刷します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての電子機器（スピーカー、プレーヤー、Arduino、およびワイヤー）が配置される「空洞」を作成します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果は次のようになります（くちばしは2つの部分に分かれており、印刷品質が向上しています）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r7/nz/9_/r7nz9_z7qibv9mqtowdvp038dki.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードについて説明しても意味がないと思います。</font><font style="vertical-align: inherit;">プレーヤーを初期化することに加えて、ボタンクリックハンドラーと、カモメの音声録音の1つを再生するだけでした（通常：playSound（rand（）＆3）;）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、カモメをそのままにして、すべてを印刷して収集します。</font><font style="vertical-align: inherit;">その結果、本格的な「ティーシミュレーター」（カモメの色は使用可能なプラスチックによって決まります）があり、USBに接続して、カモメの頭のボタンをクリックすると、「助けを求める」ことが再現されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ec/xg/ts/ecxgtsytg7czrd89196s2bwm8de.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに簡単ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同僚は、彼女がテストを書いている間、彼女は常に気を散らされていたと不平を言いました。</font><font style="vertical-align: inherit;">私たちはインターネット上でメガネの3Dモデルを見つけ、小さな変更を加えています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/zz/jv/kgzzjvkhncuwiektwjpkjqciv54.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、メガネ-目隠しがあります。</font><font style="vertical-align: inherit;">私たちは自分自身に気を取られませんし、他の人たちは私たちがあなたの気をそらしてはならないことを理解しています：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ce/vm/k5/cevmk5j74alm2qbuzodzsk5uplc.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とても簡単です！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、作成するには次のものが必要です。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ベクトルエディターで松葉杖を検索または描画する機能。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3Dエディターで2つのシリンダーを描画する機能。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単な紙を作る能力-ラベル。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3Dプリンター（独自またはカスタムの印刷サービス）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プリンターは普通です。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして今、順番に...松葉杖</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l6/z_/uv/l6z_uvppvank9lg9tnt00clmeeq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を描き</font></font><br>
<br>
<img src="https://habrastorage.org/webt/aa/xi/yd/aaxiydolfoszxdnh8duxmhk3io0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます</font><font style="vertical-align: inherit;">：2つのシリンダーを描き</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">詳細とラベル</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">印刷して、「tyzhprogramistov」への素晴らしいシンプルなギフトを受け取ります：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ux/up/w9/uxupw9tma7hqfuhatlg6n2loies.jpeg"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは何のことですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「運命は私たちと一緒に遊ぶこともあり、何かがすぐに起こることを何らかの形で示唆しています。」</font><font style="vertical-align: inherit;">私の人生の何回かは、自分が実装したいアイデアを持っていますが、何かを待っていました。</font><font style="vertical-align: inherit;">中国から無料の画面が届かない場合、電子的な「カレンダー」は使用しません。つまり、FAT32にさえ対処しなかったので、RTCで使用されているBCD形式については知りませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく誰かがこの話を読んで（または少なくとも写真を見て）、次のように考えます。</font><font style="vertical-align: inherit;">その結果、近くの誰かに喜びをもたらします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
窓の外は雨が降っていて、12月がカレンダーです。</font><font style="vertical-align: inherit;">休日の時期が近づいており、贈り物の時期が近づいています。</font><font style="vertical-align: inherit;">チョコレートの別の箱、キャンドル、置物だけでなく、興味深い贈り物を作って受け取ってください。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja480780/index.html">キューブとピクトグラムからイラストを組み立てる方法</a></li>
<li><a href="../ja480782/index.html">Angularを使い始めたときに知っておきたい5つのこと</a></li>
<li><a href="../ja480786/index.html">JavaScriptでのオブジェクトの独立したディープクローニング</a></li>
<li><a href="../ja480788/index.html">コマンドラインのクリスマスツリー</a></li>
<li><a href="../ja480790/index.html">「プラント効率」。ボトルネックを見つけ、プルシステムを実装して生産性を向上させる</a></li>
<li><a href="../ja480794/index.html">オープンドア検索アルゴリズムの実装の特殊なケースについて少し</a></li>
<li><a href="../ja480796/index.html">シュレディンガーのプログラマー、開発者、猫</a></li>
<li><a href="../ja480798/index.html">C ++ロシアPiter 2019レポートレビュー</a></li>
<li><a href="../ja480800/index.html">ジョブテスターをお探しですか？開発者のスキルを示す準備をする</a></li>
<li><a href="../ja480802/index.html">カオスエンジニアリング、パート3：方法とツール</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>