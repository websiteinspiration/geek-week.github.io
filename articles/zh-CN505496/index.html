<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎋 🏂🏽 👇🏾 首席技术官Meduza Boris Goryachev的Flutter Dev Podcast：Meduz应用程序和媒体开发的主要内容 👩🏽‍🤝‍👨🏿 🚛 🦇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="并非每天都有机会讨论应用程序中有超过10万个DAU的Flutter项目。新的Meduza应用程序就是这样一个项目。目前，这是俄罗斯商店中最受欢迎且讨论最多的Flutter应用程序。我们邀请Boris Goryachev参加Flutter Dev Podcast，以了解为何团队决定将本地人留给跨平台并...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>首席技术官Meduza Boris Goryachev的Flutter Dev Podcast：Meduz应用程序和媒体开发的主要内容</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/surfstudio/blog/505496/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并非每天都有机会讨论应用程序中有超过10万个DAU的Flutter项目。新的Meduza应用程序就是这样一个项目。目前，这是俄罗斯商店中最受欢迎且讨论最多的Flutter应用程序。我们邀请Boris Goryachev参加</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flutter Dev Podcast，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以了解为何团队决定将本地人留给跨平台并选择Flutter。下面我们收集了最有趣的内容：尝试与本机Web交朋友，首次体验跨平台，媒体开发功能，字体游戏以及使用WebView /后端驱动UI的困难。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rc/-0/ub/rc-0ub1iuwx3vtwozistgp0qbow.png"><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“想法，站点，两个应用程序</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">”</font></b><font style="vertical-align: inherit;">最初，在2014年推出Meduza时，团队依靠便捷的移动应用程序，使网站尽可能简单。后来发现，当时的观众还没有准备好在网络上放弃新闻。该应用程序吸引了很多听众，但绝对数量上不如Web（移动网站和台式机）。因此，决定改善现场的技术设备。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“听众Meduza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">”</font></b><font style="vertical-align: inherit;">在内部指标中，Meduza清楚地区分了网站的移动用户和桌面用户，以及应用程序用户。后者是最少的，但它们的活动明显高于所有其他类别。这是Meduza观众的核心。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该应用程序的第一个版本是什么？”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 Meduza在短短几个月内就开始了。赌注是从浏览器下载的精美内容。创建媒体应用程序的原理对于每个人都是相同的：本地完成主页面和其他分发页面。当人们点击材料时，将打开一个WebView，其中显示了各种HTML，CSS和其他模块。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“开发方法是否随着时间而改变？”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。不，其机制保持不变：首先是本机视图，然后用户在WebView中“失败”，在WebView中，它从浏览器滚动内容。这种方法有其缺点。当内容由浏览器控制时，您必须特别注意本机代码和Web表单之间的通信。例如，绘制某种本机组件，该组件将以漂亮的效果出现并跟随用户。在这支球队中充满了许多锥体。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“与本地人进行网络交互时存在什么问题”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 Web开发人员和本机开发人员使用不同的语言。在开发过程中，存在序列化，反序列化，Java崩溃的问题，因为出现了错误的对象，错误的结构等。根据滚动位置，嵌入元素也存在困难。例如，一个WebView的高度受到限制，该WebView应该与一个本机集成在一起。您必须使用将自身滚动的元素进行合成，然后截取另一滚动，依此类推。</font></font><br>
<blockquote>         ,    .   : ,  ,   - ,      ,        . ,    -       Java, Kotlin  ..           </blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“本机呈现Meduza内容就像重复浏览器以使其正常工作一样。绝非易事</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">”</font></b><font style="vertical-align: inherit;">该团队设法将一些材料转移到本地渲染中。例如，在“在线”类别中，素材由编辑者实时填写：发送信息后，信息立即显示在阅读器的屏幕上。我们都是在本地人上做的。例如，客户端接收不同格式的动态数据。客户必须正确处理它们，并且不能摔倒。所有细微差别的协调都存在很多问题-必须决定如何继续进行。</font></font><br>
<blockquote>  , ,     —    .   ,      .  : «,     ».   2-       ,           .</blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“第一个跨平台体验-React Native</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">”</font></b><font style="vertical-align: inherit;"> Meduza的整个前端都是用React编写的。鲍里斯在几周内用React Native编写了他的第一个移动原型。原型工作得很好：显示，渲染，强加样式等。当在React Native上开始全面开发应用程序时，出现了新的问题。例如，Android上的JavaScript不能像iOS上的那样工作。有有效的JavaScript，它不会发誓，但是您打开并看到空白，问题出在JSX中。映射到容器或文本中的标签也存在问题，但以某种棘手的方式关闭。刚开始，似乎有机会在此之后修复所有错误。但是，更远的地方，更多的发展绊倒了。</font></font><br>
<blockquote> ,      2 ,   ,      .   ,      . 2    —   .</blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“他们于2018年在Google I / O上了解了Flutter，但决定推迟</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">” </font></b><font style="vertical-align: inherit;">我们与安德鲁·布罗格丹（Flutter）进行了交谈。</font><font style="vertical-align: inherit;">Meduza需要API的后端驱动架构来决定UI中会发生什么。</font><font style="vertical-align: inherit;">关键是拥有一个集成到小部件树中的WebView。</font><font style="vertical-align: inherit;">媒体应用程序需要向用户显示社交视频。</font><font style="vertical-align: inherit;">网络和YouTube。</font><font style="vertical-align: inherit;">不幸的是，当时Flutter没有WebView支持，因此跨平台被搁置了。</font><font style="vertical-align: inherit;">本机应用程序在没有支持的情况下已经存在了将近两年。</font><font style="vertical-align: inherit;">在这段时间里，后端有许多不同的编辑，但是应用程序或多或少地稳定运行。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您好，我是技术总监：“我们有两个供人们使用的应用程序吗？</font><font style="vertical-align: inherit;">好吧，他们将没有支持。” </font><font style="vertical-align: inherit;">最终，他们在没有支持的情况下生活了将近2年，但却使用了它们。</font></font></blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“在2018年12月，Google将WebView库添加到Flutter，并且开始开发新的Meduza应用程序</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">”</font></b><font style="vertical-align: inherit;">只花了将近一年的时间，因为该团队几次重新发明了整个应用程序。屏幕，概念改变，进行了实验。 Flutter使您可以快速创建界面，并且由于热重载，设计人员可以快速评论更改并进行编辑和许多编辑。总共，应用程序代码和后端花费了不超过6个月的时间。同时，鲍里斯（Boris）并未完全专注于Flutter，但由于其他项目的开发和启动而分心。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">媒体是人类活动的一种，凡事不断出错。</font><font style="vertical-align: inherit;">世界上正在不断发生着一些事情：记者被当局拘留，政权正在变化，COVID-19大流行正在开始，等等。</font><font style="vertical-align: inherit;">因此，服务的发展受到阻碍，会议被推迟，创造性受到影响。</font></font></blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“俄罗斯媒体应用发展的特点</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">” </font></b><font style="vertical-align: inherit;">在我们国家，媒体开发人员很少，研讨会上几乎没有同事可以学习并借鉴最佳实践。</font><font style="vertical-align: inherit;">这方面的程序员有不同的看法。</font><font style="vertical-align: inherit;">在普通专家看到纯文本的地方，媒体程序员会注意到段落没有印刷，短减号而不是长破折号，引号是“爪子”而不是“圣诞树”，依此类推。</font><font style="vertical-align: inherit;">这些细节将严肃的出版物与Internet上的随机站点区分开来。</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">媒体上的人们总是“疲倦于议程”。</font><font style="vertical-align: inherit;">在Meduza的所有人可能正负着这个痛苦。</font><font style="vertical-align: inherit;">每天您都沉浸在议程中，这通常不是很愉快。</font><font style="vertical-align: inherit;">并且在这些条件下，发生各种技术问题。</font><font style="vertical-align: inherit;">然后Google更改了索引中的某些内容，Facebook或VKontakte API拒绝了，他们在更改日志中写了有关它的内容。</font></font></blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“在Flutter中微调字体的功能对Meduza非常有用</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">” </font></b><font style="vertical-align: inherit;">长期以来，该出版物一直使用相同的一对字体（Proxima Nova和PF Regal），但是设计师经常对其进行细微改动，这在家里很难支持。</font><font style="vertical-align: inherit;">开发人员不想触摸默认组件，也不想看到许多设备上的更改，依此类推。</font></font><br>
<blockquote>.     .      .  ,           .      ,   CSS     .        ,    .   ,   .</blockquote><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“是否有计划扩展一个团队或一个Flutter开发人员足以编写媒体应用程序</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">”</font></b><font style="vertical-align: inherit;">该框架确实允许您单独编写一个项目。在Meduza的情况下，使用“块API”，即后端决定了UI显示什么。最重要的是，任何Meduza材质都是键入块的数组。作为一个构造器，您可以从中构造段落，但是内部将有一个媒体播放器或其他内容。加号或减号可以在任何配置中显示任何块。整个应用程序都基于此。某一时刻，您可以在应用程序中的任何时候进行替换：通过后端发送其他文本，缩进，颜色等。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“应用程序开发计划：在新格式投入生产之前对其进行优化和支持”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在不久的将来，将优化旧设备的性能和播客。未来-支持后端专门推出新格式。也就是说，您可以进行任何更改和功能，而无需在Flutter端进行更改。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这种情况下，格式是指出版物的类型：新闻，卡片，长期阅读等。所有这些都被编辑积极使用。自从原生以来的主要痛苦是应用程序中对新格式的支持。在旧的Webview中使用的是Web，在某些情况下，编辑器提出了一种很酷的格式，Web上支持它，但应用程序不支持它。我不得不等到用户更新后，才开始在智能手机上向用户显示新资料。为避免这种情况，应用程序应提前进行产品计划和支持尚未投入生产的功能。因此人们将有时间进行更新，并且所有事情都会在同一时间实现加减。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“在Flutter，可以尽可能轻松地启动新功能。”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在Meduza中，过程如下。后端程序员编写API，在电话/模拟器上打开应用程序。然后，他检查所有内容是否匹配，然后继续制作该应用程序。无需编写和自定义新的小部件。这种方案需要权衡性能和代码可读性。当一个组件或块的逻辑变得足够严重时，他们只是用它制作出一个小部件，该块便成为一个新的实体。例如，播客播放器就是这样实现的。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“应用程序的哪一部分在Flutter上呈现，哪一部分通过WebView呈现”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。大多数元素都在Flutter上呈现：容器，文本，版式。例外情况是嵌入元素（Twitter，YouTube，Facebook，TikTok）和完全通过WebView制作的游戏。例如，针对Meduza的测试或带有汽车的自定义游戏等。所有这些都是从头开始的。重要的是要知道，如果WebView的高度高于ViewPort设备，则某些手机上的Android WebView会崩溃。将来，请远离WebView，转而使用“ Flutter-native”，使用JSON数据呈现相同的Twitter。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“您对播客有什么计划，您打算如何改进”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。最初使用audioplayers插件，但后来决定切换到一堆just_audio和audio_service。播放器的流程没有问题，第二个库支持播客所需的通知。例如，您打开要播放的东西，然后在顶部弹出一个模块，您可以在其中点击停止或查找音频等。最困难的事情是使UI与在单独线程中发生的事情同步，并通过窗帘和滑动来实现这一时刻。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“就架构或我们为什么在提供商处停止而言的应用程序”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。为了维持这种结构的运行，需要的动作更少：不需要使全局状态发生变化的无限常量和函数，等等。在所考虑的选项中，提供者的逻辑最接近Meduza。应用程序中有8个，例如，一个负责用户的书签，另一个负责同步阅读历史记录和播客。在它的帮助下，他们可以记住听众停止的位置。因此，他可以返回另一台设备上，并在那里收听播客。另一个提供者负责这些主题，在需要的颜色处进行替换，或者在用户界面中的必要处提供颜色。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“由于什么，该应用程序在Android和iOS上显示出不同的性能和UI呈现”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。第一个问题是初始数据获取，该数据获取是通过提供程序实现的，但未参与Compute。有很多操作：在API中获取数据，选择相当大的JSON，进行处理，将其转换为数据，然后将结果推送到模型中。因此，在应用程序开始时，我们会观察到FPS的减少。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一个问题是广告的集成，由此导致iOS上的FPS下降。在Android上，根本没有广告。在为应用程序选择库时，我们在官方的AdMob停了下来。但是，事实证明，您无法将横幅集成到那里的小部件树中。开发人员不希望在小部件树或全屏广告的顶部使用横幅，因为这将极大地影响读者的忠诚度。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meduza团队求助于Google并进行了Beta测试，该测试已在iOS上测试了所需的广告格式。</font><font style="vertical-align: inherit;">在当前版本中，当为过渡设置动画时，将加载AdMob广告。</font><font style="vertical-align: inherit;">基准测试表明存在性能下降，但并非到处且并非总是如此。</font><font style="vertical-align: inherit;">我们正在等待Flutter团队的修复。</font><font style="vertical-align: inherit;">道德很简单：如果需要从主隔离中删除某些内容，请使用Compute。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果，尽管遇到了种种困难，Flutter完全满足了Meduza团队的期望。</font><font style="vertical-align: inherit;">在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找播客的完整版本，</font><font style="vertical-align: inherit;">并在评论中提出问题！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN505472/index.html">实用的文章：安装OpenShift，学习Kafka，在Google Cloud Platform上使用Ansible</a></li>
<li><a href="../zh-CN505476/index.html">Deno和PostegreSQL上的CRUD API：使用恐龙</a></li>
<li><a href="../zh-CN505478/index.html">用CRM系统替换CRM系统</a></li>
<li><a href="../zh-CN505488/index.html">在React应用程序中实现TypeScript的12个技巧</a></li>
<li><a href="../zh-CN505494/index.html">开发者框架</a></li>
<li><a href="../zh-CN505498/index.html">我们如何解决Windows中未初始化的堆栈内存的问题</a></li>
<li><a href="../zh-CN505502/index.html">客户服务中的全渠道：寻找什么以及如何正确地做所有事情？</a></li>
<li><a href="../zh-CN505506/index.html">他不咬人：如何使工业机器人对工人安全</a></li>
<li><a href="../zh-CN505508/index.html">不仅无人技术：汽车行业的未来</a></li>
<li><a href="../zh-CN505510/index.html">使用Python SDK简化Check Point API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>