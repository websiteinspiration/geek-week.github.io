<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍇 🤴🏽 🧑🏽‍🤝‍🧑🏼 Base para un gran SPA modular en Laravel + Vue + ElementUI con generador CRUD 🤵🏾 🔌 😏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En los últimos años, me las arreglé para trabajar en varios proyectos grandes y no muy grandes utilizando diferentes marcos de back-end y front-end. F...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Base para un gran SPA modular en Laravel + Vue + ElementUI con generador CRUD</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504674/"><img src="https://habrastorage.org/webt/h7/m7/kt/h7m7kt-cpub7kcte0htso38oqio.jpeg" alt="imagen" width="100%"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En los últimos años, me las arreglé para trabajar en varios proyectos grandes y no muy grandes utilizando diferentes marcos de back-end y front-end. Frente a varios problemas que surgieron a medida que la aplicación creció. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora puedo concluir a partir de qué soluciones tuvieron éxito y cuáles no. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Utilizando la experiencia acumulada, me propuse recopilar las mejores soluciones, en mi opinión, y crear mi propia base para SPA.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No diré cómo crear un sitio en Laravel o qué es SPA. </font><font style="vertical-align: inherit;">Hay suficiente información de este tipo en Internet. </font><font style="vertical-align: inherit;">Este artículo está destinado a desarrolladores más o menos experimentados, por lo que extrañaré algunos detalles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quién no puede esperar, al final del artículo hay un enlace a mi repositorio de github. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las tecnologías principales fueron seleccionadas por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laravel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vue.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vuex</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ya que esta es mi pila principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para un desarrollo rápido, tomé el kit de interfaz de usuario: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ElementUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el objetivo principal</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para crear una base para un proyecto mediano y grande que:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ayudará a evitar la cohesión rígida de los módulos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comprensible para un programador con poca experiencia</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ayudar a evitar la duplicación de código</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">será fácil de expandir</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reducir el tiempo de inicio del proyecto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reducir el tiempo de soporte del proyecto y navegación de código</font></font></li>
<li>     </li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hacer la vida lo más fácil posible, para no confundirse en el proyecto, necesita estructurar adecuadamente su ego. Inicialmente, la aplicación debe dividirse en niveles de responsabilidad, tales como interfaz de usuario, base de datos, lógica de negocios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Además, cada capa debe dividirse primero por la funcionalidad, y luego cada módulo funcional debe dividirse de acuerdo con el patrón seleccionado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inspirado por la filosofía DDD, decidí dividir el front-end y el back-end en módulos semánticos. Pero estos no son los dominios clásicos que describe Evans. Su modelo tampoco es perfecto. En cualquier aplicación, con el tiempo, siempre aparecen relaciones entre componentes, las mismas relaciones entre modelos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dejó los modelos como una capa separada, porque parecían duplicar la base de datos, con todas sus conexiones. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Creó un directorio al frente</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resources / js / modules</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en el que se ubicarán los diferentes módulos. Cada uno tendrá </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">api</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - métodos para trabajar con el back-end, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">componentes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - todos los componentes y páginas, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">almacenamiento</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - almacenamiento y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rutas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<pre><code class="bash hljs">{moduleName}/<font></font>
│<font></font>
├── routes.js<font></font>
│<font></font>
├── api/<font></font>
│   └── index.js<font></font>
│<font></font>
├── components/<font></font>
│   ├── {ModuleName}List.vue<font></font>
│   ├── {ModuleName}View.vue<font></font>
│   └── {ModuleName}Form.vue<font></font>
│<font></font>
└── store/<font></font>
    ├── store.js<font></font>
    ├── types.js<font></font>
    └── actions.js<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resources / js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se crea la carpeta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">principal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , donde se encuentran los componentes principales del sistema. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
También hay bootstrap e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incluye</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> carpetas </font><font style="vertical-align: inherit;">para configurar bibliotecas y utilidades adicionales, respectivamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proyecto utiliza la carga dinámica de modelos. </font><font style="vertical-align: inherit;">Es decir, en el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">núcleo / rutas</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y en el </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">núcleo / estados,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cargamos los archivos de enrutamiento y almacenamiento correspondientes automáticamente (no es necesario registrar nada). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí hay un ejemplo de cómo se </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cargaron</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> store.js </font><font style="vertical-align: inherit;">desde diferentes módulos automáticamente.</font></font><br>
 <br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Load store modules dynamically.</span>
<span class="hljs-keyword">const</span> requireContext = <span class="hljs-built_in">require</span>.context(<span class="hljs-string">'../../modules'</span>, <span class="hljs-literal">true</span>, /store\.js$/) <font></font>
 <font></font>
<span class="hljs-keyword">let</span> modules = requireContext.keys() <font></font>
    .map(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> 
        [file.replace(<span class="hljs-regexp">/(^.\/)|(\.js$)/g</span>, <span class="hljs-string">''</span>), requireContext(file)] <font></font>
    )<font></font>
    .reduce(<span class="hljs-function">(<span class="hljs-params">modules, [path, <span class="hljs-built_in">module</span>]</span>) =&gt;</span> { 
        <span class="hljs-keyword">let</span> name = path.split(<span class="hljs-string">'/'</span>)[<span class="hljs-number">0</span>] 
        <span class="hljs-keyword">return</span> { ...modules, [name]: <span class="hljs-built_in">module</span>.store } <font></font>
    }, {})<font></font>
 <font></font>
modules = {...modules, core} <font></font>
 <font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.Store({<font></font>
    modules<font></font>
})<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el backend en el directorio de la aplicación habrá módulos similares. </font><font style="vertical-align: inherit;">Cada módulo contendrá carpetas </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controladores, Solicitudes, Recursos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El archivo con rutas también se ha movido aquí: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">routes_api.php</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
 <br>
<pre><code class="bash hljs">{ModuleName}/<font></font>
│<font></font>
├── routes_api.php<font></font>
│<font></font>
├── Controllers/<font></font>
│   └──{ModuleName}Controller.php<font></font>
│<font></font>
├── Requests/<font></font>
│   └──{ModuleName}Request.php<font></font>
│<font></font>
└── Resources/<font></font>
    └── {ModuleName}Resource.php<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otros patrones de diseño como eventos, trabajos, políticas, etc. no se incluirán en los módulos, ya que se usan con menos frecuencia y es más lógico mantenerlos en una capa separada. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todas las manipulaciones con la carga dinámica de los módulos se realizan de modo que el compromiso mínimo late entre ellos. Esto le permite agregar y quitar módulos sin consecuencias. Ahora puede hacer que el comando artesanal cree un módulo de este tipo. Con su ayuda, podemos llenar rápidamente el proyecto con las entidades necesarias junto con la funcionalidad CRUD. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez ejecutado el comando </font></font><code>php artisan make:module {ModuleName}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tendremos todos los archivos necesarios, incluidos el modelo y las migraciones, para que funcione el CRUD completo. Solo tienes que completar la migración</font></font><code>php artisan migrate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y todo funcionará Lo más probable es que necesite agregar campos adicionales, así que antes de la migración, no olvide agregarlos al modelo, la migración y también la salida a vue.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0qKNlrmhgNg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta plantilla, se usó la tecnología </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JWT-Auth</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para la autenticación </font><font style="vertical-align: inherit;">, pero puede ser redundante y debe rehacerse para Laravel Sanctum. </font><font style="vertical-align: inherit;">A su vez, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vue-auth se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usa en el front-end </font><font style="vertical-align: inherit;">, facilita la administración de la autorización y los roles del usuario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el futuro, me gustaría mejorar el sistema. </font><font style="vertical-align: inherit;">Agregue un bus de eventos global, conecte websockets. </font><font style="vertical-align: inherit;">Añadir pruebas. </font><font style="vertical-align: inherit;">Es posible crear una opción de gestión de roles en sucursales separadas o crear sucursales con otro kit de interfaz de usuario. </font><font style="vertical-align: inherit;">Sería bueno escuchar recomendaciones, comentarios. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, esta plantilla fue desarrollada para sus necesidades, pero ahora espero que sea útil para otros usuarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo el código se puede ver en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mi repositorio github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es504664/index.html">Adición inteligente de grupos musicales a Google Sheets a través de VK API, Tampermonkey y Telegram bot</a></li>
<li><a href="../es504666/index.html">DEVOXX Reino Unido. Kubernetes en producción: implementación azul / verde, autoescalado y automatización de implementación. Parte 1</a></li>
<li><a href="../es504668/index.html">El resumen de materiales interesantes para el desarrollador móvil # 346 (25 al 31 de mayo)</a></li>
<li><a href="../es504670/index.html">ЕГЭ по информатике или страдания длиною в года</a></li>
<li><a href="../es504672/index.html">DEVOXX Reino Unido. Kubernetes en producción: implementación azul / verde, autoescalado y automatización de implementación. Parte 2</a></li>
<li><a href="../es504676/index.html">Agrega una pizca de aleatoriedad a tu juego</a></li>
<li><a href="../es504678/index.html">ITMO Research_ podcast: cómo abordar la sincronización del contenido AR con el espectáculo a escala de todo el estadio</a></li>
<li><a href="../es504680/index.html">Descripción general de la biblioteca NLP de SpaL</a></li>
<li><a href="../es504682/index.html">Mensaje de Nostalgia: j2me, Gravity Defied, 64kb</a></li>
<li><a href="../es504686/index.html">Como dibujar un gato</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>