<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë® üëù ‚òïÔ∏è Interaction de SwiftUI avec Redux üòñ üêú üéπ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. Dans cet article, nous parlerons du cadre SwiftUI en collaboration avec Redux, ce bundle nous permet de cr√©er rapidement et facilement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Interaction de SwiftUI avec Redux</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500158/"><img src="https://habrastorage.org/webt/0a/1b/6r/0a1b6rckxwuh5wqlxbsyqygrf94.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonjour √† tous. Dans cet article, nous parlerons du cadre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SwiftUI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en collaboration avec Redux, ce bundle nous permet de cr√©er rapidement et facilement des applications. SwiftUI est utilis√© pour cr√©er une interface utilisateur de style d√©claratif, contrairement √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIKit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Redux, √† son tour, sert √† contr√¥ler l'√©tat de l'application. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'√âtat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un concept fondamental dans SwiftUI et Redux. Dans notre cas, ce n'est pas seulement un mot √† la mode, mais aussi une entit√© qui les relie et leur permet de tr√®s bien travailler ensemble. Dans cet article, je vais essayer de montrer que la th√®se ci-dessus est vraie, alors commen√ßons! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de plonger dans l'√©criture de code, comprenons d'abord ce qu'est Redux et en quoi il consiste.</font></font><br>
<a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une biblioth√®que open source pour g√©rer l'√©tat d'une application. </font><font style="vertical-align: inherit;">Le plus souvent utilis√© en conjonction avec React ou Angular pour d√©velopper le c√¥t√© client. </font><font style="vertical-align: inherit;">Contient un certain nombre d'outils pour simplifier consid√©rablement le transfert des donn√©es de stockage √† travers le contexte. </font><font style="vertical-align: inherit;">Cr√©ateurs: Daniil Abramov et Andrew Clark. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour moi, Redux n'est pas seulement une biblioth√®que, c'est d√©j√† quelque chose de plus, je l'attribue aux d√©cisions architecturales sur lesquelles se base l'application. </font><font style="vertical-align: inherit;">Principalement en raison de son flux de donn√©es unidirectionnel.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flux multidirectionnel ou unidirectionnel</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour expliquer ce que j'entends par flux de donn√©es, je vais donner l'exemple suivant. Une application cr√©√©e √† l'aide de VIPER prend en charge un flux de donn√©es multidirectionnel entre les modules: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/a6/1h/3j/a61h3juugoawz8ij3xt_mot6brm.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redux, √† son tour, est un flux de donn√©es unidirectionnel et est plus facile √† expliquer en fonction de ses composants. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/yc/hl/hmychlrpj6tbe0loeykh5wax8hk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parlons un peu en d√©tail de chaque composant Redux. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'√âtat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est la seule source de v√©rit√© qui contient toutes les informations n√©cessaires √† notre application. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est l'intention de changer d'√©tat. Dans notre cas, il s'agit d'une √©num√©ration qui contient de nouvelles informations que nous voulons ajouter ou modifier dans l'√©tat actuel. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©ducteur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est une fonction qui prend Action et l'√©tat actuel comme param√®tres et renvoie un nouvel √©tat. </font><font style="vertical-align: inherit;">C'est le seul moyen de le cr√©er. </font><font style="vertical-align: inherit;">Il convient √©galement de noter que cette fonctionnalit√© doit √™tre propre. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un objet qui contient State et fournit tous les outils n√©cessaires pour le mettre √† jour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je crois que la th√©orie est suffisante, passons √† la pratique.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impl√©mentation de Redux</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'une des fa√ßons les plus simples d'apprendre √† conna√Ætre un outil est de commencer √† l'utiliser, comme l'a dit mon professeur de programmation, si vous voulez apprendre un langage de programmation, √©crivez une application dessus. Cr√©ons donc une petite application, que ce soit un simple journal d'entra√Ænement, il n'aura que quatre options, la premi√®re consiste √† afficher une liste des entra√Ænements, la seconde consiste √† ajouter une s√©ance d'entra√Ænement termin√©e, la troisi√®me √† supprimer et la quatri√®me √† trier les s√©ances d'entra√Ænement. Application assez simple, mais en m√™me temps nous permettra de nous familiariser avec Redux et SwiftUI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ez un projet propre dans Xcode, donnez-lui le nom WorkoutsDiary et, surtout, s√©lectionnez SwiftUI pour l'interface utilisateur, car nous utiliserons SwiftUI pour cr√©er notre interface utilisateur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s avoir cr√©√© le projet. </font><font style="vertical-align: inherit;">Cr√©ez une structure d'entra√Ænement qui sera responsable de l'entra√Ænement que nous avons termin√©.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Workout</span>: <span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">UUID</span> = .<span class="hljs-keyword">init</span>()
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> <span class="hljs-built_in">distance</span>: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> date: <span class="hljs-type">Date</span>
    <span class="hljs-keyword">let</span> complexity: <span class="hljs-type">Complexity</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, cette structure n'a rien de fou, le champ id est requis pour se conformer au protocole identifiable, et le champ de complexit√© est juste une √©num√©ration avec la d√©finition suivante:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Complexity</span>: <span class="hljs-title">Int</span> </span>{
    <span class="hljs-keyword">case</span> low
    <span class="hljs-keyword">case</span> medium
    <span class="hljs-keyword">case</span> high<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant que nous avons tout ce dont nous avons besoin pour commencer √† impl√©menter Redux, commen√ßons par cr√©er un √©tat.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AppState</span> </span>{
    <span class="hljs-keyword">var</span> workouts: [<span class="hljs-type">Workout</span>]
    <span class="hljs-keyword">var</span> sortType: <span class="hljs-type">SortType?</span><font></font>
}<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une structure simple qui contient deux champs: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">workouts</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sortType</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le premier est une liste d'entra√Ænements et le second est un champ facultatif qui d√©termine comment la liste est tri√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SortType est une √©num√©ration d√©finie comme suit:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">SortType</span> </span>{
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">distance</span>
    <span class="hljs-keyword">case</span> complexity<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par souci de simplicit√©, nous allons trier par distance et difficult√© en ordre d√©croissant, c'est-√†-dire que plus la complexit√© de notre entra√Ænement est √©lev√©e, plus elle sera affich√©e dans notre liste. </font><font style="vertical-align: inherit;">Il convient de noter que sortType est un type facultatif et qu'il peut √™tre nul, ce qui signifie que la liste n'est pas tri√©e pour le moment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous poursuivrons la mise en ≈ìuvre de nos composants. </font><font style="vertical-align: inherit;">Cr√©ons une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></b><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Action</span> </span>{
    <span class="hljs-keyword">case</span> addWorkout(<span class="hljs-number">_</span> workout: <span class="hljs-type">Workout</span>)
    <span class="hljs-keyword">case</span> removeWorkout(at: <span class="hljs-type">IndexSet</span>)
    <span class="hljs-keyword">case</span> <span class="hljs-built_in">sort</span>(by: <span class="hljs-type">SortType</span>)<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme nous pouvons le voir, l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une √©num√©ration avec trois cas qui nous donnent la capacit√© de manipuler notre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âtat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">addWorkout (_ workout: Workout)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ajoute simplement un entra√Ænement qui est pass√© en param√®tre.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">removeWorkout (at: IndexSet)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> supprime l'√©l√©ment √† l'index sp√©cifi√©.</font></font></li>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sort (by: SortType)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trie la liste de formation selon le type de tri sp√©cifi√©.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ons l'un des composants les plus complexes, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voici Reducer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reducer</span><span class="hljs-params">(state: AppState, action: Action)</span></span> -&gt; <span class="hljs-type">AppState</span> {
    <span class="hljs-keyword">var</span> state = state<font></font>
    <font></font>
    <span class="hljs-keyword">switch</span> action {
    <span class="hljs-keyword">case</span> .addWorkout(<span class="hljs-keyword">let</span> workout):<font></font>
        state.workouts.append(workout)<font></font>
        <font></font>
    <span class="hljs-keyword">case</span> .removeWorkout(<span class="hljs-keyword">let</span> indexSet):<font></font>
        state.workouts.remove(atOffsets: indexSet)<font></font>
    <font></font>
    <span class="hljs-keyword">case</span> .<span class="hljs-built_in">sort</span>(<span class="hljs-keyword">let</span> type):
        <span class="hljs-keyword">switch</span> type {
        <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.<span class="hljs-built_in">distance</span> &gt; $<span class="hljs-number">1</span>.<span class="hljs-built_in">distance</span> }<font></font>
            state.sortType = .<span class="hljs-built_in">distance</span>
        <span class="hljs-keyword">case</span> .complexity:<font></font>
            state.workouts.<span class="hljs-built_in">sort</span> { $<span class="hljs-number">0</span>.complexity.rawValue &gt; $<span class="hljs-number">1</span>.complexity.rawValue }<font></font>
            state.sortType = .complexity<font></font>
        }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> state<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fonction que nous avons √©crite est assez simple et fonctionne comme suit:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copie l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©tat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> actuel </font><font style="vertical-align: inherit;">pour travailler avec lui.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur la base de l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous mettons √† jour notre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©tat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> copi√© </font><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renvoyer l' </font><b><font style="vertical-align: inherit;">√©tat</font></b><font style="vertical-align: inherit;"> mis √† jour</font></font><b><font style="vertical-align: inherit;"></font></b></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que la fonction ci-dessus est une fonction pure, et c'est ce que nous voulions r√©aliser! </font><font style="vertical-align: inherit;">Une fonction doit remplir deux conditions pour √™tre consid√©r√©e comme ¬´pure¬ª:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä chaque fois, la fonction renvoie le m√™me r√©sultat lorsqu'elle est appel√©e avec le m√™me ensemble de donn√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il n'y a aucun effet secondaire.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le dernier √©l√©ment Redux manquant est le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous allons donc l'impl√©menter pour notre application.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Store</span>: <span class="hljs-title">ObservableObject</span> </span>{<font></font>
     @<span class="hljs-type">Published</span> <span class="hljs-keyword">private</span>(<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> state: <span class="hljs-type">AppState</span><font></font>
     <font></font>
     <span class="hljs-keyword">init</span>(state: <span class="hljs-type">AppState</span> = .<span class="hljs-keyword">init</span>(workouts: [<span class="hljs-type">Workout</span>]())) {
         <span class="hljs-keyword">self</span>.state = state<font></font>
     }<font></font>
     <font></font>
     <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">dispatch</span><span class="hljs-params">(action: Action)</span></span> {<font></font>
         state = reducer(state: state, action: action)<font></font>
     }<font></font>
 }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les impl√©mentations de l'objet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">nous utilisons tous les avantages du protocole </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObservableObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ce qui nous permet d'exclure l'√©criture de beaucoup de code de mod√®le ou l'utilisation de frameworks tiers. La propri√©t√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est en lecture seule et utilise l'encapsuleur de la propri√©t√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Published</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ce qui signifie que chaque fois qu'elle est modifi√©e, SwiftUI recevra des notifications. La m√©thode init prend un √©tat initial en tant que param√®tre avec une valeur par d√©faut donn√©e sous la forme d'un tableau vide d'√©l√©ments d'entra√Ænement. La fonction de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©partition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est le seul moyen de mettre √† jour l'√©tat: elle remplace l'√©tat actuel par le nouveau cr√©√© par la fonction de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©duction</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , bas√© sur</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est pass√©e en param√®tre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant que nous avons impl√©ment√© tous les composants de Redux, nous pouvons commencer √† cr√©er une interface utilisateur pour notre application.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impl√©mentation d'application</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'interface utilisateur de notre application sera assez simple. </font><font style="vertical-align: inherit;">Et il sera compos√© de deux petits √©crans. </font><font style="vertical-align: inherit;">Le premier et principal √©cran est un √©cran qui affichera une liste des s√©ances d'entra√Ænement. </font><font style="vertical-align: inherit;">Le deuxi√®me √©cran est l'√©cran d'ajout d'entra√Ænement. </font><font style="vertical-align: inherit;">De plus, chaque √©l√©ment sera affich√© dans une certaine couleur, la couleur refl√©tera la complexit√© de l'entra√Ænement. </font><font style="vertical-align: inherit;">Les globules rouges indiquent la difficult√© la plus √©lev√©e de l'entra√Ænement, l'orange est responsable de la difficult√© moyenne et le vert est responsable de l'entra√Ænement le plus facile.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons impl√©menter l'interface en utilisant un nouveau framework d'Apple appel√© SwiftUI. SwiftUI vient remplacer notre UIKit familier. SwiftUI est fondamentalement diff√©rent de UIKit, principalement en ce qu'il s'agit d'une approche d√©clarative pour √©crire des √©l√©ments d'interface utilisateur avec du code. Dans cet article, je ne vais pas me plonger dans toutes les subtilit√©s de SwiftUI et je suppose que vous avez d√©j√† de l'exp√©rience avec SwiftUI. Si vous ne connaissez pas SwiftUI, je vous conseille de faire attention √† la documentation d'Apple, √† savoir, regardez leurs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">plusieurs tutoriels complets</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec ajout √©tape par √©tape et affichage interactif du r√©sultat affich√©. Il existe √©galement des liens vers des exemples de projets. Ces tutoriels vous permettront de plonger rapidement dans le monde d√©claratif de SwiftUI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient √©galement de noter que SwiftUI n'est pas encore pr√™t pour les projets de production, il est trop jeune et plus d'un an s'√©coulera avant de pouvoir √™tre utilis√© de cette mani√®re. N'oubliez pas non plus qu'il ne prend en charge que les versions iOS 13.0+. Mais il convient √©galement de noter que SwiftUI fonctionnera sur toutes les plates-formes Apple, ce qui est un gros avantage sur UIKit! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons l'impl√©mentation √† partir de l'√©cran principal de notre application. Acc√©dez au fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> changez le code actuel en ceci.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">WorkoutListView</span>()<font></font>
                .navigationBarTitle(<span class="hljs-string">"Workouts diary"</span>, displayMode: .inline)<font></font>
                .navigationBarItems(<font></font>
                    leading: <span class="hljs-type">AddButton</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode),<font></font>
                    trailing: <span class="hljs-type">TrailingView</span>()<font></font>
                )<font></font>
        }<font></font>
        .sheet(isPresented: $isAddingMode) {<font></font>
            <span class="hljs-type">AddWorkoutView</span>(isAddingMode: <span class="hljs-keyword">self</span>.$isAddingMode)<font></font>
                .environmentObject(<span class="hljs-keyword">self</span>.store)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La vue de contenu est une vue standard dans SwiftUI. </font><font style="vertical-align: inherit;">La partie la plus importante - de mon point de vue - est la ligne de code qui contient la variable store. </font><font style="vertical-align: inherit;">Nous allons cr√©er @EnvironmentObject. </font><font style="vertical-align: inherit;">Cela nous permettra d'utiliser les donn√©es de la boutique o√π cela est n√©cessaire, et en outre, cela mettra automatiquement √† jour nos vues si les donn√©es sont modifi√©es. </font><font style="vertical-align: inherit;">C'est quelque chose comme Singleton pour notre magasin.</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient √©galement de noter la ligne de code suivante:</font></font><br>
<br>
<pre><code class="swift hljs">@<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est un wrapper que nous pouvons utiliser pour indiquer l'√©tat d'une vue. </font><font style="vertical-align: inherit;">SwiftUI le stockera dans une m√©moire interne sp√©ciale en dehors de la structure View. </font><font style="vertical-align: inherit;">Seule une vue li√©e peut y acc√©der. </font><font style="vertical-align: inherit;">Une fois la valeur de la propri√©t√©</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modifications, SwiftUI reconstruit la vue pour tenir compte des changements d'√©tat.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ul/ab/qx/ulabqxoyqpmsk3vndncjq3-i-1m.png" alt="image" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous irons dans le fichier SceneDelegate.swift et ajouterons le code √† la m√©thode:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(
        <span class="hljs-number">_</span> scene: UIScene,
        willConnectTo session: UISceneSession,
        options connectionOptions: UIScene.ConnectionOptions
    )</span></span> {
        <span class="hljs-keyword">let</span> contentView = <span class="hljs-type">ContentView</span>().environmentObject(<span class="hljs-type">Store</span>())<font></font>
        <font></font>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene = scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span> {
            <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: windowScene)<font></font>
            window.rootViewController = <span class="hljs-type">UIHostingController</span>(rootView: contentView)
            <span class="hljs-keyword">self</span>.window = window<font></font>
            window.makeKeyAndVisible()<font></font>
        }<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De la m√™me mani√®re, n'importe quel </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@EnvironmentObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut √™tre transmis √† n'importe quelle repr√©sentation enfant dans l'application enti√®re, et tout cela est possible gr√¢ce √† l'environnement. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> variable </font><i><font style="vertical-align: inherit;">IsAddingMode est</font></i><font style="vertical-align: inherit;"> marqu√©e</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etat</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et indique si la vue secondaire est affich√©e ou non. </font><font style="vertical-align: inherit;">La variable de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">magasin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><font style="vertical-align: inherit;">automatiquement h√©rit√©e par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et nous n'avons pas besoin de la transmettre explicitement, mais nous devons le faire pour </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car elle est pr√©sent√©e sous la forme d'une feuille qui n'est pas un enfant de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ez maintenant un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui h√©ritera de View. </font><font style="vertical-align: inherit;">Cr√©ez un nouveau fichier rapide appel√© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutListView</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutListView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">List</span> {
            <span class="hljs-type">ForEach</span>(store.state.workouts) {
                <span class="hljs-type">WorkoutView</span>(workout: $<span class="hljs-number">0</span>)<font></font>
            }<font></font>
            .onDelete {<font></font>
                <span class="hljs-keyword">self</span>.store.dispatch(action: .removeWorkout(at: $<span class="hljs-number">0</span>))<font></font>
            }<font></font>
            .listRowInsets(<span class="hljs-type">EdgeInsets</span>())<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
View, qui utilise l'√©l√©ment conteneur List pour afficher une liste des entra√Ænements. La fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDelete</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utilis√©e pour supprimer un entra√Ænement et utilise l' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action removeWorkout</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui est effectu√©e √† l'aide de la fonction de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©partition</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fournie par le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">magasin</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pour afficher l'entra√Ænement dans la liste, WorkoutView est utilis√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ez un autre fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkoutView.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui sera charg√© d'afficher notre article dans la liste.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WorkoutView</span>: <span class="hljs-title">View</span> </span>{
    <span class="hljs-keyword">let</span> workout: <span class="hljs-type">Workout</span><font></font>
    <font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> backgroundColor: <span class="hljs-type">Color</span> {
        <span class="hljs-keyword">switch</span> workout.complexity {
        <span class="hljs-keyword">case</span> .low:
            <span class="hljs-keyword">return</span> .green
        <span class="hljs-keyword">case</span> .medium:
            <span class="hljs-keyword">return</span> .orange
        <span class="hljs-keyword">case</span> .high:
            <span class="hljs-keyword">return</span> .red<font></font>
        }<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span> {
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(workout.name)
                <span class="hljs-type">Text</span>(<span class="hljs-string">"Distance:"</span> + workout.<span class="hljs-built_in">distance</span> + <span class="hljs-string">"km"</span>)<font></font>
                    .font(.subheadline)<font></font>
            }<font></font>
            <span class="hljs-type">Spacer</span>()
            <span class="hljs-type">VStack</span>(alignment: .leading) {
                <span class="hljs-type">Text</span>(simpleFormat(workout.date))<font></font>
            }<font></font>
        }<font></font>
        .padding()<font></font>
        .background(backgroundColor)<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">WorkoutView</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">simpleFormat</span><span class="hljs-params">(<span class="hljs-number">_</span> date: Date)</span></span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">let</span> dateFormatter = <span class="hljs-type">DateFormatter</span>()<font></font>
        dateFormatter.dateFormat = <span class="hljs-string">"dd MMM yyyy"</span>
        dateFormatter.locale = .<span class="hljs-keyword">init</span>(identifier: <span class="hljs-string">"en_GB"</span>)
        <span class="hljs-keyword">return</span> dateFormatter.string(from: date)<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette vue prend l'objet d'apprentissage comme param√®tre et est configur√©e en fonction de ses propri√©t√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ajouter un nouvel √©l√©ment √† la liste, vous devez changer le param√®tre </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour afficher </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cette responsabilit√© </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incombe</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† </font><b><font style="vertical-align: inherit;">AddButton</font></b><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddButton</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">true</span> }) {
            <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"plus"</span>)<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AddButton vaut √©galement la peine d'√™tre plac√© dans un fichier s√©par√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette vue est un simple bouton qui a √©t√© extrait de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContentView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> principal </font><font style="vertical-align: inherit;">pour une meilleure structure et une meilleure s√©paration du code. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ez une vue pour ajouter un nouvel entra√Ænement. </font><font style="vertical-align: inherit;">Cr√©ez un nouveau fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddWorkoutView.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">AddWorkoutView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> nameText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> distanceText: <span class="hljs-type">String</span> = <span class="hljs-string">""</span>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> complexityField: <span class="hljs-type">Complexity</span> = .medium<font></font>
    @<span class="hljs-type">State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> dateField: <span class="hljs-type">Date</span> = <span class="hljs-type">Date</span>()<font></font>
    @<span class="hljs-type">Binding</span> <span class="hljs-keyword">var</span> isAddingMode: <span class="hljs-type">Bool</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">NavigationView</span> {
            <span class="hljs-type">Form</span> {
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Name"</span>, text: $nameText)
                <span class="hljs-type">TextField</span>(<span class="hljs-string">"Distance"</span>, text: $distanceText)
                <span class="hljs-type">Picker</span>(selection: $complexityField, label: <span class="hljs-type">Text</span>(<span class="hljs-string">"Complexity"</span>)) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Low"</span>).tag(<span class="hljs-type">Complexity</span>.low)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Medium"</span>).tag(<span class="hljs-type">Complexity</span>.medium)
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"High"</span>).tag(<span class="hljs-type">Complexity</span>.high)<font></font>
                }<font></font>
                <span class="hljs-type">DatePicker</span>(selection: $dateField, displayedComponents: .date) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Date"</span>)<font></font>
                }<font></font>
            }<font></font>
            .navigationBarTitle(<span class="hljs-string">"Workout Details"</span>, displayMode: .inline)<font></font>
            .navigationBarItems(<font></font>
                leading: <span class="hljs-type">Button</span>(action: { <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span> }) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Cancel"</span>)<font></font>
                },<font></font>
                trailing: <span class="hljs-type">Button</span>(action: {
                    <span class="hljs-keyword">let</span> workout = <span class="hljs-type">Workout</span>(<font></font>
                        name: <span class="hljs-keyword">self</span>.nameText,
                        <span class="hljs-built_in">distance</span>: <span class="hljs-keyword">self</span>.distanceText,<font></font>
                        date: <span class="hljs-keyword">self</span>.dateField,<font></font>
                        complexity: <span class="hljs-keyword">self</span>.complexityField<font></font>
                    )<font></font>
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .addWorkout(workout))
                    <span class="hljs-keyword">self</span>.isAddingMode = <span class="hljs-literal">false</span><font></font>
                }) {<font></font>
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"Save"</span>)<font></font>
                }<font></font>
                .disabled(nameText.isEmpty)<font></font>
            )<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit d'un contr√¥leur assez volumineux qui, comme les autres contr√¥leurs, contient la variable store. </font><font style="vertical-align: inherit;">Il contient √©galement les variables </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nomTexte, distanceTexte, complexit√©Field et isAddingMode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Les trois premi√®res variables sont n√©cessaires pour lier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TextField, Picker, DatePicker</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui peut √™tre vu sur cet √©cran. </font><font style="vertical-align: inherit;">La barre de navigation comporte deux √©l√©ments. </font><font style="vertical-align: inherit;">Le premier bouton est un bouton qui ferme l'√©cran sans ajouter de nouvel entra√Ænement, et le dernier ajoute un nouvel entra√Ænement √† la liste, ce qui est r√©alis√© en envoyant l'action addWorkout. </font><font style="vertical-align: inherit;">Cette action ferme √©galement l'√©cran d'ajout d'un nouvel entra√Ænement.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/cn/b0/gycnb0wn0s9eachcnmcy2s96jkq.png" alt="image" width="350" height="614"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le dernier mais non le moindre est </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrailingView</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TrailingView</span>: <span class="hljs-title">View</span> </span>{<font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> store: <span class="hljs-type">Store</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">HStack</span>(alignment: .center, spacing: <span class="hljs-number">30</span>) {
            <span class="hljs-type">Button</span>(action: {
                <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span>.store.state.sortType {
                <span class="hljs-keyword">case</span> .<span class="hljs-built_in">distance</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .<span class="hljs-built_in">distance</span>))
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">self</span>.store.dispatch(action: .<span class="hljs-built_in">sort</span>(by: .complexity))<font></font>
                }<font></font>
            }) {<font></font>
                <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"arrow.up.arrow.down"</span>)<font></font>
            }<font></font>
            <span class="hljs-type">EditButton</span>()<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette vue se compose de deux boutons qui sont charg√©s de trier la liste d'entra√Ænement et d'activer ou de d√©sactiver le mode d'√©dition de notre liste d'entra√Ænement. </font><font style="vertical-align: inherit;">Les actions de tri sont appel√©es √† l'aide de la fonction de r√©partition, que nous pouvons appeler via la propri√©t√© store.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/av/72/2u/av722utbzjxbewvozklxazeelde.png" alt="image" width="350" height="614"></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©sultat</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'application est pr√™te et devrait fonctionner exactement comme pr√©vu. </font><font style="vertical-align: inherit;">Essayons de le compiler et de l'ex√©cuter.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redux et SwiftUI fonctionnent tr√®s bien ensemble. Le code √©crit √† l'aide de ces outils est facile √† comprendre et peut √™tre bien organis√©. Un autre bon aspect de cette solution est son excellente testabilit√© du code. Cependant, cette solution n'est pas sans inconv√©nients, l'un d'eux est une grande quantit√© de m√©moire utilis√©e par l'application lorsque l'√©tat de l'application est tr√®s complexe, et les performances de l'application peuvent ne pas √™tre id√©ales dans certains sc√©narios sp√©cifiques, car toutes les vues dans SwiftUI sont mises √† jour lors de la cr√©ation d'un nouvel √©tat. Ces lacunes peuvent avoir un impact important sur la qualit√© de l'application et l'interaction avec l'utilisateur, mais si nous nous en souvenons et pr√©parons l'√©tat de mani√®re raisonnable, l'impact n√©gatif peut √™tre facilement minimis√©, voire √©vit√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez t√©l√©charger ou afficher le code source du projet.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'esp√®re que cet article vous a plu et que vous avez appris quelque chose de nouveau par vous-m√™me, √† bient√¥t. </font><font style="vertical-align: inherit;">De plus, ce sera encore plus int√©ressant.</font></font></s></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500146/index.html">Recherche d'emploi en Allemagne en tant que chef de produit et plus encore. Partie 3/5. Ce que vous devez faire avant de commencer √† envoyer des CV</a></li>
<li><a href="../fr500148/index.html">Filtre pare-feu Mikrotik: script g√©n√©rant la base d'une politique de filtrage</a></li>
<li><a href="../fr500150/index.html">Robot ROS et Neural Grid Beggar</a></li>
<li><a href="../fr500152/index.html">Comment j'ai int√©gr√© POS-terminal et FR IKKM-Touch dans 1C: entreprise</a></li>
<li><a href="../fr500154/index.html">Apprentissage automatique confidentiel. Biblioth√®que PySyft</a></li>
<li><a href="../fr500160/index.html">√âl√©ments visuels</a></li>
<li><a href="../fr500162/index.html">Super tutoriel de traitement de donn√©es sportives python</a></li>
<li><a href="../fr500164/index.html">Tuteur: frais professionnels</a></li>
<li><a href="../fr500170/index.html">Tutoriel de simulateur de r√©seau ns-3. Chapitre 6</a></li>
<li><a href="../fr500178/index.html">Traduction du livre d'Andrew Un, Passion for Machine Learning, chapitres 38 et 39</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>