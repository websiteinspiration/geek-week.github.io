<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕠 👏🏾 💐 CSS Houdiniチュートリアル 🚴 👨‍🎤 😤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！
 
 Houdiniとは何ですか？
 Houdini（Houdini）-CSS標準の開発を含む、Web開発プロセスを大幅に改善するブラウザーAPIのコレクション。開発者はJavaScriptを使用してCSSを拡張し、CSSレンダリングに影響を与え、スタイルを適用する方法をブラウザーに指...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CSS Houdiniチュートリアル</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494660/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは！</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdiniとは何ですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdini（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）-CSS標準の開発を含む、Web開発プロセスを大幅に改善するブラウザーAPIのコレクション。</font><font style="vertical-align: inherit;">開発者はJavaScriptを使用してCSSを拡張し、CSSレンダリングに影響を与え、スタイルを適用する方法をブラウザーに指示することができます。</font><font style="vertical-align: inherit;">これにより、ポリフィルの使用よりもパフォーマンスと安定性が大幅に向上します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniは、高レベルAPIと低レベルAPIの2つのAPIグループで構成されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
高レベルAPIは、レンダリングプロセス（スタイル-レイアウト-描画-構成）に関連付けられています。</font><font style="vertical-align: inherit;">このグループには以下が含まれます：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペイントAPI-視覚要素（色、背景、境界線など）をレンダリングするステップ（つまり、レンダリング段階）でCSSを拡張できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイアウトAPI-要素のサイズ、位置、配置を決定するステップでCSSを拡張できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アニメーションAPI-要素を表示およびアニメーション化するステップの「拡張ポイント」。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
低レベルAPIは、高レベルAPIの基盤であり、次のものが含まれます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型付きオブジェクトモデルAPI</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムプロパティと値API</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Font Metrics API</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ワークレット</font></font></li>
</ul><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSフューチャー</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniは、通常のCSSとは異なり、CSSをより自然な方法で拡張できます。</font><font style="vertical-align: inherit;">これは、CSS仕様が進化しなくなり、新しい標準が採用されることを意味しますか？</font><font style="vertical-align: inherit;">どういたしまして。</font><font style="vertical-align: inherit;">Houdiniの目標は、簡単に標準化できる実用的なプロトタイプを作成することにより、新しいCSS機能の開発を支援することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、開発者は互換性を気にすることなく、オープンなCSSワークレットを簡単に共有できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型付きオブジェクトモデル（TOM）API</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdini以前は、JSとCSSが相互作用する唯一の方法は、CSSを文字列にキャストして変更することでした。</font><font style="vertical-align: inherit;">手動でのスタイルの解析と再定義は、値の型を（たとえば、数値から文字列に、またはその逆に）二重に変換する必要があるため、複雑でエラーが発生しやすくなります。</font><font style="vertical-align: inherit;">また、新しい値の測定単位を手動で指定する必要があります。</font></font><br>
<br>
<pre><code class="javascript hljs">selectedElement.style.fontSize = newFontSize + <span class="hljs-string">'px'</span> <span class="hljs-comment">// newFontSize = 20</span>
<span class="hljs-built_in">console</span>.log(selectedElement.style.fontSize) <span class="hljs-comment">// 20px</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TOMは、CSSプロパティを型付きのJSオブジェクトとして表すことで、CSSプロパティにより意味的な意味を与えます。</font><font style="vertical-align: inherit;">これにより、パフォーマンス、安定性が大幅に向上し、コードサポートが容易になります。</font><font style="vertical-align: inherit;">CSS値は、値と「測定単位」プロパティで構成されるCSSUnitValueインターフェースで表されます。</font></font><br>
<br>
<pre><code class="javascript hljs">{
  <span class="hljs-attr">value</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">unit</span>: <span class="hljs-string">'px'</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このインターフェースは、以下の新機能で使用できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ComputeStyleMap（）：計算された（組み込みではない）スタイルを解析します。</font><font style="vertical-align: inherit;">このメソッドは、他のメソッドを解析または使用する前に呼び出されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attributeStyleMap：インラインスタイルを解析および変更します。</font><font style="vertical-align: inherit;">これはアイテムプロパティです。</font></font></li>
</ul><br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       ( )</span>
selectedElement.computedStyleMap().get(<span class="hljs-string">'font-size'</span>) <span class="hljs-comment">// { value: 20, unit: 'px' }</span><font></font>
<font></font>
<span class="hljs-comment">//   </span>
selectedElement.attributeStyleMap.set(<span class="hljs-string">'font-size'</span>, CSS.em(<span class="hljs-number">2</span>))<font></font>
selectedElement. attributeStyleMap.set(<span class="hljs-string">'color'</span>, <span class="hljs-string">'blue'</span>)<font></font>
<font></font>
<span class="hljs-comment">//    </span>
selectedElement.computedStyleMap().get(<span class="hljs-string">'font-size'</span>) <span class="hljs-comment">// { value: 20, unit: 'px' }</span><font></font>
<font></font>
<span class="hljs-comment">//    </span>
selectedElement.attributeStyleMap.get(<span class="hljs-string">'font-size'</span>) <span class="hljs-comment">// { value: 2, unit: 'em' }</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい値を割り当てるときにCSSタイプがどのように使用されるかに注意してください。</font><font style="vertical-align: inherit;">この構文を使用すると、型に関連する問題が回避され、結果のコードはより安全になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検討中のAPIには、取得と設定だけでなく、次のような他のメソッドも含まれます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clear：すべてのインラインスタイルを削除します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delete：特定のCSSプロパティとその値を削除します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">has：指定されたプロパティの可用性に応じてtrue / falseを返します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加：複数の値をサポートするプロパティに値を追加します</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検出</font></font></h4><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> selectedElement = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'example'</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span>(selectedElement.attributeStyleMap){
  <span class="hljs-comment">// ...</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span>(selectedElement.computedStyleMap){
  <span class="hljs-comment">// ...</span><font></font>
}<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様ステータス</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">草案</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：コミュニティディスカッション用に投稿されました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポート</font></font></h4><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロム</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペラ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サファリ</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的なサポート</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムプロパティと値API</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPIを使用すると、開発者はタイプ、初期値、および継承を定義することでCSS変数を拡張できます。</font><font style="vertical-align: inherit;">カスタムプロパティを定義するには、registerPropertyメソッドを使用してそれを登録する必要があります。</font><font style="vertical-align: inherit;">このメソッドは、ブラウザがプロパティを適用してエラーを処理する方法を決定します。</font></font><br>
<br>
<pre><code class="javascript hljs">CSS.registerProperty({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'--colorPrimary'</span>,
  <span class="hljs-attr">syntax</span>: <span class="hljs-string">'&lt;color&gt;'</span>,
  <span class="hljs-attr">inherits</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">initialValue</span>: <span class="hljs-string">'blue'</span>,<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のプロパティを持つオブジェクトは、引数としてこのメ​​ソッドに渡されます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name：カスタムプロパティの名前</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構文：解析の指示。</font><font style="vertical-align: inherit;">事前定義された値は、&lt;color&gt;、&lt;integer&gt;、&lt;number&gt;、&lt;length&gt;、&lt;percentage&gt;などです。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initialValue：デフォルト値（オーバーライドする前、およびエラーが発生したとき）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例では、タイプ&lt;color&gt;のカスタムプロパティが定義されています。</font><font style="vertical-align: inherit;">このプロパティは、グラデーションを決定するために使用されます。</font><font style="vertical-align: inherit;">通常のCSSはグラデーション遷移をサポートしていません。</font><font style="vertical-align: inherit;">カスタムプロパティを使用して遷移を定義する方法に注意してください。</font></font><br>
<br>
<pre><code class="javascript hljs">.gradient-box {
  <span class="hljs-attr">background</span>: linear-gradient(<span class="hljs-number">45</span>deg, rgba(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">1</span>) <span class="hljs-number">0</span>% <span class="hljs-keyword">var</span>(--colorPrimary) <span class="hljs-number">60</span>%);<font></font>
  transition: --colorPrimary <span class="hljs-number">0.5</span>s ease;<font></font>
  ...<font></font>
}<font></font>
<font></font>
.gradient-box:hover {<font></font>
  --colorPrimary: red;<font></font>
  ...<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザーはグラデーションのトランジションを行う方法を認識していませんが、色のトランジションを行う方法を認識しています。</font><font style="vertical-align: inherit;">そのため、プロパティタイプを&lt;color&gt;として定義しました。</font><font style="vertical-align: inherit;">Houdiniをサポートするブラウザーでは、ホバーするとグラデーションが変化します。</font><font style="vertical-align: inherit;">パーセントで測定されるグラデーションの位置は、CSSカスタムプロパティ（&lt;percentage&gt;として登録）を使用して変更することもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく将来的には、CSSに直接カスタムプロパティを登録できるようになるでしょう。</font></font><br>
<br>
<pre><code class="javascript hljs">@property --colorPrimary {
  <span class="hljs-attr">syntax</span>: <span class="hljs-string">'&lt;color&gt;'</span>;<font></font>
  inherits: <span class="hljs-literal">false</span>;<font></font>
  initial-value: blue;<font></font>
}<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この簡単な例は、カスタムCSSプロパティを使用してグラデーションの色と制御点を変更する方法を示しています。</font><font style="vertical-align: inherit;">サンプルコードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fn/p4/_n/fnp4_n8vvdfqg3c4xey3vrng-v0.gif"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検出</font></font></h4><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span>(CSS.registeredProperty) {
  <span class="hljs-comment">// ...</span><font></font>
}<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様ステータス</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">草案</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：コミュニティディスカッション用に投稿されました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポート</font></font></h4><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロム</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペラ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サファリ</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Font Metrics API</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPIは開発の初期段階にあるため、仕様は将来劇的に変わる可能性があります。</font><font style="vertical-align: inherit;">現在、画面に表示されるテキスト要素のサイズを測定する方法が提供されており、開発者は文字のレンダリングに影響を与えることができます。</font><font style="vertical-align: inherit;">既存のCSS機能では、これらの値を使用したり、この作業を非常に困難にしたりすることはできません。</font><font style="vertical-align: inherit;">このAPIの使用例の1つは、テキストの複数行の動的切り捨てです。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様ステータス</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アイデアのコレクション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ドラフトは公開されていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザはサポートされていません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヴォルクレタ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のAPIに進む前に、ワークレットの概念を理解する必要があります。</font><font style="vertical-align: inherit;">Vorkletsは、レンダリング中に実行されるスクリプトであり、基礎となるJSコードから独立しています。</font><font style="vertical-align: inherit;">これらは、レンダリングエンジンの機能を拡張し、並列実行（2つ以上のインスタンス）用に設計され、メインスレッドをブロックせず、グローバルスコープへのアクセスを制限し、必要に応じてエンジンによって呼び出されます。</font><font style="vertical-align: inherit;">Vorkletsは、HTTPS（本番環境）またはlocalhost（開発およびテスト目的）を介してのみ実行できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniには、ブラウザーのレンダリングエンジンを拡張する次のワークレットが含まれています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペイントワークレット-ペイントAPI</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アニメーションワークレット-アニメーションAPI</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイアウトワークレット-レイアウトAPI</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ペイントAPI</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paint APIを使用すると、開発者はJS関数を使用して、HTML5 Canvas APIのサブセットである2Dレンダリングコンテキストを使用して要素の背景、境界線、またはコンテンツをペイントできます。</font><font style="vertical-align: inherit;">Paint APIはPaint Workletを使用して、CSSの変更（CSS変数の変更など）に依存する画像を描画します。</font><font style="vertical-align: inherit;">Canvas APIに精通している人なら、Paint APIをすぐに使いこなせるでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ペイントワークレットの作成は、いくつかの手順で構成されています。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">registerPaint関数を使用してワークレットを作成して登録する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS.paintWorklet.addModuleを使用してHTMLまたはJSでワークレットを呼び出す</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSでpaint（）メソッドを、ボルクレットの名前と渡された引数とともに使用します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ペイントワークレットの機能を登録および決定するために使用されるregisterPaint関数を見てみましょう。</font></font><br>
<br>
<pre><code class="javascript hljs">registerPaint(<span class="hljs-string">'paintWorkletExample'</span>, <span class="hljs-class"><span class="hljs-keyword">class</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">inputProperties</span>() { <span class="hljs-keyword">return</span> [<span class="hljs-string">'--myVariable'</span>]; }
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">inputArguments</span>() { <span class="hljs-keyword">return</span> [<span class="hljs-string">'&lt;color&gt;'</span>]; }
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">contextOptions</span>() { <span class="hljs-keyword">return</span> {<span class="hljs-attr">alpha</span>: <span class="hljs-literal">true</span>} }<font></font>
<font></font>
  paint(ctx, size, properties, args) {<font></font>
    <span class="hljs-comment">// ...</span><font></font>
  }<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
registerPaint関数は次の部分で構成されています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inputProperties：ワークレットが監視しているカスタムCSSプロパティの配列。</font><font style="vertical-align: inherit;">この配列は、ワークレットの依存関係を表します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inputArguments：関数から外部CSSに渡すことができる引数の配列</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contextOptions：色の透明度。</font><font style="vertical-align: inherit;">falseの場合、すべての色が完全に不透明になります</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paint：次の引数を取るmain関数：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ctx：Canvas APIの2Dキャンバスコンテキストとほぼ同じ2D描画コンテキスト</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size：要素の幅と高さを持つオブジェクト。</font><font style="vertical-align: inherit;">値は、レイアウトのレンダリングプロセスによって異なります。</font><font style="vertical-align: inherit;">キャンバスのサイズは実際のアイテムのサイズと同じです</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティ：inputPropertiesに含まれる変数</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">args：paint関数に渡される引数の配列</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワークレットを登録したら、ファイルへのパスを示すHTMLで呼び出す必要があります。</font></font><br>
<br>
<pre><code class="javascript hljs">CSS.paintWorklet.addModule(<span class="hljs-string">'path/to/worklet/file.js'</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vorkletは任意の外部ソース（CDNなど）から追加できるため、モジュール化して再利用できます。</font></font><br>
<br>
<pre><code class="javascript hljs">CSS.paintWorklet.addModule(<span class="hljs-string">'https://url/to/worklet/file.js'</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワークレットを呼び出した後、「ペイント」機能を使用してCSSで使用できます。</font><font style="vertical-align: inherit;">この関数は、最初のパラメーターとして、vorkletの登録名と、inputArgumentsで指定されたすべての引数を取ります。</font><font style="vertical-align: inherit;">この瞬間から、ブラウザーはワークレットを呼び出すタイミングと、CSSカスタムプロパティの特定の値の変更につながるユーザーアクションを認識します。</font></font><br>
<br>
<pre><code class="javascript hljs">.example-element {
  <span class="hljs-comment">// paintWorkletExample -  </span>
  <span class="hljs-comment">// blue - ,  </span>
  <span class="hljs-attr">background</span>: paint(paintWorkletExample, blue);<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の例は、ペイントAPIの使用法、およびワークレットのモジュール性と再利用を示しています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Chrome Labsリポジトリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からのリップルワークレットを使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">こちらのサンプルコードを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u3/yk/2y/u3yk2yldoyuza04pdyyz1zbxs-u.gif"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検出</font></font></h4><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span>(‘paintWorklet’ <span class="hljs-keyword">in</span> CSS){
  <span class="hljs-comment">// …</span><font></font>
}<font></font>
<font></font>
@supports(background: paint(paintWorkletExample)){<font></font>
  <span class="hljs-comment">// …</span>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様ステータス</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推奨事項</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：安定したワーキングドラフトで、すぐに使用できます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポート</font></font></h4><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロム</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペラ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サファリ</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による支援</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アニメーションAPI</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPIは、さまざまなイベント（スクロール、ホバリング、クリックなど）の処理を通じてWebアニメーションを拡張し、アニメーションワークレットを通じて独自のストリームでアニメーションを起動することでパフォーマンスを向上させます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のワークレットと同様に、ワークアウトアニメーションを最初に登録する必要があります。</font></font><br>
<br>
<pre><code class="javascript hljs">registerAnimation(‘animationWorkletExample’, <span class="hljs-class"><span class="hljs-keyword">class</span> </span>{
  <span class="hljs-keyword">constructor</span>(options){
    <span class="hljs-comment">// …</span><font></font>
  }<font></font>
  animate(currentTime, effect){<font></font>
    <span class="hljs-comment">// …</span><font></font>
  }<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラスには2つの関数が含まれています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクター：新しいインスタンスが作成されたときに呼び出されます。</font><font style="vertical-align: inherit;">一般的なセットアップに使用されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">animate：アニメーションロジックを含むメイン関数。</font><font style="vertical-align: inherit;">以下のパラメーターが受け入れられます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentTime：特定のタイムラインのタイムスタンプ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エフェクト：アニメーションで使用されるエフェクトの配列</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
登録後、ワークレットはメインのJSファイルに含まれ、アニメーション（要素、フレーム、設定）が追加され、タイムラインにアタッチされます。</font><font style="vertical-align: inherit;">タイムラインマークの概念とWebアニメーションの基本については、次のセクションで説明します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-keyword">await</span> CSS.animationWorklet.addModule(‘path/to/worklet/file.js’)<font></font>
<font></font>
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">const</span> elementExample = <span class="hljs-built_in">document</span>.getElementById(‘element-example’)<font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">const</span> effectExample = <span class="hljs-keyword">new</span> KeyframeEffect(<font></font>
  elementExample, <span class="hljs-comment">//  </span>
  [ <span class="hljs-comment">// … ], //  </span>
  { <span class="hljs-comment">// … } //  - , ,    ..</span><font></font>
)<font></font>
<font></font>
<span class="hljs-comment">//        </span>
<span class="hljs-keyword">new</span> WorkletAnimation(<font></font>
  ‘animationWorkletExample’ <span class="hljs-comment">//  </span>
  effectExample, <span class="hljs-comment">//  </span>
  <span class="hljs-built_in">document</span>.timeline, <span class="hljs-comment">//  </span>
  {},  <span class="hljs-comment">//   </span>
).play()</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムスタンプ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webアニメーションはタイムスタンプに基づいており、アニメーションタイムラインへの影響のマイルストーンです。</font><font style="vertical-align: inherit;">たとえば、3つのフレーム（開始、中間、終了）で構成される繰り返しの線形アニメーションを分析し、ページが完全に読み込まれてから1秒後に開始し（遅延）、4秒続きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エフェクトのタイムスタンプは次のようになります（アニメーションが4秒続き、遅延がない場合）。</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムスタンプ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アニメーションフレーム</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のフレーム-アニメーションの始まり</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2000ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2番目のフレーム-アニメーションの中央</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4000ミリ秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後のフレーム-アニメーションの終了または最初のフレームにリセット</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
値が3000ms（遅延が1000msの場合）のeffect.localTimeは、アニメーションをタイムラインの平均フレームにバインドします（遅延1000ms +平均フレーム2000ms）。</font><font style="vertical-align: inherit;">アニメーションが4000msごとに繰り返されるため、7000msと11000msを設定しても同じ効果が得られます。</font></font><br>
<br>
<pre><code class="javascript hljs">animate(currentTime, effect){<font></font>
  effect.localTime = <span class="hljs-number">3000</span> <span class="hljs-comment">// 1000ms  + 2000ms  </span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
effect.localTimeの定数値により、アニメーションは特定のフレームでロックされます。</font><font style="vertical-align: inherit;">したがって、effect.localTimeの値を変更する必要があります。</font><font style="vertical-align: inherit;">この値は、currentTimeまたは別の変数にバインドされた関数である必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
線形アニメーションコードは次のようになります。</font></font><br>
<br>
<pre><code class="javascript hljs">animate(currentTime, effect){<font></font>
  effect.localTime = currentTime <span class="hljs-comment">// y = x  </span>
}</code></pre><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムライン（document.timeline）</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムスタンプ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレーム</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 0ms（経過時間）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 0ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 1000ms（経過時間）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 1000ms（遅延）+ 0ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 3000ms（経過時間）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 1000ms（遅延）+ 2000ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中間</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 5000ms（経過時間）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 1000ms（遅延）+ 4000ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の最後</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 7000ms（経過時間）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 1000ms（遅延）+ 6000ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中間</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 9000ms（経過時間）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startTime + 1000ms（遅延）+ 8000ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の最後</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイムスタンプは1：1に限定されません。</font><font style="vertical-align: inherit;">Animation APIを使用すると、開発者はanimate関数を通じてマークを操作し、標準のJS関数を使用して複雑な効果を作成できます。</font><font style="vertical-align: inherit;">アニメーションは、反復ごとに異なる場合もあります（繰り返し可能なアニメーションを使用）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アニメーションは、ドキュメントの読み込みだけでなく、ユーザーの操作にも関連付けることができます。</font><font style="vertical-align: inherit;">ページのスクロールなどのユーザーアクションは、ScrollTimelineオブジェクトを通じてアニメーションで使用できます。</font><font style="vertical-align: inherit;">たとえば、200pxスクロールするとアニメーションが開始し、800pxスクロールするとアニメーションが終了します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> scrollTimelineExample = <span class="hljs-keyword">new</span> ScrollTimeline({
  <span class="hljs-attr">scrollSource</span>: scrollElement, <span class="hljs-comment">// ,     </span>
  <span class="hljs-attr">orientation</span>: ‘vertical’, <span class="hljs-comment">//  </span>
  <span class="hljs-attr">startScrollOffset</span>: ‘<span class="hljs-number">200</span>px’, <span class="hljs-comment">//  </span>
  <span class="hljs-attr">endScrollOffset</span>: ‘<span class="hljs-number">800</span>px’, <span class="hljs-comment">//  </span>
  <span class="hljs-attr">timeRange</span>: <span class="hljs-number">1200</span>, <span class="hljs-comment">//  </span>
  <span class="hljs-attr">fill</span>: ‘forwards’ <span class="hljs-comment">//  </span>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アニメーションはスムーズで応答性を維持しながら、スクロール速度に自動的に適応します。</font><font style="vertical-align: inherit;">アニメーションは独自のストリームで実行され、ブラウザーのレンダリングエンジンに接続するため、スムーズに開始され、パフォーマンスに影響を与えません。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の例は、非線形アニメーションを示しています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガウス関数</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">し</font></a><font style="vertical-align: inherit;">て、同じ場所で回転します。</font><font style="vertical-align: inherit;">こちらのサンプルコードを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hq/aw/es/hqawes_i_8t4arxvc3-7mo-ouqc.gif"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検出</font></font></h4><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span>(CSS.animationWorklet){
  <span class="hljs-comment">// …</span>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様ステータス</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のパブリックワーキングドラフト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：コミュニティディスカッションの準備ができており、将来変更される可能性があります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポート</font></font></h4><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロム</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペラ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サファリ</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的なサポート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的なサポート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的なサポート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイアウトAPI</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layout APIを使用すると、開発者はCSSの「display」プロパティで使用する新しいモジュールを定義することにより、レイアウトレンダリングプロセスを拡張できます。</font><font style="vertical-align: inherit;">このAPIは新しい概念を導入し、非常に複雑で、ページレイアウトを操作するためのカスタムアルゴリズムを開発するための多数の設定を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず最初に、ワークレットを登録する必要があります。</font></font><br>
<br>
<pre><code class="javascript hljs">registerLayout(‘exampleLayout’, <span class="hljs-class"><span class="hljs-keyword">class</span></span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">inputProperties</span>() { <span class="hljs-keyword">return</span> [‘--example-variable’] }<font></font>
<font></font>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">childrenInputProperties</span>() { <span class="hljs-keyword">return</span> [‘--exampleChildVariable’] }<font></font>
<font></font>
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title">layoutOptions</span>(){
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">childDisplay</span>: ‘normal’,
      <span class="hljs-attr">sizing</span>: ‘block-like’<font></font>
    }<font></font>
  }<font></font>
<font></font>
  intrinsicSizes(children, edges, styleMap){<font></font>
    <span class="hljs-comment">// …</span><font></font>
  }<font></font>
<font></font>
  layout(children, edges, constraints, styleMap, breakToken){<font></font>
    <span class="hljs-comment">// …</span><font></font>
  }<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ワークレットの登録には、次のメソッドが含まれます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inputProperties：ワークレットによって監視され、レイアウトのレンダリングを引き起こした要素である親に属するカスタムCSSプロパティの配列。</font><font style="vertical-align: inherit;">この配列はレイアウトの依存関係を表します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">childrenInputProperties：ウィジェットによって監視され、子孫に属するカスタムCSSプロパティの配列</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">layoutOptions：次のレイアウトプロパティを定義します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">childDisplay：事前定義された値はblockおよびnormalです。</font><font style="vertical-align: inherit;">アイテムの表示方法を定義します（ブロックまたはライン）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サイジング：事前定義された値はブロックのようなもので、手動です。</font><font style="vertical-align: inherit;">要素サイズの事前計算の必要性を決定します（指定されていない場合）</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込みサイズ：コンテナまたはそのコンテンツがレイアウトコンテキストでどのように表示されるかを定義します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">children：ページレイアウトのレンダリングを引き起こした要素の子</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッジ：コンテナの境界線</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">styleMap：型付きコンテナースタイルオブジェクトモデル</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイアウト：レイアウトを操作するための主な機能：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子：子要素</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッジ：ボーダー</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制約：親レイアウトによって課される制約</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">styleMap：型付きコンテナースタイルオブジェクトモデル</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">breakToken：ページネーションまたは印刷レイアウト分割のブレークポイント</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ワークレットがHTMLまたはJSファイルに追加されます。</font></font><br>
<br>
<pre><code class="javascript hljs">CSS.layoutWorklet.addModule(‘path/to/worklet/file.js’)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スタイル付きのファイルにワークレットへのリンクを作成します。</font></font><br>
<br>
<pre><code class="javascript hljs">.example-element {
  <span class="hljs-attr">display</span>: layout(exampleLayout)<font></font>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Layout APIとレイアウトの連携</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前の例では、exampleLayoutを定義しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
.example-elementは、インデント、境界線、スクロールスライダーを含む親レイアウトと呼ばれます。</font><font style="vertical-align: inherit;">親レイアウトは、現在のレイアウトと呼ばれる子要素で構成されます。</font><font style="vertical-align: inherit;">現在のレイアウトは、レイアウトAPIを使用して「カスタマイズ」されたターゲット要素です。</font><font style="vertical-align: inherit;">たとえば、「display：flex」を使用する場合、要素の子孫は柔軟なレイアウトに従って再配置されます。</font><font style="vertical-align: inherit;">これは、レイアウトAPIの操作に似ています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の各レイアウトは、子要素のレイアウトをレンダリングするためのアルゴリズムを含む子レイアウトで構成されています-LayoutChild（：:: beforeおよび:: after擬似クラスを含む）。</font><font style="vertical-align: inherit;">LayoutChild-スタイルに関するデータ（レイアウトに関するデータなし）を含むCSSツールによって生成されたコンテナー。</font><font style="vertical-align: inherit;">LayoutChild要素は、スタイルを適用する段階でブラウザによって自動的に作成されます。</font><font style="vertical-align: inherit;">子レイアウトは、レイアウトをレンダリングするための指示を含むフラグメントを作成できます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例でも</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Chrome Labsリポジトリを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ています</font></a><font style="vertical-align: inherit;">が、テキストは画像に置き換えられています。</font><font style="vertical-align: inherit;">こちらのサンプルコードを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/ft/b_/ypftb_-lievo3nmpij1lidenius.gif"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検出</font></font></h4><br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span>(CSS.layoutWorklet){
  <span class="hljs-comment">// …</span>
}</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仕様ステータス</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初のパブリックワーキングドラフト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：コミュニティディスカッションの準備ができており、将来変更される可能性があります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポート</font></font></h4><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロム</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">縁</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペラ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firefox</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サファリ</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的なサポート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的なサポート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的なサポート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートされていません</font></font></td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdiniと進歩的な改善</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniは現在、最適なブラウザーサポートを備えていませんが、段階的な改善に使用できます。</font><font style="vertical-align: inherit;">段階的な改善の概念に慣れていない場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をご覧になることをお勧めします</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Houdiniを使用する場合は、次の点を考慮する必要があります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーを回避するために、常にサポートを特定します。</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各Houdini APIとWorkletには、アクセシビリティをチェックする簡単な方法があります。</font><font style="vertical-align: inherit;">これにより、このテクノロジーをまだサポートしていないブラウザーでHoudiniを使用する際の問題が回避されます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdiniを使用して、表示と視覚化を改善します。</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniをサポートしていないブラウザーを使用しているユーザーは、サイトのコンテンツと基本機能にアクセスできる必要があります。</font><font style="vertical-align: inherit;">ユーザーエクスペリエンスとコンテンツの表示はHoudiniに依存するべきではありません。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替として標準のCSSを使用する</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、カスタムCSSプロパティは、カスタムプロパティと値APIの代わりに使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniを装飾的な目的でのみ使用して、生産的で信頼性の高いアプリケーションの開発に重点を置きます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniでは、開発者がJSコードを使用してレンダリングプロセスのスタイルを操作できるため、アプリケーションのパフォーマンスと安定性が向上します。レンダリングプロセスにコードを埋め込むことができるため、他のユーザーと簡単に共有したり、適用したり、場合によっては仕様に含めたりすることができるCSSポリフィールを作成できます。さらに、Houdiniを使用すると、開発者やデザイナーは、スタイル、レイアウト、アニメーションを操作するときにCSSの制限にあまり依存しなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Houdiniは現在使用できますが、漸進的な改善としてのみ使用できます。これにより、Houdiniをサポートしていないブラウザーがエラーなしでページを表示できるようになり、最適なユーザーエクスペリエンスが提供されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者コミュニティがHoudiniの機能を十分に活用できるようになるまで待ちきれません。次に例をいくつか示します。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSS Houdini Expirements </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Google Chrome Labsに</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">よるCSS Houdini Houdiniサンプル</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のインタラクティブな紹介</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考文献</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdini </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Houdini </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">仕様のW3Cドラフト</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">（Chrome Dev Summit 2018）</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アニメーションワークレット-Google Developers</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ご清聴ありがとうございました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja494646/index.html">分析の人生がリードする、または「自分でやると思った」</a></li>
<li><a href="../ja494648/index.html">GOST R 53894-2016「知識管理の問題を分析します。用語と定義」</a></li>
<li><a href="../ja494650/index.html">言語のすべての単語でアナグラムとサバナグラムを検索する</a></li>
<li><a href="../ja494652/index.html">ACIDでのマーケティングはどのくらいですか？</a></li>
<li><a href="../ja494658/index.html">Laravelでの多態関係の特性の使用</a></li>
<li><a href="../ja494662/index.html">私たちのスペース-それはとても悪いですか？</a></li>
<li><a href="../ja494664/index.html">セキュリティプロセスの実装がリモート作業への移行にどのように役立つか</a></li>
<li><a href="../ja494666/index.html">オーディオマンの発見：過ぎ去った時代の音楽を聴く場所</a></li>
<li><a href="../ja494668/index.html">強力なTypescriptデコレータ-どのように機能し、何にコンパイルされ、どのアプリケーションタスクに適用できるか</a></li>
<li><a href="../ja494670/index.html">Intersection Observer APIのケーススタディ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>