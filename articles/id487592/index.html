<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔉 🧗🏿 ♍️ VMware vSAN 6.7 - Dan guntur melanda 🧑‍🤝‍🧑 🏫 🦅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tahun 2018 berakhir ... 
 
 Suatu hari, pada hari yang cerah di bulan Desember, Perusahaan kami memutuskan untuk membeli perangkat keras baru. Tidak, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>VMware vSAN 6.7 - Dan guntur melanda</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487592/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tahun 2018 berakhir ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suatu hari, pada hari yang cerah di bulan Desember, Perusahaan kami memutuskan untuk membeli perangkat keras baru. Tidak, tentu saja, ini tidak terjadi dalam semalam. Keputusan itu dibuat sebelumnya. Jauh lebih awal. Namun, seperti biasa, keinginan kita tidak selalu bertepatan dengan kemampuan pemegang saham. Dan tidak ada uang, dan kami bertahan. Tapi akhirnya, saat yang menyenangkan itu datang ketika akuisisi disetujui di semua tingkatan. Semuanya baik-baik saja, pekerja kerah putih bertepuk tangan dengan gembira, mereka bosan memproses dokumen selama 25 jam setiap bulan di server berusia 7 tahun, dan mereka dengan gigih meminta Departemen TI untuk membuat sesuatu untuk memberi mereka lebih banyak waktu untuk hal-hal lain yang sama pentingnya .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami berjanji untuk mengurangi waktu pemrosesan dokumen hingga 3 kali, hingga 8 jam. </font><font style="vertical-align: inherit;">Untuk ini, seekor burung gereja ditembakkan dari meriam. </font><font style="vertical-align: inherit;">Opsi ini tampaknya satu-satunya, karena tim kami tidak, dan tidak pernah, administrator database untuk menerapkan semua jenis optimasi kueri (DBA).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konfigurasi peralatan yang dipilih, tentu saja, setinggi langit. </font><font style="vertical-align: inherit;">Ini adalah tiga server dari perusahaan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HPE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - DL560 Gen10. </font><font style="vertical-align: inherit;">Masing-masing dari mereka membual 4 prosesor Intel Xeon Platinum 8164 2.0Ghz dengan 26 core, 256 DDR4 RAM, serta 8 SSD 800Gb SAS (800Gb WD Ultrastar DC SS530 WUSTR6480ASS204 SSD) + 8 SSD 1.92Tb (Western Digital Ultrastar DC SS530 )</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Potongan besi" ini dimaksudkan untuk kluster VMware (HA + DRS + vSAN). Yang telah bekerja bersama kami selama hampir 3 tahun di server yang sama dari generasi ke-7 dan ke-8, juga dari HPE. Ngomong-ngomong, tidak ada masalah sampai HPE menolak untuk mendukung mereka dan meningkatkan ESXi dari versi 6.0, bahkan menjadi 6.5, tanpa rebana. Yah, oke, sebagai hasilnya, mungkin untuk memperbarui. Dengan mengubah gambar instalasi, menghapus modul masalah yang tidak kompatibel dari gambar instalasi, dll. Ini juga menambah bahan bakar ke api keinginan kami untuk mencocokkan segalanya yang baru. Tentu saja, jika itu bukan untuk "trik" vSAN baru, di peti mati kami melihat pembaruan seluruh sistem dari versi 6.0 ke yang lebih baru, dan tidak perlu menulis artikel, tetapi kami tidak mencari cara mudah ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kami membeli peralatan ini dan memutuskan untuk mengganti yang sudah usang. Kami menerapkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SPP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> terakhir </font><font style="vertical-align: inherit;">untuk setiap server baru, yang dipasang di masing-masingnya dua kartu jaringan Ethernet 10G (satu untuk jaringan pengguna, dan yang kedua untuk SAN, 656596-B21 HP Ethernet 10Gb 2-port 530T). Ya, setiap server baru datang dengan kartu jaringan SFP + tanpa modul, tetapi infrastruktur jaringan kami menyiratkan Ethernet (dua tumpukan sakelar DELL 4032N untuk jaringan LAN dan SAN), dan distributor HP di Moskow tidak memiliki modul HPE 813874-B21 dan kami mereka tidak menunggu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika tiba saatnya untuk menginstal ESXi dan memasukkan node baru ke dalam pusat data VMware umum, sebuah "keajaiban" terjadi. Ternyata, HPE ESXi Custom ISO versi 6.5 dan di bawah ini tidak dirancang untuk diinstal pada server Gen10 baru. Hardcore saja, hanya 6,7. Dan kami tanpa sadar harus mengikuti sila "perusahaan virtual". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cluster HA + DRS baru telah dibuat, kluster vSAN telah dibuat, semua sesuai dengan VMware HCL dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumen ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Semuanya dikonfigurasikan berdasarkan Feng Shui dan hanya "alarm" berkala yang mencurigakan dalam memonitor vSAN tentang nilai parameter yang tidak nol di bagian ini:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/800/65a/ff5/80065aff58945762f1660b556d61216e.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami, dengan tenang, memindahkan semua mesin virtual (sekitar 50 buah) ke server baru dan ke penyimpanan vSAN baru yang dibangun pada disk SSD, kami memeriksa kinerja pemrosesan dokumen di lingkungan baru (omong-omong, ternyata menghemat lebih banyak waktu daripada yang kami rencanakan) . Sampai pangkalan terberat dipindahkan ke cluster baru, operasi, yang disebutkan di awal artikel, memakan waktu sekitar 4 jam, bukannya 25! Ini merupakan kontribusi yang signifikan terhadap suasana Tahun Baru semua peserta dalam proses tersebut. Beberapa mungkin mulai memimpikan hadiah. Kemudian semua orang dengan senang hati pergi untuk liburan Tahun Baru.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika hari kerja tahun baru 2019 dimulai, tidak ada yang menandakan malapetaka. Semua layanan, ditransfer ke kapasitas baru, tanpa berlebihan, lepas landas! Hanya peristiwa di bagian re-sinkronisasi objek menjadi lebih. Dan setelah beberapa minggu masalah terjadi. Di pagi hari, hampir semua layanan utama Perusahaan (1s, MSSQL, SMB, Exchange, dll.) Berhenti merespons, atau mulai merespons dengan penundaan yang lama. Seluruh infrastruktur jatuh ke dalam kekacauan total, dan tidak ada yang tahu apa yang terjadi dan apa yang harus dilakukan. Semua mesin virtual di vCenter tampak "hijau", tidak ada kesalahan dalam pemantauan mereka. Mem-boot ulang tidak membantu. Selain itu, setelah reboot, beberapa mesin bahkan tidak bisa boot, menampilkan berbagai kesalahan proses di konsol. Neraka tampaknya mendatangi kami dan iblis sedang menggosok tangannya untuk mengantisipasi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah tekanan stres yang serius, adalah mungkin untuk menentukan sumber bencana. Masalah ini ternyata adalah penyimpanan terdistribusi vSAN. Kerusakan data yang tidak terkendali pada disk mesin virtual terjadi, sekilas - tanpa alasan. Pada saat itu, satu-satunya solusi yang tampaknya rasional adalah dengan menghubungi dukungan teknis VMware dengan jeritan: SOS, save-help! </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan keputusan ini, selanjutnya, menyelamatkan Perusahaan dari hilangnya data yang relevan, termasuk kotak surat karyawan, database, dan file bersama. Bersama-sama, kita berbicara tentang 30+ terabyte informasi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia berkewajiban membayar upeti kepada staf pendukung VMware yang tidak “bermain sepak bola” dengan pemegang langganan dukungan teknis dasar, tetapi memasukkan kasus ini ke dalam segmen Enterpise, dan prosesnya berputar sepanjang waktu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang terjadi selanjutnya:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukungan teknis VMware mengajukan dua pertanyaan utama: bagaimana memulihkan data dan bagaimana memecahkan masalah korupsi data "phantom" dalam disk mesin virtual di cluster tempur "vSAN". </font><font style="vertical-align: inherit;">Ngomong-ngomong, data itu tidak bisa dipulihkan, karena penyimpanan tambahan ditempati oleh salinan cadangan dan tidak ada tempat untuk menyebarkan layanan "tempur".</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sementara saya, bersama-sama dengan VMware, mencoba mengumpulkan benda-benda yang "rusak" di kluster vSAN, rekan-rekan saya mendesak untuk menambang penyimpanan baru yang dapat menampung semua 30+ terabyte data Perusahaan.</font></font></li>
<li>  ,   ,     VMware      ,           ,     «»      - -   .         , ? </li>
<li>        .</li>
<li> ,  « »   .</li>
<li>          ,   ,   «»        .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya harus sementara (selama beberapa hari) mengorbankan efisiensi surat, demi tambahan 6 terabyte ruang kosong di toko, untuk meluncurkan layanan utama yang menjadi sandaran pendapatan Perusahaan.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ribuan baris obrolan dengan rekan kerja berbahasa Inggris dari VMware disimpan "untuk memori", berikut adalah kutipan singkat dari percakapan kami:</font></font></li>
</ol><br>
<pre><code class="plaintext">I understood that you are now migrating all the VMs out of vSAN datastore.<font></font>
May I know, how the migration task is going on.? How many VMs left and how much time is expected to migrate the remaining VMs. ?<font></font>
There are 6 vms still need to be migrated. 1 of them is fail so far.<font></font>
How much time is expected to complete the migration for the working VMs..?<font></font>
I think atleast 2-3 hours<font></font>
ok<font></font>
Can you please SSH to vCenter server ?<font></font>
you on it<font></font>
/localhost/Datacenter ###CLUB/computers/###Cluster&gt; vsan.check_state .<font></font>
2019-02-02 05:22:34 +0300: Step 1: Check for inaccessible vSAN objects<font></font>
Detected 3 objects to be inaccessible<font></font>
Detected 7aa2265c-6e46-2f49-df40-20677c0084e0 on esxi-dl560-gen10-2.####.lan to be inaccessible<font></font>
Detected 99c3515c-bee0-9faa-1f13-20677c038dd8 on esxi-dl560-gen10-3.####.lan to be inaccessible<font></font>
Detected f1ca455c-d47e-11f7-7e90-20677c038de0 on esxi-dl560-gen10-1.####.lan to be inaccessible<font></font>
2019-02-02 05:22:34 +0300: Step 2: Check for invalid/inaccessible VMs<font></font>
Detected VM 'i.#####.ru' as being 'inaccessible'<font></font>
2019-02-02 05:22:34 +0300: Step 3: Check for VMs for which VC/hostd/vmx are out of sync<font></font>
Did not find VMs for which VC/hostd/vmx are out of sync<font></font>
/localhost/Datacenter ###CLUB/computers/###Cluster&gt;<font></font>
Thank you<font></font>
second vm with issues: sd.####.ru</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana masalah ini terwujud (di samping layanan organisasi yang telah runtuh dengan kuat). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertumbuhan eksponensial kesalahan checksum (CRC) "tiba-tiba" selama pertukaran data dengan disk dalam mode HBA. </font><font style="vertical-align: inherit;">Cara memeriksa ini - masukkan perintah berikut di konsol setiap node ESXi:</font></font><br>
<br>
<pre><code class="cs">while true; do clear; for disk in $(localcli vsan storage list | grep -B10 'ity Tier: tr' |grep "VSAN UUID"|awk '{print $3}'|sort -u);do echo ==DISK==$disk====;vsish -e get /vmkModules/lsom/disks/$disk/checksumErrors | grep -v ':0';done; sleep 3; done</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai hasil dari eksekusi, Anda dapat melihat kesalahan CRC untuk setiap disk di kluster vSAN dari simpul ini (nilai nol tidak akan ditampilkan). </font><font style="vertical-align: inherit;">Jika Anda memiliki nilai positif, dan terlebih lagi, nilai-nilai itu terus tumbuh, maka ada alasan untuk tugas yang terus-menerus muncul di Monitor -&gt; vSAN -&gt; Bagian objek yang disejajarkan dengan cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana memulihkan disk mesin virtual yang tidak mengkloning atau bermigrasi dengan cara standar? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siapa yang akan berpikir menggunakan perintah kucing yang kuat:</font></font><br>
<br>
<pre><code class="bash">1. cd      vSAN<font></font>
[root@esxi-dl560-gen10-1:~] cd /vmfs/volumes/vsanDatastore/estaff<font></font>
<font></font>
2. grep vmdk     uuid<font></font>
<font></font>
[root@esxi-dl560-gen10-1:/vmfs/volumes/vsan:52f53dfd12dddc84-f712dbefac32cd1a/2636a75c-e8f1-d9ca-9a00-20677c0084e0] grep vsan *vmdk<font></font>
estaff.vmdk:RW 10485760 VMFS "vsan://3836a75c-d2dc-5f5d-879c-20677c0084e0"<font></font>
estaff_1.vmdk:RW 41943040 VMFS "vsan://3736a75c-e412-a6c8-6ce4-20677c0084e0"<font></font>
[root@esxi-dl560-gen10-1:/vmfs/volumes/vsan:52f53dfd12dddc84-f712dbefac32cd1a/2636a75c-e8f1-d9ca-9a00-20677c0084e0]<font></font>
<font></font>
3.    VM  ,  :<font></font>
<font></font>
mkdir /vmfs/volumes/POWERVAULT/estaff<font></font>
<font></font>
4.   vmx  <font></font>
<font></font>
cp *vmx *vmdk /vmfs/volumes/POWERVAULT/estaff<font></font>
<font></font>
5.      ,      ^_^<font></font>
<font></font>
/usr/lib/vmware/osfs/bin/objtool open -u 3836a75c-d2dc-5f5d-879c-20677c0084e0; sleep 1; cat /vmfs/devices/vsan/3836a75c-d2dc-5f5d-879c-20677c0084e0 &gt;&gt; /vmfs/volumes/POWERVAULT/estaff/estaff-flat.vmdk<font></font>
<font></font>
6. cd   :<font></font>
<font></font>
 cd /vmfs/volumes/POWERVAULT/estaff<font></font>
<font></font>
7.    - estaff.vmdk     <font></font>
<font></font>
[root@esxi-dl560-gen10-1:/tmp] cat estaff.vmdk<font></font>
# Disk DescriptorFile<font></font>
version=4<font></font>
encoding="UTF-8"<font></font>
CID=a7bb7cdc<font></font>
parentCID=ffffffff<font></font>
createType="vmfs"<font></font>
<font></font>
# Extent description<font></font>
RW 10485760 VMFS "vsan://3836a75c-d2dc-5f5d-879c-20677c0084e0"      &lt;&lt;&lt;&lt;&lt;     "estaff-flat.vmdk"<font></font>
<font></font>
# The Disk Data Base<font></font>
#DDB<font></font>
<font></font>
ddb.adapterType = "ide"<font></font>
ddb.deletable = "true"<font></font>
ddb.geometry.cylinders = "10402"<font></font>
ddb.geometry.heads = "16"<font></font>
ddb.geometry.sectors = "63"<font></font>
ddb.longContentID = "6379fa7fdf6009c344bd9a64a7bb7cdc"<font></font>
ddb.thinProvisioned = "1"<font></font>
ddb.toolsInstallType = "1"<font></font>
ddb.toolsVersion = "10252"<font></font>
ddb.uuid = "60 00 C2 92 c7 97 ca ae-8d da 1c e2 3c df cf a5"<font></font>
ddb.virtualHWVersion = "8"<font></font>
[root@esxi-dl560-gen10-1:/tmp]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cara mengenali naa.xxxx ... disk dalam grup disk:</font></font><br>
<br>
<pre><code class="bash">[root@esxi-dl560-gen10-1:/vmfs/volumes] vdq -Hi<font></font>
Mappings:<font></font>
   DiskMapping[0]:<font></font>
           SSD:  naa.5000c5003024eb43<font></font>
            MD:  naa.5000cca0aa0025f4<font></font>
            MD:  naa.5000cca0aa00253c<font></font>
            MD:  naa.5000cca0aa0022a8<font></font>
            MD:  naa.5000cca0aa002500<font></font>
<font></font>
   DiskMapping[2]:<font></font>
           SSD:  naa.5000c5003024eb47<font></font>
            MD:  naa.5000cca0aa002698<font></font>
            MD:  naa.5000cca0aa0029c4<font></font>
            MD:  naa.5000cca0aa002950<font></font>
            MD:  naa.5000cca0aa0028cc<font></font>
<font></font>
   DiskMapping[4]:<font></font>
           SSD:  naa.5000c5003024eb4f<font></font>
            MD:  naa.5000c50030287137<font></font>
            MD:  naa.5000c50030287093<font></font>
            MD:  naa.5000c50030287027<font></font>
            MD:  naa.5000c5003024eb5b<font></font>
            MD:  naa.5000c50030287187<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cara mengetahui vUAN UUID untuk setiap negara ....:</font></font><br>
<br>
<pre><code class="bash">[root@esxi-dl560-gen10-1:/vmfs/volumes] localcli vsan storage list | grep -B15 'ity Tier: tr' | grep -E '^naa|VSAN UUID'<font></font>
<font></font>
naa.5000cca0aa002698:<font></font>
   VSAN UUID: 52247b7d-fed5-a2f2-a2e8-5371fa7ef8ed<font></font>
naa.5000cca0aa0029c4:<font></font>
   VSAN UUID: 52309c55-3ecc-3fe8-f6ec-208701d83813<font></font>
naa.5000c50030287027:<font></font>
   VSAN UUID: 523d7ea5-a926-3acd-2d58-0c1d5889a401<font></font>
naa.5000cca0aa0022a8:<font></font>
   VSAN UUID: 524431a2-4291-cb49-7070-8fa1d5fe608d<font></font>
naa.5000c50030287187:<font></font>
   VSAN UUID: 5255739f-286c-8808-1ab9-812454968734<font></font>
naa.5000cca0aa0025f4: &lt;&lt;&lt;&lt;&lt;&lt;&lt;<font></font>
   VSAN UUID: 52b1d17e-02cc-164b-17fa-9892df0c1726<font></font>
naa.5000cca0aa00253c:<font></font>
   VSAN UUID: 52bd28f3-d84e-e1d5-b4dc-54b75456b53f<font></font>
naa.5000cca0aa002950:<font></font>
   VSAN UUID: 52d6e04f-e1af-cfb2-3230-dd941fd8a032<font></font>
naa.5000c50030287137:<font></font>
   VSAN UUID: 52df506a-36ea-f113-137d-41866c923901<font></font>
naa.5000cca0aa002500:<font></font>
   VSAN UUID: 52e2ce99-1836-c825-6600-653e8142e10f<font></font>
naa.5000cca0aa0028cc:<font></font>
   VSAN UUID: 52e89346-fd30-e96f-3bd6-8dbc9e9b4436<font></font>
naa.5000c50030287093:<font></font>
   VSAN UUID: 52ecacbe-ef3b-aa6e-eba3-6e713a0eb3b2<font></font>
naa.5000c5003024eb5b:<font></font>
   VSAN UUID: 52f1eecb-befa-12d6-8457-a031eacc1cab</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan yang paling penting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalahnya ternyata adalah pengoperasian firmware dari pengontrol RAID yang salah dan driver HPE dengan vSAN. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelumnya, di VMware 6.7 U1, firmware yang kompatibel untuk HPE Smart Array P816i-a SR Gen10 controller di vSAN HCL adalah versi 1.98 (yang ternyata berakibat fatal bagi organisasi kami), dan sekarang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dikatakan 1.65</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selain itu, versi 1.99, yang memecahkan masalah pada waktu itu (31 Januari 2019), sudah ada di nampan HPE, tetapi mereka tidak meneruskannya ke VMware atau kami, dengan alasan kurangnya sertifikasi, terlepas dari penolakan kami dan semua itu. , kata mereka, hal utama bagi kami adalah menyelesaikan masalah dengan penyimpanan dan hanya itu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, masalah akhirnya diselesaikan hanya setelah tiga bulan, ketika versi firmware 1,99 untuk pengontrol disk dirilis!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesimpulan apa yang saya ambil?</font></font><br>
<br>
<ol>
<li>     (   ),         .</li>
<li>     !   .</li>
<li>       «» ,   «»    «»   ,    30%      «».</li>
<li>HPE,    ,           .</li>
<li> ,       :<br>
<br>
<ul>
<li>HPE -           .   ,     Enterprise       . ,    ,       ).</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya tidak melihat situasi di mana ruang disk tambahan mungkin diperlukan untuk menempatkan salinan semua server Perusahaan jika terjadi keadaan darurat.</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selain itu, mengingat apa yang telah terjadi, untuk VMware saya tidak akan lagi membeli perangkat keras untuk perusahaan besar, vendor apa pun selain DELL. </font><font style="vertical-align: inherit;">Mengapa, karena DELL, sejauh yang saya tahu, mengakuisisi VMware, dan sekarang integrasi perangkat keras dan perangkat lunak ke arah ini diharapkan sedekat mungkin.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti yang mereka katakan, dibakar dalam susu, meniup ke dalam air. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu semuanya. </font><font style="vertical-align: inherit;">Saya berharap Anda tidak pernah masuk ke dalam situasi yang begitu mengerikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seingat saya, saya sudah akan terkejut!</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id487570/index.html">Redis Praktik Terbaik, Bagian 2</a></li>
<li><a href="../id487578/index.html">Pengoptimalan CMake untuk Perpustakaan Statis</a></li>
<li><a href="../id487582/index.html">Tidak ada dewa yang membakar pot</a></li>
<li><a href="../id487584/index.html">Githabification Keamanan Informasi</a></li>
<li><a href="../id487588/index.html">Quarkus: Dokter hewan subatomik supersonik</a></li>
<li><a href="../id487594/index.html">Menghibur mnemonik: kami mengumpulkan memori pendengaran dari visual</a></li>
<li><a href="../id487596/index.html">Eugene Varavva, seorang pengembang di Google. Cara menjelaskan Google dalam 5 kata</a></li>
<li><a href="../id487604/index.html">Sematkan catatan singkat programmer: duplikasi bagian dalam memori mikrokontroler</a></li>
<li><a href="../id487606/index.html">Visualisasi garis-garis ketegangan dan gerakan muatan elektrostatik, simulasi gerakan planet tata surya</a></li>
<li><a href="../id487610/index.html">RealWorld: aiohttp, Tortoise ORM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>