<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚🏿 🚚 🕴️ Mengapa saya tidak menggunakan SharedViewModel untuk fragmen? 🐋 👨🏽‍⚖️ 🍁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habr, halo! 
 
 Tugas mengatur interaksi antara fragmen sangat umum. Pada pandangan pertama, ShareViewModel sangat bagus untuk ini. Kami membuat ViewM...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mengapa saya tidak menggunakan SharedViewModel untuk fragmen?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504712/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habr, halo! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas mengatur interaksi antara fragmen sangat umum. Pada pandangan pertama, ShareViewModel sangat bagus untuk ini. Kami membuat ViewModel dengan pemilik = aktivitas kami, di mana fragmen kami ditampilkan, dan memasukkan ViewModel ini ke dalam setiap fragmen. Karena pemilik ViewModel adalah aktivitas, fragmen mendapatkan instance yang sama dari ViewModel, yang memungkinkan mereka untuk bertukar data, metode panggilan, dll. Ini tautan dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gambar di bawah ini menunjukkan skema interaksi 3 fragmen. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/367/ad4/04f/367ad404f3bf81ec55692ad5c7fc7ac7.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu apa yang kami lakukan: di setiap fragmen kami mendapatkan SharedViewModel dari fragmen-fragmen yang kami perlukan untuk berinteraksi ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan ini bukan solusi terbaik, menurut saya. Karena:</font></font><br>
<a name="habracut"></a><br>
<ol>
<li>    *VM.   ViewModel   View. ViewModel   LiveData,   View,    .. ViewModel    - ,   View.</li>
<li>  SharedViewModel —     .   ,    SharedViewModel ,    ,     .     - . </li>
<li>       SharedViewModel,         .       ,     ,        . </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SharedViewModel hanya dapat digunakan ketika ada beberapa fragmen yang sama persis dengan data yang sama. Dalam praktik saya, tidak ada skenario seperti itu. Mungkin ada dua fragmen identik, tetapi keadaan ViewModel masing-masing berbeda, SharedViewModel tidak valid untuk mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SharedViewModel membawa banyak masalah. Anda mulai bingung, semuanya ditumbuhi dependensi, kodenya rumit. Jauh lebih mudah untuk bekerja ketika Fragment + ViewModel adalah kotak hitam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solusi apa yang bisa ditawarkan? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan sederhana yang setiap fragmen berinteraksi dengan caranya sendiri.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/de9/a92/247/de9a92247d6d9f0cd0c1d9bbdf7bbe6c.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Layanan ini harus dilewati di dalam setiap ViewModel. Berkat DI dan ruang lingkup (Belati, Koin, yang lainnya) ini dapat dilakukan dengan mudah dan sederhana. Jika layanan harus hidup dalam konteks suatu Aktivitas, buatlah dalam Lingkup Kegiatan ini dan berikan ke setiap ViewModel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lihat apa yang terjadi: kami menghapus semua SharedViewModel dari fragmen. Setiap fragmen sekarang tidak tahu apa-apa tentang fragmen lainnya. Jika kami ingin menambahkan fragmen baru ke skema ini, maka kami hanya perlu menghubungkan viewModel D dengan layanan kami dan hanya itu. Jika fragmen tersebut merespons perubahan dalam beberapa properti layanan - berlangganan saja. Kita tidak perlu lagi memahami ViewModels orang lain. Dan layanan ini akan jauh lebih sederhana daripada ViewModel mana pun, akan lebih mudah untuk memahami layanan ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampaknya tidak banyak fragmen yang berinteraksi di satu layar. </font><font style="vertical-align: inherit;">Di telepon - mungkin. </font><font style="vertical-align: inherit;">Di tablet - Anda tidak bisa mengatakan itu lagi. </font><font style="vertical-align: inherit;">Dan FragmentContainerView membantu menggunakan fragmen dalam tata letak apa pun, yang sangat nyaman jika aplikasi memiliki banyak komponen umum dengan siklus hidup.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonus: bagaimana cara membuat fragmen?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti ini: SomeFragment () </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan bagaimana dengan parameternya? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan munculnya ViewModel, saya tidak menggunakan parameter. </font><font style="vertical-align: inherit;">Saya tidak meneruskan apa pun ke fragmen melalui bundel (Android Studio masih menawarkan untuk membuat fragmen dengan argumen dan membuat fragmen melalui metode statis), saya tidak menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Safety NavArgs untuk Komponen Navigasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua hal ini membuat fragmen dikondisikan. Kami tidak bisa hanya mengambil fragmen seperti itu dan menambahkannya ke ViewPager, misalnya. Orang harus berpikir bagaimana cara melewati parameter. Atau contoh lain: Anda membuat fragmen dengan parameter, bekerja di dalamnya, data telah berubah, fragmen sudah menunjukkan sesuatu yang lain. Kami mengubah konfigurasi perangkat (terbalik), fragmen dibuat lagi dengan parameter yang ketinggalan zaman, sementara ViewModel sudah berisi data lain. Dan aktualisasi parameter, dll dimulai. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya menghapus semua ini di ViewModel. Saya menggunakan layanan yang sama di mana saya melewati parameter. Ini bekerja seperti Safety NavArgs. ViewModel meminta parameter dari layanan dengan jenis kelas parameter. Setelah berhasil mengambil parameter, layanan menghapusnya (berfungsi seperti Push / Pop).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini segera memecahkan masalah mengubah konfigurasi: fragmen itu dibuat lagi, dan Model View sudah dengan data saat ini, semua yang diperlukan adalah untuk menghubungkannya dengan Tampilan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada juga masalah ketika meneruskan parameter melalui bundel - ini merupakan kelebihan dari jumlah yang diizinkan. </font><font style="vertical-align: inherit;">Jika jumlah data yang ditransfer lebih dari 500 kb., Maka aplikasi mungkin macet karena pengecualian di dalam Binder.java. </font><font style="vertical-align: inherit;">Hal ini menyebabkan penciptaan berbagai perpustakaan yang mengirimkan parameter melalui SD, yang tidak terlalu cepat dibandingkan dengan menggunakan RAM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, alatnya keren, semuanya fleksibel, tetapi Anda harus berhati-hati. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja, terima kasih sudah menonton!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id504700/index.html">"Sketsa" tablet grafis Soviet</a></li>
<li><a href="../id504702/index.html">Orang tidak mau tahu bahasa Inggris</a></li>
<li><a href="../id504706/index.html">Manajemen Daya Wi-Fi Otomatis</a></li>
<li><a href="../id504708/index.html">Masalah sertifikat Sectigo setelah 30 Mei 2020 dan metode solusi</a></li>
<li><a href="../id504710/index.html">FOSS News No. 18 - ulasan berita gratis dan sumber terbuka untuk 25-31 Mei 2020</a></li>
<li><a href="../id504714/index.html">Go alat pengukuran perangkat lunak</a></li>
<li><a href="../id504716/index.html">Akses aman ke rumah pintar tanpa adanya IP publik (bagian 1)</a></li>
<li><a href="../id504718/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 417 (25 - 31 Mei, 2020)</a></li>
<li><a href="../id504720/index.html">Mesin templat tercepat untuk PHP</a></li>
<li><a href="../id504722/index.html">HLS dalam MP4 menggunakan ffmpeg di browser</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>