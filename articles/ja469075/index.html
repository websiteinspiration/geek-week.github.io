<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌖 👝 🌅 Grokay DLR 🛣️ 👨‍👩‍👦 ◾️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="翻訳者によるまえがき
 
 これは、翻訳よりも無料で語り直すことです。この記事では、DLRの内部メカニズムに直接関連する、または重要なアイデアを説明するオリジナルの部分のみを含めました。ノートは角括弧で囲まれます。
 
 多くの.NET開発者は動的言語ランタイム（DLR）について聞いたことがあります...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Grokay DLR</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469075/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者によるまえがき</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これは</font><b><font style="vertical-align: inherit;">、翻訳</font></b><font style="vertical-align: inherit;">よりも無料で語り直すことです。</font><font style="vertical-align: inherit;">この記事では、DLRの内部メカニズムに直接関連する、または重要なアイデアを説明するオリジナルの部分のみを含めました。</font><font style="vertical-align: inherit;">ノートは角括弧で囲まれます。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの.NET開発者は動的言語ランタイム（DLR）について聞いたことがありますが、それについてほとんど何も知りません。 C＃やVisual Basicなどの言語で作成する開発者は、歴史的に関連するスケーラビリティの問題を恐れて、動的型付け言語を避けます。彼らはまた、PythonやRubyなどの言語がコンパイル時に型チェックを実行しないため、実行時エラーが発生し、検出や修正が困難になることも懸念しています。これらは、公式リリースから2年経ってもDLRが.NET開発者の大多数の間で人気がない理由を説明する根拠のある恐怖です</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[記事はかなり古いですが、それ以来何も変わっていません]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。最後に、任意の.NET </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランタイムは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言葉を含む</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダイナミック</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とを</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その名前の</font><i><font style="vertical-align: inherit;">言語</font></i><font style="vertical-align: inherit;">は、Pythonなどの言語をサポートするために厳密に意図されたものである必要がありますよね？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
徐行。</font><font style="vertical-align: inherit;">DLRは.NET FrameworkでのPythonおよびRubyのIron実装をサポートするように設計されていますが、そのアーキテクチャはより深い抽象化を提供します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9p/co/0r/9pco0rjy7-sqeqb0hzgdngobjky.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
内部的には、DLRはプロセス間通信[プロセス間通信（IPC）]のための豊富なインターフェイスセットを提供します。</font><font style="vertical-align: inherit;">長年にわたって、開発者はアプリケーション間の相互作用のための多くのMicrosoftツールを見てきました。DDE、DCOM、ActiveX、.Net Remoting、WCF、OData。</font><font style="vertical-align: inherit;">このリストは長い間続くかもしれません。</font><font style="vertical-align: inherit;">これは頭​​字語のほぼ無限のパレードであり、それぞれが今年は以前よりもデータの交換やリモートコードの呼び出しがさらに容易になることを約束するテクノロジーを表しています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語の言語</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジムフグニンがDLRについて話すのを初めて聞いたとき、彼のスピーチは私を驚かせました。</font><font style="vertical-align: inherit;">ジムは、Jythonと呼ばれるJava仮想マシン（JVM）のPython実装を作成しました。</font><font style="vertical-align: inherit;">ショーの少し前に、彼はMicrosoftに入社し、IronPython for .NETを作成しました。</font><font style="vertical-align: inherit;">彼の背景に基づいて、私は彼が言語に集中することを期待しましたが、代わりに、ジムはほとんど常に、式ツリー、動的コールディスパッチ、およびコールキャッシュメカニズムなどの厄介なことについて話しました。</font><font style="vertical-align: inherit;">ジムは、2つの言語が実質的にパフォーマンスを低下させることなく相互にやり取りできるようにするランタイムコンパイルサービスのセットについて説明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このスピーチの最中に、ジムがDLRアーキテクチャに指示するのを聞いたときに頭に浮かんだ言葉を書きました：« </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> »[言語の言語]。 4年後、このニックネームはDLRを非常に正確に特徴付けています。しかし、実際にそれを使用する経験を積んでいたので、DLRは言語の互換性だけではないことに気付きました。 C＃およびVisual Basicでの動的タイプのサポートのおかげで、DLRは、使用する機器やソフトウェアのタイプに関係なく、お気に入りの.NET言語からリモートシステムのデータやコードへのゲートウェイとして機能できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sp/l2/k3/spl2k3kcuitbvqg151r1wfx_zzc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPC言語の統合メカニズムであるDLRの背後にある考え方を理解するために、動的プログラミングとは何の関係もない例から始めましょう。 2つのコンピュータシステムを想像してください。1つはイニシエータと呼ばれ、もう1つはターゲットシステムです。イニシエーターは関数</font><b><font style="vertical-align: inherit;">foo</font></b><font style="vertical-align: inherit;">を実行する必要があります</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ターゲットシステムで、特定のパラメータセットを渡して、結果を取得します。</font><font style="vertical-align: inherit;">ターゲットシステムが検出された後、イニシエーターは、関数の実行に必要なすべての情報を、明確な形式で提供する必要があります。</font><font style="vertical-align: inherit;">この情報には、少なくとも、関数の名前と渡されたパラメーターが含まれます。</font><font style="vertical-align: inherit;">リクエストをアンパックしてパラメータを検証した後、ターゲットシステムはfoo関数を実行します。</font><font style="vertical-align: inherit;">その後、実行中に発生したエラーを含む結果をパックし、イニシエーターに送り返します。</font><font style="vertical-align: inherit;">最後に、開始者は結果を解凍して目標を通知できる必要があります。</font><font style="vertical-align: inherit;">この要求/応答パターンは非常に一般的であり、高レベルではほとんどすべてのIPCメカニズムの動作を説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動的メタオブジェクト</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DLRが提示されたパターンをどのように実装するかを理解するために、DLRの中心的なクラスの1つである</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicMetaObjectを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">見てみましょう</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このタイプの12の主要なメソッドのうち3つを探ることから始めます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindCreateInstance-オブジェクトを作成またはアクティブ化する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindInvokeMember-カプセル化されたメソッドを呼び出す</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindInvoke-オブジェクトの実行（関数として）</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リモートシステムでメソッドを実行する必要がある場合は、まずそのタイプのインスタンスを作成する必要があります。もちろん、すべてのシステムがオブジェクト指向であるわけではないので、インスタンスという用語はメタファーになる可能性があります。実際、必要なサービスはオブジェクトのプールまたはシングルトンとして実装できるため、「インスタンス化」と同じ権限で「アクティブ化」または「接続」という用語を使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のフレームワークも同じパターンに従います。たとえば、COMは</font><font style="vertical-align: inherit;">オブジェクトを作成するための</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoCreateInstance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">提供し</font><font style="vertical-align: inherit;">ます。 .NET Remotingでは</font><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">System.Activator</font></b><font style="vertical-align: inherit;">クラスの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CreateInstance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドを</font><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">DLRの</font><b><font style="vertical-align: inherit;">DynamicMetaObject</font></b><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、同様の目的で</font><b><font style="vertical-align: inherit;">BindCreateInstance</font></b><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">提供し</font><font style="vertical-align: inherit;">ます。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindCreateInstance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メソッドを使用した後</font><font style="vertical-align: inherit;">、作成された</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、いくつかのメソッドを公開するタイプになります。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindInvokeMemberメタ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクト</font><b><font style="vertical-align: inherit;">メソッドは</font></b><font style="vertical-align: inherit;">、関数を呼び出すことができる操作をバインドするために使用されます。上の図では、文字列fooをパラメーターとして渡して、その名前のメソッドを呼び出す必要があることをバインダーに示すことができます。さらに、引数の数、その名前、および適切な名前付き要素を検索するときに大文字と小文字を無視できるかどうかをバインダーに示す特別なフラグに関する情報も含まれます。結局のところ、すべての言語で大文字と小文字が区別されるわけではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ときに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何かが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から返さ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindCreateInstance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-これは1つの関数（またはデリゲート）であり、BindInvokeメソッドが使用されます。全体像を明確にするために、次の小さな動的コードを見てみましょう。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">IntWriter</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> n</span>)</span>;<font></font>
    <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span> {
  <span class="hljs-keyword">dynamic</span> Write =
    <span class="hljs-keyword">new</span> IntWriter(Console.WriteLine);<font></font>
  Write(<span class="hljs-number">5</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは、番号5をコンソールに出力するための最良の方法ではありません。優れた開発者は、無駄なものは一切使用しません。ただし、このコードは、値が関数として使用できるデリゲートである動的変数の使用を示しています。デリゲート型が</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDynamicMetaObjectProvider</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェイスを実装している場合、</font><b><font style="vertical-align: inherit;">DynamicMetaObject</font></b><font style="vertical-align: inherit;">の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindInvoke</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して、操作を実際の作業にバインドします。これは、動的</font><b><font style="vertical-align: inherit;">Write</font></b><font style="vertical-align: inherit;">オブジェクトが</font><i><font style="vertical-align: inherit;">構文的に</font></i><font style="vertical-align: inherit;">関数として使用されている</font><font style="vertical-align: inherit;">ことをコンパイラが認識するため</font><font style="vertical-align: inherit;">です。次に、コンパイラーが</font><b><font style="vertical-align: inherit;">BindInvokeMember</font></b><font style="vertical-align: inherit;">を生成する</font><b><font style="vertical-align: inherit;">タイミング</font></b><font style="vertical-align: inherit;">を理解するために、別のコードを検討します</font><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b> <i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">class</span> <span class="hljs-title">Writer</span> :
  <span class="hljs-title">IDynamicMetaObjectProvider</span> {
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Write</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> n</span>)</span> {<font></font>
    Console.WriteLine(n);<font></font>
  }<font></font>
  <span class="hljs-comment">//   </span><font></font>
}<font></font>
    <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"></span>)</span> {
  <span class="hljs-keyword">dynamic</span> Writer = <span class="hljs-keyword">new</span> Writer();<font></font>
  Writer.Write(<span class="hljs-number">7</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この小さな例では、インターフェースの実装を省略します。これを正しく示すには多くのコードが必要になるためです。この短い例では、数行のコードで動的メタオブジェクトを実装します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理解しておくべき重要なことは、コンパイラは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Writer.Write（7）</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が要素アクセス操作である</font><font style="vertical-align: inherit;">ことを認識するということ</font><b><font style="vertical-align: inherit;">です</font></b><font style="vertical-align: inherit;">。通常C＃で「ドット演算子」と呼ばれるものは、正式には「タイプメンバーアクセス演算子」と呼ばれます。この場合にコンパイラーによって生成されたDLRコードは、最終的に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindInvokeMemberを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出し</font><font style="vertical-align: inherit;">、そこに文字列Writeおよびパラメーター番号7を、呼び出しを実行できる操作に渡します。要するに、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindInvoke</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動的オブジェクトを関数として呼び出すために使用され、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindInvokeMemberは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">動的オブジェクトの要素としてメソッドを呼び出すために使用されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicMetaObjectを介してプロパティにアクセスする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例から、コンパイラーは言語構文を使用して、実行する必要のあるDLRバインディング操作を決定することがわかります。</font><font style="vertical-align: inherit;">Visual Basicを使用して動的オブジェクトを操作する場合は、そのセマンティクスが使用されます。</font><font style="vertical-align: inherit;">もちろん、アクセス演算子（ドット）は、メソッドへのアクセスだけでなく必要です。</font><font style="vertical-align: inherit;">これを使用してプロパティにアクセスできます。</font><font style="vertical-align: inherit;">DLRメタオブジェクトは、動的オブジェクトのプロパティにアクセスするための3つのメソッドを提供します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindGetMember-プロパティ値を取得</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindSetMember-プロパティの値を設定する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindDeleteMember-アイテムを削除します</font></font></li>
</ol><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindGetMember</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindSetMember</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
の目的は</font><font style="vertical-align: inherit;">明白です。</font><font style="vertical-align: inherit;">特に、.NETがプロパティを処理する方法にどのように関連するかを理解しました。</font><font style="vertical-align: inherit;">コンパイラー</font><font style="vertical-align: inherit;">は、動的オブジェクト</font><font style="vertical-align: inherit;">の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（「読み取り」）プロパティーを</font><font style="vertical-align: inherit;">計算するときに、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindGetMemberの</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しを使用します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コンパイラーがセット（「レコード」）を計算するときは、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindSetMemberを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列としてのオブジェクトの表現</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一部のクラスは、他のタイプのインスタンスのコンテナです。</font><font style="vertical-align: inherit;">DLRはそのような場合の処理​​方法を知っています。</font><font style="vertical-align: inherit;">各「配列指向」のメタオブジェクトメソッドには、「インデックス」の接尾辞があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindGetIndex-インデックスで値を取得</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindSetIndex-インデックスで値を設定</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindDeleteIndex-インデックスによって値を削除します</font></font></li>
</ol><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindGetIndex</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindSetIndexが</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
どのように</font><b><font style="vertical-align: inherit;">使用される</font></b><font style="vertical-align: inherit;">かを理解するために</font><font style="vertical-align: inherit;">、Javaクラスでファイルをロードでき、.NETコードから問題なくそれらを使用できる</font><font style="vertical-align: inherit;">ようにする</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaBridge</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ラッパー</font><b><font style="vertical-align: inherit;">クラス</font></b><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">想像して</font><b><font style="vertical-align: inherit;">ください</font></b><font style="vertical-align: inherit;">。このようなラッパーを使用し</font><font style="vertical-align: inherit;">て、ORMコードを含む</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Customer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Javaクラスをロードでき</font><font style="vertical-align: inherit;">ます。 DLRメタオブジェクトを使用して、このORMコードを.NETからクラシックC＃スタイルで呼び出すことができます。以下は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaBridge</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が実際に</font><font style="vertical-align: inherit;">どのように</font><b><font style="vertical-align: inherit;">機能</font></b><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">かを示すサンプルコードです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs">JavaBridge java = <span class="hljs-keyword">new</span> JavaBridge();
<span class="hljs-keyword">dynamic</span> customers = java.Load(<span class="hljs-string">"Customer.class"</span>);
<span class="hljs-keyword">dynamic</span> Jason = customers[<span class="hljs-string">"Bock"</span>];<font></font>
Jason.Balance = <span class="hljs-number">17.34</span>;<font></font>
customers[<span class="hljs-string">"Wagner"</span>] =
     <span class="hljs-keyword">new</span> Customer(<span class="hljs-string">"Bill"</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第3及び第5ラインはインデックス（[]）によってアクセス演算子を使用しているので、コンパイラはこれを認識し、使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindGetIndex</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindSetIndex方法を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から返されたメタオブジェクトを操作するとき</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaBridge</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。返されたオブジェクトにこれらのメソッドを実装すると、Java Remote Method Invocation（RMI）を介してJVMからのメソッドの実行が要求されることがわかります。このシナリオでは、DLRはC＃と静的型付けを使用する別の言語との間のブリッジとして機能します。うまくいけば、これがなぜ私がDLRを「言語の言語」と呼んだのかを明らかにします。</font><b><font style="vertical-align: inherit;">BindDeleteMemberの</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
方法</font><font style="vertical-align: inherit;">と同じように、</font><b><font style="vertical-align: inherit;">BindDeleteIndex</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、C＃やVisual Basicなどの静的型付けを使用する言語からの使用を意図していません。それらは概念自体をサポートしていないためです。</font><font style="vertical-align: inherit;">ただし、言語の意味で表現された操作を「削除」することを検討することに同意する場合は、それが役立つ場合があります。</font><font style="vertical-align: inherit;">たとえば、BindDeleteMemberをインデックスによって要素をnullとして実装できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変換と演算子</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DLRメタオブジェクトメソッドの最後のグループは、演算子と変換の処理についてです。 </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindConvert-オブジェクトを別のタイプに変換します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindBinaryOperation-2つのオペランドで2項演算子を使用する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindUnaryOperation-1つのオペランドに単項演算子を適用する</font></font></li>
</ol><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindConvert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メソッド</font><b><font style="vertical-align: inherit;">は</font></b><font style="vertical-align: inherit;">、オブジェクトを別の既知の型に変換する必要があることをコンパイラが認識したときに使用されます。暗黙的な変換は、動的呼び出しの結果が静的型の変数に割り当てられるときに発生します。たとえば、次のC＃の例では、変数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">割り当てる</font><font style="vertical-align: inherit;">と、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindConvertが</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗黙的に呼び出され</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">dynamic</span> x = <span class="hljs-number">13</span>;
<span class="hljs-keyword">int</span> y = x + <span class="hljs-number">11</span>;</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindBinaryOperation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindUnaryOperation方法は、</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">算術演算（「+」）または増分が（「++」）検出されたときに常に使用されます。</font><font style="vertical-align: inherit;">上記の例では、動的変数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を定数11 </font><font style="vertical-align: inherit;">に追加</font><font style="vertical-align: inherit;">すると、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindBinaryOperation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドが呼び出されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この小さな例を覚えておいてください。次のセクションでそれを使用して、CallSiteと呼ばれる別の主要なDLRクラスを強打します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CallSiteによる動的ディスパッチ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DLRの紹介で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dynamic</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーワードを使用する以外に方法がない場合は、</font><font style="vertical-align: inherit;">おそらく.NET FrameworkにCallSiteが存在することを知らなかっただろう。この控えめなタイプは、正式には</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CallSite </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">呼ばれ</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System.Runtime.CompilerServices名前空間に</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在し</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。これは、メタプログラミングの「動力源」です。動的な.NETコードを高速かつ効率的にするあらゆる種類の最適化メソッドで満たされています。</font><font style="vertical-align: inherit;">記事の最後で、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CallSite </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パフォーマンスについて触れ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CallSiteが動的.NETコードで行うことのほとんどは、ランタイムでコードを生成およびコンパイルすることです。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CallSite </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラス</font><font style="vertical-align: inherit;">は、「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Runtime</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」および「</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CompilerServices</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font><font style="vertical-align: inherit;">という単語を含む名前空間にあること</font><font style="vertical-align: inherit;">に注意することが重要</font><font style="vertical-align: inherit;">です。 DLRが「言語の言語」である場合、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CallSite </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はその最も重要な文法構造の1つです。前のセクションの例をもう一度見て、CallSiteと、コンパイラーがそれらをコードに埋め込む方法を理解しましょう。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">dynamic</span> x = <span class="hljs-number">13</span>;
<span class="hljs-keyword">int</span> y = x + <span class="hljs-number">11</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたはすでに知っているように、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindBinaryOperaion</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindConvert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法は、このコードを実行するために呼び出されます</font><font style="vertical-align: inherit;">。コンパイラーによって生成された逆アセンブルされたMSILコードの長いリストを表示する代わりに、図を作成</font></font><br>
<br>
<img src="https://habrastorage.org/webt/c8/pw/0o/c8pw0osalzvckhg3w6b3eddlik4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しました。コンパイラーは言語構文を使用して、実行する動的型メソッドを決定することに注意してください。この例では、2つの操作が実行されます。変数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を数値に</font><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Site2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、結果をintにキャストし</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Site1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。これらの各アクションは、特別なコンテナに格納されているCallSiteに変わります。図からわかるように、CallSiteは逆の順序で作成されますが、正しい方法で呼び出されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
図では</font><font style="vertical-align: inherit;">、操作「create CallSite1」および「create CallSite2」の直前に</font><b><font style="vertical-align: inherit;">メタ</font></b><font style="vertical-align: inherit;">オブジェクトメソッド</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindConvert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BindBinaryOperation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が呼び出されていることがわかります。</font><font style="vertical-align: inherit;">ただし、バインドされた操作は最後にのみ実行されます。</font><font style="vertical-align: inherit;">視覚化が、メソッドのバインドと呼び出しがDLRコンテキストでの異なる操作であることを理解するのに役立つことを願っています。</font><font style="vertical-align: inherit;">さらに、バインディングは1回だけ発生しますが、呼び出しは必要な回数だけ発生し、すでに初期化されたCallSiteを再利用してパフォーマンスを最適化します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単な方法に従ってください</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DLRの中心にある式ツリーは、上記の12のバインディングメソッドに関連付けられた関数を生成するために使用されます。</font><font style="vertical-align: inherit;">多くの開発者は常にLINQを使用した式ツリーに直面していますが、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IDynamicMetaObjectProvider</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントラクト</font><font style="vertical-align: inherit;">を完全に実装するのに十分な経験を積んでいる開発者はわずか</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">さいわい、.NET Frameworkには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる基本クラスが含まれており、</font><font style="vertical-align: inherit;">ほとんどの作業を処理します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
独自の動的クラスを作成するには、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を継承し</font><font style="vertical-align: inherit;">、次の12のメソッドを実装</font><font style="vertical-align: inherit;">するだけです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryCreateInstance</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryInvokeMember</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トライインボーク</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryGetMember</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrySetMember</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryDeleteMember</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryGetIndex</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TrySetIndex</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryDeleteIndex</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">試してみる</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryBinaryOperation</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TryUnaryOperation</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッド名はおなじみですか？</font><b><font style="vertical-align: inherit;">BindCreateInstance</font></b><font style="vertical-align: inherit;">や</font><b><font style="vertical-align: inherit;">BindInvoke</font></b><font style="vertical-align: inherit;">などのメソッドを含む</font><font style="vertical-align: inherit;">、Abstract </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicMetaObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの要素の調査が終了したので、これを行う必要があります</font><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">DynamicMetaObject</font></b><font style="vertical-align: inherit;">クラス</font><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">唯一のメソッドから</font><b><font style="vertical-align: inherit;">DynamicMetaObject</font></b><font style="vertical-align: inherit;">を返す</font><b><font style="vertical-align: inherit;">IDynamicMetaObjectProviderの</font></b><font style="vertical-align: inherit;">実装を提供します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">メタオブジェクトの基本実装に関連付けられている操作は、</font><b><font style="vertical-align: inherit;">DynamicObject</font></b><font style="vertical-align: inherit;">インスタンスで「Try」で始まるメソッドへの呼び出しを委任するだけ</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">あなたがしなければならないすべて</font><font style="vertical-align: inherit;">は、から継承されたクラスの</font><b><font style="vertical-align: inherit;">TryGetMember</font></b><font style="vertical-align: inherit;">や</font><b><font style="vertical-align: inherit;">TrySetMemberの</font></b><font style="vertical-align: inherit;">ようなメソッドをオーバーロードすることです</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DynamicObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メタオブジェクトは式ツリーのすべてのダーティな作業を引き受けます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッシング</font></font></h2><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[キャッシュに関する詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DLRに関する以前の記事を参照して</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ください]</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
開発者が動的言語を使用する場合の最大の懸念事項は、パフォーマンスです。</font><font style="vertical-align: inherit;">DLRはこれらの経験を払拭するために並外れた措置をとります。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CallSite </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt; </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T </font></font></b><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;が</font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System.Runtime.CompilerServices</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる名前空間にあるという</font><font style="vertical-align: inherit;">事実について簡単に触れました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同じ名前空間には、マルチレベルキャッシュを提供する他のいくつかのクラスがあります。</font><font style="vertical-align: inherit;">これらのタイプを使用して、DLRは動的操作を高速化するために、3つの主要なレベルのキャッシングを実装します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グローバルキャッシュ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカルキャッシュ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポリモーフィックデリゲートキャッシュ</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キャッシュは、特定のCallSiteのバインディングを作成するためのリソースの不要な無駄を避けるために使用されます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字列</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の2つのオブジェクト</font><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を返す動的メソッドに渡されると</font><font style="vertical-align: inherit;">、グローバルまたはローカルキャッシュが結果のバインディングを保存します。</font><font style="vertical-align: inherit;">これにより、以降の呼び出しが大幅に簡略化されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CallSite自体の内部にあるデリゲートキャッシュは、ポリモーフィックと呼ばれます。これらのデリゲートは、実行される動的コードと、それらを生成するために使用された他のキャッシュからのルールに応じて、異なる形式をとることがあるためです。</font><font style="vertical-align: inherit;">デリゲートキャッシュは、インラインキャッシュとも呼ばれます。</font><font style="vertical-align: inherit;">この用語を使用する理由は、DLRとそのバインダーによって生成された式が、他の.NETコードと同様にJITコンパイルを通過するMSILコードに変換されるためです。</font><font style="vertical-align: inherit;">実行時のコンパイルは、プログラムの「通常の」実行と同時に発生します。</font><font style="vertical-align: inherit;">プログラムの実行中に動的な動的コードをコンパイル済みのMSILコードに変換すると、アプリケーションのパフォーマンスに大きな影響を与える可能性があるため、キャッシングメカニズムが不可欠です。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja469049/index.html">Luaでビジネスロジックを作成する理由</a></li>
<li><a href="../ja469055/index.html">オープンスペースでの禅の練習</a></li>
<li><a href="../ja469061/index.html">Rust 1.38.0リリース：パイプラインコンパイル、＃マクロおよびstdの[非推奨] ::::::::タイプ名</a></li>
<li><a href="../ja469071/index.html">人工知能マイクロソフトが麻雀を習得</a></li>
<li><a href="../ja469073/index.html">シリーズを合計する方法の離散微分または要約</a></li>
<li><a href="../ja469077/index.html">Microsoftの新しいPythonコース[英語]</a></li>
<li><a href="../ja469079/index.html">Visual Studio CodeのPython：9月の拡張機能の更新</a></li>
<li><a href="../ja469085/index.html">パスワードで保護されたマイコンRenesas M16Cからソフトウェアを取り出します</a></li>
<li><a href="../ja469093/index.html">あまり一般的ではなく、あまり人気のないCLIライブラリの比較：cliff、plac、plumbumなど（パート2）</a></li>
<li><a href="../ja469095/index.html">ML.NETおよびモデルビルダーの更新がリリースされました：新機能</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>