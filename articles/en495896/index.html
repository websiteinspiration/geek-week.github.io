<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåá ü•† üíáüèΩ Use-sound Package: Sound Effects in React Applications üëÜüèæ üë®‚Äçüè≠ üëµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Maybe the fact is that I was professionally engaged in sound, but I want the web to be louder. 
 
 I know that many will not support me in this desire...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Use-sound Package: Sound Effects in React Applications</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495896/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maybe the fact is that I was professionally engaged in sound, but I want the web to be louder. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I know that many will not support me in this desire. </font><font style="vertical-align: inherit;">And not without reason! </font><font style="vertical-align: inherit;">Historically, sounds on the Internet were used extremely unsuccessfully and ugly:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the early days of the web, some pages played background MIDI music.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pop-up scammers use sounds to achieve their bad goals. </font><font style="vertical-align: inherit;">They, with the help of sounds, seek to attract the attention of users and make fraud more believable.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The sound is present in automatically starting videos (well, this is absolutely a nightmare).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
True, I am sure that completely abandoning the sound is as if a child is splashed out with water. Sounds can emphasize user actions; they can enhance feedback. The sound can brighten up a little boring actions. If the sounds on the web pages are used with taste, they can improve the user's experience of the project, making it more ‚Äútangible‚Äù and real. </font><font style="vertical-align: inherit;">
This idea is not new: in games and in mobile applications sounds are constantly used. In fact, the web is a strange exception to the general trend. Most digital products that come to my mind use sounds. I'm not talking about the tactile response that is used in mobile applications to bring them closer to reality.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/b-/6n/zy/b-6nzyre8opiksyua24jajetxqu.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the course of working on my blog, I wanted to experiment with sound. Many of the interface elements of my blog that users interact with produce quiet short sounds. For example, in the upper right part of the </font><font style="vertical-align: inherit;">blog‚Äôs </font><font style="vertical-align: inherit;">home </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> there are a couple of buttons to switch themes and to turn sound on and off. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since sounds on the web are rarely used, their use can have a great impact on the perception of the site by users. This is a kind of secret weapon of the developer, the use of which can lead to a surprisingly large positive impact on certain projects.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to simplify the use of sounds, I designed the hook used by me to work with sounds in the form of an independent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm package</font></font></a> <code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and published it. </font><font style="vertical-align: inherit;">Here I will talk about the capabilities of this hook and share tips on using sound on the web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you are eager to see the code and start using this hook - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here is</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> its GitHub repository.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Overview</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The package </font></font><code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is a React hook that helps developers use sound effects. </font><font style="vertical-align: inherit;">Here is an example:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> useSound <span class="hljs-keyword">from</span> <span class="hljs-string">'use-sound'</span>;
<span class="hljs-keyword">import</span> boopSfx <span class="hljs-keyword">from</span> <span class="hljs-string">'../../sounds/boop.mp3'</span>;
<span class="hljs-keyword">const</span> BoopButton = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play] = useSound(boopSfx);
&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{play}</span>&gt;</span>Boop!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using this hook adds approximately 1 Kb to the project build. </font><font style="vertical-align: inherit;">True, he, in asynchronous mode, loads a third-party </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Howler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dependency </font><font style="vertical-align: inherit;">, the size of which is 10 KB. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The hook gives the developer many nice features. </font><font style="vertical-align: inherit;">Among them, I want to note the following:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prematurely stop playback, as well as pause and resume playback.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Downloading something like a sound ‚Äúsprite sheet‚Äù and dividing it into separate sounds.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setting the playback speed with the ability to speed up and slow down the playback of sounds.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lots of event listeners.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Many advanced features available thanks to Howler.</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the hook documentation where you can find a detailed guide to its use and API reference.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use-sound basics</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçInstallation</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First you need to install the package using yarn or npm:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#  yarn</span><font></font>
yarn add use-sound<font></font>
<span class="hljs-comment">#  NPM</span><font></font>
npm install use-sound<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Import</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The package </font></font><code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exports the only default value - this is a hook </font></font><code>useSound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">You can import it like this:</font></font><br>
<br>
<pre><code class="bash hljs">import useSound from <span class="hljs-string">'use-sound'</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, you will need to import the audio files that you plan to use. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If, when working on React projects, you use something like </font></font><code>create-react-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby, then you should be able to import MP3 files in the same way as you import other resources - like images:</font></font><br>
<br>
<pre><code class="bash hljs">import boopSfx from <span class="hljs-string">'../../sounds/boop.mp3'</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you use a self-written Webpack configuration, then you will need to use the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file-loader loader</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to process .mp3 files </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, you can work with sound files placed in folders </font></font><code>public</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><code>static</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">For example, the demos shown in this article use static files located in a public folder.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Search and prepare sounds</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installing dependencies and writing code is only half the battle. </font><font style="vertical-align: inherit;">For scoring pages, we need to select the appropriate sounds. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
My favorite resource to look for sounds on is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">freesound.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Almost all the sounds used in my blog, I found there. </font><font style="vertical-align: inherit;">There are many sounds licensed under </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creative Commons Zero</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">To download files you need to register on the resource. </font><font style="vertical-align: inherit;">You can use sounds for free.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Be prepared for the fact that in order to select the right sound you have to seriously rummage through the contents of freesound.org. </font><font style="vertical-align: inherit;">The point here is, for example, that many sounds are of poor quality. </font><font style="vertical-align: inherit;">The process of finding the right sound can be compared to the process of searching for a needle in a haystack. </font><font style="vertical-align: inherit;">And the preparation of the sound found for actual use resembles a facet of uncut diamond.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçPreparation of sounds</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Many sounds taken from freesound.org need some improvements:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sounds, like strings, can be framed by empty space. </font><font style="vertical-align: inherit;">Silence fragments are usually cut out, as a result, the corresponding sound effect is reproduced immediately after the occurrence of the voiced event.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When preparing sounds, you may need to adjust their volume, making it so that all sounds used in one project have the same volume.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freesound.org has sounds stored in various audio formats. </font><font style="vertical-align: inherit;">You may very well need to convert the sounds you like to MP3.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can use Audacity to complete all of these edits. This is a free open source cross-platform audio editor. Here I will not talk about how to use this editor, but there are many great tutorials on it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Why am I talking about converting sounds to MP3? The fact is that before there was no audio format supported by all browsers. Therefore, it was commonplace to include MP3, AIFF, and WAV files in projects and use them in environments that support them.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In modern conditions, fortunately for us, the MP3 format is supported by all major browsers, including IE 9. The sound stored in the MP3 format is also very well compressed. </font><font style="vertical-align: inherit;">And this allows you to go to files much smaller than using alternative formats that encode sound without loss of quality.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sound and Availability</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Although I advocate the use of sounds on the web, I admit that not all users will like it. And here we are talking about considerations that go beyond the subjective desire for silence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
People who have vision problems use screen readers to use webpages. Moreover, we are talking not only about those who do not see the pages. Screen readers, for example, are used by people with dyslexia who find it difficult to perceive text, and people with other similar problems. Screen readers are programs that parse documents and read texts. If a site contains a lot of sound effects, they can interfere with the normal operation of programs that read text from the screen. And this, in turn, will prevent people who rely on such programs from working with the site.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For this reason, it is important that a button to turn sound on and off be included in the pages of the site. Moreover, such a button should be available for keyboard navigation (using the Tab key). Ideally, until the user reaches such a button using the Tab key, no sounds should be played. In addition, it is necessary that the web project </font><font style="vertical-align: inherit;">would </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remember</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the state of this button - so the user does not have to constantly resort to it to mute the sound.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the other hand, hearing impaired users will not even know that certain interactions with pages are accompanied by sound. </font><font style="vertical-align: inherit;">The same applies to people who work on the Internet with the sound turned off. </font><font style="vertical-align: inherit;">For this reason, it is important not to rely solely on sound when performing certain important actions. </font><font style="vertical-align: inherit;">If the sound is used as a confirmation of some user action, make sure that a visual confirmation of this action is also displayed on the page. </font><font style="vertical-align: inherit;">Sites should remain fully functional and sound free.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recipes</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Take a look at a few examples (in the corresponding </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">section of the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> original of this article, you can experiment with them interactively and listen to the sounds made by different controls).</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Check box</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I really like this flag. </font><font style="vertical-align: inherit;">If you use a mouse, first click on it very quickly, and then so that there is a slight pause between the moment you click and release the mouse button.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [isChecked, setIsChecked] = React.useState(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-literal">false</span><font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [playActive] = useSound(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'/sounds/pop-down.mp3'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.25</span> }<font></font>
&nbsp;&nbsp;);<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [playOn] = useSound(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'/sounds/pop-up-on.mp3'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.25</span> }<font></font>
&nbsp;&nbsp;);<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [playOff] = useSound(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'/sounds/pop-up-off.mp3'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.25</span> }<font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Checkbox</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">name</span>=<span class="hljs-string">"demo-checkbox"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">checked</span>=<span class="hljs-string">{isChecked}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">label</span>=<span class="hljs-string">"I agree to self-isolate"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsChecked(!isChecked)}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMouseDown={playActive}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMouseUp={() =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isChecked ? playOff() : playOn();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}
&nbsp;&nbsp;&nbsp;&nbsp;/&gt;</span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Early interruption of sound reproduction</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sometimes you want the sound to play only when the user interacts with a certain control. </font><font style="vertical-align: inherit;">Pay attention to the way in the following example that the sound is reproduced only when the pointer is above the control.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-comment">// ,  ,  'rising-pops' :</span>
&nbsp;&nbsp;<span class="hljs-comment">// - fanfare</span>
&nbsp;&nbsp;<span class="hljs-comment">// - dun-dun-dun</span>
&nbsp;&nbsp;<span class="hljs-comment">// - guitar-loop</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/rising-pops.mp3'</span>;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play, { stop }] = useSound(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;soundUrl,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.5</span> }<font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [isHovering, setIsHovering] = React.useState(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-literal">false</span><font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">{()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setIsHovering(true);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;play();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMouseLeave={() =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setIsHovering(false);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}
&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">ButtonContents</span> <span class="hljs-attr">isHovering</span>=<span class="hljs-string">{isHovering}</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hover over me!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">ButtonContents</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçIncreasing pitch</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And here is an example of one interesting effect. </font><font style="vertical-align: inherit;">It consists in the fact that the sound reproduced by the next click on the Like button is higher than the sound reproduced by the previous click on it:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/glug-a.mp3'</span>;<font></font>
<font></font>
  <span class="hljs-keyword">const</span> [playbackRate, setPlaybackRate] = React.useState(<span class="hljs-number">0.75</span>);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> [play] = useSound(soundUrl, {<font></font>
    playbackRate,<font></font>
    <span class="hljs-attr">volume</span>: <span class="hljs-number">0.5</span>,<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
    setPlaybackRate(playbackRate + <span class="hljs-number">0.1</span>);<font></font>
    play();<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"img"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Heart"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><font></font>
  );<font></font>
}</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Button to start and pause playback</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is the implementation code for the button to start and pause the sound, which will help you in developing the new Spotify:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/guitar-loop.mp3'</span>;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play, { stop, isPlaying }] = useSound(soundUrl);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PlayButton</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">active</span>=<span class="hljs-string">{isPlaying}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">size</span>=<span class="hljs-string">{60}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">iconColor</span>=<span class="hljs-string">"var(--color-background)"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">idleBackgroundColor</span>=<span class="hljs-string">"var(--color-text)"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">activeBackgroundColor</span>=<span class="hljs-string">"var(--color-primary)"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">play</span>=<span class="hljs-string">{play}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">stop</span>=<span class="hljs-string">{stop}</span>
&nbsp;&nbsp;&nbsp;&nbsp;/&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñçSound ‚Äúsprite lists‚Äù</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you plan to use a lot of sounds in your React-component, then it may make sense to use sound ‚Äúsprite lists‚Äù. </font><font style="vertical-align: inherit;">Sound sprite list is a file that contains many different sounds. </font><font style="vertical-align: inherit;">By packing them into a single file, we increase the convenience of working with them and avoid making many parallel HTTP requests to download individual files (I hope that someday we will be able to use HTTP / 2 multiplexing). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here we use the sound "sprite list" to create a drum machine. </font><font style="vertical-align: inherit;">You can play virtual reels either with the mouse or with the keys 1-4 on the keyboard.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/909-drums.mp3'</span>;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play] = useSound(soundUrl, {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">sprite</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">kick</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">350</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">hihat</span>: [<span class="hljs-number">374</span>, <span class="hljs-number">160</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">snare</span>: [<span class="hljs-number">666</span>, <span class="hljs-number">290</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">cowbell</span>: [<span class="hljs-number">968</span>, <span class="hljs-number">200</span>],<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">//  ,   'keydown',</span>
&nbsp;&nbsp;<span class="hljs-comment">//    .</span><font></font>
&nbsp;&nbsp;useKeyboardBindings({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'kick'</span> }),
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">2</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'hihat'</span> }),
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">3</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'snare'</span> }),
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">4</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'cowbell'</span> }),<font></font>
&nbsp;&nbsp;})<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"kick"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'kick' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"hihat"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'hihat' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"snare"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'snare' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"cowbell"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'cowbell' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Details on the use of sound "sprite lists" in the package </font></font><code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be found </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summary</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the area of ‚Äã‚Äãthe use of sounds when developing websites, I am most concerned about the fact that this is an area that has been studied very little. </font><font style="vertical-align: inherit;">I‚Äôve been experimenting with sounds for quite some time, but I still feel that I‚Äôm only at the very beginning of the journey. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, now you have tools at your disposal that you can use to start your own experiments with sound. </font><font style="vertical-align: inherit;">I suggest you do this and find out where it will lead you. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dear readers! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How do you feel about using sounds on web pages?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495884/index.html">Time Series Prediction Using Recurrent Neural Networks</a></li>
<li><a href="../en495888/index.html">PyCon Russia has opened CFP for future speakers. Participation Forms and Expected Topics</a></li>
<li><a href="../en495890/index.html">Configuring a Nginx / LetsEncrypt Bundle in Docker Swarm</a></li>
<li><a href="../en495892/index.html">Do you really know what arrays are?</a></li>
<li><a href="../en495894/index.html">Javascript Performance Measurement</a></li>
<li><a href="../en495898/index.html">A practical guide to dealing with memory leaks in Node.js</a></li>
<li><a href="../en495902/index.html">CAPTCHA: killing conversion</a></li>
<li><a href="../en495904/index.html">Can an epidemic be predicted?</a></li>
<li><a href="../en495908/index.html">The path to the reward</a></li>
<li><a href="../en495910/index.html">Installing ROS in a Ubuntu Single-Board IMG Image</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>