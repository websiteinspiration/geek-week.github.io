<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚢 🐣 👨🏾‍🏭 Kubernetesのある生活から：DBMSを（だけでなく）レビュー環境から静的に削除する方法 🥡 🌸 😟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注：この記事はベストプラクティスであるとは主張していません。関連する問題の解決に役立つ、KubernetesとHelmの使用に関して、インフラストラクチャタスクの特定の実装の経験について説明します。
 
 CI / CDでレビュー環境を使用すると、開発者とシステムエンジニアの両方にとって非常に役立ち...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetesのある生活から：DBMSを（だけでなく）レビュー環境から静的に削除する方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/501424/"><img src="https://habrastorage.org/webt/ae/yu/zw/aeyuzw9pz0k6d0pbc0g86pxkfd0.png"><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：この記事はベストプラクティスであるとは主張していません。</font><font style="vertical-align: inherit;">関連する問題の解決に役立つ、KubernetesとHelmの使用に関して、インフラストラクチャタスクの特定の実装の経験について説明します。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CI / CDでレビュー環境を使用すると、開発者とシステムエンジニアの両方にとって非常に役立ちます。</font><font style="vertical-align: inherit;">まず、それらに関する一般的なアイデアを同期させましょう。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> レビュー環境は、開発者が定義したGitリポジトリの個別のブランチ（いわゆる機能ブランチ）から作成できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">個別のDBMSインスタンス、キュープロセッサ、キャッシングサービスなどを持つことができます。</font><font style="vertical-align: inherit;">-一般に、本番環境を完全に再現するためのすべて。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらは並行開発を可能にし、アプリケーションの新機能のリリースを大幅に加速します。</font><font style="vertical-align: inherit;">さらに、毎日何十ものこのような環境が必要になる可能性があるため、作成の速度が重要です。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目と3番目のポイントの交点では、多くの場合、問題が発生します。インフラストラクチャが大きく異なるため、そのコンポーネントを長期間展開することができます。</font><font style="vertical-align: inherit;">たとえば、この時間には、すでに準備されたバックアップからのデータベースの復元が含まれます*。</font><font style="vertical-align: inherit;">この記事は、私たちがかつてそのような問題を解決するために行った魅力的な方法についてです。</font></font><a name="habracut"></a><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*ちなみに、特にこのコンテキストでの大規模なデータベースダンプ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">については、ブートストラップデータベースの高速化について</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すでに</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">資料で説明しています</font></a><font style="vertical-align: inherit;">。</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題とそれを解決する方法</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトの1つで、「開発者とQAエンジニアのための単一のエントリポイントを作成する」というタスクが与えられました。</font><font style="vertical-align: inherit;">この定式化は技術的に次のことを隠しました：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QAエンジニアと他の一部の従業員の作業を簡略化するには、レビューで使用されたすべてのデータベース（および対応する仮想ホスト）を、別の静的な環境で取り出します。</font><font style="vertical-align: inherit;">プロジェクトで一般的な理由から、彼らと対話するこの方法は最適でした。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レビュー環境の作成にかかる時間を短縮します。</font><font style="vertical-align: inherit;">最初から作成するプロセス全体が暗示されています。</font><font style="vertical-align: inherit;">データベースのクローン作成、移行などを含みます</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実装の観点から見ると、主な問題は、レビュー環境を作成および削除する際のべき等性の確保に要約されます。これを実現するために、最初に</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL、MongoDB、およびRabbitMQサービス</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を静的環境に</font><font style="vertical-align: inherit;">移行することにより、レビュー環境を作成するメカニズムを変更しました</font><font style="vertical-align: inherit;">。静的とは、このような「永続的な」環境を指し、ユーザーの要求に応じて作成されません（レビュー環境の場合と同様）。</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">静的な環境でのアプローチは</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理想</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とは</font><b><font style="vertical-align: inherit;">ほど遠い</font></b><font style="vertical-align: inherit;"> -特定の欠点については、記事の最後を参照してください。ただし、この経験は他のタスクにも適用できるため、詳細に共有しています。同時に、インフラストラクチャの設計に関する問題を議論する際の議論にもなります。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、実装における一連のアクション：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レビュー環境を作成する場合、2つのDBMS（MongoDBとPostgreSQL）でのデータベースの作成、バックアップ/テンプレートからのデータベースの復元、RabbitMQでのvhostの作成が1回行われる必要があります。</font><font style="vertical-align: inherit;">これには、現在のダンプをロードするための便利な方法が必要です。</font><font style="vertical-align: inherit;">（以前にレビュー環境があった場合は、おそらくこれに対する既製のソリューションがすでにあるはずです。）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> レビュー環境の完了後、RabbitMQのデータベースと仮想ホストを削除する必要があります。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの場合、インフラストラクチャはKubernetesのフレームワーク内で動作します（Helmを使用）。</font><font style="vertical-align: inherit;">したがって、上記のタスクの実装には、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Helmフックが</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">優れ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><b><font style="vertical-align: inherit;">ていまし</font></b></a><font style="vertical-align: inherit;">た</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらは、Helmリリースで他のすべてのコンポーネントを作成する前、および/またはそれらを削除した後に実行できます。</font><font style="vertical-align: inherit;">したがって：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化タスクでは</font></font><code>pre-install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リリース内のすべてのリソースを作成する前に</font><font style="vertical-align: inherit;">、フック</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用して</font><font style="vertical-align: inherit;">それを起動します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">削除タスクの場合はフック</font></font><code>post-delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実装の詳細に移りましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実用的な実装</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
元のバージョンでは、このプロジェクトは3つのコンテナーで構成される1つのジョブのみを使用していました。</font><font style="vertical-align: inherit;">もちろん、これは完全に便利なわけではありません。その結果、大きなマニフェストで読みづらくなります。</font><font style="vertical-align: inherit;">したがって、それを3つの小さなジョブに分割しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下はPostgreSQLのリストであり、他の2つ（MongoDBとRabbitMQ）はマニフェスト構造が同じです。</font></font><br>
<br>
<pre><code class="plaintext hljs">{{- if .Values.global.review }}<font></font>
---<font></font>
apiVersion: batch/v1<font></font>
kind: Job<font></font>
metadata:<font></font>
  name: db-create-postgres-database<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "5"<font></font>
spec:<font></font>
  template:<font></font>
    metadata:<font></font>
      name: init-db-postgres<font></font>
    spec:<font></font>
      volumes:<font></font>
      - name: postgres-scripts<font></font>
        configMap:<font></font>
          defaultMode: 0755<font></font>
          name: postgresql-configmap<font></font>
      containers:<font></font>
      - name: init-postgres-database<font></font>
        image: private-registry/postgres <font></font>
        command: ["/docker-entrypoint-initdb.d/01-review-load-dump.sh"]<font></font>
        volumeMounts:<font></font>
        - name: postgres-scripts<font></font>
          mountPath: /docker-entrypoint-initdb.d/01-review-load-dump.sh<font></font>
          subPath: review-load-dump.sh<font></font>
        env:<font></font>
{{- include "postgres_env" . | indent 8 }}<font></font>
      restartPolicy: Never<font></font>
{{- end }}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マニフェストの内容に関するコメント：</font></font><br>
<br>
<ol>
<li> Job    review-.  review   CI/CD       Helm- (. <code>if</code>  <code>.Values.global.review</code>    ).</li>
<li>  Job      — , ConfigMap.       ,  ,       .       ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>hook-weight</code></a>.</li>
<li>      cURL   ,        PostgreSQL,       .</li>
<li>      PostgreSQL    :     ,     shell- .</li>
</ol><br>
<h3>PostgreSQL</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も興味深いのは、リストですでに述べたシェルスクリプト（</font></font><code>review-load-dump.sh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）です。</font><font style="vertical-align: inherit;">PostgreSQLでデータベースを復元するための一般的なオプションは何ですか？</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> バックアップからの「標準」リカバリ。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テンプレート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用したリカバリ</font><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの場合、2つのアプローチの違いは、主に新しい環境用のデータベースを作成する速度にあります。</font><font style="vertical-align: inherit;">最初に、データベースダンプをロードし、それを使用して復元し</font></font><code>pg_restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">私たちの場合、これは2番目の方法よりもゆっくり行われるため、対応する選択が行われました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のオプション（</font><b><font style="vertical-align: inherit;">テンプレート</font></b><font style="vertical-align: inherit;">を使用した</font><b><font style="vertical-align: inherit;">リカバリ）の</font></b><font style="vertical-align: inherit;">使用</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）別の環境のコンテナーからリモートでデータベースにデータを送信せずに、データベースを物理レベルで複製できます。これにより、リカバリー時間が短縮されます。</font><font style="vertical-align: inherit;">ただし、制限があります。アクティブな接続が残っているデータベースを複製することはできません。</font><font style="vertical-align: inherit;">個別のレビュー環境ではなく静的環境としてステージを使用しているため、2番目のデータベースを作成し、それをテンプレートに変換して、毎日（たとえば、午前中に）更新する必要があります。</font><font style="vertical-align: inherit;">このために小さなCronJobが用意されました：</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: batch/v1beta1<font></font>
kind: CronJob<font></font>
metadata:<font></font>
  name: update-postgres-template<font></font>
spec:<font></font>
  schedule: "50 4 * * *"<font></font>
  concurrencyPolicy: Forbid<font></font>
  successfulJobsHistoryLimit: 3<font></font>
  failedJobsHistoryLimit: 3<font></font>
  startingDeadlineSeconds: 600<font></font>
  jobTemplate:<font></font>
    spec:<font></font>
      template:<font></font>
        spec:<font></font>
          restartPolicy: Never<font></font>
          imagePullSecrets:<font></font>
          - name: registrysecret<font></font>
          volumes:<font></font>
          - name: postgres-scripts<font></font>
            configMap:<font></font>
              defaultMode: 0755<font></font>
              name: postgresql-configmap-update-cron<font></font>
          containers:<font></font>
          - name: cron<font></font>
            command: ["/docker-entrypoint-initdb.d/update-postgres-template.sh"]<font></font>
          image: private-registry/postgres <font></font>
            volumeMounts:<font></font>
            - name: postgres-scripts<font></font>
              mountPath: /docker-entrypoint-initdb.d/update-postgres-template.sh<font></font>
              subPath: update-postgres-template.sh<font></font>
            env:<font></font>
{{- include "postgres_env" . | indent 8 }}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スクリプトを含む完全なConfigMapマニフェストはほとんどの場合意味がありません（そうでない場合はコメントで報告してください）。</font><font style="vertical-align: inherit;">代わりに、最も重要なこと、bashスクリプトを示します。</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#!/bin/bash -x</span><font></font>
<font></font>
CREDENTIALS=<span class="hljs-string">"postgresql://<span class="hljs-variable">${POSTGRES_USER}</span>:<span class="hljs-variable">${POSTGRES_PASSWORD}</span>@<span class="hljs-variable">${POSTGRES_HOST}</span>/postgres"</span><font></font>
<font></font>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"REVOKE CONNECT ON DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> FROM public"</span>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = '<span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span>'"</span><font></font>
<font></font>
curl --fail -vsL <span class="hljs-variable">${HOST_FORDEV}</span>/latest_<span class="hljs-variable">${POSTGRES_DB_STAGE}</span>.psql -o /tmp/<span class="hljs-variable">${POSTGRES_DB}</span>.psql<font></font>
<font></font>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"ALTER DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> WITH is_template false allow_connections true;"</span>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"DROP DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span>;"</span> || <span class="hljs-literal">true</span>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"CREATE DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span>;"</span> || <span class="hljs-literal">true</span>
pg_restore -U <span class="hljs-variable">${POSTGRES_USER}</span> -h <span class="hljs-variable">${POSTGRES_HOST}</span> -w -j 4 -d <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> /tmp/<span class="hljs-variable">${POSTGRES_DB}</span>.psql<font></font>
<font></font>
psql -d <span class="hljs-string">"<span class="hljs-variable">${CREDENTIALS}</span>"</span> -w -c <span class="hljs-string">"ALTER DATABASE <span class="hljs-variable">${POSTGRES_DB_TEMPLATE}</span> WITH is_template true allow_connections false;"</span><font></font>
<font></font>
rm -v /tmp/<span class="hljs-variable">${POSTGRES_DB}</span>.psql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
競合することなく、1つのテンプレートから複数のデータベースを一度に復元できます。</font><font style="vertical-align: inherit;">主なことは、データベース接続を禁止し、データベース自体をテンプレートにすることです。</font><font style="vertical-align: inherit;">これは最後から2番目のステップで行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースを復元するためのシェルスクリプトを含むマニフェストは次のようになります。</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: postgresql-configmap<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  review-load-dump.sh: |<font></font>
    #!/bin/bash -x<font></font>
    <font></font>
 <font></font>
 <font></font>
    CREDENTIALS="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/postgres"<font></font>
<font></font>
    if [ "$( psql -d "${CREDENTIALS}" -tAc "SELECT CASE WHEN EXISTS (SELECT * FROM pg_stat_activity WHERE datname = '${POSTGRES_DB}' LIMIT 1) THEN 1 ELSE 0 END;" )" = '1' ]<font></font>
      then<font></font>
          echo "Open connections has been found in ${POSTGRES_DB} database, will drop them"<font></font>
          psql -d "${CREDENTIALS}" -c "SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = '${POSTGRES_DB}' -- AND pid &lt;&gt; pg_backend_pid();"<font></font>
      else<font></font>
          echo "No open connections has been found ${POSTGRES_DB} database, skipping this stage"<font></font>
    fi<font></font>
<font></font>
    psql -d "${CREDENTIALS}" -c "DROP DATABASE ${POSTGRES_DB}"<font></font>
<font></font>
    if [ "$( psql -d "${CREDENTIALS}" -tAc "SELECT 1 FROM pg_database WHERE datname='${POSTGRES_DB}'" )" = '1' ]<font></font>
      then<font></font>
          echo "Database ${POSTGRES_DB} still exists, delete review job failed"<font></font>
          exit 1<font></font>
      else<font></font>
          echo "Database ${POSTGRES_DB} does not exist, skipping"<font></font>
    fi<font></font>
<font></font>
<font></font>
    psql ${CREDENTIALS} -d postgres -c 'CREATE DATABASE ${POSTGRES_DB} TEMPLATE "loot-stage-copy"'</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どうやら、彼らはここに関与しています</font></font><code>hook-delete-policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらのポリシーの適用の詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらをご覧ください</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">指定されたマニフェストでは</font></font><code>before-hook-creation,hook-succeeded</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次の要件を満たすために</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">します。新しいフックを作成する前に以前のオブジェクトを削除し、フックが成功した場合にのみ削除します。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このConfigMapでデータベースを削除します。</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: postgresql-configmap-on-delete<font></font>
  annotations:<font></font>
    "helm.sh/hook": "post-delete, pre-delete"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation<font></font>
data:<font></font>
  review-delete-db.sh: |<font></font>
    #!/bin/bash -e<font></font>
<font></font>
    CREDENTIALS="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/postgres"<font></font>
<font></font>
    psql -d "${CREDENTIALS}" -w postgres -c "DROP DATABASE ${POSTGRES_DB}"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のConfigMapに移動しましたが、通常のConfigMapに配置できます</font></font><code>command</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結局のところ、マニフェスト自体の外観を複雑にすることなく、ワンライナーにすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何らかの理由でPostgreSQLテンプレートを使用するオプションが適さない、または適合しない場合は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックアップを使用し</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て、上記の</font><b><font style="vertical-align: inherit;">「標準」のリカバリパスに</font></b><font style="vertical-align: inherit;">戻すことができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">アルゴリズムは簡単です：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 毎晩、データベースのバックアップが作成され、クラスターのローカルネットワークからダウンロードできるようになります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> レビュー環境の作成時に、データベースがロードされ、ダンプから復元されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ダンプが展開されると、他のすべてのアクションが実行されます。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、回復スクリプトはおおよそ次のようになります。</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: postgresql-configmap<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  review-load-dump.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    CREDENTIALS="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/postgres"<font></font>
    psql -d "${CREDENTIALS}" -w -c "DROP DATABASE ${POSTGRES_DB}" || true<font></font>
    psql -d "${CREDENTIALS}" -w -c "CREATE DATABASE ${POSTGRES_DB}"<font></font>
<font></font>
    curl --fail -vsL ${HOST_FORDEV}/latest_${POSTGRES_DB_STAGE}.psql -o /tmp/${POSTGRES_DB}.psql<font></font>
<font></font>
    psql psql -d "${CREDENTIALS}" -w -c "CREATE EXTENSION ip4r;"<font></font>
    pg_restore -U ${POSTGRES_USER} -h ${POSTGRES_HOST} -w -j 4 -d ${POSTGRES_DB} /tmp/${POSTGRES_DB}.psql<font></font>
    rm -v /tmp/${POSTGRES_DB}.psql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手順は、すでに上記で説明した内容に対応しています。唯一の変更は、すべての作業が追加された後のpsqlファイルの削除です。</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：リカバリスクリプトとアンインストールスクリプトの両方で、データベースは毎回削除されます。これは、レビューの再作成中に起こり得る競合を回避するために行われます。データベースが本当に削除されていることを確認する必要があります。また、この問題</font></font><code>--clean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はユーティリティ</font></font><code>pg_restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">フラグ</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加することで解決できる可能性が</font><font style="vertical-align: inherit;">あります</font><font style="vertical-align: inherit;">が、注意してください。このフラグは、ダンプ自体にある要素のみのデータをクリアするため、このオプションは機能しません。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、さらに改善が必要な動作メカニズムが得られました（Bashスクリプトをより洗練されたコードに置き換えるまで）。</font><font style="vertical-align: inherit;">それらは記事の範囲外とします（もちろん、トピックに関するコメントは歓迎します）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mongodb</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコンポーネントはMongoDBです。</font><font style="vertical-align: inherit;">このDBMSの主な問題は、次の理由により、このDBMSの場合、データベースをコピーするオプション（PostgreSQLなど）が名目上存在することです。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非推奨の状態にあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストの結果によると、データベースの復旧時間に通常と比べて大きな違いはありませんでした</font></font><code>mongo_restore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ただし、テストは1つのプロジェクトの一部として実行されたことに注意してください。あなたの場合、結果は完全に異なる可能性があります。</font></font></i></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データベースボリュームが大きい場合、深刻な問題が発生する可能性があることがわかります。PgSQLでデータベースを復元する時間を節約すると同時に、Mongoで非常に長い時間ダンプを復元します。</font><font style="vertical-align: inherit;">これを書いている時点で、既存のインフラストラクチャのフレームワーク内で、3つの方法を確認しました（ところで、これらを組み合わせることができます）。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たとえば、DBMSがネットワークファイルシステムにある場合（</font><font style="vertical-align: inherit;">実稼働環境で</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ない</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合</font><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">、リカバリには時間がかかることがあります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その後、DBMSをステージから別のノードに転送し、ローカルストレージを使用できます。</font><font style="vertical-align: inherit;">これは本番環境ではないため、レビューの作成速度は私たちにとってより重要です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各ジョブリカバリを個別のポッドに移動できるため、DBMSに依存する移行やその他のプロセスを事前に実行できます。</font><font style="vertical-align: inherit;">そのため、事前に完了することで時間を節約しています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時々、古い/無関係なデータを削除することにより、ダンプのサイズを減らすことができます-データベース構造だけを残すのに十分なところまで。</font><font style="vertical-align: inherit;">もちろん、これはフルダンプが必要な場合（QAテストタスクなど）には当てはまりません。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レビュー環境をすばやく作成する必要がない場合は、説明されているすべての問題を無視できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PgSQLと同様にデータベースをコピーできないため、最初の方法、つまり </font><font style="vertical-align: inherit;">バックアップからの標準リカバリ。</font><font style="vertical-align: inherit;">アルゴリズムはPgSQLと同じです。</font><font style="vertical-align: inherit;">これは、マニフェストを見ると簡単に確認できます。</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: mongodb-scripts-on-delete<font></font>
  annotations:<font></font>
    "helm.sh/hook": "post-delete, pre-delete"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation<font></font>
data:<font></font>
  review-delete-db.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    mongo ${MONGODB_NAME} --eval "db.dropDatabase()" --host ${MONGODB_REPLICASET}/${MONGODB_HOST}<font></font>
---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: mongodb-scripts<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  review-load-dump.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    curl --fail -vsL ${HOST_FORDEV}/latest_${MONGODB_NAME_STAGE}.gz -o /tmp/${MONGODB_NAME}.gz<font></font>
<font></font>
    mongo ${MONGODB_NAME} --eval "db.dropDatabase()" --host ${MONGODB_REPLICASET}/${MONGODB_HOST}<font></font>
    mongorestore --gzip --nsFrom "${MONGODB_NAME_STAGE}.*" --nsTo "${MONGODB_NAME}.*" --archive=/tmp/${MONGODB_NAME}.gz --host ${MONGODB_REPLICASET}/${MONGODB_HOST}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに重要な詳細があります。私たちの場合、MongoDBはクラスター内にあり、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接続が常にプライマリノードで発生する</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことを確認する必要があり</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。たとえば、クォーラムの最初のホストを指定した場合、しばらくすると、プライマリからセカンダリに切り替わり、データベースの作成が妨げられることがあります。したがって、1つのホストではなく、すぐに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReplicaSet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に接続して、その中の</font><font style="vertical-align: inherit;">すべてのホストをリストする必要があります。この理由だけで、ホスト名が常に同じになるようにMongoDBをStatefulSetにする必要があります（言うまでもなく、MongoDBは本質的にステートフルアプリケーションです）。このオプションでは、プライマリノードへの接続が保証されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MongoDBでは、レビューを作成する前にデータベースも削除します。これは、PostgreSQLと同じ理由で行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後のニュアンス：レビュー対象のデータベースはステージと同じ環境にあるため、クローンデータベースには別の名前が必要です。</font><font style="vertical-align: inherit;">ダンプがBSONファイルでない場合、次のエラーが発生します。</font></font><br>
<br>
<pre><code class="plaintext hljs">the --db and --collection args should only be used when restoring from a BSON file. Other uses are deprecated and will not exist in the future; use --nsInclude instead</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、上記の例では</font></font><code>--nsFrom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">が使用されてい</font></font><code>--nsTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回復に関するその他の問題はありませんでした。</font><font style="vertical-align: inherit;">最後に、</font><font style="vertical-align: inherit;">このオプションを試してみたい場合に備えて</font><font style="vertical-align: inherit;">、</font></font><code>copyDatabase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MongoDB </font><font style="vertical-align: inherit;">のドキュメント</font><font style="vertical-align: inherit;">が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここにある</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことだけを追加し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">うさぎ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要件リストの最後のアプリケーションはRabbitMQでした。</font><font style="vertical-align: inherit;">使い方は簡単です。アプリケーションが接続するユーザーの代わりに新しい仮想ホストを作成する必要があります。</font><font style="vertical-align: inherit;">そして、それを削除します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vhostsを作成および削除するための宣言：</font></font><br>
<br>
<pre><code class="plaintext hljs">---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: rabbitmq-configmap<font></font>
  annotations:<font></font>
    "helm.sh/hook": "pre-install"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded<font></font>
data:<font></font>
  rabbitmq-setup-vhost.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    /usr/local/bin/rabbitmqadmin -H ${RABBITMQ_HOST} -u ${RABBITMQ_USER} -p ${RABBITMQ_PASSWORD} declare vhost name=${RABBITMQ_VHOST}<font></font>
---<font></font>
apiVersion: v1<font></font>
kind: ConfigMap<font></font>
metadata:<font></font>
  name: rabbitmq-configmap-on-delete<font></font>
  annotations:<font></font>
    "helm.sh/hook": "post-delete, pre-delete"<font></font>
    "helm.sh/hook-weight": "1"<font></font>
    "helm.sh/hook-delete-policy": before-hook-creation<font></font>
data:<font></font>
  rabbitmq-delete-vhost.sh: |<font></font>
    #!/bin/bash -x<font></font>
<font></font>
    /usr/local/bin/rabbitmqadmin -H ${RABBITMQ_HOST} -u ${RABBITMQ_USER} -p ${RABBITMQ_PASSWORD} delete vhost name=${RABBITMQ_VHOST}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RabbitMQには大きな困難があり、私たちは（今のところ？）遭遇していません。</font><font style="vertical-align: inherit;">一般に、同じアプローチは、データに重要なつながりがない他のサービスに適用できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欠点</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この決定が「ベストプラクティス」であると主張しないのはなぜですか？</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ステージ環境という形で単一障害点が判明します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステージ環境のアプリケーションが1つのレプリカでのみ実行される場合、このアプリケーションが実行されるホストにさらに依存するようになります。</font><font style="vertical-align: inherit;">したがって、レビュー環境の数が増えると、ノードの負荷は比例して増加し、この負荷のバランスを取ることができなくなります。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特定のプロジェクトのインフラストラクチャの機能を考慮すると、これら2つの問題を完全に解決することはできませんでしたが、クラスタリング（新しいノードの追加）と垂直スケーリングにより、潜在的な損傷を最小限に抑えることができます。 </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションが開発され、開発者の数が増えるにつれて、遅かれ早かれレビュー環境への負荷が増加し、新しい要件が追加されます。開発者が本番環境の次の変更をできるだけ早く提供することは重要ですが、これを可能にするには、開発を「並列」にする動的なレビュー環境が必要です。その結果、インフラストラクチャへの負荷が増大し、そのような環境を作成するための時間が増加しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事は、実際のかなり具体的な経験に基づいて作成されました。例外的な場合にのみ、静的な環境でサービスを分離しますが、ここでは特に彼について説明しました。このような必要な対策により、アプリケーションの開発とデバッグを加速することができました。これは、レビュー環境を最初からすばやく作成できるためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この作業を始めたとき、それは非常に単純に見えましたが、作業をしていると、多くのニュアンスが見つかりました。</font><font style="vertical-align: inherit;">最終的な記事でまとめられたのは彼らでした。普遍的ではありませんが、レビュー環境の加速に関する独自の決定の基礎/インスピレーションの例として役立ちます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesのヒントとコツ：大規模データベースのブートストラップを高速化する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetesへの妨げのないRabbitMQの移行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">障害物のないMongoDBからKubernetesへの移行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいアプリケーションのリリースをKubernetesに配信するプロセスでチームを運営しています</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。」</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja501414/index.html">Djangoプロジェクト用のDebian、Nginx、およびGunicornの構成</a></li>
<li><a href="../ja501416/index.html">WebRTCについて少し：何を使うか、そして実際のケース</a></li>
<li><a href="../ja501418/index.html">第4週マラソン：動機</a></li>
<li><a href="../ja501420/index.html">オンラインミタパスとYouTubeショー：JUG Ruグループストリームウィーク</a></li>
<li><a href="../ja501422/index.html">FabEx-Hyperledger Fabricのブロックエクスプローラー</a></li>
<li><a href="../ja501426/index.html">Unison：2つのサーバーでのディレクトリの双方向同期の設定と自動化</a></li>
<li><a href="../ja501430/index.html">ウェブサイトのコンテンツのデザインと計画への素晴らしいガイド</a></li>
<li><a href="../ja501432/index.html">JDBCに代わる2つの方法</a></li>
<li><a href="../ja501434/index.html">セキュリティウィーク20：Thunderboltを介したコンピューターのハッキング</a></li>
<li><a href="../ja501436/index.html">第2種のエラーの可能性が低い画像の番号認識アルゴリズム</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>