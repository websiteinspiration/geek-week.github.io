<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö≥ üêä üî∏ How we selected cargo for carriers üêÜ üíå üëçüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon. Our name is Ilya Bashtanov (developer, Tochka-Tochka ) and Tatyana Voronova (data analyst, 2M Center ). And we want to talk about the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How we selected cargo for carriers</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/center2m/blog/503088/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Good afternoon. </font><font style="vertical-align: inherit;">Our name is Ilya Bashtanov (developer, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tochka-Tochka</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) and Tatyana Voronova (data analyst, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2M Center</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">And we want to talk about the technical implementation of the task of selecting goods for transportation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The essence of the problem is as follows. </font><font style="vertical-align: inherit;">There are goods in the warehouse that need to be transported from city A to city B. We can assume that only the weight of the goods is taken into account, and their sizes are more or less standard (euro pallets). </font><font style="vertical-align: inherit;">A carrier who wants to take a passing freight wants to carry as much as possible, but is limited by the weight and number of packages. </font><font style="vertical-align: inherit;">It is necessary to form for him several variants of the lots from the goods available at the warehouse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solved tasks for business in this case:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Load vehicles as efficiently as possible and thereby increase transportation revenue.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To solve the delivery problem in an acceptable time for the user (including the FIFO principle).</font></font></li>
</ol> <a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The project immediately seemed attractive. </font><font style="vertical-align: inherit;">First, from the point of view of mathematics: it was proposed to implement an algorithm for solving the classical combinatorial optimization problem. </font><font style="vertical-align: inherit;">Secondly, PostgreSQL was proposed as a DBMS, the popularity of which has been constantly growing in recent years due to a large number of features, reliability, and good performance characteristics. </font><font style="vertical-align: inherit;">And, of course, the importance of the practical task and the scale of the project, which involved many different participants, also became a great incentive.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algorithm</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This task is a variant of the classic </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">backpack packing problem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The backpack problem is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NP-complete</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Such problems cannot be solved in polynomial time, although mathematically this has not yet been proven. </font><font style="vertical-align: inherit;">This means that exact algorithms, such as exhaustive search of variants or its optimized varieties, do not work in practice, as they have complexity</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.964ex" height="2.634ex" viewBox="0 -809.3 2567.6 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-4F" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-28" x="763" y="0"></use><g transform="translate(1153,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-6E" x="707" y="557"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-29" x="2178" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">O(2^n)</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Approximate methods provide solutions for the best time. </font><font style="vertical-align: inherit;">For example, the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">greedy algorithm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> assumes that the maximum weight is put in the backpack as long as possible. </font><font style="vertical-align: inherit;">Its complexity does not exceed the complexity of sorting</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>O</mi><mo stretchy=&quot;false&quot;>(</mo><mi>n</mi><mo>&amp;#x2217;</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.313ex" height="2.634ex" viewBox="0 -809.3 5731.9 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-4F" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-28" x="1153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-6E" x="1542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2217" x="2365" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-6C" x="3087" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-6F" x="3386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-67" x="3871" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-6E" x="4352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-29" x="4952" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-29" x="5342" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>‚àó</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2">(O(n * log n))</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but the result may be far from optimum. </font><font style="vertical-align: inherit;">There is still a class of genetic algorithms that give good results in a limited time, but they are non-deterministic, which in our case would lead to different options for issuing during repeated calls, it would be difficult to explain to the customer and carriers. </font><font style="vertical-align: inherit;">As a result, the choice fell on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">approximate methods</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that give the result with guaranteed accuracy in polynomial time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So we have:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weights with weights </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mn>1</mn></msub><mo>,</mo><msub><mi>w</mi><mn>2</mn></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><msub><mi>w</mi><mi>n</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.523ex" height="1.884ex" viewBox="0 -540.2 6252.9 811.3" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-31" x="1013" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2C" x="1170" y="0"></use><g transform="translate(1615,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-32" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2C" x="2785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2E" x="3231" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2E" x="3676" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2E" x="4121" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2C" x="4566" y="0"></use><g transform="translate(5011,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-6E" x="1013" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mn>1</mn></msub><mo>,</mo><msub><mi>w</mi><mn>2</mn></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><msub><mi>w</mi><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-3">w_1,w_2,... , w_n</script></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limit on the total weight of goods </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>W</mi><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.485ex" height="2.259ex" viewBox="0 -755.5 2361.5 972.7" role="img" focusable="false" style="vertical-align: -0.505ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-78" x="1334" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mo movablelimits="true" form="prefix">max</mo></msub></math></span></span><script type="math/tex" id="MathJax-Element-4">W_\max</script></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cargo limit </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Q</mi><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.129ex" height="2.509ex" viewBox="0 -809.3 2208.5 1080.4" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-78" x="1334" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Q</mi><mo movablelimits="true" form="prefix">max</mo></msub></math></span></span><script type="math/tex" id="MathJax-Element-5">Q_\max</script></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is required to find a subset of goods with a maximum total weight that satisfies the constraints. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The idea is to reduce the variety of goods by coarsening their weights and apply the greedy algorithm. </font><font style="vertical-align: inherit;">In this case, the approximate solution is found in a completely polynomial time, that is, a solution with guaranteed accuracy</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>1</mn><mo>&amp;#x2212;</mo><mi>&amp;#x03B5;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.086ex" height="2.134ex" viewBox="0 -755.5 2189.9 918.9" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-3B5" x="1723" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>‚àí</mo><mi>Œµ</mi></math></span></span><script type="math/tex" id="MathJax-Element-6">1- \varepsilon</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> obtained with complexity being a polynomial in </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.509ex" viewBox="0 -540.2 600.5 649.8" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-7">n</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B5;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.083ex" height="1.509ex" viewBox="0 -540.2 466.5 649.8" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-3B5" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Œµ</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">\varepsilon</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the input of the algorithm, we have a plate containing the rounded weights of the goods and the number of seats for each weight. </font><font style="vertical-align: inherit;">Using a greedy algorithm, we try to get styling options for the total weights</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>W</mi><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo></msub><mo>,</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.132ex" height="2.384ex" viewBox="0 -755.5 2640 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-78" x="1334" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2C" x="2361" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mo movablelimits="true" form="prefix">max</mo></msub><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-9">W_\max,</script> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>W</mi><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo></msub><mo>&amp;#x2212;</mo><mn>1</mn><mo>,</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.134ex" height="2.384ex" viewBox="0 -755.5 4363.4 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-78" x="1334" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2212" x="2583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-31" x="3584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2C" x="4084" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mo movablelimits="true" form="prefix">max</mo></msub><mo>‚àí</mo><mn>1</mn><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-10">W_\max-1,</script> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>W</mi><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo></msub><mo>&amp;#x2212;</mo><mn>2</mn><mo>,</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.134ex" height="2.384ex" viewBox="0 -755.5 4363.4 1026.6" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-57" x="0" y="0"></use><g transform="translate(944,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-78" x="1334" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2212" x="2583" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-32" x="3584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2C" x="4084" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mo movablelimits="true" form="prefix">max</mo></msub><mo>‚àí</mo><mn>2</mn><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-11">W_\max-2,</script> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2026;</mo><mo>,</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.757ex" height="1.134ex" viewBox="0 -217.3 1617.7 488.4" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2026" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-2C" x="1339" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>‚Ä¶</mo><mo>,</mo></math></span></span><script type="math/tex" id="MathJax-Element-12">‚Ä¶,</script> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.009ex" viewBox="0 -755.5 500.5 865.1" role="img" focusable="false" style="vertical-align: -0.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-30" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-13">0</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">To do this, having set the target total weight, in the cycle we select the maximum weight cargo from the remaining loads so as not to exceed the target total weight. </font><font style="vertical-align: inherit;">If the maximum allowable amount is reached</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Q</mi><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>max</mo></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.129ex" height="2.509ex" viewBox="0 -809.3 2208.5 1080.4" role="img" focusable="false" style="vertical-align: -0.63ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-6D"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-61" x="833" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/center2m/blog/503088/&amp;usg=ALkJrhiVAyRFUnb94TV8nRDqk8rkDfiGCQ#MJMAIN-78" x="1334" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Q</mi><mo movablelimits="true" form="prefix">max</mo></msub></math></span></span><script type="math/tex" id="MathJax-Element-14">Q_\max</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, the cycle ends. </font><font style="vertical-align: inherit;">The resulting combinations are stored in a temporary array. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The number of possible combinations can be large, and it is convenient for the user to choose from a small number of options, but at the same time there should still be a choice. </font><font style="vertical-align: inherit;">An additional task arises of choosing preferred combinations. </font><font style="vertical-align: inherit;">In order not to complicate, we decided to always give out two options, if possible. </font><font style="vertical-align: inherit;">For a warehouse, it is advisable first of all to send the heaviest loads, so we rank the combinations in descending order of the largest weight of the cargo. </font><font style="vertical-align: inherit;">If the combinations with the maximum maximum weight are more than two, we give out two: with the largest and least quantity of goods.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For testing, we selected two implementations of the considered algorithm, which differ in insignificant details: one in Java, the other in PL / pgSQL, the procedural language of the PostgreSQL DBMS. </font><font style="vertical-align: inherit;">It should be noted right away that the final choice was influenced not only by the test results, but also by architectural considerations, usability and other factors. </font><font style="vertical-align: inherit;">But first, the task was to choose one of two implementations. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Two test environments were used: a desktop for testing development and a server for testing in conditions similar to real ones.</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dev:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HP Probook 4740s client station + 32-bit 2 x Pentium¬Æ Dual-Core CPU E5300 @ 2.60GHz and 4 GB RAM, Ubuntu Linux 16.04, PostgreSQL 10.3.</font></font></li>
<li><b>test:</b>  64-bit  2 x Intel Xeon CPU E5-2673 v4 @ 2.30GHz  14   , CentOS Linux 7.4, PostgreSQL 10.3</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A test table was prepared in the PostgreSQL database containing 7000 loads with random weights from 20 to 800 kg. For testing, we used the standard pgBench utility from PostgreSQL, which during the test performed 500 transactions (10 connections of 50 transactions each). Each transaction made one call of the algorithm with random parameters (restriction on weight from 10 to 1000 kg and on the number of goods from 1 to 50 pieces). All random variables are distributed evenly. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the first algorithm, each transaction started a Java machine and passed a JAR archive with the algorithm code to it for execution. The main Java class connected to the database through the JDBC driver, received test data from the table and applied the algorithm to them.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the second algorithm, each transaction made a call to the stored function of the PostgreSQL database, which read test data from the table and applied the algorithm. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Table 1. Results of the main test </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h3/rz/ib/h3rzibdiilx5ke-t5zyofq3lql0.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to the main test, the results of which are shown in table 1, an additional test of algorithm 2 was carried out, in which different options for obtaining the initial data were compared: from a database, from a file, random array generation. It turned out that for 7000 loads, transferring data from a DBMS to a local array requires more time than the actual stacking algorithm. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Findings.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In our task, the performance depended more on the architecture of the system and the speed of interaction with the database than on the algorithm used. </font><font style="vertical-align: inherit;">This is confirmed by an additional test of algorithm 1, in which the selection of data from the database took the bulk of the time.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 2 scales slightly better, apparently due to more modest RAM requirements (temporary database tables are used to store intermediate results).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, the second algorithm was chosen, which, with minor alterations, was used for the second year. </font><font style="vertical-align: inherit;">As a result, a solution is sought with acceptable accuracy with an average transaction time of less than 1 second.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exploitation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As always, life made adjustments, and I had to tweak the implementation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In reality, the carrier reserves the consignment in a Yankee auction with a floating price. Strictly speaking, this option of selling by auction is not, but this is the topic of a separate conversation at another site. In addition to the maximum cargo weight and maximum quantity, the carrier sets two cities (beginning and end of the route) and the desired loading time. After that, the selection procedure for each pair of warehouses (in the sending and destination cities) filters out the cargo according to several criteria, in particular, taking into account the warehouse‚Äôs working hours and the maximum transportation cost at which expenses are still covered by the sender‚Äôs payment, and transfers their weights to the stacking algorithm. At the output of the algorithm, a list of weights is obtained, according to which sets of specific goods are selected, which are issued as auction offers.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Initially, weights were rounded up to values ‚Äã‚Äãthat are multiples of 10 kg. </font><font style="vertical-align: inherit;">During operation, it became clear that accuracy noticeably suffers, and the results begin to contradict common sense, for example, in the presence of goods weighing 12 and 19 kg, the system can choose the first. </font><font style="vertical-align: inherit;">Warehouse scales give data with an accuracy of 1 kg, and for the current volumes and load, the performance of the algorithm for integer values ‚Äã‚Äãof the scales turned out to be quite acceptable, so they have refused rounding. </font><font style="vertical-align: inherit;">In the future, with an increase in the number of shipments, it is planned to use rounding to values ‚Äã‚Äãthat are multiples of 5 kg. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The overhead for the operation of the stacking algorithm with the current data volume and query intensity is not critical. </font><font style="vertical-align: inherit;">Significantly more resources are required at the stage of cargo selection, as well as for other system operation processes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Business findings</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The mission of the Point-Point is an effective logistic process, in particular, the optimal use of the vehicle in terms of congestion: when transporting a minimum of voids. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The global goals of solving optimization problems in freight transport: saving resources contributes to economic growth, creates additional opportunities for small and medium-sized businesses, and improves the environment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Specialists of Center 2M and Tochka-Tochki found a software-mathematical solution suitable for all participants in the transportation process. </font><font style="vertical-align: inherit;">It can be used for the federal network, at each point of which 7 thousand pallets (corresponding to the size of the football field) are requested by 500 carriers and with the result obtained in less than 1 second. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authors of the article: Ilya Bashtanov (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i-bash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), Tatyana Voronova (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tvoronova</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en503072/index.html">Just another tool: getting to know the service configuration with Desired State Configuration¬†</a></li>
<li><a href="../en503074/index.html">Details about the Provider package for Flutter</a></li>
<li><a href="../en503082/index.html">Telegram as NAS / FTP</a></li>
<li><a href="../en503084/index.html">Lightbend Academy Course Review - Reactive Architecture</a></li>
<li><a href="../en503086/index.html">Are online transcription services secure and confidential?</a></li>
<li><a href="../en503096/index.html">Why do managers want workers to recycle?</a></li>
<li><a href="../en503100/index.html">Internet head</a></li>
<li><a href="../en503106/index.html">Non-standard discovery digest: genealogy of predatory plants, fungus on Twitter and laughing gas from guano</a></li>
<li><a href="../en503108/index.html">Eight colors of the rainbow: about color in terms of mathematics</a></li>
<li><a href="../en503110/index.html">Digital Epidemic: CoronaVirus vs CoViper</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>