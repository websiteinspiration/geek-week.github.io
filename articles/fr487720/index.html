<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüë©‚Äçüë¶‚Äçüë¶ üëÇüèΩ ‚ô¶Ô∏è Sur le corutinisme concurrentiel (en utilisant la programmation r√©active comme exemple) üë®üèΩ‚Äçüöí ü§¥üèæ üîç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Introduction
 La comp√©tition pour les esprits, les humeurs et les aspirations des programmeurs est, il me semble, une tendance moderne dans le d√©ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sur le corutinisme concurrentiel (en utilisant la programmation r√©active comme exemple)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487720/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Introduction</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La comp√©tition pour les esprits, les humeurs et les aspirations des programmeurs est, il me semble, une tendance moderne dans le d√©veloppement de la programmation. Quand presque rien n'est propos√©, bien que sous le slogan de la lutte pour cela. Il est tr√®s, tr√®s difficile de reconna√Ætre dans l'√©crasement des paradigmes logiciels quelque chose de nouveau, qui s'av√®re en fait souvent assez connu et parfois simplement d√©pass√©. Tout est ¬´emport√©¬ª par les d√©lices terminologiques, l'analyse d√©taill√©e et les exemples multilignes dans de nombreux langages de programmation. Dans le m√™me temps, les demandes d'ouverture et / ou de r√©flexion sur le fond de la solution, l'essence des innovations sont obstin√©ment √©vit√©es, les tentatives de savoir combien cela est n√©cessaire et ce qui en fin de compte, qui distingue qualitativement l'innovation des approches et des outils de programmation d√©j√† connus, sont contrecarr√©es √† l'≈ìuf.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis apparu sur Habr√©, comme on l'a bien vu dans l'une des discussions, apr√®s un certain gel. √áa ne me d√©range m√™me pas. Du moins, l'impression, apparemment, n'est que cela. Par cons√©quent, je suis d'accord, je l'avoue, m√™me si, si c'est ma faute, ce n'est que partiellement. J'avoue, je vis des id√©es sur la programmation parall√®le, form√©es dans les ann√©es 80 du si√®cle dernier. Antiquit√©? Peut √™tre. Mais dites-moi ce qu'il y a de nouveau, √† propos duquel la science de la programmation [parall√®le] ne serait pas d√©j√† connue √† l'√©poque (voir d√©tails [1]). √Ä cette √©poque, les programmes parall√®les √©taient divis√©s en deux classes - parall√®le-s√©rie et asynchrone. Si les premiers √©taient d√©j√† consid√©r√©s comme archa√Øques, alors les seconds - avanc√©s et vraiment parall√®les. Parmi ces derniers, la programmation avec contr√¥le des √©v√©nements (ou simplement la programmation des √©v√©nements), le contr√¥le des flux et la programmation dynamique ont √©t√© distingu√©s.C'est tout en g√©n√©ral. Plus de d√©tails d√©j√†.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et qu'offre la programmation actuelle en plus de ce qui est d√©j√† connu il y a au moins 40 ans? Dans mon "regard gel√©" - rien. Les coroutines, comme il s'est av√©r√©, sont maintenant appel√©es coroutines ou m√™me goroutines; les termes concurrence et concurrence entrent dans une stupeur, semble-t-il, pas seulement des traducteurs. Et il n'y a pas de tels exemples. Par exemple, quelle est la diff√©rence entre la programmation r√©active (RP) et la programmation d'√©v√©nements ou le streaming? √Ä laquelle des cat√©gories et / ou classifications connues appartient-il? Personne ne semble int√©ress√© par cela, et personne ne peut le clarifier. Ou pouvez-vous maintenant classer par nom? Alors, en effet, les coroutines et les coroutines sont des choses diff√©rentes, et la programmation parall√®le est simplement oblig√©e de diff√©rer de la concurrence. Et les machines d'√©tat? De quel genre de technique miracle s'agit-il?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les ¬´spaghettis¬ª dans la t√™te proviennent de l'oubli de la th√©orie o√π, lorsqu'un nouveau mod√®le est introduit, il est compar√© √† des mod√®les d√©j√† connus et bien √©tudi√©s. </font><font style="vertical-align: inherit;">Si cela se fera bien, mais au moins vous pouvez le d√©couvrir, car le processus est formalis√©. </font><font style="vertical-align: inherit;">Mais comment aller au fond des choses si vous donnez un nouveau surnom aux coroutines puis choisissez le ¬´code de capot moteur¬ª simultan√©ment en cinq langues, √©valuant en outre la perspective de migration vers les streams. </font><font style="vertical-align: inherit;">Et ce ne sont que des coroutines, qui, franchement, devraient d√©j√† √™tre oubli√©es en raison de leur nature √©l√©mentaire et de leur faible utilisation (il s'agit bien s√ªr de mon exp√©rience).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Programmation r√©active et tout, tout, tout</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ne nous fixerons pas l'objectif de bien comprendre le concept de ¬´programmation r√©active¬ª, m√™me si nous prendrons ¬´l'exemple r√©actif¬ª comme base pour une discussion plus approfondie. </font><font style="vertical-align: inherit;">Son mod√®le formel sera cr√©√© sur la base du mod√®le formel bien connu. </font><font style="vertical-align: inherit;">Et cela, je l'esp√®re, nous permettra de comprendre clairement, avec pr√©cision et en d√©tail l'interpr√©tation et le fonctionnement du programme original. </font><font style="vertical-align: inherit;">Mais dans quelle mesure le mod√®le cr√©√© et sa mise en ≈ìuvre seront ¬´r√©actifs¬ª, c'est aux apologistes de ce type de programmation de d√©cider. </font><font style="vertical-align: inherit;">Pour le moment, il suffira pour l'instant que le nouveau mod√®le devra impl√©menter / mod√©liser toutes les nuances de l'exemple d'origine. </font><font style="vertical-align: inherit;">Si quelque chose n'est pas pris en compte, alors j'esp√®re qu'il y a ceux qui me corrigent. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, dans [2], un exemple de programme r√©actif a √©t√© consid√©r√©, dont le code est montr√© dans le Listing 1.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 1. Code de programme r√©actif</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">1. 1 = 2 <font></font>
2. 2 = 3 <font></font>
3. 3 = 1 + 2 <font></font>
4.  1, 2, 3 <font></font>
5. 1 = 4 <font></font>
6.  1, 2, 3</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le monde de la programmation r√©active, le r√©sultat de son travail sera diff√©rent du r√©sultat d'un programme r√©gulier du m√™me genre. Cela seul est mauvais, pour ne pas dire laideur, car Le r√©sultat du programme doit √™tre sans ambigu√Øt√© et ne pas d√©pendre de la mise en ≈ìuvre. Mais plus confond l'autre. Premi√®rement, en apparence, il n'est gu√®re possible de distinguer un code similaire r√©gulier d'un code r√©actif. Deuxi√®mement, apparemment, l'auteur lui-m√™me n'est pas enti√®rement s√ªr du travail du programme r√©actif, parlant du r√©sultat ¬´tr√®s probablement¬ª. Et troisi√®mement, lequel des r√©sultats est consid√©r√© comme correct?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une telle ambigu√Øt√© dans l'interpr√©tation du code a conduit au fait qu'il n'est pas imm√©diatement possible de le ¬´couper¬ª. </font><font style="vertical-align: inherit;">Mais alors, comme cela arrive souvent, tout s'est av√©r√© √™tre beaucoup plus simple que ce √† quoi on aurait pu s'attendre. </font><font style="vertical-align: inherit;">La figure 1 montre deux diagrammes structurels qui, esp√©rons-le, correspondent √† la structure et expliquent le fonctionnement de l'exemple. </font><font style="vertical-align: inherit;">Dans le diagramme sup√©rieur, les blocs X1 et X2 organisent la saisie des donn√©es, signalant au bloc X3 leur modification. </font><font style="vertical-align: inherit;">Ce dernier effectue la sommation et permet au bloc Pr d'imprimer les valeurs actuelles des variables. </font><font style="vertical-align: inherit;">Apr√®s avoir imprim√©, le bloc Pr signale au bloc X3, d'ailleurs, √† lui et seulement √† lui qu'il est pr√™t √† imprimer de nouvelles valeurs.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">1. Deux mod√®les structurels de l'exemple</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/tw/hs/rq/twhsrqxfdfuyxi4txtd9ciat6hs.jpeg" alt="image"><br>
</div></div> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le deuxi√®me sch√©ma, par rapport au premier, est assez √©l√©mentaire. Dans le cadre d'un seul bloc, il entre des donn√©es et impl√©mente s√©quentiellement: 1) le calcul de la somme des donn√©es d'entr√©e et 2) leur impression. Le remplissage interne du bloc √† ce niveau de pr√©sentation n'est pas divulgu√©. Bien que l'on puisse dire qu'au niveau structurel, il peut s'agir d'une ¬´bo√Æte noire comprenant un sch√©ma √† quatre blocs. Mais encore, son appareil [algorithmique] est cens√© √™tre diff√©rent. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commentaire. L'approche du programme comme une bo√Æte noire refl√®te essentiellement l'attitude de l'utilisateur √† son √©gard. Ce dernier ne s'int√©resse pas √† sa mise en ≈ìuvre, mais au r√©sultat des travaux. Qu'il s'agisse d'un programme r√©actif, d'un programme √©v√©nementiel ou d'un autre, mais le r√©sultat conforme √† la th√©orie des algorithmes doit √™tre sans ambigu√Øt√© et pr√©visible.</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En figue. </font><font style="vertical-align: inherit;">2 pr√©sente des mod√®les algorithmiques qui clarifient en d√©tail la structure interne [algorithmique] des blocs de circuits. </font><font style="vertical-align: inherit;">Le mod√®le sup√©rieur est repr√©sent√© par un r√©seau d'automates, o√π chacun des automates est un mod√®le algorithmique d'un bloc s√©par√©. </font><font style="vertical-align: inherit;">Les connexions entre les automates repr√©sent√©es par des arcs en pointill√©s correspondent aux connexions du circuit. </font><font style="vertical-align: inherit;">Un mod√®le √† un seul automate d√©crit l'algorithme de fonctionnement d'un sch√©ma fonctionnel compos√© d'un bloc (voir un bloc Pr s√©par√© sur la figure 1).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">2. Mod√®les algorithmiques pour les sch√©mas structurels</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/rj/4f/ds/rj4fdsx8kekihnbqqebmpji1y9e.jpeg" alt="image"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les automates X1 et X2 (les noms des automates et des blocs co√Øncident avec les noms de leurs variables), d√©tectent les changements et, si l'automate X3 est pr√™t √† effectuer l'op√©ration d'addition (dans l'√©tat "s0"), passez dans l'√©tat "s1" en se souvenant de la valeur actuelle de la variable. La machine X3, ayant re√ßu l'autorisation d'entrer dans l'√©tat "s1", effectue l'op√©ration d'addition et, si n√©cessaire, attend la fin de l'impression des variables. ¬´Machine d'impression¬ª Pr, ayant termin√© l'impression, revient √† l'√©tat initial ¬´p0¬ª, o√π il attend la commande suivante. Notez que son √©tat "p1" d√©marre une cha√Æne de transitions inverses - l'automate X3 √† l'√©tat "s0", et X1 et X2 √† l'√©tat "s0". Apr√®s cela, l'analyse des donn√©es d'entr√©e, puis leur sommation et leur impression ult√©rieure sont r√©p√©t√©es.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compar√© au r√©seau d'automates, l'algorithme d'un automate Pr s√©par√© est assez simple, mais, notons-le, fait le m√™me travail et peut-√™tre m√™me plus rapidement. </font><font style="vertical-align: inherit;">Ses pr√©dicats r√©v√®lent un changement de variables. </font><font style="vertical-align: inherit;">Dans ce cas, le passage √† l'√©tat ¬´p1¬ª est effectu√© au d√©but de l'action y1 (voir Fig. 2), qui r√©sume les valeurs actuelles des variables, tout en les m√©morisant. </font><font style="vertical-align: inherit;">Ensuite, lors d'une transition inconditionnelle de l'√©tat "p1" √† l'√©tat "p0", l'action y2 imprime les variables. </font><font style="vertical-align: inherit;">Apr√®s cela, le processus revient √† l'analyse des donn√©es d'entr√©e. </font><font style="vertical-align: inherit;">Le code d'impl√©mentation du dernier mod√®le est indiqu√© dans le Listing 2.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 2. Impl√©mentation de l'automate Pr</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fsynch.h"</span></span>
<span class="hljs-keyword">extern</span> LArc TBL_PlusX3[];
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FPlusX3</span> :</span> <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FPlusX3(nameFsa, pCVarFsaLibrary); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    FPlusX3(<span class="hljs-built_in">string</span> strNam, CVarFsaLibrary *pCVFL): LFsaAppl(TBL_PlusX3, strNam, <span class="hljs-literal">nullptr</span>, pCVFL) { }<font></font>
<font></font>
    CVar *pVarY;        		<span class="hljs-comment">// </span>
    CVar *pVarX1;        		<span class="hljs-comment">// </span>
    CVar *pVarX2;        		<span class="hljs-comment">// </span>
    CVar *pVarX3;        		<span class="hljs-comment">// </span>
    CVar *pVarStrNameX1;		<span class="hljs-comment">//   X1</span>
    CVar *pVarStrNameX2;		<span class="hljs-comment">//   X2</span>
    CVar *pVarStrNameX3;		<span class="hljs-comment">//   X3</span>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>; <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x2</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarX1 != <span class="hljs-literal">nullptr</span> &amp;&amp; pVarX2 &amp;&amp; pVarX3; };
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span> </span>{ FInit(); };
    <span class="hljs-keyword">double</span> dSaveX1{<span class="hljs-number">0</span>};
    <span class="hljs-keyword">double</span> dSaveX2{<span class="hljs-number">0</span>};<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fplusx3.h"</span></span><font></font>
<font></font>
LArc TBL_PlusX3[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>), 		<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"p0"</span>,<span class="hljs-string">"x12"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"p0"</span>,		<span class="hljs-string">"p1"</span>,<span class="hljs-string">"x1"</span>,  <span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"p0"</span>,		<span class="hljs-string">"p1"</span>,<span class="hljs-string">"x2"</span>,  <span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"p1"</span>,		<span class="hljs-string">"p0"</span>,<span class="hljs-string">"--"</span>,  <span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span><font></font>
    LArc()<font></font>
};<font></font>
<font></font>
<span class="hljs-comment">// creating local variables and initialization of pointers</span>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FPlusX3::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">// creating local variables</span>
    pVarY = CreateLocVar(<span class="hljs-string">"strY"</span>, CLocVar::vtString, <span class="hljs-string">"print of output string"</span>);			<span class="hljs-comment">//  </span>
    pVarX1 = CreateLocVar(<span class="hljs-string">"dX1"</span>, CLocVar::vtDouble, <span class="hljs-string">""</span>);			<span class="hljs-comment">//  </span>
    pVarX2 = CreateLocVar(<span class="hljs-string">"dX2"</span>, CLocVar::vtDouble, <span class="hljs-string">""</span>);			<span class="hljs-comment">//  </span>
    pVarX3 = CreateLocVar(<span class="hljs-string">"dX3"</span>, CLocVar::vtDouble, <span class="hljs-string">""</span>);			<span class="hljs-comment">//  </span>
    pVarStrNameX1 = CreateLocVar(<span class="hljs-string">"strNameX1"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);			<span class="hljs-comment">//   </span>
    pVarStrNameX2 = CreateLocVar(<span class="hljs-string">"strNameX2"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);			<span class="hljs-comment">//   </span>
    pVarStrNameX3 = CreateLocVar(<span class="hljs-string">"strNameX3"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);			<span class="hljs-comment">//   </span>
<span class="hljs-comment">// initialization of pointers</span>
    <span class="hljs-built_in">string</span> str;<font></font>
    str = pVarStrNameX1-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarX1 = pTAppCore-&gt;GetAddressVar(str.c_str(), <span class="hljs-keyword">this</span>);	}<font></font>
    str = pVarStrNameX2-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarX2 = pTAppCore-&gt;GetAddressVar(str.c_str(), <span class="hljs-keyword">this</span>);	}<font></font>
    str = pVarStrNameX3-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarX3 = pTAppCore-&gt;GetAddressVar(str.c_str(), <span class="hljs-keyword">this</span>);	}
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FPlusX3::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarX1-&gt;GetDataSrc() != dSaveX1; }
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FPlusX3::x2</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarX2-&gt;GetDataSrc() != dSaveX2; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FPlusX3::y1</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">// X3 = X1 + X2</span>
    <span class="hljs-keyword">double</span> dX1 = pVarX1-&gt;GetDataSrc(); <span class="hljs-keyword">double</span> dX2 = pVarX2-&gt;GetDataSrc();
    <span class="hljs-keyword">double</span> dX3 = dX1 + dX2;<font></font>
    pVarX3-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, dX3);<font></font>
    dSaveX1 = dX1; dSaveX2 = dX2;<font></font>
<span class="hljs-comment">//  1, 2, 3</span><font></font>
    QString strX1; strX1.setNum(dX1); QString strX2; strX2.setNum(dX2);<font></font>
    QString strX3; strX3.setNum(dX3);<font></font>
    QString qstr = <span class="hljs-string">"X1="</span> + strX1 + <span class="hljs-string">", X2="</span> + strX2 + <span class="hljs-string">", X3="</span> + strX3;<font></font>
    pVarY-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, qstr.toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La quantit√© de code est clairement incomparablement plus grande que l'exemple d'origine. Mais, notez, pas un seul code. La nouvelle solution supprime tous les probl√®mes de fonctionnement, ne permettant pas de se heurter √† des fantasmes dans l'interpr√©tation du programme. Un exemple qui semble compact et √©l√©gant, mais dont vous pouvez dire ¬´tr√®s probablement¬ª, ne provoque pas, disons, d'√©motions positives et le d√©sir de travailler avec. Il faut aussi noter qu'il faut comparer effectivement avec l'action de l'automate y1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le reste du code est li√© aux exigences de "l'environnement automatique", qui, je le note, n'est pas √©nonc√© dans le code source. Ainsi, la m√©thode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FCreationOfLinksForVariables</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la </font><font style="vertical-align: inherit;">classe d'automate de base </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LFsaAppl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cr√©e des variables locales pour la machine et les relie √† celles-ci lorsque, au niveau de l'environnement VKPA, les noms symboliques des autres variables d'environnement qui leur sont associ√©es sont indiqu√©s. La premi√®re fois qu'il d√©marre lors de la cr√©ation d'un automate, puis dans le cadre de la m√©thode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FInit</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (voir √©tape y12), car tous les liens ne sont pas connus lors de la cr√©ation d'un objet. La machine sera dans l'√©tat "st" jusqu'√† ce que tous les liens n√©cessaires que les v√©rifications de pr√©dicat x12 soient initialis√©s. Une r√©f√©rence √† une variable, si son nom lui est renvoy√©, renvoie la m√©thode GetAddressVar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour supprimer d'√©ventuelles questions, nous vous pr√©sentons le code du r√©seau d'automates. </font><font style="vertical-align: inherit;">Il est montr√© dans le Listing 3 et inclut le code de trois classes d'automates. </font><font style="vertical-align: inherit;">C'est sur leur base que de nombreux objets sont cr√©√©s qui correspondent au sch√©ma structurel du r√©seau repr√©sent√© sur la Fig. </font><font style="vertical-align: inherit;">1. Notez que les objets X1 et X2 sont d√©riv√©s de la classe g√©n√©rale FSynch.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listing 3. Classes de r√©seau automatis√©es</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">extern</span> LArc TBL_Synch[];
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FSynch</span> :</span> <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">dGetData</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarX-&gt;GetDataSrc(); };
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FSynch(nameFsa, pCVarFsaLibrary); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    FSynch(<span class="hljs-built_in">string</span> strNam, CVarFsaLibrary *pCVFL): LFsaAppl(TBL_Synch, strNam, <span class="hljs-literal">nullptr</span>, pCVFL) { }<font></font>
<font></font>
    CVar *pVarX;			<span class="hljs-comment">// </span>
    CVar *pVarStrNameX;		<span class="hljs-comment">//   </span>
    CVar *pVarStrNameObject;<span class="hljs-comment">//  -</span>
    LFsaAppl *pL {<span class="hljs-literal">nullptr</span>};
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarX-&gt;GetDataSrc() != dSaveX; }
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x2</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pL-&gt;FGetState() == <span class="hljs-string">"s1"</span>; }
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pL != <span class="hljs-literal">nullptr</span>; };
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span> </span>{ dSaveX = pVarX-&gt;GetDataSrc(); }
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span> </span>{ FInit(); };
    <span class="hljs-keyword">double</span> dSaveX{<span class="hljs-number">0</span>};<font></font>
};<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fsynch.h"</span></span><font></font>
<font></font>
LArc TBL_Synch[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>), 		<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"s0"</span>,<span class="hljs-string">"x12"</span>,	<span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s0"</span>,		<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x1"</span>,  <span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s1"</span>,		<span class="hljs-string">"s0"</span>,<span class="hljs-string">"x2"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span><font></font>
    LArc()<font></font>
};<font></font>
<font></font>
<span class="hljs-comment">// creating local variables and initialization of pointers</span>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FSynch::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">// creating local variables</span>
    pVarX = CreateLocVar(<span class="hljs-string">"x"</span>, CLocVar::vtDouble, <span class="hljs-string">" "</span>);<font></font>
    pVarStrNameX = CreateLocVar(<span class="hljs-string">"strNameX1"</span>, CLocVar::vtString, <span class="hljs-string">"name of external input variable(x1)"</span>);			<span class="hljs-comment">//   </span>
    pVarStrNameObject = CreateLocVar(<span class="hljs-string">"strNameObject"</span>, CLocVar::vtString, <span class="hljs-string">"name of function"</span>);                   <span class="hljs-comment">//  </span>
<span class="hljs-comment">// initialization of pointers</span>
    <span class="hljs-built_in">string</span> str;
    <span class="hljs-keyword">if</span> (pVarStrNameX) {<font></font>
        str = pVarStrNameX-&gt;strGetDataSrc();<font></font>
        <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pVarX = pTAppCore-&gt;GetAddressVar(str.c_str(), <span class="hljs-keyword">this</span>);	}<font></font>
    }<font></font>
    str = pVarStrNameObject-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pL = FGetPtrFsaAppl(str);	}
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fsynch.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">extern</span> LArc TBL_X1X2X3[];
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FX1X2X3</span> :</span> <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">dGetData</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pVarX3-&gt;GetDataSrc(); };
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FX1X2X3(nameFsa, pCVarFsaLibrary); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    FX1X2X3(<span class="hljs-built_in">string</span> strNam, CVarFsaLibrary *pCVFL): LFsaAppl(TBL_X1X2X3, strNam, <span class="hljs-literal">nullptr</span>, pCVFL) { }<font></font>
<font></font>
    CVar *pVarX1{<span class="hljs-literal">nullptr</span>};			<span class="hljs-comment">//</span>
    CVar *pVarX2{<span class="hljs-literal">nullptr</span>};			<span class="hljs-comment">//</span>
    CVar *pVarX3{<span class="hljs-literal">nullptr</span>};			<span class="hljs-comment">//</span>
    CVar *pVarStrNameFX1;		<span class="hljs-comment">//  X1</span>
    CVar *pVarStrNameFX2;		<span class="hljs-comment">//  X2</span>
    CVar *pVarStrNameFPr;		<span class="hljs-comment">//  Pr</span>
    CVar *pVarStrNameX3;		<span class="hljs-comment">//   </span>
    FSynch *pLX1 {<span class="hljs-literal">nullptr</span>};<font></font>
    FSynch *pLX2 {<span class="hljs-literal">nullptr</span>};<font></font>
    LFsaAppl *pLPr {<span class="hljs-literal">nullptr</span>};
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pLX1-&gt;FGetState() == <span class="hljs-string">"s1"</span>; }
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x2</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pLX2-&gt;FGetState() == <span class="hljs-string">"s1"</span>; }
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x3</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pLPr-&gt;FGetState() == <span class="hljs-string">"p1"</span>; }
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pLPr != <span class="hljs-literal">nullptr</span> &amp;&amp; pLX1 &amp;&amp; pLX2 &amp;&amp; pVarX3; };
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span> </span>{ pVarX3-&gt;SetDataSrc(<span class="hljs-keyword">this</span>, pLX1-&gt;dGetData() + pLX2-&gt;dGetData()); }
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span> </span>{ FInit(); };<font></font>
};<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fx1x2x3.h"</span></span><font></font>
<font></font>
LArc TBL_X1X2X3[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>), 		<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"s0"</span>,<span class="hljs-string">"x12"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s0"</span>,		<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x1"</span>,  <span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s0"</span>,		<span class="hljs-string">"s1"</span>,<span class="hljs-string">"x2"</span>,  <span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"s1"</span>,		<span class="hljs-string">"s0"</span>,<span class="hljs-string">"x3"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span><font></font>
    LArc()<font></font>
};<font></font>
<span class="hljs-comment">// creating local variables and initialization of pointers</span>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FX1X2X3::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">// creating local variables</span>
    pVarX3 = CreateLocVar(<span class="hljs-string">"x"</span>, CLocVar::vtDouble, <span class="hljs-string">" "</span>);<font></font>
    pVarStrNameFX1 = CreateLocVar(<span class="hljs-string">"strNameFX1"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);<font></font>
    pVarStrNameFX2 = CreateLocVar(<span class="hljs-string">"strNameFX2"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);<font></font>
    pVarStrNameFPr = CreateLocVar(<span class="hljs-string">"strNameFPr"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);<font></font>
    pVarStrNameX3 = CreateLocVar(<span class="hljs-string">"strNameX3"</span>, CLocVar::vtString, <span class="hljs-string">""</span>);
<span class="hljs-comment">// initialization of pointers</span>
    <span class="hljs-built_in">string</span> str; str = pVarStrNameFX1-&gt;strGetDataSrc();
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pLX1 = (FSynch*)FGetPtrFsaAppl(str);	}<font></font>
    str = pVarStrNameFX2-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pLX2 = (FSynch*)FGetPtrFsaAppl(str);	}<font></font>
    str = pVarStrNameFPr-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pLPr = FGetPtrFsaAppl(str);	}
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"lfsaappl.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fsynch.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">extern</span> LArc TBL_Print[];
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FX1X2X3</span>;</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FPrint</span> :</span> <span class="hljs-keyword">public</span> LFsaAppl<font></font>
{<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">LFsaAppl* <span class="hljs-title">Create</span><span class="hljs-params">(CVarFSA *pCVF)</span> </span>{ Q_UNUSED(pCVF)<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FPrint(nameFsa, pCVarFsaLibrary); }
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FCreationOfLinksForVariables</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    FPrint(<span class="hljs-built_in">string</span> strNam, CVarFsaLibrary *pCVFL): LFsaAppl(TBL_Print, strNam, <span class="hljs-literal">nullptr</span>, pCVFL) { }<font></font>
<font></font>
    CVar *pVarY;        		<span class="hljs-comment">// </span>
    CVar *pVarStrNameFX1;		<span class="hljs-comment">//    X1</span>
    CVar *pVarStrNameFX2;		<span class="hljs-comment">//    X2</span>
    CVar *pVarStrNameFX3;		<span class="hljs-comment">//    X3</span>
    FSynch *pLX1 {<span class="hljs-literal">nullptr</span>};     <span class="hljs-comment">//    X1</span>
    FSynch *pLX2 {<span class="hljs-literal">nullptr</span>};     <span class="hljs-comment">//    X2</span>
    FX1X2X3 *pLX3 {<span class="hljs-literal">nullptr</span>};    <span class="hljs-comment">//    X3</span>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">x12</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pLX3 != <span class="hljs-literal">nullptr</span> &amp;&amp; pLX1 &amp;&amp; pLX2 &amp;&amp; pLX3; };
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y1</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">y12</span><span class="hljs-params">()</span> </span>{ FInit(); };<font></font>
};<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"stdafx.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fprint.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"fx1x2x3.h"</span></span><font></font>
<font></font>
LArc TBL_Print[] = {<font></font>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"st"</span>,<span class="hljs-string">"^x12"</span>,<span class="hljs-string">"y12"</span>), 		<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"st"</span>,		<span class="hljs-string">"p0"</span>,<span class="hljs-string">"x12"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"p0"</span>,		<span class="hljs-string">"p1"</span>,<span class="hljs-string">"x1"</span>,  <span class="hljs-string">"y1"</span>),			<span class="hljs-comment">//</span>
    LArc(<span class="hljs-string">"p1"</span>,		<span class="hljs-string">"p0"</span>,<span class="hljs-string">"--"</span>,	<span class="hljs-string">"--"</span>),			<span class="hljs-comment">//</span><font></font>
    LArc()<font></font>
};<font></font>
<span class="hljs-comment">// creating local variables and initialization of pointers</span>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">FPrint::FCreationOfLinksForVariables</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">// creating local variables</span>
    pVarY = CreateLocVar(<span class="hljs-string">"strY"</span>, CLocVar::vtString, <span class="hljs-string">"print of output string"</span>);			<span class="hljs-comment">//  </span>
    pVarStrNameFX1 = CreateLocVar(<span class="hljs-string">"strNameFX1"</span>, CLocVar::vtString, <span class="hljs-string">"name of external input object(x1)"</span>);			<span class="hljs-comment">//   </span>
    pVarStrNameFX2 = CreateLocVar(<span class="hljs-string">"strNameFX2"</span>, CLocVar::vtString, <span class="hljs-string">"name of external input object(x2)"</span>);			<span class="hljs-comment">//   </span>
    pVarStrNameFX3 = CreateLocVar(<span class="hljs-string">"strNameFX3"</span>, CLocVar::vtString, <span class="hljs-string">"name of external input object(pr)"</span>);			<span class="hljs-comment">//   </span>
<span class="hljs-comment">// initialization of pointers</span>
    <span class="hljs-built_in">string</span> str;<font></font>
    str = pVarStrNameFX1-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pLX1 = (FSynch*)FGetPtrFsaAppl(str);	}<font></font>
    str = pVarStrNameFX2-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pLX2 = (FSynch*)FGetPtrFsaAppl(str);	}<font></font>
    str = pVarStrNameFX3-&gt;strGetDataSrc();<font></font>
    <span class="hljs-keyword">if</span> (str != <span class="hljs-string">""</span>) { pLX3 = (FX1X2X3*)FGetPtrFsaAppl(str);	}
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">FPrint::x1</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> pLX3-&gt;FGetState() == <span class="hljs-string">"s1"</span>; }<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">FPrint::y1</span><span class="hljs-params">()</span> </span>{<font></font>
    QString strX1; strX1.setNum(pLX1-&gt;dGetData());<font></font>
    QString strX2; strX2.setNum(pLX2-&gt;dGetData());<font></font>
    QString strX3; strX3.setNum(pLX3-&gt;dGetData());<font></font>
    QString qstr = <span class="hljs-string">"X1="</span> + strX1 + <span class="hljs-string">", X2="</span> + strX2 + <span class="hljs-string">", X3="</span> + strX3;<font></font>
    pVarY-&gt;SetDataSrc(<span class="hljs-literal">nullptr</span>, qstr.toStdString(), <span class="hljs-literal">nullptr</span>);<font></font>
}<font></font>
</code></pre> <br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce code est diff√©rent du Listing 1, comme une photo d'un avion de sa documentation de conception. Mais, je pense, nous sommes principalement des programmeurs, et, aucune infraction ne leur sera dite, certains designers. Notre ¬´code de conception¬ª doit √™tre facile √† comprendre et √† interpr√©ter sans ambigu√Øt√© afin que notre ¬´avion¬ª ne s'√©crase pas lors du premier vol. Et si un tel malheur arrivait, et avec les programmes, cela se produit plus souvent qu'avec les avions, alors la raison peut √™tre trouv√©e facilement et rapidement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, en consid√©rant le Listing 3, vous devez imaginer que le nombre de classes n'est pas directement li√© au nombre d'objets correspondants dans le programme parall√®le. Le code ne refl√®te pas la relation entre les objets, mais contient les m√©canismes qui les cr√©ent. Ainsi, la classe </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FSynch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contient un pointeur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vers un objet de type</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LFsaAppl</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Le nom de cet objet est d√©termin√© par une variable locale, qui dans l'environnement VKPa correspondra √† une variable automate avec le nom </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strNameObject</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Un pointeur est n√©cessaire pour utiliser la m√©thode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FGetState pour</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> surveiller l'√©tat actuel d'un objet automate de type </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FSynch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (voir le code de pr√©dicat x2). Des pointeurs similaires aux objets, des variables pour sp√©cifier les noms des objets et des pr√©dicats n√©cessaires √† l'organisation des relations contiennent d'autres classes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, quelques mots sur la ¬´construction¬ª d'un programme parall√®le dans l'environnement VKPA. Il est cr√©√© lors du chargement de la configuration du programme. Dans ce cas, les premiers objets sont cr√©√©s √† partir de classes issues de biblioth√®ques th√©matiques dynamiques de type automate (leur ensemble est d√©termin√© par la configuration de l'application / du programme). Les objets cr√©√©s sont identifi√©s par leurs noms (appelons-les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variables automatiques</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">Ensuite, les valeurs n√©cessaires sont √©crites dans les variables locales des automates. </font><font style="vertical-align: inherit;">Dans notre cas, les variables avec un type de cha√Æne sont d√©finies sur les noms de variables d'autres objets et / ou les noms des objets. </font><font style="vertical-align: inherit;">De cette fa√ßon, les connexions entre les objets d'un programme d'automate parall√®le sont √©tablies (voir Fig. 1). </font><font style="vertical-align: inherit;">De plus, en modifiant les valeurs des variables d'entr√©e (en utilisant des bo√Ætes de dialogue de contr√¥le d'objet individuelles ou les bo√Ætes de dialogue standard / environnement pour d√©finir les valeurs des variables d'environnement), nous fixons le r√©sultat. </font><font style="vertical-align: inherit;">Il peut √™tre vu √† l'aide d'une bo√Æte de dialogue d'environnement standard pour afficher les valeurs des variables.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. √Ä l'analyse des programmes parall√®les</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Concernant le fonctionnement d'un programme parall√®le, √† moins qu'il ne soit assez simple s√©quentiellement parall√®le, il est tr√®s, tr√®s difficile de dire quelque chose de concret. Le r√©seau d'automates consid√©r√© ne fait pas exception. Ensuite, nous verrons cela, en comprenant ce que l'on peut en attendre.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'automate r√©sultant et le r√©seau pour lequel il est construit sont illustr√©s √† la Fig. </font><font style="vertical-align: inherit;">3. Depuis le r√©seau de la Fig. </font><font style="vertical-align: inherit;">2, en plus de renommer ses √©l√©ments - automates, signaux d'entr√©e et de sortie, il se distingue par l'absence d'une ¬´machine d'impression¬ª de variables. </font><font style="vertical-align: inherit;">Ce dernier n'est pas indispensable pour le fonctionnement du r√©seau, et le renommage vous permet d'utiliser l'op√©ration de composition pour construire l'automate r√©sultant. </font><font style="vertical-align: inherit;">De plus, pour cr√©er des noms plus courts, un codage a √©t√© introduit lorsque, par exemple, l'√©tat "a0" de l'automate A est repr√©sent√© par le symbole "0", et "a1" par le symbole "1". </font><font style="vertical-align: inherit;">De m√™me pour les autres machines. </font><font style="vertical-align: inherit;">Dans ce cas, l'√©tat des composants du r√©seau, par exemple ¬´a1b0c1¬ª, est affect√© du nom ¬´101¬ª. </font><font style="vertical-align: inherit;">De m√™me, des noms sont form√©s pour tous les √©tats des composants du r√©seau, dont le nombre est d√©termin√© par le produit des √©tats des automates des composants.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">3. L'automate r√©seau r√©sultant</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/a8/oc/9k/a8oc9kfwbbm3apemxhjzpbz5mxw.jpeg" alt="image"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 L'automate r√©sultant peut, bien s√ªr, √™tre calcul√© de mani√®re purement formelle, mais pour cela, nous avons besoin d'une ¬´calculatrice¬ª appropri√©e. Mais si ce n'est pas le cas, vous pouvez utiliser un algorithme intuitif assez simple. Dans son cadre, l'un ou l'autre √©tat des composants du r√©seau est enregistr√© puis, en triant toutes les situations d'entr√©e possibles, les √©tats des composants cibles sont d√©termin√©s par des ¬´poign√©es¬ª. Ainsi, apr√®s avoir fix√© l'√©tat "000" correspondant aux √©tats actuels des automates composants - "a0", "b0", "c0", les transitions pour les conjonctions des variables d'entr√©e ^ x1 ^ x2, ^ x1x2, x1 ^ x2, x1x2 sont d√©termin√©es. Nous obtenons les transitions respectivement dans indique "a0b0c0", "a0b1c0", "a1b0c0", "a1b1c0", qui sont marqu√©s "000", "010", "100" et "110" sur la machine r√©sultante. bouclesqui ne sont pas charg√©s d'actions peuvent √™tre exclus du graphique.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce que nous avons "dans le r√©sidu sec". Nous avons atteint l'essentiel - nous avons re√ßu l'automate r√©sultant, qui d√©crit avec pr√©cision le fonctionnement du r√©seau. Nous avons d√©couvert que sur huit √©tats de r√©seau possibles, un est inaccessible (isol√©) - √©tat ¬´001¬ª. Cela signifie que l'op√©ration de sommation ne sera en aucun cas d√©clench√©e pour les variables d'entr√©e qui n'ont pas modifi√© la valeur actuelle.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce qui est inqui√©tant, m√™me si les tests n'ont pas r√©v√©l√© d'erreurs. Sur le graphique de l'automate r√©sultant, des transitions conflictuelles dans les actions de sortie ont √©t√© trouv√©es. Ils sont marqu√©s par une combinaison des actions y1y3 et y2y3. Les actions y1 et y2 sont d√©clench√©es lorsque les donn√©es d'entr√©e changent, puis une autre action y3 calcule la somme des variables en parall√®le avec elles. Sur quelles valeurs fonctionnera-t-elle - ancienne ou simplement chang√©e par de nouvelles? Pour √©liminer l'ambigu√Øt√©, vous pouvez simplement modifier les actions de y3 et y4. Dans ce cas, leur code sera le suivant: X3 = X1Sav + X2Sav et imprimer (X1Sav, X2Sav, X3).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc. </font><font style="vertical-align: inherit;">La construction de l'automate r√©sultant a r√©v√©l√© des probl√®mes √©vidents dans le mod√®le parall√®le cr√©√©. </font><font style="vertical-align: inherit;">Qu'ils apparaissent dans le programme r√©actif est une question. </font><font style="vertical-align: inherit;">Tout d√©pendra, apparemment, de l'approche de la mise en ≈ìuvre du parall√©lisme dans le paradigme r√©actif. </font><font style="vertical-align: inherit;">Dans tous les cas, une telle d√©pendance doit √™tre prise en compte et en quelque sorte √©limin√©e. </font><font style="vertical-align: inherit;">Dans le cas d'un r√©seau automatis√©, il est plus facile de quitter la version modifi√©e que d'essayer de changer le r√©seau. </font><font style="vertical-align: inherit;">Ce n'est pas grave si les ¬´anciennes¬ª donn√©es qui ont d√©clench√© le fonctionnement du r√©seau sont imprim√©es en premier, puis les donn√©es actuelles sont imprim√©es ensuite.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Conclusions </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chacune des solutions envisag√©es a ses avantages et ses inconv√©nients. Le premier est tr√®s simple, le r√©seau est plus compliqu√©, et cr√©√© √† partir d'une seule machine, il ne commencera √† analyser les donn√©es d'entr√©e qu'apr√®s sa visualisation. En raison de son parall√©lisme, le m√™me r√©seau automatique commencera l'analyse des donn√©es d'entr√©e avant la fin de la proc√©dure d'impression. Et si le temps de visualisation est long, mais ce sera le cas contre l'op√©ration de sommation, alors le r√©seau sera plus rapide du point de vue du contr√¥le d'entr√©e. Ceux. une √©valuation bas√©e sur une estimation de la quantit√© de code dans le cas de programmes parall√®les n'est pas toujours objective. En termes plus simples, le r√©seau est parall√®le, la solution √† un composant est largement s√©quentielle (ses pr√©dicats et ses actions sont parall√®les). Et nous parlons tout d'abord de programmes parall√®les.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mod√®le de r√©seau est √©galement un exemple de solution flexible. Premi√®rement, les composants peuvent √™tre con√ßus ind√©pendamment les uns des autres. Deuxi√®mement, tout composant peut √™tre remplac√© par un autre. Et troisi√®mement, tout composant r√©seau peut √™tre un √©l√©ment d'une biblioth√®que de processus automatiques et est utilis√© dans une autre solution r√©seau. Et ce ne sont que les avantages les plus √©vidents d'une solution parall√®le.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais revenons √† une programmation r√©active. RP consid√®re-t-il que toutes les instructions de programme sont initialement parall√®les? On peut seulement supposer que sans cela, il est difficile de parler d'un paradigme de programmation ¬´orient√© vers les flux de donn√©es et la propagation des changements¬ª (voir la d√©finition de la programmation r√©active dans [3]). Mais alors quelle est sa diff√©rence par rapport √† la programmation avec contr√¥le de streaming (pour plus de d√©tails, voir [1])? Nous revenons donc √† notre point de d√©part: comment classer la programmation r√©active dans le cadre de classifications bien connues? Et, si RP est une programmation sp√©ciale, qu'est-ce qui est diff√©rent des paradigmes de programmation connus?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, sur la th√©orie. Sans cela, l'analyse d'algorithmes parall√®les ne serait pas seulement difficile, voire impossible. Dans le processus d'analyse, des probl√®mes sont parfois identifi√©s qui, m√™me avec un regard attentif et r√©fl√©chi sur le programme, comme, accessoirement, sur le ¬´document de conception¬ª, sont impossibles √† deviner. En tout cas, je suis pour le fait que les avions, au figur√© comme dans tout autre sens, ne plantent pas. C'est moi au fait que, bien s√ªr, vous devez viser la simplicit√© et la gr√¢ce de la forme, mais sans perte de qualit√©. Nous, programmeurs, ne nous contentons pas de ¬´dessiner¬ª des programmes, mais nous contr√¥lons souvent ce qui y est cach√©, y compris par les avions!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, j'ai presque oubli√©. Je classerais la programmation automatique (AP) comme une programmation avec contr√¥le dynamique. Quant √† l'asynchronie - je parie. √âtant donn√© que la base du mod√®le de contr√¥le AP est un r√©seau en un seul instant, c'est-√†-dire r√©seaux synchrones d'automates, alors il est synchrone. Mais puisque l'environnement VKPa impl√©mente √©galement de nombreux r√©seaux √† travers le concept de ¬´mondes d'automates¬ª, il est compl√®tement asynchrone. En g√©n√©ral, je suis contre tout cadre de classification tr√®s rigide, mais pas pour l'anarchie. En ce sens, en VKPa, j'esp√®re qu'un certain compromis a √©t√© trouv√© entre la rigidit√© de la programmation s√©rie-parall√®le et un certain anarchisme asynchrone. √âtant donn√© que la programmation automatique couvre √©galement la classe des programmes d'√©v√©nements (voir [4]) et que les programmes de flux y sont facilement mod√©lis√©s,de quelle programmation pouvez-vous encore r√™ver? Bien s√ªr - pour moi.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Litt√©rature</font></font></b><div class="spoiler_text">1.   /.. , .. , .. , .. ;  . .. . ‚Äì .:   , 1983. ‚Äì 240.<br>
2.      . [ ],  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/ru/post/486632</a> . . . (  07.02.2020).<br>
3.  . . [ ],  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ru.wikipedia.org/wiki/_</a> . . . (  07.02.2020).<br>
4.  ‚Äî  ? [ ],  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">habr.com/ru/post/483610</a> . . . (  07.02.2020).<br>
</div></div></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487698/index.html">√âv√©nements num√©riques √† Saint-P√©tersbourg du 10 au 16 f√©vrier</a></li>
<li><a href="../fr487702/index.html">Une s√©lection d'articles sur l'apprentissage automatique: √©tudes de cas, guides et recherches pour janvier 2020</a></li>
<li><a href="../fr487704/index.html">Comment nous avons cr√©√© des rapports dynamiques au SSRS 2014</a></li>
<li><a href="../fr487706/index.html">D√©couverte de service dans les syst√®mes distribu√©s √† l'aide de l'exemple Consul. Alexander Sigachev</a></li>
<li><a href="../fr487716/index.html">Parfait SAST. Analyseur</a></li>
<li><a href="../fr487724/index.html">BlazingPizza: application Blazor du d√©but √† la fin. Partie 2. Ajouter un composant</a></li>
<li><a href="../fr487728/index.html">@Pythonetc compilation, janvier 2020</a></li>
<li><a href="../fr487730/index.html">Traitement du langage naturel. R√©sultats 2019 et tendances 2020</a></li>
<li><a href="../fr487734/index.html">Acc√©l√©ration du noyau Entity Framework</a></li>
<li><a href="../fr487738/index.html">Animation de sch√©ma dans SCADA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>