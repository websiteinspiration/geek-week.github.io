<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👏🏻 🤠 📿 Validation de champ IOS - rapide et facile 👸🏼 ☹️ 🤽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La validation des champs de saisie est peut-être la tâche la plus courante dans les applications mobiles. Chaque application qui prend la forme d'une ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Validation de champ IOS - rapide et facile</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497886/"><img src="https://habrastorage.org/webt/dl/m7/op/dlm7opjmmejtv0z6ckspsc_ig7o.jpeg" alt="image" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La validation des champs de saisie est peut-être la tâche la plus courante dans les applications mobiles. </font><font style="vertical-align: inherit;">Chaque application qui prend la forme d'une autorisation et d'un enregistrement dispose également d'un certain nombre d'outils d'entrée de l'utilisateur, qui suscitent l'enthousiasme sadique et sophistiqué attendu des testeurs. </font><font style="vertical-align: inherit;">Une communauté de développeurs avancés et techniquement compétents a appris </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à les</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gérer </font><font style="vertical-align: inherit;">efficacement </font><font style="vertical-align: inherit;">en incorporant des expressions régulières dans le code source.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En règle générale, lorsque vous devez vous limiter à l'enregistrement et à l'autorisation, vous n'avez pas besoin de faire des efforts particuliers pour atteindre votre objectif - le code est transféré d'un projet à un autre, presque sans aucun changement. Et, plus important encore, sans augmenter les heures de travail pour la maintenance de ce code. Mais le monde ne serait pas aussi simple sans les impulsions créatives des concepteurs UI / UX qui sont enclins, contrairement à la tradition établie, à la logique et au bon sens, à inventer de nouvelles façons d'interagir avec l'utilisateur final, en mettant sur le formulaire plusieurs, selon eux, les contrôles nécessaires, l'accessibilité qui dépend de l'ensemble cartésien de conditions pour vérifier la validité d'un grand nombre de champs de saisie et d'autres commandes de contrôle. Malheureusement, cette situation peut difficilement être qualifiée de rare.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'irritation du développeur augmente proportionnellement à la fréquence à laquelle il doit violer les principes DRY: d'une part, la fierté professionnelle ne permet pas de compromis, et d'autre part, le code copier-coller est le moyen le plus efficace d'éviter un long cycle de test - le débogage. Le code copié monotone est beaucoup plus facile à entretenir qu'un "vélo" unique, vérifié idéologiquement. La recherche d'une alternative gaspille non seulement la créativité du développeur, mais ajoute également des dépendances au projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le même temps, le SDK iOS présente des fonctionnalités extrêmement sous-estimées qui s'adaptent facilement à de nombreuses tâches liées non seulement à la validation - la programmation déclarative simplifie considérablement la vie du développeur. Bien sûr, l'auteur connaît l'implacable camp des </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amoureux</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amis d'utiliser du code "non dilué", mais depuis que l'auteur de l'article a commencé à développer des interfaces professionnelles en développant une interface graphique pour MS DOS, il n'y a pas grand désir de perdre du temps à créer une autre classe parfaite, et si vous pouvez l'utiliser avec une valeur égale souris - la préférence sera donnée à la souris. </font><font style="vertical-align: inherit;">En conséquence, il explique comment minimiser la quantité de code afin d'accélérer et de simplifier le processus de développement.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avertissement:</font></font></b>
                        <div class="spoiler_text">   ,    .            .        ,     —    .<br>
</div>
                    </div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une tâche minimale typique est la suivante:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
il y a des champs de saisie de connexion et de mot de passe et un bouton d'autorisation. Il est nécessaire que le bouton d'autorisation change d'état (isEnable) selon ce qui est contenu dans les champs de saisie. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une version légèrement plus avancée de cette tâche ressemble à ceci:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nous avons les champs de saisie de l'e-mail, du mot de passe et du numéro de téléphone, ainsi que deux boutons - enregistrement et demande d'un code SMS pour le téléphone entré. Le bouton d'enregistrement ne doit être disponible que lorsque les données correctes sont entrées dans chacun des champs. Et le bouton de demande de code est lorsque le champ du numéro de téléphone est valide. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution typique</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- création de drapeaux interdépendants en combinant les instructions «if» et «switch» dans un contrôleur de vue. </font><font style="vertical-align: inherit;">La difficulté augmentera avec le nombre de contrôles impliqués dans le processus. </font><font style="vertical-align: inherit;">Une solution beaucoup plus avancée serait de créer une machine à états. </font><font style="vertical-align: inherit;">La solution est excellente - mais prend du temps, en plus, avec un seuil d'entrée élevé - et ce n'est en aucun cas ce que je veux implémenter pour le développeur paresseux (AKA "vrai").</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lema à propos d'un développeur paresseux</font></font></b>
                        <div class="spoiler_text"><i> ,     ,          .       (« » ),      ,   .</i><br>
</div>
                    </div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'idée générale de la proposition est la suivante:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
il existe une classe pour le champ de saisie et une classe pour le gestionnaire de validation. Le champ de saisie est hérité, comme prévu, de UITextField. Le gestionnaire de validation - hérité de UIControl, contient une collection d'éléments validés (il n'est pas du tout nécessaire d'être des descendants de UITextField) et implémente le modèle «observateur». De plus, il agit en tant que gestionnaire pour d'autres contrôles qui doivent changer leur état d'accessibilité lorsque l'état des éléments validés change. En d'autres termes, si le champ contient un e-mail non valide, le bouton d'enregistrement ne doit pas être disponible.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/tt/7g/xitt7g_qwtiu_rdbg-rhx_1oug4.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les champs de saisie sont auto-validants - ils peuvent répondre à la question de savoir si les données qu'ils contiennent sont valides et changer leur état. </font><font style="vertical-align: inherit;">Certains développeurs préfèrent utiliser une classe de validation distincte (et ses descendants) pour valider les champs d'entrée, mais cette pratique rend impossible de profiter pleinement de la portabilité déclarative et évolutive du code. </font><font style="vertical-align: inherit;">Il est important pour nous que le champ de saisie ou tout autre contrôle validé supporte une interface simple du formulaire:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-meta">@objc</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IValidatable</span> : <span class="hljs-title">class</span> </span>{<font></font>
&nbsp; &nbsp; varisValid: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">get</span> }<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/py/ii/zc/pyiizcxavc47l631fj9scai8ryu.jpeg" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour ajouter une validation à votre projet, vous devez ajouter 4 fichiers à partir de l'exemple situé dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le référentiel GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La classe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSTextField</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implémente un champ de saisie avec une indication du processus de validation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La classe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un observateur qui fournit les fonctionnalités dont nous avons besoin.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extension </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StringOptional + Utils</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - contient une seule méthode qui utilise une expression régulière pour vérifier si le texte de la ligne actuelle est valide.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIView + Layer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est juste un moyen pratique d'ajouter un cadre d'une largeur donnée à tout descendant d'UIView.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À strictement parler, si vous souhaitez implémenter la validation de la même manière pour tout autre contrôle, vous n'avez probablement besoin que de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le reste est utilisé uniquement pour votre commodité. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le processus de validation est montré dans la vidéo (gif).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/ha/5j/dsha5jc7u50qf_h1plwksphdoha.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, avant le début de l'entrée, le champ est dans son état par défaut et la validation se produit lorsque les données sont entrées. Si vous quittez le champ avant la fin de la validation, une inscription apparaît sur le champ pour signaler l'erreur. Le bouton d'enregistrement ne sera pas disponible tant que les deux champs ne seront pas valides. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une situation similaire se développe sur le deuxième écran (qui ne devient disponible qu'après activation de l'inscription). Mais sur le deuxième écran, la validation des champs et des boutons se produit indépendamment - le bouton d'enregistrement n'est disponible que si tous les champs ont échoué. Dans le même temps, le bouton d'envoi SMS est déjà disponible lorsque le champ avec le numéro de téléphone est valide. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et maintenant l'astuce:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'ensemble du projet contient une seule classe pour le contrôleur de vue, la même que celle créée par Xcode lors de la création du projet à partir du modèle. </font><font style="vertical-align: inherit;">Il est complètement vide. </font><font style="vertical-align: inherit;">Mais même il n'est pas utilisé. </font><font style="vertical-align: inherit;">Ce n'est pas difficile à vérifier avec l'aide du répartiteur. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/71/yo/hg/71yohgaltaumlkvssjfhdky6wzi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un lecteur attentif a remarqué qu'à la droite du répondeur se trouve un objet de la palette de composants Xcode standard. </font><font style="vertical-align: inherit;">Pour cela, le paramètre Class est remplacé par la classe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La même astuce a été effectuée pour les champs de saisie, à la seule différence que la classe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSTextField y</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est utilisée </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, toute notre programmation se résume aux étapes simples suivantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Associez la collection VerifiedControls de ValidationManager aux champs d'entrée.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/n_/fu/lhn_fuw8x1htw5zhfkgvfkuvf5c.jpeg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oa/jt/0r/oajt0rvzv05avyyt1shuihukdj8.jpeg"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Associez la collection managedControls de ValidationManager au bouton que vous souhaitez gérer.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/5r/zs/sn5rzsgoycpntng8ogadslty7ze.jpeg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/py/kf/lj/pykfljwpykcfd108oq02zqg6pvy.jpeg"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Associez les champs de saisie dans la direction opposée à ValidationManager, ce qui en fait un délégué.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/y0/fn/dm/y0fndmyvohjq6ezorijkyd29ljs.jpeg"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le champ de saisie, définissez une expression régulière pour la validation et un message d'erreur, ainsi que d'autres propriétés personnalisées et standard via le gestionnaire Xcode standard. </font><font style="vertical-align: inherit;">En principe, tout sauf l'expression régulière peut être laissé "tel quel". </font><font style="vertical-align: inherit;">Il vous suffit d'utiliser le clavier, puis de copier-coller la formule à partir de Tyrnet. </font><font style="vertical-align: inherit;">Si le message d'erreur est manquant, il ne sera tout simplement pas affiché à l'écran.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_n/xy/nl/_nxynlbcisajrpzfoezwykgf8xy.jpeg"></div></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><font style="vertical-align: inherit;">laid et primitif.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-meta">@objc</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IValidationManager</span> : <span class="hljs-title">class</span> </span>{
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">verificated</span><span class="hljs-params">()</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@objc</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IValidatable</span> : <span class="hljs-title">class</span> </span>{
&nbsp; &nbsp; <span class="hljs-keyword">var</span> isValid: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">get</span> }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DSValidationManager</span> : <span class="hljs-title">UIControl</span>, <span class="hljs-title">IValidationManager</span>
</span>{
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">var</span> verifiedControls: [<span class="hljs-type">UIControl</span>]?
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">var</span> managedControls: [<span class="hljs-type">UIControl</span>]?<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> (<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> valid : <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">didSet</span> {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.sendActions(<span class="hljs-keyword">for</span>: .valueChanged)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; overrideinit(frame: <span class="hljs-type">CGRect</span>) {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(frame: frame)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.verificated()<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">required</span> <span class="hljs-keyword">init</span>?(coder: <span class="hljs-type">NSCoder</span>) {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(coder: coder)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.verificated()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">verificated</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.checkVerifiedControls()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.controlsAction()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">checkVerifiedControls</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> list:[<span class="hljs-type">IValidatable</span>] = <span class="hljs-keyword">self</span>.verifiedControls?.<span class="hljs-built_in">filter</span>({$<span class="hljs-number">0</span> isIValidatable}) <span class="hljs-keyword">as</span>? [<span class="hljs-type">IValidatable</span>]
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.valid = list.<span class="hljs-built_in">filter</span>({!$<span class="hljs-number">0</span>.isValid}).<span class="hljs-built_in">count</span>==<span class="hljs-number">0</span><font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">controls</span> <span class="hljs-title">Action</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> list = <span class="hljs-keyword">self</span>.managedControls <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item.isEnabled = <span class="hljs-keyword">self</span>.valid<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, il reçoit une notification d'une collection et agit sur une autre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un observateur en fait une propriété que nous n'avons même pas considérée dans cet exemple. Vous pouvez faire glisser la connexion de l'objet ValidationManager directement vers le contrôleur, y ajouter un événement similaire à un clic sur un bouton et traiter l'état du gestionnaire directement dans le contrôleur. Si vous le voulez vraiment. Cela peut être utile si vous devez non seulement verrouiller le contrôle, mais aussi effectuer un travail utile (par exemple, jouer une marche ou afficher AlertView). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De tout le code TextEdit, il convient de noter seulement que le champ doit prendre soin de définir correctement la propriété " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isValid</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " et de tirer la méthode " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verified ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"De son délégué. </font><font style="vertical-align: inherit;">Cependant, notez que le champ de saisie n'utilise pas une référence à l'objet gestionnaire, mais une collection. </font><font style="vertical-align: inherit;">Cela vous permet de lier un champ de saisie à plusieurs gestionnaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, la méthode devra être tirée par chacun des délégués.</font></font><br>
<br>
<pre><code class="swift hljs">&nbsp; &nbsp; <span class="hljs-keyword">var</span> isValid: <span class="hljs-type">Bool</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.text.verification(<span class="hljs-keyword">self</span>.expression, <span class="hljs-keyword">required</span>:<span class="hljs-keyword">self</span>.valueRequired)<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">var</span> validateDelegates: [<span class="hljs-type">IValidationManager</span>]?<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handleDelegateAction</span><span class="hljs-params">(<span class="hljs-number">_</span> sender: UITextField)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> list = <span class="hljs-keyword">self</span>.validateDelegates <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<font></font>
<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">for</span> validateDelegate <span class="hljs-keyword">in</span> list {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; validateDelegate.verificated()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, si vous devez créer un nouveau formulaire avec des champs de saisie, vous n'avez même pas besoin de définir des valeurs de propriétés personnalisées - il suffira de copier les attributs Runtime requis en bloc et de les appliquer à un nouveau champ (n'oubliez pas de simplement remplacer le nom de la classe).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bx/lv/ux/bxlvuxtf5dzjngxyt_h-iq555q4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De manière générale, l'astuce utilisant «l'objet» dans l'en-tête du formulaire peut être utilisée beaucoup plus largement que juste pour la validation de champ - elle convertit de manière réactive MVC en MVVM sans aucun Rx. </font><font style="vertical-align: inherit;">Son utilisation la plus courante est le partage réseau et la notification des changements dans le modèle CoreData.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr497874/index.html">David Heinemeyer Hansson (Basecamp, ReWork, Ruby on Rails) sur son fonctionnement</a></li>
<li><a href="../fr497876/index.html">[signet] Travailler avec des images sur le Web</a></li>
<li><a href="../fr497878/index.html">Installer la version GPL de HPL avec OpenBLAS</a></li>
<li><a href="../fr497880/index.html">Production d'icônes de matériaux pour MacOSX Home Assistant sur Electron</a></li>
<li><a href="../fr497882/index.html">Comment obtenir une entrevue ou pourquoi n’êtes-vous pas embauché?</a></li>
<li><a href="../fr497890/index.html">Journée de formation virtuelle Microsoft 365: plongez dans les équipes Microsoft</a></li>
<li><a href="../fr497894/index.html">Journée de formation virtuelle Microsoft Azure: entrepôt de données moderne</a></li>
<li><a href="../fr497896/index.html">Nous préservons la vision sur un site distant en utilisant un projecteur au lieu d'un moniteur - plusieurs nuances non évidentes</a></li>
<li><a href="../fr497900/index.html">Les disques durs SMR (en mosaïque) sans indiquer la présence de SMR sont allés aux canaux de vente</a></li>
<li><a href="../fr497904/index.html">UX-recherche de RBS: notre expérience, nos erreurs et nos découvertes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>