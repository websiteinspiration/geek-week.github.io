<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍👩‍👧‍👧 ⏱️ 👩🏾‍🏫 Kubernetes: open source vs vendor 💡 👨🏾 🍝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, my name is Dmitry Krasnov. For over five years now, I have been administering Kubernetes clusters and building complex microservice architectures....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kubernetes: open source vs vendor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/500728/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hi, my name is Dmitry Krasnov. </font><font style="vertical-align: inherit;">For over five years now, I have been administering Kubernetes clusters and building complex microservice architectures. </font><font style="vertical-align: inherit;">Earlier this year, we launched Kubernetes cluster management service based on Containerum. </font><font style="vertical-align: inherit;">Taking this opportunity, I’ll tell you what this Kubernetes is and how integration with the vendor differs from open source. </font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For starters, what is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This is a system for managing containers on a large number of hosts. </font><font style="vertical-align: inherit;">From the Greek, by the way, it is translated as “pilot” or “helmsman”. </font><font style="vertical-align: inherit;">Originally developed by Google, after which the Cloud Native Computing Foundation, an international non-profit organization that brings together leading global developers, end users and container technology providers, was transferred as a technological contribution.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jj/lu/gn/jjlugngazzbnhu-fyxvlpchazjw.jpeg"><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steer a large number of containers </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's see what kind of containers these are. </font><font style="vertical-align: inherit;">This application with all its surroundings - mainly libraries on which the program depends. </font><font style="vertical-align: inherit;">All this is packaged in archives and presented in the form of an image that can be run regardless of the operating system, tested and not only. </font><font style="vertical-align: inherit;">But there is a problem - managing containers on a large number of hosts is very difficult. </font><font style="vertical-align: inherit;">Therefore, Kubernetes was created.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A container image is an application plus its dependencies. The application, its dependencies and the image of the OS file system are located in different parts of the image, the so-called layers. Layers can be reused for different containers. For example, for all applications in the company, the Ubuntu base layer can be used. When starting containers, there is no need to store multiple copies of one base layer on the host. This allows you to optimize the storage and delivery of images.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When we want to start the application from the container, the necessary layers are superimposed on each other and an overlay file system is formed. A layer for recording is superimposed on top, which, when the container is stopped, is deleted. This ensures that when you start the container, the application will always have the same environment, which cannot be changed. This ensures reproducibility of the environment on different host operating systems. Whether it be Ubuntu or CentOS, the environment will always be the same. In addition, the container is isolated from the host using the mechanisms built into the Linux kernel. Applications in the container do not see files, processes of the host and neighboring containers. This isolation of applications from the host OS provides an additional layer of security.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many tools for managing containers on the host. </font><font style="vertical-align: inherit;">The most popular of these is Docker. </font><font style="vertical-align: inherit;">It allows you to ensure the full life cycle of containers. </font><font style="vertical-align: inherit;">However, it only works on one host. </font><font style="vertical-align: inherit;">If you need to manage containers on multiple hosts, Docker can turn the lives of engineers into hell. </font><font style="vertical-align: inherit;">That's why Kubernetes was created. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The demand for Kubernetes is precisely due to the ability to steer groups of containers on multiple hosts as some single entities. </font><font style="vertical-align: inherit;">The popularity of the system provides the ability to build DevOps or Development Operations, in which Kubernetes is used to start the processes of this DevOps itself. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/4k/fm/l14kfmzc4n0ohovryr9sb0m1pbc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 1. Schematic representation of how Kubernetes works</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full automation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DevOps, in principle, is an automation of the development process. Roughly speaking, developers write code that is poured into the repository. Then this code can be automatically collected immediately into a container with all libraries, tested and rolled out to the next stage - Staging, and then immediately to Production. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Together with Kubernetes, DevOps allows you to automate this process so that it proceeds with little or no participation from the developers themselves. Due to this, the assembly is significantly accelerated, since the developer does not have to do this on his computer - he just writes a piece of code, pushes the code into the repository, and then the pipeline starts, which may include the assembly, testing, rolling out process. And this happens with every commit, so testing is ongoing.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, using the container allows you to be sure that the entire environment of this program will go into production exactly in the form in which it was tested. </font><font style="vertical-align: inherit;">That is, there will be no problems from the category “on the test there were some versions, in production - others, but when set - everything fell”. </font><font style="vertical-align: inherit;">And since today we have a trend towards microservice architecture, when instead of one huge application there are hundreds of small ones, in order to administer them manually, you will need a huge staff. </font><font style="vertical-align: inherit;">That's why we use Kubernetes.</font></font><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pros, Pros, Pros</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If we talk about the advantages of Kubernetes as a platform, then it has significant advantages in terms of managing the microservice architecture. </font></font><br>
<br>
<ul>
<li> <b>  .</b>   —      .    , —         .          .     ,  Kubernetes      . </li>
<li> <b> .</b>   Kubernetes         .       .       ,     .     Kubernetes  ,        Service Discovery.       IP-       Kubernetes.   health check`         .</li>
<li> <b> . </b>         .    Kubernetes    ConfigMap`.             .         ,     . </li>
<li> <b>Persistent Volumes. </b>          ,    ,  .        .      Kubernetes      — Persistent Volumes.       ,      ,   .        ,        .</li>
<li> <b>Load Balancer.</b>   ,   Kubernetes      Deployment, StatefulSet  ..,            .         . Kubernetes         .     ,   ?        ,        .      Kubernetes    Load Balancer.             .              .       ,     .        Kubernetes.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes is best at launching microservice architectures. </font><font style="vertical-align: inherit;">Implementing a system in classical architecture is possible, but pointless. </font><font style="vertical-align: inherit;">If the application cannot work in several replicas, then what is the difference - in Kubernetes or not?</font></font><br>
 <br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Open source Kubernetes</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Open source Kubernetes is a great thing: it installed and works. </font><font style="vertical-align: inherit;">You can deploy on your iron servers, on your infrastructure, put wizards and workers on which all applications will run. </font><font style="vertical-align: inherit;">And most importantly - all this is free. </font><font style="vertical-align: inherit;">However, there are nuances.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first is the exactingness of the knowledge and experience of administrators and engineers who will deploy and accompany all this. </font><font style="vertical-align: inherit;">Since the client receives complete freedom of action in the cluster, he bears the responsibility for the operability of the cluster. </font><font style="vertical-align: inherit;">And to break everything here is very simple.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second is the lack of integration. </font><font style="vertical-align: inherit;">If you run Kubernetes without some popular virtualization platform, you won’t get all the benefits of the program. </font><font style="vertical-align: inherit;">Such as using Persistent Volumes and Load balancer services.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/yl/qy/s-/ylqys-vszsb7e9t4pmjylyhhh0u.png"> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 2. The k8s architecture</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes from the vendor</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Integration with a cloud provider provides two options: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Firstly, a person can simply click on the “create a cluster” button and get a cluster that is already configured and ready to work.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Secondly, the vendor itself sets up a cluster and configures integration with the cloud.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How is this happening with us. The engineer who launches the cluster indicates how many workers he needs and with what parameters (for example, 5 workers, each with 10 CPUs, 16 GB of RAM and, say, 100 GB of disk). Then it gains access to the already formed cluster. At the same time, the workers on which the load is launched are completely given to the client, but the entire management plane remains in the vendor’s area of ​​responsibility (if the service is provided according to the managed service model).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, such a scheme has its drawbacks. </font><font style="vertical-align: inherit;">Due to the fact that the management plane remains with the vendor, the vendor does not give full access to the client, and this reduces the flexibility in working with Kubernetes. </font><font style="vertical-align: inherit;">Sometimes it happens that the client wants to tie some specific functionality to Kubernetes, for example, authentication via LDAP, and the management plane configuration does not allow this. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/me/xi/lp/mexilpixodhnuve_i3i2kop5rko.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure 3. An example Kubernetes cluster from a cloud provider</font></font></i><br>
<br>
<b><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What to choose: open source or vendor</font></font></h3></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, open source Kubernetes or vendor? </font><font style="vertical-align: inherit;">If we take open source Kubernetes, then the user wants to do what he does. </font><font style="vertical-align: inherit;">But a great chance to shoot himself in the leg. </font><font style="vertical-align: inherit;">With Vendors, this is more complicated, because everything is thought out and configured for the company. </font><font style="vertical-align: inherit;">The biggest drawback of open source Kubernetes is the requirement for specialists. </font><font style="vertical-align: inherit;">With a vendor, the company is spared this headache, but it will have to decide whether to pay its specialists or the vendor. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/te/g1/uu/teg1uu2nmmwdork-m0khn56_3ru.png"><br>
<br>
<img src="https://habrastorage.org/webt/-2/fi/vf/-2fivf91q1hgvh5j515dccobviy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, the pros are obvious, the cons are also known. </font><font style="vertical-align: inherit;">Invariably one thing: Kubernetes solves a lot of problems by automating the management of multiple containers. </font><font style="vertical-align: inherit;">And which one to choose, open source or vendor - everyone decides for himself. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The article was prepared by Dmitry Krasnov, lead architect of the Containerum service of the provider #CloudMTS</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en500712/index.html">Digital Coronavirus - A Combination of Ransomware and Infostealer</a></li>
<li><a href="../en500718/index.html">EPAM in remote mode: how it works</a></li>
<li><a href="../en500720/index.html">New information security standards: make life more difficult for attackers</a></li>
<li><a href="../en500722/index.html">“Bake until ready”: who saves rare tape recordings in such an unusual way</a></li>
<li><a href="../en500724/index.html">How US financial authorities limit the negative impact of the game on the decline</a></li>
<li><a href="../en500732/index.html">Artificial intelligence and the crisis of theories of consciousness</a></li>
<li><a href="../en500734/index.html"># GitLab 12.10 released with requirements management and automatic CI scaling on AWS Fargate</a></li>
<li><a href="../en500742/index.html">Clustering Quality Assessment: Properties, Metrics, GitHub Code</a></li>
<li><a href="../en500744/index.html">“To hear you better, my speaker”: how to broadcast better from home</a></li>
<li><a href="../en500746/index.html">Boxing rack for SMD and other small things</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>