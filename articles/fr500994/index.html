<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌌 👲🏽 🎣 Exécutez la fourmi. Courir 👨‍👩‍👧 🛄 ♣️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article traite du processus de création d'un modèle de simulation du comportement d'une colonie de fourmis (peut être lu sur Wikipedia ) dans l'en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Exécutez la fourmi. Courir</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500994/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cet article traite du processus de création d'un modèle de simulation du comportement d'une colonie de fourmis (peut être lu sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dans l'environnement de simulation "AnyLogic". </font><font style="vertical-align: inherit;">Cet article est pratique. </font><font style="vertical-align: inherit;">Il considérera l'utilisation de l'algorithme des fourmis pour résoudre le problème des vendeurs ambulants (vous pouvez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lire ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ca/-m/xy/ca-mxya2npzn6aynp21dpuepx2g.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En bref sur l'essence</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essence du problème des vendeurs ambulants est que le vendeur ambulant (vendeur) doit visiter N villes après avoir visité chacune d'elles une seule fois le long de l'itinéraire le plus court. Étant donné que cette tâche est complexe NP et que le nombre d'options pour tous les itinéraires possibles entre N villes est calculé comme «N!», Le temps de recherche d'itinéraire le plus court augmentera exponentiellement avec une augmentation de N. En conséquence, le temps de recherche d'itinéraire le plus court (solution) utilisant l'algorithme La «recherche exhaustive» (qui donne une solution exacte) avec le nombre de villes N&gt; 16 augmente fortement (est exponentielle). Par conséquent, nous ne rechercherons pas la route la plus courte en longueur, mais nous la fermerons (rationnelle) dans un temps fini en utilisant «l'algorithme ant».</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quelques mots sur AnyLogic est un outil puissant qui vous permet de créer des modèles de simulation de complexité variable. </font><font style="vertical-align: inherit;">Il met en œuvre différentes approches de simulation. </font><font style="vertical-align: inherit;">Nous n'analyserons qu'une seule des approches, à savoir la modélisation «agent». </font><font style="vertical-align: inherit;">Il est implémenté dans le langage de programmation Java, qui complète les outils existants. </font><font style="vertical-align: inherit;">Le principal inconvénient de "AnyLogic" est la limitation de la version gratuite sur le nombre d'agents créés, leur nombre ne peut pas dépasser 50 000. "Agent" est l'unité de base du système de simulation AnyLogic. </font><font style="vertical-align: inherit;">Plus d'informations peuvent être trouvées sur le site </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.anylogic.ru</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outils</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Anylogic - téléchargez la version gratuite ici </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.anylogic.ru/downloads Introduction</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
initiale d' </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AnyLogic </font><font style="vertical-align: inherit;">: L' </font><font style="vertical-align: inherit;">interface d'AnyLogic est montrée dans la figure 1. Elle comprend:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la zone verte est l'espace de l'agent dans lequel nous allons créer;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zone rouge - propriétés de l'objet mis au point;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">palette - outils que vous pouvez utiliser lors de la création d'un modèle;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">projets - la structure du modèle développé.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/ni/-d/kx/ni-dkxyorpukg5a6xkitxe7nwpm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">1- Fenêtre popup AnyLogic</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création de projet</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, tout est simple. </font><font style="vertical-align: inherit;">Cliquez sur l'élément de menu "Fichier" à côté de "Créer" puis "Modèle", entrez le nom du modèle et cliquez sur le bouton "Terminer" (Fig. 2). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ej/5e/96/ej5e96ohohjgxmygsj2teeedt1q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">2- Création d'un modèle</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer des villes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, commençons. La première chose que nous ferons est de créer les soi-disant villes (haut du graphique) que la fourmi visitera. Pourquoi ouvrons-nous l'onglet «Agent» dans la palette et faisons glisser le cercle rouge avec le petit homme dans l'agent «Principal» à partir de là, comme le montre la figure 3. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/2x/nb/v92xnbu57t8ulh_cttg_i6p1e_0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 3- Création de villes</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Après avoir relâché le bouton de la souris, une boîte de dialogue apparaît ("Étape 1"), vous invitant à créer un agent. Où il sera nécessaire de sélectionner l'élément "Population d'agents" et de cliquer sur le bouton "Suivant". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/bb/jm/h5bbjm3eyfyzggqc_ixb7bikqoi.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 4- Création de villes</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
La boîte de dialogue suivante apparaît (étape 2) où vous devrez saisir le nom du nouveau type d'agent et le nom de la population d'agents. Entrez le type "MyTown" et le nom de la population "myTowns" et cliquez sur le bouton "Suivant". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0k/fi/ak/0kfiaknzozrmlyjkzpgnkdrtp2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 4a - Entrez le nom du nouvel agent</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, la fenêtre suivante apparaîtra (étape 4.). Ici, nous sélectionnons «2D Agent Animation» et l'icône avec l'inscription «Plant» et cliquez sur le bouton «Finish» (Fig. 5). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/73/l7/si73l7efxqaj4-lsibjaq23bo5o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 5- Ajouter une animation pour l'agent</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Créez maintenant une variable qui déterminera le nombre initial de villes dans notre modèle. Pourquoi, depuis la "Palette", faites glisser l'icône avec l'inscription "Variable" dans l'agent "Principal" et entrez son nom "numberTown". Ensuite, cliquez sur l'icône de notre variable et dans l'onglet Propriétés, saisissez sa valeur initiale égale, par exemple, à 10 et sélectionnez son type «int» (Fig. 6). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xg/ox/6o/xgox6ohlkcyugq_8bndgxeqe7pe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 6- Création d'une variable</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Maintenant, nous définissons la valeur initiale de la population de notre ville «myTowns», pour laquelle nous cliquons sur son icône et dans l'onglet «Propriétés» dans le champ «Nombre initial d'agents», écrivez le nom de la variable que nous avons créée précédemment (Fig. 7).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/wn/wr/n2wnwrzolah44a3oiblzp0uitvw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">7 - Changer les propriétés de la population «myTowns» Ensuite,</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
nous </font><i><font style="vertical-align: inherit;">tirerons la</font></i><font style="vertical-align: inherit;"> conclusion de nos villes dans l'agent «Main» à un endroit aléatoire. </font><font style="vertical-align: inherit;">L'espace est limité à un carré de 400x400 pixels. </font><font style="vertical-align: inherit;">Pourquoi, dans l'onglet «Projets», sélectionner l'agent «Principal» avec la souris et dans l'onglet «Propriétés», dans le champ «Au démarrage», ajouter le code Java suivant (Fig. 7a):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {<font></font>
	myTowns.get(i).setXY(uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>), uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Où:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size () - le nombre de villes créées;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get (i) .setXY (uniforme (0,400), uniforme (0,400)) - définit les coordonnées X et Y pour la i-ème ville;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniforme (0,400) - une fonction qui renvoie un nombre aléatoire dans la plage de 0 à 400 selon la loi de distribution également probable d'une variable aléatoire. </font><font style="vertical-align: inherit;">L'environnement AnyLogic possède une boîte à outils étendue pour travailler avec diverses distributions de variables aléatoires. </font><font style="vertical-align: inherit;">Il existe un constructeur intégré de distributions de probabilités, il est disponible dans la barre d'outils.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Où:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size () - le nombre de villes créées;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get (i) .setXY (uniforme (0,400), uniforme (0,400)) - définit les coordonnées X et Y pour la i-ème ville;</font></font></li>
<li>uniform(0,400) – ,        0  400      .   AnyLogic          .              . </li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/cx/9s/uh/cx9suhbif3brjkqje09vjpp0wos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">7a - Nous organisons les villes,</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
puis nous pouvons déjà voir ce que nous avons fait et commencer notre modèle. </font><font style="vertical-align: inherit;">Pour ce faire, utilisez la touche "F5", cliquez dessus et la fenêtre de lancement de l'expérience est lancée comme le montre la figure 8. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e7/w9/0j/e7w90jfs3sz6flkkxvkmhksfysk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">8 - Lancer l'expérience</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ensuite, cliquez sur le bouton "Exécuter" dans le coin inférieur gauche de la fenêtre et l'expérience démarre. </font><font style="vertical-align: inherit;">Vous devriez obtenir une fenêtre avec le contenu à l'écran comme le montre la figure 9. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/hj/rw/h5hjrw2oona5nb5oxamr7wk1kro.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">9 - Le résultat de l'expérience</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Donc, à cette étape, nous avons créé 10 villes et les avons placées dans un endroit aléatoire (stochastique) sur notre écran. </font><font style="vertical-align: inherit;">Passons maintenant à la création de nos "fourmis"</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer une fourmi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, l'unité de combat principale de notre modèle sera une fourmi. Il faut d'abord le créer, puis modéliser son comportement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La création d'une fourmi est similaire à la création d'une ville. Dans la "Palette", sélectionnez "Agent" et faites-le glisser vers "Principal". Sélectionnez «Population d'agents», puis «Je veux créer un nouveau type d'agent», puis entrez «Nom du nouveau type» et «Nom de la population» «MyAnt» «myAnts» et cliquez sur «Suivant». Après cela, nous sélectionnons l'animation «2D» et, par exemple, l'icône avec l'inscription «Fighter» appuyez sur «Terminer» et cela devrait tourner comme indiqué sur la figure 10. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pb/wj/q-pbwj-wzsom4meb0xjebt8f6e0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 10 - Créer des fourmis</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, l'avion ne ressemble pas à une fourmi, nous allons donc le réparer. Nous allons dans le moteur de recherche à la recherche d'une image qui représente une fourmi et changeons l'avion en fourmi. Pourquoi double-cliquez-vous sur le cercle rouge près de "myAnts". Après cela, l'onglet «myAnt» s'ouvrira où vous devrez retirer l'avion et placer la fourmi à sa place (Fig. 11). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v-/5a/tp/v-5atplfehtp9oii49ogb4zarx4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 11 - Onglet MyAnt</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sélectionnez le plan avec la souris et appuyez sur "Suppr". Ensuite, allez dans l'onglet «Présentation» et faites glisser l'élément «Image» à partir de là. Après cela, une boîte de dialogue s'ouvrira automatiquement pour sélectionner un fichier. Sélectionnez le fichier avec notre fourmi (Fig.12) et cliquez sur OK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3u/cv/jo/3ucvjoiromyqmon5c0gg8rnitps.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 12 - Onglet MyAnt avec fourmi et déjà sans avion</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passez. </font><font style="vertical-align: inherit;">Mettez la fourmi à l'échelle et déplacez-la à l'endroit où se trouvait l'avion. </font><font style="vertical-align: inherit;">Il devrait tourner comme indiqué sur la figure 12a. </font><font style="vertical-align: inherit;">Toutes ces opérations sont effectuées à l'aide de la souris. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/rr/n_/bhrrn_45uobnz9cpfxyxfmgpajm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">12a - Onglet MyAnt avec fourmi</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On fait revivre la fourmi</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous devons apprendre à notre fourmi fraîchement préparée à ramper entre les villes. </font><font style="vertical-align: inherit;">Certes, jusqu'à présent sans prendre en compte le modèle mathématique, mais laissez-le toujours fonctionner. </font><font style="vertical-align: inherit;">Et donc, ouvrez le diagramme "Diagramme d'état" dans la "Palette" et continuez. </font><font style="vertical-align: inherit;">Nous transférons les blocs suivants et les connectons ensemble:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le début du diagramme d'état est le point de départ du cycle de vie de notre fourmi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">État - ce bloc caractérisera l'état du cycle de vie de notre fourmi. </font><font style="vertical-align: inherit;">Ces blocs sont nécessaires en morceaux.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transition - une flèche qui reliera nos «États» les uns aux autres et effectuera la transition d'un «État» à un autre «État» sous certaines conditions.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En conséquence, il devrait se révéler quelque chose comme le montre la figure 13. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/xk/ry/rlxkrykh7gpd6ujcc5aetxfldxm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">13 - La logique du comportement de la fourmi Écrivons</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
maintenant la logique initiale du diagramme de la fourmi. </font><font style="vertical-align: inherit;">Nous sélectionnons avec la souris la flèche qui sort du bloc sous le nom «Select City» et ajoutons le code suivant dans le champ «Action» de l'onglet «Properties» (Fig. 14):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.5</span>)) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, tout est très simple, nous traversons le cycle dans toutes les villes et lançons une pièce (nous générons une variable aléatoire avec probabilité 0,5) si sa valeur est vraie (aigle), puis nous envoyons la fourmi dans cette ville en quittant le cycle. L'expression «this.moveTo (main.myTowns.get (i))» est une fonction qui envoie un agent à un autre. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/ql/7y/scql7yplmodnhdrldsc6tvb3l2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 14 - Définissez la logique initiale du mouvement de la fourmi.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ensuite, cliquez sur la flèche qui quitte le bloc "Mouvement" et dans l'onglet "Propriétés", dans le champ "Se produit", définissez la valeur "A la réception d'un message" et sélectionnez "A la réception du message spécifié" dans le champ "Se produit". »Comme le montre la figure 15. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/hh/g9/kshhg9m8nyxvzqz9d1dj2xnrgtc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 15 - Définir la logique de la transition entre «Mouvement» et «Tout contourné»</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurez maintenant la dernière flèche qui sort du bloc "Motion". </font><font style="vertical-align: inherit;">Nous le sélectionnons avec la souris et dans l'onglet "Propriétés", dans le champ de transition, définissez "A l'arrivée de l'agent". </font><font style="vertical-align: inherit;">La vue finale du «diagramme d'état» doit être celle illustrée à la figure 16. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/os/kv/af/oskvafwwsgpitd36rnozrirob9m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">16 - Diagramme d'état avec transitions configurées entre les blocs</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Alors, regardons comment fonctionne le "Diagramme d'état" du comportement des fourmis:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le premier état dans lequel la fourmi tombe est "Vybor_city", jusqu'à présent aucune action n'a été énoncée.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il passe ensuite à l'état suivant lors de la transition. </font><font style="vertical-align: inherit;">Dans cette transition, nous avons ajouté un code qui démarre un cycle à travers toutes les montagnes et fait courir les fourmis dans les villes.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le bloc "Mouvement" est l'endroit où se trouve la fourmi jusqu'à son arrivée dans la ville précédemment sélectionnée.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De plus, il a deux façons. </font><font style="vertical-align: inherit;">D'abord, il revient au bloc "City_Choice" et tout se répète à nouveau. </font><font style="vertical-align: inherit;">Sur le deuxième chemin, il devra partir quand il aura déjà visité toutes les villes. </font><font style="vertical-align: inherit;">Jusqu'à présent, la deuxième voie n'est pas mise en place avec nous. </font><font style="vertical-align: inherit;">Nous les traiterons un peu plus tard.</font></font></li>
</ol><br>
<br>
<img src="https://habrastorage.org/webt/3z/aj/md/3zajmdqorvjpondmi8k03fmmz94.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">17 - Fonctionnement du diagramme d'état</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Maintenant, nous pouvons appuyer sur "F5" pour voir ce qui s'est passé (Fig. 18). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fr/cg/us/frcgusj3llqem0vaf8rxjngwwii.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">18 - Le renouveau des fourmis</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définissez les critères</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, quels sont ces critères (règles):</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une fourmi ne devrait visiter chaque ville qu'une seule fois.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ant, quand il a visité toutes les villes, met fin à son mouvement dans la dernière ville.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces critères nous sont dictés par l'état du problème du voyageur de commerce. Chaque fourmi sera avec nous une sorte de vendeur ambulant qui sillonne les villes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apprenons à la fourmi à respecter ces règles. Pourquoi, depuis la "Palette", l'onglet "Agent", transférez les "Collection" et "Variable" vers l'onglet "MyAnt" et nommez-les d'abord "isVisited" et le second comme "distance". La première prendra en compte les villes que nous avons déjà visitées, et la seconde la distance parcourue par la fourmi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/s-/a_/-ks-a_2igqbcyxzgzxiwlrbn9fe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 19 - Ajouter des variables</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Configurez la collection isVisited. Pourquoi le sélectionnons-nous avec la souris et définissons-nous le «Type» des éléments «int» dans l'onglet «Propriétés» comme illustré à la figure 20. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la variable «distance» dans ses propriétés, dans le champ «Valeur initiale», définissez «0» et le type de variable «double» ". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/2v/te/cm2vte4vjkzqycf0r58qz8itz7u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 20 - Collection de type "int"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sélectionnez maintenant la flèche sortant du bloc "City_block" et changez le code du champ "Action" en celui ci-dessous:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.9</span>) &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));<font></font>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));<font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le code ci-dessus, nous avons ajouté un chèque pour les villes dans lesquelles nous avons déjà réussi à visiter, en tenant compte des villes que nous avons visitées et en tenant également compte de la distance parcourue. </font><font style="vertical-align: inherit;">Le code est assez simple, je pense qu'il ne sera pas difficile à comprendre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez essayer de lancer «F5» notre modèle et voir ce qui s'est passé. </font><font style="vertical-align: inherit;">Maintenant, les fourmis ne traverseront toutes les villes qu'une seule fois et termineront leur mouvement dans le bloc.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changer le placement initial des fourmis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À cette étape, nous déterminerons pour chaque fourmi que nous choisirons au hasard une ville à partir de laquelle il commencera son voyage. </font><font style="vertical-align: inherit;">Pourquoi, dans l'onglet «Projets», sélectionner l'agent «Principal» avec la souris puis dans l'onglet «Propriétés» ajouter le code suivant au champ «Au démarrage» (Fig. 20a):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.size(); i++) {
	<span class="hljs-comment">//        </span>
	<span class="hljs-keyword">int</span> startTown = uniform_discr(<span class="hljs-number">0</span>,myTowns-<span class="hljs-number">1</span>);
	<span class="hljs-comment">//     </span><font></font>
	myAnts.get(i).setPosition(myTowns.get(startTown));<font></font>
	<span class="hljs-comment">//      </span><font></font>
	myAnts.get(i).isVisited.add(startTown);<font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/2i/et/cg/2ietcgzx9lkptrnj5rainnljcig.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">20a - Disposition des fourmis par ville</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ai appliqué une sélection aléatoire de la ville initiale. </font><font style="vertical-align: inherit;">Vous pouvez initialement identifier toutes les fourmis dans une seule ville.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendre les fourmis imprévisibles</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Introduisons la formule suivante dans notre modèle: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kd/ld/xz/kdldxzse05ththx-oipffhru9oq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
où Pi est la probabilité de transition le long du chemin du i-ème chemin, li est la longueur de la i-ème transition, fi est la quantité de phéromone à la i-ème transition, q est la valeur qui détermine la «cupidité» de l'algorithme, p - la valeur qui détermine le "troupeau" de l'algorithme, avec q + p = 1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai emprunté cette formule sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En termes simples, cette formule vous permet de calculer la probabilité avec laquelle la fourmi devra effectuer la transition vers une ville particulière. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous devons ajouter plusieurs variables sans lesquelles nous ne pouvons pas le faire. Pourquoi revenir à l'onglet «Principal», figure 21. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/ba/cv/zkbacvaft1obpjrs1kw9hblkjos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 21 - Onglet «Principal»</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, nous ajoutons la variable "numberAnt", dans laquelle nous allons stocker la taille de la colonie de fourmis. Nous définissons son type sur "int" et la valeur initiale est 100. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/80/o2/w4/80o2w43ra-j_fwfabeunywmjkbm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 21 - Variable «numberAnt»</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sélectionnez ensuite la population «myAnts» et réglez le champ «Initial number of agents» sur «numberAnt». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La variable "p", qui déterminera le troupeau de l'algorithme. Son type est double et la valeur initiale est 0,5. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La variable "q", qui déterminera la cupidité de l'algorithme. Son type est double et la valeur initiale est 0,5. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/m7/n0/gem7n0dj3rlhd_uu6aac3rrqyby.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 22 - Variables "q et p"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, maintenant, nous allons définir une valeur aléatoire de phéromone pour chaque bord (route) entre les villes. Pourquoi créer une variable (tableau bidimensionnel) "matrixF". Réglez-le dans l'onglet «Propriétés» dans le champ «Type», sélectionnez la valeur «Autre» et écrivez «double [] []» dans le champ la valeur initiale «nouveau double [numberTown] [numberTown]» (Fig. 23). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/4d/oi/wq4doiphuc28xcg1a3vcveng4ms.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 23 - Création d'un tableau bidimensionnel "matrixF". Matrice de phéromones</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ensuite, nous devons initialiser cette matrice. En d'autres termes, remplissez-le avec des valeurs aléatoires. Nous prenons la valeur de la phéromone au hasard dans la plage de 0,1 à </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Pour cela, sur l'onglet "Projets", sélectionnez l'agent "Principal" avec la souris puis dans l'onglet "Propriétés" ajoutez le code suivant au champ "Au démarrage" (Fig. 23a):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=uniform(<span class="hljs-number">0.1</span>,<span class="hljs-number">1</span>);<font></font>
	}<font></font>
} <font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/ob/an/ta/obanta0s5kb7vqnsc3wsn-qmbgg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">23a - Code d'initialisation de la matrice de phéromones</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Maintenant, nous revenons à l'onglet «MyAnt» et procédons au calcul de la probabilité de transition conformément à la formule ci-dessus. </font><font style="vertical-align: inherit;">Sélectionnez la transition entre "City_Choice" et "Motion" et modifiez le code dans le champ Action comme suit (Fig. 24):</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">double</span> denominator=<span class="hljs-number">0</span>; 
<span class="hljs-comment">//          </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {	<span class="hljs-comment">//     </span>
	    <span class="hljs-comment">//  i   </span>
		denominator=denominator+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p));<font></font>
	} <font></font>
}<font></font>
<span class="hljs-comment">//      i </span>
<span class="hljs-keyword">double</span> Pi=<span class="hljs-number">0</span>;
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">double</span> probility=uniform(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-comment">//        Pi</span>
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//     i-      </span>
		Pi=Pi+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p))/denominator;<font></font>
	}<font></font>
	<span class="hljs-comment">//      Pi      probility</span>
	<span class="hljs-keyword">if</span> (probility&lt;Pi &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//       i  </span>
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-comment">//     </span>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));
		<span class="hljs-comment">//           </span><font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/7u/gr/re/7ugrreytqo1mjwh43xeaagissqm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">24 - Nous définissons le comportement de la fourmi sur la base de l'expression analytique de ce qui précède.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Alors maintenant, je </font><i><font style="vertical-align: inherit;">vais</font></i><font style="vertical-align: inherit;"> expliquer un peu ce qui est quoi:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">li - this.distanceTo (main.myTowns.get (i)), la valeur de la longueur entre la position actuelle de la fourmi et la ville «i»;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fi - main.matrixF [currentPos] [i], la valeur du niveau de phéromone entre la ville actuelle et la ville "i";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dénominateur - dénominateur + (Math.pow (this.distanceTo (main.myTowns.get (i)), main.q) * Math.pow (main.matrixF [currentPos] [i], main.p));, dénominateur Pi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi - Pi + (Math.pow (this.distanceTo (main.myTowns.get (i)), main.q) * Math.pow (main.myTowns.get (i) .f, main.p)) / dénominateur, la probabilité que la fourmi se déplace de la ville actuelle vers la ville «i».</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous sélectionnons la transition entre les blocs "Motion" et "All-bypass" avec la souris et sélectionnons "Quand la condition est remplie" dans le champ "Occurs", et dans le champ condition nous écrivons la condition pour que la fourmi s'arrête "isVisited.size () == main.myTowns.size ()" (fig.25). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1w/qz/ag/1wqzagqllmjga_yqm5a8-9c_crg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">25 - Déterminez les conditions d'arrêt de la fourmi,</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
puis lancez le modèle «F5» et voyez ce qui s'est passé. </font><font style="vertical-align: inherit;">Les fourmis voyageront entre les villes avec une probabilité calculée selon l'expression analytique ci-dessus.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mettre à jour la valeur de la phéromone</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, faisons deux choses. La première action consiste à augmenter la valeur des phéromones sur le bord entre les villes le long desquelles la fourmi est passée. La seconde est l'évaporation des phéromones sur les bords entre les villes, qui consiste à réduire la valeur des phéromones par rapport au temps de simulation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, pour commencer par la première action, nous mettrons à jour la valeur de la phéromone de la côte entre la ville dans laquelle se trouve la fourmi et dans laquelle il ira. La valeur par laquelle nous augmenterons la valeur actuelle des bords des phéromones entre les villes sera calculée très, très simplement. Nous prenons notre valeur initiale maximale de la valeur des phéromones = 1 cu et le diviser par la distance entre la ville où se trouve la fourmi et la ville où il va se rendre. En conséquence, plus la distance entre les villes est petite, plus la valeur augmentera le niveau de la phéromone de la côte. Pourquoi sélectionnons-nous l'agent MyAnt dans l'onglet Projets, utilisez la souris pour sélectionner la transition entre les blocs "City_title" et "Movement" et ajoutons le code suivant au champ d'action: "main.matrixF [currentPos] [i] = main.matrixF [currentPos] [i ] + 1 / this.distanceTo (main.myTowns.get (i); ”.Le résultat doit être comme le montre la figure 26</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wr/zi/jb/wrzijbuaavovmagcktbz4yrhkw0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 26 - Mise à jour de la valeur du niveau de phéromones des côtes le long desquelles la fourmi est passée</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Maintenant passons à l'action n ° 2 et créons un événement qui simulera l'évaporation des phéromones sur les bords entre les villes. Pourquoi, dans l'onglet projets, sélectionnez l'agent «principal» et créez-y quelques variables supplémentaires. Le premier est «intensité» - il déterminera le taux (intensité) d'évaporation des phéromones (valeur initiale «0,5», type «double»). La deuxième «partie» - caractérisera la fraction par laquelle la valeur de la phéromone sur le bord diminuera (valeur initiale «0,9», tapez «double»). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rh/_8/ly/rh_8lydcrbmm7pkkitihtmsszi4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. 27 - Créer les variables "intensité" et "Part"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous prenons l'élément "Event" de la "Palette" de l'onglet "Agent" et le transférons vers l'agent "Main" et l'appelons "évaporation" - cet élément simulera l'évaporation de la phéromone sur les bords. </font><font style="vertical-align: inherit;">On clique dessus avec la souris et dans les "Propriétés" du champ "Type d'événement", on sélectionne la valeur "Avec une intensité donnée" dans le champ "Intensité", on écrit le nom de la variable qui stocke la valeur "intensité". </font><font style="vertical-align: inherit;">Le temps de réponse est de quelques secondes. </font><font style="vertical-align: inherit;">Ensuite, ajoutez le code ci-dessous à l'action:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=matrixF[i][j]*Part;<font></font>
		<span class="hljs-keyword">if</span> (matrixF[i][j]&lt;<span class="hljs-number">0.1</span>) matrixF[i][j]=<span class="hljs-number">0.1</span>;<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque l'événement «évaporation» est déclenché, les niveaux de phéromones dans la matrice matrixF seront mis à jour. </font><font style="vertical-align: inherit;">Par conséquent, vous devriez pouvoir faire comme indiqué sur la figure 28. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/p9/dl/qqp9dljysgcl9xg7jvydl74oees.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">28 - Créer l'événement «évaporation»</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déterminer le gagnant</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À cette étape, nous ajouterons un code qui déterminera le gagnant de notre fourmi marathon. Le vainqueur sera celui des fourmis ayant parcouru le parcours le plus court. En plus de tout, après la fin du marathon, nous dessinons cette route à l'écran. Pour ce faire, nous allons créer trois variables «bestAnt», «bestDistance» et «numberFinish» dans l'agent «Main». Dans la variable "bestAnt", nous stockons l'index de la fourmi "la plus rapide", le type de la variable sera "int" et la valeur initiale sera définie sur "-1". Dans la variable "bestDistance", nous enregistrerons la valeur actuelle de la meilleure longueur d'itinéraire entre les villes, le type de la variable sera "double" et la valeur initiale sera définie sur l'infini "infinity". Dans la variable "numberFinish", nous enregistrerons le nombre de fourmis qui ont terminé notre marathon,le type de la variable sera "int" et la valeur initiale est "0" (Fig. 29).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zd/2a/yw/zd2ayw0tmj6_wuft2sl2qz8tevu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">29 - Créer un événement de variables</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ensuite, nous créons une fonction qui, après avoir terminé toutes les fourmis, dessinera les lignes du meilleur itinéraire entre les villes. </font><font style="vertical-align: inherit;">Pourquoi depuis la "Palette" nous glissons dans l'agent "Main" un élément avec la fonction name. </font><font style="vertical-align: inherit;">Définissez le nom de la fonction sur drawPath et, dans l'onglet Propriétés, dans le champ du corps de la fonction, ajoutez le code suivant:</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//        </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>; i++) {
	<span class="hljs-comment">//    </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();
	<span class="hljs-comment">//            i</span><font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getY());<font></font>
	<span class="hljs-comment">//            i+1</span>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getY());
	<span class="hljs-comment">//    ""</span><font></font>
	myLine.setColor(blue);<font></font>
	<span class="hljs-comment">//   </span><font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	<span class="hljs-comment">//   </span>
	myLine.setLineWidth(<span class="hljs-number">1</span>);
	<span class="hljs-comment">//    </span><font></font>
	presentation.add(myLine);	<font></font>
}<font></font>
	<span class="hljs-comment">//           </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();<font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getY());<font></font>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getY());<font></font>
	myLine.setColor(blue);<font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	myLine.setLineWidth(<span class="hljs-number">1</span>);<font></font>
	presentation.add(myLine);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, vous devriez pouvoir faire comme indiqué dans la figure 29a. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/am/eq/1b/ameq1bhejnkldupsbngygcqqndw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">29a - Créer la fonction "drawPath"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Maintenant, revenons à nos fourmis et ajoutons un code qui déterminera la fourmi du vainqueur, la longueur du meilleur itinéraire et tracer cet itinéraire entre les villes. </font><font style="vertical-align: inherit;">Pourquoi, dans l'onglet «Projets», sélectionnez l'agent «MyAnt», puis sélectionnez le bloc «All Bypassed» et ajoutez le code suivant au champ «Logon Action»:</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//    </span><font></font>
main.numberFinish++;<font></font>
<span class="hljs-comment">//      </span>
<span class="hljs-keyword">if</span> (main.bestDistance&gt;distance) {
	<span class="hljs-comment">//           </span>
	<span class="hljs-comment">//      </span><font></font>
	main.bestDistance=distance;<font></font>
	<span class="hljs-comment">//    </span>
	main.bestAnt = <span class="hljs-keyword">this</span>.getIndex();<font></font>
}<font></font>
<span class="hljs-comment">//         Main   </span>
<span class="hljs-keyword">if</span> (main.numberFinish==main.myAnts.size()) main.drawPath();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il devrait tourner comme indiqué dans la figure 30. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/ss/7c/68ss7cvbvbfbwkz26u6abdvwit8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">30 - Ajout de logique au bloc "All Bypassed".</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ensuite, vous pouvez appuyer sur "F5" et lancer le modèle. </font><font style="vertical-align: inherit;">Les fourmis courront à la recherche d'itinéraires et une fois les villes terminées, la ligne bleue se connectera, ce qui est le meilleur itinéraire.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter un histogramme au modèle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que le modèle devienne plus scientifique, vous devez ajouter un graphique. Par conséquent, nous ajouterons non seulement un graphique et un histogramme qui nous montreront la distribution de la longueur des routes que les fourmis ont surmontées. Pourquoi dans l'onglet "Projets" sélectionner l'agent "Principal" et aller dans son espace. De plus, dans la "Palette" nous allons dans l'onglet "Statistiques" et de là à l'agent "Principal" nous transférons l'élément "Données d'histogramme" et directement l '"Histogramme" lui-même. Ensuite, nous sélectionnons les histogrammes avec la souris et dans l'onglet «Propriétés», dans le champ «Données», spécifiez le nom de nos «Données d'histogramme» c'est-à-dire "Les données". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il devrait tourner comme indiqué dans la figure 31 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7v/bz/6i/7vbz6ikwgs7t0iintfnp2jz6wyw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. 31 - Construire un horaire</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après quoi nous devrons de nouveau retourner chez notre fourmi et lui faire remplir l '"Histogramme" avec les valeurs de la longueur de la route. </font><font style="vertical-align: inherit;">Pourquoi, dans l'onglet projets, sélectionnez l'agent "MyAnt" et accédez à son espace. </font><font style="vertical-align: inherit;">Ensuite, sélectionnez le bloc "All Bypass" et ajoutez-y une ligne "main.data.add (distance);". </font><font style="vertical-align: inherit;">Il devrait tourner comme indiqué sur la figure 32. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/wa/zl/bfwazly38mrpwolpx4awmowj10o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">32 - Construire un graphe</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ensuite, appuyez sur "F5" et procédez à l'étude du comportement de l'algorithme de fourmi. </font><font style="vertical-align: inherit;">Il devrait en résulter quelque chose, quelque chose comme le montre la figure 33. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/8w/is/3w8wissyoccebi-8ona5px-cop0.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">33 - Modélisation</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et à la fin, je recommande d'ajouter plus d'imprévisibilité au modèle. </font><font style="vertical-align: inherit;">Pour cela, dans l'onglet «Projets», sélectionnez l'élément «Simulation: Main» avec la souris et réglez le paramètre «Randomness» sur «Randomness initial number (unique runs)» dans l'onglet properties - cela rendra chaque lancement de modèle unique (Fig. 34). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ie/ow/i6/ieowi6e32wykpsao8owpxbwzwzu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figure. </font><font style="vertical-align: inherit;">34 - Faire des runs aléatoires</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Merci de votre attention! </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code source peut être téléchargé depuis GitHub</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500978/index.html">Retrays retardés par RabbitMQ</a></li>
<li><a href="../fr500980/index.html">Cerveau rx</a></li>
<li><a href="../fr500984/index.html">Bad Apple ou Happy Radio Day, geeks</a></li>
<li><a href="../fr500986/index.html">Surveillance dans le centre de données: comment nous avons changé l'ancien BMS en un nouveau. 3e partie</a></li>
<li><a href="../fr500992/index.html">Comment est la gestion de la performance dans les meilleures entreprises informatiques</a></li>
<li><a href="../fr500996/index.html">Comment devenir ingénieur DevOps en six mois ou plus vite. Partie 1. Introduction</a></li>
<li><a href="../fr501002/index.html">Umka: nouveau langage de script typé statiquement</a></li>
<li><a href="../fr501004/index.html">Fais le. Travail</a></li>
<li><a href="../fr501006/index.html">Nous sommes amis STM32 avec écran LCD 1604 sur bus I2C (bibliothèque HAL)</a></li>
<li><a href="../fr501008/index.html">Pavage Dominos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>