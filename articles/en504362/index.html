<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëºüèº üïé üëñ Quickly load large amounts of data in Google Colab üò≠ ‚úçüèø ‚ÜîÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, Habr. I decided to share my knowledge of how to quickly upload a large number of files to Google Colab with Google Drive. 
 
 Everyone knows...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Quickly load large amounts of data in Google Colab</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504362/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Good day, Habr. I decided to share my knowledge of how to quickly upload a large number of files to Google Colab with Google Drive. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everyone knows that Google Colab is a great free platform for learning and experimenting on Neural Networks. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the Google Colab platform, you will be provided with a powerful video card for free on which you can experiment with training your neural network for about 12 hours. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then the session will be interrupted, but the next day from Google you can again get a video card and continue your experiments. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neural networks require a lot of data for training, especially when it comes to neural networks working with images.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To train such neural networks, it is necessary to load thousands and hundreds of images into the training and validation samples. Unfortunately, if you download these images directly from your Google Drive, it takes an indecent time - tens of minutes or even hours. After all, each request for a file in Google Drive and receiving a response from it with the contents of the file occurs sequentially and not quickly. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's a shame to spend time accessing a free video card to download data, and it‚Äôs not reasonable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And we are reasonable people, so once we turn to Google Drive, we consider our data packed in advance in a zip archive, unpack the resulting zip archive into Google Colab memory and consider our data at a speed hundreds of times faster than with Google Drive in a single file.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For an experiment with the speed of loading data into Colab, I took my Airplanes database for a segmentation neural network. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this database there is a folder with images ‚Äúairplanes‚Äù and a folder ‚Äúsegmentation‚Äù, where masks of images of airplanes from the above folder are stored. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Each folder contains 1,005 images of 1920 * 1080. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In total, we have to upload 2010 files. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I previously uploaded to myself on Google Drive both the database with images and its zip archive. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Training Base Structure:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ly/y9/w0/lyy9w0xt45znk_x8ie3i-dn6wqc.png"><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, let's get down to speed downloading data from Google Drive:</font></font></b><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We launch Google Colab and import the libraries and modules we need for this</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z4/di/fm/z4difm_iagv_pbjg_rnzt-nmq_c.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the command to connect to Google Drive</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pd/-m/tf/pd-mtfsigmlsmncvxtc_sya8030.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Follow the link to select your Google account</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wi/_j/ro/wi_jro9n-jjtu-x7db8tc9bicui.png"></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Choosing your account on Google</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sf/xr/i3/sfxri3gg-cmkfnbrr7ucevqa7ao.png"></li>
<li>  Colab  Google Drive<br>
<br>
<img src="https://habrastorage.org/webt/lm/jx/sn/lmjxsnwyw99a_wczowcsps1tzle.png"></li>
<li>      Google Drive<br>
<br>
<img src="https://habrastorage.org/webt/cd/ch/_i/cdch_iwfy3gpeprd9eapuvskc0g.png"></li>
<li>          Google Drive<br>
<br>
<img src="https://habrastorage.org/webt/lp/ii/sy/lpiisyfpdzdpuflnjqhh7jbovom.png"></li>
<li>            Colab<br>
<br>
<img src="https://habrastorage.org/webt/i1/kj/xw/i1kjxwnijpso_nrp3jiwwwiux80.png"></li>
<li>       ,                  .<br>
<br>
<img src="https://habrastorage.org/webt/km/wh/z1/kmwhz1x5dlqbtkdv4jem_vtun_c.png"></li>
<li>    <br>
<br>
<img src="https://habrastorage.org/webt/t9/as/9n/t9as9nmhuac2dhbj0xjkixhcl2u.png"><br>
<br>
 ,      2010  c   1920*1080   0,96 . <br>
<br>
 ,    ,      .<br>
<br>
             Colab,       ,         Google Drive.</li>
<li>      zip      Google Drive<br>
<br>
<img src="https://habrastorage.org/webt/ss/xe/tw/ssxetws1bvu4r01orsq977ezswy.png"></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As we can see, it took us 1500 seconds to download files stored on Google Drive from the 2010 catalog, and this is 25 minutes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is 25 minutes of downtime of your experiments with a neural network. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I hope the article was useful to you and now downloading a large number of files from Google Drive to Colab is no longer a problem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Upload your training data hundreds of times faster than you did before. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Just four easy steps.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pack the Learning Base in a zip archive.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Upload the zip file with the Learning Base to yourself on Google Drive</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unzip the zip file with the Learning Base into Colab's memory</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read all Colab memory files into your program</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For all questions, write me an email </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
alexeyk500@yandex.ru </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For those who need the code described in the article, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">welcome to me on GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en504348/index.html">Monowheel: what happens during training, and how to accelerate this process</a></li>
<li><a href="../en504352/index.html">Ten companies that Figma helped achieve new design results and more</a></li>
<li><a href="../en504354/index.html">Reduce the size of the ML model without registration and SMS</a></li>
<li><a href="../en504356/index.html">PHP 8 in eight pieces of code</a></li>
<li><a href="../en504358/index.html">PuppetConf 2016. Kubernetes for system administrators. Part 2</a></li>
<li><a href="../en504370/index.html">Office 365 & Microsoft Teams - Convenience of Collaboration and Impact on Security</a></li>
<li><a href="../es486176/index.html">Memo de correspondencia de correo electr√≥nico corporativo</a></li>
<li><a href="../es486178/index.html">FOSS News No. 1 - revisi√≥n de noticias gratuitas y de c√≥digo abierto del 27 de enero al 2 de febrero de 2020</a></li>
<li><a href="../es486180/index.html">Consejos y fuentes para crear aplicaciones sin servidor</a></li>
<li><a href="../es486184/index.html">C√≥mo usar la b√∫squeda de manera efectiva</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>