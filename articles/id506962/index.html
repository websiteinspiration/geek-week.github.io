<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♎️ 👃 👩🏻‍🎨 Async / tunggu di Unity 🏇🏽 🌊 👉🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salute, Khabrovsk. Sangat sedikit waktu yang tersisa sebelum dimulainya kursus "Game Developer on Unity" , dalam hal ini, kami telah menyiapkan untuk ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Async / tunggu di Unity</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/506962/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Salute, Khabrovsk. </font><font style="vertical-align: inherit;">Sangat sedikit waktu yang tersisa sebelum dimulainya kursus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Game Developer on Unity"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , dalam hal ini, kami telah menyiapkan untuk Anda terjemahan lain yang menarik.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/37/kv/yt/37kvytgqxylnrra818g7eckd5ly.png"><br>
<hr><br>
<code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unity sudah berfungsi </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tanpa</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plugins atau </font></font><code>Task</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pembungkus corutin yang mensimulasikan perilaku asinkron, memeriksa penyelesaian pada setiap frame. </font><font style="vertical-align: inherit;">Tapi itu masih semacam sihir. </font><font style="vertical-align: inherit;">Mari kita bahas lebih dalam tentang topik ini. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Catatan: untuk saat ini saya tidak memiliki pemahaman yang ideal tentang semua detail kap </font></font><code>async/await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">di C #, jadi saya akan mencoba untuk melengkapi yang sebelumnya, karena pemahaman saya semakin dalam.)</font></font></i><a name="habracut"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh</font></font></h4><br>
<img src="https://habrastorage.org/webt/ps/8i/so/ps8isowfho7xsjl99bnyzfh_5fo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Misalkan saya memerlukan tombol yang, ketika diklik, akan memainkan animasi kotak klasik. Tapi ada satu tangkapan: tombol harus masuk ke keadaan tidak aktif (gelap oleh </font></font><code>.interactable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sampai</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kotak selesai rotasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk alasan kebersihan kode, saya ingin menggunakan satu </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang menunggu penyelesaian rotasi kotak, dan segera menambahkan garis yang mengembalikan </font></font><code>interactable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, alih-alih sesuatu seperti membuat objek yang mengandung coroutine yang memeriksa keadaan pada setiap frame untuk memulai tugas ini. Memiliki kode linier yang jelas di satu tempat adalah nilai tambah yang besar dalam hal keterbacaan. Kode seperti itu bagus untuk ditulis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode kompak dan sederhana berikut mengimplementasikan tugas yang diperlukan. (</font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> metode juga muncul di daftar delegasi Persatuan, jangan khawatir.)</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System.Threading.Tasks;
<span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.UI;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SpinBox</span> : <span class="hljs-title">MonoBehaviour</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> Button button;
    <span class="hljs-keyword">public</span> Animation ani;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SpinAndDisableButton</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        ani.Play();<font></font>
        button.interactable = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">while</span> (ani.isPlaying == <span class="hljs-literal">true</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">await</span> Task.Yield();<font></font>
        }<font></font>
        button.interactable = <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
}</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/m-/or/ad/m-orad9ixe4ebtae_f6hm0ast1w.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah beberapa pertanyaan yang seharusnya Anda tanyakan:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Siapa" "mengeksekusi" </font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sisa metode ini? </font><font style="vertical-align: inherit;">Betapa ajaibnya itu diperiksa di frame berikutnya, sementara panggilan </font></font><code>SpinAndDisableButton</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hanya dilakukan sekali, dan tidak ada </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coroutine untuk memulai kembali.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berapa waktu setiap lari?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa </font></font><code>Task.Yield()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Ini sepertinya menjadi kunci dari semua yang terjadi di sini. </font><font style="vertical-align: inherit;">Saya kira Anda sudah terbiasa dengan </font></font><code>yield return null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coroutine. </font><font style="vertical-align: inherit;">Tebakan yang baik adalah dengan mencoba lagi di frame berikutnya, tetapi Anda mengatakan ini melalui enumerator C #. </font><font style="vertical-align: inherit;">Kata-kata untuk hasil sama, dan bahkan perilakunya sama.</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sinkronkan konteks</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lihatlah </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentang bagaimana sisa program dapat ditangkap dan dilanjutkan seperti yang kita inginkan (misalnya, di utas mana? Di utas panggilan atau di utas yang meluncurkan tugas?) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian Anda akan melihat bahwa ada juga di Unity konsep seperti itu, tetapi tidak terlihat oleh kita pada pandangan pertama.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dibandingkan dengan program C # biasa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya tidak sama dengan di program C # biasa. Melihat dokumentasi resmi </font></font><code>await. await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menyiratkan pengembalian ke penelepon objek </font></font><code>Task</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Penelepon dapat melanjutkan sampai dia membutuhkan hasil eksekusi, dan dia tidak lagi mampu melakukan sesuatu yang lain saat ini (tidak masalah apakah tugas itu multithreaded atau tidak), kecuali </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Rantai ini dapat berlanjut sampai Anda akhirnya bisa </font></font><code>Main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Di mana, jika kita juga bertemu </font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada lagi menunggu yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dihasilkan oleh kompiler, yang segera meminta hasilnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kembali ke kita </font></font><code>SpinAndDisableButton</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Kemana perginya kembali </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Dalam Unity kita tidak punya</font></font><code>Main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena sangat tersembunyi dalam kode mesin. Pertanyaannya, sebenarnya, sama dengan siapa yang tampil </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>LateUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan sebagainya. Ini adalah </font></font><code>PlayerLoop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API yang mendukung kode mesin dalam siklus game untuk memberikan rendering objek yang teratur dan segala sesuatu yang dieksekusi dalam bingkai. Tetapi sebelumnya, ini tidak mengganggu kami, karena sejauh ini titik masuk ini telah kembali </font></font><code>void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengembalikan titik eksekusi kepada seseorang dengan harapan bahwa ia dapat melanjutkan dari titik itu nanti, pada titik tertentu, secara otomatis. Kemudian </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loop game berlanjut</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hingga</font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sedang menunggu. </font><font style="vertical-align: inherit;">Kalau tidak, kita tidak akan melihat kotak berputar sama sekali, jika kita benar-benar menunggu sampai kotak selesai animasi, karena animasi tidak dapat berakhir jika perubahan bingkai tidak berlanjut. </font><font style="vertical-align: inherit;">Jadi apa yang akan terjadi pada frame selanjutnya? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah pseudocode yang ingin kita terima dalam bingkai yang berbeda dari yang kita tekan tombolnya dan dengan demikian menonaktifkannya:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">for</span> ( )<font></font>
{<font></font>
    <span class="hljs-keyword">if</span>(  )<font></font>
    {<font></font>
    	 .<font></font>
    }<font></font>
  <font></font>
     .<font></font>
         .<font></font>
        .<font></font>
}</code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debugging</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sertakan lebih banyak log dalam kode, dan kami akan mencoba debugging langkah-demi-langkah.</font></font><br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System.Threading.Tasks;
<span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.UI;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SpinBox</span> : <span class="hljs-title">MonoBehaviour</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> Button button;
    <span class="hljs-keyword">public</span> Animation ani;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SpinAndDisableButton</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        Debug.Log(<span class="hljs-string">$"Started async <span class="hljs-subst">{Time.frameCount}</span>"</span>);<font></font>
        ani.Play();<font></font>
        button.interactable = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">while</span> (ani.isPlaying == <span class="hljs-literal">true</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">await</span> Task.Yield();<font></font>
        }<font></font>
        button.interactable = <span class="hljs-literal">true</span>;<font></font>
        Debug.Log(<span class="hljs-string">$"Finished async <span class="hljs-subst">{Time.frameCount}</span>"</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        Debug.Log(<span class="hljs-string">$"Update <span class="hljs-subst">{Time.frameCount}</span>"</span>);<font></font>
    }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">LateUpdate</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        Debug.Log(<span class="hljs-string">$"Late Update <span class="hljs-subst">{Time.frameCount}</span>"</span>);<font></font>
    }<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosedur pembaruan adalah sebagai berikut:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ku/rp/b7/kurpb70kzx35oellcgqqwor5eow.png"><br>
<br>
<img src="https://habrastorage.org/webt/1c/k8/ef/1ck8ef1r0hmycnkfcubqfa4kwec.png"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bingkai di mana kita memulai animasi didahului oleh, </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>LateUpdate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">karena klik mouse berasal dari </font></font><code>EventSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan </font></font><code>GraphicRaycaster</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dari UGUI Unity, yang ternyata memiliki urutan eksekusi dalam </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skrip Anda di atas.</font></font></li>
<li><code>while</code>   <b> </b>      ,   <b></b> <code>Update</code>,   <code>LateUpdate</code>.     ,     !</li>
<li>      ,    ,      ,   <code>Awaiting</code>,    UGUI   ,   ,  <code>await</code> ,        -   </li>
<li>         <code>Update</code>  -   . <code>await</code>     .</li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masih untuk menghilangkan mitos "objek yang tertunda", yang tidak sepenuhnya saya pecahkan, tapi setidaknya saya melihat cara kerjanya, karena sengaja disandikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di frame pertama, di mana saya mengklik tombol, tidak ada yang aneh. </font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(sihir yang sama </font></font><code>MonoBehaviour Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><code>EventSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menggunakan </font></font><code>Input</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API dan melihat klik saya, setelah itu memindai tombol saya di kanvas dan melihat bahwa ia dapat melakukan sesuatu. Kemudian dipanggil </font></font><code>public async void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mencapai garis itu. (Anda juga dapat menggunakan ini </font></font><code>ExecuteEvents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">secara manual! Ini adalah </font></font><code>static</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kelas </font><font style="vertical-align: inherit;">pembantu </font><font style="vertical-align: inherit;">.) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/6q/yb/ut6qybougoh8yuhav3o2gpn8hly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam bingkai berikutnya di mana keajaiban terjadi, tumpukan panggilan dapat menunjukkan kepada kita siapa yang menangani cek untuk kita setiap beberapa frame. Saya tidak begitu mengerti apa yang terjadi di sini. (Meskipun ini berfungsi) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fr/gw/uj/frgwujptlworykklroix5o0m4sk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika saya memeriksa</font></font><code>UnitySynchronizationContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sepertinya banyak yang dipanggil dari kode mesin, jadi saya tidak bisa melakukan apa-apa selain menebak. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/qh/vm/reqhvmmgmoxuzm6i-e-9ts49txm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi ada sesuatu yang disebut di sana </font></font><code>WorkRequest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang mewakili masing-masing bisnis yang belum selesai yang Anda harapkan. </font><font style="vertical-align: inherit;">Saya berasumsi bahwa pengembalian </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terdaftar dengan benar dalam cara "seperti permainan", yang kompatibel dengan paradigma personel dan memastikan bahwa semua kode aman terkunci di utas utama sehingga Anda dapat sepenuhnya melakukan sesuatu setelah semua </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, karena itu akan dilakukan pada waktu yang tepat dalam bingkai .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Task.Yield ()</font></font></h4><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Metode ini memiliki deskripsi yang sangat membingungkan: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.yield?view=netframework-4.8</font></font></a></i><br>
<blockquote><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">YieldAwaitable</a><br>
<br>
 ,  ,          .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SynchronizationContext</a>   NULL,     .     ,     ,    .<br>
<br>
<b></b><br>
<br>
   <code>await Task.Yield()</code>;   ,     .      ( SynchronizationContext),         .   ,  ,         ,    .  ,    UI     UI,    ,    ,     .     ,  <code>await Task.Yield()</code>;   UI .      « ,    ContinueWith»   «   .NET».</blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bahasa Inggris bukan bahasa ibu saya, dan saya pikir baik C # </font></font><code>yield return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maupun </font></font><code>Task.Yield()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mencerminkan fungsi yang mereka lakukan. Tetapi mari kita beralih ke definisi metode. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6k/-f/oi/6k-foipgostpw8fxs9c9znoz7jo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kasus penggunaan yang diduga dalam catatan tampaknya menunjukkan bahwa metode ini tidak benar-benar </font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi Anda ingin mengubahnya menjadi </font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, jadi Anda perlu </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(berharap) di suatu tempat di dalamnya, oleh karena itu </font></font><code>Task.Yield()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">merupakan kambing hitam yang ideal. Alih-alih segera menghentikan metode (ingat bahwa async tidak akan secara ajaib mengubah metode menjadi asinkron, itu tergantung pada isi metode), sekarang Anda </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memaksanya</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menjadi asinkron. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi dalam kasus kami, penerima konteks bukanlah konteks biasa, tetapi </font></font><code>UnitySynchronizationContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sekarang</font></font><code>Task.Yield()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memiliki fungsi yang lebih bermanfaat yang secara efektif terus bekerja di bingkai berikutnya. </font><font style="vertical-align: inherit;">Jika itu biasa </font></font><code>SynchronizationContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, saya kira itu bisa menghasilkan loop tak terbatas dalam contoh kita, karena itu akan terus berlanjut terus menerus </font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini mengembalikan </font></font><code>YieldAwaiter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penelepon yang dapat digunakan untuk melanjutkan. </font><font style="vertical-align: inherit;">Seperti yang disaksikan oleh log kami, "Ditunggu" direkam pada awal setiap frame, karena konteks (kode di sebelahnya </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) disimpan dalam penerbang ini. </font></font><code>UnitySynchronizationContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melakukan beberapa sihir, menunggu frame dan menggunakan aveyter ini untuk melanjutkan, kemudian dia meraih </font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan mengembalikan yang baru lagi </font></font><code>YieldAwaiter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ini mungkin akan terus menambahkan </font></font><code>WorkRequest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kode </font><font style="vertical-align: inherit;">baru </font><font style="vertical-align: inherit;">sebelumnya di setiap frame sebagai tugas menunggu sampai </font></font><code>while</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menjadi</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UniTask</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada paket </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UniTask</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> populer </font><font style="vertical-align: inherit;">yang sepenuhnya menghilangkan </font></font><code>SynchronizationContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan memperkenalkan jenis tugas ringan baru </font></font><code>UniTask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang langsung mengikat </font></font><code>PlayerLoop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API. </font><font style="vertical-align: inherit;">Kemudian Anda dapat memilih waktu kapan cek akan muncul di frame berikutnya. </font><font style="vertical-align: inherit;">(Inisialisasi? Pembaruan terlambat?) Tetapi, pada kenyataannya, Anda tahu apa yang </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berfungsi tanpa plugin apa pun. </font><font style="vertical-align: inherit;">Ini akan berguna dengan Addressable sedapat </font></font><code>AsyncOperationHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mungkin. </font></font><code>Task</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yang dapat Anda gunakan dengan </font></font><code>await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk melihat</font></font></h3><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7eKi6NKri6I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah percakapan yang baik, yang menunjukkan bahwa itu </font></font><code>Await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudah berfungsi dengan baik, tetapi ada plus untuk coroutine yang cukup digunakan. </font><font style="vertical-align: inherit;">Anda dapat lebih memperhatikan slide ini untuk mengatasinya sedikit jika Anda masih bingung.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8c/md/kw/8cmdkwfptrr0hr-y6twos_oto7u.png"><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami membuat penembak jaringan di ruang angkasa dalam satu setengah jam.</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id506940/index.html">Jalan menuju ideal: panduan singkat untuk programmer dan pemimpin mereka</a></li>
<li><a href="../id506950/index.html">Apa itu Sekolah 21, dan mengapa itu dirancang begitu</a></li>
<li><a href="../id506952/index.html">Portal API: apa yang harus dicari saat mendesain. Pengalaman yang salah</a></li>
<li><a href="../id506954/index.html">Artikel lain tentang Rails dan ELK</a></li>
<li><a href="../id506956/index.html">Teknologi dan Kesehatan Kuantum</a></li>
<li><a href="../id506964/index.html">Pengembangan Android: Tinjauan Karir untuk Mei 2020</a></li>
<li><a href="../id506976/index.html">Ikhtisar Pemindai 3D Solutionix D500 dan D700</a></li>
<li><a href="../id506980/index.html">HackTheBox endgame. Panduan Xen Lab. Direktori Aktif Pentest</a></li>
<li><a href="../ja451092/index.html">ソーシャルプロジェクト「Remember Everyone」のソフトウェア実装をオープンソースにした経験</a></li>
<li><a href="../ja451098/index.html">プロジェクトのオーディオサンプルの入手先：9つのテーマ別リソースの選択</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>