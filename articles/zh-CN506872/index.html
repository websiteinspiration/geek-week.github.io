<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•§ ğŸ“ ğŸ“º é¢„å®šSpring Boot 2ï¼šä¸“ä¸šäººå£«æœ€ä½³å®è·µ ğŸ¿ â™»ï¸ ğŸ¤¸ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ‚¨å¥½ï¼Œhabrozhiteliï¼æ˜¯å¦æƒ³æé«˜å¼€å‘ä¼ä¸šå’Œäº‘Javaåº”ç”¨ç¨‹åºçš„æ•ˆç‡ï¼Ÿ
 
 åŠ å¿«å¼€å‘å¾®æœåŠ¡å’Œå¤æ‚åº”ç”¨ç¨‹åºçš„é€Ÿåº¦å¹¶ç®€åŒ–å…¶å·¥ä½œï¼Œä»è€Œæ¶ˆé™¤äº†Springé…ç½®çš„çƒ¦æ¼ã€‚
 
 ä½¿ç”¨Spring Boot 2å’ŒSpring 5æ¡†æ¶å·¥å…·ï¼Œä¾‹å¦‚WebFluxï¼ŒSecurityï¼ŒActuatorå’ŒMicro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>é¢„å®šSpring Boot 2ï¼šä¸“ä¸šäººå£«æœ€ä½³å®è·µ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/506872/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/fp/9-/xm/fp9-xmowkjaidjekn_hk0ddmiic.jpeg" align="left" alt="å›¾ç‰‡"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¥½ï¼Œhabrozhiteliï¼</font><font style="vertical-align: inherit;">æ˜¯å¦æƒ³æé«˜å¼€å‘ä¼ä¸šå’Œäº‘Javaåº”ç”¨ç¨‹åºçš„æ•ˆç‡ï¼Ÿ</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŠ å¿«å¼€å‘å¾®æœåŠ¡å’Œå¤æ‚åº”ç”¨ç¨‹åºçš„é€Ÿåº¦å¹¶ç®€åŒ–å…¶å·¥ä½œï¼Œä»è€Œæ¶ˆé™¤äº†Springé…ç½®çš„çƒ¦æ¼ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½¿ç”¨Spring Boot 2å’ŒSpring 5æ¡†æ¶å·¥å…·ï¼Œä¾‹å¦‚WebFluxï¼ŒSecurityï¼ŒActuatorå’ŒMicrometeræ¡†æ¶ï¼Œå®ƒä»¬æä¾›äº†ä¸€ç§æ”¶é›†æŒ‡æ ‡çš„æ–°æ–¹æ³•ã€‚</font></font><br>
<br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¥å­£æµ‹è¯•æ¡†æ¶</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Springæ¡†æ¶çš„ä¸»è¦æ€æƒ³ä¹‹ä¸€æ˜¯é¼“åŠ±å¼€å‘äººå‘˜åˆ›å»ºç®€å•ä¸”æ¾æ•£è€¦åˆçš„ç±»ï¼Œç¼–ç¨‹æ¥å£ï¼Œä»¥ä½¿è½¯ä»¶å˜å¾—æ›´å¯é ï¼Œæ›´å¥½åœ°æ‰©å±•ã€‚ Springæ¡†æ¶æä¾›äº†ç®€åŒ–å•å…ƒå’Œé›†æˆæµ‹è¯•çš„å·¥å…·ï¼ˆå®é™…ä¸Šï¼Œå¦‚æœæ‚¨ç¡®å®å¯¹æ¥å£è¿›è¡Œç¼–ç¨‹ï¼Œåˆ™æ— éœ€æµ‹è¯•Springåº”ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œæœ‰å¿…è¦ä½¿ç”¨åŸºäºå¯¹è±¡çš„JUnitæˆ–TestNGæµ‹è¯•ç³»ç»Ÿå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼ˆåªéœ€ä½¿ç”¨newè¿ç®—ç¬¦å³å¯åˆ›å»º-æ— éœ€Springæˆ–ä»»ä½•å…¶ä»–å®¹å™¨ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Springæ¡†æ¶åŒ…æ‹¬å‡ ä¸ªç”¨äºåº”ç”¨ç¨‹åºçš„å•å…ƒæˆ–é›†æˆæµ‹è¯•çš„è½¯ä»¶åŒ…ã€‚</font><font style="vertical-align: inherit;">å¯¹äºå•å…ƒæµ‹è¯•ï¼Œè®¾è®¡äº†å‡ ä¸ªæ¨¡æ‹Ÿå¯¹è±¡ï¼ˆç¯å¢ƒï¼ŒPropertySourceï¼ŒJNDIï¼ŒServletï¼›ååº”æ€§æµ‹è¯•å®ç”¨ç¨‹åºServerHttpRequestå’ŒServerHttpResponseï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬æ‰§è¡Œä»£ç çš„éš”ç¦»æµ‹è¯•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é›†æˆæµ‹è¯•æ˜¯Springæ¡†æ¶ä¸­æœ€å¸¸ç”¨çš„æµ‹è¯•åŠŸèƒ½ä¹‹ä¸€ã€‚</font><font style="vertical-align: inherit;">å…¶ä¸»è¦ä»»åŠ¡ï¼š</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨æµ‹è¯•è¿è¡Œä¹‹é—´ç®¡ç†Spring IoCå®¹å™¨ç¼“å­˜</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº¤æ˜“ç®¡ç†ï¼›</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æµ‹è¯•å¯¹è±¡å®ä¾‹çš„ä¾èµ–æ³¨å…¥</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºä¸“é—¨ä¸ºSpringè®¾è®¡çš„åŸºç±»ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é€šè¿‡é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æµ‹è¯•ï¼ˆApplicationContextï¼‰ä¸­ï¼ŒSpringæ¡†æ¶æä¾›äº†ä¸€ç§ç®€å•çš„æµ‹è¯•æ–¹æ³•ã€‚</font><font style="vertical-align: inherit;">Springæµ‹è¯•æ¨¡å—æä¾›äº†å‡ ç§ä»¥ç¼–ç¨‹æ–¹å¼ä½¿ç”¨ApplicationContextå’Œä½¿ç”¨æ‰¹æ³¨çš„æ–¹å¼ã€‚</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ½è±¡çš„BootstrapWithã€‚</font><font style="vertical-align: inherit;">ç”¨äºé…ç½®TestContext Springæ¡†æ¶çš„å¼•å¯¼ç¨‹åºçš„ç±»çº§åˆ«æ³¨é‡Šã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ContextConfigurationæ‰¹æ³¨ã€‚</font><font style="vertical-align: inherit;">å®šä¹‰ç”¨äºå®šä¹‰å¦‚ä½•ä¸ºé›†æˆæµ‹è¯•åŠ è½½å’Œé…ç½®ApplicationContextçš„ç±»çº§åˆ«å…ƒæ•°æ®ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯æ‚¨ç±»çš„å¿…ä¸å¯å°‘çš„æ³¨é‡Šï¼Œå› ä¸ºè¿™æ˜¯ApplicationContextåŠ è½½æ‰€æœ‰ç»„ä»¶å®šä¹‰çš„åœ°æ–¹ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ½è±¡@WebAppConfigurationã€‚</font><font style="vertical-align: inherit;">ä¸€ä¸ªç±»çº§åˆ«çš„æ³¨é‡Šï¼ŒæŒ‡ç¤ºä¸ºé›†æˆæµ‹è¯•åŠ è½½çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡åº”ä¸ºWebApplicationContextã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨é‡Š@ActiveProfileã€‚</font><font style="vertical-align: inherit;">ä¸€ä¸ªç±»çº§åˆ«çš„æ³¨é‡Šï¼ŒæŒ‡ç¤ºåœ¨ä¸ºé›†æˆæµ‹è¯•åŠ è½½ApplicationContextæ—¶åº”æ¿€æ´»å“ªäº›ç»„ä»¶å®šä¹‰æ¦‚è¦æ–‡ä»¶ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ½è±¡@TestPropertySourceã€‚</font><font style="vertical-align: inherit;">ä¸€ä¸ªç±»çº§åˆ«çš„æ³¨é‡Šï¼Œç”¨äºæŒ‡å®šå±æ€§æ–‡ä»¶å’ŒåµŒå…¥çš„å±æ€§çš„ä½ç½®ï¼Œè¿™äº›å±æ€§å·²æ·»åŠ åˆ°ä¸ºé›†æˆæµ‹è¯•åŠ è½½çš„ApplicationContextçš„â€œç¯å¢ƒâ€ä¸­çš„PropertySourceå¯¹è±¡é›†ä¸­ã€‚</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ½è±¡@DirtiesContextã€‚</font><font style="vertical-align: inherit;">æŒ‡ç¤ºåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ApplicationContextæ˜¯â€œè„â€çš„ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡æ›´æ”¹å•ä¸ªç»„ä»¶çš„çŠ¶æ€è¿›è¡Œäº†ä¿®æ”¹æˆ–æŸåï¼‰ï¼Œåº”å°†å…¶å…³é—­ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™äº›è¿œéæ‰€æœ‰æ³¨é‡Šï¼›è¿˜æœ‰è®¸å¤šå…¶ä»–æ³¨é‡Šï¼ˆ@TestExecutionListenersï¼Œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰¿è¯º</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å›æ»š</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ@BeforeTransactionï¼Œ@AfterTransactionï¼Œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»„ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¾å®šæ¡£ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®šæ—¶çš„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é‡å¤</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ@IfProfileValueç­‰ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æ‚¨æ‰€è§ï¼ŒSpringæ¡†æ¶æœ‰å¾ˆå¤šæµ‹è¯•é€‰é¡¹ã€‚</font><font style="vertical-align: inherit;">é€šå¸¸ï¼Œæ€»æ˜¯ä½¿ç”¨@RunWithæ‰¹æ³¨ï¼Œå°†æµ‹è¯•æ¡†æ¶çš„æ‰€æœ‰å…ƒç´ é“¾æ¥åœ¨ä¸€èµ·ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@ContextConfiguration({"/app-config.xml", "/test-data-access-config.xml"})</span>
<span class="hljs-meta">@ActiveProfiles("dev")</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoRepositoryTests</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Test</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ToDoPersistenceTest</span><span class="hljs-params">()</span></span>{
                <span class="hljs-comment">//...</span><font></font>
        }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨Spring Testing Frameworkä»¥åŠSpring Bootæä¾›çš„åŠŸèƒ½ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring Bootæµ‹è¯•æ¡†æ¶</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Bootåˆ©ç”¨Spring Testing Frameworkçš„åŠŸèƒ½ï¼Œåœ¨æ—§çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ï¼Œå¹¶æ·»åŠ æ–°çš„æ³¨é‡Šå’ŒåŠŸèƒ½ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜æ›´å®¹æ˜“è¿›è¡Œæµ‹è¯•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦å¼€å§‹ä½¿ç”¨Spring Bootæµ‹è¯•çš„æ‰€æœ‰åŠŸèƒ½ï¼Œåªéœ€è¦å°†spring-boot-starter-testä¾èµ–é¡¹æ·»åŠ åˆ°å…·æœ‰testï¼ˆä½œç”¨åŸŸæµ‹è¯•ï¼‰èŒƒå›´çš„åº”ç”¨ç¨‹åºã€‚ Spring InitializræœåŠ¡å·²ç»æ·»åŠ äº†æ­¤ä¾èµ–å…³ç³»ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
spring-boot-starter-testä¾èµ–é¡¹æä¾›äº†ä½¿ç”¨å‡ ç§ä¸Spring Bootæµ‹è¯•åŠŸèƒ½éå¸¸ä¸€è‡´çš„æµ‹è¯•æ¡†æ¶çš„èƒ½åŠ›ï¼šJUnitï¼ŒAssertJï¼ŒHamcrestï¼ŒMockitoï¼ŒJSONassertå’ŒJsonPathã€‚å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–æµ‹è¯•æ¡†æ¶å¯ä¸Spring Boot Testæ¨¡å—é…åˆä½¿ç”¨ã€‚ä»…éœ€è¦æ‰‹åŠ¨æŒ‡å®šç›¸åº”çš„ä¾èµ–é¡¹ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Bootæä¾›äº†@SpringBootTestæ³¨é‡Šï¼Œä»¥ç®€åŒ–å¯¹Springåº”ç”¨ç¨‹åºçš„æµ‹è¯•ã€‚</font><font style="vertical-align: inherit;">é€šå¸¸ï¼Œåœ¨æµ‹è¯•Springåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨éœ€è¦æ·»åŠ ä¸€äº›æ‰¹æ³¨ä»¥æµ‹è¯•ç‰¹å®šçš„åº”ç”¨ç¨‹åºç‰¹æ€§æˆ–åŠŸèƒ½ï¼Œä½†åœ¨Spring Bootä¸­åˆ™ä¸éœ€è¦-å°½ç®¡è¦è¿›è¡Œæµ‹è¯•ï¼Œæ‚¨ä»ç„¶éœ€è¦æŒ‡å®š@RunWithæ‰¹æ³¨ï¼ˆSpringRunner.classï¼‰ï¼›</font><font style="vertical-align: inherit;">å¦‚æœä¸è¿™æ ·åšï¼Œä»»ä½•æ–°çš„Spring Bootæµ‹è¯•æ³¨é‡Šå°†è¢«å¿½ç•¥ã€‚</font><font style="vertical-align: inherit;">@SpringBootTestæ‰¹æ³¨å…·æœ‰ç”¨äºæµ‹è¯•Webåº”ç”¨ç¨‹åºçš„é€‰é¡¹ï¼Œä¾‹å¦‚RANDOM_PORTå’ŒDEFINED_PORTã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸‹ä»£ç æ®µæ˜¯Spring Bootæµ‹è¯•æ¡†æ¶ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTests</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Test</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">exampleTest</span><span class="hljs-params">()</span> </span>{<font></font>
                 ...<font></font>
        }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webåº”ç”¨ç¨‹åºç«¯ç‚¹æµ‹è¯•</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Bootæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥æµ‹è¯•ç«¯ç‚¹ï¼šç§°ä¸ºMockMvcç±»çš„ä»¿çœŸç¯å¢ƒï¼š</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MockMvcToDoTests</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Autowired</span>
        <span class="hljs-keyword">private</span> MockMvc mvc;<font></font>
<font></font>
        <span class="hljs-meta">@Test</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
              <span class="hljs-keyword">this</span>.mvc<font></font>
              .perform(get(<span class="hljs-string">"/todo"</span>))<font></font>
              .andExpect(status().isOk())<font></font>
              .andExpect(content()<font></font>
                   .contentType(MediaType.APPLICATION_JSON_UTF8));<font></font>
        }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨TestRestTemplateç±»ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoSimpleRestTemplateTests</span> </span>{<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> TestRestTemplate restTemplate;<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoTest</span><span class="hljs-params">()</span> </span>{<font></font>
            String body = <span class="hljs-keyword">this</span>.restTemplate.getForObject(<span class="hljs-string">"/todo"</span>, String.class);<font></font>
            assertThat(body).contains("Read a Book");<font></font>
      }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤ä»£ç æ˜¾ç¤ºäº†å¯åŠ¨å®Œæ•´æœåŠ¡å™¨å¹¶ä½¿ç”¨TestRestTemplateç±»çš„å®ä¾‹è®¿é—®/ todoç«¯ç‚¹çš„æµ‹è¯•ã€‚</font><font style="vertical-align: inherit;">è¿™é‡Œæˆ‘ä»¬å‡è®¾è¿”å›äº†Stringå¯¹è±¡ï¼ˆè¿™ä¸æ˜¯æµ‹è¯•JSONè¿”å›å€¼çš„æœ€ä½³æ–¹æ³•ï¼›ä¸ç”¨æ‹…å¿ƒï¼Œç¨åæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•æ­£ç¡®ä½¿ç”¨TestRestTemplateç±»ï¼‰ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»„ä»¶æ¨¡ä»¿</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Bootæµ‹è¯•æ¨¡å—æä¾›äº†@MockBeanæ‰¹æ³¨ï¼Œè¯¥æ‰¹æ³¨æè¿°äº†ApplicationContextä¸­ç»„ä»¶çš„Mockitoæ¨¡æ‹Ÿå¯¹è±¡ã€‚</font><font style="vertical-align: inherit;">æ¢å¥è¯è¯´ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„Springç»„ä»¶çš„æ¨¡ä»¿æˆ–é€šè¿‡æ·»åŠ æ­¤æ‰¹æ³¨æ¥æ›¿æ¢ç°æœ‰çš„å®šä¹‰ã€‚</font><font style="vertical-align: inherit;">è¯·è®°ä½ï¼šæ‰€æœ‰è¿™äº›éƒ½å‘ç”Ÿåœ¨ApplicationContextå†…éƒ¨ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoSimpleMockBeanTests</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@MockBean</span>
        <span class="hljs-keyword">private</span> ToDoRepository repository;<font></font>
<font></font>
        <span class="hljs-meta">@Test</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoTest</span><span class="hljs-params">()</span> </span>{<font></font>
              given(<span class="hljs-keyword">this</span>.repository.findById(<span class="hljs-string">"my-id"</span>))<font></font>
                    .Return(<span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Read a Book"</span>));<font></font>
              assertThat(<font></font>
                    <span class="hljs-keyword">this</span>.repository.findById(<span class="hljs-string">"my-id"</span>).getDescription())<font></font>
                    .isEqualTo(<span class="hljs-string">"Read a Book"</span>);<font></font>
        }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¥å­£å¯åŠ¨æµ‹è¯•ç‰‡</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Bootæœ€é‡è¦çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯æ— éœ€ä»»ä½•ç‰¹å®šçš„åŸºç¡€æ¶æ„å³å¯è¿è¡Œæµ‹è¯•ã€‚</font><font style="vertical-align: inherit;">Spring Bootæµ‹è¯•æ¨¡å—åŒ…æ‹¬æ‰€è°“çš„ç‰‡ï¼Œæ—¨åœ¨æ— éœ€ä½¿ç”¨æœåŠ¡å™¨æˆ–DBMSå³å¯æµ‹è¯•åº”ç”¨ç¨‹åºçš„ç‰¹å®šéƒ¨åˆ†ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@JsonTestæ‰¹æ³¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Spring Bootæµ‹è¯•æ¨¡å—å…·æœ‰@JsonTestæ‰¹æ³¨ï¼Œè¯¥æ‰¹æ³¨ç®€åŒ–äº†JSONå¯¹è±¡çš„åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦ä¸€åˆ‡æ­£å¸¸ã€‚</font><font style="vertical-align: inherit;">@JsonTestä¼šæ ¹æ®åœ¨ç±»è·¯å¾„ä¸Šæ‰¾åˆ°çš„åº“ï¼šJacksonï¼ŒGSONæˆ–JSONBï¼Œè‡ªåŠ¨é…ç½®æ”¯æŒçš„JSONæ˜¾ç¤ºå·¥å…·ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@JsonTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoJsonTests</span> </span>{<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> JacksonTester&lt;ToDo&gt; json;<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoSerializeTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
            ToDo toDo = <span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Read a Book"</span>);<font></font>
<font></font>
            assertThat(<span class="hljs-keyword">this</span>.json.write(toDo))<font></font>
            .isEqualToJson(<span class="hljs-string">"todo.json"</span>);<font></font>
            assertThat(<span class="hljs-keyword">this</span>.json.write(toDo))<font></font>
            .hasJsonPathStringValue(<span class="hljs-string">"@.description"</span>);<font></font>
<font></font>
            assertThat(<span class="hljs-keyword">this</span>.json.write(toDo))<font></font>
            .extractingJsonPathStringValue(<span class="hljs-string">"@.description"</span>)<font></font>
            .isEqualTo(<span class="hljs-string">"Read a Book"</span>);<font></font>
      }<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoDeserializeTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
            String content = <span class="hljs-string">"{\"description\":\"Read a Book\",\"completed\":
                  true }"</span>;<font></font>
            assertThat(<span class="hljs-keyword">this</span>.json.parse(content))<font></font>
                  .isEqualTo(<span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Read a Book"</span>, <span class="hljs-keyword">true</span>));<font></font>
            assertThat(<font></font>
               <span class="hljs-keyword">this</span>.json.parseObject(content).getDescription())<font></font>
            .isEqualTo(<span class="hljs-string">"Read a Book"</span>);<font></font>
      }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦åœ¨ä¸ä½¿ç”¨æˆç†ŸæœåŠ¡å™¨çš„æƒ…å†µä¸‹æµ‹è¯•æ§åˆ¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨Spring Bootå»ºè®®çš„æ‰¹æ³¨@WebMvcTestï¼Œå®ƒä¼šè‡ªåŠ¨é…ç½®Spring MVCåŸºç¡€ç»“æ„å¹¶å°†æŸ¥çœ‹çš„ç»„ä»¶åˆ—è¡¨é™åˆ¶ä¸ºä»¥ä¸‹å†…å®¹ï¼š </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ§åˆ¶è€…</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ§åˆ¶è€…</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å»ºè®®ï¼Œ@ JsonComponentï¼Œè½¬æ¢å™¨ï¼ŒGenericConverterï¼Œè¿‡æ»¤å™¨ï¼ŒWebMvcConfigurerå’ŒHandlerMethodArgumentResolver; </font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæ‚¨å°†çŸ¥é“æ§åˆ¶å™¨æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‡è¦çš„æ˜¯è¦äº†è§£é‚£äº›æ ‡è®°ä¸º</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›¶ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä½¿ç”¨æ­¤æ‰¹æ³¨æ—¶ï¼Œç»„ä»¶ä¸å¯è§ï¼Œä½†å¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥ä½¿ç”¨@MockBeanæ‰¹æ³¨ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@WebMvcTest(ToDoController.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoWebMvcTest</span> </span>{<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> MockMvc mvc;<font></font>
<font></font>
      <span class="hljs-meta">@MockBean</span>
      <span class="hljs-keyword">private</span> ToDoRepository toDoRepository;<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoControllerTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
            given(<span class="hljs-keyword">this</span>.toDoRepository.findById(<span class="hljs-string">"my-id"</span>))<font></font>
                  .Return(<span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Do Homework"</span>, <span class="hljs-keyword">true</span>));
                  <span class="hljs-keyword">this</span>.mvc.perform(get(<span class="hljs-string">"/todo/my-id"</span>).accept(MediaType.APPLICATION_<font></font>
                     JSON_UTF8))<font></font>
                        .andExpect(status().isOk()).andExpect(content().<font></font>
                           string(<span class="hljs-string">"{\"id\":\"my-id\",\"description\":\"Do Homework\",
                           \"completed\":true}"</span>));<font></font>
      }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@WebFluxTestæ‰¹æ³¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºååº”å¼æ§åˆ¶å™¨ï¼ŒSpring Bootæä¾›äº†@WebFluxTestæ³¨é‡Šã€‚</font><font style="vertical-align: inherit;">è¯¥æ³¨é‡Šè‡ªåŠ¨é…ç½®Spring WebFluxæ¨¡å—åŸºç¡€ç»“æ„ï¼Œå¹¶ä¸”ä»…æœç´¢</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ§åˆ¶è€…</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ§åˆ¶è€…</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å»ºè®®ï¼Œ@ JsonComponentï¼Œè½¬æ¢å™¨ï¼ŒGenericConverterå’ŒWebFluxConfigurerã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é‡è¦çš„æ˜¯è¦äº†è§£é‚£äº›æ ‡è®°ä¸º</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›¶ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä½¿ç”¨æ­¤æ‰¹æ³¨æ—¶ï¼Œç»„ä»¶ä¸å¯è§ï¼Œä½†å¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥ä½¿ç”¨@MockBeanæ‰¹æ³¨ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@WebFluxTest(ToDoFluxController.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoWebFluxTest</span> </span>{<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> WebTestClient webClient;<font></font>
<font></font>
      <span class="hljs-meta">@MockBean</span>
      <span class="hljs-keyword">private</span> ToDoRepository toDoRepository;<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testExample</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
             given(<span class="hljs-keyword">this</span>.toDoRepository.findAll())<font></font>
                         .Return(Arrays.asList(<span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Read a Book"</span>), <span class="hljs-keyword">new</span>
                               ToDo(<span class="hljs-string">"Buy Milk"</span>)));
             <span class="hljs-keyword">this</span>.webClient.get().uri(<span class="hljs-string">"/todo-flux"</span>).accept(MediaType.<font></font>
                  APPLICATION_JSON_UTF8)<font></font>
                       .exchange()<font></font>
                       .expectStatus().isOk()<font></font>
                       .expectBody(List.class);<font></font>
      }<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@DataJpaTestæ‰¹æ³¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æµ‹è¯•JPAåº”ç”¨ç¨‹åºï¼ŒSpring Bootæµ‹è¯•æ¨¡å—æä¾›äº†@DataJpaTestæ‰¹æ³¨ï¼Œè¯¥æ‰¹æ³¨è‡ªåŠ¨é…ç½®ä½äºRAMä¸­çš„å†…ç½®æ•°æ®åº“ã€‚</font><font style="vertical-align: inherit;">å¥¹åœ¨æœå¯»</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ä½“</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> å¹¶ä¸”ä¸åŠ è½½ä»»ä½•ç»„ä»¶ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›¶ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ­¤å¤–ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªé¢å‘æµ‹è¯•çš„å¸®åŠ©ç¨‹åºç±»TestEntityManagerï¼Œä¸JPA EntityManagerç±»éå¸¸ç›¸ä¼¼ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@DataJpaTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoDataJpaTests</span> </span>{<font></font>
  <font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> TestEntityManager entityManager;<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> ToDoRepository repository;<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoDataTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
            <span class="hljs-keyword">this</span>.entityManager.persist(<span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Read a Book"</span>));<font></font>
            Iterable&lt;ToDo&gt; toDos = <span class="hljs-keyword">this</span>.repository.<font></font>
                   findByDescriptionContains(<span class="hljs-string">"Read a Book"</span>);<font></font>
            assertThat(toDos.iterator().next()).toString().contains(<span class="hljs-string">"Read a Book"</span>);<font></font>
      }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯·æ³¨æ„ï¼Œåœ¨ä½¿ç”¨@DataJpaTestè¿›è¡Œæµ‹è¯•æ—¶ï¼Œå°†ä½¿ç”¨RAMä¸­çš„å†…ç½®DBMSã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†ä½¿ç”¨çœŸå®æ•°æ®åº“è¿›è¡Œæµ‹è¯•ï¼Œå¿…é¡»ä¸ºæµ‹è¯•ç±»æä¾›@AutoConfigureTestDatabaseæ‰¹æ³¨ï¼ˆreplace = Replace.NONEï¼‰ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@DataJpaTest</span>
<span class="hljs-meta">@AutoConfigureTestDatabase(replace=Replace.NONE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoDataJpaTests</span> </span>{
        <span class="hljs-comment">//...</span>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@JdbcTestæ‰¹æ³¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­¤æ³¨é‡Šä¸@DataJpaTestéå¸¸ç›¸ä¼¼ï¼›</font><font style="vertical-align: inherit;">å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå®ƒä»…åœ¨JDBCæµ‹è¯•ä¸Šè¿è¡Œã€‚</font><font style="vertical-align: inherit;">å®ƒä¼šè‡ªåŠ¨é…ç½®ä½äºRAMå’ŒJdbcTemplateç±»ä¸­çš„å†…ç½®DBMSï¼ŒåŒæ—¶è·³è¿‡æ‰€æœ‰å¸¦æ³¨é‡Šçš„DBMSã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›¶ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ç±»ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@JdbcTest</span>
<span class="hljs-meta">@Transactional(propagation = Propagation.NOT_SUPPORTED)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoJdbcTests</span> </span>{<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> NamedParameterJdbcTemplate jdbcTemplate;<font></font>
<font></font>
      <span class="hljs-keyword">private</span> CommonRepository&lt;ToDo&gt; repository;<font></font>
<font></font>
        <span class="hljs-meta">@Test</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoJdbcTest</span><span class="hljs-params">()</span> </span>{<font></font>
              ToDo toDo = <span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Read a Book"</span>);<font></font>
<font></font>
            <span class="hljs-keyword">this</span>.repository = <span class="hljs-keyword">new</span> ToDoRepository(jdbcTemplate);
            <span class="hljs-keyword">this</span>.repository.save(toDo);<font></font>
<font></font>
            ToDo result = <span class="hljs-keyword">this</span>.repository.findById(toDo.getId());<font></font>
            assertThat(result.getId()).isEqualTo(toDo.getId());<font></font>
        }<font></font>
}</code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@DataMongoTestæ‰¹æ³¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†æµ‹è¯•MongoDBåº”ç”¨ç¨‹åºï¼ŒSpring Bootæµ‹è¯•æ¨¡å—æä¾›äº†@DataMongoTestæ‰¹æ³¨ã€‚</font><font style="vertical-align: inherit;">å¦‚æœå¯ç”¨ï¼Œå®ƒå°†è‡ªåŠ¨é…ç½®åŸºäºå†…å­˜çš„å†…ç½®MongoæœåŠ¡å™¨ã€‚</font><font style="vertical-align: inherit;">å¦‚æœä¸æ˜¯ï¼Œåˆ™éœ€è¦æ·»åŠ spring.data.mongodbçš„å¿…è¦å±æ€§ã€‚</font><font style="vertical-align: inherit;">å®ƒè¿˜ä¼šè°ƒæ•´MongoTemplateç±»å¹¶æŸ¥æ‰¾@Documentæ‰¹æ³¨ã€‚</font><font style="vertical-align: inherit;">ç»„ä»¶</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é›¶ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è¢«è·³è¿‡ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@DataMongoTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoMongoTests</span> </span>{<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> MongoTemplate mongoTemplate;<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoMongoTest</span><span class="hljs-params">()</span> </span>{<font></font>
          ToDo toDo = <span class="hljs-keyword">new</span> ToDo(<span class="hljs-string">"Read a Book"</span>);
          <span class="hljs-keyword">this</span>.mongoTemplate.save(toDo);<font></font>
<font></font>
          ToDo result = <span class="hljs-keyword">this</span>.mongoTemplate.findById(toDo.getId(),ToDo.class);<font></font>
          assertThat(result.getId()).isEqualTo(toDo.getId());<font></font>
      }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨éœ€è¦å¤–éƒ¨MongoDBæœåŠ¡å™¨ï¼ˆéåµŒå…¥å¼ï¼Œå†…å­˜ä¸­ï¼‰ï¼Œè¯·åœ¨@DataMongoTestæ‰¹æ³¨ä¸­æ·»åŠ excludeAutoConfiguration = EmbeddedMongoAutoConfiguration.classå‚æ•°ã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@DataMongoTest(excludeAutoConfiguration = EmbeddedMongoAutoConfiguration.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoMongoTests</span> </span>{
        <span class="hljs-comment">// ...</span>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@RestClientTestæ‰¹æ³¨</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦ä¸€ä¸ªé‡è¦çš„æ³¨é‡Šæ˜¯@RestClientTestï¼Œç”¨äºæµ‹è¯•RESTå®¢æˆ·ç«¯ã€‚</font><font style="vertical-align: inherit;">è¯¥æ‰¹æ³¨ä¼šè‡ªåŠ¨è¿›è¡Œè®¾ç½®ä»¥æ”¯æŒJacksonï¼ŒGSONå’ŒJSONBï¼Œå¹¶è®¾ç½®RestTemplateBuilderç±»å¹¶æ·»åŠ å¯¹MockRestServiceServerçš„æ”¯æŒã€‚</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@RunWith(SpringRunner.class)</span>
<span class="hljs-meta">@RestClientTest(ToDoService.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToDoRestClientTests</span> </span>{<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> ToDoService service;<font></font>
<font></font>
      <span class="hljs-meta">@Autowired</span>
      <span class="hljs-keyword">private</span> MockRestServiceServer server;<font></font>
<font></font>
      <span class="hljs-meta">@Test</span>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toDoRestClientTest</span><span class="hljs-params">()</span>
                  <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
             String content = <span class="hljs-string">"{\"description\":\"Read a Book\",\"completed\":
                   true }"</span>;
            <span class="hljs-keyword">this</span>.server.expect(requestTo(<span class="hljs-string">"/todo/my-id"</span>))<font></font>
             .andRespond(withSuccess(content,MediaType.APPLICATION_JSON_UTF8));<font></font>
            ToDo result = <span class="hljs-keyword">this</span>.service.findById(<span class="hljs-string">"my-id"</span>);<font></font>
            assertThat(result).isNotNull();<font></font>
            assertThat(result.getDescription()).contains(<span class="hljs-string">"Read a Book"</span>);<font></font>
      }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿˜æœ‰è®¸å¤šå…¶ä»–åˆ‡ç‰‡å¯ä¾›ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">è¦è®°ä½çš„ä¸»è¦äº‹æƒ…ï¼šå¯¹äºæµ‹è¯•ï¼Œå¸¦æœ‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„æœåŠ¡å™¨çš„å®Œæ•´åŸºç¡€ç»“æ„æ˜¯å¯é€‰çš„ã€‚</font><font style="vertical-align: inherit;">åˆ‡ç‰‡ä½¿æµ‹è¯•Spring Bootåº”ç”¨ç¨‹åºå˜å¾—æ›´åŠ å®¹æ˜“ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºä½œè€…</font></font></h3><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è´¹åˆ©ä½©Â·å¤é“é›·æ–¯</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆFelipe Gutierrezï¼‰æ˜¯ä¸€åè½¯ä»¶æ¶æ„å¸ˆï¼Œæ‹¥æœ‰å¢¨è¥¿å“¥è’™ç‰¹é›·æŠ€æœ¯ä¸é«˜ç­‰æ•™è‚²å­¦é™¢çš„è®¡ç®—æœºå·¥ç¨‹å­¦å£«å­¦ä½å’Œç¡•å£«å­¦ä½ã€‚</font><font style="vertical-align: inherit;">Gutierrezæ‹¥æœ‰20å¤šå¹´çš„ITç»éªŒï¼Œå¹¶ä¸ºæ¥è‡ªæ”¿åºœï¼Œé›¶å”®ï¼ŒåŒ»ç–—ä¿å¥ï¼Œæ•™è‚²å’Œé“¶è¡Œä¸šç­‰å„ç§å‚ç›´é›†æˆè¡Œä¸šçš„å…¬å¸åˆ¶å®šäº†è®¡åˆ’ã€‚</font><font style="vertical-align: inherit;">ä»–ç›®å‰åœ¨Pivotalå·¥ä½œï¼Œä¸“é—¨ç ”ç©¶Cloud Foundryï¼ŒSpringæ¡†æ¶ï¼Œæœ¬åœ°äº‘åº”ç”¨ç¨‹åºSpringï¼ŒGroovyå’ŒRabbitMQç­‰çš„PASå’ŒPKSã€‚</font><font style="vertical-align: inherit;">ä»–è¿˜æ˜¯è¯ºåŸºäºšï¼Œè‹¹æœï¼ŒRedboxå’Œé«˜é€šç­‰å¤§å‹å…¬å¸çš„è½¯ä»¶æ¶æ„å¸ˆã€‚</font><font style="vertical-align: inherit;">Gutierrezæ˜¯Spring Boot Messagingï¼ˆApressï¼Œ2017ï¼‰å’ŒSpring Frameworkç®€ä»‹ï¼ˆApressï¼Œ2014ï¼‰çš„ä½œè€…ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…³äºç§‘å­¦ç¼–è¾‘</font></font></h3><br>
<i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªå­¦æˆæ‰çš„å¼€å‘äººå‘˜å’Œç ”ç©¶å‘˜</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manuel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jordan Eleraæ˜¯</font><i><font style="vertical-align: inherit;">åŸå§‹ç‰ˆæœ¬</font></i><font style="vertical-align: inherit;">ï¼Œä»–å–œæ¬¢ä¸ºä»–çš„å®éªŒåŠå…¶æ–°ç»„åˆå­¦ä¹ æ–°æŠ€æœ¯ã€‚æ›¼åŠªåŸƒå°”ï¼ˆManuelï¼‰èµ¢å¾—äº†Springy Awardç¤¾åŒºå† å†›å’Œ2013æ˜¥å­£å† å†›ã€‚ä»–èŠ±äº†ä¸€ç‚¹ç©ºé—²æ—¶é—´é˜…è¯»åœ£ç»å’Œåˆ›ä½œå‰ä»–éŸ³ä¹ã€‚äº’è”ç½‘çš„åŒ–ådr_pompeiiç§°ä¸ºManuelã€‚ä»–ç§‘å­¦åœ°ç¼–è¾‘äº†è®¸å¤šä¹¦ç±ï¼ŒåŒ…æ‹¬Pro Springï¼Œç¬¬4ç‰ˆï¼ˆApressï¼Œ2014å¹´ï¼‰1ï¼Œå®ç”¨Spring LDAPï¼ˆApressï¼Œ2013å¹´ï¼‰ï¼ŒPro JPA 2ï¼Œç¬¬2ç‰ˆï¼ˆApressï¼Œ2013å¹´ï¼‰å’ŒPro Spring Securityï¼ˆApressï¼‰ ï¼Œ2013ï¼‰ã€‚</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¿„è¯­ç‰ˆ</font></font></i><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Valery Alekseevich Dmitrushchenkov</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»äº‹ITå·¥ä½œè¶…è¿‡35å¹´ã€‚</font><font style="vertical-align: inherit;">ä»–ä¸ºè®¸å¤šå…¬å¸å’Œè¡Œä¸šå¼€å‘è½¯ä»¶ï¼Œç®¡ç†è®¸å¤šå¤æ‚çš„é¡¹ç›®ï¼ŒåŒ…æ‹¬è‡ªåŠ¨åŒ–ç³»ç»Ÿçš„å¼€å‘ï¼Œå®æ–½å’Œç»´æŠ¤ã€‚</font><font style="vertical-align: inherit;">ä»–å‚ä¸äº†ç”±å›½é™…ç»„ç»‡ï¼ˆè”åˆå›½ï¼Œç¾å›½å›½é™…å¼€å‘ç½²ï¼Œä¿„ç½—æ–¯ä¸–ç•Œé“¶è¡Œï¼Œç§‘ç´¢æ²ƒï¼Œæ‘©å°”å¤šç“¦å’Œäºšç¾å°¼äºšï¼‰å®æ–½çš„å¤§å‹æ”¿åºœæœºæ„é¡¹ç›®çš„åˆ›å»ºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Â»å…³äºè¿™æœ¬ä¹¦çš„æ›´å¤šä¿¡æ¯ä¸Šå¯ä»¥æ‰¾åˆ°</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡ºç‰ˆå•†çš„ç½‘ç«™</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Â» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›®å½•</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Â» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‘˜å½•</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
çš„ä¼˜æƒ åˆ¸Khabrozhiteley 25ï¼…çš„æŠ˜æ‰£- </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¥å­£å¯åŠ¨</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
åœ¨æ”¯ä»˜ä¹¦çš„çº¸è´¨ç‰ˆæœ¬ï¼Œç”µå­ä¹¦æ˜¯é€šè¿‡ç”µå­é‚®ä»¶å‘é€ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN506860/index.html">6æœˆ23æ—¥-NXåˆ†æå¸ˆèšä¼šï¼ƒ3ã€‚æˆ‘ä»¬å°†ä¸å®¢æˆ·è®¨è®ºé¢è°ˆï¼Œå¹¶ä¸å¤æ‚çš„å®¢æˆ·åˆä½œã€‚</a></li>
<li><a href="../zh-CN506864/index.html">å³å°†å‘å¸ƒçš„Linux 5.8ï¼šç™¾ä¸‡è¡Œæ–°ä»£ç å’Œ14,000ä¸ªæ›´æ”¹</a></li>
<li><a href="../zh-CN506866/index.html">å•ä¸€ä¿é™©åŸºåœ°-ä¸ä¿é™©å…¬å¸åˆä½œçš„ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN506868/index.html">å±±å§†Â·å¥¥ç‰¹æ›¼ï¼šäº§ç”Ÿæƒ³æ³•</a></li>
<li><a href="../zh-CN506870/index.html">å¦‚ä½•ç¦ç”¨æœ‰å…³é•¿æ—¶é—´æ”¶å¬éŸ³é¢‘çš„å±é™©çš„è­¦å‘Šï¼ˆAndroidï¼‰</a></li>
<li><a href="../zh-CN506874/index.html">ä»ç¨‹åºå‘˜çš„ç”Ÿæ´»ï¼šå•†äºº</a></li>
<li><a href="../zh-CN506880/index.html">Joel Spolskyï¼šå †æ ˆæº¢å‡ºæ—¶ä»£æ˜¯å¦‚ä½•å¼€å§‹çš„</a></li>
<li><a href="../zh-CN506886/index.html">ä¸€ç‚¹ç‚¹ç”Ÿæ´»</a></li>
<li><a href="../zh-CN506888/index.html">æ’åºæ•°æ®ç§‘å­¦å¤‡å¿˜å•</a></li>
<li><a href="../zh-CN506890/index.html">ionCubeä¸­çš„å¤æ´»èŠ‚å½©è›‹-å¼€å‘äººå‘˜è¯•å›¾åœ¨åœ°æ¯¯ä¸‹æ‰«åƒåœ¾å—ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>