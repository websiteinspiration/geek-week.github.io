<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì∏ ü§§ ‚ùÑÔ∏è Android in an industrial controller üë®‚Äçüëß‚Äçüë¶ ‚õé üêæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In any engineering work, the thought moves in such a way as to apply in development the most suitable solutions at the same time in all respects. And ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Android in an industrial controller</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498618/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In any engineering work, the thought moves in such a way as to apply in development the most suitable solutions at the same time in all respects. And in an industry where automation is required, tacit control of some processes, human intervention is even undesirable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Those. if you need to monitor some objects in industrial workshops in a non-contact way, without collecting long wires, collect statistics in a database for analysis, then why not try for a long time already familiar ... Android-smartphones.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have some programming skills for Android, then, as it were, all the hardware for the industrial controller on the smartphone already has: sensors, mobile communications, and a battery for some autonomy. Well, the display, of course, is also needed for a while. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But, although, if someone suddenly made a reliable compact Android-device with hardware exactly like a smartphone, but without a display - it would be ideal. And, yes - this is not just an HDMI-WiFi-dongle for a TV, namely with a battery, a GSM module, and a camera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On assignment - no sensors can be used, hot. Very hot. Those. you need to control non-contact - nothing but a camera will do. There are enough QR codes for the camera to control the necessary objects. But at the same time, the controller must be located in a cool place, with normal temperatures. It all turns out to be real. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mobile Internet is now within cities, even in enterprises - it‚Äôs quite bearable, at least the operator can be picked up with a tolerant signal level. And even 4G can already be used, although, of course, the signal level can balance on the verge of turning off - but more on that later. So - sending data to the server (with preliminary accumulation in the local database) as the Internet is available is not a problem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After preliminary development of software and testing, it turns out that the temperature conditions for the smartphone are fully provided, temperatures up to 40 degrees. Modern lithium batteries on smartphones are fully declared up to 45 ¬∞ C, and at 50 - modern smartphones that control the temperature with an integrated sensor in the battery - start to ‚Äúscream‚Äù about overheating and programmatically turn off charging if it is connected. Therefore, cooling must be taken into account. So that the feasibility is already fully proved, the system is simple in the general structure, all the pieces of the system fit perfectly in the head - that means, ‚Äúforward, and with the song‚Äù, to code.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It comes to the development of the controller case, we include an Android smartphone with a power adapter, with thoughtful input into the power cable. And a cooling system. Which, as it turns out later, is very necessary, and not only for cooling iron. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The time comes, and the system is already fully working, the server shows users the data plates and graphs, checks the ranges of the measured parameters, and notifies users of upcoming f ... k-ups, and then gradually ... the nuances of a structurally ‚Äúsimple‚Äù system begin to appear ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No, there are no problems with the battery, the smartphone is constantly connected to the charger, the internal battery controller is great, puffs and does its continuous work. But it turns out that for reliable recognition of QR codes, the camera angle, lighting, and shadows partially covering the code, and the state of the code, which gradually fades out under high temperature, are important at the same time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then, after a month of ‚Äúcombat‚Äù testing, it suddenly appears that the quality of recognition of QR codes has gradually worsened all this time, and now it‚Äôs not at all suitable: it turns out that the dust is constantly present in the air, which is not visible during a brief cursory inspection of the workshop, but gradually settles on the glass covering the camera lens. A layer of dust gathers slowly and ... it is clear how this ends, in the end.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is where the cooling system came in handy, not only for cooling, but now also for protection against dust, creating "excessive" air pressure from the inside, blowing around the lens and preventing dust from settling on the lens. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
During all these events, of course, there is a continuous debugging of software, algorithms, on hardware, to which developers do not have physical access - all only through remote control. A couple of releases per day, as the general algorithm of operation of equipment in the workshop, described in advance, perfectly understood in the drawings and drawings, also contains in reality a bunch of small nuances. And the verification algorithms in the code multiply continuously.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For remote management and software updates in Android, TeamViewer Host is used (used!), There were no problems with it, probably 4-5 months, everything was wonderfully connected, access to the smartphone screen was. Everything worked through 4g-Internet of one Russian federal operator, in a free mode. Of course, we thought that sooner or later it would be necessary to acquire a business license, because to compose the whole system of remote control by yourself is inexpedient.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything was not bad until TeamViewer developers started updating something on their system there and we lost access. Well, logically, we thought that this was due to a free restriction, while it was an honor to know, and we acquired a license (for a long time and not completely censored by surprise at its cost). But this did not help - it was the beginning of the technical problems of TeamViewer, which required reinstalling the client and settings and confirmation on the smartphone screen. To which there was neither physical nor virtual access. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was possible to restore access to the system only after physically reaching the smartphone - I forgot to mention that the smartphone was new from the store, with official firmware. Without root access to all OS functions. And it worked pretty well for a while.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In short, about TeamViewer (TV) - after these first torments, payment of the business account was returned (only by phone, no way to get support via the Internet is unrealistic). It became clear that we needed alternatives to TV. Later, when the situation repeated - for some reason we stepped on this rake for the second time with the acquisition of a TeamViewer business account, but it became clear that we are not tormented alone, but a bunch of users with mountains of Android devices with a business license. And work with this software has been suspended.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And it became clear that for any industrial equipment the most important thing is the ability to reboot. Including an external remote command. To regain access to the system, regardless of any software glitches. And in accordance with this, it was decided to make a smartphone with root and develop its additional remote control software, through its own server, of course with the possibility of rebooting the smartphone. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And such software was developed, and its use was confirmed more than once: in addition to remote control via the server, commands were implemented via SMS messages.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All this time, only one component of the system was not satisfactory and worked almost around the clock, and even surprised, because More than six months of continuous operation of the system through 4G have already passed. The smartphone was controlled, data flowed, the ability to remotely reboot several times helped overcome glitches of its own main software that works with the camera and QR codes. The Internet disappeared very rarely and literally in a few tens of seconds. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But nothing is ‚Äúforever under the moon,‚Äù and once the system disappeared. Absolutely. Neither data on the server, nor data from Google geo-tracking, nor a response through its own remotecontrol software. Well, it's time to reset the system through a command in an SMS message. But FIG. And it didn‚Äôt help. And the command to turn on the Internet connection did not help.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, an incoming call to the number of the SIM card inserted into the smartphone passed completely for itself, no matter how many times you check it. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I already thought that the evil kulhackers got into the system, removed all my Android software, and at the end they ‚Äúslammed the door‚Äù - cut down the mobile Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally, the telecom operator replied that "we apologize, the technical problem with the cell you are using." But the call works, but the SMS does not.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And then I remembered that at one time I had provided for the forced inclusion of WiFi in the software, I do not know why - this connection is not used in the shops of the enterprise. And the smartphone was once connected to WiFi at the development stage, of course. It remains to try on another smartphone to turn on the WiFi access point, name it with the name of my home network, set the password corresponding to the network and ... and BINGO - the piece of iron is in touch! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Not a single SMS after that operator‚Äôs glitch got to Android, my software didn‚Äôt receive them. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And just by making a reboot of the piece of iron while there was WiFi-Internet, it was possible to restore the SIM card of the operator and mobile Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And now the ability to reboot with the help of a regular incoming call is included in the remote control software, so that such a jamb of the operator does not interfere with the work.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusion: the system works for about 10 months, the smartphone battery is OK, the camera is OK. </font><font style="vertical-align: inherit;">So it is not necessary to assemble or purchase an expensive industrial computer, connect external peripherals to it - it is quite possible to do with a modern Android-smartphone. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But I am sure that it will not succeed in avoiding ‚Äúhemorrhoids‚Äù and all sorts of unpleasant nuances. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And I made this conclusion for myself: the steps for setting up an Android smartphone for offline remote work as part of an industrial controller</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Choosing a device for industrial use - only with the ability to get Root (for the possibility of rebooting)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Update everything automatically possible and disable updates</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Get Root on the device (!)</font></font></li>
<li>  ()  Google Play Market ‚Äî  (   ),       </li>
<li>      : ¬´    ¬ª</li>
<li>   :  ¬´ ¬ª</li>
<li>  SIM- ‚Äì  - ( SIM ‚Äî  !)</li>
<li>    SIM-:   </li>
<li>    RemoteControl ‚Äî       </li>
<li>      (AirDroid, Teamviewer Host)  </li>
<li>   -  ( ,  )</li>
<li>     -</li>
<li>   </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Install the default launcher (host application) (if possible, configure at the last moment)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Installing your RemoteReset utility - rebooting the rooted Android by SMS and calling (!) - check the reboot and auto start of all of the above (and check the operation via the Internet)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Turn on WiFi and connect to the networks in advance: especially to the mobile access point from the operator‚Äôs smartphone; for alternative access of the smartphone to the Internet with local activation of this access point)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Charge the battery</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Launch the main host application</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Disconnect the device until it is turned on during installation</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: the more detailed details, of course, do not allow the sharing of commercial / legal obligations.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en498604/index.html">Remove your children from our blue screens, or why you can‚Äôt buy Yandex.Station for a child</a></li>
<li><a href="../en498608/index.html">Making of NES gameinvitro "MULTIDEFENDER"</a></li>
<li><a href="../en498610/index.html">How to reuse code with symfony 5 bundles? Part 3. Integration of the bundle with the host: templates, styles, JS</a></li>
<li><a href="../en498612/index.html">Do not decide for the designer the task of the designer</a></li>
<li><a href="../en498614/index.html">Analysis of a series of promotional videos for the game Spin Voyage</a></li>
<li><a href="../en498620/index.html">Touching the world: human skin receptor biomechanics</a></li>
<li><a href="../en498624/index.html">[Instruction] Creating Google tests (Google forms)</a></li>
<li><a href="../en498628/index.html">How to build a rocket accelerator for PowerCLI scripts¬†</a></li>
<li><a href="../en498630/index.html">Physical simulation of hundreds of thousands of particles on Unity + DOTS</a></li>
<li><a href="../en498632/index.html">Peptide for a beautiful mulatto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>