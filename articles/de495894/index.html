<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙅🏾 ♿️ 🤷🏿 Javascript-Leistungsmessung 🦎 🦎 🏥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Messen der Zeit, die zum Ausführen einer Funktion benötigt wird, ist ein guter Beweis dafür, dass eine Implementierung eines Mechanismus produktiv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Javascript-Leistungsmessung</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495894/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Messen der Zeit, die zum Ausführen einer Funktion benötigt wird, ist ein guter Beweis dafür, dass eine Implementierung eines Mechanismus produktiver ist als eine andere. Auf diese Weise können Sie sicherstellen, dass die Leistung der Funktion nach einigen Änderungen am Code nicht beeinträchtigt wurde. Es ist auch hilfreich, nach Engpässen bei der Anwendungsleistung zu suchen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ein Webprojekt eine hohe Leistung aufweist, trägt dies zu seiner positiven Wahrnehmung durch die Benutzer bei. Und wenn Benutzer gerne mit der Ressource arbeiten, haben sie die Eigenschaft, zurückzukehren. Zum Beispiel in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Studie ergab, dass 88% der Online-Kunden weniger wahrscheinlich zu Ressourcen zurückkehren, auf die sie mit Unannehmlichkeiten stoßen. Diese Unannehmlichkeiten können durchaus durch Leistungsprobleme verursacht werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus diesem Grund sind Tools zur Ermittlung von Leistungsengpässen und zur Messung der Ergebnisse von Codeverbesserungen in der Webentwicklung wichtig. Solche Tools sind besonders relevant in der JavaScript-Entwicklung. Es ist wichtig zu wissen, dass jede Zeile JavaScript-Code möglicherweise das DOM blockieren kann, da JavaScript eine Single-Threaded-Sprache ist. </font><font style="vertical-align: inherit;">
In diesem Artikel werde ich darüber sprechen, wie die Leistung von Funktionen gemessen wird und was mit den Messergebnissen zu tun ist.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/by/of/jl/byofjlhqvkjueyjzh-cyymte_qg.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie der Meinung sind, dass einige Berechnungen zu umfangreich sind, um im Hauptthread ausgeführt zu werden, können Sie sie an einen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Worker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder Web Worker verschieben.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance.now () -Methode</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schnittstelle </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ermöglicht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über eine Methode </font><font style="vertical-align: inherit;">den Zugriff auf einen Wert vom Typ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">DOMHighResTimeStamp</font></a></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Diese Methode gibt einen Zeitstempel zurück, der die Zeit in Millisekunden angibt, die seit Beginn des Dokuments vergangen ist. </font><font style="vertical-align: inherit;">Darüber hinaus beträgt die Genauigkeit dieses Indikators etwa 5 Mikrosekunden (Bruchteile einer Millisekunde). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Leistung eines Codefragments mithilfe der Methode zu messen </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, müssen Sie zwei Zeitmessungen durchführen, die Ergebnisse dieser Messungen in Variablen speichern und dann die Ergebnisse der ersten von den Ergebnissen der zweiten Messung subtrahieren:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> t0 = performance.now();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++)&nbsp;<font></font>
{<font></font>
&nbsp;&nbsp;<span class="hljs-comment">// - </span><font></font>
}<font></font>
<span class="hljs-keyword">const</span> t1 = performance.now();
<span class="hljs-built_in">console</span>.log(t1 - t0, <span class="hljs-string">'milliseconds'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Chrome können Sie nach dem Ausführen dieses Codes Folgendes erhalten:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">0.6350000001020817</span> <span class="hljs-string">"milliseconds"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Firefox wie folgt:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">1</span> milliseconds
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, sind die Messergebnisse in verschiedenen Browsern sehr unterschiedlich. </font><font style="vertical-align: inherit;">Tatsache ist, dass in Firefox 60 die Genauigkeit der von der Leistungs-API zurückgegebenen Ergebnisse verringert wird. </font><font style="vertical-align: inherit;">Wir werden mehr darüber reden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Performance-Oberfläche bietet viel mehr Funktionen als nur die Rückgabe eines bestimmten Zeitstempels. </font><font style="vertical-align: inherit;">Dazu gehört das Messen verschiedener Leistungsaspekte, die durch Erweiterungen dieser Schnittstelle wie die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance Timeline-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> API </font><font style="vertical-align: inherit;">, das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navigations-Timing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User-Timing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resource-Timing dargestellt werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier finden Sie das</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Material, um mehr über diese APIs zu erfahren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall geht es darum, die Leistung von Funktionen zu messen, damit wir genügend Möglichkeiten haben, die die Methode bietet</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Date.now () und performance.now ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier haben Sie vielleicht den Gedanken, dass Sie die Methode verwenden können, um die Leistung zu messen </font></font><code>Date.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dies ist zwar möglich, aber dieser Ansatz hat Nachteile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Methode </font></font><code>Date.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gibt die seit der Unix-Ära (1970-01-01T00: 00: 00Z) verstrichene Zeit in Millisekunden zurück und hängt von der Systemuhr ab. </font><font style="vertical-align: inherit;">Dies bedeutet nicht nur, dass diese Methode nicht so genau ist wie </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sondern dass sie im Gegensatz dazu </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werte zurückgibt, die unter bestimmten Bedingungen auf falschen Taktanzeigen basieren können. </font><font style="vertical-align: inherit;">Rich Gentlekor, ein Programmierer, der mit der WebKit-Engine verwandt ist, sagt Folgendes: „Vielleicht glauben Programmierer weniger, dass Messwerte beim Zugriff zurückgegeben werden</font></font><code>Date</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufgrund der Systemzeit ist es absolut unmöglich, das Ideal für die Überwachung realer Anwendungen aufzurufen. </font><font style="vertical-align: inherit;">Die meisten Systeme verfügen über einen Daemon, der die Zeit regelmäßig synchronisiert. </font><font style="vertical-align: inherit;">Das Einstellen der Systemuhr für einige Millisekunden alle 15 bis 20 Minuten ist üblich. </font><font style="vertical-align: inherit;">Bei einer solchen Frequenz sind die Takteinstellungen von etwa 1% der Messungen in Intervallen von 10 Sekunden ungenau. "</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Console.time () -Methode</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Zeitmessung mit dieser API ist äußerst einfach. </font><font style="vertical-align: inherit;">Genug, rufen Sie vor dem Code, dessen Leistung Sie auswerten müssen, die Methode </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und nach diesem Code die Methode auf </font></font><code>console.timeEnd()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In diesem Fall müssen die eine und die andere Methode dasselbe Zeichenfolgenargument übergeben. </font><font style="vertical-align: inherit;">Auf einer Seite können bis zu 10.000 solcher Timer gleichzeitig verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Genauigkeit von Zeitmessungen, die mit dieser API durchgeführt werden, ist dieselbe wie bei Verwendung der Leistungs-API, aber die Genauigkeit, die in jeder spezifischen Situation erreicht wird, hängt vom Browser ab.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++) {
&nbsp;&nbsp;<span class="hljs-comment">// - </span><font></font>
}<font></font>
<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Ausführung dieses Codes gibt das System automatisch Informationen über die verstrichene Zeit an die Konsole aus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Chrome sieht es ungefähr so ​​aus:</font></font><br>
<br>
<pre><code class="javascript hljs">test: <span class="hljs-number">0.766845703125</span>ms
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Firefox wie folgt:</font></font><br>
<br>
<pre><code class="javascript hljs">test: <span class="hljs-number">2</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich ist hier alles sehr ähnlich zu dem, was wir bei der Arbeit gesehen haben </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Stärke der Methode </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">liegt in ihrer Benutzerfreundlichkeit. </font><font style="vertical-align: inherit;">Wir sprechen nämlich von der Tatsache, dass für seine Anwendung keine Deklaration von Hilfsvariablen erforderlich ist und der Unterschied zwischen den darin aufgezeichneten Indikatoren festgestellt werden muss.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzierte Zeitgenauigkeit</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie mit den oben beschriebenen Tools die Leistung Ihres Codes in verschiedenen Browsern gemessen haben, können Sie darauf achten, dass die Messergebnisse variieren können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Grund dafür ist , </font><font style="vertical-align: inherit;">dass Browser - </font><font style="vertical-align: inherit;">Benutzer versuchen , </font><font style="vertical-align: inherit;">davor zu schützen , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zeitbasierten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Angriffe </font><font style="vertical-align: inherit;">und von Browser - </font><font style="vertical-align: inherit;">Identifikation Mechanismen ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Browser - </font><font style="vertical-align: inherit;">Fingerprinting</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Wenn sich die Ergebnisse der Zeitmessung als zu genau herausstellen, kann dies Angreifern beispielsweise die Möglichkeit geben, Benutzer zu identifizieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Firefox 60 wird, wie bereits erwähnt, die Genauigkeit der Zeitmessergebnisse </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verringert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dies erfolgt durch Setzen des Eigenschaftswerts </font></font><code>privacy.reduceTimerPrecision</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf 2 ms.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachten Sie dies beim Testen der Leistung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt stehen Ihnen Tools zur Verfügung, mit denen Sie die Leistung von JavaScript-Funktionen messen können. </font><font style="vertical-align: inherit;">Bevor Sie jedoch zur Sache kommen, müssen Sie einige der Funktionen berücksichtigen, über die wir jetzt sprechen werden.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Teilen und erobern</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, Sie haben beim Filtern einiger Daten auf den langsamen Betrieb der Anwendung geachtet. Sie wissen jedoch nicht genau, wo der Leistungsengpass liegt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anstatt zu spekulieren, welcher Teil des Codes langsam ausgeführt wird, ist es besser, dies mit den oben genannten Methoden herauszufinden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um ein allgemeines Bild des Geschehens zu erhalten, müssen Sie zunächst </font><font style="vertical-align: inherit;">die Leistung des Codeblocks </font><font style="vertical-align: inherit;">verwenden </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>console.timeEnd()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bewerten, was sich vermutlich negativ auf die Leistung auswirkt. Dann müssen Sie die Geschwindigkeit der einzelnen Teile dieses Blocks betrachten. Wenn einer von ihnen merklich langsamer aussieht als die anderen, müssen Sie ihm besondere Aufmerksamkeit schenken und ihn analysieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je weniger Code zwischen Aufrufen von Methoden zur Zeitmessung vorhanden ist, desto geringer ist die Wahrscheinlichkeit, dass etwas gemessen wird, das für die Problemsituation nicht relevant ist.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Berücksichtigen Sie die Merkmale des Verhaltens von Funktionen bei verschiedenen Eingabewerten</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In realen Anwendungen können die am Eingang einer bestimmten Funktion empfangenen Daten sehr unterschiedlich sein. </font><font style="vertical-align: inherit;">Wenn Sie die Leistung einer Funktion messen, der ein zufällig ausgewählter Datensatz übergeben wurde, liefert dies keine wertvollen Informationen, die klarstellen können, was passiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Funktionen bei der Untersuchung der Leistung müssen mit Eingabedaten aufgerufen werden, die so real wie möglich sind.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Führen Sie Funktionen mehrmals aus</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, Sie haben eine Funktion, die über ein Array iteriert. </font><font style="vertical-align: inherit;">Sie führt einige Berechnungen mit jedem Element des Arrays durch und gibt danach ein neues Array mit den Ergebnissen der Berechnungen zurück. </font><font style="vertical-align: inherit;">Wenn Sie über die Optimierung dieser Funktion nachdenken, möchten Sie wissen, was in Ihrer Situation schneller funktioniert - eine Schleife </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder eine reguläre Schleife </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sind zwei Optionen für diese Funktion:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testForEach</span>(<span class="hljs-params">x</span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test-forEach'</span>);
&nbsp;&nbsp;<span class="hljs-keyword">const</span> res = [];<font></font>
&nbsp;&nbsp;x.forEach(<span class="hljs-function">(<span class="hljs-params">value, index</span>) =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.push(value / <span class="hljs-number">1.2</span> * <span class="hljs-number">0.1</span>);<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test-forEach'</span>)
&nbsp;&nbsp;<span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testFor</span>(<span class="hljs-params">x</span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test-for'</span>);
&nbsp;&nbsp;<span class="hljs-keyword">const</span> res = [];
&nbsp;&nbsp;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; x.length; i ++) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.push(x[i] / <span class="hljs-number">1.2</span> * <span class="hljs-number">0.1</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test-for'</span>)
&nbsp;&nbsp;<span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Testen Sie die Funktionen:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> x = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">100000</span>).fill(<span class="hljs-built_in">Math</span>.random());<font></font>
testForEach(x);<font></font>
testFor(x);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Ausführen des Codes erhalten wir die folgenden Ergebnisse:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">27</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">3</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Zyklus schien </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viel langsamer zu sein als der Zyklus </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Immerhin zeigen die Testergebnisse genau das? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich ist es nach einem einzigen Test zu früh, um solche Schlussfolgerungen zu ziehen. </font><font style="vertical-align: inherit;">Versuchen wir, die Funktionen zweimal aufzurufen:</font></font><br>
<br>
<pre><code class="javascript hljs">testForEach(x);<font></font>
testForEach(x);<font></font>
testFor(x);<font></font>
testFor(x);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir bekommen folgendes:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">13</span>ms - timer ended<font></font>
test-forEach: <span class="hljs-number">2</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">1</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">3</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich heraus, dass die Funktion, in der es verwendet wird </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, das zweite Mal genannt wird, genauso schnell ist wie die, in der es verwendet wird </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Angesichts der Tatsache, dass die ersten </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionsaufrufe jedoch viel langsamer arbeiten, lohnt es sich möglicherweise immer noch nicht, sie zu verwenden.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Testleistung in verschiedenen Browsern</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die obigen Tests wurden in Firefox durchgeführt. </font><font style="vertical-align: inherit;">Aber was ist, wenn Sie sie in Chrome ausführen? </font><font style="vertical-align: inherit;">Die Ergebnisse werden völlig anders sein:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">6.156005859375</span>ms<font></font>
test-forEach: <span class="hljs-number">8.01416015625</span>ms<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">4.371337890625</span>ms<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">4.31298828125</span>ms
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsache ist, dass die Browser Chrome und Firefox auf unterschiedlichen JavaScript-Engines basieren, die unterschiedliche Leistungsoptimierungen implementieren. </font><font style="vertical-align: inherit;">Es ist sehr nützlich, diese Unterschiede zu kennen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall bietet Firefox eine bessere Optimierung </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit ähnlichen Eingaben. </font><font style="vertical-align: inherit;">Und der Zyklus </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist schneller als </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Chrome und Firefox. </font><font style="vertical-align: inherit;">Infolgedessen ist es wahrscheinlich besser, sich mit der Variante der Funktion c zu befassen </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist ein gutes Beispiel dafür, wie wichtig es ist, die Leistung in verschiedenen Browsern zu messen. </font><font style="vertical-align: inherit;">Wenn Sie die Leistung eines Codes nur in Chrome bewerten, können Sie zu dem Schluss kommen, dass der Zyklus </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">im Vergleich zum Zyklus </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht so schlecht ist.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Wenden Sie künstliche Grenzen auf Systemressourcen an</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die in unseren Experimenten erhaltenen Werte sehen nicht besonders groß aus. </font><font style="vertical-align: inherit;">Beachten Sie jedoch, dass Computer, die für die Entwicklung verwendet werden, normalerweise viel schneller sind als beispielsweise das durchschnittliche Mobiltelefon, auf dem sie im Internet surfen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie die Funktionen des Browsers, um die Systemressourcen künstlich zu begrenzen, um sich an die Stelle eines Benutzers zu setzen, der nicht über das schnellste Gerät verfügt. </font><font style="vertical-align: inherit;">Zum Beispiel - um die Prozessorleistung zu reduzieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit diesem Ansatz können 10 oder 50 Millisekunden leicht zu 500 werden.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Messen Sie die relative Leistung</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Leistungsmessungen hängen normalerweise nicht nur von der Hardware ab, sondern auch von der aktuellen Prozessorlast und von der Arbeitslast des Hauptthreads der JavaScript-Anwendung. </font><font style="vertical-align: inherit;">Versuchen Sie daher, sich auf relative Indikatoren zu verlassen, die die Leistungsänderung charakterisieren, da die absoluten Indikatoren, die bei der Analyse desselben Codefragments zu unterschiedlichen Zeiten erhalten werden, stark variieren können.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel haben wir uns einige JavaScript-APIs angesehen, mit denen die Leistung gemessen werden kann. </font><font style="vertical-align: inherit;">Wir haben darüber gesprochen, wie man sie zur Analyse von echtem Code verwendet. </font><font style="vertical-align: inherit;">Ich glaube, dass es am einfachsten ist, einige einfache Messungen durchzuführen </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe das Gefühl, dass viele Front-End-Entwickler der Messung der Leistung ihrer Projekte nicht genügend Aufmerksamkeit schenken. </font><font style="vertical-align: inherit;">Und sie sollten die relevanten Indikatoren ständig überwachen, da die Produktivität den Erfolg und die Rentabilität von Projekten beeinflusst. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebe Leser! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie die Leistung Ihrer Projekte ständig überwachen, teilen Sie uns bitte mit, wie Sie dies tun.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de495858/index.html">Fern und Selbstisolation: Weltraumerfahrung, um Erdbewohnern zu helfen</a></li>
<li><a href="../de495884/index.html">Zeitreihenvorhersage mit wiederkehrenden neuronalen Netzen</a></li>
<li><a href="../de495888/index.html">PyCon Russia hat die GFP für zukünftige Redner geöffnet. Teilnahmeformulare und erwartete Themen</a></li>
<li><a href="../de495890/index.html">Konfigurieren eines Nginx / LetsEncrypt-Bundles in Docker Swarm</a></li>
<li><a href="../de495892/index.html">Wissen Sie wirklich, was Arrays sind?</a></li>
<li><a href="../de495896/index.html">Use-Sound-Paket: Soundeffekte in React-Anwendungen</a></li>
<li><a href="../de495898/index.html">Eine praktische Anleitung zum Umgang mit Speicherlecks in Node.js.</a></li>
<li><a href="../de495902/index.html">CAPTCHA: Bekehrung töten</a></li>
<li><a href="../de495904/index.html">Kann eine Epidemie vorhergesagt werden?</a></li>
<li><a href="../de495908/index.html">Der Weg zur Belohnung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>