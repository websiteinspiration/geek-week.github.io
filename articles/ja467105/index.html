<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏻 🛌🏻 ⛈️ Dockerユーザー向けのPodmanおよびBuildah 🧚🏽 🏰 ⚗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PodmanとBuildahには多くの優れたブログとチュートリアルがありますが、Dockerユーザーは、Podmanに切り替える方法に関する明確で簡潔な説明に明らかに欠けています。
 
 
 
 これらの質問に答えて、DockerからPodmanにシームレスに移行する方法を説明します。
 
 Doc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dockerユーザー向けのPodmanおよびBuildah</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/467105/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PodmanとBuildahには多くの優れたブログとチュートリアルがありますが、Dockerユーザーは、Podmanに切り替える方法に関する明確で簡潔な説明に明らかに欠けています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/m9/de/um/m9deumkiupstpwlpynelflvucxo.png" width="100%"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの質問に答えて、DockerからPodmanにシームレスに移行する方法を説明します。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dockerの仕組み</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、PodmanとBuildahが生まれた理由を理解するために、Dockerの仕組みを明確にすることから始めましょう。</font><font style="vertical-align: inherit;">ご存知のように、Dockerコマンドは、Dockerデーモンプロセスが実行されている場合にのみ機能します。</font><font style="vertical-align: inherit;">悪魔のアイデアは、Dockerが行うすべてのクールなものを1か所に集め、同時に彼と一緒に将来のために役立つ便利なAPIを編成することでした。</font><font style="vertical-align: inherit;">下の図に示すように、Dockerデーモンには、次のタスクを実行するために必要なすべての機能が含まれています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イメージのレジストリを操作するときのプルおよびプッシュ操作。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ローカルコンテナーストレージにイメージのコピーを作成し、これらのコンテナーにレイヤーを追加します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテナの変更をコミットし、ホストのローカルリポジトリからコンテナイメージを削除します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">対応する名前空間、cgroupなどでコンテナーを起動するようにOSカーネルに要求します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的に、Dockerデーモンは、レジストリ、イメージ、コンテナ、カーネルを使用してすべての作業を処理します。</font><font style="vertical-align: inherit;">そして、あなたは彼にコマンドラインインターフェース（CLI）を通して何をすべきかを伝えるだけです。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/rp/ot/n9/rpotn9q5ovfti-d-jv2m7yyhbta.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、すべてが1つのデーモンプロセスで組み立てられるとき、このアプローチの長所と短所を比較検討しません。</font><font style="vertical-align: inherit;">彼の賛成で多くの議論をすることができ、Dockerの登場時には、それは完全に理にかなっています。</font><font style="vertical-align: inherit;">しかし、Dockerを積極的に使用すると、次のような疑問が生じ始めました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単一プロセスは、単一障害点を意味します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デーモンプロセスは、すべての子プロセス（コンテナーを実行）を所有します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">悪魔が去ると、子プロセスは孤立したままになります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテナーアセンブリにはセキュリティホールがあります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker操作を実行するには、ユーザーに完全なroot権限が必要です。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の苦情がありました。</font><font style="vertical-align: inherit;">これに反対することも、これらの欠点はすでに解消されていると言うこともできますが、議論するつもりはありません。</font><font style="vertical-align: inherit;">ポッドマン開発者は、これらの問題の多くを解決できたと信じています。ポッドマンを利用したい場合は、この記事が役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podmanの本質は、イメージレジストリ、コンテナー、イメージストレージ、およびLinuxカーネルと対話することです。デーモンではなく、コンテナーの起動を担当するrunCプロセスを介して直接対話します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bf/a8/xo/bfa8xofe89azm6tc_bx71brzhcs.png"></div><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポッドマン開発者の動機を部分的に理解したところで、今度はポッドマンへの移行がユーザーにとって何を意味するのかを説明します。</font><font style="vertical-align: inherit;">そしてここで、以下を同化して明確にする必要があります（以下で行います）。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポッドマンはDockerの後継です。</font><font style="vertical-align: inherit;">同時に、Dockerデーモンのようなある種のデーモンプロセスを開始する必要がなくなりました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使い慣れたDockerコマンドは、Podmanでも同じように機能します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PodmanはコンテナーとイメージをDockerと同じ場所に保存しません。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PodmanとDockerのイメージには互換性があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes環境では、PodmanはDockerよりも多くのことができます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、Buildahとは何か、なぜそれが必要なのかを分析します。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポッドマンのインストール</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dockerを使用している場合は、切り替えを行うときに削除できます。</font><font style="vertical-align: inherit;">ただし、Podmanを試す間はDockerを離れることができます。</font><font style="vertical-align: inherit;">移行プロセスをよりよく理解できるように、初心者のために読んで見ると役立つかもしれない</font><font style="vertical-align: inherit;">いくつかの役立つ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レッスン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と優れた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デモ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります。</font><font style="vertical-align: inherit;">デモの1つの例では、Dockerに互換性を示す必要があります。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Red Hat Enterprise Linux</font></a><font style="vertical-align: inherit;"> 7.6以降に</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podmanをインストールする</font><font style="vertical-align: inherit;">には、以下を使用します。</font><font style="vertical-align: inherit;">Fedoraを使用している場合は、yumをdnfに置き換えます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs"># yum -y install podman
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポッドマンはDockerと同じコマンドを使用します</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポッドマンは、Dockerで簡単に切り替えられるように設計されています。したがって、Dockerから知っているすべてのチームは、Podmanでも同じように機能します。さらに、対応するエイリアスを次のように作成すると、Docker呼び出しスクリプトが正常に機能するはずだと主張されています。alias docker = podman-試してみてください。もちろん、その前にDockerを停止する必要があります（systemctl stop docker）。さらに、podman-dockerパッケージをインストールすると、必要なすべての変換が行われます。 Dockerが使用するのと同じ引数でPodmanを実行するスクリプトを/ usr / bin / dockerに配置するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pull、push、build、run、commit、tagなどの通常のDockerコマンドはすべてPodmanにあります。詳細については、Podmanのマニュアルを参照してください。重要な違いは、ポッドマンでは、ポッドマンrmコマンドとポッドマンrmiコマンドの--all（-a）フラグなど、一部のチームが便利なフラグを追加していることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、Podmanはroot権限なしで通常のユーザーとして実行できます。</font><font style="vertical-align: inherit;">確かに、これまでのところ、これはFedoraとPodman 1.0でのみ機能し、RHELではバージョン7.7と8.1以降で表示されるはずです。</font><font style="vertical-align: inherit;">これは、ユーザースペース保護の改善により可能になりました。</font><font style="vertical-align: inherit;">通常のユーザーとして実行すると、デフォルトではポッドマンがユーザーのホームディレクトリに画像とコンテナを保存することになります。これについては、次のセクションで詳しく説明します。</font><font style="vertical-align: inherit;">ルート権限なしでポッドマンを実行する方法の詳細については、Dan Walshの記事</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「ルートレスポッドマンはどのように機能するのですか？」を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照してください</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">。</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポッドマンとコンテナーイメージ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初にpodman imagesコマンドを入力するときは、以前にコンピューターに既にダウンロードされているDockerイメージが表示されないため、おそらくお勧めできません。実際のところ、ローカルのPodmanリポジトリは、/ var / lib / dockerディレクトリではなく、/ var / lib / containersフォルダーにあります。これはそのように行われただけでなく、OCI（Open Containers Initiative）標準を満たす新しいストレージ構造の一部として行われました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2015年、Docker、Red Hat、CoreOS、SUSE、Google、およびその他のLinuxコンテナのトレンドセッターは、コンテナイメージの形式とそのランタイムの標準仕様を管理する独立機関であるOpen Container Initiativeを作成しました。 OCIの一部として、コンテナー/イメージおよびコンテナー/ストレージプロジェクトがGitHubで作成されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podmanはroot権限なしで実行できるため、画像を記録するための別の場所が必要です。したがって、Podmanリポジトリはユーザーのホームディレクトリ〜/ .local / share / containerにあります。これは、すべてを/ var / lib /コンテナーに書き込むことができる状況を回避するのに役立ちます。また、セキュリティーの観点から危険な他の慣行との関連で役立ちます。さらに、各ユーザーが独自の個別のコンテナセットを持っているため、複数のユーザーがホスト上で同時に作業できます。完了したら、ユーザーは共有レジストリにプッシュして、自分のイメージを他のユーザーが使用できるようにすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DockerからPodmanに切り替えるとき、デバッグ時に新しいコンテナーの場所のパスを知っていると便利です。また、rm -rf / var / lib / Containersコマンドでローカルリポジトリを空にして最初からやり直す場合にも便利です。</font><font style="vertical-align: inherit;">ただし、Podmanに切り替えると、このコマンドの代わりに、podman rmおよびpodman rmiコマンドに新しい-allオプションを使用し始める可能性が高くなります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Podmanと他のランタイム間のコンテナーの互換性</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローカルリポジトリの場所は異なりますが、DockerとPodmanはどちらもOCI標準と互換性のあるコンテナーイメージを作成します。ポッドマンは、Quay.ioやDocker Hubなどの一般的なコンテナーレジストリを使用できます。また、両方向（プッシュとプル）のプライベートレジストリも使用できます。たとえば、Podmanを使用すると、Docker Hubから最新のFedoraイメージをダウンロードして実行できます。レジストリを指定しない場合、デフォルトでは、Podmanはregistries.confファイルにリストされているレジストリを、このファイルで指定されている順序に従って検索します。最初は、このファイルの最初はDocker Hubレジストリです。</font></font><br>
<br>
<pre><code class="plaintext hljs">$ podman pull fedora:latest<font></font>
$ podman run -it fedora bash<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dockerを使用してレジストリにアップロードされたイメージは、Podmanを使用してダウンロードして実行できます。</font><font style="vertical-align: inherit;">たとえば、Dockerを使用してmyfedoraイメージを作成し、それをQuay.io（ipbabble）リポジトリにアップロードした場合、Podmanを使用してダウンロードできます。方法は次のとおりです。</font></font><br>
<br>
<pre><code class="plaintext hljs">$ podman pull quay.io/ipbabble/myfedora:latest<font></font>
$ podman run -it myfedora bash<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podmanでは、プッシュコマンドとプルコマンドを使用して、/ var / lib / dockerと/ var / lib / containersディレクトリ間でイメージを簡単かつエレガントに移動できます。たとえば、</font></font><br>
<br>
<pre><code class="plaintext hljs">$ podman push myfedora docker-daemon:myfedora:latest
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例でdocker-daemonを省略した場合、push sendがDocker Hubに送信されることは明らかです。</font><font style="vertical-align: inherit;">quay.io/myquayid/myfedoraを指定すると、イメージはQuay.ioレジストリにアップロードされます（ここで、myquayidは、Quay.io上のアカウントの名前です）。</font></font><br>
<br>
<pre><code class="plaintext hljs">$ podman push myfedora quay.io/myquayid/myfedora:latest
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dockerを放棄する準備ができていると判断した場合、それをアンインストールするには、デーモンをシャットダウンしてから、パッケージマネージャーを使用してDockerパッケージを削除します。</font><font style="vertical-align: inherit;">ただしその前に、Dockerを使用して作成する必要のあるすべてのイメージを外部（ローカルではなく）レジストリにアップロードして、そこからダウンロードできるようにしてください。</font><font style="vertical-align: inherit;">または、Podmanを使用して、ローカルのDockerリポジトリからローカルのPodman OCIリポジトリにダウンロードすることもできます。</font><font style="vertical-align: inherit;">たとえば、RHELでは、fedoraイメージの転送は次のように行われます。</font></font><br>
<br>
<pre><code class="plaintext hljs"># systemctl stop docker<font></font>
# podman pull docker-daemon:fedora:latest<font></font>
# yum -y remove docker  # optional<font></font>
</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ポッドマンにより、Kubernetesへの切り替えが簡単に</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポッドマンは、Dockerと比較して、Kubernetesを操作するときに開発者やITオペレーターに役立つ多くの追加機能、特にDockerにはない便利なコマンドを提供します。</font><font style="vertical-align: inherit;">Dockerに精通していて、コンテナープラットフォームとしてKubernetes / OpenShiftへの切り替えを検討している場合は、Podmanが便利です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Podmanは、podman generate kubeコマンドを使用して、実行中のコンテナーに基づいてKubernetes YAMLファイルを生成できます。</font><font style="vertical-align: inherit;">また、実行中のポッドをデバッグするときは、コンテナーを操作するための標準コマンドに加えて、podman podコマンドも使用できます。</font><font style="vertical-align: inherit;">PodmanがKubernetesへの切り替えを支援する方法の詳細については、Brent Baudeの記事PodmanがKubernetesおよびCRI-Oへの移行を容易にできるようになりました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buildah-それは何で、なぜ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BuildahはPodmanよりも早く登場しました。そして、これは時々Dockerユーザーを落胆させます：「ポッドマンの謝罪者が突然Buildahについて話しているのはなぜですか？ポッドマンは、どのように組み立てればよいかわかりませんか？」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは安心することを急いで、ポッドマンはできるし、Dockerのようにそれを行う。つまり、Dockerfileとpodman buildコマンドを使用してアセンブリを実行するか、コンテナーを起動して必要な変更を加えてからコミット（コミットの実行）して、コンテナーイメージに新しいタグを作成できます。私たちの解釈では、Buildahはコンテナーイメージを作成および管理するための拡張されたコマンドセットであるため、イメージを操作するときにより細かい制御が可能です。ポッドマンビルドコマンドにはBuildah機能が部分的に含まれており、Buildah自体と同じビルドのプログラムコードを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buildahを使用する最も効率的な方法は、Dockerfile用に作成するのと同じように、イメージを作成するBashスクリプトを作成することです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビルアとポッドマンの登場年表は、おおよそ次のような出来事でした。 KubernetesがコンテナランタイムのOCI標準に基づいてCRI-Oを使用することを学ぶと、Dockerデーモンは不要になりました。つまり、ポッドとコンテナを実行するためにKubernetesクラスタのすべてのノードにDockerをインストールする必要がなくなりました。 KubernetesがCRI-Oを呼び出すことができるようになり、直接RunCを実行できるようになりました。これにより、コンテナープロセスが開始されます。ただし、起動だけでなくコンテナーの構築にも（たとえばOpenShiftで）同じKubernetesクラスターを使用する場合は、Dockerデーモンに依存しない新しいビルドツールが必要です。結果として、Dockerのインストールは必要ありません。さらに、そのようなツール、コンテナー/ストレージおよびコンテナー/イメージプロジェクトに基づいて作成され、アセンブリ中のDockerデーモンのオープンソケットに関連するセキュリティリスクを排除し、これらのリスクは多くのDockerユーザーに関係します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてBuildahはそのような新しいツールになりました（名前は「build」と読み、プロジェクトマネージャーのDan Walshのボストンアクセントを模倣して、「builder」という単語を発音します）。</font><font style="vertical-align: inherit;">Buildahの詳細については、buildah.ioのほか、この記事の最後にあるブログやリンクガイドを参照してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Buildahを使用するかどうかを学ぶには、さらにいくつかの詳細があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像レイヤーを作成するときに、より正確な制御を提供します。</font><font style="vertical-align: inherit;">特に、多くのコンテナーユーザーが長い間望んでいたことを実行できます。1つのレイヤーだけで一度に多くの変更をコミットできます。</font></font></li>
<li>Buildah’ run  Podman’ run –   .  Buildah    ,   run,  ,   RUN  Dockerfile.  ,    Buildah, ,    : « - ,  -   mount    ,   .   (@rhatdan)    ,  Buildah        . ,        .        buildah run   ,      , , : buildah run dnf -y install nginx».</li>
<li>Buildah      (scratch-).   ,    , . ,     ,      buildah from scratch,     .         ,    ,     .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜ最初から構築するのですか？ Javaアプリケーションの開発イメージを、実稼働環境またはステージング環境のイメージと比較してみましょう。開発段階では、イメージにJavaコンパイラ、Maven、および開発者が必要とするその他のツールが含まれている場合があります。ただし、本番環境に変換する場合は、Javaランタイムとパッケージのみをイメージに残す必要があります。ちなみに、不要なものを削除するために、DNF / YUMのようなパッケージマネージャーはまったく必要なく、Bashも必要ありません。下の図に示すように、Buildah CLIインターフェイスを介してすべてを実行できます。従来のマルチレイヤーコンテナーは左側にあり、シングルレイヤーコンテナーは右側にあります。スクラッチ画像。詳細については</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Kubernetes用のBuildahコンテナイメージのビルド</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buildahの導入デモ</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">をご覧</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">。</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/kd/w5/qqkdw5dmlj4c5fuyxsi7chc1pew.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
年表に戻ります。</font><font style="vertical-align: inherit;">それで、KubernetesはCRI-OとrunCで動作することを学びました、そして私たちはBuildahを積み上げたビルドのために-すべて、Kubernetesホスト上のDockerから拒否できますか？</font><font style="vertical-align: inherit;">いいえ、デバッグはまだ残っています。</font><font style="vertical-align: inherit;">ホストに適切なツールがない場合、コンテナーの問題を解決するにはどうすればよいですか？</font><font style="vertical-align: inherit;">その上にDockerを置かないでください。そうしないと、再びデーモンに戻り、すべての努力が無駄になりました。</font><font style="vertical-align: inherit;">そして、ポッドマンが登場します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、ポッドマンは2つの問題を一度に解決します。</font><font style="vertical-align: inherit;">まず、ITオペレーターは使い慣れたコマンドを使用してコンテナーとイメージを検査できます。</font><font style="vertical-align: inherit;">そして第二に、彼はこれらと同じツールを開発者に提供します。</font><font style="vertical-align: inherit;">その結果、すべてのDockerユーザー（開発者とオペレーターの両方）がPodmanに切り替えて、以前にDockerを使用していたタスクを落ち着いて実行し、一連の新しいタスク全体を解決できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要なリソース：</font></font></h3><br>
<ul>
<li>  Podman.io  Buildah.io.</li>
<li>  github.com/containers (,      ,   :<br>
 <ul>
<li>libpod (Podman);</li>
<li>buildah;</li>
<li>image (      OCI);</li>
<li>storage (    ).</li>
</ul><br>
 </li>
</ul><br>
<h3> :</h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Containers without daemons: Podman and Buildah available in RHEL 7.6 and RHEL 8 Beta</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Podman: Managing pods and containers in a local container runtime</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Managing containerized system services with Podman (  podman   systemd)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Building a Buildah Container Image for Kubernetes</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Podman can now ease the transition to Kubernetes and CRI-O</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Security Considerations for Container Runtimes (     KubeCon 2018)</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">IoT edge development and deployment with containers through OpenShift: Part 1 (    ARM64   OpenShift   sing podman, qemu, binfmt_misc  Ansible)</a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467093/index.html">Straceを使用したプログラムのスパイ</a></li>
<li><a href="../ja467095/index.html">思ったより簡単です。二十</a></li>
<li><a href="../ja467097/index.html">レルムでのページングライブラリの使用</a></li>
<li><a href="../ja467099/index.html">小さなもののためのハピ</a></li>
<li><a href="../ja467101/index.html">犬の匂いでロボットを作ろう！</a></li>
<li><a href="../ja467107/index.html">GitLab CI / CDを使用して複数のパイプラインを実行する方法</a></li>
<li><a href="../ja467109/index.html">QAがプロジェクトのテスト自動化を整理する方法。1つの実用的な方法</a></li>
<li><a href="../ja467111/index.html">お使いの携帯電話にかかる時間を減らす方法に関する抜本的なヒント</a></li>
<li><a href="../ja467115/index.html">非定型「ls」-Habrエディション</a></li>
<li><a href="../ja467117/index.html">写本は燃えません：紀元前250年まで遡る死海の巻物の寿命の秘密</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>