<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¢ ü§Ωüèª üôéüèª About 1C server cluster üöí üí∂ üôÜüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A cluster is a type of parallel 
 or distributed system that: 
 1. consists of several interconnected 
 computers; 
 2. Used as a single, 
 unified co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>About 1C server cluster</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/1c/blog/493008/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A cluster is a type of parallel </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
or distributed system that: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. consists of several interconnected </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
computers; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Used as a single, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
unified computer resource </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gregory F. Pfister, ‚ÄúIn search of clusters‚Äù. </font></font></a></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Given:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> there is a business application (for example, an ERP system) with which thousands (possibly tens of thousands) of users work simultaneously. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is required:</font></font></b><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make the application scalable, so that with an increase in the number of users, it is possible due to the increase in hardware resources to provide the necessary application performance.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make the application resistant to failure of system components (both software and hardware), loss of connection between components and other possible problems.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use system resources as efficiently as possible and provide the desired application performance.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make the system easy to deploy and administer.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To solve these problems, we use the cluster architecture in the 1C: Enterprise platform. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We did not immediately reach the desired result. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, we will talk about what kind of clusters are, how we chose the type of cluster that suits us and how our cluster evolved from version to version, and which approaches allowed us to eventually create a system that serves </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tens of </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thousands of</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simultaneous users.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0g/mo/rq/0gmorqiise6fvaouym5mwpabl7y.png" alt="image"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As Gregory Pfister, the author of the epigraph to this article, wrote in his book ‚ÄúIn search of clusters,‚Äù the cluster was not invented by any particular manufacturer of hardware or software, but by customers who lacked the power of one computer or needed redundancy. </font><font style="vertical-align: inherit;">This happened, according to Pfister, back in the 60s of the last century. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traditionally distinguish the following main types of clusters:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Failover Clusters (HA, High Availability Clusters)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Load balancing clusters (LBC)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Computing clusters (High performance computing clusters, HPC)</font></font></li>
<li>   (grid)      ,              .   grid-      ,    .  grid-    HPC-,      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To solve our problems (resistance to failure of system components and efficient use of resources), we needed to combine the functionality of a fail-safe cluster and a cluster with load balancing. </font><font style="vertical-align: inherit;">We did not come to this decision right away, but approached it evolutionarily, step by step. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For those who are not up to date, I will briefly tell you how 1C business applications are arranged. </font><font style="vertical-align: inherit;">These are applications written in a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">subject-oriented language</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , "sharpened" for the automation of accounting business tasks. </font><font style="vertical-align: inherit;">To run applications written in this language, a 1C: Enterprise platform runtime must be installed on the computer.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C: Enterprise 8.0</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first version of 1C application server (not yet a cluster) appeared in platform version 8.0. Before that, 1C worked in the client-server version, the data was stored in a file DBMS or MS SQL, and the business logic worked exclusively on the client. In version 8.0, a transition was made to the three-tier architecture "client - application server - DBMS". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Server 1C in platform 8.0 was </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COM +</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a server that can execute application code in 1C. </font><font style="vertical-align: inherit;">Using COM + provided us with ready-made transport, allowing client applications to communicate with the server over the network. </font><font style="vertical-align: inherit;">A lot of things in the architecture of both client-server interaction and the application objects available to the 1C developer were designed taking into account the use of COM +. </font><font style="vertical-align: inherit;">At that time, fault tolerance was not built into the architecture, and a server crash caused all clients to shut down. </font><font style="vertical-align: inherit;">When the server application crashed, COM + lifted it when the first client accessed it, and the clients started their work from the beginning - from the connection to the server. </font><font style="vertical-align: inherit;">At that time, all customers were served by one process.</font></font><br>
<img src="https://habrastorage.org/webt/fg/oo/en/fgooenmx-pqv5tuizcfcvbvbaqg.png" alt="image"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C: Enterprise 8.1</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the next version, we wanted:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provide fault tolerance to our customers so that accidents and errors of some users do not lead to accidents and errors of other users. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get rid of COM + technology. </font><font style="vertical-align: inherit;">COM + worked only on Windows, and at that time the possibility of working under Linux was already becoming relevant.</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, we did not want to develop a new version of the platform from scratch - it would be too resource-intensive. </font><font style="vertical-align: inherit;">We wanted to make maximum use of our achievements, as well as to maintain compatibility with applications developed for version 8.0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So in version 8.1 the first cluster appeared. </font><font style="vertical-align: inherit;">We implemented our protocol for remote procedure call (on top of TCP), which in appearance looked almost like COM + for the end consumer-client (i.e., we practically did not have to rewrite the code responsible for client-server calls). </font><font style="vertical-align: inherit;">At the same time, we made the server implemented in C ++ platform independent, capable of working on both Windows and Linux.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The monolithic server version 8.0 was replaced by 3 types of processes - a work process that serves clients, and 2 service processes that support the operation of the cluster:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rphost is a workflow serving customers and executing application code. </font><font style="vertical-align: inherit;">A cluster can have more than one workflow, different workflows can be executed on different physical servers - due to this scalability is achieved.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ragent - a server agent process that starts all other types of processes, as well as a leading list of clusters located on this server.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rmngr is a cluster manager that controls the operation of the entire cluster (but the application code does not work on it). </font></font></li>
</ul><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Under the cut is the operation diagram of these three processes in the cluster.</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/mn/yh/tc/mnyhtcaf9zf3_nqddsbfq4xgpsg.png" alt="image"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
During the session, the client worked with one workflow, the drop in the workflow meant for all clients whom this process served, the session terminated abnormally. </font><font style="vertical-align: inherit;">The remaining customers continued to work.</font></font><br>
<img src="https://habrastorage.org/webt/wm/tm/mc/wmtmmcct7xd6v2ecl6vi7nlx5dk.png" alt="image"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C: Enterprise 8.2</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In version 8.2, we wanted 1C applications to be able to run not only in the native (executable) client, but also in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">browser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (without modifying the application code). </font><font style="vertical-align: inherit;">In this regard, in particular, the task arose of decoupling the current state of the application from the current connection with the rphost workflow and making it stateless. </font><font style="vertical-align: inherit;">As a result, the concept of a session and session data arose that had to be stored outside the workflow (because it was stateless). </font><font style="vertical-align: inherit;">A session data service has been developed that stores and caches session information. </font><font style="vertical-align: inherit;">Other services also appeared - a service of managed transactional locks, a full-text search service, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This version also introduced several important innovations - improved fault tolerance, load balancing, and a cluster redundancy mechanism.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fault tolerance</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since the work process became stateless and all the data necessary for work was stored outside the current client ‚Äì ‚Äã‚Äãworkflow connection, in the event of a workflow crash, the client switched to another, ‚Äúlive‚Äù workflow the next time it accessed the server. In most cases, such a switch was invisible to the client.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The mechanism works like this. If the client‚Äôs call to the workflow for some reason could not be completed to the end, then the client part is able, having received a call error, repeat this call by re-establishing the connection to the same workflow or to another. But you can‚Äôt always repeat a call; Repeat the call means that we sent the call to the server, but did not receive the result. We try to repeat the call, while making the second call, we evaluate what the result of the previous call was on the server (information about this is stored on the server in the session data), because if the call had time to ‚Äúinherit‚Äù there (close the transaction, save the session data etc.) - it‚Äôs just impossible to repeat it, it will lead to data inconsistency. If the call cannot be repeated, the client will receive a message about an unrecoverable error,and the client application will have to restart. If the call did not succeed in ‚Äúinheriting‚Äù (and this is the most common situation, because many calls do not change data, for example, reports, displaying data on a form, etc., and those that change data - until the transaction is committed or until a change in session data has been sent to the manager ‚Äî there is no trace of the call) ‚Äîit can be repeated without risk of data inconsistency. If the workflow crashed or a network connection was interrupted, such a call is repeated, and this ‚Äúdisaster‚Äù for the client application occurs completely unnoticed.that change data ‚Äî until the transaction is committed or until the change in session data is sent to the manager ‚Äî there is no trace of the call) ‚Äîit can be repeated without risk of data inconsistency. If the workflow crashed or a network connection was interrupted, such a call is repeated, and this ‚Äúdisaster‚Äù for the client application occurs completely unnoticed.that change data ‚Äî until the transaction is committed or until the change in session data is sent to the manager ‚Äî there is no trace of the call) ‚Äîit can be repeated without risk of data inconsistency. If the workflow crashed or a network connection was interrupted, such a call is repeated, and this ‚Äúdisaster‚Äù for the client application occurs completely unnoticed.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Load balancing</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The task of load balancing in our case is as follows: a new client enters the system (or an already working client makes another call). </font><font style="vertical-align: inherit;">We need to choose which server and workflow to send the client‚Äôs call to in order to provide the client with maximum speed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is a standard task for a load-balanced cluster. </font><font style="vertical-align: inherit;">There are several typical algorithms for solving it, for example:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Round-Robin ()</a> ‚Äì    ,      ,   ‚Äì    . .    .           .    ,          ¬´¬ª .           (   )    .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Weighted Round Robin</a> ‚Äì  Round-Robin:          ,    ÃÅ    .</li>
<li>Least Connections:     ,       .</li>
<li>Least Response Time:       :    ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For our cluster, we chose an algorithm that is essentially close to Least Response Time. We have a mechanism that collects statistics on the performance of workflows on all servers in the cluster. It makes a reference call to each server process in the cluster; the reference call involves a subset of the functions of the disk subsystem, memory, processor, and evaluates how quickly such a call is made. The result of these measurements, averaged over the last 10 minutes, is a criterion - which server in the cluster is the most productive and preferred for sending client connections to it in a given period of time. Client requests are distributed in such a way as to better load the most productive server - load the one who is lucky.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The request from the new client is addressed to the most productive server at the moment. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A request from an existing client is in most cases addressed to that server and to the workflow to which its previous request was addressed. </font><font style="vertical-align: inherit;">An extensive set of data on the server is associated with a working client; transferring it between processes (and even more so between servers) is quite expensive (although we can do this too). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A request from an existing client is transferred to another workflow in two cases:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is no more process: the workflow with which the client previously interacted is no longer available (the process has fallen, the server has become unavailable, etc.).</font></font></li>
<li>   :     ,            ,     ,   ,              .         ,  ,     ‚Äì             .    ‚Äì      (..   ).</li>
</ol><br>
<br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We decided to increase the cluster resiliency by resorting to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Active / passive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> scheme </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">There was an opportunity to configure two clusters - working and reserve. </font><font style="vertical-align: inherit;">If the primary cluster is unavailable (network problems or, for example, scheduled maintenance), client calls are redirected to the backup cluster. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, this design was quite difficult to configure. </font><font style="vertical-align: inherit;">The administrator had to manually assemble two server groups into clusters and configure them. </font><font style="vertical-align: inherit;">Sometimes administrators made mistakes by setting conflicting settings, as </font><font style="vertical-align: inherit;">there was no centralized mechanism for checking settings. </font><font style="vertical-align: inherit;">But, nevertheless, this approach increased the fault tolerance of the system.</font></font><br>
<img src="https://habrastorage.org/webt/ik/k7/06/ikk7062chdd8qtpk0kzvfncq7vu.png" alt="image"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C: Enterprise 8.3</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In version 8.3, we substantially rewrote the server-side code responsible for fault tolerance. We decided to abandon the Active / passive cluster scheme because of the complexity of its configuration. Only one fault-tolerant cluster remained in the system, consisting of any number of servers - this is closer to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Active / active</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> scheme </font><font style="vertical-align: inherit;">in which requests for a failed node are distributed among the remaining working nodes. Due to this, the cluster has become easier to configure. A number of operations that increase fault tolerance and improve load balancing have become automated. Of the important innovations:</font></font><br>
<br>
<ul>
<li>   ¬´ ¬ª: , ,               .                ,           ¬´¬ª          .</li>
<li>     ,  ,            .</li>
<li>  ,     ,     ,   ,   ,    :</li>
</ul><br>
<img src="https://habrastorage.org/webt/o7/aw/pz/o7awpzltn3jxnderotcyf_wbahm.png" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/v5/kc/rj/v5kcrjv3ldm96l3ovj1seqobrga.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main idea of ‚Äã‚Äãthese developments is to simplify the work of the administrator, allowing him to configure the cluster in terms familiar to him, at the level of server operation, not dropping lower, and also to minimize the level of ‚Äúmanual control‚Äù of the cluster‚Äôs work, giving the cluster mechanisms to solve most work tasks and possible problems ‚Äú on autopilot. ‚Äù</font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/9i/zy/da9izy3cj4wlf80nr8s35tqnp3e.png" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Three links of fault tolerance</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you know, even if the components of the system separately are reliable, problems can arise where the components of the system cause each other. </font><font style="vertical-align: inherit;">We wanted to minimize the number of places critical to system performance. </font><font style="vertical-align: inherit;">An important additional consideration was the minimization of alterations of applied mechanisms in the platform and the exclusion of changes in applied solutions. </font><font style="vertical-align: inherit;">In version 8.3, there were 3 links for ensuring fault tolerance ‚Äúat the joints‚Äù:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/1g/s1/kb1gs1mfus_rsminiyizg4t5dma.png" alt="image"><br>
<ol>
<li>  ,   HTTP(S),  -.   -     -.    ,   HTTP  -,    (     HTTP)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">libcurl</a>    . </li>
<li>  ,                     .</li>
<li>  -   .       1,   -     .    -            .       ,         .           ,     ‚Äì    .    -         (,     ,   ,         ) ‚Äì          .</li>
<li>     ,    rmngr.    20 (    ) ‚Äî   ,     ..                .     1:          .</li>
</ol><br>
<br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thanks to the fault tolerance mechanism, applications created on the 1C: Enterprise platform successfully survive various types of failures of production servers in the cluster, while most of the clients continue to work without restarting. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are situations when we cannot repeat the call, or a server crash catches the platform at a very unfortunate point in time, for example, in the middle of a transaction and it is not very clear what to do with them. We try to ensure statistically good client survival when servers fall in the cluster. Typically, the average loss of clients for server failure is a few percent. In this case, all "lost" clients can continue to work in the cluster after restarting the client application.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The reliability of the 1C server cluster in version 8.3 has increased significantly. </font><font style="vertical-align: inherit;">It has long been not uncommon to introduce 1C products, where the number of simultaneously working users reaches several thousand. </font><font style="vertical-align: inherit;">There are implementations where both 5,000 and 10,000 users work simultaneously - for example, the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction in Beeline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where the 1C: Trade Management application serves all Beeline sales </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">outlets</font></a><font style="vertical-align: inherit;"> in Russia, or the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementation of Business Lines in the freight carrier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where the application, independently created by the developers of the IT department of Business Lines on the 1C: Enterprise platform, serves the full cycle of cargo transportation. </font><font style="vertical-align: inherit;">Our internal cluster load tests simulate the simultaneous operation of up to 20,000 users.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In conclusion, I would like to briefly list what else is useful in our cluster (the list is incomplete):</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> </a>,         . ,             ,   .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a> ‚Äì ,   ,   ,   (      ‚Äì <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   </a>  ..)      . ,   ,      (, )     ,   ERP, ,           ERP.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">  </a> ‚Äì ,     (,  ,    ..).  ,  ,    ,     ,   ,        .</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492994/index.html">What's New in TestMace Part 1. Cloud Sync, Updated Interface, and More</a></li>
<li><a href="../en492996/index.html">Marshaling and unmarshalling custom date formats in Go</a></li>
<li><a href="../en492998/index.html">How we got confused on freelancing for a data center and what came of it</a></li>
<li><a href="../en493000/index.html">Methods for dealing with legacy code using GitLab as an example</a></li>
<li><a href="../en493002/index.html">350 people remotely: how it was</a></li>
<li><a href="../en493010/index.html">How Quarkus Combines Imperative and Reactive Programming</a></li>
<li><a href="../en493012/index.html">Air, relays, cable out the window: how not to run into a monopolist provider in a business center</a></li>
<li><a href="../en493014/index.html">Interview with Vyacheslav Utochkin, Director of Game Development Educational Programs at the Higher School of Economics, Higher School of Economics, Higher School of Economics; 20 Questions about Game Dev</a></li>
<li><a href="../en493016/index.html">The heading "Read articles for you." January - February 2020</a></li>
<li><a href="../en493018/index.html">The developer appreciated the complexity of modern browsers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>