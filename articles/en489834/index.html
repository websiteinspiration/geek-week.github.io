<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õàÔ∏è üçï üßëüèº‚Äçü§ù‚Äçüßëüèº Embed your Smart Home device in the SmartThings ecosystem üëÇ üëäüèª üí¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Smart Home platforms allow you to integrate devices and create new scenarios for their interaction. The platform effect is known: users are more likel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Embed your Smart Home device in the SmartThings ecosystem</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/samsung/blog/489834/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smart Home platforms allow you to integrate devices and create new scenarios for their interaction. </font><font style="vertical-align: inherit;">The platform effect is known: users are more likely to choose the one with which their existing devices are compatible, rather than switch to any new one. </font><font style="vertical-align: inherit;">Therefore, it may be more profitable for developers of new ingenious devices to integrate into an already finished platform, focusing on the ‚Äúiron‚Äù product, rather than developing their own ‚Äúbicycles‚Äù in the form of cloud ecosystems and personal accounts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's see how to integrate your own device with the Samsung SmartThings Smart Home platform. </font><font style="vertical-align: inherit;">We are implementing a direct connection option for controlling the Smart Home device using the example of a button switch and a three-color light bulb.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<a name="habracut"></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why do we need Smart Home platforms?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now gadgets and smart devices are on sale - as much as you want. No problem buying a kettle with Bluetooth control or a light bulb with WiFi. But does this make your home ‚Äúsmart‚Äù? A situation is not uncommon: a light bulb is controlled only through a mobile application from the manufacturer. This creates inconvenience if you are trying to combine at least several different brands. Therefore, the ideal platform is one that allows you to manage devices of different manufacturers in the same way.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moreover, I would like to see a ‚Äúcomputer dissolved in everyday life‚Äù, as Mark Weiser from Xerox PARC dreamed about it: do not control through a special application, do not spray your focus of attention. I would like a natural interaction with a smart environment that does not change our habits. How to implement this technically? For example, it may be scenarios where heterogeneous devices in the house are involved: you woke up - the wearable device detected this and the kettle turned on; you came home - the sensor on the door recorded this, taking into account the time of day, the curtains closed, the lamp turned on, and the air conditioning turned on taking into account the temperature.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Scenarios become even more useful if we use the Internet: for example, to remotely check whether the outlet with the iron is turned off. </font><font style="vertical-align: inherit;">Or a banal example: your smart home looked at the weather forecast and gave you advice on how to dress best. </font><font style="vertical-align: inherit;">Or you can add voice control through a smart speaker. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Smart Home platform is designed for all of this. </font><font style="vertical-align: inherit;">Consider what the Samsung SmartThings platform can do.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Background - What are SmartThings?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SmartThings started as a startup. At the time when he appeared, in 2012 in the USA, the topic of ‚ÄúSmart Home‚Äù was not yet at the top of the hype, there were still no smart speakers and a variety of gadgets in stores. The idea came to the founder of the startup, Alex Hawkinson, after one incident: his family house in Colorado suffered from the fact that after a temporary outage of electricity, the water pipes froze, they burst, and the whole floor was flooded. Then he thought that he could have prevented the problem if he knew about what was happening in the house.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After unsuccessfully searching for a turnkey solution, Hawkinson and his colleagues made a prototype of the device and launched a campaign on Kickstarter. The campaign was over-successful, raising $ 1,200,000 instead of the planned $ 250,000 in 30 days. The sale of a hub hub with a small set of devices in the kit has begun: smart socket, door open sensor, motion sensor, presence sensor. And in 2019, already under the Samsung SmartThings brand, the third version of the hub was released. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/xk/vi/hexkviuwr8rq2bf7z84ft-akdnm.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The key to success on Kickstarter was the availability of working prototypes of iron and software, and friendliness to the maker community</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The creators of the startup have left the DIY environment, so they are consistently developing the concept of an open API for geek makers who can act as early adopters at an early stage. In the Kickstarter campaign, there was a shield for Arduino and various cloud modules to seamlessly connect your third-party device. On the Internet you can find many examples of home-made devices compatible with SmartThings, whether it is a controlled </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chicken coop door</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (with the solution of a serious life task - to save chickens from a predatory mink), or remote </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">installation of</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> an electronic lock code for guests with Airbnb. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/fd/tl/ctfdtl25yhvhmrnz2yufm_qwhfw.jpeg" width="500"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Photo source: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.hackster.io/aaronpk/auto-airbnb-entry-745799</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In 2012-2013, SmartThings went through several rounds of investing and received $ 12.5 million. </font><font style="vertical-align: inherit;">And finally, in 2014, she became interested in Samsung and was acquired for $ 200 million as part of a strategy to enter the Internet of Things market. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The platform‚Äôs cloud capabilities remained free: the authors, now Samsung employees, not excluding the theoretical possibility to charge for large volumes of traffic, emphasize: there will always be a free option for device developers. </font><font style="vertical-align: inherit;">This is good, because now almost all cloud services provide for monetization, and often even for a trial period you need to attach a bank card. </font><font style="vertical-align: inherit;">SmartThings is a completely free platform.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Architecture</font></font></h1><br>
<img src="https://habrastorage.org/webt/dm/gw/ir/dmgwirddjoqbh-1caazcx5kg-sc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's move the pattern from left to right.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Devices</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SmartThings Devices - this can be not only devices from </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the SmartThings suite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but also many third-party partners from the list of partners. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ut/j6/oq/utj6oqymmwwnqazkm_jekxgymwq.jpeg" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the device is not in the list of officially supported, you can search for the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Device Handler</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to it </font><font style="vertical-align: inherit;">- it can be provided by </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> developer </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">community</font></a><font style="vertical-align: inherit;"> - or write your own.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connection Methods</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can connect devices to the platform in the following ways:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hub-connected - through a hub hub, relevant for devices that do not have their Internet connection, but are connected via traditional wireless networks like ZigBee for such systems.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Directly-connected - via the Internet directly to the cloud. </font><font style="vertical-align: inherit;">SmartThings recently </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">released a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> camcorder, a light bulb and a smart socket, and they work without a hub - via WiFi. </font><font style="vertical-align: inherit;">This is the option we will implement in this guide.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud-connected - through a third-party cloud for those devices that already have their own cloud ecosystem. </font><font style="vertical-align: inherit;">This is more complicated, therefore we will not consider such an option.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hub</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Typically, to connect a variety of equipment in your home should be a special small server "Smart Home" that supports various protocols. </font><font style="vertical-align: inherit;">He - a hub, hub, gateway - the names are different. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/yy/_b/gxyy_bk9o6kvzdfzldagqw4lbb0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hub and a set of devices to it. </font><font style="vertical-align: inherit;">Photo source: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IXBT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SmartThings App is an application that can be installed on the main mobile OS and with its help: add new devices to the system, control already added ones, set automation rules, receive notifications via push and SMS, and much more.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ua/tu/-q/uatu-qhi_oijgiuumtopuqsjedk.png" width="400"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abstraction</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In SmartThings, as in many other smart home platforms, there are the following abstractions: rooms, scenes, scenarios.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devices are grouped into rooms. </font><font style="vertical-align: inherit;">You simply attach this or that gadget to one room in the application, and call it ‚ÄúKitchen‚Äù, ‚ÄúBathroom‚Äù, ‚ÄúHallway‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are still scenes (Scenes) - these are situations: ‚Äúsleep‚Äù, ‚Äúrest‚Äù, ‚Äúwork‚Äù, ‚Äúwatching a movie‚Äù - each of the situations is characterized by its own set of device states. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qt/vo/5o/qtvo5o8yo8thwuwhptupdthayjc.png" width="300"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scenes and rooms on the application screen</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And finally, scripts (Routines): if-then automation rules. By default, the program has four scenarios: ‚ÄúI am back‚Äù, ‚ÄúGood night‚Äù, ‚ÄúBye‚Äù, ‚ÄúGood morning‚Äù. You can configure activation of the script according to the condition of morning, or in the case of movement, or in the case of opening the door, and so on. A nontrivial example: when I enter home - block network traffic on my home surveillance camera to prevent the leakage of my personal videos. Or a cruel educational example: forcibly disconnect the tablet from the network when it is 11 o‚Äôclock in the evening to prevent yourself from sticking on the Internet instead of a healthy sleep.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/gp/qg/7jgpqgdehbjdzjtpmfnf7a2supc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moreover, in the SmartThings program on the phone there is an interesting opportunity - memorizing typical actions. When you often use the phone, over time, it starts to tell you how best to configure scenes based on the most frequently launched applications. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To add new devices to the system, a plug-in system is provided. The developer can program the plug-in for his own device - the user interface inside the SmartThings application and the logic of the device. This is essentially a web application. From the point of view of the developer, the plugin can subscribe to events or notifications from the device, send him a message, monitor the status of the connection with the device. There is clear </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> about the life cycle of the plugin.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
They are downloaded by the user from the "plug-in store" as necessary, so as not to inflate the application on the phone. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i7/6p/2ti76pkvardmqwv2efyxjh5nec4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But now we will not do any plug-ins, but we will make it simpler: we will add a home-made device using only standard platform tools.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Making your device compatible with SmartThings</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You may have a question: why? </font><font style="vertical-align: inherit;">What is the point of making it compatible if you are a device developer?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The main advantage is the increase in product value due to automatic integration with the entire ecosystem.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subject to passing the functional testing, you can paste the logo: ‚ÄúCompatible with SmartThings‚Äù on the product box, thereby guaranteeing trouble-free installation and configuration of the device in the SmartThings ecosystem.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As with any platform, your task is facilitated: you no longer need to try and develop, for example, a user interface - you can use the standard buttons and other elements of the SmartThings interface.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You get PR and audience of users thanks to the SmartThings community (it is lively and active).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the manual below, we will connect our own, fully custom device.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is proposed to do</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The SmartThings Device SDK (STDK) was recently presented at the Samsung Developer Conference in October 2019. Below we offer a translation of the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for this SDK. And not just a translation: we did the same thing and repeated it with our own hands, so there will be some practical comments that go beyond the original manual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How the final result will look like shown in the video:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Rvo6pbI2-0U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The RGB lamp is connected to the SmartThings platform via WiFi, and you control it through the phone. The lamp itself is implemented in the cheapest and easiest way - on the super popular ESP8266 chip. Iron is not important: it can be done on any microcontroller, because the SDK is written in C, laid out in the public domain and it can be ported if desired. The ESP is unlikely to go into production (for starters, it‚Äôs more convenient to use other interfaces in the Smart Home than WiFi), but it‚Äôs quite suitable for the model and illustration. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The functionality of the resulting ‚Äúsmart bulb‚Äù will be as follows: RGB-LED control using the color wheel on the phone. As well as turning it off and on using the button. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The development process is shown in the diagram:</font></font><br>
<img src="https://habrastorage.org/webt/ba/kb/_h/bakb_hunqhwmmaovm0jk2xrbqgk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The process shown is not hard, some of the steps can be reversed, which we will show in the manual.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iron</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The original manual shows everything on the example of the WeMos D1 Mini board, this is an ESP8266-based debug board that can be inserted into the breadboard. </font><font style="vertical-align: inherit;">In general, there is nothing tricky in it, it‚Äôs just a module of the Chinese ESP chip that is super popular among fans, soldered for convenience to a wider board in the size of the breadboard. </font><font style="vertical-align: inherit;">Therefore, you can do everything on any other board. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/lo/8t/rslo8ts8_gfmrhvrrnh-jb87yry.jpeg" width="200"> <img src="https://habrastorage.org/webt/bl/sg/mw/blsgmwf3onhbr9x9y4s9dxialiw.jpeg" width="200"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Left: WeMos D1, right - Troyka WiFi Shield</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soft</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What you need to build the example:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu Linux version no lower than 18.04 (you can build an example for both Windows and MacOS, but for definiteness we chose Linux)</font></font><br>
</li>
<li>  Android    1.7.39,  iOS    1.6.41-343.   Play Market  SmartThings,     Samsung Account.       Samsung,    .<br>
</li>
<li>ESP8266 SDK.  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>  ,   ,   :<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/espressif/ESP8266_RTOS_SDK.git</code></pre><br>
     SDK   IDF_PATH:<br>
<br>
<pre><code class="bash hljs">nano ~/.bashrc
<span class="hljs-built_in">export</span> IDF_PATH=<span class="hljs-string">"~/git/ESP8266_RTOS_SDK:<span class="hljs-variable">$IDF_PATH</span>"</span></code></pre></li>
<li>   :<br>
<br>
<pre><code class="bash hljs">sudo apt-get install gcc git wget make libncurses-dev flex bison gperf python python-pip python-setuptools python-serial python-cryptography python-future python-pyparsing python-pyelftools</code></pre><br>
   ():<br>
<br>
<pre><code class="bash hljs">sudo mkdir /opt/Espressif<font></font>
sudo chown username /opt/Espressif/<font></font>
<span class="hljs-built_in">cd</span> /opt/Espressif<font></font>
wget https://dl.espressif.com/dl/xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
tar -xzf ./xtensa-lx106-elf-linux64-1.22.0-100-ge567ec7-5.2.0.tar.gz<font></font>
<span class="hljs-built_in">cd</span> xtensa-lx106-elf
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"/opt/Espressif/xtensa-lx106-elf/bin:<span class="hljs-variable">$PATH</span>"</span></code></pre><br>
</li>
<li>Smart Things Device SDK C ‚Äì   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>  github,         ,     ,       .<br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/SmartThingsCommunity/st-device-sdk-c-ref.git
<span class="hljs-built_in">cd</span> st-device-sdk-c-ref<font></font>
./setup.sh esp8266</code></pre><br>
</li>
</ul><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The following devices will be considered as examples: smart switch and smart light bulb. </font><font style="vertical-align: inherit;">We will start with a smart switch, as simpler and not requiring any external peripherals.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 1. Register your device.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Work begins in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Developer Workspace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where you need to log in using your Samsung Account. </font><font style="vertical-align: inherit;">This account is created for free, and to create it is not necessary to have a Samsung phone.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rz/vc/tb/rzvctbgclnb7ug6rcxccoqsfe88.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Developer Workspace, you are immediately offered to create the first project. </font><font style="vertical-align: inherit;">We agree, after which Device Integration should be selected from the two project options. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/7z/0f/mh7z0fghp37p2_kfmlj4p3bjkvg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The choice will be given three options for integrating the device:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Cloud Connector - for connecting devices that have their own cloud that will be connected to the SmartThings cloud</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SmartThings Hub is not available for ZigBee, Z-Wave, Bluetooth devices, and at the time of writing, as the hub is not yet officially sold in Russia</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Directly Connected is the easiest option to connect directly, without any intermediaries.&nbsp;</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Choose the third option. </font><font style="vertical-align: inherit;">Think of a project name, for example, for simplicity - SmartSwitch. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/or/dg/5w/ordg5wpiqskc-9kyau_hjlquhaq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Add a device profile. </font><font style="vertical-align: inherit;">Speaking in terms of OOP, a device profile is such a ‚Äúclass‚Äù, and a specific device is a ‚Äúclass instance‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We need to determine the functional characteristics of the device in terms of SmartThings Capability. </font><font style="vertical-align: inherit;">You can </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">read</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> about the general ‚Äúcapabilities‚Äù of the device </font><font style="vertical-align: inherit;">in the manual.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gk/sx/wl/gksxwlnkswip3cxd21fngup5jc0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We fill in the fields with our values. </font><font style="vertical-align: inherit;">For example, the profile name can be entered Test Switch Profile, description - any text, device type - Switch, Vendor ID - any text. </font><font style="vertical-align: inherit;">‚ÄúDevice Type‚Äù affects the icon of your device and the user interface. </font><font style="vertical-align: inherit;">There are not many possible types of devices on the list (although there are exotic ones, for example WineCellar - a wine cabinet), so if you don‚Äôt find yours, don‚Äôt be discouraged and just choose the closest and closest one. </font><font style="vertical-align: inherit;">On the last screen (Dashboard Control) you can not change anything. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After creating the profile, do not forget to click on the ‚ÄúAdd device profile to project‚Äù button in the upper right.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/py/_m/ou/py_mouuxfu6aqpzsuhypzlwxhau.png"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Important: Health Check is required for all directly connected devices. </font><font style="vertical-align: inherit;">Add it to the device profile.&nbsp;</font></font><br>
</li>
<li>  ¬´ ¬ª   : Switch, Health Check.<br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now add the authentication profile (Onboarding profile). In short, in this profile you can customize the screens that appear when you first connect and login. Enter any name and any three-digit number. You can skip the other two screens for now. On the last screen, select the confirmation option - Button Confirm - by pressing the button on the device. In this manual, we assume that you got a board with a built-in button. If suddenly there is no button (for example, you are using another ESP module), you can choose the option without authentication at all - it is called Just Works, that is, it ‚Äújust works‚Äù without any questions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And again, by analogy with the previous example, do not forget to click the "Add device onboarding to project" button.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_4/8w/k1/_48wk1mewseukstfc4rbvdjx8qw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All that remains is to click the Deploy button. </font><font style="vertical-align: inherit;">After that, you can see your device in the SmartThings application - but only in Developer Mode. </font><font style="vertical-align: inherit;">If Deploy is not pushed, and they say ‚ÄúPlease add a Model Name‚Äù - this means that you did not specify a Device Onboarding ID, scroll down the page below and do it - enter any name of your choice. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/l1/cc/pr/l1ccprru9d4xx-2onzisikmuhlk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you can start testing your virtual device on your phone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The entire first step is shown in detail in the video:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/0KLJNC2nj5M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Register a device in the cloud</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before you start working with the actual hardware, you need to do something else. After pressing the Deploy button, the screen will look different: a new Device Identity field will appear there.&nbsp; </font></font><br>
<img src="https://habrastorage.org/webt/ow/hj/tk/owhjtkpdu8stli8nbv5hykchulo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To authenticate your device in the SmartThings cloud, you need to enter its serial number and public key (with ED25519 signature scheme). This is easy enough. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This example shows how to create a pair of ED25519 keys using a tool in the SDK. You will get the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">device_info.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">as the result of the program in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tools / keygen / linux / output_ {serialNumber} folder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Linux version of keygen is located in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-iot-device-sdk-c-reference / iot-core / tools / keygen / linux</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or in </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-device-sdk-c / tools / keygen / linux</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The serial number for the test device will be randomly generated in the STDK + [MNID] format + alphanumeric format (8 characters). </font><font style="vertical-align: inherit;">You can find your MNID in the developer profile in the Manage Account section.&nbsp;</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f6/6b/tq/f66btqfqggupzu83olz6lbaru6c.png" width="300"><br>
<br>
<img src="https://habrastorage.org/webt/qv/1k/p0/qv1kp0xha-it8b8xnyaa4hj2fe8.png" width="300"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, to generate the alphanumeric part, you need to enter your MNID (4 characters) as a keygen parameter. </font><font style="vertical-align: inherit;">In the example below, the MNID is fJ * c.</font></font><br>
<br>
<pre><code class="bash hljs">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in">cd</span> ~/Workspace/st-iot-device-sdk-c-ref/iot-core/tools/keygen<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;./stdk-keygen -m fJ*c<font></font>
&nbsp;&nbsp;&nbsp; Go Device Identity of Developer Workspace.<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Serial Number:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ STDKfJ*c&nbsp; &nbsp; ‚îÇ abed**5c   ‚îÇ<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;Public Key:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;waGgyjWIvHhF1LU***FG2hx/4u***ADFHr/ry0j5jbk=<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copy ‚Äúabed ** 5c‚Äù from the keygen issuance, and paste into the XXXXXXXX fields in the Device Identity Registration section. </font><font style="vertical-align: inherit;">A window will appear asking you to enter the public key. </font></font><br>
<img src="https://habrastorage.org/webt/wv/bd/ft/wvbdftti3tqz7qug9us-jphddq8.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copy the public key from the keygen issuance (‚ÄúwaGgyjWIvHhF1LU *** FG2hx / 4u *** ADFHr / ry0j5jbk =‚Äù in this example) and paste in the ‚ÄúDevice Public Key‚Äù field.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/wn/60/gxwn602ru15zwlvouhg68zo8918.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 2. Device firmware</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talk about the code that you will download to the device. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examples of firmware are located in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-device-sdk-c-ref / apps / esp8266 / folder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">We will be interested in the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_switch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> example </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the overview window of your device in the developer's office.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/o5/he/mn/o5hemnlglw1ak1cu134aqeka4sm.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Copy the downloaded </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onboarding_profile.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">to the directory of your application - in our case </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apps / esp8266 / st_switch / main</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/<font></font>
cp ~/Downloads/onboarding_profile.json .<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is already an example of such a file - just replace it with yours.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Similarly, copy the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">device_info.json</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file </font><font style="vertical-align: inherit;">from the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tools / keygen / linux / output_ {serialNumber} folder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , in which the device-specific information is located, to the same folder, replacing the existing file.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref/iot-core/tools/keygen/linux/<font></font>
cp output_{serialNumber}/device_info.json ~/Workspace/st-device-sdk-c-ref/apps/esp8266/st_switch/main/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this file, in addition to the keys and serial number, there is the line ‚ÄúfirmwareVersion‚Äù - it can be replaced with the version of your program.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now assemble and flash the program.</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch<font></font>
./build.sh esp8266 st_switch flash<font></font>
./build.sh esp8266 st_switch monitor</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Or the same, but shorter:</font></font><br>
<br>
<pre><code class="plaintext hljs">cd ~/Workspace/st-device-sdk-c-ref<font></font>
./build.sh esp8266 st_switch flash monitor</code></pre><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
! </font><font style="vertical-align: inherit;">If you can‚Äôt flash the program in any way - most likely, you forgot to put the ESP8266 board into programming mode. </font><font style="vertical-align: inherit;">This is usually done by pressing a button on the board itself. </font><font style="vertical-align: inherit;">For example, the Wi-Fi Troyka module can be translated by holding down the PROG button, and then pressing and releasing the RESET button. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After the firmware is downloaded, do not forget to restart the board.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 3. Connection and control from the phone</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Turn on developer mode in the SmartThings app on your phone. How to do this is </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">written</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on the official website, but it‚Äôs easier to explain in words: enter the settings through the ‚Äúgear‚Äù and press the ‚ÄúSmartThings Details‚Äù button for 20 seconds. The ‚ÄúDeveloper Mode‚Äù menu appears below. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/di/vs/hs/divshsyn6jnwbmaox3t_mkpaebe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Our device should be visible in the list in the SmartThings application: launch the application, click the plus button and Add device. Scroll to the end of the vendor list and see the ‚ÄúMy Testing Devices‚Äù icon. Click on it and select your device. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_o/ks/pa/_okspakmd1pndm_lh-xpbeehyw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Moreover: if you have already activated the developer mode and turned on the device, then you will have a pop-up menu offering to add this particular device! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The connection </font><i><font style="vertical-align: inherit;">starts</font></i><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8n/by/pd/8nbypdf-00xmksrlukpvetjlv2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manage the device from the SmartThings application.&nbsp;</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At first, the device appears as an access point, because it does not yet know the password for your WiFi. </font><font style="vertical-align: inherit;">During the connection process, you specify the network with which the device should connect. </font><font style="vertical-align: inherit;">If you have a hidden access point, then ESP will not be able to connect to it, so choose an open point. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The result will be this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/--/pw/ne/--pwnex-v3o9iewlsmw7xk-lps8.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this example ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st-switch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), you control the built-in LED on the board by pressing the button on the board itself. </font><font style="vertical-align: inherit;">As you can see, for this example you don‚Äôt even need any additional peripherals, only the ESP8266 board itself. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can also turn on / off the device with the button on the control panel in the mobile application: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/ze/-7/nzze-7ywppruvlqiafqpz4-xgew.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And of course, if you press the physical button, the status of the light bulb in the application is also updated.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Smart Light Example</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After you have done the Smart Switch example, let's try to complicate things a bit. </font><font style="vertical-align: inherit;">There will be an RGB LED, and we will turn on / off an external button, and also select a color through the application.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iron</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The connection scheme will be simple: </font></font><br>
<img src="https://habrastorage.org/webt/sv/xh/cf/svxhcfrv9zn7brswyuebeh_jd9o.png" width="500"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And the circuit diagram also does not hurt: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1z/gu/8v/1zgu8vamare3efr_qqtqt_s6bqa.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you look at the source (located at: st-device-sdk-c-ref / apps / esp8266 / st_lamp), then the connection there is the following: </font><font style="vertical-align: inherit;">
You can reassign the conclusions according to which it is the model of the board you have. </font><font style="vertical-align: inherit;">Please note that there is one notation system (D1, D2 ...) on the board, and another in the code, but this is easy to figure out just by looking at the documentation for your board.</font></font><br>
<br>
<code>#define GPIO_OUTPUT_NOTIFICATION_LED 2<br>
#define GPIO_INPUT_BUTTON 5<br>
#define GPIO_OUTPUT_COLORLED_R 16<br>
#define GPIO_OUTPUT_COLORLED_G 14<br>
#define GPIO_OUTPUT_COLORLED_B 12<br>
#define GPIO_OUTPUT_COLORLED_0 13&nbsp;</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Software part</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
According to the software part, we will change several steps:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When adding Capabilities, you must specify the following: Switch, Switch Level, Color Control, Health Check. </font><font style="vertical-align: inherit;">The type of device there will be - Light.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We take an example of firmware from the same folder with examples, it is called </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st_lamp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The interface in the application will </font></font><br>
<br>
<img src="https://habrastorage.org/webt/r9/qh/d_/r9qhd_lnaxlrnd5qcxonqzu2k70.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
look like </font><font style="vertical-align: inherit;">this: </font><font style="vertical-align: inherit;">How it looks in action - once again GIF:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cx/se/xy/cxsexydnzipoeqmkj3n7jq9x4iu.gif"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, you have a ready working example. </font><font style="vertical-align: inherit;">You see that most of the code has already been done for you - everything related to connection, authentication, device interface. </font><font style="vertical-align: inherit;">The SmartThings example is valuable in that it is not tied to any hardware device, and you can watch and evaluate what platform functionality is needed in 2k20 if you are developing a Smart Home. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g8/kt/h0/g8kth04siprq-9s2uwlli2fp6ae.jpeg" align="left"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tatyana Volkova - Author of the Samsung IT Academy‚Äôs Internet of Things track curriculum, specialist in corporate social responsibility programs at Samsung Research Center</font></font><br>
</i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489822/index.html">Generating pseudo-random numbers using a cellular automaton: Rule 30</a></li>
<li><a href="../en489824/index.html">7 open source cloud security monitoring tools worth knowing</a></li>
<li><a href="../en489826/index.html">About mutable methods of a Math object in JavaScript</a></li>
<li><a href="../en489828/index.html">Working with GeoJSON in Node.js: a practical introduction</a></li>
<li><a href="../en489832/index.html">Man-made atomic beads: manipulations with macrocycles</a></li>
<li><a href="../en489836/index.html">Lidars of the future: 11,000 lasers instead of 128</a></li>
<li><a href="../en489838/index.html">Nuxt Server-Side Memory Leak Using SSR (Server Side Rendering)</a></li>
<li><a href="../en489840/index.html">Drive Anatomy: Hard Drives</a></li>
<li><a href="../en489844/index.html">Comparative analysis of some Java decompilers</a></li>
<li><a href="../en489848/index.html">Why do my colleagues / employees behave like @% ¬ß?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>