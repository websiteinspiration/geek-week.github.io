<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé® ‚úåüèª üçõ Crie uma arquitetura escal√°vel e resiliente com microsservi√ßos din√¢micos ‚õ∏Ô∏è ü¶Å üìö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° de novo. Como voc√™ sabe, em mar√ßo, a OTUS lan√ßa um curso completamente novo sobre padr√µes de arquitetura e design . Antes do in√≠cio do curso, muit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Crie uma arquitetura escal√°vel e resiliente com microsservi√ßos din√¢micos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492642/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° de novo. </font><font style="vertical-align: inherit;">Como voc√™ sabe, em mar√ßo, a OTUS lan√ßa um curso completamente novo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre padr√µes de arquitetura e design</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Antes do in√≠cio do curso, muito material foi traduzido para voc√™ sobre como criar uma arquitetura escal√°vel e resiliente usando microsservi√ßos din√¢micos. </font><font style="vertical-align: inherit;">Gostar de ler!</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/aw/ws/kg/awwskgrciq1fkykr-snivzihfds.png"><br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anota√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das tend√™ncias mais importantes da arquitetura industrial √© o uso de microsservi√ßos em detrimento das arquiteturas monol√≠ticas que est√£o perdendo popularidade. </font><font style="vertical-align: inherit;">Gra√ßas √† arquitetura em nuvem, a implanta√ß√£o de sistemas de microsservi√ßo √© mais produtiva, flex√≠vel e econ√¥mica. </font><font style="vertical-align: inherit;">Seja como for, muitas empresas j√° come√ßaram a mudar de um tipo de arquitetura para outro, mas isso ainda est√° na sua inf√¢ncia. </font><font style="vertical-align: inherit;">Neste artigo, resolvemos problemas decorrentes da necessidade de desenvolver um sistema escal√°vel e tolerante a falhas com base em microsservi√ßos. </font><font style="vertical-align: inherit;">Em nossos experimentos, consideramos dois tipos de microsservi√ßos, simples e avan√ßados, e mostramos que a solu√ß√£o proposta √© inovadora com base em seu comportamento din√¢mico.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Introdu√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas √∫ltimas d√©cadas, a hist√≥ria das linguagens de programa√ß√£o e dos paradigmas da ci√™ncia da computa√ß√£o foi caracterizada pelo aumento da aten√ß√£o √† distribui√ß√£o e modulariza√ß√£o para melhorar a reutiliza√ß√£o e a confiabilidade do c√≥digo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Havia uma necessidade de aumentar a quantidade e a qualidade do software [1]. Um dos fatores principais para esclarecer as v√°rias diverg√™ncias associadas ao design inovador √© a adequa√ß√£o do uso de v√°rias ferramentas para o design e desenvolvimento de sistemas de software mais avan√ßados [2]. Um grande sucesso nesse processo foi recentemente demonstrado por sistemas baseados em microsservi√ßos [3], que s√£o um paradigma arquitet√¥nico focado em v√°rias aplica√ß√µes (por exemplo, para pessoas com defici√™ncia) [3]. Sob os ausp√≠cios dos microsservi√ßos, o interesse pela arquitetura e design est√° crescendo. Atributos de qualidade (por exemplo, escalabilidade, desempenho e toler√¢ncia a erros) ou sele√ß√£o de modelo, como "contrato de servi√ßo" [5] ou API Gateway,n√£o viola mais o princ√≠pio YAGNI (‚ÄúVoc√™ n√£o precisar√° dele‚Äù - ‚Äúsofre de erros de BDUF‚Äù (‚ÄúBig Design Up Front‚Äù - ‚ÄúDesign em larga escala primeiro‚Äù). A principal quest√£o de pesquisa que este artigo pretende responder √© como podemos desenvolver um sistema baseado em microsservi√ßos com a mesma simplicidade que um sistema monol√≠tico? Al√©m disso, a partir do t√≥pico anterior, como podemos criar um ambiente que forne√ßa uma distribui√ß√£o din√¢mica do poder de computa√ß√£o entre os clientes? Nossa hip√≥tese de pesquisa sugere o uso de uma arquitetura de sistema cliente-servidor que combina computa√ß√£o distribu√≠da e microsservi√ßos para resolver esses problemas.A principal quest√£o de pesquisa que este artigo pretende responder √© como podemos desenvolver um sistema baseado em microsservi√ßos com a mesma simplicidade que um sistema monol√≠tico? Al√©m disso, a partir do t√≥pico anterior, como podemos criar um ambiente que forne√ßa uma distribui√ß√£o din√¢mica do poder de computa√ß√£o entre os clientes? Nossa hip√≥tese de pesquisa sugere o uso de uma arquitetura de sistema cliente-servidor que combina computa√ß√£o distribu√≠da e microsservi√ßos para resolver esses problemas.A principal quest√£o de pesquisa que este artigo pretende responder √© como podemos desenvolver um sistema baseado em microsservi√ßos com a mesma simplicidade que um sistema monol√≠tico? Al√©m disso, a partir do t√≥pico anterior, como podemos criar um ambiente que forne√ßa uma distribui√ß√£o din√¢mica do poder de computa√ß√£o entre os clientes? Nossa hip√≥tese de pesquisa sugere o uso de uma arquitetura de sistema cliente-servidor que combina computa√ß√£o distribu√≠da e microsservi√ßos para resolver esses problemas.que fornece distribui√ß√£o din√¢mica do poder de computa√ß√£o entre clientes? Nossa hip√≥tese de pesquisa sugere o uso de uma arquitetura de sistema cliente-servidor que combina computa√ß√£o distribu√≠da e microsservi√ßos para resolver esses problemas.que fornece distribui√ß√£o din√¢mica do poder de computa√ß√£o entre clientes? Nossa hip√≥tese de pesquisa sugere o uso de uma arquitetura de sistema cliente-servidor que combina computa√ß√£o distribu√≠da e microsservi√ßos para resolver esses problemas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A estrutura do documento √© a seguinte: a se√ß√£o 2 fornece uma breve vis√£o geral da literatura atual, explicando a import√¢ncia dos microsservi√ßos, incluindo dois servi√ßos conhecidos oferecidos pelo Azure, e a se√ß√£o 3 discute a arquitetura proposta. </font><font style="vertical-align: inherit;">A se√ß√£o 4 discute a avalia√ß√£o deste sistema antes de tirar conclus√µes na √∫ltima se√ß√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Revis√£o de literatura de microsservi√ßos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas √† arquitetura em nuvem, a implanta√ß√£o de sistemas de microsservi√ßos √© mais produtiva, flex√≠vel e econ√¥mica [6]. No entanto, Zimmermann observa que os microsservi√ßos s√£o um t√≥pico sens√≠vel que est√° sendo estudado principalmente na academia [7] e na ind√∫stria. O termo ‚Äúmicrosservi√ßos‚Äù foi discutido pela primeira vez em um semin√°rio de arquitetos de software na It√°lia em maio de 2011 para descrever o que os participantes viam como um estilo arquitet√¥nico comum recentemente explorado por muitos deles. Um ano depois, o mesmo grupo confirmou que o termo "microsservi√ßos" √© o nome mais apropriado. De fato, os microsservi√ßos foram desenvolvidos como uma resposta a problemas em aplicativos monol√≠ticos ou arquiteturas orientadas a servi√ßos que complicam a escalabilidade, a complexidade e as depend√™ncias do aplicativo que est√° sendo desenvolvido,juntamente com o uso de mecanismos de comunica√ß√£o leves [8-9]. Como o mon√≥lito √© um aplicativo de software cujos m√≥dulos n√£o podem ser executados independentemente, devemos considerar uma solu√ß√£o baseada em microsservi√ßos, pois √© o √∫nico capaz de executar instru√ß√µes independentes entre si [10-11]. Mon√≥litos grandes tornam-se problem√°ticos para manter ao longo do tempo e s√£o dif√≠ceis de avaliar devido √† sua complexidade, mas a principal desvantagem √© que eles limitam a escalabilidade do produto. Outro problema √© que eles n√£o fornecem toler√¢ncia a falhas e n√£o permitem que um componente individual do sistema funcione quando outro componente n√£o funciona, o que √© poss√≠vel em arquiteturas orientadas a microsservi√ßos.Como o mon√≥lito √© um aplicativo de software cujos m√≥dulos n√£o podem ser executados independentemente, devemos considerar uma solu√ß√£o baseada em microsservi√ßos, pois √© o √∫nico capaz de executar instru√ß√µes independentes entre si [10-11]. Mon√≥litos grandes tornam-se problem√°ticos para manter ao longo do tempo e s√£o dif√≠ceis de avaliar devido √† sua complexidade, mas a principal desvantagem √© que eles limitam a escalabilidade do produto. Outro problema √© que eles n√£o fornecem toler√¢ncia a falhas e n√£o permitem que um componente individual do sistema funcione quando outro componente n√£o funciona, o que √© poss√≠vel em arquiteturas orientadas a microsservi√ßos.Como o mon√≥lito √© um aplicativo de software cujos m√≥dulos n√£o podem ser executados independentemente, devemos considerar uma solu√ß√£o baseada em microsservi√ßos, pois √© o √∫nico capaz de executar instru√ß√µes independentes entre si [10-11]. Mon√≥litos grandes tornam-se problem√°ticos para manter ao longo do tempo e s√£o dif√≠ceis de avaliar devido √† sua complexidade, mas a principal desvantagem √© que eles limitam a escalabilidade do produto. Outro problema √© que eles n√£o fornecem toler√¢ncia a falhas e n√£o permitem que um componente individual do sistema funcione quando outro componente n√£o funciona, o que √© poss√≠vel em arquiteturas orientadas a microsservi√ßos.capaz de executar instru√ß√µes independentes umas das outras [10-11]. Mon√≥litos grandes tornam-se problem√°ticos para manter ao longo do tempo e s√£o dif√≠ceis de avaliar devido √† sua complexidade, mas a principal desvantagem √© que eles limitam a escalabilidade do produto. Outro problema √© que eles n√£o fornecem toler√¢ncia a falhas e n√£o permitem que um componente individual do sistema funcione quando outro componente n√£o funciona, o que √© poss√≠vel em arquiteturas orientadas a microsservi√ßos.capaz de executar instru√ß√µes independentes umas das outras [10-11]. Mon√≥litos grandes tornam-se problem√°ticos para manter ao longo do tempo e s√£o dif√≠ceis de avaliar devido √† sua complexidade, mas a principal desvantagem √© que eles limitam a escalabilidade do produto. Outro problema √© que eles n√£o fornecem toler√¢ncia a falhas e n√£o permitem que um componente individual do sistema funcione quando outro componente n√£o funciona, o que √© poss√≠vel em arquiteturas orientadas a microsservi√ßos.e eles n√£o permitem que um componente individual do sistema funcione quando outro componente n√£o funciona, o que √© poss√≠vel em arquiteturas orientadas a microsservi√ßos.e eles n√£o permitem que um componente individual do sistema funcione quando outro componente n√£o funciona, o que √© poss√≠vel em arquiteturas orientadas a microsservi√ßos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na SOA (Service Oriented Architecture), os principais servi√ßos s√£o coordenados usando dois m√©todos: orquestra√ß√£o (onde existe um microsservi√ßo central que envia solicita√ß√µes a outros servi√ßos e controla todo o processo enviando e recebendo respostas) e coreografia (que n√£o envolve nenhuma centraliza√ß√£o, mas cada servi√ßo sabe com anteced√™ncia o que deve fazer) [1]. Como no caso de arquiteturas monol√≠ticas e arquiteturas SOA, o problema mais dif√≠cil continua sendo o particionamento do sistema em servi√ßos [12]. Al√©m disso, em nenhum caso voc√™ deve negligenciar a quest√£o de fornecer informa√ß√µes confidenciais atrav√©s da distribui√ß√£o descontrolada de servi√ßos [13].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossa arquitetura combina computa√ß√£o distribu√≠da com microsservi√ßos para criar um ambiente que permite a distribui√ß√£o din√¢mica da computa√ß√£o entre clientes. Por computa√ß√£o distribu√≠da, entendemos a disponibilidade de processar e armazenar grandes quantidades de dados na nuvem, que √© um elemento-chave na ind√∫stria moderna, dentro e fora do campo de TI. Os sistemas de armazenamento distribu√≠do s√£o projetados para atender aos requisitos de aplicativos distribu√≠dos e avan√ßados em termos de computa√ß√£o, com ampla aplicabilidade, escalabilidade e alto desempenho. Uma solu√ß√£o conhecida √© o MapReduce [14], que orquestra os c√°lculos classificando servidores distribu√≠dos, gerenciando simultaneamente v√°rias tarefas, todas as comunica√ß√µes e transfer√™ncia de dados entre partes do sistema,fornecendo redund√¢ncia e toler√¢ncia a falhas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Azure Batch √© outro modelo de programa√ß√£o usado para executar com efici√™ncia aplicativos computadorizados em modo paralelo ou em grande escala, sem configura√ß√£o manual ou gerenciamento de infraestrutura, com clusters mais poderosos de computa√ß√£o de alto desempenho (HPC - computa√ß√£o de alto desempenho) [15]. Para ilustrar essas id√©ias, lembremo-lo de SaaS (software como servi√ßo) ou aplicativos clientes que precisam de ampla execu√ß√£o [16]. De fato, v√°rias empresas de TI est√£o demonstrando um interesse crescente em SaaS, interessadas em reduzir suas despesas operacionais e, como resultado, em aumentar a flexibilidade de seus neg√≥cios [17]. Outro servi√ßo oferecido pelos principais provedores de servi√ßos em nuvem √© o Azure Functions,que permite o lan√ßamento sob demanda sem a necessidade de fornecimento ou gerenciamento expl√≠cito de infraestrutura [18].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m aumenta o interesse dos aplicativos no lan√ßamento f√°cil de pequenos peda√ßos de c√≥digo ou "fun√ß√µes" na nuvem. </font><font style="vertical-align: inherit;">O crescente interesse na Internet das Coisas (IoT) faz do Azure Functions [19] uma excelente solu√ß√£o para processamento de dados, integra√ß√£o de sistemas e cria√ß√£o de APIs e microsservi√ßos simples.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Metodologia</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema estruturalmente proposto pode ser dividido em 3 √°reas diferentes: (1) o cliente - que executar√° as tarefas atribu√≠das pelo servidor; (2) servidor - uma interface com um cliente, o c√©rebro das aplica√ß√µes monol√≠ticas; (3) uma √°rea de gerenciamento de comunica√ß√£o cliente-servidor que encapsula todos os detalhes associados √† transfer√™ncia de execu√ß√£o do servidor para o cliente. Todas as informa√ß√µes transmitidas pela rede entre o cliente e o servidor s√£o criptografadas usando o algoritmo DES (Data Encryption Standard), e a chave √© alterada usando o protocolo Diffie-Hellman [20], que, embora seja vulner√°vel sob certas condi√ß√µes, ainda implementado em uma variedade de solu√ß√µes de seguran√ßa da Internet. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1 Arquitetura do sistema</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso sistema √© fortemente baseado na arquitetura de sistemas din√¢micos de microsservi√ßos. A arquitetura toma como base o cliente-servidor, no qual o servidor corresponde a um n√∫mero maior de clientes. O servidor e o cliente executam microsservi√ßos da web, o protocolo de comunica√ß√£o √© HTTP, o formato de dados √© JSON. Essa arquitetura √© √∫til para distribuir e redistribuir dinamicamente recursos entre clientes. Esse modelo de arquitetura √© usado para criar aplicativos grandes, complexos e escalon√°veis ‚Äã‚Äãhorizontalmente, consistindo em processos pequenos, independentes e separados que interagem entre si usando a API [21].</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na fig. A Figura 1 mostra como um servidor distribui pacotes de funcionalidade para seus clientes. Dependendo do n√∫mero de clientes, pode haver instru√ß√µes que n√£o ser√£o atribu√≠das a nenhum cliente ou o mesmo conjunto de instru√ß√µes atribu√≠do a v√°rios clientes. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yd/-j/hk/yd-jhkvmw4m4mjb0lskder-k9bg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 1. Distribui√ß√£o de servi√ßos aos clientes.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A arquitetura do aplicativo foi criada usando a estrutura ASP.NET MVC da Microsoft. Na parte central, vemos os microsservi√ßos do servidor no pr√≥prio servidor e, √† esquerda e √† direita, h√° muitos clientes aguardando para iniciar tarefas do servidor. O componente de servi√ßo da orquestra√ß√£o fornece, por um lado, a comunica√ß√£o entre o servidor e os clientes, enviando tarefas aos clientes e, por outro lado, monitora o status dessas solicita√ß√µes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa arquitetura permite que um microsservi√ßo chame outro microsservi√ßo (assim obtemos um microsservi√ßo estendido (estendido)) ou chame um ao outro, o que pode levar √† depend√™ncia circular, o que deve ser evitado no n√≠vel do usu√°rio. </font><font style="vertical-align: inherit;">O protocolo de comunica√ß√£o cliente-servidor √© realizado nas seguintes etapas:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O cliente se conecta ao servidor e inicia um protocolo de troca de chaves. </font><font style="vertical-align: inherit;">Ele tamb√©m os fornecer√° ao servidor e porta √† qual eles corresponder√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O servidor notifica o cliente da pr√≥xima tarefa a ser executada (a tarefa √© representada por um par (microsservi√ßo, dados de entrada)).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O cliente recebe o trabalho e notifica o servidor de que a transfer√™ncia e o download foram conclu√≠dos com √™xito ou sem √™xito.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assim que a conex√£o entre os dois objetos √© estabelecida, o servidor envia os dados no formato JSON, criptografados usando DES, para o cliente para processamento.</font></font></li>
<li>      ( ,       )    JSON,    DES.</li>
<li>      ,         .</li>
<li>         ‚Äî            .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um caso especial dessa intera√ß√£o √© um cen√°rio em que um cliente executa uma tarefa para a qual o resultado de outro cliente √© necess√°rio. </font><font style="vertical-align: inherit;">Para este caso, foram avaliadas duas possibilidades existentes: orquestra√ß√£o e coreografia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No caso da coreografia, identificamos v√°rios obst√°culos: (a) uma lista de clientes dispon√≠veis para a execu√ß√£o de uma tarefa externa deveria ter sido enviada pelo servidor ao cliente, e a manuten√ß√£o dessa lista de valores atualizados geralmente resultar√° em maior carga na rede de troca de informa√ß√µes; </font><font style="vertical-align: inherit;">(b) a comunica√ß√£o entre os dois clientes era vulner√°vel a ataques. </font><font style="vertical-align: inherit;">Duas situa√ß√µes foram resolvidas atrav√©s da orquestra√ß√£o. </font><font style="vertical-align: inherit;">De fato, todo o cuidado de gerenciamento fica com o servidor, e os clientes s√£o apenas objetos simples e f√°ceis de trabalhar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a op√ß√£o de microsservi√ßos estendidos, as fases da intera√ß√£o cliente-cliente ser√£o as seguintes:</font></font><br>
<br>
<ol>
<li>          .    ,     .      ,     DES.</li>
<li>  , ,   .   ,    ,  ,    ,         .     ,     (  . .).</li>
<li>      ,       (   ),   ,        .</li>
<li>        .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O cliente descriptografa o resultado com uma senha descart√°vel e continua a execu√ß√£o.</font></font></li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2 </font><font style="vertical-align: inherit;">Aplicativo</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para testar e avaliar essa arquitetura, implementamos v√°rios microsservi√ßos que solicitamos para o que quer√≠amos verificar por vez. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_l/ye/uc/_lyeucntwjhoj0xlbenxz4nygjs.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">2. A interface </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No primeiro experimento, usamos 3 microsservi√ßos da seguinte maneira: (1) um microsservi√ßo que executa uma opera√ß√£o matem√°tica em dois n√∫meros (usando o LibraryMath), (2) um microsservi√ßo que nos informa se o n√∫mero √© positivo (MasterOfNumbers) e (3) um microsservi√ßo estendido, que chamar√° o primeiro microsservi√ßo quando receber dois n√∫meros e o resultado ser√° enviado ao segundo microsservi√ßo para extrair informa√ß√µes sobre esse n√∫mero (UniverseOfSuperMath).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Figura 2 mostra como obtemos c√°lculos matem√°ticos usando os microsservi√ßos apresentados. No n√≠vel da interface, apenas o resultado de uma opera√ß√£o matem√°tica √© exibido; o restante das informa√ß√µes pode ser visto como resultado do servidor receber uma chamada AJAX pressionando a tecla igual (ambos os resultados s√£o positivos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, consideraremos a principal funcionalidade do aplicativo, focada no que acontece quando h√° um, dois ou mais clientes conectados. Na Figura 3, vemos como, em nossos experimentos, lan√ßamos mais clientes no computador local, usando portas diferentes para cada um deles. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/94/nq/a9/94nqa9rzhinodyiixedizjaul8m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 3. A interface</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos 6 campos: ClientToken - um token exclusivo associado a cada cliente (quando a chamada √© local e tem valor de host local); Data - o momento em que a solicita√ß√£o foi feita; IP e porta = endere√ßo IP do cliente e a porta atrav√©s da qual a comunica√ß√£o √© feita; Fun√ß√£o - nome da fun√ß√£o chamada; √äxito - um sinalizador booleano que indica o sucesso da chamada. Por exemplo, percebemos que na primeira chamada (h: 8:38:21 o cliente n√£o est√° conectado ao servidor, o processo √© realizado pelo servidor). Na segunda chamada, observamos o comportamento din√¢mico do sistema, uma das tarefas executadas por um dos clientes e as outras duas executadas pelo servidor. Mais especificamente, √© chamado UniverserOfSuperMath (localmente - o cliente n√£o est√° dispon√≠vel para esta tarefa), que, por sua vez, chama dois outros microsservi√ßos, um local e outro atrav√©s de um cliente delegado para usar uma instru√ß√£o espec√≠fica etc.d.</font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toler√¢ncia a falhas</font></font></b></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Outra funcionalidade que eu levei em considera√ß√£o ao criar essa arquitetura estava relacionada √† toler√¢ncia a falhas do sistema. Com base no cen√°rio anterior, podemos observar o que acontece se um ou mais clientes optarem por deixar o sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na Figura 3, √† direita, a liga√ß√£o √†s 8:46 demonstra esse cen√°rio. Os clientes nas portas 8390 e 8827 t√™m um problema local ou de rede ou simplesmente fecham a conex√£o com o servidor, e o servidor n√£o recebe uma notifica√ß√£o a tempo de remov√™-los da lista. O servidor tentar√° entrar em contato com os clientes e executar comandos, mas se eles n√£o responderem em tempo h√°bil, o servidor assume suas tarefas e retorna o resultado solicitado. Para confirma√ß√£o, os clientes ser√£o solicitados novamente depois de um tempo e, se continuarem a n√£o responder, ser√£o removidos da lista de clientes dispon√≠veis. A pr√≥xima chamada (8:47) deixar√° de solicitar inutilmente clientes que n√£o est√£o mais dispon√≠veis e as tarefas ignoradas pelos clientes dispon√≠veis ser√£o executadas pelo servidor. </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vantagens e desvantagens da solu√ß√£o proposta</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As vantagens dessa arquitetura s√£o √≥bvias: baixos custos de hospedagem, microsservi√ßos oferecidos em uma rede distribu√≠da s√£o din√¢micos e escalon√°veis ‚Äã‚Äãautomaticamente (quando os clientes tamb√©m oferecem poder de computa√ß√£o √† medida que aumentam, o poder de computa√ß√£o do sistema aumenta).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As limita√ß√µes devem ser enfatizadas igualmente: quando a curva de poder de computa√ß√£o n√£o corresponde √† curva de poder do cliente. Tamb√©m temos uma restri√ß√£o na capacidade de executar este aplicativo em qualquer sistema operacional. Para fazer isso, decidimos converter uma solu√ß√£o acess√≠vel do .NET para Java. Mas esta solu√ß√£o tem algumas desvantagens em rela√ß√£o √† solu√ß√£o original (Java oferece menor velocidade de processamento de dados e menos transfer√™ncia din√¢mica de pacotes do que no .NET). No momento, estamos usando esta solu√ß√£o porque o .Net Core oferecido pela Microsoft para trabalhar em v√°rias plataformas ainda n√£o √© uma solu√ß√£o madura e n√£o oferece todas as fun√ß√µes da plataforma .NET padr√£o). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3 Componentes cliente-servidor </font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.1. Cliente</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nessa arquitetura, o cliente √© um aplicativo de desktop do Windows Presentation Foundation (WPF) projetado especificamente para se comunicar com o servidor e executar v√°rias tarefas recebidas dele. Como o aplicativo √© um arquivo execut√°vel que n√£o requer instala√ß√£o, o sistema operacional deve funcionar com o .Net Framework. Essencialmente, um microsservi√ßo da web ir√° interagir com outro microsservi√ßo da web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, o cliente inicia o agendador de tarefas em um encadeamento paralelo, que a cada minuto tenta notificar o servidor sobre sua presen√ßa. Uma tarefa pode assumir dois estados: (1) ou existe uma tarefa a ser executada (a inicializa√ß√£o do pacote de c√≥digos j√° foi conclu√≠da) - nesse caso, apenas notifica a presen√ßa do servidor; (2) ou requer inicializa√ß√£o com o servidor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A inicializa√ß√£o com o servidor inclui, em primeiro lugar, uma escolha arbitr√°ria de c√≥digo e porta que iniciar√° o servidor, que por sua vez s√£o enviados a ele usando o protocolo de troca de chaves Diffie-Hellman (IKE). Assim que a conex√£o entre os dois objetos for estabelecida, o servidor notificar√° o cliente com um pacote de instru√ß√µes para instala√ß√£o. A principal fun√ß√£o do cliente √© receber um pacote de instru√ß√µes do servidor, carreg√°-lo na mem√≥ria, processar as informa√ß√µes recebidas do servidor e retornar o resultado obtido executando este pacote de instru√ß√µes. A primeira etapa executada pelo cliente √© entrar em contato com o servidor para obter um pacote de instru√ß√µes. Este pacote de instru√ß√µes vem como um arquivo ZIP.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de extrair este pacote, exclua o diret√≥rio anterior com instru√ß√µes da pasta "processo" (se existir), extraia o novo conte√∫do para essa pasta e carregue-o na mem√≥ria. O carregamento da mem√≥ria come√ßa uma vez, independentemente de quantas chamadas o cliente recebe. Isso √© poss√≠vel porque tr√™s propriedades permanecem inalteradas na sess√£o: assembly, methodInfo e tipo. Assembly armazena um link para a DLL carregada, a propriedade methodInfo cont√©m o m√©todo chamado da DLL e type descreve o tipo da DLL. O arquivo install.zip √© um pacote de instru√ß√µes recebidas de um servidor que cont√©m DLLs, XML, imagens, arquivos de configura√ß√£o etc. e todo o c√≥digo compilado que ser√° executado em um processo futuro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta etapa marca o in√≠cio da comunica√ß√£o entre o cliente e o servidor para executar uma tarefa espec√≠fica. </font><font style="vertical-align: inherit;">Assim que o cliente for inicializado com √™xito para executar uma tarefa espec√≠fica, o servidor enviar√° apenas o pacote de dados no formato criptografado, que deve ser processado, e tamb√©m aguardar√° uma resposta no formato criptografado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao executar o c√≥digo recebido do servidor, o sistema est√° "bloqueado", o cliente pode se conectar aos bancos de dados, chamar outras APIs, em particular, chamar outros clientes que executam as mesmas instru√ß√µes ou diferentes. </font><font style="vertical-align: inherit;">A conex√£o √© feita no sistema de orquestra√ß√£o, onde o servidor procura o pr√≥ximo cliente dispon√≠vel, solicita o resultado e sua resposta √© redirecionada pelo servidor de volta ao cliente. </font><font style="vertical-align: inherit;">Essa orquestra√ß√£o de microsservi√ßo √© chamada de "ExtendedService", e a √∫nica diferen√ßa no n√≠vel do cliente √© que a criptografia √© otimizada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema t√©cnico era reinicializar o cliente com outro pacote de instru√ß√µes para executar. Como o carregamento de mem√≥ria √© est√°tico em um contexto especial (servidor da Web), isso s√≥ foi poss√≠vel reiniciando o processo inteiro para processar DLLs carregadas na mem√≥ria. Para fazer isso, criamos eventos no Windows que s√£o executados a partir de um aplicativo Web em execu√ß√£o em um aplicativo de desktop. Isso √© necess√°rio porque estamos lidando com dois contextos diferentes em dois segmentos diferentes de execu√ß√£o. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3.2 Servidor</font></font><br>
</i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O microsservi√ßo incorporado possui uma interface ILibraryMath, que fornece o m√©todo SimpleMath, e a interface √© implementada pela classe LibraryMath. A classe LibraryMath estende a classe abstrata universal MicroCore, que possui dois par√¢metros correspondentes para entrada e sa√≠da. Estendendo essa classe abstrata, o m√©todo ProcessTask deve ser implementado onde todo o c√≥digo a ser executado √© gravado e a fun√ß√£o Executar √© chamada na classe abstrata estendida para executar esse c√≥digo no m√©todo SimpleMath. Assim, √© poss√≠vel definir interfaces e m√©todos, n√£o limitados a qualquer nome espec√≠fico, mas, passando o c√≥digo por uma classe abstrata, obteremos controle total sobre o c√≥digo, que podemos distribuir entre diferentes clientes. Dentro desta classe, podemos facilmente ter mais fun√ß√µes e bibliotecas importadas,se eles estiverem agrupados em um pacote.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A pr√≥xima etapa √© gravar essa interface no SimpleInjector, uma biblioteca que facilita a implanta√ß√£o de um padr√£o de inje√ß√£o de depend√™ncia com componentes fracamente acoplados. Al√©m de registrar classes intercaladas no cont√™iner Simple Injector, para interromper a depend√™ncia entre os n√≠veis de aplicativo (introdu√ß√£o de depend√™ncias de modelo), precisamos registrar a classe no cont√™iner de armazenamento de microsservi√ßo, que ser√° dimensionado pelo aplicativo. Ap√≥s esta etapa, poderemos usar a fun√ß√£o fornecida pela interface para a finalidade criada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Service1 implementa o IService1 e estende a classe abstrata MicroCore e, em seguida, registra-se no MicroContainer.RegisterMicro neste cont√™iner. Vale mencionar a exist√™ncia de APIs dispon√≠veis em localohst / DynamicMicros / {Service} atrav√©s do qual os clientes se comunicam com o servidor. A√ß√µes importantes dispon√≠veis por meio dessas APIs: o cliente se conecta, o cliente notifica o servidor sobre sua atividade, os microsservi√ßos se expandem etc. A seguir, apresentamos as classes MicroCore e MicroContainer, que juntas formam a base do nosso aplicativo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A classe MicroCore √© uma classe abstrata e universal e √© respons√°vel por chamar o c√≥digo do m√©todo virtual ProcessTask. </font><font style="vertical-align: inherit;">Isso √© feito chamando o m√©todo Run, que por sua vez chama o m√©todo p√∫blico TaskManager. </font><font style="vertical-align: inherit;">Observe que o microsservi√ßo, por sua vez, tamb√©m chamar√° esse m√©todo. </font><font style="vertical-align: inherit;">Quando um pacote ZIP √© enviado ao cliente para carregar na mem√≥ria e execu√ß√£o, ele √© enviado com todas as suas depend√™ncias, incluindo esta classe, que √© usada para gerenciar o microsservi√ßo do cliente. </font><font style="vertical-align: inherit;">O controle de execu√ß√£o inclui desserializar / serializar o pacote de dados a enviar, chamar o pr√≥prio c√≥digo, chamar outras APIs e assim por </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
diante.Voltar ao lado do servidor, controlar a execu√ß√£o do c√≥digo consiste nas seguintes etapas:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se for uma chamada ExtendedService, o servidor ser√° chamado para atender.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se um cliente estiver dispon√≠vel para a solicita√ß√£o, ele ser√° enviado a ele para processar o resultado; </font><font style="vertical-align: inherit;">no caso negativo, o pr√≥prio servidor processar√° os dados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicitamos um cliente para processamento de dados. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se o cliente tiver problemas, solicitamos novamente a confirma√ß√£o da disponibilidade, mas enviamos uma resposta do servidor (para evitar tempo de inatividade e longos tempos de espera).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registramos a atividade atual.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A classe MicroContainer √© o espa√ßo de gerenciamento para todo o microssistema incorporado. </font><font style="vertical-align: inherit;">Aqui, os clientes que conectam o aplicativo (servidor) se conectam e h√° chamadas de fun√ß√£o que estendem a classe abstrata do MicroCore para "servi√ßos avan√ßados". </font><font style="vertical-align: inherit;">Essa √© uma classe est√°tica na qual a lista de tarefas executadas em microsservi√ßos, a lista de clientes conectados e a lista de tarefas do cliente que executam essas tarefas s√£o armazenadas no dicion√°rio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando iniciada, a classe ser√° registrada para integra√ß√£o no microsservi√ßo usando o RegisterMicro. Isso acontecer√° apenas uma vez durante a inicializa√ß√£o. O m√©todo AddNewClient nos fornece o registro de um novo cliente, troca de chaves, registro do endere√ßo IP do servidor e a porta na qual ele trabalhar√°. O token recebido pelo novo cliente ser√° verificado antes de ser inserido na lista de clientes para confirmar sua exclusividade. Depois que a conex√£o com o cliente √© estabelecida, o servidor chama o m√©todo InstallService, que empacota os dados, os envia e, depois que o cliente responder, ele ser√° adicionado ao dicion√°rio para esta tarefa. O tempo de servi√ßo que ser√° alocado para cada cliente depende da estrat√©gia usada. Quando voc√™ inicia o microsservi√ßo abstrato do MicroCore, chamado no servidor e no cliente (com ExtendedService),uma solicita√ß√£o √© feita para clientes dispon√≠veis para a tarefa solicitada usando a fun√ß√£o GetNextClient. Essa opera√ß√£o ser√° executada com muita frequ√™ncia e sua complexidade afetar√° diretamente o tempo de resposta do aplicativo. Por isso, nossa abordagem foi selecionar aleatoriamente um cliente. Isso √© feito rapidamente e a partir de nossas experi√™ncias garante uma distribui√ß√£o uniforme das chamadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra op√ß√£o foi implementar uma lista de round-robin - uma solu√ß√£o que tem a desvantagem de que, no caso de um grande fluxo de E / S de cliente, a atualiza√ß√£o da lista de round-robin exigir√° mais tempo e complexidade, o que tentamos evitar. O m√©todo RecordClientError √© chamado quando o cliente n√£o responde √† solicita√ß√£o recebida. Ap√≥s responder a essa pergunta, √© tomada a decis√£o de salvar ou excluir esse cliente.Os clientes s√£o identificados exclusivamente pelo c√≥digo do token enviado pelo cliente durante a inicializa√ß√£o e cada microsservi√ßo √© identificado por um espa√ßo para nome e nome da classe. Todos os recursos (clientes, c√≥digo) s√£o gerenciados atrav√©s desta unidade unit√°ria, que fornece suporte para as opera√ß√µes necess√°rias.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em rela√ß√£o √† seguran√ßa do sistema, foram tomadas medidas para evitar ataques, intercepta√ß√µes e prote√ß√£o de dados. Todas as mensagens enviadas entre o servidor e os clientes s√£o criptografadas usando o algoritmo de chave DES sim√©trica e a troca de chaves Diffie-Hellman entre o cliente e o servidor, o que ocorre durante a inicializa√ß√£o do cliente. Clientes dispon√≠veis e programas em execu√ß√£o s√£o armazenados na mem√≥ria do servidor. Escolhemos esta solu√ß√£o porque, em nossa opini√£o, era a melhor op√ß√£o, pois fornece acesso de alta velocidade aos dados, as informa√ß√µes podem mudar com muita frequ√™ncia e a √°rea de mem√≥ria √© muito dif√≠cil de atacar. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4 Comportamento din√¢mico de um sistema de microsservi√ßo</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro de tudo, todos os computadores nos quais os clientes trabalhar√£o podem estar na mesma ou em redes diferentes. Dois elementos s√£o priorit√°rios: (a) tempo gasto na transfer√™ncia de dados; e (b) a sobrecarga adicionada pelo sistema para gerenciamento de dados (por exemplo, pesquisa de clientes, criptografia, descriptografia, tratamento de erros, etc.). Est√°vamos interessados ‚Äã‚Äãprincipalmente no comportamento do nosso sistema em redes locais (LAN) e globais (WAN) (Fig. 4). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1p/lc/fe/1plcfehcmqd4zkcgmuuuvd07cgq.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 4. Registro do sistema que trabalha em uma rede local (a primeira coluna de logs) e global (a segunda coluna de logs).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A coluna Nome da tarefa cont√©m todos os registros feitos pela chamada do cliente para cada tarefa, e as colunas Logs s√£o as horas e a dura√ß√£o em ms para cada processamento de tarefa (√† esquerda na rede local e √† direita na rede global). Observe que as tarefas t√™m o tempo de resposta mais longo para a primeira chamada, ap√≥s o que diminui. Naturalmente, porque todos os downloads de mem√≥ria, endere√ßos salvos etc. geralmente s√£o feitos na primeira chamada. As tr√™s primeiras tarefas s√£o opera√ß√µes matem√°ticas simples que geralmente s√£o executadas em milissegundos - o tempo tamb√©m necess√°rio para o nosso sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para uma rede local, temos uma m√©dia de 20 a 30 milissegundos por tarefa, proveniente de criptografia, registro e transmiss√£o pela rede (mesmo que seja local). Esse modelo de comunica√ß√£o LAN tamb√©m √© usado na nuvem, onde os computadores est√£o localizados no mesmo local (data center) e a comunica√ß√£o entre eles √© via fibra √≥tica, o atraso da rede √© m√≠nimo. Os resultados s√£o mostrados na figura. 4 na coluna esquerda de logs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para testar nosso aplicativo WAN, configuramos o roteador para rotear uma chamada da porta 80 para:</font></font><code>http://192.168.1.160/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(endere√ßo de rede) e IIS (Internet Information Services) iniciaram o aplicativo, que estava acess√≠vel de qualquer lugar fora da rede local. </font><font style="vertical-align: inherit;">Para executar o aplicativo no n√≠vel do cliente, era necess√°rio o direito de usar as portas 8000: 9000 (portas arbitr√°rias). </font><font style="vertical-align: inherit;">Os clientes est√£o dispostos em pontos arbitr√°rios, conex√£o com o IP p√∫blico foi apurado atrav√©s de API: </font></font><code>https://api.ipify.org/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Os resultados s√£o mostrados na figura. </font><font style="vertical-align: inherit;">4 na coluna de log √† direita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos resultados apresentados na fig. </font><font style="vertical-align: inherit;">4, os valores na coluna direita da revista s√£o 16 a 17% mais altos que os valores na coluna esquerda da revista para as tr√™s primeiras tarefas (sem comunica√ß√£o com outros microsservi√ßos) e ¬± 10% para microsservi√ßos que baixaram documentos da Internet ou interagiram com um banco de dados no servidor espec√≠fico.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Avalia√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste estudo, monitoramos o comportamento do sistema na rede local (conectando 5 computadores via rede sem fio) e na rede global (usando o espa√ßo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nome </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">mihaidm.ddns.net</font></a><font style="vertical-align: inherit;"> ), comparando nosso sistema com um sistema monol√≠tico, essas opera√ß√µes s√£o executadas da mesma maneira computador (consulte a tabela 1). </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela 1. Classifica√ß√£o do sistema para redes.</font></font></i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√°lculo (ms)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gravar no banco de dados (ms)</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gera√ß√£o de pdf (ms)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4,458</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15,449</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lan</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4,408</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16,415</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wan</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.826</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">29,309</font></font></td>
</tr>
</tbody></table></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O teste foi realizado sequencialmente em um dispositivo com 5 clientes conectados para teste de rede. </font><font style="vertical-align: inherit;">Cada tarefa foi conclu√≠da 100 vezes, avaliando o n√∫mero total de milissegundos em todas as chamadas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Era um produto de dois n√∫meros como c√°lculo num√©rico. Um microsservi√ßo n√£o interage com outros microsservi√ßos, a quantidade de informa√ß√µes transmitidas pela rede √© pequena e a complexidade √© minimizada para estudar estritamente o tempo gasto nas tarefas de gerenciamento de servidor, cliente e rede. Se o c√°lculo for realizado pelo servidor (host local), primeiro ser√° verificado se h√° um cliente dispon√≠vel e, como o cliente n√£o est√° conectado, o servidor processar√° o resultado. No caso a seguir, a presen√ßa de clientes na rede local mostra a conclus√£o da tarefa em condi√ß√µes de opera√ß√£o de rede muito r√°pida e, do lado do processamento, criptografia / descriptografia, encontrando a resposta do cliente. Para 100 execu√ß√µes, o tempo m√©dio necess√°rio para concluir a opera√ß√£o foi de 25 ms, valor promissor considerando a raz√£o flexibilidade / velocidade. No caso de WAN, o tempo √© duas vezes maiordo que na rede local (54 ms), isso se deve ao processo de criptografia, aos custos de transporte, mas para a execu√ß√£o real requer meio milissegundo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra tarefa que investigamos est√° gravando no banco de dados. Em particular, a palavra que ser√° gravada no banco de dados √© usada como par√¢metro. Estamos interessados ‚Äã‚Äãna rapidez com que o cliente contatar√° um banco de dados localizado fora da √°rea local (para este estudo, o banco de dados foi localizado em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.my.gearhost.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Observe que os valores de tempo de execu√ß√£o na LAN e no host local est√£o pr√≥ximos. Na rede global, a diferen√ßa √© not√°vel, porque o processamento, o gerenciamento de dados e clientes n√£o leva tanto tempo quanto o intervalo de clientes que se conecta ao banco de dados para inserir o valor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √∫ltima tarefa realizada neste estudo foi a cria√ß√£o de um arquivo PDF, nosso foco foi estimar o tempo de transmiss√£o dos dados no sistema. </font><font style="vertical-align: inherit;">Para fazer isso, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">baixamos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o arquivo PDF em </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">www.pdf-archive.com/2018/05/14/diploma/diploma.pdf</font></a><font style="vertical-align: inherit;"> , carregado na mem√≥ria. </font><font style="vertical-align: inherit;">O sistema gravar√° o nome em uma posi√ß√£o espec√≠fica e retornar√° o resultado (na forma de vetores de bytes) de volta ao servidor. </font><font style="vertical-align: inherit;">Para um host local e uma rede local, uma diferen√ßa de cerca de 1000 ms representa o tempo necess√°rio para criptografar e transferir arquivos PDF localmente. </font><font style="vertical-align: inherit;">Para a WAN, o valor resultante √© maior porque o custo de transmiss√£o do vetor de bytes √© muito alto.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Conclus√µes e trabalhos futuros</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A natureza geral e abstrata da arquitetura do sistema, apresentada neste trabalho no lado do servidor, dificultou o design, uma vez que o mesmo c√≥digo √© executado pelo servidor e pelo cliente. Podemos argumentar que a arquitetura atual √© compacta, simples, f√°cil de entender e expandir; o cliente pode executar as tarefas atribu√≠das pelo servidor, o servidor √© um mon√≥lito e a interface do cliente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A arquitetura proposta facilita muito a cria√ß√£o de novos microsservi√ßos, que s√£o automaticamente integrados ao sistema incorporado. Elementos inovadores dessa arquitetura: ele pode ser dimensionado com muita facilidade, cada novo cliente recebe uma tarefa do servidor de acordo com a estrat√©gia seguida (as tarefas mais caras, as mais comuns, uma combina√ß√£o das duas listadas anteriormente ou puramente apenas uma estrat√©gia arbitr√°ria). De fato, temos um mon√≥lito com a flexibilidade de um sistema de microsservi√ßo. O servidor processa a distribui√ß√£o din√¢mica de tarefas entre clientes, fornecendo escala din√¢mica com base em v√°rios par√¢metros (o n√∫mero de chamadas para a tarefa, seu tempo de execu√ß√£o ou uma combina√ß√£o deles).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma das dire√ß√µes futuras leva em considera√ß√£o que esse sistema pode ser integrado com sucesso a um site ou sistema de API com um car√°ter aplicativo pronunciado. </font><font style="vertical-align: inherit;">A arquitetura proposta pode ser aprimorada e expandida a qualquer momento devido √† disponibilidade para v√°rias plataformas (por exemplo, para telefones celulares). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra dire√ß√£o no futuro que estamos considerando √© considerada extremamente atraente hoje - √© que o usu√°rio fornece poder de computa√ß√£o em troca de uma taxa (por exemplo, o sistema BITCOIN), nosso aplicativo √© desenvolvido para executar microsservi√ßos em determinados computadores.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link de origem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este estudo foi publicado com o apoio do programa POC-A1-A1.2.3-G-2015, como parte do projeto PrivateSky (P_40_371 / 13/01/01/2016) e do projeto README ‚ÄúAplicativo interativo e inovador para avaliar a legibilidade dos textos em romeno e melhorar a utiliza√ß√£o do usu√°rio estilos de escrita ‚Äù, contrato n¬∫ </font><font style="vertical-align: inherit;">114 / 09.15.2017, c√≥digo MySMIS 2014 119286.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Refer√™ncias</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[1] Dragoni, N., Giallorenzo, S., Lluch-Lafuente, AL, Mazzara, M., Montesi, F., Mustafin, R. (2017a) "Microsservi√ßos: ontem, hoje e amanh√£". Mazzara M., Meyer B. (orgs.), Present and Ulterior Software Engineering. Springer </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[2] Mazzara, M., Khanda, K., Mustafin, R., Rivera, V., Safina, L. e Silitti, A. (2018), ‚ÄúMicroservices Science and Engineering‚Äù. Em: P. Ciancarini, S. Litvinov, A. Messina, A., Sillitti, G. Succi (eds.) Anais da 5¬™ Confer√™ncia Internacional em Engenharia de Software para Aplica√ß√µes de Defesa, SEDA 2016, Springer, 10-20.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[3] Dragoni, N., Lanese, I., Larsen, ST, Mazzara, M., Mustafin, R. e Safina, L. (2017b), ‚ÄúMicrosservi√ßos: Como fazer sua aplica√ß√£o escalar‚Äù. In: Petrenko A., Voronkov A. (eds.) Perspectives of System Informatics. PSI 2017. Notas de aula em Ci√™ncia da Computa√ß√£o, 10742. Springer, Cham. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[4] Melis, A., Mirri, S., Prandi, C., Prandini, M., Salomoni, P. e Callegati, F. (2016) ‚ÄúUm caso de uso de arquitetura de microsservi√ßo para pessoas com defici√™ncia‚Äù. Na 2¬™ Confer√™ncia Internacional da EAI sobre Objetos Inteligentes e Tecnologias para o Bem Social, DOI: 10.1007 / 978-3-319-61949-1_5. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[5] Zimmermann, O. (2017) "Princ√≠pios de microsservi√ßos: abordagem √°gil para desenvolvimento e implanta√ß√£o de servi√ßos, Ci√™ncia da computa√ß√£o - pesquisa e desenvolvimento", 32 (3-4): 301-310.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[6] Xia, C., Zhang, Y., Wang, L, Coleman, S. e Liu, Y. (2018) "Sistema de rob√≥tica em nuvem baseado em microsservi√ßos para espa√ßo inteligente". In: Rob√≥tica e Sistemas Aut√¥nomos 110, DOI: 10.1016 / j.robot.2018.10.001. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[7] Bogner, J., Fritzsch, J., Wagner, S. e Zimmermann, A. (2019) ‚ÄúMicrosservi√ßos na ind√∫stria: insights sobre tecnologias, caracter√≠sticas e qualidade de software‚Äù. Na Confer√™ncia Internacional IEEE de 2019 sobre Workshops de Arquitetura de Software (ICSAW), em: Hamburgo, Alemanha. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[8] Akentev, E., Tchitchigin, A., Safina, L. e Mzzara, M. (2017) ‚ÄúVerificador de tipo verificado para a linguagem de programa√ß√£o Jolie‚Äù, https: // arXiv.org/pdf/1703.05186.pdf.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[9] ƒåern√Ω, T., Donahoo, MJ e Trnka, M. (2018) ‚ÄúEntendimento contextual da arquitetura de microsservi√ßos: dire√ß√µes atuais e futuras‚Äù. ACM SIGAPP Applied Computing Review 17 (4): 29-45, DOI: 10.1145 / 3183628.3183631. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[10] Larucces, X., Santamaria, I., Colomo-Palacios, R. e Ebert, C. (2018) "Microservices". In: Software IEEE, 35/3: 96-100. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[11] Kalske, M. (2017) ‚ÄúTransformando a arquitetura monol√≠tica em arquitetura de microsservi√ßos‚Äù. M.Sc. Tese, Univ. de Helsinque. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[12] Lenarduzzi, V. e Taibi, D. (2016) ‚ÄúMVP Explained: Um estudo de mapeamento sistem√°tico das defini√ß√µes de produto vi√°vel m√≠nimo‚Äù. Na 42¬™ Confer√™ncia Euromicro sobre Engenharia de Software e Aplicativos Avan√ßados (SEAA), 112-119.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[13] Taibi, D., Lenarduzzi, V., Janes, A., Liukkunen, K. e Ahmad, MO (2017) ‚ÄúComparando a decomposi√ß√£o de requisitos dentro dos processos de desenvolvimento Scrum, Scrum com Kanban, XP e Banana‚Äù. Em: Baumeister H., Lichter H., Riebisch M. (eds.) Processos √°geis em engenharia de software e programa√ß√£o extrema. Notas da Palestra em Processamento de Informa√ß√µes de Neg√≥cios, 283. Springer, Cham. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[14] G√≥mez, A., Benelallam, A. e Tisi, M. (2015) "Persist√™ncia de modelo descentralizado para computa√ß√£o distribu√≠da". No terceiro workshop do BigMDE, L'Aquila, It√°lia. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[15] Kandave, KR (2018) ‚ÄúComputa√ß√£o de alto desempenho no Azure‚Äù. Nanette Ray (ed.), AzureCAT, Microsoft Corporation.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[16] Sreenivas, V., SriHarsha, S. e Narasimham, C. (2012) "Um modelo de nuvem para implementar SaaS". In: Advanced Materials Research 341-342, Trans Tech Publications, Su√≠√ßa, 499-503. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[17] Badidi, E. (2013) "Uma estrutura para sele√ß√£o e provisionamento de software como servi√ßo". In: International Journal of Computer Networks &amp; Communications (IJCNC), 5 (3): 189-200. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[18] Lynn, T., Rosati, P., Lejeune, A. e Emeakaroha, V. (2017) ‚ÄúUma revis√£o preliminar das plataformas de computa√ß√£o em nuvem sem servidor corporativo (Functionas-a-Service)‚Äù. Na 9¬™ Confer√™ncia Internacional IEEE 2017 sobre Tecnologia e Ci√™ncia da Computa√ß√£o em Nuvem, 162-169. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[19] Adzic, G. e Chatley, R. (2017) "Computa√ß√£o sem servidor: impacto econ√¥mico e arquitetural". Em: ESEC / FSE'17, de 4 a 8 de setembro de 2017, Paderborn, Alemanha, ACM.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[20] Diffie, W. e Hellman, M. (1976) "Novas dire√ß√µes em criptografia". </font><font style="vertical-align: inherit;">In: Transa√ß√µes IEEE, Teoria da Informa√ß√£o, 22 (6): 644‚Äì654. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[21] Kratzke, N. (2015) ‚ÄúSobre microsservi√ßos, cont√™ineres e seu impacto subestimado no desempenho da rede‚Äù. </font><font style="vertical-align: inherit;">No CLOUD Comput. </font><font style="vertical-align: inherit;">2015, 180 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arxiv.org/abs/1710.04049</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saiba mais sobre o curso</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt492616/index.html">Packer, Terraform e Ansible: implanta√ß√£o do cluster Kubernetes em uma hora</a></li>
<li><a href="../pt492628/index.html">Intervalo de confian√ßa para o n√∫mero de pacientes com coronav√≠rus (c√°lculo da mortalidade)</a></li>
<li><a href="../pt492632/index.html">Pequenas empresas em quarentena: o p√¢nico √© o inimigo da raz√£o</a></li>
<li><a href="../pt492636/index.html">O que significa ser eficaz?</a></li>
<li><a href="../pt492638/index.html">Escalando um aplicativo Redux com patos</a></li>
<li><a href="../pt492652/index.html">Jogo de cartas "Tolo" em dois M5Stack</a></li>
<li><a href="../pt492658/index.html">Eu fui a um controle remoto - lancei um podcast: o que ler para iniciantes - 5 livros comprovados</a></li>
<li><a href="../pt492660/index.html">O mundo inteiro contra o coronav√≠rus. Hist√≥rias da Intel</a></li>
<li><a href="../pt492662/index.html">Como eu transmiti pela primeira vez uma palestra universit√°ria</a></li>
<li><a href="../pt492666/index.html">Maltego Parte 4. VK, Instagram, LinkedIN e outras criaturas fant√°sticas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>