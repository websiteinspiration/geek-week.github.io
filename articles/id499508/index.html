<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧝🏿 ♌️ 🛀🏼 Membuat produk kami siap untuk disesuaikan dengan antrian Laravel 👶🏼 🤰🏽 🤾🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Terjemahan artikel disiapkan khusus untuk siswa kursus "Framework Laravel" .
 
 
 
 Hai, saya Valerio, seorang insinyur perangkat lunak dari Italia. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Membuat produk kami siap untuk disesuaikan dengan antrian Laravel</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/499508/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terjemahan artikel disiapkan khusus untuk siswa kursus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Framework Laravel"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/ei/7u/aq/ei7uaq5c5omdkojxhmurjggkqw4.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hai, saya Valerio, seorang insinyur perangkat lunak dari Italia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Panduan ini ditujukan untuk semua pengembang PHP yang sudah memiliki aplikasi online dengan pengguna sungguhan, tetapi yang tidak memiliki pemahaman yang lebih dalam tentang bagaimana menerapkan (atau secara signifikan meningkatkan) skalabilitas dalam sistem mereka menggunakan antrian Laravel. Saya pertama kali belajar tentang Laravel pada akhir 2013 di awal versi ke 5 dari framework. Kemudian saya belum menjadi pengembang yang terlibat dalam proyek-proyek serius, dan salah satu aspek kerangka kerja modern, terutama di Laravel, yang bagi saya tampaknya paling tidak bisa dipahami, adalah Antrian.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Membaca dokumentasi, saya menebak tentang potensi, tetapi tanpa pengalaman pengembangan nyata, semua ini hanya tinggal pada tingkat teori di kepala saya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hari ini, saya pencipta </font></font><code>Inspector.dev</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dasbor waktu nyata</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang melakukan ribuan tugas setiap jam, dan saya memahami arsitektur ini jauh lebih baik dari sebelumnya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ey/rx/qu/eyrxquvk3yrmu5kldbmpuit5riu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel ini saya akan memberi tahu Anda bagaimana saya menemukan antrian dan tugas dan konfigurasi apa yang membantu saya memproses sejumlah besar data secara real time, sambil menghemat sumber daya server.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika aplikasi PHP menerima permintaan http yang masuk, kode kami dijalankan secara berurutan langkah demi langkah sampai permintaan selesai dan respons dikembalikan ke klien (misalnya, browser pengguna). Perilaku sinkron ini benar-benar intuitif, dapat diprediksi, dan mudah dimengerti. Saya mengirim permintaan http ke titik akhir, aplikasi mengekstrak data dari database, mengubahnya ke format yang sesuai, melakukan beberapa tugas tambahan dan mengirimkannya kembali. Semuanya terjadi secara linear. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas dan antrian memperkenalkan perilaku asinkron yang melanggar aliran garis ini. Itu sebabnya fitur-fitur ini tampak agak aneh bagi saya pada awalnya.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi kadang-kadang permintaan http yang masuk dapat memicu siklus tugas yang memakan waktu, misalnya, mengirim pemberitahuan email ke semua anggota tim. </font><font style="vertical-align: inherit;">Ini mungkin berarti mengirim enam atau sepuluh email, yang mungkin memakan waktu empat atau lima detik. </font><font style="vertical-align: inherit;">Oleh karena itu, setiap kali pengguna mengklik tombol yang sesuai, ia harus menunggu lima detik sebelum dapat terus menggunakan aplikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semakin banyak aplikasi tumbuh, semakin buruk masalah ini.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa itu tugas?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pekerjaan adalah kelas yang mengimplementasikan metode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pegangan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang berisi logika yang ingin kita jalankan secara tidak sinkron.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Contracts</span>\<span class="hljs-title">Queue</span>\<span class="hljs-title">ShouldQueue</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Foundation</span>\<span class="hljs-title">Bus</span>\<span class="hljs-title">Dispatchable</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Queue</span>\<span class="hljs-title">InteractsWithQueue</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Bus</span>\<span class="hljs-title">Queueable</span>;<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CallExternalAPI</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ShouldQueue</span>
</span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">Dispatchable</span>,
        <span class="hljs-title">InteractsWithQueue</span>,
        <span class="hljs-title">Queueable</span>;<font></font>
        <font></font>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> string
     */</span>
    <span class="hljs-keyword">protected</span> $url;<font></font>
<font></font>
    <span class="hljs-comment">/**
     *    .
     *
     * <span class="hljs-doctag">@param</span> array $Data
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">$url</span>)
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;url = $url;<font></font>
    }<font></font>
    <font></font>
<font></font>
    <span class="hljs-comment">/**
     *  ,   .
     *
     * <span class="hljs-doctag">@return</span> void
     * <span class="hljs-doctag">@throws</span> \Throwable
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handle</span>(<span class="hljs-params"></span>)
    </span>{<font></font>
        file_get_contents(<span class="hljs-keyword">$this</span>-&gt;url);<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti disebutkan di atas, alasan utama untuk menyimpulkan sepotong kode dalam Pekerjaan adalah untuk menyelesaikan tugas yang memakan waktu, tanpa memaksa pengguna untuk menunggu untuk menyelesaikannya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang kita maksudkan dengan “tugas yang melelahkan”?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini pertanyaan alami. </font><font style="vertical-align: inherit;">Mengirim email adalah contoh paling umum yang digunakan dalam artikel yang berbicara tentang antrian, tetapi saya ingin memberi tahu Anda tentang pengalaman nyata dari apa yang perlu saya lakukan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai pemilik produk, sangat penting bagi saya untuk menyinkronkan informasi perjalanan pengguna dengan alat pemasaran dan dukungan pelanggan kami. </font><font style="vertical-align: inherit;">Dengan demikian, berdasarkan tindakan pengguna, kami memperbarui informasi pengguna di berbagai perangkat lunak eksternal melalui API (atau panggilan http eksternal) untuk tujuan layanan dan pemasaran.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu titik akhir yang paling umum digunakan dalam aplikasi saya dapat mengirim 10 email dan membuat 3 panggilan http ke layanan eksternal sebelum selesai. </font><font style="vertical-align: inherit;">Tidak ada pengguna yang akan menunggu begitu lama - kemungkinan besar, mereka semua berhenti menggunakan aplikasi saya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berkat antriannya, saya dapat merangkum semua tugas ini di kelas yang dialokasikan, mentransfer informasi yang diperlukan untuk pelaksanaan pekerjaan mereka ke konstruktor, dan menjadwalkannya untuk diselesaikan di kemudian hari di latar belakang sehingga pengontrol saya dapat segera mengembalikan jawabannya.</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProjectController</span> 
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">store</span>(<span class="hljs-params">Request $request</span>)
    </span>{<font></font>
        $project = Project::create($request-&gt;all());<font></font>
        <font></font>
        <span class="hljs-comment">//  NotifyMembers, TagUserActive, NotifyToProveSource </span>
        <span class="hljs-comment">//   ,     </span>
        Notification::queue(<span class="hljs-keyword">new</span> NotifyMembers($project-&gt;owners));
        <span class="hljs-keyword">$this</span>-&gt;dispatch(<span class="hljs-keyword">new</span> TagUserAsActive($project-&gt;owners));
        <span class="hljs-keyword">$this</span>-&gt;dispatch(<span class="hljs-keyword">new</span> NotifyToProveSource($project-&gt;owners));<font></font>
        <font></font>
        <span class="hljs-keyword">return</span> $project;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak perlu menunggu selesainya semua proses ini sebelum mengembalikan jawabannya; </font><font style="vertical-align: inherit;">sebaliknya, penantian akan sama dengan waktu yang dibutuhkan untuk mempublikasikannya dalam antrian. </font><font style="vertical-align: inherit;">Dan itu berarti perbedaan antara 10 detik dan 10 milidetik !!!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siapa yang melakukan tugas ini setelah mengirimnya ke antrian?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah arsitektur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penerbit / konsumen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> klasik </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kami telah menerbitkan tugas-tugas kami dalam antrian dari controller, sekarang kami akan memahami bagaimana antrian digunakan, dan, akhirnya, tugas-tugas dilakukan. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pi/va/vr/pivavrbjasagc40trhmqpesyc2u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menggunakan antrian, kita perlu menjalankan salah satu perintah artisan paling populer:</font></font><br>
<br>
<pre><code class="php hljs">php artisan queue:work</code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti yang dikatakan dalam dokumentasi: </font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laravel menyertakan pekerja antrian yang memproses tugas baru ketika mereka sedang antri.</font></font></i></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagus! </font><font style="vertical-align: inherit;">Laravel menyediakan antarmuka yang sudah jadi untuk tugas antrian dan perintah yang siap digunakan untuk mengambil tugas dari antrian dan menjalankan kode mereka di latar belakang.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peran Pengawas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu adalah "hal aneh" di awal. Saya pikir itu normal untuk menemukan hal-hal baru. Setelah tahap pelatihan ini, saya menulis artikel ini untuk membantu saya mengatur keterampilan saya, dan pada saat yang sama membantu pengembang lain memperluas pengetahuan mereka. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika tugas gagal saat melempar pengecualian, tim akan </font></font><code>queue:work</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menghentikan pekerjaannya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agar proses </font></font><code>queue:work</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berjalan terus menerus (menghabiskan antrian Anda), Anda harus menggunakan monitor proses seperti Supervisor untuk memastikan bahwa perintah </font></font><code>queue:work</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tidak berhenti bekerja bahkan jika tugas melempar pengecualian. </font><font style="vertical-align: inherit;">Supervisor </font><font style="vertical-align: inherit;">memulai kembali perintah setelah crash, mulai lagi dari tugas berikutnya, mengesampingkan pengecualian melempar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tugas akan berjalan di latar belakang di server Anda, tidak lagi tergantung pada permintaan HTTP. </font><font style="vertical-align: inherit;">Ini memperkenalkan beberapa perubahan yang harus saya pertimbangkan ketika mengimplementasikan kode tugas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berikut adalah yang paling penting yang akan saya perhatikan:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana saya mengetahui bahwa kode tugas tidak berfungsi?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat berjalan di latar belakang, Anda tidak dapat segera melihat bahwa tugas Anda menyebabkan kesalahan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda tidak akan lagi memiliki umpan balik langsung, seperti ketika membuat permintaan http dari browser Anda. </font><font style="vertical-align: inherit;">Jika tugas gagal, ia akan melakukannya diam-diam dan tidak ada yang akan memperhatikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan untuk mengintegrasikan alat pemantauan waktu nyata seperti </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspektur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke permukaan setiap kekurangan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda tidak memiliki permintaan http</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada lagi permintaan HTTP. </font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode Anda akan dieksekusi dari cli. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda membutuhkan parameter kueri untuk menyelesaikan tugas Anda, Anda harus meneruskannya ke konstruktor tugas untuk digunakan nanti saat runtime:</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TagUserJob</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ShouldQueue</span>
</span>{
    <span class="hljs-keyword">public</span> $data;<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> $data</span>)
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;data = $data;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//       </span><font></font>
<font></font>
<span class="hljs-keyword">$this</span>-&gt;dispatch(<span class="hljs-keyword">new</span> TagUserJob($request-&gt;all()));</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda tidak tahu siapa yang masuk</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tidak ada lagi sesi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dengan cara yang sama, Anda tidak akan tahu identitas pengguna yang masuk, jadi jika Anda membutuhkan informasi tentang pengguna untuk menyelesaikan tugas, Anda harus meneruskan objek pengguna ke konstruktor tugas:</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TagUserJob</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ShouldQueue</span>
</span>{
    <span class="hljs-keyword">public</span> $user;<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">User $user</span>)
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;user= $user;<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//       </span>
<span class="hljs-keyword">$this</span>-&gt;dispatch(<span class="hljs-keyword">new</span> TagUserJob($request-&gt;user()));</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memahami bagaimana skala</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sayangnya, dalam banyak kasus ini tidak cukup. </font><font style="vertical-align: inherit;">Menggunakan satu baris dan konsumen mungkin segera menjadi tidak berguna. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antrian adalah buffer FIFO ("masuk pertama, keluar pertama"). </font><font style="vertical-align: inherit;">Jika Anda telah merencanakan banyak tugas, mungkin bahkan dari jenis yang berbeda, mereka perlu menunggu orang lain untuk menyelesaikan tugas mereka sebelum menyelesaikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada dua cara untuk menskalakan: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa konsumen per antrian</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/id/uu/0j/iduu0jzihjoqnm95edxdox7swim.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
, jadi, lima tugas akan dihapus dari antrian sekaligus, mempercepat pemrosesan antrian. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antrian Tujuan Khusus</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Anda juga dapat membuat antrian khusus untuk setiap jenis tugas yang akan diluncurkan dengan konsumen khusus untuk setiap antrian.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3r/0i/gv/3r0igvjwxthteiiqrx7p8exouz8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, setiap antrian akan diproses secara mandiri, tanpa menunggu jenis tugas lainnya selesai.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cakrawala</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laravel Horizon adalah manajer antrian yang memberi Anda kendali penuh atas berapa banyak antrian yang ingin Anda atur, dan kemampuan untuk mengatur konsumen, memungkinkan pengembang untuk menggabungkan kedua strategi ini dan mengimplementasikan yang sesuai dengan kebutuhan skalabilitas Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peluncuran terjadi melalui </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">horizon artisan php</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alih-alih </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">antrian artisan php: work</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Perintah ini memindai file konfigurasi Anda </font></font><code>horizon.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan memulai serangkaian pekerja antrian tergantung pada konfigurasi:</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-string">'production'</span> =&gt; [
    <span class="hljs-string">'supervisor-1'</span> =&gt; [
        <span class="hljs-string">'connection'</span> =&gt; <span class="hljs-string">"redis"</span>,
        <span class="hljs-string">'queue'</span> =&gt; [<span class="hljs-string">'adveritisement'</span>, <span class="hljs-string">'logs'</span>, <span class="hljs-string">'phones'</span>],
        <span class="hljs-string">'processes'</span> =&gt; <span class="hljs-number">9</span>,
        <span class="hljs-string">'tries'</span> =&gt; <span class="hljs-number">3</span>,
        <span class="hljs-string">'balance'</span> =&gt; <span class="hljs-string">'simple'</span>, <span class="hljs-comment">//   simple, auto  null</span><font></font>
<font></font>
    ]<font></font>
]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada contoh di atas, Horizon akan memulai tiga antrian dengan tiga proses yang ditugaskan untuk memproses setiap antrian. </font><font style="vertical-align: inherit;">Seperti disebutkan dalam dokumentasi Laravel, pendekatan berbasis kode Horizon memungkinkan konfigurasi saya untuk tetap berada dalam sistem kontrol versi di mana tim saya dapat berkolaborasi. </font><font style="vertical-align: inherit;">Ini adalah solusi sempurna menggunakan alat CI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengetahui arti parameter konfigurasi secara rinci, baca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel yang luar biasa ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Konfigurasi saya sendiri</font></font></h3><br>
<br>
<pre><code class="php hljs"><span class="hljs-meta">&lt;?php</span><font></font>
<font></font>
<span class="hljs-string">'production'</span> =&gt; [
    <span class="hljs-string">'supervisor-1'</span> =&gt; [
        <span class="hljs-string">'connection'</span> =&gt; <span class="hljs-string">'redis'</span>,
        <span class="hljs-string">'queue'</span> =&gt; [<span class="hljs-string">'default'</span>, <span class="hljs-string">'ingest'</span>, <span class="hljs-string">'notifications'</span>],
        <span class="hljs-string">'balance'</span> =&gt; <span class="hljs-string">'auto'</span>,
        <span class="hljs-string">'processes'</span> =&gt; <span class="hljs-number">15</span>,
        <span class="hljs-string">'tries'</span> =&gt; <span class="hljs-number">3</span>,<font></font>
    ],<font></font>
]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inspektur terutama menggunakan tiga antrian:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menelan proses untuk menganalisis data dari aplikasi eksternal;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemberitahuan digunakan untuk segera menjadwalkan pemberitahuan jika kesalahan terdeteksi saat menerima data;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">default digunakan untuk tugas-tugas lain yang saya tidak ingin campur dengan </font><font style="vertical-align: inherit;">proses </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menelan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemberitahuan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Melalui penggunaan </font></font><code>balance=auto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Horizon, ia memahami bahwa jumlah maksimum proses yang diaktifkan adalah 15, yang akan didistribusikan secara dinamis tergantung pada pemuatan antrian. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika antrian kosong, Horizon mendukung satu proses aktif untuk setiap antrian, yang memungkinkan konsumen untuk segera memproses antrian jika tugas dijadwalkan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pengamatan penutup</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eksekusi latar belakang bersamaan dapat menyebabkan banyak kesalahan tak terduga lainnya, seperti MySQL "Lock time out" dan banyak masalah desain lainnya. </font><font style="vertical-align: inherit;">Baca lebih lanjut di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harap artikel ini membantu Anda menggunakan antrian dan tugas dengan lebih percaya diri. </font><font style="vertical-align: inherit;">Jika Anda ingin tahu lebih banyak tentang kami, kunjungi situs web kami di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.inspector.dev </font></font></a><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sebelumnya diterbitkan di sini </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.inspector.dev/what-worked-for-me-using-laravel-queues-from-the-basics-to -cakrawala</font></font></a></i><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dapatkan kursus dan dapatkan diskon.</font></font><br>
</a><br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id499490/index.html">Algoritma Acak</a></li>
<li><a href="../id499492/index.html">Mungkinkah pengembang di Silicon Valley menjadi jutawan? Staff Engineer menguraikan Lyft</a></li>
<li><a href="../id499502/index.html">Mengapa OceanStor Dorado V6 adalah penyimpanan tercepat dan paling dapat diandalkan</a></li>
<li><a href="../id499504/index.html">Protokol Pelacakan Kontak Apple & Google Bluetooth</a></li>
<li><a href="../id499506/index.html">Pembayaran setiap jam, untuk hasil atau gaji?</a></li>
<li><a href="../id499512/index.html">AHK minimum. Map</a></li>
<li><a href="../id499516/index.html">Awal pengujian beta dari plugin untuk Rider dan PVS-Studio C # untuk Linux / macOS</a></li>
<li><a href="../id499518/index.html">Konferensi video sekarang menjadi pasar dan teknologi baru. Longrid, bagian satu</a></li>
<li><a href="../id499522/index.html">Все нововведения Windows 10 2004 (20H1)</a></li>
<li><a href="../id499524/index.html">Quarkus: peningkatan aplikasi menggunakan contoh helloworld dari JBoss EAP Quickstart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>