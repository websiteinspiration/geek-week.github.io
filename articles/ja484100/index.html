<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ ğŸ‘¨ğŸ¾â€ğŸ”§ ğŸ‘ğŸ¼ Androidå‘ã‘Google Maps SDKã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ“ä½œ ğŸ§”ğŸ¿ ğŸ˜Ÿ ğŸ·</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ã“ã®è¨˜äº‹ã¯ã€ã“ã‚Œã¾ã§ã«Google Maps SDKã‚’ä½¿ç”¨ã—ãŸã“ã¨ãŒãªã„äººã«å½¹ç«‹ã¡ã¾ã™ã€‚
 
 çŒ«ã®ä¸‹ã§ã€ãƒãƒ¼ã‚«ãƒ¼ã®è¿½åŠ ã¨ç®¡ç†ã€åœ°å›³ä¸Šã§ã®ã‚«ãƒ¡ãƒ©ã®ç§»å‹•æ–¹æ³•ã€ã‚ºãƒ¼ãƒ ã®åˆ¶å¾¡ã€ãƒ«ãƒ¼ãƒˆã®ãƒ—ãƒ­ãƒƒãƒˆã€ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãªã©ã€åœ°å›³ã‚’æ“ä½œã™ã‚‹åŸºæœ¬çš„ãªæ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚åˆ¶é™ã¨ãã‚Œã‚‰ã‚’å›é¿ã™ã‚‹æ–¹æ³•ã¨åŒæ§˜ã«ã€‚
 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Androidå‘ã‘Google Maps SDKã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ“ä½œ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484100/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®è¨˜äº‹ã¯ã€ã“ã‚Œã¾ã§ã«Google Maps SDKã‚’ä½¿ç”¨ã—ãŸã“ã¨ãŒãªã„äººã«å½¹ç«‹ã¡ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çŒ«ã®ä¸‹ã§ã€ãƒãƒ¼ã‚«ãƒ¼ã®è¿½åŠ ã¨ç®¡ç†ã€åœ°å›³ä¸Šã§ã®ã‚«ãƒ¡ãƒ©ã®ç§»å‹•æ–¹æ³•ã€ã‚ºãƒ¼ãƒ ã®åˆ¶å¾¡ã€ãƒ«ãƒ¼ãƒˆã®ãƒ—ãƒ­ãƒƒãƒˆã€ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãªã©ã€åœ°å›³ã‚’æ“ä½œã™ã‚‹åŸºæœ¬çš„ãªæ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">åˆ¶é™ã¨ãã‚Œã‚‰ã‚’å›é¿ã™ã‚‹æ–¹æ³•ã¨åŒæ§˜ã«ã€‚</font></font><br>
<br>
<div style="text-align:center;"><img width="70%" src="https://habrastorage.org/webt/z7/k_/wx/z7k_wx4u1gl4-usgjpfpbussyew.jpeg" alt="ç”»åƒ"></div><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></i></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¨˜äº‹ã‚’æ›¸ããŸã‚ã«ã€ç§ã¯è‡ªåˆ†ã®çµŒé¨“ã«åŠ±ã¾ã•ã‚Œã¾ã—ãŸã€‚ãã®çµŒé¨“ã¯ã€</font><font style="vertical-align: inherit;">Googleãƒãƒƒãƒ—ã‚’ä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã¦å®…é…ä¾¿ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½œæˆã™ã‚‹ã¨ãã«å¾—ãŸã‚‚ã®</font><font style="vertical-align: inherit;">ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ã™ã¹ã¦ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å¯èƒ½ãªè¨€åŠã¯ã€å®…é…ä¾¿ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹çŠ¶æ³ã§ç™ºç”Ÿã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ®‹å¿µãªãŒã‚‰ã€Androidå‘ã‘Google Maps SDKã§ã¯ã€ã„ã‚ã‚†ã‚‹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã®ä½ç½®ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ UIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã«ã¯ã€æ¬¡ã®ã‚‚ã®ãŒå«ã¾ã‚Œã¾ã™ã€‚IndoorLevelPicker-å»ºç‰©ã®ãƒ•ãƒ­ã‚¢ãƒ—ãƒ©ãƒ³ã‚’è¡¨ç¤ºã€ã‚³ãƒ³ãƒ‘ã‚¹-ã‚³ãƒ³ãƒ‘ã‚¹ã€ç¾åœ¨åœ°ãƒœã‚¿ãƒ³-ç¾åœ¨åœ°ã®ãƒãƒƒãƒ—ã«ç§»å‹•ã€ãƒãƒƒãƒ—ãƒ„ãƒ¼ãƒ«ãƒãƒ¼-ãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãƒãƒƒãƒ—ã‚’é–‹ããŸã‚ã®ãƒœã‚¿ãƒ³ã€ãŠã‚ˆã³ZoomControls-ãƒãƒƒãƒ—ã®ç¸®å°ºã‚’å¢—æ¸›ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒƒãƒ—ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã¨ZoomControlsã‚’ä¾‹ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®ä½ç½®ã‚’å¤‰æ›´ã§ããªã„ãŸã‚ã«ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹å•é¡Œã¨ã€ãã®å›é¿æ–¹æ³•ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</font></font><br>
<br>
<img width="70%" src="https://habrastorage.org/webt/ep/7v/e-/ep7ve-bkgkw8lfu0dqhu62rd8li.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDKï¼ˆã‚ªãƒ¬ãƒ³ã‚¸è‰²ã§å¼·èª¿è¡¨ç¤ºï¼‰ã¨ãã®å¯¾å¿œã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ï¼ˆç·‘è‰²ã§å¼·èª¿è¡¨ç¤ºï¼‰ã‹ã‚‰ã®UIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã®è¡¨ç¤ºã«é–¢ã™ã‚‹å•é¡Œ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã“ã®å ´åˆã€å³ä¸‹éš…ã«é…ä¿¡æ³¨æ–‡ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒªã‚¹ãƒˆã«ç§»å‹•ã™ã‚‹ãŸã‚ã®ãƒœã‚¿ãƒ³ï¼ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ï¼‰ãŒã‚ã‚Šã€å·¦å´ã®ç”»åƒã¯ZoomControlsã‚’ç¤ºã—ã¦ã„ã¾ã™ãã®ä¸‹ã«ã‚ã‚Šã€ã»ã¨ã‚“ã©ã‚¯ãƒªãƒƒã‚¯ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚å³å´ã®å›³ã§ã€ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€[ãƒãƒƒãƒ—]ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒœã‚¿ãƒ³ã¯ãƒœã‚¿ãƒ³ã®ä¸‹ã«ã‚‚è¡¨ç¤ºã•ã‚Œã€æ³¨æ–‡ã®ãƒªã‚¹ãƒˆã«ç§»å‹•ã—ã¾ã™ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ±ºå®š</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã«è¡Œã†å¿…è¦ãŒã‚ã‚‹ã®ã¯ã€å…ƒã®ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‚’éè¡¨ç¤ºã«ã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€onMapReadyãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¾ã™ã€‚ã‚«ãƒ¼ãƒ‰ãŒä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã¨å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ãªã„ã‚ºãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¨ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ãªã„SDKã‹ã‚‰ã®ãƒ«ãƒ¼ãƒˆã‚’æ§‹ç¯‰</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">private</span> GoogleMap mMap;
<span class="hljs-keyword">private</span> UiSettings uiSettings;<font></font>
<font></font>
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMapReady</span><span class="hljs-params">(GoogleMap googleMap)</span> </span>{<font></font>
        mMap = googleMap;<font></font>
        uiSettings = mMap.getUiSettings();<font></font>
<span class="hljs-comment">//   Zoom</span>
        uiSettings.setZoomControlsEnabled(<span class="hljs-keyword">false</span>);
<span class="hljs-comment">//         SDK</span>
        uiSettings.setMapToolbarEnabled(<span class="hljs-keyword">false</span>);<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å¿…è¦ãªãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒœã‚¿ãƒ³ã¯ã€è¨­è¨ˆã«å¿œã˜ã¦é…ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<img width="80%" src="https://habrastorage.org/webt/ya/1f/1s/ya1f1s6himpftesuq8jcf1bfsco.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã®å ´æ‰€æ¬¡</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã«ã€onCreateViewãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ç™ºç”Ÿã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚±ãƒ¼ãƒ«ã‚’å¢—æ¸›ã—ãŸã‚Šã€ãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã—ãŸã‚Šã™ã‚‹ãŸã‚ã®ãƒœã‚¿ãƒ³ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">private</span> ImageButton imageButtonZoomIn;
<span class="hljs-keyword">private</span> ImageButton imageButtonZoomOut;
<span class="hljs-keyword">private</span> ImageButton imageButtonRoute;
<span class="hljs-keyword">private</span> GoogleMap mMap;<font></font>
<font></font>
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">onCreateView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> LayoutInflater inflater, <span class="hljs-meta">@Nullable</span> ViewGroup container, <span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> </span>{
<span class="hljs-comment">// </span><font></font>
        imageButtonZoomIn = view.findViewById(R.id.imageButtonZoomIn);<font></font>
        imageButtonZoomIn.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                mMap.animateCamera(CameraUpdateFactory.zoomIn());<font></font>
            }<font></font>
        });<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
        imageButtonZoomOut = view.findViewById(R.id.imageButtonZoomOut);<font></font>
        imageButtonZoomOut.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
<font></font>
                mMap.animateCamera(CameraUpdateFactory.zoomOut());<font></font>
            }<font></font>
        });<font></font>
<font></font>
<span class="hljs-comment">//     </span><font></font>
        imageButtonRoute = view.findViewById(R.id.imageButtonRoute);<font></font>
        imageButtonRoute.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{<font></font>
                String latitude = String.valueOf(activMarker.getPosition().latitude);<font></font>
                String longitude = String.valueOf(activMarker.getPosition().longitude);<font></font>
                Uri gmmIntentUri = Uri.parse(<span class="hljs-string">"google.navigation:q="</span> + latitude + <span class="hljs-string">","</span> + longitude);<font></font>
                Intent mapIntent = <span class="hljs-keyword">new</span> Intent(Intent.ACTION_VIEW, gmmIntentUri);<font></font>
                mapIntent.setPackage(<span class="hljs-string">"com.google.android.apps.maps"</span>);<font></font>
<font></font>
                <span class="hljs-keyword">try</span>{
                    <span class="hljs-keyword">if</span> (mapIntent.resolveActivity(Objects.requireNonNull(getActivity()).getPackageManager()) != <span class="hljs-keyword">null</span>) {<font></font>
                        startActivity(mapIntent);<font></font>
                    }<font></font>
                }<span class="hljs-keyword">catch</span> (NullPointerException e){<font></font>
                    Log.e(TAG, <span class="hljs-string">"onClick: NullPointerException: Couldn't open map."</span> + e.getMessage() );<font></font>
                    Toast.makeText(getActivity(), <span class="hljs-string">"Couldn't open map"</span>, Toast.LENGTH_SHORT).show();<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">animateCamera</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ãƒ¡ã‚½ãƒƒãƒ‰ã®ç‰¹å¾´ã¯</font><font style="vertical-align: inherit;">ã€ã‚¹ã‚±ãƒ¼ãƒ«ãŒç¬æ™‚ã§ã¯ãªãã‚¹ãƒ ãƒ¼ã‚ºã«å¤‰åŒ–ã™ã‚‹ã“ã¨ã§ã™ã€‚ãŸã¨ãˆã°ã€æœ€å¤§ã¾ãŸã¯æœ€å°ã®ã‚¹ã‚±ãƒ¼ãƒ«ã«é”ã—ãŸã¨ãã«ç‰¹å®šã®ã‚ºãƒ¼ãƒ ãƒœã‚¿ãƒ³ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚ªãƒ•ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</font><font style="vertical-align: inherit;">å ´åˆã¯ã€ãƒãƒƒãƒ—ã®ã‚¹ã‚±ãƒ¼ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã‚‹</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onCameraIdle</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å†å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ºãƒ¼ãƒ ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã¨éã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–</font></font></b><div class="spoiler_text"><pre><code class="java hljs">    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCameraIdle</span><span class="hljs-params">()</span> </span>{<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (mMap.getCameraPosition().zoom == mMap.getMinZoomLevel()){
<span class="hljs-comment">//  ,    </span><font></font>
<font></font>
            imageButtonZoomOut.setEnabled(<span class="hljs-keyword">false</span>);<font></font>
            imageButtonZoomIn.setEnabled(<span class="hljs-keyword">true</span>);<font></font>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mMap.getCameraPosition().zoom == mMap.getMaxZoomLevel()){
<span class="hljs-comment">//  ,    </span><font></font>
<font></font>
            imageButtonZoomOut.setEnabled(<span class="hljs-keyword">true</span>);<font></font>
            imageButtonZoomIn.setEnabled(<span class="hljs-keyword">false</span>);<font></font>
        }<span class="hljs-keyword">else</span> {
<span class="hljs-comment">//      </span><font></font>
<font></font>
            imageButtonZoomOut.setEnabled(<span class="hljs-keyword">true</span>);<font></font>
            imageButtonZoomIn.setEnabled(<span class="hljs-keyword">true</span>);<font></font>
        }<font></font>
    }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒ¼ã‚«ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ï¼ˆãƒ‰ãƒ©ãƒƒã‚°ã‚¢ãƒ³ãƒ‰ãƒ‰ãƒ­ãƒƒãƒ—ã‚’é™¤ãï¼‰ã€ãŸã¨ãˆã°ã€æ–°ã—ã„æ³¨æ–‡ã‚’ä½œæˆã—ãŸã‚Šã€ãƒ©ãƒ³ãƒ€ãƒ ã«é…ç½®ã•ã‚ŒãŸãƒãƒ¼ã‚«ãƒ¼ã‚’å‰Šé™¤ã—ãŸã‚Šã€æ—¢å­˜ã®æ³¨æ–‡ã«ç§»å‹•ã—ãŸã‚Šã€æ³¨æ–‡ã«ç¤ºã•ã‚Œã¦ã„ã‚‹ã¨ãŠã‚Šã«é›»è©±ã‚’ã‹ã‘ãŸã‚Šã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«é©åˆ‡ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã—ã¦ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚</font></font><br>
<br>
<img width="40%" src="https://habrastorage.org/webt/eh/9v/yf/eh9vyfwdun36kqaqirzvhwudxsq.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒ¼ã‚«ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³</font></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒƒãƒ—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ ã—ã€ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">private</span> GoogleMap mMap;
<span class="hljs-keyword">private</span> ImageButton imageButtonRoute;<font></font>
<font></font>
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMapReady</span><span class="hljs-params">(GoogleMap googleMap)</span> </span>{<font></font>
mMap = googleMap;<font></font>
mMap.setOnMapClickListener(<span class="hljs-keyword">new</span> GoogleMap.OnMapClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMapClick</span><span class="hljs-params">(LatLng latLng)</span> </span>{<font></font>
                imageButtonRoute.setVisibility(View.GONE);<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (myMarker !=<span class="hljs-keyword">null</span>){
<span class="hljs-comment">//  </span><font></font>
                    myMarker.remove();<font></font>
                }<font></font>
<span class="hljs-comment">//   </span>
                myMarker = mMap.addMarker(<span class="hljs-keyword">new</span> MarkerOptions()<font></font>
                        .position(latLng)<font></font>
<span class="hljs-comment">//                          </span><font></font>
.title(Objects.requireNonNull(getContext()).getString(R.string.title_on_marker_to_new_order))<font></font>
<span class="hljs-comment">// true ,         </span>
                        .draggable(<span class="hljs-keyword">true</span>));<font></font>
                myMarker.setTag(<span class="hljs-keyword">null</span>);
<span class="hljs-comment">//   </span><font></font>
                imageButtonAddMarker.setVisibility(View.VISIBLE);<font></font>
                imageButtonRemoveMarker.setVisibility(View.VISIBLE);<font></font>
            }<font></font>
        });<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ–‡ã®è¿½åŠ ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ã€ãƒãƒ¼ã‚«ãƒ¼ã§ä½•ã‚’ã—ãŸã„ã‹ã‚’ç¤ºã—ã¾ã™</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">private</span> ImageButton imageButtonAddMarker;
<span class="hljs-keyword">private</span> Marker myMarker;
 <span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">onCreateView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> LayoutInflater inflater, <span class="hljs-meta">@Nullable</span> ViewGroup container, <span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> </span>{<font></font>
<font></font>
imageButtonAddMarker = view.findViewById(R.id.imageButtonAddMarker);<font></font>
imageButtonAddMarker.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{
                <span class="hljs-keyword">if</span> (myMarker !=<span class="hljs-keyword">null</span> &amp;&amp; myMarker.getTag()==<span class="hljs-keyword">null</span>) {
<span class="hljs-comment">//   </span><font></font>
                    imageButtonAddMarker.setVisibility(View.GONE);<font></font>
                    imageButtonRemoveMarker.setVisibility(View.GONE);<font></font>
<span class="hljs-comment">//  ,         </span>
                    listener.openOrderContentsFragmentFromMap(<span class="hljs-keyword">null</span>, myMarker);
<span class="hljs-comment">//   ,    </span><font></font>
                    myMarker.remove();<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚‚ã†1ã¤ã®æ©Ÿèƒ½ã¯ã€SDKã«ã¯ã‚«ãƒ¼ãƒ‰ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’å‰Šé™¤ã™ã‚‹ãƒœã‚¿ãƒ³ãŒãªã„ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ç‹¬è‡ªã®ãƒœã‚¿ãƒ³ã‚‚ä½œæˆã—ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒ¼ã‚«ãƒ¼ã®å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ã€ãƒãƒ¼ã‚«ãƒ¼ã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">private</span> ImageButton imageButtonRemoveMarker;
<span class="hljs-keyword">private</span> Marker myMarker;
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> View <span class="hljs-title">onCreateView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> LayoutInflater inflater, <span class="hljs-meta">@Nullable</span> ViewGroup container, <span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> </span>{<font></font>
<font></font>
imageButtonRemoveMarker = view.findViewById(R.id.imageButtonRemoveMarker);<font></font>
imageButtonRemoveMarker.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span><span class="hljs-params">(View v)</span> </span>{
                <span class="hljs-keyword">if</span> (myMarker !=<span class="hljs-keyword">null</span> &amp;&amp; myMarker.getTag()==<span class="hljs-keyword">null</span>){
<span class="hljs-comment">//  </span><font></font>
                    imageButtonAddMarker.setVisibility(View.GONE);<font></font>
                    imageButtonRemoveMarker.setVisibility(View.GONE);<font></font>
<span class="hljs-comment">//   </span><font></font>
                    myMarker.remove();<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒãƒ¼ã‚«ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã®ã‚¿ã‚¤ãƒˆãƒ«ãŒé–‹ãã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã‚‚ä½¿ç”¨ã§ãã‚‹ã‚‚ã®ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚æ–°ã—ã„ãƒãƒ¼ã‚«ãƒ¼ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€å®…é…ä¾¿ã¸ã®é…é€ç”¨ã«æ–°ã—ã„æ³¨æ–‡ãŒä½œæˆã•ã‚Œã€æ—¢å­˜ã®æ³¨æ–‡ã®ãƒãƒ¼ã‚«ãƒ¼ã§ã€ãƒªã‚¹ãƒˆã‚’å«ã‚€è©³ç´°ãªé…é€æƒ…å ±ãŒé–‹ãã¾ã™å“ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒ¼ã‚«ãƒ¼æƒ…å ±ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">private</span> GoogleMap mMap;<font></font>
<font></font>
<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMapReady</span><span class="hljs-params">(GoogleMap googleMap)</span> </span>{<font></font>
mMap = googleMap;<font></font>
mMap.setOnInfoWindowClickListener(<span class="hljs-keyword">new</span> GoogleMap.OnInfoWindowClickListener() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onInfoWindowClick</span><span class="hljs-params">(Marker marker)</span> </span>{
                <span class="hljs-keyword">if</span> (marker.getTag()==<span class="hljs-keyword">null</span>) {
<span class="hljs-comment">//    :</span>
<span class="hljs-comment">//     </span>
                    listener.openOrderContentsFragmentFromMap(<span class="hljs-keyword">null</span>, marker);<font></font>
   <font></font>
                 <span class="hljs-keyword">if</span> (myMarker != <span class="hljs-keyword">null</span>) {
<span class="hljs-comment">//   ,    </span><font></font>
                        myMarker.remove();<font></font>
                    }<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span> {
<span class="hljs-comment">//     :</span>
<span class="hljs-comment">//        </span><font></font>
                    listener.openOrderContentsFragment((Long) marker.getTag());<font></font>
                }<font></font>
            }<font></font>
        });<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚«ãƒ¼ãƒ‰ã«è¤‡æ•°ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆæ³¨æ–‡ã®ãƒªã‚¹ãƒˆã‚’èª­ã‚€ï¼‰ã¯ã€åŸå‰‡ã¨ã—ã¦1ã¤ã®ãƒãƒ¼ã‚«ãƒ¼ã®å‡ºåŠ›ã¨åŒã˜ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒãƒ¼ã‚«ãƒ¼ã¯ã€åº§æ¨™ï¼ˆä½ç½®ï¼‰ã€ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‰ã€ã‚¿ã‚¤ãƒˆãƒ«ã®ä¸‹ã®å°ã•ãªãƒ†ã‚­ã‚¹ãƒˆï¼ˆã‚¹ãƒ‹ãƒšãƒƒãƒˆï¼‰ã€ãŠã‚ˆã³ã‚¿ã‚°ï¼ˆsetTagï¼‰ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚ãƒãƒƒãƒ—ä¸Šã®å¤šãã®ãƒãƒ¼ã‚«ãƒ¼ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><br>
<br>
<img width="70%" src="https://habrastorage.org/webt/za/jk/6r/zajk6r8nidla3duqdwtkxzr2ht0.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã„ãã¤ã‹ã®ãƒãƒƒãƒ—ãƒãƒ¼ã‚«ãƒ¼</font></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡å®šã—ãŸåº§æ¨™ã§è¤‡æ•°ã®ãƒãƒ¼ã‚«ãƒ¼ã‚’æã</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">drawListMarker</span><span class="hljs-params">(List&lt;InfoMarker&gt; latLngList)</span> </span>{
        <span class="hljs-keyword">if</span> (latLngList == <span class="hljs-keyword">null</span> || latLngList.size() == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
        mMap.clear();<font></font>
<font></font>
        LatLngBounds.Builder builder = <span class="hljs-keyword">new</span> LatLngBounds.Builder();
        <span class="hljs-keyword">boolean</span> fiarstGreean = <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">int</span> count = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (InfoMarker latLng : latLngList) {<font></font>
            BitmapDescriptor icon;<font></font>
            <span class="hljs-keyword">if</span> (fiarstGreean){
<span class="hljs-comment">//     </span>
<span class="hljs-comment">//..          </span><font></font>
                icon = BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN);<font></font>
                fiarstGreean = <span class="hljs-keyword">false</span>;<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span> {<font></font>
                icon = latLng.getIcon();<font></font>
            }<font></font>
<font></font>
<span class="hljs-comment">//     </span>
            mMap.addMarker(<span class="hljs-keyword">new</span> MarkerOptions().position(latLng.getLatLng()).title(String.valueOf(count)).snippet(latLng.getTitle()).icon(icon)).setTag(latLng.getIdOrder());<font></font>
            builder.include(latLng.getLatLng());<font></font>
            count++;<font></font>
        }<font></font>
<font></font>
<span class="hljs-comment">//      </span><font></font>
        CameraUpdate cameraUpdate;<font></font>
        <span class="hljs-keyword">if</span> (loaded) {<font></font>
            cameraUpdate = CameraUpdateFactory<font></font>
                    .newLatLngBounds(builder.build(), <span class="hljs-number">100</span>);<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            cameraUpdate = CameraUpdateFactory.newLatLng(builder.build().getCenter());<font></font>
        }<font></font>
<font></font>
        mMap.moveCamera(cameraUpdate);<font></font>
        mMap.animateCamera(CameraUpdateFactory.zoomIn());<font></font>
        mMap.animateCamera(CameraUpdateFactory.zoomTo(<span class="hljs-number">10</span>), <span class="hljs-number">1000</span>, <span class="hljs-keyword">null</span>);<font></font>
    }<font></font>
</code></pre><br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¸ã‚ªã‚³ãƒ¼ãƒ€ãƒ¼ã«é–¢ã™ã‚‹ã„ãã¤ã‹ã®å˜èª</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ã‚¸ã‚ªã‚³ãƒ¼ãƒ€ãƒ¼ã¯ã€åº§æ¨™ã«åŸºã¥ã„ã¦ä½æ‰€ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">åœ°å›³ä¸Šã«ãƒãƒ¼ã‚«ãƒ¼ã‚’ç½®ãã€[æ³¨æ–‡ã‚’è¿½åŠ ]ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ç›®çš„ã®ãƒã‚¤ãƒ³ãƒˆã®åœ°ç†åº§æ¨™ãŒå–å¾—ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç·¯åº¦ã¨çµŒåº¦ã€‚</font><font style="vertical-align: inherit;">ãŸã ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¾¿å®œã®ãŸã‚ã«ã€ä½æ‰€ã‚’äººãŒèª­ã‚ã‚‹å½¢å¼ï¼ˆå›½ã€éƒ½å¸‚ã€é€šã‚Šã€å®¶ãªã©ï¼‰ã§è¡¨ç¤ºã™ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Google Maps SDKã«ã¯ã€</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geocoder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ©ã‚¹ãŒå«ã¾ã‚Œã¦ã„</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãã®</font><b><font style="vertical-align: inherit;">getFromLocation</font></b><font style="vertical-align: inherit;">ãƒ¡ã‚½ãƒƒãƒ‰</font><b><font style="vertical-align: inherit;">ã‚’</font></b><font style="vertical-align: inherit;">å‘¼ã³å‡ºã™ã“ã¨ã«ã‚ˆã‚Š</font><font style="vertical-align: inherit;">ã€æŒ‡å®šã—ãŸåº§æ¨™ã®ä½æ‰€ã®é…åˆ—ã‚’å–å¾—ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç‰¹ã«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãŒé…ã„ã‹ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆã«ã€å‘¼ã³å‡ºã—ã«ã‚ˆã£ã¦UIã‚¹ãƒ¬ãƒƒãƒ‰ã‚’é•·æ™‚é–“ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€RxJavaã‚’ä½¿ç”¨ã—ã¾ã™ã€‚</font></font><br>
<br>
<img width="40%" src="https://habrastorage.org/webt/rq/4f/yx/rq4fyxaic3amyaksci8egy2tvzy.png" alt="ç”»åƒ"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ°ç†åº§æ¨™ã«åŸºã¥ã„ãŸã€ãƒãƒƒãƒ—ä¸Šã®ãƒã‚¤ãƒ³ãƒˆã®å—ä¿¡ã‚¢ãƒ‰ãƒ¬ã‚¹</font></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java RXã‚’ä½¿ç”¨ã—ã¦Googleã‚¸ã‚ªã‚³ãƒ¼ãƒ€ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><font></font>
                LatLng position = myMarker.getPosition();<font></font>
<font></font>
                Location location = <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"new"</span>);<font></font>
                location.setLatitude(position.latitude);<font></font>
                location.setLongitude(position.longitude);<font></font>
<font></font>
                LocationRepostiory locationRepostiory = <span class="hljs-keyword">new</span> LocationRepostiory(context, location);<font></font>
                locationRepostiory.getLastLocation().<font></font>
                        observeOn(SchedulerProvider.getInstance().ui()).<font></font>
                        subscribeOn(SchedulerProvider.getInstance().computation()).<font></font>
                        subscribe(locationString -&gt; {<font></font>
                            <span class="hljs-keyword">if</span>(editTextAddress.length()==<span class="hljs-number">0</span>){
<span class="hljs-comment">//       ,     </span><font></font>
                                editTextAddress.setText(locationString);<font></font>
                            }<font></font>
                        }, throwable -&gt; {<font></font>
                        });<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒç™ºç”Ÿã™ã‚‹LocationRepostioryã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚­ã‚¹ãƒˆ</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LocationRepostiory</span> </span>{
    <span class="hljs-keyword">private</span> Context context;
    <span class="hljs-keyword">private</span> Location location;<font></font>
<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LocationRepostiory</span><span class="hljs-params">(Context context, Location location)</span> </span>{
        <span class="hljs-keyword">this</span>.context = context;
        <span class="hljs-keyword">this</span>.location = location;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Single&lt;String&gt; <span class="hljs-title">getLastLocation</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> Single.create(<span class="hljs-keyword">this</span>::subscribeOnLocation);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">subscribeOnLocation</span><span class="hljs-params">(SingleEmitter&lt;String&gt; e)</span> </span>{<font></font>
        Geocoder geocoder = <span class="hljs-keyword">new</span> Geocoder(context, Locale.getDefault());<font></font>
<font></font>
        String errorMessage = <span class="hljs-string">""</span>;<font></font>
<font></font>
        List&lt;Address&gt; addresses = <span class="hljs-keyword">null</span>;<font></font>
<font></font>
        <span class="hljs-keyword">try</span> {<font></font>
<font></font>
<span class="hljs-comment">//    </span><font></font>
            addresses = geocoder.getFromLocation(<font></font>
                    location.getLatitude(),<font></font>
                    location.getLongitude(),<font></font>
                    <span class="hljs-comment">// In this sample, get just a single address.</span>
                    <span class="hljs-number">1</span>);<font></font>
        } <span class="hljs-keyword">catch</span> (IOException ioException) {
<span class="hljs-comment">//,      I/O.</span><font></font>
            errorMessage = context.getString(R.string.service_not_available);<font></font>
            Log.e(TAG, errorMessage, ioException);<font></font>
<font></font>
        } <span class="hljs-keyword">catch</span> (IllegalArgumentException illegalArgumentException) {<font></font>
<font></font>
<span class="hljs-comment">// ,      </span><font></font>
            errorMessage = context.getString(R.string.invalid_lat_long_used);<font></font>
            Log.e(TAG, errorMessage + <span class="hljs-string">". "</span> +
                    <span class="hljs-string">"Latitude = "</span> + location.getLatitude() +
                    <span class="hljs-string">", Longitude = "</span> +<font></font>
                    location.getLongitude(), illegalArgumentException);<font></font>
        }<font></font>
<font></font>
<span class="hljs-comment">//  ,    </span>
        <span class="hljs-keyword">if</span> (addresses == <span class="hljs-keyword">null</span> || addresses.size() == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> (errorMessage.isEmpty()) {<font></font>
                errorMessage = context.getString(R.string.no_address_found);<font></font>
                Log.e(TAG, errorMessage);<font></font>
<font></font>
            }<font></font>
<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            Address address = addresses.get(<span class="hljs-number">0</span>);<font></font>
            ArrayList&lt;String&gt; addressFragments = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<font></font>
<font></font>
<span class="hljs-comment">//      .</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt;= address.getMaxAddressLineIndex(); i++) {<font></font>
                e.onSuccess(address.getAddressLine(i));<font></font>
            }<font></font>
<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja484088/index.html">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ’ãƒƒãƒˆãƒ‘ãƒ¬ãƒ¼ãƒ‰ï¼ˆãƒªãƒ¼ã‚¯ã‹ã‚‰ã®50å„„ã¾ã§ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®åˆ†æï¼‰</a></li>
<li><a href="../ja484090/index.html">ãƒ­ã‚·ã‚¢ã®ãƒã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã®æ–°ã—ã„ITã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£</a></li>
<li><a href="../ja484092/index.html">å°‘ã—æœã‚’ç€ãŸç‹å­ã¨è²´æ—</a></li>
<li><a href="../ja484094/index.html">DOTSã§3äººç§°ã‚¾ãƒ³ãƒ“ã‚·ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚’ä½œæˆã™ã‚‹</a></li>
<li><a href="../ja484096/index.html">2ã¤ã®ãƒ¤ã‚³ã‚ºãƒ³ã€ã¾ãŸã¯ã‚«ã‚µãƒ³ãƒ‰ãƒ©å¯¾HBaseã®æˆ¦ã„ã€‚Sberbankãƒãƒ¼ãƒ ã®çµŒé¨“</a></li>
<li><a href="../ja484108/index.html">Etherblade.netã‚«ãƒ—ã‚»ãƒ«åŒ–è£…ç½®ã¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆç½®æ›ï¼ˆãƒ‘ãƒ¼ãƒˆ2ï¼‰</a></li>
<li><a href="../ja484112/index.html">é£›è¡Œæ©Ÿã‚’ãƒãƒƒã‚¯ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã‹</a></li>
<li><a href="../ja484114/index.html">ãƒãƒ¼ãƒ«ã‚°ãƒ©ãƒãƒ ã®ã‚¨ãƒƒã‚»ã‚¤ã®143ã®ç¿»è¨³ã®æŠœç²‹ï¼ˆ184ã‹ã‚‰ï¼‰</a></li>
<li><a href="../ja484118/index.html">1æœˆ32æ—¥</a></li>
<li><a href="../ja484120/index.html">ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®è·æ¥­ã§æœ€ã‚‚æ±‚ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‚¹ã‚­ãƒ«</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>