<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÅÔ∏è üíÇ ü§∏üèΩ Delta: plataforma de enriquecimento e sincroniza√ß√£o de dados üóÇÔ∏è üë´ üë®üèø‚Äçüíª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Antecipando o lan√ßamento de um novo fluxo no curso de Data Engineer, preparamos uma tradu√ß√£o de material interessante.
 
 
 
 
 
 Vis√£o geral
 Falarem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Delta: plataforma de enriquecimento e sincroniza√ß√£o de dados</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/487460/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Antecipando o lan√ßamento de um novo fluxo no curso de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Engineer,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> preparamos uma tradu√ß√£o de material interessante.</font></font><br>
</b></i><br>
<br>
<img src="https://habrastorage.org/webt/pg/_y/c6/pg_yc6ttjvtbnkh2-rhe_eq1dnw.png"><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vis√£o geral</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Falaremos sobre um padr√£o bastante popular pelo qual os aplicativos usam v√°rios reposit√≥rios de dados, nos quais cada reposit√≥rio √© usado para seus pr√≥prios prop√≥sitos, por exemplo, armazenar a forma can√¥nica de dados (MySQL, etc.), fornecer recursos avan√ßados de pesquisa (ElasticSearch etc.) .), armazenamento em cache (Memcached, etc.) e outros. Normalmente, ao usar v√°rios armazenamentos de dados, um deles funciona como armazenamento principal e o outro como armazenamento derivado. O √∫nico problema √© como sincronizar esses armazenamentos de dados.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinamos v√°rios padr√µes diferentes que tentavam resolver o problema de sincronizar v√°rios reposit√≥rios, como entrada dupla, transa√ß√µes distribu√≠das etc. </font><font style="vertical-align: inherit;">No entanto, essas abordagens t√™m limita√ß√µes significativas em termos de uso, confiabilidade e manuten√ß√£o na vida real. </font><font style="vertical-align: inherit;">Al√©m da sincroniza√ß√£o de dados, alguns aplicativos tamb√©m precisam enriquecer os dados chamando servi√ßos externos.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para resolver esses problemas, o Delta foi desenvolvido. </font><font style="vertical-align: inherit;">A Delta √© uma plataforma consistente e orientada a eventos para sincronizar e enriquecer dados.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solu√ß√µes existentes</font></font></h3><br>
 <h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrada dupla</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Para sincronizar dois armazenamentos de dados, voc√™ pode usar a grava√ß√£o dupla, que grava em um armazenamento e, em seguida, grava imediatamente em outro. O primeiro registro pode ser repetido e o segundo pode ser interrompido se o primeiro falhar ap√≥s esgotar o n√∫mero de tentativas. No entanto, dois reposit√≥rios de dados podem parar de sincronizar se a grava√ß√£o no segundo reposit√≥rio falhar. Esse problema geralmente √© resolvido com a cria√ß√£o de um procedimento de recupera√ß√£o que pode periodicamente transferir novamente os dados do primeiro armazenamento para o segundo ou fazer isso apenas se forem encontradas diferen√ßas nos dados. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A execu√ß√£o de um procedimento de recupera√ß√£o √© um trabalho espec√≠fico que n√£o pode ser reutilizado. </font><font style="vertical-align: inherit;">Al√©m disso, os dados entre armazenamentos permanecem fora de sincronia at√© que o procedimento de recupera√ß√£o seja conclu√≠do. </font><font style="vertical-align: inherit;">A solu√ß√£o √© complicada se mais de dois reposit√≥rios de dados forem usados. </font><font style="vertical-align: inherit;">Por fim, o procedimento de recupera√ß√£o pode adicionar estresse √† fonte de dados original.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela de log de altera√ß√µes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Quando ocorrem altera√ß√µes em um conjunto de tabelas (por exemplo, inserindo, atualizando e excluindo registros), os registros de altera√ß√µes s√£o adicionados √† tabela de log como parte da mesma transa√ß√£o. Outro encadeamento ou processo constantemente solicita eventos da tabela de log e os grava em um ou mais armazenamentos de dados, quando se torna necess√°rio excluir eventos da tabela de log ap√≥s confirmar o registro de todos os armazenamentos. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Esse padr√£o deve ser implementado como uma biblioteca e, idealmente, sem alterar o c√≥digo do aplicativo que o utiliza. Em um ambiente poliglota, a implementa√ß√£o dessa biblioteca deve existir em qualquer idioma necess√°rio, mas √© muito dif√≠cil garantir a coordena√ß√£o das fun√ß√µes e do comportamento entre os idiomas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro problema est√° na obten√ß√£o de altera√ß√µes de esquema em sistemas que n√£o suportam altera√ß√µes de esquema transacional [1] [2], como o MySQL. </font><font style="vertical-align: inherit;">Portanto, um modelo para fazer uma altera√ß√£o (por exemplo, alterar um esquema) e grav√°-lo na tabela de log de altera√ß√µes nem sempre funcionar√°.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transa√ß√µes Distribu√≠das</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 As transa√ß√µes distribu√≠das podem ser usadas para dividir uma transa√ß√£o entre v√°rios armazenamentos de dados heterog√™neos, para que a opera√ß√£o seja confirmada em todos os armazenamentos utilizados ou n√£o confirmada em nenhum deles. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As transa√ß√µes distribu√≠das s√£o um grande problema para data warehouses heterog√™neos. </font><font style="vertical-align: inherit;">Por sua natureza, eles s√≥ podem confiar no menor denominador comum dos sistemas envolvidos. </font><font style="vertical-align: inherit;">Por exemplo, transa√ß√µes XA bloqueiam a execu√ß√£o se ocorrer uma falha durante o processo de prepara√ß√£o. </font><font style="vertical-align: inherit;">Al√©m disso, o XA n√£o fornece detec√ß√£o de conflito e n√£o suporta esquemas otimistas de gerenciamento de simultaneidade. </font><font style="vertical-align: inherit;">Al√©m disso, alguns sistemas como o ElasticSearch n√£o suportam XA ou qualquer outro modelo de transa√ß√£o heterog√™neo. </font><font style="vertical-align: inherit;">Assim, garantir a atomicidade da grava√ß√£o em v√°rias tecnologias de armazenamento de dados continua sendo uma tarefa muito dif√≠cil para aplicativos [3].</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Delta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 O Delta foi projetado para lidar com as limita√ß√µes das solu√ß√µes de sincroniza√ß√£o de dados existentes e tamb√©m enriquece os dados em tempo real. Nosso objetivo era abstrair todos esses pontos complexos dos desenvolvedores de aplicativos, para que eles pudessem se concentrar totalmente na implementa√ß√£o da funcionalidade do neg√≥cio. A seguir, descreveremos a "Pesquisa de filme", ‚Äã‚Äão caso de uso real do Delta da Netflix. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Netflix faz uso extensivo da arquitetura de microsservi√ßo e cada microsservi√ßo normalmente atende a um tipo de dados. As principais informa√ß√µes sobre o filme s√£o retiradas em um microsservi√ßo chamado Movie Service, e os dados relacionados, como informa√ß√µes sobre produtores, atores, fornecedores e outros, s√£o gerenciados por v√°rios outros microsservi√ßos (ou seja, Deal Service, Talent Service e Vendor Service).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os usu√°rios comerciais do Netflix Studios geralmente precisam pesquisar por v√°rios crit√©rios para filmes, e √© por isso que √© muito importante que eles possam pesquisar todos os dados relacionados aos filmes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes da Delta, a equipe de busca de filmes precisava recuperar dados de v√°rios microsservi√ßos antes de indexar os dados do filme. Al√©m disso, a equipe teve que desenvolver um sistema que atualizasse periodicamente o √≠ndice de pesquisa, solicitando altera√ß√µes de outros microsservi√ßos, mesmo que n√£o houvesse altera√ß√µes. Esse sistema rapidamente ficou cheio de complexidade e ficou dif√≠cil de manter. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tc/kb/t9/tckbt9vwkwiqmilkt4y18gjqbjs.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 1. Sistema de vota√ß√£o antes da Delta</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Depois de usar o Delta, o sistema foi simplificado para um sistema orientado a eventos, conforme mostrado na figura a seguir. Os eventos do CDC (Change-Data-Capture) s√£o enviados aos t√≥picos Keystone Kafka usando o Delta-Connector. Um aplicativo Delta criado usando o Delta Stream Processing Framework (baseado no Flink) recebe eventos CDC do t√≥pico, os enriquece, invocando outros microsservi√ßos e, finalmente, passa os dados enriquecidos para o √≠ndice de pesquisa no Elasticsearch. Todo o processo ocorre quase em tempo real, ou seja, assim que as altera√ß√µes s√£o registradas no data warehouse, os √≠ndices de pesquisa s√£o atualizados. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bz/lg/t4/bzlgt47eyfuw8wlbzv2dsx6i3ge.png"><br>
 <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 2. Pipeline de dados usando Delta</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Nas se√ß√µes a seguir, descrevemos o trabalho do Delta-Connector, que se conecta ao reposit√≥rio e publica eventos do CDC no n√≠vel de transporte, que √© uma infraestrutura de transmiss√£o de dados em tempo real que direciona eventos do CDC para t√≥picos do Kafka. </font><font style="vertical-align: inherit;">E no final, falaremos sobre a estrutura de processamento de fluxo Delta que os desenvolvedores de aplicativos podem usar para a l√≥gica de processamento e enriquecimento.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CDC (captura de dados alterados)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Desenvolvemos um servi√ßo CDC chamado Delta-Connector, que pode capturar altera√ß√µes confirmadas do armazenamento de dados em tempo real e grav√°-las no fluxo. </font><font style="vertical-align: inherit;">Altera√ß√µes em tempo real s√£o obtidas do log de transa√ß√µes e despejos de armazenamento. </font><font style="vertical-align: inherit;">Os despejos s√£o usados ‚Äã‚Äãporque os logs de transa√ß√µes geralmente n√£o armazenam todo o hist√≥rico de altera√ß√µes. </font><font style="vertical-align: inherit;">As altera√ß√µes geralmente s√£o serializadas como eventos Delta, para que o destinat√°rio n√£o precise se preocupar com a origem da mudan√ßa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Delta-Connector suporta v√°rios recursos adicionais, como:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacidade de gravar sa√≠da personalizada ap√≥s Kafka.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A capacidade de ativar despejos manuais a qualquer momento para todas as tabelas, uma tabela espec√≠fica ou para determinadas chaves prim√°rias.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os despejos podem ser coletados por peda√ßos, portanto, n√£o h√° necessidade de iniciar tudo de novo no caso de uma falha.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o h√° necessidade de colocar bloqueios nas tabelas, o que √© muito importante para que o tr√°fego de grava√ß√£o no banco de dados nunca seja bloqueado pelo nosso servi√ßo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alta disponibilidade devido a backups nas zonas de disponibilidade da AWS.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualmente, oferecemos suporte ao MySQL e Postgres, incluindo implanta√ß√µes no AWS RDS e Aurora. </font><font style="vertical-align: inherit;">Tamb√©m apoiamos Cassandra (multi-master). </font><font style="vertical-align: inherit;">Voc√™ pode aprender mais sobre o Delta-Connector neste </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka e n√≠vel de transporte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A camada Delta Event Transport √© constru√≠da no servi√ßo de mensagens da plataforma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keystone</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, historicamente, a publica√ß√£o na Netflix foi otimizada para maior disponibilidade, em vez de longevidade (consulte o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Um compromisso foi a inconsist√™ncia potencial dos dados do broker em v√°rios cen√°rios de fronteira. Por exemplo, a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elei√ß√£o de l√≠der impuro</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© respons√°vel por garantir que o destinat√°rio potencialmente duplique ou perca eventos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com a Delta, quer√≠amos obter garantias mais fortes de durabilidade, a fim de garantir a entrega de eventos CDC para armazenamentos de derivativos. Para fazer isso, propusemos um cluster Kafka especialmente projetado como um objeto de primeira classe. Voc√™ pode observar algumas configura√ß√µes do broker na tabela abaixo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/70/hn/ri70hnpnr5wmiedci0_n5clwlwc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos clusters Keystone Kafka, a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elei√ß√£o de l√≠der impuro</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geralmente </font><i><font style="vertical-align: inherit;">√©</font></i><font style="vertical-align: inherit;"> ativada para garantir a disponibilidade do editor. Isso pode resultar na perda de mensagens se uma r√©plica n√£o sincronizada for selecionada como l√≠der. Para o novo cluster Kafka altamente confi√°vel, a op√ß√£o de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elei√ß√£o de l√≠der impuro</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© </font><font style="vertical-align: inherit;">desabilitada para evitar a perda de mensagens. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m aumentamos o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fator de replica√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de 2 para 3 e o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√≠nimo de r√©plicas de sincroniza√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de 1 a 2. Os editores que est√£o gravando neste cluster exigem respostas de todos os outros, garantindo que 2 de 3 r√©plicas tenham as mensagens mais atualizadas enviadas pelo editor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando a inst√¢ncia do broker sai, a nova inst√¢ncia substitui a antiga. No entanto, o novo intermedi√°rio precisar√° acompanhar r√©plicas n√£o sincronizadas, o que pode levar v√°rias horas. Para reduzir o tempo de recupera√ß√£o desse cen√°rio, come√ßamos a usar a Amazon Elastic Block Store em vez de discos de corretores locais. Quando uma nova inst√¢ncia substitui uma inst√¢ncia conclu√≠da do broker, ela anexa o volume EBS que a inst√¢ncia conclu√≠da tinha e come√ßa a acompanhar as novas mensagens. Esse processo reduz o tempo para eliminar o backlog de v√°rias horas para v√°rios minutos, j√° que a nova inst√¢ncia n√£o precisa mais ser replicada de um estado vazio. Em geral, os ciclos de vida separados do armazenamento e do intermedi√°rio reduzem significativamente o efeito da altera√ß√£o do intermedi√°rio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aumentar ainda mais a garantia da entrega de dados, usamos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">um sistema de rastreamento de mensagens</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para detectar qualquer perda de mensagens em condi√ß√µes extremas (por exemplo, sincroniza√ß√£o do rel√≥gio no l√≠der da se√ß√£o).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estrutura de processamento de fluxo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O n√≠vel de processamento na Delta √© baseado na plataforma Netflix SPaaS, que permite a integra√ß√£o do Apache Flink com o ecossistema da Netflix. A plataforma fornece uma interface com o usu√°rio que controla a implanta√ß√£o de tarefas Flink e a orquestra√ß√£o de clusters Flink na parte superior de nossa plataforma de gerenciamento de cont√™ineres Titus. A interface tamb√©m gerencia as configura√ß√µes de tarefas e permite que os usu√°rios fa√ßam altera√ß√µes dinamicamente na configura√ß√£o sem precisar recompilar as tarefas do Flink. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Delta fornece uma estrutura de processamento de fluxo para dados </font><b><i><font style="vertical-align: inherit;">baseados</font></i></b><font style="vertical-align: inherit;"> em Flink e SPaaS, que usa </font></font><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anota√ß√µes</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL (Domain Specific Language) para abstrair detalhes t√©cnicos. Por exemplo, para determinar a etapa pela qual os eventos ser√£o enriquecidos chamando servi√ßos externos, os usu√°rios precisam escrever a pr√≥xima DSL e a estrutura criar√° um modelo baseado nela que o Flink executar√°. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fu/l2/kn/ful2knsuaqitsat9p69qhitq-a4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 3. Exemplo de enriquecimento de DSL no Delta</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A estrutura de processamento n√£o apenas reduz a curva de aprendizado, mas tamb√©m fornece fun√ß√µes gerais de processamento de fluxo, como desduplica√ß√£o, esquematiza√ß√£o, bem como flexibilidade e toler√¢ncia a falhas para resolver problemas comuns no trabalho.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Delta Stream Processing Framework consiste em dois m√≥dulos principais, o m√≥dulo DSL e API e o m√≥dulo Runtime. O m√≥dulo DSL e API fornece as APIs DSL e UDF (Fun√ß√£o Definida pelo Usu√°rio) para que os usu√°rios possam gravar sua pr√≥pria l√≥gica de processamento (como filtragem ou transforma√ß√µes). O m√≥dulo Runtime fornece uma implementa√ß√£o do analisador DSL, que constr√≥i uma representa√ß√£o interna das etapas de processamento nos modelos DAG. O componente Execution interpreta os modelos DAG para inicializar as instru√ß√µes reais do Flink e, finalmente, iniciar o aplicativo Flink. A arquitetura da estrutura √© ilustrada na figura a seguir. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9_/gm/on/9_gmono77zxzhhorwhyghdkgdqq.png"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 4. Arquitetura da Delta Stream Processing Framework</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Essa abordagem tem v√°rias vantagens:</font></font><br>
<br>
<ul>
<li>     -      Flink   SPaaS.</li>
<li>      ,         -     (UDF).</li>
<li>  Delta   ,             ,     .</li>
</ul><br>
<br>
<h3>  </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Delta est√° em produ√ß√£o h√° mais de um ano e desempenha um papel fundamental em muitos aplicativos do Netflix Studio. </font><font style="vertical-align: inherit;">Ajudou as equipes a implementar casos de uso, como indexa√ß√£o de pesquisa, armazenamento de dados e fluxos de trabalho orientados a eventos. </font><font style="vertical-align: inherit;">A seguir, √© apresentada uma vis√£o geral da arquitetura de alto n√≠vel da plataforma Delta. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/im/rf/dq/imrfdqholl1umfrm_pb4nqwy064.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 5. A arquitetura de alto n√≠vel da Delta.</font></font></i><br>
 <br>
 <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agradecimentos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Gostar√≠amos de agradecer √†s seguintes pessoas que contribu√≠ram para a cria√ß√£o e desenvolvimento da Delta na Netflix: Allen Wang, Charles Zhao, Jaebin Yoon, Josh Snyder, Kasturi Chatterjee, Mark Cho, Olof Johansson, Piyush Goyal, Prashanth Ramdas, Raghuram Onti Srinivasan, Sandeep Gupta , Steven Wu, Tharanga Gamaethige, Yun Wang e Zhenzhong Xu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fontes</font></font></h3><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dev.mysql.com/doc/refman/5.7/en/implicit-commit.html</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dev.mysql.com/doc/refman/5.7/en/cannot-roll-back.html</font></font></a></li>
<li>Martin Kleppmann, Alastair R. Beresford, Boerge Svingen: Online event processing. Commun. ACM 62(5): 43‚Äì49 (2019). DOI: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">doi.org/10.1145/3312527</a></li>
</ol><br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a>: ¬´Data Build Tool   Amazon Redshift¬ª.</b></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt487460/">https://habr.com/ru/post/pt487460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487444/index.html">‚ÄúEnquanto tomava caf√©, faturava e recebia um pagamento‚Äù - inova√ß√µes que permitem a realiza√ß√£o de neg√≥cios 24 horas por dia, 7 dias por semana</a></li>
<li><a href="../pt487446/index.html">Uma empresa pode "possuir" cores?</a></li>
<li><a href="../pt487448/index.html">Superpot√™ncias de materiais ultrafinos: na ci√™ncia dos materiais, 2D √© o novo 3D</a></li>
<li><a href="../pt487450/index.html">Configuramos o WireGuard em um roteador Mikrotik executando o OpenWrt</a></li>
<li><a href="../pt487454/index.html">Quem s√£o essas pessoas? Por que eles precisam de mim? e outros problemas do scrum master</a></li>
<li><a href="../pt487462/index.html">Biblioteca Webix JavaScript atrav√©s dos olhos de um iniciante. Parte 4. Trabalhe com dados. CRUD</a></li>
<li><a href="../pt487470/index.html">Calibry: avan√ßo em 3D avan√ßo em pre√ßo</a></li>
<li><a href="../pt487486/index.html">Sega Dreamcast Anatomy: Console Second Life</a></li>
<li><a href="../pt487488/index.html">Casos para aplicar ferramentas de an√°lise de anomalias de rede: detectando a dissemina√ß√£o de c√≥digo malicioso</a></li>
<li><a href="../pt487490/index.html">Transforma√ß√£o XSL no MS SQL sem CLR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>