<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò™ üëÇüèæ ü§© oVirt in 2 hours. Part 1. Open Failover Virtualization Platform üè¶ üëäüèø ü§≥üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction
 Open source project oVirt is a free enterprise-level virtualization platform. Scrolling through habr, he found that oVirt is not covered...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>oVirt in 2 hours. Part 1. Open Failover Virtualization Platform</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501166/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Open source project </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oVirt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a free enterprise-level virtualization platform. Scrolling through habr, he found that </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oVirt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is not covered as widely as it deserves. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oVirt is actually an upstream for the Red Hat Virtualization commercial system (RHV, formerly RHEV), growing under the Red Hat wing. To avoid confusion, this is </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the same as CentOS vs RHEL, the model is closer to Fedora vs RHEL. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Under the hood - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KVM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the web interface is used for control. It is based on OS RHEL / CentOS 7. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oVirt can be used for both ‚Äútraditional‚Äù server and desktop virtualization (VDI), unlike VMware solution, both systems can coexist in one complex. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Project well</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is documented</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , has long reached maturity for productive use and is ready for high loads. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This article is the first in a series on how to build a working failover cluster. </font><font style="vertical-align: inherit;">After going through them, we will get a fully working system in a short (about 2 hours) time, although a number of issues, of course, cannot be solved, I will try to cover them in the following articles.</font></font><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have been using it for several years, we started with version 4.1. </font><font style="vertical-align: inherit;">Our industrial system now lives on the 10th generation HPE Synergy 480 and ProLiant BL460c with Xeon Gold CPU. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the time of writing, the current version is 4.3.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction - We are here</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation of the manager (ovirt-engine) and hypervisors (hosts)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Additional settings</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Basic operations</font></font></a></li>
</ol><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Functional Features</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are 2 main entities in oVirt: ovirt-engine and ovirt-host (s). For those who are familiar with VMware products, oVirt as a platform as a whole is vSphere, ovirt-engine - the control layer - performs the same functions as vCenter, and ovirt-host is a hypervisor like ESX (i). Because vSphere is a very popular solution, sometimes I will give a comparison with it. </font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/d82/496/9a3/d824969a3b631cc28c6ed5c85efee8a3.png" alt="oVirt Dashboard"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fig. 1 - oVirt control panel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As guest machines, most Linux distributions and versions of Windows are supported. For guest machines, there are agents and optimized virtual devices and virtio drivers, primarily a disk controller and a network interface.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To implement a fault-tolerant solution and all the interesting features you will need shared storage. </font><font style="vertical-align: inherit;">Both block FC, FCoE, iSCSI, file NFS storages, etc. are supported. To implement a fault-tolerant solution, the storage system must also be fault-tolerant (at least 2 controllers, multipassing).</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using local storages is possible, but by default only shared storages are suitable for a real cluster. </font><font style="vertical-align: inherit;">Local storages make the system a disparate set of hypervisors, and even if there is a shared storage, the cluster cannot be assembled. </font><font style="vertical-align: inherit;">The most correct way is diskless machines with boot from SAN, or disks of minimal size. </font><font style="vertical-align: inherit;">Probably, through the vdsm hook, it is possible to assemble from local drives Software Defined Storage (e.g. Ceph) and present its VM, but seriously did not consider it.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Architecture</font></font></h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/e84/780/b8c/e84780b8cabaa37be0fbe136725dcdf6.png" alt="arch"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fig. </font><font style="vertical-align: inherit;">2 - oVirt architecture. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For more information on architecture, see the </font><font style="vertical-align: inherit;">developer‚Äôs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8fe/1ce/052/8fe1ce052c9dcd6ccc9bec1750ce48c0.png" alt="dc"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fig. </font><font style="vertical-align: inherit;">3 - oVirt objects. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The top element in the hierarchy is the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Center</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">It determines whether shared or local storage is used, as well as the set of functions used (compatibility, from 4.1 to 4.3). </font><font style="vertical-align: inherit;">May be one or more. </font><font style="vertical-align: inherit;">For many options, using the Data Center by default is Default. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Data Center consists of one or more </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clusters</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The cluster determines the type of processor, migration policies, etc. For small installations, you can also limit yourself to the Default cluster. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The cluster, in turn, consists of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'s doing the main work - they carry virtual machines, storages are connected to them. </font><font style="vertical-align: inherit;">A cluster assumes 2 or more hosts. </font><font style="vertical-align: inherit;">Although it is technically possible to make a cluster with a 1st host, but this is of no practical use. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OVirt supports many functions, including </font><font style="vertical-align: inherit;">live migration of virtual machines between hypervisors (live migration) and storage (storage migration), desktop virtualization (virtual desktop infrastructure) with VM pools, statefull and stateless VMs, support for NVidia Grid vGPU, import from vSphere, KVM, there is a powerful </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and much more . </font><font style="vertical-align: inherit;">All these features are available without royalties, and if necessary, support can be obtained from Red Hat through regional partners.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">About RHV prices</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The cost is not high compared to VMware, only support is bought - without requiring the purchase of the license itself. </font><font style="vertical-align: inherit;">Support is purchased only on hypervisors; the ovirt-engine, unlike vCenter Server, does not require expenses.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculation example for the 1st year of ownership</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consider a cluster of 4 2-socket machines and retail prices (without project discounts). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A standard RHV subscription </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">costs $ 999</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> per socket / year (premium 365/24/7 - $ 1499), total 4 * 2 * $ 999 = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 7992</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VSphere Price</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMware vCenter Server Standard $ 10,837.13 per instance, plus Basic $ 2,625.41 subscription (Production - $ 3,125.39);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMware vSphere Standard $ 1,164.15 + Basic Subscription $ 552.61 (Production $ 653.82);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VMware vSphere Enterprise Plus $ 6,309.23 + Basic Subscription $ 1,261.09 (Production $ 1,499.94).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total: 10 837.13 + 2 625.41 + 4 * 2 * (1 164.15 + 552.61) = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ 27 196.62</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for the youngest option. </font><font style="vertical-align: inherit;">The difference is about 3.5 times! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In oVirt, all functions are available without restrictions.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brief specs and highs</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System requirements</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The hypervisor requires a CPU with hardware virtualization enabled, the minimum amount of RAM to start is 2 GiB, the recommended storage capacity for the OS is 55 GiB (for the most part for magazines, etc., the OS itself is small). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
More details </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Engine, the</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> minimum requirements are 2 cores / 4 GiB of RAM / 25 GiB of storage. </font><font style="vertical-align: inherit;">Recommended - from 4 cores / 16 GiB of RAM / 50 GiB of storage. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As with any system, there are restrictions on volumes and quantities, most of which exceed the capabilities of the available mass commercial servers. </font><font style="vertical-align: inherit;">So, a pair of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intel Xeon Gold 6230</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> can address 2 TiB of RAM and gives 40 cores (80 threads), which is less than even the limits of one VM.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Virtual Machine Maximums:</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum concurrently running virtual machines: Unlimited;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum virtual CPUs per virtual machine: 384;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum memory per virtual machine: 4 TiB;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum single disk size per virtual machine: 8 TiB.</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Host Maximums:</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logical CPU cores or threads: 768;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM: 12 TiB;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Number of hosted virtual machines: 250;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simultaneous live migrations: 2 incoming, 2 outgoing;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Live migration bandwidth: Default to 52 MiB (~ 436 Mb) per migration when using the legacy migration policy. </font><font style="vertical-align: inherit;">Other policies use adaptive throughput values ‚Äã‚Äãbased on the speed of the physical device. </font><font style="vertical-align: inherit;">QoS policies can limit migration bandwidth.</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Manager Logical Entity Maximums:</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In 4.3, the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">following limits</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exist </font><font style="vertical-align: inherit;">.</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data center</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum data center count: 400;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum host count: 400 supported, 500 tested;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum VM count: 4000 supported, 5000 tested;</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cluster</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum cluster count: 400;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum host count: 400 supported, 500 tested;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maximum VM count: 4000 supported, 5000 tested;</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Network</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logical networks / cluster: 300;</font></font></li>
<li>SDN/external networks: 2600 tested, no enforced limit;</li>
</ul></li>
<li>Storage<br>
 <ul>
<li>Maximum domains: 50 supported, 70 tested;</li>
<li>Hosts per domain: No limit;</li>
<li>Logical volumes per block domain (more): 1500;</li>
<li>Maximum number of LUNs (more): 300;</li>
<li>Maximum disk size: 500 TiB (limited to 8 TiB by default).</li>
</ul></li>
</ul><br>
<br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As already mentioned, oVirt is built from 2 basic elements - ovirt-engine (control) and ovirt-host (hypervisor). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Engine can be located both outside the platform itself (standalone Manager - it can be a VM running on another platform or a separate hypervisor and even a physical machine), and on the platform itself (self-hosted engine, similar to VMware's VCSA approach). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The hypervisor can be installed both on a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regular OS RHEL / CentOS 7</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (EL Host), and on a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">specialized minimum OS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (oVirt-Node, based on el7). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The hardware requirements for all options are approximately the same. </font></font><br>
<img src="https://habrastorage.org/getpro/habr/post_images/2d4/6ee/e87/2d46eee87509b852871b0a247005497d.png" alt="Standard architecture"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fig. 4 - standard architecture. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/894/aaa/576/894aaa576d2f26123a3b3149a5e18159.png" alt="Self Hosted Engine Architecture"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fig. 5 - Self-hosted Engine architecture. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For myself, I chose the option standalone Manager and EL Hosts:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standalone Manager is a little easier with startup problems, there is no chicken and egg dilemma (as for VCSA, you won‚Äôt run it until at least one host has fully risen), but there is a dependence on another system </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EL Host provides all the power of the OS, which is useful for external monitoring, debugging, troubleshooting, etc.</font></font></li>
</ul><br>
<i><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> However, over the entire period of operation this was not required, even after a serious power accident. </font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But closer to the point! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the experiment, it is possible to free a pair of ProLiant BL460c G7 blades with the Xeon¬Æ CPU. </font><font style="vertical-align: inherit;">We will reproduce the installation process on them. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The nodes will be named ovirt.lab.example.com, kvm01.lab.example.com and kvm02.lab.example.com. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We proceed directly to the</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> installation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501154/index.html">We measure temperature without ADC</a></li>
<li><a href="../en501156/index.html">HackTheBox. Passage of Obscurity. OS Command Injection and Race Condition</a></li>
<li><a href="../en501158/index.html">Making Android View Binding convenient with Kotlin</a></li>
<li><a href="../en501162/index.html">Comparison of Russian rap scenes using R and Text Mining techniques. Noize Mc and Kasta vs Pharaoh and Morgenshtern</a></li>
<li><a href="../en501164/index.html">Visualization of network topologies, or why else Python # 2 network engineer</a></li>
<li><a href="../en501168/index.html">Orderlies save themselves - do they save, save, burn out?</a></li>
<li><a href="../en501170/index.html">The best way to work with the DOM</a></li>
<li><a href="../en501172/index.html">My Mikrosh computer: continue the week of nostalgia</a></li>
<li><a href="../en501178/index.html">How watching porn affects the productivity of work and study</a></li>
<li><a href="../en501180/index.html">[Post-Question] Do you need an IT movement for FACTS about coronavirus and ‚Äúside effects‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>