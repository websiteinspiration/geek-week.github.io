<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚗 💘 👈🏿 Beherrschung der Entwicklung durch Testen in Android mithilfe von UI-Tests ⌚️ 🤵🏿 🤹🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo alle zusammen. Im Vorgriff auf den Start einer Reihe neuer Grund- und Fortgeschrittenenkurse zur Android-Entwicklung haben wir eine Übersetzung ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Beherrschung der Entwicklung durch Testen in Android mithilfe von UI-Tests</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/492712/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo alle zusammen. </font><font style="vertical-align: inherit;">Im Vorgriff auf den Start einer Reihe neuer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grund-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fortgeschrittenenkurse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zur Android-Entwicklung haben wir eine Übersetzung von interessantem Material vorbereitet.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/0i/ef/lj/0iefljfwnqnrpvgj9hizrlqeatg.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im letzten Jahr der Arbeit des Android-Entwicklungsteams bei Buffer haben wir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viel über die Sauberkeit unseres Projekts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und die Verbesserung seiner Stabilität gesprochen. </font><font style="vertical-align: inherit;">Einer der Faktoren war die Einführung () von Tests, die uns, wie wir bereits herausgefunden haben, dabei helfen, Regressionen in unserem Code zu vermeiden und uns mehr Vertrauen in die von uns bereitgestellten Funktionen zu geben. </font><font style="vertical-align: inherit;">Und jetzt, wenn wir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neue Produkte in Buffer auf den Markt bringen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , möchten wir sicherstellen, dass bei ihnen der gleiche Ansatz angewendet wird - nur damit wir uns nicht in der gleichen Situation wie zuvor befinden.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hintergrund</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Schreiben von Komponententests für Pufferanwendungen haben wir uns stets an die Entwicklungspraxis durch Tests gehalten (Test-Driven-Development - im Folgenden: TDD). </font><font style="vertical-align: inherit;">Es gibt viele Ressourcen darüber, was TDD ist, welche Vorteile es hat und woher sie stammen, aber wir werden uns nicht mit diesem Thema befassen, da es im Internet viele Informationen gibt. </font><font style="vertical-align: inherit;">Auf hohem Niveau stelle ich persönlich einige davon fest:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzierte Entwicklungszeit</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einfacherer, sauberer und wartbarer Code</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zuverlässigerer Code mit mehr Vertrauen in unsere Arbeit.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Höhere Testabdeckung (dies scheint offensichtlich zu sein)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber bis vor kurzem haben wir die Prinzipien von TDD nur in Form von Komponententests für unsere Implementierungen befolgt, die nicht auf der Benutzeroberfläche basierten ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c8/df/_w/c8df_wzud2rosic5vw82xx1axyg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich weiß, ich weiß ... Wir hatten immer die Angewohnheit, UI-Tests zu schreiben, nachdem die Implementierung abgeschlossen war - und das macht keinen Sinn. Wir haben TDD für das Backend überwacht, damit der von uns geschriebene Code den Anforderungen der Tests entspricht. Bei Tests der Benutzeroberfläche schreiben wir jedoch Tests, die die Implementierung einer bestimmten Funktion erfüllen. Wie Sie sehen können, ist dies ein bisschen umstritten, und in gewisser Weise geht es darum, warum TDD überhaupt verwendet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier möchte ich überlegen, warum dies so ist und wie wir mit Veränderungen experimentieren. Aber warum achten wir überhaupt darauf?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es war immer schwierig, mit vorhandenen Aktivitäten in unserer Anwendung zu arbeiten, da diese so geschrieben sind. </font><font style="vertical-align: inherit;">Dies ist keine vollständige Entschuldigung, aber ihre vielen Abhängigkeiten, Verantwortlichkeiten und engen Beziehungen machen es äußerst schwierig, sie zu testen. </font><font style="vertical-align: inherit;">Für die neuen Aktivitäten, die wir aus Gewohnheit hinzugefügt haben, habe ich selbst immer UI-Tests nach der Implementierung geschrieben - außer Gewohnheit gab es keinen anderen Grund dafür. </font><font style="vertical-align: inherit;">Bei der Erstellung unseres </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorlagencodes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , der für neue Projekte bereit ist, habe ich jedoch über eine Änderung nachgedacht. </font><font style="vertical-align: inherit;">Und Sie werden froh sein zu wissen, dass diese Gewohnheit gebrochen wurde, und jetzt arbeiten wir an uns selbst und untersuchen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TDD</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> für </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tests</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erste Schritte</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was wir hier untersuchen werden, ist ein ziemlich einfaches Beispiel, damit das Konzept leichter zu befolgen und zu verstehen ist. Ich hoffe, dass dies ausreicht, um einige der Vorteile dieses Ansatzes zu erkennen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir beginnen mit der Erstellung einer grundlegenden Aktivität. Wir müssen dies tun, damit wir unseren UI-Test ausführen können. Stellen Sie sich vor, dieses Setup ist die Grundlage für unsere Implementierung und nicht die Implementierung selbst. So sieht unsere grundlegende Aktivität aus:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginActivity</span>: <span class="hljs-title">AppCompatActivity</span>(), <span class="hljs-title">LoginContract</span>.<span class="hljs-title">View</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@Inject</span> lateinit <span class="hljs-keyword">var</span> loginPresenter: LoginContract.<span class="hljs-function">Presenter

    override fun <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: Bundle?)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<font></font>
        setContentView(R.layout.activity_login)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">setPresenter</span><span class="hljs-params">(presenter: LoginContract.Presenter)</span> </span>{<font></font>
        loginPresenter = presenter<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showGeneralErrorMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideProgress</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidEmailMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">override fun <span class="hljs-title">hideInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
        TODO(<span class="hljs-string">"not implemented"</span>)<font></font>
    }<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Möglicherweise stellen Sie fest, dass diese Aktivität nur die anfängliche Einrichtung ausführt, die für die Aktivität erforderlich ist. In der onCreate () -Methode setzen wir einfach einen Link zum Layout. Wir haben auch einen Link zu unserer View-Oberfläche, die mithilfe von Aktivität implementiert wird, aber noch keine Implementierungen hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eines der häufigsten Dinge, die wir in Espresso-Tests finden, sind Referenzansichten und Zeichenfolgen nach Ressourcen-IDs, die in unserer Anwendung gefunden werden. In diesem Zusammenhang müssen wir erneut eine Layoutdatei zur Verwendung in unserer Aktivität bereitstellen. Dies liegt an der Tatsache, dass: a) unsere Aktivität eine Layoutdatei benötigt, um das Layout während der Tests anzuzeigen, und b) wir eine ID-Ansicht für Links in unseren Tests benötigen. Lassen Sie uns ein sehr einfaches Layout für unsere Anmeldeaktivität erstellen:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_email"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/input_password"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/button_login"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier können Sie sehen, dass wir uns keine Gedanken über Stil oder Position gemacht haben - denken Sie daran - während wir die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grundlage schaffen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und nicht die Implementierung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und für den letzten Teil des Setups werden wir die Linien definieren, die in dieser Übung verwendet werden. </font><font style="vertical-align: inherit;">Auch hier müssen wir sie in Tests referenzieren - bis Sie sie Ihrem XML-Layout oder Ihrer Aktivitätsklasse hinzufügen, definieren Sie sie einfach in der Datei </font></font><code>strings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="java hljs">&lt;string name=<span class="hljs-string">"error_message_invalid_email”&gt;…&lt;/string&gt;
&lt;string name="</span>error_message_invalid_password”&gt;…&lt;/string&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Möglicherweise stellen Sie fest, dass wir in diesem Setup so wenig wie möglich schreiben, aber wir geben genügend Details zu unserer Aktivität und ihrem Layout an, um Tests dafür zu schreiben. </font><font style="vertical-align: inherit;">Unsere Aktivität funktioniert derzeit nicht, wird jedoch geöffnet und bietet eine Ansicht, auf die verwiesen werden kann. </font><font style="vertical-align: inherit;">Jetzt, da wir genug Minimum haben, um zu arbeiten, fahren wir fort und fügen einige Tests hinzu.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests hinzufügen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben also drei Situationen, die wir implementieren müssen, also werden wir einige Tests für sie schreiben.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn ein Benutzer eine ungültige E-Mail-Adresse in das E-Mail-Eingabefeld eingibt, muss eine Fehlermeldung angezeigt werden. </font><font style="vertical-align: inherit;">Wir werden also einen Test schreiben, der prüft, ob diese Fehlermeldung angezeigt wird.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der Benutzer erneut Daten in das E-Mail-Eingabefeld eingibt, sollte die obige Fehlermeldung verschwinden. Daher werden wir einen Test dafür schreiben.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn die API eine Fehlermeldung zurückgibt, sollte diese in einem Warndialogfeld angezeigt werden. Daher werden wir auch einen Test dafür hinzufügen.</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidEmailErrorHidesWhenUserTypes</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"j"</span>))<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_email))<font></font>
            .check(doesNotExist())<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">invalidPasswordErrorDisplayed</span><span class="hljs-params">()</span> </span>{<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(R.string.error_message_invalid_password))<font></font>
            .check(matches(isDisplayed()))<font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@Test</span>
<span class="hljs-function">fun <span class="hljs-title">serverErrorMessageDisplays</span><span class="hljs-params">()</span> </span>{<font></font>
    val response = ConnectResponseFactory.makeConnectResponseForError()<font></font>
    stubConnectRepositorySignIn(Single.just(response))<font></font>
    activity.launchActivity(<span class="hljs-keyword">null</span>)<font></font>
<font></font>
    onView(withId(R.id.input_email))<font></font>
            .perform(typeText(<span class="hljs-string">"joe@example.com"</span>))<font></font>
<font></font>
    onView(withId(R.id.input_password))<font></font>
            .perform(typeText(DataFactory.randomUuid()))<font></font>
<font></font>
    onView(withId(R.id.button_login))<font></font>
            .perform(click())<font></font>
<font></font>
    onView(withText(response.message))<font></font>
            .check(matches(isDisplayed()))<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, jetzt haben wir Tests geschrieben - lassen Sie uns fortfahren und sie ausführen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2x/ac/bv/2xacbvdf2rumlv9asggjp9mwsp8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und es ist nicht verwunderlich, dass sie fehlgeschlagen sind - das liegt daran, dass wir noch keine Implementierung haben, daher sollte dies erwartet werden. Auf jeden Fall sollten wir uns freuen, jetzt für Tests Rot zu sehen! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen wir Implementierungen für unsere Aktivität hinzufügen, bis die Tests bestanden sind. Während wir fokussierte Tests schreiben, die nur ein Konzept testen (oder zumindest sollte es sein!), Können wir Implementierungen einzeln hinzufügen und beobachten, wie unsere Tests nacheinander grün werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns also einen der fehlgeschlagenen Tests an und beginnen wir mit dem Test </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">invalidPasswordErrorDisplayed ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wir wissen ein paar Dinge:</font></font><br>
<br>
<ul>
<li>     ,    ,       ,          ,       :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupLoginButtonClickListener</span><span class="hljs-params">()</span> </span>{<font></font>
    button_login.setOnClickListener {<font></font>
        loginPresenter.performSignIn(input_email.text.toString(),<font></font>
                input_password.text.toString()) }<font></font>
}</code></pre><br>
<ul>
<li>       ,          .    TextInputLayout,             ,    :</li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showInvalidPasswordMessage</span><span class="hljs-params">()</span> </span>{<font></font>
    layout_input_password.error = getString(R.string.error_message_invalid_password)<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt haben wir die Logik für diese Situation hinzugefügt. Lassen Sie uns fortfahren und unsere Tests erneut ausführen! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/4-/et/jq4-etd3rfq9tddsy4x0lusrti0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Großartig, es sieht so aus, als ob die Prüfung </font></font><code>invalidPassworrdErrorDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erfolgreich war. Wir sind jedoch noch nicht fertig. Wir haben noch zwei Tests, die für die Teile unserer Anmeldefunktion, die wir implementieren müssen, noch nicht bestanden wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes werden wir den Test betrachten </font></font><code>serverErrorMessageDisplays()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dies ist ganz einfach. Wir wissen, dass die Anwendung dem Benutzer in einem Warndialog eine Fehlermeldung anzeigen sollte, wenn die API eine Fehlerantwort (und keinen allgemeinen Fehler aus unserer Netzwerkbibliothek) zurückgibt. Dazu müssen wir lediglich eine Instanz des Dialogfelds mithilfe unserer Serverfehlermeldung im Dialogtext erstellen:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">override fun <span class="hljs-title">showServerErrorMessage</span><span class="hljs-params">(message: String)</span> </span>{<font></font>
    DialogFactory.createSimpleInfoDialog(<span class="hljs-keyword">this</span>, R.string.error_message_login_title, message, <font></font>
            R.string.error_message_login_ok).show()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns fortfahren und unsere Tests erneut durchführen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/td/le/m2/tdlem2qq8vgtq9wcggplu-dra_0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hurra! </font><font style="vertical-align: inherit;">Wir bewegen uns vorwärts, jetzt haben wir nur noch einen Test, dies ist ein Test </font></font><code>invalidEmailErrorHidesWhenUserTypes()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Auch dies ist ein einfacher Fall, aber schauen wir uns das an:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der Benutzer auf die Anmeldeschaltfläche klickt und die E-Mail-Adresse fehlt oder die E-Mail-Adresse falsch ist, wird dem Benutzer eine Fehlermeldung angezeigt. </font><font style="vertical-align: inherit;">Wir haben dies bereits implementiert, ich habe es der Einfachheit halber nur ausgeschlossen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der Benutzer jedoch erneut Daten in das Feld eingibt, sollte die Fehlermeldung aus der Anzeige entfernt werden. </font><font style="vertical-align: inherit;">Dazu müssen wir zuhören, wenn sich der Textinhalt des Eingabefelds ändert:</font></font></li>
</ul><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">setupOnEmailTextChangedListener</span><span class="hljs-params">()</span> </span>{<font></font>
    input_email.addTextChangedListener(object : TextWatcher {<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">afterTextChanged</span><span class="hljs-params">(s: Editable)</span> </span>{}<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">beforeTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                       count: Int, after: Int)</span> </span>{<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function">override fun <span class="hljs-title">onTextChanged</span><span class="hljs-params">(s: CharSequence, start: Int,
                                   before: Int, count: Int)</span> </span>{<font></font>
            loginPresenter.handleEmailTextChanged(s)<font></font>
        }<font></font>
    })<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies sollte nun ausreichen, um sicherzustellen, dass unsere Fehlermeldung beim Ändern des Inhalts des Eingabefelds ausgeblendet wird. </font><font style="vertical-align: inherit;">Aber wir haben Tests, um unsere Änderungen zu bestätigen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/du/ni/aa/duniaa83g3b84ennz4ljp03uez8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Großartig! </font><font style="vertical-align: inherit;">Unsere Implementierungsanforderungen werden erfüllt, wenn wir unsere Tests bestehen - es ist großartig, grünes Licht zu sehen</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist wichtig anzumerken, dass das Beispiel, auf das wir TDD angewendet haben, äußerst primitiv ist. Stellen Sie sich vor, wir entwickeln einen komplexen Bildschirm, z. B. einen Inhaltsfeed, in dem Sie mehrere Aktionen mit Feedelementen ausführen können (z. B. in der Pufferanwendung für Android). In diesen Fällen verwenden wir viele verschiedene Funktionen, die in der angegebenen Aktivität implementiert werden sollten / Fragment. Dies sind Situationen, in denen TDD in UI-Tests noch deutlicher wird, da das, was dazu führen kann, dass wir zu komplexen Code für diese Funktionen schreiben, auf Implementierungen reduziert werden kann, die die von uns geschriebenen Tests erfüllen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammenfassend werde ich einige Punkte teilen, die ich aus meiner Erfahrung gelernt habe:</font></font><br>
<br>
<ul>
<li>  ,   ,  TDD  .   ,        .   ,  Espresso     (/,     ),         .       activity,  ,      ,        .                .</li>
<li>  ,   ,     ,   , ,  ,   ,       .  ,        , ,      ,  ,      ( ,      !). -         .           , , ,  - .</li>
<li> ,   Ui-              ,   ,          . ,   , ,   ,       ,      ,    .</li>
<li> ,      .       ,        —      ,      ,        ,     - .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es scheint natürlicher. </font><font style="vertical-align: inherit;">Da TDD bereits für Komponententests verwendet wird, fühlen Sie sich beim Schreiben von Komponententests, gefolgt von Implementierungen und UI-Tests, etwas rückständig. </font><font style="vertical-align: inherit;">Sie werden sich natürlicher fühlen, wenn Sie mit TDD einen vollen Schritt machen, nicht auf halbem Weg.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie TDD bereits beim Schreiben von Benutzeroberflächentests und machen etwas Ähnliches oder völlig anderes? </font><font style="vertical-align: inherit;">Oder möchten Sie etwas mehr wissen und ein paar Fragen stellen? </font><font style="vertical-align: inherit;">Fühlen Sie sich frei, unten zu kommentieren oder uns bei </font><i><font style="vertical-align: inherit;">That's all zu</font></i><font style="vertical-align: inherit;"> twittern </font></font><code>@bufferdevs</code> <br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir warten bei den Kursen auf Sie:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweitert</font></font></a></li>
</ul></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492702/index.html">Maschinelle Übersetzung. Vom Kalten Krieg bis zur Gegenwart</a></li>
<li><a href="../de492704/index.html">Um die Effektivität des Implantatüberlebens um das 5-7-fache zu erhöhen - wie ist das möglich?</a></li>
<li><a href="../de492706/index.html">Gedächtnisarchive: Wie das Gehirn Erinnerungen codiert und reproduziert</a></li>
<li><a href="../de492708/index.html">Globales Satelliten-Internet - gibt es Neuigkeiten aus den Bereichen?</a></li>
<li><a href="../de492710/index.html">Dorniger Weg des Kandidaten durch verschiedene HRM-Systeme</a></li>
<li><a href="../de492714/index.html">Effektive Arbeit von zu Hause aus: allgemein und persönlich</a></li>
<li><a href="../de492718/index.html">Sicherheit durch Benutzereinschränkung oder Erstellen einer Sicherheitsanfälligkeit</a></li>
<li><a href="../de492720/index.html">Diskussion: Projektdateidienst</a></li>
<li><a href="../de492724/index.html">Björn Straustrup beantwortet die Top 5 C ++ - Fragen mit Stapelüberlauf</a></li>
<li><a href="../de492726/index.html">OS Sivelkiriya: Softwareentwicklungsprozess</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>