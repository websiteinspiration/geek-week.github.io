<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêµ üîÄ üë´ Complementando SQL. Parte 1. La complejidad del an√°lisis. Historias sobre la finalizaci√≥n del archivo ANTLR üëÇüèª üöª üéé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Publico el art√≠culo original sobre Habr, cuya traducci√≥n se publica en el blog Codingsight .
 
 ¬øQu√© pasar√° en este art√≠culo?
 He trabajado en la empr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Complementando SQL. Parte 1. La complejidad del an√°lisis. Historias sobre la finalizaci√≥n del archivo ANTLR</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502416/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Publico el art√≠culo original sobre Habr, cuya traducci√≥n se publica en el blog </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codingsight</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© pasar√° en este art√≠culo?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
He trabajado en la empresa durante m√°s de cinco a√±os, que ha estado desarrollando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la l√≠nea</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> IDE para trabajar con bases de datos. Al comenzar a trabajar en este art√≠culo, no pod√≠a imaginar cu√°ntas historias interesantes pod√≠a recordar, porque cuando termin√© recib√≠ m√°s de 30 p√°ginas de texto. Despu√©s de pensar un poco, agrup√© las historias por tema y divid√≠ el art√≠culo en varias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A medida que publique, agregar√© enlaces a las siguientes partes: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 1. La complejidad del an√°lisis. Historias sobre la finalizaci√≥n de ANTLR con un archivo</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Parte 2. Optimizaci√≥n de trabajar con cadenas y abrir archivos </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parte 3. Vida de las extensiones para Visual Studio. Trabaja con IO. Uso inusual de SQL </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parte 4. Trabajando con excepciones, el impacto de los datos en el proceso de desarrollo. Usando ML.NET</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sucedieron muchas cosas interesantes durante el trabajo: encontramos varios errores en .NET, optimizamos algunas funciones muchas veces, y algunas solo por porcentaje, hicieron algo muy bueno la primera vez, y algo que no logramos incluso despu√©s de unos pocos intentos </font><font style="vertical-align: inherit;">Mi equipo est√° desarrollando y respaldando las caracter√≠sticas del lenguaje IDE, la principal es la finalizaci√≥n del c√≥digo. </font><font style="vertical-align: inherit;">De ah√≠ el nombre de la serie de art√≠culos. </font><font style="vertical-align: inherit;">En cada una de sus partes contar√© varias historias: algunas sobre √©xitos, otras sobre fracasos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En esta parte, me centrar√© en los problemas de analizar SQL, la lucha contra estos problemas y los errores cometidos en esta lucha.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/xl/vm/hgxlvmyga2eic3ul4c_i72mrxma.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para aquellos que est√©n interesados ‚Äã‚Äãsolo en una parte de esto y solo para una f√°cil navegaci√≥n, el contenido del art√≠culo:</font></font><br>
<br>
<h3><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenido</font></font></u></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQui√©n soy?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øCu√°les son las dificultades?</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desarrollo de escritorio</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analizando SQL y Dialectos</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guerras predicadas</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluciones de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bicicleta</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geniales</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herencia de gram√°tica</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otro ANTLR de posprocesamiento</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Errores</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lisis sin √°rboles</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></a></li>
</ul><br>
<a name="Who"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQui√©n soy?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Llegu√© a este trabajo en junio con muy poca experiencia. </font><font style="vertical-align: inherit;">Yo, como muchos, vine a la programaci√≥n porque quer√≠a hacer juguetes. </font><font style="vertical-align: inherit;">Varios incluso con bastante √©xito. </font><font style="vertical-align: inherit;">Incluso escrib√≠ sobre el desarrollo de uno </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Recientemente, por cierto, la resucit√≥ en otro servidor. Todav√≠a hab√≠a una docena de juegos hechos o abandonados en diferentes etapas de preparaci√≥n. Adem√°s de los juegos, antes de obtener este trabajo, logr√© completar varios proyectos en forma independiente. El m√°s grande de ellos fue la aplicaci√≥n para redes sociales, que era un portal de f√∫tbol con mesas de torneos, datos sobre jugadores y la capacidad de notificar a los usuarios el puntaje final o los goles marcados por SMS. Esto se hizo hace casi 10 a√±os. En ese momento, no todos usaban tel√©fonos inteligentes, y quienes sol√≠an ir m√°s a menudo sin Internet o con el EDGE de tres maldiciones para abrir un sitio de texto no siempre era posible. Entonces la idea me pareci√≥ buena.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De alguna manera result√≥ que, adem√°s de los juegos, tambi√©n me sent√≠ atra√≠do por crear diferentes ajustes para m√≠ u otros desarrolladores. A veces, √©l estaba cerca de lo que ten√≠a que hacer en el trabajo un poco m√°s tarde. Por ejemplo, uno de los proyectos que hice al estudiar la API de Win32 fue un programa que resalta el c√≥digo XML en Rich Edit Control. Adem√°s, fue posible cargar c√≥digo retroiluminado a BMP, HTML o c√≥digos BB que estaban de moda en diferentes foros.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro proyecto que result√≥ estar muy cerca de lo que hice en el trabajo fue un programa que analiza el c√≥digo C / C ++ y construye un diagrama de bloques a partir de √©l. El diagrama de flujo estaba en estricta conformidad con los requisitos de un maestro en la universidad. Fue hecho torpemente, en la frente, con cero conocimiento de la teor√≠a del an√°lisis sint√°ctico, y trabaj√≥ exclusivamente en mi personaje de mierda. Unos a√±os m√°s tarde, mientras limpiaba la computadora de basura vieja, me top√© con ella y no pude eliminarla, as√≠ que la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publiqu√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">github</font></a><font style="vertical-align: inherit;"> por el bien de la historia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estos experimentos, junto con el trabajo independiente, dieron una experiencia bastante buena e hicieron posible conseguir un trabajo. </font><font style="vertical-align: inherit;">Con el tiempo, despu√©s de un par de docenas empapadas en sangre y l√°grimas, incluso empiezo a beneficiar a la empresa y al producto. </font><font style="vertical-align: inherit;">Volviendo atr√°s, es bastante divertido entender que, como resultado de varios accidentes, comenc√© a hacer exactamente lo que me atra√≠a.</font></font><br>
<a name="difficulties"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øCu√°les son las dificultades?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este bloque es necesario para sumergir al lector en el contexto de lo que realmente estamos haciendo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/sh/st/bpshstukfseasxycc6eyk1epb3s.jpeg"><br>
<a name="desktop"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desarrollo de escritorio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quiz√°s esto ni siquiera es complejidad, porque ya es un campo muy maduro en el que no hay mucho desconocido, las bibliotecas son estables, se conocen las mejores pr√°cticas. </font><font style="vertical-align: inherit;">Esta caracter√≠stica de nuestro proyecto est√° aqu√≠, porque yo, como muchos otros programadores, soy propenso a la novedad, y la novedad ya no existe en la web. </font><font style="vertical-align: inherit;">Hubo d√≠as en que, bajo la lluvia, me sub√≠ al alf√©izar de la ventana, cubierto con una manta, con una taza de cacao, y pens√© en los sistemas de redis, reacci√≥n, alta carga y distribuidos que se est√°n desarrollando en alg√∫n lugar sin m√≠ en este momento. </font><font style="vertical-align: inherit;">El otro lado de este problema es que no es f√°cil describir la complejidad del proyecto a los desarrolladores familiares sobre la cerveza, y cuando trabajas en aplicaciones que operan de acuerdo con leyes fundamentalmente diferentes, se vuelve a√∫n m√°s dif√≠cil.</font></font><br>
<br>
<a name="dialects"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analizando SQL y Dialectos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n he escrito peque√±os analizadores para diferentes idiomas antes de este trabajo. Durante alg√∫n tiempo ense√±√© cursos .NET. Para algunos grupos, como una tarea adicional, como parte del tema "cadena", sugirieron escribir su propio analizador JSON simple. Solo SQL y sus variantes est√°n lejos de XML o JSON dise√±ados para ser igualmente comprensibles para los analizadores y las personas. Adem√°s, SQL es sint√°cticamente m√°s complejo que C / C ++, con sus numerosas funciones acumuladas a lo largo de una larga historia. SQL est√° estructurado de manera diferente, por cierto, intentaron que parezca un lenguaje natural, con bastante √©xito. El idioma tiene varios miles de palabras clave (seg√∫n el dialecto). A menudo, para distinguir una expresi√≥n de otra, debe mirar dos o m√°s palabras (tokens) hacia adelante. Este enfoque se llama anticipaci√≥n. Existe una clasificaci√≥n de analizadores sint√°cticos seg√∫nqu√© tan lejos pueden mirar hacia adelante: LA (1), LA (2) o LA (*), lo que significa que el analizador puede mirar lo m√°s adelante posible para determinar la rama correcta. A veces, el final opcional de una cl√°usula dentro de una instrucci√≥n SQL coincide con el comienzo de otra, que tambi√©n es opcional: tales situaciones hacen que los analizadores sean mucho m√°s complicados. T-SQL vierte agua en el fuego, en el que el punto y coma es opcional, y el final posible, pero no obligatorio, de algunas instrucciones SQL puede entrar en conflicto con el comienzo de otras.Tales situaciones complican enormemente los analizadores. T-SQL vierte agua en el fuego, en el que el punto y coma es opcional, y el final posible, pero no obligatorio, de algunas instrucciones SQL puede entrar en conflicto con el comienzo de otras.Tales situaciones complican enormemente los analizadores. T-SQL vierte agua en el fuego, en el que el punto y coma es opcional, y el final posible, pero no obligatorio, de algunas declaraciones SQL puede entrar en conflicto con el comienzo de otras.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øTodav√≠a no crees? Hay un mecanismo para describir lenguajes formales a trav√©s de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gram√°ticas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La gram√°tica es un c√≥digo en un idioma que describe otro. A partir de una gram√°tica, a menudo puede generar un analizador utilizando una herramienta. Las herramientas y lenguajes de descripci√≥n gramatical m√°s famosos son </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YACC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANTLR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Los analizadores generados por YACC se usan directamente en los motores </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MariaDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Puede intentar tomarlos directamente del c√≥digo abierto y desarrollar la finalizaci√≥n del c√≥digo y otras funciones basadas en el an√°lisis SQL basado en ellos. Adem√°s, dicha implementaci√≥n recibir√≠a actualizaciones gratuitas en t√©rminos de desarrollo, y el analizador se comportar√≠a con la garant√≠a de ser id√©ntico al motor de la base de datos. Entonces, ¬øpor qu√© usamos ANTLR? Es cualitativamente compatible con C # /. NET, existen buenas herramientas para trabajar con √©l, su sintaxis es mucho m√°s f√°cil de leer y escribir. La sintaxis ANTLR result√≥ ser tan conveniente que Microsoft la ha utilizado recientemente en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oficial de </font><font style="vertical-align: inherit;">C #.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Volvamos a mi prueba de la complejidad de SQL, en comparaci√≥n con otros lenguajes, en t√©rminos de an√°lisis. Para hacer esto, quiero comparar los tama√±os de gram√°tica para diferentes idiomas disponibles p√∫blicamente. En dbForge utilizamos nuestras propias gram√°ticas, son m√°s completas que las disponibles p√∫blicamente, pero, desafortunadamente, est√°n muy obstruidas con insertos de c√≥digo C # para admitir diferentes funciones, m√°s sobre esto en la secci√≥n "An√°lisis sin √°rboles" en la secci√≥n "Errores". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n se muestran los tama√±os de gram√°tica para diferentes idiomas: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - analizador 475 l√≠neas + 273 lexer = 748 l√≠neas </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - analizador 615 l√≠neas + 211 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 826 l√≠neas </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1159 l√≠neas analizador + 433 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 1592 l√≠neas </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1933 l√≠neas </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- 2.515 l√≠neas analizador + 1189 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 3704 l√≠neas </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T-SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 4035 l√≠neas analizador + 896 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 4931 l√≠neas </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 6719 l√≠neas analizador + 2366 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 9085 l√≠neas </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al final de algunos lexers no es una enumeraci√≥n de caracteres Unicode disponible en el idioma, esto es, en in√∫til evaluaci√≥n de la complejidad del lenguaje. Tom√© el n√∫mero de l√≠neas antes de comenzar tales transferencias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede haber preguntas sobre la complejidad de analizar un lenguaje en funci√≥n del n√∫mero de l√≠neas en su gram√°tica. Las preguntas tambi√©n pueden ser sobre la plenitud de las gram√°ticas abiertas en comparaci√≥n con la sintaxis real de los idiomas. A pesar de esto, todav√≠a considero √∫til dar estos n√∫meros, ya que la extensi√≥n es demasiado grande.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto no es todo, porque no solo necesitamos analizar varios archivos en SQL. Estamos haciendo un IDE, lo que significa que debemos trabajar en scripts incompletos o inv√°lidos. Incluso si escribe sus scripts sin errores, tal vez los escriba de manera inconsistente, es poco probable que el script sea v√°lido durante todo el proceso de desarrollo. Por ejemplo, primero escribo "SELECCIONAR DESDE", despu√©s de lo cual me complacer√° ver la lista de tablas disponibles. Cuando selecciono una tabla, reorganizar√© el carro para SELECCIONAR, presionar la barra espaciadora y esperar la lista de columnas de esta tabla en particular. Este es un ejemplo muy simple, pero muestra que el analizador que proporciona la finalizaci√≥n del c√≥digo en el IDE no puede bloquearse con la excepci√≥n de encontrar un script no v√°lido. Tuvimos que idear muchos trucos para asegurarnos de que la informaci√≥n sobre herramientas funciona correctamente en muchos de estos escenarios,pero los usuarios a√∫n env√≠an diferentes escenarios para trabajar con scripts sin terminar, lo que significa que tenemos que idear nuevos trucos.</font></font><br>
<a name="predicates"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guerras predicadas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al analizar el c√≥digo, a veces hay situaciones en las que la siguiente palabra no deja en claro cu√°l de las dos alternativas elegir. </font><font style="vertical-align: inherit;">A veces es suficiente mirar por adelantado un n√∫mero estrictamente definido de palabras y definitivamente puedes elegir una alternativa. </font><font style="vertical-align: inherit;">El mecanismo para resolver este tipo de inexactitud se llama ANTLR anticipado. </font><font style="vertical-align: inherit;">El m√©todo del analizador en este caso se construye como una cadena incrustada de ifs, cada uno de los cuales se ve una palabra m√°s. </font><font style="vertical-align: inherit;">A continuaci√≥n se muestra un ejemplo de una gram√°tica que genera incertidumbre de este tipo.</font></font><br>
<br>
<pre><code class="lisp hljs">rule1:<font></font>
    'a' rule2 | rule3<font></font>
    <span class="hljs-comment">;</span><font></font>
<font></font>
rule2:<font></font>
    'b' 'c' 'd'<font></font>
    <span class="hljs-comment">;</span><font></font>
<font></font>
rule3:<font></font>
    'b' 'c' 'e'<font></font>
    <span class="hljs-comment">;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el medio de la regla 1, despu√©s de haber pasado el token 'a', el analizador tendr√° que mirar 2 tokens por delante para elegir qu√© regla seguir. Una vez m√°s, esta verificaci√≥n se realizar√° dentro de la regla. Esta gram√°tica se puede reescribir para que esta b√∫squeda anticipada no exista, desafortunadamente la estructura a menudo sufre de tales optimizaciones, y la ganancia de rendimiento no es relativamente alta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen mecanismos m√°s complejos para resolver incertidumbres m√°s complejas. Uno de ellos es el mecanismo de predicado de sintaxis (sincronizado) en ANTLR3.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âl viene al rescate en aquellos casos en que, por ejemplo, la finalizaci√≥n opcional de una cl√°usula se cruza con el comienzo de la siguiente opci√≥n opcional. </font><font style="vertical-align: inherit;">El predicado, en t√©rminos ANTLR3, es el m√©todo generado, que hace un pasaje virtual a trav√©s del texto de acuerdo con una de las alternativas y, si tiene √©xito, devuelve verdadero, esta finalizaci√≥n del predicado se llama exitosa. </font><font style="vertical-align: inherit;">El pase virtual tambi√©n se denomina pase de retroceso. </font><font style="vertical-align: inherit;">Si el predicado funcion√≥ con √©xito, se realiza un pase real. </font><font style="vertical-align: inherit;">Esto se convierte en un problema cuando otro predicado comienza dentro de un predicado, luego una secci√≥n puede atravesarse cien mil veces. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere un ejemplo simplificado. </font><font style="vertical-align: inherit;">Hay 3 puntos de incertidumbre (A, B, C).</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El analizador ingresa A, recuerda la posici√≥n en el texto, comienza un pasaje virtual del 1er nivel.</font></font></li>
<li>   B,    ,    2- .</li>
<li>   C,    ,    3- .</li>
<li>     3- ,   2    .</li>
<li>     2 ,   1   B   .</li>
<li>    ,       A, B  .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, todas las verificaciones dentro de C se realizar√°n 4 veces, B - 3 veces, A - 2 veces. Pero, ¬øqu√© pasa si la alternativa adecuada es la segunda o la tercera en la lista? Luego, en alguna etapa de uno de los predicados, fallar√°, la posici√≥n en el texto retroceder√° y otro predicado comenzar√° a ejecutarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analizando repetidamente la causa del congelamiento de la aplicaci√≥n, nos encontramos con casos en los que la "cola" sincronizada se ejecut√≥ varios miles de veces. Los sincronizados son especialmente problem√°ticos en las reglas recursivas. Desafortunadamente, por su naturaleza, SQL es recursivo, que es al menos la capacidad de usar una subconsulta en casi todas partes. A veces, con la ayuda de varios trucos y trucos, resulta que resulta la regla para que el predicado desaparezca.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, sincronizado tiene un efecto negativo en el rendimiento. En alg√∫n momento, era necesario poner a su poblaci√≥n bajo estricto control. El √∫nico problema es que al escribir c√≥digo gramatical, la apariencia de sincronizado puede no ser obvia. Adem√°s, a veces un cambio en una regla lleva a la aparici√≥n de un predicado en otra. Esto no se puede controlar manualmente. Para controlar el n√∫mero de predicados, escribimos un simple regular, que fue llamado por una tarea especial de MsBuild. Si el n√∫mero de predicados era diferente del n√∫mero especificado en un archivo separado, Task interrumpi√≥ el ensamblado e inform√≥ un error. Al ver tal error, el desarrollador tuvo que volver a escribir el c√≥digo de la regla varias veces, tratando de deshacerse de predicados innecesarios, posiblemente involucrando a otros desarrolladores en el problema. Si un predicado es inevitable,entonces el desarrollador actualiza el n√∫mero de predicados en el archivo correspondiente. Un cambio en este archivo llama m√°s la atenci√≥n sobre la revisi√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En casos raros, incluso escribimos nuestros propios predicados en C # para evitar los que genera ANTLR. </font><font style="vertical-align: inherit;">Afortunadamente, dicho mecanismo tambi√©n existe.</font></font><br>
<a name="bikes"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluciones de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bicicleta</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geniales</font></font></h2><br>
<img src="https://habrastorage.org/webt/r2/sr/zk/r2srzksxi_3aseqm2bv50nwjfby.jpeg"><br>
<a name="inheritance"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herencia de gram√°tica</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s del anuncio de cualquier cambio en cada uno de los DBMS que admitimos, nuestro trabajo para apoyarlos comienza. Casi siempre, el punto de partida para esto es admitir construcciones sint√°cticas en la gram√°tica. Para cada dialecto SQL, escribimos nuestra propia gram√°tica, esto genera cierta repetici√≥n del c√≥digo, pero en √∫ltima instancia es m√°s f√°cil que buscar un com√∫n entre ellos. Hace solo un par de a√±os, MySQL y MariaDB eran muy similares, escribir gram√°ticas separadas no era pr√°ctico. Debido a esas pocas construcciones que estaban en MariaDB, pero no en MySQL, admitimos en la gram√°tica de MySQL. Este fue un momento desagradable: para el usuario de MySQL, podr√≠amos sugerir construcciones que no ser√≠an v√°lidas. En los √∫ltimos a√±os, MariaDB y MySQL se han vuelto muy divergentes en t√©rminos de sintaxis y m√°s. Se hizo evidenteque est√° mal admitir dos idiomas diferentes dentro de la misma gram√°tica.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una posible soluci√≥n podr√≠a ser una copia completa de la gram√°tica, despu√©s de lo cual cada una se admite por separado. Como resultado de una larga discusi√≥n, tomamos una decisi√≥n audaz. Estoy muy contento de que no hayamos copiado el c√≥digo, cada celda en m√≠ se resisti√≥ a esta decisi√≥n. Se decidi√≥ escribir su propio preprocesador de gram√°tica ANTLR, que implementa el mecanismo de herencia gramatical. Hace alg√∫n tiempo, me encontr√© con una gram√°tica ANTLR3 en el repositorio oficial de las gram√°ticas ANTLR4. Creo que esta oraci√≥n necesita leerse varias veces para darse cuenta de la profundidad de la locura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al discutir la idea de la herencia, r√°pidamente nos dimos cuenta de que nos gustar√≠a tener un mecanismo para el polimorfismo. La capacidad en la gram√°tica del heredero no solo para redefinir la regla, sino tambi√©n para llamar a la base. Adem√°s, quiero controlar la posici√≥n de la llamada de la regla b√°sica: principio, medio o final. Decidimos que todas las reglas pueden redefinirse, para esto no necesita especificar nada adicional. Para redefinir una regla, es suficiente declarar una regla con el mismo nombre en la gram√°tica sucesora. Despu√©s de eso, la regla de la gram√°tica principal estar√° disponible con un nombre diferente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ANTLR es una herramienta agradable para el desarrollo mediante el ajuste: hay una extensi√≥n para VS, hay ANTLRWorks. Al presentar el mecanismo de herencia, no me gustar√≠a perder esta oportunidad. ¬øPero c√≥mo indicar la gram√°tica b√°sica? Puede llegar a alg√∫n tipo de convenci√≥n para nombrar archivos, pero esto no es del todo obvio. Otra opci√≥n podr√≠a ser indicar dicha informaci√≥n adicional en un archivo separado, pero incluso ahora, al escribir estas l√≠neas, sent√≠ el hedor de esta soluci√≥n. El resultado fue una indicaci√≥n de la gram√°tica b√°sica en la gram√°tica del heredero en el formato de un comentario ANTLR. Todas las herramientas simplemente ignorar√°n este texto, y podemos extraer f√°cilmente el c√≥digo que nos interesa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se han formado los requisitos, es hora de implementarlos. Escribimos la Tarea MsBuild, que se incorpor√≥ al sistema general de compilaci√≥n como una acci√≥n previa a la compilaci√≥n. La tarea realiz√≥ el trabajo del preprocesador de gram√°tica ANTLR, generando la gram√°tica resultante de la base y la heredada. La gram√°tica resultante ya ha sido procesada por ANTLR. Si se encontr√≥ una regla con el mismo nombre que en el padre en la gram√°tica sucesora, se cambi√≥ el nombre de la regla b√°sica: el nombre de la gram√°tica principal se agreg√≥ a su nombre despu√©s del gui√≥n bajo. Por este nombre se le podr√≠a contactar en el heredero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El mecanismo del preprocesador en s√≠ no tom√≥ mucho tiempo, pero junto con la generaci√≥n del analizador result√≥ que ralentiz√≥ cada reensamblaje del proyecto en 10-20 segundos. </font><font style="vertical-align: inherit;">En alg√∫n momento, esto dej√≥ de satisfacernos. </font><font style="vertical-align: inherit;">Decidimos pensar en c√≥mo se puede optimizar esto. </font><font style="vertical-align: inherit;">La soluci√≥n fue agregar el hash de la suma de todas las gram√°ticas de las que depende en forma de un comentario al encabezado del archivo del analizador CS. </font><font style="vertical-align: inherit;">Antes de hacer nada, el preprocesador compar√≥ estos hashes con los hash de los archivos en el disco, y si no difieren, el archivo del analizador se consider√≥ relevante. </font><font style="vertical-align: inherit;">En la etapa de desarrollo inicial, tuvimos que pisar el rastrillo de analizadores y gram√°ticas inv√°lidos recopilados por la versi√≥n obsoleta del preprocesador m√°s de una vez. </font><font style="vertical-align: inherit;">Como resultado, la suma hash del ensamblaje con el preprocesador apareci√≥ en el comentario del encabezado.</font></font><br>
<a name="postprocessing"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otro ANTLR de posprocesamiento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En muchos lenguajes de programaci√≥n, si la palabra es la clave, ya no se puede usar como el nombre del objeto. En SQL, dependiendo del dialecto, de 800 a 3000 palabras clave. La mayor√≠a de ellos est√°n estrechamente relacionados con el √°rea tem√°tica, adem√°s, no todos se introdujeron de inmediato, por lo que la prohibici√≥n de usarlos todos como nombres de objetos habr√≠a encontrado una oleada de indignaci√≥n. SQL introduce el concepto de palabras clave reservadas y no reservadas. No puede nombrar un objeto de la misma manera que una palabra clave reservada (SELECCIONAR, DESDE, etc.) sin citarlo, ya que no es redundante (CONVERSACI√ìN, DISPONIBILIDAD, etc.), puede hacerlo. Este comportamiento complica el desarrollo del analizador. En el momento del an√°lisis l√©xico, el contexto es desconocido, pero el analizador requiere diferentes n√∫meros para el identificador y la palabra clave. Para resolver este problema, agregamos un postprocesamiento m√°s al analizador ANTLR.El posprocesamiento reemplaza todas las comprobaciones expl√≠citas con un identificador, con una llamada a un m√©todo especial. Este m√©todo implementa un control m√°s complicado. Si se ingresa un identificador y se espera un identificador adicional, entonces todo est√° bien, pero si se proporciona una palabra clave no reservada a la entrada, debe verificarse adicionalmente. Una comprobaci√≥n adicional es que el m√©todo se examina en el contexto actual en la b√∫squeda de ramas, donde esta palabra clave no reservada se puede usar con precisi√≥n como palabra clave, y si no hay tales ramas, se puede usar como un identificador.pero si se ingresa una palabra clave no reservada, entonces debe verificarse adicionalmente. Una comprobaci√≥n adicional es que el m√©todo se examina en el contexto actual en la b√∫squeda de ramas, donde esta palabra clave no reservada se puede usar exactamente como una palabra clave, y si no hay tales ramas, se puede usar como un identificador.pero si se ingresa una palabra clave no reservada, entonces debe verificarse adicionalmente. Una comprobaci√≥n adicional es que el m√©todo se examina en el contexto actual en la b√∫squeda de ramas, donde esta palabra clave no reservada se puede usar con precisi√≥n como palabra clave, y si no hay tales ramas, se puede usar como un identificador.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estrictamente hablando, este problema solo puede resolverse mediante ANTLR, pero dicha soluci√≥n no ser√° √≥ptima. </font><font style="vertical-align: inherit;">Una soluci√≥n cl√°sica a este problema es crear una regla que enumere todas las palabras clave no reservadas y un token de identificaci√≥n. </font><font style="vertical-align: inherit;">Adem√°s, siempre que est√© permitido usar un identificador, ya no se usa el token identificador del identificador, pero esta es una regla especial. </font><font style="vertical-align: inherit;">Dicha soluci√≥n no solo le hace recordar agregar la palabra clave cuando la ingresa, no solo donde se usa, sino tambi√©n en esta regla especial, tambi√©n funciona mucho m√°s lentamente.</font></font><br>
<a name="mistakes"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Errores</font></font></h2><br>
<a name="trees"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√°lisis sin √°rboles</font></font></h3><br>
<img src="https://habrastorage.org/webt/g1/ty/qw/g1tyqwxs43omgbkeozhr5ygvxw0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resultado del analizador, como regla, es un √°rbol de sintaxis. </font><font style="vertical-align: inherit;">Un √°rbol de sintaxis ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abstracto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> u </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concreto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) es una estructura de datos que refleja el texto del programa a trav√©s del prisma de la gram√°tica formal. </font><font style="vertical-align: inherit;">Si desea implementar un editor de c√≥digo con autocompletado para el idioma que se le ocurri√≥ recientemente, despu√©s de estudiar el problema, es probable que implemente aproximadamente el siguiente algoritmo:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analizar texto en el editor. </font><font style="vertical-align: inherit;">Obtenga el √°rbol de sintaxis.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encuentra el nudo debajo del carro. </font><font style="vertical-align: inherit;">Comb√≠nalo con la gram√°tica. </font><font style="vertical-align: inherit;">Descubra qu√© palabras clave y tipos de objetos estar√°n disponibles en ese momento.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, la gram√°tica se representa convenientemente como un gr√°fico o una m√°quina de estados finitos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, al comienzo del desarrollo, el IDE ANTLR exist√≠a en su tercera versi√≥n. La cuarta versi√≥n ha sido reescrita desde cero y es fundamentalmente diferente de la tercera; al pasar el c√≥digo, el analizador generar√° autom√°ticamente un √°rbol de an√°lisis sin una sola l√≠nea adicional. En la tercera versi√≥n, hab√≠a un mecanismo por el cual se pod√≠a decirle a ANTLR c√≥mo construir un √°rbol, pero no fue muy agradable usarlo. Adem√°s, muchos ejemplos y art√≠culos sobre este tema sugirieron usar el mecanismo de acciones para ejecutar c√≥digo en el momento en que el analizador pasa la regla. Este mecanismo es incre√≠blemente conveniente y le permite obtener resultados r√°pidamente. Desafortunadamente, esta soluci√≥n provoc√≥ problemas arquitect√≥nicos importantes con el desarrollo del producto y un aumento en la complejidad de soportar nuevas funcionalidades. El hecho es que en un archivo, en un archivo de gram√°tica,Las acciones comenzaron a acumularse asociadas con una gran cantidad de funcionalidades diferentes, lo que ser√≠a bueno distribuir a diferentes ensamblajes. En el futuro, pudimos distribuir los manejadores de acci√≥n para diferentes ensamblajes implementando una versi√≥n bastante complicada del patr√≥n de notificaci√≥n de suscriptor, pero las llamadas mismas, con la transmisi√≥n de la informaci√≥n necesaria, a√∫n abarrotan nuestra gram√°tica, complican el soporte de nuevas funcionalidades e imponen restricciones serias y desagradables en la arquitectura.complicar el soporte de nuevas funcionalidades e imponer restricciones serias y desagradables en la arquitectura.complicar el soporte de nuevas funcionalidades e imponer restricciones serias y desagradables en la arquitectura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero no todo es tan obvio como parece. </font><font style="vertical-align: inherit;">El hecho es que ANTLR3 es mucho m√°s r√°pido que ANTLR4. </font><font style="vertical-align: inherit;">Seg√∫n nuestras mediciones, las diferencias son aproximadamente 6 veces. </font><font style="vertical-align: inherit;">Adem√°s, el √°rbol de sintaxis para los scripts grandes podr√≠a ocupar mucho espacio en la RAM, y siempre que tengamos que sobrevivir en el espacio de direcciones de 32 bits de los estudios de Administraci√≥n de Visual y SqlServer esto puede ser cr√≠tico.</font></font><br>
<a name="end"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los subtotales pueden ser los siguientes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANTLR, una herramienta poderosa para construir analizadores</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Su ventaja sobre otros es herramientas, sintaxis conveniente, una gran cantidad de idiomas compatibles</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANTLR4 fue reescrito desde cero e implica trabajar con el analizador diferente de la tercera versi√≥n</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Siempre hay una manera de obtener un poco m√°s de las bibliotecas de ThirdParty de lo que dan</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lenguaje espec√≠fico de SQL, crear analizadores no es una tarea f√°cil</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El c√≥digo de an√°lisis para tareas relacionadas con la creaci√≥n de un IDE tiene sus propias peculiaridades: debe considerar trabajar en scripts no cifrados o no v√°lidos</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Nos vemos en la pr√≥xima parte!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es502406/index.html">Antig√ºedades: un segundo enfoque para VHS, est√©reo de alta fidelidad y video jabonoso</a></li>
<li><a href="../es502408/index.html">Falsificaciones y teor√≠as de conspiraci√≥n. ¬øC√≥mo no volverte loco y salvar a otros?</a></li>
<li><a href="../es502410/index.html">29¬∫ lanzamiento exitoso del a√±o. ESTADOS UNIDOS. Lanzamiento militar. "Plano espacial" X-37</a></li>
<li><a href="../es502412/index.html">Guilloche de otra manera</a></li>
<li><a href="../es502414/index.html">FOSS News No. 16: una revisi√≥n del software gratuito y de c√≥digo abierto del 11 al 17 de mayo de 2020</a></li>
<li><a href="../es502418/index.html">Monitor de imagen 3D</a></li>
<li><a href="../es502420/index.html">Hallazgos interesantes de CSS en el dise√±o de Twitter</a></li>
<li><a href="../es502422/index.html">Reducci√≥n del 60% en el tama√±o de la aplicaci√≥n React Native en unos pocos pasos simples</a></li>
<li><a href="../es502432/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 415 (11-17 de mayo de 2020)</a></li>
<li><a href="../es502436/index.html">CI TeamCity - Automatizaci√≥n de procesos de compilaci√≥n de pruebas de Android y UI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>