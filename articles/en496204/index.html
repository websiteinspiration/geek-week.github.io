<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∏Ô∏è üíì üë©üèº‚Äçü§ù‚Äçüë©üèª CI / CD Process Update: Preparation and Planning üëù ‚ùé üëÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In 2020, it is probably quite difficult to find a project in a stack description that would not have one of the following words: IaC, microservices, k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>CI / CD Process Update: Preparation and Planning</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496204/"><img src="https://habrastorage.org/webt/vl/jg/11/vljg11dfzemfbyfy8oexvw73eyq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In 2020, it is probably quite difficult to find a project in a stack description that would not have one of the following words: IaC, microservices, kubernetes, docker, aws / azure / gcloud, blockchain, ML, VR and so on. </font><font style="vertical-align: inherit;">And that's great! </font><font style="vertical-align: inherit;">Progress does not stand still. </font><font style="vertical-align: inherit;">We are growing, our projects are growing with us, more convenient and functional tools appear that solve modern problems.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hello. So I wanted to start this article. But then I reviewed some things, talked with my colleagues, and realized that I would be wrong. There are still projects that are already 15+ years old, with managers and participants who are old believers, and accordingly these projects have an ancient technology stack that is quite difficult to maintain in an existing zoo. And for some reason, this project cannot be globally updated (the customer is a starover, there is no update, the project is very large, and the migration is delayed, or everyone is happy with everything), and you have to support it. Even more unpleasant when a similar project is still actively being developed. It's like a snowball. The customer and the public require features, the code requires delivery, the servers require attention and care ... But the bitpack - so in general, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ceased to support mercury</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Just such a case is proposed for consideration.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What will be considered: converting mercurial-git, moving CI from CruiseControl.NET to TeamCity, from git-deployment to Octopus with a </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">small</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> description of the whole process. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The text turned out a lot, so it will be divided into separate parts to facilitate perception. </font><font style="vertical-align: inherit;">There will be a table of contents. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 1: what is, why it is not like, planning, a little bash. </font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would call this part near-technical. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 2: teamcity. </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 3: octopus deploy. </font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Part 4: behind the scenes. </font><font style="vertical-align: inherit;">Unpleasant moments, plans for the future, possibly FAQ. </font><font style="vertical-align: inherit;">Most likely, it can also be called near-technical.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would not call this a guide to repetition for many reasons: insufficient immersion in the project processes due to lack of time, insufficient practice of such things, a huge monolith in which all subprojects are closely intertwined, and a bunch of other nuances that make you burn, wonder, put up with them , but in no case do not please. </font><font style="vertical-align: inherit;">And also, due to the features of the project (it is quite unique), some steps will be tailored exclusively for this case.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classic introduction</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We had a mercurial repository, 300+ (open!) Brunches, ccnet, another ccnet + git (for deployments), and a whole host of project modules with our own configs and individual clients, four environments and a whole host of pools in IIS, as well as cmd scripts, SQL, more than five hundred domains, two dozen builds, and active development in addition. Not that all this was necessary, but it worked, and it was inconvenient and long. The only thing that caused me concern was the presence of other projects requiring my attention. Nothing in the process of working with tasks of this magnitude is more dangerous than the lack of concentration and interruption.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I knew that sooner or later I would have to pay attention to other tasks, and that is why I spent a huge amount of time studying the existing infrastructure so that subsequently at least there would not be unresolved issues. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unfortunately, I can‚Äôt give a full description of the project, due to the NDA, so general technical points will be considered. All names related to the project will also be painted over. I apologize for the black smear on the screenshots.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the key features of the project is that it has a number of modules that have one core, but differ in its configurations. There are also modules with a ‚Äúspecial‚Äù approach, designed for resellers and especially large customers. One module can serve more than one client. A client should be understood as a separate organization or group of people who gain access to a specific module. Each client gets access on his own domain, has his own design and his own unique default settings. The client is identified by the domain that it uses. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The general scheme of this part of the project can be represented as follows:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ft/1p/jp/ft1pjp-5mnyfk2fu07salwryrew.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, the core is used the same everywhere, and this can be used. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reasons why the task arose to review and update CI / CD processes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CruiseControl.NET was used as a build system. </font><font style="vertical-align: inherit;">Working with him is a dubious pleasure in principle. </font><font style="vertical-align: inherit;">XML configs on multiple screens, a bunch of dependencies and linking configs to each other, lack of modern solutions to modern problems.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some developers (mainly leads) on the project must have access to build servers, and they sometimes like to change ccnet configs which should not be changed. </font><font style="vertical-align: inherit;">Guess what happens next. </font><font style="vertical-align: inherit;">You need to have a simple and convenient management of rights in the CI system, without taking away from the developers access to the server. </font><font style="vertical-align: inherit;">Simply put, there is no text config - there is nowhere to climb with playful hands.</font></font></li>
<li>  - ‚Ä¶  CCNET,        git.         (. ).</li>
<li> ,      .     ,      .&nbsp;</li>
<li>-       ,        ‚Äî         (   )       .</li>
<li>   .        ?   ?     ?            .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suboptimal use of resources and an outdated process of building and delivering code.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figure to paragraph 3:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hc/yk/kv/hcykkvp6zijbax7ykugimj3qwkq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the planning stage, it was decided to use Teamcity as a build system, and Octopus as a deployment system. </font><font style="vertical-align: inherit;">The customer‚Äôs "iron" infrastructure has remained unchanged: separate dedicated servers for dev, test, staging and production, as well as reseller servers (mainly production environments). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The customer was provided with Proof of Concept on the example of one of the modules, an action plan was written, preparatory work was carried out (installation, configuration, etc.). </font><font style="vertical-align: inherit;">There is probably no sense in describing this. </font><font style="vertical-align: inherit;">How to install team city can be read on the official website. </font><font style="vertical-align: inherit;">I will dwell separately on some formulated requirements for the new system:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Easy maintenance with all the consequences (backups, updates, problem solving, if any).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Universality. </font><font style="vertical-align: inherit;">Ideally, develop a general scheme according to which all modules are assembled and delivered, and use it as a template.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minimize time for adding new build configurations and maintenance. </font><font style="vertical-align: inherit;">Clients are added / removed. </font><font style="vertical-align: inherit;">Sometimes it becomes necessary to make new setups. </font><font style="vertical-align: inherit;">It is necessary that when creating a new module there should be no delay with the configuration of its delivery.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At about this point, we remembered the discontinuation of support for mercurial repositories with a bitbucket, and the requirement was added to transfer the repository to git while preserving branches and history of commits.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preparation: repository conversion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It would seem that someone clearly solved this problem before us and instead of us. </font><font style="vertical-align: inherit;">You just need to find a ready-made working solution. </font><font style="vertical-align: inherit;">Fast export turned out to be not so fast. </font><font style="vertical-align: inherit;">Plus, it didn't work. </font><font style="vertical-align: inherit;">Unfortunately, there are no logs and screenshots left. </font><font style="vertical-align: inherit;">The fact is that he could not. </font><font style="vertical-align: inherit;">Bitbucket does not provide its own converter (but could). </font><font style="vertical-align: inherit;">A couple more googled methods, and also by. </font><font style="vertical-align: inherit;">I decided to write my own scripts, anyway this is not the only mercurial repository, it will come in handy in the future. </font><font style="vertical-align: inherit;">Early developments will be presented here (because they still remain in the same form). </font><font style="vertical-align: inherit;">The logic of work looks something like this:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We take the extension mercurial hggit as a basis.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We get a list of all branches of the mercurial repository.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We convert branch names (thanks to mercurial and the developers for the spaces in the branch names, special thanks for the umlauts and other characters that add joy to life).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make bookmarks (hg bookmark) and push into the intermediate repository. </font><font style="vertical-align: inherit;">What for? </font><font style="vertical-align: inherit;">Because bitbucket, and because you cannot create a bookmark with the same name as the name of the branch (for example, staging).&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the new (already git) repository, remove the postfix from the branch name and migrate hgignore to gitignore.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Push to the main repository. </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listing commands according to points:</font></font><br>
<br>
<ol>
<li><pre><code class="bash hljs">$ <span class="hljs-built_in">cd</span> /path/to/hg/repo<font></font>
$ cat &lt;&lt; EOF &gt;&gt; ./.hg/hgrc<font></font>
[extensions]<font></font>
hggit=<font></font>
EOF<font></font>
</code></pre></li>
<li><pre><code class="bash hljs">$ hg branches &gt; ../branches
</code></pre></li>
<li><pre><code class="bash hljs"><span class="hljs-meta">#!/usr/bin/env bash</span>
hgBranchList=<span class="hljs-string">"./branches"</span>
sed -i <span class="hljs-string">'s/:.*//g'</span> <span class="hljs-variable">${hgBranchList}</span>
symbolsToDelete=$(awk <span class="hljs-string">'{print $NF}'</span> FS=<span class="hljs-string">" "</span> <span class="hljs-variable">${hgBranchList}</span> &gt; sym_to_del.tmp)<font></font>
 <font></font>
i=0<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> hgBranch; <span class="hljs-keyword">do</span>
  hgBranches[<span class="hljs-variable">$i</span>]=<span class="hljs-variable">${hgBranch}</span>
  i=$((i+<span class="hljs-number">1</span>))
<span class="hljs-keyword">done</span> &lt;<span class="hljs-variable">${hgBranchList}</span><font></font>
 <font></font>
i=0<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> str; <span class="hljs-keyword">do</span>
  strToDel[<span class="hljs-variable">$i</span>]=<span class="hljs-variable">${str}</span>
  i=$((i+<span class="hljs-number">1</span>))
<span class="hljs-keyword">done</span> &lt; ./sym_to_del.tmp<font></font>
 <font></font>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable">${!strToDel[@]}</span>
<span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">${hgBranches[$i]}</span> | sed <span class="hljs-string">"s/<span class="hljs-variable">${strToDel[$i]}</span>//"</span> &gt;&gt; result.tmp
<span class="hljs-keyword">done</span><font></font>
 <font></font>
sed -i <span class="hljs-string">'s/[ \t]*$//'</span> result.tmp<font></font>
sed <span class="hljs-string">'s/^/"/g'</span> result.tmp &gt; branches_hg<font></font>
sed -i <span class="hljs-string">'s/$/"/g'</span> branches_hg<font></font>
sed <span class="hljs-string">'s/ /-/g'</span> result.tmp &gt; branches_git<font></font>
sed -i <span class="hljs-string">'s/-\/-/\//g'</span> branches_git<font></font>
sed -i <span class="hljs-string">'s/-\//\//g'</span> branches_git<font></font>
sed -i <span class="hljs-string">'s/\/-/\//g'</span> branches_git<font></font>
sed -i <span class="hljs-string">'s/---/-/g'</span> branches_git<font></font>
sed -i <span class="hljs-string">'s/--/-/g'</span> branches_git<font></font>
rm sym_to_del.tmp<font></font>
rm result.tmp<font></font>
</code></pre></li>
<li><pre><code class="bash hljs"><span class="hljs-meta">#!/usr/bin/env bash</span>
gitBranchList=<span class="hljs-string">"./branches_git"</span>
hgBranchList=<span class="hljs-string">"./branches_hg"</span>
hgRepo=<span class="hljs-string">"/repos/reponame"</span><font></font>
 <font></font>
i=0<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> hgBranch; <span class="hljs-keyword">do</span>
  hgBranches[<span class="hljs-variable">$i</span>]=<span class="hljs-variable">${hgBranch}</span>
  i=$((i+<span class="hljs-number">1</span>))
<span class="hljs-keyword">done</span> &lt;<span class="hljs-variable">${hgBranchList}</span><font></font>
 <font></font>
i=0<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> gitBranch; <span class="hljs-keyword">do</span>
  gitBranches[<span class="hljs-variable">$i</span>]=<span class="hljs-variable">${gitBranch}</span>
  i=$((i+<span class="hljs-number">1</span>))
<span class="hljs-keyword">done</span> &lt;<span class="hljs-variable">${gitBranchList}</span><font></font>
 <font></font>
<span class="hljs-built_in">cd</span> <span class="hljs-variable">${hgRepo}</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable">${!gitBranches[@]}</span>
<span class="hljs-keyword">do</span>
  hg bookmark -r <span class="hljs-string">"<span class="hljs-variable">${hgBranches[$i]}</span>"</span> <span class="hljs-string">"<span class="hljs-variable">${gitBranches[$i]}</span>-cnv"</span>
<span class="hljs-keyword">done</span><font></font>
 <font></font>
hg push git+ssh://git@bitbucket.org:username/reponame-temp.git<font></font>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Done."</span>
</code></pre></li>
<li><pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># clone repo, run git branch -a, delete remotes/origin words to leave only branch names, delete -cnv postfix, delete default branch string because we can't delete it</span>
repo=<span class="hljs-string">"/repos/repo"</span>
gitBranchList=<span class="hljs-string">"./branches_git"</span>
defaultBranch=<span class="hljs-string">"default-cnv"</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> gitBranch; <span class="hljs-keyword">do</span>   gitBranches[<span class="hljs-variable">$i</span>]=<span class="hljs-variable">${gitBranch}</span>;   i=$((i+<span class="hljs-number">1</span>)); <span class="hljs-keyword">done</span> &lt; <span class="hljs-variable">$gitBranchList</span>
<span class="hljs-built_in">cd</span> <span class="hljs-variable">$repo</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable">${!gitBranches[@]}</span>; <span class="hljs-keyword">do</span> git checkout <span class="hljs-variable">${gitBranches[$i]}</span>-cnv; <span class="hljs-keyword">done</span>
git checkout <span class="hljs-variable">$defaultBranch</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable">${!gitBranches[@]}</span>; <span class="hljs-keyword">do</span>
    git branch -m <span class="hljs-variable">${gitBranches[$i]}</span>-cnv <span class="hljs-variable">${gitBranches[$i]}</span>
    git push origin :<span class="hljs-variable">${gitBranches[$i]}</span>-cnv <span class="hljs-variable">${gitBranches[$i]}</span>
    git push origin -u <span class="hljs-variable">${gitBranches[$i]}</span>
<span class="hljs-keyword">done</span>
</code></pre></li>
<li><pre><code class="bash hljs"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># clone repo, run git branch -a, delete remotes/origin words to leave only branch names, delete -cnv postfix, delete default branch string because we can't delete it</span>
repo=<span class="hljs-string">"/repos/repo"</span>
gitBranchList=<span class="hljs-string">"./branches_git"</span>
defaultBranch=<span class="hljs-string">"default"</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> gitBranch; <span class="hljs-keyword">do</span>   gitBranches[<span class="hljs-variable">$i</span>]=<span class="hljs-variable">${gitBranch}</span>;   i=$((i+<span class="hljs-number">1</span>)); <span class="hljs-keyword">done</span> &lt; <span class="hljs-variable">$gitBranchList</span>
<span class="hljs-built_in">cd</span> <span class="hljs-variable">$repo</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-variable">${!gitBranches[@]}</span>; <span class="hljs-keyword">do</span>
    git checkout <span class="hljs-variable">${gitBranches[$i]}</span>
    sed -i <span class="hljs-string">'1d'</span> .hgignore<font></font>
    mv .hgignore .gitignore<font></font>
    git add .<font></font>
    git commit -m <span class="hljs-string">"Migrated ignore file"</span>
<span class="hljs-keyword">done</span>
</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I‚Äôll try to explain the meaning of some actions, namely the use of an intermediate repository. Initially, in the repository after conversion, the branch names contain the postfix ‚Äú-cnv‚Äù. This is due to the hg bookmark feature. You need to remove this postfix, and also make gitignore files instead of hgignore. All this adds history, and therefore increases the size of the repository (and unreasonably). As another example, I can cite the following: try to create a repository, and push the first commit to 300M with the code into it. Then add it to gitignore, and push it without it. He will remain in history. Now try to remove it from the history (git filter-branch). With a certain number of commits, the resulting repository size will not decrease, but increase. This is solved by optimization, but it cannot be initiated on bitbucket.It is carried out only when importing the repository. Therefore, all rough operations are carried out with an intermediate, and then import into a new one is done. The size of the intermediate repository in the final was 1.15G, and the size of the resulting 350M.&nbsp;</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The entire migration process was divided into several stages, namely:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">preparation (demo to the customer using an example of one build, software installation, repository conversion, updating existing ccnet configs);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CD configuration for dev environment and its tests (the old system remains working in parallel);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CI / CD settings for the remaining environments (in parallel with the existing "good") and tests;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">migration dev, staging and test;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migrating production and transferring domains from old IIS instances to new ones.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The description of the successfully completed preparatory phase is currently being completed. </font><font style="vertical-align: inherit;">Some grandiose success was not achieved here, except that the existing system did not break down and the mercurial repository in git was migrated. </font><font style="vertical-align: inherit;">However, without a description of these processes, there will be no context for more technical parts. </font><font style="vertical-align: inherit;">The next part will describe the process of setting up a CI system based on teamcity.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en496190/index.html">About Phrasal Verbs-2</a></li>
<li><a href="../en496192/index.html">Call Rust functions from Go</a></li>
<li><a href="../en496194/index.html">On the binarization of fine structure tomographic images</a></li>
<li><a href="../en496196/index.html">DEFCON Conference 26. Wagging the tail: covert passive surveillance. Part 1</a></li>
<li><a href="../en496198/index.html">Presentations of the second ROS Meetup on the topic of training robots</a></li>
<li><a href="../en496206/index.html">A billion operations in the database in 0.3 seconds. Do not compare OLTP with OLAP, but QuestDB with PostgreSQL</a></li>
<li><a href="../en496208/index.html">How JIT inlines our C # code (heuristics)</a></li>
<li><a href="../en496210/index.html">Biodiversity may have evolved from the principle of playing rock-paper-scissors</a></li>
<li><a href="../en496212/index.html"># 04 - And a whole byte is not enough ... | Take BK by the horns</a></li>
<li><a href="../en496214/index.html">AdColony: 89% of publishers of mobile apps and games use promotional videos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>