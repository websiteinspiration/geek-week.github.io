<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋 👙 🤖 Sebuah lampu pintar untuk "orang kaya" dengan tangan "malas", itu "sederhana" dan nyaman 👍🏼 👩🏽‍🔧 🖼️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="pengantar
 Dia membuat pencahayaan "modern" di dapur untuk bak cuci, kompor, dan meja potong berdasarkan strip LED di bawah kendali arduino (sebut saj...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sebuah lampu pintar untuk "orang kaya" dengan tangan "malas", itu "sederhana" dan nyaman</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488480/"><img src="https://habrastorage.org/webt/os/hi/gl/oshiglmjknpmabuu6ivivauqzdw.jpeg"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengantar</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia membuat pencahayaan "modern" di dapur untuk bak cuci, kompor, dan meja potong berdasarkan strip LED di bawah kendali arduino (sebut saja lampu 1). </font><font style="vertical-align: inherit;">Desain ini bekerja selama 2 tahun, sampai bagian kekuatan "otak" memburuk. </font><font style="vertical-align: inherit;">Ini adalah kesempatan yang bagus untuk menemukan kembali roda dari "tempat sampah improvisasi" lagi (lampu 2). </font><font style="vertical-align: inherit;">Benar, kali ini "sampah" akan mahal dan kompatibel dengan rumah pintar Z-wave. </font><font style="vertical-align: inherit;">Berikut ini adalah kisah tentang mengganti arduino dengan ZUNo (modul yang kompatibel dengan arduino untuk membuat perangkat Z-wave) dengan penghematan kode maksimum dan penjelasan tentang perubahan yang diperlukan.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang terjadi sebelum saya muncul di sana</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekali waktu, untuk mencuci piring atau memasak makanan, perlu menyalakan lampu di atas wastafel. </font><font style="vertical-align: inherit;">Itu adalah lampu meja redone. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak suka menekan saklar kecil dengan tangan basah karena saklar 220 volt ke lampu pijar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tl/yz/dq/tlyzdqgfcsedxxsswsqlekygins.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, cahaya dari lampu jatuh terutama di wastafel, tetapi saya ingin lebih baik menerangi meja dan kompor memasak. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tujuan:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jadikan lampu on / off di dapur tanpa kontak;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menyalakan wastafel, meja, dan kompor secara merata;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hemat energi dengan mengganti lampu pijar dengan LED.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia merakit lampu 1. Terdiri dari kotak aluminium 2 meter dengan diffuser untuk pita RGB dan unit kontrol. Sebuah kotak dan diffuser dibeli sudah jadi di toko, ada selotip, dan unit kontrol sudah lama berada di sudut dan menunggu di sayap. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kasingnya adalah industri (tahan debu, tahan air). Karena pita itu 12 volt, unit catu daya dari 220 V hingga 12 V terletak di unit, papan isolasi galvanik untuk mengontrol pita berdasarkan TLP250 (optocoupler) juga mengendalikan semua Arduino ini dalam desain yang ringkas.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Saya mendapat isolasi galvanik dari proyek lama. Suatu hari saya membuat lampu latar untuk minibar di meja saya. Saat pintu dibuka, panel sentuh merekam perubahan kapasitas dan menyalakan cahaya yang berkilau lembut. Artinya, dewan cocok untuk proyek saat ini, yang tersisa hanyalah memotong semua yang tidak perlu. Ada konverter linier 5-volt di papan, itu didukung oleh ZUNo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Direncanakan untuk menyalakan lampu dengan nampan tangan ke pengukur jarak ultrasonik. Dia memasangnya di tutupnya, dan semua bagian lainnya masuk ke dalam kotak. Semua "andal" diperbaiki dengan perekat hot-melt. Pada saat pengujian, saya membuat tombol terdekat untuk memasok daya ke unit kontrol dari saklar lampu untuk instalasi eksternal.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r2/dn/tj/r2dntjzjoijyn-g7vk4vdkg-d5y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menyalakan lampu menjadi lebih mudah dan aman. </font><font style="vertical-align: inherit;">Itu dipasang terbalik di bagian bawah lemari dapur dan lebih sulit untuk mendapatkan air dari tangan basah dari dalam.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan dari unit kontrol sebelumnya</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pencahayaan area kerja dapur menjadi lebih merata dan menyenangkan, karena warna yang tidak alami pada strip LED saya, warna beberapa produk berubah. </font><font style="vertical-align: inherit;">Sebagai contoh: wortel tampak lebih menggiurkan karena warnanya yang lebih cerah. </font><font style="vertical-align: inherit;">Tapi itu tidak banyak mengganggu, dan saya harap itu tidak banyak merugikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan on / off tanpa kontak, semuanya menjadi lebih buruk. </font><font style="vertical-align: inherit;">Itu berhasil. </font><font style="vertical-align: inherit;">Tetapi setelah 5 menit dalam kondisi mati, lampu kilat mulai menyala pada strip LED. </font><font style="vertical-align: inherit;">Saya tidak mulai mengulangi sirkuit pada optocouplers dan meninggalkan semuanya apa adanya. </font><font style="vertical-align: inherit;">Hanya untuk menghidupkan dan mematikan mulai menggunakan saklar baru. </font><font style="vertical-align: inherit;">Semua orang menyukai lokasi dan bentuknya.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penggunaan selama dua tahun, lemak dan senyawa lain yang dikeluarkan selama pemasakan terakumulasi di tubuh dan di dalamnya. </font><font style="vertical-align: inherit;">Plak ini sebagian menembus ke dalam perumahan melalui lubang untuk masuknya kabel. </font><font style="vertical-align: inherit;">Tetapi karena permukaan tubuh yang mengkilap, zat ini mengembun menjadi massa agar-agar. </font><font style="vertical-align: inherit;">Sangat menyenangkan untuk disentuh, tidak berbau dan ... (Saya tidak merasakannya). </font><font style="vertical-align: inherit;">Saya mengambil beberapa foto tempat itu dalam bentuk kuman naga. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/fr/ys/jzfrystsmthfk7fy5j_o70kkcfm.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ot/br/mg/otbrmglxan7uooc1a1e4n88z9iq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di dinding, zat ini berubah menjadi serangan mengerikan, yang tidak hanya dicuci.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa yang telah terjadi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah mencari-cari dalam keranjang saya menemukan modul ekspansi yang belum selesai untuk ZUNo. </font><font style="vertical-align: inherit;">ZUNo adalah papan seperti arduino untuk mendesain perangkat Anda sendiri yang kompatibel dengan rumah pintar Z-Wave. </font><font style="vertical-align: inherit;">Diprogram dari lingkungan Arduino.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spesifikasi produsen:</font></font></b><div class="spoiler_text"><ul>
<li>28 kB Flash memory for your sketches</li>
<li>2 kB RAM available</li>
<li>Z-Wave RF transmitter at 9.6/40/100 kbps</li>
<li>26 GPIO (overlaps with special hardware controllers)</li>
<li>4 ADC</li>
<li>5 PWM</li>
<li>2 UART</li>
<li>1 USB (serial port)</li>
<li>16 kB EEPROM</li>
<li>1 SPI (master or slave)</li>
<li>4 IR controllers, 1 IR learn capability</li>
<li>1 TRIAC/ZEROX to control dimmer</li>
<li>3 Interrupts</li>
<li>1 Timer 4 MHz</li>
<li>I2C (software)</li>
<li>1-Wire (software)</li>
<li>8x6 Keypad Scanner (software)</li>
<li>2 service LED, 1 service button</li>
<li>1 user test LED</li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul ekspansi menjadikan ZUNo papan debug lengkap, yang, setelah debugging prototipe, dapat digunakan sebagai perangkat lengkap. </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beberapa informasi dari pabrikan:</font></font></b><div class="spoiler_text"><ul>
<li>One 0-10 V analog output — control industrial dimmers</li>
<li>Up to four PWM or switch outputs (up to 5 A per channel) — control contactors, switches, halogen bulbs or LED strips</li>
<li>Up to eight digital 0/3 V inputs or outputs — connect various low voltage digital senors and actors</li>
<li>Up to four digital 0/3, 0/5 or 0/12 V digital or analog inputs — connect industrial 10 V sensors or any Arduino-compatible sensor</li>
<li>RS485 or UART — for industial meters</li>
<li>OneWire — for DS18B20 or other sensors</li>
</ul><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk proyek saya, saya memerlukan 3 transistor yang kuat untuk mengalihkan 12 volt ke strip LED dan konverter dari 12 volt ke 5 volt ke daya ZUNo. </font><font style="vertical-align: inherit;">Sisa dari pinggiran modul ekspansi tidak disolder atau diuji. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4j/kr/tt/4jkrtt63ocqqrkugav0nrtfvtn8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bagian sirkuit ini, tidak ada cukup dioda untuk catu daya, untuk perlindungan terhadap "pembalikan polaritas", dan resistor pada gerbang transistor efek medan listrik harus terhubung ke gerbang, dan tidak di depan resistor pembatas. </font><font style="vertical-align: inherit;">Saya akan menulis lebih banyak tentang ini di kesimpulan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul ekspansi ini disediakan di perumahan dari Gainta. </font><font style="vertical-align: inherit;">Unit kontrol saya sebelumnya juga dalam kasus dari perusahaan ini, tetapi dengan ukuran yang berbeda. </font><font style="vertical-align: inherit;">Sayangnya, pengikat pada modul tidak sesuai dengan case lama, tetapi tidak ingin mengebor yang baru, meninggalkan case lama. </font><font style="vertical-align: inherit;">Papan itu "ditanam" pada perekat meleleh panas.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wm/ls/ah/wmlsahydh07_hxmpqaryl1atchs.jpeg"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit tentang pemrograman Arduino dan ZUNo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perangkat Z-wave harus memiliki sejumlah kelas tertentu. Kelas menggambarkan fungsi perangkat dan antarmuka interaksi. Misalnya, lampu saya mengontrol strip LED yang terdiri dari tiga warna (merah, hijau, biru). Fungsi-fungsi ini dilakukan oleh kelas multilevel Switch. Jika kita menambahkannya ke sketsa, kita dapat mengubah kecerahan salah satu dari jarak jauh. Untuk mengontrol tiga warna, Anda perlu membuat tiga instance dari kelas ini. Saya tidak akan membicarakan hal ini lebih detail dan mendetail. Karena manipulasi kelas rutin disembunyikan untuk pengguna ZUNo dengan gagasan "saluran". Sebagai contoh, saya memerlukan tiga kelas Switch multilevel, sehingga dalam kode akan muncul 3 saluran Switch multilevel dan beberapa fungsi panggilan balik untuk kontrol radio. Bagaimana cara melakukannya? Anda juga perlu menambahkan kelas dasar Switch,untuk menghidupkan dan mematikan lampu dengan satu sentuhan tombol (dari antarmuka pengontrol jaringan), dan tidak mengonfigurasi 3 saluran setiap kali.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda harus mengunjungi situs web pengembang, tempat contoh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z-uno.z-wave.me/Reference/ZUNO_SWITCH_MULTILEVEL ditampilkan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Setiap kelas yang didukung oleh ZUNo memiliki deskripsi dan contoh. </font><font style="vertical-align: inherit;">Selanjutnya, salin dan tempel fungsi yang diusulkan ke dalam sketsa Anda. </font><font style="vertical-align: inherit;">Sekarang di sketsa ada tiga saluran multilevel switch dan 6 fungsi callback untuk menanggapi perintah di radio. </font><font style="vertical-align: inherit;">Saya tidak terlalu canggih di kelas Z-Wave, jadi perangkat strip LED saya sebelumnya bekerja dengan set kelas ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saluran dinyatakan seperti ini:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Judul spoiler</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">ZUNO_SETUP_CHANNELS(<font></font>
      ZUNO_SWITCH_MULTILEVEL(getRed, setRed),<font></font>
      ZUNO_SWITCH_MULTILEVEL(getGreen, setGreen),<font></font>
      ZUNO_SWITCH_MULTILEVEL(getBlue, setBlue),<font></font>
      ZUNO_SWITCH_BINARY(switch_getter, switch_setter)<font></font>
);</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal ini menyebabkan generasi widget berikut di controller setelah menambahkan ke jaringan: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/to/-y/if/to-yif5eaf9xkuxdk4t2oxp6ph4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menyesuaikan warna, perlu untuk membuka dan mengkonfigurasi setiap warna dalam menu controller secara terpisah. </font><font style="vertical-align: inherit;">Itu tidak nyaman dan lambat. </font><font style="vertical-align: inherit;">Namun, saya beruntung. </font><font style="vertical-align: inherit;">Ternyata saya tidak sendiri. </font><font style="vertical-align: inherit;">Mereka memikirkan kami dan membuat saluran </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z-uno.z-wave.me/Reference/ZUNO_SWITCH_COLOR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sekarang hanya ada satu saluran dan dua fungsi panggilan balik dalam sketsa. </font><font style="vertical-align: inherit;">Dalam menu pengontrol, pengaturan warna dilakukan secara terpisah untuk setiap warna, serta untuk sekaligus, dengan memilih dari palet.</font></font><br>
<br>
<pre><code class="cpp hljs">ZUNO_SETUP_CHANNELS(ZUNO_SWITCH_COLOR(SWITCH_COLOR_FLAGS_RED|SWITCH_COLOR_FLAGS_GREEN|SWITCH_COLOR_FLAGS_BLUE, getterFunction, setterFunction));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan di menu controller sepertinya ini: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/m3/zn/qk/m3znqkbwue228cttqmqmhggvwxu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi selanjutnya menanggapi permintaan melalui radio. </font><font style="vertical-align: inherit;">Permintaan untuk membaca status salah satu saluran warna mungkin datang.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function">BYTE <span class="hljs-title">getterFunction</span><span class="hljs-params">(BYTE component)</span> </span>{
  <span class="hljs-keyword">switch</span>(component)<font></font>
  {<font></font>
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_RED:
      <span class="hljs-keyword">return</span> pwmR;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_GREEN:
      <span class="hljs-keyword">return</span> pwmG;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_BLUE:
      <span class="hljs-keyword">return</span> pwmB;
      <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan ini adalah fungsi untuk mengatur warna dari antarmuka pengontrol.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setterFunction</span><span class="hljs-params">(BYTE component, BYTE newValue)</span> 
</span>{
  <span class="hljs-keyword">switch</span>(component)<font></font>
  {<font></font>
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_RED:<font></font>
      pwmR = newValue;<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_GREEN:<font></font>
      pwmG = newValue;<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_BLUE:<font></font>
      pwmB = newValue;<font></font>
      <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
  radio_action = <span class="hljs-number">1</span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu semua kode yang perlu Anda tambahkan untuk mengubah sketsa arduino menjadi sketsa untuk ZUNo.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah perakitan dan instalasi, semua tugas yang dinyatakan selesai. </font><font style="vertical-align: inherit;">Namun, kebiasaan menyalakan lampu dengan saklar tetap (ternyata sangat nyaman). </font><font style="vertical-align: inherit;">Opsi inklusi tanpa kontak juga berfungsi. </font><font style="vertical-align: inherit;">Di antara kekurangannya, saya ingin memperhatikan kelap-kelip lampu LED selama sedetik setelah menerapkan daya ke unit kontrol. </font><font style="vertical-align: inherit;">Ini karena inisialisasi panjang periferal ZUNo. </font><font style="vertical-align: inherit;">Pada titik ini, kakinya tidak dapat diprediksi. </font><font style="vertical-align: inherit;">Saya pikir resistor pull-up di gerbang transistor akan memperbaiki situasi jika Anda meletakkannya setelah resistor yang membatasi. </font><font style="vertical-align: inherit;">Jika kode inisialisasi menyesuaikan kaki ke output dan mengubah level logika dengan sengaja, Anda dapat bereksperimen dengan filter RC, yang tidak akan melewatkan pulsa pendek. </font><font style="vertical-align: inherit;">Saya belum melakukannya, dan mungkin saya tidak akan pernah melakukannya!</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temuan</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ZUNo dan modul perluasannya sangat menyederhanakan "kreativitas teknis rumah". Namun, saya menganggap produk ini sangat mahal dan jika saya bekerja di tempat lain dan peralatan Z-Wave tidak tergeletak, saya akan melakukan segalanya di ESP8266. Selama pengembangan saya belajar "standar" baru untuk menandai kabel dari catu daya.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sx/c4/4h/sxc44hipyu2ml_agdxtaqthtvrs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang tidak hanya bumi ditandai dengan garis hitam, tetapi seperti dalam kasus saya kabel "positif". Untuk modul ekspansi, ini ternyata penting. Konverter 5-volt LM2594 telah gagal (harga dalam Chip dan Dip adalah sekitar 200 rubel). Saya berharap bahwa dalam versi berikutnya dari modul ekspansi akan ada dioda pelindung terhadap "pembalikan polaritas". Dan saya akan memeriksa polaritas kabel pasokan. Kelemahan lain terkait dengan tubuh. Kasingnya terlihat bagus, tapi saya tidak bisa menghubungkan kabel tanpa pinset ke blok terminal. Saya berharap bahwa akan ada versi dengan blok terminal lain (untuk menghubungkan kabel dari atas, atau miring). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak suka menyimpan foto di layanan cloud dan sering membuat cadangan. Oleh karena itu, sebagian besar foto yang terkait dengan proses desain dan lampu 1 tidak dapat diperbaiki.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/wz/ov/zzwzovgton7f2yxvy-2bd4zhucu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini semua yang tersisa dari proses perakitan dan debugging. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan sepertinya lampu latar dioperasikan, jika Anda sedikit membungkuk. </font><font style="vertical-align: inherit;">Jika Anda meluruskan, maka kotak dan sakelar tidak terlihat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ya/qj/hn/yaqjhnpkhd7ge2ohejbp9ywkqpq.jpeg"> <br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sketsa untuk ZUNo. </font><font style="vertical-align: inherit;">Saya lampirkan, hanya untuk mengkonfirmasi bahwa semuanya adalah dasar</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"EEPROM.h"</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"EEPR.h"</span></span><font></font>
<font></font>
<span class="hljs-keyword">int</span> readPin = <span class="hljs-number">9</span>;
<span class="hljs-keyword">int</span> triggerPin = <span class="hljs-number">10</span>;<font></font>
byte controlState = <span class="hljs-number">0</span>;<font></font>
word lastValue;<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> REDPIN   PWM1     <span class="hljs-comment">// pin connection R </span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> GREENPIN PWM2     <span class="hljs-comment">// pin connection G</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BLUEPIN  PWM3     <span class="hljs-comment">// pin connection B</span></span><font></font>
<font></font>
ZUNO_SETUP_CHANNELS(ZUNO_SWITCH_COLOR(SWITCH_COLOR_FLAGS_RED|SWITCH_COLOR_FLAGS_GREEN|SWITCH_COLOR_FLAGS_BLUE, getterFunction, setterFunction));<font></font>
<font></font>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ON 1</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> OFF 0</span>
<span class="hljs-keyword">uint8_t</span> switch_=OFF;<font></font>
<font></font>
<span class="hljs-keyword">uint8_t</span> pwmR=<span class="hljs-number">0</span>;
<span class="hljs-keyword">uint8_t</span> pwmG=<span class="hljs-number">0</span>;
<span class="hljs-keyword">uint8_t</span> pwmB=<span class="hljs-number">0</span>;
<span class="hljs-keyword">uint8_t</span> b_pwmR=<span class="hljs-number">0</span>;
<span class="hljs-keyword">uint8_t</span> b_pwmG=<span class="hljs-number">0</span>;
<span class="hljs-keyword">uint8_t</span> b_pwmB=<span class="hljs-number">0</span>;<font></font>
<font></font>
<span class="hljs-keyword">enum</span><font></font>
{<font></font>
  DEF_R = <span class="hljs-number">255</span>,<font></font>
  DEF_G = <span class="hljs-number">255</span>,<font></font>
  DEF_B = <span class="hljs-number">255</span><font></font>
};<font></font>
<span class="hljs-keyword">uint8_t</span> radio_action = <span class="hljs-number">0</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> 
</span>{ <font></font>
  init_EEPROM();<font></font>
  Serial.begin();<font></font>
  pinMode(readPin, INPUT);<font></font>
  pinMode(triggerPin, OUTPUT);<font></font>
  digitalWrite(triggerPin, LOW);<font></font>
  pinMode(REDPIN, OUTPUT);<font></font>
  pinMode(GREENPIN, OUTPUT);<font></font>
  pinMode(BLUEPIN, OUTPUT);<font></font>
  analogWrite(REDPIN, pwmR &amp; <span class="hljs-number">0xff</span>);<font></font>
  analogWrite(GREENPIN, pwmG &amp; <span class="hljs-number">0xff</span>);<font></font>
  analogWrite(BLUEPIN, pwmB &amp; <span class="hljs-number">0xff</span>);<font></font>
  <font></font>
} <font></font>
<span class="hljs-keyword">int</span> act=<span class="hljs-number">1</span>;
<span class="hljs-keyword">int</span> actf = <span class="hljs-number">0</span>;
<span class="hljs-keyword">int</span> cnt=<span class="hljs-number">57</span>; <font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-keyword">int</span> tmp;
  <span class="hljs-comment">// trigger measurement</span><font></font>
  digitalWrite(triggerPin, LOW);<font></font>
  delayMicroseconds(<span class="hljs-number">10</span>);<font></font>
  digitalWrite(triggerPin, HIGH);<font></font>
  delayMicroseconds(<span class="hljs-number">10</span>);<font></font>
  digitalWrite(triggerPin, LOW);<font></font>
  <span class="hljs-comment">// read pulse width</span>
  tmp = pulseIn(readPin, HIGH, <span class="hljs-number">100000</span>);<font></font>
  lastValue = tmp / <span class="hljs-number">58</span>;<font></font>
  Serial.print(<span class="hljs-string">" cm= "</span>);<font></font>
  Serial.println(lastValue);<font></font>
  <span class="hljs-keyword">if</span> (lastValue &lt; <span class="hljs-number">30</span>)<font></font>
  {<font></font>
    cnt++;<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    cnt--;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (cnt &gt; <span class="hljs-number">55</span>)<font></font>
  { <font></font>
    act=<span class="hljs-number">1</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (cnt &gt; <span class="hljs-number">60</span>)<font></font>
    cnt= <span class="hljs-number">60</span>;
  <span class="hljs-keyword">if</span> (cnt &lt; <span class="hljs-number">50</span>)<font></font>
  {<font></font>
    act=<span class="hljs-number">0</span>;<font></font>
    actf=<span class="hljs-number">0</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (cnt &lt; <span class="hljs-number">45</span> )<font></font>
    cnt = <span class="hljs-number">45</span>;<font></font>
  <font></font>
  <span class="hljs-keyword">if</span> ((act == <span class="hljs-number">1</span>) &amp;&amp; (actf == <span class="hljs-number">0</span>))<font></font>
  {  <font></font>
    actf = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (switch_ == OFF)<font></font>
    {<font></font>
      switch_=ON;<font></font>
      b_pwmG = pwmG;<font></font>
      b_pwmB = pwmB;<font></font>
      b_pwmR = pwmR;<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      switch_=OFF;<font></font>
      b_pwmR=<span class="hljs-number">0</span>;<font></font>
      b_pwmG=<span class="hljs-number">0</span>;<font></font>
      b_pwmB=<span class="hljs-number">0</span>;<font></font>
    }<font></font>
    analogWrite(REDPIN, b_pwmR &amp; <span class="hljs-number">0xff</span>);<font></font>
    analogWrite(GREENPIN, b_pwmG &amp; <span class="hljs-number">0xff</span>);<font></font>
    analogWrite(BLUEPIN, b_pwmB &amp; <span class="hljs-number">0xff</span>); <font></font>
  } <font></font>
  <font></font>
  Serial.print(<span class="hljs-string">"cnt = "</span>);    <font></font>
  Serial.print(cnt);  <font></font>
  Serial.print(<span class="hljs-string">" || "</span>);    <font></font>
  Serial.print(pwmR);  <font></font>
  Serial.print(<span class="hljs-string">" "</span>);      <font></font>
  Serial.print(pwmG);  <font></font>
  Serial.print(<span class="hljs-string">" "</span>);<font></font>
  Serial.print(pwmB);  <font></font>
  Serial.print(<span class="hljs-string">" "</span>);<font></font>
  Serial.println(<span class="hljs-string">""</span>);
 <span class="hljs-comment">// delay(10);</span><font></font>
<font></font>
 <span class="hljs-keyword">if</span>(radio_action)<font></font>
 {<font></font>
    radio_action = <span class="hljs-number">0</span>;<font></font>
    eepr_save_col();<font></font>
    analogWrite(REDPIN, pwmR &amp; <span class="hljs-number">0xff</span>);<font></font>
    analogWrite(GREENPIN, pwmG &amp; <span class="hljs-number">0xff</span>);<font></font>
    analogWrite(BLUEPIN, pwmB &amp; <span class="hljs-number">0xff</span>);<font></font>
 }<font></font>
}<font></font>
<font></font>
<span class="hljs-function">BYTE <span class="hljs-title">getterFunction</span><span class="hljs-params">(BYTE component)</span> </span>{
  <span class="hljs-keyword">switch</span>(component)<font></font>
  {<font></font>
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_RED:
      <span class="hljs-keyword">return</span> pwmR;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_GREEN:
      <span class="hljs-keyword">return</span> pwmG;
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_BLUE:
      <span class="hljs-keyword">return</span> pwmB;
      <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setterFunction</span><span class="hljs-params">(BYTE component, BYTE newValue)</span> 
</span>{
  <span class="hljs-keyword">switch</span>(component)<font></font>
  {<font></font>
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_RED:<font></font>
      pwmR = newValue;<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_GREEN:<font></font>
      pwmG = newValue;<font></font>
      <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> SWITCH_COLOR_COMPONENT_BLUE:<font></font>
      pwmB = newValue;<font></font>
      <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
  radio_action = <span class="hljs-number">1</span>;<font></font>
}<font></font>
</code></pre><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id488470/index.html">Kim Dotcom: Tertangkap, orang yang paling dicari online. Bagian 4</a></li>
<li><a href="../id488472/index.html">Bacaan Akhir Pekan: 10 bahan tentang gadget audio - dari radio mobil Soviet hingga colokan peredam bising</a></li>
<li><a href="../id488474/index.html">Tentang warna, suara, dan "penjelajahan orang banyak" sebagai jenis keindahan yang terpisah</a></li>
<li><a href="../id488476/index.html">Tesla Tube Coil</a></li>
<li><a href="../id488478/index.html">Transfer semua database MS SQL Server ke komputer lain</a></li>
<li><a href="../id488482/index.html">Berapa Appium untuk rakyat</a></li>
<li><a href="../id488484/index.html">Peluncuran SQL - Microsoft SQL Server 2019 event</a></li>
<li><a href="../id488488/index.html">Untuk OpenBSD. Sedikit kesenangan</a></li>
<li><a href="../id488490/index.html">Likbez menggunakan respirator. Apakah respirator membantu dengan infeksi virus? Tinjauan umum tentang 11 respirator</a></li>
<li><a href="../id488498/index.html">Laboratorium Universitas ITMO: Pencahayaan LED, optoelektronika gelombang mikro, dan telekomunikasi optik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>