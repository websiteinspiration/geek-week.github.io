<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñäÔ∏è üëÇüèæ üßÄ Test de code JavaScript avec Jest for dummies. Partie 1 üò¨ üë®üèæ‚Äçüíº üë™</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Ce guide est la premi√®re partie d'une s√©rie d'articles pr√©vus sur un cadre de test aussi g√©nial que Jest. Le mat√©riel sera utile pour l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Test de code JavaScript avec Jest for dummies. Partie 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502302/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font><font style="vertical-align: inherit;">Ce guide est la premi√®re partie d'une s√©rie d'articles pr√©vus sur un cadre de test aussi g√©nial que Jest. </font><font style="vertical-align: inherit;">Le mat√©riel sera utile pour les d√©butants et ceux qui viennent de se familiariser avec les tests et souhaitent √©tudier ce cadre. </font><font style="vertical-align: inherit;">Dans la premi√®re partie, nous discuterons: comment d√©marrer avec jest, comment √©crire un test simple et quelles m√©thodes existe-t-il pour comparer les valeurs √† v√©rifier avec celles attendues. </font><font style="vertical-align: inherit;">Peu importe - bienvenue √† Kat!</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce que Jest?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme indiqu√© sur la page d'accueil du projet:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jest est un incroyable environnement de test JavaScript ax√© sur la simplicit√©.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et en effet, Jest est tr√®s simple. </font><font style="vertical-align: inherit;">Il ne n√©cessite pas de param√®tres suppl√©mentaires, facile √† comprendre et √† utiliser, et poss√®de √©galement une tr√®s bonne documentation. </font><font style="vertical-align: inherit;">Id√©al pour les projets utilisant Node, React, Angular, Vue, Babel, TypeScript et plus encore. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est √©galement open source et soutenu par Facebook.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour installer Jest dans votre projet, proc√©dez comme suit:</font></font><br>
<br>
<pre><code class="bash hljs">npm install --save-dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez du fil:</font></font><br>
<br>
<pre><code class="bash hljs">yarn add --dev jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s l'installation, vous pouvez mettre √† jour la section des scripts de votre package.json:</font></font><br>
<br>
<pre><code class="json hljs">‚Äúscripts‚Äù : {<font></font>
     ‚Äútest‚Äù: ‚Äújest‚Äù<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec ce simple appel, nous pouvons d√©j√† ex√©cuter nos tests (en fait, jest aura besoin d'au moins un test pour exister). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez √©galement installer globalement (mais je ne recommanderais pas de le faire, car pour moi l'installation globale des modules est une mauvaise pratique):</font></font><br>
<br>
<pre><code class="bash hljs">npm install jest --global</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et en cons√©quence pour le fil:</font></font><br>
<br>
<pre><code class="bash hljs">yarn global add jest</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, vous pouvez utiliser jest directement depuis la ligne de commande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En appelant la commande jest --init √† la racine du projet, apr√®s avoir r√©pondu √† quelques questions, vous obtiendrez le fichier de param√®tres jest.config.js. </font><font style="vertical-align: inherit;">Ou vous pouvez ajouter la configuration directement √† votre package.json. </font><font style="vertical-align: inherit;">Pour ce faire, ajoutez la cl√© "jest" √† la racine json et dans l'objet correspondant, vous pouvez ajouter les param√®tres dont vous avez besoin. </font><font style="vertical-align: inherit;">Nous analyserons les options elles-m√™mes ult√©rieurement. </font><font style="vertical-align: inherit;">Ce n'est pas n√©cessaire √† ce stade, car la plaisanterie peut √™tre utilis√©e imm√©diatement, sans configurations suppl√©mentaires.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Premier test</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ons le fichier first.test.js et √©crivons notre premier test:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">10</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ex√©cutez nos tests en utilisant npm run test ou directement avec la commande jest (si install√©e globalement). </font><font style="vertical-align: inherit;">Apr√®s le lancement, nous verrons un rapport sur la r√©ussite des tests.</font></font><br>
<br>
<pre><code class="plaintext hljs"> &lt;b&gt;PASS&lt;/b&gt;  ./first.test.js<font></font>
  ‚úì My first test (1 ms)<font></font>
<font></font>
Test Suites: 1 passed, 1 total<font></font>
Tests:       1 passed, 1 total<font></font>
Snapshots:   0 total<font></font>
Time:        0.618 s, estimated 1 s<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Brisons notre test et ex√©cutons √† nouveau la plaisanterie:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//first.test.js</span>
test(<span class="hljs-string">'My first test'</span>, () =&gt; {<font></font>
    expect(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>)).toBe(<span class="hljs-number">5</span>);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme nous pouvons le voir, maintenant notre test ne passe pas le test. Jest affiche des informations d√©taill√©es sur l'origine du probl√®me, le r√©sultat attendu et ce que nous avons obtenu √† la place. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analysons maintenant le code du test lui-m√™me. Fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilis√© pour cr√©er un nouveau test. Il prend trois arguments (dans l'exemple, nous avons utilis√© un appel avec deux arguments). La premi√®re est une ligne avec le nom du test, sa plaisanterie s'affichera dans le rapport. La seconde est une fonction qui contient la logique de notre test. Vous pouvez √©galement utiliser le 3√®me argument - timeout. Il est facultatif et sa valeur par d√©faut est de 5 secondes. Elle est d√©finie en millisecondes. Ce param√®tre est n√©cessaire lorsque nous travaillons avec du code asynchrone et renvoyons une promesse de la fonction de test. Il indique combien de temps la plaisanterie doit attendre pour que la promesse soit r√©solue. Pass√© ce d√©lai, si la promesse n'a pas √©t√© autoris√©e - la plaisanterie consid√©rera que le test a √©chou√©. Vous trouverez plus d'informations sur l'utilisation des appels asynchrones dans les parties suivantes. Alternativement, </font><font style="vertical-align: inherit;">vous pouvez l'utiliser </font><i><font style="vertical-align: inherit;">()</font></i><font style="vertical-align: inherit;"> au lieu de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">().</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Il n'y a aucune diff√©rence entre de tels appels. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">il ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'est qu'un alias de la fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä l'int√©rieur de la fonction de test, nous appelons d'abord </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expect ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Nous lui transmettons la valeur que nous voulons v√©rifier. Dans notre cas, c'est le r√©sultat de l'appel √† </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Math.max (1, 5, 10)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">expect ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> renvoie un objet wrapper qui a un certain nombre de m√©thodes pour comparer la valeur r√©sultante avec celle attendue. L'une de ces m√©thodes que nous avons utilis√©es est </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBe</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinons les principales de ces m√©thodes:</font></font><br>
<br>
<ul>
<li><b>toBe()</b> ‚Äî ,                ,     .     <i>Object.is()</i>.    ===     0  -0,   NaN c NaN.</li>
<li><b>toEqual()</b> ‚Äî ,        .        .    .       .<br>
<br>
<pre><code class="javascript hljs">test(<span class="hljs-string">'toEqual with objects'</span>, () =&gt; {<font></font>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">// </span>
    expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">num</span>: <span class="hljs-number">0</span> } })<font></font>
        .toEqual({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>, <span class="hljs-attr">subObject</span>: { <span class="hljs-attr">baz</span>: <span class="hljs-string">'baz'</span> } });  <span class="hljs-comment">//    .</span><font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'toEqual with arrays'</span>, () =&gt; {<font></font>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]); <span class="hljs-comment">// </span>
    expect([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>, <span class="hljs-number">5</span>]).toEqual([<span class="hljs-number">11</span>, <span class="hljs-number">19</span>]); <span class="hljs-comment">// </span><font></font>
});<font></font>
</code></pre><br>
</li>
<li><b>toContain()</b> ‚Äî       .     ===.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'apple'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'banana'</span>];<font></font>
expect(arr).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(arr)).toContain(<span class="hljs-string">'banana'</span>);<font></font>
expect(<span class="hljs-string">'apple, orange, banana'</span>).toContain(<span class="hljs-string">'banana'</span>);
</code></pre><br>
</li>
<li><b>toContainEqual()</b> ‚Äî        .<br>
<br>
<pre><code class="javascript hljs">expect([{<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>}, {<span class="hljs-attr">b</span>: <span class="hljs-number">2</span>}]).toContainEqual({<span class="hljs-attr">a</span>: <span class="hljs-number">1</span>});
</code></pre><br>
</li>
<li><b>toHaveLength()</b> ‚Äî    length    .<br>
<br>
<pre><code class="javascript hljs">expect([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]).toHaveLength(<span class="hljs-number">4</span>);<font></font>
expect(<span class="hljs-string">'foo'</span>).toHaveLength(<span class="hljs-number">3</span>);<font></font>
expect({ <span class="hljs-attr">length</span>: <span class="hljs-number">1</span> }).toHaveLength(<span class="hljs-number">1</span>);
</code></pre><br>
</li>
<li><b>toBeNull()</b> ‚Äî     null.</li>
<li><b>toBeUndefined()</b> ‚Äî     undefined.</li>
<li><b>toBeDefined()</b> ‚Äî <i> toBeUndefined</i>.    !== undefined.</li>
<li><b>toBeTruthy()</b> ‚Äî        true.     false, null, undefined, 0, NaN   .</li>
<li><b>toBeFalsy()</b> ‚Äî  <i>toBeTruthy()</i>.        false.</li>
<li><b>toBeGreaterThan()</b>  <b>toBeGreaterThanOrEqual()</b> ‚Äî        ,   &gt;,       &gt;=.</li>
<li><b>toBeLessThan()</b>  <b>toBeLessThanOrEqual()</b> ‚Äî  <i>toBeGreaterThan()</i>  <i>toBeGreaterThanOrEqual()</i></li>
<li><b>toBeCloseTo()</b> ‚Äî       ,         ,        .             .<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> num = <span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>; <span class="hljs-comment">// 0.30000000000000004</span>
expect(num).toBeCloseTo(<span class="hljs-number">0.3</span>);<font></font>
expect(<span class="hljs-built_in">Math</span>.PI).toBeCloseTo(<span class="hljs-number">3.14</span>, <span class="hljs-number">2</span>);
</code></pre><br>
</li>
<li><b>toMatch()</b> ‚Äî     .<br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-string">'Banana'</span>).toMatch(<span class="hljs-regexp">/Ba/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toThrow ()</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - utilis√© lorsqu'il est n√©cessaire de v√©rifier l'exception. </font><font style="vertical-align: inherit;">Vous pouvez v√©rifier √† la fois le fait de l'erreur elle-m√™me et v√©rifier la lev√©e d'exceptions d'une certaine classe, soit par le message d'erreur, soit par la correspondance du message avec l'expression r√©guli√®re.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithError</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'some error'</span>);<font></font>
}   <font></font>
expect(funcWithError).toThrow();<font></font>
expect(funcWithError).toThrow(<span class="hljs-built_in">Error</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-string">'some error'</span>);<font></font>
expect(funcWithError).toThrow(<span class="hljs-regexp">/some/</span>);
</code></pre><br>
</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">non</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - cette propri√©t√© vous permet de v√©rifier l'in√©galit√©. </font><font style="vertical-align: inherit;">Il fournit un objet qui poss√®de toutes les m√©thodes r√©pertori√©es ci-dessus, mais elles fonctionneront dans l'autre sens.</font></font><br>
<br>
<pre><code class="javascript hljs">expect(<span class="hljs-literal">true</span>).not.toBe(<span class="hljs-literal">false</span>);<font></font>
expect({ <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> }).not.toEqual({});<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcWithoutError</span>(<span class="hljs-params"></span>) </span>{}<font></font>
expect(funcWithoutError).not.toThrow();<font></font>
</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âcrivons quelques tests simples. </font><font style="vertical-align: inherit;">Cr√©ez d'abord un module simple qui contiendra plusieurs m√©thodes de travail avec les cercles.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/circle.js</span>
<span class="hljs-keyword">const</span> area = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-built_in">Math</span>.PI * radius ** <span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> circumference = <span class="hljs-function">(<span class="hljs-params">radius</span>) =&gt;</span> <span class="hljs-number">2</span> * <span class="hljs-built_in">Math</span>.PI * radius;
<span class="hljs-built_in">module</span>.exports = { area, circumference };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, ajoutez les tests:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/circle.test.js</span>
<span class="hljs-keyword">const</span> circle = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/circle'</span>);<font></font>
<font></font>
test(<span class="hljs-string">'Circle area'</span>, () =&gt; {<font></font>
    expect(circle.area(<span class="hljs-number">5</span>)).toBeCloseTo(<span class="hljs-number">78.54</span>);<font></font>
    expect(circle.area()).toBeNaN();<font></font>
});<font></font>
<font></font>
test(<span class="hljs-string">'Circumference'</span>, () =&gt; {<font></font>
    expect(circle.circumference(<span class="hljs-number">11</span>)).toBeCloseTo(<span class="hljs-number">69.1</span>, <span class="hljs-number">1</span>);<font></font>
    expect(circle.circumference()).toBeNaN();<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ces tests, nous avons v√©rifi√© le r√©sultat de 2 m√©thodes - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">surface</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">circonf√©rence</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En utilisant la m√©thode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeCloseTo,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons v√©rifi√© le r√©sultat attendu. </font><font style="vertical-align: inherit;">Dans le premier cas, nous avons v√©rifi√© ou la zone calcul√©e du cercle avec un rayon de 5 est approximativement √©gale √† 78,54, tandis que la diff√©rence avec la valeur obtenue (elle sera 78,53981633974483) n'est pas grande et le test sera compt√©. </font><font style="vertical-align: inherit;">Dans la seconde, nous avons indiqu√© que nous souhaitons v√©rifier √† 1 d√©cimale pr√®s. </font><font style="vertical-align: inherit;">Nous avons √©galement appel√© nos m√©thodes sans argument et v√©rifi√© le r√©sultat √† l'aide de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeNaN</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Comme le r√©sultat de leur ex√©cution sera NaN, les tests seront pass√©s avec succ√®s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenons un autre exemple. </font><font style="vertical-align: inherit;">Cr√©ons une fonction qui filtrera un tableau de produits par prix:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// src/productFilter.js</span>
<span class="hljs-keyword">const</span> byPriceRange = <span class="hljs-function">(<span class="hljs-params">products, min, max</span>) =&gt;</span>
         products.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.price &gt;= min &amp;&amp; item.price &lt;= max);
<span class="hljs-built_in">module</span>.exports = { byPriceRange };
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ajoutez un test:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// tests/product.test.js</span>
<span class="hljs-keyword">const</span> productFilter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/producFilter'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> products = [<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'onion'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">12</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> },<font></font>
    { <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> }<font></font>
];<font></font>
<font></font>
test(<span class="hljs-string">'Test product filter by range'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> FROM = <span class="hljs-number">15</span>;
    <span class="hljs-keyword">const</span> TO = <span class="hljs-number">30</span>;
    <span class="hljs-keyword">const</span> filteredProducts = productFilter.byPriceRange(products, FROM, TO);<font></font>
<font></font>
    expect(filteredProducts).toHaveLength(<span class="hljs-number">2</span>);<font></font>
    expect(filteredProducts).toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> });<font></font>
    expect(filteredProducts).toEqual([{ <span class="hljs-attr">name</span>: <span class="hljs-string">'tomato'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">26</span> }, { <span class="hljs-attr">name</span>: <span class="hljs-string">'banana'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">29</span> }]);<font></font>
    expect(filteredProducts[<span class="hljs-number">0</span>].price).toBeGreaterThanOrEqual(FROM);<font></font>
    expect(filteredProducts[<span class="hljs-number">1</span>].price).toBeLessThanOrEqual(TO);<font></font>
    expect(filteredProducts).not.toContainEqual({ <span class="hljs-attr">name</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">38</span> });<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce test, nous allons v√©rifier le r√©sultat de la </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonction</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> byRangePrice </font><font style="vertical-align: inherit;">. Tout d'abord, nous avons v√©rifi√© la correspondance de la longueur du tableau r√©sultant avec celui attendu - 2. Le contr√¥le suivant n√©cessite que l'√©l√©ment contienne l'√©l√©ment - {nom: 'tomate', prix: 26}. L'objet du tableau et l'objet transmis √† </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sont deux objets diff√©rents, pas une r√©f√©rence au m√™me. Mais </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> comparera chaque propri√©t√©. √âtant donn√© que les deux objets sont identiques, la v√©rification r√©ussira. Ensuite, nous utilisons </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour v√©rifier la structure de l'ensemble du tableau et de ses √©l√©ments. Les </font><i><font style="vertical-align: inherit;">m√©thodes </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeGreaterThanOrEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toBeLessThanOrEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous aideront √† v√©rifier le prix du premier et du deuxi√®me √©l√©ment du tableau. Et enfin, en appelant </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not.toContainEqual</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√©rifiera si l'√©l√©ment est contenu dans le tableau - {nom: 'orange', prix: 38}, qui, par condition, ne devrait pas √™tre l√†. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ces exemples, nous avons √©crit quelques tests simples en utilisant les fonctions de v√©rification d√©crites ci-dessus. </font><font style="vertical-align: inherit;">Dans les parties suivantes, nous discuterons du travail avec le code asynchrone, les fonctions plaisanteries qui n'√©taient pas couvertes dans cette partie du tutoriel, nous parlerons de sa configuration, et bien plus encore.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502276/index.html">M√©thode Kanban: Exemple PNZ n ¬∞ 2: Formation et cours</a></li>
<li><a href="../fr502278/index.html">Comment ne pas modifier les tests Python</a></li>
<li><a href="../fr502286/index.html">Robots d'incendie</a></li>
<li><a href="../fr502292/index.html">Nous √©crivons un autotest en utilisant Selenium Webdriver, Java 8 et le mod√®le d'objet de page</a></li>
<li><a href="../fr502298/index.html">Organigramme cumulatif (CFD) comme indicateur de la sant√© de votre projet</a></li>
<li><a href="../fr502306/index.html">De l'histoire de la radiodiffusion par satellite ¬´non standard¬ª</a></li>
<li><a href="../fr502308/index.html">Qu'est-ce qui emp√™che le march√© boursier d'une chute √† grande √©chelle et qu'est-ce que l'entreprise technologique a √† voir avec cela?</a></li>
<li><a href="../fr502312/index.html">R√®gles de vol √† vue et aux instruments</a></li>
<li><a href="../fr502316/index.html">FCC ouvre la bande 6 GHz pour les r√©seaux sans fil - pourquoi tout le monde ne pense pas que c'est une bonne id√©e</a></li>
<li><a href="../fr502318/index.html">Paillettes intelligentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>