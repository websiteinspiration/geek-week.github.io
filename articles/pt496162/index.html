<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿 👩‍❤️‍💋‍👨 📹 Terraform, repositórios mono e conformidade como código 👩🏽‍💼 👇🏻 👩🏿‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Olá a todos. A OTUS abriu o recrutamento para um novo grupo no curso “Plataforma de infraestrutura baseada no Kubernetes”. Nesse contexto, preparamos ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Terraform, repositórios mono e conformidade como código</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/496162/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Olá a todos. </font><font style="vertical-align: inherit;">A OTUS abriu o recrutamento para um novo grupo no curso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Plataforma de infraestrutura baseada no Kubernetes”. Nesse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> contexto, preparamos uma tradução de material interessante sobre o tema.</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/_-/a_/zq/_-a_zqk4jh1yeiuysg6pmfprejm.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode ser um daqueles que usam terraform para Infraestrutura como um código e está se perguntando como usá-lo de maneira mais produtiva e segura. Em geral, recentemente, isso incomodou muitos. Todos nós escrevemos configurações e códigos usando diferentes ferramentas, idiomas e gastamos uma quantidade considerável de tempo, tornando-os mais legíveis, extensíveis e escaláveis. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/v9/dq/ctv9dqpci5uhnejvqacfdlzve5q.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez o problema esteja em nós mesmos?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O código escrito deve criar valor ou resolver um problema, além de ser reutilizável para desduplicação. Normalmente, esse tipo de discussão termina com </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Vamos usar os módulos"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Todos nós usamos módulos terraform, certo? Eu poderia escrever muitas histórias com problemas devido à modularidade excessiva, mas essa é uma história completamente diferente e não o farei.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/up/tu/x2/uptux2lqssssnc_yyadvetw4sa0.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não eu não vou. Não insista, não ... Ok, talvez mais tarde.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Existe uma prática bem conhecida - marcar código ao usar módulos para bloquear o módulo raiz, a fim de garantir sua operação, mesmo ao alterar o código do módulo. Essa abordagem deve se tornar um princípio de equipe, no qual os módulos apropriados são marcados e usados ​​apropriadamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... mas e as dependências? E se eu tiver </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">120</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> módulos em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">120</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> repositórios diferentes e a alteração de um módulo afetar outros 20 módulos. Isso significa que precisamos fazer </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20 + 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> solicitações pull? Se o número mínimo de revisores for 2, isso significa </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21 x 2 = 44</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reveja. A sério! Simplesmente paralisamos o comando “mudando um módulo” e todos começarão a enviar memes ou gifs do Senhor dos Anéis, e o resto do dia será perdido. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/97/hp/mh97hpwsk28i70xcrk_g-jkie-u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um PR para notificar a todos, um PR para reunir todos, algemar e mergulhar na escuridão</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Vale a pena trabalhar? Devemos reduzir o número de revisores? Ou, talvez, faça uma exceção para os módulos e não exija PR se a alteração tiver um grande impacto. Mesmo? Você quer andar cegamente em uma floresta escura e profunda? Ou </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reuni-los todos, perfurar e mergulhar na escuridão</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não, não altere a ordem da revisão. Se você acha que trabalhar com relações públicas é correto, cumpra-as. Se você possui pipelines inteligentes ou se esforça para dominar, continue com essa abordagem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse caso, o problema não é </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"como você trabalha"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"qual é a estrutura dos seus repositórios git"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q9/qd/1m/q9qd1mffdrpnnfs2ywarhzzojwk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É semelhante ao que senti quando apliquei a sugestão abaixo.Vamos </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voltar ao básico. </font><font style="vertical-align: inherit;">Quais são os requisitos gerais para um repositório com módulos terraform?</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele deve ser marcado para que não haja alterações de interrupção.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer alteração deve poder testar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As alterações devem passar por uma revisão mútua.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sugiro o seguinte - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NÃO use </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">micro-repositórios para módulos de terraform. </font><font style="vertical-align: inherit;">Use um repositório mono</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Você pode marcar todo o repositório quando houver uma alteração / requisito</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer alteração, PR ou push pode ser testada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer alteração pode passar pela revisão.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ff/si/dm/ffsidmva0173goa0qakuisrr5o4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu tenho força!</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ok, mas qual será a estrutura deste repositório? Nos últimos quatro anos, tive muitas falhas relacionadas a isso e cheguei à conclusão de que um diretório separado para o módulo seria a melhor solução. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/0j/0g/rs0j0gfsrkk45cfmo0j8oemoe-4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estrutura de diretório de exemplo para um repositório mono. Veja a alteração tags_override?</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Assim, uma mudança de módulo que afeta 20 outros módulos é de apenas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 PR</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! Mesmo se você adicionar 5 revisores a este PR, a revisão será muito rápida em comparação com os micro-repositórios. Se você usa o Github, isso é ainda melhor! Você pode usar </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CODEOWNERS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para módulos que possuem mantenedores / proprietários, e quaisquer alterações nesses módulos DEVEM ser aprovadas por esse proprietário.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ótimo, mas como usar esse módulo, localizado no diretório de repositório único? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fácil:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">module</span> <span class="hljs-string">"from_mono_repo"</span> {<font></font>
 source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;repo&gt;.git//&lt;my_module_dir&gt;"</span><font></font>
 ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_mono_repo_with_tags"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://..../&lt;org&gt;/&lt;repo&gt;.git//&lt;mod_dir&gt;?ref=1.2.4"</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_micro_repo"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;mod_repo&gt;.git"</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"from_micro_repo_with_tags"</span> {<font></font>
  source = <span class="hljs-string">"git::ssh://.../&lt;org&gt;/&lt;mod_repo&gt;.git?ref=1.2.4"</span><font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quais são as desvantagens desse tipo de estrutura? </font><font style="vertical-align: inherit;">Bem, se você tentar testar "todos os módulos" com PR / alteração, poderá obter 1,5 horas de pipelines de CI. </font><font style="vertical-align: inherit;">Você precisa encontrar os módulos modificados no PR. </font><font style="vertical-align: inherit;">Eu faço assim:</font></font><br>
<br>
<pre><code class="java hljs">changed_modules=$(git diff --name-only $(git rev-parse origin/master) HEAD | cut -d <span class="hljs-string">"/"</span> -f1 | grep ^aws- | uniq)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Há outra desvantagem: sempre que você executa o "terraform init", ele carrega todo o repositório no diretório .terraform. Mas nunca tive problemas com isso, pois executo meus pipes em contêineres escaláveis ​​do AWS CodeBuild. Se você usa o Jenkins e o Jenkins Slaves persistente, pode ter esse problema. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/fd/jz/cmfdjzpaet7z2bwg5wjvclj2sm4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não nos faça chorar.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Com um mono-repositório, você ainda tem todas as vantagens dos micro-repositórios, mas como bônus, reduz o custo de manutenção de seus módulos. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Honestamente, depois de trabalhar nesse modo, a proposta de usar micro-repositórios para módulos de terraform deve ser considerada um crime.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ótimo, e o teste de unidade? Você realmente precisa disso? ... Em geral, o que exatamente você quer dizer com teste de unidade. Você realmente vai verificar se o recurso da AWS foi criado corretamente? De quem é a responsabilidade: terraform ou uma API que lida com a criação de recursos? Talvez devêssemos nos concentrar mais em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">testes negativos e na idempotência do código</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar a idempotência do código, o terraform fornece um excelente parâmetro chamado </font></font><code>-detailed-exitcode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Apenas corra:</font></font><br>
<br>
<pre><code class="java hljs">&gt; terraform plan -detailed-exitcode</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, corra </font></font><code>terraform apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e é isso. Pelo menos, você terá certeza de que seu código é idempotente e não cria novos recursos devido a uma sequência aleatória ou outra coisa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o teste negativo? O que, em geral, é um teste negativo? Na verdade, isso não é muito diferente do teste de unidade, mas você deve prestar atenção em situações negativas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ninguém tem permissão para criar um bucket S3 público e não criptografado</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, em vez de verificar se um depósito S3 está realmente sendo criado, você, de fato, com base em um conjunto de políticas, verifica se o seu código cria um recurso. Como fazer isso? O Terraform Enterprise fornece uma ótima ferramenta para isso, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sentinel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... mas também existem alternativas de código aberto. Atualmente, existem muitas ferramentas para análise estática do código HCL. Essas ferramentas, baseadas em práticas recomendadas comuns, não permitirão que você faça algo indesejado, mas e se não tiver o teste que você precisa ... ou, pior ainda, se sua situação for um pouco diferente. Por exemplo, você deseja permitir que alguns buckets do S3 sejam tornados públicos com base em determinadas condições, o que, de fato, será um bug de segurança para essas ferramentas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É aqui que </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">a conformidade com terraform</font></a><font style="vertical-align: inherit;"> aparece</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Essa ferramenta não apenas permitirá que você escreva seus próprios testes nos quais você pode determinar o que deseja como política da sua empresa, mas também ajuda a separar segurança e desenvolvimento movendo a segurança para a esquerda. </font><font style="vertical-align: inherit;">Parece bastante controverso, certo? </font><font style="vertical-align: inherit;">Não. </font><font style="vertical-align: inherit;">Enquanto que? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2g/sc/i1/2gsci1q3cc5xgjy2-iazueeaere.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logotipo de conformidade com terraform</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Primeiro, a conformidade com terraform usa o Behavior Driven Development (BDD).</font></font><br>
<br>
<pre><code class="java hljs">Feature: Ensure that we have encryption everywhere.<font></font>
<font></font>
    Scenario: Reject <span class="hljs-keyword">if</span> an S3 bucket is not encrypted<font></font>
        Given I have aws_s3_bucket defined<font></font>
        Then it must contain server_side_encryption_configuration</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verifique se a criptografia está ativada.Se</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
isso não for suficiente, você pode escrever com mais detalhes:</font></font><br>
<br>
<pre><code class="java hljs">Feature: Ensure that we have encryption everywhere.<font></font>
<font></font>
    Scenario: Reject <span class="hljs-keyword">if</span> an S3 bucket is not encrypted with KMS<font></font>
        Given I have aws_s3_bucket defined<font></font>
        Then it must contain server_side_encryption_configuration<font></font>
        And it must contain rule<font></font>
        And it must contain apply_server_side_encryption_by_default<font></font>
        And it must contain sse_algorithm<font></font>
        And its value must match the <span class="hljs-string">"aws:kms"</span> regex</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aprofundamos e verificamos se o KMS é usado para criptografia.O</font></font></i> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
código de terraform para este teste:</font></font><br>
<br>
<pre><code class="java hljs">resource <span class="hljs-string">"aws_kms_key"</span> <span class="hljs-string">"mykey"</span> {<font></font>
 description             = <span class="hljs-string">"This key is used to encrypt bucket objects"</span>
 deletion_window_in_days = <span class="hljs-number">10</span><font></font>
}<font></font>
<font></font>
resource <span class="hljs-string">"aws_s3_bucket"</span> <span class="hljs-string">"mybucket"</span> {<font></font>
 bucket = <span class="hljs-string">"mybucket"</span><font></font>
<font></font>
 server_side_encryption_configuration {<font></font>
   rule {<font></font>
     apply_server_side_encryption_by_default {<font></font>
       kms_master_key_id = <span class="hljs-string">"${aws_kms_key.mykey.arn}"</span>
       sse_algorithm     = <span class="hljs-string">"aws:kms"</span><font></font>
     }<font></font>
   }<font></font>
 }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, os testes são entendidos literalmente por TUDO na sua organização. Aqui você pode delegar a gravação desses testes em um serviço de segurança ou em desenvolvedores com conhecimento suficiente de segurança. Essa ferramenta também permite armazenar arquivos BDD em outro repositório. Isso ajudará a diferenciar a responsabilidade quando as alterações no código e nas políticas de segurança associadas ao seu código forem duas entidades diferentes. Podem ser equipes diferentes com diferentes ciclos de vida. Incrível né? Bem, pelo menos para mim foi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obter mais informações sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conformidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">terraform,</font></a><font style="vertical-align: inherit;"> consulte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta apresentação</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resolvemos muitos problemas com </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">a conformidade</font></a><font style="vertical-align: inherit;"> com </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraform</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, especialmente onde os serviços de segurança estão bastante distantes das equipes de desenvolvimento e podem não entender o que os desenvolvedores estão fazendo. Você já adivinha o que está acontecendo nessas organizações. Normalmente, o serviço de segurança começa a bloquear tudo o que é suspeito e cria um sistema de segurança baseado na segurança do perímetro. Oh Deus ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em muitas situações, usar apenas </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terraform</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conformidade com terraform</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para equipes que projetam (ou acompanham) a infraestrutura ajudaram a colocar essas duas equipes diferentes na mesma mesa. Quando sua equipe de segurança começa a desenvolver algo com feedback imediato de todos os pipelines de desenvolvimento, ela geralmente obtém a motivação para fazer cada vez mais. Bem, geralmente ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, ao usar terraform, estruturamos repositórios git da seguinte maneira: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vl/d_/ln/vld_ln5d9trbudgjtb2wft-32vk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É claro que isso é bastante arrogante. </font><font style="vertical-align: inherit;">Mas tive sorte (ou não?) De trabalhar com uma estrutura mais detalhada em várias organizações. </font><font style="vertical-align: inherit;">Infelizmente, tudo isso não terminou muito bem. </font><font style="vertical-align: inherit;">O final feliz deve estar oculto no número 3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deixe-me saber se você tem alguma história de sucesso com micro repositórios, estou realmente interessado!</font></font><br>
<br>
<hr><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convidamos você a uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lição gratuita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na qual </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">consideraremos os componentes de uma futura plataforma de infraestrutura e veremos como entregar nosso aplicativo corretamente</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt496148/index.html">Padrões de design estrutural no ES6 + no exemplo de Game of Thrones</a></li>
<li><a href="../pt496152/index.html">Automação de rede. Caso da vida</a></li>
<li><a href="../pt496154/index.html">Automação de atendimento ao cliente: uma solução completa da DeepPavlov</a></li>
<li><a href="../pt496156/index.html">Como os sistemas de análise de tráfego detectam táticas de hackers por MITRE ATT & CK, parte 3</a></li>
<li><a href="../pt496160/index.html">Estudamos o mecanismo VoIP do Mediastreamer2. Parte 5</a></li>
<li><a href="../pt496164/index.html">Durante a crise, perdi meu emprego e agora tenho medo de escrever um código inteligente para não assustar as últimas vagas</a></li>
<li><a href="../pt496166/index.html">Doctrine ResultSetMapping com exemplos</a></li>
<li><a href="../pt496170/index.html">Estamos condenados # 1 // Udalenka em crise e morte da originalidade</a></li>
<li><a href="../pt496174/index.html">A demanda crescente por análises, equipes de produtos, Amazon, Israel, Cingapura, trabalho remoto etc. - discutiu muito.</a></li>
<li><a href="../pt496176/index.html">Grande conferência virtual: experiência do mundo real na proteção de dados de empresas digitais modernas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>