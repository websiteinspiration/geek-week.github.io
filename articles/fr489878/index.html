<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👶🏼 🐃 🐫 Comment aider à trouver une organisation et ne pas y passer une semaine 👃 ⛩️ ☝🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque les gens saisissent le nom d'un atelier de réparation automobile, d'une clinique ou d'un magasin dans la recherche Yandex, ils veulent trouver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment aider à trouver une organisation et ne pas y passer une semaine</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/489878/"><img src="https://habrastorage.org/webt/up/dz/ui/updzuix_zzsrww4z3buhorphxye.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque les gens saisissent le nom d'un atelier de réparation automobile, d'une clinique ou d'un magasin dans la recherche Yandex, ils veulent trouver des informations à leur sujet. Par exemple, un horaire de travail ou un numéro de téléphone. Cela dépend de l'exactitude et de la pertinence de ces données si une personne résoudra son problème rapidement ou perdra du temps et des nerfs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'appelle Alexander et je représente l'équipe Geopoisk et Yandex.Directory, dont les données sont utilisées par plus de 46 millions de personnes par mois. Aujourd'hui, je vais parler brièvement de la façon dont nous avons réussi à réduire le temps nécessaire pour mettre à jour les données dans la recherche Yandex de quelques jours à plusieurs heures, parfois à quelques minutes. Vous découvrirez également qui est Ricardo Milos et quels problèmes il nous a causés.</font></font><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'annuaire est une base de données d'organisations. Toute entreprise ou personne peut y ajouter des informations: indiquez l'adresse, les heures d'ouverture, le téléphone et tout le reste - et Yandex les communiquera aux utilisateurs. Les données de l'annuaire sont utilisées dans Search, Alice, Maps, Taxis, Navigator, et même dans notre identification de l'appelant, dont nous avons déjà </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parlé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur Habré. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et tout irait bien, mais les données deviennent obsolètes: les organisations ferment, déménagent, changent de chiffres et tout ça. Nous pouvons nous-mêmes suivre les modifications et apporter des modifications, mais aujourd'hui, nous parlerons des modifications que les utilisateurs ou les entreprises nous envoient. Pour ce faire, nous avons des formulaires et d'autres mécanismes de rétroaction. Nous obtenons donc plusieurs milliers de modifications par jour. Mais nous ne pouvons pas simplement les prendre et les publier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des erreurs sont trouvées dans les corrections - en raison de la négligence ou d'une intention malveillante. Ces derniers sont particulièrement nombreux. Certains déforment les données des concurrents et «ferment» l'organisation. D'autres vandales ordinaires ajoutent du mat et d'autres absurdités aux noms et descriptions des entreprises. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yx/sf/au/yxsfaun0wanzcev2d4ijub2hvx4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, si vous publiez des modifications telles quelles, les utilisateurs en souffriront. Par conséquent, nous vérifions tout. Les opérateurs de centre d'appels appellent l'organisation et clarifient les changements. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les dockers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atteignent les entreprises et vérifient les données en direct. Mais ces méthodes ne sont pas assez rapides et le flux de modifications est important. Par conséquent, nous avons également conçu un robot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utilisons le classificateur automatique des modifications - Modérateur automatique. Il s'agit de la machine basée sur notre technologie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CatBoost.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Elle est formée sur des exemples de bonnes et de mauvaises modifications. Heureusement, nous avons beaucoup de telles données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsqu'une modification arrive, le modérateur automatique prend en compte plusieurs dizaines de facteurs (par exemple, l'historique des modifications des utilisateurs précédents) et décide d'approuver la modification, de la rejeter ou de l'envoyer à une personne pour réexamen. Le modérateur de la voiture peut vérifier la base de l'annuaire et s'assurer qu'il n'essaye pas de créer un doublon, ou consulter le site Web de l'organisation à la recherche de nouvelles informations, ou même appeler l'organisation, se présenter comme Snezhana et clarifier les changements. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un exemple. En 2018, une vague de «renommage» des écoles, monuments et autres organisations a commencé dans les services de cartographie et les ouvrages de référence: sur les cartes, ils ont été nommés d'après Ricardo Milos (il y a </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">un article</font></a><font style="vertical-align: inherit;"> sur TJ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à propos de ce flash mob). Donc, contre notre gré, nous avons rencontré un mème populaire à l'époque sur un strip-teaseur brésilien (pas que nous le voulions, mais qui nous l'a demandé). Et c'est la combinaison de l'Auto Moderator et d'autres mécanismes de vérification qui nous a aidés à défendre les vrais noms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, le classificateur automatique a réduit le temps de mise à jour des données. Mais nous ne nous sommes pas arrêtés là. Même en tenant compte de l'aide de l'Auto Moderator, les modifications pourraient atteindre les utilisateurs du service pendant plusieurs jours. Ça fait longtemps. Pour réduire ce temps, il a fallu résoudre deux problèmes technologiques. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auparavant, le modérateur automatique ressemblait à un processus par lots, il fonctionnait selon le calendrier et nécessitait de grandes ressources pour l'informatique locale (en travaillant avec des tables pour des dizaines de millions d'enregistrements). Nous avons changé cela.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, c'est un service dans lequel l'édition et les informations sur son expéditeur sont reçues en temps réel. Ensuite, le modérateur de la voiture calcule les facteurs et rend un verdict. Avant les verdicts sur les candidatures, nous pouvions attendre des heures. Maintenant, quelques minutes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais cela ne signifie pas que les modifications atteindront l'utilisateur en quelques minutes. Et ici, la deuxième tâche nous attendait.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le changement tombe dans la base de l'annuaire, mais il faut du temps pour «germer» dans le service. Par exemple, la recherche doit mettre à jour l'index de recherche pour refléter les modifications apportées à l'annuaire. Pour contourner cela, nous avons développé un schéma pour stocker les états des objets. Autrement dit, vous pouvez maintenant remplacer le numéro de téléphone dans la réponse d'objet de la recherche sans reconstruire l'index de recherche. Désormais, lors de la création des résultats de la recherche, la recherche sait quels objets sont obsolètes et peut extraire des informations plus récentes. Bien sûr, il existe encore des situations où un changement de données affecte le classement de l'organisation, mais il n'y a aucun moyen sans reconstruire l'index. </font></font><br>
<br>
<img width="800" src="https://habrastorage.org/webt/kw/cr/ry/kwcrry6suyvdo_xgdhyhbrzlb_y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, après des améliorations et des implémentations, nous avons pu réduire le temps moyen de mise à jour des données sur les organisations dans les services Yandex de quelques jours à quelques heures, et parfois à quelques minutes. Je veux croire que vous l'avez remarqué.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aujourd'hui, j'ai mis un assez long historique de travail dans un court article de synthèse. </font><font style="vertical-align: inherit;">Parlez-nous des côtés ou des décisions que vous aimeriez lire plus en détail à l'avenir. </font><font style="vertical-align: inherit;">Nous serons heureux de recevoir des commentaires et des appels, nous continuerons à travailler sur le répertoire et informer les lecteurs Habr de ses nouvelles.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489868/index.html">Gel de Mozilla WebThings</a></li>
<li><a href="../fr489870/index.html">Intensif hors ligne gratuit par Node.js à Nizhny Novgorod</a></li>
<li><a href="../fr489872/index.html">Comment le système DLP et le module OCR ont empêché les employés de falsifier les numérisations de passeport</a></li>
<li><a href="../fr489874/index.html">Compilation croisée des exécutables Rust pour Windows à partir de Linux</a></li>
<li><a href="../fr489876/index.html">Comment nous avons résolu le problème de trois monolithes</a></li>
<li><a href="../fr489880/index.html">Examen du code - améliorer le processus</a></li>
<li><a href="../fr489882/index.html">Réduction du temps de réponse lors de la transmission de données via UDP</a></li>
<li><a href="../fr489884/index.html">Optimisations OpenCV multiplateforme</a></li>
<li><a href="../fr489886/index.html">Nous analysons le CV des avocats sur hh.ru sans API</a></li>
<li><a href="../fr489888/index.html">Générer des URL avec des paramètres sur le genou et les meilleures pratiques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>