<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👎🏽 🤳🏻 🏠 أداء Java الحديث عند العمل بكميات كبيرة من البيانات ، الجزء الأول 😅 🛒 👩🏻‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="لقد تطور وقت تشغيل Java بشكل أسرع في السنوات الأخيرة عن ذي قبل. بعد 15 عامًا ، حصلنا أخيرًا على جامع القمامة الافتراضي - G1. هناك اثنتان آخرتان قيد ال...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>أداء Java الحديث عند العمل بكميات كبيرة من البيانات ، الجزء الأول</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/506706/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/8p/zf/gy8pzf7gjtwr9pvv1zb7rgmmjiy.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد تطور وقت تشغيل Java بشكل أسرع في السنوات الأخيرة عن ذي قبل. </font><font style="vertical-align: inherit;">بعد 15 عامًا ، حصلنا أخيرًا على جامع القمامة الافتراضي - G1. </font><font style="vertical-align: inherit;">هناك اثنتان آخرتان قيد التطوير ومتاحتان كوظائف تجريبية - Oracle ZGC و OpenJDK Shenandoah. </font><font style="vertical-align: inherit;">قررنا اختبار جميع هذه الأدوات الجديدة ومعرفة ما يعمل بشكل أفضل مع أعباء العمل النموذجية لمحرك التدفق المفتوح المصدر Hazelcast Jet الموزع.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يستخدم جيت لحل جميع أنواع المهام ، مع اختلاف متطلبات الكمون وعرض النطاق الترددي. </font><font style="vertical-align: inherit;">تنقسم المهام إلى ثلاث فئات مهمة:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تدفق غير محدود من الكمون المنخفض. </font><font style="vertical-align: inherit;">مثال: تحديد الاتجاهات في البيانات من أجهزة الاستشعار لـ 10000 جهاز تأخذ المعلومات على تردد 100 هرتز ، وإرسال التصحيحات في غضون 10-20 مللي ثانية.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معالجة دفق غير محدودة مع عرض نطاق ترددي مرتفع. </font><font style="vertical-align: inherit;">مثال: تتبع إحداثيات GPS لملايين المستخدمين بحساب متجهات السرعة الخاصة بهم.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معالجة مجمعة للبيانات الضخمة. </font><font style="vertical-align: inherit;">المعيار هو الوقت الذي يتم قضاؤه في المعالجة ، مما يعني أن الإنتاجية العالية مطلوبة. </font><font style="vertical-align: inherit;">مثال: تحليل بيانات تداول الأسهم التي يتم جمعها يوميًا لتحديث مستوى المخاطر لمحفظة معينة من الأصول.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
أولاً يمكننا ملاحظة ما يلي:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">في السيناريو الأول ، تقع متطلبات التأخير في منطقة الخطر الخاصة بمجمع القمامة التي تتوقف مؤقتًا: 100 مللي ثانية. </font><font style="vertical-align: inherit;">يعتبر هذا نتيجة ممتازة لجمع القمامة في أصعب الحالات ، وفي كثير من الحالات يمكن أن يصبح حجر عثرة.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السيناريوهان الثاني والثالث متطابقان في متطلبات جمع القمامة. </font><font style="vertical-align: inherit;">متطلبات التأخير أقل صرامة ، ولكن حمولة كبيرة على الأجيال الثابتة.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السيناريو الثاني أكثر صعوبة بسبب متطلبات التأخير ، حتى لو لم يكن صارما كما هو الحال في السيناريو الأول.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
حاولنا المجموعات التالية:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDK 8 مع المجمّع المتوازي الافتراضي و ConcurrentMarkSweep الاختياري و G1.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDK 11 مع جامع افتراضي G1 و Parallel اختياري.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JDK 14 مع جامع افتراضي G1 و ZGC التجريبي و Shenandoah.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
توصلنا إلى الاستنتاجات التالية:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مع الإصدارات الحديثة من JDK ، يعمل منشئ G1 بشكل رائع. </font><font style="vertical-align: inherit;">يعالج بسهولة عشرات غيغابايت من الكومة (جربنا 60 جيجا بايت) ، بحد أقصى توقف مؤقت 200 مللي ثانية. </font><font style="vertical-align: inherit;">تحت الحمل الشديد G1 لا يدخل في أوضاع حرجة كابوس. </font><font style="vertical-align: inherit;">بدلاً من ذلك ، تزداد مدة الإيقاف المؤقت لتجميع البيانات المهملة إلى ثوان. </font><font style="vertical-align: inherit;">نقطة ضعف المجمع هي الحد الأعلى للتوقف في ظروف مواتية للحمل المنخفض. </font><font style="vertical-align: inherit;">تمكنا من خفضه إلى 20-25 مللي ثانية.</font></font></li>
<li>JDK 8 —   .    Parallel       .  G1    ,    ,       ,     .       12    20   Parallel     G1. ConcurrentMarkSweep       G1,           .</li>
<li>  ZGC    ,   G1,        ,  G1       10 . </li>
<li>Shenandoah        220    .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">لم تتصرف ZGC ولا Shenandoah في الأوضاع الحرجة بشكل ثابت مثل G1. </font><font style="vertical-align: inherit;">كان عملهم غير موثوق به ، في وضع الكمون المنخفض ، حدث فترات توقف طويلة جدًا بشكل غير متوقع ، وحتى OOME.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
توضح هذه المقالة نتائج اختباراتنا في سيناريوهي معالجة التدفق. </font><font style="vertical-align: inherit;">في الجزء الثاني سنتحدث عن نتائج المعالجة المجمعة.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معيار معالجة الدفق</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بالنسبة لمعيار التدفق ، أخذنا </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">هذا</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الرمز </font><font style="vertical-align: inherit;">وقمنا </font><font style="vertical-align: inherit;">بتغييره قليلاً بين الاختبارات. </font><font style="vertical-align: inherit;">هنا الجزء الرئيسي ، خط الأنابيب النفاثة:</font></font><br>
<br>
<pre><code class="java hljs">StreamStage&lt;Long&gt; source = p.readFrom(longSource(ITEMS_PER_SECOND))<font></font>
                            .withNativeTimestamps(<span class="hljs-number">0</span>)<font></font>
                            .rebalance(); <span class="hljs-comment">// Introduced in Jet 4.2</span><font></font>
source.groupingKey(n -&gt; n % NUM_KEYS)<font></font>
      .window(sliding(SECONDS.toMillis(WIN_SIZE_SECONDS), SLIDING_STEP_MILLIS))<font></font>
      .aggregate(counting())<font></font>
      .filter(kwr -&gt; kwr.getKey() % DIAGNOSTIC_KEYSET_DOWNSAMPLING_FACTOR == <span class="hljs-number">0</span>)<font></font>
      .window(tumbling(SLIDING_STEP_MILLIS))<font></font>
      .aggregate(counting())<font></font>
      .writeTo(Sinks.logger(wr -&gt; String.format(<span class="hljs-string">"time %,d: latency %,d ms, cca. %,d keys"</span>,<font></font>
              simpleTime(wr.end()),<font></font>
              NANOSECONDS.toMillis(System.nanoTime()) - wr.end(),<font></font>
              wr.result() * DIAGNOSTIC_KEYSET_DOWNSAMPLING_FACTOR)));<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يعكس خط الأنابيب هذا سيناريوهات الاستخدام مع عدد غير محدود من الأحداث. يجب على المحرك تجميع البيانات باستخدام طريقة "النافذة المنزلقة". هناك حاجة لمثل هذا التجميع ، على سبيل المثال ، للحصول على المشتق الزمني لقيمة متغيرة ، لمسح البيانات من الضوضاء عالية التردد (التجانس) ، أو لقياس تواتر حدوث حدث (أحداث في الثانية). يمكن للمحرك أولاً تقسيم الدفق إلى فئات (على سبيل المثال ، جميع أجهزة إنترنت الأشياء الفردية أو الهواتف الذكية) إلى تدفقات فرعية. ثم تتبع القيمة المجمعة لكل تدفق فرعي بشكل مستقل. في Hazelcast Jet ، تتحرك النافذة المنزلقة بخطوات منفصلة ، الحجم الذي تحدده. على سبيل المثال ، بخطوة مدتها ثانية واحدة ، تحصل على مجموعة كاملة من النتائج كل ثانية. وبخطوة دقيقة واحدة ، ستشمل النتائج كل ما حدث في الدقيقة الأخيرة.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بعض الملاحظات. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الرمز مكتفي ذاتيا بالكامل. لا يتم استخدام مصادر البيانات الخارجية. نستخدم مصدر كعب روتين لمحاكاة تدفق الأحداث على التردد الصحيح. تحدث الأحداث على فترات منتظمة. لا يُنشئ المصدر أحداثًا ترتبط طوابعها الزمنية بالمستقبل ، لكنها تنشئها بأسرع وقت ممكن. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذا تأخر خط الأنابيب ، فسيتم "تخزين" الأحداث دون حفظها. في هذه الحالة ، يجب أن يلحق خط الأنابيب ، في أقرب وقت ممكن تلقي البيانات. نظرًا لأن مصدرنا غير متوازٍ ، فقد بلغ حد النطاق الترددي حوالي 2.2 مليون حدث في الثانية. قمنا بمحاكاة مليون حدث / ثانية ، تاركين هامشًا للصيد حتى 1.2 مليون حدث / ثانية.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يقيس الناقل تأخره عن طريق مقارنة الطابع الزمني لنتيجة النافذة المنزلقة مع الوقت الحالي. تم استخدام مرحلتين من التجميع مع الترشيح المتوسط. تحتوي نتيجة نافذة منزلقة واحدة على العديد من العناصر ، واحد لكل تيار فرعي ، ونحن مهتمون بالتأخير لآخر العناصر. لذلك ، نقوم أولاً بتصفية معظم النتيجة ، تاركين كل عشرة آلاف عنصر. ثم نوجه التدفق المخفض إلى المرحلة الثانية ، مع نافذة "التقليب" بدون مفتاح. في هذه المرحلة نلاحظ حجم النتيجة ونقيس التأخير. التجميع بدون استخدام مفتاح غير متوازٍ ، لذلك لدينا نقطة قياس واحدة. مرحلة الترشيح متوازية وهي محلية للبيانات ، لذا فإن تأثير مرحلة التجميع الإضافية صغير جدًا (أقل بكثير من 1 مللي ثانية).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
استخدمنا دالة تجميع بسيطة: العد. في الواقع ، تم الحصول على مقياس لتكرار الأحداث في الدفق. لديها هيكل الحد الأدنى (رقم نوع واحد </font></font><code>long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ، لا يتم إنشاء القمامة. بالنسبة لأي مقدار من استخدام الكومة (بالجيغابايت) ، فإن مثل هذا الهيكل الرئيسي الصغير يعني أسوأ سيناريو لمجمع القمامة: عدد كبير جدًا من الكائنات. لا ينمو الحمل على المجمع مع حجم كومة الذاكرة المؤقتة ولكن مع عدد الكائنات. اختبرنا أيضًا خيار حساب نفس دالة التجميع ، ولكن مع تنفيذ مختلف يولد القمامة.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد قادنا معظم معايير التدفق على عقدة واحدة ، لأننا كنا مهتمين بتأثير إدارة الذاكرة على أداء خطوط الأنابيب. </font><font style="vertical-align: inherit;">ويضيف كمون الشبكة ضجيجًا للبيانات فقط. </font><font style="vertical-align: inherit;">لاختبار الفرضية القائلة بأن أداء الكتلة لن يؤثر على النتائج التي توصلنا إليها ، كررنا بعض الاختبارات الرئيسية على مجموعة Amazon EC2 ثلاثية العقد. </font><font style="vertical-align: inherit;">سيتم وصف المزيد حول هذا قرب نهاية المقالة الثانية. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد أزلنا المجمّع الموازي من نتائج تحميل التدفق لأن ذروة التأخير التي يخلقها غير مقبولة في معظم سيناريوهات العالم الحقيقي.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السيناريو 1: الكمون المنخفض ، الهيكل المتوسط</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
خيارات البرنامج النصي:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">برنامج OpenJDK 14</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">حجم كومة JVM هو 4 غيغابايت.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ل G1 ، نظرا </font></font><code>-XX:MaxGCPauseMillis=5</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مليون حدث / ثانية.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50،000 مفتاح فردي.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نافذة منزلقة 30 ثانية بعد 0.1 ثانية.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذا السيناريو ، يتم استخدام أقل من 1 غيغابايت من الكومة. </font><font style="vertical-align: inherit;">الحمل على المجمع صغير ، ولديه وقت كاف لجمع القمامة التنافسية في الخلفية. </font><font style="vertical-align: inherit;">فيما يلي الحد الأقصى للتأخير في تشغيل خط الأنابيب مع ثلاثة مجمعات تم اختبارها:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/053/d40/26c/053d4026c6d3eb747e3e78bbdcd46ecd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تتضمن هذه القيم فترات زمنية ثابتة تبلغ 3 مللي ثانية تقريبًا لإرسال نتائج النافذة. </font><font style="vertical-align: inherit;">الرسم البياني يتحدث عن نفسه: يقوم المُجمع الافتراضي G1 بعمل ممتاز ، ولكن إذا كنت بحاجة إلى تأخير أقل ، يمكنك استخدام ZGC التجريبي. </font><font style="vertical-align: inherit;">لم نتمكن من خفض ذروة التأخير أقل من 10 مللي ثانية. </font><font style="vertical-align: inherit;">ولكن في حالة ZGC و Shenandoah ، لا تنشأ بسبب التوقف المؤقت في جمع القمامة ، ولكن بسبب فترات قصيرة من زيادة حجم عمل الخلفية لهواة الجمع. </font><font style="vertical-align: inherit;">في بعض الأحيان ، رفعت عمليات خدمة Shenandoah التأخير فوق 200 مللي ثانية.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">السيناريو الثاني: هيكل أكبر ومتطلبات وقت استجابة أقل صرامة</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نفترض أنه لأسباب خارجة عن سيطرتنا (على سبيل المثال ، بسبب الشبكة الخلوية) ، قد يزيد التأخير إلى ثوان. </font><font style="vertical-align: inherit;">هذا يخفف من متطلبات خط أنابيب معالجة التيار. </font><font style="vertical-align: inherit;">من ناحية أخرى ، قد نواجه بيانات أكبر بكثير ، بحجم ملايين أو عشرات الملايين من المفاتيح. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذا السيناريو ، يمكننا تجهيز المعدات للاستخدام الكثيف ، مع الأخذ في الاعتبار حقيقة أن جامع القمامة سيعمل في كومة كبيرة ، بدلاً من توزيع البيانات عبر عدة عقد من المجموعة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
أجرينا العديد من الاختبارات في مجموعات مختلفة لمعرفة كيف تؤثر مجموعات العوامل على أداء وقت التشغيل. </font><font style="vertical-align: inherit;">اتضح أن هذا يعتمد على معلمتين:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عدد السجلات المخزنة في المجاميع.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عرض النطاق الترددي للماكياج.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تصف المعلمة الأولى عدد الكائنات في الجيل الثابت. عند التجميع باستخدام طريقة النافذة المنزلقة ، نحتفظ بالكائنات لفترة طويلة (في جميع أنحاء النافذة) ثم نطلقها. هذا يتناقض بشكل مباشر مع فرضية القمامة الأجيال (فرضية القمامة الأجيال) ، التي تدعي أن الأشياء إما تموت صغيرة أو تعيش إلى الأبد. في هذا الوضع ، يتم إنشاء الحد الأقصى للحمل على جامع القمامة. وبما أن كثافة عملها تنمو مع عدد الكائنات الحية ، تعتمد الإنتاجية بشكل كبير على هذه المعلمة. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تتعلق المعلمة الثانية بكمية الموارد التي يمكن للتطبيق تخصيصها لمجمع البيانات المهملة. لتوضيح الأمر ، دعنا نبني بعض الرسوم البيانية. عند التجميع باستخدام طريقة النافذة المنزلقة ، يمر الناقل بثلاث مراحل:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">معالجة الأحداث في الوقت الحقيقي عند حدوثها.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تمرير نتائج نافذة منزلقة.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">اللحاق بالأحداث المستلمة خلال المرحلة الثانية.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكن تصور جميع المراحل الثلاث على النحو التالي:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/99c/d77/894/99cd778940f1596c2dd5e1dbf0933fd4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذا استغرق نقل نتائج النافذة وقتًا أطول ، نجد أنفسنا في هذه الحالة:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b22/694/760/b226947608cfb3373742d02e6dc7774f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الآن الناقل لديه بالكاد الوقت ، وكل التأخيرات في أي وقت مثل التوقف المؤقت لجمع القمامة سيزيد من التأخير ، وسوف يتعافى ببطء شديد. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
دعنا نغير الرسم البياني ونعرض فقط متوسط ​​معدل امتصاص الأحداث بعد اجتياز نتائج النافذة:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d78/cd9/ccb/d78cd9ccbf09b96c23705ae8bb0d6e38.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
دعنا نسمي ارتفاع المستطيل الأصفر "متطلبات فرض": هذا هو شرط سعة المصدر. إذا تجاوزت الصبيب الفعلي للناقل ، فلا يمكنه التعامل مع الحمل. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إليك ما سيبدو عليه إذا استغرق نقل نتائج النافذة وقتًا طويلاً:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b9/0ea/594/5b90ea59490f05c628401475c9849e21.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم إصلاح مساحة المستطيلين الأحمر والأصفر وتتوافق مع كمية البيانات التي يجب أن تمر عبر خط الأنابيب. في الواقع ، "يضغط" أحمر أصفر. لكن ارتفاع المستطيل الأصفر محدود ، في حالتنا يبلغ السقف 2.2 مليون حدث / ثانية. وعندما يتجاوز الارتفاع الحد الأقصى ، نحصل على ناقل لا يمكنه تحمل الحمل وتأخير متزايد غير محدود. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد اشتقنا صيغًا للتنبؤ بحجم المستطيلات لمجموعة معينة من تردد الحدث وحجم النافذة وخطوة الانزلاق وحجم مجموعة المفاتيح. لذا يمكننا على أي حال تحديد شرط فرض.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الآن لدينا معلمتان مستقلتان أكثر أو أقل مستمدة من العديد من المعلمات الأخرى التي تصف كل تركيبة فردية. </font><font style="vertical-align: inherit;">يمكنك بناء رسم بياني ثنائي الأبعاد ، الدوائر التي تشير إلى المعايير المحظورة. </font><font style="vertical-align: inherit;">قم بتلوين الدوائر وفقًا لنجاح أو فشل المجموعة. </font><font style="vertical-align: inherit;">على سبيل المثال ، للحصول على مجموعة JDK 14 مع تشغيل G1 على كمبيوتر محمول ، نحصل على الرسم البياني التالي:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab2/9e6/416/ab29e641669a2666c59d506e59fce458.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد حددنا ثلاث فئات:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"نعم" - يتكيف الناقل ،</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"لا" - لا يمكن لخط الأنابيب التعامل مع نقص عرض النطاق الترددي ،</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"جامع القمامة" - لا يتحمل الناقل بسبب فترات التوقف الطويلة المتكررة في التجميع.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يرجى ملاحظة أن نقص النطاق الترددي قد يحدث أيضًا بسبب جمع القمامة التنافسي وتوقف التجميع القصير المتكرر. بشكل عام ، الفرق بين الفئتين الأخيرتين صغير. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يمكنك رؤية الحد الذي يفصل أسفل يسار الرسم البياني. أنه يحتوي على نقاط من المعايير بنجاحها. قمنا برسم نفس الرسم البياني لمجموعات أخرى من JDK ومجمع القمامة ، وحددنا حدود المناطق وحصلنا على النتيجة التالية:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/251/d12/394/251d123945208cbed4806928946c4241.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كان لدينا MacBook Pro 2018 مع Intel Core i7 سداسي النوى وذاكرة DDR4 16 جيجا بايت. ل JVM تم تكوينه </font></font><code>-Xmx10g</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ومع ذلك ، نعتقد أنه سيتم ملاحظة صورة مماثلة في العديد من التكوينات الأخرى. يوضح الرسم البياني تفوق G1 على جامعي أخرى ، وضعف G1 عند استخدامه مع JDK 8 ، وضعف جامعي التجارب مع الكمون المنخفض تحت هذا النوع من الحمل.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
التأخير الأساسي - مدة إرسال نتائج النافذة - تقلب حوالي 500 مللي ثانية. </font><font style="vertical-align: inherit;">ومع ذلك ، غالبًا ما تحدث الانفجارات بسبب فترات التوقف الرئيسية لجمع القمامة (والتي كانت طويلة بشكل غير معقول في حالة G1) ، حتى 10 ثوانٍ في المواقف الحدودية (عندما يتعامل الناقل بالكاد مع العمل) وينخفض ​​إلى 1-2 ثانية. </font><font style="vertical-align: inherit;">لاحظنا أيضًا تأثير تجميع JIT في المواقف الحدودية: يبدأ خط الأنابيب في العمل بتأخير متزايد باستمرار ، وبعد حوالي دقيقتين يتحسن الأداء ويعود التأخير إلى القيم الطبيعية.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar506696/index.html">إدارة PostgreSQL في Gitlab.com. خوسيه كوريس فينوتو</a></li>
<li><a href="../ar506698/index.html">قداس ل "إطلاق البحر"</a></li>
<li><a href="../ar506700/index.html">نقوم بتهيئة GitHub Actions لنظام Android من خلال النشر اللاحق في PlayMarket</a></li>
<li><a href="../ar506702/index.html">محركات الأقراص الصلبة الأكثر موثوقية وفقًا لـ Backblaze Q1 2020</a></li>
<li><a href="../ar506704/index.html">لماذا أكتب PHP في 2020؟ Holivarim هي بودكاست تفاعلية على Youtube هذا الخميس</a></li>
<li><a href="../ar506708/index.html">مصادقة ثنائية VPN / Mikrotik - بسيطة وقابلة للتطوير</a></li>
<li><a href="../ar506710/index.html">قم بإدارة دفاتر عناوين متعددة في الإصدار المفتوح المصدر من Zimbra Collaboration Suite</a></li>
<li><a href="../ar506716/index.html">القائمة الخطية متعددة مؤشرات الترابط: مشكلة وجود العنصر ، وتحسين الإنتاجية ، وعلاقة STL</a></li>
<li><a href="../ar506726/index.html">خبرة في استخدام تقنية Rutoken لتسجيل وتفويض المستخدمين في النظام (الجزء 2)</a></li>
<li><a href="../ar506730/index.html">الشخير أو سوريكاتا. الجزء 1: اختر IDS / IPS مجانًا لحماية شبكة الشركة</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>