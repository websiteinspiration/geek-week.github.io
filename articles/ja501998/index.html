<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍❤️‍💋‍👩 🧑🏿‍🤝‍🧑🏼 🍨 スタイルの高価な価格。Yandexレポート 👨‍👩‍👧 🕝 🆘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ページにCSSをロードすることは、ブロッキング操作です。JavaScriptの非同期読み込みがユーザーに表示されない場合、スタイルの表示が遅いため、サイトからイライラするゲストを駆り立てることがあります。ユーザーに対してCSSをできるだけ効率的かつシームレスにロードする方法は？ニキータ・ダブコは理解...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>スタイルの高価な価格。Yandexレポート</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/501998/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページにCSSをロードすることは、ブロッキング操作です。</font><font style="vertical-align: inherit;">JavaScriptの非同期読み込みがユーザーに表示されない場合、スタイルの表示が遅いため、サイトからイライラするゲストを駆り立てることがあります。</font><font style="vertical-align: inherit;">ユーザーに対してCSSをできるだけ効率的かつシームレスにロードする方法は？</font><font style="vertical-align: inherit;">ニキータ・ダブコは理解しようとしています</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DarkMeFoDy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ミンスクのYandex検索インターフェースグループから。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kATRlMrtaaY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- みなさん、こんにちは。</font><font style="vertical-align: inherit;">スタイルについてお話します。</font><font style="vertical-align: inherit;">今日、TypeScriptとTypeScriptについて誰もが話している。</font><font style="vertical-align: inherit;">そして、カスケードスタイルのスクリプトについてお話します。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私について少し。</font><font style="vertical-align: inherit;">私はベラルーシの開発者です。映画Dudyaの後で、どこでもそう言います。</font><font style="vertical-align: inherit;">Web Standardsポッドキャストで私の声を聞いたことがあるかもしれませんが、Web Standardsニュースフィードにタイプミスがあれば、それもおそらく私です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
少しの免責事項。</font><font style="vertical-align: inherit;">レポートにはいくつかの狂気が含まれます-私が言うすべてを批判的に扱います。</font><font style="vertical-align: inherit;">なぜそのようなテクニックを使用できるのか、なぜそれが必要ないのかを考えてください。</font><font style="vertical-align: inherit;">いくつかのことは本当にクレイジーになります。</font><font style="vertical-align: inherit;">行け。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何のために？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そもそも、CSSの最適化について話す必要があるのはなぜですか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検索エンジンで高速なJSダウンロードを探し始めると、多くの結果が得られます。迅速なCSSロードを探す場合、上部には必要なCSSさえ表示されません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fd/fy/mh/fdfymhsjiglvpavgqbzxrczyqo8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Googleを見ると、JSについては1億1,100万件、CSSについては2,600万</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
件しかありません。なぜそれについて話すのですか？ JSパフォーマンスレポートを探すと、その多くが見つかります。 Reactについて、他のあらゆる種類のフレームワークについて、Vanillaについてなどがあります。しかし、CSSについては、1つのレポートしか見つかりませんでした。 2018年のハリーロバーツは、</font><font style="vertical-align: inherit;">CSSのパフォーマンスに関する</font><font style="vertical-align: inherit;">クールな</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レポートを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読んでい</font><font style="vertical-align: inherit;">ます。 2つ目の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">レポート</font></a><font style="vertical-align: inherit;">を見つけたと思った</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roma Dvornova、「Parsim CSS：パフォーマンスのヒントとコツ」。しかし、CSSを解析するJSレポートであることがわかりました。正確には私たちが必要とするものではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らはCSSについてあまり考えていないことがわかりました。それは残念だ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、ウェブにアクセスすると、通常HTMLが表示されます。また、ページのスタイルを設定するCSSも表示されます。 JSは表示されません。 JSは、CSSとHTMLをページ上で動かしてすべてを美しく見せるものです。これはスクリプトです。 JSが読み込まれない場合でも、CSSが読み込まれない場合ほど悪くはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JSのエラーはコンソールに静かに落ちます。そして、平均的なユーザーがDevToolsにアクセスして、「ああ、そこにあるのか、コンソールに間違いがある」とは考えにくいでしょう。ただし、CSSが読み込まれない場合は、必要なものがすべて表示されない可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、第一印象が一番だということが研究されています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">38％が</font></a><font style="vertical-align: inherit;">サイト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">に</font></a><font style="vertical-align: inherit;">アクセスでき、直接不快だとわかった場合、すぐにサイトを離れます。そして、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">88％</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が許容し、それを1回使用すると、二度と戻ってくることはなく、サイトに助言する可能性は低くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たち全員が家に座っている今、インターネットトラフィックは特に増加しています。また、ユーザーにリソースを効率的に提供する方法についても考える必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yandexの視点から数えてみましょう。 Yandexのすべての配信を100ミリ秒で最適化し、たとえば1日あたり2億ページ（正確な数はわかりません）を与えることができれば、この日は0.1秒* 2億= 232人日を節約できます。 100ミリ秒の出力を最適化するだけです。 CSSもそれを行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
小さな探偵を演じて、スタイルの読み込みを最大限に活用する方法を見つけましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">測定！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のアドバイスは、常にすべてを測定することです。理論的に最適化を行う意味はありません。あなたのケースでは最適化が機能すると仮定することができますが、実際の測定ではそのようなことは何も示されません。これは、最適化の最も重要なルールです。</font><font style="vertical-align: inherit;">HolyJSのSERP VelocityチームのAndrei Prokopyukが、</font><font style="vertical-align: inherit;">私たちがこれをどのように行うか</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常によく</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">話しました</font></a><font style="vertical-align: inherit;">。繰り返しはしません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのような測定ツールがありますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-多かれ少なかれ実際のデバイスで測定したい場合は、あなたのデバイスほど遅くはありませんが、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebPageTestを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ください</font></a><font style="vertical-align: inherit;">。私は通常そこで測定します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-Chromiumベースのブラウザを使用している場合は、Lighthouseがあります。彼は、地元の測定と同様に、かなり良いことを示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-すべてを自分で実行できると確信している場合は、DevToolsの[パフォーマンス]タブに移動します。詳細がたくさんあるので、独自のメトリックを開始して分析できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vx/xl/jl/vxxljlbogdfjvd0v2kyqedewfxy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然、パフォーマンスでは実際の条件を設定する必要があります。あなたはオフィスでクールなインターネットを備えたクールなラップトップに座っています。ここではすべてが素晴らしいですが、彼らはあなたのところに来て、「遅いです」と言います。そしてあなたは言う：「すべてが私のために働く」。このようにしないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
常に、地下鉄の状況や他の場所にいるユーザーがサイトをどのように使用するかを確認してください。これを行うには、非常に遅いインターネットを設定する必要があります。誰かがいくつかのノキア3110からあなたに来ることができるので、CPUを遅くすることもお勧めです。彼はまた、サイトを表示する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も重要なのは、実際のユーザーについて測定することです。そのような測定基準、より正確には、一連の測定基準（RUM、リアルユーザーモニタリング）があります。これは、コードで総合的に発生することではなく、本番環境の実際のユーザーに関するメトリックを測定する場合です。たとえば、ページの読み込みからアクションへ。アクションとは、たとえば、ブラウザで機能するものや、重要な要素をクリックするものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロボット向けに開発しているわけではないことを忘れないでください。灯台のソトカ-それは素晴らしいです、それは本当に良いです。したがって、少なくとも灯台が設定する要件を満たします。しかし、本当のユーザーがいて、Lighthouseでヒービングしているときにユーザーがページを表示できない場合は、何か問題があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z-/fy/cn/z-fycndvddxfylx_s_ahdxjolpc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注目すべき重要な指標があります。</font><font style="vertical-align: inherit;">これは、最初のコンテンツフルペイントです。ページに最初のコンテンツが表示され、何かを行うことができます。</font><font style="vertical-align: inherit;">この指標はChromiumブラウザで送信され、取得できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mt/xi/mi/mtximitp8tflgksudiaaporikko.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最近でも、最大のコンテンツフルペイントを見ることができます。</font><font style="vertical-align: inherit;">メディアページがあることがよくあります。たとえば、その上にある写真を見ることが重要です。</font><font style="vertical-align: inherit;">次に、この特定のメトリックが必要です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSSの読み込み</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後にCSSに移りましょう。CSSのロード方法です。</font><font style="vertical-align: inherit;">レセプションは長い間知られています。</font><font style="vertical-align: inherit;">クリティカルレンダリングパス、クリティカルレンダリングパスがあります。</font><font style="vertical-align: inherit;">これは、リソースのリクエストを送信した瞬間から、ユーザーの画面にピクセルが表示されるまでのブラウザの動作です。</font><font style="vertical-align: inherit;">これについても、記事やレポートがたくさんあります。</font><font style="vertical-align: inherit;">しかし、このブラウザがどのように実行するかを簡単に見てみましょう。</font></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ru"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>CSS —  <span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/main.ac74gsac.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼はHTMLのダウンロードを開始し、タグを確認します。</font><font style="vertical-align: inherit;">彼は徐々にそれらを解析し、それらをどうするかを理解しています。</font><font style="vertical-align: inherit;">負荷。</font><font style="vertical-align: inherit;">リンクを越えて来ました。</font><font style="vertical-align: inherit;">使用する必要があります。</font><font style="vertical-align: inherit;">しかし、どうやって？</font><font style="vertical-align: inherit;">まず、それをダウンロードする必要があります。</font><font style="vertical-align: inherit;">ダウンロードが遅い。</font><font style="vertical-align: inherit;">読み込まれると、さらにページの解析を開始します。</font></font><br>
<br>
<pre><code class="html hljs xml"> <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ru"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>CSS —  <span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/main.ac74gsac.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>-!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のリンクにつまずくと、再びブロックされ、実行できなくなります。</font><font style="vertical-align: inherit;">JSをブロックし、解析をブロックします。</font><font style="vertical-align: inherit;">そして、起動するまで何もしません。</font><font style="vertical-align: inherit;">しかし、それはさらに働き始めます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;リンク&gt;</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに掘り下げましょう-リンクにアクセスするとどうなりますか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/eb/cs/3webcs2yte1_pqw5nzwvmj_epy4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが行くところの録音が標準です。</font><font style="vertical-align: inherit;">どこかにあるCSSスタイルがあります。</font><font style="vertical-align: inherit;">これで、すべての静力学をCDNに置くことがファッショナブルになりました。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どこへ行く？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、ブラウザはどこに行くべきかを理解する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u8/me/ix/u8meixyugzfctlaocm2xzo862po.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼はURLを見て、このURLを理解する必要があります-それは何ですか？ URLがサイト識別子であることに慣れています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/26/2m/6b/262m6bmfjupam-ega9z7tmpibzk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、物理的には、このURLのIPアドレスを取得して、IPアドレスで実際の物理マシンに移動する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ys/nq/ah/ysnqah21cz075zefg6khjupdm-w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CDNの場合、DNSでレコードを受信し、実際にはIPアドレスに直接移動します。この場合、どのように加速できますか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lz/cl/sn/lzclsnosywf5yaqi0fihvdefism.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クレイジーなアイデアは、ユーザーからDNSサーバーまでの距離を短くすることです。ユーザーを連れて移植します。たとえば、「近くに座る」または「近くに移動する」というメッセージを表示するには、</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リンクでIPアドレスをすぐに指定できます。 IPアドレスで結果をすぐに提供できるのに、なぜDNSを探してドメインを解決する必要があるのですか？これはおかしな方法ですが、DDoSグローバルDNSサーバーの場合は、節約することさえできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、IPアドレスを取得する必要がなくなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s4/i0/1v/s4i01v9rasbbahddidnteghzu8a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
index.htmlまたは別のファイルに目を向けると、移動先のドメインアドレスがわかっています。これは、別のドメインまたはサブドメインに統計情報を保存する代わりに、静的情報をドメイン、つまりこのドメイン自体に近づけることができる場合に当てはまります。その後、DNSは解決する必要がありません。すでに解決されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zn/l1/gg/znl1ggztpsl37dgk1cmfo0ob8c8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはどこへ行くかを考え出した。しかし、私たちはブラウザに対してそのようなことを事前に行うことができます。たとえば、スタイルツリーがDOMツリーを介してかなり後で読み込まれた場合、&lt;link rel = "dns-prefetch"&gt;を使用してブラウザに「まだそこには行きませんが、リソースをウォームアップしますが、後で必ず必要になります」と伝えることができます。 」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このエントリで、ブラウザにダウンしてこのDNSを取得するように指示します。</font><font style="vertical-align: inherit;">コードにリンクが表示されている場合、ブラウザはすでにこのドメインのIPアドレスを知っています。</font><font style="vertical-align: inherit;">あなたはそのような予備的なことをすることができます。</font><font style="vertical-align: inherit;">同じことが、たとえば、次のページに入る前に、必ず進みます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わかりました、ブラウザはどこへ行くか知っています。</font><font style="vertical-align: inherit;">彼は行く方法を理解する必要があります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行く方法</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはプロトコルを見ています。もちろん、httpsは直接の要件です。検索エンジンを含めると、httpsを使用していないサイトがフォームで完全に安全ではないとマークされます。</font><font style="vertical-align: inherit;">ボードがhttpsでどのように機能するかについて</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、驚くべき</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=https://howhttps.works/why-do-we-need-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一連の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漫画</font><font style="vertical-align: inherit;">を見つけました</font><font style="vertical-align: inherit;">。しかし、私たちはIT担当者であり、クールで複雑な図が大好きで、面白い漫画は簡単すぎます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/hh/p1/jqhhp1dzstopvkbbsf70gnkxwpw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、httpsの仕組みを自分の言葉でまとめました。まず、サーバーからSSL証明書を取得します。次に、証明機関で証明書を確認する必要があります。これらは、何が有効で何が無効であるかを知っている特別なサーバーであり、ブラウザーにプロンプ​​トを出すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は、サーバーとクライアント間の通信用の鍵の生成、異なる鍵を使用した暗号化、復号化です。暗号化の観点から見ると、このプロセスは興味深いものです。しかし、スピードを上げたい。どうやって？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pq/g1/ue/pqg1ueqmruwadkjjb7ff5sstwu0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
再びユーザーをサーバーの近くに転送できます。 DNSは既にあるので、証明機関の近くに置くことができます。そして、これらのサーバーの間に置くことは完璧です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
httpsをオプトアウトできますが、なぜ必要なのですか？証明書の取得、暗号化、復号化に時間を費やしています。あんまり。これは、レポートで最も有害なアドバイスです。そうしないでください。 httpsはユーザーデータ保護であり、http / 2はhttpsなしでは機能しません。また、http / 2は速度を上げる別の方法です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/hh/p1/jqhhp1dzstopvkbbsf70gnkxwpw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OCSP Staplingテクノロジーもあります。証明機関がなくても証明書を検証できます。これはおそらくDevOpsに近いでしょう。証明機関の応答をキャッシュしてユーザーに発行できるように、サーバーを特定の方法で構成する必要があります。「信じてください、私の証明書は本当に本物です」。したがって、少なくとも証明機関に行くステップを節約できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、ニュアンスがあります-Chromeではこれは機能せず、長い間動作しませんでした。ただし、他のブラウザのユーザーは、このプロセスを高速化できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーを移植する必要があることはすでに2回言っていますが、そのアイデアは空中で急上昇しています-サーバーをユーザーの近くに移動することです。私はあなたのために何か新しいものを発見していません。これは、分散コンテンツ配信ネットワークであるCDNです。アイデアは、既成のsidienkiを使用して、独自のインフラストラクチャを独自に作成し、お金と機会が許す限り、世界中にサーバーの束を置くことができるということです。しかし、オーストラリアのユーザーがオーストラリアのサーバーに行くようにサーバーを配置する必要があります。ここでは、光の速度があなたに作用し、距離が短いほど、電子が速く通過します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
深く掘り下げましょう。リクエストでは他に何が起こっていますか？実際、httpsはhttpの単なるラッパーです。クールなラッパーだけではありません。さらに深い場合、httpはTCP / IPファミリーからのそのようなリクエストです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wl/be/sf/wlbesfr8mnsmulrqrlgazdwxa_4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのブラウザ、クライアント、サーバーが互いに通信できるように、パケットとバイトはどのようにネットワーク上で送信されますか？</font><font style="vertical-align: inherit;">クライアント/サーバーがTCP / IP接続を介して最初に行うことは、ハンドシェイクです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、2020年には、WHOは握手を避けることを推奨しています。</font><font style="vertical-align: inherit;">そのようなクールなTCP Fast Openテクノロジーがあります。</font><font style="vertical-align: inherit;">ハンドシェイク時に、チェーン全体を回避できます。「こんにちは、私はクライアントです」-「こんにちは、私はサーバーです」-「あなたを信じています」-「そしてあなたを信じています。</font><font style="vertical-align: inherit;">行く」。</font><font style="vertical-align: inherit;">この時点で、すでに有用なデータを送信できます。</font><font style="vertical-align: inherit;">そして、ハンドシェイクが成功した場合、有用なデータの一部が渡されています。</font><font style="vertical-align: inherit;">これはTCP Fast Openです。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何を拾う？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアントがサーバーから何を取得するかを考えてみましょう。</font><font style="vertical-align: inherit;">主なものは、クライアントがサーバーから何かを取得するのではなく、サーバーがクライアントにデータを提供することです。</font><font style="vertical-align: inherit;">それからあなたは考えるかもしれません：User-Agent。</font><font style="vertical-align: inherit;">クライアントからユーザーエージェントを取得し、ユーザーがログインしているブラウザを確認できます。</font><font style="vertical-align: inherit;">それが私をだましていないか、このブラウザをおおよそ調べてください。</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-selector-class">.example</span> {
    <span class="hljs-attribute">display</span>: -ms-grid;
    <span class="hljs-attribute">display</span>: grid;
    <span class="hljs-attribute">-webkit-transition</span>: all .<span class="hljs-number">5s</span>;
    <span class="hljs-attribute">-o-transition</span>: all .<span class="hljs-number">5s</span>;
    <span class="hljs-attribute">transition</span>: all .<span class="hljs-number">5s</span>;
    <span class="hljs-attribute">-webkit-user-select</span>: none;
       <span class="hljs-attribute">-moz-user-select</span>: none;
        <span class="hljs-attribute">-ms-user-select</span>: none;
            <span class="hljs-attribute">user-select</span>: none;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">-webkit-gradient</span>(linear, left top, left bottom, from(white), <span class="hljs-built_in">to</span>(black));
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">-o-linear-gradient</span>(top, white, black);
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom, white, black);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼がFirefoxからログインしたとしましょう。</font><font style="vertical-align: inherit;">いつものように、私はオートプレフィックスがコーニー接続されているアセンブリを持っています。それは私のためにたくさんのコードを生成しました。</font><font style="vertical-align: inherit;">はい、これはすべてがどこでも機能するクールなアプローチです。</font><font style="vertical-align: inherit;">しかし、ユーザーがFirefoxからログインしたことはすでに知っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
余分なものをすべてオフにしませんか？</font><font style="vertical-align: inherit;">同意します。行数ははるかに少なく、送信するバイト数も少なくなります。これはクールです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SERPのライトバージョン、Grannyがあります。</font><font style="vertical-align: inherit;">Vitaly Kharisovは彼女について話しました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビタール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">Web Standards Daysに関する</font><font style="vertical-align: inherit;">クラス</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レポート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。それはまさにこのアプローチを使用します。複数のバンドルを生成して、さまざまな方法でさまざまなクライアントに提供できます。 Firefoxは独自のものを取得し、WebKitは独自のものを取得し、動作し、検証済みであるため、それらの重量ははるかに軽くなります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/av/3l/rj/av3lrjwxk0h7r1uvu2soqygili8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに。私たちはユーザーのリクエストを処理する可能性が最も高く、その人が承認されていて、彼のためにいくつかの個人情報を使用しています。データベースから何かを取得するのは当然です。すべてではありません！どのユーザーでも変わらない静的なものがあります。それらはまったく同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
James Akvuhがそれについてのクールな</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">レポートを</font></a><font style="vertical-align: inherit;">読んだ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「サーバー側レンダリング。</font><font style="vertical-align: inherit;">自分でやれ"。</font><font style="vertical-align: inherit;">ポイントは？</font><font style="vertical-align: inherit;">HTMLと、すべてのユーザーに共通のある種のCSSがあることはすでに知っています。</font><font style="vertical-align: inherit;">データを取得する前に、この静的データから出力を生成し、サーバーで最も有用なストリームをすぐに送信できます。</font><font style="vertical-align: inherit;">その後、データを取得し、すばやく受け取り、テンプレートに変換してクライアントに渡します。</font><font style="vertical-align: inherit;">そして、ユーザーはすでに何か便利なものを目にするでしょう。</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">お使いのブラウザはHTML5ビデオをサポートしていません。</font></font><source src="https://mefody.dev/talks/css-cost/images/screencast-yandex-prerender.mp4" type="video/mp4"></video></div></div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはずっと前に実装されています。 SERPのメイン検索ページには、事前検索と事後検索という2つのフェーズがあります。事前検索とは、どのユーザーがログインしているかについての知識を必要としないすべての部分を送信するときです。私たちはすでに彼に、例えば帽子を与えることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、ユーザーが他のすべてが読み込まれる前に使用を開始できる検索バーがあります。これは、低速の接続で役立ちます。私たちはそれを行います、それは機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、http / 2についても話しました。これは最新のブラウザーで完全にサポートされているため、サーバーでまだ構成していない場合は、少なくともその構成方法を理解してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバープッシュは、次のような優れたテクノロジです。「ブラウザ、CSSが必要であるという知識はまだ与えていません。しかし、私は何が必要かを正確に知っています。保持して、プリロードしてください。」</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6b/hr/do/6bhrdomeghpruxrhggwss8lpe4a.png"><br>
<br>
<img src="https://habrastorage.org/webt/0_/h-/eo/0_h-eognhuhs4pp55sj0rzltkly.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは厳しくない。サーバーでいくつかのヘッダーを設定する必要があり、すべてが機能し始めます。ブラウザがこのタイトルを知らない場合、何も壊れません。これが最も美しいです。さらに掘り下げましょう。 TCPこれについてはすでに話しました：ハンドシェイク、バイトが送信されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/f4/gy/htf4gytrvdio_te6zyz5wsevhn8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
握手後は手を洗ってください。しかし、TCPに関しては、バイトの転送を開始し、アルゴリズムはクライアントサーバーがアイドル状態にならないように十分に最適化されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、特定のデータセグメントが最初に送信されます。デフォルトでは（これは設定で変更できます）、1460バイトです。サーバーは1つのセグメントに関する情報を送信しません。彼は窓を送ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のウィンドウは14600バイト、10セグメントです。次に、接続が良好であれば、ウィンドウを拡大し始めます。接続が不十分な場合、ウィンドウが狭くなる可能性があります。何を理解することが重要ですか？ 10セグメントの最初のウィンドウがあり、必要に応じてサイト全体に合わせる必要があります。そして、コンテンツの出現の最高速度があります。</font><font style="vertical-align: inherit;">Vitaliy Kharisov </font><font style="vertical-align: inherit;">もこれ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関するレポートを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読みました</font><font style="vertical-align: inherit;">。そして、はい。たとえば、JSをオフにすると、サイトに必要なすべてのものを1つのウィンドウに収めることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要なニュアンス。</font><font style="vertical-align: inherit;">セグメント全体を埋めると、1つのセグメントになります。</font><font style="vertical-align: inherit;">ただし、1バイト余分に送信する場合でも、サーバーは余分なセグメント全体を送信します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h4/8v/ut/h48vut1nv1yldqqdo2ubbe3miai.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クールな最適化を行い、出力を1キロバイト削減できますが、おそらくこれが原因で、測定値に何も表示されません。</font><font style="vertical-align: inherit;">通常、いくつかのセグメントで最適化を実行してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
奇妙なことに、私はタイプセッターであり、そのような複雑なサーバーについて語っています。</font><font style="vertical-align: inherit;">実際のCSSにさらに近づきましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">発送を減らす</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、ユーザーへの送信数を減らし、セグメントを減らし、より速く、ユーザーは満足しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/76/hb/6l/76hb6lkb_giyi6iwvnfvaui4yuk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
縮小。彼女はすべて自分のプロジェクトに着手しました。クールなツール、webpackプラグイン、gulp設定がたくさんあります-一般的に、あなたはそれを自分で理解するでしょう。手動でカスタマイズできますが、CSSを他のCSSOよりもクールに圧縮できることが確実な場合にのみ表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必ず圧縮を有効にしてください。 2020年に少なくともgzipがオンにならない場合、これは古代の圧縮技術であるため、間違いなく何か間違っていることになります。一般的に、2020年には、ブロトリを使用する時が来ました。これは、Chromiumブラウザーで出力をわずかに減らすための良い方法です。または、brotliをサポートしたくない場合は、少なくともzopfliを試すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはgzipのかなり遅い圧縮アルゴリズムであり、単に最良の圧縮結果を提供し、通常のgzipと同じ速さで解凍します。したがって、zopfliは賢く設定する必要があり、データを即座に出力する必要がない場合にのみ使用します。 zopfliアルゴリズムを使用して、アセンブリ中に収集されるgzipアーカイバを構成し、実際にはオンザフライで静的に送信することができます。これはあなたを助けることができます。しかし、結果も測定します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pu/f6/sm/puf6smovgfumpzw6cdrj4nxvjzo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのアルゴリズムはすべて、ある種の辞書を使用します。辞書は、繰り返しコードフラグメントに基づいて構築されます。しかし、時々彼らは言う：インライン化する必要がある、もしインライン化するなら、私たちはリクエストを取り除く。すべてのCSSをHTMLでリンクすると、非常に高速になります。トリックは、スタイルとHTMLを分解すると、gzipが少し効率的に機能することです。これは、辞書が異なり、より効率的だからです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の場合、ブートストラップページを取得し、そこにブートストラップをリンクして、2つのバージョンを比較しました。個々のリソースのGzipは150バイト少なくなります。はい、ゲインは非常に小さいです。ここでも、すべてを測定する必要があります。しかし、あなたの場合、これにより、例えば、セグメントの数を1つ減らすことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを最適化するには？私は縮小について話しているのではありません。プロジェクトで使用していないものを取り除きます。ほとんどの場合、クライアントで実行されないコードがあります。何のために？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oc/qy/i3/ocqyi32nsmaifhfwjtobuhbfyt0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを自動化できるように、特別なタブがブラウザーに組み込まれています。たとえば、Chrome DevToolsではこれがカバレッジです。これは、「このCSSまたはこのJSを使用しなかったので、削除できます」と伝えます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、ホバー、フォーカス、アクティブ、JSを使用してインストールされたものがあるかもしれません。サイトで考えられるすべてのアクションをシミュレートする必要があります。そうしないと、このCSSをカットできないことが確実になります。 Chris Coyerが、</font><font style="vertical-align: inherit;">ホバーとフォーカスですべてを実行しようとする自動ツールに関する</font><font style="vertical-align: inherit;">優れたレビュー</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公開しています</font><font style="vertical-align: inherit;">。しかし、これを自動化することは不可能であるという結論に達しました。まだうまくいきません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Booking.comのAnton Kholkin </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">による</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
優れた</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">レポート</font></a><font style="vertical-align: inherit;">があり</font><font style="vertical-align: inherit;">ます。彼らはまた、レガシーコードのヒープを削除しようとしました。</font><font style="vertical-align: inherit;">しかし、それらには特殊性がありました。外部プロジェクトからのレガシーコードです。</font><font style="vertical-align: inherit;">それを取り除く必要がありました。</font><font style="vertical-align: inherit;">彼らが出会った興味深いソリューションを見てください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなた自身は、Chromeのような同じPuppeteerで遊ぶことができます。</font><font style="vertical-align: inherit;">自動的にすべてを通過するテストを実行し、ホバー、フォーカスを実行することができます。</font><font style="vertical-align: inherit;">そして、これと同じカバレッジを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同僚のVitya Khomyakov</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビクターホミヤコフ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ページ上の重複やスタイルを見つけるなど</font><font style="vertical-align: inherit;">、独自の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトを作成し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ました。撮って、コピーして貼り付けてください。彼はコンソールであなたに書きます：「このセレクター、あなたは必要ないようです。」 DevToolsに入力するまで。それは素晴らしいです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5q/4i/4g/5q4i4gjomb59s7ry5xcukiqi0zc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firefox開発者のツールについて私が本当に気に入っている機能：使用されているように見えるスタイルを見る機会ですが、実際にはブラウザーはそれらを適用しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、display：inlineを設定できますが、このdisplay：inlineはサイズを設定する意味がないようです。または垂直方向に揃えて、インラインまたはテーブルセルに対してのみ機能します。これまでのところ、Firefoxでのみ強調表示できることを確認しました。「この行は必要ありません」。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでも注意が必要です。おそらくこのスタイルを使用して、後でクラスを貼り付けます。しかし、私の意見では、クールな機能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今すぐ質問してみてください：プロジェクトにBootstrap全体が必要ですか？ Bootstrapの代わりに使用するCSSフレームワークを配置します。ほとんどの場合、グリッドおよび多かれ少なかれ共通の要素にはBootstrapを使用し、Bootstrapの半分は不要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アセンブリを正しく使用してみてください。ほとんどすべての最新のCSSフレームワークでは、ソースコードを使用してアセンブリし、必要なものだけを選択できます。これにより、CSSバンドルのサイズを大幅に削減できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
未使用のまま譲渡しないでください。私の遺産を探す代わりに、このページではこのCSSを使用しないことを理解したビルドレベルを使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、完全なBEMスタックを使用すると、アセンブリを作成して、ページを既に提供している場合に、ページ上にあるBEMブロックのすべてのコンポーネントのツリーを構築できます。 BEMでは、このブロックがページ上にない場合、このCSSをロードする必要がないと判断できます。必要なものだけを発送してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グーグルの人でさえ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言う</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：BEMを使用してください、それは最適化のためにあなたを本当に助けることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
大声で言っているとは思いませんが、この場合はCSS-in-JSが良いアプローチのようです。独立した独立したコンポーネントを作成し、アセンブリを慎重に構成するか、実行時にどのブロックが使用され、どのブロックが使用されないかを決定する場合、このコードをクライアントに送信しないだけで、レガシーコードを見つける問題を取り除くことができます。簡単に聞こえますが、規律が必要です。プロジェクトの開始時に事前にそれについて考えます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/he/na/zrhenay2u6hrppvi4jx-ams_njo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他にどのようなオプションがありますか？ちょっとおかしい。このコードでは、divを使用しているため、スタイルは必要ないようです。デフォルトはすでにdisplay：ブロックです。そして、すべてのデフォルトを削除してみましょう。プロジェクト内にある場合、HTMLマークアップが二度と変更されないことが確実である場合-ブラウザーがすでに提供しているデフォルト値を確認して、それらを削除してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スタイルが少ない-素晴らしい！しかし、これもまたクレイジーなアイデアです。 CSSはスタイルであるため、HTMLについて知る必要はありません。それは完全に独立しています。別のプロジェクトに接続する必要があり、そこで機能するはずです。そして、はい、維持するのは難しいです。タグを変更します-すべてが壊れます。約束通りのクレイジーなアイデア。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数を使用します。 CSSにはcurrentColorのような非常に古い変数があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vh/eg/om/vhegomyxszcuft3mc8rloetjmio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、パターンがあります。たとえば、テキストと境界線が同じ色のボタンを作成したい場合があります。そしてホバーすることで両方を変更します。何のために？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-v/-5/jl/-v-5jle8hdyn94asbckxmh0ev_i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
色から値を取得するcurrentColor変数があり、たとえば境界に配置すると、このプロパティがプロキシになり、ホバー、フォーカス、アクティブなど、必要なものを1行だけ変更します。これは便利なようで、コードは1行少なくなっています。最適化できます。ちなみに、この例では、デフォルトですでにcolorプロパティから値を取得しているため、border-colorタスクを使用することはできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
base64がどのように使用されているかを見るのは非常に悲しいことがあります。 CSSでは、以前は積極的に推奨されていました。小さなアイコンを挿入するためにbase64を使用してください。 TCPを介して1つのセグメントに収まる場合は、それが適しています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/95/uu/rb/95uurb_rsvp6_xjhnolso-ftl-o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
でもハリー・ロバーツも</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base64がページの読み込みに与える影響について</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、</font></a><font style="vertical-align: inherit;">上品な調査を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">実施しました</font></a><font style="vertical-align: inherit;">。はい、リクエストは少なくなりますが、そのようなスタイルの解析は時々遅くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、解析は非常に高速な操作であり、ユーザーはほとんど気付かないでしょう。しかし、私たちは重要な測定基準を持っています-最初のレンダリングなので、ユーザーはページ上で何かを見ます。携帯電話では、ハリーロバーツの研究によると、最初のレンダリングは10回後に発生します。 base64が必要かどうかを考えてください。はい、リクエストは少なくなっていますが、効果はありましたか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、SVGにはbase64を使用しないでください。 SVGはURLエンコーダーの使用に最適だからです。 Julia Bukhvalovaにはすばらしい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツールがあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：さあ、SVGを貼り付けてください。CSSがすぐに貼り付けられる形になります。 base64がないことに気づくかもしれませんが、CSSで正しく認識されない可能性があるいくつかのものがエスケープされています。はるかに効率的です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
平均すると、base64は圧縮するサイズに30％のプラスを与えます。何のために？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最新のテクノロジーを使用します。グリッドについて話すときの通常の議論-Internet Explorerをサポートする必要があるかもしれません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pe/mg/xu/pemgxutjaqos0iq67ch7qdzudnc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それについて考えてみてください。IEのサポートがなく、フロートまたはテーブルでタイプセットする場合は、グリッドを使用して、20ピクセルのギャップを持つ3列のレイアウトを作成できます。これは、列間の距離です。 3行。さて、発表自体を考慮して、5つ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フロートでこれを試してください。そして、HTMLに触れると、クラスの名前を含む3行が変更されることを意味します。私はフロートで同じようにクールにする方法を見つけませんでした。あなたの決定を捨てる。ただし、最新のテクノロジーを使用してください。マークアップをよりコンパクトに示すことができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/vb/ze/jivbzezcoj7ou78zj5ylexaxd8i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atomic CSSを試すことができます。それは何ですか？これらの少し変わったクラス名を記述します。そしてしばらくすると、背景色または単に色を設定したのは自分であることがわかります。これらはCSSの「機能」です。しかし、スタイルの指標としてHTMLで使用する固定CSSセットがあります。そして、CSSは突然小さくなっています。大規模なプロジェクトの場合、固有のスタイルが少ないため、実際には小さくなります。しかし、あなたはHTMLを成長させています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gy/77/fl/gy77flr72xq4fuxlgz0jq3etfcu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今人気を博しているTailwind CSSの方向を見ることができます。これはAtomic CSSではなく、Bootstrapに似たユーティリティクラスに関するもので、より実用的なものです。特定のセットを使用できます。あなたには十分であるようです。機能を実行するクラスのセット。試すこともできますが、やりすぎないでください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kn/ir/8j/knir8jsxsmezohd8gouoba98pk4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のクレイジーなアイデア-なぜクライアントにクラス名全体が必要なのですか？はい、開発とデバッグには便利ですが、すべてのクラス名を1文字にしてみましょう。少なくなります。</font><font style="vertical-align: inherit;">これを行う方法</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">に関する記事</font></a><font style="vertical-align: inherit;">を</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に</font><font style="vertical-align: inherit;">示します。ビルド時にwebpackまたは別のプラグインを構成できます。しかし、それは私たちから離陸しませんでした。試しました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gzipはとてもクールで、すべてがかなり最適化されており、BEMとgzipは非常に使いやすいことがわかりました。</font><font style="vertical-align: inherit;">コード内のブロックと要素を記述するためにテキスト構造が繰り返されているためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、これはほとんど利益をもたらしませんでした。</font><font style="vertical-align: inherit;">しかし、たとえば、BEMがなく、異なるクラスがたくさんない場合は、試すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要：測定します。</font><font style="vertical-align: inherit;">そのような実験的なピースをすべて測定します。</font><font style="vertical-align: inherit;">おそらく今はそれがうまくいき、プロジェクトのアーキテクチャを少し変更しただけで、組み立てが異なり、すべてが遅くなりました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードしてください！</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまでは、ファイルのダウンロード方法についてのみ説明してきました。ダウンロードしました。ユーザーはこれまでずっと何を見てきましたか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hv/0l/8e/hv0l8e1uk89lmfqategu9yux-je.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼はそのような驚くべき画面を見ました。ダウンロード中、画面に何も表示されませんでした。ダウンロードして、ブラウザはさらに6つのステップを開始します。少し我慢してください。ダウンロードよりも少し早く説明します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4c/zj/yy/4czjyy-8-jl4c4qdm9dzgczmfes.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解析から始めましょう。解析とは、ブラウザがバイトのストリームをダウンロードし、それを理解できるエンティティに分割し始めるときです。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/709/df0/50d/709df050daf8e241e96c31e73c720fad.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、彼はインポートに出くわしました。これは再度ダウンロードする必要があります。レポートの最初の部分をもう一度読みますか？インポートはブロッキング操作です。しかし、ブラウザはスマートです。彼らはプリロードスキャナーを持っています。私はすべてがそこでブロックされていると言いました、これは本当ではありません。ブラウザは、たとえば、スタイルに続く3つのリンクタグがある場合、最初のタグをダウンロードすると、2番目と3番目のダウンロードを開始できることを知っています。解析の構造全体が壊れているため、解析できません。しかし、事前にダウンロードしてください-できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/yw/qw/abywqwqotl2uyae8y67kpx_-6ky.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、インポートは悪いことです。スタイルがHTMLで一貫している場合、ブラウザは、別のファイルに進むことを確認します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xf/zb/-k/xfzb-kzu_zycogs1kilkjp73rsy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、それをインポートに直接挿入する場合、最初にstyle.cssをダウンロードしてから、インポートを確認する必要があります。彼はこのCSSの解析を開始します...ええ、私たちはすべてを新しい方法でブロックし、ファイルに移動します！そのため、サイトで最適化を解除してクールな滝を作ることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インポートを忘れるか、ビルド後にインポートが行われないように構成します。開発環境ではOKですが、ユーザーではできません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/le/2g/lx/le2glxus3towgrovquopecvq1nu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、カスケードを使用して、ツリーを構築する段階を進めます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qo/g-/q8/qog-q84eqwq9dszmfw3zlo7f__0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべても長い間説明されています。 CSSオブジェクトモデルが構築されます-ブラウザーがタグ、クラスをスタイルにマップする方法の特別なツリー。彼はそれをすべてDOMにリンクし、これらの接続を非常に迅速に行います。あなたが何かを変えるとき、彼は木の中でそれを変えることで十分です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cp/kv/b1/cpkvb1obn0v0kwyr1ijpgmc3vmc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セレクターが大きいほど、ブラウザーがツリーを描画することが難しくなります。彼はセレクターを解析し、それをツリー構造に変換する必要があります。そして、あなたが挿入した場合！重要なことですが、彼はこれを考慮に入れるべきです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/z_/ld/abz_ldlw6yhtfzvfiak5pjnnjem.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEMについてもう一度お話しするときがきたようです。ただし、ユーティリティクラスの使用方法を知っている場合、1つのクラスが1つの機能を担当し、それらが互いに干渉しない場合、BEMは必要ありません。その後、ツリーを構築することは非常に簡単です。かなりフラットな構造であり、ブラウザはそれをDOMに正しくリンクするはずです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w3/tt/fd/w3ttfdtaor_cd7m8e4gikrch4po.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うと、そのようなセレクターはCSSの解析を遅くすると言います。しかし、これらはずっと昔の伝説であり、ブラウザの違いは非常に小さいため、平均的なプロジェクトでは、アスタリスクを使用してセレクターを最適化しても気付かないでしょう。しかし、そのようなコードを開発して維持したいですか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/83/1d/po831d3idqqnykaw8ieprtg5eoo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前はヒントを聞いていました。すべてをショートカットに入れてみてください。 backgroundは、他の多くのプロパティへのショートカットです。すべてをひとつの物件に収め、最適に。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バイトで、はい、それは小さくなっています。ただし、CSS OMの構成を最適化する場合でも、ブラウザーはこれらすべてのプロパティをバックグラウンドから外します。各DOM要素のブラウザは、要素が持つことができるすべてのプロパティのテーブルを作成します。 DevToolsの計算値を見ると、ブラウザーが要件に従って計算したため、そこにはありません。 1つのプロパティを書き換える方がはるかに簡単で、すべてが機能するため、これをメモリに格納します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これも非常に奇妙なアドバイスですが、CSS OMを高速化したい場合は、すべてのプロパティを一度に1つずつすぐに設定できます。うまくいくかもしれません。ただし、バンドルのサイズは大幅に増加します。測定する必要があります。儲かるとは思えないけど、いきなり！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CSS OMがビルドされると、JSもこの時点でロックされます。 OM CSSの構築に2秒かかる場合、JSは失敗します。 CSSでツリーを2秒間構築するほど多くのことをどうやって記述したかは想像できませんが。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/25/0e/un/250eunwpu4yepgffhza-6g1u2dg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、ブラウザはレイアウトを行います。これは、すべてのDOM要素の位置、位置の使用です。要素を配置する場所と寸法を理解しています。この段階では、ユーザーは既に何らかの画像を表示しているようです。しかし、彼はすべてをビューポートに表示し、限られたウィンドウを通して見ることができます。下から何かがおかしいと、彼は単にそれを見ないでしょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/af/_r/hgaf_racfuoqjcan8wci-i94miu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアイデアはクリティカルCSSと呼ばれ、かなり古いものです。ダウンロードの最初の最初の画面に重要なものをいくつか挿入します。たとえば、HTMLにインラインで追加のリクエストを削除します。ユーザーには最初にこの画面が表示され、次に好きなようにダウンロードします。ほとんどの場合、ロードする時間があるときにスクロールを開始します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hb/nk/0u/hbnk0uuz7vgkbubstjoqnfwgsus.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは簡単に行われます。 webpackとReactのプラグインを含む、これらすべてを自動化するツールがあります。検索して正しく設定するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/addyosmani/critical</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/pocketjoso/penthouse</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/anthonygore/html-critical-webpack-plugin</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/GoogleChromeLabs/critters</font></font></a><br>
<br>
<img src="https://habrastorage.org/webt/1p/pi/qp/1ppiqpkakke_gsbhxo1cybumlgo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
持っている良い</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプローチ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィラメントグループから-CSSをブロックせずに非同期でロードする方法。すべてが非常に簡単です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;link rel = preload&gt;を指定したら、ブラウザに次のように伝えます。「このスタイルが必要ですが、今は何もブロックしていません。今すぐダウンロードしてキャッシュし、私がそれを参照すると、CSS OMの構築を開始します。」そして、あなたはonloadを入れてそれを処理する必要があるだけです。「私はそれをダウンロードしたので、rel = stylesheetを実行し、解析を有効にしてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
かなり単純なアプローチですが、それも賢く使用してください。プリロードが多すぎると、状況が悪化する可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j1/ny/ri/j1nyrizteczgvkx5dwd78_fy1yy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メディア表現で遊ぶこともできます。それらを貼り付けてブラウザに伝えます。「このスタイルは今は必要ありませんが、このメディア表現が機能する場合は必要になります。」また、ブラウザはプロアクティブにダウンロードしますが、優先度は低く、ブロックされません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ie/m3/go/iem3golzhy8qq3fulda1iwn8d0u.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別のクレイジーなアプローチですが、それほどクレイジーではありません-http / 2プッシュがある場合。 CSSをブロックの直前に埋め込むことができます。 CSSがないと、ブロックの見栄えがよくありません。では、このブロックの前の次のブロックに必要なCSSをインライン化しないのはなぜですか？これは論理的であり、http / 2プッシュにより最適化できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シンプルなアプローチ。展開する場合は、遅延読み込みを使用してください。ユーザーが使用しないものをダウンロードする必要があるのはなぜですか？ Reactコンポーネントを構成して、ページの可視領域に到達したことがない場合に、スタイルをダウンロードする必要があるのはなぜですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intersection Observer APIを探索すると、ページを劇的にスピードアップできる可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-v/ag/dz/-vagdzf0qqu3mmpabixf1rw9_ss.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後のステップは、コンポジットレイヤーの描画と適用、接着などです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/1v/bc/be1vbcsui3hmenm-0ryzhadzrjs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザーは、非常に多くの場合に複合レイヤーを作成します。</font><font style="vertical-align: inherit;">私の意見では</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chromium </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ソースコードの</font></a><font style="vertical-align: inherit;"> 4分の1のみがここに収まります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ブラウザのコードで複合レイヤーを作成するときに、自分で確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ビデオメモリは、特に携帯電話では制限されています。</font><font style="vertical-align: inherit;">will-change：変換などを使用してアニメーションを最適化するためにすべてを新しいレイヤーに持ってくると、状況が悪化する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成するレイヤーの数を減らします-現在の最適化に必要な数だけ作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すばらしい、私たちはすべて解析しました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして戻ってきたら？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ページに戻った場合はどうなりますか？私が行ったのはこれが初めてです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ページに戻ると、すぐにすべてをダウンロードできるようです。すでにすべてのリソースをダウンロードしましたが、もう一度使用してみませんか？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8v/di/1l/8vdi1lapv3i9ka0lb-swsysnhms.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーがCache-Controlヘッダーを提供しない場合、ブラウザーはファイルを再利用するためにキャッシュしようとします。サーバーをデフォルトで設定できます。たとえば、「このファイルを1年間キャッシュする」のように指定します。変更されません。ただし、そうである場合は、グローバルキャッシュの無効化の問題に対処する必要があります。しかし、これは別のレポートのトピックです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスワーカーを使用してください！ 2020、それは時間です、プログレッシブWebアプリケーションです！キリル・チュガノフは良い</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">報告をしました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Workerをさまざまな状況で使用する方法について。この場合、CSSリクエストをインターセプトして保存し、ブラウザがこのスタイルに2回目に従う場合は、キャッシュからドロップします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、ブラウザは何も約束しません。ブラウザがメモリ不足になったという事実に常に直面することができます。彼はキャッシュしようとしますが、メモリがありません。キャッシュは100％ではありません。常にそのような状況に対処してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ローカルストレージを使用してみてください。しかし、彼はひどく遅いです。ファイルのダウンロードは、ローカルストレージAPIにアクセスするよりも高速な場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
組み込みのブラウザデータベースを試すことができます。しかし、それを測定します。おそらく、プロセッサが弱いため、JSへの旅行にはさらに時間がかかるでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何かをダウンロードすることを事前にブラウザに指示することもできます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7a/_f/oq/7a_foqb9hzh_ycjaddhrkarqhia.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;link rel&gt;-この属性の機能を学びます。 preconnect、prefetch、prerenderがあります-個別に説明したいと思います。彼は言い​​ます：「私は今このページにいます、そして私は次へ行きます。このページのすべてをバックグラウンドタブでダウンロードして描画します。」クール。どこでも機能しません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iy/ca/ql/iycaqlaidexf0urgnjv05zpjskg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ある意味、IEやEdgeでサポートされています。 Chromeでは、これは実際には行われず、レンダリングされません。これはプリフェッチのように機能します。これらのファイルとキャッシュをダウンロードします。残念ながら、本格的なプリレンダーはどこでも機能しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、あなたはこのアイデアを発展させることができます。たとえば、Yandexアプリケーションでは-もちろんCSSを使用せずに-プリレンダーが作成されます。何かを探しているとき、あなたはすぐに結果を得ることができる可能性があります。私たち</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたがどこへ行くかを予測する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ことができ</font></a><font style="vertical-align: inherit;">、事前に私たち自身の方法で必要なすべてのリソースを取得します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は何ですか？</font><font style="vertical-align: inherit;">たくさんのリンクがありました。</font><font style="vertical-align: inherit;">Vanya Akulovからのすべて</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最適化の</font><font style="vertical-align: inherit;">素晴らしい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">コレクション</font></a><font style="vertical-align: inherit;">を見てみることもお勧めします</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イマクロフ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">HTML、JS、アセンブリの両方を最適化する方法をご覧ください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、片付けを忘れないでください。</font><font style="vertical-align: inherit;">さて、私のアドバイスは実際に機能し、それを迅速に行う方法を示唆していますが、おそらく5年後には有害になることもあるでしょう。</font><font style="vertical-align: inherit;">それらと互換性のない何らかの技術があるでしょう。</font><font style="vertical-align: inherit;">これを追跡し、しばらくしてからなど、コードを最適に保つようにしてください。</font><font style="vertical-align: inherit;">ご清聴ありがとうございました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja501988/index.html">VKメッセージ画面はどのようにレンダリングされますか？</a></li>
<li><a href="../ja501990/index.html">便利な投稿：OpenShiftの2日目の問題を解決してオペレーターを作成する4つのイベント</a></li>
<li><a href="../ja501992/index.html">製品リリースを加速して安定させるためにテストを整理する方法。パート1</a></li>
<li><a href="../ja501994/index.html">MySQLのオーケストレーター：フェイルセーフプロジェクトをプロジェクトなしでは構築できない理由</a></li>
<li><a href="../ja501996/index.html">Zen Go（Pocket Version）</a></li>
<li><a href="../ja502000/index.html">12データエンジニアリングオンラインコース</a></li>
<li><a href="../ja502004/index.html">かんばん方式：集合的知識構築プロセスとしてのプロセスの理解-パート1（レシピ）</a></li>
<li><a href="../ja502008/index.html">大衆へのプログラミング</a></li>
<li><a href="../ja502012/index.html">Azure for Everyone：入門コース</a></li>
<li><a href="../ja502014/index.html">雇用主：フリーランサーデーを祝おう</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>