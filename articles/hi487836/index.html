<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯТЦ ЁЯди ЁЯС┤ЁЯП╝ RxJS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд░реНрд╡рд░ рдкрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЗрдВрдЯрд░рдПрдХреНрдЯрд┐рд╡ рдЕрдкрд▓реЛрдб ЁЯОО ЁЯЖШ тЮЧ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="RxJS рдХреА рдореВрд▓ рдмрд╛рддреЛрдВ рдкрд░ рдЕрдкрдирд╛ рдЖрдЦрд┐рд░реА рд▓реЗрдЦ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж рдореБрдЭреЗ рдПрдХ рд▓рдВрдмрд╛ рд╕рдордп рд╣реЛ рдЧрдпрд╛ рд╣реИред рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ, рдореБрдЭреЗ рдФрд░ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдг рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЧрдпрд╛ рдЬреЛ рдЕрднреНрдпрд╛рд╕ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>RxJS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд░реНрд╡рд░ рдкрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдЗрдВрдЯрд░рдПрдХреНрдЯрд┐рд╡ рдЕрдкрд▓реЛрдб</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487836/"><img src="https://habrastorage.org/webt/oo/ei/f7/ooeif7l8-qpd0wfxxriskilepha.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RxJS рдХреА рдореВрд▓ рдмрд╛рддреЛрдВ рдкрд░ рдЕрдкрдирд╛ рдЖрдЦрд┐рд░реА рд▓реЗрдЦ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж рдореБрдЭреЗ рдПрдХ рд▓рдВрдмрд╛ рд╕рдордп рд╣реЛ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ, рдореБрдЭреЗ рдФрд░ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдг рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЧрдпрд╛ рдЬреЛ рдЕрднреНрдпрд╛рд╕ рдореЗрдВ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдереНрдпреЛрд░реА рдХреЛ рдереЛрдбрд╝рд╛ рдкрддрд▓рд╛ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдФрд░ рдЖрдЬ рд╣рдо рдлрд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреА рдмрд╛рдд рдХрд░реЗрдВрдЧреЗред</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдХреНрдпрд╛ рдХрд░реЗрдВ?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ рдкреЗрдЬ рд▓рд┐рдЦреЗрдВрдЧреЗ рдЬрд╣рд╛рдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддрд╛ рд╣реИ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдкреНрд░рдЧрддрд┐ рдкрдЯреНрдЯреА рдЬреЛрдбрд╝реЗрдВ рддрд╛рдХрд┐ рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдкреНрд░рдЧрддрд┐ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рджреНрдж рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ рдбрд╛рдЙрдирд▓реЛрдб рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдЬреЛрдбрд╝реЗрдВ</font></font></li>
</ul><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд▓реЗрдЦ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдмреБрдирд┐рдпрд╛рджреА RxJS рдЬреНрдЮрд╛рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреНрдпрд╛ рд╣реИрдВ </font><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдСрдкрд░реЗрдЯрд░</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рд╕рд╛рде рд╣реА рд╕рд╛рде </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдЪрдУрдУ рдСрдкрд░реЗрдЯрд░ рднреА</font></font></a></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдмрд┐рд▓реНрд▓реА рдХреЛ рдкреВрдВрдЫ рд╕реЗ рдирд╣реАрдВ рдЦреАрдВрдЪреЗрдВрдЧреЗ рдФрд░ рддреБрд░рдВрдд рд╡реНрдпрд╛рдкрд╛рд░ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЙрддрд░реЗрдВрдЧреЗ!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд╢рд┐рдХреНрд╖рдг</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ рдПрдХ рд╕рд░реНрд╡рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдлрд╝рд╛рдЗрд▓ рдбрд╛рдЙрдирд▓реЛрдб рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд╕рдХреЗред </font><font style="vertical-align: inherit;">рдХреЛрдИ рднреА рд╕рд░реНрд╡рд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдореИрдВ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрд░реНрдЯрд┐рдХрд▓ рдХреЗ рд▓рд┐рдП</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдФрд░ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдорд▓реНрдЯрд░</font></a><font style="vertical-align: inherit;"> рдХреЗ рд╕рд╛рде рдиреЛрдб.рдЬреЗрдПрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВрдЧрд╛ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
<span class="hljs-keyword">const</span> multer  = <span class="hljs-built_in">require</span>(<span class="hljs-string">"multer"</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> app = express();
<span class="hljs-keyword">const</span> upload = multer({ <span class="hljs-attr">dest</span>:<span class="hljs-string">"files"</span> });<font></font>
<font></font>
app.post(<span class="hljs-string">"/upload"</span>, upload.single(<span class="hljs-string">"file"</span>), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) </span>{
    <span class="hljs-keyword">const</span> { file } = req;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (file) {<font></font>
        res.send(<span class="hljs-string">"File uploaded successfully"</span>);<font></font>
    } <span class="hljs-keyword">else</span> {<font></font>
        res.error(<span class="hljs-string">"Error"</span>);<font></font>
    }<font></font>
<font></font>
});<font></font>
<font></font>
app.listen(<span class="hljs-number">3000</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рдПрдХ html рдкреЗрдЬ рдмрдирд╛рдПрдВ рдЬрд┐рд╕ рдкрд░ рд╣рдо рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рддрддреНрд╡ рд░рдЦреЗрдВрдЧреЗ:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-meta">&lt;!doctype <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span>
          <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>File uploading<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"file"</span>&gt;</span>load file: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"upload"</span>&gt;</span>Upload<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cancel"</span>&gt;</span>Cancel<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progress-bar"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 0; height: 2rem; background-color: aquamarine;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.js"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рдкреГрд╖реНрда рдкрд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 4 рддрддреНрд╡ рд╣реИрдВ рдЬрд┐рдирдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрд╛рддрдЪреАрдд рдХрд░реЗрдЧрд╛:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯрд╛рдЗрдк рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЗрдирдкреБрдЯ рддрд╛рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХреЗ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрд▓реЛрдб рдмрдЯрди, рдЬрдм рдХреНрд▓рд┐рдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рдо рдЕрдкрд▓реЛрдб рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдВрдЧреЗ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рджреНрдж рдХрд░реЗрдВ рдмрдЯрди рдЬреЛ рдбрд╛рдЙрдирд▓реЛрдб рдХреЛ рд░рджреНрдж рдХрд░ рджреЗрдЧрд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0. рдХреА рд╢реБрд░реБрдЖрддреА рдЪреМрдбрд╝рд╛рдИ рдХреЗ рд╕рд╛рде рдкреНрд░рдЧрддрд┐ рдкрдЯреНрдЯреАред рдЕрдкрд▓реЛрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рджреМрд░рд╛рди, рд╣рдо рдЗрд╕рдХреА рдЪреМрдбрд╝рд╛рдИ рдХреЛ рдмрджрд▓ рджреЗрдВрдЧреЗ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдмреЙрдбреА рдЯреИрдЧ рдХреЗ рдЕрдВрдд рдореЗрдВ, рдореИрдВрдиреЗ index.js рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ рдЬреЛрдбрд╝рд╛, рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рднреА рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   ,     </span>
<span class="hljs-keyword">const</span> input = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#file'</span>);
<span class="hljs-keyword">const</span> uploadBtn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#upload'</span>);
<span class="hljs-keyword">const</span> progressBar = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#progress-bar'</span>);
<span class="hljs-keyword">const</span> cancelBtn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#cancel'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/aw/wo/vjawwosfr54pppzvsavg06mwmty.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдм рдХреБрдЫ рдПрдХ рдкреНрд░рд╡рд╛рд╣ рд╣реИ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдмрддрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХреМрди рд╕реА рдлрд╛рдЗрд▓ рдХреЛ рдЪреБрдирдирд╛ рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ "рдлрд╛рдЗрд▓ рдЪреБрдиреЗрдВ" рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЙрд╕рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЗ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рд╕рдВрд╡рд╛рдж рдмреЙрдХреНрд╕ рдЦреБрд▓ рдЬрд╛рдПрдЧрд╛, рдЬрд╣рд╛рдВ рдлрд╝реЛрд▓реНрдбрд░ рдЯреНрд░реА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдХреИрд╕реЗ рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдиреЗ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рд╣реИ? </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ "рдкрд░рд┐рд╡рд░реНрддрди" рдШрдЯрдирд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдШрдЯрдирд╛ рдХреЗ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо рдЗрдирдкреБрдЯ рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рд╕рд░рдгреА рдореЗрдВ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдБ рдлрд╝рд╛рдЗрд▓ рдбреЗрдЯрд╛ рд▓рд┐рдЦрд╛ рдЬрд╛рдПрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдкрд░рд┐рд╡рд░реНрддрди рдХреА рдШрдЯрдирд╛ рдХреЛ рдХреИрд╕реЗ рд╕реБрдирддреЗ рд╣реИрдВ? </font><font style="vertical-align: inherit;">рдЖрдк addEventListener рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╣рдо RxJS рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рдХрд┐рд╕реА рднреА рдШрдЯрдирд╛ рдХреЛ рдПрдХ рдзрд╛рд░рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="javascript hljs">fromEvent(input, <span class="hljs-string">'change'</span>).pipe(
    <span class="hljs-comment">//    </span>
    map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> input.files[<span class="hljs-number">0</span>])<font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(file)<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди рдЬреЛрдбрд╝реЗрдВ, рдЬреЛ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░реЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЕрднреА рдХреЗ рд▓рд┐рдП, рдЙрд╕рдХреЗ рд╢рд░реАрд░ рдХреЛ рдЦрд╛рд▓реА рдЫреЛрдбрд╝ рджреЗрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span>(<span class="hljs-params">file</span>) </span>{
  <span class="hljs-built_in">console</span>.log(file);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрд▓реЛрдб рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЕрдкрд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП:</font></font><br>
<br>
<pre><code class="javascript hljs">fromEvent(uploadBtn, <span class="hljs-string">'click'</span>).subscribe({
  <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> upload(input.files[<span class="hljs-number">0</span>])<font></font>
});<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдзрд╛рд░рд╛рдУрдВ рдХреЛ рдорд┐рд▓рд╛рдПрдВ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рд╣рдорд╛рд░рд╛ рдХреЛрдб addEventListener рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣рдо рдЬреЛ рд▓рд┐рдЦреЗрдВрдЧреЗ рдЙрд╕рд╕реЗ рдЕрд▓рдЧ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рдВ, рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдо рдЗрд╕реЗ рдРрд╕реЗ рд╣реА рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдЙрди рд▓рд╛рднреЛрдВ рдХреЛ рдЦреЛ рджреЗрдВрдЧреЗ рдЬреЛ рдЖрд░рдПрдХреНрд╕рдЬреЗрдПрд╕ рд╣рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдХреНрдпрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ? </font><font style="vertical-align: inherit;">рд╣рдо рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рдЪрд░рдгреЛрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВрдЧреЗ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╝рд╛рдЗрд▓ рдЪрдпрди</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрд▓реЛрдб рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Input.files рд╕реЗ рдлрд╝рд╛рдЗрд▓ рдирд┐рдХрд╛рд▓реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╛рдЗрд▓ рдЕрдкрд▓реЛрдб</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рд╣рдо рдЗрд╕ рдЕрдиреБрдХреНрд░рдо рдХреЛ рдХреЛрдб рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЗрдирдкреБрдЯ рдФрд░ рдЕрдкрд▓реЛрдб рдХреЛ рдХреИрд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдП? </font><font style="vertical-align: inherit;">рд╕реНрд╡рд┐рдЪрдкрд╛рдЗрдк рдСрдкрд░реЗрдЯрд░ рд╣рдореЗрдВ рдЗрд╕рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛, рдЬреЛ рд╣рдореЗрдВ рдПрдХ рдзрд╛рдЧреЗ рдХреЛ рджреВрд╕рд░реЗ рдкрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="javascript hljs">fromEvent(input, <span class="hljs-string">'change'</span>).pipe(<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fromEvent(uploadBtn, <span class="hljs-string">'click'</span>)),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> input.files[<span class="hljs-number">0</span>])<font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> upload(file)<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдХреЛрдб рдЙрди рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреЗ рд╕рдорд╛рди рд╣реИ рдЬреЛ рд╣рдордиреЗ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рдХрд┐рдП рд╣реИрдВред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░рддрд╛ рд╣реИ, рд╕реНрд╡рд┐рдЪрдкрд╛рдЗрдк рдЯреНрд░рд┐рдЧрд░ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рд╣рдо рдЕрдкрд▓реЛрдбрдмрдЯрди рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрддреЗ рд╣реИрдВред рд▓реЗрдХрд┐рди рддрдм рдХреБрдЫ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реНрд╡рд┐рдЪрдкрд╛рдЗрдВрдЯ рдХреЗрд╡рд▓ рдмрд╛рд╣рд░реА рдореВрд▓реНрдпреЛрдВ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдЕрдкрд▓реЛрдбрдмрдЯрди, 'рдХреНрд▓рд┐рдХ') рд╕реЗ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрддреНрдкрдиреНрди рдореВрд▓реНрдпреЛрдВ рдХреЛ рдмрд╛рд╣рд░реА рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ </font><i><font style="vertical-align: inherit;">рдЕрдкрд▓реЛрдб рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ</font></i><font style="vertical-align: inherit;"> рд▓рд┐рдП, рдЖрдкрдХреЛ рджреВрд╕рд░реЗ рдирд┐рд░реНрджреЗрд╢ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддреН рдЕрдкрд▓реЛрдбрдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред рдлрд┐рд░ рдпрд╣ рдореИрдк рд╡рд┐рдзрд┐ рдХреЛ рдХрд╛рдо рдХрд░реЗрдЧрд╛, рдЬреЛ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рд░рдгреА рд╕реЗ рдирд┐рдХрд╛рд▓реЗрдЧрд╛, рдФрд░ рдЕрдкрд▓реЛрдб рд╡рд┐рдзрд┐ рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рджрд╕реНрдпрддрд╛ рдореЗрдВ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдВ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдХреНрд░рдо рдЯреВрдЯрд╛ рдирд╣реАрдВ рд╣реИред рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП, 'рдкрд░рд┐рд╡рд░реНрддрди' рдШрдЯрдирд╛ рд╕реЗ рдкрд╣рд▓реЗ рдЖрдЧ рд▓рдЧрдиреА рдЪрд╛рд╣рд┐рдПред</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА, рдПрдХ рд╕рдорд╕реНрдпрд╛ рдмрдиреА рд░рд╣реАред </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рдЙрд╕рдХрд╛ рдЪрдпрди рд░рджреНрдж рдХрд░ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдлрд┐рд░ рдЬрдм рд╣рдо рдлрд╝рд╛рдЗрд▓ рдХреЛ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдЕрдкрд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдкрд╛рд╕ рд╣реЛрддреЗ рд╣реИрдВ - рдЕрдкрд░рд┐рднрд╛рд╖рд┐рддред </font><font style="vertical-align: inherit;">рдЗрд╕ рд╕реНрдерд┐рддрд┐ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рдЪреЗрдХ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рд┐рдП:</font></font><br>
<br>
<pre><code class="javascript hljs">fromEvent(input, <span class="hljs-string">'change'</span>).pipe(<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fromEvent(uploadBtn, <span class="hljs-string">'click'</span>)),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> input.files[<span class="hljs-number">0</span>]),<font></font>
    filter(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> !!file)<font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> upload(file)<font></font>
});<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xhr рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╕рдмрд╕реЗ рдХрдард┐рди - рдЕрдирд▓реЛрдбрд┐рдВрдЧ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред </font><font style="vertical-align: inherit;">рдореИрдВ рдЗрд╕реЗ xhr рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдкрд░ рджрд┐рдЦрд╛рдКрдВрдЧрд╛, рдЪреВрдВрдХрд┐ рд▓реЗрдЦрди рдХреЗ рд╕рдордп, рдпрд╣ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрд▓реЛрдб рдкреНрд░рдЧрддрд┐</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛ рдХреИрд╕реЗ рдЯреНрд░реИрдХ рдХрд┐рдпрд╛ рдЬрд╛рдП </font><font style="vertical-align: inherit;">ред</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк рдХрд┐рд╕реА рдЕрдиреНрдп рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрддрд░рд╛рдИ рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП axios рдпрд╛ jQuery.ajaxред</font></font></blockquote><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЪреВрдБрдХрд┐ рдореИрдВ рд╕рд░реНрд╡рд░ рд╕рд╛рдЗрдб рдкрд░ multer рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ, рдореБрдЭреЗ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдлреЙрд░реНрдо рдХреЗ рдЕрдВрджрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ (multer рдХреЗрд╡рд▓ рдЗрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдбреЗрдЯрд╛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ createFormData рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦрд╛ рд╣реИ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFormData</span>(<span class="hljs-params">file</span>) </span>{
    <span class="hljs-keyword">const</span> form = <span class="hljs-keyword">new</span> FormData();
    <span class="hljs-comment">//       file</span>
    form.append(<span class="hljs-string">'file'</span>, file);
    <span class="hljs-keyword">return</span> form;<font></font>
}<font></font>
<font></font>
fromEvent(input, <span class="hljs-string">'change'</span>).pipe(<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fromEvent(uploadBtn, <span class="hljs-string">'click'</span>)),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> input.files[<span class="hljs-number">0</span>]),<font></font>
    filter(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> !!file),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> createFormData(file))<font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> upload(data)<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо XMLHttpRequest рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдлрд╝реЙрд░реНрдо рдХреЛ рдЕрдирд▓реЛрдб рдХрд░реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдЗрд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдФрд░ рдЙрд╕ рдкрд░ рдЕрдирд▓реЛрдб рдФрд░ рдСрдирд░реЛрд░ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдкрд▓реЛрдб рдкреВрд░рд╛ рд╣реЛрдиреЗ рдкрд░ рдкрд╣рд▓рд╛ рдлрд╛рдпрд░ рдХрд░реЗрдЧрд╛, рджреВрд╕рд░рд╛ рдЬрдм рддреНрд░реБрдЯрд┐ рд╣реЛрдЧреАред</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();<font></font>
<font></font>
    <span class="hljs-comment">//        </span>
    xhr.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'success'</span>);<font></font>
<font></font>
    <span class="hljs-comment">//    </span>
    xhr.onerror = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-built_in">console</span>.error(e);<font></font>
<font></font>
    <span class="hljs-comment">//  </span>
    xhr.open(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'/upload'</span>, <span class="hljs-literal">true</span>);<font></font>
<font></font>
    <span class="hljs-comment">//  </span><font></font>
    xhr.send(data);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рд╣реИред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдХреБрдЫ рдиреБрдХрд╕рд╛рди рднреА рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбрд╛рдЙрдирд▓реЛрдб рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдЧрд░ рдЖрдк рдЕрдкрд▓реЛрдбрдмрдЯрди рдмрдЯрди рдкрд░ n рдмрд╛рд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдлрд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП n рд╕рдорд╛рдирд╛рдВрддрд░ рдХрдиреЗрдХреНрд╢рди рд╣реЛрдВрдЧреЗ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЕрдкрд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди рд╕реНрдЯреНрд░реАрдо рд╕реЗ рдмрд╛рд╣рд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╡рд╣ рдЕрдкрдиреА рдорд░реНрдЬреА рд╕реЗ рд░рд╣рддреА рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред </font><font style="vertical-align: inherit;">рдЪрд▓рд┐рдП рд╕рдорд╛рд░реЛрд╣ рдХреЛ рд╣рдо рддрдХ рд╡рд╛рдкрд╕ рдкрд╣реБрдВрдЪрд╛рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рддрдм рд╣рдо рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдЕрдкрд▓реЛрдб рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Observable(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();<font></font>
<font></font>
        <span class="hljs-comment">//    ,      </span>
        <span class="hljs-comment">//   </span>
        xhr.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
            observer.next();<font></font>
            observer.complete();<font></font>
        };<font></font>
        <font></font>
        xhr.onerror = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> observer.error(e);<font></font>
        <font></font>
        xhr.open(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'/upload'</span>, <span class="hljs-literal">true</span>);<font></font>
        xhr.send(data);<font></font>
<font></font>
        <span class="hljs-comment">//   -  </span>
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> xhr.abort();<font></font>
    });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЕрд╡рд▓реЛрдХрди рд╕рдорд╛рд░реЛрд╣ рдХреЗ рдЕрдВрджрд░ рд╡рд╛рдкрд╕ рдЖ рдЧрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рд╡рд┐рдзрд┐ рдХреЛ рд╕рджрд╕реНрдпрддрд╛ рд░рджреНрдж рдХрд░рдиреЗ рдФрд░ рдЕрдкрд▓реЛрдб рдХреЛ рд░рджреНрдж рдХрд░рдиреЗ рдХреЗ рд╕рдордп рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрд▓реЛрдб рдХреЙрд▓ рдХреЛ switchMap рдореЗрдВ рд░рдЦреЗрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs">fromEvent(input, <span class="hljs-string">'change'</span>).pipe(<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fromEvent(uploadBtn, <span class="hljs-string">'click'</span>)),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> input.files[<span class="hljs-number">0</span>]),<font></font>
    filter(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> !!file),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> createFormData(file)),<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> upload(data))<font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'File uploaded'</span>)<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм, рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдкрд▓реЛрдб рдмрдЯрди рдкрд░ рдлрд┐рд░ рд╕реЗ рдХреНрд▓рд┐рдХ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдкрд┐рдЫрд▓рд╛ рдЕрдиреБрд░реЛрдз рд░рджреНрдж рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдПрдХ рдирдпрд╛ рдмрдирд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдХреНрд▓рд┐рдХ рдЕрдиреБрд░реЛрдз рд░рджреНрдж рдХрд░реЗрдВ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрднреА рднреА рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреИрд▓реНрд╕реЗрд▓рдмрдЯрди рдмрдЯрди рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдЕрдиреБрд░реЛрдз рд░рджреНрдж рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рдЯреЗрдХрдСрдирдЯрд┐рд▓ рдСрдкрд░реЗрдЯрд░ рдпрд╣рд╛рдВ рдорджрдж рдХрд░реЗрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
takeUntil рдХрд╛ рдЕрдиреБрд╡рд╛рдж "рдмрд╛рдп рдмрд╛рдп" рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рдСрдкрд░реЗрдЯрд░ рдмрд╛рд╣рд░реА рдзрд╛рд░рд╛ рд╕реЗ рдорд╛рди рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЖрдЧреЗ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рдиреАрдЪреЗ рджреЗрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЬрдм рддрдХ рдЖрдВрддрд░рд┐рдХ рдзрд╛рдЧрд╛ рдореМрдЬреВрдж рд╣реИ рдФрд░ рдХреБрдЫ рдирд╣реАрдВ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЬреИрд╕реЗ рд╣реА рдЖрдВрддрд░рд┐рдХ рдереНрд░реЗрдб рдПрдХ рдорд╛рди рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ, рдЯреЗрдХ рдпреВрдЯрд┐рд▓ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдЧрд╛ рдФрд░ рдмрд╛рд╣рд░реА рдереНрд░реЗрдб рд╕реЗ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░реЗрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдСрдкрд░реЗрдЯрд░ рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдХрд┐рд╕ рд╕реНрдЯреНрд░реАрдо рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рдо рдЕрдкрд▓реЛрдб рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдХреЗрд╡рд▓ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдкрд▓реЛрдб рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдЕрд░реНрдерд╛рддреНред </font><font style="vertical-align: inherit;">рдЖрдВрддрд░рд┐рдХ рдзрд╛рдЧреЗ рд╕реЗ рд╕рджрд╕реНрдпрддрд╛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs">fromEvent(input, <span class="hljs-string">'change'</span>).pipe(<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fromEvent(uploadBtn, <span class="hljs-string">'click'</span>)),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> input.files[<span class="hljs-number">0</span>]),<font></font>
    filter(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> !!file),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> createFormData(file)),<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> upload(data).pipe(
        <span class="hljs-comment">//    upload</span>
        takeUntil(fromEvent(cancelBtn, <span class="hljs-string">'click'</span>))<font></font>
    ))<font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'File uploaded'</span>)<font></font>
});<font></font>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдЧрддрд┐ рдкрдЯреНрдЯреА</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдкреНрд░рдЧрддрд┐ рдкрдЯреНрдЯреА рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИред </font><font style="vertical-align: inherit;">рдкреНрд░рдЧрддрд┐ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ xhr.upload.onprogress рдкрджреНрдзрддрд┐ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдкреНрд░реЛрдЧреНрд░реЗрд╕рд┐рд╡ рдЗрд╡реЗрдВрдЯ рд╣реЛрдиреЗ рдкрд░ рдЗрд╕ рд╡рд┐рдзрд┐ рдХреЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдИрд╡реЗрдВрдЯ рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рдХрдИ рдЧреБрдг рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lengthComputable - рдпрджрд┐ рд╕рд╣реА рд╣реИ, рддреЛ рд╣рдо рдкреВрд░реНрдг рдлрд╝рд╛рдЗрд▓ рдЖрдХрд╛рд░ рдЬрд╛рдирддреЗ рд╣реИрдВ (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдореЗрд╢рд╛ рд╕рдЪ)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрд▓ - рдмрд╛рдЗрдЯреНрд╕ рдХреА рдХреБрд▓ рд╕рдВрдЦреНрдпрд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднрд░реА рд╣реБрдИ - рднреЗрдЬреА рдЧрдИ рдмрд╛рдЗрдЯ рдХреА рд╕рдВрдЦреНрдпрд╛</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрд▓реЛрдб рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░реЗрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Observable(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();<font></font>
<font></font>
        xhr.upload.onprogress = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
            <span class="hljs-comment">//  </span>
            <span class="hljs-keyword">const</span> progress = e.loaded / e.total * <span class="hljs-number">100</span>;<font></font>
            observer.next(progress);<font></font>
        };<font></font>
<font></font>
        xhr.onerror = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> observer.error(e);<font></font>
        xhr.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> observer.complete();<font></font>
<font></font>
        xhr.open(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'/upload'</span>, <span class="hljs-literal">true</span>);<font></font>
        xhr.send(data);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> xhr.abort();<font></font>
    });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рдЕрдкрд▓реЛрдб рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рдЕрдкрд▓реЛрдб рд╕реНрдерд┐рддрд┐ рдХреЛ рд╕реНрдкрд┐рдЯ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рдХреЗрд╡рд▓ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд░рд╣рддрд╛ рд╣реИ рдЬреЛ рдкреНрд░рдЧрддрд┐ рдХреЗ рд╢реИрд▓реА рдЧреБрдгреЛрдВ рдХреЛ рдмрджрд▓ рджреЗрдЧрд╛ред</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProgressBarWidth</span>(<span class="hljs-params">width</span>) </span>{<font></font>
    progressBar.style.width = <span class="hljs-string">`<span class="hljs-subst">${width}</span>%`</span>;<font></font>
}<font></font>
<font></font>
fromEvent(input, <span class="hljs-string">'change'</span>).pipe(
   <span class="hljs-comment">/* ..
   
   */</span><font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">width</span> =&gt;</span> setProgressBarWidth(width)<font></font>
});<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/zq/u5/ji/zqu5jisnsl6bvot5st1n3h9rule.png"><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рддреНрд╡рд░рд┐рдд рдЯрд┐рдк: рддрд╛рдХрд┐ рдЖрдкрдХреА рдлрд╝рд╛рдЗрд▓реЗрдВ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЗрддрдиреА рддреЗрдЬрд╝реА рд╕реЗ рдЕрдкрд▓реЛрдб рди рд╣реЛрдВ, Chrome devtools рдореЗрдВ "рдкреНрд░рджрд░реНрд╢рди" рдЯреИрдм рдореЗрдВ "рдлрд╛рд╕реНрдЯ 3G" рдпрд╛ "рдзреАрдореА 3G" рд╕реЗрдЯрд┐рдВрдЧ рдЪрд╛рд▓реВ рдХрд░реЗрдВред</font></font></blockquote> <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд┐рдорд╛рдЧ рдореЗрдВ рд▓рд╛рдУ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдореЗрдВ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХрд╛ рдЖрд╡реЗрджрди рдорд┐рд▓рд╛ред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕реНрдЯреНрд░реЛрдХ рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдм, рдЬрдм рдЖрдк рдЕрдкрд▓реЛрдб рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдкрд┐рдЫрд▓реЗ рдЕрдкрд▓реЛрдб рдХреЛ рд░рджреНрдж рдХрд░ рджреЗрддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдирдИ рд╢реБрд░реБрдЖрдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рд░рджреНрдж рдмрдЯрди рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдЕрдкрд▓реЛрдбрдмрдЯрди рдмрдЯрди рдмрд╛рдж рдХреЗ рдХреНрд▓рд┐рдХреЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рди рджреЗ рдЬрдм рддрдХ рд╣рдо рдлрд╝рд╛рдЗрд▓ рдЕрдкрд▓реЛрдб рдирд╣реАрдВ рдХрд░рддреЗ (рдпрд╛ рдЬрдм рддрдХ рд╣рдо рдЕрдкрд▓реЛрдб рд░рджреНрдж рдирд╣реАрдВ рдХрд░рддреЗ)ред </font><font style="vertical-align: inherit;">рдХреНрдпрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдкрд▓реЛрдб рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкреВрд░реА рд╣реЛрдиреЗ рддрдХ рдЖрдк рдбрд┐рд╕реЗрдмрд▓ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЛ рд▓рдЯрдХрд╛ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдПрдХ рдФрд░ рд╡рд┐рдХрд▓реНрдк рд╣реИ - рдПрдЧреНрдЬреЙрд╕реНрдЯ рдореИрдк рдСрдкрд░реЗрдЯрд░ред </font><font style="vertical-align: inherit;">рдпрд╣ рдХрдерди рдмрд╛рд╣рд░реА рдзрд╛рдЧреЗ рд╕реЗ рдирдП рдореВрд▓реНрдпреЛрдВ рдХреА рдЕрдирджреЗрдЦреА рдХрд░реЗрдЧрд╛ рдЬрдм рддрдХ рдХрд┐ рдЖрдВрддрд░рд┐рдХ рдзрд╛рдЧрд╛ рдкреВрд░рд╛ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ред </font><font style="vertical-align: inherit;">рдПрдЧреНрдЬреЙрд╕реНрдЯ рд╕реНрд╡рд┐рдЪрдмрд╛рдЙрдЯ рдХреЛ рдердХрд╛рд╡рдЯ рдХреЗ рд╕рд╛рде рдмрджрд▓реЗрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs">exhaustMap(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> upload(data).pipe(<font></font>
  takeUntil(fromEvent(cancelBtn, <span class="hljs-string">'click'</span>))<font></font>
))<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдФрд░ рдЕрдм рд╣рдо рдЕрдкрдиреЗ рдЖрд╡реЗрджрди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдереЛрдбрд╝рд╛ рд░реАрдлреИрдХреНрдЯрд░рд┐рдВрдЧ рдФрд░ рдЕрдВрддрд┐рдо рд╕рдВрд╕реНрдХрд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> { fromEvent, Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">"rxjs"</span>;
<span class="hljs-keyword">import</span> { map, switchMap, filter, takeUntil, exhaustMap } <span class="hljs-keyword">from</span> <span class="hljs-string">"rxjs/operators"</span>;<font></font>
<font></font>
<span class="hljs-keyword">const</span> input = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#file'</span>);
<span class="hljs-keyword">const</span> uploadBtn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#upload'</span>);
<span class="hljs-keyword">const</span> progressBar = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#progress-bar'</span>);
<span class="hljs-keyword">const</span> cancelBtn = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#cancel'</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> fromUploadBtn = fromEvent(uploadBtn, <span class="hljs-string">'click'</span>);
<span class="hljs-keyword">const</span> fromCancelBtn = fromEvent(cancelBtn, <span class="hljs-string">'click'</span>);<font></font>
<font></font>
fromEvent(input, <span class="hljs-string">'change'</span>).pipe(<font></font>
    switchMap(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fromUploadBtn),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> input.files[<span class="hljs-number">0</span>]),<font></font>
    filter(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> !!file),<font></font>
    map(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> createFormData(file)),<font></font>
    exhaustMap(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> upload(data).pipe(<font></font>
        takeUntil(fromCancelBtn)<font></font>
    ))<font></font>
).subscribe({<font></font>
    <span class="hljs-attr">next</span>: <span class="hljs-function"><span class="hljs-params">width</span> =&gt;</span> setProgressBarWidth(width)<font></font>
});<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProgressBarWidth</span>(<span class="hljs-params">width</span>) </span>{<font></font>
    progressBar.style.width = <span class="hljs-string">`<span class="hljs-subst">${width}</span>%`</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createFormData</span>(<span class="hljs-params">file</span>) </span>{
    <span class="hljs-keyword">const</span> form = <span class="hljs-keyword">new</span> FormData();<font></font>
    form.append(<span class="hljs-string">'file'</span>, file);
    <span class="hljs-keyword">return</span> form;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Observable(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();<font></font>
<font></font>
        xhr.upload.onprogress = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
            <span class="hljs-keyword">const</span> progress = e.loaded / e.total * <span class="hljs-number">100</span>;<font></font>
            observer.next(progress);<font></font>
        };<font></font>
<font></font>
        xhr.onerror = <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> observer.error(e);<font></font>
        xhr.onload = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> observer.complete();<font></font>
<font></font>
        xhr.open(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'/upload'</span>, <span class="hljs-literal">true</span>);<font></font>
        xhr.send(data);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> xhr.abort();<font></font>
    });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореИрдВрдиреЗ рдЕрдкрдирд╛ рд╕рдВрд╕реНрдХрд░рдг </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреЛрд╕реНрдЯ рдХрд┐рдпрд╛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╣реИ</font></a><font style="vertical-align: inherit;"> ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдгреАрдп рдФрд░ HttpClient</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрджрд┐ рдЖрдк рдХреЛрдгреАрдп рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рд╕реАрдзреЗ xhr рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдХреЛрдгреАрдп рдХреА рдПрдХ HttpClient рд╕реЗрд╡рд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕реЗрд╡рд╛ рд▓реЛрдбрд┐рдВрдЧ / рдЕрдирд▓реЛрдбрд┐рдВрдЧ рдХреА рдкреНрд░рдЧрддрд┐ рдХреЛ рдЯреНрд░реИрдХ рдХрд░ рд╕рдХрддреА рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдирд┐рдореНрди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкреЛрд╕реНрдЯ рд╡рд┐рдзрд┐ рдореЗрдВ рдкрд╛рд╕ рдХрд░рдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reportProgress: true - рдЕрдкрд▓реЛрдб / рдбрд╛рдЙрдирд▓реЛрдб рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд╡рд▓реЛрдХрди рдХрд░реЗрдВ: "рдШрдЯрдирд╛рдПрдБ" - рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╣рдо рд╕реНрдЯреНрд░реАрдо рд╕реЗ HttpEvents рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣рд╛рдВ рджреЗрдЦреЗрдВ рдХрд┐ рдХреЛрдгреАрдп рдореЗрдВ рдЕрдкрд▓реЛрдб рд╡рд┐рдзрд┐ рдХреНрдпрд╛ рд╣реЛрдЧреА:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UploaderService</span> </span>{
  <span class="hljs-keyword">constructor</span>(private http: HttpClient) { }<font></font>
<font></font>
  public upload(data: FormData): Observable&lt;number&gt; {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.http.post(<span class="hljs-string">'/upload'</span>, data, { <span class="hljs-attr">reportProgress</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">observe</span>: <span class="hljs-string">'events'</span> })<font></font>
      .pipe(<font></font>
        filter(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> event.type === HttpEventType.UploadProgress),<font></font>
        map(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> event <span class="hljs-keyword">as</span> HttpProgressEvent),<font></font>
        map(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> event.loaded / event.total * <span class="hljs-number">100</span>)<font></font>
      );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдлрд╝рд┐рд▓реНрдЯрд░ рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдХреЗрд╡рд▓ рдЕрдкрд▓реЛрдб рдХреА рдЧрдИ рдШрдЯрдирд╛рдУрдВ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдиреНрдп рдШрдЯрдирд╛рдПрдБ рд╣рдореЗрдВ рд░реБрдЪрддреА рдирд╣реАрдВ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛ рд╣рдо рд▓реЛрдб рдФрд░ рдХреБрд▓ рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╡реЗрдВрдЯ рдХреЛ HttpProgressEvent рдореЗрдВ рд▓рд╛рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рдо рдкреНрд░рддрд┐рд╢рдд рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HttpClient xhr рдкрд░ рд╕рд┐рд░реНрдл рдПрдХ рдЖрд╡рд░рдг рд╣реИ рдЬреЛ рд╣рдореЗрдВ рдПрдХ рдмреЙрдпрд▓рд░рдкреНрд▓реЗрдЯ рд╕реЗ рдмрдЪрд╛рддрд╛ рд╣реИ рдФрд░ HTTP рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЛрдгреАрдп рдкрд░ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЖрд╡реЗрджрди </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рд╣реИ</font></a><font style="vertical-align: inherit;"> ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд╖реНрдХрд░реНрд╖</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RxJS рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд╣рд╛рдереЛрдВ рдореЗрдВ рдПрдХ рдмрд╣реБрдд рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЙрдкрдХрд░рдг рд╣реИред </font><font style="vertical-align: inherit;">рдЙрдирдХреЗ рд╢рд╕реНрддреНрд░рд╛рдЧрд╛рд░ рдореЗрдВ рд╕рднреА рдЕрд╡рд╕рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдСрдкрд░реЗрдЯрд░реЛрдВ рдХрд╛ рдПрдХ рдмрдбрд╝рд╛ рд╕рдореВрд╣ рд╣реИред </font><font style="vertical-align: inherit;">рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ, рдЗрд╕ рддрдХрдиреАрдХ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рдиреЗ рдХреА рджрд╣рд▓реАрдЬ рдХрд╛рдлреА рдЕрдзрд┐рдХ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдЕрдХреНрд╕рд░, рд▓реЛрдЧ рдЕрдирдЬрд╛рдиреЗ рдореЗрдВ рдЕрдкрдиреА "рдмрд╛рдЗрдХ" рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдХреЛрдб рдХреЛ рдмрдирд╛рдП рд░рдЦрдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рд▓рд┐рдП, рдореИрдВ рдЪрд╛рд╣реВрдВрдЧрд╛ рдХрд┐ рд╕рднреА рдкрд╛рдардХ рдЕрднреА рднреА рдЦрдбрд╝реЗ рди рд╣реЛрдВ рдФрд░ рдкреНрд░рдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рди рдбрд░реЗрдВред </font><font style="vertical-align: inherit;">RxJS рд╕реАрдЦреЗрдВред </font><font style="vertical-align: inherit;">рдЕрдЪрд╛рдирдХ, рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдСрдкрд░реЗрдЯрд░ рдЖрддрд╛ рд╣реИ рдЬреЛ рдХреЛрдб рдХреА 10 рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдПрдХ рдореЗрдВ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╛ рдпрд╣ рдХреЛрдб рдХреЛ рдереЛрдбрд╝рд╛ рд╕реНрдкрд╖реНрдЯ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕реМрднрд╛рдЧреНрдп</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi487822/index.html">AvitoTech рдСрди рдЯреВрд░: рдирд┐рдЬрд╝рдиреА рдиреЛрд╡рдЧреЛрд░реЛрдб рдореЗрдВ рдПрдВрдбреНрд░реЙрдЗрдб рдореАрдЯрдЕрдк</a></li>
<li><a href="../hi487824/index.html">рдпреВрд░реЛрдк рд╕реЗ рдПрд▓рдИрдбреА рд▓реИрдВрдк рд╕реНрдкреЗрдХреНрдЯреНрд░рдо рдПрд▓рдИрдбреА GU10 рдХрд╛ рдЕрд╡рд▓реЛрдХрди</a></li>
<li><a href="../hi487826/index.html">рдкреЛрд▓реИрдВрдб рд╕реНрдкреЗрдХреНрдЯреНрд░рдо рдПрд▓рдИрдбреА рдИ 14 рд╕реЗ рдПрд▓рдИрдбреА рд▓реИрдВрдк рдХрд╛ рдЕрд╡рд▓реЛрдХрди</a></li>
<li><a href="../hi487832/index.html">рд╕реА ++ рдФрд░ рд╡реБрд▓рдХрди рдореЗрдВ рдПрдХ рд╕рдкреНрддрд╛рд╣ рдореЗрдВ рдиреНрдпреВрдирддрдо рдирд┐рд░реНрдорд╛рдг</a></li>
<li><a href="../hi487834/index.html">рд╕реБрд░рдХреНрд╖рд╛ рд╕рдкреНрддрд╛рд╣ 07: рдПрдВрдбреНрд░реЙрдЗрдб рдмреНрд▓реВрдЯреВрде рд╕реНрдЯреИрдХ рд╡рд▓реНрдирд░реЗрдмрд┐рд▓рд┐рдЯреА</a></li>
<li><a href="../hi487838/index.html">рдбреЗрдЯрд╛ рд╕рддреНрдпрд╛рдкрди: рдПрдХ рдЕрд▓рдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдг</a></li>
<li><a href="../hi487842/index.html">рдПрдХ рджреЗрд╢ рд░рд╛рдЙрдЯрд░ рдХреЗ рд▓рд┐рдП 2 рд╕рд┐рдо - рдХреНрдпрд╛ рдпрд╣ рдмрд╣реБрдд рдХреБрдЫ рд╣реИ рдпрд╛ рдереЛрдбрд╝рд╛ рд╣реИ?</a></li>
<li><a href="../hi487844/index.html">рдЧрдВрдз рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ</a></li>
<li><a href="../hi487846/index.html">рдж рдПрдореНрдмрд░ рдЯрд╛рдЗрдореНрд╕ - рдЕрдВрдХ 133</a></li>
<li><a href="../hi487850/index.html">рдиреЗрдЯрд╡рд░реНрдХ рд╡рд┐рд╕рдВрдЧрддрд┐ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдЙрдкрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЗрд╕ рд╕реНрдЯрдбреА: DNSpionage рдЕрднрд┐рдпрд╛рди рдбрд┐рд╕реНрдХрд╡рд░реА</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>