<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👏🏻 🤷🏽 🐀 Informationen zu veränderlichen Methoden eines Math-Objekts in JavaScript ☝️ 🏨 🔗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute veröffentlichen wir eine Übersetzung eines Artikels über mathematische Berechnungen in JavaScript, einer schriftlichen Version der Präsentation ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Informationen zu veränderlichen Methoden eines Math-Objekts in JavaScript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/489826/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heute veröffentlichen wir eine Übersetzung eines Artikels über mathematische Berechnungen in JavaScript, einer schriftlichen Version der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Präsentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des Autors auf </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">WaffleJS</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Und diese Aussage selbst war eine Fortsetzung </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieses</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Gesprächs auf Twitter.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c50/bea/705/c50bea705dc18becfec75951a06de4df.jpg"></div></a><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mathematikunterricht</font></font></font></i><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interesse an Mathe</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles begann mit meiner mathematischen Ausbildung, deren Erhalt ich etwas verzögerte. Als ich Informatik studierte, konnte ich mit erstklassigen Mathematiklehrern kommunizieren, aber ich habe diese Gelegenheit verpasst. Ich mochte Mathe nicht: Die untersuchten Themen waren sehr weit von der Praxis entfernt. Außerdem war ich durch ein tief theoretisches Programm der Computerausbildung bereits aus dem Gleichgewicht geraten. Ich glaubte dann, dass sie vom Leben geschieden war, und zum größten Teil denke ich das auch weiterhin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber jetzt, ein paar Jahre nach Abschluss meines Studiums, erwachte in mir ein Durst nach Mathematik. Ich war inspiriert, welchen Einfluss selbst eine kleine Anwendung mathematischer Kenntnisse auf meine Arbeit und mein Hobby haben kann. Aber ich hatte keinen klaren Studienplan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2012 fand ich dann einen Weg, Mathematik zu studieren, indem ich mit der Arbeit am </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simple Statistics-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Projekt begann </font><font style="vertical-align: inherit;">. Seitdem habe ich dieses Projekt erweitert und unterstützt. Jetzt enthält es Implementierungen vieler Algorithmen, und es stellte sich heraus, dass es sich um eine der „ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sternenklaren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> “ mathematischen JavaScript-Bibliotheken handelt. Und anscheinend nutzen die Leute diese Bibliothek wirklich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber ich habe 2012 angefangen zu arbeiten. Wenn wir darüber sprechen, wie sich die Technologie in dieser Zeit verändert hat, dann ist es sehr, sehr lange her. Seitdem wurden 8 LTS-Versionen von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> veröffentlicht </font><font style="vertical-align: inherit;">. Seitdem haben sich JavaSript selbst und die Umgebungen, in denen in dieser Sprache geschriebene Programme funktionieren, stark verändert. Im Jahr 2012 existierte die React-Bibliothek noch nicht, dann wurde das erste Commit für das Babel-Projekt noch nicht vorgenommen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d8/832/415/5d8832415ee3bf56c1f3a18e294f39fb.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Lauf der Zeit</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Im Laufe der Jahre bemerkte ich, dass meine Tests beim Aktualisieren von Node.js abstürzten. </font><font style="vertical-align: inherit;">Zum Beispiel könnte ich so etwas wie diesen Test haben:</font></font><br>
<br>
<pre><code class="javascript hljs">t.equal(ss.gamma(<span class="hljs-number">11.54</span>), <span class="hljs-number">13098426.039156161</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Test funktioniert in Node.js v10 einwandfrei, bricht jedoch in Node.js v12 ab. </font><font style="vertical-align: inherit;">Und hier ist es nicht einig super-kompliziert Methode , </font><font style="vertical-align: inherit;">die getestet wird: die Funktion </font></font><code>gamma</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementiert Standard - </font><font style="vertical-align: inherit;">JavaScript - </font><font style="vertical-align: inherit;">Funktionen mit - </font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.sqrt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arithmetik</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich weiß, woran Sie hier denken können: Rechnen. </font><font style="vertical-align: inherit;">Auf Twitter kommt es aufgrund der Ergebnisse der Berechnung des folgenden Ausdrucks regelmäßig zu heftigen Diskussionen:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span> = <span class="hljs-number">0.30000000000000004</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber wie ich bereits </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schrieb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , verhalten sich alle gängigen Programmiersprachen so, auch altmodische und pedantische wie Haskell. </font><font style="vertical-align: inherit;">Gleitkomma-Arithmetik mag seltsam aussehen, aber sie verhalten sich gleich, ihr Verhalten ist gut dokumentiert. </font><font style="vertical-align: inherit;">Wir sprechen nämlich über den </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEEE 754-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Standard </font><font style="vertical-align: inherit;">, dessen Anforderungen streng in Programmiersprachen implementiert sind. </font><font style="vertical-align: inherit;">Das Problem liegt also nicht in der Arithmetik: Bei der Implementierung von Addition, Subtraktion, Division und Multiplikation in Sprachen kann die Programmierung als „in Stein gemeißelt“ bezeichnet werden.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mathematisches Objekt</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mein Problem war im Standard-JavaScript-Objekt </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Insbesondere bei allen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methoden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dieses Objekts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Techniken wie </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.cos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.exp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Math.tan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- sind die Grundzutaten für </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geometrische</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und andere Berechnungen. </font><font style="vertical-align: inherit;">Als ich das verstand, begann ich, die Änderungen im Verhalten der grundlegenden Methoden des Objekts </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in verschiedenen Versionen von Node.js </font><font style="vertical-align: inherit;">separat zu untersuchen. </font><font style="vertical-align: inherit;">Hier sind einige Beispiele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berechnung </font></font><code>Math.tanh(0.1)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 4</span>
<span class="hljs-number">0.09966799462495590234</span>
<span class="hljs-comment">// Node 6</span>
<span class="hljs-number">0.09966799462495581907</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berechnung </font></font><code>Math.pow(1/3, 3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// Node 10</span>
<span class="hljs-number">0.03703703703703703498</span>
<span class="hljs-comment">// Node 12</span>
<span class="hljs-number">0.03703703703703702804</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schlimmer noch, dieses Problem tritt nicht nur in Node.js auf. </font><font style="vertical-align: inherit;">Das gleiche passiert in Browsern und in anderen Umgebungen, die JavaScript unterstützen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies führt uns zu folgender Frage: Was ist mathematische Berechnung?</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a45/45e/f7c/a4545ef7cf6e282546aee3ea506d762f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafische Darstellung von Berechnungen</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Trigonometrische Methoden sind leicht zu visualisieren. Wenn Sie einen einzelnen Kreis und mehrere Monate Highschool zur Verfügung haben, wissen Sie, dass Kosinus und Sinus die Koordinaten eines bestimmten Punktes am Rand des Kreises sind und dass die Graphen der Funktionen sin und cos wie Wellen aussehen. Tatsächlich lernen sie in der High School, wie man diese Werte erhält, aber die dafür verwendete Methode - die</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Taylor-Reihe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - beruht auf einer unendlichen Reihe, und es ist für einen Computer nicht einfach, solche Probleme zu lösen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Folgendes können Sie von</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"> Wikipedia</font></a><font style="vertical-align: inherit;"> lernen:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum Sinusberechnungsalgorithmus: „Es gibt keinen Standardalgorithmus zur Berechnung des Sinus. IEEE 754-2008, der am weitesten verbreitete Standard für Gleitkommaberechnungen, hat keinen Einfluss auf die Berechnung trigonometrischer Funktionen wie eines Sinus. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Computer verwenden viele verschiedene Näherungen und Algorithmen, um Berechnungen durchzuführen, wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CORDIC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alle möglichen kniffligen Tricks und Nachschlagetabellen. All diese Heterogenität erklärt das Vorhandensein vieler </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fastmath-Bibliotheken</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auf GitHub </font><font style="vertical-align: inherit;">. Tatsache ist, dass es viele Möglichkeiten gibt, die Methode zu implementieren </font></font><code>Math.sin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Und andere Funktionen auch. Wie Sie wissen, hat die Quake III Arena beispielsweise eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">schnellere verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ersetzen der Standardmethode zur Berechnung der inversen Quadratwurzel, um das Rendern zu beschleunigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mathematische Berechnungen sind daher das Ergebnis der Implementierung bestimmter Algorithmen. In der Praxis werden viele gängige Algorithmen und deren Varianten verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die JavaScript-Spezifikation gibt, anstatt anzugeben, welcher bestimmte Algorithmus in Sprachimplementierungen verwendet werden soll, Implementierungen viel Handlungsspielraum in Bezug auf Funktionen, die in mathematischen Berechnungen verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies sagt der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dazu </font><font style="vertical-align: inherit;">(ECMA-262, Ausgabe 10, Abschnitt 20.2.2):</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Das Verhalten der Funktionen acos, acosh, asin, asinh, atan, atanh, atan2, cbrt, cos, cosh, exp, expm1, hypot, log, log1p, log2, log10, pow, zufällig, sin, sinh, sqrt, tan und tanh es wird hier nicht vollständig beschrieben, mit Ausnahme der Anforderungen für die Rückgabe bestimmter Ergebnisse für bestimmte Werte der Argumente, die bemerkenswerte Grenzfälle sind. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich weiß nicht, wie die internen Aktivitäten der für den ECMA-262-Standard zuständigen Mitglieder des Ausschusses funktionieren, aber ich glaube, dass sie den Standard so festgelegt haben, dass es keine Kompatibilitätskrise in JavaScript gibt, wenn Intel oder AMD neue ultraschnelle mathematische Anweisungen herausgeben in ihren frischen Prozessoren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aufgrund der Tatsache, dass es viele weit verbreitete JavaScript-Interpreter gibt, aufgrund der Tatsache, dass JavaScript häufig in Browsern verwendet wird, und zwischen Browsern gibt es immer noch so etwas wie Konkurrenz, und aufgrund der Tatsache, dass selbst beliebte JavaScript-Implementierungen unter ständigem Druck stehen und gezwungen, sich schnell zu entwickeln und die beste Leistung zu liefern ... aufgrund all dessen haben wir das, was wir haben. </font><font style="vertical-align: inherit;">Jeder, der JavaScript verwendet, wird regelmäßig feststellen, dass in verschiedenen Implementierungen die Ergebnisse mathematischer Berechnungen, die mit Hilfe des Objekts durchgeführt </font></font><code>Math</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">werden, unterschiedlich sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist in anderen interpretierten Sprachen nicht so wichtig, da sie normalerweise einige „kanonische“ Implementierungen haben. </font><font style="vertical-align: inherit;">Dies gilt beispielsweise für den Python-Interpreter.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wo werden die Berechnungen durchgeführt?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns nun genauer an, wo die Berechnungen durchgeführt werden. </font><font style="vertical-align: inherit;">Bei JavaScript gibt es drei Bereiche, in denen grundlegende mathematische Berechnungen durchgeführt werden:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZENTRALPROZESSOR.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sprachinterpreter (C ++ - und C-Code einer bestimmten JavaScript-Implementierung).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript-Code, zum Beispiel Code für spezialisierte Bibliotheken.</font></font></li>
</ol><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍1. </font><font style="vertical-align: inherit;">Zentralprozessor</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste Idee, die mir einfiel, als ich über die Orte nachdachte, an denen die Berechnungen durchgeführt wurden, war, dass die Berechnungen im Prozessor durchgeführt werden. Ich schlug vor, dass Prozessoren, da sie arithmetische Berechnungen implementieren, auch einige komplexere Berechnungen implementieren können. Es stellte sich heraus, dass die Prozessoren Anweisungen zum Ausführen trigonometrischer und anderer Berechnungen haben, diese Anweisungen werden jedoch selten verwendet. Beispielsweise war die Implementierung der Sinusberechnung in Prozessoren mit x86-Architektur nicht sehr beliebt, da sich herausstellt, dass diese Implementierung nicht unbedingt schneller ist als Softwareimplementierungen (solche, die Prozessorarithmetikoperationen verwenden). Darüber hinaus ist es nicht unbedingt genauer als Software-Implementierungen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intel schämte sich auch wegen der sehr starken</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Überschätzung der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Genauigkeit trigonometrischer Operationen in der Dokumentation. </font><font style="vertical-align: inherit;">Solche Fehler sind besonders tragisch, da ein Mikrochip im Gegensatz zu einem Programm nicht gepatcht werden kann.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍2. </font><font style="vertical-align: inherit;">Sprachdolmetscher</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So funktionieren die Computersubsysteme in den meisten JavaScript-Implementierungen. </font><font style="vertical-align: inherit;">Sie implementieren diese Subsysteme auf verschiedene Arten.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die V8- und SpiderMonkey-Engines verwenden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fdlibm-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliotheksports für Berechnungen </font><font style="vertical-align: inherit;">, die sich geringfügig unterscheiden. </font><font style="vertical-align: inherit;">Diese ursprünglich bei Sun Microsystems geschriebene Bibliothek wurde von Generation zu Generation weitergegeben.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScriptCore (Safari) verwendet die cmath-Bibliothek, um die meisten Vorgänge auszuführen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Internet Explorer verwendet sowohl cmath als auch einige in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assembler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geschriebene Codeblöcke </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Hier wurden sogar trigonometrische Methoden von Prozessoren verwendet - für den Fall, dass der Browser für Prozessoren kompiliert wurde, die ähnliche Anweisungen hatten.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus historischen Gründen haben sich die Tools zur Durchführung von Berechnungen in verschiedenen JS-Engines geändert. </font><font style="vertical-align: inherit;">Daher verwendete V8 eine eigene Lösung für Berechnungen, dann wurde der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript-Port</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fdlibm und erst dann die C-Version von fdlibm verwendet.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Warum ist das ein Problem?</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Punkt hier ist, dass all dies die Fähigkeit von JavaScript verringert, einheitliche Ergebnisse bei der Lösung von Problemen mit mathematischen Berechnungen zu erzielen. </font><font style="vertical-align: inherit;">Dies ist besonders schwierig für Data Science. </font><font style="vertical-align: inherit;">Ich möchte, dass JavaScript besser für Data Science-Berechnungen in einem Browser geeignet ist. </font><font style="vertical-align: inherit;">Darüber hinaus bedeutet die Unfähigkeit, einheitliche Ergebnisse zu erzielen, die Verschärfung </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Reproduzierbarkeitskrise</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , die für alle Wissenschaften charakteristisch ist. </font><font style="vertical-align: inherit;">Dies ist nicht zu erwähnen, dass einige andere JavaScript-Probleme auftreten, z. B. Funktionen zum Eingeben von Zahlen und das Fehlen einer weit verbreiteten Bibliothek für die Arbeit mit Datenrahmen.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍3. </font><font style="vertical-align: inherit;">Spezialbibliotheken verwenden</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt eine zuverlässige Möglichkeit für uns, die Berechnungen in JavaScript durchzuführen. Es besteht in der Verwendung spezialisierter Bibliotheken. Daher </font><font style="vertical-align: inherit;">implementiert </font><font style="vertical-align: inherit;">die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stdlib-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek </font><font style="vertical-align: inherit;">Berechnungen auf hoher Ebene, bei denen nur arithmetische Operationen verwendet werden. Arithmetische Berechnungen sind in den Spezifikationen vollständig beschrieben, sie sind Standard, sodass die von stdlib zurückgegebenen Ergebnisse unabhängig von der Plattform, auf der der Code ausgeführt wird, völlig einheitliche Ergebnisse liefern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies wird auf Kosten der Komplexität und Geschwindigkeit der Entscheidungen erreicht. Die stdlib-Methoden sind nicht so schnell wie die integrierten Methoden. Um "nur den Sinus zu zählen", müssen Sie außerdem eine ganze Bibliothek mit dem Projekt verbinden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie jedoch breiter denken, ist dies völlig normal. Die WebAssembly-Plattform bietet dem Programmierer beispielsweise keine Möglichkeit, mathematische Berechnungen auf hoher Ebene durchzuführen. In der Dokumentation dazu wird empfohlen, dass Sie Implementierungen der entsprechenden Mechanismen unabhängig in Ihre eigenen Module aufnehmen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
„WebAssembly enthält keine eigenen Implementierungen mathematischer Funktionen - wie sin, cos, exp, pow usw. Die Strategie von WebAssembly für solche Funktionen besteht darin, Entwicklern die Implementierung als Bibliothekstools in der WebAssembly-Plattform selbst zu ermöglichen (beachten Sie, dass die sin- und cos-Anweisungen der x86-Plattform langsam und ungenau sind und heutzutage jedenfalls versuche es nicht zu benutzen). ”</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So haben kompilierte Sprachen immer funktioniert: Beim Kompilieren eines in C geschriebenen Programms werden importierte Methoden </font></font><code>math.h</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in das kompilierte Programm aufgenommen.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Epsilon-Wert verwenden</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn jemand die stdlib-Bibliothek nicht in sein JavaScript-Projekt aufnehmen möchte, um Berechnungen durchzuführen, sondern den Code testen muss, der einige komplexe Berechnungen ausführt, sollte er wahrscheinlich auf die Methode zurückgreifen, die bereits in der Bibliothek für einfache Statistiken verwendet wird. Es geht darum, einen Wert zu verwenden </font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, der die Grenzen definiert, innerhalb derer die Unterschiede in den Zahlen nicht berücksichtigt werden. Wenn wir die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optionen für die</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwendung des Epsilon-Symbols in der Mathematik betrachten, können wir sagen, dass ich es als „willkürlichen kleinen positiven Wert“ spreche. Simple-Statistics </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> den Epsilon-Wert gleich </font></font><code>0.0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie herausfinden müssen, ob zwei Zahlen gleich sind, wird eine Bedingung des Formulars überprüft</font></font><code>Math.abs(result — expected) &lt; epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn sich herausstellt, dass diese Bedingung erfüllt ist, können wir sagen, dass die Differenz zwischen den Zahlen in den angegebenen Bereich fällt, und sie als gleich betrachten.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergänzungen</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍ Genauigkeit</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommentatoren auf Twitter gaben an, dass die Abweichungen in den im Beispiel erhaltenen Ergebnissen außerhalb des Bereichs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">signifikanter Ziffern</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> der Gleitkommazahl liegen. </font><font style="vertical-align: inherit;">Aus technischer Sicht ist dies korrekt, und dies bedeutet, dass Sie einen genaueren Weg finden können, um Zahlen zu vergleichen, als den, der den Wert verwendet </font></font><code>epsilon</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In der Praxis jedoch die gleiche Geschichte - die Zahlen am Ende der Zahl wirken sich auf das Ergebnis aus und führen zu Ungenauigkeiten im Endergebnis. </font><font style="vertical-align: inherit;">Darüber hinaus sind die hier angegebenen Beispiele nicht erschöpfend. </font><font style="vertical-align: inherit;">Tatsache ist, dass die Implementierungsfunktionen von JavaScript-Interpreten, ohne von der Spezifikation abzuweichen, dazu führen können, dass bei den meisten numerischen Ergebnissen Unterschiede auftreten.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍JavaScript</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich möchte JavaScript nicht kritisieren. </font><font style="vertical-align: inherit;">Ich glaube, dass JavaScript einen berechtigten Kompromiss eingegangen ist, unter Berücksichtigung der Unsicherheit der Zukunft und der Anzahl der Plattformen, auf denen Sprachimplementierungen erstellt werden. </font><font style="vertical-align: inherit;">Ich muss sagen, es ist sehr schwierig, JavaScript und andere Sprachen direkt zu vergleichen. </font><font style="vertical-align: inherit;">Der Punkt ist das JavaScript-Ökosystem. </font><font style="vertical-align: inherit;">Die Tatsache, dass es gleichzeitig viele Dolmetscher derselben Sprache gibt, ist für andere Sprachen völlig untypisch. </font><font style="vertical-align: inherit;">Dies ist außerdem eine der Hauptstärken von JavaScript. </font><font style="vertical-align: inherit;">Darüber hinaus kann man nicht übersehen, dass dies Phänomene eines völlig anderen Plans sind als diejenigen, die in der Sprache selbst auftreten. </font><font style="vertical-align: inherit;">Und JavaScript ändert sich im Laufe der Zeit und es erscheinen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">viele gute Dinge</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> darin </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍Stdlib oder Epsilon?</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich glaube, dass es sich in der Praxis in den meisten Fällen lohnt, den Ansatz zu verwenden, der die Verwendung des Epsilon-Werts impliziert. </font><font style="vertical-align: inherit;">Die stdlib-Bibliothek ist ein wunderbar leistungsfähiges Werkzeug, aber der Preis für die Aufnahme einer zusätzlichen Bibliothek für mathematische Berechnungen in das Projekt kann recht hoch sein. </font><font style="vertical-align: inherit;">In den meisten Fällen spielen kleine Abweichungen in den Berechnungsergebnissen für Anwendungen keine Rolle.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier möchte ich aus dem Vorstehenden Schlussfolgerungen ziehen und einige Gedanken teilen.</font></font><br>
<br>
<ol>
<li>,     ,   ,    .         .     —    « ». ,   ,   ,   <code>Math.sin</code>   ,   ,      ,      .      ,   ,      ,   ,   ,   .    ,       ,   ,       .</li>
<li>      . ,   ,       Node.js,         ,    ,     simply-statistics.    ,    , ,     ,      .  —    .</li>
<li>  ,    .    V8,      ,   .    ,    .    , ,         ,     .</li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebe Leser! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haben Sie beim Upgrade auf neue Versionen von Node.js Probleme mit Änderungen der Berechnungsergebnisse festgestellt?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489812/index.html">Konfigurieren Sie LDAP in Oracle BI</a></li>
<li><a href="../de489818/index.html">JavaScript und mehr: 4 kreative Ansätze zur Zeitmessung in Browsern</a></li>
<li><a href="../de489820/index.html">Styling des guten alten Button-Elements</a></li>
<li><a href="../de489822/index.html">Generieren von Pseudozufallszahlen mit einem zellularen Automaten: Regel 30</a></li>
<li><a href="../de489824/index.html">7 wissenswerte Open Source-Tools zur Überwachung der Cloud-Sicherheit</a></li>
<li><a href="../de489828/index.html">Arbeiten mit GeoJSON in Node.js: eine praktische Einführung</a></li>
<li><a href="../de489832/index.html">Künstliche Atomkügelchen: Manipulationen mit Makrocyclen</a></li>
<li><a href="../de489834/index.html">Betten Sie Ihr Smart Home-Gerät in das SmartThings-Ökosystem ein</a></li>
<li><a href="../de489836/index.html">Lidare der Zukunft: 11.000 Laser statt 128</a></li>
<li><a href="../de489838/index.html">Nuxt Server-Side Memory Leak mit SSR (Server Side Rendering)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>