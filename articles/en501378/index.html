<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçô üë† üññüèæ Navigating between views using @EnvironmentObject in SwiftUI üêµ üéóÔ∏è üë®üèº‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The translation of the article was prepared on the eve of the launch of the advanced course "iOS Developer" .
 
 
 
 Hello and welcome to our tutorial...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Navigating between views using @EnvironmentObject in SwiftUI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/501378/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The translation of the article was prepared on the eve of the launch of the advanced course </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"iOS Developer"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/dy/nh/af/dynhaf1v_qvyw2xcskvtvn3aesa.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hello and welcome to our tutorial! </font><font style="vertical-align: inherit;">In this series, we talk about how to navigate between views in SwiftUI (without using a navigation view!). </font><font style="vertical-align: inherit;">Although this idea may seem trivial, but after understanding it a little deeper, we can learn a lot about the data flow concepts used in SwiftUI. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the previous part,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we learned how to implement this using </font></font><code>@ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In this part, we will look at how to do the same, but more efficiently using @EnvironmentObject. </font><font style="vertical-align: inherit;">We are also going to add a little transition animation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here's what we're going to achieve:</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Your browser does not support HTML5 video.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatinP2Preview.mp4" type="video/mp4"></video></div></div></div><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What we have</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, we just figured out</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> how to navigate between different views using ObservableObject. </font><font style="vertical-align: inherit;">In a nutshell, we created a ViewRouter and associated it with Mother View and our Content View. </font><font style="vertical-align: inherit;">Next, we simply manipulate the CurrentPage ViewRouter property by clicking on the Content View buttons. </font><font style="vertical-align: inherit;">After that, MotherView is updated to display the corresponding Content View! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But there is a second, more efficient way to achieve this functionality: use </font></font><code>@EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hint: You can download the latest developments here (this is the ‚ÄúNavigateInSwiftUIComplete‚Äù folder)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why use </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is not the best solution</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You are probably wondering: why should we implement this in any other way, when we already have a working solution? Well, if you look at the logic of the hierarchy of our application, then it will become clear to you. Our MotherView is the root view that initializes the ViewRouter instance. In MotherView, we also initialize ContentViewA and ContentViewB, passing them the ViewRouter instance as a BindableObject.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, we must follow a strict hierarchy that passes an initialized ObservableObject downstream to all subviews. Now this is not so important, but imagine a more complex application with a lot of views. We always need to keep track of the transmission of the initialized Observable root view to all subviews and all subviews of subviews, etc., which in the end can be a rather tedious task. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ij/ps/on/ijpson_0gvwhatcpzyosh2eacaq.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To summarize: using clean </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be problematic when it comes to more complex application hierarchies.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instead, we could initialize the ViewRouter when the application starts so that all views can be directly connected to this instance, or, rather, watch it, regardless of the hierarchy of the application. </font><font style="vertical-align: inherit;">In this case, the ViewRouter instance will look like a cloud that flies over the code of our application, to which all views automatically access without worrying about the correct initialization chain down the view hierarchy. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is just the job </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font></h3><br>
<code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is a data model that, after initialization, can exchange data with all representations of your application. What is especially good is what is </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">created by providing </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, so we can use ours </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to create </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As soon as we declared ours </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, all views can be attached to it as well as to normal ones </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but without the need for a chain of initializations down the application hierarchy! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As already mentioned, it </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">should already be initialized the first time it is accessed. Since ours </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, as the root view, will look at the property </font></font><code>CurrentPage</code> <code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we must initialize it </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when the application starts. Then we can automatically change currentPage</font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which then calls </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for re-rendering.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ew/fr/9l/ewfr9lhz0xqhodfe5obumjykzoe.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementation </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as</font></font><code>EnvironmentObject</code></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, let's update the code of our application! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First, change the wrapper of the property </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inside </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font></font><code>@ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font></font><code>@EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView</span> : <span class="hljs-title">View</span> </span>{<font></font>
@<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span>
<span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
<span class="hljs-comment">//...</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The property is </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">now looking </font></font><code>ViewRouter-EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Thus, we need to provide our structure </font></font><code>MotherView_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the appropriate instance:</font></font><br>
<br>
<pre><code class="swift hljs">#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">MotherView</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As mentioned above - when starting our application, it should be immediately provided with an instance </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in quality </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, since it </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">now refers to as the root representation </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Therefore, update the scene function inside the file </font></font><code>SceneDelegage.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as follows:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(<span class="hljs-number">_</span> scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions)</span></span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene = scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span> {
            <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: windowScene)<font></font>
            window.rootViewController = <span class="hljs-type">UIHostingController</span>(rootView: <span class="hljs-type">MotherView</span>().environmentObject(<span class="hljs-type">ViewRouter</span>()))
            <span class="hljs-keyword">self</span>.window = window<font></font>
            window.makeKeyAndVisible()<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Great, now when you start the application, SwiftUI creates an instance </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in quality </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, to which all views of our application can now be attached. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, let's update ours </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Change its </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">property to </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and also update the structure </font></font><code>ContentViewA_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewA</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
       <span class="hljs-comment">//...</span><font></font>
    }<font></font>
}<font></font>
#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewA_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ContentViewA</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hint: Again, the structure </font></font><code>ContentViewsA_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">has its own instance </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is associated with the instance created when the application was launched! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's repeat this for </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewB</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-comment">//...</span><font></font>
    }<font></font>
}<font></font>
#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewB_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ContentViewB</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">our </font><font style="vertical-align: inherit;">properties are </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">now directly related to / observe the initial instance </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we no longer need to initialize them in ours </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">So, let's update our </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> { 
        <span class="hljs-type">VStack</span> {
            <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page1"</span> {
                <span class="hljs-type">ContentViewA</span>()<font></font>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page2"</span> {
                <span class="hljs-type">ContentViewB</span>()<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is just great: we no longer need to initialize </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inside ours </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and pass its instance down to the ContentView, which can be very efficient, especially for more complex hierarchies. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Great, let's run our application and see how it works.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Your browser does not support HTML5 video.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatingP2BeforeAnimation.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Great, we can still move between our views!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adding transition animations</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a bonus, let's look at how to add a transition animation when switching from ‚Äúpage1‚Äù to ‚Äúpage2‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In SwiftUI, this is quite simple. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Look at the </font></font><code>willChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">method that we call the file </font></font><code>ViewRouter.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">when </font></font><code>CurrentPage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">updated. </font><font style="vertical-align: inherit;">As you already know, this causes a binding </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to re-display your body, ultimately showing another </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which means moving to another </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">We can add animation by simply wrapping the method </font></font><code>willChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in a function </font></font><code>withAnimation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> currentPage: <span class="hljs-type">String</span> = <span class="hljs-string">"page1"</span> {
        <span class="hljs-keyword">didSet</span> {<font></font>
            withAnimation() {<font></font>
                willChange.send(<span class="hljs-keyword">self</span>)<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we can add a transition animation when displaying another </font></font><code>Content View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúWithAnimation (_: _ :) - returns the result of recalculating the view body with the animation provided‚Äù</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Apple</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We want to provide our application with a pop-up transition when navigating from </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">To do this, go to the file </font></font><code>MotherView.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and add the transition modifier when called </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">You can choose one of several predefined transition types or even create your own (but this is a topic for another article). </font><font style="vertical-align: inherit;">To add a pop-up transition, we select a type </font></font><code>.scale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page1"</span> {
                <span class="hljs-type">ContentViewA</span>()<font></font>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page2"</span> {
                <span class="hljs-type">ContentViewB</span>()<font></font>
                    .transition(.scale)<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To see how it works, run your application in a regular simulator:</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Your browser does not support HTML5 video.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatinP2Preview.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cool, we added a nice transition animation to our application in just a few lines of code! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can download all the source code </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's all! </font><font style="vertical-align: inherit;">We learned why it is better to use </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to navigate between views in SwiftUI, and how to implement it. </font><font style="vertical-align: inherit;">We also learned how to add transition animations to navigation. </font><font style="vertical-align: inherit;">If you want to know more, follow us on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instagram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and subscribe to our </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newsletter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> so as not to miss updates, tutorials and tips on SwiftUI and much more!</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Free lesson: ‚ÄúAccelerating iOS apps with instruments‚Äù</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501366/index.html">System Design Primer (Part 1 with Microservice Additions)</a></li>
<li><a href="../en501368/index.html">Digital events in Moscow from May 11 to 17</a></li>
<li><a href="../en501370/index.html">Trello - an effective knowledge management system for a small IT team</a></li>
<li><a href="../en501374/index.html">Emulation Commodore 65</a></li>
<li><a href="../en501376/index.html">Agile teaches us the true meaning of Architecture</a></li>
<li><a href="../en501380/index.html">Data Build Tool or what is in common between a Data Warehouse and a Smoothie</a></li>
<li><a href="../en501386/index.html">MNT Reform - Completely open notebook for paranoid</a></li>
<li><a href="../en501388/index.html">Is Agile possible for the whole company?</a></li>
<li><a href="../en501392/index.html">Responsive Font. Adapting text between layout and minimum values</a></li>
<li><a href="../en501394/index.html">About the translation of "theory" / "theoretically" without theory / theoretical</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>