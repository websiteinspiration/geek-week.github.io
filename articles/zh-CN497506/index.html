<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔉 🧝🏼 🤢 在Laravel上为远程命令创建待办事项 💪🏾 👫 🚘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="敬礼，哈布罗夫斯克。下面的文章是由我们的一位普通读者撰写的，并且绝对不声称它是硬核材料，但是它很适合作为初学者的教程。我们希望能在评论中听到您对本文的看法，有关更多核心知识的信息，我们邀请您参加我们的Framework Laravel课程。
 
 
 
 大家好！今天，在每个人都处于“远程”时间的情...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>在Laravel上为远程命令创建待办事项</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/497506/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">敬礼，哈布罗夫斯克。</font><font style="vertical-align: inherit;">下面的文章是由我们的一位普通读者撰写的，并且绝对不声称它是硬核材料，但是它很适合作为初学者的教程。</font><font style="vertical-align: inherit;">我们希望能在评论中听到您对本文的看法，有关更多核心知识的信息，我们邀请您参加我们的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Framework Laravel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">课程</font><font style="vertical-align: inherit;">。</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/0k/zr/tc/0kzrtcgvl777bqznfbpicgqsepc.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 大家好！</font><font style="vertical-align: inherit;">今天，在每个人都处于“远程”时间的情况下，我想创建一个简单的待办事项，您可以在其中创建自己的任务。</font><font style="vertical-align: inherit;">这听起来像是Laravel官方文档中写的内容，以及它的方式-我以他们的待办事项为基础，对其进行了一些转换，而我的故事大部分将涉及如何创建管理员角色并</font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建另一个荒谬的克隆。特雷洛似乎很矛盾</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
 <a name="habracut"></a><br>
 <h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 建立基础 </font></font></h3><br>
 <img src="https://habrastorage.org/webt/hg/vy/ak/hgvyakmhibjsmwd1zethg1wbgmm.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正如我所说，我们将以下一个</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指南</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为基础</font><font style="vertical-align: inherit;">。它非常简单，比起对控制器和模型进行编程，它更侧重于处理迁移和路由。不幸的是，它没有从5.1版本进行更新，并且如果您刚刚开始在Laravel的最后7个版本上编程（它仅在3月3日才刚刚发布），则您不必将路由写入</font></font><code>app/Http/routes.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而是</font></font><code>routes/web.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（在版本6之后已经改变了）。 ），总的来说，整个区别到此结束。最后，您应该获得如下内容：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vt/kw/at/vtkwatppc_py1c7l9jutt16qouq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我也将布局框架从引导程序更改为bulma。</font><font style="vertical-align: inherit;">首先，我比较喜欢它，但是第二，我已经拥有刀片注册模板的代码库（尽管，另一方面，建立注册和授权页面非常简单，我将展示如何操作）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该项目的版本可以下载</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的主分支（在新的分支，你可以下载完成的应用程序）。</font><font style="vertical-align: inherit;">您可以使用以下命令激活它，前提是您已经安装了composer和laravel：</font></font><br>
<br>
<pre><code class="plaintext hljs">composer install<font></font>
//   .env,    .env example,     <font></font>
php artisan key:generate //  <font></font>
php artisan serve // <font></font>
</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 我们创建授权和注册</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开箱即用的授权已从版本6更改。</font><font style="vertical-align: inherit;">现在，为了快速创建，您需要安装一个可以快速生成控制器和刀片模板的软件包：</font></font><br>
<br>
<pre><code class="plaintext hljs">composer install laravel/ui<font></font>
php artisan ui vue --auth<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
项目中应出现几个新文件：</font><i><font style="vertical-align: inherit;">auth</font></i><font style="vertical-align: inherit;">子文件夹将出现</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resourses</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件夹中</font><font style="vertical-align: inherit;">，其中将包含专用于授权和密码的刀片模板文件。最初，刀片模板是由</font><i><font style="vertical-align: inherit;">bootstrap组成的</font></i><font style="vertical-align: inherit;">，但是，</font><font style="vertical-align: inherit;">为了使CSS框架在项目中通用</font><font style="vertical-align: inherit;">，我将它们稍微转换成</font><i><font style="vertical-align: inherit;">bulma</font></i><font style="vertical-align: inherit;">。但是，为了舒适地使用该网站，我们需要一个导航栏。在</font><i><font style="vertical-align: inherit;">资源中，</font></i><font style="vertical-align: inherit;">我创建了</font><i><font style="vertical-align: inherit;">include</font></i><font style="vertical-align: inherit;">文件夹</font><font style="vertical-align: inherit;">，在其中放置了辅助文件</font><i><font style="vertical-align: inherit;">header</font></i><font style="vertical-align: inherit;">和</font><i><font style="vertical-align: inherit;">nav</font></i><font style="vertical-align: inherit;">。为了不占用太多空间，我会说在标头中我只有一个带有bulma连接的头，并且在</font><font style="vertical-align: inherit;">下面是：</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>nav.blade.php</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="html hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar has-background-black-ter"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"navigation"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"main navigation"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-brand"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-item has-text-white is-size-4"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span><font></font>
      TODO<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-burger"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"menu"</span> <span class="hljs-attr">aria-expanded</span>=<span class="hljs-string">"false"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">aria-hidden</span>=<span class="hljs-string">"true"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-menu"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-start"</span>&gt;</span><font></font>
      @if (Auth::check())<font></font>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button is-primary"</span>&gt;</span>
        <span class="hljs-comment">&lt;!--   ,  -&gt;   --&gt;</span><font></font>
        {{{ Auth::user()-&gt;name}}}<font></font>
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><font></font>
      @else<font></font>
      <span class="hljs-comment">&lt;!--    --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-item has-text-danger"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{route('register')}}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-item has-text-danger"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{route('login')}}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><font></font>
      @endif<font></font>
      @if (Auth::check())<font></font>
      <span class="hljs-comment">&lt;!--  ,       --&gt;</span>
      <span class="hljs-comment">&lt;!--      --&gt;</span><font></font>
<font></font>
      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-item has-text-danger"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"{{url('/logout') }}"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"event.preventDefault();
                  document.getElementById('logout-form').submit();"</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"logout-form"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"{{ url('/logout') }}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none;"</span>&gt;</span><font></font>
        {{ csrf_field() }}<font></font>
      <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><font></font>
<font></font>
      @endif<font></font>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"navbar-end"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- navbar items --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
 </code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们开始创建我们的架构 </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在该讨论我们项目的结构了。</font><font style="vertical-align: inherit;">然后读者将能够将应用程序转换为他的需求，但是现在让我说，我希望该应用程序具有一个可以设置和删除任务的管理员（例如项目经理）以及可以查看这些命令的某种团队。</font><font style="vertical-align: inherit;">当然，如果有人可以执行任务并指出是由他来执行任务，那将是非常不错的选择，但是稍后会介绍更多。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好的，所以我们将有两组用户，并同意只有获得访问权限的授权用户才能看到我们的任务板，并且某些超级管理员可以添加任务。</font><font style="vertical-align: inherit;">让我们开始吧。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了简化起见，我决定将应用程序分为两页：第一页上我们只能执行没有编辑功能的任务，第二页上只有超级管理员可以使用。</font><font style="vertical-align: inherit;">我决定命名该团队可用的页面</font></font><code>welcome.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="php hljs">@<span class="hljs-keyword">include</span>(<span class="hljs-string">'includes.header'</span>)<font></font>
<font></font>
&lt;body&gt;<font></font>
    @<span class="hljs-keyword">include</span>(<span class="hljs-string">'includes.nav'</span>)<font></font>
    &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">columns</span> <span class="hljs-title">is</span>-<span class="hljs-title">centered</span>"&gt;
        &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">column</span> <span class="hljs-title">is</span>-<span class="hljs-title">half</span>"&gt;
            &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">panel</span>"&gt;
                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">panel</span>-<span class="hljs-title">heading</span>"&gt;
                     
                &lt;/<span class="hljs-title">div</span>&gt;

                &lt;<span class="hljs-title">div</span> <span class="hljs-title">class</span>="<span class="hljs-title">panel</span>-<span class="hljs-title">body</span>"&gt;
                    @<span class="hljs-title">foreach</span> ($<span class="hljs-title">tasks</span> <span class="hljs-title">as</span> $<span class="hljs-title">task</span>)
                    &lt;<span class="hljs-title">a</span> <span class="hljs-title">class</span>="<span class="hljs-title">panel</span>-<span class="hljs-title">block</span>"&gt;
                        &lt;<span class="hljs-title">button</span> <span class="hljs-title">class</span>="<span class="hljs-title">button</span> <span class="hljs-title">is</span>-<span class="hljs-title">rounded</span>"&gt;
                            &lt;<span class="hljs-title">span</span>&gt;</span>{{ $task-&gt;name }}&lt;/span&gt;<font></font>
                        &lt;/button&gt;<font></font>
                        @<span class="hljs-keyword">endforeach</span><font></font>
                &lt;/div&gt;<font></font>
            &lt;/div&gt;<font></font>
        &lt;/div&gt;<font></font>
    &lt;/div&gt;<font></font>
&lt;body&gt;<font></font>
&lt;/html&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此页面仅列出任务。</font><font style="vertical-align: inherit;">为了显示它，我将在web.php中添加一个新路径：</font></font><br>
<br>
<pre><code class="php hljs">Route::get(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'welcome'</span>, [
        <span class="hljs-string">'tasks'</span> =&gt; Task::orderBy(<span class="hljs-string">'created_at'</span>, <span class="hljs-string">'asc'</span>)-&gt;get(),<font></font>
    ]);<font></font>
});<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将具有相同列表但具有编辑和添加功能的模板称为</font></font><code>task.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它太大了，所以我将它放在扰流板下面：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">task.blade.php</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">@extends('layouts.app')<font></font>
<font></font>
@section('content')<font></font>
&lt;div class="columns is-centered"&gt;<font></font>
    &lt;div class="column is-half"&gt;<font></font>
        &lt;div class="panel"&gt;<font></font>
            &lt;div class="panel-heading"&gt;<font></font>
                 <font></font>
            &lt;/div&gt;<font></font>
            &lt;div class="panel-block"&gt;<font></font>
                @include('common.errors')<font></font>
                &lt;!--     --&gt;<font></font>
                &lt;form action="{{ url('task')}}" method="POST"&gt;<font></font>
                    {{ csrf_field() }}<font></font>
<font></font>
                    &lt;div class="field"&gt;<font></font>
                        &lt;label for="task-name" class="label is-medium"&gt;&lt;/label&gt;<font></font>
                        &lt;input type=" text" name="name" id="task-name" class="input is-medium"<font></font>
                            value="{{ old('task') }}"&gt;<font></font>
                    &lt;/div&gt;<font></font>
<font></font>
                    &lt;div class="field"&gt;<font></font>
                        &lt;button type="submit" class="button is-success"&gt;<font></font>
                            &lt;span class="icon"&gt;<font></font>
                                &lt;i class="fa fa-btn fa-plus"&gt;<font></font>
                            &lt;/span&gt;&lt;/i&gt;<font></font>
                            &lt;span&gt; &lt;/span&gt;<font></font>
                        &lt;/button&gt;<font></font>
                    &lt;/div&gt;<font></font>
                &lt;/form&gt;<font></font>
            &lt;/div&gt;<font></font>
        &lt;/div&gt;<font></font>
<font></font>
        &lt;!-- Current Tasks --&gt;<font></font>
        @if (count($tasks) &gt; 0)<font></font>
        &lt;div class="panel"&gt;<font></font>
            &lt;div class="panel-heading"&gt;<font></font>
                 <font></font>
            &lt;/div&gt;<font></font>
<font></font>
            &lt;div class="panel-body"&gt;<font></font>
                {{-- &lt;table class="table table-striped task-table"&gt;<font></font>
                    &lt;thead&gt;<font></font>
                        &lt;th&gt;&lt;/th&gt;<font></font>
                        &lt;th&gt;&nbsp;&lt;/th&gt;<font></font>
                    &lt;/thead&gt;<font></font>
                    &lt;tbody&gt; --}}<font></font>
                @foreach ($tasks as $task)<font></font>
                &lt;a class="panel-block"&gt;<font></font>
                    &lt;button class="button is-rounded"&gt;<font></font>
                    &lt;span&gt;{{ $task-&gt;name }}&lt;/span&gt;<font></font>
                &lt;/button&gt;<font></font>
                    &lt;form action="{{ url('task/'.$task-&gt;id) }}" method="POST"&gt;<font></font>
                        {{ csrf_field() }}<font></font>
                        {{ method_field('DELETE') }}<font></font>
                        &lt;button type="submit" class="button is-danger"&gt;<font></font>
                            &lt;span class="icon is-small"&gt; &lt;i class="fa fa-btn fa-trash"&gt;&lt;/i&gt;&lt;/span&gt;<font></font>
                            &lt;span&gt;  &lt;/span&gt;<font></font>
                        &lt;/button&gt;<font></font>
                    &lt;/form&gt;<font></font>
                &lt;/a&gt;<font></font>
                @endforeach<font></font>
            &lt;/div&gt;<font></font>
        &lt;/div&gt;<font></font>
        @endif<font></font>
    &lt;/div&gt;<font></font>
&lt;/div&gt;<font></font>
@endsection<font></font>
<font></font>
</code></pre><br>
 </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
并且该模板与原始教程一样，扩展为</font></font><code>app/layouts.blade.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="php hljs">@<span class="hljs-keyword">include</span>(<span class="hljs-string">'includes.header'</span>)<font></font>
<font></font>
&lt;body&gt;<font></font>
    @<span class="hljs-keyword">include</span>(<span class="hljs-string">'includes.nav'</span>)<font></font>
<font></font>
    @<span class="hljs-keyword">yield</span>(<span class="hljs-string">'content'</span>)<font></font>
<font></font>
&lt;/body&gt;<font></font>
<font></font>
&lt;/html&gt;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
精细！</font><font style="vertical-align: inherit;">我们决定了外观，现在可以继续进行布线和创建我们的外观了</font></font><code>middlewares</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，让我们进入“ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户”</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型</font><font style="vertical-align: inherit;">并添加新类型的用户：</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">const</span> ADMIN_TYPE = <span class="hljs-string">'admin'</span>;
<span class="hljs-keyword">const</span> TEAM_TYPE = <span class="hljs-string">'team'</span>;
<span class="hljs-comment">#       :</span><font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isAdmin</span>(<span class="hljs-params"></span>)</span>{        
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;type === <span class="hljs-built_in">self</span>::ADMIN_TYPE;
    <span class="hljs-comment">//        </span><font></font>
}<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，转到用户表的最后一次迁移（数据库/ migrations文件夹），并添加具有我们新数据类型的列：</font></font><br>
<br>
<pre><code class="plaintext hljs">$table-&gt;string('type')-&gt;default('team');<font></font>
//  ,         <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，</font></font><code>app/Http/Controllers/Auth/RegisterController.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仔细编辑一下create函数（在版本5中看起来也有所不同）：</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">create</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> $data</span>)
    </span>{
        <span class="hljs-keyword">return</span> User::create([
            <span class="hljs-string">'name'</span> =&gt; $data[<span class="hljs-string">'name'</span>],
            <span class="hljs-string">'email'</span> =&gt; $data[<span class="hljs-string">'email'</span>],
            <span class="hljs-string">'password'</span> =&gt; Hash::make($data[<span class="hljs-string">'password'</span>]),
            <span class="hljs-string">'type'</span> =&gt; User::TEAM_TYPE,  <font></font>
        ]);<font></font>
    }<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好的，那么我们需要为管理员创建中间件。</font><font style="vertical-align: inherit;">最简单的方法是使用以下命令：</font></font><br>
<br>
<pre><code class="plaintext hljs">php artisan make:middleware IsAdmin
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我希望你成功了。</font><font style="vertical-align: inherit;">在该文件夹中，</font></font><code>HTTP/middleware</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您应该已经出现</font></font><code>isAdmin.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中的handle函数需要进行如下编辑：</font></font><br>
<br>
<pre><code class="plaintext hljs">public function handle($request, Closure $next)<font></font>
    {<font></font>
        if(auth()-&gt;user()-&gt;isAdmin()) {<font></font>
            return $next($request);<font></font>
        //   , .   -   <font></font>
    }<font></font>
        return redirect('/');<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来，我们需要注册</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的中间件</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font></font><code>app/HTTP/Kernel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了使用它：</font></font><br>
<br>
<pre><code class="plaintext hljs">protected $routeMiddleware = [<font></font>
    #  ,      <font></font>
        is_admin' =&gt; \App\Http\Middleware\IsAdmin::class,<font></font>
];<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">破折号</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路径</font><font style="vertical-align: inherit;">转换为</font></font><code>web.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font><font style="vertical-align: inherit;">路径</font><font style="vertical-align: inherit;">只能看到超级管理员：</font></font><br>
<br>
<pre><code class="php hljs">Route::get(<span class="hljs-string">'/dash'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> view(<span class="hljs-string">'tasks'</span>, [
        <span class="hljs-string">'tasks'</span> =&gt; Task::orderBy(<span class="hljs-string">'created_at'</span>, <span class="hljs-string">'asc'</span>)-&gt;get(),<font></font>
    ]); <font></font>
})<font></font>
-&gt;middleware(<span class="hljs-string">'is_admin'</span>)    <font></font>
-&gt;name(<span class="hljs-string">'admin'</span>);<font></font>
<font></font>
<span class="hljs-comment">#       </span><font></font>
<font></font>
Auth::routes();<font></font>
Route::post(<span class="hljs-string">'/logout'</span>, <span class="hljs-string">'Auth\LoginController@logout'</span>)-&gt;name(<span class="hljs-string">'logout'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仍然需要为我们的管理员创建自定义控制器：</font></font><br>
<br>
<pre><code class="plaintext hljs">php artisan make:controller AdminController
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
编辑：</font></font><br>
<br>
<pre><code class="plaintext hljs">public function __construct()<font></font>
    {<font></font>
        $this-&gt;middleware('auth');<font></font>
    }<font></font>
    public function admin()<font></font>
    {<font></font>
        return view('admin');<font></font>
    }<font></font>
 </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了让所有获得准确的登记，不要忘了修复重定向</font></font><code>RouteServiceProvider.php</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code>app/HTTP/Providers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为它最初是专为家庭模式：</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> HOME = <span class="hljs-string">'/'</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，只有在助手的帮助下，管理员才能出现在修补匠终端中： </font></font><br>
<br>
<pre><code class="plaintext hljs">php artisan tinker<font></font>
use App\User;<font></font>
User::where('email', 'admin@mail.com')-&gt;update(['type' =&gt; 'admin']);<font></font>
//    <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
就这样。如果您想尝试完成的应用程序，我将重复该</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，我们的应用程序现在不能在生产中使用，因为在资源上注册的每个人都可以看到您的任务。但是您将如何限制访问？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
也许您有公司邮件，然后可以在邮件验证中使用常规人员来限制对团队的访问。或者，您也可以通过类似的操作，以与管理员相同的方式添加团队成员资格检查。按照传统，我将为那些刚要精通Laravel的人提供一些有用的链接：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比关于迁移到Laravel的文档中的文章要详细得多</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于Laravel角色的有关Medium</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">很好的文章</font></a></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">      Laravel 7</a><br>
<br>
<hr><br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">     « »   Forge/Envoyer.<br>
</a></b><br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN497486/index.html">数据划分。2013年。回顾性</a></li>
<li><a href="../zh-CN497488/index.html">使用Microsoft Teams，PowerApps和Power Automate使HR流程自动化。员工提款要求</a></li>
<li><a href="../zh-CN497490/index.html">海马亲权的困难：免疫系统的遗传变态</a></li>
<li><a href="../zh-CN497492/index.html">在TSD上的应用以及通过HTTP服务与1C：Enterprise 8.3的通信。1.1部分（API的详细说明）</a></li>
<li><a href="../zh-CN497504/index.html">Quarkus如何集成MicroProfile和Spring</a></li>
<li><a href="../zh-CN497508/index.html">我们继续在RESTinio中遇到多层C ++模板：这是express-js路由器的类型安全替代品</a></li>
<li><a href="../zh-CN497510/index.html">电子游戏音频合成-第2期。猎物</a></li>
<li><a href="../zh-CN497512/index.html">融化的冰川将来会提供水电吗？</a></li>
<li><a href="../zh-CN497516/index.html">如何自己创建一个消声屏蔽箱</a></li>
<li><a href="../zh-CN497520/index.html">HTTP / 3和HTTP / 2性能比较</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>