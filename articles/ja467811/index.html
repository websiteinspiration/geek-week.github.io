<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏸 🗄️ ⛩️ フェアチャイルドチャネルFのアーキテクチャとプログラミング 🙃 🎀 📮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="「チャンネルFの自作は、ハードウェアジャンパーを介してスプライトをプログラミングするようなものです...」
 / chadtower、atariage forum / VESとしても知られるFairchild Channel F
 
 
 
 ゲームコンソールは、1976年11月に登場しました。ピン...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>フェアチャイルドチャネルFのアーキテクチャとプログラミング</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467811/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「チャンネルFの自作は、ハードウェアジャンパーを介してスプライトをプログラミングするようなものです...」</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
/ chadtower、atariage forum /</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> VESとしても知られる</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Fairchild Channel F</font></a></font><br>
<br>
<img src="https://habrastorage.org/webt/o6/vk/fx/o6vkfxmjtwb1atq-tuv08b9smxg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ゲームコンソールは</font><font style="vertical-align: inherit;">、1976年11月に登場しました。ピンポン、テニス（同じ列のソビエト「ビデオスポーツ」）などの前任者とは異なり、マイクロプロセッサーとプログラム付きカートリッジの存在には非常に大きな違いがありました。これ以前は、コンソールのゲームは厳密なロジックで実装されていました-現代的な意味でのプログラムはそこにはありませんでした。</font><font style="vertical-align: inherit;">
フェアチャイルドチャンネルFは1983年までリリースされました。この間、25万台以上のコンソールが販売され、約30〜40の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ゲームがリリースされました</font></a><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">その一部</font></a><font style="vertical-align: inherit;">はすでに2000年代にありました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マイクロプロセッサを使用する点での優位性について言えば、前回の記事でお話ししたRCA Studio IIはほんの数か月遅れでしたが、チャネルFよりもかなり弱いことが判明したため、販売に失敗しました。</font><font style="vertical-align: inherit;">しかし、1年も経たないうちに、Atari VCSがChannel Fを市場から追い出し</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、Fairchild_Channel_F自体</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">開発は</font><font style="vertical-align: inherit;">ありませんでした</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">System IIとSaba Videoplay 2（1979）などのいくつかのクローンでは、主にケース、ジョイスティック（ちなみに、通常の位置とは別に、ノブの回転）とチップの数が違いました。</font><font style="vertical-align: inherit;">建築的には、すべてがほぼ同じでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャンネルFとは何ですか？</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセッサーは、時代の伝統で、コンソール自体と同じフェアチャイルド会社によって製造され、F8 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/Fairchild_F8</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれてい</font><font style="vertical-align: inherit;">ます。これは、1974年の8ビットプロセッサで、1.8 MHzの周波数で動作します（1つの命令で1〜6クロックサイクルかかります）。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/hj/5n/6k/hj5n6kqky_84xnkbm3v7vdry-we.jpeg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、このプロセッサは2つのチップ-ALU、バッテリー、64バイトのSRAM、命令を実行するために必要なロジック、2つのポート（アドレスバスがない！）および3851PSU（プログラマブル1 kbのROM（BIOSに使用）、命令ポインタ、メモリアドレス指定スキーム、割り込み、タイマー（割り込みとタイマーは、チャネルFでは特に使用されません）を含むストレージユニット）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、CPUとPSUを同じチップ上で組み合わせたF3859チップと、1990年代まで製造されたわずかに改良されたバージョンであるMostek 3870が現れました。しかし、これは別の話です。興味深いことに、F8は（特に、タイマーとポートの存在により）マイクロコントローラーと呼ばれ、Intel MCS-48ファミリー（8048）の祖先と呼ばれることもあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャネルFに加えて、F8プロセッサーは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VideoBrain</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピューター</font><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CompuChess</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェスコンピューターで</font><font style="vertical-align: inherit;">も使用されました</font><font style="vertical-align: inherit;">。一般に、このプロセッサに関する情報がほとんどないのは驚くべきことです。フェアチャイルドからのいくつかの説明と、いくつかのゲームのソースコードと特にチャンネルFの例を除いて、それ以上のものはありません。このプロセッサは他のどこにも使用されていないようですが、信じられないようです（その高度なバージョンがかなり前からリリースされていることを考えると）。それが使用された他のすべてのデバイスは軍事目的であったと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、プロセッサの機能について少し説明します。そのレジスターのセットと機能を検討します。これは、当時存在していたアーキテクチャの中で最も混乱しているものの1つだと思います（現代のアーキテクチャはおそらく伸びるかもしれませんが、コンパイラ用に設計されているため、比較は正しくありません。生きている人々はF8で作業していました）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセッサには多くのレジスタがあります。 8ビットバッテリーAとフラグレジスタW（I、O、Z、C、S）に加えて、さまざまな機能を持つ64個の8ビットセルの「スクラッチパッド」もあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の9つのセルは、「lr a、7」のようなコマンドで汎用レジスターR0〜R8として使用されます（レジスターR7の内容をバッテリーにロードします。文字Rは示されていません-レジスター番号のみが書き込まれています。正確には、番号または数値はコンテキストから明確でなければなりません。たとえば、lr命令の場合、数値は存在できません。たとえば、「li 7」（バッテリーに定数をロードする）の場合、それはレジスタではなく正確な数値です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セル9 、10-11（H）、12-13（K）、14-15（Q）は、サブプログラムの呼び出しなど、さまざまな状況で他のレジスタを保存するために使用されます</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。R16-R63レジスタは、特別なインデックスレジスタISAR（間接スクラッチパッドアドレス）を介してのみアクセスできます。レジスタ）、セル16-23、24-31、32-39、40-47、48-55、56-63から形成される6つの8バイトバッファとして。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6ビットISARは、3ビットの2つの部分に分かれています。</font><font style="vertical-align: inherit;">ISARが1つ増加または減少した場合、影響を受けるのは下3桁のみです。</font><font style="vertical-align: inherit;">アドレッシングは、前述の6つの8バイトバッファーの1つで実行されます（同時に、バッファーの終わりは、特別なbr7条件付き分岐命令によってトレースできます）。</font></font><br>
<br>
<pre><code class="plaintext hljs">	clr		; 0 -&gt; A<font></font>
<font></font>
; set ISAR to full address Ox27 (octal 27)<font></font>
<font></font>
	lisu 2		; buffer N2<font></font>
	lisl 7		; index within buffer N2<font></font>
<font></font>
loop:	<font></font>
	lr d,a		; A-&gt; buffer N2[index], than decrement ISAR (27, 26, 25, ... )<font></font>
	br7 loop	; go further if low part of ISAR contains 7 (end of buffer N2). if not, go loop again<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、命令「lr d、a」の「d」はレジスタの名前ではなく、ISARを削減する必要があることを示す記号です（「i」-増加、「s」-変更しない）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
間接アドレス指定には別の方法があります-DC0レジスタ（データカウンター）を介して：</font></font><br>
<br>
<pre><code class="plaintext hljs">	dci data_addr       ; data_addr -&gt; DC0<font></font>
	lm		; [data_addr] -&gt; A, DC0 + 1 -&gt; DC0<font></font>
	...<font></font>
data_addr:<font></font>
	db 0,1,2,3,...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あるメモリ領域から別のメモリ領域にデータを転送する必要がある場合は、xdcコマンドをさらに使用して、レジスタDC0とDC1の内容を入れ替えます。それら。 DC0が指すアドレスから読み取り、xdcを実行して、DC1が指すアドレスに書き込みます。次に、xdcなどそれら。 DC1は、DC0のコピーを格納するためのシャドウレジスタの一種です。直接アクセスすることはできません（コマンドxdcを除く）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの例は、アドレス指定に関する可能性の一部のみを示していますが、実際にはもっと多くの例があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、F8には4つのポート（0、1、4、5）があり、outコマンドで書き込み、inコマンドで読み取ることができます。チャネルFでは、ポートはグラフィックス、サウンドの出力、およびジョイスティックのステータスの読み取りに使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
算術、遷移などの他の命令については説明しません。これらはかなり標準的です。</font><font style="vertical-align: inherit;">アクションを実行できるレジスターの選択は非常に限られているので、値を絶えず前後に移動する必要があるため、コードが急速に大きくなることに注意します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
減算はありません（加算のみあります）。</font><font style="vertical-align: inherit;">ユニットあたりのデクリメント（ds）とインクリメント（inc）命令は非対称です。</font><font style="vertical-align: inherit;">dsはレジスタr0-r8、incでのみ機能します-バッテリーでのみ機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
無条件のジャンプはバッテリーを台無しにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常のループの例：</font></font><br>
<br>
<pre><code class="plaintext hljs">	li	25			; (r4) number of iterations <font></font>
	lr	4,a<font></font>
next:<font></font>
	ds	4			; r4--<font></font>
	bnz	next			; until r4 == 0<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルーチン</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F8にはハードウェアスタックがないため、ネストされたサブプログラム呼び出しには問題があります。</font><font style="vertical-align: inherit;">通常の呼び出しと戻りは次のようになります。</font></font><br>
<br>
<pre><code class="plaintext hljs">      ; ...code<font></font>
      pi sub                  ; Pushes address of next instruction to PC1<font></font>
                              ; address of sub is stored in PC0 (jump to subroutine)<font></font>
      ; ...code continues<font></font>
<font></font>
  sub:<font></font>
      ; ... often used code<font></font>
      pop                     ; Move return address from PC1 to PC0<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、PC0は通常の命令ポインターです。</font><font style="vertical-align: inherit;">PC1-いわゆる「スタックレジスタ」。</font><font style="vertical-align: inherit;">スタックとは何の関係もありません。サブルーチンが呼び出されると、PC0がスタックに保存されるだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
subから別のサブルーチンが呼び出された場合、戻りアドレスは上書きされ、複雑にする必要があります（レジスターKに最初の戻りアドレスを保存します）。</font></font><br>
<br>
<pre><code class="plaintext hljs">  prog:<font></font>
      ; ...do something...<font></font>
      pi sub1                 ; Address of next instruction stored in PC1<font></font>
                              ; sub1 is stored in PC0 (jump to subroutine)<font></font>
      ; ...do more...<font></font>
  sub1:<font></font>
      lr k,p                  ; Copy PC1 to K, original jump address to K<font></font>
      ; ...do something...<font></font>
      pi sub2                 ; Pushes address of next instruction to PC1<font></font>
                              ; sub1 is stored in PC0 (jump to subroutine)<font></font>
      ; ...do more...<font></font>
      pk                      ; Store address of next instruction in PC1<font></font>
                              ; Copy value in K to PC0 (jump back to main)<font></font>
  sub2:<font></font>
      ; ...do something...<font></font>
      pop                     ; Move return address from PC1 to PC0<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネストの3番目のレベルも必要な場合、すべてが完全に悲しくなります（このためのBIOSには、pushkとpopkの2つの特別なルーチンもあります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的な推奨事項は、サブルーチン呼び出しをマクロで置き換えることです。</font><font style="vertical-align: inherit;">もちろん、コードのサイズに厳密な制限がない場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F8にはハードウェアスタックはありません。</font><font style="vertical-align: inherit;">必要に応じて、ISARとバッファを介してプログラムで実装されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RAMへの書き込みはそれほど重要ではありませんが（1つがないため）、次のようになります。</font></font><br>
<br>
<pre><code class="plaintext hljs">	li	$FF	; set value<font></font>
	dci	$3800	; set target address<font></font>
	st		; write<font></font>
</code></pre><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記憶</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは少し奇妙に聞こえますが、フェアチャイルドチャネルFにはRAMがありません。</font><font style="vertical-align: inherit;">既存の2キロバイトのビデオメモリ（MK4027）はアドレス空間に表示されず、実際には読み取ることができず、ポートを介して書き込まれます。</font><font style="vertical-align: inherit;">マイクロプロセッサーのレジスターは、64ものレジスターがありますが、RAMに対して正しいとは見なされていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行可能プログラムはリムーバブルROMカートリッジに保存され、ほとんどの場合2kbの容量を持っています（最近のゲームの中には3k、4k、5kカートリッジを使用するものもあります）。</font><font style="vertical-align: inherit;">さらに、プロセッサチップには1kbのBIOS ROMが組み込まれており、テニスなどの単純なゲーム、いくつかの便利なルーチン、いくつかのキャラクターのイメージが含まれています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アドレス空間では、BIOSは$ 0000から$ 07ff、カートリッジROM-$ 0800から配置されています。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラフィックアート</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャネルFのグラフィック機能は非常に原始的です。なぜなら、そこには別個のチップの形のビデオコントローラーがないため、シフトレジスタ、ゲート、オペアンプなどの通常のロジックにすべてが実装されているからです。異なるソースが異なる解像度について言及していることはかなり珍しく、多くのオプションがあります。実際のところ、利用可能な2キロバイトのビデオメモリは128 x 64の解像度を意味しますが、実際にはこれは実際のケースとはかけ離れています。最初に、多くはこの特定のテレビで形成された画像のどの領域が表示されるかによって異なります（そのため、最初の4列はまったく公式に使用されていません）。次に、最後の数列がパレットの下で使用されます。第三に、メモリの一部がまったく使用されません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果として、実際の解像度は、8色で95 x 58ピクセルと概算できます（ただし、白黒64x32のRCA Studio IIよりもはるかに優れています）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどのコンソールはNTSCバージョンでリリースされていますが、PALも存在します。</font><font style="vertical-align: inherit;">彼らが言うように、実際の違いはありません（行数は同じです）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的に、そのような単純なアイアンでは、画面上にドットを描画することしかできません。</font><font style="vertical-align: inherit;">ただし、表示される色の総数は8色ですが、1行に表示できるのは4色のみです（これを任意にパレットと呼ぶことができます）。</font><font style="vertical-align: inherit;">パレットはラインごとに個別に設定され、かなり奇妙な場所に保存されます。各ラインのカラム125と126（いずれの場合も可視領域の外側）に格納されます。</font><font style="vertical-align: inherit;">パレットの変更はそれぞれ、これら2つの列にピクセルを描画することです。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fv/pe/47/fvpe47hy-sthzozlebbknihe4qg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（画面に実際に表示されているビデオメモリの黄色の領域とパレットが設定されている領域）が強調表示</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
されてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">上記のように、データをVRAMに書き込む方法は、ポートを介してのみです。この場合、色、列、行が示されます</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。Xはポート4に、Yはポート5に、色はポート1に書き込まれます。その後、定数がポート0に書き込まれることによってデータが転送されます。</font></font><br>
<br>
<pre><code class="plaintext hljs">	; set color (2 bit per pixel)<font></font>
	li	$00	; color ($00 = green, $40 = red, $80 = blue, $C0 = background)<font></font>
	outs	1<font></font>
<font></font>
	li	104	; X<font></font>
	com<font></font>
	outs	4<font></font>
<font></font>
	; set the row<font></font>
	li	61	; Y<font></font>
	com<font></font>
	outs	5<font></font>
<font></font>
	; transfer data to VRAM<font></font>
	li	$60<font></font>
	outs	0<font></font>
	li	$50<font></font>
	outs	0<font></font>
<font></font>
	; wait for update<font></font>
	lis	6<font></font>
delay:	<font></font>
	ai	$ff<font></font>
	bnz	delay<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてを記録するには遅延が必要です。遅延がないと、次のポイントが描画されない場合があります。公式バージョンでは、列と行に4が追加されています（簡単にするために省略されています）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドット全体で（ループ内で）画面全体を埋めるには、約1秒かかります。画面の更新が非常に遅いことに加えて、フレーム内でビームが反転するのを待つ方法がないことにも注意してください。したがって、小さな再描画であっても、必ずフリッカが伴います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次にパレットについて。厳密に言えば、ラインごとに2つのモードがあります。黒と白（背景が黒で前景が白の場合、どのピクセルを描画してもかまいません）と色です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前景色モードでは、赤、緑、青（rgb）の3つが常に存在します。加えて、3つの背景色の1つ-グレー、ライトブルー、ライトグリーン。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
125列目と126列目にパレットを設定するには、次の値を書き込みます。</font></font><br>
<br>
<pre><code class="plaintext hljs">x=125	x=126	palette<font></font>
---------------------------------------------------------------------<font></font>
00	00	COLOR: rgb, light green bg<font></font>
00	ff	COLOR: rgb, light blue bg<font></font>
ff	00	COLOR: rgb, gray bg<font></font>
ff	ff	B/W: www, black bg<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
典型的なゲームでは、通常、これを行います。まず、一般的な背景を設定します。そのために、既製のBIOS手順を使用できます。</font></font><br>
<pre><code class="plaintext hljs">	li	$c6		; $21 - b/w palette, fill with black. $c6 - color palette, fill with gray<font></font>
	lr	3, A<font></font>
	pi	clrscrn		; clrscrn BIOS call<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、必要に応じて、白黒のパレットでストリップを作成します（たとえば、ゲームのスコアを黒の背景に白の数字で表示します）</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/o6/rv/bu/o6rvbu8ifhlp3l5o01jnjhcktpk.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ピクセルを3色のいずれかに配置します（背景がそれぞれ灰色の場合-r、g、b）。</font><font style="vertical-align: inherit;">結果として、もちろん8色がありますが、特定の場所に任意の色の点を配置​​するのはとても簡単です-不可能です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、色とそれらの組み合わせのいくつかのアイデアを与える</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">写真のセットです</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、これですべてのグラフィックスが終了します-あなたがやりたいことはすべて、ピクセルを描くことによって、そして手動で行われます。</font><font style="vertical-align: inherit;">有用なルーチンから、BIOSには文字出力があります。</font><font style="vertical-align: inherit;">ただし、スペースを節約するために、ROMには5x8ピクセルのサイズの数字と個々の文字の画像しかありません。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/n7/7y/ot/n77yotdf_sdeu8qng3mk76jmeua.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、引き出しの手順は便利で、次のように使用できます。</font></font><br>
<br>
<pre><code class="plaintext hljs">	li	25			; column<font></font>
	lr	1,a<font></font>
	li	25			; row<font></font>
	lr	2,a<font></font>
	li	%11000000                 ; e.g. $c0 - green "0" <font></font>
	lr	0,a               	; a -&gt; r0 <font></font>
	pi	drawchar            ; call subroutine<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のバージョンでは、レジスタr0の上位2桁が色（10-赤、11-緑、01-青、00-透明）を決定し、残りは文字のシリアル番号（0 1 2 3 4 5 6 7 8 9 G？T SPACE MXブロック：-中央から||左から|| `）、ゼロから開始。レジスタr1とr2は、それぞれ列と行に配置されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より実用的なオプションは、ビットについて考えないことです。</font></font><br>
<br>
<pre><code class="plaintext hljs">	li	20		; x<font></font>
	lr	1,a		; a -&gt; r1<font></font>
	li	10		; y<font></font>
	lr	2,a		; a -&gt; r2<font></font>
	li	$40		; char color in bits 6,7: $80 (%10000000) - red, $c0 (%11000000) - green, $40 (%01000000) - blue, $00 (%00000000) - transparent<font></font>
	oi	1		; index of char ( e.g. 3 for "3" )<font></font>
	lr	0,a		; combined color + char index -&gt; r0<font></font>
	pi	drawchar	; call subroutine        <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラットフォームの感触を得るために、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaos Constructions'2019</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">での小さなイントロコンテストのために</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">256バイトのイントロ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を書きました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特別なことは何もありませんが、行ごとのパレット変更がそこで使用される理由に注意してください。</font><font style="vertical-align: inherit;">横に伸びる横縞は、その下にある線を強調表示し、一時的に背景全体を黒に、すべてのピクセルを白に置き換えます。</font><font style="vertical-align: inherit;">ピクセル自体を上書きする必要がなく（後で復元する必要もない）、そのような「バックライト」を非常に高速に、ちらつきなしに作成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のポイントは、文字「CC」です。</font><font style="vertical-align: inherit;">文字「C」はBIOSにないため、GGと数字1のオーバーラップを使用して逆「CC」が取得されます。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/X0mVxEY4aD0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
音が悪い。</font><font style="vertical-align: inherit;">公式には、120Hz、500Hz、1KHzの3つのサウンドがあります。</font><font style="vertical-align: inherit;">実際、クリックや窒息のきしみ以外のものを得ることは問題があります。</font><font style="vertical-align: inherit;">さらに、PALマシンとNTSCマシンの間、および古いバージョンと新しいバージョンの間では、サウンドも異なると彼らは言います。</font><font style="vertical-align: inherit;">ただし、一般的なゲームの場合はそれで十分です。</font><font style="vertical-align: inherit;">ポートを介してオンとオフの音：</font></font><br>
<br>
<pre><code class="plaintext hljs">    li   %01000000                 ; 1khz beep $40<font></font>
    outs 5<font></font>
<font></font>
    li   %10000000                 ; 500hz beep $80<font></font>
    outs 5<font></font>
<font></font>
    li   %11000000                 ; 120hz beep $c0<font></font>
    outs 5<font></font>
<font></font>
; some pause<font></font>
<font></font>
    clr<font></font>
    outs 5                          ; turn off sound<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
人々は音楽を演奏することさえ楽しんでいました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最高の</font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプルは、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リモートでPCスピーカーに似ています。</font><font style="vertical-align: inherit;">確かに、とにかく実用的な意味はありません。すべてのプロセッサリソースが音楽に使用され、特別なことは何もできません。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発ツール</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、</font><font style="vertical-align: inherit;">「開発パック」と呼ばれる必要なソフトウェアの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既製の選択があり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これには、DASMアセンブラー、逆アセンブラー、MESSエミュレーター（デバッガー付き）が含まれます。</font><font style="vertical-align: inherit;">これらすべては、少なくともWindows 7では問題なく機能します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fg/zy/kv/fgzykvvz7qwxpwpxwhrkpjnl6ue.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アセンブリとスタートアップのパラメータ：</font></font><br>
<br>
<pre><code class="plaintext hljs">dasm.exe test.asm -f3 -otest.bin<font></font>
messd channelf -cartridge %cartPath%\test.bin -w -effect sharp -r 640x480 -ka</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エミュレーターは非常に優れていますが、デバッガーは非常に奇妙です。</font><font style="vertical-align: inherit;">MAME / MESSの新しいバージョンをすぐに構成できませんでした（サポートされていると思われる人気のないプラットフォーム用にMAMEを設定することは、常に簡単な作業ではないことに気づきました）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エミュレーターは、可視領域の解像度がminx = 5、minY = 5、maxX = 105、maxY = 61に対応していると想定して</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
います。結果をライブでテストせずにエミュレーターの下で何かを書くことには喜びがないため、ROMエミュレーターで問題を解決する必要がありました。</font><font style="vertical-align: inherit;">私の要求によって</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tnt23</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EEPROM 28C16Aが挿入された特別なカートリッジ（Alexander Novozhilovがケースを印刷した）を作成しました。</font><font style="vertical-align: inherit;">F8アドレッシングの特殊性のため、eBayで古いFairchild 3853チップを購入する必要があり、その結果、EEPROMをプログラムして、ライブマシンでコードがどのように見えるかを確認できました。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/7y/1b/ba/7y1bbagbzaam_bcm_kttnv_2juo.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、tnt23はChannel F S-Video出力（通常、アンテナ入力を介してのみTVに接続できました）を接続しました。これにより、画質と色再現が大幅に改善されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フェアチャイルドチャンネルFのストーリー：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Fid3KhEaFJY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">資源</font></font></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VES Wiki</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スキーム</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F8の歴史</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プログラミングF8</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特許</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（仕組み）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XMの音楽プレーヤー/コンバーター</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2]</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像</font></font></a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクロールイントロ</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467795/index.html">暗号通貨と政府規制に関するメモ</a></li>
<li><a href="../ja467797/index.html">「ために笑う」：「戦闘」アプリケーションのないソフトウェアツールが必要になる理由</a></li>
<li><a href="../ja467801/index.html">最小のオートメーション。パート1.1。仮想化の基本</a></li>
<li><a href="../ja467803/index.html">Python + matplotlibでのカスタム物理相互作用の初歩的なシミュレーション</a></li>
<li><a href="../ja467807/index.html">ロシアでの暗号通貨の売買：方法、合法化、リスク</a></li>
<li><a href="../ja467813/index.html">FSTECの17次の変更のレビュー</a></li>
<li><a href="../ja467815/index.html">メディアは、「ロシアではIPアドレスが不足している」というパニックを引き起こしました。本当に？</a></li>
<li><a href="../ja467817/index.html">ジェネレーティブデザインパターンについて少し</a></li>
<li><a href="../ja467821/index.html">必要なものを簡素化して切り取る：Doomの作成者であるJohn Romeroへのインタビュー</a></li>
<li><a href="../ja467823/index.html">解析：Kubernetes上のOOM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>