<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë©‚Äçüë¶ üí¶ üë®üèΩ‚ÄçüöÄ Implementando o WebRTC em um servidor de m√≠dia - pr√°tica e pol√≠tica ü§üüèæ üö∂üèø ü§öüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Streaming para navegadores em tempo real - sem solu√ß√£o. Ou existe?
 
 H√° cerca de 20 anos, a largura de banda da rede e os recursos de computa√ß√£o d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Implementando o WebRTC em um servidor de m√≠dia - pr√°tica e pol√≠tica</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498418/"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Streaming para navegadores em tempo real - sem solu√ß√£o. </font><font style="vertical-align: inherit;">Ou existe?</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° cerca de 20 anos, a largura de banda da rede e os recursos de computa√ß√£o dos computadores permitem a compacta√ß√£o e transmiss√£o de som e v√≠deo pelo protocolo IP no modo quase em tempo real. Durante esse per√≠odo, centenas de padr√µes e protocolos foram desenvolvidos por organiza√ß√µes centrais de padroniza√ß√£o, como W3C e IETF, al√©m de muitas empresas grandes e pequenas, para compactar, empacotar, encaminhar, sincronizar e reproduzir com efici√™ncia conte√∫do de √°udio e v√≠deo em computadores e dispositivos m√≥veis. A captura de v√≠deo em tempo real, a compacta√ß√£o e a transmiss√£o por IP receberam aten√ß√£o especial, porque, em primeiro lugar, o IP √© o mais barato e mais acess√≠vel em todos os n√≠veis e, em segundo lugar, as tecnologias de videoconfer√™ncia e vigil√¢ncia por v√≠deo s√£o vitais e t√™m grande demanda.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que tantos anos se passaram e muito trabalho foi feito. Que maravilhosas realiza√ß√µes nesta √°rea podemos observar ap√≥s 20 anos? Vamos remover a tampa da caixa (√© claro, essa n√£o √© a caixa de Pandora nem a "lata de vermes") e ver quais tecnologias e recursos maravilhosos se tornaram dispon√≠veis ap√≥s muitos anos de trabalho por dezenas de milhares de engenheiros de software talentosos. Um programador de 1998, que primeiro enviou o som pela rede, um m√©dico que deseja uma solu√ß√£o de telemedicina simples, barata e confi√°vel, um professor que precisa realizar uma li√ß√£o remota - agora eles abrem esta capa, cheia de esperan√ßas brilhantes, e o que v√™em? Em uma panela fervente e ofensiva, cheia de marketing alucinante, capitalismo c√≠nico e tentativas desesperadas de entusiastas de melhorar as coisas, todos os tipos de codecs, protocolos, formatos e aplicativos est√£o flutuando.√â isso que a sopa de TI da "comunidade" oferece ao consumidor em tempo real. Pegue-se que cheira menos, tente, teste, compre. N√£o existe uma solu√ß√£o simples e eficaz. Diferentemente do streaming, que n√£o requer tempo real: ainda h√° 5 anos, existe um padr√£o HLS que funciona em qualquer navegador e dispositivo em que o fornecedor da solu√ß√£o possa simplesmente instalar o segmentador HLS no servidor e dormir tranq√ºilamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° o RTSP - muitos consoles e equipamentos profissionais o reproduzem, mas os navegadores n√£o s√£o reproduzidos. Aqui est√° o RTMP - o Safari n√£o deseja reproduzi-lo no iOS e nem todos os Androids o reproduzem. O Chrome o pro√≠be como n√£o confi√°vel. Aqui est√° o MPEG2-TS - os navegadores tamb√©m n√£o o reproduzem. Extens√µes de fonte de m√≠dia HTML5 (MSE) - boas para segmentos de v√≠deo com dura√ß√£o de 5 a 10 segundos (ou seja, para HLS / Dash), mas para segmentos curtos com menos de um segundo - nem sempre est√°veis ‚Äã‚Äã- funcionam de maneira diferente em navegadores diferentes e novamente n√£o suportado no iOS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como, pergunta-se, o jardim de inf√¢ncia envia v√≠deos de c√¢meras instaladas em grupos a pais que desejam abrir o navegador a qualquer momento em qualquer dispositivo e sem instalar plug-ins para assistir seus filhos em tempo real? Por que todos os jardins de inf√¢ncia n√£o oferecem esses servi√ßos? Sim, porque fornecer esse servi√ßo √© muito caro. Precisamos desenvolver aplicativos para dispositivos m√≥veis, onde o v√≠deo ser√° reproduzido - porque os navegadores n√£o s√£o reproduzidos. Precisa de muito mais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos definir o conceito de "pr√≥ximo ao tempo real". Isso √© um atraso de menos de 5 segundos para vigil√¢ncia por v√≠deo e menos de 1 segundo para videoconfer√™ncia. O atraso m√©dio do protocolo HLS √© de 20 a 30 segundos. Talvez seja adequado para jardins de inf√¢ncia, mas para vigil√¢ncia por v√≠deo de seguran√ßa, videoconfer√™ncia e semin√°rios on-line, √© necess√°ria outra tecnologia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, at√© agora, mais precisamente at√© o ver√£o de 2017, n√£o havia um padr√£o ou protocolo √∫nico para transmitir √°udio e v√≠deo para qualquer navegador em qualquer dispositivo em tempo real. As raz√µes para esta situa√ß√£o, consideraremos neste artigo posteriormente. Eles n√£o s√£o de natureza t√©cnica, por esses motivos. Enquanto isso, vamos ver o que aconteceu no ver√£o de 2017, que, no m√≠nimo, mas ainda forneceu uma tecnologia que nos permite resolver os problemas acima. Essa tecnologia √© WebRTC, muito foi escrito sobre isso tanto neste recurso quanto na rede em geral. Ele n√£o pode mais ser chamado de completamente novo e, no momento da reda√ß√£o deste artigo, o W3C considera o WebRTC 1.0 um projeto conclu√≠do. N√£o falaremos aqui sobre o que √© o WebRTC; se o leitor n√£o estiver familiarizado com essa tecnologia, sugerimos que voc√™ fa√ßa uma pesquisa no hub ou no google e se familiarize,para que √© utilizado e como funciona em termos gerais. Aqui apenas dizemos que esta tecnologia foi desenvolvida para comunica√ß√£o ponto a ponto em navegadores, com ela voc√™ pode implementar aplicativos de bate-papo por v√≠deo e voz sem nenhum servidor - o navegador se comunica diretamente com o navegador. O WebRTC √© suportado por todos os navegadores em todos os dispositivos e, no ver√£o de 2017, a Apple finalmente chegou at√© n√≥s e o adicionou ao seu Safari no iOS. Foi esse evento que tornou o WebRTC a tecnologia mais universal e geralmente aceita para streaming em tempo real para navegadores, desde o p√¥r do sol do RTMP, que come√ßou em 2015.O WebRTC √© suportado por todos os navegadores em todos os dispositivos e, no ver√£o de 2017, a Apple finalmente chegou at√© n√≥s e o adicionou ao seu Safari no iOS. Foi esse evento que tornou o WebRTC a tecnologia mais universal e geralmente aceita para streaming em tempo real para navegadores, desde o p√¥r do sol do RTMP, que come√ßou em 2015.O WebRTC √© suportado por todos os navegadores em todos os dispositivos e, no ver√£o de 2017, a Apple finalmente chegou at√© n√≥s e o adicionou ao seu Safari no iOS. Foi esse evento que tornou o WebRTC a tecnologia mais vers√°til e geralmente aceita para streaming em tempo real para navegadores desde o p√¥r do sol do RTMP, que come√ßou em 2015.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, o que o streaming para navegadores de c√¢meras tem a ver com isso? Mas o fato √© que o WebRTC √© muito flex√≠vel em sua funcionalidade e permite enviar √°udio e v√≠deo para apenas um dos dois participantes (pares) e aceitar apenas o outro. Portanto, nasceu a id√©ia de adaptar o WebRTC em servidores de m√≠dia. O servidor de m√≠dia pode receber v√≠deo da c√¢mera, estabelecer comunica√ß√£o com o navegador e concordar que somente ele ser√° enviado e o navegador receber√°. Assim, o servidor de m√≠dia pode enviar simultaneamente o v√≠deo da c√¢mera para muitos navegadores / visualizadores. Por outro lado, um servidor de m√≠dia pode receber um fluxo de um navegador e encaminh√°-lo para, por exemplo, muitos outros navegadores, realizando a t√£o desejada fun√ß√£o ‚Äúum para muitos‚Äù.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, finalmente, tudo foi formado? O Akuna Matata e o jardim de inf√¢ncia poder√£o instalar esse servidor de m√≠dia em algum lugar da hospedagem ou na AWS, enviar um fluxo de cada c√¢mera para l√° e a partir da√≠ j√° ser√° distribu√≠do para os navegadores dos pais, todos com um atraso de n√£o mais de um segundo. Em geral - sim, a vida est√° melhorando. Mas h√° problemas. E esses problemas est√£o relacionados ao fato de o WebRTC ser exagerado para tais tarefas; n√£o foi projetado para eles e n√£o √© adequado para eles. Os problemas, al√©m da compatibilidade com codec, existem principalmente com a escalabilidade de um servidor de m√≠dia. Ou seja, ao mesmo tempo, 100 pais podem ser atendidos em um computador servidor e 500 j√° s√£o dif√≠ceis. Embora a rede permita. E observe a carga do processador no servidor com 100 conex√µes - j√° est√° perto de 90%. Como assim? Afinal, basta enviar um v√≠deo de som.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com o mesmo fluxo, se enviado via protocolo RTMP ao Flash player, voc√™ poder√° facilmente suportar 2000 conex√µes simult√¢neas em um servidor. O WebRTC √© apenas 100? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por qu√™? H√° duas raz√µes: primeiro, o protocolo WebRTC √© muito mais caro em termos de computa√ß√£o - por exemplo, todos os dados s√£o criptografados e consomem muito tempo do processador. E o segundo motivo, que discutiremos em mais detalhes, √© a implementa√ß√£o extremamente ineficiente do protocolo por seu criador - o Google, que fornece o c√≥digo c ++ de origem para essa implementa√ß√£o para adapta√ß√£o em servidores, gateways e outros aplicativos que desejam oferecer suporte ao WebRTC: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">webrtc.org/native-code </font></font></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 API WebRTC nativa do Google e compatibilidade com servidor de m√≠dia</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lembre-se de que o WebRTC foi criado para transferir √°udio e v√≠deo do navegador para o navegador e n√£o havia tarefas para oferecer suporte a muitas conex√µes simult√¢neas. Portanto, e n√£o apenas, a implementa√ß√£o do WebRTC no navegador n√£o deu a m√≠nima para o princ√≠pio b√°sico de design e arquitetura de sistemas t√©cnicos - eleg√¢ncia (nada mais), efici√™ncia, alto desempenho. A √™nfase foi colocada na confiabilidade e capacidade de gerenciamento com erros e situa√ß√µes extremas na rede - perda de pacotes, conex√µes, etc. O que, √© claro, √© bom. No entanto, ap√≥s uma an√°lise mais detalhada, verifica-se que essa √© a √∫nica coisa boa na implementa√ß√£o do WebRTC pelo Google. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejamos os pontos principais, pelos quais o uso da implementa√ß√£o do WebRTC pelo Google para servidores de m√≠dia √© extremamente problem√°tico.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.a O c√≥digo √© 10 vezes mais do que deveria e √© extremamente ineficiente.Este</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
√© um n√∫mero comprovado. Para come√ßar, voc√™ baixa cerca de 5 gigabytes de c√≥digo, dos quais apenas 500 megabytes s√£o relevantes para o WebRTC. Ent√£o voc√™ tenta se livrar do c√≥digo desnecess√°rio. Afinal, para as necessidades de um servidor de m√≠dia, voc√™ n√£o precisa de codifica√ß√£o / decodifica√ß√£o; o servidor deve receber apenas conte√∫do e encaminh√°-lo a todos. Quando voc√™ removeu todo o desnecess√°rio que voc√™ poderia (e voc√™ pode remover muito menos do que gostaria), ainda tem 100 megabytes de c√≥digo. Esta √© uma figura monstruosa. √â ela quem √© 10 vezes maior do que deveria ser.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito, neste momento, muitos dir√£o - como a codifica√ß√£o / decodifica√ß√£o n√£o √© necess√°ria? E a transcodifica√ß√£o do AAC para o Opus e vice-versa? E a transcodifica√ß√£o de VP9-&gt; H264? Se voc√™ fizer essa transcodifica√ß√£o no servidor, tamb√©m n√£o poder√° obter 5 conex√µes simult√¢neas. Se for realmente necess√°rio, a transcodifica√ß√£o deve ser feita n√£o por um servidor de m√≠dia, mas por outro programa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas vamos voltar ao problema do c√≥digo inchado e ilustr√°-lo. O que voc√™ acha que √© a profundidade da pilha de chamadas de fun√ß√£o ao enviar um quadro de v√≠deo j√° compactado? Uma chamada para winsock (no Windows) da fun√ß√£o send ou sendto (WSASend / WSASendTo)? N√£o, √© claro, √© preciso fazer mais trabalho. No caso do WebRTC, voc√™ precisa compactar o quadro no protocolo RTP e criptograf√°-lo, o que no total nos fornece o protocolo SRTP. √â necess√°rio salvar o quadro em caso de perda de pacotes para envi√°-lo novamente mais tarde. Quantos objetos e threads c ++ devem estar envolvidos nisso? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja como o WebRTC 61 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ft/lo/f9/ftlof9hwbtg9so0qbsoji-z93bw.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
faz isso </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">Como voc√™ pode ver nesta captura de tela, desde o momento em que alimentamos o quadro compactado no WebRTC, at√© o momento em que o colocamos na fila de objetos Paced_Sender, a profundidade da pilha de chamadas √© de 8 (!) E 7 objetos est√£o envolvidos!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, um PacedSender de thread separado puxa nosso quadro da fila e o envia para processamento adicional: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/o8/m4/et/o8m4etbmhrvwhvk01zagwptrwoy.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e finalmente, chegamos √† etapa 4, onde o quadro criptografado e j√° embalado pelo RTP depende da fila para ser enviada √† rede, que est√° envolvida em outro thread. Nesse momento, a profundidade da pilha de chamadas (no encadeamento PacedSender) √© 7 e mais 3 novos objetos est√£o envolvidos. O envio de thread ocupado chamar√° o WSASend / WSASendTo final tamb√©m ap√≥s 3-4 chamadas de fun√ß√£o aninhadas e envolver√° mais 3-4 novos objetos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, vimos tr√™s threads, cada um dos quais faz um √≥timo trabalho. Todo mundo que programou esses sistemas tem uma id√©ia de como essas coisas s√£o feitas e o que realmente precisa ser feito. De acordo com nossas estimativas, pelo menos 90% dos objetos e c√≥digos aqui s√£o sup√©rfluos e violam os princ√≠pios da programa√ß√£o orientada a objetos. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.b 4-5 threads s√£o alocados por conex√£o</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sem d√∫vida, com o n√∫mero de threads neste exemplo, tudo est√° em ordem. √â necess√°rio fornecer processamento ass√≠ncrono, n√£o bloquear ningu√©m, e todos os tr√™s threads s√£o necess√°rios. Em geral, um PeerConnection WebRTC aloca 4-5 threads. Bem, seria poss√≠vel manter dentro de 3. Mas n√£o menos. O problema √© que isso √© para todas as conex√µes! No servidor, por exemplo, voc√™ pode salvar 3 threads, mas eles servir√£o todas as conex√µes juntas e n√£o alocar√° 3 threads para cada conex√£o. O conjunto de encadeamentos √© uma solu√ß√£o de servidor inquestion√°vel para essas tarefas. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.c Soquetes ass√≠ncronos trabalhando nas mensagens do Windows</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O c√≥digo do Google WebRTC no Windows usa soquetes ass√≠ncronos atrav√©s do WSAAsyncSelect. Os programadores de servidor sabem que o uso da fun√ß√£o de sele√ß√£o no servidor √© suic√≠dio e o WSAAsyncSelect, embora melhore a situa√ß√£o, mas n√£o por uma ordem de magnitude. Se voc√™ deseja oferecer suporte a centenas e milhares de conex√µes, h√° uma solu√ß√£o melhor no Windows do que soquetes ass√≠ncronos. Soquetes sobrepostos e portas de conclus√£o de E / S devem estar ativadas, enviando notifica√ß√µes ao pool de threads que est√° executando o trabalho. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.d Conclus√£o</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Assim, podemos concluir: √© poss√≠vel aplicar o c√≥digo WebRTC do Google, sem grandes altera√ß√µes, a um servidor de m√≠dia, mas o servidor n√£o poder√° obter centenas de conex√µes simult√¢neas. Pode haver duas solu√ß√µes:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fazer grandes altera√ß√µes no c√≥digo do Google √©, sem exagero, quase imposs√≠vel - afinal, todos esses objetos s√£o muito bem ajustados um ao outro, n√£o encapsulam funcionalidade, n√£o s√£o blocos independentes que executam certo trabalho, como deveria ser. Envolv√™-los inalterados em outros cen√°rios √© imposs√≠vel.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o use o c√≥digo do Google, mas implemente tudo usando bibliotecas abertas, como libsrtp e similares. Talvez este seja o caminho certo, mas, al√©m do fato de que tamb√©m √© um trabalho enorme, voc√™ pode encontrar o fato de que sua implementa√ß√£o n√£o ser√° totalmente compat√≠vel com o Google e, portanto, n√£o funcionar√° ou n√£o funcionar√° em todos os casos, para por exemplo, com cromo, que n√£o pode ser tolerado. Voc√™ pode discutir com os caras do Google por um longo tempo, provar que cumpriu o padr√£o, mas eles n√£o cumpriram, e voc√™ estar√° certo mil vezes. Mas eles, na melhor das hip√≥teses, dir√£o: "n√≥s vamos consertar, talvez de alguma forma mais tarde". Voc√™ precisa ajustar o Chrome agora. E o ponto. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Por que tudo √© t√£o triste</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa situa√ß√£o com a transmiss√£o para navegadores em tempo real √© uma ilustra√ß√£o muito caracter√≠stica do que a "tecnologia orientada aos neg√≥cios" √†s vezes leva. A tecnologia motivada pelos neg√≥cios est√° se desenvolvendo na dire√ß√£o em que √© necess√°ria para os neg√≥cios e na medida em que seja agrad√°vel a eles. √â gra√ßas √† abordagem comercial que agora temos computadores pessoais e telefones celulares - nenhum governo ou minist√©rio central de planejamento poderia estar t√£o interessado em desenvolver e introduzir todas essas tecnologias de consumo para as massas. Os neg√≥cios privados, motivados pelo ganho pessoal de seus propriet√°rios, fizeram isso assim que surgiu uma oportunidade t√©cnica.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° muito se sabe, entende e aceita que bens e servi√ßos n√£o essenciais, aqueles sem os quais voc√™ pode viver em paz, s√£o melhor desenvolvidos por empresas privadas, ent√£o as coisas que s√£o vitalmente necess√°rias para uma pessoa - energia, estradas, pol√≠cia e educa√ß√£o escolar - devem ser desenvolvidas centralmente. institui√ß√µes controladas pelo estado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s, os filhos da Uni√£o Sovi√©tica e a mentalidade "tornemos a tecnologia tecnicamente correta e forte para que as pessoas possam us√°-la e tudo esteja bem", poder√≠amos, √© claro, dizer que em um sistema sovi√©tico planejado (se o governo decidir de repente), a tecnologia de streaming O IP em tempo real poderia ser desenvolvido e implementado em um ano e seria uma ordem de magnitude melhor do que o que a empresa j√° ganhou em 20 anos. Mas tamb√©m entendemos que isso n√£o se tornaria obsoleto e, no final, a longo prazo, ainda perderia alguma tecnologia comercial ocidental.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, uma vez que √© poss√≠vel se dar bem sem a interfer√™ncia do streaming, ele √© deixado √† merc√™ dos neg√≥cios privados. Que a desenvolve em seus pr√≥prios interesses, e n√£o nos interesses do consumidor. Como n√£o √© do interesse do consumidor? Mas e a oferta e a demanda? Do que o consumidor precisa, a empresa oferecer√°? Mas isso n√£o oferece. Todos os consumidores est√£o gritando: o Google suporta √°udio AAC no WebRTC, mas o Google nunca o faz, embora apenas cuspa para faz√™-lo. A Apple absolutamente n√£o se importa e n√£o implementa nada das t√£o necess√°rias tecnologias de streaming em seus gadgets. Por qu√™? Sim, porque nem sempre a empresa faz o que o consumidor precisa. Ele n√£o faz isso quando √© monopolista e n√£o tem medo de perder o consumidor. Ent√£o o neg√≥cio est√° ocupado fortalecendo sua posi√ß√£o. Ent√£o, o Google comprou nos √∫ltimos anos um monte de fabricantes de codecs de som.E agora empurra o √°udio do Opus e for√ßa o mundo inteiro a transcodificar o AAC-&gt; Opus para corresponder ao WebRTC, j√° que toda a tecnologia mudou h√° muito tempo para o √°udio AAC. O Google justifica isso com o fato de que o AAC √© uma tecnologia paga e o Opus √© gratuito. Mas, de fato, isso √© feito para estabelecer sua tecnologia como padr√£o. Como a Apple fez uma vez com o seu miser√°vel HLS, que fomos feitos para amar, ou como a Adobe fez com o seu irrespons√°vel protocolo RTMP ainda mais cedo. Aparelhos e navegadores ainda s√£o coisas tecnicamente dif√≠ceis de desenvolver, a partir daqui surgem os monopolistas, a partir daqui, como dizem, as coisas est√£o l√°. E o W3C e a IETF s√£o patrocinados pelos mesmos monopolistas, de modo que a mentalidade de "vamos fazer uma tecnologia tecnicamente correta e forte para que as pessoas possam us√°-la e tudo esteja bem" n√£o est√° l√° e nunca estar√°.Mas deveria ter sido.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qual √© o caminho para sair dessa situa√ß√£o? Aparentemente, apenas aguardando a tecnologia "certa" orientada aos neg√≥cios, o resultado da competi√ß√£o e todo tipo de coisa maravilhosa, finalmente, surgir√° algo democr√°tico, adequado para um m√©dico rural simples, para que ele possa fornecer servi√ßos de telemedicina com sua Internet normal. De fato, √© necess√°rio fazer uma emenda, n√£o para um simples m√©dico rural, mas para aqueles que podem pagar muito dinheiro, a empresa h√° muito tempo oferece solu√ß√µes de streaming em tempo real. Bom, confi√°vel, exigindo redes dedicadas e equipamentos especiais. Em muitos casos, e n√£o trabalhando no protocolo IP. O qual - e esse √© outro motivo para uma situa√ß√£o t√£o triste - n√£o foi criado em tempo real e nem sempre garante isso. Nem sempre, mas n√£o em situa√ß√µes vitais, √© bastante adequado no momento.Ent√£o, vamos tentar o WebRTC. At√© agora, dentre todos os males, ele √© o menor e mais democr√°tico. Pelo qual, afinal, voc√™ precisa agradecer ao Google.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Um pouco sobre servidores de m√≠dia que implementam o WebRTC</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wowza, Flashphoner, Kurento, Flussonic, Red5 Pro e Unreal Media Server - esses s√£o alguns dos servidores de m√≠dia compat√≠veis com o WebRTC. Eles fornecem a publica√ß√£o de v√≠deo de navegadores para o servidor e transmitem v√≠deo para navegadores via WebRTC a partir do servidor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os problemas descritos neste artigo, de maneiras diferentes e com graus variados de sucesso, s√£o resolvidos nesses produtos de software. </font><font style="vertical-align: inherit;">Alguns deles, por exemplo, Kurento e Wowza, fazem transcodifica√ß√£o de √°udio e v√≠deo diretamente no servidor, outros, por exemplo, Unreal Media Server, n√£o se transcodificam, mas fornecem outros programas para isso. </font><font style="vertical-align: inherit;">Alguns servidores, como o Wowza e o Unreal Media Server, suportam o streaming em todas as conex√µes atrav√©s de uma porta TCP e UDP central, porque o pr√≥prio WebRTC aloca uma porta separada para cada conex√£o, para que o provedor precise abrir muitas portas no firewall, o que cria problemas de seguran√ßa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitos pontos e sutilezas implementados em todos esses servidores de maneiras diferentes. </font><font style="vertical-align: inherit;">Quanto isso tudo combina com o consumidor, julgue voc√™, queridos usu√°rios.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt498404/index.html">A videoconfer√™ncia √© f√°cil e gr√°tis</a></li>
<li><a href="../pt498406/index.html">Como a personalidade de um jovem programador brilhante foi destru√≠da</a></li>
<li><a href="../pt498410/index.html">Vivaldi para PC e Vivaldi para Android - Jogo em equipe com pontua√ß√£o 3.0</a></li>
<li><a href="../pt498412/index.html">–°–æ–∑–Ω–∞–Ω–∏–µ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏–ª–∏ —á—Ç–æ –Ω–µ —Ç–∞–∫ —Å –≤—Ä–µ–º–µ–Ω–µ–º</a></li>
<li><a href="../pt498416/index.html">O Yandex vincular√° automaticamente o cart√£o a outra conta</a></li>
<li><a href="../pt498426/index.html">Como evacuamos a troca de tarefas do Yandex</a></li>
<li><a href="../pt498428/index.html">WAL-G: novos recursos e expans√£o da comunidade. Georgy Rylov</a></li>
<li><a href="../pt498430/index.html">O que acontece com o transporte em 22 de abril</a></li>
<li><a href="../pt498436/index.html">Guia de CI / CD do GitLab para o iniciante (quase) absoluto</a></li>
<li><a href="../pt498438/index.html">8 perguntas f√°ceis para mentores de est√°gio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>