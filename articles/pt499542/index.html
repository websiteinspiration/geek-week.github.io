<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸˆº ğŸšµğŸ¼ ğŸ˜° Top Fakapov Cyan ğŸ« ğŸ–ğŸ¿ ğŸ‘µ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bom para todos!Â 
 
 Meu nome Ã© Nikita, sou lÃ­der de equipe de engenheiros cianos. Uma das minhas responsabilidades na empresa Ã© reduzir o nÃºmero de in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Top Fakapov Cyan</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cian/blog/499542/"><img src="https://habrastorage.org/webt/zy/iu/-q/zyiu-qkcptbeezgf_c5adiagete.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bom para todos!&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu nome Ã© Nikita, sou lÃ­der de equipe de engenheiros cianos. </font><font style="vertical-align: inherit;">Uma das minhas responsabilidades na empresa Ã© reduzir o nÃºmero de incidentes relacionados Ã  infraestrutura no produto para zero. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que serÃ¡ discutido mais adiante nos trouxe muita dor, e o objetivo deste artigo Ã© impedir que outras pessoas repitam nossos erros ou, pelo menos, minimizar seu impacto.&nbsp;</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PreÃ¢mbulo</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Era uma vez, quando o Cyan consistia em monÃ³litos e ainda nÃ£o havia dicas de microsserviÃ§os, medimos a disponibilidade do recurso verificando 3-5 pÃ¡ginas.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resposta - estÃ¡ tudo bem, nÃ£o responda por muito tempo - alerta. </font><font style="vertical-align: inherit;">Quanto tempo eles nÃ£o devem trabalhar para que isso seja considerado um incidente, decidiram as pessoas nas reuniÃµes. </font><font style="vertical-align: inherit;">Uma equipe de engenheiros sempre esteve envolvida na investigaÃ§Ã£o do incidente. </font><font style="vertical-align: inherit;">Quando a investigaÃ§Ã£o foi concluÃ­da, eles escreveram um post-mortem - um tipo de relatÃ³rio para os correios no formato: o que foi, quanto tempo, o que foi feito no momento, o que serÃ¡ feito no futuro.&nbsp;</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As pÃ¡ginas principais do site, ou como entendemos, quebraram o fundo</font></font></h3>&nbsp;<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para entender de alguma forma a prioridade do erro, destacamos as pÃ¡ginas mais crÃ­ticas do site para a funcionalidade da empresa. </font><font style="vertical-align: inherit;">De acordo com eles, consideramos o nÃºmero de solicitaÃ§Ãµes e tempos limite bem-sucedidos / malsucedidos. </font><font style="vertical-align: inherit;">EntÃ£o, medimos o tempo de atividade.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que descobrimos que existem vÃ¡rias seÃ§Ãµes super importantes do site responsÃ¡veis â€‹â€‹pelo serviÃ§o principal - pesquisa e envio de anÃºncios. </font><font style="vertical-align: inherit;">Se o nÃºmero de solicitaÃ§Ãµes que falharam for maior que 1%, esse Ã© um incidente crÃ­tico. </font><font style="vertical-align: inherit;">Se em 15 minutos no horÃ¡rio nobre a porcentagem de erros exceder 0,1%, tambÃ©m serÃ¡ considerado um incidente crÃ­tico. </font><font style="vertical-align: inherit;">Esses critÃ©rios abrangem a maioria dos incidentes, o restante estÃ¡ alÃ©m do escopo deste artigo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ot/mw/k9/otmwk90qyl-jcomorjhkofebrgq.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os melhores incidentes de ciano</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
EntÃ£o, aprendemos precisamente a determinar o fato de que o incidente aconteceu.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, cada incidente em nosso paÃ­s Ã© descrito em detalhes e refletido no Ã©pico de Jira. </font><font style="vertical-align: inherit;">A propÃ³sito: para isso, iniciamos um projeto separado, chamado FAIL - somente Ã©picos podem ser criados nele.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se vocÃª coletar todas as falhas nos Ãºltimos anos, os lÃ­deres serÃ£o:&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incidentes relacionados ao mssql;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incidentes causados â€‹â€‹por fatores externos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erros de administrador.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos nos aprofundar nos detalhes dos erros dos administradores, bem como em algumas outras falhas interessantes.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quinto lugar - "Colocando ordem no DNS"</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Era uma terÃ§a-feira chuvosa. Decidimos limpar o cluster DNS.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu queria transferir os servidores DNS internos de bind para powerdns, destacando servidores completamente separados para ele, onde nÃ£o hÃ¡ nada alÃ©m de DNS.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Colocamos um servidor DNS em cada local dos nossos DCs, e chegou o momento de mover as zonas de ligaÃ§Ã£o para powerdns e mudar a infraestrutura para novos servidores.&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No auge da movimentaÃ§Ã£o, de todos os servidores que foram indicados no cache local de ligaÃ§Ã£o em todos os servidores, havia apenas um que estava no datacenter em SÃ£o Petersburgo. Esse CD foi inicialmente declarado como nÃ£o crÃ­tico para nÃ³s, mas de repente se tornou um Ãºnico ponto de falha.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas durante esse perÃ­odo de realocaÃ§Ã£o, o canal entre Moscou e SÃ£o Petersburgo caiu. </font><font style="vertical-align: inherit;">Na verdade, ficamos sem DNS por cinco minutos e levantamos quando o hoster resolveu os problemas.&nbsp;</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConclusÃµes:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
se anteriormente negligenciamos fatores externos durante a preparaÃ§Ã£o para o trabalho, agora eles tambÃ©m sÃ£o incluÃ­dos na lista do que estamos preparando. </font><font style="vertical-align: inherit;">E agora nos esforÃ§amos para garantir que todos os componentes sejam reservados n-2 e, durante a duraÃ§Ã£o do trabalho, podemos reduzir esse nÃ­vel para n-1.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao elaborar um plano de aÃ§Ã£o, marque os pontos em que o serviÃ§o pode cair e pense sobre o cenÃ¡rio em que tudo correu "pior do que nada", com antecedÃªncia.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Distribua servidores DNS internos por diferentes geolocalizaÃ§Ãµes / data centers / racks / switches / entradas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em cada servidor, coloque um servidor DNS em cache local, que redirecione as solicitaÃ§Ãµes para os principais servidores DNS e, se nÃ£o estiver disponÃ­vel, responderÃ¡ a partir do cache.&nbsp;</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quarto lugar - "Limpando o Nginx"</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um belo dia, nossa equipe decidiu que "o suficiente para suportar isso", e o processo de refatoraÃ§Ã£o das configuraÃ§Ãµes do nginx foi iniciado. </font><font style="vertical-align: inherit;">O objetivo principal Ã© trazer as configuraÃ§Ãµes para uma estrutura intuitiva. </font><font style="vertical-align: inherit;">Anteriormente, tudo era "estabelecido historicamente" e nÃ£o havia lÃ³gica em si. </font><font style="vertical-align: inherit;">Agora, cada server_name foi retirado para o arquivo com o mesmo nome e distribuÃ­do todas as configuraÃ§Ãµes em pastas. </font><font style="vertical-align: inherit;">A propÃ³sito, a configuraÃ§Ã£o contÃ©m 253949 linhas ou 7836520 caracteres e ocupa quase 7 megabytes. </font><font style="vertical-align: inherit;">Estrutura de nÃ­vel superior:&nbsp;</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estrutura Nginx</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">â”œâ”€â”€ access<font></font>
â”‚ &nbsp; â”œâ”€â”€ allow.list<font></font>
...<font></font>
â”‚ &nbsp; â””â”€â”€ whitelist.conf<font></font>
â”œâ”€â”€ geobase<font></font>
â”‚ &nbsp; â”œâ”€â”€ exclude.conf<font></font>
...<font></font>
â”‚ &nbsp; â””â”€â”€ geo_ip_to_region_id.conf<font></font>
â”œâ”€â”€ geodb<font></font>
â”‚ &nbsp; â”œâ”€â”€ GeoIP.dat<font></font>
â”‚ &nbsp; â”œâ”€â”€ GeoIP2-Country.mmdb<font></font>
â”‚ &nbsp; â””â”€â”€ GeoLiteCity.dat<font></font>
â”œâ”€â”€ inc<font></font>
â”‚ &nbsp; â”œâ”€â”€ error.inc<font></font>
...<font></font>
â”‚ &nbsp; â””â”€â”€ proxy.inc<font></font>
â”œâ”€â”€ lists.d<font></font>
â”‚ &nbsp; â”œâ”€â”€ bot.conf<font></font>
...<font></font>
â”‚ &nbsp; â”œâ”€â”€ dynamic<font></font>
â”‚ &nbsp; â””â”€â”€ geo.conf<font></font>
â”œâ”€â”€ lua<font></font>
â”‚ &nbsp; â”œâ”€â”€ cookie.lua<font></font>
â”‚ &nbsp; â”œâ”€â”€ log<font></font>
â”‚ &nbsp; â”‚ &nbsp; â””â”€â”€ log.lua<font></font>
â”‚ &nbsp; â”œâ”€â”€ logics<font></font>
â”‚ &nbsp; â”‚ &nbsp; â”œâ”€â”€ include.lua<font></font>
â”‚ &nbsp; â”‚ &nbsp; â”œâ”€â”€ ...<font></font>
â”‚ &nbsp; â”‚ &nbsp; â””â”€â”€ utils.lua<font></font>
â”‚ &nbsp; â””â”€â”€ prom<font></font>
â”‚ &nbsp; &nbsp; &nbsp; â”œâ”€â”€ stats.lua<font></font>
â”‚ &nbsp; &nbsp; &nbsp; â””â”€â”€ stats_prometheus.lua<font></font>
â”œâ”€â”€ map.d<font></font>
â”‚ &nbsp; â”œâ”€â”€ access.conf<font></font>
â”‚ &nbsp; â”œâ”€â”€ ..&nbsp;<font></font>
â”‚ &nbsp; â””â”€â”€ zones.conf<font></font>
â”œâ”€â”€ nginx.conf<font></font>
â”œâ”€â”€ robots.txt<font></font>
â”œâ”€â”€ server.d<font></font>
â”‚ &nbsp; â”œâ”€â”€ cian.ru<font></font>
â”‚ &nbsp; â”‚ &nbsp; â”œâ”€â”€ cian.ru.conf<font></font>
â”‚ &nbsp; â”‚ &nbsp; â”œâ”€â”€ ...<font></font>
â”‚ &nbsp; â”‚ &nbsp; â””â”€â”€ my.cian.ru.conf<font></font>
â”œâ”€â”€ service.d<font></font>
â”‚ &nbsp; â”œâ”€â”€ ...<font></font>
â”‚ &nbsp; â””â”€â”€ status.conf<font></font>
â””â”€â”€ upstream.d<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€â”€ cian-mcs.conf<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€â”€ ...<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;â””â”€â”€ wafserver.conf</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tornou-se muito melhor, mas no processo de renomear e distribuir as configuraÃ§Ãµes, algumas delas tinham a extensÃ£o errada e nÃ£o se enquadravam na diretiva include * .conf. </font><font style="vertical-align: inherit;">Como resultado, parte dos hosts ficou indisponÃ­vel e retornou 301 para o principal. </font><font style="vertical-align: inherit;">Devido ao fato de o cÃ³digo de resposta nÃ£o ser 5xx / 4xx, isso nÃ£o foi percebido imediatamente, mas apenas pela manhÃ£. </font><font style="vertical-align: inherit;">Depois disso, comeÃ§amos a escrever testes para testar componentes de infraestrutura. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConstataÃ§Ãµes:</font></font></b>&nbsp;<br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estruture corretamente as configuraÃ§Ãµes (nÃ£o apenas o nginx) e pense sobre a estrutura no estÃ¡gio inicial do projeto. </font><font style="vertical-align: inherit;">Assim, vocÃª os tornarÃ¡ mais compreensÃ­veis para a equipe, o que, por sua vez, reduzirÃ¡ o TTM.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para alguns componentes de infraestrutura, escreva testes. </font><font style="vertical-align: inherit;">Por exemplo: verificando se todos os nomes-chave do servidor retornam o status correto, + corpo da resposta. </font><font style="vertical-align: inherit;">SerÃ¡ suficiente ter em mÃ£os apenas alguns scripts que verificam as funÃ§Ãµes bÃ¡sicas do componente para que vocÃª nÃ£o se lembre freneticamente Ã s trÃªs da manhÃ£ o que mais precisa ser verificado.&nbsp;</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terceiro lugar - â€œDe repente terminou em Cassandraâ€</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os dados estavam crescendo constantemente e tudo estava bem atÃ© o momento em que o reparo de casos grandes comeÃ§ou a cair no cluster Cassandra, porque a compactaÃ§Ã£o nÃ£o podia funcionar neles.&nbsp;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em um dia chuvoso, o aglomerado quase se transformou em abÃ³bora, a saber:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">os lugares permaneceram em cerca de 20% do cluster total;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã© impossÃ­vel adicionar nÃ³s completamente, porque a limpeza nÃ£o funciona apÃ³s a adiÃ§Ã£o de um nÃ³ devido Ã  falta de espaÃ§o nas partiÃ§Ãµes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o desempenho cai um pouco, porque a compactaÃ§Ã£o nÃ£o funciona;&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o cluster estÃ¡ no modo de emergÃªncia.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/lp/ah/ie/lpahie7bann64sajoibumpqbr5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SaÃ­da - adicionados outros 5 nÃ³s sem limpeza, apÃ³s o que comeÃ§aram a remover sistematicamente do cluster e os reinserir como nÃ³s vazios nos quais o local terminou. </font><font style="vertical-align: inherit;">O tempo passou muito mais do que gostarÃ­amos. </font><font style="vertical-align: inherit;">Havia um risco de inacessibilidade parcial ou completa do cluster.&nbsp;</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConstataÃ§Ãµes:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todos os servidores cassandra nÃ£o devem ocupar mais de 60% do espaÃ§o em cada partiÃ§Ã£o.&nbsp;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eles nÃ£o devem ser carregados com mais de 50% da CPU.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NÃ£o obstrua o planejamento de capacidade e pense nele para cada componente, com base em suas especificidades.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quanto mais nÃ³s no cluster, melhor. </font><font style="vertical-align: inherit;">Os servidores que contÃªm uma pequena quantidade de dados sÃ£o migrados mais rapidamente e esse cluster Ã© mais fÃ¡cil de reanimar.&nbsp;</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Segundo lugar - "Os dados do armazenamento de valores-chave do consul desapareceram"</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a descoberta de serviÃ§os, como muitos, usamos o consul. Mas aqui, seu valor-chave tambÃ©m Ã© usado para cÃ¡lculos de monÃ³lito azul-verde. Ele armazena informaÃ§Ãµes sobre upstream ativo e inativo, que mudam de lugar durante a implantaÃ§Ã£o. Para isso, foi criado um serviÃ§o de implantaÃ§Ã£o que interagia com o KV. Em algum momento, os dados do KV desapareceram. Recuperado da memÃ³ria, mas com vÃ¡rios erros. Como resultado, durante o cÃ¡lculo, a carga no upstream foi distribuÃ­da de maneira desigual e tivemos muitos 502 erros devido Ã  sobrecarga dos back-ends na CPU. Como resultado, passamos do cÃ´nsul KV para o postgres, de onde nÃ£o Ã© tÃ£o fÃ¡cil removÃª-los.&nbsp;&nbsp; </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConstataÃ§Ãµes:</font></font><br>
</b><br>
<ul>
<li>  -           . ,       ES â€”        ,    ,   ,    action.destructive_requires_name: true.</li>
<li>      . ,    ( , &nbsp;python),      .</li>
</ul><br>
<h4>  â€” Â« Â»&nbsp;</h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em algum momento, notamos uma distribuiÃ§Ã£o desigual de carga no nginx upstream nos casos em que havia mais de 10 servidores no back-end. Como o round-robin enviou solicitaÃ§Ãµes de 1 para o Ãºltimo upstream em ordem, e cada recarregamento do nginx comeÃ§ou desde o inÃ­cio, o primeiro upstream sempre teve mais solicitaÃ§Ãµes do que o resto, resultando em um trabalho mais lento e em todo o site. Isso se tornou mais perceptÃ­vel Ã  medida que a quantidade de trÃ¡fego aumentou. Apenas atualizar o nginx para ativar o aleatÃ³rio nÃ£o funcionou - vocÃª precisa refazer um monte de cÃ³digo lua que nÃ£o decolou na versÃ£o 1.15 (naquele momento). Eu tive que corrigir nosso nginx 1.14.2, introduzindo suporte aleatÃ³rio nele. Isso resolveu o problema. Esse bug ganha a nomeaÃ§Ã£o de "capitÃ£o nÃ£o Ã³bvio". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConclusÃµes:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Foi muito interessante e emocionante investigar esse bug).&nbsp;</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure o monitoramento para ajudar a encontrar essas flutuaÃ§Ãµes rapidamente. </font><font style="vertical-align: inherit;">Por exemplo, vocÃª pode usar o ELK para monitorar os rps em cada back-end de cada montante e monitorar o tempo de resposta do ponto de vista do nginx. </font><font style="vertical-align: inherit;">Nesse caso, nos ajudou a identificar o problema.&nbsp;</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, a maioria das falhas poderia ter sido evitada com uma abordagem mais escrupulosa do que vocÃª estÃ¡ fazendo. </font><font style="vertical-align: inherit;">VocÃª deve sempre se lembrar da Lei de Murphy:&nbsp; </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tudo o que pode dar errado darÃ¡ errado</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e criarÃ¡ componentes com base nela.&nbsp;</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt499528/index.html">Uma ponte matemÃ¡tica "impressionante" que se estende alÃ©m do Grande Teorema de Fermat</a></li>
<li><a href="../pt499532/index.html">Palavras em nÃºmeros: anÃ¡lise de blog grÃ¡tis habravebinary com Yandex.Metrica</a></li>
<li><a href="../pt499534/index.html">Guia de desenvolvimento de serviÃ§os de back-end do Python</a></li>
<li><a href="../pt499536/index.html">Growbox como um mÃ©todo de conhecer a si mesmo</a></li>
<li><a href="../pt499540/index.html">Como funciona a renderizaÃ§Ã£o de jogos em 3D: texturizaÃ§Ã£o e filtragem de textura</a></li>
<li><a href="../pt499544/index.html">Aprenda redes neurais no Planilhas Google</a></li>
<li><a href="../pt499546/index.html">Desenvolvimento de firmware para uma cÃ¢mera de vÃ­deo analÃ³gica EVR-Y2022F</a></li>
<li><a href="../pt499548/index.html">MÃ¡scara - cuidar dos outros ou uma ilusÃ£o de seguranÃ§a?</a></li>
<li><a href="../pt499550/index.html">SoluÃ§Ãµes de baixo cÃ³digo para ecossistemas</a></li>
<li><a href="../pt499556/index.html">Servidor de jogos no MS Orleans - Parte 3: Resumo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>