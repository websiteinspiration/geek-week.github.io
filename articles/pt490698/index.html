<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçü§ù‚Äçüë®üèº üõéÔ∏è ü§≠ Recursos de montagem e entrega de aplicativos iOS üë®‚Äçüë®‚Äçüëß üßúüèº üë®üèø‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neste artigo, Maxim Shestakov, engenheiro de DevOps no est√∫dio Plarium Krasnodar, compartilha sua experi√™ncia na cria√ß√£o e fornecimento de aplicativos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Recursos de montagem e entrega de aplicativos iOS</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plarium/blog/490698/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste artigo, Maxim Shestakov, engenheiro de DevOps no est√∫dio Plarium Krasnodar, compartilha sua experi√™ncia na cria√ß√£o e fornecimento de aplicativos iOS para usu√°rios acumulados durante a depura√ß√£o de CI / CD.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/eq/j8/lseqj8pl9g9h1yrdm-h-ekpzuno.jpeg"><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Treinamento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo mundo conectado ao desenvolvimento de aplicativos para dispositivos Apple j√° conseguiu apreciar a usabilidade controversa da infraestrutura. </font><font style="vertical-align: inherit;">As dificuldades est√£o por toda parte: do menu de perfil do desenvolvedor √†s ferramentas de depura√ß√£o e montagem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitos artigos sobre o b√°sico na rede, portanto, tentaremos destacar o principal. </font><font style="vertical-align: inherit;">Aqui est√° o que voc√™ precisa para criar o aplicativo com sucesso:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conta de desenvolvedor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dispositivo baseado em macOS atuando como um servidor de compila√ß√£o;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificado de desenvolvedor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> gerado </font><font style="vertical-align: inherit;">, que ser√° usado para assinar o aplicativo;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aplicativo criado com um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exclusivo </font><font style="vertical-align: inherit;">(a import√¢ncia do Identificador de pacote configur√°vel deve ser observada, porque o uso do ID curinga impossibilita o uso de muitas fun√ß√µes do aplicativo, por exemplo: Dom√≠nios Associados, Notifica√ß√µes Push, Login da Apple e outros);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfil de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> assinatura do aplicativo.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O certificado de desenvolvedor deve ser gerado atrav√©s do Keychain em qualquer dispositivo macOS. </font><font style="vertical-align: inherit;">O tipo de certificado √© muito importante. </font><font style="vertical-align: inherit;">Dependendo do ambiente do aplicativo (Dev, QA, Staging, Produ√ß√£o), ele ser√° diferente (Desenvolvimento ou Distribui√ß√£o), bem como o tipo de perfil de assinatura do aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os principais tipos de perfis:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desenvolvimento - projetado para assinar o aplicativo da equipe de desenvolvimento, usando o certificado de Desenvolvimento (nome do formul√°rio iPhone Developer: XXXXX);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ad Hoc - destinado √† assinatura de um aplicativo de teste e verifica√ß√£o interna pelo departamento de controle de qualidade, usando o certificado de distribui√ß√£o do desenvolvedor (nome do tipo de distribui√ß√£o do iPhone: XXXXX);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App Store - vers√£o lan√ßada para testes externos atrav√©s do TestFlight e upload para a App Store, usando o certificado de distribui√ß√£o do desenvolvedor.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao gerar perfis de Desenvolvimento e Ad Hoc, tamb√©m </font><font style="vertical-align: inherit;">√© </font><font style="vertical-align: inherit;">indicada uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lista de dispositivos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nos quais voc√™ pode instalar a compila√ß√£o, o que permite restringir ainda mais o acesso dos usu√°rios. </font><font style="vertical-align: inherit;">O perfil da App Store n√£o possui uma lista de dispositivos, pois o TestFlight √© respons√°vel pelo controle de acesso durante o teste beta fechado, que ser√° discutido mais adiante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para maior clareza, voc√™ pode apresentar o perfil do desenvolvedor na forma de um tablet abaixo. </font><font style="vertical-align: inherit;">√â mais f√°cil entender quais par√¢metros para a montagem precisamos e onde obt√™-los.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qd/dt/u9/qddtu9hfklorm9kmotcctpr-hoc.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Montagem</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para facilitar a separa√ß√£o de montagens por projeto e ambiente, usamos os nomes dos perfis da exibi√ß√£o </font></font><code>${ProjectName}_${Instance}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ou seja, o nome da inst√¢ncia do projeto + (depende do ambiente do aplicativo: Dev, QA, GD, Staging, Live e assim por diante). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao importar para um servidor de constru√ß√£o, o perfil altera seu nome para um ID exclusivo e move-se para a pasta </font></font><code>/Users/$Username/Library/MobileDevice/Provisioning Profiles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(onde </font></font><code>$Username</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corresponde ao nome da conta do usu√°rio do servidor de constru√ß√£o). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem duas maneiras de criar o arquivo * .ipa - obsoleto (PackageApplication) e moderno (por meio da cria√ß√£o e exporta√ß√£o do XcAchive). </font><font style="vertical-align: inherit;">O primeiro m√©todo √© considerado obsoleto, pois a partir da vers√£o 8.3, o m√≥dulo de empacotamento de arquivos do aplicativo foi removido da distribui√ß√£o do Xcode. </font><font style="vertical-align: inherit;">Para us√°-lo, voc√™ precisa copiar o m√≥dulo do Xcode antigo (vers√£o 8.2 e anterior) para a pasta: </font></font><br>
<code>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ </code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, em seguida, execute o comando:</font></font><br>
<br>
<pre><code class="bash hljs">chmod +x /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/*</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, voc√™ precisa coletar o arquivo * .app do aplicativo:</font></font><br>
<br>
<pre><code class="bash hljs">xcodebuild \<font></font>
-workspace <span class="hljs-variable">$ProjectDir</span>/<span class="hljs-variable">$ProjectName</span>.xcworkspace \<font></font>
-scheme <span class="hljs-variable">$SchemeName</span> \<font></font>
-sdk iphoneos \<font></font>
build \<font></font>
-configuration Release \<font></font>
-derivedDataPath build \<font></font>
CODE_SIGN_IDENTITY=‚Äù<span class="hljs-variable">$DevAccName</span>‚Äù\<font></font>
PROVISIONING_PROFILE=‚Äù<span class="hljs-variable">$ProfileId</span>‚Äù<font></font>
DEPLOYMENT_POSTPROCESSING=YES \<font></font>
SKIP_INSTALL=YES \<font></font>
ENABLE_BITCODE=NO<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde: </font></font><br>
<br>
<code>-workspace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- caminho para o arquivo do projeto. </font></font><br>
<br>
<code>-scheme</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- circuito usado especificado no projeto. </font></font><br>
<br>
<code>-derivedDataPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- o caminho para descarregar o aplicativo montado (* .app). </font></font><br>
<br>
<code>CODE_SIGN_IDENTITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- o nome da conta de desenvolvedor que pode ser verificada no Keychain (desenvolvedor do iPhone: XXXX XXXXXXX, sem o TeamID entre colchetes). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/lk/fe/pmlkfeglfyjjkdndrmzvtzr8bsu.jpeg"><br>
<br>
<code>PROVISIONING_PROFILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- O ID do perfil para assinar o aplicativo, que pode ser obtido com o comando:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> <span class="hljs-string">"/Users/<span class="hljs-variable">$Username</span>/Library/MobileDevice/Provisioning Profiles/"</span> &amp;&amp; find *.mobileprovision -<span class="hljs-built_in">type</span> f | xargs grep -li <span class="hljs-string">"&gt;<span class="hljs-variable">${ProjectName}</span>_<span class="hljs-variable">${Instance}</span>&lt;"</span> | sed -e <span class="hljs-string">'s/.mobileprovision//'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o aplicativo usar um perfil adicional (por exemplo, para notifica√ß√µes push), </font></font><code>PROVISIONING_PROFILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indique:</font></font><br>
<br>
<pre><code class="bash hljs">APP_PROFILE=‚Äù<span class="hljs-variable">$AppProfile</span>‚Äù \<font></font>
EXTENSION_PROFILE=‚Äù<span class="hljs-variable">$ExtProfile</span>‚Äù \</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, o arquivo * .app resultante deve ser empacotado em * .ipa. </font><font style="vertical-align: inherit;">Para fazer isso, voc√™ pode usar um comando do formul√°rio:</font></font><br>
<br>
<pre><code class="bash hljs">/usr/bin/xcrun --sdk iphoneos PackageApplication \<font></font>
-v $(find <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>/build/Build/Products/Release-iphoneos"</span> -name <span class="hljs-string">"*.app"</span>) \<font></font>
-o <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>/<span class="hljs-variable">$ProjectName_</span><span class="hljs-variable">$Instance</span>.ipa"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, esse m√©todo √© considerado obsoleto do ponto de vista da Apple. </font><font style="vertical-align: inherit;">√â relevante obter * .ipa exportando do arquivo do aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro voc√™ precisa coletar o arquivo morto com o comando:</font></font><br>
<br>
<pre><code class="bash hljs">xcodebuild \<font></font>
-workspace <span class="hljs-variable">$ProjectDir</span>/<span class="hljs-variable">$ProjectName</span>.xcworkspace \<font></font>
-scheme <span class="hljs-variable">$SchemeName</span> \<font></font>
-sdk iphoneos \<font></font>
-configuration Release \<font></font>
archive \<font></font>
-archivePath <span class="hljs-variable">$ProjectDir</span>/build/<span class="hljs-variable">$ProjectName</span>.xcarchive \<font></font>
CODE_SIGN_IDENTITY=‚Äù<span class="hljs-variable">$DevAccName</span>‚Äù \<font></font>
PROVISIONING_PROFILE=‚Äù<span class="hljs-variable">$ProfileId</span>‚Äù<font></font>
ENABLE_BITCODE=NO \<font></font>
SYNCHRONOUS_SYMBOL_PROCESSING=FALSE</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As diferen√ßas est√£o no m√©todo de montagem e na op√ß√£o </font></font><code>SYNCHRONOUS_SYMBOL_PROCESSING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que desativa o descarregamento de caracteres durante a montagem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, precisamos gerar um arquivo com configura√ß√µes de exporta√ß√£o:</font></font><br>
<br>
<pre><code class="bash hljs">ExportSettings=<span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>/exportOptions.plist"</span><font></font>
<font></font>
cat &lt;&lt; EOF &gt; <span class="hljs-variable">$ExportSettings</span>
&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;<font></font>
&lt;!DOCTYPE plist PUBLIC <span class="hljs-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="hljs-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;<font></font>
&lt;plist version=<span class="hljs-string">"1.0"</span>&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;compileBitcode&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">false</span>/&gt;<font></font>
&lt;key&gt;uploadBitcode&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">false</span>/&gt;<font></font>
&lt;key&gt;uploadSymbols&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">false</span>/&gt;<font></font>
&lt;key&gt;method&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$Method</span>&lt;/string&gt;<font></font>
&lt;key&gt;provisioningProfiles&lt;/key&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;<span class="hljs-variable">$BundleID</span>&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$ProfileId</span>&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;key&gt;signingCertificate&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$DevAccName</span>&lt;/string&gt;<font></font>
&lt;key&gt;signingStyle&lt;/key&gt;<font></font>
&lt;string&gt;manual&lt;/string&gt;<font></font>
&lt;key&gt;stripSwiftSymbols&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">true</span>/&gt;<font></font>
&lt;key&gt;teamID&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$TeamID</span>&lt;/string&gt;<font></font>
&lt;key&gt;thinning&lt;/key&gt;<font></font>
&lt;string&gt;&lt;none&gt;&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/plist&gt;<font></font>
EOF<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde: </font></font><br>
<br>
<code>$Method</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- o m√©todo de entrega corresponde ao tipo de perfil de assinatura do aplicativo, ou seja, para Desenvolvimento, o valor ser√° desenvolvimento, para Ad Hoc - ad-hoc e para a App Store - loja de aplicativos. </font></font><br>
<br>
<code>$BundleID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- O ID do aplicativo especificado nas configura√ß√µes do aplicativo. </font><font style="vertical-align: inherit;">Voc√™ pode verificar com o comando:</font></font><br>
<br>
<pre><code class="bash hljs">defaults <span class="hljs-built_in">read</span> <span class="hljs-variable">$ProjectDir</span>/Info CFBundleIdentifier</code></pre><br>
<code>$DevAccName  $ProfileId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- configura√ß√µes para o nome do desenvolvedor e o ID do perfil de assinatura que foram usados ‚Äã‚Äãanteriormente e devem corresponder aos valores nas configura√ß√µes de exporta√ß√£o. </font></font><br>
<br>
<code>$TeamID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ID de dez d√≠gitos entre colchetes ap√≥s o nome do desenvolvedor, por exemplo: Desenvolvedor do iPhone: ....... (XXXXXXXXXX); </font><font style="vertical-align: inherit;">pode verificar no chaveiro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, usando o comando export, obtemos o arquivo * .ipa necess√°rio:</font></font><br>
<br>
<pre><code class="bash hljs">xcodebuild \<font></font>
-exportArchive \<font></font>
-archivePath <span class="hljs-variable">$ProjectDir</span>/build/<span class="hljs-variable">$ProjectName</span>.xcarchive \<font></font>
-exportPath <span class="hljs-variable">$ProjectDir</span> \<font></font>
-exportOptionsPlist <span class="hljs-variable">$ExportSettings</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrega</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, o arquivo montado deve ser entregue ao usu√°rio final, ou seja, instalado no dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a distribui√ß√£o de desenvolvimento e compila√ß√µes Ad Hoc, existem muitos servi√ßos como HockeyApp, AppBlade e outros, mas neste artigo falaremos sobre um servidor aut√¥nomo para distribui√ß√£o de aplicativos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A instala√ß√£o do aplicativo para iOS ocorre em 2 etapas:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obten√ß√£o do manifesto de instala√ß√£o do aplicativo por meio do Servi√ßo de Itens.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instalando o arquivo * .ipa de acordo com as informa√ß√µes especificadas no manifesto via HTTPS.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, para iniciantes, precisamos gerar o manifesto de instala√ß√£o (tipo de arquivo * .plist) com o comando:</font></font><br>
<br>
<pre><code class="bash hljs">cat &lt;&lt; EOF &gt; <span class="hljs-variable">$manifest</span>
&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;<font></font>
&lt;!DOCTYPE plist PUBLIC <span class="hljs-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="hljs-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;<font></font>
&lt;plist version=<span class="hljs-string">"1.0"</span>&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;items&lt;/key&gt;<font></font>
&lt;array&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;assets&lt;/key&gt;<font></font>
&lt;array&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;kind&lt;/key&gt;<font></font>
&lt;string&gt;software-package&lt;/string&gt;<font></font>
&lt;key&gt;url&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$ipaUrl</span>&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/array&gt;<font></font>
&lt;key&gt;metadata&lt;/key&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;bundle-identifier&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$BundleID</span>&lt;/string&gt;<font></font>
&lt;key&gt;bundle-version&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$AppVersion</span>&lt;/string&gt;<font></font>
&lt;key&gt;kind&lt;/key&gt;<font></font>
&lt;string&gt;software&lt;/string&gt;<font></font>
&lt;key&gt;title&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$ProjectName_</span><span class="hljs-variable">$Instance</span>&lt;/string&gt;<font></font>
&lt;key&gt;subtitle&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$Instance</span>&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/array&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/plist&gt;<font></font>
EOF</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, o manifesto cont√©m quase todos os par√¢metros envolvidos na montagem do aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vers√£o do aplicativo ( </font></font><code>$AppVersion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) pode ser verificada com o comando:</font></font><br>
<br>
<pre><code class="bash hljs">defaults <span class="hljs-built_in">read</span> <span class="hljs-variable">$ProjectDir</span>/Info CFBundleVersion</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O par√¢metro </font></font><code>$ipaUrl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cont√©m um link direto para baixar o arquivo * .ipa. </font><font style="vertical-align: inherit;">A partir da s√©tima vers√£o do iOS, o aplicativo deve ser instalado via HTTPS. </font><font style="vertical-align: inherit;">Na oitava vers√£o, o formato do manifesto mudou um pouco: os blocos com configura√ß√µes para √≠cones de aplicativos do formul√°rio foram removidos</font></font><br>
<br>
<pre><code class="bash hljs">&lt;images&gt;<font></font>
   &lt;image&gt;...&lt;/image&gt;<font></font>
&lt;/images&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, para instalar o aplicativo, basta uma p√°gina html simples com um link do formul√°rio:</font></font><br>
<br>
<pre><code class="bash hljs">itms-services://?action=download-manifest&amp;url=https://<span class="hljs-variable">$ServerUrl</span>/<span class="hljs-variable">$ProjectName</span>/<span class="hljs-variable">$Instance</span>/iOS/<span class="hljs-variable">$AppVersion</span>/manifest.plist</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para as necessidades dos departamentos de desenvolvimento e teste, a Plarium criou seu aplicativo de instala√ß√£o de compila√ß√£o, que nos fornece:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autonomia e independ√™ncia,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controle de acesso centralizado e instala√ß√£o segura de aplicativos por meio de links "tempor√°rios" criados dinamicamente,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funcionalidade extens√≠vel (ou seja, a equipe de desenvolvimento, se necess√°rio, pode integrar as fun√ß√µes ausentes em um aplicativo existente).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, falaremos sobre o teste de aplicativos de pr√©-lan√ßamento usando o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TestFlight</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os pr√©-requisitos para o download s√£o o tipo de perfil de assinatura da App Store e a presen√ßa de chaves de API geradas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem v√°rias maneiras de baixar o aplicativo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">via Xcode (Organizer),</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atrav√©s do altool,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">via Application Loader para vers√µes mais antigas do Xcode (agora Transporter).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para carregamento autom√°tico, √© utilizado altool, que tamb√©m possui dois m√©todos de autoriza√ß√£o:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Senha espec√≠fica do aplicativo,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chave API</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â prefer√≠vel fazer o download do aplicativo usando a API Key. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obter a chave da API, siga o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e gere a chave. </font><font style="vertical-align: inherit;">Al√©m da pr√≥pria chave no formato * .p8, precisaremos de dois par√¢metros: IssuerID e KeyID. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/el/tr/7jeltrm88wb-m74uokirbdw59xs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, importamos a chave baixada para o servidor de compila√ß√£o:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p ~/.appstoreconnect/private_keys<font></font>
mv ~/Downloads/AuthKey_<span class="hljs-variable">${KeyID}</span>.p8 ~/.appstoreconnect/private_keys/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de carregar o aplicativo no TestFlight, voc√™ precisa validar o aplicativo, fa√ßa isso com o comando:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool \<font></font>
--validate-app \<font></font>
-t ios \<font></font>
-f $(find <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>"</span> -name <span class="hljs-string">"*.ipa"</span>) \<font></font>
--apiKey ‚Äú<span class="hljs-variable">$KeyID</span>‚Äù \<font></font>
--apiIssuer ‚Äú<span class="hljs-variable">$IssuerID</span>‚Äù </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde </font></font><code>apiKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>apiIssuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">possui valores de campo na p√°gina de gera√ß√£o de chave da API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, ap√≥s a valida√ß√£o bem-sucedida, carregamos o aplicativo com um comando </font></font><code>--upload-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com os mesmos par√¢metros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O aplicativo ser√° testado pela Apple dentro de um a dois dias e depois estar√° dispon√≠vel para testadores externos: eles receber√£o links de e-mail para instala√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra maneira de baixar o aplicativo atrav√©s do altool √© usar a senha espec√≠fica do aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obter a senha espec√≠fica do aplicativo, siga o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e gere-o na se√ß√£o Seguran√ßa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k6/3k/lk/k63klknhpg0dtwoukakdzmn02om.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, crie um registro do servidor de compila√ß√£o no Keychain com essa senha. </font><font style="vertical-align: inherit;">A partir da vers√£o 11 do Xcode, isso pode ser feito com o comando:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool --store-password-in-keychain-item <span class="hljs-string">"Altool"</span> -u <span class="hljs-string">"<span class="hljs-variable">$DeveloperName</span>"</span> -p <span class="hljs-variable">$AppPswd</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde: </font></font><br>
<br>
<code>$DeveloperName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© o nome da conta de desenvolvedor do iOS usada para fazer login nos servi√ßos da Apple. </font></font><br>
<br>
<code>$AppPswd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Senha espec√≠fica do aplicativo gerada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, obtemos o valor do par√¢metro asc-provider e verificamos o sucesso da importa√ß√£o da senha com o comando:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool --list-providers -u <span class="hljs-string">"<span class="hljs-variable">$DeveloperName</span>"</span> -p <span class="hljs-string">"@keychain:Altool"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Temos a conclus√£o:</font></font><br>
<br>
<pre><code class="bash hljs">Provider listing:<font></font>
- Long Name - - Short Name -<font></font>
XXXXXXX        XXXXXXXXX</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, o valor desejado de Nome Curto (provedor ascendente) corresponde ao par√¢metro $ TeamID que usamos ao criar o aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para validar e carregar o aplicativo no TestFlight, use o comando:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool \<font></font>
--(validate|upload)-app \  <font></font>
-f $(find <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>"</span> -name <span class="hljs-string">"*.ipa"</span>) \<font></font>
-u <span class="hljs-string">"<span class="hljs-variable">$DeveloperName</span>"</span> \<font></font>
-p <span class="hljs-string">"@keychain:Altool"</span> \</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como um valor de par√¢metro, </font></font><code>-p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">voc√™ pode pegar o valor </font></font><code>$AppPswd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na forma n√£o criptografada (expl√≠cita). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, como j√° mencionado, do ponto de vista da operabilidade, √© melhor selecionar a Chave da API para autoriza√ß√£o de altool, pois em diferentes vers√µes do Xcode s√£o encontrados certos problemas (ele n√£o "v√™" o Keychain, erros de autoriza√ß√£o durante o descarregamento, etc.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso, de fato, √© tudo. </font><font style="vertical-align: inherit;">Desejo a todos envolvidos em compila√ß√µes bem-sucedidas e lan√ßamentos sem problemas na App Store.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt490684/index.html">Sele√ß√£o de cabos para cabeamento estruturado</a></li>
<li><a href="../pt490686/index.html">Not√≠cias do mundo do OpenStreetMap No. 500 (11.02.2020-17.02.2020)</a></li>
<li><a href="../pt490690/index.html">Criamos o diret√≥rio de endere√ßos WEB do PHP + LDAP</a></li>
<li><a href="../pt490694/index.html">Principais coment√°rios no c√≥digo fonte</a></li>
<li><a href="../pt490696/index.html">Como funciona o Mail for Business - lojas on-line e remetentes principais</a></li>
<li><a href="../pt490700/index.html">Curso de Processamento de Linguagem Natural</a></li>
<li><a href="../pt490704/index.html">Modelos japoneses e californianos Kano</a></li>
<li><a href="../pt490708/index.html">Companhias a√©reas finlandesas Finnair: como a tripula√ß√£o treina e um pouco sobre o interior da cozinha</a></li>
<li><a href="../pt490714/index.html">Como obter 100 mil por c√≥digo. Guia Completo para Iniciantes</a></li>
<li><a href="../pt490716/index.html">Como garantir a opera√ß√£o de alta qualidade da rede local de uma pequena empresa?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>