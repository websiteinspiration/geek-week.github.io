<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏻 🏅 ⛹🏾 Comment ranger l'historique de vos commits dans Git 🚌 🙆🏽 🐒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous publions une traduction de l' article que nous avons trouvé sur hackernoon.com. Son auteur, Thiago Miranda, explique comment rendre le travail av...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment ranger l'historique de vos commits dans Git</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plarium/blog/495328/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous </font><font style="vertical-align: inherit;">publions </font><font style="vertical-align: inherit;">une traduction de l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article que</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons trouvé sur hackernoon.com. </font><font style="vertical-align: inherit;">Son auteur, Thiago Miranda, explique comment rendre le travail avec Git plus pratique et efficace.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8d/te/0l/8dte0lg4fpm97opp8yw1gnciofu.png"><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À propos de quelques commandes extrêmement utiles dans Git</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis un mois, je fais de la programmation par paires et j'ai créé plusieurs centaines de commits dans Git. </font><font style="vertical-align: inherit;">Dans l'article, je vais partager le plus important de ce que j'ai appris pendant cette période: je vais parler de travailler avec l'histoire des commits, des techniques réussies et comment les implémenter en utilisant une douzaine d'équipes.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Quelle est l'histoire de Git?</font></font></h4><br>
<img src="https://habrastorage.org/webt/w0/dp/hx/w0dphxq581mzm3p2fnn98h6txw0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un registre précis de toutes les validations contenant les modifications apportées aux fichiers. </font><font style="vertical-align: inherit;">Vous pouvez y suivre des modifications spécifiques et l'heure à laquelle elles ont été apportées, ou comparer la version actuelle avec la précédente. </font><font style="vertical-align: inherit;">Où voir l'histoire? </font><font style="vertical-align: inherit;">Entrez la commande via Git Bash:</font></font><br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">log</span> --oneline</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez trop de validations, vous pouvez passer d'un commentaire à un autre à l'aide des touches fléchées ou des touches Page précédente / Page suivante - comme dans tout autre fichier. </font><font style="vertical-align: inherit;">Pour quitter, appuyez sur la touche de raccourci (q).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. À propos des commentaires sur les commits</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N'écrivez pas de commentaires dénués de sens, ils doivent être concis et ne nécessitant aucune explication. </font><font style="vertical-align: inherit;">Leur tâche consiste à indiquer les modifications que vous avez apportées au code et ce qu'elles affectent.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment ne pas: "Fixed index.html"</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment: "Amélioration de la vitesse de la barre de navigation"</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons à quoi cela sert. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginez que vous travaillez sur un projet d'une telle ampleur que la plupart des spécialistes qui y travaillent ne savent même pas. </font><font style="vertical-align: inherit;">Vous développez une nouvelle fonctionnalité, la testez sur votre équipement, et tout fonctionne bien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais après une poussée, tout cesse soudainement de fonctionner, et la première chose que vous vérifiez est les modifications apportées lors du développement de cette fonctionnalité. </font><font style="vertical-align: inherit;">Dans le journal Git, vous trouverez de nombreuses validations avec des commentaires dans le style "fixe". </font><font style="vertical-align: inherit;">Imaginez combien de temps vous avez à consacrer à trouver le bon!</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Faites toujours des commits</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Valide, valide et valide à nouveau. </font><font style="vertical-align: inherit;">Fin de la fonction - ajout d'une validation, amélioration du style d'un élément de bloc - ajout d'une validation et ainsi de suite. </font><font style="vertical-align: inherit;">Idéalement, vous devriez envoyer un commit à chaque changement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pensez peut-être: pourquoi y a-t-il tant de commits? </font><font style="vertical-align: inherit;">La raison principale est que vos nouvelles fonctionnalités peuvent entrer en conflit avec le code de quelqu'un d'autre, mais si vous effectuez toujours de petites modifications, les trouver et les corriger sera plus facile. </font><font style="vertical-align: inherit;">Cela vous fait gagner du temps en suivant des dizaines ou des centaines de lignes modifiées dans le même commit.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Corrigez le dernier commentaire sur le commit</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et si, après avoir ajouté un petit commit à votre référentiel local, vous souhaitez corriger la faute de frappe ou faire un commentaire sur le commit plus en détail? </font><font style="vertical-align: inherit;">Faire des changements est assez simple avec la commande:</font></font><br>
<br>
<pre><code class="bash hljs">git commit -m “correct message” --amend</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remarque: si vous avez déjà commencé à vous engager dans un référentiel distant, cette commande est préférable de ne pas utiliser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la documentation officielle pour</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">de</font></a><font style="vertical-align: inherit;"> détails </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Combinez les derniers X commits en un seul</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Situation: en envoyant un commit à une nouvelle fonctionnalité, vous comprenez que vous avez besoin d'une petite modification de plus, apportez des modifications minimales et recommencez ... En conséquence, 5 validations sont à peu près la même chose. </font><font style="vertical-align: inherit;">C'est arrivé? </font><font style="vertical-align: inherit;">Ces commits sont supprimés de la vue générale de votre histoire dans Git, mais si vous le souhaitez, ils peuvent être facilement corrigés à l'aide de la commande:</font></font><br>
<br>
<pre><code class="bash hljs">git reset HEAD~3</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La commande HEAD ~ 3 annule 3 commits supérieurs, y compris le plus récent. </font><font style="vertical-align: inherit;">Dans cet exemple, vos trois dernières validations seront supprimées du journal, mais les modifications du code resteront en place. </font><font style="vertical-align: inherit;">Il est maintenant temps de voir quel code vous devez valider, pour cela nous entrons la commande:</font></font><br>
<br>
<pre><code class="bash hljs">git stage --diff</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous verrez que toutes les modifications apportées aux validations que vous avez supprimées de l'historique sont désormais indexées, vous pouvez donc les valider à nouveau, cette fois en une seule fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que HEAD fait généralement référence au dernier commit que vous avez ajouté. </font><font style="vertical-align: inherit;">Si vous n'êtes pas sûr, consultez le journal Git. </font><font style="vertical-align: inherit;">Si votre dernier commit a été gelé (pas le cas le plus courant), la commande HEAD ~ 1 effacera tous les commits de la branche gelée. </font><font style="vertical-align: inherit;">Pour en savoir plus, consultez la documentation.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Supprimer le dernier commit avec modifications</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soyez prudent, car cette méthode effacera tous les changements sans la possibilité de revenir en arrière. </font><font style="vertical-align: inherit;">Il est généralement utilisé après avoir expérimenté avec du code si leur résultat ne répond pas aux attentes. </font><font style="vertical-align: inherit;">Je vous recommande d'essayer d'abord dans le référentiel sandbox.</font></font><br>
<br>
<pre><code class="bash hljs">git reset –-hard HEAD~1</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, votre dernier commit a été supprimé, ainsi que toutes les modifications pertinentes dans le code.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Effacez votre historique de commit</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La façon la plus efficace d'effacer l'historique de validation est d'utiliser la commande rebase. </font><font style="vertical-align: inherit;">Attention: vous pouvez supprimer un commit en appuyant accidentellement sur la mauvaise touche. </font><font style="vertical-align: inherit;">Exécutons donc rebase de manière interactive (indicateur -i) avec la commande:</font></font><br>
<br>
<pre><code class="bash hljs">git rebase -i HEAD~5</code></pre><br>
<img src="https://habrastorage.org/webt/sm/nj/kn/smnjknlxxntacniqh4iruwpmtne.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dès que vous le saisissez, vous verrez une liste des 5 derniers commits (HEAD ~ 5) à l'intérieur du terminal. Toutes les validations sont triées par date, c'est-à-dire que la première sera la plus récente (cette liste est ouverte à l'aide de Vim, l'éditeur de texte Git par défaut qui permet de modifier les fichiers texte à l'intérieur du terminal). Et voici une brève instruction avec plusieurs commandes utiles. Dans la plupart des cas, vous aurez besoin des commandes squash et reword. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le remplacement de la commande pick par la commande squash supprimera cette validation du journal et toutes les modifications du code seront regroupées avec la dernière validation mise en évidence par la commande pick. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez ajuster le commentaire, vous pouvez remplacer la commande pick par la commande reword et réécrire le commentaire.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez maintenant passer à la fenêtre suivante, où vous devez écrire un commentaire pour le groupe de commits que vous allez coller à l'aide de squash. </font><font style="vertical-align: inherit;">Pour continuer, appuyez sur ESC et entrez:</font></font><br>
<br>
<pre><code class="bash hljs">:wq!</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un deux-points est </font></font><code>(:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nécessaire pour indiquer que vous voulez transférer la commande, </font></font><code>(w)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">écrire (enregistrer) les modifications, </font></font><code>(q)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quitter et </font></font><code>(!)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exécuter la commande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que chaque groupe de validation recevra votre commentaire. </font><font style="vertical-align: inherit;">Le résultat peut être vérifié dans le journal Git. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si pour une raison quelconque vous quittez cette fenêtre sans terminer l'opération, vous pouvez revenir à tout moment avec la commande:</font></font><br>
<br>
<pre><code class="bash hljs">git rebase --edit</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez quitter la fenêtre sans enregistrer les modifications, appuyez sur la touche ESC et entrez:</font></font><br>
<br>
<pre><code class="bash hljs">:q!</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vim recevra une commande pour fermer le fichier sans l'enregistrer.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Gérer l'indexation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Habituellement, vous devez envoyer des validations à un seul fichier ou à un groupe de fichiers associés. </font><font style="vertical-align: inherit;">Mais alors comment faire rapidement des changements lors de l'indexation? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous ayez 3 fichiers, et que seulement 2 d'entre eux doivent être validés. </font><font style="vertical-align: inherit;">Dans ce cas, vous pouvez essayer la commande suivante:</font></font><br>
<br>
<pre><code class="bash hljs">git add .</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supprimez maintenant le fichier dont vous n'avez pas besoin de l'indexation:</font></font><br>
<br>
<pre><code class="bash hljs">git reset -- Readme.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et vérifiez le résultat:</font></font><br>
<br>
<pre><code class="bash hljs">git status</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez tous les fichiers d'une extension, par exemple CSS:</font></font><br>
<br>
<pre><code class="bash hljs">git add *.css</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous avez tout ajouté par erreur? </font><font style="vertical-align: inherit;">Effacez ensuite l'index à l'aide de la commande:</font></font><br>
<br>
<pre><code class="bash hljs">git reset --</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous avez besoin d'opérations plus complexes, vous pouvez ajouter des fichiers à l'index à l'aide du mode de dialogue:</font></font><br>
<br>
<pre><code class="bash hljs">git add -i</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, sélectionnez une option en entrant le numéro approprié, par exemple (3), pour annuler vos actions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En sélectionnant une option, vous pouvez entrer une liste de fichiers que vous souhaitez supprimer de l'indexation, l'un après l'autre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois terminé, appuyez sur (Entrée). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les fichiers sont ajoutés de la même manière. </font><font style="vertical-align: inherit;">En utilisant l'option (4), ajoutez un fichier non suivi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour quitter, accédez au </font></font><code>(q)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menu des options.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9. Conclusion</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La principale chose à faire avant de passer à un référentiel distant, et surtout avant de fusionner votre branche, est de vous assurer de bien ranger l'historique des validations. </font><font style="vertical-align: inherit;">Une fois que vous avez tout poussé dans un référentiel distant, rien ne peut être corrigé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous voulez en savoir plus sur la programmation par paires et commencer à distance? </font><font style="vertical-align: inherit;">Consultez </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microverse.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495312/index.html">Sécurité du périmètre - l'avenir est maintenant</a></li>
<li><a href="../fr495314/index.html">Comment filtrer la désinformation si elle provient de sources officielles?</a></li>
<li><a href="../fr495316/index.html">Règles de vie de l'équipe Carrière Habr Quarantaine</a></li>
<li><a href="../fr495324/index.html">Écrire un générateur de stock aléatoire de Mosbirzhe en JavaScript</a></li>
<li><a href="../fr495326/index.html">Comment avons-nous fait le cœur de l'activité d'investissement d'Alfa-Bank basée sur Tarantool</a></li>
<li><a href="../fr495330/index.html">Une popularité méritée en chiffres</a></li>
<li><a href="../fr495332/index.html">Quatuor 9: Allegro | Manuscrit</a></li>
<li><a href="../fr495336/index.html">Discord en tant que messager d'entreprise et pas seulement</a></li>
<li><a href="../fr495338/index.html">Meilleures pratiques et directives pour le lancement de conteneurs et de Kubernetes dans des environnements de production</a></li>
<li><a href="../fr495340/index.html">Comment changer le travail d'un administrateur dans un restaurant pour un bon travail en informatique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>