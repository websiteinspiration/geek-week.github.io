<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎁 😱 🍙 Telerik UI for UWPをチェックして、PVS-Studioに慣れる 🤰🏾 💅🏼 🏦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PVS-Studioチームを補充するプログラマーがオープンソースプロジェクトの分析に関する記事を書くことから作業を始めることは、すでに伝統になっています。今回、そのような実証済みのプロジェクトは、UWP用のTelerik UIになります。
 
 PVS-Studioコードアナライザー
 PVS-St...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Telerik UI for UWPをチェックして、PVS-Studioに慣れる</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/470584/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ww/cf/vp/wwcfvpz0hkpkv-ubqtskjfq2ahg.png" alt="写真2"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioチームを補充するプログラマーがオープンソースプロジェクトの分析に関する記事を書くことから作業を始めることは、すでに伝統になっています。</font><font style="vertical-align: inherit;">今回、そのような実証済みのプロジェクトは、UWP用のTelerik UIになります。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioコードアナライザー</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、C、C ++、C＃、およびJavaで記述されたプログラムのソースコードのエラーおよび潜在的な脆弱性を検出するためのツールです。</font><font style="vertical-align: inherit;">Windows、Linux、およびmacOSで動作します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、さまざまな使用シナリオを提供します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発マシンのローカルで使用でき、プラグインとしてVisual StudioまたはIntelliJ IDEAと統合できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SonarQube継続的品質保証プラットフォームと統合できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">独立して使用でき、アセンブリシステムに統合できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイル監視ユーティリティを使用することが可能です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure DevOps、Jenkins、TeamCity、Travis CIおよび類似のシステムとの統合が可能です。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">監査済みプロジェクト</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Telerik UI for UWPは、ユニバーサルWindowsプラットフォーム（UWP）のユーザーインターフェイスコンポーネントのセットです。</font><font style="vertical-align: inherit;">プロジェクトのソースコードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Githubにあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">このセットには、グラフの形でデータを視覚化したり、リストやテーブルを作成したり、マップを使用して場所に関連付けられたデータを表示したりできる20を超えるコンポーネントが含まれています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アナライザーレポートの研究で注目を集めたフラグメント</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3013</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「OnMinValuePropertyChanged」関数の本体が「OnMaxValuePropertyChanged」関数の本体と完全に同等であるのは奇妙です。</font><font style="vertical-align: inherit;">RadGauge.cs 446</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMinValuePropertyChanged</span>(<span class="hljs-params">
                      DependencyObject sender,
                      DependencyPropertyChangedEventArgs args</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">double</span> newVal = (<span class="hljs-keyword">double</span>)args.NewValue;<font></font>
  ValidateValue(newVal);<font></font>
<font></font>
  RadGauge gauge = sender <span class="hljs-keyword">as</span> RadGauge;
  <span class="hljs-keyword">if</span> (gauge.panel != <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
    gauge.panel.UpdateOnMinMaxValueChange();<font></font>
  } <font></font>
  <span class="hljs-keyword">if</span>(AutomationPeer.ListenerExists(AutomationEvents.PropertyChanged))<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> peer = FrameworkElementAutomationPeer.FromElement(gauge) 
                                      <span class="hljs-keyword">as</span> RadGaugeAutomationPeer;
    <span class="hljs-keyword">if</span> (peer != <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      peer.RaiseMinimumPropertyChangedEvent((<span class="hljs-keyword">double</span>)args.OldValue, <font></font>
                                           (<span class="hljs-keyword">double</span>)args.NewValue);<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMaxValuePropertyChanged</span>(<span class="hljs-params">
                      DependencyObject sender, 
                      DependencyPropertyChangedEventArgs args</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">double</span> newVal = (<span class="hljs-keyword">double</span>)args.NewValue;<font></font>
  ValidateValue(newVal);<font></font>
<font></font>
  RadGauge gauge = sender <span class="hljs-keyword">as</span> RadGauge;
  <span class="hljs-keyword">if</span> (gauge.panel != <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
    gauge.panel.UpdateOnMinMaxValueChange();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (AutomationPeer.ListenerExists(AutomationEvents.PropertyChanged))<font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> peer = FrameworkElementAutomationPeer.FromElement(gauge) 
                                       <span class="hljs-keyword">as</span> RadGaugeAutomationPeer;
    <span class="hljs-keyword">if</span> (peer != <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      peer.RaiseMinimumPropertyChangedEvent((<span class="hljs-keyword">double</span>)args.OldValue, <font></font>
                                           (<span class="hljs-keyword">double</span>)args.NewValue);<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザー</font><font style="vertical-align: inherit;">は、同じアクションを実行する</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnMinValuePropertyChanged</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnMaxValuePropertyChangedの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つのメソッドを検出しました</font><font style="vertical-align: inherit;">。エラーがこのコードに侵入したという強い疑いがあります。なお、両方の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnMinValuePropertyChanged</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnMaxValuePropertyChanged</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法の</font><font style="vertical-align: inherit;">使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RaiseMinimumPropertyChangedEvent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。同時に、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RadGaugeAutomationPeer</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラス</font><i><font style="vertical-align: inherit;">に</font></i><font style="vertical-align: inherit;">は、「最小」と「最大」の両方のメソッドがあります。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RaiseMaximumPropertyChangedEvent</span>(<span class="hljs-params"><span class="hljs-keyword">double</span> oldValue, <span class="hljs-keyword">double</span> newValue</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">this</span>.RaisePropertyChangedEvent(<font></font>
    RangeValuePatternIdentifiers.MaximumProperty, <font></font>
    oldValue, <font></font>
    newValue);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RaiseMinimumPropertyChangedEvent</span>(<span class="hljs-params"><span class="hljs-keyword">double</span> oldValue, <span class="hljs-keyword">double</span> newValue</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">this</span>.RaisePropertyChangedEvent(<font></font>
    RangeValuePatternIdentifiers.MinimumProperty,<font></font>
    oldValue,<font></font>
    newValue);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RaiseMaximumPropertyChangedEvent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メソッド</font><font style="vertical-align: inherit;">はコードでは使用されませんが、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RaiseMinimumPropertyChangedEvent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は2回使用されます。そして、ご存知のように、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnMaxValuePropertyChanged</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドのパフォーマンスは</font><font style="vertical-align: inherit;">疑問を投げかけます...次のように書くことになっていると思います：</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnMaxValuePropertyChanged</span>(<span class="hljs-params">
                      DependencyObject sender,
                      DependencyPropertyChangedEventArgs args</span>)</span><font></font>
{<font></font>
  ....<font></font>
  peer.RaiseMaximumPropertyChangedEvent((<span class="hljs-keyword">double</span>)args.OldValue,<font></font>
                                        (<span class="hljs-keyword">double</span>)args.NewValue);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、そうであっても、繰り返し要素が多数あるため、コードはきれいに見えません。理解するのが難しく、繰り返しの行がプログラマーの注意を鈍らせ、そのような状況でコードのレビューを行うことがより困難になります。しかし、静的分析ツールはそのようなコードをチェックするという優れた機能を果たします（ただし、これはリファクタリングを省略できることを意味するわけではなく、特に繰り返し行の数を減らす必要はありません）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記と以下のコードフラグメントに基づいて、作成者はコピーと貼り付けを嫌っていないと想定できます。ただし、私たち全員が行うように... :) </font><b><font style="vertical-align: inherit;">PVS-Studioの</font></b></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></b> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">V3001</font></a><font style="vertical-align: inherit;">サブ要素式 'element.RenderSize emptySize =='が '||'の左側と右側に同じですオペレーター。 TiltInteractionEffect.cs 181</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">IsPointInElementBounds</span>(<span class="hljs-params">FrameworkElement element, 
                                           Point position</span>)</span><font></font>
{<font></font>
  Size emptySize = <span class="hljs-keyword">new</span> Size(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">if</span> (element.RenderSize == emptySize || <font></font>
      element.RenderSize == emptySize)<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Rect(....).Contains(position);<font></font>
} </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、 '||'演算子の右側と左側にある誤ったコードフラグメントを検出しましたif </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステートメント</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は同じ部分式</font><i><font style="vertical-align: inherit;">を</font></i><font style="vertical-align: inherit;">使用します。 2番目の部分式は明らかに異なっているはずです。おそらく、2番目の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RenderSizeの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わりに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DesiredSizeを使用する</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要が</font><i><font style="vertical-align: inherit;">あり</font></i><font style="vertical-align: inherit;">ます。または、2番目の部分式はまったくないはずです。いずれの場合も、このコードを修正する必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> '||'の左側と右側に同じサブ式 'text [0] =='-''がありますオペレーター。 RadNumericBox.cs 1057</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ValidateText</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">string</span> text = <span class="hljs-keyword">this</span>.textBox.Text;<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (text.Length == <span class="hljs-number">1</span> &amp;&amp; (text[<span class="hljs-number">0</span>] == <span class="hljs-string">'-'</span> || text[<span class="hljs-number">0</span>] == <span class="hljs-string">'-'</span>))<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isNegative)<font></font>
    {<font></font>
      <span class="hljs-keyword">this</span>.isNegative = <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
      <span class="hljs-keyword">this</span>.SetText(<span class="hljs-keyword">string</span>.Empty);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、開発者はテキストボックスフィールドに入力されたテキストを変数に書き込みます。次に、文字列の最初の文字が同じ文字「-」と2回比較されますが、これは不審な決定です。明らかに、この関数のテキストの検証は当初の意図どおりには機能しません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「&amp;&amp;」演算子の左側と右側に同一のサブ式「newValue.HasValue」があります。 DateTimePicker.cs 576</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnValueChanged</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> sender, 
                                   DependencyPropertyChangedEventArgs args</span>)</span><font></font>
{<font></font>
  DateTimePicker picker = sender <span class="hljs-keyword">as</span> DateTimePicker;<font></font>
<font></font>
  <span class="hljs-keyword">var</span> newValue = (DateTime?)args.NewValue;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (newValue.HasValue &amp;&amp; newValue != <span class="hljs-literal">null</span>)                     <span class="hljs-comment">// &lt;=</span><font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
式</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newValue.HasValue</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">newValue</font></i><font style="vertical-align: inherit;">に値が含まれている</font><font style="vertical-align: inherit;">場合に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trueを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返し</font><font style="vertical-align: inherit;">、式</font><i><font style="vertical-align: inherit;">newValue！= </font></i><i><font style="vertical-align: inherit;">Null</font></i><font style="vertical-align: inherit;">は同じことを行います。アナライザーはこれに注意を払い、サブ表現の1つを削除するか、それを別のものに置き換えること（他に何かチェックする必要がある場合）は、開発者が決定します。</font><b><font style="vertical-align: inherit;">PVS-Studio警告</font></b><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">V3125</font></a><font style="vertical-align: inherit;"> nullに対して検証された後、「CurrentAttachedMenu」オブジェクトが使用されました。チェック行：98、96。PopupService.cs 98</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i> <i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PopupService</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Overlay_PointerPressed</span>(<span class="hljs-params">....</span>)</span><font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (CurrentAttachedMenu == <span class="hljs-literal">null</span> ||<font></font>
        !CurrentAttachedMenu.hitTestService.<font></font>
            HitTest(e.GetCurrentPoint(CurrentAttachedMenu).Position).Any())<font></font>
    {<font></font>
      CurrentAttachedMenu.IsOpen = <span class="hljs-literal">false</span>;<font></font>
      HideOverlay();<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CurrentAttachedMenu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">である</font><font style="vertical-align: inherit;">ことが判明した場合</font><font style="vertical-align: inherit;">、式</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CurrentAttachedMenu.IsOpen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">評価</font><font style="vertical-align: inherit;">すると例外が発生します。一見すると、これは単純なタイプミスであり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">との比較で</font><font style="vertical-align: inherit;">はなく、逆の操作-'！='のようです。ただし</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">CurrentAttachedMenu</font></i><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">が</font><i><font style="vertical-align: inherit;">nullの</font></i><font style="vertical-align: inherit;">場合、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifステートメントの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件で例外が発生し</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
さらにコードには</font><font style="vertical-align: inherit;">、同じ警告が</font><b><font style="vertical-align: inherit;">37個</font></b><font style="vertical-align: inherit;">あり、そのうちのいくつかはエラーを示しているようです。しかし、1つの記事の枠組みの中でそれらを説明することはまだ多すぎるため、無人のままにしておきます。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おそらく、「as」キーワードを使用して型変換した後、不正な変数がnullと比較されます。変数「dragDropElement」、「uiDragDropElement」を確認します。 DragDrop.cs 91</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">StartDrag</span>(<span class="hljs-params">....</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">var</span> dragDropElement = sender <span class="hljs-keyword">as</span> IDragDropElement;<font></font>
  ....<font></font>
  UIElement uiDragDropElement = dragDropElement <span class="hljs-keyword">as</span> UIElement;<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (dragDropElement == <span class="hljs-literal">null</span> ||<font></font>
      !dragDropElement.CanStartDrag(trigger, initializeContext))<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
著者が変数を混同している可能性が非常に高いです。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不等式は</font><font style="vertical-align: inherit;">、キャストの結果として取得されたリンクではなく、元の（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dragDropElement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">によってチェックされます</font><font style="vertical-align: inherit;">。おそらく、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uiDragDropElement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンクが</font><i><font style="vertical-align: inherit;">チェック</font></i><font style="vertical-align: inherit;">されるはず</font><font style="vertical-align: inherit;">でした。推測は、プログラマ</font><font style="vertical-align: inherit;">が</font><i><font style="vertical-align: inherit;">null</font></i><font style="vertical-align: inherit;">をチェックせずに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uiDragDropElement</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">さらに使用したという事実によっても確認されてい</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3030の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定期的なチェック。 「！ShowIndicatorWhenNoData」条件は、139行目ですでに確認されています。RadDataBoundListBox.PullToRefresh.cs 141</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HandlePullToRefreshItemStateChanged</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> item, ItemState state</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">bool</span> showIndicatorWhenNoData = <span class="hljs-keyword">this</span>.ShowPullToRefreshWhenNoData;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.realizedItems.Count == <span class="hljs-number">0</span> &amp;&amp; !showIndicatorWhenNoData)<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (state == ItemState.Recycled &amp;&amp; !showIndicatorWhenNoData)<font></font>
    {<font></font>
      <span class="hljs-keyword">this</span>.StopPullToRefreshLoading(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">this</span>.HidePullToRefreshIndicator();<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、2つの条件下で同じ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">showIndicatorWhenNoData</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数が再チェックされるコードを検出しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">おそらくチェックは冗長ですが、重複する部分式の1つがまったく異なる可能性もあります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3031</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">過剰なチェックは簡略化できます。</font><font style="vertical-align: inherit;">'||' </font><font style="vertical-align: inherit;">演算子は反対の式で囲まれています。</font><font style="vertical-align: inherit;">SelectedItemCollection.cs 77</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SelectedItemCollection</span> : <span class="hljs-title">ObservableCollection</span>&lt;object&gt;<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">CanInsertItem</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> item</span>)</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.suspendLevel == <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.AllowSelect &amp;&amp; <font></font>
           ((!<span class="hljs-keyword">this</span>.AllowMultipleSelect &amp;&amp; <span class="hljs-keyword">this</span>.Count == <span class="hljs-number">0</span>) <font></font>
                || <span class="hljs-keyword">this</span>.AllowMultipleSelect);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは、正式な誤りではありません。</font><font style="vertical-align: inherit;">アナライザーは、条件のコードの冗長性を示唆します。</font><font style="vertical-align: inherit;">ただし、追加のコードがエラーの結果である場合があることを覚えておく必要があります。たとえば、1つの変数の代わりに別の変数が数回チェックされる場合などです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この状態を少し減らして、余分なコードを削除できます。</font><font style="vertical-align: inherit;">たとえば、次のようになります。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SelectedItemCollection</span> : <span class="hljs-title">ObservableCollection</span>&lt;object&gt;<font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">CanInsertItem</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> item</span>)</span><font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.suspendLevel == <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.AllowSelect &amp;&amp;<font></font>
           (<span class="hljs-keyword">this</span>.AllowMultipleSelect || <span class="hljs-keyword">this</span>.Count == <span class="hljs-number">0</span>);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他の同様のメッセージ：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3031過剰チェックを簡略化できます。</font><font style="vertical-align: inherit;">'||' </font><font style="vertical-align: inherit;">演算子は反対の式で囲まれています。</font><font style="vertical-align: inherit;">SelectedItemCollection.cs 93</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3031過剰チェックを簡略化できます。</font><font style="vertical-align: inherit;">'||' </font><font style="vertical-align: inherit;">演算子は反対の式で囲まれています。</font><font style="vertical-align: inherit;">StackVirtualizationStrategy.cs 49</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3031過剰チェックを簡略化できます。</font><font style="vertical-align: inherit;">'||' </font><font style="vertical-align: inherit;">演算子は、反対の式「state == null」と「state！= null」で囲まれています。</font><font style="vertical-align: inherit;">LocalFieldDescriptionsProviderBase.cs 24</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーが次のコードを発行した別のコードを考えてみます</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3137 'leftMargin'変数が割り当てられていますが、関数の最後で使用されていません。</font><font style="vertical-align: inherit;">DragDrop.cs 87</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3137「topMargin」変数が割り当てられていますが、関数の最後では使用されません。</font><font style="vertical-align: inherit;">DragDrop.cs 88</font></font></li>
</ul><br>
<pre><code class="cs hljs"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DragDrop</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">double</span> leftMargin = <span class="hljs-number">0</span>d;
  <span class="hljs-keyword">double</span> topMargin = <span class="hljs-number">0</span>d;
  <span class="hljs-keyword">if</span> (frameworkElementSource != <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
    leftMargin = frameworkElementSource.Margin.Left;    <span class="hljs-comment">// &lt;= </span>
    topMargin = frameworkElementSource.Margin.Top;      <span class="hljs-comment">// &lt;=</span><font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (dragDropElement == <span class="hljs-literal">null</span> || <font></font>
    !dragDropElement.CanStartDrag(trigger, initializeContext))<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">var</span> context = dragDropElement<font></font>
        .DragStarting(trigger, initializeContext);<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>)<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword">var</span> startDragPosition = e<font></font>
    .GetCurrentPoint(context.DragSurface.RootElement).Position;<font></font>
  <span class="hljs-keyword">var</span> relativeStartDragPosition = e<font></font>
    .GetCurrentPoint(uiDragDropElement).Position;<font></font>
  <span class="hljs-keyword">var</span> dragPositionMode = DragDrop<font></font>
    .GetDragPositionMode(uiDragDropElement);<font></font>
<font></font>
  AddOperation(<span class="hljs-keyword">new</span> DragDropOperation(<font></font>
        context, <font></font>
        dragDropElement, <font></font>
        dragPositionMode, <font></font>
        e.Pointer, <font></font>
        startDragPosition, <font></font>
        relativeStartDragPosition));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーレポート</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LEFTMARGIN</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TOPMARGIN変数が</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値を割り当てられているが、これらの変数は、メソッドの最後まで使用されていないことをした後。ここで間違いはないでしょうが、そのようなコードは疑わしいようです。これはタイプミスまたは失敗したリファクタリングが原因である可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じ問題が別の場所で見つかりました：V3137 'currentColumnLength'変数が割り当てられていますが、関数の最後で使用されていません。 WrapLayout.cs 824 </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3061</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ 'index'は、使用前に常にメソッド本体で書き換えられます。 DataEngine.cs 1443</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Tuple&lt;Group, <span class="hljs-keyword">int</span>&gt; <span class="hljs-title">FindGroupAndItemIndex</span>(<span class="hljs-params">.... <span class="hljs-keyword">int</span> index, ....</span>)</span><font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (exhaustiveSearch)<font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    <span class="hljs-keyword">var</span> aggregateRowGroup = rowRootGroup;
    <span class="hljs-keyword">var</span> rowGroupNames = valueProvider.GetRowGroupNames(item);
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> groupName <span class="hljs-keyword">in</span> rowGroupNames)<font></font>
    {<font></font>
      Group <span class="hljs-keyword">group</span>;
      <span class="hljs-keyword">if</span> (aggregateRowGroup.TryGetGroup(groupName, <span class="hljs-keyword">out</span> <span class="hljs-keyword">group</span>))<font></font>
      {<font></font>
        aggregateRowGroup = <span class="hljs-keyword">group</span>;<font></font>
      }<font></font>
    }<font></font>
<font></font>
    index = aggregateRowGroup.IndexOf(item,            <span class="hljs-comment">// &lt;=</span><font></font>
               valueProvider.GetSortComparer());     <font></font>
<font></font>
    <span class="hljs-keyword">return</span> Tuple.Create(aggregateRowGroup, index);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">FindGroupAndItemIndex</font></i><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">
の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデックス</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータは</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">使用される前に上書きされます。ほとんどの場合、これはプログラマーのエラーを示しています。</font><b><font style="vertical-align: inherit;">PVS-Studio警告</font></b><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">V3083</font></a><font style="vertical-align: inherit;">イベント 'Completed'の安全でない呼び出し、NullReferenceExceptionが発生する可能性があります。イベントを呼び出す前に、ローカル変数にイベントを割り当てることを検討してください。 ActionBase.cs 32</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ActionBase</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnCompleted</span>(<span class="hljs-params"></span>)</span><font></font>
  {<font></font>
    <span class="hljs-keyword">this</span>.IsCompleted = <span class="hljs-literal">true</span>;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.Completed != <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">this</span>.Completed(<span class="hljs-keyword">this</span>, EventArgs.Empty);<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラマーは、このメソッドのイベントハンドラーに対して安全でない可能性のある呼び出しを許可したため、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型の例外が発生する可能性があります</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェック</font><font style="vertical-align: inherit;">とイベントハンドラーの呼び出しの</font><font style="vertical-align: inherit;">間</font><font style="vertical-align: inherit;">にこのイベントが残っていない場合は、</font><font style="vertical-align: inherit;">例外がスローされ</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードには別の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49個の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同様の問題</font><font style="vertical-align: inherit;">があります</font><font style="vertical-align: inherit;">。この記事でそれらすべてを見るのは面白くありません。また、PVS-Studioを使用して著者が自分で簡単に見つけることができるので、他のエラーに移ります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3145</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WeakReferenceターゲットの安全でない逆参照。info.Targetの検査を検討してください。</font><font style="vertical-align: inherit;">オブジェクトは、 'IsAlive'の確認と 'Target'プロパティへのアクセスの間にガベージコレクションされた可能性があります。</font><font style="vertical-align: inherit;">FadeAnimation.cs 84</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RadFadeAnimation</span> : <span class="hljs-title">RadAnimation</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">internal</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span>
    <span class="hljs-title">ApplyAnimationValues</span>(<span class="hljs-params">PlayAnimationInfo info</span>)</span><font></font>
  {<font></font>
    ....<font></font>
    <span class="hljs-keyword">if</span> (info.Target.Opacity != opacity) <span class="hljs-comment">// &lt;=</span><font></font>
    {<font></font>
      info.Target.Opacity = opacity;<font></font>
    }<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザ</font><font style="vertical-align: inherit;">は、</font><i><font style="vertical-align: inherit;">info.Target.Opacity</font></i><font style="vertical-align: inherit;">プロパティにアクセスするときに</font><font style="vertical-align: inherit;">、タイプ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceExceptionの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例外を</font><i><font style="vertical-align: inherit;">スロー</font></i><font style="vertical-align: inherit;">する危険性を警告し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">問題の本質をよりよく理解するには、</font><i><font style="vertical-align: inherit;">PlayAnimationInfo</font></i><font style="vertical-align: inherit;">クラスのフラグメント</font><font style="vertical-align: inherit;">、特に</font><i><font style="vertical-align: inherit;">Target</font></i><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">を調べる必要があり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PlayAnimationInfo</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">private</span> WeakReference target;<font></font>
  ....<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PlayAnimationInfo</span>(<span class="hljs-params">Storyboard storyboard, 
                           RadAnimation animation, 
                           UIElement target</span>)</span><font></font>
  {<font></font>
    ....<font></font>
    <span class="hljs-keyword">this</span>.target = <span class="hljs-keyword">new</span> WeakReference(target);<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
  <span class="hljs-keyword">public</span> UIElement Target<font></font>
  {<font></font>
    <span class="hljs-keyword">get</span><font></font>
    {<font></font>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.target.IsAlive)<font></font>
      {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.target.Target <span class="hljs-keyword">as</span> UIElement;<font></font>
      }<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
    }<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、このコードをさらに掘り下げるほど、コードで潜在的な問題を見つけることができます。おそらく最も興味深いもの、つまりアナライザーが警告を出したものを見てみましょう。実際には、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifステートメントの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> then分岐に従って実行された場合でも、</font><font style="vertical-align: inherit;">ゼロ以外の参照が返されることは保証されません。キャストに関する会話に関係なく、ここでは、コンストラクター内のオブジェクトの初期化により許可されるすべてのものを検討します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはどのようにして可能ですか？事実は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsAlive</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェック</font><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しの間で</font><font style="vertical-align: inherit;">ガベージコレクションが実行され、その下で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WeakReference</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">によって参照されるオブジェクト</font><i><font style="vertical-align: inherit;">が該当する</font></i><font style="vertical-align: inherit;">場合、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this.target.Target</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">null</font></i><font style="vertical-align: inherit;">を返すということです。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">つまり、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IsAlive</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェック</font><i><font style="vertical-align: inherit;">は</font></i><font style="vertical-align: inherit;">、次に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ターゲット</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にアクセスしたときに、オブジェクトが引き続き使用可能である</font><font style="vertical-align: inherit;">ことを保証し</font><i><font style="vertical-align: inherit;">ませ</font></i><font style="vertical-align: inherit;">ん</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、状況は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullを返します。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別の診断ルールをキャッチします：V3080可能性のあるnull逆参照。</font><font style="vertical-align: inherit;">「info.Target」を調べることを検討してください。</font><font style="vertical-align: inherit;">FadeAnimation.cs 84 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードで同様の問題</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">さらに数回</font><font style="vertical-align: inherit;">発生</font><font style="vertical-align: inherit;">しました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3145 WeakReferenceターゲットの安全でない逆参照、ターゲットの検査を検討してください。</font><font style="vertical-align: inherit;">'Target'プロパティにアクセスする前に、オブジェクトがガベージコレクションされている可能性があります。</font><font style="vertical-align: inherit;">MoveXAnimation.cs 80</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3145 WeakReferenceターゲットの安全でない逆参照、ターゲットの検査を検討してください。</font><font style="vertical-align: inherit;">'Target'プロパティにアクセスする前に、オブジェクトがガベージコレクションされている可能性があります。</font><font style="vertical-align: inherit;">MoveYAnimation.cs 80</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3145 WeakReferenceターゲットの安全でない逆参照。info.Targetの検査を検討してください。</font><font style="vertical-align: inherit;">'Target'プロパティにアクセスする前に、オブジェクトがガベージコレクションされている可能性があります。</font><font style="vertical-align: inherit;">PlaneProjectionAnimation.cs 244</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3145 WeakReferenceターゲットの安全でない逆参照。</font><font style="vertical-align: inherit;">オブジェクトは、 'IsAlive'の確認と 'Target'プロパティへのアクセスの間にガベージコレクションされた可能性があります。</font><font style="vertical-align: inherit;">WeakEventHandler.cs 109</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次の例に移りましょう。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告PVS-Studio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3066</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「NotifyCollectionChangedEventArgs」コンストラクターに渡される引数の順序が誤っている可能性があります：「oldItem」と「newItem」。</font><font style="vertical-align: inherit;">CheckedItemsCollection.cs 470</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CheckedItemsCollection</span>&lt;T&gt; : <span class="hljs-title">IList</span>&lt;T&gt;,
                          <span class="hljs-title">INotifyCollectionChanged</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> NotifyCollectionChangedEventArgs <span class="hljs-title">GenerateArgs</span>(<span class="hljs-params">....</span>)</span><font></font>
  {<font></font>
    <span class="hljs-keyword">switch</span> (action)<font></font>
    {<font></font>
      <span class="hljs-keyword">case</span> NotifyCollectionChangedAction.Add:<font></font>
      ....<font></font>
<font></font>
      <span class="hljs-keyword">case</span> NotifyCollectionChangedAction.Remove:<font></font>
      ....<font></font>
<font></font>
      <span class="hljs-keyword">case</span> NotifyCollectionChangedAction.Replace:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NotifyCollectionChangedEventArgs(<font></font>
                    action, oldItem, newItem, changeIndex);     <span class="hljs-comment">// &lt;=</span><font></font>
<font></font>
      <span class="hljs-keyword">default</span>:<font></font>
<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NotifyCollectionChangedEventArgs(action);<font></font>
    }<font></font>
  }<font></font>
} </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーからのこの警告が何を意味するのかを理解するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NotifyCollectionChangedEventArgs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクターの</font><i><font style="vertical-align: inherit;">パラメーターを確認する</font></i><font style="vertical-align: inherit;">価値があり</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NotifyCollectionChangedEventArgs</span>(<span class="hljs-params">
         NotifyCollectionChangedAction action,
         <span class="hljs-keyword">object</span> newItem,
         <span class="hljs-keyword">object</span> oldItem,
         <span class="hljs-keyword">int</span> index</span>)</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは式の中で警告を出します</font></font><br>
<pre><code class="cs hljs">  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NotifyCollectionChangedEventArgs(<font></font>
               action,<font></font>
               oldItem,<font></font>
               newItem,<font></font>
               changeIndex);     </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oldItem</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">newItemを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入れ替えました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コンストラクター定義では、それらは異なる順序でリストされています。</font><font style="vertical-align: inherit;">これが意識的に行われたかどうかにかかわらず、人は推測しかできません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3102</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ内の定数インデックスによる「x」オブジェクトの要素への不審なアクセス。</font><font style="vertical-align: inherit;">DataEngine.cs 1718</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObjectArrayComparer</span> : <span class="hljs-title">IEqualityComparer</span>&lt;object[]&gt;<font></font>
{<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">Equals</span>(<span class="hljs-params"><span class="hljs-keyword">object</span>[] x, <span class="hljs-keyword">object</span>[] y</span>)</span><font></font>
  {<font></font>
    ....<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; x.Length; i++)<font></font>
    {<font></font>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">object</span>.Equals(x[<span class="hljs-number">0</span>], y[<span class="hljs-number">0</span>]))    <span class="hljs-comment">// &lt;=</span><font></font>
      {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ループの各反復で、プログラマーは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x [0]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y [0]を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比較し</font><i><font style="vertical-align: inherit;">ます。</font></i><font style="vertical-align: inherit;">ただし、最初の要素のみが比較されるため、このコードではループは意味がありません。</font><font style="vertical-align: inherit;">ほとんどの場合、これは配列の対応する要素の比較を意味しました。</font><font style="vertical-align: inherit;">次に、正しいコードは次のようになります。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; x.Length; i++)<font></font>
{<font></font>
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">object</span>.Equals(x[i], y[i]))<font></font>
  {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
  }<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告PVS-Studio</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3123</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おそらく '？：'オペレーターは予期されたものとは異なる方法で動作します。</font><font style="vertical-align: inherit;">その優先順位は、その状態で他のオペレーターの優先順位よりも低くなっています。</font><font style="vertical-align: inherit;">EditRowHostPanel.cs 35</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> Size <span class="hljs-title">MeasureOverride</span>(<span class="hljs-params">Size availableSize</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">bool</span> shouldUpdateRowHeight = editorLine == <span class="hljs-number">0</span> || <font></font>
         displayedElement == <span class="hljs-literal">null</span> ? <span class="hljs-literal">false</span> :<font></font>
           displayedElement.ContainerType != <span class="hljs-keyword">typeof</span>(DataGridGroupHeader);<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
警告は、「?:」演算子の使用に関連しています。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！=、||、==</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">よりも優先順位が低くなっています</font><i><font style="vertical-align: inherit;">。</font></i><font style="vertical-align: inherit;">したがって、プログラマーの計画どおりに式が評価されない場合があります。どうやら、この場合、これは誤検知であり、コードは正しく動作します。しかし、そのようなコードを読むことは非常に困難であり、正しく理解されているという確信は決してありません。開発者が誰も何も理解できないような方法で書いたような気がします:)これを行うための最良の方法は、より読みやすくすること</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">括弧または</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifステートメントを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3078</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 'OrderBy'メソッドを繰り返し呼び出すと、元の並べ替え順序が失われます。 'ThenBy'メソッドを使用して、元の並べ替えを保持します。 GridModel.Selection.cs 107</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> <span class="hljs-title">GridModel</span><font></font>
{<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">BuildCellSelectionRegions</span>(<span class="hljs-params">....</span>)</span><font></font>
  {<font></font>
    ....<font></font>
    <span class="hljs-keyword">this</span>.MergeCellSelectionRegions(selectedItemsInView<font></font>
        .OrderBy(c =&gt; c.Column.ItemInfo.LayoutInfo.Line)<font></font>
        .OrderBy(c =&gt; c.RowItemInfo.LayoutInfo.Line));<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OrderBy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプのコレクション</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IOrderedEnumerableの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
再呼び出しに関連するエラー</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ここでは、コレクションは最初に列でソートされ、次に行でソートされます。</font><font style="vertical-align: inherit;">また、行による並べ替えでは、前回の列による並べ替えは考慮されません。</font><font style="vertical-align: inherit;">列による並べ替えを失わず、一度にいくつかの基準でコレクションを並べ替えるには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ThenBy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs">  <span class="hljs-keyword">this</span>.MergeCellSelectionRegions(selectedItemsInView<font></font>
      .OrderBy(c =&gt; c.Column.ItemInfo.LayoutInfo.Line)<font></font>
      .ThenBy(c =&gt; c.RowItemInfo.LayoutInfo.Line));</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3008</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">currentColumnLength</font></a><font style="vertical-align: inherit;">」変数には、2回続けて値が割り当てられます。</font><font style="vertical-align: inherit;">おそらくこれは間違いです。</font><font style="vertical-align: inherit;">チェック行：791、785。WrapLayout.cs 791</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnAvailableLengthChanged</span>(<span class="hljs-params"><span class="hljs-keyword">double</span> oldValue, 
                                      <span class="hljs-keyword">double</span> newValue</span>)</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-keyword">if</span> (....)<font></font>
  {<font></font>
    <span class="hljs-keyword">if</span> (currentColumnLength &gt; <span class="hljs-number">0</span>)<font></font>
    {<font></font>
      <span class="hljs-keyword">var</span> paddingValue = Math.Max(<span class="hljs-number">0</span>, <font></font>
            newValue - currentColumnLength);<font></font>
      <span class="hljs-keyword">this</span>.paddingRenderInfo.Add(paddingValue);<font></font>
      currentColumnLength = <span class="hljs-number">0</span>;                     <span class="hljs-comment">// &lt;=</span><font></font>
      slotCount++;<font></font>
    }<font></font>
    <span class="hljs-keyword">this</span>.ColumnSlotsRenderInfo.Update(i, newValue);
    <span class="hljs-keyword">this</span>.paddingRenderInfo.Add(<span class="hljs-number">0</span>);<font></font>
    currentColumnLength = <span class="hljs-number">0</span>;                       <span class="hljs-comment">// &lt;=</span><font></font>
    slotCount++;<font></font>
    <span class="hljs-keyword">continue</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span><font></font>
  {<font></font>
    ....<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">currentColumnLength</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">に値が2回割り当てられ</font><font style="vertical-align: inherit;">ているのではないかと疑っていました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">変数は割り当て間で使用されません。</font><font style="vertical-align: inherit;">条件に関係なく、この変数は最終的にゼロになります。</font><font style="vertical-align: inherit;">このコードは正しくないか冗長です。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3127</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つの類似したコードフラグメントが見つかりました。</font><font style="vertical-align: inherit;">おそらく、これはタイプミスであり、「filledIconContainer」の代わりに「emptyIconContainer」変数を使用する必要があります。RadRatingItem.cs 240</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">RadRatingItem</span> : <span class="hljs-title">RadContentControl</span><font></font>
{<font></font>
  ....<font></font>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnApplyTemplate</span>(<span class="hljs-params"></span>)</span><font></font>
  {<font></font>
    ....<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.filledIconContainer = <span class="hljs-keyword">this</span>.GetTemplateChild(
                                 <span class="hljs-string">"FilledIconContainer"</span>) <span class="hljs-keyword">as</span> Border;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.filledIconContainer == <span class="hljs-literal">null</span>)                       <span class="hljs-comment">// &lt;=</span><font></font>
    {<font></font>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MissingTemplatePartException(
                <span class="hljs-string">"FilledIconContainer"</span>, <span class="hljs-keyword">typeof</span>(Border));<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">this</span>.emptyIconContainer = <span class="hljs-keyword">this</span>.GetTemplateChild(
                                <span class="hljs-string">"EmptyIconContainer"</span>) <span class="hljs-keyword">as</span> Border;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.filledIconContainer == <span class="hljs-literal">null</span>)                        <span class="hljs-comment">// &lt;=</span><font></font>
    {<font></font>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MissingTemplatePartException(
                <span class="hljs-string">"EmptyIconContainer"</span>, <span class="hljs-keyword">typeof</span>(Border));<font></font>
    }<font></font>
    <span class="hljs-keyword">this</span>.Initialize();<font></font>
  }<font></font>
  ....<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイプミスのため、2つの同じ条件がコードに現れました。</font><font style="vertical-align: inherit;">生成された例外から判断すると、2番目の条件は次のようになります。</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.emptyIconContainer == <span class="hljs-literal">null</span>)                   <font></font>
{<font></font>
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> MissingTemplatePartException(
                <span class="hljs-string">"EmptyIconContainer"</span>, <span class="hljs-keyword">typeof</span>(Border));<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio警告</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V3020</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ループ内の無条件の「ブレーク」。</font><font style="vertical-align: inherit;">NodePool.cs 189</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> IEnumerable&lt;KeyValuePair&lt;<span class="hljs-keyword">int</span>, List&lt;T&gt;&gt;&gt;<font></font>
                GetUnfrozenDisplayedElements()<font></font>
{<font></font>
  <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.generatedContainers)<font></font>
  {<font></font>
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> pair <span class="hljs-keyword">in</span> item.Value)<font></font>
    {<font></font>
      <span class="hljs-keyword">if</span> (!pair.IsFrozen)<font></font>
      {<font></font>
        <span class="hljs-keyword">yield</span> <span class="hljs-keyword">return</span> item;<font></font>
      }<font></font>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、ここで</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">break</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステートメント</font><font style="vertical-align: inherit;">が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifステートメントに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属していない</font><font style="vertical-align: inherit;">ことを検出しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">どの値が</font><i><font style="vertical-align: inherit;">pair.IsFrozen</font></i><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">持っているかに関係なく、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブレークを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">達成し</font><font style="vertical-align: inherit;">まし</font><i><font style="vertical-align: inherit;">た。</font></i><font style="vertical-align: inherit;">これにより</font><i><font style="vertical-align: inherit;">、foreachで</font></i><font style="vertical-align: inherit;">、1回の反復のみが実行されます。</font><font style="vertical-align: inherit;">
以上で、警告についての考察は終わりです。</font><font style="vertical-align: inherit;">Telerik開発者がより徹底的なコード分析を行い、欠陥を修正できるように、一時的なライセンスを提供する準備が整いました。</font><font style="vertical-align: inherit;">さらに、</font><font style="vertical-align: inherit;">オープンソースプロジェクトの作者に提供されている</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">PVS-Studio</font></a><font style="vertical-align: inherit;">オプションを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">無料で利用</font></a><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UWP用のTelerik UIの開発者は素晴らしい仕事をしましたが、通常は発生す​​るため、タイプミスがないわけではありません:)。</font><font style="vertical-align: inherit;">これらのエラーはすべて、静的アナライザーで簡単に見つけて修正できます。</font><font style="vertical-align: inherit;">最も重要なことは、アナライザーを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正しく定期的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に使用することです</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Ekaterina Nikiforova。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioの使用を開始する方法としてTelerik UI for UWPを確認する</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja470568/index.html">Nginx Webサーバーを使用したSpringアプリケーションのBlue-Greenデプロイメント</a></li>
<li><a href="../ja470570/index.html">GridmiAPI-RESTとRPCを操作するためのシンプルで柔軟なAndroidライブラリ</a></li>
<li><a href="../ja470572/index.html">「インフラストラクチャの自動化。なぜこれを行うのですか？」（デニス・ヤコブレフ）</a></li>
<li><a href="../ja470576/index.html">今後数年間でアメリカの銀行は200,000の仕事を取り除くでしょう</a></li>
<li><a href="../ja470578/index.html">モバイルバンクで簿記を「人間化」する方法</a></li>
<li><a href="../ja470592/index.html">Pleskレビュー-ホスティングおよびサイトコントロールパネル</a></li>
<li><a href="../ja470594/index.html">モスクワでの光のショー「光のサークル」2019からのレポート</a></li>
<li><a href="../ja470596/index.html">リアルタイムサービスの例に関するQおよびKDB +の機能</a></li>
<li><a href="../ja470598/index.html">本「現代のJava。ラムダ式、ストリーム、関数型プログラミング」</a></li>
<li><a href="../ja470600/index.html">安全なnoVNCコンソール、Kubernetesでの自動スケーリング、OstrovkaでのHaproxy、およびプログラマーとの管理者の作業について</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>