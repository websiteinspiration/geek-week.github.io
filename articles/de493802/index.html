<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤛🏼 🚏 🔔 Grundlegendes zur Android-Aktivität von launchMode: Standard, SingleTop, SingleTask und SingleInstance 😫 👜 🎩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Übersetzung des Artikels wurde speziell für fortgeschrittene Studenten in der Android-Entwicklung vorbereitet .
 
 
 
 Aktivität ist eines der auf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Grundlegendes zur Android-Aktivität von launchMode: Standard, SingleTop, SingleTask und SingleInstance</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/493802/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Übersetzung des Artikels wurde speziell für </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fortgeschrittene Studenten in der Android-Entwicklung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vorbereitet </font><font style="vertical-align: inherit;">.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/rz/oc/v4/rzocv4m1jq5tpiy0oisluhhgrfs.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aktivität ist eines der auffälligsten Konzepte in Android (das beliebteste mobile Betriebssystem mit einer gut gestalteten Speicherverwaltungsarchitektur, die Multitasking perfekt implementiert). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf die eine oder andere Weise ist mit dem Start von Activity auf dem Bildschirm nicht alles so einfach. Die Art und Weise, wie es ausgeführt wurde, ist ebenfalls wichtig. In diesem Thema gibt es viele Nuancen. Einer der wirklich wichtigen ist </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , über den wir in diesem Artikel sprechen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jede Aktivität wird erstellt, um mit unterschiedlichen Zielen zu arbeiten. Einige von ihnen sind so konzipiert, dass sie mit jeder Absicht separat funktionieren, z. B. Aktivitäten, die zum Erstellen von E-Mails im E-Mail-Client gesendet werden. Während andere als Singleton konzipiert sind, z. B. als Aktivitätspostfach.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus diesem Grund ist es wichtig anzugeben, ob Sie eine neue Aktivität erstellen oder eine vorhandene verwenden müssen, da dies sonst zu fehlerhafter UX oder Fehlern führen kann. </font><font style="vertical-align: inherit;">Dank der Android-Kernel-Entwickler ist dies mit </font><font style="vertical-align: inherit;">dem speziell dafür entwickelten </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode ganz</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> einfach </font><font style="vertical-align: inherit;">.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LaunchMode-Definition </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Wesentlichen können wir </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">launchMode</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> direkt als Tag-Attribut definieren </font></font><code><code>&lt;</code>activity&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>AndroidManifest.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleTaskActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleTask launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleTask"</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stehen 4 Arten von launchMode zur Verfügung. Schauen wir sie uns einzeln an. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dies ist der Standardmodus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Verhalten einer Aktivität, die auf diesen Modus eingestellt ist, erstellt immer eine neue Aktivität, die mit jeder gesendeten Absicht separat funktioniert. Wenn 10 Absichten zum Verfassen einer E-Mail gesendet wurden, müssen 10 Aktivitäten gestartet werden, um jede Absicht separat zu bedienen. Infolgedessen kann eine unbegrenzte Anzahl solcher Aktivitäten auf dem Gerät gestartet werden. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verhalten unter Android vor Lollipop</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Diese Art von Aktivität wird erstellt und in derselben Aufgabe, die die Absicht gesendet hat, oben auf dem Stapel platziert.</font></font><br>
 <br>
 <img src="https://habrastorage.org/webt/ne/n2/2u/nen22uybqupb_f6jnw5hvjz90rc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das folgende Bild zeigt, was passiert, wenn wir das Bild mit der Standardaktivität teilen. Es wird in derselben Aufgabe wie oben beschrieben gestapelt, obwohl sie aus verschiedenen Anwendungen stammen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wp/t5/fz/wpt5fzwohvycuouxans3y_t11vu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und das sehen Sie im Task-Manager. (Es mag etwas seltsam erscheinen.) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s8/u_/ii/s8u_iioeu_3jyfu9e2va7xypr54.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir die Anwendung zu einer anderen Aufgabe wechseln und dann wieder zur Galerie wechseln, sehen wir immer noch, dass der Standard-Startmodus über der Galerie-Aufgabe platziert ist. Wenn wir also etwas in der Galerie tun müssen, müssen wir zuerst unsere Arbeit in dieser zusätzlichen Aktivität beenden. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verhalten unter Android Lollipop</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn sich diese Aktivitäten auf dieselbe Anwendung beziehen, ist das Verhalten dasselbe wie in der Implementierung vor Lollipop - Platzieren auf dem Stapel über der Aufgabe.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lj/pm/90/ljpm90f0v8oh12ygrs0hrqxnmxa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die Absicht jedoch von einer anderen Anwendung gesendet wird, wird eine neue Aufgabe erstellt und die neu erstellte Aktivität als Stamm platziert, wie unten gezeigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/re/bn/ci/rebncivt1yw-otyjkghmjmevxss.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies sehen Sie im Task-Manager. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/vh/us/stvhusvjhnp8tmqogzkrenle3am.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies liegt daran, dass das Task-Management-System in Lollipop geändert wurde - es ist besser und verständlicher geworden. In Lollipop können Sie einfach zur Galerie zurückkehren, da es sich um eine andere Aufgabe handelt. Sie können eine andere Absicht senden. Es wird eine neue Aufgabe erstellt, die der Absicht auf die gleiche Weise wie die vorherige dient. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ia/iz/p_/iaizp_8fdhzzyft95zupxt89q54.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel für diese Art von Aktivität ist das </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verfassen von E-Mail-Aktivitäten</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder die </font><b><font style="vertical-align: inherit;">Statusposting-Aktivität des </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sozialen Netzwerks</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Statusaktualisierung in sozialen Netzwerken). </font><font style="vertical-align: inherit;">Wenn Sie eine Aktivität im Kopf haben, die jede Absicht separat verarbeitet, denken Sie an </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardaktivität</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTop</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der nächste Modus ist </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTop</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es verhält sich ähnlich wie </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standard</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , was bedeutet, dass Sie so viele Instanzen von singleTop Activity erstellen können, wie wir möchten. </font><font style="vertical-align: inherit;">Der einzige Unterschied besteht darin, dass, wenn sich bereits eine Aktivitätsinstanz mit demselben Typ oben im Stapel in der aufrufenden Aufgabe befindet, keine neue Aktivität erstellt wird. Stattdessen wird die Absicht über die Methode an die vorhandene Aktivitätsinstanz gesendet </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/uq/dj/khuqdjmchshqsq4cvxsybngidg8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In singleTop - </font><font style="vertical-align: inherit;">Modus müssen Sie die </font><font style="vertical-align: inherit;">Handhabung der eingehenden Intent in berücksichtigen </font></font><code>onCreate()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">so , </font><font style="vertical-align: inherit;">dass es funktioniert in allen Fällen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel für die Verwendung dieses Modus ist die Suchfunktion. Lassen Sie uns ein Suchfeld erstellen, das Sie zu SearchActivity weiterleitet, um die Suchergebnisse anzuzeigen. Für eine bessere Benutzeroberfläche setzen wir normalerweise immer das Suchfeld auf die Suchergebnisseite, damit der Benutzer die nächste Suche durchführen kann, ohne zurück zu gehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich nun vor, wenn wir immer eine neue SearchActivity starten, um ein neues Suchergebnis bereitzustellen, erhalten wir 10 neue Aktivitäten für 10 Iterationen der Suche. Es wäre sehr seltsam, zurück zu gehen, da Sie zehnmal zurückklicken müssten, um alle Suchergebnisse durchzugehen und zur Stammaktivität zurückzukehren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn sich SearchActivity bereits oben im Stapel befindet, ist es am besten, eine Absicht an eine vorhandene Activity-Instanz zu senden und das Suchergebnis aktualisieren zu lassen. Jetzt befindet sich nur noch eine SearchActivity oben im Stapel, und Sie können einfach einmal auf die Schaltfläche "Zurück" klicken, um zur vorherigen Aktivität zurückzukehren. Das macht mehr Sinn. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In jedem Fall arbeitet singleTop in derselben Aufgabe wie der Anrufer. Wenn Sie erwarten, dass die Absicht an eine vorhandene Aktivität gesendet wird, die über eine andere Aufgabe gestellt wird, sollte ich Sie enttäuschen, indem ich sage, dass sie dort nicht mehr funktioniert. Wenn die Absicht von einer anderen Anwendung an singleTop Activity gesendet wird, wird die neue Aktivität unter dem gleichen Aspekt wie für den Standardstartmodus gestartet (</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pre-Lollipop: Wird über die aufrufende Aufgabe gelegt, Lollipop: Es wird eine neue Aufgabe erstellt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleTask</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Modus unterscheidet sich stark von Standard und SingleTop. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aktivitäten mit singleTask launchMode dürfen nur eine Instanz im System haben (ala singleton)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn bereits eine Aktivitätsinstanz im System vorhanden ist, wird die gesamte Aufgabe, die die Instanz enthält, nach oben verschoben, und die Absicht wird über die Methode bereitgestellt </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Andernfalls wird eine neue Aktivität erstellt und in die entsprechende Aufgabe eingefügt. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten in einer Anwendung</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wenn im System keine singleTask Activity-Instanz vorhanden war, wird eine neue erstellt und einfach in derselben Aufgabe auf dem Stapel abgelegt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tl/gd/v5/tlgdv5pp1aup44lacg-a39l4qtg.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn es jedoch vorhanden ist, werden alle Aktivitäten, die sich über dieser singleTask-Aktivität befinden, automatisch brutal zerstört (der Lebenszyklus ist abgeschlossen), um die gewünschte Aktivität oben auf dem Stapel anzuzeigen.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gleichzeitig wird Intent über eine wunderbare Methode an singleTask Activity gesendet </font></font><code>onNewIntent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pr/7l/e9/pr7le9ygampc5au3-slsqydvakq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist aus Sicht der Benutzererfahrung nicht sinnvoll, aber so gestaltet ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können eine Nuance feststellen, die in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation erwähnt wird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das System erstellt eine neue Aufgabe und instanziiert eine Aktivitätsinstanz im Stammverzeichnis der neuen Aufgabe. </font></font></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der Praxis scheint dies jedoch nicht wie beschrieben zu funktionieren</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Die SingleTask-Aktivität befindet sich weiterhin oben im Aktivitätsstapel der Aufgabe, wie aus dem Ergebnis des Befehls hervorgeht </font></font><code>dumpsys activity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ta</font></font><br>
<br>
<pre><code class="java hljs">sk id #<span class="hljs-number">239</span>
  TaskRecord{<span class="hljs-number">428</span>efe30 #<span class="hljs-number">239</span> A=com.thecheesefactory.lab.launchmode U=<span class="hljs-number">0</span> sz=<span class="hljs-number">2</span>}<font></font>
  Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=<span class="hljs-number">0x10000000</span> cmp=com.thecheesefactory.lab.launchmode/.StandardActivity }<font></font>
    Hist #<span class="hljs-number">1</span>: ActivityRecord{<span class="hljs-number">429</span>a88d0 u0 com.thecheesefactory.lab.launchmode/.SingleTaskActivity t239}<font></font>
      Intent { cmp=com.thecheesefactory.lab.launchmode/.SingleTaskActivity }<font></font>
      ProcessRecord{<span class="hljs-number">42243130</span> <span class="hljs-number">18965</span>:com.thecheesefactory.lab.launchmode/u0a123}<font></font>
    Hist #<span class="hljs-number">0</span>: ActivityRecord{<span class="hljs-number">425f</span>ec98 u0 com.thecheesefactory.lab.launchmode/.StandardActivity t239}<font></font>
      Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=<span class="hljs-number">0x10000000</span> cmp=com.thecheesefactory.lab.launchmode/.StandardActivity }<font></font>
      ProcessRecord{<span class="hljs-number">42243130</span> <span class="hljs-number">18965</span>:com.thecheesefactory.lab.launchmode/u0a123}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn sich die singleTask-Aktivität wie im Dokument beschrieben verhalten soll: Erstellen Sie eine neue Aufgabe und legen Sie die Aktivität als Stammaktivität fest. Sie müssen ein Attribut </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">für singleTask Activity wie folgt definieren.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleTaskActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleTask launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleTask"</span>
    <span class="hljs-attr">android:taskAffinity</span>=<span class="hljs-string">""</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das wird das Ergebnis sein, wenn wir versuchen zu rennen </font></font><code>SingleTaskActivity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qn/au/9f/qnau9ftfyqxjtq8yty5cjlfaxiq.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ln/pk/d4/lnpkd4alkah9kvmiphylvk8mx6a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ihre Aufgabe ist es, </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abhängig vom gewünschten Verhalten der Aktivität </font><font style="vertical-align: inherit;">zu entscheiden, ob Sie sie verwenden möchten </font><font style="vertical-align: inherit;">oder nicht. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interaktion mit einer anderen Anwendung</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sobald die Absicht von einer anderen Anwendung gesendet wurde und keine Instanzen von Aktivitäten im System erstellt wurden, wird </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eine neue Aufgabe</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit einer neuen Aktivität erstellt, die als Stammaktivität platziert wird. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/wv/9p/bewv9pxsnqrp9rj2is8sfs1ka1m.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/7b/wc/_b/7bwc_bbpbwsbw0man-59yupltyw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn es keine Aufgabe gibt, die Eigentümer der aufrufenden singleTask-Aktivität wäre, wird stattdessen eine neue Aktivität angezeigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0e/eo/j5/0eeoj5h6thjdff3izlqcttpphde.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn in einer Aufgabe eine Instanz einer Aktivität vorhanden ist, wird die gesamte Aufgabe nach oben verschoben, und für jede einzelne Aktivität, die sich über einer einzelnen Aufgabenaktivität befindet, wird der Lebenszyklus abgeschlossen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn die Zurück-Taste gedrückt wird, muss der Benutzer die Aktivität auf dem Stapel durchlaufen, bevor er zur aufrufenden Aufgabe zurückkehrt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dy/if/9d/dyif9dvekt6pictwq7znk7bqb-i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beispiel für die Verwendung dieses Modus ist eine beliebige Einstiegspunktaktivität, z. B. die Seite "Posteingang" eines E-Mail-Clients oder eine Zeitleiste für soziale Netzwerke. </font><font style="vertical-align: inherit;">Diese Aktivitäten setzen nicht mehr als eine Instanz voraus, sodass singleTask seine Aufgabe perfekt erfüllt. </font><font style="vertical-align: inherit;">In jedem Fall sollten Sie diesen Modus mit Bedacht verwenden, da in diesem Modus Aktivitäten wie oben beschrieben ohne Bestätigung des Benutzers zerstört werden können.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">singleInstance</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Modus ist singleTask sehr ähnlich, bei dem nur eine Instanz einer Aktivität auf einem System vorhanden sein kann. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Unterschied besteht darin, dass eine Aufgabe mit dieser Aktivität nur eine Aktivität haben kann - eine mit einem singleInstance-Attribut</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn eine andere Aktivität von dieser Art von Aktivität aufgerufen wird, wird automatisch eine neue Aufgabe erstellt, um diese neue Aktivität aufzunehmen. Wenn eine einzelne Instanzaktivität aufgerufen wird, wird eine neue Aufgabe erstellt, um diese Aktivität zu hosten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In jedem Fall ist das Ergebnis ziemlich seltsam. Aus den bereitgestellten Informationen</font></font><code>dumpsys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist klar, dass es zwei Aufgaben im System gibt, aber nur eine wird im Aufgabenmanager angezeigt, je nachdem, welche oben liegt. Obwohl eine Aufgabe noch im Hintergrund ausgeführt wird, können wir sie daher nicht wieder in den Vordergrund schalten. Es macht überhaupt keinen Sinn. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist der Fall, wenn eine singleInstance-Aktivität aufgerufen wird, während bereits eine Aktivität auf dem Stapel vorhanden ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ea/2v/qy/ea2vqyvflpzuia5elbfl7cd_fzm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und hier ist, was wir im Task-Manager sehen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5a/lr/7s/5alr7sfn0d253r5-wi90zpmaoc4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da diese Aufgabe nur eine Aktivität haben kann, können wir nicht mehr zu Aufgabe Nr. 1 zurückkehren. Die einzige Möglichkeit, dies zu tun, besteht darin, die Anwendung über den Starter neu zu starten. Infolgedessen wird die singleInstance-Aufgabe im Hintergrund ausgeblendet.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf jeden Fall gibt es einige Problemumgehungen für dieses Problem. </font><font style="vertical-align: inherit;">Weisen Sie singleInstance Activity wie bei singleTask Activity einfach ein Attribut </font></font><code>taskAffinity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zu, sodass im Task-Manager mehrere Aufgaben vorhanden sein können.</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".SingleInstanceActivity"</span>
    <span class="hljs-attr">android:label</span>=<span class="hljs-string">"singleInstance launchMode"</span>
    <span class="hljs-attr">android:launchMode</span>=<span class="hljs-string">"singleInstance"</span>
    <span class="hljs-attr">android:taskAffinity</span>=<span class="hljs-string">""</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt macht das Bild mehr Sinn. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4g/g7/sr/4gg7srssanlpsftak21yt7ge4o4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Modus wird selten verwendet. </font><font style="vertical-align: inherit;">Einige der praktischen Anwendungsfälle sind ein Aktivitätsstarter oder eine Anwendung, für die Sie zu 100% sicher sind, dass es nur eine Aktivität geben sollte. </font><font style="vertical-align: inherit;">In jedem Fall empfehle ich Ihnen, diesen Modus nicht zu verwenden, es sei denn, es liegt ein Notfall vor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Absichtsflaggen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich </font></font><code>AndroidManifest.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum </font><font style="vertical-align: inherit;">direkten </font><font style="vertical-align: inherit;">Einstellen des </font><font style="vertical-align: inherit;">Startmodus können </font><font style="vertical-align: inherit;">wir das Verhalten auch mit einem Tool namens </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent Flags</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anpassen </font><font style="vertical-align: inherit;">, zum Beispiel:</font></font><br>
<br>
<pre><code class="java hljs">Intent intent = <span class="hljs-keyword">new</span> Intent(StandardActivity.<span class="hljs-keyword">this</span>, StandardActivity.class);<font></font>
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);<font></font>
startActivity(intent);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
wird </font></font><code>StandardActivity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit der Bedingung singleTop launchMode gestartet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt einige Flags, mit denen Sie arbeiten können. </font><font style="vertical-align: inherit;">Weitere Informationen hierzu finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich hoffe, Sie fanden diesen Artikel nützlich =) </font></font><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahren Sie mehr über den Kurs</font></font></a></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de493768/index.html">Native Listing reagieren</a></li>
<li><a href="../de493772/index.html">Top 10 Kubernetes Tipps und Tricks</a></li>
<li><a href="../de493796/index.html">4 besten Entwurfsmuster für automatisierte Tests (und 86 weitere)</a></li>
<li><a href="../de493798/index.html">In 1C UX / UI gibt es kein Design</a></li>
<li><a href="../de493800/index.html">Empirische Wahrscheinlichkeit</a></li>
<li><a href="../de493804/index.html">Sprechender Spieler auf Himbeere</a></li>
<li><a href="../de493808/index.html">Asynchronen Code mit Corutin linearisieren</a></li>
<li><a href="../de493810/index.html">Fünf Jahre intensive Entwicklung des Marktes für Dokumentenerkennung</a></li>
<li><a href="../de493814/index.html">Wie wir Interviews in Barcelona führen</a></li>
<li><a href="../de493816/index.html">Git Guide Teilenummer 1: Alles, was Sie über das .git-Verzeichnis wissen müssen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>