<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê¢ üé∑ üßïüèª Medici√≥n del rendimiento de Javascript üßíüèø ‚úã ‚¨áÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Medir el tiempo que lleva ejecutar una funci√≥n es una buena forma de demostrar que una implementaci√≥n de un mecanismo es m√°s productiva que otra. Esto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Medici√≥n del rendimiento de Javascript</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495894/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medir el tiempo que lleva ejecutar una funci√≥n es una buena forma de demostrar que una implementaci√≥n de un mecanismo es m√°s productiva que otra. Esto le permite asegurarse de que el rendimiento de la funci√≥n no se haya visto afectado despu√©s de algunos cambios realizados en el c√≥digo. Tambi√©n ayuda a buscar cuellos de botella en el rendimiento de las aplicaciones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si un proyecto web tiene un alto rendimiento, esto contribuye a su percepci√≥n positiva por parte de los usuarios. Y si a los usuarios les gusta trabajar con el recurso, tienen la propiedad de regresar. Por ejemplo, en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">este</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El estudio mostr√≥ que el 88% de los clientes en l√≠nea tienen menos probabilidades de volver a los recursos que encuentran con cualquier inconveniente. Estos inconvenientes pueden deberse a problemas de rendimiento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es por eso que las herramientas para ayudar a encontrar cuellos de botella en el rendimiento y medir los resultados de las mejoras realizadas al c√≥digo son importantes en el desarrollo web. Dichas herramientas son especialmente relevantes en el desarrollo de JavaScript. Es importante saber que cada l√≠nea de c√≥digo JavaScript puede potencialmente bloquear el DOM, ya que JavaScript es un lenguaje de subproceso √∫nico. </font><font style="vertical-align: inherit;">
En este art√≠culo hablar√© sobre c√≥mo medir el rendimiento de las funciones y qu√© hacer con los resultados de la medici√≥n.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/by/of/jl/byofjlhqvkjueyjzh-cyymte_qg.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si cree que algunos c√°lculos son demasiado pesados ‚Äã‚Äãpara realizarlos en el hilo principal, entonces puede decidir trasladarlos a un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabajador de servicio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o trabajador web.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo Performance.now ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La interfaz de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendimiento</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da acceso a un valor de tipo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOMHighResTimeStamp a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> trav√©s de un m√©todo </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Este m√©todo devuelve una marca de tiempo que indica el tiempo en milisegundos que ha transcurrido desde que el documento comenz√≥ a existir. </font><font style="vertical-align: inherit;">Adem√°s, la precisi√≥n de este indicador es de aproximadamente 5 microsegundos (fracciones de milisegundo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para medir el rendimiento de un fragmento de c√≥digo utilizando el m√©todo </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, debe realizar dos mediciones de tiempo, guardar los resultados de estas mediciones en variables y luego restar los resultados de la primera de los resultados de la segunda medici√≥n:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> t0 = performance.now();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++)&nbsp;<font></font>
{<font></font>
&nbsp;&nbsp;<span class="hljs-comment">// - </span><font></font>
}<font></font>
<span class="hljs-keyword">const</span> t1 = performance.now();
<span class="hljs-built_in">console</span>.log(t1 - t0, <span class="hljs-string">'milliseconds'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Chrome, despu√©s de ejecutar este c√≥digo, puede obtener algo como esto:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">0.6350000001020817</span> <span class="hljs-string">"milliseconds"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Firefox, as√≠:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number">1</span> milliseconds
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, los resultados de medici√≥n obtenidos en diferentes navegadores son muy diferentes. </font><font style="vertical-align: inherit;">El hecho es que en Firefox 60, se reduce la precisi√≥n de los resultados devueltos por la API de rendimiento. </font><font style="vertical-align: inherit;">Hablaremos m√°s sobre esto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La interfaz de rendimiento tiene muchas m√°s capacidades que simplemente devolver una determinada marca de tiempo. </font><font style="vertical-align: inherit;">Estos incluyen la medici√≥n de diversos aspectos del rendimiento representado por dichas extensiones de este interfaz que el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rendimiento de la l√≠nea de tiempo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la API </font><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Navigation Timing</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiempo de usuario</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sincronizaci√≥n de recursos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ est√° el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> material para obtener m√°s informaci√≥n sobre estas API. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestro caso, estamos hablando de medir el rendimiento de las funciones, por lo que tenemos suficientes oportunidades que el m√©todo brinda</font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Date.now () y performance.now ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede pensar que puede usar el m√©todo para medir el rendimiento </font></font><code>Date.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">De hecho, esto es posible, pero este enfoque tiene inconvenientes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El m√©todo </font></font><code>Date.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devuelve el tiempo en milisegundos transcurrido desde la era de Unix (1970-01-01T00: 00: 00Z) y depende del reloj del sistema. </font><font style="vertical-align: inherit;">Esto significa no solo que este m√©todo no es tan preciso como </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sino que, por el contrario </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, devuelve valores que, bajo ciertas condiciones, pueden basarse en indicadores de reloj incorrectos. </font><font style="vertical-align: inherit;">Esto es lo que dice Rich Gentlekor, un programador relacionado con el motor WebKit: ‚ÄúQuiz√°s los programadores tengan menos probabilidades de pensar que las lecturas regresaron al acceder</font></font><code>Date</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">basado en el tiempo del sistema, es absolutamente imposible llamarlo ideal para monitorear aplicaciones reales. </font><font style="vertical-align: inherit;">La mayor√≠a de los sistemas tienen un demonio que sincroniza regularmente el tiempo. </font><font style="vertical-align: inherit;">Ajustar el reloj del sistema por unos pocos milisegundos cada 15-20 minutos es algo com√∫n. </font><font style="vertical-align: inherit;">Con tal frecuencia, la configuraci√≥n del reloj alrededor del 1% de las mediciones de intervalos de 10 segundos ser√° inexacta "</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todo Console.time ()</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La medici√≥n del tiempo usando esta API es extremadamente simple. </font><font style="vertical-align: inherit;">Suficiente, antes del c√≥digo cuyo rendimiento necesita evaluar, llame al m√©todo </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y despu√©s de este c√≥digo, el m√©todo </font></font><code>console.timeEnd()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En este caso, uno y los otros m√©todos deben pasar el mismo argumento de cadena. </font><font style="vertical-align: inherit;">En una p√°gina, se pueden usar hasta 10,000 de estos temporizadores simult√°neamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La precisi√≥n de las mediciones de tiempo realizadas con esta API es la misma que cuando se usa la API de rendimiento, pero la precisi√≥n que se lograr√° en cada situaci√≥n espec√≠fica depende del navegador.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; array.length; i++) {
&nbsp;&nbsp;<span class="hljs-comment">// - </span><font></font>
}<font></font>
<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test'</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de ejecutar dicho c√≥digo, el sistema enviar√° autom√°ticamente informaci√≥n sobre el tiempo transcurrido a la consola. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Chrome, se ver√° m√°s o menos as√≠:</font></font><br>
<br>
<pre><code class="javascript hljs">test: <span class="hljs-number">0.766845703125</span>ms
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Firefox, as√≠:</font></font><br>
<br>
<pre><code class="javascript hljs">test: <span class="hljs-number">2</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, todo aqu√≠ es muy similar a lo que vimos mientras trabaj√°bamos </font></font><code>performance.now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La fuerza del m√©todo </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es su facilidad de uso. </font><font style="vertical-align: inherit;">Es decir, estamos hablando del hecho de que su aplicaci√≥n no requiere la declaraci√≥n de variables auxiliares y de encontrar la diferencia entre los indicadores registrados en ellas.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precisi√≥n de tiempo reducida</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si, utilizando las herramientas descritas anteriormente, midi√≥ el rendimiento de su c√≥digo en diferentes navegadores, podr√≠a prestar atenci√≥n al hecho de que los resultados de la medici√≥n pueden variar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raz√≥n de esto es que los navegadores est√°n tratando de proteger a los usuarios de ataques basados ‚Äã‚Äãen el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiempo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y de los mecanismos de identificaci√≥n del navegador ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Browser Fingerprinting</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Si los resultados de la medici√≥n del tiempo son demasiado precisos, esto puede dar a los atacantes la oportunidad, por ejemplo, de identificar a los usuarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Firefox 60, como ya se mencion√≥, la precisi√≥n de los resultados de medici√≥n de tiempo se </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reduce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esto se hace estableciendo el valor de la propiedad </font></font><code>privacy.reduceTimerPrecision</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en 2 ms.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algo a tener en cuenta al probar el rendimiento</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora tiene herramientas a su disposici√≥n para medir el rendimiento de las funciones de JavaScript. </font><font style="vertical-align: inherit;">Pero antes de comenzar a trabajar, debe considerar algunas de las caracter√≠sticas de las que hablaremos ahora.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Divide y vencer√°s</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponga que, al filtrar algunos datos, prest√≥ atenci√≥n al funcionamiento lento de la aplicaci√≥n. Pero no sabes exactamente d√≥nde est√° el cuello de botella en el rendimiento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En lugar de especular sobre qu√© parte del c√≥digo se ejecuta lentamente, ser√≠a mejor averiguarlo utilizando los m√©todos anteriores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ver la imagen general de lo que est√° sucediendo, primero debe usar </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>console.timeEnd()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">evaluar el rendimiento del bloque de c√≥digo, que, presumiblemente, tiene un efecto negativo en el rendimiento. Luego debe observar la velocidad de las partes individuales de este bloque. Si uno de ellos se ve notablemente m√°s lento que los dem√°s, debe prestarle especial atenci√≥n y c√≥mo analizarlo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuanto menos c√≥digo haya entre las llamadas a m√©todos que miden el tiempo, menor ser√° la probabilidad de que se mida algo que no es relevante para la situaci√≥n del problema.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Tener en cuenta el comportamiento de las funciones con diferentes valores de entrada</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En aplicaciones reales, los datos recibidos en la entrada de una funci√≥n particular pueden ser muy diferentes. </font><font style="vertical-align: inherit;">Si mide el rendimiento de una funci√≥n que pas√≥ un conjunto de datos seleccionado al azar, esto no proporcionar√° ninguna informaci√≥n valiosa que pueda aclarar lo que est√° sucediendo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las funciones al investigar el rendimiento deben llamarse con datos de entrada que se parezcan lo m√°s posible a los reales.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Ejecuta funciones muchas veces</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supongamos que tiene una funci√≥n que itera sobre una matriz. </font><font style="vertical-align: inherit;">Ella realiza algunos c√°lculos utilizando cada elemento de la matriz, y despu√©s de eso devuelve una nueva matriz con los resultados de los c√°lculos. </font><font style="vertical-align: inherit;">Pensando en optimizar esta funci√≥n, desea saber qu√© funciona m√°s r√°pido en su situaci√≥n: un bucle </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o un bucle regular </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay dos opciones para esta funci√≥n:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testForEach</span>(<span class="hljs-params">x</span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test-forEach'</span>);
&nbsp;&nbsp;<span class="hljs-keyword">const</span> res = [];<font></font>
&nbsp;&nbsp;x.forEach(<span class="hljs-function">(<span class="hljs-params">value, index</span>) =&gt;</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.push(value / <span class="hljs-number">1.2</span> * <span class="hljs-number">0.1</span>);<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test-forEach'</span>)
&nbsp;&nbsp;<span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testFor</span>(<span class="hljs-params">x</span>) </span>{
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.time(<span class="hljs-string">'test-for'</span>);
&nbsp;&nbsp;<span class="hljs-keyword">const</span> res = [];
&nbsp;&nbsp;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; x.length; i ++) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;res.push(x[i] / <span class="hljs-number">1.2</span> * <span class="hljs-number">0.1</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">'test-for'</span>)
&nbsp;&nbsp;<span class="hljs-keyword">return</span> res;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prueba las funciones:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> x = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-number">100000</span>).fill(<span class="hljs-built_in">Math</span>.random());<font></font>
testForEach(x);<font></font>
testFor(x);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de ejecutar el c√≥digo, obtenemos los siguientes resultados:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">27</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">3</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El ciclo parec√≠a </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser mucho m√°s lento que el ciclo </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Despu√©s de todo, ¬ølos resultados de la prueba indican exactamente esto? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, despu√©s de una sola prueba, es demasiado pronto para sacar tales conclusiones. </font><font style="vertical-align: inherit;">Intentemos llamar a las funciones dos veces:</font></font><br>
<br>
<pre><code class="javascript hljs">testForEach(x);<font></font>
testForEach(x);<font></font>
testFor(x);<font></font>
testFor(x);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obtenemos lo siguiente:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">13</span>ms - timer ended<font></font>
test-forEach: <span class="hljs-number">2</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">1</span>ms - timer ended<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">3</span>ms - timer ended
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resulta que la funci√≥n en la que se usa </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, llamada segunda vez, es tan r√°pida como aquella en la que se usa </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero, dado el hecho de que la primera </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">funci√≥n llama, la funci√≥n funciona mucho m√°s lentamente, puede que no valga la pena usarla.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance Rendimiento de prueba en diferentes navegadores</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las pruebas anteriores se realizaron en Firefox. </font><font style="vertical-align: inherit;">Pero, ¬øy si los ejecutas en Chrome? </font><font style="vertical-align: inherit;">Los resultados ser√°n completamente diferentes:</font></font><br>
<br>
<pre><code class="javascript hljs">test-forEach: <span class="hljs-number">6.156005859375</span>ms<font></font>
test-forEach: <span class="hljs-number">8.01416015625</span>ms<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">4.371337890625</span>ms<font></font>
test-<span class="hljs-keyword">for</span>: <span class="hljs-number">4.31298828125</span>ms
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El hecho es que los navegadores Chrome y Firefox se basan en diferentes motores de JavaScript que implementan diferentes optimizaciones de rendimiento. </font><font style="vertical-align: inherit;">Es muy √∫til saber acerca de estas diferencias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, Firefox tiene una mejor optimizaci√≥n </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con una entrada similar. </font><font style="vertical-align: inherit;">Y el ciclo </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es m√°s r√°pido que </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en Chrome y Firefox. </font><font style="vertical-align: inherit;">Como resultado, probablemente sea mejor detenerse en la variante de la funci√≥n c </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un buen ejemplo, que demuestra la importancia de medir el rendimiento en diferentes navegadores. </font><font style="vertical-align: inherit;">Si eval√∫a el rendimiento de alg√∫n c√≥digo solo en Chrome, puede llegar a la conclusi√≥n de que el ciclo </font></font><code>forEach</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, en comparaci√≥n con el ciclo </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no es tan malo.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Aplicar l√≠mites artificiales a los recursos del sistema</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los valores obtenidos en nuestros experimentos no parecen particularmente grandes. </font><font style="vertical-align: inherit;">Pero tenga en cuenta que las computadoras que se utilizan para el desarrollo suelen ser mucho m√°s r√°pidas que, por ejemplo, el tel√©fono m√≥vil promedio que usan para navegar por la web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ponerse en el lugar de un usuario que no tiene el dispositivo m√°s r√°pido, use las capacidades del navegador para limitar artificialmente los recursos del sistema. </font><font style="vertical-align: inherit;">Por ejemplo, para reducir el rendimiento del procesador. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Con este enfoque, 10 o 50 milisegundos pueden convertirse f√°cilmente en 500.</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ñç Medir el rendimiento relativo</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las mediciones de rendimiento generalmente dependen no solo del hardware, sino tambi√©n de la carga actual del procesador y de la carga de trabajo del hilo principal de la aplicaci√≥n JavaScript. </font><font style="vertical-align: inherit;">Por lo tanto, trate de confiar en los indicadores relativos que caracterizan el cambio en el rendimiento, ya que los indicadores absolutos obtenidos al analizar el mismo fragmento de c√≥digo en diferentes momentos pueden variar mucho.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este art√≠culo, analizamos algunas API de JavaScript dise√±adas para medir el rendimiento. </font><font style="vertical-align: inherit;">Hablamos sobre c√≥mo usarlos para analizar c√≥digo real. </font><font style="vertical-align: inherit;">Creo que para realizar algunas mediciones simples, es m√°s f√°cil de usar </font></font><code>console.time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tengo la sensaci√≥n de que muchos desarrolladores front-end no prestan suficiente atenci√≥n a la medici√≥n del rendimiento de sus proyectos. </font><font style="vertical-align: inherit;">Y deben monitorear constantemente los indicadores relevantes, ya que la productividad afecta el √©xito y la rentabilidad de los proyectos. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si monitorea constantemente el desempe√±o de sus proyectos, d√≠ganos c√≥mo lo hace.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es495880/index.html">El libro "Cabeza primero. Learning Go ¬ª</a></li>
<li><a href="../es495884/index.html">Predicci√≥n de series de tiempo usando redes neuronales recurrentes</a></li>
<li><a href="../es495888/index.html">PyCon Russia ha abierto CFP para futuros oradores. Formularios de participaci√≥n y temas esperados</a></li>
<li><a href="../es495890/index.html">Configuraci√≥n de paquetes Nginx / LetsEncrypt en Docker Swarm</a></li>
<li><a href="../es495892/index.html">¬øRealmente sabes qu√© son las matrices?</a></li>
<li><a href="../es495896/index.html">Paquete de uso de sonido: efectos de sonido en aplicaciones de reacci√≥n</a></li>
<li><a href="../es495898/index.html">Una gu√≠a pr√°ctica para lidiar con p√©rdidas de memoria en Node.js</a></li>
<li><a href="../es495902/index.html">CAPTCHA: matando la conversi√≥n</a></li>
<li><a href="../es495904/index.html">¬øSe puede predecir una epidemia?</a></li>
<li><a href="../es495908/index.html">El camino a la recompensa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>