<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíö ‚ò¢Ô∏è üë∫ PuppetConf 2016. Kubernetes f√ºr Systemadministratoren. Teil 1 üîó üéÉ üë©üèæ‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich bin ein Systemadministrator, der sich mit Computern befasst, und heute werden wir √ºber Kubernetes sprechen. Ich werde versuchen, mich eingehender ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>PuppetConf 2016. Kubernetes f√ºr Systemadministratoren. Teil 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/503970/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich bin ein Systemadministrator, der sich mit Computern befasst, und heute werden wir √ºber Kubernetes sprechen. Ich werde versuchen, mich eingehender mit dem Thema zu befassen, wobei ich √ºberlege, welche Probleme der Systemadministrator mit dieser Anwendung l√∂sen kann, und auch einige Aspekte der Puppet-Operation ansprechen, die mithilfe einer Reihe neuer Abstraktionen f√ºr die Anwendung in diese Welt zu passen schienen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor f√ºnf oder sechs Jahren schlugen Luis Andre Barroso und Urs Hoesl im Artikel ‚ÄûRechenzentrum als Computer‚Äú vor, das Rechenzentrum als einen massiven Computer wahrzunehmen. Es ist notwendig, von der Tatsache zu abstrahieren, dass das Rechenzentrum aus separaten Maschinen besteht, und es als eine logische Einheit zu betrachten. Sobald Sie versuchen, diese Idee in die Praxis umzusetzen, k√∂nnen Sie die Prinzipien des Aufbaus verteilter Systeme und des verteilten Rechnens auf Rechenzentren anwenden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w9/q7/sg/w9q7sgxchzl3fuuhlrymsv4xcsa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um das Rechenzentrum als Computer zu behandeln, ben√∂tigen Sie ein Betriebssystem. Es sieht dem auf einem separaten Computer sehr √§hnlich, muss jedoch √ºber eine andere Schnittstelle verf√ºgen, da Sie keinen Zugriff auf einen separaten Computer und keinen Zugriff auf den Kernel ben√∂tigen. Stellen wir uns das Rechenzentrum also als einen gro√üen Computer vor. Heute werde ich Ihnen sagen, was zu tun ist, wenn Sie anscheinend nicht in der Lage sind, einen Computer mit SSH zu steuern. Sie k√∂nnen sich nicht anmelden, und obwohl einige Leute glauben, dass es ohne dies unm√∂glich ist, das System zu steuern, werde ich Ihnen sagen, wie viel mit Kubernetes getan werden kann. Zun√§chst sollten Sie sich Kubernetes als Framework zum Erstellen verteilter Plattformen vorstellen.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/webt/wf/d2/5c/wfd25cjupilzhtu1ndkpci11cfs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies bedeutet nicht, dass Sie nach dem Herunterladen von Kubernetes eine Benutzeroberfl√§che erhalten, die Ihnen alles bietet, was Sie mit dem System tun m√∂chten. Nein, dies ist nur die Grundlage f√ºr die Erstellung der Tools, die Sie zum Ausf√ºhren Ihrer Infrastruktur ben√∂tigen. Ich zeige Ihnen, wie Sie mithilfe der Let's Encrypt Certificate Authority eine Integration erstellen, um den Zertifikatsprozess f√ºr meine Anwendung mithilfe von Kubernetes als Framework zu automatisieren.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ol/ty/g3/oltyg3s-gtbgticzc-omgefrq04.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele Leute fragen genau, wof√ºr Kubernetes gut ist. Ich habe viele Jahre mit Puppet Labs zusammengearbeitet und festgestellt, dass dieses Ding auf Computern installiert wurde, um dem System eine API zur Verf√ºgung zu stellen, die es bisher noch nicht gab. Anstelle von Bash, YAML-Skripten und √§hnlichen Dingen stellte Puppet einen DSL-Benutzer zur Verf√ºgung, der es ihm erm√∂glichte, programmgesteuert ohne Shell-Skripte mit den Maschinen zu interagieren. Der Unterschied zwischen Kubernetes besteht darin, dass es sich √ºber dem Niveau von "Eisen" befindet. Konzentrieren wir uns weniger auf die Automatisierung und Abstraktion dieses Systems als vielmehr auf die Beziehungen oder den Vertrag zwischen unserer Infrastruktur und den Anwendungen, die wir von jedem Knoten aus abrufen werden. In Kubernetes weisen wir Maschinen keine Anwendungen zu. Es gibt kein "Knotenmanifest". Der Scheduler betrachtet einzelne Knoten einfach als Rechenzentrumsressourcen.einen gro√üen Computer darstellen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fragen: "L√§uft Kubernetes auf OpenStack, auf VMware, auf Bare Metal, in der Cloud?" mach keinen Sinn Die richtige Frage lautet: "Kann ich den Kubernetes-Agenten ausf√ºhren, um diese Ressourcen abzurufen?" Die Antwort lautet "Ja". Weil der Betrieb dieser Anwendung v√∂llig unabh√§ngig von der von Ihnen gew√§hlten Plattform ist. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/an/km/hl/ankmhlzzmnaitmix8t0hppm8idi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes ist plattformunabh√§ngig. Kubernetes ist genauso deklarativ wie Puppet. Daher geben Sie an, f√ºr welche Anwendung Sie sie verwenden m√∂chten - in diesem Beispiel handelt es sich um Nginx. Dies ist ein Vertrag zwischen Ihnen, dem Entwickler, und Kubernetes, um Container-Images zu erstellen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich verwende gerne die Analogie mit der FedEx-Kurierfirma - Sie k√∂nnen ihnen nicht einen ganzen Wagen ziehen und warten, bis sie alles sortieren und dorthin schicken, wo es sein sollte. Sie haben eine Regel: Pack deine Sachen in eine Kiste. Sobald Sie dies tun, senden sie Ihre Box und k√∂nnen erkennen, wann sie am Ziel ankommt. "Wenn Sie keine Box haben, k√∂nnen Sie nicht mit unserem System arbeiten."</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie mit Containern arbeiten, ist es daher sinnlos zu diskutieren, was Sie haben - Python, Java und oder etwas anderes, es spielt keine Rolle - nehmen Sie einfach alle Ihre Abh√§ngigkeiten und legen Sie sie in den Container. Viele Leute sagen √ºber Container, dass sie die Probleme der gesamten Infrastruktur zu l√∂sen scheinen. Das Problem ist jedoch, dass Menschen Container nicht als zwei verschiedene Dinge wahrnehmen, die sie wirklich sind. Das erste ist die Idee eines Verpackungsformats, das zweite ist die Idee einer Container-Laufzeit. Dies sind zwei verschiedene Dinge, die nicht unbedingt dieselben Werkzeuge erfordern.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Welcher der Anwesenden hat die Container erstellt? Und wer baut mit Puppet Container? Das stimmt, dem stimme ich auch nicht zu! Sie k√∂nnen sagen: ‚ÄûWie so? Du bist auf der Puppenkonferenz, da musst du zustimmen! ‚Äú Der Grund, warum ich mit der Idee, Container in Puppet zu bauen, nicht einverstanden bin, ist folgender: Ich wei√ü nicht, ob wir sie √ºberhaupt brauchen, da die Dinge, die wir zum Erstellen eines Bildes ben√∂tigen, sich von den Dingen unterscheiden, die wir zum Starten des Produktprozesses ben√∂tigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen wir uns vor, Sie erstellen eine Software-Pipeline und sehen sich diese Docker-Datei an. Schlie√üen Sie Ihre Augen vor denen, die diese Dateien noch nie gesehen haben, denn f√ºr Sie k√∂nnen sie einsch√ºchternd aussehen. Diese Datei zeigt, wie Sie eine Ruby on Rails-Anwendung erstellen - eine Ruby-Anwendung mit einem Rails-Framework.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f3/ra/3r/f3ra3rkhngjp08t7beuyoeihc7i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es hei√üt "FROM ruby ‚Äã‚Äã2.3.1", was wahrscheinlich das gesamte Betriebssystem in den Container einf√ºgen wird, in diesem Fall das grundlegende Ruby-Image von alpine-linux. Wei√ü jemand, warum wir Ubuntu- oder Red Hat-Images in diese Container einbetten? Die meisten Menschen wissen nicht, was Abh√§ngigkeiten sind, und verwenden einen zuf√§lligen Ansatz, indem sie einfach das gesamte Betriebssystem in einen Container stopfen, um sicherzustellen, dass sie ihre Abh√§ngigkeiten irgendwo im Inneren haben. Nachdem Sie dieses Ding erstellt haben, m√ºssen Sie es nur einmal ausf√ºhren. Hier kommt das Missverst√§ndnis her: Wenn dieses Ding nicht funktioniert, √§ndern Sie die Codezeile, bis es funktioniert. Einfach nachschauen! Sie m√ºssen mit diesen Dateien nicht zu schlau sein. Ihr Ziel ist es, eine Offline-Darstellung Ihrer Anwendung mit allen Abh√§ngigkeiten zu erstellen. Dies ist nur eine Kr√ºcke, die wir von Ubuntu als Ausgangspunkt verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie die Anwendung gerade erstellt und gestartet h√§tten, w√ºrden Sie so etwas wie einen statischen Link verwenden. Keine Abh√§ngigkeiten vom Host, in Ihrem Container h√§tten Sie nur eine Bin√§rdatei einer einzeiligen Docker-Datei und keine grundlegenden Images. Tats√§chlich ist es nur eine √úbertragung von Dingen, die uns vertraut sind. Sehen Sie, wie diese Baugruppe aussehen wird. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/pr/uq/jfpruqpgtrrrwwchkadl34kxn_y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe diese Datei zuvor erstellt, aber normalerweise sieht es nach einem Versuch aus, das gesamte Internet aufzubauen. Ich habe ein wenig Angst vor dieser Versammlung, weil ich nicht sicher bin, ob das lokale Internet mit Ruby umgehen kann. Sehen Sie, was passiert ist.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jo/1i/a6/jo1ia6qqo37wr63tazkn-yco38e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie gef√§llt dir dieses Volumen von 1 Gig? Dar√ºber hinaus kann die Quelldatei, dh Ihre Anwendung selbst, beispielsweise nur 100 kB belegen. Wie haben wir ein ganzes Gigabyte bekommen? Dies liegt daran, dass wir ineffiziente Tools zum Erstellen eigenst√§ndiger Anwendungen verwenden. Alle von ihnen sind f√ºr die Ausf√ºhrung auf Computern ausgelegt und verwenden dynamische Bibliotheken, die aus der externen Umgebung geladen wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden wir versuchen, das zu tun, was wir auf einem Mobiltelefon tun - tragbare Versionen von Anwendungen, f√ºr deren Nutzung ein Vertrag zwischen Ihnen und der Infrastruktur besteht. Sobald wir einen solchen Vertrag haben, k√∂nnen wir dem System genau sagen, was es tun soll, und es ist ihm egal, was zu tun ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie haben keine spezielle, speziell erstellte Anwendung. Ich bin auf Unternehmen gesto√üen, die sagen: ‚ÄûWir haben eine spezielle Anwendung!‚Äú. Ich sage: "Ratet mal, was es tut: Es startet, bindet an den Port, empf√§ngt Datenverkehr, macht etwas mit den Daten" und sie sind: "Wow, woher wei√üt du das?" Ich wei√ü, weil es hier nichts Besonderes gibt!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also nehmen wir das Beispiel, das wir in den Container gelegt haben, und senden es an den API-Server. Als n√§chstes m√ºssen wir daraus etwas machen, das auf unserer Maschine funktioniert. Um jedoch Ressourcen vom Computer zu sammeln, m√ºssen wir verschiedene Dinge installieren: eine Container-Laufzeit f√ºr die Docker-Datei, einen Agenten, der versteht, wie er mit dem Assistenten kommuniziert, um alles Notwendige auszuf√ºhren, und wie die Systemantwort lauten soll, damit die Anwendung funktioniert . Dieser Agent beobachtet einfach - es gibt keine 30-Sekunden-Intervalle, wiederholte √úberpr√ºfungen, nichts dergleichen. Er beobachtet einfach und sagt: ‚ÄûWenn es Arbeit f√ºr mich gibt, lassen Sie es mich wissen, und ich werde beginnen und Sie st√§ndig √ºber den Status des Prozesses informieren‚Äú, damit Sie wissen, dass es funktioniert.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2q/s1/dq/2qs1dq2ks5exprh4iljfwyiyydu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald wir dies mit dem Auto tun, brauchen wir einen Planer. Wie viele Personen verwenden den Scheduler? Sie m√ºssen alle Ihre H√§nde heben! Dies entspricht der Antwort auf die Frage: "Wer von Ihnen hat einen Laptop mit mehr als einem Single-Core-Prozessor?" Wenn ich eine Frage zum Planer stelle, heben die meisten ihre H√§nde nicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Ihren Prozess auf einem Computer starten, sollte etwas ausw√§hlen, welcher Prozessor verwendet werden soll. Wer macht das? Das stimmt, der Kern. Jetzt werde ich euch erkl√§ren, was ein Planer ist. Der schnellste Weg, dies zu tun, ist Tetris zu spielen. Das erste, was wir diskutieren werden, ist die automatische Bereitstellung.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/on/qu/bb/onqubbexwsv2hscesmqhfvanli4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie viele von Ihnen haben die vollautomatische Bereitstellung verwendet? Ich denke, deshalb sind wir alle hier. Also dr√ºcke ich den Knopf, die Bl√∂cke fallen von oben herunter und jetzt kannst du ein Bier trinken gehen. Beachten Sie jedoch, was links und rechts passiert: Ihr Prozessor und Ihr Speicher werden zum Papierkorb. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9c/gc/nd/9cgcndnl9ybdbg7t5fdhjei0930.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies liegt daran, dass die meisten Benutzer nicht mehr als 5% der Computerressourcen verwenden. Sie automatisieren Prozesse, verlieren aber eine Menge Geld. Ich arbeite als Cloud-Anbieter, ich habe riesige Ressourcenreserven, aber es ist einfach schrecklich, wenn Leute auf √§hnliche Weise Geld ausgeben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie den Scheduler verwenden, steuern Sie in Analogie zu Tetris das Spielfeld und jeden Block, indem Sie ihn an die richtige Stelle leiten, dh die Ressourcen der Maschine optimal nutzen. Kubernetes verwendet hierf√ºr einige Algorithmen. Der Hauptalgorithmus hei√üt Bin Packing - der gleiche ‚ÄûTetris‚Äú hilft, ihn zu verstehen. Kubernetes erh√§lt eine Arbeitslast in verschiedenen Formen und Gr√∂√üen, und unsere Aufgabe ist es, sie optimal in Maschinen zu verpacken.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unser Ziel ist es, alle Ressourcen, die im Verlauf der Arbeit verf√ºgbar werden, wiederzuverwenden. Nicht alle Workloads sind gleich, daher ist es schwierig, sie in dieselbe Box zu packen. In Kubernetes gibt es jedoch immer den richtigen Cluster, in dem Sie ihn platzieren und ausf√ºhren k√∂nnen, wenn ein ‚ÄûTeil‚Äú der Arbeitslast angezeigt wird (oder der Tetris-Block, wenn wir unsere Analogie fortsetzen). Und wie bei jeder Stapelverarbeitung erhalten wir nach Abschluss der Aufgabe alle zuvor belegten Ressourcen zur√ºck, damit wir sie f√ºr zuk√ºnftige Aufgaben verwenden k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da wir nicht im Spiel, sondern in der realen Welt leben, haben Sie L√∂sungen entwickelt, die vor vielen Jahren entwickelt wurden. Dann werden Sie Systemadministrator, Arbeitgeber zeigen Ihnen ihre Produktion und Sie stellen fest, dass ihre Bereitstellung nicht gut genug ist.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2u/h_/hs/2uh_hsyrdmkfnkg5pnes9jlopr4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen Cluster-Manager auf Teilen Ihrer Computer installieren und bestimmte Ressourcen verwalten lassen. In diesem speziellen Fall k√∂nnen Sie Kubernetes verwenden, die die leeren Bereiche Ihres Tetris ausf√ºllen, wenn Sie vorw√§rts gehen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie diejenigen, die in der Branche arbeiten, ihre H√§nde heben. Ja, das ist ein Klassiker namens Gehalt. Angenommen, Sie haben mehrere Probleme in Ihrem Unternehmen. Das erste ist, dass alles in Java oder sogar in COBOL geschrieben ist - normalerweise ist niemand dazu bereit.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das zweite Problem, das in Unternehmen h√§ufig auftritt, ist das Oracle DBMS. Dies ist so etwas, das sich auf der R√ºckseite der Software befindet und sagt: "Versuchen Sie nicht, etwas zu automatisieren!". Wenn Sie die Software automatisieren, steigen Ihre Kosten. Daher keine Automatisierung - wir f√∂rdern unser Beratungs-√ñkosystem! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Regel wird unter solchen Umst√§nden gefragt, ob Kubernetes einfach zur L√∂sung dieser Probleme verwendet werden kann. Ich antworte: "Nein", denn in einer Situation, die der Niederlage in Tetris √§hnelt, hilft Ihnen nichts. Sie m√ºssen etwas anderes tun, n√§mlich den Scheduler verwenden. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt, da wir einen Scheduler haben, der Workloads erfolgreich versteht, k√∂nnen Sie einfach alles in K√§stchen packen, und der Scheduler beginnt mit seiner Arbeit.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/yz/ei/rgyzeivhzivkgknoock70b7rcym.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns √ºber die Schl√ºsselentit√§ten von Kubernetes sprechen. Erstens sind dies Pods Pods, bei denen es sich um eine Sammlung von Beh√§ltern handelt. In den meisten F√§llen besteht eine Anwendung aus mehr als einer Komponente. Sie k√∂nnen sich eine Anwendung anh√§ngen, die ohne Java-Skripte geschrieben wurde. M√∂glicherweise m√∂chten Sie jedoch nginx verwenden, um TLS und nur einen Proxy im Hintergrund der Anwendung zu vervollst√§ndigen. Anschlie√üend sollten diese Elemente miteinander verbunden werden, da es sich um fest codierte Abh√§ngigkeiten handelt. Eine lose gekoppelte Abh√§ngigkeit ist eine Datenbank, die Sie unabh√§ngig voneinander skalieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e4/ca/zh/e4cazhfmbeim5egpejksnv42ce8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das zweite wichtige Element ist der Replication Controller, der die Prozesse im Kubernetes-Cluster verwaltet. Sie k√∂nnen mehrere Instanzen von Herden erstellen und deren Zustand √ºberwachen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sagen, dass Sie einen Prozess starten m√∂chten, bedeutet dies, dass er die ganze Zeit irgendwo im Cluster funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das dritte wichtige Element ist der Service, eine Reihe von kollaborativen Herden. Ihre Bereitstellung basiert auf der dynamischen Bestimmung des gew√ºnschten Status - wo die Anwendungen funktionieren sollen, mit welcher IP-Adresse usw. Sie ben√∂tigen also eine Art Service.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das vierte Element sind die Volumes-Repositorys, die als Verzeichnisse angesehen werden k√∂nnen, die f√ºr Container im Herd verf√ºgbar sind. Kubernetes verf√ºgt √ºber verschiedene Arten von Volumes, die bestimmen, wie dieser Speicher erstellt wird und was er enth√§lt. Das Konzept der Lautst√§rke war auch in Docker vorhanden, aber das Problem war, dass der Speicher dort auf einen bestimmten Herd beschr√§nkt war. Sobald Under aufh√∂rte zu existieren, verschwand Volume damit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der von Kubernetes erstellte Speicher ist nicht auf einen Container beschr√§nkt. Es unterst√ºtzt einen oder alle im Herd bereitgestellten Container. Ein wesentlicher Vorteil von Kubernetes Volume ist die Unterst√ºtzung verschiedener Speichertypen, die Pod gleichzeitig verwenden kann.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns an, was ein Container ist. Dies ist das Bildformat, in dem unsere Anwendung mit allen Abh√§ngigkeiten gepackt ist, und die Hauptkonfiguration der Laufzeitumgebung, die zeigt, wie diese Anwendung funktionieren sollte. Dies sind zwei verschiedene Elemente, obwohl Sie alles in diese Sache packen k√∂nnen, insbesondere das Root-Dateisystem als komprimierte Tarball-Tar-Datei, die viele Konfigurationsdateien f√ºr ein bestimmtes System enth√§lt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/lg/9w/edlg9wz2ttlinfb3udleerb0id0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann k√∂nnen wir die Verteilung durchf√ºhren, ein Prozess, der Ihnen allen vertraut ist - RPM oder ein anderes Repository-System wird hier verwendet. Sie nehmen all diese Dinge und legen sie in das Repository. Dieser Prozess ist dem bei Betriebssystempaketen sehr √§hnlich, nur f√ºr Container, die aus Images erstellt werden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pe/4p/dg/pe4pdggvudbe3l5ufp5l6gei6pc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Pod k√∂nnen Sie alles zusammenstellen, was unsere logische Anwendung ben√∂tigt. Eine logische Anwendung ist ein Tool zum Verwalten mehrerer Anwendungen innerhalb desselben Systemprofils. Ein Sub ist ein Ressourcenpaket, das einen oder mehrere Container und Speicher, einen gemeinsamen Namespace und eine IP-Adresse pro Sub enth√§lt. Tresore k√∂nnen zwischen Containern verteilt werden.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ht/rw/cf/htrwcfvuetyk6vhgqjh6zgsjeoe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen √§hnelt das Herddesign einer virtuellen Maschine. Es stellt sicher, dass die Anwendung als atomare Einheit gestartet und gestoppt wird. Die n√§chste Folie zeigt, wie der Replikationscontroller aussieht. Wenn ich diese Deklaration an den Server sende und sage: "Hey, ich m√∂chte, dass eine Replik der Foo-Anwendung funktioniert!", Erstellt der Controller sie aus der Vorlage und sendet sie an den Scheduler, der die Anwendung auf Knoten 1 platziert. Wir geben nicht an auf welcher Maschine es laufen soll, obwohl wir es schaffen k√∂nnen. Erh√∂hen Sie nun die Anzahl der Replikate auf 3. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ta/qe/ld/taqeldbd6scvq7oyst2ff3dooyu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Welche Aktionen erwarten Sie vom System, wenn einer der Computer ausf√§llt? In diesem Fall bringt der Replikationscontroller den aktuellen Status des Systems in den gew√ºnschten Status und verschiebt ihn unter dem Container von der dritten, nicht arbeitenden Maschine zur zweiten.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/d7/_i/oyd7_i1a1dvfpllkj_s7hek_37e.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie m√ºssen sich nicht mit diesem Prozess befassen und ihn steuern. Wenn Sie die Arbeit dem Controller anvertrauen, k√∂nnen Sie sicher sein, dass die Anwendung ordnungsgem√§√ü sichergestellt wird, indem Sie st√§ndig √Ñnderungen des aktuellen Zustands der Infrastruktur √ºberwachen und Entscheidungen treffen, die sicherstellen, dass das System funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Dinge sind ihrer Zeit voraus - Sie sagen dem System einfach: ‚ÄûIch m√∂chte, dass diese drei Maschinen funktionieren!‚Äú Und hier endet Ihre Kontrolle. Dieser Ansatz unterscheidet sich stark von Skripten und reiner Automatisierung, wenn Sie wirklich verwalten m√ºssen, was gerade passiert, um die zuk√ºnftige Entscheidung zu beeinflussen. Sie k√∂nnen dies alles nicht kodifizieren, ohne eingehende Informationen empfangen zu k√∂nnen, um richtig auf die Situation zu reagieren. Der oben beschriebene Ansatz bietet Ihnen diese M√∂glichkeit.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie stellen Sie sich die Konfiguration vor - das Konzept der Konfigurationsdateien f√ºr Dienste? Viele Leute schweigen √ºber dieses Problem, wenn es um Container geht, aber wir brauchen noch eine Konfiguration, es verschwindet nirgendwo! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kubernetes verwendet auch das Secrets-Konzept, mit dem verschl√ºsselte Daten zwischen Managern und Nods-Knoten gespeichert und √ºbertragen werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir lassen Puppet niemals in einem Container laufen, weil es keinen Grund daf√ºr gibt. Sie k√∂nnen Puppet verwenden, um eine Konfigurationsdatei zu generieren, m√∂chten diese jedoch weiterhin in Kubernetis speichern, da Sie sie zur Laufzeit verteilen k√∂nnen. Mal sehen, wie es aussieht.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/i3/f3/vvi3f3c-8dhftpdedfe23me1xbg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Beispiel erstellen wir ein Geheimnis aus einer Datei und speichern es auf dem Kubernetes-API-Server. Sie k√∂nnen sich vorstellen, dass Sie diesen Teil durch etwas wie Puppet ersetzt haben, das die eRB-Vorlage und versteckte Daten verwendet, um den Inhalt des Geheimnisses auszuf√ºllen - es spielt keine Rolle, wer es tut, aber Sie k√∂nnen es trotzdem tun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald das Geheimnis vorhanden ist, kann es als Link zum Erstellen einer Bereitstellung dienen, in der steht: "Ich m√∂chte dieses Geheimnis verwenden!" In diesem Fall f√ºhrt Kubernetes Folgendes aus.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/um/nu/cmumnufkw4ffxmhcggn2ppulcva.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es erstellt einen Pod, entnimmt Daten aus dem Geheimen, legt sie in einem tempor√§ren Dateisystem ab und pr√§sentiert sie als Container, genau wie Puppet eine Kopie auf einem Computer erstellt. Dies folgt dem Lebenszyklus der Anwendung, und wenn die Anwendung stirbt, verschwindet die Konfiguration mit ihr. Wenn Sie 10.000 Anwendungsinstanzen ben√∂tigen, m√ºssen Sie weniger als 10.000 tempor√§re Dateisysteme erstellen und in diese einf√ºgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit Services k√∂nnen Sie alle diese Elemente in einem Cluster ausf√ºhren und mit einem anderen Endpunkt synchronisieren. Tats√§chlich ist ein Dienst eine Gruppe von Herden, die als ein einziger Herd fungieren. Es enth√§lt eine permanente IP-Adresse und einen Port, bietet eine Integration in DNS, verwendet den Lastenausgleich und wird aktualisiert, wenn sich die Firmware √§ndert.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8t/cr/co/8tcrcolf5hrgnqfcrdf3nzkdr2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Betrachten wir nun die Zusammenarbeit der konzeptionellen Komponenten von Kubernetes. Wir haben Legosteine ‚Äã‚Äãund Konfigurationen, die miteinander interagieren m√ºssen. Wenn Sie beabsichtigen, eine Datenbank in einem Cluster auszuf√ºhren, k√∂nnen Sie dies wirklich auf Kubernetes tun. Viele sagen, dass Sie keine Stateful-Anwendungen in Containern ausf√ºhren k√∂nnen, aber das ist v√∂llig falsch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie dar√ºber nachdenken, wie Hypervisoren funktionieren, k√∂nnen Sie verstehen, dass sie fast dasselbe tun wie Sie: Erstellen Sie eine virtuelle Maschine, der Scheduler verschiebt sie auf den Hypervisor und h√§ngt den Speicher an. Manchmal arbeiten Sie mit lokalem Speicher, der vom Hypervisor stammt, und es gibt keine Gr√ºnde, warum Container nicht dasselbe tun k√∂nnten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Problem bei Containern besteht jedoch darin, dass die meisten Benutzer nicht daran gew√∂hnt sind, eine explizite Liste von Dateipfaden zu haben, die sie f√ºr die Anwendung bereitstellen m√ºssen. Die meisten Benutzer k√∂nnen Ihnen nicht genau sagen, welche Ger√§te und Dateien das Data Warehouse ben√∂tigt. Sie verpacken alles in Beh√§ltern, und als Ergebnis kommt nichts Gutes dabei heraus. Glauben Sie daher nicht, dass Container keine zustandssparenden Anwendungen ausf√ºhren k√∂nnen - Sie k√∂nnen dies sehr gut tun. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bj/hm/ve/bjhmvetwbvkbjbqirup-xb_ya-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Folie sehen Sie ein Beispiel f√ºr Ruby-on-Rails. Bevor wir unsere Anwendung verwenden k√∂nnen, m√ºssen wir die Datenbank migrieren. Kommen wir zur Live-Demo des Programms. Um die Bereitstellung durchzuf√ºhren, verwende ich MY_SQL, und Sie sehen viele Daten auf dem Bildschirm.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dp/ai/or/dpaioryaowiq9c4yevmvd9uqkqg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich zeige Ihnen das alles, weil Sie als Systemadministrator viele Dinge verstehen m√ºssen. In dieser Bereitstellung verfeinere ich einige Metadaten meiner Anwendung, aber die Hauptsache, die ich grau hervorheben werde: Ich m√∂chte 1 Kopie der MySQL-Anwendung starten und die MySQL-Container-Version 5.6.32 verwenden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/kr/ev/qvkrev67_otmvqqvdhtiha07mec.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten Sie, dass ich hier ein Geheimnis von Kubernetes als Links ausw√§hle, das ich in diesem Fall als Umgebungsvariablen einf√ºgen werde. Sp√§ter werde ich Ihnen einen anderen Fall zeigen, wenn wir sie in das Dateisystem einf√ºgen. Daher muss ich in meiner Konfiguration keine Geheimnisse ‚Äûbacken‚Äú. Die n√§chste wichtige Zeile ist der Ressourcenblock.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hm/b4/jt/hmb4jtgyd1dupdt4dfoapzcppli.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen Tetris erst spielen, wenn Sie die Gr√∂√üe der Bl√∂cke kennen. </font><font style="vertical-align: inherit;">Viele Benutzer beginnen mit der Bereitstellung, ohne Ressourcenbeschr√§nkungen f√ºr diesen Prozess zu verwenden. </font><font style="vertical-align: inherit;">Infolgedessen ist der Arbeitsspeicher vollst√§ndig verstopft, und Sie "stapeln" den gesamten Server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
22:09 min Wird </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sehr bald fortgesetzt ...</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HlAXp0-M6SY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein bisschen Werbung :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielen Dank f√ºr Ihren Aufenthalt bei uns. Gef√§llt dir unser Artikel? M√∂chten Sie weitere interessante Materialien sehen? Unterst√ºtzen Sie uns, indem Sie eine Bestellung </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">aufgeben</font></a><font style="vertical-align: inherit;"> oder Ihren Freunden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud-basiertes VPS f√ºr Entwickler ab 4,99 US-Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> empfehlen </font><font style="vertical-align: inherit;">, ein </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einzigartiges Analogon von Einstiegsservern, das von uns f√ºr Sie erfunden wurde: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die ganze Wahrheit √ºber VPS (KVM) E5-2697 v3 (6 Kerne) 10 GB DDR4 480 GB SSD 1 Gbit / s ab 19 $ oder wie teilt man den Server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verf√ºgbar). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2-mal g√ºnstiger im Equinix Tier IV-Rechenzentrum in Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nur wir haben </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2,6 GHz 14C 64 GB DDR4 4 x 960 GB SSD 1 Gbit / s 100 TV von 199 US-Dollar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in den Niederlanden!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2,2 GHz 6C 128 GB DDR3 2x960 GB SSD 1 Gbit / s 100 TB - ab 99 US-Dollar! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lesen Sie mehr √ºber</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> den Aufbau eines Infrastrukturgeb√§udes. </font><font style="vertical-align: inherit;">Klasse C mit Dell R730xd E5-2650 v4-Servern f√ºr 9.000 Euro f√ºr einen Cent?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de503960/index.html">Wie Linux Zeichenfolgen sortiert</a></li>
<li><a href="../de503962/index.html">Autonomes Fahren - Hype in Autos, aber die Notwendigkeit von Netzwerkdiensten f√ºr Rechenzentren</a></li>
<li><a href="../de503964/index.html">DataStore - CRUD (Create Read Update Delete)</a></li>
<li><a href="../de503966/index.html">Die Social Monitoring App wurde aus einem M√ºllwagen-Tracker erstellt</a></li>
<li><a href="../de503968/index.html">Wie kann man den Roboter genau bewegen? √úbersicht und Funktionen der Studuino Platform Robotics</a></li>
<li><a href="../de503972/index.html">Streaming-Test in 4 sozialen Netzwerken und Auswahl der besten Option</a></li>
<li><a href="../de503980/index.html">√úberwachung der Temperatur an einem entfernten Ort durch ‚Äûimprovisierte‚Äú Mittel</a></li>
<li><a href="../de503982/index.html">√úber Orks und Frameworks</a></li>
<li><a href="../de503988/index.html">Wie "wirbelndes Licht" in optische Netzwerke gelangte</a></li>
<li><a href="../de503990/index.html">Ich bin es leid, dass gew√∂hnliche Programmierer sich als Entwickler ausgeben und die Branche entehren. Sie machen die Welt schlimmer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>