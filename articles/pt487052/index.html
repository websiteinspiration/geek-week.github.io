<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÅ üî∑ üíë Kaboom: um sapador incomum üöê ü¶Ä üëäüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando crian√ßa, sentei-me no trabalho de meu pai tr√™s vezes por semana, durante uma hora e meia. Eu tinha permiss√£o para ir a um computador, onde, no ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kaboom: um sapador incomum</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cloud4y/blog/487052/"><img src="https://habrastorage.org/webt/8r/zx/fj/8rzxfjri6jhsbbuodzrjy8eauae.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando crian√ßa, sentei-me no trabalho de meu pai tr√™s vezes por semana, durante uma hora e meia. Eu tinha permiss√£o para ir a um computador, onde, no entretenimento, havia apenas um sapador e um Paint. Eu estava cansado de desenhar rapidamente, mas o desejo de abrir todo o campo e n√£o explodir me motivou a procurar novas e novas maneiras de jogar este jogo. Muitos anos depois, acidentalmente me deparei com um artigo interessante sobre um clone de um sapador, e n√£o consegui passar. Eu sugiro que voc√™ se familiarize com isso. Esta √© uma hist√≥ria sobre o desenvolvimento do Kaboom, um clone do lend√°rio jogo Minesweeper com seu pr√≥prio entusiasmo.</font></font></i><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Campo Minado apareceu h√° muito tempo pelos padr√µes de um jogo de computador. </font><font style="vertical-align: inherit;">Mas parece-me que a maioria das pessoas lembra dos jogos que faziam parte das vers√µes anteriores do Windows. </font><font style="vertical-align: inherit;">Eu nunca fui bom no Campo Minado, mas jogava de vez em quando. </font><font style="vertical-align: inherit;">Algumas pessoas jogam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais a s√©rio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">E para quem quer se animar, recomendo assistir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minesweeper - The Movie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id√©ia</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recentemente, tive uma ideia: e se voc√™ tivesse que jogar o Campo Minado contra um computador mais s√°bio? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, a localiza√ß√£o das minas √© determinada no in√≠cio do jogo (mas h√° alguns truques aqui - por exemplo, para que voc√™ n√£o perca o primeiro clique). Mas e se a localiza√ß√£o das minas n√£o fosse determinada com anteced√™ncia e o jogo pudesse escolher a localiza√ß√£o das minas ap√≥s o in√≠cio do jogo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso seria muito cruel: se voc√™ clicar em um quadrado que pode conter uma mina, ela sempre a conter√°! Assim, voc√™ deve provar antecipadamente que o quadrado √© seguro.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/0i/hg/um0ihg9b97wzjslibzfalc5ovmy.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na imagem acima, nas c√©lulas marcadas com um ponto, n√£o h√° minas garantidas, e as c√©lulas marcadas com um ponto de exclama√ß√£o t√™m garantia de conter uma. Pontos de interroga√ß√£o significam incerteza: talvez se voc√™ abrir mais c√©lulas, voc√™ pode calcular se uma mina est√° escondida l√° ou</font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
n√£o.Por outro lado, h√° situa√ß√µes em que voc√™ deve adivinhar:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/_r/c0/ji_rc06pslel8r2olgyyjfeqx5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
existe uma mina em uma das c√©lulas inferiores. Mas em qual deles √© imposs√≠vel entender. Voc√™ deve escolher um deles. Mas de acordo com a condi√ß√£o de que acabei de falar, isso significaria morte certa! Eu queria que o jogo fosse brutal, mas agora est√° obviamente perdendo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, vou mudar um pouco a ideia. Voc√™ pode adivinhar, mas apenas se n√£o houver c√©lulas seguras. Assim, o jogo ser√° cruel, mas justo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras:</font></font><br>
<br>
<ul>
<li>      ,   .</li>
<li>      ,    ,   .</li>
<li>      , :<br>
<br>
<ol>
<li>     ,       ,      .</li>
<li>   ,   ,      .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como implementar esse jogo? Eu poderia tentar calcular todos os campos poss√≠veis, mas isso n√£o √© realista: mesmo um pequeno campo 10x10 significa 2 ^ 100 possibilidades. Selecionar apenas aqueles que cont√™m exatamente N min n√£o ajuda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, n√£o preciso me preocupar com todo o campo. N√£o sabemos nada sobre minas terrestres n√£o adjacentes a tags. Eu s√≥ estou interessado naqueles que est√£o na fronteira, o resto pode ser determinado por acidente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/vp/qc/zlvpqcqpuapldwssoa5lhjtaff4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o eu posso calcular todas as op√ß√µes para a localiza√ß√£o das minas na fronteira, de acordo com os r√≥tulos. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backtracking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (backtracking) - uma boa t√©cnica que permite classificar todas as combina√ß√µes, mas tamb√©m recuar rapidamente assim que determinarmos que um ramo n√£o pode calcular.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6z/0h/cf/6z0hcf6bfakj_2x3n0jyfz9bpf8.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O exemplo acima mostra dois locais poss√≠veis de minas na fronteira. </font><font style="vertical-align: inherit;">Combinando-os, entenderemos quais c√©lulas s√£o garantidas como vazias ou extra√≠das. </font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tamb√©m preciso rastrear o n√∫mero total de minas. </font><font style="vertical-align: inherit;">Assim, a localiza√ß√£o realmente se parece com "5 min na fronteira, 5 min fora". </font><font style="vertical-align: inherit;">Isso √© importante porque, caso contr√°rio, eu poderia ter criado muitas minas na fronteira (ou muito poucas!).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, tenho todas as op√ß√µes. </font><font style="vertical-align: inherit;">O que acontece quando um jogador decide abrir uma gaiola?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escolha uma op√ß√£o aleat√≥ria (que atenda √†s regras "cru√©is, mas justas"). </font><font style="vertical-align: inherit;">Isso determinar√° a localiza√ß√£o das minas na fronteira.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espalhe aleatoriamente os que ficam fora da fronteira.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se houver uma mina na c√©lula selecionada, o jogo acabou.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De outra forma:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definir um novo r√≥tulo para a c√©lula identificada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revele c√©lulas adicionais se for 0</font></font></li>
<li>    ,    !       .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para campos pequenos, isso √© normal. </font><font style="vertical-align: inherit;">Normalmente existem apenas algumas combina√ß√µes poss√≠veis ... espere, o que √© isso? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/9n/k_/df9nk_sulyltttsf-u4pafb8fxe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ah n√£o! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/5w/nu/g15wnu_xlthcmvg94n7kjeqsg_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De alguma forma, consegui desbloquear 18 milh√µes de locais poss√≠veis. </font><font style="vertical-align: inherit;">Meu Firefox devora 12 gigabytes de mem√≥ria e abrir uma c√©lula leva meio minuto. </font><font style="vertical-align: inherit;">Obviamente, preciso de um algoritmo melhor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algu√©m pode notar que o Campo Minado √© um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jogo completo de NP e</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , portanto, um tempo exponencialmente crescente n√£o pode ser evitado. </font><font style="vertical-align: inherit;">E, no caso geral, isso √© verdade - haver√° posi√ß√µes que levar√£o muito tempo para serem calculadas. </font><font style="vertical-align: inherit;">Mas para uma pequena √°rea isso funciona. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o preciso me lembrar de todas as combina√ß√µes. </font><font style="vertical-align: inherit;">Eu nem preciso calcular todas as combina√ß√µes. </font><font style="vertical-align: inherit;">Tudo o que √© necess√°rio √© uma maneira:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verifique se a c√©lula √© segura, perigosa ou vaga,</font></font></li>
<li>    (,   ,       ).</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em vez de experimentar as op√ß√µes eu mesmo, vou usar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solucionador SAT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Essas s√£o ferramentas que usam uma f√≥rmula que consiste em vari√°veis ‚Äã‚Äãl√≥gicas e procuram um conjunto de valores que tornariam a f√≥rmula verdadeira. Um m√©todo t√£o imagin√°rio, mas bastante v√°lido para nossa tarefa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma classe de software mais poderosa s√£o os </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solucionadores SMT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que trabalham com uma gama mais ampla de valores e f√≥rmulas, como l√≥gica de primeira ordem (quantificadores), matrizes, n√∫meros inteiros e assim por diante. Isso ajudar√° pelo menos a definir algumas equa√ß√µes para n√∫meros inteiros. Mas preciso de algo que funcione no navegador. As pessoas conseguiram portar algumas ferramentas sofisticadas como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z3Prover</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para o navegador, mas a vers√£o WebAssembly pesa</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17 MB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e isso √© demais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontrei o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniSat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um pequeno solucionador SAT que foi compilado para Javascript por Joel Galenson. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O arquivo compilado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ocupa apenas 200 kilobytes, ent√£o eu o uso.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√≥rmulas CNF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os solucionadores SAT trabalham com f√≥rmulas normais conjuntivas ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNFs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). A f√≥rmula da CNF √© "um AND de ORs", por exemplo: </font></font><br>
<br>
<code>(a | ~ b | ~ c) &amp; (c | d ~ e) &amp; f</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
voc√™ pode converter qualquer f√≥rmula da l√≥gica de senten√ßas (vari√°veis ‚Äã‚Äãe, ou, n√£o, implica√ß√£o) em CNF, portanto √© um formato universal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como usamos? Suponha que tenhamos um quadro: </font><font style="vertical-align: inherit;">
Se eu criar vari√°veis ‚Äã‚Äãpara c√©lulas desconhecidas (no sentido hor√°rio: x1, x2, x3), elas ter√£o que satisfazer as seguintes equa√ß√µes: </font><font style="vertical-align: inherit;">
Mas como expressar "a soma das vari√°veis ‚Äã‚Äã√© 2" no CNF? </font><font style="vertical-align: inherit;">
Encontrei um m√©todo que, como aprendi mais tarde, √© chamado de "codifica√ß√£o binomial" e √© a codifica√ß√£o mais simples. Voc√™ deve considerar todos os poss√≠veis subconjuntos de vari√°veis. Por exemplo, para voc√™ </font><font style="vertical-align: inherit;">precisar das seguintes f√≥rmulas:</font></font><br>
<br>
<code>? ? 1<br>
2 ? 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>1 + 2 + 3 = 2<br>
2 + 3 = 1<br>
2 + 3 = 1 (   )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>x1 + x2 + x3 = 2 </code><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada subconjunto de 2 vari√°veis, pelo menos uma √© verdadeira. </font><font style="vertical-align: inherit;">Isso garante que a quantidade seja maior que 1.</font></font><br>
<code>(x1 | x2) &amp; (x1 | x3) &amp; (x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelo menos uma vari√°vel √© falsa. </font><font style="vertical-align: inherit;">Isso garante que o valor seja menor que 3.</font></font><br>
<code>(~ x1 | ~ x2 | ~ x3)</code></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para </font></font><code>x2 + x3 = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mim, preciso de um conjunto semelhante de f√≥rmulas:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelo menos uma das vari√°veis ‚Äã‚Äãest√° correta: </font></font><code>(x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelo menos uma das vari√°veis ‚Äã‚Äã√© falsa </font></font><code>(~ x2 | ~ x3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao combinar isso, recebo uma f√≥rmula CNF com 6 pontos. No formato DIMACS padr√£o: </font><font style="vertical-align: inherit;">
Todas as linhas de posi√ß√£o terminam com 0 e a nega√ß√£o √© marcada com menos. Se eu conect√°-lo ao MiniSat (tente voc√™ mesmo), obtenho: </font><font style="vertical-align: inherit;">
Isso significa que o MiniSat encontrou uma solu√ß√£o em que x1 e x2 s√£o verdadeiros e x3 s√£o falsos. Eis como ser√° o quadro: </font><font style="vertical-align: inherit;">
Todo o programa √© um pouco mais complicado: essa √© apenas uma solu√ß√£o, existe outra. Portanto, para descobrir se x1, x2, x3 podem ser verdadeiros (ou falsos), √© necess√°rio fazer mais solicita√ß√µes. Eu preciso perguntar: ‚ÄúDada a f√≥rmula acima, assim como x1, isso √© vi√°vel? Que tal a f√≥rmula acima, bem como ~ x1 "?</font></font><br>
<br>
<code>p cnf 3 6<br>
1 2 0<br>
1 3 0<br>
2 3 0<br>
-1 -2 -3 0<br>
2 3 0<br>
-2 -3 0 </code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>SAT 1 2 -3</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>! ! 1<br>
2 . 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Codifica√ß√£o significa que eu preciso encontrar todas as combina√ß√µes poss√≠veis (por exemplo, todos os subconjuntos de 3) de um conjunto de vari√°veis. </font><font style="vertical-align: inherit;">No entanto, para esta equa√ß√£o, haver√° apenas 8 vari√°veis; portanto, a f√≥rmula geralmente √© pequena o suficiente para que o MiniSat possa resolv√™-la rapidamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rastreamento m√≠nimo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, esta n√£o √© uma solu√ß√£o completa! Ainda preciso rastrear quantas minas restam. Algumas combina√ß√µes s√£o imposs√≠veis, porque, caso contr√°rio, voc√™ pode criar mais minas do que o permitido, e ser√° imposs√≠vel ganhar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/ic/pz/vjicpzij8cclzqcvewcn3hpzgpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, o caso oposto tamb√©m √© poss√≠vel: se houver muito poucas minas, o jogo terminar√°, porque n√£o haver√° nada para colocar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, preciso indicar na f√≥rmula do SAT que "o n√∫mero de minas n√£o √© menor que X e n√£o √© maior que Y". No come√ßo, pensei que poderia usar o truque com todas as combina√ß√µes. Infelizmente, n√£o funciona muito bem com grandes n√∫meros. Se houver, digamos, 20 c√©lulas e 10 min, depois de conectar os n√∫meros ao </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coeficiente binomial,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> descobrimos que o n√∫mero de combina√ß√µes j√° √© de 6 d√≠gitos!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o eu descobri que existem muitas outras maneiras de codificar a soma de vari√°veis ‚Äã‚Äãna f√≥rmula SAT. Voc√™ precisa criar um esquema que combine as vari√°veis ‚Äã‚Äãindividuais. Veja, por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta resposta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no StackExchange ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nesta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, percebi a ideia em um artigo intitulado "C√≥digo efetivo da CNF com restri√ß√µes de cardinalidade booleana", </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito por</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Olivier Baillot e Yasin Bufhad. Vemos uma √°rvore que adiciona recursivamente n√∫meros un√°rios (ou classifica bits para que todos estejam no come√ßo):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_s/n8/cg_sn8kuz4tyzsklfiftc9pxr6i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final deste diagrama, voc√™ obter√° um conjunto classificado de vari√°veis ‚Äã‚Äãde "sa√≠da". Para confirmar que a soma n√£o √© menor que X, verifique se o primeiro X das vari√°veis ‚Äã‚Äãresultantes √© 1. Para afirmar que a soma n√£o √© maior que Y, verifique se o √∫ltimo N - Y das vari√°veis ‚Äã‚Äãresultantes √© 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© muito melhor do que usar todas as combina√ß√µes poss√≠veis, no entanto, esse esquema ainda √© irracional porque gera senten√ßas ”® (N ^ 2). Quando o n√∫mero de c√©lulas abertas √© de cerca de 100, o jogo fica lento. Podemos otimizar ainda mais o jogo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reduzir solicita√ß√µes</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao estudar o problema, notei que posso reduzir o n√∫mero de consultas ao solucionador. </font><font style="vertical-align: inherit;">Eu queria determinar o status de todas as c√©lulas (ou seja, para verificar se elas s√£o perigosas, seguras ou n√£o). </font><font style="vertical-align: inherit;">Eu fiz isso usando um loop simples. </font><font style="vertical-align: inherit;">Digamos que o quadro seja descrito pela f√≥rmula F:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code>F &amp; ~ x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x1 pode ser 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code>F &amp; x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x1 pode ser 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code> F &amp; ~ x2 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x2 pode ser 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code>F &amp; x2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x2 pode ser 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que eu notei? </font><font style="vertical-align: inherit;">Se eu conseguir uma solu√ß√£o para F &amp; x1, ela tamb√©m conter√° os valores de todas as outras vari√°veis. </font><font style="vertical-align: inherit;">Isso j√° responde a muitas outras perguntas: se a solu√ß√£o cont√©m x2 = 0, n√£o preciso perguntar se x2 pode ser 0, porque j√° sei disso. </font><font style="vertical-align: inherit;">Isso me permite reduzir o n√∫mero de solicita√ß√µes em cerca de 2 a 5 vezes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armazenamento em cache</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso n√£o resolve o problema da enorme f√≥rmula gerada pelo circuito de "contagem". Como eu disse, o n√∫mero de senten√ßas √© da ordem de N ^ 2. Em um quadro grande, a f√≥rmula pode ter at√© 10.000 suposi√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, na maioria das vezes sabemos o significado exato de muitas c√©lulas. Se a c√©lula estiver garantida vazia ou garantida, o valor nunca ser√° alterado! Isso significa que podemos armazen√°-lo em cache e n√£o inclu√≠-lo na f√≥rmula SAT. Depois de determinar o estado da c√©lula, n√£o ser√° mais necess√°rio inclu√≠-lo no c√°lculo novamente. As c√©lulas ser√£o usadas desde que n√£o estejam definidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa otimiza√ß√£o √© um pouco perigosa: n√£o temos mais uma f√≥rmula que confirme a exatid√£o de todo o quadro. Se tudo funcionar como planejado, isso n√£o √© um problema, mas pode complicar o rastreamento de erros.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro caso: jogar no exterior </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode clicar em qualquer lugar do mapa fora da fronteira entre a √°rea aberta e a fechada do campo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, pensei que era o mesmo que adivinhar: se n√£o houver c√©lulas seguras, voc√™ pode simplesmente clicar em qualquer lugar do campo. </font><font style="vertical-align: inherit;">Mas alguns acham estranho que isso garanta a abertura de uma gaiola vazia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, mudei o jogo para que um clique fora da borda seja sempre punido. </font><font style="vertical-align: inherit;">Com exce√ß√£o do in√≠cio do jogo, √© claro, porque todo o tabuleiro est√° "fora". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas acontece que h√° outro cen√°rio: e se todos os campos de fronteira forem mortais? </font><font style="vertical-align: inherit;">
Voc√™ n√£o tem escolha a n√£o ser revelar outra coisa. </font><font style="vertical-align: inherit;">Esta situa√ß√£o pode tornar o jogo intransit√°vel desde o in√≠cio. </font><font style="vertical-align: inherit;">Ent√£o agora h√° mais uma exce√ß√£o. </font><font style="vertical-align: inherit;">Voc√™ pode jogar fora das fronteiras se:</font></font><br>
<br>
<code>3 . .<br>
. . .<br>
. . .<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O campo n√£o est√° aberto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As c√©lulas minadas podem estar localizadas na borda (clicar do lado de fora deve ser seguro) ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deve haver bombas em todas as c√©lulas na fronteira (voc√™ precisa clicar fora).</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atualiza√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : a mudan√ßa acabou sendo controversa, pois a restri√ß√£o √© um tanto artificial. </font><font style="vertical-align: inherit;">Eu adicionei uma op√ß√£o que permitir√° / pro√≠be jogar com essas condi√ß√µes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â tudo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode jogar Kaboom </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tente ativar o modo de depura√ß√£o: torna o jogo trivial, mas mostra bem como ele funciona. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C√≥digo fonte do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ele n√£o √© muito bonito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode tamb√©m estar interessado em um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jogo semelhante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Simon Tatham, criador de PuTTY. Sua vers√£o tem uma reviravolta diferente: √© sempre solucion√°vel sem especula√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jogue com sabedoria! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que mais pode ser √∫til para ler no blog do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud4Y</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o banco ‚Äúquebrou‚Äù</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Privacidade pessoal? N√£o, eles n√£o ouviram</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí A </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grande Teoria dos Flocos de Neve</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagn√≥stico de conex√µes de rede em um roteador EDGE virtual</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
‚Üí</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os v√≠rus resistentes ao CRISPR constroem abrigos para proteger os genomas das enzimas que penetram no DNA.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Assine o nosso </font><font style="vertical-align: inherit;">canal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para n√£o perder outro artigo! </font><font style="vertical-align: inherit;">Escrevemos n√£o mais do que duas vezes por semana e apenas a neg√≥cios. </font><font style="vertical-align: inherit;">Lembramos que as startups podem receber 1 milh√£o de rublos. </font><font style="vertical-align: inherit;">do Cloud4Y. </font><font style="vertical-align: inherit;">Termos e condi√ß√µes para quem desejar - em nosso site: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit.ly/2sj6dPK</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487038/index.html">De repente, um sistema de coleta de lixo por si s√≥ n√£o √© suficiente</a></li>
<li><a href="../pt487040/index.html">O Firefox Preview Nightly para Android recebe suporte para o uBlock Origin</a></li>
<li><a href="../pt487042/index.html">Ryzen Threadripper 3990X de 64 n√∫cleos derrota todos os processadores Intel em testes, incluindo US $ 20.000 em Xeon</a></li>
<li><a href="../pt487044/index.html">Privacidade? N√£o n√£o ouvi</a></li>
<li><a href="../pt487046/index.html">Como criar uma biblioteca nativa para Android</a></li>
<li><a href="../pt487054/index.html">ROS: Dedicado aos presos no Gazebo ... Plataforma para um rob√¥ por 28.000 rublos</a></li>
<li><a href="../pt487056/index.html">√â perigoso manter o RDP aberto na Internet?</a></li>
<li><a href="../pt487058/index.html">"Hadoop. ZooKeeper ‚Äùda s√©rie Technostream do Mail.Ru Group‚Äú Processamento Distribu√≠do de Dados Grandes no Hadoop ‚Äù</a></li>
<li><a href="../pt487060/index.html">Voc√™ est√° usando o Google Chrome? Ent√£o, o Google coleta seus dados por meio de dados de clientes-X</a></li>
<li><a href="../pt487062/index.html">A CBS permitiu que os usu√°rios do Linux assistissem a Star Trek, gra√ßas a ela por isso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>