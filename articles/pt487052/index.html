<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍁 🔷 💑 Kaboom: um sapador incomum 🚐 🦀 👊🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando criança, sentei-me no trabalho de meu pai três vezes por semana, durante uma hora e meia. Eu tinha permissão para ir a um computador, onde, no ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kaboom: um sapador incomum</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cloud4y/blog/487052/"><img src="https://habrastorage.org/webt/8r/zx/fj/8rzxfjri6jhsbbuodzrjy8eauae.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando criança, sentei-me no trabalho de meu pai três vezes por semana, durante uma hora e meia. Eu tinha permissão para ir a um computador, onde, no entretenimento, havia apenas um sapador e um Paint. Eu estava cansado de desenhar rapidamente, mas o desejo de abrir todo o campo e não explodir me motivou a procurar novas e novas maneiras de jogar este jogo. Muitos anos depois, acidentalmente me deparei com um artigo interessante sobre um clone de um sapador, e não consegui passar. Eu sugiro que você se familiarize com isso. Esta é uma história sobre o desenvolvimento do Kaboom, um clone do lendário jogo Minesweeper com seu próprio entusiasmo.</font></font></i><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Campo Minado apareceu há muito tempo pelos padrões de um jogo de computador. </font><font style="vertical-align: inherit;">Mas parece-me que a maioria das pessoas lembra dos jogos que faziam parte das versões anteriores do Windows. </font><font style="vertical-align: inherit;">Eu nunca fui bom no Campo Minado, mas jogava de vez em quando. </font><font style="vertical-align: inherit;">Algumas pessoas jogam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais a sério</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">E para quem quer se animar, recomendo assistir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Minesweeper - The Movie</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idéia</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recentemente, tive uma ideia: e se você tivesse que jogar o Campo Minado contra um computador mais sábio? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, a localização das minas é determinada no início do jogo (mas há alguns truques aqui - por exemplo, para que você não perca o primeiro clique). Mas e se a localização das minas não fosse determinada com antecedência e o jogo pudesse escolher a localização das minas após o início do jogo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso seria muito cruel: se você clicar em um quadrado que pode conter uma mina, ela sempre a conterá! Assim, você deve provar antecipadamente que o quadrado é seguro.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/0i/hg/um0ihg9b97wzjslibzfalc5ovmy.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na imagem acima, nas células marcadas com um ponto, não há minas garantidas, e as células marcadas com um ponto de exclamação têm garantia de conter uma. Pontos de interrogação significam incerteza: talvez se você abrir mais células, você pode calcular se uma mina está escondida lá ou</font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
não.Por outro lado, há situações em que você deve adivinhar:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/_r/c0/ji_rc06pslel8r2olgyyjfeqx5g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
existe uma mina em uma das células inferiores. Mas em qual deles é impossível entender. Você deve escolher um deles. Mas de acordo com a condição de que acabei de falar, isso significaria morte certa! Eu queria que o jogo fosse brutal, mas agora está obviamente perdendo.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, vou mudar um pouco a ideia. Você pode adivinhar, mas apenas se não houver células seguras. Assim, o jogo será cruel, mas justo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras:</font></font><br>
<br>
<ul>
<li>      ,   .</li>
<li>      ,    ,   .</li>
<li>      , :<br>
<br>
<ol>
<li>     ,       ,      .</li>
<li>   ,   ,      .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como implementar esse jogo? Eu poderia tentar calcular todos os campos possíveis, mas isso não é realista: mesmo um pequeno campo 10x10 significa 2 ^ 100 possibilidades. Selecionar apenas aqueles que contêm exatamente N min não ajuda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, não preciso me preocupar com todo o campo. Não sabemos nada sobre minas terrestres não adjacentes a tags. Eu só estou interessado naqueles que estão na fronteira, o resto pode ser determinado por acidente. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zl/vp/qc/zlvpqcqpuapldwssoa5lhjtaff4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então eu posso calcular todas as opções para a localização das minas na fronteira, de acordo com os rótulos. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backtracking</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (backtracking) - uma boa técnica que permite classificar todas as combinações, mas também recuar rapidamente assim que determinarmos que um ramo não pode calcular.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6z/0h/cf/6z0hcf6bfakj_2x3n0jyfz9bpf8.png"><br>
<font color="#999999"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O exemplo acima mostra dois locais possíveis de minas na fronteira. </font><font style="vertical-align: inherit;">Combinando-os, entenderemos quais células são garantidas como vazias ou extraídas. </font></font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu também preciso rastrear o número total de minas. </font><font style="vertical-align: inherit;">Assim, a localização realmente se parece com "5 min na fronteira, 5 min fora". </font><font style="vertical-align: inherit;">Isso é importante porque, caso contrário, eu poderia ter criado muitas minas na fronteira (ou muito poucas!).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, tenho todas as opções. </font><font style="vertical-align: inherit;">O que acontece quando um jogador decide abrir uma gaiola?</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escolha uma opção aleatória (que atenda às regras "cruéis, mas justas"). </font><font style="vertical-align: inherit;">Isso determinará a localização das minas na fronteira.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espalhe aleatoriamente os que ficam fora da fronteira.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se houver uma mina na célula selecionada, o jogo acabou.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De outra forma:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definir um novo rótulo para a célula identificada</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revele células adicionais se for 0</font></font></li>
<li>    ,    !       .</li>
</ol></li>
</ul><br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para campos pequenos, isso é normal. </font><font style="vertical-align: inherit;">Normalmente existem apenas algumas combinações possíveis ... espere, o que é isso? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/df/9n/k_/df9nk_sulyltttsf-u4pafb8fxe.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ah não! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/5w/nu/g15wnu_xlthcmvg94n7kjeqsg_k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De alguma forma, consegui desbloquear 18 milhões de locais possíveis. </font><font style="vertical-align: inherit;">Meu Firefox devora 12 gigabytes de memória e abrir uma célula leva meio minuto. </font><font style="vertical-align: inherit;">Obviamente, preciso de um algoritmo melhor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alguém pode notar que o Campo Minado é um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jogo completo de NP e</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , portanto, um tempo exponencialmente crescente não pode ser evitado. </font><font style="vertical-align: inherit;">E, no caso geral, isso é verdade - haverá posições que levarão muito tempo para serem calculadas. </font><font style="vertical-align: inherit;">Mas para uma pequena área isso funciona. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não preciso me lembrar de todas as combinações. </font><font style="vertical-align: inherit;">Eu nem preciso calcular todas as combinações. </font><font style="vertical-align: inherit;">Tudo o que é necessário é uma maneira:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verifique se a célula é segura, perigosa ou vaga,</font></font></li>
<li>    (,   ,       ).</li>
</ul><br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em vez de experimentar as opções eu mesmo, vou usar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solucionador SAT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Essas são ferramentas que usam uma fórmula que consiste em variáveis ​​lógicas e procuram um conjunto de valores que tornariam a fórmula verdadeira. Um método tão imaginário, mas bastante válido para nossa tarefa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma classe de software mais poderosa são os </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solucionadores SMT</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que trabalham com uma gama mais ampla de valores e fórmulas, como lógica de primeira ordem (quantificadores), matrizes, números inteiros e assim por diante. Isso ajudará pelo menos a definir algumas equações para números inteiros. Mas preciso de algo que funcione no navegador. As pessoas conseguiram portar algumas ferramentas sofisticadas como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Z3Prover</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para o navegador, mas a versão WebAssembly pesa</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17 MB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , e isso é demais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontrei o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiniSat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um pequeno solucionador SAT que foi compilado para Javascript por Joel Galenson. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O arquivo compilado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ocupa apenas 200 kilobytes, então eu o uso.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fórmulas CNF</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os solucionadores SAT trabalham com fórmulas normais conjuntivas ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CNFs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). A fórmula da CNF é "um AND de ORs", por exemplo: </font></font><br>
<br>
<code>(a | ~ b | ~ c) &amp; (c | d ~ e) &amp; f</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
você pode converter qualquer fórmula da lógica de sentenças (variáveis ​​e, ou, não, implicação) em CNF, portanto é um formato universal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como usamos? Suponha que tenhamos um quadro: </font><font style="vertical-align: inherit;">
Se eu criar variáveis ​​para células desconhecidas (no sentido horário: x1, x2, x3), elas terão que satisfazer as seguintes equações: </font><font style="vertical-align: inherit;">
Mas como expressar "a soma das variáveis ​​é 2" no CNF? </font><font style="vertical-align: inherit;">
Encontrei um método que, como aprendi mais tarde, é chamado de "codificação binomial" e é a codificação mais simples. Você deve considerar todos os possíveis subconjuntos de variáveis. Por exemplo, para você </font><font style="vertical-align: inherit;">precisar das seguintes fórmulas:</font></font><br>
<br>
<code>? ? 1<br>
2 ? 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>1 + 2 + 3 = 2<br>
2 + 3 = 1<br>
2 + 3 = 1 (   )</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>x1 + x2 + x3 = 2 </code><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada subconjunto de 2 variáveis, pelo menos uma é verdadeira. </font><font style="vertical-align: inherit;">Isso garante que a quantidade seja maior que 1.</font></font><br>
<code>(x1 | x2) &amp; (x1 | x3) &amp; (x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelo menos uma variável é falsa. </font><font style="vertical-align: inherit;">Isso garante que o valor seja menor que 3.</font></font><br>
<code>(~ x1 | ~ x2 | ~ x3)</code></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para </font></font><code>x2 + x3 = 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mim, preciso de um conjunto semelhante de fórmulas:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelo menos uma das variáveis ​​está correta: </font></font><code>(x2 | x3)</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pelo menos uma das variáveis ​​é falsa </font></font><code>(~ x2 | ~ x3)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao combinar isso, recebo uma fórmula CNF com 6 pontos. No formato DIMACS padrão: </font><font style="vertical-align: inherit;">
Todas as linhas de posição terminam com 0 e a negação é marcada com menos. Se eu conectá-lo ao MiniSat (tente você mesmo), obtenho: </font><font style="vertical-align: inherit;">
Isso significa que o MiniSat encontrou uma solução em que x1 e x2 são verdadeiros e x3 são falsos. Eis como será o quadro: </font><font style="vertical-align: inherit;">
Todo o programa é um pouco mais complicado: essa é apenas uma solução, existe outra. Portanto, para descobrir se x1, x2, x3 podem ser verdadeiros (ou falsos), é necessário fazer mais solicitações. Eu preciso perguntar: “Dada a fórmula acima, assim como x1, isso é viável? Que tal a fórmula acima, bem como ~ x1 "?</font></font><br>
<br>
<code>p cnf 3 6<br>
1 2 0<br>
1 3 0<br>
2 3 0<br>
-1 -2 -3 0<br>
2 3 0<br>
-2 -3 0 </code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>SAT 1 2 -3</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<code>! ! 1<br>
2 . 1</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Codificação significa que eu preciso encontrar todas as combinações possíveis (por exemplo, todos os subconjuntos de 3) de um conjunto de variáveis. </font><font style="vertical-align: inherit;">No entanto, para esta equação, haverá apenas 8 variáveis; portanto, a fórmula geralmente é pequena o suficiente para que o MiniSat possa resolvê-la rapidamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rastreamento mínimo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, esta não é uma solução completa! Ainda preciso rastrear quantas minas restam. Algumas combinações são impossíveis, porque, caso contrário, você pode criar mais minas do que o permitido, e será impossível ganhar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vj/ic/pz/vjicpzij8cclzqcvewcn3hpzgpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, o caso oposto também é possível: se houver muito poucas minas, o jogo terminará, porque não haverá nada para colocar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, preciso indicar na fórmula do SAT que "o número de minas não é menor que X e não é maior que Y". No começo, pensei que poderia usar o truque com todas as combinações. Infelizmente, não funciona muito bem com grandes números. Se houver, digamos, 20 células e 10 min, depois de conectar os números ao </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coeficiente binomial,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> descobrimos que o número de combinações já é de 6 dígitos!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então eu descobri que existem muitas outras maneiras de codificar a soma de variáveis ​​na fórmula SAT. Você precisa criar um esquema que combine as variáveis ​​individuais. Veja, por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esta resposta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no StackExchange ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nesta</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, percebi a ideia em um artigo intitulado "Código efetivo da CNF com restrições de cardinalidade booleana", </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito por</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Olivier Baillot e Yasin Bufhad. Vemos uma árvore que adiciona recursivamente números unários (ou classifica bits para que todos estejam no começo):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/_s/n8/cg_sn8kuz4tyzsklfiftc9pxr6i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final deste diagrama, você obterá um conjunto classificado de variáveis ​​de "saída". Para confirmar que a soma não é menor que X, verifique se o primeiro X das variáveis ​​resultantes é 1. Para afirmar que a soma não é maior que Y, verifique se o último N - Y das variáveis ​​resultantes é 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso é muito melhor do que usar todas as combinações possíveis, no entanto, esse esquema ainda é irracional porque gera sentenças Ө (N ^ 2). Quando o número de células abertas é de cerca de 100, o jogo fica lento. Podemos otimizar ainda mais o jogo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reduzir solicitações</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao estudar o problema, notei que posso reduzir o número de consultas ao solucionador. </font><font style="vertical-align: inherit;">Eu queria determinar o status de todas as células (ou seja, para verificar se elas são perigosas, seguras ou não). </font><font style="vertical-align: inherit;">Eu fiz isso usando um loop simples. </font><font style="vertical-align: inherit;">Digamos que o quadro seja descrito pela fórmula F:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code>F &amp; ~ x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x1 pode ser 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code>F &amp; x1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x1 pode ser 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code> F &amp; ~ x2 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x2 pode ser 0</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decida </font></font><code>F &amp; x2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verificar se x2 pode ser 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que eu notei? </font><font style="vertical-align: inherit;">Se eu conseguir uma solução para F &amp; x1, ela também conterá os valores de todas as outras variáveis. </font><font style="vertical-align: inherit;">Isso já responde a muitas outras perguntas: se a solução contém x2 = 0, não preciso perguntar se x2 pode ser 0, porque já sei disso. </font><font style="vertical-align: inherit;">Isso me permite reduzir o número de solicitações em cerca de 2 a 5 vezes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armazenamento em cache</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso não resolve o problema da enorme fórmula gerada pelo circuito de "contagem". Como eu disse, o número de sentenças é da ordem de N ^ 2. Em um quadro grande, a fórmula pode ter até 10.000 suposições. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, na maioria das vezes sabemos o significado exato de muitas células. Se a célula estiver garantida vazia ou garantida, o valor nunca será alterado! Isso significa que podemos armazená-lo em cache e não incluí-lo na fórmula SAT. Depois de determinar o estado da célula, não será mais necessário incluí-lo no cálculo novamente. As células serão usadas desde que não estejam definidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa otimização é um pouco perigosa: não temos mais uma fórmula que confirme a exatidão de todo o quadro. Se tudo funcionar como planejado, isso não é um problema, mas pode complicar o rastreamento de erros.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro caso: jogar no exterior </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode clicar em qualquer lugar do mapa fora da fronteira entre a área aberta e a fechada do campo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, pensei que era o mesmo que adivinhar: se não houver células seguras, você pode simplesmente clicar em qualquer lugar do campo. </font><font style="vertical-align: inherit;">Mas alguns acham estranho que isso garanta a abertura de uma gaiola vazia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, mudei o jogo para que um clique fora da borda seja sempre punido. </font><font style="vertical-align: inherit;">Com exceção do início do jogo, é claro, porque todo o tabuleiro está "fora". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas acontece que há outro cenário: e se todos os campos de fronteira forem mortais? </font><font style="vertical-align: inherit;">
Você não tem escolha a não ser revelar outra coisa. </font><font style="vertical-align: inherit;">Esta situação pode tornar o jogo intransitável desde o início. </font><font style="vertical-align: inherit;">Então agora há mais uma exceção. </font><font style="vertical-align: inherit;">Você pode jogar fora das fronteiras se:</font></font><br>
<br>
<code>3 . .<br>
. . .<br>
. . .<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O campo não está aberto</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As células minadas podem estar localizadas na borda (clicar do lado de fora deve ser seguro) ou</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deve haver bombas em todas as células na fronteira (você precisa clicar fora).</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atualização</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : a mudança acabou sendo controversa, pois a restrição é um tanto artificial. </font><font style="vertical-align: inherit;">Eu adicionei uma opção que permitirá / proíbe jogar com essas condições.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">É tudo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode jogar Kaboom </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Tente ativar o modo de depuração: torna o jogo trivial, mas mostra bem como ele funciona. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Código fonte do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ele não é muito bonito. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode também estar interessado em um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jogo semelhante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de Simon Tatham, criador de PuTTY. Sua versão tem uma reviravolta diferente: é sempre solucionável sem especulações. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jogue com sabedoria! </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que mais pode ser útil para ler no blog do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud4Y</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como o banco “quebrou”</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Privacidade pessoal? Não, eles não ouviram</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ A </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grande Teoria dos Flocos de Neve</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagnóstico de conexões de rede em um roteador EDGE virtual</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os vírus resistentes ao CRISPR constroem abrigos para proteger os genomas das enzimas que penetram no DNA.</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Assine o nosso </font><font style="vertical-align: inherit;">canal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Telegram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para não perder outro artigo! </font><font style="vertical-align: inherit;">Escrevemos não mais do que duas vezes por semana e apenas a negócios. </font><font style="vertical-align: inherit;">Lembramos que as startups podem receber 1 milhão de rublos. </font><font style="vertical-align: inherit;">do Cloud4Y. </font><font style="vertical-align: inherit;">Termos e condições para quem desejar - em nosso site: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bit.ly/2sj6dPK</font></font></a></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt487038/index.html">De repente, um sistema de coleta de lixo por si só não é suficiente</a></li>
<li><a href="../pt487040/index.html">O Firefox Preview Nightly para Android recebe suporte para o uBlock Origin</a></li>
<li><a href="../pt487042/index.html">Ryzen Threadripper 3990X de 64 núcleos derrota todos os processadores Intel em testes, incluindo US $ 20.000 em Xeon</a></li>
<li><a href="../pt487044/index.html">Privacidade? Não não ouvi</a></li>
<li><a href="../pt487046/index.html">Como criar uma biblioteca nativa para Android</a></li>
<li><a href="../pt487054/index.html">ROS: Dedicado aos presos no Gazebo ... Plataforma para um robô por 28.000 rublos</a></li>
<li><a href="../pt487056/index.html">É perigoso manter o RDP aberto na Internet?</a></li>
<li><a href="../pt487058/index.html">"Hadoop. ZooKeeper ”da série Technostream do Mail.Ru Group“ Processamento Distribuído de Dados Grandes no Hadoop ”</a></li>
<li><a href="../pt487060/index.html">Você está usando o Google Chrome? Então, o Google coleta seus dados por meio de dados de clientes-X</a></li>
<li><a href="../pt487062/index.html">A CBS permitiu que os usuários do Linux assistissem a Star Trek, graças a ela por isso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>