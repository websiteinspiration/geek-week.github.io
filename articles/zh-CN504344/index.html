<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßïüèæ üò° üöã –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî CUSTOM SETUP / AWS Amplify + React Native üìã ü•ä üö¥üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=",   ‚Äî React Native. , /.
 
 

 , , ( , , .), ‚Äî .
 
 

 
 

 , :
 


 

 . , , , , , .
 

 , , , , . , OAUTH ( ), MFA ( ) TOTP ( ).
 

 . , . , , Auth0...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî CUSTOM SETUP / AWS Amplify + React Native</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504344/"><p><img src="https://habrastorage.org/getpro/habr/post_images/406/65e/0e9/40665e0e973bdd2a10416e9113667856.png" alt="cognito"></p><br>
<p>    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a> ‚Äî       React Native.               ,     /.</p><a name="habracut"></a><br>
<h2 id="autentifikaciya"></h2><br>
<p>     ,      ,      ( ,  ,    .),    ‚Äî     .</p><br>
<h2 id="avtorizaciya"></h2><br>
<p>              </p><br>
<p>   ,       :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/0bb/0db/ae4/0bb0dbae460bb468dca68cf1955f2ee7.png" alt="cognito"></p><br>
<p>      .  ,  ,   ,    ,      ,                .</p><br>
<p>      ,    ,     ,     ,    .      ,  OAUTH ( ), MFA ( )  TOTP (    ).</p><br>
<p>           .             ,        .  ,      ,   Auth0, Okta  Amazon Cognito,      .</p><br>
<p>    ,         React Native   Amazon Cognito  AWS Amplify.</p><br>
<h2 id="amazon-cognito">Amazon Cognito</h2><br>
<p>      AWS. Cognito      ,   ,  ,      . Cognito    ,          ,   Facebook, Google  Amazon.</p><br>
<p>Cognito     :     .</p><br>
<h2 id="user-pools">User Pools</h2><br>
<p>     ,           .    .   ,    ,    ,    .   ‚Äî  ,    ,       ,    ,       .</p><br>
<h2 id="identity-pools">Identity pools</h2><br>
<p>     ,    ,       AWS. ,       -,        API.        .     ,         Cognito   Facebook  Google.</p><br>
<p>,    Amazon Cognito     .</p><br>
<p>     Amazon Cognito.     ,    ,         AWS.</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/92a/a49/ac8/92aa49ac8b44cab68794e7ae562306c1.png" alt="cognito"></p><br>
<ol>
<li><p>                   .</p><br>
</li>
<li><p>          AWS   .</p><br>
</li>
<li><p>,          AWS      AWS,   Amazon S3  DynamoDB.</p><br>
</li>
</ol><br>
<p>Cognito User Pools              ,   , :</p><br>
<ul>
<li> </li>
<li>   </li>
<li> </li>
<li>  </li>
<li>  </li>
<li>  MFA</li>
<li> Amazon Cognito  AWS Amplify</li>
</ul><br>
<p>AWS Amplify  Amazon Cognito  .         Amazon Cognito      AWS Amplify.     CLI,      (, signUp, signIn  signOut)   JavaScript     Amplify JavaScript.</p><br>
<p>Amplify       ,              ,  React, React Native, Vue  Angular.</p><br>
<h2 id="vy-sprosite-i-skolko-zhe-eto-vse-stoit">       ?</h2><br>
<h4 id="platite-tolko-za-to-chem-polzuetes-nikakih-minimalnyh-platezhey">   ,  .   .</h4><br>
<p> Amazon Cognito Identity    ,          (MAU). MAU ‚Äî  ,           : , ,     .             .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/e70/069/e27/e70069e27d465ab06839eed77ac06c60.png" alt="cognito"></p><br>
<p>CODING TIME ‚Äç‚Äç</p><br>
<p>  AWS Amplify: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Telegram</a></p><br>
<h1 id="chast-i"> I</h1><br>
<p> o    UI    AWS Amplify,        .</p><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">GitHub</a>.</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/a85/330/557/a85330557d5a036dd7641c8dcaa8d8a8.gif" alt="AWS Amplify"></a></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/308/34a/22a/30834a22ac5c4b8f15a03eaf1a4bf1de.png" alt="Cognito"></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/942/0e0/a51/9420e0a51c7b345d8fa5d5e29d760ea0.png" alt="Step01"></p><br>
<h2 id="sozdaem-novyy-proekt-">   Ô∏è</h2><br>
<pre><code class="bash">react-native init auth</code></pre><br>
<p>  </p><br>
<p>iOS</p><br>
<pre><code class="bash">cd auth &amp;&amp; react-native run-ios</code></pre><br>
<p>Android</p><br>
<pre><code class="bash">cd auth &amp;&amp; react-native run-android</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/631/e00/e86/631e00e866d9fc3d76c43b97781ae3b4.png" alt="Step02"></p><br>
<h2 id="podklyuchaem-ikonki"> </h2><br>
<p>     AWS Amplify,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a> .<br>
  .</p><br>
<p>  App.js</p><br>
<pre><code class="plaintext">import Icon from 'react-native-vector-icons/FontAwesome5'

const App = () =&gt; {
  return (
    &lt;&gt;
      &lt;Icon name="comments" size={30} color="#900" /&gt;
    &lt;/&gt;
  )
}</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/9eb/aa1/4a1/9ebaa14a1b87631ab663427182eb87cd.png" alt="Step03"></p><br>
<h2 id="registriruem-svoy-aws-account">  AWS account</h2><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a>       5 .</p><br>
<h4 id="vnimanie">!!!</h4><br>
<p>  ,     1$ </p><br>
<p>     Amplify Command Line Interface (CLI)</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/af4/70f/d98/af470fd981fa96a00da9992a9a7e6924.png" alt="Step04"></p><br>
<h2 id="inicializaciya-aws-amplify-v-proekt-react-native"> AWS Amplify   React Native</h2><br>
<p>    React Native   AWS Amplify </p><br>
<pre><code class="bash">amplify init</code></pre><br>
<p>  :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/991/4b9/b2a/9914b9b2ad986b066c0c7996337a3f67.png" alt="amplify init"></p><br>
<p>  </p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/d23/840/9a4/d238409a47778024c1f12cd93691c3ab.png" alt="Step05"></p><br>
<h2 id="podklyuchaem-plagin-autentifikacii">  </h2><br>
<p>,     ,     ,             .</p><br>
<p></p><br>
<pre><code class="bash">amplify add auth</code></pre><br>
<p>  .    .     auth     ampify/backend/auth</p><br>
<h4 id="vybiraem-profil-kotoryy-my-hotim-ispolzovat-default-enter-i-kak-polzovateli-budut-vhodit-v-sistemu-emailza-sms-spisyvayut-dengi"> ,    . default. Enter       . Email( SMS  ).</h4><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/ff3/add/83f/ff3add83ff4ab1194c6ff8f9401b06bb.png" alt="amplify init"></p><br>
<p>    </p><br>
<pre><code class="bash">amplify push</code></pre><br>
<p>All resources are updated in the cloud</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/34b/ec2/c86/34bec2c860805fdf4daca2f36ec985fe.png" alt="Step06"></p><br>
<h2 id="podklyuchaem-aws-amplify-v-proekt-react-native-"> AWS Amplify   React Native Ô∏è</h2><br>
<p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a> ,      :</p><br>
<pre><code class="bash">yarn add aws-amplify @aws-amplify/core aws-amplify-react-native amazon-cognito-identity-js @react-native-community/netinfo</code></pre><br>
<p>      ios   </p><br>
<pre><code class="bash">cd ios &amp;&amp; pod install &amp;&amp; cd ..</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/ae8/966/d5e/ae8966d5e8590e6dbb72da5c187d859d.png" alt="Step07"></p><br>
<h2 id="redaktiruem-strukturu-proekta">  </h2><br>
<p>  /src     App.js,    index.js</p><br>
<p>   /auth/index.js    .</p><br>
<pre><code class="plaintext">import { AppRegistry, YellowBox } from 'react-native'
import App from './src'
import { name as appName } from './app.json'

YellowBox.ignoreWarnings([
  'Warning: AsyncStorage',  
  'Warning: componentWillReceiveProps',
  'RCTRootView cancelTouches',
  'not authenticated',
  'Sending `onAnimatedValueUpdate`'
])

//window.LOG_LEVEL = 'DEBUG'

AppRegistry.registerComponent(appName, () =&gt; App)</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/9c9/355/eab/9c9355eabb59b5a4c4f36b4336c5febd.png" alt="Step08"></p><br>
<h2 id="minimalnaya-konfiguraciya-proekta-i-modul-authenticator">     Authenticator</h2><br>
<p>Amplify.configure ‚Äî  </p><br>
<p>Authenticator ‚Äî  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">AWS Amplify Authentication</a>  API-      ,      .</p><br>
<pre><code class="plaintext">import React from 'react'
import {StatusBar} from 'react-native'
import Amplify from '@aws-amplify/core'
import {Authenticator} from 'aws-amplify-react-native'
import awsconfig from '../aws-exports'

Amplify.configure({
  ...awsconfig,
  Analytics: {
    disabled: true,
  },
})

const App = () =&gt; {
  return (
    &lt;&gt;
      &lt;StatusBar barStyle="dark-content" /&gt;
      &lt;Authenticator usernameAttributes="email" /&gt;
    &lt;/&gt;
  )
}

export default App</code></pre><br>
<p> ,    UI  :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/cb4/2b1/d66/cb42b1d66b77c5721e1d204bedc1a03d.png" alt="Cognito"></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/560/ec1/171/560ec1171f5bc79a6dde22f0f344cb58.png" alt="Step09"></p><br>
<h2 id="pravim-inputy-v-appjs">   App.js</h2><br>
<p>   signUpConfig</p><br>
<pre><code class="plaintext">const signUpConfig = {
  hideAllDefaults: true,
  signUpFields: [
    {
      label: 'Email',
      key: 'email',
      required: true,
      displayOrder: 1,
      type: 'string',
    },
    {
      label: 'Password',
      key: 'password',
      required: true,
      displayOrder: 2,
      type: 'password',
    },
  ],
}

&lt;Authenticator
   usernameAttributes="email"
   signUpConfig={signUpConfig}
/&gt;</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/df8/22a/e04/df822ae04334378b0b39d6bd70bf2513.png" alt="Step10"></p><br>
<h2 id="menyaem-temu-ui">  UI</h2><br>
<p>      /src/components/index.js  </p><br>
<pre><code class="plaintext">export * from './AmplifyTheme'</code></pre><br>
<p>     /src/components/AmplifyTheme/index.js   </p><br>
<pre><code class="plaintext">import { StyleSheet } from 'react-native'

export const deepSquidInk = '#152939'
export const linkUnderlayColor = '#FFF'
export const errorIconColor = '#30d0fe'

const AmplifyTheme = StyleSheet.create({
  container: {
    flex: 1,
    flexDirection: 'column',
    alignItems: 'center',
    justifyContent: 'space-around',
    paddingTop: 20,
    width: '100%',
    backgroundColor: '#FFF'
  },
  section: {
    flex: 1,
    width: '100%',
    padding: 30
  },
  sectionHeader: {
    width: '100%',
    marginBottom: 32
  },
  sectionHeaderText: {
    color: deepSquidInk,
    fontSize: 20,
    fontWeight: '500'
  },
  sectionFooter: {
    width: '100%',
    padding: 10,
    flexDirection: 'row',
    justifyContent: 'space-between',
    marginTop: 15,
    marginBottom: 20
  },
  sectionFooterLink: {
    fontSize: 14,
    color: '#30d0fe',
    alignItems: 'baseline',
    textAlign: 'center'
  },
  navBar: {
    marginTop: 35,
    padding: 15,
    flexDirection: 'row',
    justifyContent: 'flex-end',
    alignItems: 'center'
  },
  navButton: {
    marginLeft: 12,
    borderRadius: 4
  },
  cell: {
    flex: 1,
    width: '50%'
  },
  errorRow: {
    flexDirection: 'row',
    justifyContent: 'center'
  },
  errorRowText: {
    marginLeft: 10
  },
  photo: {
    width: '100%'
  },
  album: {
    width: '100%'
  },
  button: {
    backgroundColor: '#30d0fe',
    alignItems: 'center',
    padding: 16
  },
  buttonDisabled: {
    backgroundColor: '#85E4FF',
    alignItems: 'center',
    padding: 16
  },
  buttonText: {
    color: '#fff',
    fontSize: 14,
    fontWeight: '600'
  },
  formField: {
    marginBottom: 22
  },
  input: {
    padding: 16,
    borderWidth: 1,
    borderRadius: 3,
    borderColor: '#C4C4C4'
  },
  inputLabel: {
    marginBottom: 8
  },
  phoneContainer: {
    display: 'flex',
    flexDirection: 'row',
    alignItems: 'center'
  },
  phoneInput: {
    flex: 2,
    padding: 16,
    borderWidth: 1,
    borderRadius: 3,
    borderColor: '#C4C4C4'
  },
  picker: {
    flex: 1,
    height: 44
  },
  pickerItem: {
    height: 44
  }
})

export { AmplifyTheme }</code></pre><br>
<p>     Authenticator src/index.js</p><br>
<pre><code class="plaintext">import {AmplifyTheme} from './components'

&lt;Authenticator
  usernameAttributes="email"
  signUpConfig={signUpConfig}
  theme={AmplifyTheme}
/&gt;</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/517/b5d/e5c/517b5de5c8e725435ea10c86dfbaad27.png" alt="AmplifyTheme"></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/81f/03c/c4c/81f03cc4cf1c819f35f562367e6975d1.png" alt="Step11"></p><br>
<h2 id="podklyuchaem-lokalizaciyu"> </h2><br>
<p>     </p><br>
<p>   /src/components/index.js</p><br>
<pre><code class="plaintext">export * from './Localei18n'</code></pre><br>
<p>C   /src/components/Localei18n/index.js  </p><br>
<pre><code class="plaintext">import { NativeModules, Platform } from 'react-native'
import { I18n } from '@aws-amplify/core'

let langRegionLocale = 'en_US'

// If we have an Android phone
if (Platform.OS === 'android') {
  langRegionLocale = NativeModules.I18nManager.localeIdentifier || ''
} else if (Platform.OS === 'ios') {
  langRegionLocale = NativeModules.SettingsManager.settings.AppleLocale || ''
}

const authScreenLabels = {
  en: {
    'Sign Up': 'Create new account',
    'Sign Up Account': 'Create a new account'
  },
  ru: {
    'Sign Up': ' ',
    'Forgot Password': ' ?',
    'Sign In Account': '  ',
    'Enter your email': ' email',
    'Enter your password': ' ',
    Password: '',
    'Sign In': '',
    'Please Sign In / Sign Up': ' /  ',
    'Sign in to your account': '   ',
    'Create a new account': 'C  ',
    'Confirm a Code': ' ',
    'Confirm Sign Up': ' ',
    'Resend code': '  ',
    'Back to Sign In': '  ',
    Confirm: '',
    'Confirmation Code': ' ',
    'Sign Out': ''
  }
}

// "en_US" -&gt; "en", "es_CL" -&gt; "es", etc
const languageLocale = langRegionLocale.substring(0, 2)
I18n.setLanguage(languageLocale)
I18n.putVocabularies(authScreenLabels)

const Localei18n = () =&gt; null

export { Localei18n }</code></pre><br>
<p>   Localei18n  src/index.js</p><br>
<pre><code class="plaintext">import {
   AmplifyTheme,
   Localei18n
} from './components'

&lt;Localei18n /&gt;
&lt;Authenticator
  usernameAttributes="email"
  signUpConfig={signUpConfig}
  theme={AmplifyTheme}
/&gt;</code></pre><br>
<p> ,  ,     .         </p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/7a9/2dc/012/7a92dc0124f6ed4c2ffa5f9b66373277.png" alt="Localei18n"></p><br>
<h2 id="done">Done</h2><br>
<h1 id="chast-ii"> II</h1><br>
<p>-  UI  Amplify     UX    </p><br>
<p>-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a> Amplify :</p><br>
<blockquote>Data is stored unencrypted when using standard storage adapters (localStorage in the browser and AsyncStorage on React Native). Amplify gives you the option to use your own storage object to persist data. With this, you could write a thin wrapper around libraries like:<br>
react-native-keychain<br>
react-native-secure-storage<br>
Expo‚Äôs secure store</blockquote><p> ,        ,         ,         .</p><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">GitHub</a>.</p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/a85/330/557/a85330557d5a036dd7641c8dcaa8d8a8.gif" alt="AWS Amplify"></a></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/942/0e0/a51/9420e0a51c7b345d8fa5d5e29d760ea0.png" alt="Step01"></p><br>
<h2 id="ui-kit">UI Kit</h2><br>
<p>    UI Kit,          .</p><br>
<p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a> .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/631/e00/e86/631e00e866d9fc3d76c43b97781ae3b4.png" alt="Step02"></p><br>
<h2 id="navigaciya-react-navigation"> react-navigation</h2><br>
<p>  react-navigation 5,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"></a> (    ):</p><br>
<pre><code class="bash">yarn add react-native-reanimated react-native-gesture-handler react-native-screens react-native-safe-area-context @react-native-community/masked-view @react-navigation/stack</code></pre><br>
<p>   iOS</p><br>
<pre><code class="bash">cd ios &amp;&amp; pod install &amp;&amp; cd ..</code></pre><br>
<p>       iOS  Android,      -   .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/9eb/aa1/4a1/9ebaa14a1b87631ab663427182eb87cd.png" alt="Step03"></p><br>
<h2 id="react-native-keychain">react-native-keychain</h2><br>
<p>  react-native-keychain ‚Äî     react-native-keychain  React Native.</p><br>
<pre><code class="bash">yarn add react-native-keychain</code></pre><br>
<p>   iOS</p><br>
<pre><code class="bash">cd ios &amp;&amp; pod install &amp;&amp; cd ..</code></pre><br>
<p> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"> </a>:</p><br>
<blockquote>    AWS Amplify      Amazon Cognito .      .  ,   IdToken  AccessToken,   localStorage     AsyncStorage  React Native.             Amplify   ,           .</blockquote><p>  src/index.js</p><br>
<pre><code class="plaintext">import React from 'react'
import Amplify from '@aws-amplify/core'
import * as Keychain from 'react-native-keychain'
import { ThemeProvider, DarkTheme, LightTheme } from 'react-native-unicorn-uikit'
import { useColorScheme } from 'react-native-appearance'
import AppNavigator from './AppNavigator'
import awsconfig from '../aws-exports'

const MEMORY_KEY_PREFIX = '@MyStorage:'
let dataMemory = {}

class MyStorage {
  static syncPromise = null

  static setItem(key, value) {
    Keychain.setGenericPassword(MEMORY_KEY_PREFIX + key, value)
    dataMemory[key] = value
    return dataMemory[key]
  }

  static getItem(key) {
    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined
  }

  static removeItem(key) {
    Keychain.resetGenericPassword()
    return delete dataMemory[key]
  }

  static clear() {
    dataMemory = {}
    return dataMemory
  }
}

Amplify.configure({
  ...awsconfig,
  Analytics: {
    disabled: false
  },
  storage: MyStorage
})

const App = () =&gt; {
  const scheme = useColorScheme()
  return (
    &lt;&gt;
      &lt;ThemeProvider theme={scheme === 'dark' ? DarkTheme : LightTheme}&gt;
        &lt;AppNavigator /&gt;
      &lt;/ThemeProvider&gt;
    &lt;/&gt;
  )
}

export default App</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/af4/70f/d98/af470fd981fa96a00da9992a9a7e6924.png" alt="Step04"></p><br>
<h2 id="konstanty"></h2><br>
<p>       ,           src/constants.js</p><br>
<pre><code class="plaintext">import { Dimensions } from 'react-native'

export const BG = '#0B0B0B'
export const PINK = '#F20AF5'
export const PURPLE = '#7A1374'
export const BLUE = '#00FFFF'
export const GREEN = '#2E7767'
export const RED = '#FC2847'
export const LABEL_COLOR = BLUE
export const INPUT_COLOR = PINK
export const ERROR_COLOR = RED
export const HELP_COLOR = '#999999'
export const BORDER_COLOR = BLUE
export const DISABLED_COLOR = '#777777'
export const DISABLED_BACKGROUND_COLOR = '#eeeeee'

export const win = Dimensions.get('window')
export const W = win.width
export const H = win.height

export const Device = {
  // eslint-disable-next-line
  select(variants) {
    if (W &gt;= 300 &amp;&amp; W &lt;= 314) return variants.mobile300 || {}
    if (W &gt;= 315 &amp;&amp; W &lt;= 341) return variants.iphone5 || {}
    if (W &gt;= 342 &amp;&amp; W &lt;= 359) return variants.mobile342 || {}
    if (W &gt;= 360 &amp;&amp; W &lt;= 374) return variants.mi5 || {}
    if (W &gt;= 375 &amp;&amp; W &lt;= 399) return variants.iphone678 || {}
    if (W &gt;= 400 &amp;&amp; W &lt;= 409) return variants.mobile400 || {}
    if (W &gt;= 410 &amp;&amp; W &lt;= 414) return variants.googlePixel || {}
    if (W &gt;= 415 &amp;&amp; W &lt;= 434) return variants.mobile415 || {}
    if (W &gt;= 435 &amp;&amp; W &lt;= 480) return variants.redmiNote5 || {}
  }
}

export const goBack = navigation =&gt; () =&gt; navigation.goBack()

export const onScreen = (screen, navigation, obj) =&gt; () =&gt; {
  navigation.navigate(screen, obj)
}

export const goHome = navigation =&gt; () =&gt; navigation.popToTop()()</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/d23/840/9a4/d238409a47778024c1f12cd93691c3ab.png" alt="Step05"></p><br>
<h2 id="appnavigator">AppNavigator</h2><br>
<p>         src/AppNavigator.js</p><br>
<pre><code class="plaintext">import * as React from 'react'
import { createStackNavigator } from '@react-navigation/stack'
import { Hello } from './screens/Authenticator'

const Stack = createStackNavigator()

const AppNavigator = () =&gt; {   
  return (
    &lt;Stack.Navigator
      screenOptions={{
        headerShown: false
      }}
      initialRouteName="HELLO"
    &gt;
      &lt;Stack.Screen name="HELLO" component={Hello} /&gt;
    &lt;/Stack.Navigator&gt;
  )
}

export default AppNavigator</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/34b/ec2/c86/34bec2c860805fdf4daca2f36ec985fe.png" alt="Step06"></p><br>
<h2 id="hello-screen">Hello screen</h2><br>
<p>       src/screens/Authenticator/index.js</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/942/35a/76b/94235a76b21bd666faad2a2be9dbace2.png" alt="Hello screen"></p><br>
<p>      </p><br>
<pre><code class="plaintext">export * from './Hello'</code></pre><br>
<p>   src/screens/Authenticator/Hello/index.js</p><br>
<p>  useEffect       ,    true     User,    false    .</p><br>
<pre><code class="plaintext">import React, { useEffect, useState } from 'react'
import { Auth } from 'aws-amplify'
import * as Keychain from 'react-native-keychain'
import { AppContainer, Button, Space, H6 } from 'react-native-unicorn-uikit'
import { onScreen } from '../../../constants'

const Hello = ({ navigation }) =&gt; {
  const [loading, setLoading] = useState(false)
  useEffect(() =&gt; {
    setLoading(true)
    const key = async () =&gt; {
      try {
        const credentials = await Keychain.getInternetCredentials('auth')

        if (credentials) {
          const { username, password } = credentials
          const user = await Auth.signIn(username, password)
          setLoading(false)
          user &amp;&amp; onScreen('USER', navigation)()
        } else {
          setLoading(false)
        }
      } catch (err) {
        console.log('error', err) // eslint-disable-line
        setLoading(false)
      }
    }
    key()
  }, []) // eslint-disable-line
  return (
    &lt;AppContainer loading={loading}&gt;
      &lt;Space height={200} /&gt;
      &lt;Button title="Sign In" onPress={onScreen('SIGN_IN', navigation)} /&gt;
      &lt;Space height={10} /&gt;
      &lt;H6 title="or" textStyle={{ alignSelf: 'center' }} /&gt;
      &lt;Space height={15} /&gt;
      &lt;Button title="Sign Up" onPress={onScreen('SIGN_UP', navigation)} /&gt;
    &lt;/AppContainer&gt;
  )
}

export { Hello }</code></pre><br>
<p>     .</p><br>
<br>
<h2 id="signup-screen">SignUp screen</h2><br>
<p>   SIGN_UP src/screens/Authenticator/SignUp/index.js,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">Auth.signUp</a></p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/ae8/966/d5e/ae8966d5e8590e6dbb72da5c187d859d.png" alt="SignUp"></p><br>
<pre><code class="plaintext">import React, { useState } from 'react'
import { Auth } from 'aws-amplify'
import * as Keychain from 'react-native-keychain'
import { Formik } from 'formik'
import * as Yup from 'yup'
import { AppContainer, Space, Button, Input, TextError } from 'react-native-unicorn-uikit'
import { onScreen, goBack } from '../../../constants'

const SignUp = ({ navigation }) =&gt; {
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')

  const _onPress = async (values) =&gt; {
    const { email, password, passwordConfirmation } = values
    if (password !== passwordConfirmation) {
      setError('Passwords do not match!')
    } else {
      setLoading(true)
      setError('')
      try {
        const user = await Auth.signUp(email, password)
        await Keychain.setInternetCredentials('auth', email, password)
        user &amp;&amp; onScreen('CONFIRM_SIGN_UP', navigation, { email, password })()
        setLoading(false)
      } catch (err) {
        setLoading(false)
        if (err.code === 'UserNotConfirmedException') {
          setError('Account not verified yet')
        } else if (err.code === 'PasswordResetRequiredException') {
          setError('Existing user found. Please reset your password')
        } else if (err.code === 'NotAuthorizedException') {
          setError('Forgot Password?')
        } else if (err.code === 'UserNotFoundException') {
          setError('User does not exist!')
        } else {
          setError(err.code)
        }
      }
    }
  }

  return (
    &lt;&gt;
      &lt;AppContainer onPress={goBack(navigation)} title="Sign Up" loading={loading}&gt;
        &lt;Space height={80} /&gt;
        &lt;Formik
          initialValues={{ email: '', password: '', passwordConfirmation: '' }}
          onSubmit={(values) =&gt; _onPress(values)}
          validationSchema={Yup.object().shape({
            email: Yup.string().email().required(),
            password: Yup.string().min(6).required(),
            passwordConfirmation: Yup.string().min(6).required()
          })}
        &gt;
          {({ values, handleChange, errors, setFieldTouched, touched, isValid, handleSubmit }) =&gt; (
            &lt;&gt;
              &lt;Input
                name="email"
                value={values.email}
                onChangeText={handleChange('email')}
                onBlur={() =&gt; setFieldTouched('email')}
                placeholder="E-mail"
                touched={touched}
                errors={errors}
                autoCapitalize="none"
              /&gt;
              &lt;Input
                name="password"
                value={values.password}
                onChangeText={handleChange('password')}
                onBlur={() =&gt; setFieldTouched('password')}
                placeholder="Password"
                touched={touched}
                errors={errors}
                secureTextEntry
              /&gt;
              &lt;Input
                name="passwordConfirmation"
                value={values.passwordConfirmation}
                onChangeText={handleChange('passwordConfirmation')}
                onBlur={() =&gt; setFieldTouched('passwordConfirmation')}
                placeholder="Password confirm"
                touched={touched}
                errors={errors}
                secureTextEntry
              /&gt;
              &lt;Space height={30} /&gt;
              {error !== '' &amp;&amp; &lt;TextError title={error} textStyle={{ alignSelf: 'center' }} /&gt;}
              &lt;Button title="Sign Up" disabled={!isValid} onPress={handleSubmit} formik /&gt;
            &lt;/&gt;
          )}
        &lt;/Formik&gt;
      &lt;/AppContainer&gt;
    &lt;/&gt;
  )
}

export { SignUp }</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/9c9/355/eab/9c9355eabb59b5a4c4f36b4336c5febd.png" alt="Step08"></p><br>
<h2 id="confirmsignup-screen">ConfirmSignUp screen</h2><br>
<p>    ,        ,    .     CONFIRM_SIGN_UP src/screens/Authenticator/ConfirmSignUp/index.js</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/a51/873/7a5/a518737a5a9f8845da5a9e320f9589c2.png" alt="ConfirmSignUp"></p><br>
<pre><code class="plaintext">import React, { useState } from 'react'
import { Auth } from 'aws-amplify'
import { Formik } from 'formik'
import * as Yup from 'yup'
import { AppContainer, Button, Space, ButtonLink, TextError, Input } from 'react-native-unicorn-uikit'
import { onScreen, goBack } from '../../../constants'

const ConfirmSignUp = ({ route, navigation }) =&gt; {
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')

  const _onPress = async (values) =&gt; {
    setLoading(true)
    setError('')
    try {
      const { code } = values
      const { email, password } = route.params
      await Auth.confirmSignUp(email, code, { forceAliasCreation: true })
      const user = await Auth.signIn(email, password)
      user &amp;&amp; onScreen('USER', navigation)()
      setLoading(false)
    } catch (err) {
      setLoading(false)
      setError(err.message)
      if (err.code === 'UserNotConfirmedException') {
        setError('Account not verified yet')
      } else if (err.code === 'PasswordResetRequiredException') {
        setError('Existing user found. Please reset your password')
      } else if (err.code === 'NotAuthorizedException') {
        setError('Forgot Password?')
      } else if (err.code === 'UserNotFoundException') {
        setError('User does not exist!')
      }
    }
  }

  const _onResend = async () =&gt; {
    try {
      const { email } = route.params
      await Auth.resendSignUp(email)
    } catch (err) {
      setError(err.message)
    }
  }

  return (
    &lt;&gt;
      &lt;AppContainer title="Confirmation" onPress={goBack(navigation)} loading={loading}&gt;
        &lt;Formik
          initialValues={{ code: '' }}
          onSubmit={(values) =&gt; _onPress(values)}
          validationSchema={Yup.object().shape({
            code: Yup.string().min(6).required()
          })}
        &gt;
          {({ values, handleChange, errors, setFieldTouched, touched, isValid, handleSubmit }) =&gt; (
            &lt;&gt;
              &lt;Space height={180} /&gt;
              &lt;Input
                name="code"
                value={values.code}
                onChangeText={handleChange('code')}
                onBlur={() =&gt; setFieldTouched('code')}
                placeholder="Insert code"
                touched={touched}
                errors={errors}
              /&gt;
              &lt;ButtonLink title="Resend code?" onPress={_onResend} textStyle={{ alignSelf: 'center' }} /&gt;
              {error !== 'Forgot Password?' &amp;&amp; &lt;TextError title={error} /&gt;}
              &lt;Button title="Confirm" disabled={!isValid} onPress={handleSubmit} formik /&gt;
              &lt;Space height={50} /&gt;
            &lt;/&gt;
          )}
        &lt;/Formik&gt;
      &lt;/AppContainer&gt;
    &lt;/&gt;
  )
}

export { ConfirmSignUp }</code></pre><br>
<h2 id="resendsignup">ResendSignUp</h2><br>
<p>   ,         .     Resend code?    Auth.resendSignUp(userInfo.email)<br>
    </p><br>
<pre><code class="plaintext">Auth.confirmSignUp(email, code, { forceAliasCreation: true })</code></pre><br>
<p>   </p><br>
<pre><code class="plaintext">Auth.signIn(email, password)</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/560/ec1/171/560ec1171f5bc79a6dde22f0f344cb58.png" alt="Step09"></p><br>
<h2 id="user-screen">User screen</h2><br>
<p>      USER,    c        src/screens/Authenticator/User/index.js</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/cd9/6c3/76b/cd96c376bb368293f22d215627c466ac.png" alt="User screen"></p><br>
<pre><code class="plaintext">import React, { useState, useEffect } from 'react'
import { Auth } from 'aws-amplify'
import * as Keychain from 'react-native-keychain'
import { AppContainer, Button } from 'react-native-unicorn-uikit'
import { goHome } from '../../../constants'

const User = ({ navigation }) =&gt; {
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')

  useEffect(() =&gt; {
    const checkUser = async () =&gt; {
      await Auth.currentAuthenticatedUser()
    }
    checkUser()
  })

  const _onPress = async () =&gt; {
    setLoading(true)
    try {
      await Auth.signOut()
      await Keychain.resetInternetCredentials('auth')
      goHome(navigation)()
    } catch (err) {
      setError(err.message)
    }
  }

  return (
    &lt;AppContainer message={error} loading={loading}&gt;
      &lt;Button title="Sign Out" onPress={_onPress} /&gt;
    &lt;/AppContainer&gt;
  )
}

export { User }</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/df8/22a/e04/df822ae04334378b0b39d6bd70bf2513.png" alt="Step10"></p><br>
<h2 id="signin-screen">SignIn screen</h2><br>
<p> ,   ,            .      SIGN_IN src/screens/Authenticator/SignIn/index.js</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/603/4f5/702/6034f57024d57d86448d22469e8ac0be.png" alt="SignIn screen"></p><br>
<pre><code class="plaintext">import React, { useState } from 'react'
import { Auth } from 'aws-amplify'
import * as Keychain from 'react-native-keychain'
import { Formik } from 'formik'
import * as Yup from 'yup'
import { AppContainer, Button, Space, ButtonLink, TextError, Input } from 'react-native-unicorn-uikit'
import { onScreen, goBack } from '../../../constants'

const SignIn = ({ navigation }) =&gt; {
  const [userInfo, setUserInfo] = useState('')
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')

  const _onPress = async (values) =&gt; {
    setLoading(true)
    setError('')
    try {
      const { email, password } = values
      const user = await Auth.signIn(email, password)
      await Keychain.setInternetCredentials('auth', email, password)
      user &amp;&amp; onScreen('USER', navigation)()
      setLoading(false)
    } catch (err) {
      setLoading(false)
      if (err.code === 'UserNotConfirmedException') {
        setError('Account not verified yet')
      } else if (err.code === 'PasswordResetRequiredException') {
        setError('Existing user found. Please reset your password')
      } else if (err.code === 'NotAuthorizedException') {
        setError('Forgot Password?')
      } else if (err.code === 'UserNotFoundException') {
        setError('User does not exist!')
      } else {
        setError(err.code)
      }
    }
  }

  return (
    &lt;&gt;
      &lt;AppContainer onPress={goBack(navigation)} title="Sign In" loading={loading}&gt;
        &lt;Space height={140} /&gt;
        &lt;Formik
          initialValues={{ email: '', password: '' }}
          onSubmit={(values) =&gt; _onPress(values) &amp;&amp; setUserInfo(values.email)}
          validationSchema={Yup.object().shape({
            email: Yup.string().email().required(),
            password: Yup.string().min(6).required()
          })}
        &gt;
          {({ values, handleChange, errors, setFieldTouched, touched, isValid, handleSubmit }) =&gt; (
            &lt;&gt;
              &lt;Input
                name="email"
                value={values.email}
                onChangeText={handleChange('email')}
                onBlur={() =&gt; setFieldTouched('email')}
                placeholder="E-mail"
                touched={touched}
                errors={errors}
                autoCapitalize="none"
              /&gt;
              &lt;Input
                name="password"
                value={values.password}
                onChangeText={handleChange('password')}
                onBlur={() =&gt; setFieldTouched('password')}
                placeholder="Password"
                touched={touched}
                errors={errors}
                secureTextEntry
              /&gt;
              {error !== 'Forgot Password?' &amp;&amp; &lt;TextError title={error} textStyle={{ alignSelf: 'center' }} /&gt;}
              {error === 'Forgot Password?' &amp;&amp; (
                &lt;ButtonLink
                  title={error}
                  onPress={onScreen('FORGOT', navigation, userInfo)}
                  textStyle={{ alignSelf: 'center' }}
                /&gt;
              )}
              &lt;Space height={30} /&gt;
              &lt;Button title="Sign In" disabled={!isValid} onPress={handleSubmit} formik /&gt;
            &lt;/&gt;
          )}
        &lt;/Formik&gt;
      &lt;/AppContainer&gt;
    &lt;/&gt;
  )
}

export { SignIn }</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/81f/03c/c4c/81f03cc4cf1c819f35f562367e6975d1.png" alt="Step11"></p><br>
<h2 id="forgot-password-screen">Forgot password screen</h2><br>
<p>  ,      USER,     ,         ,     Forgot Password?    .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/39c/556/be6/39c556be682081bc220a4ae25c147e0a.png" alt="Forgot password"></p><br>
<p>     FORGOT src/screens/Authenticator/Forgot/index.js</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/ec3/e63/053/ec3e630535201998be068fad593bb650.png" alt="Forgot password"></p><br>
<pre><code class="plaintext">import React, { useState } from 'react'
import { Auth } from 'aws-amplify'
import { Formik } from 'formik'
import * as Yup from 'yup'
import { AppContainer, Button, Input } from 'react-native-unicorn-uikit'
import { onScreen, goBack } from '../../../constants'

const Forgot = ({ route, navigation }) =&gt; {
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')

  const _onPress = async (values) =&gt; {
    setLoading(true)
    try {
      const { email } = values
      const user = await Auth.forgotPassword(email)
      user &amp;&amp; onScreen('FORGOT_PASSWORD_SUBMIT', navigation, email)()
      setLoading(false)
    } catch (err) {
      setError(error)
    }
  }

  return (
    &lt;&gt;
      &lt;AppContainer title="Forgot" onPress={goBack(navigation)} loading={loading}&gt;
        &lt;Formik
          initialValues={{ email: route.params }}
          onSubmit={(values) =&gt; _onPress(values)}
          validationSchema={Yup.object().shape({
            email: Yup.string().email().required()
          })}
        &gt;
          {({ values, handleChange, errors, setFieldTouched, touched, isValid, handleSubmit }) =&gt; (
            &lt;&gt;
              &lt;Input
                name="email"
                value={values.email}
                onChangeText={handleChange('email')}
                onBlur={() =&gt; setFieldTouched('email')}
                placeholder="E-mail"
                touched={touched}
                errors={errors}
                autoCapitalize="none"
              /&gt;
              &lt;Button title="Confirm" disabled={!isValid} onPress={handleSubmit} formik /&gt;
            &lt;/&gt;
          )}
        &lt;/Formik&gt;
      &lt;/AppContainer&gt;
    &lt;/&gt;
  )
}

export { Forgot }</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/3a2/be6/a51/3a2be6a514a1193ffc38111740b16e3a.png" alt="Step12"></p><br>
<h2 id="forgot-password-submit">Forgot Password Submit</h2><br>
<p>  e-mail,    Auth.forgotPassword(email)   ,    ,      FORGOT_PASSWORD_SUBMIT src/screens/Authenticator/ForgotPassSubmit/index.js</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/3b3/32a/335/3b332a33583377b95f9454b26f912259.png" alt="ForgotPassSubmit"></p><br>
<pre><code class="plaintext">import React, { useState } from 'react'
import { Platform } from 'react-native'
import { Auth } from 'aws-amplify'
import * as Keychain from 'react-native-keychain'
import { Formik } from 'formik'
import * as Yup from 'yup'
import { AppContainer, Button, Space, Input, TextError } from 'react-native-unicorn-uikit'
import { onScreen, goBack } from '../../../constants'

const ForgotPassSubmit = ({ route, navigation }) =&gt; {
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')

  const _onPress = async (values) =&gt; {
    setLoading(true)
    try {
      const { email, code, password } = values
      await Auth.forgotPasswordSubmit(email, code, password)
      await Keychain.setInternetCredentials('auth', email, password)
      onScreen('USER', navigation)()
      setLoading(false)
    } catch (err) {
      setLoading(false)
      setError(err.message)
    }
  }

  return (
    &lt;&gt;
      &lt;AppContainer title="Confirmation" onPress={goBack(navigation)} loading={loading}&gt;
        &lt;Space height={Platform.OS === 'ios' ? 20 : 150} /&gt;
        &lt;Formik
          initialValues={{ email: route.params, code: '', password: '', passwordConfirmation: '' }}
          onSubmit={(values) =&gt; _onPress(values)}
          validationSchema={Yup.object().shape({
            email: Yup.string().email().required(),
            code: Yup.string().min(6).required(),
            password: Yup.string().min(6).required(),
            passwordConfirmation: Yup.string().min(6).required()
          })}
        &gt;
          {({ values, handleChange, errors, setFieldTouched, touched, isValid, handleSubmit }) =&gt; (
            &lt;&gt;
              &lt;Input
                name="email"
                value={values.email}
                onChangeText={handleChange('email')}
                onBlur={() =&gt; setFieldTouched('email')}
                placeholder="E-mail"
                touched={touched}
                errors={errors}
                autoCapitalize="none"
              /&gt;
              &lt;Input
                name="code"
                value={values.code}
                onChangeText={handleChange('code')}
                onBlur={() =&gt; setFieldTouched('code')}
                placeholder="Code"
                touched={touched}
                errors={errors}
              /&gt;
              &lt;Input
                name="password"
                value={values.password}
                onChangeText={handleChange('password')}
                onBlur={() =&gt; setFieldTouched('password')}
                placeholder="Password"
                touched={touched}
                errors={errors}
                secureTextEntry
              /&gt;
              &lt;Input
                name="passwordConfirmation"
                value={values.passwordConfirmation}
                onChangeText={handleChange('passwordConfirmation')}
                onBlur={() =&gt; setFieldTouched('passwordConfirmation')}
                placeholder="Password confirm"
                touched={touched}
                errors={errors}
                secureTextEntry
              /&gt;
              {error !== '' &amp;&amp; &lt;TextError title={error} textStyle={{ alignSelf: 'center' }} /&gt;}
              &lt;Space height={30} /&gt;
              &lt;Button title="Confirm" disabled={!isValid} onPress={handleSubmit} formik /&gt;
            &lt;/&gt;
          )}
        &lt;/Formik&gt;
      &lt;/AppContainer&gt;
    &lt;/&gt;
  )
}

export { ForgotPassSubmit }</code></pre><br>
<p>   ,   ,     ,     </p><br>
<pre><code class="plaintext">Auth.forgotPasswordSubmit(email, code, password)</code></pre><br>
<p>      USER.</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/e0a/e7c/f83/e0ae7cf835073155c02c00d537d335fd.png" alt="Step13"></p><br>
<h2 id="svyazyvanie-ekranov"> </h2><br>
<p>     src/screens/Authenticator/index.js</p><br>
<pre><code class="plaintext">export * from './Hello'
export * from './User'
export * from './SignIn'
export * from './SignUp'
export * from './Forgot'
export * from './ForgotPassSubmit'
export * from './ConfirmSignUp'</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/f21/101/ea7/f21101ea74d3f57f1691aacb625d707a.png" alt="Step14"></p><br>
<h2 id="udpate-appnavigator">Udpate AppNavigator</h2><br>
<p>   :</p><br>
<pre><code class="plaintext">import * as React from 'react'
import { createStackNavigator } from '@react-navigation/stack'
import { Hello, SignUp, SignIn, ConfirmSignUp, User, Forgot, ForgotPassSubmit } from './screens/Authenticator'

const Stack = createStackNavigator()

const AppNavigator = () =&gt; {
  return (
    &lt;Stack.Navigator
      screenOptions={{
        headerShown: false
      }}
      initialRouteName="HELLO"
    &gt;
      &lt;Stack.Screen name="HELLO" component={Hello} /&gt;
      &lt;Stack.Screen name="SIGN_UP" component={SignUp} /&gt;
      &lt;Stack.Screen name="SIGN_IN" component={SignIn} /&gt;
      &lt;Stack.Screen name="FORGOT" component={Forgot} /&gt;
      &lt;Stack.Screen name="FORGOT_PASSWORD_SUBMIT" component={ForgotPassSubmit} /&gt;
      &lt;Stack.Screen name="CONFIRM_SIGN_UP" component={ConfirmSignUp} /&gt;
      &lt;Stack.Screen name="USER" component={User} /&gt;
    &lt;/Stack.Navigator&gt;
  )
}

export default AppNavigator</code></pre><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/e7a/ab6/a44/e7aab6a44c55db24e7571c547fe90434.png" alt="Step15"></p><br>
<h2 id="clean-up">Clean Up</h2><br>
<p>     ,    AmplifyTheme  Localei18n</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/8f1/aed/fbf/8f1aedfbf2e71d312601354edb707715.png" alt="Step16"></p><br>
<h2 id="debug">Debug</h2><br>
<p> ,  ,       ,    /index.js</p><br>
<pre><code class="plaintext">window.LOG_LEVEL = 'DEBUG'</code></pre><br>
<p>     .</p><br>
<h2 id="done-1">Done</h2><br>
<p>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DataStore ‚Äî CRUD (Create Read Update Delete)</a></p><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><img src="https://habrastorage.org/getpro/habr/post_images/00c/16d/925/00c16d925fd0bca08a5442812fa02fbf.png" alt="Become a Patron!"></a></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN504328/index.html">Âú®Ëé´ÊñØÁßëÊùúÈ©¨2019Âπ¥‰∏æË°åÁöÑÁîµÂ≠êÊäïÁ•®ËØæÁ®ã</a></li>
<li><a href="../zh-CN504332/index.html">ÊúâÁî®ÁöÑÂ∏ñÂ≠êÔºöÊâÄÊúâÊúÄÁõ∏ÂÖ≥ÁöÑËØæÁ®ãÔºåÂπøÊí≠ÂíåÊäÄÊúØÊµÅ</a></li>
<li><a href="../zh-CN504334/index.html">–ù–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –≤—ã –∑–Ω–∞–µ—Ç–µ JavaScript?</a></li>
<li><a href="../zh-CN504338/index.html">USB over IP –≤ –¥–æ–º–∞—à–Ω–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö</a></li>
<li><a href="../zh-CN504342/index.html">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å, –∫–æ—Ç–æ—Ä—É—é –≤—ã –Ω–µ –¥–∞–µ—Ç–µ, —Ç–∞–∫ –∂–µ –∑–Ω–∞—á–∏–º–∞, –∫–∞–∫ –∏ —Ç–∞, –∫–æ—Ç–æ—Ä—É—é –¥–∞–µ—Ç–µ</a></li>
<li><a href="../zh-CN504348/index.html">ÂçïËΩÆÔºöËÆ≠ÁªÉÊúüÈó¥‰ºöÂèëÁîü‰ªÄ‰πàÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂä†Âø´Ëøô‰∏ÄËøáÁ®ã</a></li>
<li><a href="../zh-CN504352/index.html">FigmaÂ∏ÆÂä©ÂÆûÁé∞Êñ∞ËÆæËÆ°ÊàêÊûúÁöÑÂçÅÂÆ∂ÂÖ¨Âè∏‰ª•ÂèäÊõ¥Â§ö</a></li>
<li><a href="../zh-CN504354/index.html">Êó†ÈúÄÊ≥®ÂÜåÂíåSMSÂç≥ÂèØÂáèÂ∞ëMLÊ®°ÂûãÁöÑÂ§ßÂ∞è</a></li>
<li><a href="../zh-CN504356/index.html">PHP 8‰∏≠ÁöÑÂÖ´ÊÆµ‰ª£Á†Å</a></li>
<li><a href="../zh-CN504358/index.html">PuppetConf2016„ÄÇÈù¢ÂêëÁ≥ªÁªüÁÆ°ÁêÜÂëòÁöÑKubernetes„ÄÇÁ¨¨2ÈÉ®ÂàÜ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>