<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🎨 🗂️ 📲 TypeScriptとReactのクリーンアーキテクチャ。パート1：基本 🎹 👩🏿‍🔬 🛀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、親愛なる読者。この記事では、Web開発におけるソフトウェアアーキテクチャについて説明します。かなり長い間、同僚と私は、クリーンアーキテクチャのバリエーションを使用して、フロントエンドプロジェクトでアーキテクチャを構築していました。最初は、私が反応開発の世界では、他の適切な一般的に受け入れ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>TypeScriptとReactのクリーンアーキテクチャ。パート1：基本</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499078/"><img src="https://habrastorage.org/webt/q7/ls/cw/q7lscw7mpm4ex_ivtew-qlanrkw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんにちは、親愛なる読者。この記事では、Web開発におけるソフトウェアアーキテクチャについて説明します。かなり長い間、同僚と私は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クリーンアーキテクチャの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バリエーションを使用</font><font style="vertical-align: inherit;">して、フロントエンドプロジェクトで</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">アーキテクチャ</font></a><font style="vertical-align: inherit;">を構築していました。最初は、私が反応開発の世界では、他の適切な一般的に受け入れられている建築アプローチを見つけることができませんでしたので、私は、活字体への移行とそれを採用した（と私は長い時間前に、Kotlinの前に、私が大騒ぎをしたアンドロイドの開発、から来た</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フェルナンドCejasの記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私はまだそれを時々参照します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、TypeScriptを使用したReactアプリケーションのクリーンアーキテクチャに関する私たちの経験についてお話ししたいと思います。</font><font style="vertical-align: inherit;">なぜ私はこれを言っているのですか？</font><font style="vertical-align: inherit;">-時々、私はこのアプローチにまだ慣れていない開発者にその使用を明確にして正当化しなければなりません。</font><font style="vertical-align: inherit;">したがって、ここでは、将来参照できる視覚的な説明で詳細な分析を行います。</font></font><br>
<a name="habracut"></a><br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></b></u><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理論的な部分</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャとは何ですか？</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クリーンアーキテクチャの元の定義</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フロントエンドのクリーンなアーキテクチャ</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実用的な部分</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web認証アプリケーションの説明</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ソースコードの構造</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UMLプロジェクト図</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード解析</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リソースとソース</font></font></li>
</ol><br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.はじめに</font></font></u></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャは、まず第一に、グローバルなものです。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のプログラミング言語のコンテキストでは、その理解は必要ありません。一般的な重要なアイデアを理解する必要があります。そのため、1つまたは別のアーキテクチャを使用する利点が得られます。原理はデザインパターンやSOLIDと同じです。これらは特定の言語ではなく、プログラミング手法全体（OOPなど）のために発明されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
全体像を見ると、アーキテクチャを理解するのが最も簡単です。したがって、この記事では、それが「理論的に」どうあるべきかについて話すだけでなく、プロジェクトの具体的な例も示します。まず、フロントエンドでThe Clean Architectureを使用する理論的な部分を扱い、次に、UMLダイアグラムと各クラスの説明を備えたWebアプリケーションを検討します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要な説明：Clean Architectureは、アプリケーションを編成するための厳密なルールを確立していません。推奨事項を提供するだけです。各プラットフォームと言語には独自のニュアンスがあります。この記事では、同僚と一緒に使用して現在使用しているアプローチを紹介します。これは万能薬ではありません。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、このようなアーキテクチャアプローチを使用すると、小規模なプロジェクトでは冗長になる場合があることにも注意してください。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アーキテクチャの主な目的は、コードを理解しやすく、サポートし、テストしやすくすることです。しかし、アプリケーションが、アーキテクチャ、テスト、その他の要素なしでJSで書く方が速い場合、これはごく普通のことです。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要のない場所でオーバーエンジニアリングしないでください。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> アーキテクチャー/テストの主な長所は、他の人のコードを理解して変更する必要がある、複数の開発者がいる大規模なプロジェクトで獲得されていることを思い出してください。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD_0</font></font></b>
                        <div class="spoiler_text"><b>UPD_0:</b>            .      ,     — <b>  ,   ,     .</b>          - ,      .      ,       ,      .<br>
<br>
   ,  ,    :<br>
<br>
<blockquote>  —   ( )   .<br>
<br>
—  , «Computer Programming as an Art» (1974)<br>
</blockquote><br>
<br>
 , « —  ».     - ,       (  ,      ). <br>
</div>
                    </div><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.理論的な部分</font></font></b></u><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1。アーキテクチャとは何ですか？</font></font></b></u><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回答：開発プロセスの時間を節約し、長い開発期間にわたってシステムのテスト容易性と拡張性を維持するには、アーキテクチャが必要です。</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
大規模なアプリケーションのアーキテクチャを構築しないとどうなるかについて詳しくは、たとえば、Bob MartinによるThe Clean Architectureの本を読んでください。簡単な説明のために、この本の次のチャートを示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7n/t2/pr/7nt2praknbscvpol8lrcqetew7c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチャートでは、新しいバージョン（たとえば、定期的にリリースされる）ごとに、システムに追加される回線の数が減り、1つの回線のコストが増加していることがわかります。これはシステムの複雑さによるものであり、変更を行うには不当に大量の労力が必要になり始めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クリーンアーキテクチャでは、このグラフは貧弱なアーキテクチャの例です。</font><font style="vertical-align: inherit;">このようなアプローチは、遅かれ早かれ、システムを拡張するためのコストがシステム自体の利点よりも高くなるという事実につながります。</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もう一度開発時間の比率について</font></font></b>
                        <div class="spoiler_text">           (   ):<br>
<blockquote>«  90    10  ,   .   10     90 »<br>
<br>
—  , Bell Labs</blockquote><br>
:   ,      ,       .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして今、私たち（開発者、PM、顧客）がプロジェクトで確認したい「理想的な」オプション：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/46/h9/_s/46h9_st273xssd8efxtwezq5uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフは、ライン数の増加率がバージョンによって変化しないことを明確に示しています。</font><font style="vertical-align: inherit;">コードの行（バージョンによって異なります）のコストは増加しますが、数百万行について話していることをあまり考慮していません。</font><font style="vertical-align: inherit;">残念ながら、大規模なエンタープライズシステムについて話している場合、このオプションはありそうもありません。製品が拡大するにつれて、システムの複雑さが増し、開発者が変わるため、開発コストは必然的に増加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、私もあなたを喜ばせることができます-私たちはフロントエンドアプリケーションについて話しています！それに直面しましょう-原則として、そのようなアプリケーションは何百万行にも成長しません。そうでなければ、ブラウザーはそのようなアプリケーションをダウンロードする可能性があります。極端な場合、それらは異なる製品に分割され、主なロジックはバックエンド側にあります。したがって、ある程度までは、コードのコストを増加させる上記の傾向に取り組むことができます（アプリケーションのサイズに応じて、成功の度合いは異なります）。私たちのプロジェクトの維持費が、優れたアーキテクチャーがない場合よりも50％も安い場合、これはすでに開発者の時間と顧客の資金を節約しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に優れた明確なアーキテクチャを構築した結果、次の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利点が</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">得られました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<ul>
<li><b>  </b> (,     );</li>
<li><b>  </b> (,       -  “  ”);</li>
<li><b>     </b>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「なぜこれが必要なのか！？」という質問に答えました。次に、質問の技術的な部分に移ります。</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2。最初の定義</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
では、このトピックは多くの記事で開示されているので、クリーンアーキテクチャの詳細な説明には触れませんが、問題の本質を簡潔に説明するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2012年のボブマーティンの最初の記事では、次の図が示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/58/se/fx/58sefxx6ubqmvllmbzzwsiw_yz0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この図</font><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">重要な考え方は、アプリケーションがレイヤーに分割されていることです（レイヤーはいくつでもかまいません）。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内側のレイヤーは外側のレイヤーを認識していません</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">依存関係は中央に向けられています</font></b><font style="vertical-align: inherit;">。レイヤーが中心から離れるほど、アプリケーションの「重み付けされていない」詳細（たとえば、使用されているフレームワークの種類や画面上のボタンの数など）についての情報が多くなります。</font></font><br>
<br>
<ul>
<li><b>Entities.</b>      Entities ().    -       . Entities   - . ,   Cart () —      ,    ..    ,  React,  ,  —    .<br>
<br>
      ,        React\Angular\Express\Nest.js\DI  .. , ,  ,       Web-  React’e —      NodeJS  .</li>
<li><b>Use cases.</b>      Use Cases (  —  ,   — Interactors).   ,        . ,      ,       —   ,            (. ).</li>
<li><b>Gateways, Presenters, etc.</b>    (Gateways = Repositories, Presenters = View Models) —  ,      -      . ,   ,        API  ,  View Model      React-   -.<br>
<br>
:    Use Cases  Repositories,  ,     ,      frontend         API.</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部インターフェース。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プラットフォーム依存層。</font><font style="vertical-align: inherit;">以下は、API、Reactコンポーネントなどへの直接呼び出しです。</font><font style="vertical-align: inherit;">このレイヤーはテストと抽象化が最も困難です（React'eのボタン-React'eボタンがあります）。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3。</font><font style="vertical-align: inherit;">フロントエンドのコンテキストでの定義では</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
、フロントエンドの領域に移りましょう。</font><font style="vertical-align: inherit;">フロントエンドのコンテキストでは、上の図は次のように表すことができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gp/5l/_e/gp5l_eksd3uomyw5w82-gigeozo.png"><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンティティ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジネスエンティティは、元のアーキテクチャと同じです。</font><font style="vertical-align: inherit;">エンティティは状態を格納でき、この目的でよく使用されることに注意してください。</font><font style="vertical-align: inherit;">たとえば、エンティティ「バスケット」は、現在のセッションの注文を保存して、それらを操作する方法（合計価格、商品の合計数量などを取得する）を提供できます。</font></font></li>
<li><b>Repository interfaces.</b>     API, ,   . .   ,        “”  . ,   ,         .         ,    .      SOLID’a (     ,    ).     (,   ,      API     ).</li>
<li><b>Use Cases</b>.   . ,   -     (. . ,     — , , , ).</li>
<li><b>View Models  View Interfaces.</b><br>
<br>
ViewModel —   Presenters   .       MVVP  MVP\MVC\MV*.   ,   MVP   : Presenter   View    ,  ViewModel    View,       . View  “”  View Model. MVVP    (View → ViewModel),  MVP —  (View ︎ Presenter).   —  .<br>
<br>
View Interfaces —   ,      View,   View Model    View  .     onViewModelChanged(): void.     .</li>
<li><b>5. External interfaces.</b>   ,       .     —   React’a       API.         (AngularJS, React Native)     (IndexDB, local storage  ..). The Clean Architecutre     ,   ,      -   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の図を3層アプリケーションの形式で提示すると、次の形式になります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xo/wp/vo/xowpvop6kgrincjtlrapfycy6hm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
赤い矢印はデータフローの流れを示します（依存関係ではなく、依存関係図は上の円グラフに表示されます）。長方形の図の形式の画像により、データフローがアプリケーション内でどのように移動するかをよりよく理解できます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事</font><font style="vertical-align: inherit;">では、そのような図の形で説明のアイデアを見ました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より複雑なアプリケーションでは、レイヤー構造が変わる可能性があることに注意してください。たとえば、各レイヤーがドメインよりも高い場合、これは一般的な方法です。データ変換用に独自のマッパーを使用できます。</font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.サンプルアプリケーション</font></font></u></b><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1。 Web認証アプリケーションの説明</font></font></u></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アーキテクチャのアプリケーションをより視覚的で理解しやすいものにするために、それに基づいて構築されたWebアプリケーションを作成しました。</font><font style="vertical-align: inherit;">アプリケーションのソースコードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubリポジトリ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で確認でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">アプリケーションは次のようになり</font></font><br>
<br>
<img src="https://habrastorage.org/webt/br/rj/wy/brrjwylya7qywcwp6vrjexacmk0.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。アプリケーションは単純なログインウィンドウです。</font><font style="vertical-align: inherit;">（アーキテクチャが適切になるように）アプリケーション自体を複雑にするために、次の導入を行います。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドを空にすることはできません（検証）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力するメールは正しい形式（検証）である必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクセスデータはサーバー（APIスタブ）で検証され、検証キーを受け取る必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承認のために、APIメソッドは検証データと検証キーを提供する必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">認証後、アクセスキーはアプリケーション（エンティティレイヤー）内に保存する必要があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">終了時に、認証キーをメモリから消去する必要があります。</font></font></li>
</ol><br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2。</font><font style="vertical-align: inherit;">ソースコードの構造</font></font></u></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この例では、srcフォルダーの構造は次のとおりです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cu/5i/gz/cu5igzdr9m0fk_kvvyuqm_snlm0.png"><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-データを操作する</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ためのクラスが含まれています。</font><font style="vertical-align: inherit;">このディレクトリは、リポジトリインターフェースを実装するためのクラスを含むため、円グラフの最後の円です。</font><font style="vertical-align: inherit;">したがって、これらのクラスは、APIとプラットフォーム固有のもの（ローカルストレージ、Cookieなど）を認識しています。</font></font></li>
<li><b>domain </b> —   .   Entities, Use Cases  Repository Interfaces.   entities     : models  structures.      ,  models —    ,  structures —    (  POJO  Java).     ,    models   ,    ()    ,   structures — ,      JSON- (json2ts, «»)        .</li>
<li><b>presentation </b> —  View Models, View Interfaces  View ( ),   util —   ,   ..</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、構造はプロジェクトごとに異なります。</font><font style="vertical-align: inherit;">たとえば、私のプロジェクトの1つのプレゼンテーションのルートには、サイドバーのステータスを監視するためのクラスと、ページ間を移動するためのクラスがあります。</font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3。</font><font style="vertical-align: inherit;">URMプロジェクト図</font></font></u></b><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/580/b00/846/580b008464e6c4e0ea26e20879989581.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
増加するソース</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レイヤーによるクラスの分離は、長方形で明確に示されています。</font><font style="vertical-align: inherit;">依存関係は（図に従って）ドメイン層に向けられていることに注意してください。</font></font><br>
<br>
<b><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4。</font><font style="vertical-align: inherit;">コード</font></font></u></b><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エンティティレイヤーの</font></font></b><font style="vertical-align: inherit;"><b><u><font style="vertical-align: inherit;">分析</font></u></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このセクションでは、すべてのクラスについて、作業のロジックの説明を確認します。</font><font style="vertical-align: inherit;">残りのクラスはそれに基づいているため、最も遠い円であるエンティティから始めましょう。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthListener.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//    </span>
<span class="hljs-comment">//   AuthHolder</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthListener&nbsp;{<font></font>
&nbsp;&nbsp;onAuthChanged():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthHolder.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthListener&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./AuthListener'</span>;<font></font>
<font></font>
<span class="hljs-comment">//      (. 3.1.5).  , </span>
<span class="hljs-comment">//  presentation ,    Observer</span>
<span class="hljs-comment">//   AuthListener</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthHolder</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authListeners:&nbsp;AuthListener[];<font></font>
&nbsp;&nbsp;private&nbsp;isAuthorized:&nbsp;boolean;<font></font>
&nbsp;&nbsp;private&nbsp;authToken:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners&nbsp;=&nbsp;[];
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onSignedIn(authToken:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;authToken;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyListeners();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onSignedOut():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthorized&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authToken&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyListeners();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;isUserAuthorized():&nbsp;boolean&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">this</span>.isAuthorized;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;user&nbsp;is&nbsp;not&nbsp;authorized
&nbsp;&nbsp;&nbsp;*/</span><font></font>
&nbsp;&nbsp;public&nbsp;getAuthToken():&nbsp;string&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.isAuthorized)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">throw</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'User&nbsp;is&nbsp;not&nbsp;authorized'</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">this</span>.authToken;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;addAuthListener(authListener:&nbsp;AuthListener):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.push(authListener);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;removeAuthListener(authListener:&nbsp;AuthListener):&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.splice(<span class="hljs-keyword">this</span>.authListeners.indexOf(authListener),&nbsp;<span class="hljs-number">1</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;notifyListeners():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authListeners.forEach(<span class="hljs-function">(<span class="hljs-params">listener</span>)&nbsp;=&gt;</span>&nbsp;listener.onAuthChanged());<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthorizationResult.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthorizationResult&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">authorizationToken</span>:&nbsp;string;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValidationResult.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//        </span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;ValidationResult&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これでエンティティレイヤーが終了します。</font><font style="vertical-align: inherit;">このレイヤーはビジネスロジック（状態ストレージ）のみを扱い、アプリケーションの残りの部分全体でデータを転送するために使用されることに注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、状態はビジネスロジッククラスに格納する必要はありません。</font><font style="vertical-align: inherit;">この目的のために、（データ変換用の）使用シナリオを含むリポジトリバンドルが適しています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リポジトリインターフェース</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthRepository.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;ValidationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/stuctures/ValidationResult'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthorizationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/stuctures/AuthorizationResult'</span>;<font></font>
<font></font>
<span class="hljs-comment">//    ,        API</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthRepository&nbsp;{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;validation&nbsp;has&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;validateCredentials(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;ValidationResult&gt;;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;{Error}&nbsp;if&nbsp;credentials&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;login(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string,&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;AuthorizationResult&gt;;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユースケース</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoginUseCase.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthRepository&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../repository/auth/AuthRepository'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../entity/auth/models/AuthHolder'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">LoginUseCase</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authRepository:&nbsp;AuthRepository;<font></font>
&nbsp;&nbsp;private&nbsp;authHolder:&nbsp;AuthHolder;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(authRepository:&nbsp;AuthRepository,&nbsp;authHolder:&nbsp;AuthHolder)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authRepository&nbsp;=&nbsp;authRepository;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder&nbsp;=&nbsp;authHolder;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;credentials&nbsp;are&nbsp;not&nbsp;valid&nbsp;or&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">async</span>&nbsp;loginUser(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;validationResult&nbsp;=&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.authRepository.validateCredentials(email,&nbsp;password);
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authResult&nbsp;=&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.authRepository.login(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;password,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validationResult.validationKey,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder.onSignedIn(authResult.authorizationToken);<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、ユースケースには1つのメソッドしかありません。通常、ユースケースには1つのパブリックメソッドしかなく、1つのアクションに複雑なロジックを実装します。この場合、最初に検証してから、検証データをAuthorization APIメソッドに送信する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、いくつかのシナリオが共通のロジックを持つ場合、1つのシナリオに結合されるときにアプローチがよく使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユースケースにエンティティー内に常駐する必要があるロジックが含まれていないことを注意深く確認してください。メソッドが多すぎたり、ユースケースに状態を保存したりすると、多くの場合、コードが別のレイヤーにある必要があることを示します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リポジトリ実装</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthFakeApi.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;AuthRepository&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/repository/auth/AuthRepository'</span>;
<span class="hljs-keyword">import</span>&nbsp;ValidationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/entity/auth/stuctures/ValidationResult'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthorizationResult&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../domain/entity/auth/stuctures/AuthorizationResult'</span>;<font></font>
<font></font>
<span class="hljs-comment">// ,    API</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthFakeApi</span>&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">AuthRepository</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;validation&nbsp;has&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;validateCredentials(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;ValidationResult&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{
      <span class="hljs-comment">//  ,      </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(password.length&nbsp;&lt;&nbsp;<span class="hljs-number">5</span>)&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Password&nbsp;length&nbsp;should&nbsp;be&nbsp;more&nbsp;than&nbsp;5&nbsp;characters'</span>));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;<span class="hljs-string">'A34dZ7'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">/**
&nbsp;&nbsp;&nbsp;*&nbsp;<span class="hljs-doctag">@throws&nbsp;<span class="hljs-type">{Error}</span>&nbsp;</span>if&nbsp;credentials&nbsp;have&nbsp;not&nbsp;passed
&nbsp;&nbsp;&nbsp;*/</span>
&nbsp;&nbsp;login(email:&nbsp;string,&nbsp;<span class="hljs-attr">password</span>:&nbsp;string,&nbsp;<span class="hljs-attr">validationKey</span>:&nbsp;string):&nbsp;<span class="hljs-built_in">Promise</span>&lt;AuthorizationResult&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,&nbsp;reject</span>)&nbsp;=&gt;</span>&nbsp;{
      <span class="hljs-comment">//    </span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(validationKey&nbsp;===&nbsp;<span class="hljs-string">'A34dZ7'</span>)&nbsp;{
        <span class="hljs-comment">//       user@email.com   password</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(email&nbsp;===&nbsp;<span class="hljs-string">'user@email.com'</span>&nbsp;&amp;&amp;&nbsp;password&nbsp;===&nbsp;<span class="hljs-string">'password'</span>)&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authorizationToken</span>:&nbsp;<span class="hljs-string">'Bearer&nbsp;ASKJdsfjdijosd93wiesf93isef'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">else</span>&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Validation&nbsp;key&nbsp;is&nbsp;not&nbsp;correct.&nbsp;Please&nbsp;try&nbsp;later'</span>));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(<span class="hljs-keyword">new</span>&nbsp;<span class="hljs-built_in">Error</span>(<span class="hljs-string">'Email&nbsp;or&nbsp;password&nbsp;is&nbsp;not&nbsp;correct'</span>));<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラスでは、APIへのアクセスをシミュレートしました。実際のフェッチ要求を返すPromiseを返しています。実装を実際のAPIに置き換える場合は、App.tsxファイルまたは依存関係注入ツール（使用されている場合）でAuthFakeApiクラスをAuthApiに変更するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のプログラマーがエラー処理の必要性を理解できるように、エラー記述メソッドに注釈を付けることに注意してください。残念ながら、TypeScriptには現在Javaでのスローのタイプに関する指示がないため、単純な注釈を使用しています。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">util（プレゼンテーションレイヤー）</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このディレクトリには、「予防」データ検証のロジックを実装するクラスと、UIレイヤーを操作する他のクラスを配置します。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FormValidator.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">FormValidator</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-keyword">static</span>&nbsp;isValidEmail(email:&nbsp;string):&nbsp;boolean&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;emailRegex&nbsp;=&nbsp;<span class="hljs-regexp">/^\S+@\S+\.\S+$/</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;emailRegex.test(email);<font></font>
&nbsp;&nbsp;}<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビューインターフェイス</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BaseView.tsx</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ビューモデルがビューに変更を通知できるように</font><i><font style="vertical-align: inherit;">する</font></i><font style="vertical-align: inherit;">クラス。</font><font style="vertical-align: inherit;">すべてのViewコンポーネントによって実装されます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;BaseView&nbsp;{<font></font>
&nbsp;&nbsp;onViewModelChanged():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビューモデル</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BaseViewModel.tsx</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ビューモデルとビューをリンクするための基本的なメソッドを提供</font><i><font style="vertical-align: inherit;">する</font></i><font style="vertical-align: inherit;">クラス。</font><font style="vertical-align: inherit;">すべてのビューモデルによって実装されます。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../view/BaseView'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;BaseViewModel&nbsp;{<font></font>
&nbsp;&nbsp;attachView(baseView:&nbsp;BaseView):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;detachView():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModel.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span>&nbsp;BaseViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../BaseViewModel'</span>;<font></font>
<font></font>
<span class="hljs-comment">//  ViewModel,    View. </span>
<span class="hljs-comment">//    ,    View</span>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;interface&nbsp;AuthViewModel&nbsp;extends&nbsp;BaseViewModel&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;string;<font></font>
&nbsp;&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;onEmailQueryChanged(loginQuery:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onPasswordQueryChanged(passwordQuery:&nbsp;string):&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onClickSignIn():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
&nbsp;&nbsp;onClickSignOut():&nbsp;<span class="hljs-keyword">void</span>;<font></font>
}</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthViewModelImpl.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;AuthViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./AuthViewModel'</span>;
<span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../view/BaseView'</span>;
<span class="hljs-keyword">import</span>&nbsp;LoginUseCase&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/interactors/auth/LoginUseCase'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/entity/auth/models/AuthHolder'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthListener&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../../domain/entity/auth/models/AuthListener'</span>;
<span class="hljs-keyword">import</span>&nbsp;FormValidator&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../util/FormValidator'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthViewModelImpl</span>&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">AuthViewModel</span>,&nbsp;<span class="hljs-title">AuthListener</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;public&nbsp;emailQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;public&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;public&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;public&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;baseView?:&nbsp;BaseView;<font></font>
&nbsp;&nbsp;private&nbsp;loginUseCase:&nbsp;LoginUseCase;<font></font>
&nbsp;&nbsp;private&nbsp;authHolder:&nbsp;AuthHolder;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(loginUseCase:&nbsp;LoginUseCase,&nbsp;authHolder:&nbsp;AuthHolder)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.emailQuery&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.passwordQuery&nbsp;=&nbsp;<span class="hljs-string">''</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'is&nbsp;not&nbsp;authorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.loginUseCase&nbsp;=&nbsp;loginUseCase;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder = authHolder;<font></font>
<font></font>
    <span class="hljs-comment">//      </span>
    <span class="hljs-keyword">this</span>.authHolder.addAuthListener(<span class="hljs-keyword">this</span>);<font></font>
  }<font></font>
<font></font>
  public attachView = (baseView: BaseView): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.baseView = baseView;<font></font>
  };<font></font>
<font></font>
  public detachView = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">this</span>.baseView = <span class="hljs-literal">undefined</span>;<font></font>
  };<font></font>
<font></font>
  <span class="hljs-comment">//      AuthListener</span>
&nbsp;&nbsp;public&nbsp;onAuthChanged&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
    <span class="hljs-comment">//   ,  View</span>
    <span class="hljs-comment">//      </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.authHolder.isUserAuthorized())&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'authorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">else</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignInButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isSignOutButtonVisible&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authStatus&nbsp;=&nbsp;<span class="hljs-string">'is&nbsp;not&nbsp;autorized'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isAuthStatusPositive&nbsp;=&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onEmailQueryChanged&nbsp;=&nbsp;(loginQuery:&nbsp;string):&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.emailQuery&nbsp;=&nbsp;loginQuery;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onPasswordQueryChanged&nbsp;=&nbsp;(passwordQuery:&nbsp;string):&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.passwordQuery&nbsp;=&nbsp;passwordQuery;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onClickSignIn&nbsp;=&nbsp;<span class="hljs-keyword">async</span>&nbsp;():&nbsp;<span class="hljs-built_in">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.validateLoginForm())&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">try</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">await</span>&nbsp;<span class="hljs-keyword">this</span>.loginUseCase.loginUser(<span class="hljs-keyword">this</span>.emailQuery,&nbsp;<span class="hljs-keyword">this</span>.passwordQuery);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword">catch</span>&nbsp;(e)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;e.message;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.notifyViewAboutChanges();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;onClickSignOut&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
    <span class="hljs-comment">//         </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authHolder.onSignedOut();<font></font>
&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;validateLoginForm&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">boolean</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.emailQuery)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Email&nbsp;cannot&nbsp;be&nbsp;empty'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
    <span class="hljs-comment">//  ,      </span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Email&nbsp;cannot&nbsp;be&nbsp;empty'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!FormValidator.isValidEmail(<span class="hljs-keyword">this</span>.emailQuery))&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Email&nbsp;format&nbsp;is&nbsp;not&nbsp;valid'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Email&nbsp;format&nbsp;is&nbsp;not&nbsp;valid'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(!<span class="hljs-keyword">this</span>.passwordQuery)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">true</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">'Password&nbsp;cannot&nbsp;be&nbsp;empty'</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">false</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.errorMessage&nbsp;===&nbsp;<span class="hljs-string">'Password&nbsp;cannot&nbsp;be&nbsp;empty'</span>)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.isShowError&nbsp;=&nbsp;<span class="hljs-literal">false</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.errorMessage&nbsp;=&nbsp;<span class="hljs-string">''</span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-literal">true</span>;<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;private&nbsp;notifyViewAboutChanges&nbsp;=&nbsp;():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span>&nbsp;(<span class="hljs-keyword">this</span>.baseView)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.baseView.onViewModelChanged();<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;};<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッドに注意して</font></font><code>onClickSignOut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ください。このメソッドでは、AuthHolderクラスを直接参照しています。</font><font style="vertical-align: inherit;">これは、メソッドのロジックが非常に簡単であるため、使用シナリオの形の仲介者が不要になるケースの1つです。</font><font style="vertical-align: inherit;">同様に、リポジトリインターフェースに直接アクセスできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、コードが複雑な場合は、終了するために、別のユースケースに配置する必要があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI（ビュー）</font></font></b><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponent.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'./auth-component.css'</span>;
<span class="hljs-keyword">import</span>&nbsp;BaseView&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../BaseView'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthViewModel&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'../../view-model/auth/AuthViewModel'</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;interface&nbsp;AuthComponentProps&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">authViewModel</span>:&nbsp;AuthViewModel;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;interface&nbsp;AuthComponentState&nbsp;{
&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;string;<font></font>
&nbsp;&nbsp;passwordQuery:&nbsp;string;<font></font>
&nbsp;&nbsp;isSignInButtonVisible:&nbsp;boolean;<font></font>
&nbsp;&nbsp;isSignOutButtonVisible:&nbsp;boolean;<font></font>
<font></font>
&nbsp;&nbsp;isShowError:&nbsp;boolean;<font></font>
&nbsp;&nbsp;errorMessage:&nbsp;string;<font></font>
<font></font>
&nbsp;&nbsp;authStatus:&nbsp;string;<font></font>
&nbsp;&nbsp;isAuthStatusPositive:&nbsp;boolean;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;<span class="hljs-class"><span class="hljs-keyword">class</span>&nbsp;<span class="hljs-title">AuthComponent</span>&nbsp;
  <span class="hljs-keyword">extends</span>&nbsp;<span class="hljs-title">React</span>.<span class="hljs-title">Component</span>&lt;<span class="hljs-title">AuthComponentProps</span>,&nbsp;<span class="hljs-title">AuthComponentState</span>&gt;
&nbsp;&nbsp;<span class="hljs-title">implements</span>&nbsp;<span class="hljs-title">BaseView</span>&nbsp;</span>{<font></font>
&nbsp;&nbsp;private&nbsp;authViewModel:&nbsp;AuthViewModel;<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;<span class="hljs-keyword">constructor</span>(props:&nbsp;AuthComponentProps)&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">super</span>(props);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;{&nbsp;authViewModel&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword">this</span>.props;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel&nbsp;=&nbsp;authViewModel;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.state&nbsp;=&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;authViewModel.emailQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">passwordQuery</span>:&nbsp;authViewModel.passwordQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignInButtonVisible</span>:&nbsp;authViewModel.isSignInButtonVisible,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignOutButtonVisible</span>:&nbsp;authViewModel.isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isShowError</span>:&nbsp;authViewModel.isShowError,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">errorMessage</span>:&nbsp;authViewModel.errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authStatus</span>:&nbsp;authViewModel.authStatus,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isAuthStatusPositive</span>:&nbsp;authViewModel.isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;componentDidMount():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel.attachView(<span class="hljs-keyword">this</span>);<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;componentWillUnmount():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.authViewModel.detachView();<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
  <span class="hljs-comment">//    ViewModel,   </span>
  <span class="hljs-comment">// state  </span>
&nbsp;&nbsp;public&nbsp;onViewModelChanged():&nbsp;<span class="hljs-keyword">void</span>&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">this</span>.setState({
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">emailQuery</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.emailQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">passwordQuery</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.passwordQuery,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignInButtonVisible</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isSignInButtonVisible,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isSignOutButtonVisible</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isShowError</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isShowError,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">errorMessage</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">authStatus</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.authStatus,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isAuthStatusPositive</span>:&nbsp;<span class="hljs-keyword">this</span>.authViewModel.isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;}<font></font>
<font></font>
&nbsp;&nbsp;public&nbsp;render():&nbsp;JSX.Element&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;emailQuery,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passwordQuery,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isSignInButtonVisible,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isSignOutButtonVisible,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isShowError,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorMessage,<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authStatus,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isAuthStatusPositive,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword">this</span>.state;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;flex-grow-1&nbsp;d-flex&nbsp;justify-content-center&nbsp;align-items-center"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="auth-container&nbsp;col&nbsp;bg-white&nbsp;border&nbsp;rounded-lg&nbsp;py-4&nbsp;px-5"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2&nbsp;mb-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status:&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;className={`${isAuthStatusPositive&nbsp;?&nbsp;'text-success'&nbsp;:&nbsp;'text-danger'}`}&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{authStatus}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="text"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder="user@email.com"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange={(e:&nbsp;React.FormEvent&lt;HTMLInputElement&gt;):&nbsp;void&nbsp;=&gt;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.authViewModel.onEmailQueryChanged(e.currentTarget.value);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value={emailQuery}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="form-control"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-2"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="password"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder="password"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange={(e:&nbsp;React.FormEvent&lt;HTMLInputElement&gt;):&nbsp;void&nbsp;=&gt;&nbsp;{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.authViewModel.onPasswordQueryChanged(e.currentTarget.value);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value={passwordQuery}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="form-control"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isShowError&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;my-3&nbsp;text-danger&nbsp;justify-content-center"&gt;{errorMessage}&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isSignInButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="button"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="col&nbsp;btn&nbsp;btn-primary"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick={():&nbsp;void&nbsp;=&gt;&nbsp;this.authViewModel.onClickSignIn()}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sign&nbsp;in<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{isSignOutButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;className="row&nbsp;mt-4"&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type="button"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className="col&nbsp;btn&nbsp;btn-primary"<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick={():&nbsp;void&nbsp;=&gt;&nbsp;this.authViewModel.onClickSignOut()}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sign&nbsp;out<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/button&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
&nbsp;&nbsp;}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコンポーネントはフレームワークに依存しているため、ダイアグラムの非常に極端なレイヤーにあります。</font><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">）を</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マウント</font></font></i><font style="vertical-align: inherit;"></font><code>componentDidMount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すると、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">AuthViewModelに</font></i><font style="vertical-align: inherit;">接続し、</font><font style="vertical-align: inherit;">（</font></font><code>componentWillUnmount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が</font><font style="vertical-align: inherit;">消えると</font><i><font style="vertical-align: inherit;">分離</font></i><font style="vertical-align: inherit;">し</font><font style="vertical-align: inherit;">ます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ViewModel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が変わるたびに</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AuthComponentは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その状態を更新してマークアップをさらに更新します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
状態に応じた条件付きレンダリングに注意してください：</font></font><br>
<br>
<pre><code class="javascript hljs"><font></font>
{isSignOutButtonVisible&nbsp;&amp;&amp;&nbsp;(<font></font>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"row&nbsp;mt-4"</span>&gt;</span>
&nbsp;&nbsp;  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"col&nbsp;btn&nbsp;btn-primary"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onClick</span>=<span class="hljs-string">{():</span>&nbsp;<span class="hljs-attr">void</span>&nbsp;=&gt;</span>&nbsp;this.authViewModel.onClickSignOut()}
&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;  Sign&nbsp;out
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
)}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
値を渡すためにViewModelメソッドを呼び出すだけでなく：</font></font><br>
<br>
<pre><code class="javascript hljs">onClick={():&nbsp;<span class="hljs-function"><span class="hljs-params">void</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword">this</span>.authViewModel.onClickSignOut()}</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エントリポイントは</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
、アプリケーションを入力するには、我々は使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.tsx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsxファイルを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;ReactDOM&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'bootstrap/dist/css/bootstrap.css'</span>;<font></font>
<font></font>
<span class="hljs-keyword">import</span>&nbsp;App&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span>&nbsp;*&nbsp;<span class="hljs-keyword">as</span>&nbsp;serviceWorker&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./serviceWorker'</span>;<font></font>
<font></font>
ReactDOM.render(<font></font>
&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.StrictMode</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">App</span>&nbsp;/&gt;</span>
&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">React.StrictMode</span>&gt;</span></span>,
&nbsp;&nbsp;<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>),<font></font>
);<font></font>
<font></font>
serviceWorker.unregister();<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsx</font></font></i><br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-keyword">import</span>&nbsp;React&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span>&nbsp;<span class="hljs-string">'./app.css'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthComponent&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./presentation/view/auth/AuthComponent'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthViewModelImpl&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./presentation/view-model/auth/AuthViewModelImpl'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthFakeApi&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./data/auth/AuthFakeApi'</span>;
<span class="hljs-keyword">import</span>&nbsp;LoginUseCase&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./domain/interactors/auth/LoginUseCase'</span>;
<span class="hljs-keyword">import</span>&nbsp;AuthHolder&nbsp;<span class="hljs-keyword">from</span>&nbsp;<span class="hljs-string">'./domain/entity/auth/models/AuthHolder'</span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span>&nbsp;<span class="hljs-title">App</span>(<span class="hljs-params"></span>):&nbsp;<span class="hljs-title">JSX</span>.<span class="hljs-title">Element</span>&nbsp;</span>{
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;data&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;domain&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authHolder&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthHolder();
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;loginUseCase&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;LoginUseCase(authRepository,&nbsp;authHolder);
&nbsp;&nbsp;<span class="hljs-comment">//&nbsp;view&nbsp;layer</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span>&nbsp;authViewModel&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthViewModelImpl(loginUseCase,&nbsp;authHolder);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&nbsp;<span class="hljs-attr">className</span>=<span class="hljs-string">"app-container&nbsp;d-flex&nbsp;container-fluid"</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">AuthComponent</span>&nbsp;<span class="hljs-attr">authViewModel</span>=<span class="hljs-string">{authViewModel}</span>&nbsp;/&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span>&nbsp;<span class="hljs-keyword">default</span>&nbsp;App;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての依存関係が初期化さ</font><font style="vertical-align: inherit;">
れるのは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.tsx</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルです</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このアプリケーションでは、コードを不必要に複雑にしないように、依存性注入ツールを使用していません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
依存関係を変更する必要がある場合は、このファイルで置き換えます。</font><font style="vertical-align: inherit;">たとえば、次の行の代わりに：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
書く：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、特定の実装ではなくインターフェイスのみを使用していることにも注意してください（すべて抽象化に基づいています）。</font><font style="vertical-align: inherit;">変数を宣言する場合、次のことを意味します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span>&nbsp;authRepository: AuthRepository&nbsp;=&nbsp;<span class="hljs-keyword">new</span>&nbsp;AuthFakeApi();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、実装の詳細を非表示にすることができます（インターフェースを変更せずに後で置換するため）。</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.結論</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
この記事を読むことで、クリーンアーキテクチャをReact（プロジェクトだけでなく）に適用する方法を理解でき、私たちの経験がアプリケーションの改善に役立つことを願っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、フロントエンドプロジェクトでThe Clean Architectureを使用する理論的および実用的な基本について説明しました。前述のように、クリーンアーキテクチャは、アーキテクチャの構築方法に関する推奨事項のみを提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記は、このアーキテクチャを使用する単純なアプリケーションの例です。</font><font style="vertical-align: inherit;">アプリケーションが大きくなるとアーキテクチャが変わる可能性があるため、上記のコードは万能薬ではないことに注意してください（冒頭で述べたように）。この記事は、私たちの経験の一部にすぎません。</font></font><br>
<br>
<u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.リソース</font></font></b></u><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコード</font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UML図</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja499064/index.html">統計的言語モデルを使用した代替の文脈理解</a></li>
<li><a href="../ja499068/index.html">点群変換パラメーターの定義</a></li>
<li><a href="../ja499070/index.html">ПШЕAndroidStudioまたはVCSツールを最大限に使用する方法</a></li>
<li><a href="../ja499074/index.html">symfony 5バンドルでコードを再利用する方法は？パート4.ホストバンドル拡張</a></li>
<li><a href="../ja499076/index.html">symfony 5バンドルでコードを再利用する方法は？パート5.構成</a></li>
<li><a href="../ja499082/index.html">鷲フクロウの手紙</a></li>
<li><a href="../ja499086/index.html">Daskホームクラスター</a></li>
<li><a href="../ja499088/index.html">メディアクエリのない柔軟なマークアップ：最小（）、最大（）、クランプ（）関数</a></li>
<li><a href="../ja499090/index.html">コンソールコマンドの複雑化、1979-2020</a></li>
<li><a href="../ja499092/index.html">参照モデルBIAN。銀行の企業アーキテクチャにとって、新しくて便利なものは何ですか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>