<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง๐ฟโ๐คโ๐ง๐ฝ ๐ ๐ค ุฎูู roguelike ูู ุงููุญุฏุฉ ูู ุงูุตูุฑ: ูููุฏ ุงููุญุตูุฉ ๐คฎ ๐๐ฟ ๐ฅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฐู ุงููุฑุฉ ุณูู ูุบุฑู ูู ุชูููุฐ ุฎูุงุฑุฒููุฉ ูููุฏ ุงููุญุตูุฉ. ูู ุงูููุงูุฉ ุงูุฃุฎูุฑุฉ ุ ุฃูุดุฃูุง ุงูุบุฑูุฉ ุงูุฃููู ุ ูุงูุขู ุณููุดุฆ ูุง ุชุจูู ูู ูุณุชูู ุงููุญุตูุฉ. 
 
 ูููู ูุจู ุฃู ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุฎูู roguelike ูู ุงููุญุฏุฉ ูู ุงูุตูุฑ: ูููุฏ ุงููุญุตูุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495588/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09d/9af/aac/09d9afaace836ef3bde082e3d63c580a.png" alt="ุตูุฑุฉ"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐู ุงููุฑุฉ ุณูู ูุบุฑู ูู ุชูููุฐ ุฎูุงุฑุฒููุฉ ูููุฏ ุงููุญุตูุฉ. ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงูุฉ ุงูุฃุฎูุฑุฉ ุ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃูุดุฃูุง ุงูุบุฑูุฉ ุงูุฃููู ุ ูุงูุขู ุณููุดุฆ ูุง ุชุจูู ูู ูุณุชูู ุงููุญุตูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุจู ุฃู ูุจุฏุฃ ุ ุฃูุฏ ุฅุตูุงุญ ุฎุทุฃ ูู ูุดุงุฑูุฉ ุณุงุจูุฉ. ูู ุงููุงูุน ุ ุชุนููุช ูู ุงูุฃุณุงุจูุน ุงูุฃุฎูุฑุฉ ุดูุฆูุง ุฌุฏูุฏูุง ุ ููุฐุง ูู ุงูุณุจุจ ูู ุฃู ุจุนุถ ุงูุนูู ุงูุฐู ููุช ุจู ุฃุตุจุญ ูุฏูููุง ุ ูุฃุฑูุฏ ุงูุชุญุฏุซ ุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุชุชุฐูุฑ ูุฆุฉ ุงููุฑูุฒ ุงูุชู ุฃูุดุฃูุงูุงุ ูู ุงููุงูุน ุ ุชุญุชูู Unity ุจุงููุนู ุนูู ูุฆุฉ ูุฏูุฌุฉ ุชุคุฏู ููุณ ุงููุธุงุฆู ุชูุงููุง ุ ูููู ูุน ุชุญูู ุฃูุถู ููููุงู - ูู ุงูุณูู ุงูุฅุนูุงู ูุงููุนุงูุฌุฉ. ุชุณูู ูุฐู ุงููุฆุฉ Vector2Int. ูุฐูู ุ ูุจู ุงูุจุฏุก ุ ุณูููู ุจุฅุฒุงูุฉ ูุฆุฉ Position ูู MapManager.cs ูุงุณุชุจุฏุงู ูู ูุชุบูุฑ Position ุจูุชุบูุฑ Vector2Int.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/656/b7d/f40/656b7df4053976af99cbd2d359edd494.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุจ ุงูููุงู ุจููุณ ุงูุดูุก ูู ุนุฏุฉ ุฃูุงูู ูู ุงูุจุฑูุงูุฌ ุงููุตู DungeonGenerator.cs. </font><font style="vertical-align: inherit;">ุงูุขู ุฏุนูุง ููุฒู ุฅูู ุจููุฉ ุงูุฎูุงุฑุฒููุฉ.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุญูุฉ 7 - ุชูููุฏ ุงูุบุฑูุฉ / ุงููุงุนุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุณูุจุฏุฃ ุจุชุบููุฑ ุจุณูุท ุนูู ุงููุธููุฉ FirstRoom () ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฅูุดุงุก ูุธููุฉ ุฃุฎุฑู ูุฅูุดุงุก ุฌููุน ุงูุนูุงุตุฑ ุงูุฃุฎุฑู ููุฎุฑูุทุฉ ูุชูุฑุงุฑ ูุฌููุนุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูููู ุจุจุณุงุทุฉ ุจุชุญููู ูุฐู ุงููุธููุฉ ุ ูุชุญููููุง ุฅูู GenerateFeature () ุนุงู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุจุชุบููุฑ ุงูุงุณู ูู FirstRoom ุฅูู GenerateFeature. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุณูุญุชุงุฌ ูุชูุฑูุฑ ุงููุนููุงุช ููุฐู ุงููุธููุฉ. </font><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุงููุธููุฉ ุงูุชู ุชููุฏูุง - ุบุฑูุฉ ุฃู ููุฑ. </font><font style="vertical-align: inherit;">ูููููุง ููุท ุชูุฑูุฑ ุณูุณูุฉ ุชุณูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุน</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุงููุธููุฉ ุฅูู ูุนุฑูุฉ ููุทุฉ ุงูุจุฏุงูุฉ ููุนูุตุฑ ุ ุฃู ูู ุฃู ุฌุฏุงุฑ ูุฃุชู ููู (ูุฃููุง ุฏุงุฆููุง ููุดุฆ ุนูุตุฑูุง ุฌุฏูุฏูุง ูู ุฌุฏุงุฑ ุงูุนูุตุฑ ุงูุฃูุฏู) ุ ูููุฐุง ุงูุณุจุจ ุ ูุฅู ุญุฌุฉ ุงูุฌุฏุงุฑ ูุงููุฉ. </font><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ุชุญุชูู ุงูุบุฑูุฉ ุงูุฃููู ุงูุชู ูุชู ุฅูุดุงุคูุง ุนูู ุฎุตุงุฆุต ุฎุงุตุฉ ุ ูุฐูู ูุญุชุงุฌ ุฅูู ูุชุบูุฑ ููุทูู ุงุฎุชูุงุฑู ูุฎุจุฑูุง ูุง ุฅุฐุง ูุงู ุงูุนูุตุฑ ูู ุงูุบุฑูุฉ ุงูุฃููู. </font><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ ูุฅูู ุฎุทุฃ: bool isFirst = false. </font><font style="vertical-align: inherit;">ูุฐุง ุณูุชุบูุฑ ุนููุงู ุงููุธููุฉ ูู ูุฐุง:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5f/b79/d17/e5fb79d178098b3bcde238ff733f9ca9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ูุฐุง:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/45e/124/afc/45e124afc4b4f60b12ab18deaa060719.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุบุฑุงูุฉ. </font><font style="vertical-align: inherit;">ูุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุชุบููุฑ ุทุฑููุฉ ุญุณุงุจ ุนุฑุถ ุงูุนูุตุฑ ูุงุฑุชูุงุนู. </font><font style="vertical-align: inherit;">ุจูููุง ูุญุณุจูุง ุ ูุญุตู ุนูู ูููุฉ ุนุดูุงุฆูุฉ ุจูู ุงูููู ุงูุฏููุง ูุงููุตูู ูุงุฑุชูุงุน ูุนุฑุถ ุงูุบุฑู - ูุฐุง ูุซุงูู ููุบุฑู ุ ูููู ูู ูุนูู ูู ุงูููุฑุงุช. </font><font style="vertical-align: inherit;">ุญุชู ุงูุขู ูุฏููุง ูุง ููู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f5/c0d/976/2f5c0d9765a596c2d2188b56b1f7b7ff.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุงูููุฑุงุช ุณูููู ููุง ุญุฌู ุซุงุจุช ูุจูุบ 3 ูู ุงูุนุฑุถ ุฃู ุงูุงุฑุชูุงุน ุ ุงุนุชูุงุฏูุง ุนูู ุงูุงุชุฌุงู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุงูุนูุตุฑ - ุบุฑูุฉ ุฃู ููุฑ ุ ุซู ุฅุฌุฑุงุก ุงูุญุณุงุจุงุช ุงูููุงุณุจุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/071/163/df8/071163df82fc248fc92d370672369743.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุงูุชุงูู. </font><font style="vertical-align: inherit;">ูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุนูุตุฑ ุนุจุงุฑุฉ ุนู ุบุฑูุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูุฅุฌุงุจุฉ ุจูุนู ุ ูุฅููุง ููุนู ููุณ ุงูุดูุก ููุง ูุงู ูู ูุจู </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - ูุญุตู ุนูู ุฑูู ุนุดูุงุฆู ูู ุงููุชุฑุฉ ุงููุงุตูุฉ ุจูู ุงูุญุฏ ุงูุฃุฏูู ูุงูุญุฏ ุงูุฃูุตู ููุงุฑุชูุงุน ูุงูุนุฑุถ. </font><font style="vertical-align: inherit;">ูููู ุงูุขู ูู ููุงู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขุฎุฑ ูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณ ุงูุดูุก ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุดูุก ูุฎุชูู ููููุงู. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุงุชุฌุงู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ุนูุฏ ุฅูุดุงุก ุฌุฏุงุฑ ุ ูููู ุจุญูุธ ุงููุนูููุงุช ุญูู ุงูุงุชุฌุงู ุงูุฐู ูุชู ุชูุฌููู ุฅููู ุ ูุฐูู ูุณุชุฎุฏูู ููุญุตูู ุนูู ุงุชุฌุงู ุงูููุฑ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/91a/a84/328/91aa84328140d1414b8512843e1cd397.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููููุง ูู ูุนูู ุจุนุฏ minCorridorLength ุงููุชุบูุฑ. </font><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุงูุนูุฏุฉ ุฅูู ุงูุฅุนูุงูุงุช ุงููุชุบูุฑุฉ ูุงูุฅุนูุงู ุนููุง ุ ูุจุงุดุฑุฉ ููู maxCorridorLength.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f13/857/6e1/f138576e1dc1cb4a9949fd51e8c5fe47.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูุฏ ุงูุขู ุฅูู ุนุจุงุฑุงุช ุงูุชุจุฏูู ุงูุดุฑุทู. </font><font style="vertical-align: inherit;">ูุง ูููู ุจู ููุง: ูุญุตู ุนูู ูููุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุฌุงู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฏุงุฑ ุ ุฃู ุญูุซ ููุธุฑ ุงูุฌุฏุงุฑ ุ ุงูุฐู ุณูุฐูุจ ููู ุงูููุฑ. </font><font style="vertical-align: inherit;">ูููู ุฃู ูููู ููุงุชุฌุงู ุฃุฑุจุน ููู ููููุฉ ููุท: ุงูุฌููุจ ูุงูุดูุงู ูุงูุบุฑุจ ูุงูุดุฑู. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุงูุฌููุจ ูุงูุดูุงู ุ ุณูููู ุนุฑุถ ุงูููุฑ 3 (ุฌุฏุงุฑูู ูุฃุฑุถูุฉ ูู ุงูููุชุตู) ูุงุฑุชูุงุน ูุชุบูุฑ (ุงูุทูู). </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููุบุฑุจ ูุงูุดุฑู ุ ุณูููู ูู ุดูุก ูู ุงูุงุชุฌุงู ุงููุนุงูุณ: ุณูููู ุงูุงุฑุชูุงุน ุฏุงุฆููุง 3 ุ ูุณูููู ุงูุนุฑุถ ูุชุบูุฑูุง ูู ุงูุทูู. </font><font style="vertical-align: inherit;">ูููุนููุง ุงุฐุง.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e2/175/8d6/0e21758d6d2e17406ce516c3fef6ccf5.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑุงุฆุน. </font><font style="vertical-align: inherit;">ูููุง ุงูุชูู ุงูุฃูุฑ ุจุชุบููุฑ ุญุฌู ุงูุนูุตุฑ ุงูุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ุงูุขู ุนููู ุฃู ุชูุฑุฑ ุฃูู ุชุถุนู. </font><font style="vertical-align: inherit;">ูุถุนูุง ุงูุบุฑูุฉ ุงูุฃููู ูู ููุงู ุนุดูุงุฆู ุถูู ููู ุงูุนุชุจุฉ ุจุงููุณุจุฉ ููุฑูุฒ ุงูุฎุฑูุทุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fb/d53/010/6fbd5301066f6b0ba77ab90142370a5d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุจุงููุณุจุฉ ูุฌููุน ุงูุนูุงุตุฑ ุงูุฃุฎุฑู ุ ูู ููุฌุญ ุฐูู. ูุฌุจ ุฃู ุชุจุฏุฃ ุจุฌุงูุจ ุงูููุทุฉ ุงูุนุดูุงุฆูุฉ ุนูู ุงูุญุงุฆุท ุงูุชู ูุชู ุฅูุดุงุก ุงูุนูุตุฑ ูููุง. ูุฐุง ุฏุนูุง ูุบูุฑ ุงูููุฏ. ุฃููุงู ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุนูุตุฑ ูู ุงูุบุฑูุฉ ุงูุฃููู. ุฅุฐุง ูุงูุช ูุฐู ูู ุงูุบุฑูุฉ ุงูุฃููู ุ ูุฅููุง ูุญุฏุฏ ููุงุท ุงูุจุฏุงูุฉ ุจููุณ ุงูุทุฑููุฉ ุงูุณุงุจูุฉ - ูุตู ุนุฑุถ ุงูุฎุฑูุทุฉ ูุงุฑุชูุงุนูุง.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff3/d29/44d/ff3d2944da973a48200a6c9c3066d20d.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู </font><font style="vertical-align: inherit;">ุญุงูุฉ ุฃุฎุฑู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ูู ููู ุงูุนูุตุฑ ูู ุงูุบุฑูุฉ ุงูุฃููู ุ ูุฅููุง ูุญุตู ุนูู ููุทุฉ ุนุดูุงุฆูุฉ ุนูู ุงูุฌุฏุงุฑ ุงูุฐู ูุชู ุฅูุดุงุก ุงูุนูุตุฑ ููู. ุฃููุงู ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ูุงู ููุฌุฏุงุฑ ุญุฌู 3 (ููุฐุง ูุนูู ุฃูู ููุทุฉ ุงูููุงูุฉ ููููุฑ) ุ ูุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ูุณูุชู ุชุญุฏูุฏ ุงูููุทุฉ ุงููุณุทู ุฏุงุฆููุง ุ ุฃู ุงููุคุดุฑ 1 ูู ูุฌููุนุฉ ุงูุฌุฏุงุฑ (ูุน 3 ุนูุงุตุฑ ุ ูุฅู ุงููุตูููุฉ ูุฏููุง ุงูููุงุฑุณ 0 ุ 1 ุ 2). ูููู ุฅุฐุง ูุงู ุงูุญุฌู ูุง ูุณุงูู 3 (ุงูุฌุฏุงุฑ ููุณ ููุทุฉ ุงูููุงูุฉ ููููุฑ) ุ ูุฅููุง ูุฃุฎุฐ ููุทุฉ ุนุดูุงุฆูุฉ ูู ุงููุชุฑุฉ ุงููุงุตูุฉ ุจูู ุงูููุทุฉ 1 ูุทูู ุงูุฌุฏุงุฑ ูุงูุต 2. ูุฐุง ุถุฑูุฑู ูุชุฌูุจ ุงูููุฑุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุงูุฒุงููุฉ. ุฃู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูู ุฌุฏุงุฑ ุจุทูู 6 ุ ูุณุชุจุนุฏ ุงูููุงุฑุณ 0 ู 5 (ุงูุฃูู ูุงูุฃุฎูุฑ) ุ ููุฎุชุงุฑ ููุทุฉ ุนุดูุงุฆูุฉ ุจูู ุงูููุงุท 1 ู 2 ู 3 ู 4.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee2/4e1/703/ee24e1703c28b4cfa96e98d84a76c790.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุฏููุง ูููุน ุงูููุทุฉ ุนูู ุงูุญุงุฆุท ุญูุซ ุณูุชู ุฅูุดุงุก ุนูุตุฑ ุฌุฏูุฏ. ูููู ูุง ูููููุง ููุท ุงูุจุฏุก ูู ุชูููุฏ ุนูุตุฑ ูู ููุงู ุ ูุฃูู ุจูุฐู ุงูุทุฑููุฉ ุณูุชู ุญุธุฑู ุจูุงุณุทุฉ ุงูุฌุฏุฑุงู ุงูููุถูุนุฉ ุจุงููุนู. ูู ุงูููู ุฃูุถูุง ููุงุญุธุฉ ุฃู ุงูุนูุตุฑ ูุจุฏุฃ ูู ุชูููุฏู ูู ุงูุฒุงููุฉ ุงูุณูููุฉ ุงููุณุฑู ุ ุซู ูุชู ุชูููุฐ ุงูุฒูุงุฏุฉ ุฅูู ุงููููู ูุฃุนูู ุ ูุฐูู ูุฌุจ ุนูููุง ุถุจุท ููุถุน ุงูุจุฏุก ูู ุฃูุงูู ูุฎุชููุฉ ุ ุงุนุชูุงุฏูุง ุนูู ุงูุงุชุฌุงู ุงูุฐู ููุธุฑ ููู ุงูุฌุฏุงุฑ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูููู ุงูุนููุฏ ุงูุฃูู x ูุงูุตู ุงูุฃูู y ุนุจุงุฑุฉ ุนู ุฌุฏุฑุงู ุ ูุฅุฐุง ุจุฏุฃูุง ุนูุตุฑูุง ุฌุฏูุฏูุง ุจุฌูุงุฑ ููุทุฉ ุนูู ุงูุญุงุฆุท ูุจุงุดุฑุฉ ุ ููููููุง ุฅูุดุงุก ููุฑ ููุชูู ูู ุฒุงููุฉ ุงูุบุฑูุฉ ุ ูููุณ ูู ููุงู ููุงุณุจ ุนูู ุงูุญุงุฆุท.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐูู ุ ุฅุฐุง ุชู ุชูุฌูู ุงูุฌุฏุงุฑ ุฅูู ุงูุดูุงู ุ ููู ุงูุถุฑูุฑู ุฃู ูุจุฏุฃ ุงูุนูุตุฑ ูู ููุถุน ูุงุญุฏ ุฅูู ุงูุดูุงู ุนูู ุทูู ุงููุญูุฑ y ุ ูููู ูู ุนุฏุฏ ุนุดูุงุฆู ูู ุงูููุงุถุน ุฅูู ุงูุบุฑุจ ุนูู ุทูู ุงููุญูุฑ x ุ ูู ุงููุทุงู ูู 1 ุฅูู ุนุฑุถ ุงูุบุฑูุฉ -2. </font><font style="vertical-align: inherit;">ูู ุงูุงุชุฌุงู ุงูุฌููุจู ุ ูุนูู ุงููุญูุฑ x ุจููุณ ุงูุทุฑููุฉ ุ ูููู ููุถุน ุงูุจุฏุก ุนูู ุงููุญูุฑ y ูู ููุถุน ุงูููุทุฉ ุนูู ุงูุญุงุฆุท ูุงูุต ุงุฑุชูุงุน ุงูุบุฑูุฉ. </font><font style="vertical-align: inherit;">ุชุชุจุน ุงูุฌุฏุฑุงู ุงูุบุฑุจูุฉ ูุงูุดุฑููุฉ ููุณ ุงูููุทู ุ ููุท ูุน ูุญุงูุฑ ููููุจุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุจู ุงูููุงู ุจูู ูุฐุง ุ ูุญุชุงุฌ ุฅูู ุญูุธ ููุถุน ููุทุฉ ุงูุฌุฏุงุฑ ูู ูุชุบูุฑ Vector2Int ุญุชู ูุชููู ูู ูุนุงูุฌุชูุง ูุงุญููุง.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/374/129/41a/37412941a3a58f32fd2dd38c1fc2c252.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุธูู. </font><font style="vertical-align: inherit;">ูููุนู ุฐูู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/140/2c7/ec0/1402c7ec0596d77f9a9b70b5eac076a9.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุฃูุดุฃูุง ุนูุตุฑูุง ุจุงูุญุฌู ูุงูููุถุน ุ ูุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ูุถุน ุงูุนูุตุฑ ุนูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูููู ุฃููุงู ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ููุงู ุจุงููุนู ูุณุงุญุฉ ุนูู ุงูุฎุฑูุทุฉ ููุฐุง ุงูุนูุตุฑ ูู ูุฐุง ุงูููุถุน. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ูุณูู ููุท ุฏุงูุฉ CheckIfHasSpace (). </font><font style="vertical-align: inherit;">ุณูุชู ุชูููุฒู ุจุงูููู ุงูุฃุญูุฑ ุ ูุฃููุง ูู ูููุฐู ุจุนุฏ. </font><font style="vertical-align: inherit;">ุณููุนู ุฐูู ูุจุงุดุฑุฉ ุจุนุฏ ุงูุงูุชูุงุก ูู ูุง ูุฌุจ ุงูููุงู ุจู ููุง ูู ุฏุงูุฉ GenerateFeature (). </font><font style="vertical-align: inherit;">ูุฐูู ุ ุชุฌุงูู ุงูุชุณุทูุฑ ุงูุฃุญูุฑ ูุงุณุชูุฑ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b20/805/942/b2080594237c23cae023cabb20b2d20e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฌุฒุก ุงูุชุงูู ุ ูุชู ุฅูุดุงุก ุงูุฌุฏุฑุงู. </font><font style="vertical-align: inherit;">ุญุชู ููุญู ุนูู ุงุชุตุงู ุจูุ ุจุงุณุชุซูุงุก ุฌุฒุก ูู ุงูุซุงููุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญููุฉ </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/227/d7f/e2b/227d7fe2bf3c2eef41f423e36b4afc79.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุซูุงุก ูุชุงุจุฉ ูุฐุง ุงูููุดูุฑ ุ ูุงุญุธุช ุฃู ูุฐู ุงูุชุฑููุจุงุช ุฅุฐุง ูุงูุช ุบูุฑ ุตุญูุญุฉ ุฎุงุทุฆุฉ ุชูุงููุง. ุนูู ุณุจูู ุงููุซุงู ุ ุณุชุญุตู ุจุนุถ ุงูุฌุฏุฑุงู ูููุง ุนูู ุทูู 1. ูุญุฏุซ ูุฐุง ูุฃูู ุนูุฏูุง ูุชู ุฅุถุงูุฉ ุงููููุน ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅูู ุงูุฌุฏุงุฑ ุงูุดูุงูู ุ ุฅุฐุง ูุงู ูู ุงูุฒุงููุฉ ูุน ุงูุฌุฏุงุฑ ุงูุดุฑูู ุ ููู ูุชู ุฅุถุงูุชู ุฅูู ุงูุฌุฏุงุฑ ุงูุดุฑูู ุ ููุง ูุฌุจ. ุชุณุจุจ ูุฐุง ูู ุฃุฎุทุงุก ูุฒุนุฌุฉ ูู ุฎูุงุฑุฒููุฉ ุงูุชูููุฏ. ุฏุนููุง ุงููุถุงุก ุนูููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุตูุงุญูุง ุจุณูุท ููุบุงูุฉ. ูููู ุฅุฒุงูุฉ ูู ุดูุก </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขุฎุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุซ ููุฑ ุงูููุถุน ูู ุฎูุงู ุฌููุน ุจูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุง ูุชููู ุนูุฏ ุงูุจุฏุงูุฉ ุฅุฐุง ุนุงุฏ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตุญูุญูุง</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุซู ูุชู ุชุบููุฑ ุขุฎุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขุฎุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุงูุฐู ููุณ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขุฎุฑ ุฅุฐุง</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุงูุฐู ูุชุญูู ูู ุฃู ุงููููุน ูุฏ ุชู ุฅุถุงูุชู ุจุงููุนู ูุญุงุฆุท ุ ูุฅุฐุง ูู ููู ูุฐูู ุ ููู ุจุฅุถุงูุชู ุนูู ุฃูู ุทุงุจู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65c/784/834/65c784834461a2d8b05d1d39dd9ee44c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฏูุด ุ ููุฏ ุงูุชูููุง ุชูุฑูุจุง ููุง. </font><font style="vertical-align: inherit;">ุงูุขู ูุฏููุง ุนูุตุฑ ุฌุฏูุฏ ุชูุงููุง ุ ุชู ุฅูุดุงุคู ูู ุงูููุงู ุงูุตุญูุญ ุ ููููู ูู ููุณู ูุซู ุงูุบุฑูุฉ ุงูุฃููู: ููู ูุญุงุท ุจุงููุงูู ุจุงูุฌุฏุฑุงู. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃู ุงููุงุนุจ ูู ูุชููู ูู ุงููุตูู ุฅูู ูุฐุง ุงูููุงู ุงูุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ุฃู ุฃููุง ุจุญุงุฌุฉ ุฅูู ุชุญููู ููุทุฉ ุนูู ุงูุญุงุฆุท (ูุงูุชู ุ ููุง ูุฐูุฑ ุ ูุชู ุชุฎุฒูููุง ูู ูุชุบูุฑ ูู ููุน Vector2Int) ูุงูููุทุฉ ุงูููุงุจูุฉ ุนูู ุงูุญุงุฆุท ูุนูุตุฑ ุฌุฏูุฏ ูู Floor. </font><font style="vertical-align: inherit;">ูููู ููุท ุนูุฏูุง ูุง ูููู ุงูุนูุตุฑ ูู ุงูุบุฑูุฉ ุงูุฃููู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/350/67f/5ac/35067f5ac7db26fd304578b8dd53326c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชุญูู ูุฐุง ุงูุฌุฒุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงูุนูุตุฑ ุงูุฌุฏูุฏ ูู ุงูุบุฑูุฉ ุงูุฃููู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ูุฅูู ูุญูู ุงูููุถุน ุงูุฃุฎูุฑ ููุฌุฏุงุฑ ุฅูู ุงูุฃุฑุถ ุ ุซู ูุชุญูู ูู ุงูุงุชุฌุงู ุงูุฐู ูุชุทูุน ุฅููู ุงูุฌุฏุงุฑ ููุชุญูู ูู ุจูุงุท ุงูุนูุตุฑ ุงูุฌุฏูุฏ ุงูุฐู ูุฌุจ ุฃู ูุชุญูู ุฅูู ุงูุฃุฑุถ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ูุตููุง ุฅูู ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุฏุงูุฉ GenerateFeature (). </font><font style="vertical-align: inherit;">ูุฏููุง ุจุงููุนู ุฎุทูุท ุชุถูู ูุนูููุงุช ุญูู ุงูุนูุตุฑ ุงูุฐู ุชูุดุฆู ุงููุธููุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fe/165/626/4fe165626aca42951f86568a4d6649c7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุญุชุงุฌ ุฅูู ุชุบููุฑ ุดูุก ูุง. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ููุน ุงูุนูุตุฑ ูุง ูุณุงูู ุฏุงุฆููุง ุงูุบุฑูุฉ. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูุชู ุชูุฑูุฑ ุงููุชุบูุฑ ุงููุทููุจ ุฅูู ุงููุธููุฉ ููุนููุฉ ุ ููู ุณูุณูุฉ ุงูููุน. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนูุง ูุณุชุจุฏู "Room" ููุง ุจุงูููุน.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b57/d12/f17/b57d12f17802ec40e0c609d26803f661.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณู. </font><font style="vertical-align: inherit;">ุงูุขู ุ ููู ุชุนูู ุงูุฎูุงุฑุฒููุฉ ุงูุชู ุชููุฏ ุฌููุน ุนูุงุตุฑ ุงููุนุจุฉ ุจุดูู ุตุญูุญ ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ููุง. </font><font style="vertical-align: inherit;">ููู int ุชุญุณุจ ุนุฏุฏ ุงูุนูุงุตุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ููุงุฆูุฉ ุจุฌููุน ุงูุนูุงุตุฑ ุงูุชู ุชู ุฅูุดุงุคูุง. </font><font style="vertical-align: inherit;">ููุชูู ุฅูู ุงูููุงู ุงูุฐู ูุนูู ููู ุฌููุน ุงููุชุบูุฑุงุช ููุนูู int ูุน ุงุณู countFeatures ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุงุฆูุฉ ุจุงูุนูุงุตุฑ ุงูุชู ุชุญูู ุงุณู allFeatures. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ูุงุฆูุฉ ุฌููุน ุงูุนูุงุตุฑ ุนุงูุฉ ุ ููููู ุฃู ูููู ุนุฏุงุฏ int ุฎุงุตูุง.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bcb/ebf/8dd/bcbebf8ddbc768864ba70331317cc72c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนุฏ ุงูุขู ุฅูู ุฏุงูุฉ GenerateFeature () ูุฃุถู ุจุถุนุฉ ุฃุณุทุฑ ุฅูู ุงูููุงูุฉ: ุฒูุงุฏุฉ ูุชุบูุฑ countFeatures ูุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ ุฅูู ูุงุฆูุฉ allFeatures.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5e6/8a8/496/5e68a8496d7047c87650a609acb912cf.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ุงูุชูู ุฅูุดุงุก GenerateFeature (). </font><font style="vertical-align: inherit;">ุณูุญุชุงุฌ ูุงุญููุง ุฅูู ุงูุฑุฌูุน ุฅูููุง ูููุก ูุธููุฉ CheckIfHasSpace ุงููุงุฑุบุฉ ุ ูููููุง ูุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุฆูุง. </font><font style="vertical-align: inherit;">ูุฐุง ูุง ุณููุนูู ุงูุขู.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุญูุฉ 8 - ุชุญูู ููุง ุฅุฐุง ูุงู ููุงู ููุงู</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนูุง ููุดุฆ ูุธููุฉ ุฌุฏูุฏุฉ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุชูุงู ูุธููุฉ GenerateFeature (). ุฅููุง ุชุญุชุงุฌ ุฅูู ุญุฌุชูู: ุงูููุถุน ุงูุฐู ูุจุฏุฃ ููู ุงูุนูุตุฑ ุ ูุงูููุถุน ุงูุฐู ููุชูู ุนูุฏู. ููููู ุงุณุชุฎุฏุงู ูุชุบูุฑูู Vector2Int ููุงููุง. ูุฌุจ ุฃู ุชูุฑุฌุน ุงูุฏุงูุฉ ูููุฉ ููุทููุฉ ุญุชู ูููู ุงุณุชุฎุฏุงููุง ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุงูุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญูู ูู ูุฌูุฏ ูุณุงุญุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/998/f03/cad/998f03cad9a6bd8a05bd7d8b9658bad6.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุชุณุทูุฑู ุจุงูููู ุงูุฃุญูุฑ ุ ูุฃูู ูู ูุฑุฏ ุฃู ุดูุก ุญุชู ุงูุขู. ุณูููู ุจุฅุตูุงุญู ูุฑูุจูุง ุ ูููู ูู ุงูููุช ุงูุญุงูู ูู ููุชู. ูู ูุฐู ุงููุธููุฉ ุ ุณููุชูู ุนุจุฑ ุฌููุน ุงูููุงุถุน ุจูู ุจุฏุงูุฉ ุงูุนูุตุฑ ูููุงูุชู ุ ููุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุถุน ุงูุญุงูู ูู MapManager.map ุฎุงูููุง ุฃู ููุงู ุดูุก ููุฌูุฏ ุจุงููุนู. ุฅุฐุง ูุงู ููุงู ุดูุก ููุงู ุ ูุฅููุง ูููู ุงููุธููุฉ ููุฑุฌุน ุฎุทุฃ. ุฅุฐุง ูู ููู ูุฐูู ุ ูุชุงุจุน. ุฅุฐุง ูุตูุช ุงููุธููุฉ ุฅูู ููุงูุฉ ุงูุญููุฉ ุฏูู ููุงุจูุฉ ุงูุฃูุงูู ุงูููููุกุฉ ุ ูุนูุฏุฆุฐู ุชุฑุฌุน true. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุจู ุงูุชุญูู ูู ุงูููุถุน ููุตูุฑ ุ ูุญุชุงุฌ ุฅูู ุฎุท ููุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุถุน ุฏุงุฎู ุงูุฎุฑูุทุฉ. ูุฃูู ุจุฎูุงู ุฐูู ุ ูุฏ ูุญุตู ุนูู ุฎุทุฃ ูู ููุฑุณ ุงููุตูููุฉ ูุชุนุทู ุงููุนุจุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/473/582/a5b/473582a5b560d6738de08b2f6190cf6b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุบุฑุงูุฉ. </font><font style="vertical-align: inherit;">ูุนูุฏ ุงูุขู ุฅูู ุงูููุงู ุงูุฐู ูุฏุฎู ููู ูุฐู ุงููุธููุฉ ุฏุงุฎู ุฏุงูุฉ GenerateFeature (). </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุฅุตูุงุญ ูุฐู ุงูููุงููุฉ ูุฃููุง ูุง ุชุฌุชุงุฒ ุงูุญุฌุฌ ุงููุงุฒูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูุฑูุฏ ุฅุฏุฑุงุฌ ุนุจุงุฑุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุญูู ููุง ุฅุฐุง ูุงูุช ููุงู ูุณุงุญุฉ ูุงููุฉ ููุนูุตุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงููุชูุฌุฉ ุฎุงุทุฆุฉ ุ ูุฅููุง ูููู ุงููุธููุฉ ุฏูู ุฅุฏุฑุงุฌ ุนูุตุฑ ุฌุฏูุฏ ูู MapManager.map.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/068/661/e53/068661e533ef21536a51f17ae3de570b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ุจุญุงุฌุฉ ุฅูู ุชูุฑูุฑ ุงููุณูุทุงุช ุงููุทููุจุฉ ุ ุฃู ูุชุบูุฑูู Vector2Int. </font><font style="vertical-align: inherit;">ูุน ุงูุฃูู ุ ูู ุดูุก ุจุณูุท ุ ูุฐุง ูู ุงููููู ูุน ุฅุญุฏุงุซูุงุช ุณ ูุต ูููุทุฉ ุจุฏุงูุฉ ุงูุนูุตุฑ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c1/869/26d/0c186926d741d2423c791500adbed2cd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุซุงูู ุฃุตุนุจ ุ ูููู ููุณ ุจุงููุซูุฑ. </font><font style="vertical-align: inherit;">ูุฐู ูู ููุทุฉ ุงูุจุฏุงูุฉ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุงุฑุชูุงุน ูู y ูุนุฑุถ x ุ ูุทุฑุญ 1 ูู ูููููุง (ูุฃู ุงูุจุฏุงูุฉ ูุฏ ุชู ุฃุฎุฐูุง ูู ุงูุงุนุชุจุงุฑ ุจุงููุนู).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a18/f85/4a9/a18f854a9e0a0bbe5883012bf2e313ff.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนูุง ููุชูู ุฅูู ุงูุฎุทูุฉ ุงูุชุงููุฉ - ุฅูุดุงุก ุฎูุงุฑุฒููุฉ ูุงุณุชุฏุนุงุก ูุธููุฉ GenerateFeature ().</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุญูุฉ 9 - ุงูุนูุงุตุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ุงุณุชุฏุนุงุก</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุนูุฏุฉ ุฅูู ุฏุงูุฉ GenerateDungeon () ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุงูุฌุฒุก ุงูุณุงุจู ูู ุงูููุงูุฉ. </font><font style="vertical-align: inherit;">ุงูุขู ูุฌุจ ุฃู ูุจุฏู ูุซู ูุฐุง:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e9/57c/5e3/3e957c5e316f5329e935353e961df47b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชู ุชูููุฒ ุงุณุชุฏุนุงุก FirstRoom () ุจุงูููู ุงูุฃุญูุฑ ูุฃููุง ูููุง ุจุชุบููุฑ ุงุณู ูุฐู ุงููุธููุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนูุง ูุณูู ุงูุฌูู ุงูุฃูู ูู ุงูุบุฑู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8d6/926/908/8d692690826997750f3bc860ae9216f0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ูุฑุฑูุง ุงูุญุฌุฌ ุงููุงุฒูุฉ: "ุงูุบุฑูุฉ" ูููุน ุ ูุฃู ุงูุบุฑูุฉ ุงูุฃููู ุณุชููู ุฏุงุฆููุง ุงูุบุฑูุฉ ุ ูุงูุฌุฏุงุฑ ุงูุฌุฏูุฏ () ุ ูุฃู ุงูุบุฑูุฉ ุงูุฃููู ูู ูุชู ุฅูุดุงุคูุง ูู ุฃู ุบุฑูุฉ ุฃุฎุฑู ุ ูุฐุง ูุฅููุง ููุฑุฑ ูุงุฑุบุฉ ุ ููุฐุง ุฃูุฑ ุทุจูุนู ุชูุงููุง. ุจุฏูุงู ูู Wall () ุงูุฌุฏูุฏ ุ ููููู ุงุณุชุจุฏุงู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุฐู ูุณุฃูุฉ ุชูุถูู ุดุฎุตู. ุชุญุฏุฏ ุงููุณูุทุฉ ุงูุฃุฎูุฑุฉ ูุง ุฅุฐุง ูุงู ุงูุนูุตุฑ ุงูุฌุฏูุฏ ูู ุงูุบุฑูุฉ ุงูุฃูููุ ูุฐูู ูู ุญุงูุชูุง ูุญู ููุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุตุญูุญุง</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุฃุชู ุฅูู ุงูููุทุฉ ุงูุฑุฆูุณูุฉ. ูุณุชุฎุฏู ุญููุฉ ููุชุดุบูู 500 ูุฑุฉ - ูุนู ุ ุณูุญุงูู ุฅุถุงูุฉ ุงูุนูุงุตุฑ 500 ูุฑุฉ. ูููู ุฅุฐุง ูุงู ุนุฏุฏ ุงูุนูุงุตุฑ ุงูุชู ุชู ุฅูุดุงุคูุง (ูุชุบูุฑ countFeatures) ูุณุงูู ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูุนูุงุตุฑ ุงููุญุฏุฏ (ูุชุบูุฑ maxFeatures) ุ ูุฅููุง ููุงุทุน ูุฐู ุงูุฏูุฑุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e6/410/ded/9e6410ded47210776fcda40ae2492229.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฎุทูุฉ ุงูุฃููู ูู ูุฐู ุงูุญููุฉ ูู ุฅุนูุงู ุงูุนูุตุฑ ุงูุฐู ุณูุชู ุฅูุดุงุก ุงูุนูุตุฑ ุงูุฌุฏูุฏ ููู. </font><font style="vertical-align: inherit;">ุฅุฐุง ุฃูุดุฃูุง ุนูุตุฑูุง ูุงุญุฏูุง ููุท (ุงูุบุฑูุฉ ุงูุฃููู) ุ ูุณูููู ุงูุนูุตุฑ ุงูุฃุตูู. </font><font style="vertical-align: inherit;">ุจุฎูุงู ุฐูู ุ ูุฎุชุงุฑ ุนุดูุงุฆููุง ุฃุญุฏ ุงูุนูุงุตุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ุจุงููุนู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddb/e84/f92/ddbe84f92cbb06f56e3ccce561dde991.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุณูุฎุชุงุฑ ุฃู ุฌุฏุงุฑ ูู ูุฐุง ุงูุนูุตุฑ ุณูุชู ุงุณุชุฎุฏุงูู ูุฅูุดุงุก ุงูุนูุตุฑ ุงูุฌุฏูุฏ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ad/e7c/0e4/7ade7c0e438985098eed6f5dbdd42e6d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฑุฌู ููุงุญุธุฉ ุฃูู ููุณ ูุฏููุง ูุฐู ุงููุธููุฉ ChoseWall () ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ูููุชุจูุง ุจุณุฑุนุฉ. </font><font style="vertical-align: inherit;">ุงูุชูู ุฅูู ููุงูุฉ ุงููุธููุฉ ููู ุจุฅูุดุงุฆูุง. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ููุฑุฌุน ุฌุฏุงุฑูุง ุ ููุณุชุฎุฏู ุนูุตุฑูุง ููุณูุทุฉ ุ ุจุญูุซ ูููู ูููุธููุฉ ุชุญุฏูุฏ ุฌุฏุงุฑ ูุฐุง ุงูุนูุตุฑ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aeb/631/9f1/aeb6319f1ee6f601474d0aa0e32e2c77.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุช ุจุฅูุดุงุฆู ุจูู ูุธุงุฆู CheckIfHasSpace () ู DrawMap (). </font><font style="vertical-align: inherit;">ูุงุญุธ ุฃูู ุฅุฐุง ููุช ุชุนูู ูู Visual Studio ุ ูุงูุฐู ุชู ุชุซุจูุชู ูุน Unity ุ ูููููู ุงุณุชุฎุฏุงู - / + ุงูุญููู ุงูููุฌูุฏุฉ ุนูู ุงููุณุงุฑ ูุทู / ุชูุณูุน ุฃุฌุฒุงุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุชุจุณูุท ุงูุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐู ุงููุธููุฉ ุ ุณูุฌุฏ ุงูุฌุฏุงุฑ ุงูุฐู ูู ูุชู ุฅูุดุงุก ุงูุนูุตุฑ ููู ุจุนุฏ. </font><font style="vertical-align: inherit;">ูู ุจุนุถ ุงูุฃุญูุงู ุ ุณูุญุตู ุนูู ุนูุงุตุฑ ุจุฌุฏุงุฑ ูุงุญุฏ ุฃู ุฃูุซุฑ ุชู ุฅุฑูุงู ุนูุงุตุฑ ุฃุฎุฑู ุจู ุจุงููุนู ุ ูุฐูู ูุญุชุงุฌ ุฅูู ุงูุชุญูู ูุฑุฉ ุฃุฎุฑู ููุฑุฉ โโุฃุฎุฑู ููุง ุฅุฐุง ูุงูุช ุฃู ูู ุงูุฌุฏุฑุงู ุงูุนุดูุงุฆูุฉ ูุฌุงููุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุณุชุฎุฏู ุญููุฉ ูุชูุฑุฑุฉ ุนุดุฑ ูุฑุงุช - ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุฌุฏุงุฑ ุญุฑ ุจุนุฏ ูุฐู ุงูุนุดุฑ ูุฑุงุช ุ ูุฅู ุงูุฏุงูุฉ ุชุฑุฌุน ูุงุฑุบุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b10/44a/028/b1044a028bf9ab566a0120690311396d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุนุฏ ุฅูู ุงูุฏุงูุฉ GenerateDungeon () ููู ุจุชูุฑูุฑ ุงูุนูุตุฑ ุงูุฃุตูู ููุนููุฉ ุฅูู ุฏุงูุฉ ChoseWall ().</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a3/281/8aa/0a32818aafc77ddd87f1ffac21b6981e.png"></div><br><font style="vertical-align: inherit;"></font><code>if (wall == null) continue;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูู </font><font style="vertical-align: inherit;">
ุงูุณุทุฑ </font><font style="vertical-align: inherit;">ุฃูู ุฅุฐุง ุฃุนุงุฏุช ูุธููุฉ ุงูุจุญุซ ุนู ุงูุฌุฏุงุฑ ุฎุทุฃ ุ ููู ูุชููู ุงูุนูุตุฑ ุงูุฃุตูู ูู ุฅูุดุงุก ุนูุตุฑ ุฌุฏูุฏ ุ ูุจุงูุชุงูู ุณุชุณุชูุฑ ุงููุธููุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฏูุฑุฉ ุ ุฃู ุฃูู ูุง ูููู ุฅูุดุงุก ุนูุตุฑ ุฌุฏูุฏ ูุงูุงูุชูุงู ุฅูู ุงูุชูุฑุงุฑ ุงูุชุงูู ููุฏูุฑุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุญุฏูุฏ ููุน ุงูุนูุตุฑ ุงูุชุงูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุนูุตุฑ ุงููุตุฏุฑ ุนุจุงุฑุฉ ุนู ุบุฑูุฉ ุ ููุฌุจ ุฃู ูููู ุงูุนูุตุฑ ุงูุชุงูู ููุฑูุง (ูุง ูุฑูุฏ ุฃู ุชุคุฏู ุงูุบุฑูุฉ ูุจุงุดุฑุฉ ุฅูู ุบุฑูุฉ ุฃุฎุฑู ุจุฏูู ููุฑ ุจููููุง). </font><font style="vertical-align: inherit;">ูููู ุฅุฐุง ูุงู ูุฐุง ููุฑูุง ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุฎูู ุงุญุชูุงููุฉ ุฃู ูููู ููุงู ููุฑ ุฃู ุบุฑูุฉ ุฃุฎุฑู ุจุนุฏ ุฐูู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b22/df0/954/b22df0954bbe21d82506d42e5118a70f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุบุฑุงูุฉ. </font><font style="vertical-align: inherit;">ุงูุขู ูุญู ุจุญุงุฌุฉ ููุท ุฅูู ุงุณุชุฏุนุงุก ุฏุงูุฉ GenerateFeature () ุ ูุชูุฑูุฑูุง ุนูู ุงูุฌุฏุงุฑ ูุงููุชุงุจุฉ ููุนููุงุช.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a07/90b/834/a0790b83479f46dc17c57fbb981aef81.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ุงูุชูู ุฅูู ููุชุด ุงููุญุฏุฉ ุ ุญุฏุฏ ูุงุฆู GameManager ููู ุจุชุบููุฑ ุงูููู ุฅูู ูุง ููู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9cc/09c/786/9cc09c786641bf85a89674cc33042ebf.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุฑุช ุงูุขู ุนูู ุฒุฑ ุงูุชุดุบูู ุ ูุณุชุฑู ุงููุชุงุฆุฌ ุจุงููุนู!</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09d/9af/aac/09d9afaace836ef3bde082e3d63c580a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ููุช ุ ูุฐู ููุณุช ุฃูุถู ุฒูุฒุงูุฉ. </font><font style="vertical-align: inherit;">ูุฏููุง ุงููุซูุฑ ูู ุงูุทุฑู ุงููุณุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุชุนูู ุจูุงูู ุทุงูุชูุง ุ ูุชุถูู ุฃูู ูู ูููู ูุฏูู ุบุฑูุฉ ุบูุฑ ูุชุตูุฉ ุจุฃู ุบุฑูุฉ ุฃุฎุฑู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุชููู ุงู ุชููู ูุฏ ุงุณุชูุชุนุช ุจู! </font><font style="vertical-align: inherit;">ูู ุงูููุดูุฑ ุงูุชุงูู ุ ุณููุดุฆ ูุงุนุจูุง ุณููุชูู ุนุจุฑ ุงูุฒูุฒุงูุฉ ุ ุซู ุณูุญูู ุงูุฎุฑูุทุฉ ูู ASCII ุฅูู ููุด ูุชุญุฑู.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">using</span> System.Collections;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> UnityEngine;
<span class="hljs-keyword">using</span> UnityEngine.UI;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Post3</span> : <span class="hljs-title">MonoBehaviour</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> mapWidth;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> mapHeight;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> widthMinRoom;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> widthMaxRoom;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> heightMinRoom;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> heightMaxRoom;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> minCorridorLength;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> maxCorridorLength;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> maxFeatures;
    <span class="hljs-keyword">int</span> countFeatures;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> isASCII;<font></font>
<font></font>
    <span class="hljs-keyword">public</span> List&lt;Feature&gt; allFeatures;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">InitializeDungeon</span>(<span class="hljs-params"></span>)</span> {<font></font>
        MapManager.map = <span class="hljs-keyword">new</span> Tile[mapWidth, mapHeight];<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">GenerateDungeon</span>(<span class="hljs-params"></span>)</span> {<font></font>
        GenerateFeature(<span class="hljs-string">"Room"</span>, <span class="hljs-keyword">new</span> Wall(), <span class="hljs-literal">true</span>);<font></font>
<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">500</span>; i++) {<font></font>
            Feature originFeature;<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (allFeatures.Count == <span class="hljs-number">1</span>) {<font></font>
                originFeature = allFeatures[<span class="hljs-number">0</span>];<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span> {<font></font>
                originFeature = allFeatures[Random.Range(<span class="hljs-number">0</span>, allFeatures.Count - <span class="hljs-number">1</span>)];<font></font>
            }<font></font>
<font></font>
            Wall wall = ChoseWall(originFeature);<font></font>
            <span class="hljs-keyword">if</span> (wall == <span class="hljs-literal">null</span>) <span class="hljs-keyword">continue</span>;<font></font>
<font></font>
            <span class="hljs-keyword">string</span> type;<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (originFeature.type == <span class="hljs-string">"Room"</span>) {<font></font>
                type = <span class="hljs-string">"Corridor"</span>;<font></font>
            }<font></font>
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (Random.Range(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>) &lt; <span class="hljs-number">90</span>) {<font></font>
                    type = <span class="hljs-string">"Room"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">else</span> {<font></font>
                    type = <span class="hljs-string">"Corridor"</span>;<font></font>
                }<font></font>
            }<font></font>
<font></font>
            GenerateFeature(type, wall);<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (countFeatures &gt;= maxFeatures) <span class="hljs-keyword">break</span>;<font></font>
        }<font></font>
<font></font>
        DrawMap(isASCII);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GenerateFeature</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> type, Wall wall, <span class="hljs-keyword">bool</span> isFirst = <span class="hljs-literal">false</span></span>)</span> {<font></font>
        Feature room = <span class="hljs-keyword">new</span> Feature();<font></font>
        room.positions = <span class="hljs-keyword">new</span> List&lt;Vector2Int&gt;();<font></font>
<font></font>
        <span class="hljs-keyword">int</span> roomWidth = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">int</span> roomHeight = <span class="hljs-number">0</span>;<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Room"</span>) {<font></font>
            roomWidth = Random.Range(widthMinRoom, widthMaxRoom);<font></font>
            roomHeight = Random.Range(heightMinRoom, heightMaxRoom);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">switch</span> (wall.direction) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"South"</span>:<font></font>
                    roomWidth = <span class="hljs-number">3</span>;<font></font>
                    roomHeight = Random.Range(minCorridorLength, maxCorridorLength);<font></font>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"North"</span>:<font></font>
                    roomWidth = <span class="hljs-number">3</span>;<font></font>
                    roomHeight = Random.Range(minCorridorLength, maxCorridorLength);<font></font>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"West"</span>:<font></font>
                    roomWidth = Random.Range(minCorridorLength, maxCorridorLength);<font></font>
                    roomHeight = <span class="hljs-number">3</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"East"</span>:<font></font>
                    roomWidth = Random.Range(minCorridorLength, maxCorridorLength);<font></font>
                    roomHeight = <span class="hljs-number">3</span>;
                    <span class="hljs-keyword">break</span>;<font></font>
<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">int</span> xStartingPoint;
        <span class="hljs-keyword">int</span> yStartingPoint;<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (isFirst) {<font></font>
            xStartingPoint = mapWidth / <span class="hljs-number">2</span>;<font></font>
            yStartingPoint = mapHeight / <span class="hljs-number">2</span>;<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">int</span> id;
            <span class="hljs-keyword">if</span> (wall.positions.Count == <span class="hljs-number">3</span>) id = <span class="hljs-number">1</span>;
            <span class="hljs-keyword">else</span> id = Random.Range(<span class="hljs-number">1</span>, wall.positions.Count - <span class="hljs-number">2</span>);<font></font>
<font></font>
            xStartingPoint = wall.positions[id].x;<font></font>
            yStartingPoint = wall.positions[id].y;<font></font>
        }<font></font>
<font></font>
        Vector2Int lastWallPosition = <span class="hljs-keyword">new</span> Vector2Int(xStartingPoint, yStartingPoint);<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (isFirst) {<font></font>
            xStartingPoint -= Random.Range(<span class="hljs-number">1</span>, roomWidth);<font></font>
            yStartingPoint -= Random.Range(<span class="hljs-number">1</span>, roomHeight);<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">switch</span> (wall.direction) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"South"</span>:
                    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Room"</span>) xStartingPoint -= Random.Range(<span class="hljs-number">1</span>, roomWidth - <span class="hljs-number">2</span>);
                    <span class="hljs-keyword">else</span> xStartingPoint--;<font></font>
                    yStartingPoint -= Random.Range(<span class="hljs-number">1</span>, roomHeight - <span class="hljs-number">2</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"North"</span>:
                    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Room"</span>) xStartingPoint -= Random.Range(<span class="hljs-number">1</span>, roomWidth - <span class="hljs-number">2</span>);
                    <span class="hljs-keyword">else</span> xStartingPoint--;<font></font>
                    yStartingPoint ++;<font></font>
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"West"</span>:<font></font>
                    xStartingPoint -= roomWidth;<font></font>
                    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Room"</span>) yStartingPoint -= Random.Range(<span class="hljs-number">1</span>, roomHeight - <span class="hljs-number">2</span>);
                    <span class="hljs-keyword">else</span> yStartingPoint--;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"East"</span>:<font></font>
                    xStartingPoint++;<font></font>
                    <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"Room"</span>) yStartingPoint -= Random.Range(<span class="hljs-number">1</span>, roomHeight - <span class="hljs-number">2</span>);
                    <span class="hljs-keyword">else</span> yStartingPoint--;
                    <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
         <span class="hljs-keyword">if</span> (!CheckIfHasSpace(<span class="hljs-keyword">new</span> Vector2Int(xStartingPoint, yStartingPoint), <span class="hljs-keyword">new</span> Vector2Int(xStartingPoint + roomWidth - <span class="hljs-number">1</span>, yStartingPoint + roomHeight - <span class="hljs-number">1</span>))) {
            <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
<font></font>
        room.walls = <span class="hljs-keyword">new</span> Wall[<span class="hljs-number">4</span>];<font></font>
<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; room.walls.Length; i++) {<font></font>
            room.walls[i] = <span class="hljs-keyword">new</span> Wall();<font></font>
            room.walls[i].positions = <span class="hljs-keyword">new</span> List&lt;Vector2Int&gt;();<font></font>
            room.walls[i].length = <span class="hljs-number">0</span>;<font></font>
<font></font>
            <span class="hljs-keyword">switch</span> (i) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"South"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"North"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"West"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<font></font>
                    room.walls[i].direction = <span class="hljs-string">"East"</span>;
                    <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> y = <span class="hljs-number">0</span>; y &lt; roomHeight; y++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>; x &lt; roomWidth; x++) {<font></font>
                Vector2Int position = <span class="hljs-keyword">new</span> Vector2Int();<font></font>
                position.x = xStartingPoint + x;<font></font>
                position.y = yStartingPoint + y;<font></font>
<font></font>
                room.positions.Add(position);<font></font>
<font></font>
                MapManager.map[position.x, position.y] = <span class="hljs-keyword">new</span> Tile();<font></font>
                MapManager.map[position.x, position.y].xPosition = position.x;<font></font>
                MapManager.map[position.x, position.y].yPosition = position.y;<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (y == <span class="hljs-number">0</span>) {<font></font>
                    room.walls[<span class="hljs-number">0</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">0</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span> (y == (roomHeight - <span class="hljs-number">1</span>)) {<font></font>
                    room.walls[<span class="hljs-number">1</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">1</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span> (x == <span class="hljs-number">0</span>) {<font></font>
                    room.walls[<span class="hljs-number">2</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">2</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span> (x == (roomWidth - <span class="hljs-number">1</span>)) {<font></font>
                    room.walls[<span class="hljs-number">3</span>].positions.Add(position);<font></font>
                    room.walls[<span class="hljs-number">3</span>].length++;<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Wall"</span>;<font></font>
                }<font></font>
                <span class="hljs-keyword">if</span> (MapManager.map[position.x, position.y].type != <span class="hljs-string">"Wall"</span>) {<font></font>
                    MapManager.map[position.x, position.y].type = <span class="hljs-string">"Floor"</span>;<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (!isFirst) {<font></font>
            MapManager.map[lastWallPosition.x, lastWallPosition.y].type = <span class="hljs-string">"Floor"</span>;
            <span class="hljs-keyword">switch</span> (wall.direction) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"South"</span>:<font></font>
                    MapManager.map[lastWallPosition.x, lastWallPosition.y - <span class="hljs-number">1</span>].type = <span class="hljs-string">"Floor"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"North"</span>:<font></font>
                    MapManager.map[lastWallPosition.x, lastWallPosition.y + <span class="hljs-number">1</span>].type = <span class="hljs-string">"Floor"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"West"</span>:<font></font>
                    MapManager.map[lastWallPosition.x - <span class="hljs-number">1</span>, lastWallPosition.y].type = <span class="hljs-string">"Floor"</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"East"</span>:<font></font>
                    MapManager.map[lastWallPosition.x + <span class="hljs-number">1</span>, lastWallPosition.y].type = <span class="hljs-string">"Floor"</span>;
                    <span class="hljs-keyword">break</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
        room.width = roomWidth;<font></font>
        room.height = roomHeight;<font></font>
        room.type = type;<font></font>
        allFeatures.Add(room);<font></font>
        countFeatures++;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">CheckIfHasSpace</span>(<span class="hljs-params">Vector2Int start, Vector2Int end</span>)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> y = start.y; y &lt;= end.y; y++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> x = start.x; x &lt;= end.x; x++) {
                <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span> || y &lt; <span class="hljs-number">0</span> || x &gt;= mapWidth || y &gt;= mapHeight) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">if</span> (MapManager.map != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
            }<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function">Wall <span class="hljs-title">ChoseWall</span>(<span class="hljs-params">Feature feature</span>)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-keyword">int</span> id = Random.Range(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>) / <span class="hljs-number">25</span>;
            <span class="hljs-keyword">if</span> (!feature.walls[id].hasFeature) {
                <span class="hljs-keyword">return</span> feature.walls[id];<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DrawMap</span>(<span class="hljs-params"><span class="hljs-keyword">bool</span> isASCII</span>)</span> {
        <span class="hljs-keyword">if</span> (isASCII) {<font></font>
            Text screen = GameObject.Find(<span class="hljs-string">"ASCIITest"</span>).GetComponent&lt;Text&gt;();<font></font>
<font></font>
            <span class="hljs-keyword">string</span> asciiMap = <span class="hljs-string">""</span>;<font></font>
<font></font>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> y = (mapHeight - <span class="hljs-number">1</span>); y &gt;= <span class="hljs-number">0</span>; y--) {
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> x = <span class="hljs-number">0</span>; x &lt; mapWidth; x++) {
                    <span class="hljs-keyword">if</span> (MapManager.map[x, y] != <span class="hljs-literal">null</span>) {
                        <span class="hljs-keyword">switch</span> (MapManager.map[x, y].type) {
                            <span class="hljs-keyword">case</span> <span class="hljs-string">"Wall"</span>:<font></font>
                                asciiMap += <span class="hljs-string">"#"</span>;
                                <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">"Floor"</span>:<font></font>
                                asciiMap += <span class="hljs-string">"."</span>;
                                <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    }<font></font>
                    <span class="hljs-keyword">else</span> {<font></font>
                        asciiMap += <span class="hljs-string">" "</span>;<font></font>
                    }<font></font>
<font></font>
                    <span class="hljs-keyword">if</span> (x == (mapWidth - <span class="hljs-number">1</span>)) {<font></font>
                        asciiMap += <span class="hljs-string">"\n"</span>;<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
<font></font>
            screen.text = asciiMap;<font></font>
        }<font></font>
    }<font></font>
}</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar495554/index.html">ุจุฑูุงูุฌ ููุจุญุซ ุนู ููููุชุงูุชู ูุชุดุงุจูุฉ ุงูุชูููุฑ [ุงููุตุฏุฑ ุงูููุชูุญ]</a></li>
<li><a href="../ar495556/index.html">Fortinet - ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุงูููุงุฏ ุงููููุฏุฉ</a></li>
<li><a href="../ar495560/index.html">ุงุชุฌุงูุงุช ุฅูุชุฑูุช ุงูุฃุดูุงุก: ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุฑุฏ ุนูู ุงูููุงููุงุช ูุงูุณุญุจ ู 5 G ูุฑูุถ ุงูุจูุงูุงุช ุงููุจูุฑุฉ ูุงูุฅุณูุงู ูุงููุฑุงูู - ุฑุงุฆุฏ ูู ุงูุงุจุชูุงุฑ</a></li>
<li><a href="../ar495576/index.html">ููุตุฉ ุฐุงุชูุฉ ุงูุฏูุน ุนูู esp8266 MK ูุน ูููุฑูุจูุซูู</a></li>
<li><a href="../ar495580/index.html">ุงูุฎูุงุฑ JVM - ููุณ ููุท BDD</a></li>
<li><a href="../ar495592/index.html">ููููุฉ ุงุณุชุฎุฏุงู ุงูููุงููุณ (ูููุณ ููุท)</a></li>
<li><a href="../ar495594/index.html">ุงุจุฏุฃ ูู ุฌูู ุงูุฃููุงู ูู ุงูุจุฑุงูุฌ: ุฅูุดุงุก ุฃุนูุงู ุฑูููุฉ ุตุบูุฑุฉ</a></li>
<li><a href="../ar495596/index.html">ุงูุนูู ุนู ุจุนุฏ ูู ุงูููุชุจ. RDP ุ Port Knocking ุ Mikrotik: ุจุณูุทุฉ ูุขููุฉ</a></li>
<li><a href="../ar495602/index.html">ุจุฏุกูุง ูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ! ุตุนุจ ุจูููุงุช ุจุณูุทุฉ [ุงูุฌุฒุก 2]</a></li>
<li><a href="../ar495604/index.html">ุชูุทูู ูุคูุช ุนูู Symfony 4 + Twig</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>