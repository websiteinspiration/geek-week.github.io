<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👰 👨‍✈️ 💉 Kostenloses Telegramm-Bot-Hosting auf der Google Cloud Platform ✔️ 👈 📻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warum GCP?
 Beim Schreiben von Telegrammen an Bots stieß ich auf die Frage, wie der Bot schnell und kostenlos ständig funktionieren kann. Optionen mit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Kostenloses Telegramm-Bot-Hosting auf der Google Cloud Platform</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488560/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum GCP?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Schreiben von Telegrammen an Bots stieß ich auf die Frage, wie der Bot schnell und kostenlos ständig funktionieren kann. </font><font style="vertical-align: inherit;">Optionen mit Heroku und Pythonanywhere haben zu kleine Grenzen, wenn Sie mehr als einen Bot haben. </font><font style="vertical-align: inherit;">Also habe ich mich für GCP entschieden. </font><font style="vertical-align: inherit;">Die Plattform bietet kostenlose 300 USD pro Jahr + enorme Rabatte auf die Verwendung dieser Mittel (bis zu 94%).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fh/5b/er/fh5berp5_jloo2cwrafuc1u6rbm.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie hoste ich meinen Bot?</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 1. Registrieren Sie sich für GCP</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Gehen Sie zur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GCP-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Website </font><font style="vertical-align: inherit;">und klicken </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie auf Kostenlos </font></font></b><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">starten</font></a><font style="vertical-align: inherit;"> .</font></font><a name="habracut"></a><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/ec/-l/aeec-l-p1uivtoqefb1wxujftau.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie Ihre Daten und Ihre Karte ein. </font><font style="vertical-align: inherit;">Geld von der Karte wird nicht belastet, wenn Sie selbst kein kostenpflichtiges Abonnement aktivieren.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fy/7-/5w/fy7-5wvxsisp3cfvgz8pz2zmhbg.png"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 2. Erstellen Sie eine virtuelle Maschine</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Registrierung befinden Sie sich auf der Hauptseite des Dienstes. </font><font style="vertical-align: inherit;">Sie müssen die Registerkarte Compute Engine im Abschnitt Ressourcen auswählen.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sy/xt/ni/syxtniyd4afrtypvhxkqw1oeggy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen eine neue Instanz erstellen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/y-/ug/vy/y-ugvym1bziz4uhx4q-8yirw_wu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie die Datenbank nicht in einer virtuellen Maschine bereitstellen, können Sie g1-small verwenden, andernfalls empfehle ich n1-standart. </font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ek/vy/ne/ekvyneszbfujubfrkvlma93h5we.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie müssen auch ein Betriebssystem auswählen. </font><font style="vertical-align: inherit;">Ich habe Debian GNU / Linux 9 (Stretch) gewählt.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9q/hb/kv/9qhbkv1pxybpl4e84mpbs2nvpyy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle VM erstellt. </font><font style="vertical-align: inherit;">Die herkömmliche Bereitstellung dauert 1 bis 5 Minuten.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 3. Konfigurieren Sie die virtuelle Maschine</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können von Ihrem PC aus eine Verbindung über SSH herstellen oder über die Plattform interagieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klicken Sie dazu auf SSH.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/uy/rv/md/uyrvmdlv5m2mufx2tvebio0igqc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ihr Linux-Terminal wird in einem neuen Fenster geöffnet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/39/we/jc/39wejcl8770mwzyhasapvwkgypg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir nun mit der Einrichtung fort. </font><font style="vertical-align: inherit;">Geben Sie zunächst den folgenden Befehl ein:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
um Informationen zu den neuesten Paketversionen zu aktualisieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir eingetreten sind:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install python3-setuptools<font></font>
sudo apt-get install python3-pip</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Python selbst muss nicht installiert werden, es existiert bereits. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt müssen Sie alle erforderlichen Bibliotheken installieren. </font><font style="vertical-align: inherit;">Es gibt eine kleine Nuance, alle Bibliotheken müssen zweimal installiert werden:</font></font><br>
<br>
<pre><code class="bash hljs">pip3 install ‘name_of_package’</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
zur Verwendung über den Befehl python3 und </font></font><br>
<br>
<pre><code class="bash hljs">sudo pip3 install ‘name_of_package’</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
für systemd. </font><font style="vertical-align: inherit;">Dieses Dienstprogramm hilft Ihnen, den Bot zu starten und neu zu starten, wenn er abstürzt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der einfachste Weg, den Bot über Python3 auszuführen, wird jedoch ausgeschaltet, wenn Sie die Verbindung trennen. </font><font style="vertical-align: inherit;">Sie können den Bildschirm verwenden, aber der Bot startet sich nicht neu. </font><font style="vertical-align: inherit;">Sie können crontab auch für die Portprüfung verwenden, aber diese Option scheint mir komplizierter zu sein als systemd.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt 4. Füllen Sie den Bot auf den Server</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei Möglichkeiten, Ihren Bot zu füllen. </font><font style="vertical-align: inherit;">Wenn Sie mit Git nicht befreundet sind, können Sie den Bot einfach in .tar archivieren und auf den Server hochladen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/m2/hh/xf/m2hhxf1n6kx6mf9eyfhv6id8osm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entpacken Sie es anschließend mit dem folgenden Befehl:</font></font><br>
<br>
<pre><code class="bash hljs">tar -xvf yourfile.tar</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt wird Ihr Bot in einem Ordner mit dem Namen des Archivs gespeichert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der zweite Weg führt über Git. </font><font style="vertical-align: inherit;">Ich denke, es lohnt sich nicht, Leuten zu erklären, wie man das macht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Installation mit dem Befehl:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt install git</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können es auf Ihrer VM klonen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Danach fahren wir mit der Einrichtung von systemd fort. </font><font style="vertical-align: inherit;">Gehen Sie dazu in sein Verzeichnis:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /etc/systemd/system</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und erstellen Sie die Datei bot.service:</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano bot.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie im folgenden Fenster Folgendes ein:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
[Unit]<font></font>
Description=Telegram bot <span class="hljs-string">' '</span><font></font>
After=syslog.target<font></font>
After=network.target<font></font>
<font></font>
[Service]<font></font>
Type=simple<font></font>
User=root<font></font>
WorkingDirectory=/home/  /     <font></font>
ExecStart=/usr/bin/python3 /home/  /     /bot.py<font></font>
<font></font>
RestartSec=10<font></font>
Restart=always<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schließen und speichern Sie die Datei. </font><font style="vertical-align: inherit;">Schließt mit dem Befehl Strg + X. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Geben Sie danach die folgenden Befehle ein:</font></font><br>
<br>
<pre><code class="bash hljs">sudo systemctl daemon-reload<font></font>
sudo systemctl <span class="hljs-built_in">enable</span> bot<font></font>
sudo systemctl start bot<font></font>
sudo systemctl status bot<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn alles gut geht, sehen Sie ungefähr Folgendes:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ar/tn/jf/artnjfgehjf5m03nqtuatyhk-rq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das war's, jetzt arbeitet Ihr Bot unabhängig. </font><font style="vertical-align: inherit;">Ich hoffe, mein Artikel hilft Ihnen, Ihren Bot zu hosten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.Überprüfen Sie Ihren Bot auf Fehler</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Starten Sie Ihren Bot und testen Sie seine Funktion, bevor Sie ihn über systemd starten. </font><font style="vertical-align: inherit;">Gehen Sie dazu in den Ordner mit dem Bot und führen Sie Python durch.</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> &lt;  &gt;<font></font>
python3 bot.py</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Fügen Sie den Dateien mit Py-Skripten eine Codierung hinzu</font></font></h3><br>
<pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/env python</span>
<span class="hljs-comment"># -*- coding: utf-8 -*-</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Anfang der Datei einfügen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Spiegel in systemd </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie den Bot auf Fehler überprüft haben und er einwandfrei funktioniert hat, aber nicht in systemd gestartet werden soll, können Sie sich die Protokolle ansehen und anhand der Datei verstehen, was der Fehler ist:</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /var/<span class="hljs-built_in">log</span>/syslog</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können diese Datei herunterladen und über Notepad ++ auf Ihrem Computer anzeigen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.Bot Update</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie eine neue Version des Bots hinzufügen oder hochladen möchten, geben Sie den folgenden Befehl ein:</font></font><br>
<br>
<pre><code class="bash hljs">sudo systemctl stop bot</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie alle erforderlichen Manipulationen bereit. </font><font style="vertical-align: inherit;">Geben Sie dann die folgenden Befehle ein, damit es wieder funktioniert:</font></font><br>
<br>
<pre><code class="bash hljs">sudo systemctl daemon-reload<font></font>
sudo systemctl start bot<font></font>
sudo systemctl status bot</code></pre></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de488546/index.html">Hack The Box. JSON-exemplarische Vorgehensweise. Sicherheitsanfälligkeit in Json.Net und LPE über SeImpersonatePrivilege</a></li>
<li><a href="../de488548/index.html">Experiment: Wie man lernt, populäre Texte auf Englisch zu erstellen (und warum die englischsprachigen Habristen so wenig lesen)</a></li>
<li><a href="../de488550/index.html">Wer will aus IT-Giganten Genossenschaften machen?</a></li>
<li><a href="../de488552/index.html">Apple FAS- und Kindersicherungsentwickler</a></li>
<li><a href="../de488558/index.html">Sicherstellung einer hohen Verfügbarkeit von Anwendungen mit Kafka Streams</a></li>
<li><a href="../de488564/index.html">Ihr erstes neuronales Netzwerk auf einer Grafikverarbeitungseinheit (GPU). Ratgeber für Anfänger</a></li>
<li><a href="../de488566/index.html">Wie ein QS-Techniker einen ganzen Tag gespart hat, indem er AutoTests in Visual Studio und Test IT verknüpft hat</a></li>
<li><a href="../de488568/index.html">Träumen neuronale Netze von elektrischem Geld?</a></li>
<li><a href="../de488570/index.html">Wie der US Secret Service Cyberpunk-Rollenspiel mit einem Lehrbuch für Hacker verwechselte</a></li>
<li><a href="../de488572/index.html">Unity Analyzer jetzt Open Source</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>