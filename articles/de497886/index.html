<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📏 ⤵️ 👨🏿‍🤝‍👨🏻 IOS-Feldvalidierung - schnell und einfach 🤘🏿 👊🏾 🌤️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Validierung von Eingabefeldern ist möglicherweise die häufigste Aufgabe in mobilen Anwendungen. Jede Anwendung, die die Form der Autorisierung und...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>IOS-Feldvalidierung - schnell und einfach</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497886/"><img src="https://habrastorage.org/webt/dl/m7/op/dlm7opjmmejtv0z6ckspsc_ig7o.jpeg" alt="Bild" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Validierung von Eingabefeldern ist möglicherweise die häufigste Aufgabe in mobilen Anwendungen. </font><font style="vertical-align: inherit;">Jede Anwendung, die die Form der Autorisierung und Registrierung hat, verfügt auch über eine Reihe von Eingabewerkzeugen des Benutzers, die die erwartete sadistisch-raffinierte Aufregung der Tester hervorrufen. </font><font style="vertical-align: inherit;">Eine fortgeschrittene, technisch kompetente Entwicklergemeinschaft hat gelernt, wie </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">man</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> effektiv </font><s><font style="vertical-align: inherit;">mit ihnen</font></s><font style="vertical-align: inherit;"> umgeht, indem reguläre Ausdrücke in den Quellcode eingebettet werden.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich auf die Registrierung und Autorisierung beschränken müssen, müssen Sie in der Regel keine besonderen Anstrengungen unternehmen, um Ihr Ziel zu erreichen. Der Code wird fast unverändert von einem Projekt in ein anderes übertragen. Und vor allem, ohne die Arbeitszeit für die weitere Pflege dieses Codes zu erhöhen. Aber die Welt wäre nicht so einfach, wenn es nicht die kreativen Impulse von UI / UX-Designern gäbe, die entgegen der etablierten Tradition, Logik und dem gesunden Menschenverstand dazu neigen, neue Wege der Interaktion mit dem Endbenutzer zu erfinden und auf das Formular mehrere ihrer Meinung nach notwendige Kontrollen und Zugänglichkeit zu setzen Dies hängt von den kartesischen Bedingungen für die Überprüfung der Gültigkeit einer großen Anzahl von Eingabefeldern und anderen Steuerelementen ab. Leider kann diese Situation kaum als selten bezeichnet werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Irritation des Entwicklers wächst proportional dazu, wie oft er gegen DRY-Prinzipien verstoßen muss: Einerseits lässt der professionelle Stolz keine Kompromisse zu, und andererseits ist das Kopieren und Einfügen von Code der effektivste Weg, um einen langen Testzyklus zu vermeiden - das Debuggen. Eintönig kopierter Code ist viel einfacher zu pflegen als ein ideologisch verifiziertes einzigartiges "Fahrrad". Die Suche nach einer Alternative verschwendet nicht nur die Kreativität des Entwicklers, sondern fügt dem Projekt auch Abhängigkeiten hinzu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig bietet das iOS SDK einige äußerst unterschätzte Funktionen, die sich leicht auf viele Aufgaben skalieren lassen, die nicht nur mit der Validierung zusammenhängen. Die deklarative Programmierung vereinfacht das Leben des Entwicklers erheblich. Natürlich kennt der Autor das unerbittliche Lager der </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebenden</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freunde der Verwendung von "unverdünntem" Code, aber seit der Autor des Artikels begann, professionelle Schnittstellen durch die Entwicklung einer grafischen Benutzeroberfläche für MS DOS zu entwickeln, besteht kein großer Wunsch, Zeit damit zu verschwenden, eine weitere perfekte Klasse zu erstellen, und wenn Sie sie mit gleichem Wert verwenden können Maus - Die Maus wird bevorzugt. </font><font style="vertical-align: inherit;">Dementsprechend wird beschrieben, wie die Codemenge minimiert werden kann, um den Entwicklungsprozess zu beschleunigen und zu vereinfachen.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haftungsausschluss:</font></font></b>
                        <div class="spoiler_text">   ,    .            .        ,     —    .<br>
</div>
                    </div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine typische Mindestaufgabe lautet wie folgt:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es gibt Anmelde- und Passworteingabefelder sowie eine Autorisierungsschaltfläche. Es ist erforderlich, dass die Berechtigungsschaltfläche den Status (isEnable) ändert, je nachdem, was in den Eingabefeldern enthalten ist. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine etwas fortgeschrittenere Version dieser Aufgabe sieht folgendermaßen aus:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir haben die Eingabefelder für E-Mail, Passwort und Telefonnummer sowie zwei Schaltflächen - Registrierung und Anforderung eines SMS-Codes für das eingegebene Telefon. Die Registrierungsschaltfläche sollte nur verfügbar sein, wenn in jedes der Felder die richtigen Daten eingegeben wurden. Die Schaltfläche zur Codeanforderung befindet sich, wenn das Feld für die Telefonnummer gültig ist. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typische Lösung</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Erstellen von voneinander abhängigen Flags durch Kombinieren der Anweisungen "if" und "switch" in einem View Controller. </font><font style="vertical-align: inherit;">Die Schwierigkeit steigt mit der Anzahl der am Prozess beteiligten Kontrollen. </font><font style="vertical-align: inherit;">Eine viel fortgeschrittenere Lösung wäre die Erstellung einer Zustandsmaschine. </font><font style="vertical-align: inherit;">Die Lösung ist ausgezeichnet - aber zeitaufwändig, zusätzlich mit einer hohen Eintrittsschwelle - und dies ist keineswegs das, was ich dem faulen (AKA "true") Entwickler implementieren möchte.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lema über einen faulen Entwickler</font></font></b>
                        <div class="spoiler_text"><i> ,     ,          .       (« » ),      ,   .</i><br>
</div>
                    </div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die allgemeine Idee des Vorschlags lautet wie folgt:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es gibt eine Klasse für das Eingabefeld und eine Klasse für den Validierungsmanager. Das Eingabefeld wird erwartungsgemäß von UITextField geerbt. Validierungsmanager - von UIControl geerbt, enthält eine Sammlung validierter Elemente (es ist überhaupt nicht erforderlich, Nachkommen von UITextField zu sein) und implementiert das "Beobachter" -Muster. Darüber hinaus fungiert er als Manager für andere Steuerelemente, deren Zugriffsstatus geändert werden muss, wenn sich der Status validierter Elemente ändert. Mit anderen Worten, wenn das Feld eine ungültige E-Mail enthält, sollte die Registrierungsschaltfläche nicht verfügbar sein.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/tt/7g/xitt7g_qwtiu_rdbg-rhx_1oug4.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Eingabefelder sind selbstvalidierend - sie können die Frage beantworten, ob die darin enthaltenen Daten gültig sind, und ihren Status ändern. </font><font style="vertical-align: inherit;">Einige Entwickler bevorzugen die Verwendung einer separaten Validator-Klasse (und ihrer Nachkommen), um Eingabefelder zu validieren. Diese Vorgehensweise macht es jedoch unmöglich, die deklarative und skalierbare Portabilität des Codes vollständig zu nutzen. </font><font style="vertical-align: inherit;">Für uns ist es wichtig, dass das Eingabefeld oder ein anderes validiertes Steuerelement eine einfache Schnittstelle des Formulars unterstützt:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-meta">@objc</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IValidatable</span> : <span class="hljs-title">class</span> </span>{<font></font>
&nbsp; &nbsp; varisValid: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">get</span> }<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/py/ii/zc/pyiizcxavc47l631fj9scai8ryu.jpeg" align="right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Ihrem Projekt eine Validierung hinzuzufügen, müssen Sie 4 Dateien aus dem Beispiel im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub-Repository</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hinzufügen </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSTextField-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">implementiert ein Eingabefeld mit einer Angabe des Validierungsprozesses.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse </font><font style="vertical-align: inherit;">ist ein Beobachter, der die von uns benötigten Funktionen bereitstellt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterung </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StringOptional + Utils</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - enthält nur eine Methode, die mithilfe eines regulären Ausdrucks überprüft, ob der Text der aktuellen Zeile gültig ist.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UIView + Layer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist nur eine bequeme Möglichkeit, einem Nachkommen von UIView einen Rahmen mit einer bestimmten Breite hinzuzufügen.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie die Validierung für jedes andere Steuerelement auf die gleiche Weise implementieren möchten, benötigen Sie höchstwahrscheinlich nur den </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Rest wird nur zu Ihrer Bequemlichkeit verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Validierungsprozess wird im Video (gif) gezeigt.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/ha/5j/dsha5jc7u50qf_h1plwksphdoha.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, befindet sich das Feld vor dem Start der Eingabe im Standardzustand, und die Validierung erfolgt bei der Dateneingabe. Wenn Sie das Feld verlassen, bevor die Validierung abgeschlossen ist, wird auf dem Feld eine Beschriftung angezeigt, die über den Fehler informiert. Die Registrierungsschaltfläche ist erst verfügbar, wenn beide Felder gültig sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine ähnliche Situation entwickelt sich auf dem zweiten Bildschirm (der erst nach Aktivierung der Registrierung verfügbar wird). Auf dem zweiten Bildschirm erfolgt die Überprüfung von Feldern und Schaltflächen jedoch unabhängig voneinander. Die Registrierungsschaltfläche wird nur verfügbar, wenn alle Felder fehlgeschlagen sind. Gleichzeitig ist die Schaltfläche zum Senden von SMS bereits verfügbar, wenn das Feld mit der Telefonnummer gültig ist. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und jetzt der Trick:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das gesamte Projekt enthält nur eine Klasse für den Ansichtscontroller, dieselbe, die Xcode beim Erstellen des Projekts aus der Vorlage erstellt hat. </font><font style="vertical-align: inherit;">Es ist völlig leer. </font><font style="vertical-align: inherit;">Aber auch es wird nicht benutzt. </font><font style="vertical-align: inherit;">Dies ist mit Hilfe des Dispatchers nicht schwer zu überprüfen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/71/yo/hg/71yohgaltaumlkvssjfhdky6wzi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein aufmerksamer Leser bemerkte, dass sich rechts neben dem Antwortenden ein Objekt aus der Standard-Xcode-Komponentenpalette befindet. </font><font style="vertical-align: inherit;">Dafür wird der Class-Parameter von der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse überschrieben </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Der gleiche Trick wurde für Eingabefelder ausgeführt, mit dem einzigen Unterschied, dass dort die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSTextField-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Klasse verwendet wird </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt läuft unsere gesamte Programmierung auf die folgenden einfachen Schritte hinaus:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verknüpfen Sie die verifiedControls-Auflistung aus dem ValidationManager mit Eingabefeldern.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/n_/fu/lhn_fuw8x1htw5zhfkgvfkuvf5c.jpeg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/oa/jt/0r/oajt0rvzv05avyyt1shuihukdj8.jpeg"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verknüpfen Sie die ManagedControls-Auflistung von ValidationManager mit der Schaltfläche, die Sie verwalten möchten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/5r/zs/sn5rzsgoycpntng8ogadslty7ze.jpeg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/py/kf/lj/pykfljwpykcfd108oq02zqg6pvy.jpeg"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordnen Sie dem ValidationManager Eingabefelder in die entgegengesetzte Richtung zu und machen Sie ihn zu einem Delegaten.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/y0/fn/dm/y0fndmyvohjq6ezorijkyd29ljs.jpeg"></div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legen Sie im Eingabefeld einen regulären Ausdruck für die Validierung und eine Fehlermeldung sowie andere benutzerdefinierte und Standardeigenschaften über den Standard-Xcode-Manager fest. </font><font style="vertical-align: inherit;">Grundsätzlich kann alles außer dem regulären Ausdruck "wie es ist" belassen werden. </font><font style="vertical-align: inherit;">Sie müssen lediglich die Tastatur verwenden und dann die Formel aus Tyrnet kopieren und einfügen. </font><font style="vertical-align: inherit;">Wenn die Fehlermeldung fehlt, wird sie einfach nicht auf dem Bildschirm angezeigt.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/_n/xy/nl/_nxynlbcisajrpzfoezwykgf8xy.jpeg"></div></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSValidationManager-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Code ist </font><font style="vertical-align: inherit;">hässlich primitiv.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> UIKit<font></font>
<font></font>
<span class="hljs-meta">@objc</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IValidationManager</span> : <span class="hljs-title">class</span> </span>{
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">verificated</span><span class="hljs-params">()</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-meta">@objc</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">IValidatable</span> : <span class="hljs-title">class</span> </span>{
&nbsp; &nbsp; <span class="hljs-keyword">var</span> isValid: <span class="hljs-type">Bool</span> { <span class="hljs-keyword">get</span> }<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DSValidationManager</span> : <span class="hljs-title">UIControl</span>, <span class="hljs-title">IValidationManager</span>
</span>{
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">var</span> verifiedControls: [<span class="hljs-type">UIControl</span>]?
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">var</span> managedControls: [<span class="hljs-type">UIControl</span>]?<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> (<span class="hljs-keyword">set</span>) <span class="hljs-keyword">var</span> valid : <span class="hljs-type">Bool</span> = <span class="hljs-literal">false</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">didSet</span> {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.sendActions(<span class="hljs-keyword">for</span>: .valueChanged)<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; overrideinit(frame: <span class="hljs-type">CGRect</span>) {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(frame: frame)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.verificated()<font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">required</span> <span class="hljs-keyword">init</span>?(coder: <span class="hljs-type">NSCoder</span>) {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(coder: coder)
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.verificated()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">verificated</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.checkVerifiedControls()
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.controlsAction()<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">checkVerifiedControls</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> list:[<span class="hljs-type">IValidatable</span>] = <span class="hljs-keyword">self</span>.verifiedControls?.<span class="hljs-built_in">filter</span>({$<span class="hljs-number">0</span> isIValidatable}) <span class="hljs-keyword">as</span>? [<span class="hljs-type">IValidatable</span>]
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">self</span>.valid = list.<span class="hljs-built_in">filter</span>({!$<span class="hljs-number">0</span>.isValid}).<span class="hljs-built_in">count</span>==<span class="hljs-number">0</span><font></font>
&nbsp; &nbsp; }<font></font>
&nbsp;&nbsp; &nbsp;<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">controls</span> <span class="hljs-title">Action</span><span class="hljs-params">()</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> list = <span class="hljs-keyword">self</span>.managedControls <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> list {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item.isEnabled = <span class="hljs-keyword">self</span>.valid<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, erhält er eine Benachrichtigung von einer Sammlung und handelt auf eine andere. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein Beobachter macht es zu einer Eigenschaft, die wir in diesem Beispiel nicht einmal berücksichtigt haben. Sie können die Verbindung vom ValidationManager-Objekt direkt auf den Controller ziehen, dort ein Ereignis hinzufügen, das dem Klicken auf eine Schaltfläche ähnelt, und den Status des Managers direkt im Controller verarbeiten. Wenn du es wirklich willst. Dies kann nützlich sein, wenn Sie nicht nur das Steuerelement sperren, sondern auch nützliche Arbeit leisten sollten (z. B. einen Marsch spielen oder AlertView anzeigen). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von allen TextEdit-Codes sollte nur beachtet werden, dass das Feld darauf achten muss, die Eigenschaft " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isValid</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">korrekt </font><b><font style="vertical-align: inherit;">festzulegen</font></b><font style="vertical-align: inherit;"> und die Methode " </font><b><font style="vertical-align: inherit;">verified ()</font></b><font style="vertical-align: inherit;"> " </font><b><font style="vertical-align: inherit;">abzurufen</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Von seinem Delegierten. </font><font style="vertical-align: inherit;">Beachten Sie jedoch, dass das Eingabefeld keinen Verweis auf das Managerobjekt verwendet, sondern eine Sammlung. </font><font style="vertical-align: inherit;">Auf diese Weise können Sie ein Eingabefeld an mehrere Manager binden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dementsprechend muss die Methode von jedem der Delegierten gezogen werden.</font></font><br>
<br>
<pre><code class="swift hljs">&nbsp; &nbsp; <span class="hljs-keyword">var</span> isValid: <span class="hljs-type">Bool</span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.text.verification(<span class="hljs-keyword">self</span>.expression, <span class="hljs-keyword">required</span>:<span class="hljs-keyword">self</span>.valueRequired)<font></font>
&nbsp; &nbsp; }<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-meta">@IBOutlet</span> <span class="hljs-keyword">var</span> validateDelegates: [<span class="hljs-type">IValidationManager</span>]?<font></font>
<font></font>
&nbsp; &nbsp; <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handleDelegateAction</span><span class="hljs-params">(<span class="hljs-number">_</span> sender: UITextField)</span></span> {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> list = <span class="hljs-keyword">self</span>.validateDelegates <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }<font></font>
<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-keyword">for</span> validateDelegate <span class="hljs-keyword">in</span> list {<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; validateDelegate.verificated()<font></font>
&nbsp; &nbsp; &nbsp; &nbsp; }<font></font>
&nbsp; &nbsp; }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie jetzt ein neues Formular mit Eingabefeldern erstellen müssen, müssen Sie nicht einmal benutzerdefinierte Eigenschaftswerte festlegen. Es reicht aus, die erforderlichen Runtime-Attribute in großen Mengen zu kopieren und auf ein neues Feld anzuwenden (vergessen Sie nicht, nur den Klassennamen zu ersetzen).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bx/lv/ux/bxlvuxtf5dzjngxyt_h-iq555q4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen kann der Trick mit dem „Objekt“ im Formularheader viel häufiger verwendet werden als nur zur Feldvalidierung - er reagiert mit MVP auf MVVM ohne Rx. </font><font style="vertical-align: inherit;">Die häufigste Verwendung ist die Netzwerkfreigabe und die Benachrichtigung über Änderungen im CoreData-Modell.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497874/index.html">David Heinemeyer Hansson (Basecamp, ReWork, Ruby on Rails) über die Funktionsweise</a></li>
<li><a href="../de497876/index.html">[Lesezeichen] Arbeiten mit Bildern im Web</a></li>
<li><a href="../de497878/index.html">Installieren Sie die GPL-Version von HPL mit OpenBLAS</a></li>
<li><a href="../de497880/index.html">Produktion von Material Icons für MacOSX Home Assistant auf Electron</a></li>
<li><a href="../de497882/index.html">Wie bekomme ich ein Interview oder warum bist du nicht eingestellt?</a></li>
<li><a href="../de497890/index.html">Microsoft 365 Virtual Training Day: Tauchen Sie in Microsoft-Teams ein</a></li>
<li><a href="../de497894/index.html">Microsoft Azure Virtual Training Day: Modernes Data Warehouse</a></li>
<li><a href="../de497896/index.html">Wir bewahren die Sicht an einem entfernten Standort mit einem Projektor anstelle eines Monitors - einige nicht offensichtliche Nuancen</a></li>
<li><a href="../de497900/index.html">SMR-Festplatten (gekachelt) ohne Angabe von SMR gingen an die Vertriebskanäle</a></li>
<li><a href="../de497904/index.html">UX-Forschung von RBS: unsere Erfahrungen, Fehler und Entdeckungen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>