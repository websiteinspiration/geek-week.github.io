<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖ üë®üèæ‚Äçü§ù‚Äçüë®üèΩ üôãüèæ Serializaci√≥n de Java: velocidad m√°xima sin una estructura de datos r√≠gida üíñ üë®üèº‚Äç‚úàÔ∏è üì∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nuestro equipo en Sberbank est√° desarrollando un servicio de datos de sesi√≥n que organiza el intercambio de un solo contexto de sesi√≥n Java entre apli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Serializaci√≥n de Java: velocidad m√°xima sin una estructura de datos r√≠gida</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/488612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nuestro equipo en Sberbank est√° desarrollando un servicio de datos de sesi√≥n que organiza el intercambio de un solo contexto de sesi√≥n Java entre aplicaciones distribuidas. Nuestro servicio necesita urgentemente una serializaci√≥n muy r√°pida de objetos Java, ya que esto es parte de nuestra tarea cr√≠tica. Inicialmente, nos vinieron a la mente: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buffers de protocolo de Google</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Thrift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Avro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y otros. Las primeras tres de estas bibliotecas requieren la serializaci√≥n de objetos para describir el esquema de sus datos. </font><font style="vertical-align: inherit;">CBOR tiene un nivel tan bajo que solo puede serializar valores escalares y sus conjuntos. </font><font style="vertical-align: inherit;">Lo que necesit√°bamos era una biblioteca de serializaci√≥n Java que "no hiciera demasiadas preguntas" y no forzara la clasificaci√≥n manual de objetos serializables "en √°tomos". </font><font style="vertical-align: inherit;">Quer√≠amos serializar objetos Java arbitrarios sin saber pr√°cticamente nada sobre ellos, y quer√≠amos hacer esto lo m√°s r√°pido posible. </font><font style="vertical-align: inherit;">Por lo tanto, organizamos una competencia por las soluciones de c√≥digo abierto disponibles para el problema de serializaci√≥n de Java.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/52/0t/82/520t82yicq9kayb7s3bovbktf04.png" alt="KDPV"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Competidores</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la competencia, seleccionamos las bibliotecas de serializaci√≥n Java m√°s populares, principalmente utilizando el formato binario, as√≠ como las bibliotecas que han funcionado bien en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otras </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revisiones de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> serializaci√≥n Java.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est√°ndar de Java</font></font></i></td>
<td> Java- ¬´ ¬ª,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>2</td>
<td><i>Jackson JSON</i></td>
<td> &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FasterXML/jackson-databind</a>,  Java-   JSON-.<br>
</td>
</tr>
<tr>
<td>3</td>
<td><i>Jackson JSON (with types)</i></td>
<td>  ,   ,    ,      full qualified  Java-.        JSON- (,  )  .<br>
<div class="spoiler"><b class="spoiler_title">,    JSON...</b><div class="spoiler_text"><pre><code class="javascript hljs">[
  <span class="hljs-string">"ru.sbrf.ufs.dto.PersonDto"</span>,<font></font>
  {<font></font>
    <span class="hljs-string">"firstName"</span>:<span class="hljs-string">"Ivan"</span>,
    <span class="hljs-string">"lastName"</span>:<span class="hljs-string">"Ivanov"</span><font></font>
  }<font></font>
]<font></font>
</code></pre></div></div><div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper();<font></font>
}<font></font>
</code></pre>:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper()<font></font>
            .enable(<font></font>
                    ACCEPT_SINGLE_VALUE_AS_ARRAY,<font></font>
                    ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,<font></font>
                    ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT,<font></font>
                    READ_UNKNOWN_ENUM_VALUES_AS_NULL,<font></font>
                    UNWRAP_SINGLE_VALUE_ARRAYS<font></font>
            )<font></font>
            .disable(<font></font>
                    FAIL_ON_INVALID_SUBTYPE,<font></font>
                    FAIL_ON_NULL_FOR_PRIMITIVES,<font></font>
                    FAIL_ON_IGNORED_PROPERTIES,<font></font>
                    FAIL_ON_UNKNOWN_PROPERTIES,<font></font>
                    FAIL_ON_NUMBERS_FOR_ENUMS,<font></font>
                    FAIL_ON_UNRESOLVED_OBJECT_IDS,<font></font>
                    WRAP_EXCEPTIONS<font></font>
            )<font></font>
            .enable(ALLOW_SINGLE_QUOTES)<font></font>
            .disable(FAIL_ON_EMPTY_BEANS)<font></font>
            .enable(MapperFeature.PROPAGATE_TRANSIENT_MARKER)<font></font>
            .setVisibility(FIELD, ANY)<font></font>
            .setVisibility(ALL, NONE)<font></font>
            .enableDefaultTyping(NON_FINAL);  <span class="hljs-comment">// !</span><font></font>
}<font></font>
</code></pre></div></div></td>
</tr>
<tr>
<td>4</td>
<td><i>Jackson Smile</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">FasterXML/jackson-dataformats-binary/smile</a>,   Jackson-,  Java-    JSON- ‚Äì Smile.<br>
</td>
</tr>
<tr>
<td>5</td>
<td><i>Jackson Smile (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>6</td>
<td><i>Bson4Jackson</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">michel-kraemer/bson4jackson</a>,   Jackson-,  Java-    JSON- ‚Äì BSON.<br>
</td>
</tr>
<tr>
<td>7</td>
<td><i>Bson4Jackson (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>8</td>
<td><i>BSON MongoDb</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mongodb/mongo-java-driver/bson</a>,&nbsp;&nbsp; Java-  BSON-.<br>
</td>
</tr>
<tr>
<td>9</td>
<td><i>Kryo</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">EsotericSoftware/kryo</a>,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>10</td>
<td><i>Kryo (unsafe)</i></td>
<td>  ,   ,      sun.misc.Unsafe   /.<br>
<div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text"> :<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.Input<font></font>
com.esotericsoftware.kryo.io.Output<font></font>
</code></pre>:<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.UnsafeInput<font></font>
com.esotericsoftware.kryo.io.UnsafeOutput</code></pre></div></div></td>
</tr>
<tr>
<td>11</td>
<td><i>FST</i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La biblioteca&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuedigerMoeller / serializaci√≥n r√°pida</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que convierte los objetos de Java a su propio formato binario.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (inseguro)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La misma biblioteca que la anterior, pero configurada para usar la clase sun.misc.Unsafe para acelerar la serializaci√≥n / deserializaci√≥n.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caracter√≠sticas de la configuraci√≥n de la biblioteca ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs">FSTConfiguration fst = FSTConfiguration.createDefaultConfiguration();
</code></pre>:<pre><code class="plaintext hljs">FSTConfiguration fst = FSTConfiguration.createUnsafeBinaryConfiguration();</code></pre></div></div></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trece</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un nio</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioteca odnoklassniki / one-nio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que convierte los objetos de Java en su propio formato binario.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (para persistir)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La misma biblioteca que la anterior, pero configurada de manera que incluya metainformaci√≥n detallada sobre la clase del objeto Java serializable en el resultado de la serializaci√≥n. </font><font style="vertical-align: inherit;">Esto puede ser solicitado durante el almacenamiento a largo plazo </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(por ejemplo, en la base de datos) antes de la deserializaci√≥n. </font><font style="vertical-align: inherit;">Es decir, el objetivo perseguido es el mismo que el de Jackson JSON (con tipos).</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caracter√≠sticas de la configuraci√≥n de la biblioteca ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithoutSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
SerializeStream out = <span class="hljs-keyword">new</span> SerializeStream( bufWithoutSerializers );<font></font>
out.writeObject(object);<font></font>
<span class="hljs-comment">// bufWithoutSerializers is the result</span>
</code></pre>:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
PersistStream out = <span class="hljs-keyword">new</span> PersistStream( bufWithSerializers );<font></font>
out.writeObject(object);<font></font>
bufWithSerializers = out.toByteArray();<font></font>
<span class="hljs-comment">// bufWithSerializers is the result</span>
</code></pre><br>
   <code>object</code>-  <code>result</code>&nbsp;  -:<br>
1) full qualified    <code>object</code>,<br>
2)     ,<br>
3) full qualified     ,<br>
4)        .<br>
  -  ,  One Nio   ,        .</div></div></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Aqu√≠ vamos!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carrera</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La velocidad es el criterio principal para evaluar las bibliotecas de serializaci√≥n de Java que participan en nuestra competencia improvisada. </font><font style="vertical-align: inherit;">Para evaluar objetivamente cu√°l de las bibliotecas de serializaci√≥n es m√°s r√°pida, tomamos </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datos reales de los registros de nuestro sistema y compilamos datos de sesi√≥n sint√©ticos de diferentes longitudes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : de 0 a 1 MB. </font><font style="vertical-align: inherit;">El formato de los datos era cadenas y conjuntos de bytes.</font></font><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mirando hacia el futuro, debe decirse que los ganadores y perdedores ya han aparecido en los tama√±os de objetos serializables de 0 a 10 KB. </font><font style="vertical-align: inherit;">Un aumento adicional en el tama√±o de los objetos a 1 MB no cambi√≥ el resultado de la competencia. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este sentido, para mayor claridad, los siguientes gr√°ficos del rendimiento de los serializadores Java est√°n limitados por el tama√±o de los objetos de 10 KB.</font></font></blockquote><i> ,    :</i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td>Intel<sup>R</sup>&nbsp;Core<sup>TM</sup> i7-6700 CPU, 3.4GHz, 8 cores</td>
</tr>
<tr>
<td></td>
<td>16 GB</td>
</tr>
<tr>
<td> </td>
<td>Microsoft Windows&nbsp;10&nbsp;(64-bit)</td>
</tr>
<tr>
<td>JRE</td>
<td>IBM J9 VM 1.7.0</td>
</tr>
</tbody></table></div><blockquote><strong>:</strong>   ,  IBM JRE    One Nio (   13  14).     <code>sun.reflect.MagicAccessorImpl</code>    <code>private</code>  <code>final</code> ( )  ,    . , IBM JRE      &nbsp;<code>sun.reflect.MagicAccessorImpl</code>,   ,     runtime .<br>
<br>
           (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Serialization-FAQ</a>,  One Nio   ),    fork  ,    &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  .   &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  fork-   <code>sun.misc.Unsafe</code>     .<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, en nuestra bifurcaci√≥n, se optimiz√≥ la serializaci√≥n de cadenas: las cadenas comenzaron a serializarse un 30-40% m√°s r√°pido cuando se trabajaba en IBM JRE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este sentido, en esta publicaci√≥n, todos los resultados de la biblioteca One Nio se obtuvieron en nuestro propio tenedor, y no en la biblioteca original.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La medici√≥n directa de la velocidad de serializaci√≥n / deserializaci√≥n se realiz√≥ utilizando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Microbenchmark Harness</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (JMH), una herramienta de OpenJDK para construir y ejecutar benchmark-s. </font><font style="vertical-align: inherit;">Para cada medici√≥n (un punto en el gr√°fico), se usaron 5 segundos para "calentar" la JVM y otros 5 segundos para las mediciones de tiempo, seguidas de un promedio. </font></font><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></b></i><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo de referencia de JMH sin algunos detalles</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializationPerformanceBenchmark</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@State( Scope.Benchmark )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parameters</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Param( {
            "Java standard",
            "Jackson default",
            "Jackson system",
            "JacksonSmile default",
            "JacksonSmile system",
            "Bson4Jackson default",
            "Bson4Jackson system",
            "Bson MongoDb",
            "Kryo default",
            "Kryo unsafe",
            "FST default",
            "FST unsafe",
            "One-Nio default",
            "One-Nio for persist"
        } )</span>
        <span class="hljs-keyword">public</span> String serializer;
        <span class="hljs-keyword">public</span> Serializer serializerInstance;<font></font>
<font></font>
        <span class="hljs-meta">@Param( { "0", "100", "200", "300", /*... */ "1000000" } )</span>  <span class="hljs-comment">// Toward 1 MB</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> sizeOfDto;
        <span class="hljs-keyword">public</span> Object dtoInstance;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serializedDto;<font></font>
<font></font>
        <span class="hljs-meta">@Setup( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
            serializerInstance = Serializers.getMap().get( serializer );<font></font>
            dtoInstance = DtoFactory.createWorkflowDto( sizeOfDto );<font></font>
            serializedDto = serializerInstance.serialize( dtoInstance );<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@TearDown( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
            serializerInstance = <span class="hljs-keyword">null</span>;<font></font>
            dtoInstance = <span class="hljs-keyword">null</span>;<font></font>
            serializedDto = <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serialization( Parameters parameters ) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> parameters.serializerInstance.serialize(<font></font>
                parameters.dtoInstance );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">unserialization</span><span class="hljs-params">( Parameters parameters )</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
        <span class="hljs-keyword">return</span> parameters.serializerInstance.deserialize(<font></font>
                parameters.serializedDto,<font></font>
                parameters.dtoInstance.getClass() );<font></font>
    }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es lo que sucedi√≥: </font><font style="vertical-align: inherit;">
Primero, observamos que las opciones de biblioteca que agregan metadatos adicionales al resultado de la serializaci√≥n son m√°s lentas que las configuraciones predeterminadas de las mismas bibliotecas (consulte las configuraciones "con tipos" y "para persistir"). </font><font style="vertical-align: inherit;">
En general, independientemente de la configuraci√≥n, </font><i><font style="vertical-align: inherit;">Jackson JSON y Bson4Jackson, que est√°n fuera de la carrera, se</font></i><font style="vertical-align: inherit;"> convierten en extra√±os de acuerdo con los resultados de la serializaci√≥n </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
Adem√°s, </font><i><font style="vertical-align: inherit;">Java Standard abandona la carrera en</font></i><font style="vertical-align: inherit;"> funci√≥n de los resultados de deserializaci√≥n </font><font style="vertical-align: inherit;">, ya que Para cualquier tama√±o de datos serializables, la deserializaci√≥n es mucho m√°s lenta que la competencia. </font><font style="vertical-align: inherit;">
Eche un vistazo m√°s de cerca a los participantes restantes: de </font><font style="vertical-align: inherit;">
acuerdo con los resultados de la serializaci√≥n, la biblioteca </font><i><font style="vertical-align: inherit;">FST</font></i><font style="vertical-align: inherit;"> cuenta con l√≠deres confiables</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/un/cl/x7/unclx7kgnmniixupznbhmuigcwi.png" alt="Racing - todos los participantes"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/ct/fm/cg/ctfmcgtlh9wo66vctatdvwujhzy.png" alt="Racing - excepto para extra√±os"></a><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y con un aumento en el tama√±o de los objetos, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "pisa los talones" </font><font style="vertical-align: inherit;">. Tenga en cuenta que para </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la opci√≥n "para persistir" es mucho m√°s lenta que la configuraci√≥n predeterminada para la velocidad de serializaci√≥n. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si observa la deserializaci√≥n, vemos que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pudo superar a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> al aumentar el tama√±o de los datos </font><font style="vertical-align: inherit;">. En el √∫ltimo, por el contrario, la configuraci√≥n no est√°ndar "insegura" realiza la deserializaci√≥n mucho m√°s r√°pido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para poner todos los puntos encima Y, veamos el resultado total de la serializaci√≥n y deserializaci√≥n: se </font><font style="vertical-align: inherit;">
hizo evidente que hay </font><u><font style="vertical-align: inherit;">dos l√≠deres inequ√≠vocos: </font></u><u><i><font style="vertical-align: inherit;">FST (inseguro)</font></i></u><u><font style="vertical-align: inherit;"> y </font></u><u><i><font style="vertical-align: inherit;">One Nio</font></i></u><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Si se </font><i><font style="vertical-align: inherit;">trata de</font></i><font style="vertical-align: inherit;"> objetos peque√±os </font><i><font style="vertical-align: inherit;">FST (inseguro)</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/zp/qq/mw/zpqqmwuxdlsb_gvl3orjyd1pyda.png" alt="Carreras - excepto para los de afuera (clasificaci√≥n general)"></a><br>
<br><font style="vertical-align: inherit;"></font><u><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i></u><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;conduce con confianza, luego, con el aumento en el tama√±o de los objetos serializables, comienza a ceder y, en √∫ltima instancia, es inferior a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><u><i><font style="vertical-align: inherit;">BSON MongoDb</font></i></u></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
toma la tercera posici√≥n con el aumento en el tama√±o de los objetos serializables </font><font style="vertical-align: inherit;">, aunque est√° casi dos veces </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por delante</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de los l√≠deres.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Peso</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tama√±o del resultado de la serializaci√≥n es el segundo criterio m√°s importante para evaluar las bibliotecas de serializaci√≥n de Java. En cierto modo, la velocidad de serializaci√≥n / deserializaci√≥n depende del tama√±o del resultado: es m√°s r√°pido formar y procesar un resultado compacto que uno de volumen. Para "sopesar" los resultados de la serializaci√≥n, se utilizaron los mismos objetos Java, formados a partir de datos reales tomados de los registros del sistema (cadenas y conjuntos de bytes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, una propiedad importante del resultado de la serializaci√≥n es tambi√©n cu√°nto se comprime bien (por ejemplo, guardarlo en la base de datos u otros almacenamientos). En nuestra competencia, utilizamos el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritmo de</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> compresi√≥n </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><i><font style="vertical-align: inherit;">Deflate</font></i></a><font style="vertical-align: inherit;"> , que es la base de ZIP y gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los resultados del "pesaje" fueron los siguientes:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/pb/ek/h-/pbekh-hfdtstyzpd2ttgtkfhb88.png" alt="Peso"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se espera que los resultados m√°s compactos fueron la serializaci√≥n de uno de los l√≠deres de la carrera: </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El segundo lugar en compacidad fue para </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(que obtuvo el tercer lugar en la carrera). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En tercer lugar en t√©rminos de compacidad, la biblioteca de </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "escap√≥" </font><font style="vertical-align: inherit;">, que previamente no hab√≠a demostrado su val√≠a en la carrera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los resultados de serializaci√≥n de estos 3 l√≠deres de "pesaje" tambi√©n est√°n perfectamente comprimidos (casi dos). </font><font style="vertical-align: inherit;">Result√≥ ser el m√°s incompresible: el equivalente binario de JSON es Smile y JSON. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un dato curioso: todos los ganadores del "pesaje" durante la serializaci√≥n agregan la misma cantidad de datos de servicio a los objetos serializables peque√±os y grandes.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flexibilidad</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de tomar una decisi√≥n responsable sobre la elecci√≥n de un ganador, decidimos verificar exhaustivamente la flexibilidad de cada serializador y su usabilidad. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para esto, compilamos 20 criterios para evaluar a nuestros serializadores que participan en la competencia para que "no se nos escape un solo mouse".</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/zd/t4/it/zdt4itoudhnnpfo7e2l9jdscwdo.png" alt="Flexibilidad"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notas al pie con explicaciones</font></font></b><div class="spoiler_text"><sup>1</sup>&nbsp; &nbsp; <i> <code>LinkedHashMap</code>.</i><br>
<sup>2</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>3</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>4</sup>&nbsp; &nbsp;<i>  <code>sun.reflect.MagicAccessorImpl</code> ‚Äî : boxing/unboxing,   <code>BigInteger/BigDecimal/String</code>.   <code>MagicAccessorImpl</code>&nbsp;(  ' fork One Nio) ‚Äî .</i><br>
<sup>5</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>.</i><br>
<sup>6</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>  <code>HashSet</code>      .</i><br>
<sup>7</sup>&nbsp; &nbsp;<i> <code>HashMap</code>.</i><br>
<sup>8</sup>&nbsp; &nbsp;<i>        ‚Äî ,     ,   /Map-,   (   <code>HashMap</code>).</i><br>
<sup>9</sup>&nbsp; &nbsp;<i>   -.</i><br>
<sup>10</sup>&nbsp;<i>   One Nio ‚Äî ,    ' fork- ‚Äî .</i><br>
<sup>11</sup> <i>     .</i><br>
</div></div><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Seg√∫n el criterio 13, One Nio (por persistir) recibi√≥ otro punto (19).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Este meticuloso "examen de los solicitantes" fue quiz√°s la etapa m√°s lenta de nuestro "casting". Pero entonces estos resultados de comparaci√≥n abren bien la conveniencia de usar bibliotecas de serializaci√≥n. Como consecuencia, puede usar estos resultados como referencia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fue una pena darse cuenta, pero nuestros l√≠deres de acuerdo con los resultados de las carreras y el pesaje:</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FST (inseguro)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- resultaron ser extra√±os en t√©rminos de flexibilidad ... Sin embargo, est√°bamos interesados ‚Äã‚Äãen un hecho curioso: un Nio en la configuraci√≥n ‚Äúpara persistir‚Äù (no el m√°s r√°pido ni el m√°s compacto) obtuvo la mayor cantidad de puntos en t√©rminos de flexibilidad - 19/20. La oportunidad de hacer que la configuraci√≥n predeterminada de One Nio funcione de manera flexible (r√°pida y compacta) tambi√©n parec√≠a muy atractiva, y hab√≠a una manera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al principio, cuando presentamos a los participantes a la competencia, se dijo que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (por persistir)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> incluido en el resultado de la serializaci√≥n </font><i><font style="vertical-align: inherit;">metainformaci√≥n</font></i><font style="vertical-align: inherit;"> detallada </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sobre la clase del objeto Java serializable</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(*) </font><font style="vertical-align: inherit;">Utilizando esta metainformaci√≥n para la deserializaci√≥n, la biblioteca One Nio sabe exactamente c√≥mo era la clase del objeto serializable en el momento de la serializaci√≥n. </font><font style="vertical-align: inherit;">Sobre la base de este conocimiento, el algoritmo de deserializaci√≥n One Nio es tan flexible que proporciona la m√°xima compatibilidad resultante de la serializaci√≥n </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Result√≥ que la metainformaci√≥n (*) se puede obtener por separado para la clase especificada, serializada&nbsp; </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;y enviada al lado donde se deserializar√°n los objetos Java de esta clase:</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Con c√≥digo en pasos ...</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">//  ‚Ññ1:  -   SomeDto</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = Repository.get( SomeDto.class );<font></font>
<span class="hljs-keyword">byte</span>[] dtoMeta = serializeByDefaultOneNioAlgorithm( dtoSerializerWithMeta );<font></font>
//  ‚Ññ<span class="hljs-number">1</span>:  dtoMeta  ‚Ññ<span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:  -    SomeDto      One Nio</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = deserializeByOneNio( dtoMeta );<font></font>
Repository.provideSerializer( dtoSerializerWithMeta );<font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ1:    SomeDto</span>
<span class="hljs-keyword">byte</span>[] bytes1 = serializeByDefaultOneNioAlgorithm( object1 );
<span class="hljs-keyword">byte</span>[] bytes2 = serializeByDefaultOneNioAlgorithm( object2 );<font></font>
...<font></font>
<span class="hljs-comment">//  ‚Ññ1:    ‚Ññ2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:      SomeDto</span><font></font>
SomeDto object1 = deserializeByOneNio( bytes1 );<font></font>
SomeDto object2 = deserializeByOneNio( bytes2 );<font></font>
...<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si realiza este procedimiento expl√≠cito para intercambiar metainformaci√≥n sobre clases entre servicios distribuidos, dichos servicios podr√°n enviarse objetos Java serializados entre s√≠ mediante la configuraci√≥n predeterminada (r√°pida y compacta) de One Nio. Despu√©s de todo, mientras se ejecutan los servicios, las versiones de las clases en sus lados no cambian, lo que significa que no hay necesidad de "arrastrar hacia adelante y hacia atr√°s" la metainformaci√≥n constante dentro de cada resultado de serializaci√≥n durante cada interacci√≥n. Por lo tanto, despu√©s de haber hecho un poco m√°s de acci√≥n al principio, puede usar la velocidad y la compacidad de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simult√°neamente con la flexibilidad de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (para persistir)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ¬°Exactamente lo que se necesita! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, para transferir objetos Java entre servicios distribuidos en forma serializada (esto es para lo que organizamos esta competencia)&nbsp;</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio fue el ganador en flexibilidad</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(19/20). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre los serializadores de Java que se distinguieron anteriormente en las carreras y el pesaje, no se demostr√≥ una gran flexibilidad:</font></font><br>
<br>
<ul>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(14.5 / 20),</font></font></li>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (13/20).</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedestal</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recordemos los resultados de anteriores concursos de serializaci√≥n de Java:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En las carreras, las dos primeras l√≠neas de la clasificaci√≥n se dividieron entre </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (inseguro)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tom√≥ el tercer lugar </font><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> derrot√≥ al pesaje </font><font style="vertical-align: inherit;">, seguido por </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En t√©rminos de flexibilidad, solo para nuestra tarea de intercambiar el contexto de sesi√≥n entre aplicaciones distribuidas, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> obtuvo el primer lugar nuevamente&nbsp; </font><font style="vertical-align: inherit;">, y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo se destacaron</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, en t√©rminos de la totalidad de los resultados obtenidos, el pedestal que obtuvimos es el siguiente:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
En la competencia principal, las carreras, comparti√≥ el primer lugar con </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (inseguro)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero pes√≥ significativamente al competidor en la flexibilidad de pesaje y prueba.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (inseguro)</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Tambi√©n es una biblioteca de serializaci√≥n Java muy r√°pida, sin embargo, carece de la compatibilidad directa y hacia atr√°s de los conjuntos de bytes resultantes de la serializaci√≥n.</font></font></li>
<li><strong>BSON MongoDB&nbsp;+&nbsp;Kryo</strong><br>
 2   3-      Java-,     .       2-   ,          .        <code>Collection</code>  <code>Map</code>,   <i>BSON MongoDB</i>     custom-  / (<code>Externalizable</code>  ..).</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En Sberbank, en nuestro servicio de datos de sesi√≥n, utilizamos la biblioteca </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que gan√≥ el primer lugar en nuestra competencia. Usando esta biblioteca, los datos de contexto de la sesi√≥n de Java se serializaron y transfirieron entre aplicaciones. Gracias a esta revisi√≥n, la velocidad del transporte de la sesi√≥n se ha acelerado varias veces. Las pruebas de carga mostraron que en escenarios cercanos al comportamiento real de los usuarios en Sberbank Online, se obtuvo una aceleraci√≥n de hasta el 40% solo debido a esta mejora. Tal resultado significa una reducci√≥n en el tiempo de respuesta del sistema a las acciones del usuario, lo que aumenta el grado de satisfacci√≥n de nuestros clientes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el pr√≥ximo art√≠culo intentar√© demostrar en acci√≥n la aceleraci√≥n adicional de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">derivado del uso de la clase </font></font><code>sun.reflect.MagicAccessorImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Desafortunadamente, IBM JRE no admite las propiedades m√°s importantes de esta clase, lo que significa que el potencial completo de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en esta versi√≥n de JRE a√∫n no se ha revelado. </font><font style="vertical-align: inherit;">Continuar√°.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es488602/index.html">MEETUP # 2 de iOS de FUNCORP y C√≥mo mantener actualizado a un desarrollador</a></li>
<li><a href="../es488604/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 402 (10 al 16 de febrero de 2020)</a></li>
<li><a href="../es488606/index.html">La verdadera esencia de los lagartos.</a></li>
<li><a href="../es488608/index.html">"GLORIA ZHPSS!" o recuerda GPSS World</a></li>
<li><a href="../es488610/index.html">La historia de una persona sensible a la radiaci√≥n electromagn√©tica, o c√≥mo sentimos el borde de un acantilado ... UPD: + FAQ</a></li>
<li><a href="../es488614/index.html">Bobbin 3.0.0 - revisi√≥n de mejoras</a></li>
<li><a href="../es488616/index.html">Problema nulo en ciencia de datos y aprendizaje autom√°tico</a></li>
<li><a href="../es488618/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 333 (10-16 de febrero)</a></li>
<li><a href="../es488622/index.html">¬øLos cheklists reemplazan las regulaciones?</a></li>
<li><a href="../es488624/index.html">Econom√≠a mutua</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>