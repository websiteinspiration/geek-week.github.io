<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👳 🍏 👃🏼 Comment créer vous-même une signature électronique 👩🏻‍🏭 🥝 👨🏽‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je ferai une réservation tout de suite - je suis presque un amateur en matière de signature numérique électronique (EDS). Récemment, poussé par la cur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment créer vous-même une signature électronique</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502992/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je ferai une réservation tout de suite - je suis presque un amateur en matière de signature numérique électronique (EDS). </font><font style="vertical-align: inherit;">Récemment, poussé par la curiosité naturelle, j'ai décidé de trier un peu cela et j'ai trouvé 100500 articles sur Internet sur le thème de l'obtention de certificats de signature numérique dans divers centres de certification, ainsi que de nombreuses instructions pour l'utilisation de diverses applications prêtes à l'emploi pour la signature de documents. </font><font style="vertical-align: inherit;">Dans certains endroits, il a été mentionné en passant qu'une signature non qualifiée peut être faite indépendamment si vous utilisez les services d'un "programmeur expérimenté".</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je voulais aussi devenir au moins un peu «expérimenté» et comprendre cette cuisine de l'intérieur. </font><font style="vertical-align: inherit;">Pour le plaisir, j'ai appris à générer des clés PGP, à signer des documents avec une signature non qualifiée et à vérifier son authenticité. </font><font style="vertical-align: inherit;">Comprenant qu'aucune Amérique n'est ouverte, je propose néanmoins ce petit tutoriel pour les amateurs qui sont les mêmes que moi en matière de travail avec EDS. </font><font style="vertical-align: inherit;">Je n'ai pas essayé particulièrement de me plonger dans la théorie et les détails, mais d'écrire juste une petite et brève introduction à la question. </font><font style="vertical-align: inherit;">Pour ceux qui travaillent déjà avec EDS, il est peu probable que cela soit intéressant, mais pour les débutants, pour la première connaissance - tout à fait.</font></font></p><a name="habracut"></a><br>
<h2 id="chto-takoe-elektronnaya-podpis"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qu'est-ce qu'une signature électronique</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tous les termes et définitions sont donnés dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , par conséquent, nous énoncerons tout, comme ils le disent, dans vos propres mots, sans prétendre à l'exactitude juridique absolue de la formulation.</font></font></p><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une signature numérique électronique (EDS)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un ensemble d'outils qui permettent de vérifier clairement que l'auteur d'un document (ou l'interprète d'une action) est exactement la personne qui se fait appeler l'auteur. En ce sens, l'EDS est complètement analogue à la signature traditionnelle: si le document «papier» habituel indique que son auteur est Ivanov et que la signature de Petrov est ci-dessous, vous pouvez à juste titre douter de la paternité d'Ivanov.</font></font></p><br>
<p>   <em></em>  <em></em>. <strong></strong>       ;    ( ),       —        .  , ,    ,        ,           ,                 .</p><br>
<p>           :      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>      (  ,   ).               (        )      ,       .   ,          :        ,       fetch-  ajax-   . ,          :        ,    .</p><br>
<p>   <strong></strong>  .      ; ,     ,       .    -      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> ( ,   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>),    :      <em>  </em>.      ;   <em> </em> (public key),   — <em> </em> (private key).  ,     ,       .</p><br>
<p> ,      (         ?     )  ,    ,        ,     .   ,  ,     ,           .      ,    , ,    .</p><br>
<p>  ,    <em>  </em>:    ,   —   .       (  )       .  , ,  ,     ,   - !             .         (  <em> </em>),        ,          .</p><br>
<p>    . ,          .     :   .    ( )         <em></em> . , ,     ,           ,       .</p><br>
<p><em>           .</em>    <em></em> (detach),         .    ,          - .</p><br>
<p>      ?     :  ,     <em></em> .  :</p><br>
<ul>
<li>      ;</li>
<li>  ,        ;</li>
<li>,     ,       (       ). !</li>
</ul><br>
<p>,  , ,     «». ,               .       ,             ,  .       <strong> </strong>:   ,    .        ,   ...</p><br>
<p>     . ,  ,   ,            (    ,   ).       (   ),         .  ,        ,   <em></em> (fingerprint),  ,  ,   . ,     ,    ,   ,   ,      .   ,       (  40  ).</p><br>
<p> , ,   ,           — ,   .       <strong> </strong>  .    :      <em> </em>,      <em></em>   (       ). ,  ,  <em>  </em> .</p><br>
<p>               ,      (,      )  ,     .  ,              (    ):       .</p><br>
<p>   ,       :    -   (, <em>  </em>)             . ,     ,              .</p><br>
<p> ,            (  )    (     ).    ,   <em></em>    (,         ).   (,  )     ,          ,                .</p><br>
<h2 id="generirovanie-otkrytogo-i-sekretnogo-klyuchey">    </h2><br>
<p>,              .  , ,    ,  (public key)   (private key).</p><br>
<p>      .   ,   ,  PGP (Pretty Good Privacy).     1991    ,         (, OpenPGP).         1999  GNU Privacy Guard (GnuPG,  GPG).  GPG        ;   - Windows  , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gpg4win</a>.     - .</p><br>
<p>   ,  (-  ,  - root') </p><br>
<pre><code class="plaintext hljs">gpg --full-generate-key</code></pre><br>
<p>         :</p><br>
<ul>
<li>    «RSA  RSA ( )»;</li>
<li>     ,     2048 ;</li>
<li>          « »;</li>
<li>       ,   , , <code>  </code>;      ;</li>
<li>     ,    .</li>
</ul><br>
<p>       GPG    ,      .   ,         ,  ,  GPG    .  ,    ,        ,       .</p><br>
<p>  (  , ,     ,   ,     )     :</p><br>
<pre><code class="plaintext hljs">gpg --export -a "  " &gt; public.key<font></font>
gpg --export-secret-key -a "  " &gt; private.key</code></pre><br>
<p>,  <code>private.key</code>     ,   <code>public.key</code>        .</p><br>
<h2 id="podpisanie-dokumenta"> </h2><br>
<p>  ,       (ASCII) :</p><br>
<pre><code class="plaintext hljs">gpg -ba __</code></pre><br>
<p>        ,         <code>asc</code>. , ,    <code>privet.doc</code>,       <code>privet.doc.asc</code>. ,  ,    <code>privet.sig</code>,   .</p><br>
<p>                 ,        , , :</p><br>
<pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/python</span>
<span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-keyword">from</span> Tkinter <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">from</span> tkFileDialog <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">import</span> os, sys, tkMessageBox<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">die</span>(<span class="hljs-params">event</span>):</span>
    sys.exit(<span class="hljs-number">0</span>)<font></font>
<font></font>
root = Tk()<font></font>
w = root.winfo_screenwidth()//<span class="hljs-number">2</span> - <span class="hljs-number">400</span>
h = root.winfo_screenheight()//<span class="hljs-number">2</span> - <span class="hljs-number">300</span>
root.geometry(<span class="hljs-string">"800x600+{}+{}"</span>.format(w, h))<font></font>
root.title(<span class="hljs-string">" "</span>)<font></font>
<font></font>
flName = askopenfilename(title=<span class="hljs-string">" ?"</span>)<font></font>
<font></font>
<span class="hljs-keyword">if</span> flName:<font></font>
    os.system(<span class="hljs-string">"gpg -ba "</span> + flName)<font></font>
    button = Button(text=<span class="hljs-string">" "</span>)<font></font>
    button.bind(<span class="hljs-string">"&lt;Button-1&gt;"</span>, die)<font></font>
    button.pack(expand=YES, anchor=CENTER)<font></font>
<span class="hljs-keyword">else</span>:<font></font>
    die()<font></font>
<font></font>
root.mainloop()</code></pre><br>
<h2 id="proverka-podpisi"> </h2><br>
<p> , ,        ,    (  )    ,    :</p><br>
<pre><code class="plaintext hljs">gpg --verify __ __</code></pre><br>
<p>     -    (,         ):</p><br>
<ul>
<li>  <code>public.key</code>  ,      ()    , ,   GPG;</li>
<li>-      ,   .</li>
</ul><br>
<p>  - (    ,       )        .</p><br>
<p>   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenPGP.js</a>;      (     — 506&nbsp;)  <code>dist/lightweight/openpgp.min.js</code>    html- (          meta-):</p><br>
<pre><code class="html hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"doc"</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"doc"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">"readDoc('doc')"</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"sig"</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sig"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">"readDoc('sig')"</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">disabled</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">"check()"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">output</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">output</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"openpgp.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"validate.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre><br>
<p>,      <code>public.key</code>    <code>openpgp.min.js</code>      ,    .</p><br>
<p>         <code>validate.js</code>:</p><br>
<pre><code class="javascript hljs"><span class="hljs-meta">"use strict"</span>;
<span class="hljs-keyword">let</span> cont   = {<span class="hljs-attr">doc</span>:<span class="hljs-string">''</span>, <span class="hljs-attr">sig</span>:<span class="hljs-string">''</span>},<font></font>
    flag   = {<span class="hljs-attr">doc</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">sig</span>:<span class="hljs-literal">false</span>},<font></font>
    pubkey = <span class="hljs-string">''</span>,<font></font>
    mess   = <span class="hljs-string">''</span>;<font></font>
<font></font>
<span class="hljs-comment">//    ( ),</span>
<span class="hljs-comment">//    ( )</span>
<span class="hljs-keyword">const</span> readDoc = <span class="hljs-function"><span class="hljs-params">contKey</span> =&gt;</span> {
    <span class="hljs-keyword">let</span> reader = <span class="hljs-keyword">new</span> FileReader();<font></font>
    reader.onload  = <span class="hljs-keyword">async</span> e =&gt; {<font></font>
        cont[contKey] = contKey == <span class="hljs-string">"sig"</span> ?<font></font>
                        e.target.result :<font></font>
                        <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(e.target.result);<font></font>
        flag[contKey] = <span class="hljs-literal">true</span>;<font></font>
        pubkey = <span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> fetch(<span class="hljs-string">"public.key"</span>)).text();   
        <span class="hljs-keyword">if</span> (flag[<span class="hljs-string">"doc"</span>] &amp;&amp; flag[<span class="hljs-string">"sig"</span>])
            <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"button"</span>).disabled = <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    reader.onerror = <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> alert(<span class="hljs-string">"  "</span>);<font></font>
<font></font>
    <span class="hljs-keyword">let</span> fileObj = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">`#<span class="hljs-subst">${contKey}</span>`</span>).files[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (contKey == <span class="hljs-string">"sig"</span>) reader.readAsText(fileObj);
    <span class="hljs-keyword">else</span>                  reader.readAsArrayBuffer(fileObj);<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//  </span>
<span class="hljs-keyword">const</span> check = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {   
       <span class="hljs-keyword">const</span> verified = <span class="hljs-keyword">await</span> openpgp.verify({
           <span class="hljs-attr">message</span>:    openpgp.message.fromBinary(cont[<span class="hljs-string">"doc"</span>]),
           <span class="hljs-attr">signature</span>:  <span class="hljs-keyword">await</span> openpgp.signature.readArmored(cont[<span class="hljs-string">"sig"</span>]),
           <span class="hljs-attr">publicKeys</span>: (<span class="hljs-keyword">await</span> openpgp.key.readArmored(pubkey)).keys<font></font>
       });<font></font>
       <span class="hljs-keyword">const</span> {valid} = verified.signatures[<span class="hljs-number">0</span>];<font></font>
       mess = <span class="hljs-string">"    !"</span>;
       <span class="hljs-keyword">if</span> (valid) mess = <span class="hljs-string">"   ."</span>;<font></font>
    } <span class="hljs-keyword">catch</span>(e) {mess = <span class="hljs-string">"    ."</span>;}
    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"output"</span>).innerHTML = mess;<font></font>
}</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En fait, c'est tout. </font><font style="vertical-align: inherit;">Maintenant, conformément à la clause 5.23 de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GOST 7.0.97-2016</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">vous pouvez </font><font style="vertical-align: inherit;">placer cette belle image sur le document (à l'endroit où devrait se trouver la signature manuscrite):</font></font></p><br>
<img src="https://habrastorage.org/webt/bg/hu/y4/bghuy4lxzflngh1dcjflds_fpei.png" width="300"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502978/index.html">Jeu de couleurs sans l'aide d'un designer</a></li>
<li><a href="../fr502980/index.html">ORL et intrigue dans des jeux sans intrigue sur l'exemple de Throne: Kingdom at War</a></li>
<li><a href="../fr502984/index.html">Comment choisir un psychologue / psychothérapeute?</a></li>
<li><a href="../fr502986/index.html">F #, augmentant le contraste de l'image en alignant les histogrammes</a></li>
<li><a href="../fr502988/index.html">Expert en affaires et programmation. La combinaison ne peut pas être partagée</a></li>
<li><a href="../fr502994/index.html">Ce que Microsoft a présenté aux développeurs de Build: winget, programmes GUI dans WSL2 et plus</a></li>
<li><a href="../fr502998/index.html">Nous faisons fonctionner le plugin des services gouvernementaux pour tous les utilisateurs dans un environnement de terminal</a></li>
<li><a href="../fr503000/index.html">Développer des compétences privées pour Alice. Ce qui n'est pas enseigné à l'école d'Alice</a></li>
<li><a href="../fr503004/index.html">9 annonces majeures de la conférence Microsoft Build 2020</a></li>
<li><a href="../fr503010/index.html">Langage de script JavaPath pour accéder à des structures de données complexes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>