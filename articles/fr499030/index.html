<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤮 🕵🏿 🤛🏼 Surveillance des performances de MySQL pour Grafana sur isic en 20 minutes 🗳️ 😙 🐣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, cher habryanin et une autre recette pour ce suivi savoureux et sain! 
 
 Je m'appelle Mikhail Andrianov et je travaille en tant que directeur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Surveillance des performances de MySQL pour Grafana sur isic en 20 minutes</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499030/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, cher habryanin et une autre recette pour ce suivi savoureux et sain! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je m'appelle Mikhail Andrianov et je travaille en tant que directeur technique depuis 7 ans chez Emarsys. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous travaillons souvent avec le client et nos bases de données, nous devons donc souvent les surveiller afin que nos clients et nous puissions vivre et travailler en paix.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et donc l'idée m'est venue de partager avec vous une recette pour déployer un système de surveillance assez courant dans le monde de MySQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici à quoi pourrait ressembler cette beauté: </font></font><br>
<br>
<img src="http://suite16.emarsys.net/custloads/765018014/md_894868.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tous les tableaux de bord sont déjà inclus dans la recette, et vous n'avez pas besoin de les sculpter. </font><font style="vertical-align: inherit;">En fait, il vous suffit de tout configurer correctement et de plonger tête baissée dans le monde des graphiques et des tableaux chics. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc, pour la préparation, nous avons besoin de: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mysql&gt; 5.6 (c'est possible et plus jeune, mais vous devez corriger quelque chose dans les requêtes) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grafana&gt; 6.7.1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ubuntu / MS Windows au goût</font></font><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Première étape</font></font></h3><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons mis en place une base de données pour stocker les journaux.</font></font></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
La base de la base de service, j'ai inclus un </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">my2Collector</font></font></a> </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pratique et facile à préparer </font><font style="vertical-align: inherit;">du maître de la cuisine italienne MeSql </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meo</font></font></a><br>
<br>
<pre><code class="bash hljs">mysql --user=root -pXXX &lt; my2.sql
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* J'utiliserai les commandes de mon bien-aimé Ubuntu 16. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous ne pouvez pas donner à l'utilisateur mes droits d'administrateur my2 - on verra plus tard qu'il peut vous arriver sur le côté.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Lorsque la base de données est hors du vidage, je vous recommande de vous familiariser avec les procédures qui mettent à jour les données qu'elle </font><i><font style="vertical-align: inherit;">contient</font></i><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En particulier, la procédure</font></font><br>
<br>
<pre><code class="plaintext hljs"> `collect_stats`()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est conseillé d'augmenter la fréquence de la demande à 5 minutes. </font><font style="vertical-align: inherit;">Vous aurez donc des données plus pertinentes sur l'état de la base de données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant que le moteur de collecte de statistiques est en cours d'exécution, vous pouvez passer à la connexion de cette source à Grafana.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Étape deux</font></font></h3><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous connectons Grafana à la base de données avec des journaux,</font></font></b> <br>
<br>
<img src="https://suite16.emarsys.net/custloads/765018014/md_894879.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
tout est standard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Choisissez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL Data Source</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Next ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
URL, utilisateur, mot de passe </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
** </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous pouvez voir que l'utilisateur que nous utilisons pour collecter les journaux et restreindre uniquement l'accès en lecture performance.schema et écrire dans la base de données my2, nous les utilisons dans Grafana </font><font style="vertical-align: inherit;">Ainsi, vous pouvez éviter de compromettre votre base si vous perdez l'accès à Grafana.</font></font><br>
</i><br>
<br>
<hr><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Troisième étape</font></font></h3><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration des tableaux de bord</font></font></b> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ai délibérément choisi le moyen de configuration le plus rapide et le plus pratique, afin de ne pas être patient. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, tournez-vous vers Meo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Son tableau de bord s'appelle </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2MySQL Simple Dashboard.</font></font></a></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Le moyen le plus pratique de définir des tableaux de bord dans Grafana est, bien sûr, d'importer l'objet de paramètres JSON. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour terminer cette étape simple:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Télécharger </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">JSON</font></a><font style="vertical-align: inherit;"> lui-même</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a> </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrons dans la gestion des tableaux de bord Dashaboards -&gt; Manage</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sélectionnez Importer et chargez l'objet à partir du fichier téléchargé.</font></font></li>
</ol><br>
<img src="http://suite16.emarsys.net/custloads/765018014/md_894885.png" alt="image"><br>
<br>
<img src="http://suite16.emarsys.net/custloads/765018014/md_894886.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons maintenant un beau panneau prêt à l'emploi avec des visualisations de données très efficaces. </font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La flexibilité de Grafana permet de modifier facilement chaque panneau, et les variables intégrées dans 2MySQL Simple Dashboard aident à ajuster immédiatement les panneaux aux utilisateurs et processus qui sont les plus intéressés, par exemple, pour suivre des utilisateurs spécifiques de la base de données sur des panneaux ou tableaux de bord séparés. </font></font><br>
<br>
<img src="http://suite16.emarsys.net/custloads/765018014/md_894897.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'étape suivante consiste à configurer des alertes pour le tableau de bord créé. </font><font style="vertical-align: inherit;">Je vais omettre ce processus, laissant à la discrétion de tous ceux qui décident de suivre le chemin décrit. </font><font style="vertical-align: inherit;">Toutes les alertes sont configurées au niveau de chaque panneau spécifique. </font></font><br>
<br>
<img src="http://suite16.emarsys.net/custloads/765018014/md_894898.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme promis, le déploiement se déroule assez rapidement et sans danser avec un tambourin. </font><font style="vertical-align: inherit;">Je serai heureux des ajouts à ma recette de habrovtsev expérimenté, en particulier en ce qui concerne alerts'ov.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr499010/index.html">Nous étudions le moteur VoIP Mediastreamer2. Partie 11</a></li>
<li><a href="../fr499014/index.html">23 questions difficiles pour les interviews JavaScript</a></li>
<li><a href="../fr499016/index.html">Intégration avec ESIA pour .Net: plus simple qu'il n'y paraît</a></li>
<li><a href="../fr499018/index.html">6 applications de sport à domicile</a></li>
<li><a href="../fr499020/index.html">Une étude d'un comportement vague</a></li>
<li><a href="../fr499032/index.html">Comment utiliser Prometheus pour détecter des anomalies dans GitLab</a></li>
<li><a href="../fr499034/index.html">Comment déployer un refactoring dangereux pour produire avec un million d'utilisateurs?</a></li>
<li><a href="../fr499036/index.html">Travail du prestataire: une sélection de supports sur les protocoles, les infrastructures informatiques et réseau</a></li>
<li><a href="../fr499038/index.html">Mon expérience avec un moniteur vertical</a></li>
<li><a href="../fr499040/index.html">Lire le week-end: une sélection de documents sur l'histoire du DNS, de la réglementation informatique et du matériel 1cloud.ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>