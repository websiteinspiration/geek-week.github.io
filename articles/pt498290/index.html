<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äç‚öñÔ∏è ü§Ω üå™Ô∏è Hidrologia processual: simula√ß√£o din√¢mica de rios e lagos üè® ü§¶ üß°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota: o c√≥digo fonte completo do projeto est√° publicado no Github [ aqui ]. O reposit√≥rio tamb√©m cont√©m informa√ß√µes detalhadas sobre como ler e usar o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Hidrologia processual: simula√ß√£o din√¢mica de rios e lagos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498290/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93d/664/fbe/93d664fbe19ce63dfa6b60d9621d07ae.png"></div><blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥digo fonte completo do projeto est√° publicado no Github [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]. </font><font style="vertical-align: inherit;">O reposit√≥rio tamb√©m cont√©m informa√ß√µes detalhadas sobre como ler e usar o c√≥digo.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s implementar a simula√ß√£o de eros√£o hidr√°ulica baseada em part√≠culas, decidi que seria poss√≠vel expandir esse conceito para simular outros aspectos da hidrologia da superf√≠cie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu pesquisei os m√©todos existentes de gera√ß√£o processual de rios e lagos, mas os resultados encontrados n√£o me agradaram. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O principal objetivo de muitos m√©todos √© criar sistemas fluviais (muito bonitos) usando v√°rios algoritmos (√†s vezes baseados em um mapa de eleva√ß√£o ou problema inverso criado anteriormente), mas eles n√£o possuem uma forte rela√ß√£o realista entre a topografia e a hidrologia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, o processamento do modelo da √°gua no relevo como um todo √© considerado em alguns recursos e √© utilizada uma simula√ß√£o de fluidos altamente complexos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, demonstrarei minha tentativa de superar esses problemas com uma t√©cnica que amplia a capacidade de simular a eros√£o hidr√°ulica baseada em part√≠culas. </font><font style="vertical-align: inherit;">Explicarei tamb√©m como, em geral, resolvo o problema da ‚Äú√°gua no al√≠vio‚Äù. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No meu m√©todo, luto pela simplicidade e pelo realismo √† custa de um ligeiro aumento na complexidade do sistema de eros√£o subjacente. </font><font style="vertical-align: inherit;">Eu recomendo a leitura do meu artigo anterior sobre este sistema [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tradu√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em Habr√©], porque o novo modelo √© baseado nele.</font></font><br>
<a name="habracut"></a><br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology6.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este sistema √© capaz de gerar rapidamente um terreno de apar√™ncia muito realista com hidrologia. </font><font style="vertical-align: inherit;">Este v√≠deo foi renderizado em tempo real. </font><font style="vertical-align: inherit;">O sistema √© capaz de gerar um n√∫mero infinito de tais paisagens.</font></font></i><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Explica√ß√£o:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como n√£o sou ge√≥logo, criei o sistema com base no meu conhecimento.</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conceito de hidrologia</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quero criar um sistema generativo que possa simular muitos fen√¥menos geogr√°ficos, incluindo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Migra√ß√£o de rios e riachos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cachoeiras naturais</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forma√ß√£o Canyon</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Incha√ßo do solo e v√°rzea</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consequentemente, os sistemas de hidrologia e topografia devem ser din√¢micos e intimamente relacionados. </font><font style="vertical-align: inherit;">O sistema de eros√£o hidr√°ulica baseado em part√≠culas j√° possui os aspectos b√°sicos necess√°rios para isso:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O al√≠vio afeta o movimento da √°gua</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eros√£o e sedimenta√ß√£o afetam o terreno</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, este sistema simula a eros√£o causada pela chuva, mas n√£o √© capaz de transmitir muitas outras influ√™ncias:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em um </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fluxo em</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> movimento </font><strong><font style="vertical-align: inherit;">, a</font></strong><font style="vertical-align: inherit;"> √°gua se comporta de maneira diferente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em uma </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">piscina em</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> p√© </font><strong><font style="vertical-align: inherit;">, a</font></strong><font style="vertical-align: inherit;"> √°gua se comporta de maneira diferente</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mencionarei frequentemente </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥rregos</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">piscinas</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Assume-se no modelo que estes s√£o fen√¥menos bidimensionais em larga escala. </font><font style="vertical-align: inherit;">Eles reduzem bastante a complexidade do modelo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A maioria dos fen√¥menos geogr√°ficos acima pode ser transmitida usando o modelo de fluxos e bacias. </font><font style="vertical-align: inherit;">Idealmente, eles deveriam emprestar e aprimorar o realismo de um sistema baseado em part√≠culas.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo hidrol√≥gico simplificado</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Armazenar informa√ß√µes sobre fluxos e conjuntos em uma ou mais estruturas de dados (gr√°ficos, objetos etc.) √© muito complexo e limita nossos recursos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, nosso modelo hidrol√≥gico consiste em dois mapas: </font><strong><font style="vertical-align: inherit;">mapas de </font></strong></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fluxo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mapas de bacias</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o esque√ßa que eles s√£o modelados como sistemas 2D.</font></font></blockquote><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapas de Stream e Pool</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mapa de fluxo descreve a √°gua corrente na superf√≠cie (c√≥rregos e rios). </font><font style="vertical-align: inherit;">Ele armazena as posi√ß√µes m√©dias das part√≠culas no mapa. </font><font style="vertical-align: inherit;">Informa√ß√µes antigas est√£o sendo exclu√≠das lentamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O mapa da bacia descreve a √°gua parada na superf√≠cie (po√ßas, lagoas, lagos, oceanos). </font><font style="vertical-align: inherit;">Ele armazena a profundidade da √°gua na posi√ß√£o correspondente do mapa.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: os</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mapas de fluxo e pool s√£o matrizes do mesmo tamanho que o mapa de altura.</font></font></blockquote><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/869/209/77f/86920977ff555d0cf5a2e0a923d79207.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√≠vio com impacto hidrol√≥gico. </font><font style="vertical-align: inherit;">A camada de √°gua na renderiza√ß√£o √© retirada de mapas hidrol√≥gicos.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0f1/2a1/1c2/0f12a11c2164cc93995a9f5599b1a7a9.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapas hidrol√≥gicos combinados. </font><font style="vertical-align: inherit;">Azul claro √© um mapa de fluxo; azul escuro √© um mapa de piscina. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses mapas s√£o gerados e conectados por part√≠culas que movem a √°gua ao longo do terreno. </font><font style="vertical-align: inherit;">A adi√ß√£o desses mapas hidrol√≥gicos tamb√©m nos fornece informa√ß√µes independentes do tempo que permitem a intera√ß√£o de part√≠culas com sua simula√ß√£o separadamente. </font><font style="vertical-align: inherit;">As part√≠culas podem interagir atrav√©s do uso desses cart√µes para obter par√¢metros que afetam seu movimento. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o mapa do fluxo √© exibido ap√≥s passar pela fun√ß√£o de facilidade de entrada e √© renderizado no terreno com base nisso. </font><font style="vertical-align: inherit;">Para obter fluxos mais finos / mais n√≠tidos (ou ignorar valores mais baixos em grandes √°reas planas), essa exibi√ß√£o pode ser modificada ou definir valores-limite para ele.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ågua como uma part√≠cula</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √°gua √© apresentada na forma de uma massa discreta (‚Äúpart√≠culas‚Äù) com volume e movendo-se ao longo da superf√≠cie do relevo. </font><font style="vertical-align: inherit;">Possui v√°rios par√¢metros que afetam seu movimento (fric√ß√£o, taxa de evapora√ß√£o, taxa de deposi√ß√£o, etc.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa √© a estrutura b√°sica de dados usada para simular a hidrologia. </font><font style="vertical-align: inherit;">As part√≠culas </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s√£o </font><strong><font style="vertical-align: inherit;">armazenadas</font></strong><font style="vertical-align: inherit;"> , mas s√£o usadas apenas para intera√ß√£o entre mapas de alturas, fluxos e piscinas. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conceito de part√≠cula √© explicado em mais detalhes em uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postagem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> anterior </font><font style="vertical-align: inherit;">[ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tradu√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em Habr√©] (e um n√∫mero infinito de outros recursos).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ciclo hidrol√≥gico e intera√ß√£o do mapa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os mapas interagem entre si atrav√©s de um ciclo hidrol√≥gico. </font><font style="vertical-align: inherit;">O ciclo hidrol√≥gico consiste nas seguintes etapas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando uma part√≠cula no terreno</font></font></li>
<li><strong></strong>        (.. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">     </a>).</li>
<li>        ,                  <strong></strong>.</li>
<li>  ,           <strong></strong>.</li>
<li> ,     (    )      .</li>
<li>     .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em todo o sistema, existem apenas dois algoritmos: </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descida (descida)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inunda√ß√£o (inunda√ß√£o)</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As part√≠culas descendentes alteram o mapa dos fluxos e as part√≠culas de inunda√ß√£o alteram o mapa das bacias. </font><font style="vertical-align: inherit;">Esses algoritmos s√£o descritos em detalhes abaixo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/989/a81/2cb/989a812cb5d769edbb76fd5a284d18b1.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagrama unidimensional do modelo hidrol√≥gico. </font><font style="vertical-align: inherit;">As part√≠culas s√£o criadas no terreno e processadas ciclicamente por dois algoritmos: Descida e Inunda√ß√£o. </font><font style="vertical-align: inherit;">No processo, os mapas das bacias e fluxos mudam, afetando, por sua vez, o movimento das part√≠culas.</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementa√ß√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo, explicarei a implementa√ß√£o completa do sistema usado para gerar os resultados e apresentarei exemplos de c√≥digo. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mostrarei apenas trechos de c√≥digo relevantes. </font><font style="vertical-align: inherit;">Mais informa√ß√µes podem ser encontradas no reposit√≥rio no Github. </font><font style="vertical-align: inherit;">Todas as partes relevantes do c√≥digo est√£o no arquivo "water.h".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classe de part√≠culas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A estrutura da part√≠cula Drop √© id√™ntica √† estrutura do sistema anterior. </font><font style="vertical-align: inherit;">Agora, descida e inunda√ß√£o s√£o membros da estrutura porque agem apenas em uma part√≠cula de cada vez.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Drop</span>{</span><font></font>
  <font></font>
  <span class="hljs-comment">//... constructors</span><font></font>
<font></font>
  <span class="hljs-keyword">int</span> index;                         <span class="hljs-comment">//Flat Array Index</span>
  glm::vec2 pos;                     <span class="hljs-comment">//2D Position</span>
  glm::vec2 speed = glm::vec2(<span class="hljs-number">0.0</span>);
  <span class="hljs-keyword">double</span> volume = <span class="hljs-number">1.0</span>;
  <span class="hljs-keyword">double</span> sediment = <span class="hljs-number">0.0</span>;<font></font>
<font></font>
  <span class="hljs-comment">//... parameters</span>
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> volumeFactor = <span class="hljs-number">100.0</span>; <span class="hljs-comment">//"Water Deposition Rate"</span><font></font>
<font></font>
  <span class="hljs-comment">//Hydrological Cycle Functions</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">descend</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* h, <span class="hljs-keyword">double</span>* stream, <span class="hljs-keyword">double</span>* pool, <span class="hljs-keyword">bool</span>* track, glm::ivec2 dim, <span class="hljs-keyword">double</span> scale)</span></span>;
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">flood</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* h, <span class="hljs-keyword">double</span>* pool, glm::ivec2 dim)</span></span>;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um par√¢metro adicional √© o fator de volume, que determina como a inunda√ß√£o transfere o volume para o n√≠vel da √°gua.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmo de descida</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo de descida √© quase o mesmo que o algoritmo simples de eros√£o de part√≠culas. </font><font style="vertical-align: inherit;">Ele recebe ‚Äútrack‚Äù adicional de entrada - uma matriz na qual ele escreve todas as posi√ß√µes visitadas por ele. </font><font style="vertical-align: inherit;">Uma matriz √© necess√°ria para criar mapas de fluxo no futuro.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Drop::descend</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* h, <span class="hljs-keyword">double</span>* stream, <span class="hljs-keyword">double</span>* pool, <span class="hljs-keyword">bool</span>* track, glm::ivec2 dim, <span class="hljs-keyword">double</span> scale)</span></span>{<font></font>
<font></font>
  glm::ivec2 ipos; <font></font>
<font></font>
  <span class="hljs-keyword">while</span>(volume &gt; minVol){<font></font>
<font></font>
    ipos = pos; <span class="hljs-comment">//Initial Position</span>
    <span class="hljs-keyword">int</span> ind = ipos.x*dim.y+ipos.y; <span class="hljs-comment">//Flat Array Index</span><font></font>
<font></font>
    <span class="hljs-comment">//Register Position</span>
    track[ind] = <span class="hljs-literal">true</span>;<font></font>
<font></font>
    <span class="hljs-comment">//...</span><font></font>
  }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O conjunto de par√¢metros √© modificado pelos mapas de fluxo e conjunto:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//...</span>
  <span class="hljs-comment">//Effective Parameter Set</span>
  <span class="hljs-keyword">double</span> effD = depositionRate;
  <span class="hljs-keyword">double</span> effF = friction*(<span class="hljs-number">1.0</span><span class="hljs-number">-0.5</span>*stream[ind]);
  <span class="hljs-keyword">double</span> effR = evapRate*(<span class="hljs-number">1.0</span><span class="hljs-number">-0.2</span>*stream[ind]);
<span class="hljs-comment">//...</span></code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Descobri que essa altera√ß√£o de par√¢metro funciona bem.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No sistema anterior, as part√≠culas poderiam sair deste ciclo e serem destru√≠das apenas com completa evapora√ß√£o ou indo al√©m dos limites do relevo. </font><font style="vertical-align: inherit;">Agora, duas condi√ß√µes de sa√≠da adicionais foram adicionadas aqui:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//... nind is the next position after moving the particle</span><font></font>
  <font></font>
  <span class="hljs-comment">//Out-Of-Bounds</span>
  <span class="hljs-keyword">if</span>(!glm::all(glm::greaterThanEqual(pos, glm::vec2(<span class="hljs-number">0</span>))) ||<font></font>
     !glm::all(glm::lessThan((glm::ivec2)pos, dim))){<font></font>
       volume = <span class="hljs-number">0.0</span>;
       <span class="hljs-keyword">break</span>;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//Slow-Down</span>
  <span class="hljs-keyword">if</span>(stream[nind] &gt; <span class="hljs-number">0.5</span> &amp;&amp; length(acc) &lt; <span class="hljs-number">0.01</span>)
    <span class="hljs-keyword">break</span>;<font></font>
<font></font>
  <span class="hljs-comment">//Enter Pool</span>
  <span class="hljs-keyword">if</span>(pool[nind] &gt; <span class="hljs-number">0.0</span>)
    <span class="hljs-keyword">break</span>;<font></font>
<font></font>
<span class="hljs-comment">//...</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se a part√≠cula n√£o possui acelera√ß√£o suficiente e √© cercada por outras part√≠culas, ou entra diretamente na piscina, completa prematuramente a descida com todo o volume restante e prossegue para o algoritmo de inunda√ß√£o.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: a</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> condi√ß√£o de transbordamento tamb√©m redefine o volume para que as part√≠culas n√£o passem para o algoritmo de inunda√ß√£o.</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritmo de inunda√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma part√≠cula com o volume restante pode inundar de sua posi√ß√£o atual. Isso acontece se ele parar de descer (n√£o h√° acelera√ß√£o) ou entrar em um pool existente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O algoritmo de inunda√ß√£o transfere o volume da part√≠cula para o aumento do n√≠vel da √°gua, alterando o mapa da bacia. A t√©cnica √© aumentar gradualmente o n√≠vel da √°gua em uma fra√ß√£o do volume da part√≠cula usando o "plano de teste". √Ä medida que o n√≠vel da √°gua aumenta, o volume de part√≠culas diminui.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c28/908/ebc/c28908ebc4f1efee43232578962beed2.gif"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anima√ß√£o de algoritmo de inunda√ß√£o. O plano de teste e o n√≠vel da √°gua aumentam gradualmente, reduzindo o volume de part√≠culas. Se um vazamento for encontrado, o volume restante ser√° movido para o ponto de vazamento para realizar a descida.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em cada etapa, realizamos um preenchimento de inunda√ß√£o a partir da posi√ß√£o da part√≠cula (ou seja, verificamos recursivamente as posi√ß√µes dos vizinhos), adicionando todas as posi√ß√µes localizadas acima do plano original (n√≠vel atual da √°gua) e abaixo do plano de teste ao "conjunto de inunda√ß√£o". Esta √© a √°rea de al√≠vio que faz parte da piscina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante o preenchimento, verificamos vazamentos. Estes s√£o pontos do conjunto de inunda√ß√µes que est√£o abaixo do plano de teste E do plano original. Se encontrarmos v√°rios pontos de vazamento, selecionamos o mais baixo.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Drop::flood</span><span class="hljs-params">(<span class="hljs-keyword">double</span>* height, <span class="hljs-keyword">double</span>* pool, glm::ivec2 dim)</span></span>{<font></font>
<font></font>
  index = (<span class="hljs-keyword">int</span>)pos.x*dim.y + (<span class="hljs-keyword">int</span>)pos.y;
  <span class="hljs-keyword">double</span> plane = height[index] + pool[index];  <span class="hljs-comment">//Testing Plane</span>
  <span class="hljs-keyword">double</span> initialplane = plane;                 <span class="hljs-comment">//Water Level</span><font></font>
<font></font>
  <span class="hljs-comment">//Flood Set</span>
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-built_in">set</span>;
  <span class="hljs-keyword">int</span> fail = <span class="hljs-number">10</span>; <span class="hljs-comment">//Just in case...</span><font></font>
<font></font>
  <span class="hljs-comment">//Iterate while particle still has volume</span>
  <span class="hljs-keyword">while</span>(volume &gt; minVol &amp;&amp; fail){<font></font>
<font></font>
    <span class="hljs-built_in">set</span>.clear();
    <span class="hljs-keyword">bool</span> tried[dim.x*dim.y] = {<span class="hljs-literal">false</span>};<font></font>
<font></font>
    <span class="hljs-comment">//Lowest Drain</span>
    <span class="hljs-keyword">int</span> drain;
    <span class="hljs-keyword">bool</span> drainfound = <span class="hljs-literal">false</span>;<font></font>
<font></font>
    <span class="hljs-comment">//Recursive Flood-Fill Function</span>
    <span class="hljs-built_in">std</span>::function&lt;<span class="hljs-keyword">void</span>(<span class="hljs-keyword">int</span>)&gt; fill = [&amp;](<span class="hljs-keyword">int</span> i){<font></font>
<font></font>
      <span class="hljs-comment">//Out of Bounds</span>
      <span class="hljs-keyword">if</span>(i/dim.y &gt;= dim.x || i/dim.y &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
      <span class="hljs-keyword">if</span>(i%dim.y &gt;= dim.y || i%dim.y &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Position has been tried</span>
      <span class="hljs-keyword">if</span>(tried[i]) <span class="hljs-keyword">return</span>;<font></font>
      tried[i] = <span class="hljs-literal">true</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Wall / Boundary of the Pool</span>
      <span class="hljs-keyword">if</span>(plane &lt; height[i] + pool[i]) <span class="hljs-keyword">return</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Drainage Point</span>
      <span class="hljs-keyword">if</span>(initialplane &gt; height[i] + pool[i]){<font></font>
<font></font>
        <span class="hljs-comment">//No Drain yet</span>
        <span class="hljs-keyword">if</span>(!drainfound)<font></font>
          drain = i;<font></font>
<font></font>
        <span class="hljs-comment">//Lower Drain</span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( pool[drain] + height[drain] &lt; pool[i] + height[i] )<font></font>
          drain = i;<font></font>
<font></font>
        drainfound = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">return</span>; <span class="hljs-comment">//No need to flood from here</span><font></font>
      }<font></font>
<font></font>
      <span class="hljs-comment">//Part of the Pool</span>
      <span class="hljs-built_in">set</span>.push_back(i);<font></font>
      fill(i+dim.y);    <span class="hljs-comment">//Fill Neighbors</span><font></font>
      fill(i-dim.y);<font></font>
      fill(i+<span class="hljs-number">1</span>);<font></font>
      fill(i<span class="hljs-number">-1</span>);<font></font>
      fill(i+dim.y+<span class="hljs-number">1</span>);  <span class="hljs-comment">//Diagonals (Improves Drainage)</span>
      fill(i-dim.y<span class="hljs-number">-1</span>);<font></font>
      fill(i+dim.y<span class="hljs-number">-1</span>);<font></font>
      fill(i-dim.y+<span class="hljs-number">1</span>);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">//Perform Flood</span><font></font>
    fill(index);<font></font>
<font></font>
    <span class="hljs-comment">//...</span></code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para simplificar, um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritmo de preenchimento de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oito </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">vias</font></a><font style="vertical-align: inherit;"> √© usado aqui </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">No futuro, ser√° poss√≠vel implement√°-lo com mais efici√™ncia.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de identificar os muitos pontos de inunda√ß√£o e vazamento, alteramos o n√≠vel da √°gua e o mapa da piscina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se um ponto de vazamento for encontrado, movemos a part√≠cula (e seu volume de "transbordamento") para o ponto de vazamento, para que possa come√ßar a descer novamente. </font><font style="vertical-align: inherit;">Em seguida, o n√≠vel da √°gua desce at√© a altura do ponto de vazamento.</font></font><br>
<br>
<pre><code class="cpp hljs">    <span class="hljs-comment">//...</span><font></font>
<font></font>
    <span class="hljs-comment">//Drainage Point</span>
    <span class="hljs-keyword">if</span>(drainfound){<font></font>
<font></font>
      <span class="hljs-comment">//Set the Particle Position</span><font></font>
      pos = glm::vec2(drain/dim.y, drain%dim.y);<font></font>
<font></font>
      <span class="hljs-comment">//Set the New Waterlevel (Slowly)</span>
      <span class="hljs-keyword">double</span> drainage = <span class="hljs-number">0.001</span>;<font></font>
      plane = (<span class="hljs-number">1.0</span>-drainage)*initialplane + drainage*(height[drain] + pool[drain]);<font></font>
<font></font>
      <span class="hljs-comment">//Compute the New Height</span>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; s: <span class="hljs-built_in">set</span>) <span class="hljs-comment">//Iterate over Set</span>
        pool[s] = (plane &gt; height[s])?(plane-height[s]):<span class="hljs-number">0.0</span>;<font></font>
<font></font>
      <span class="hljs-comment">//Remove some sediment</span>
      sediment *= <span class="hljs-number">0.1</span>;
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//...</span></code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> quando o n√≠vel da √°gua diminui devido a vazamentos, descobri que isso funciona melhor com uma baixa taxa de vazamentos. </font><font style="vertical-align: inherit;">Al√©m disso, a elimina√ß√£o de parte das rochas sedimentares ajuda na implementa√ß√£o.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Devido a isso, novas part√≠culas que entram no pool preenchido movem instantaneamente seu volume para o ponto de vazamento, porque adicionar volume ao pool desloca o mesmo volume dele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se o ponto de vazamento n√£o for encontrado, calculamos o volume sob o plano de teste e o comparamos com o volume da part√≠cula. </font><font style="vertical-align: inherit;">Se for menor, removemos o volume da part√≠cula e ajustamos o n√≠vel da √°gua. </font><font style="vertical-align: inherit;">Ent√£o o avi√£o de teste se eleva. </font><font style="vertical-align: inherit;">Se for maior, o plano de teste √© abaixado. </font><font style="vertical-align: inherit;">O processo √© repetido at√© que a part√≠cula fique sem espa√ßo ou seja encontrado um ponto de vazamento.</font></font><br>
<br>
<pre><code class="cpp hljs">    <span class="hljs-comment">//...</span><font></font>
<font></font>
    <span class="hljs-comment">//Get Volume under Plane</span>
    <span class="hljs-keyword">double</span> tVol = <span class="hljs-number">0.0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; s: <span class="hljs-built_in">set</span>)<font></font>
      tVol += volumeFactor*(plane - (height[s]+pool[s]));<font></font>
<font></font>
    <span class="hljs-comment">//We can partially fill this volume</span>
    <span class="hljs-keyword">if</span>(tVol &lt;= volume &amp;&amp; initialplane &lt; plane){<font></font>
<font></font>
      <span class="hljs-comment">//Raise water level to plane height</span>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; s: <span class="hljs-built_in">set</span>)<font></font>
        pool[s] = plane - height[s];<font></font>
<font></font>
      <span class="hljs-comment">//Adjust Drop Volume</span><font></font>
      volume -= tVol;<font></font>
      tVol = <span class="hljs-number">0.0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//Plane was too high and we couldn't fill it</span>
    <span class="hljs-keyword">else</span> fail--;<font></font>
<font></font>
    <span class="hljs-comment">//Adjust Planes</span>
    <span class="hljs-keyword">float</span> approach = <span class="hljs-number">0.5</span>;<font></font>
    initialplane = (plane &gt; initialplane)?plane:initialplane;<font></font>
    plane += approach*(volume-tVol)/(<span class="hljs-keyword">double</span>)<span class="hljs-built_in">set</span>.size()/volumeFactor;<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//Couldn't place the volume (for some reason)- so ignore this drop.</span>
  <span class="hljs-keyword">if</span>(fail == <span class="hljs-number">0</span>)<font></font>
    volume = <span class="hljs-number">0.0</span>;<font></font>
<font></font>
} <span class="hljs-comment">//End of Flood Algorithm</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A altura do plano √© ajustada proporcionalmente √† diferen√ßa de volumes escalados pela √°rea da superf√≠cie da piscina (ou seja, pelo tamanho do conjunto). </font><font style="vertical-align: inherit;">Usando o coeficiente de proximidade, voc√™ pode aumentar a estabilidade de como o avi√£o atinge o n√≠vel correto de √°gua.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Envolt√≥rio de eros√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A classe mundial cont√©m todos os tr√™s mapas na forma de matrizes comuns:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">World</span> {</span><font></font>
<font></font>
<span class="hljs-keyword">public</span>:
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">generate</span><span class="hljs-params">()</span></span>;            <span class="hljs-comment">//Initialize</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">erode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> cycles)</span></span>;     <span class="hljs-comment">//Erode with N Particles</span><font></font>
<font></font>
  <span class="hljs-comment">//...</span><font></font>
<font></font>
  <span class="hljs-keyword">double</span> heightmap[<span class="hljs-number">256</span>*<span class="hljs-number">256</span>] = {<span class="hljs-number">0.0</span>};
  <span class="hljs-keyword">double</span> waterstream[<span class="hljs-number">256</span>*<span class="hljs-number">256</span>] = {<span class="hljs-number">0.0</span>};
  <span class="hljs-keyword">double</span> waterpool[<span class="hljs-number">256</span>*<span class="hljs-number">256</span>] = {<span class="hljs-number">0.0</span>};<font></font>
<font></font>
};</code></pre><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O mapa de altura √© inicializado usando o ru√≠do Perlin.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada etapa hidrol√≥gica para uma part√≠cula individual consiste no seguinte:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//...</span><font></font>
<font></font>
<span class="hljs-comment">//Spawn Particle</span>
glm::vec2 newpos = glm::vec2(rand()%(<span class="hljs-keyword">int</span>)dim.x, rand()%(<span class="hljs-keyword">int</span>)dim.y);
<span class="hljs-function">Drop <span class="hljs-title">drop</span><span class="hljs-params">(newpos)</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">int</span> spill = <span class="hljs-number">5</span>;
<span class="hljs-keyword">while</span>(drop.volume &gt; drop.minVol &amp;&amp; spill != <span class="hljs-number">0</span>){<font></font>
<font></font>
  drop.descend(heightmap, waterstream, waterpool, track, dim, scale);<font></font>
<font></font>
  <span class="hljs-keyword">if</span>(drop.volume &gt; drop.minVol)<font></font>
    drop.flood(heightmap, waterpool, dim);<font></font>
<font></font>
  spill--;<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//...</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O par√¢metro derramamento determina quantas vezes uma part√≠cula pode entrar na piscina e deix√°-la novamente antes de ser simplesmente destru√≠da. </font><font style="vertical-align: inherit;">Caso contr√°rio, as part√≠culas morrem quando seu volume √© esgotado.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota: as</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> part√≠culas raramente entram nas piscinas e as deixam mais de uma ou duas vezes antes de evaporar completamente durante as etapas de descida, mas adicionei isso apenas por precau√ß√£o.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A fun√ß√£o eros√£o envolve esse c√≥digo e executa etapas hidrol√≥gicas para part√≠culas de N, alterando diretamente o mapa de fluxo:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">World::erode</span><span class="hljs-params">(<span class="hljs-keyword">int</span> N)</span></span>{<font></font>
<font></font>
  <span class="hljs-comment">//Track the Movement of all Particles</span>
  <span class="hljs-keyword">bool</span> track[dim.x*dim.y] = {<span class="hljs-literal">false</span>};<font></font>
<font></font>
  <span class="hljs-comment">//Simulate N Particles</span>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++){<font></font>
   <font></font>
    <span class="hljs-comment">//... simulate individual particle</span><font></font>
<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//Update Path</span>
  <span class="hljs-keyword">double</span> lrate = <span class="hljs-number">0.01</span>;  <span class="hljs-comment">//Adaptation Rate</span>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dim.x*dim.y; i++)<font></font>
    waterstream[i] = (<span class="hljs-number">1.0</span>-lrate)*waterstream[i] + lrate*((track[i])?<span class="hljs-number">1.0</span>:<span class="hljs-number">0.0</span>);<font></font>
<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, o array de faixas √© passado para a fun√ß√£o de descida. </font><font style="vertical-align: inherit;">Descobri que rastrear simultaneamente o movimento de v√°rias part√≠culas e as altera√ß√µes correspondentes fornecem melhores resultados para o mapa de fluxo. </font><font style="vertical-align: inherit;">A taxa de adapta√ß√£o determina a rapidez com que as informa√ß√µes antigas s√£o exclu√≠das.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Årvores</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apenas por divers√£o, adicionei √°rvores para ver se a simula√ß√£o de eros√£o poderia ser melhorada ainda mais. </font><font style="vertical-align: inherit;">Eles s√£o armazenados na sala de aula do mundo como um vetor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As √°rvores s√£o criadas aleatoriamente no mapa em locais onde n√£o h√° piscinas e riachos fortes, e o terreno n√£o √© muito √≠ngreme. </font><font style="vertical-align: inherit;">Eles tamb√©m t√™m a chance de criar √°rvores adicionais ao seu redor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No processo de cria√ß√£o de √°rvores, elas escrevem no mapa de densidade da vegeta√ß√£o em um determinado raio ao seu redor. </font><font style="vertical-align: inherit;">A alta densidade da vegeta√ß√£o reduz a transfer√™ncia de massa entre part√≠culas descendentes e topografia. </font><font style="vertical-align: inherit;">Isto √© para simular como as ra√≠zes mant√™m o solo no lugar.</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//... descend function</span>
<span class="hljs-keyword">double</span> effD = depositionRate*max(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>-treedensity[ind]);
<span class="hljs-comment">//...</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As √°rvores morrem se estiverem na piscina ou o fluxo abaixo delas √© muito poderoso. </font><font style="vertical-align: inherit;">Al√©m disso, eles t√™m uma probabilidade aleat√≥ria de morte.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/trees.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gra√ßas ao sombreamento e aos mapas normais, at√© sprites de √°rvores muito simples tornam o relevo mais bonito.</font></font></i><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o modelo da √°rvore pode ser encontrado no arquivo "vegeta√ß√£o.h" e na fun√ß√£o "Mundo :: crescer ()".</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outros detalhes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados s√£o visualizados usando um wrapper OpenGL caseiro, que √© apresentado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">resultados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As part√≠culas podem ser criadas no mapa de acordo com qualquer distribui√ß√£o que voc√™ precisar. </font><font style="vertical-align: inherit;">Nas minhas demos, criei-as com uma distribui√ß√£o uniforme em cart√µes 256 √ó 256. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como pode ser visto abaixo, a simula√ß√£o resultante √© altamente dependente da escolha do relevo original. </font><font style="vertical-align: inherit;">O sistema √© capaz de simular um grande n√∫mero de fen√¥menos naturais. </font><font style="vertical-align: inherit;">N√£o consegui apenas adequadamente desfiladeiros. </font><font style="vertical-align: inherit;">Eles podem precisar de uma simula√ß√£o muito longa e lenta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outros fen√¥menos podem ser observados no sistema, como cachoeiras, tortuosidades e deltas de rios, lagos, incha√ßo do solo e assim por diante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema tamb√©m √© muito bom em distribuir fluxos e piscinas em locais onde muita chuva se acumula, e n√£o em locais aleat√≥rios. </font><font style="vertical-align: inherit;">Portanto, a hidrologia gerada est√° intimamente relacionada ao terreno.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/rivererosion.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simula√ß√£o hidrol√≥gica em tempo real em uma grade de 256 √ó 256. </font><font style="vertical-align: inherit;">O relevo original √© relativamente suave, o que permite que os fluxos apare√ßam rapidamente. </font><font style="vertical-align: inherit;">No in√≠cio, pode-se observar a cria√ß√£o mais simples de piscinas e vazamentos, ap√≥s o que grandes fluxos aparecem e permanecem.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compara√ß√£o dos efeitos do estreitamento dos fluxos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comparar a diferen√ßa criada ao vincular um mapa a um sistema de eros√£o, voc√™ pode simular a hidrologia no mesmo mapa, ativando e desativando efeitos diferentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simulei o mesmo terreno tr√™s vezes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eros√£o baseada em part√≠culas (eros√£o b√°sica) que recebe mapas de fluxo e piscina. </font><font style="vertical-align: inherit;">Piscinas ainda afetam gera√ß√£o</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eros√£o b√°sica com par√¢metros alterados por mapas hidrol√≥gicos (em combina√ß√£o com eros√£o)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eros√£o combinada com par√¢metros alterados por mapas hidrol√≥gicos e afetando a eros√£o por √°rvores</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> este √© um sistema bastante ca√≥tico, e o tipo de hidrologia que aparece √© altamente dependente do terreno. </font><font style="vertical-align: inherit;">√â dif√≠cil encontrar um exemplo "muito revelador" de al√≠vio.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39e/e81/65c/39ee8165c1b4a8ca4f8a987e12464de4.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderiza√ß√£o em relevo do sistema base</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/969/6b2/fc0/9696b2fc03defb56681b7bfff7fa6740.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderiza√ß√£o combinada da eleva√ß√£o do sistema</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/868/d7f/8bc/868d7f8bcd087c968833ba0a4c99619c.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderiza√ß√£o da topografia de um sistema com √°rvores</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Uma observa√ß√£o interessante: combinar mapas hidrol√≥gicos com par√¢metros de part√≠culas na verdade estreita os leitos dos rios. </font><font style="vertical-align: inherit;">Particularmente em regi√µes planares, as part√≠culas s√£o menos distribu√≠das e se fundem em uma pequena quantidade de fluxos mais fortes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atrito e evapora√ß√£o reduzidos lidam com sucesso com o fato de que as part√≠culas come√ßam a preferir os canais j√° existentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outros efeitos s√£o mais vis√≠veis com a observa√ß√£o direta do relevo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/acd/d6b/9a5acdd6b7130655c66c716d0b713ec2.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapa hidrol√≥gico do sistema base</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5df/f5a/575/5dff5a575ae295091062b6e2153694ff.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapa hidrol√≥gico do sistema combinado</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d0/acb/8fa/9d0acb8fa508aa24afab3a5dddacf7a5.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapa hidrol√≥gico do sistema com √°rvores </font></font></i><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> esses resultados foram gerados em exatamente 60 segundos do tempo de simula√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As √°rvores tamb√©m afetam o estreitamento. </font><font style="vertical-align: inherit;">Eles aprimoram o processo de cortar caminhos claros em √°reas √≠ngremes. </font><font style="vertical-align: inherit;">Eles for√ßam os fluxos a permanecerem nos canais j√° estabelecidos e, portanto, reduzem a tortuosidade. </font><font style="vertical-align: inherit;">Assim, a localiza√ß√£o das √°rvores afeta o movimento da √°gua.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Example_Hydrology2.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um exemplo de registro de como a localiza√ß√£o das √°rvores pode ajudar a manter a localiza√ß√£o dos fluxos. </font><font style="vertical-align: inherit;">√â o mesmo al√≠vio de antes, com todos os efeitos ativados.</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impacto na piscina</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema de cria√ß√£o de piscinas funciona bem e permite a exist√™ncia de v√°rias massas de √°gua com diferentes alturas no mesmo relevo. </font><font style="vertical-align: inherit;">Eles tamb√©m podem se espalhar e esvaziar.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Pooling-1.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um exemplo de um v√≠deo da forma√ß√£o de piscinas em um relevo de linha de base mais √°spero, com uma grande diferen√ßa de eleva√ß√£o. </font><font style="vertical-align: inherit;">O lago superior est√° fisicamente localizado acima do lago inferior e descarrega a √°gua resultante diretamente no lago inferior.</font></font></i><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eu recebi v√°rias sementes, nas quais tr√™s lagos corriam um para o outro sequencialmente, mas n√£o queria gastar muito tempo encontrando o caminho certo para este artigo. </font><font style="vertical-align: inherit;">Eu j√° gerei muitas fotos e v√≠deos.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De tempos em tempos, o n√≠vel de altura da piscina aumenta. </font><font style="vertical-align: inherit;">Eu acho que isso acontece quando o n√≠vel da √°gua est√° pr√≥ximo ao n√≠vel de vazamento e muita √°gua √© adicionada. </font><font style="vertical-align: inherit;">Este efeito pode ser reduzido reduzindo a taxa de vazamento na fun√ß√£o de inunda√ß√£o.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/475/469/f09/475469f09d224928863b2b2eaf48cfb8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s outro minuto de gera√ß√£o, v√°rias novas piscinas apareceram por conta pr√≥pria.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78a/36c/76e/78a36c76ed90db36cae64c47376fc585.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em um √¢ngulo mais acentuado, a diferen√ßa nas alturas da bacia √© mais percept√≠vel.</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac8/bd1/897/ac8bd18976e9cb06bd8d6d1fffd23667.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O mapa hidrol√≥gico mostra claramente que a bacia central se funde com a bacia inferior. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A execu√ß√£o do algoritmo de inunda√ß√£o leva ao fato de que os pools veem uma "parede" na borda do mapa. </font><font style="vertical-align: inherit;">Isso √© percept√≠vel nas imagens mostradas acima. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra poss√≠vel melhoria poderia ser a adi√ß√£o do n√≠vel do mar ao mundo, para que as piscinas observassem vazamentos nas bordas do mapa ao n√≠vel do mar, caso contr√°rio, elas simplesmente transbordariam.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Velocidade de simula√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tempo de cada etapa de descida e inunda√ß√£o varia de part√≠cula para part√≠cula, mas permanece uma ordem de magnitude (cerca de 1 microssegundo). Com fluxos constantes, as part√≠culas se movem pelo mapa mais rapidamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tempo de inunda√ß√£o varia em propor√ß√£o ao tamanho da piscina, porque a opera√ß√£o de vazamento √© a etapa mais cara. Quanto maiores as piscinas, maior a √°rea para a qual voc√™ precisa aumentar o n√≠vel da √°gua. Grandes piscinas s√£o definitivamente o gargalo do sistema. Se voc√™ tiver id√©ias para aumentar a velocidade, me avise. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O tempo de descida varia em propor√ß√£o ao tamanho do mapa e muitos outros par√¢metros, incluindo taxa de atrito e evapora√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos os v√≠deos deste artigo s√£o gravados em tempo real, ou seja, em geral, a simula√ß√£o √© r√°pida.</font></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> logo ap√≥s a publica√ß√£o deste artigo, fiz uma pequena altera√ß√£o no m√©todo de c√°lculo das normais da superf√≠cie, o que aumentou a velocidade da simula√ß√£o. </font><font style="vertical-align: inherit;">O efeito disso √© muito percept√≠vel durante a simula√ß√£o, mas √© dif√≠cil compar√°-lo devido a grandes varia√ß√µes no tempo necess√°rio para iniciar e inundar. </font><font style="vertical-align: inherit;">De acordo com minhas estimativas, a velocidade da simula√ß√£o dobrou.</font></font></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√≠deos mais bonitos</font></font></h3><br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology1.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simula√ß√£o de hidrologia em terrenos verticais irregulares.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology5.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um pouco de al√≠vio mais suave. </font><font style="vertical-align: inherit;">Alguns lagos flutuam um pouco.</font></font></i><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology3.mp4" type="video/mp4"></video></div></div></div><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simula√ß√£o de hidrologia em um terreno plano e liso. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√≠deos subsequentes foram gravados ap√≥s a melhoria da velocidade.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology10.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terreno ainda mais plano e suave.</font></font></i><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology7.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√≠deo com um rio formado a partir de v√°rios riachos conectados. </font><font style="vertical-align: inherit;">O rio principal tem dois pontos nos quais incorpora fluxos menores, e vemos como cresce em tamanho.</font></font></i><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seu navegador n√£o suporta v√≠deo HTML5.</font></font><source src="https://weigert.vsos.ethz.ch/wp-content/uploads/2020/04/Hydrology9.mp4" type="video/mp4"></video></div></div></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um al√≠vio mais desigual com a forma√ß√£o de rios. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu posso continuar para sempre.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o e trabalho para o futuro</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa t√©cnica simples ainda √© baseada em part√≠culas, mas consegue transmitir muitos efeitos adicionais. Ele fornece uma maneira f√°cil de simular o movimento da √°gua em larga escala sem simular totalmente a din√¢mica dos fluidos. Al√©m disso, ela trabalha com um modelo de √°gua intuitivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas simula√ß√µes, podemos observar o surgimento de rios sinuosos, cachoeiras, lagos e transfus√µes de lagos, rios que se separam em √°reas planas em deltas, etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seria interessante adicionar diferentes tipos de solo na forma de um mapa do solo a partir do qual os par√¢metros de eros√£o poderiam ser obtidos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode alterar facilmente o sistema de √°rvores para criar diferentes tipos de √°rvores que mant√™m o solo no lugar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â dif√≠cil transmitir a variedade de resultados gerados em v√°rias fotos e v√≠deos; portanto, voc√™ deve tentar fazer isso sozinho, √© muito interessante. </font><font style="vertical-align: inherit;">Eu recomendo experimentar os par√¢metros originais do mapa, incluindo ru√≠do de oitava e escala do mapa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ tiver perguntas ou coment√°rios, pode entrar em contato comigo. </font><font style="vertical-align: inherit;">Eu trabalhei bastante nesse projeto, ent√£o meu c√©rebro estava aglomerado e tenho certeza de que perdi alguns aspectos interessantes.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt498278/index.html">Editora Peter. Venda de primavera</a></li>
<li><a href="../pt498280/index.html">A hist√≥ria do p√°ssaro Dodo do g√™nero Phoenix. A Grande Queda de Dodo √â</a></li>
<li><a href="../pt498282/index.html">[instru√ß√£o] Criando uma conta e um site na plataforma Google Site</a></li>
<li><a href="../pt498284/index.html">Como otimizar o aprendizado de ingl√™s</a></li>
<li><a href="../pt498288/index.html">Sua cidade precisa de um √¥nibus de metr√¥</a></li>
<li><a href="../pt498292/index.html">Economize muito dinheiro em grandes volumes no PostgreSQL</a></li>
<li><a href="../pt498294/index.html">Detec√ß√£o de Objetos Reconhe√ßa e governe. Parte 1</a></li>
<li><a href="../pt498296/index.html">Design no n√≠vel do sistema. Parte 1. Da ideia ao sistema</a></li>
<li><a href="../pt498298/index.html">Empresas usam recompensas de insetos para comprar sil√™ncio de hackers</a></li>
<li><a href="../pt498300/index.html">Blitz.Engine: Sistema de ativos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>