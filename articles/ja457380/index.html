<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍⚕️ ✋🏽 🔤 超近代的なOpenGL。パート2 👴🏻 ↕️ ⏩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="すべての良い気分と窓の外の低温。約束どおり、私は最新のOpenGLのスーパーデューパーに関する記事の続きを公開します。誰が最初の部分を読んでいない- 超近代的なOpenGL。パート1。
 
 多分あなたは幸運で、私は残りのすべての資料をこの記事に押し出すことができます、これは確かではありません......">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>超近代的なOpenGL。パート2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457380/"><img src="https://habrastorage.org/webt/ui/wu/2k/uiwu2kjzkvznzwubjaqnk7lkoz0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての良い気分と窓の外の低温。</font><font style="vertical-align: inherit;">約束どおり、私は最新のOpenGLのスーパーデューパーに関する記事の続きを公開します。</font><font style="vertical-align: inherit;">誰が最初の部分を読んでいない- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超近代的なOpenGL。</font><font style="vertical-align: inherit;">パート1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多分あなたは幸運で、私は残りのすべての資料をこの記事に押し出すことができます、これは確かではありません...</font></font><br>
<a name="habracut"></a><br>
<h3><font color="#4682B4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列テクスチャ</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャ配列はOpenGL 3.0で追加されましたが、何らかの理由でそれらについて書いている人はほとんどいません（情報はFreemasonsによって確実に隠されています）。皆さんはプログラミングに精通しており、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列とは</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何かを知っていますが</font><font style="vertical-align: inherit;">、私は反対側から「アプローチ」した方がよいでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャ間の切り替えの数を減らし、結果として状態切り替え操作を減らすために、人々は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクスチャアトラス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（複数のオブジェクトのデータを格納するテクスチャ）を使用します。しかし、Khronosの賢い人たちが私たちに代わって、アレイテクスチャを開発しました。これで、テクスチャをこの配列のレイヤーとして保存できるようになりました。つまり、アトラスの代わりになります。 OpenGL Wikiのミップマップなどについての説明は少し異なりますが、複雑すぎるようです（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アトラスと比較してこのアプローチを使用する利点は、各レイヤーがラッピングとミップマッピングの点で個別のテクスチャと見なされることです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、ラムに戻ります...テクスチャ配列には3種類のターゲットがあります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GL_TEXTURE_1D_ARRAY </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GL_TEXTURE_2D_ARRAY</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GL_TEXTURE_CUBE_MAP_ARRAY</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャ配列を作成するためのコード：</font></font><br>
<br>
<pre><code class="cpp hljs">GLsizei width = <span class="hljs-number">512</span>;<font></font>
GLsizei height = <span class="hljs-number">512</span>;<font></font>
GLsizei layers = <span class="hljs-number">3</span>;<font></font>
glCreateTextures(GL_TEXTURE_2D_ARRAY, <span class="hljs-number">1</span>, &amp;texture_array);<font></font>
glTextureStorage3D(texture_array, <span class="hljs-number">0</span>, GL_RGBA8, width, height, layers);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も注意深いのは、2Dテクスチャのリポジトリを作成していることに気付きましたが、何らかの理由で3D配列を使用しているため、ここに間違いやタイプミスはありません。</font><font style="vertical-align: inherit;">2Dテクスチャを格納しますが、それらは「レイヤー」に配置されているため、3D配列を取得します（実際、テクスチャではなくピクセルデータが格納されます。3D配列にはピクセルデータの2Dレイヤーがあります）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、1Dテクスチャの例を理解するのは簡単です。</font><font style="vertical-align: inherit;">2Dピクセルアレイの各ラインは、個別の1Dレイヤーです。</font><font style="vertical-align: inherit;">ミップマップテクスチャも自動的に作成できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、すべての困難が終わり、画像を特定のレイヤーに追加するのは非常に簡単です。</font></font><br>
<br>
<pre><code class="cpp hljs">glTextureSubImage3D(texarray, mipmap_level, offset.x, offset.y, layer, width, height, <span class="hljs-number">1</span>, GL_RGBA, GL_UNSIGNED_BYTE, pixels);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配列を使用する場合、シェーダーを少し変更する必要があります</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#version 450 core</span><font></font>
<font></font>
layout (location = <span class="hljs-number">0</span>) out vec4 color;<font></font>
layout (location = <span class="hljs-number">0</span>) in vec2 texture_0;<font></font>
<font></font>
uniform sampler2DArray texture_array;<font></font>
uniform uint diffuse_layer;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">getCoord</span><span class="hljs-params">(uint capacity, uint layer)</span>
</span>{
	<span class="hljs-keyword">return</span> max(<span class="hljs-number">0</span>, min(<span class="hljs-keyword">float</span>(capacity - <span class="hljs-number">1</span>), <span class="hljs-built_in">floor</span>(<span class="hljs-keyword">float</span>(layer) + <span class="hljs-number">0.5</span>)));<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
	color = texture(texture_array, vec3(texture_0, getCoord(<span class="hljs-number">3</span>, diffuse_layer)));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最良のオプションは、シェーダーの外側で目的のレイヤーを計算することです。これには、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UBO</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSBOを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">（これは、マトリックスや他の多くのデータを転送するためにも使用されますが、どういうわけか別の時間です）。誰も</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyk_1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tyk_2を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">待つことができない</font><font style="vertical-align: inherit;">場合は、読むことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
寸法については、GL_MAX_ARRAY_TEXTURE_LAYERSです。これは、OpenGL 3.3では256、OpenGL 4.5では2048です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サンプラーオブジェクト（配列テクスチャとは関係ありませんが、便利なもの）について教えてください。これは、現在ユニットに接続されているオブジェクトに関係なく、テクスチャユニットの状態を構成するために使用されるオブジェクトです。サンプラーの状態を特定のテクスチャオブジェクトから分離するのに役立ち、抽象化が向上します。</font></font><br>
<br>
<pre><code class="cpp hljs">GLuint sampler_state = <span class="hljs-number">0</span>;<font></font>
glGenSamplers(<span class="hljs-number">1</span>, &amp;sampler_state);<font></font>
glSamplerParameteri(sampler_state, GL_TEXTURE_WRAP_S, GL_REPEAT);<font></font>
glSamplerParameteri(sampler_state, GL_TEXTURE_WRAP_T, GL_REPEAT);<font></font>
glSamplerParameteri(sampler_state, GL_TEXTURE_MAG_FILTER, GL_LINEAR);<font></font>
glSamplerParameteri(sampler_state, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);<font></font>
glSamplerParameterf(sampler_state, GL_TEXTURE_MAX_ANISOTROPY_EXT, <span class="hljs-number">16.0f</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サンプラーオブジェクトを作成し、任意のテクスチャユニットに対して線形フィルタリングと16x異方性フィルタリングを有効にしました。</font></font><br>
<br>
<pre><code class="cpp hljs">GLuint texture_unit = <span class="hljs-number">0</span>;<font></font>
glBindSampler(texture_unit, sampler_state);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、サンプラーを目的のテクスチャユニットにバインドし、それが目的のbindim 0でなくなったら、このユニットにバインドします。</font></font><br>
<br>
<pre><code class="cpp hljs">glBindSampler(texture_unit, <span class="hljs-number">0</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サンプラーをリンクすると、その設定がテクスチャユニットの設定よりも優先されます。</font><font style="vertical-align: inherit;">結果：サンプラーオブジェクトを追加するために既存のコードベースを変更する必要はありません。</font><font style="vertical-align: inherit;">（独自のサンプラーステートを使用して）テクスチャの作成をそのままにして、サンプラーオブジェクトを制御および使用するコードを追加するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オブジェクトを削除するときは、次の関数を呼び出すだけです。</font></font><br>
<br>
<pre><code class="cpp hljs">glDeleteSamplers(<span class="hljs-number">1</span>, &amp;sampler_state);</code></pre><br>
<h3><font color="#4682B4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクスチャビュー</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はこれを「テクスチャポインター（リンクよりも正しいかもしれません、私はxs）」として翻訳します。これは、最良の翻訳がわからないためです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenGLの観点でのポインターは何ですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが非常に単純です。これは、下の図に示すように、不変（つまり、可変）テクスチャのデータへのポインタです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ul/r0/sy/ulr0syubsujlqfshyemnh6sqdoq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、これは特定のテクスチャオブジェクトのテクセルデータを共有するオブジェクトです。アナロジーのために</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、C ++のstd :: shared_ptrを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用できます</font><font style="vertical-align: inherit;">。少なくとも1つのテクスチャポインターがある限り、元のテクスチャはドライバーによって削除されません。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ウィキは</font></a><font style="vertical-align: inherit;">（それらが一致する必要はありません）テクスチャーとターゲットの種類について読むだけでなく、より詳細に説明する</font><font style="vertical-align: inherit;">
ポインタを作成するには、呼び出すことによって、テクスチャのハンドルを取得する必要があり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">glGenTextureを</font></a></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（初期化は必要ありません）そして</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glTextureView</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs">glGenTextures(<span class="hljs-number">1</span>, &amp;texture_view);<font></font>
glTextureView(texture_view, GL_TEXTURE_2D, source_name, internal_format, min_level, level_count, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テクスチャポインターは、N番目のレベルのミップマップを指すことができ、非常に便利で便利です。</font><font style="vertical-align: inherit;">ポインターは、テクスチャ配列、配列の一部、この配列内の特定のレイヤー、または2Dテクスチャとしての3Dテクスチャのスライスのいずれかです。</font></font><br>
<br>
<h3><font color="#4682B4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデックスと頂点用の単一バッファー</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、すべてが迅速かつ簡単になります。</font><font style="vertical-align: inherit;">以前は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vertex Buffer Objectの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> OpenGL仕様</font><font style="vertical-align: inherit;">では、開発者が頂点とインデックスデータを異なるバッファーに分割することを推奨していましたが、これは必要ありません（長い歴史があるのはなぜでしょうか）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なのは、インデックスを頂点の前に保存し、頂点の開始位置（より正確にはオフセット）を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通知</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
することだけ</font><font style="vertical-align: inherit;">です。これには、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">glVertexArrayVertexBuffer</font></a><font style="vertical-align: inherit;">コマンドがあり</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます。</font></a><font style="vertical-align: inherit;">次</font><font style="vertical-align: inherit;">のようにします。</font></font><br>
<br>
<pre><code class="cpp hljs">GLint alignment = GL_NONE;<font></font>
glGetIntegerv(GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT, &amp;alignment);<font></font>
<font></font>
<span class="hljs-keyword">const</span> GLsizei ind_len = GLsizei(ind_buffer.size() * <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">element_t</span>));
<span class="hljs-keyword">const</span> GLsizei  vrt_len = GLsizei(vrt_buffer.size() * <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">vertex_t</span>));<font></font>
<font></font>
<span class="hljs-keyword">const</span> GLuint  ind_len_aligned = align(ind_len, alignment);
<span class="hljs-keyword">const</span> GLuint  vrt_len_aligned = align(vrt_len, alignment);<font></font>
<font></font>
GLuint buffer 	= GL_NONE;<font></font>
glCreateBuffers(<span class="hljs-number">1</span>, &amp;buffer);<font></font>
glNamedBufferStorage(buffer, ind_len_aligned + vrt_len_aligned, <span class="hljs-literal">nullptr</span>, GL_DYNAMIC_STORAGE_BIT);<font></font>
<font></font>
glNamedBufferSubData(buffer, <span class="hljs-number">0</span>, ind_len, ind_buffer.data());<font></font>
glNamedBufferSubData(buffer, ind_len_aligned, vrt_len, vrt_buffer.data());<font></font>
<font></font>
GLuint vao 	= GL_NONE;<font></font>
glCreateVertexArrays(<span class="hljs-number">1</span>, &amp;vao);<font></font>
glVertexArrayVertexBuffer(vao, <span class="hljs-number">0</span>, buffer, ind_len_aligned, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">vertex_t</span>));<font></font>
glVertexArrayElementBuffer(vao, buffer);</code></pre><br>
<br>
<h3><font color="#4682B4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テッセレーションとシェーディングの計算</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
：材料の多くは、これについてグーグルでありますので、私はレッスンのカップルですここでは、（ロシア語）、テッセレーションシェーダをご紹介しません</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">計算用のシェーダーの検討に進みます（ブライイン、また多くの資料、簡単に説明します）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に多数のコアに搭載されたビデオカードの利点であるビデオカードは、並行して実行できる多数の小さなタスク用に設計されています。</font><font style="vertical-align: inherit;">計算シェーダーは、その名前が示すように、グラフィックスに関連しない（必要ない）問題を解決することを可能にします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
写真、何と呼べばいいかわからない（ストリームがグループ化されているように）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/3a/x_/tw3ax_rzsrwx5look90ggm5xehw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何に使用できますか？</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像処理</font></font><ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">咲く</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイルベースのアルゴリズム（遅延シェーディング）</font></font></li>
</ol></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シミュレーション</font></font><br>
 <ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">粒子</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 水</font></font></li>
</ol></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、私が書く理由はないようです。Googleにも多くの情報があります。以下に簡単な使用例を示します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">//    </span><font></font>
glUseProgramStages( pipeline, GL_COMPUTE_SHADER_BIT, cs);<font></font>
<span class="hljs-comment">// ,    /</span>
glBindImageTexture( <span class="hljs-number">0</span>, tex, <span class="hljs-number">0</span>, GL_FALSE, <span class="hljs-number">0</span>, GL_WRITE_ONLY,<font></font>
GL_RGBA8);<font></font>
<span class="hljs-comment">// 80x45   (  1280720)</span>
glDispatchCompute( <span class="hljs-number">80</span>, <span class="hljs-number">45</span>, <span class="hljs-number">1</span>);</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、空の計算シェーダーの例を示します。</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-meta">#version 430</span>
layout(local_size_x = <span class="hljs-number">1</span>, local_size_y = <span class="hljs-number">1</span>) in;<font></font>
layout(rgba32f, binding = <span class="hljs-number">0</span>) uniform image2D img_output;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// base pixel color for image</span>
  vec4 pixel = vec4(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>);
  <span class="hljs-comment">// get index in global work group i.e x,y position</span><font></font>
  ivec2 pixel_coords = ivec2(gl_GlobalInvocationID.xy);<font></font>
  <font></font>
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// interesting stuff happens here later</span>
  <span class="hljs-comment">//</span><font></font>
  <font></font>
  <span class="hljs-comment">// output to a specific pixel in the image</span><font></font>
  imageStore(img_output, pixel_coords, pixel);<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで詳しく見ためのいくつかのリンクです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font color="#4682B4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パスレンダリング</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NVidia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からの新しい（新しいではない）拡張であり</font><font style="vertical-align: inherit;">、その主な目的はベクター2Dレンダリングです。</font><font style="vertical-align: inherit;">テキストまたはUIに使用できます。グラフィックはベクターであるため、解像度に依存しません。これは間違いなく大きな利点であり、UIは見栄えがします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基本的なコンセプトはステンシル、そしてカバー（オリジナルのカバー）です。</font><font style="vertical-align: inherit;">パスステンシルを設定してから、ピクセルを視覚化します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
管理には標準のGLuintが使用され、作成関数と削除関数には標準の命名規則があります。</font></font><br>
<br>
<pre><code class="cpp hljs">glGenPathsNV <span class="hljs-comment">// </span>
glDeletePathsNV <span class="hljs-comment">// </span></code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、パスを取得する方法について少し説明します。</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string'e内のSVGまたはPostScript </font></font><pre><code class="cpp hljs">glPathStringNV</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">対応する座標を持つコマンドの配列 </font></font><pre><code class="cpp hljs">glPathCommandsNV</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> データを更新するため </font></font><pre><code class="cpp hljs">glPathSubCommands, glPathCoords, glPathSubCoords</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォント </font></font><pre><code class="cpp hljs">glPathGlyphsNV, glPathGlyphRangeNV</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既存のパスの線形結合（1つ、2つ以上のパスの補間） </font></font><pre><code class="cpp hljs">glCopyPathNV, glInterpolatePathsNV, glCombinePathsNV</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既存のパスの線形変換 </font></font><pre><code class="cpp hljs">glTransformPathNV</code></pre></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
標準コマンドのリスト：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動先（x、y）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">近道</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">line-to（x、y）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二次曲線（x1、y1、x2、y2）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三次曲線（x1、y1、x2、y2、x3、y3）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑らかな二次曲線（x、y）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑らかな3次曲線（x1、y1、x2、y2）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">楕円弧（rx、ry、x軸回転、大弧フラグ、スイープフラグ、x、y）</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PostScriptでのパス文字列は次のようになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-string">"100 180 moveto 40 10 lineto 190 120 lineto 10 120 lineto 160 10 lineto closepath” //
"</span><span class="hljs-number">300</span> <span class="hljs-number">300</span> moveto <span class="hljs-number">100</span> <span class="hljs-number">400</span> <span class="hljs-number">100</span> <span class="hljs-number">200</span> <span class="hljs-number">300</span> <span class="hljs-number">100</span> curveto <span class="hljs-number">500</span> <span class="hljs-number">200</span> <span class="hljs-number">500</span> <span class="hljs-number">400</span> <span class="hljs-number">300</span> <span class="hljs-number">300</span> curveto<font></font>
closepath” <span class="hljs-comment">//</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてここにSVGで：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-string">"M100,180 L40,10 L190,120 L10,120 L160,10 z” //
"</span>M300 <span class="hljs-number">300</span> C <span class="hljs-number">100</span> <span class="hljs-number">400</span>,<span class="hljs-number">100</span> <span class="hljs-number">200</span>,<span class="hljs-number">300</span> <span class="hljs-number">100</span>,<span class="hljs-number">500</span> <span class="hljs-number">200</span>,<span class="hljs-number">500</span> <span class="hljs-number">400</span>,<span class="hljs-number">300</span> <span class="hljs-number">300</span>Z” <span class="hljs-comment">//</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フィリング、エッジ、ベンドの種類にはまだ</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wx/uy/wv/wxuywvdg2rfuxlrrasn_hh9yzkm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いろいろ</font><font style="vertical-align: inherit;">な種類があり</font><font style="vertical-align: inherit;">ます。ここではすべてを説明しません。たくさんの資料があり、記事全体が必要になるためです（興味深い場合は、何とか書こうと思います）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レンダリングプリミティブのリストは次のとおりです</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 三次曲線</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 二次曲線</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 線</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> フォントグリフ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 弧</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ダッシュ＆エンドキャップスタイル</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにいくつかのコードがあります、そしてたくさんのテキストがあります：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// SVG </span><font></font>
glPathStringNV( pathObj, GL_PATH_FORMAT_SVG_NV,<font></font>
 <span class="hljs-built_in">strlen</span>(svgPathString), svgPathString);
<span class="hljs-comment">// </span>
glStencilFillPathNV( pathObj, GL_COUNT_UP_NV, <span class="hljs-number">0x1F</span>);
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  ( )</span>
glCoverFillPathNV( pathObj, GL_BOUNDING_BOX_NV);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事はあまり興味深く情報が少ないようで、資料の主なものを特定するのは困難でした。</font><font style="vertical-align: inherit;">誰かがさらに詳しく知りたい場合は、NVidiaの一部の資料と仕様へのリンクを破棄できます（保存場所を覚えている場合）。</font><font style="vertical-align: inherit;">また、記事の編集にご協力いただければ幸いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
約束どおり、描画呼び出しの最適化と削減に関する次の記事を書きます。</font><font style="vertical-align: inherit;">他に何を読みたいのか、何に興味があるのか​​についてコメントで書いてほしいと思います：</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cocos2d-xでゲームを書く（練習のみ、水なし）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vulkanに関する一連の記事の翻訳</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenGLに関するいくつかのトピック（四元数、新機能）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピュータグラフィックスアルゴリズム（照明、スペーススクリーンのアンビエントオクルージョン、スペーススクリーンの反射）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あなたのオプション</font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご清聴ありがとうございました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja457354/index.html">パフォーマンステストのデータ難読化</a></li>
<li><a href="../ja457362/index.html">RUVDSからのプロモーション：夏にサーバーを準備する</a></li>
<li><a href="../ja457366/index.html">狂信者、鉄片、または観客-あなたはどのようなゲーマーですか？</a></li>
<li><a href="../ja457374/index.html">Androidプロジェクトのビルド時間を短縮する</a></li>
<li><a href="../ja457378/index.html">id Softwareがコマンダーキーンのテクノロジーに基づいてWolfenstein 3Dを作成した方法</a></li>
<li><a href="../ja457382/index.html">高性能プログラマーの7つの習慣</a></li>
<li><a href="../ja457386/index.html">Linux仮想インターフェースの紹介：トンネル</a></li>
<li><a href="../ja457390/index.html">マダガスカル-コントラストの島</a></li>
<li><a href="../ja457392/index.html">モバイルクロスプラットフォーム開発の節約：Skyengのケーススタディ</a></li>
<li><a href="../ja457396/index.html">ホットブート後のルートLUKSコンテナーの自動ロック解除</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>