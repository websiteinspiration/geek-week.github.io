<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👼🏼 🧝🏿 🍫 用于Home Assistant，ESP8266和MiFlora的自动花园浇水系统 👩🏽‍🤝‍👩🏼 🏇 👨🏻‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前段时间，我的家人在一个非常温暖和干旱的地方有一所带小花园的房子，我们面临着定期浇水的问题。
 
 我希望灌溉系统是自动的，在选择灌溉系统时，我必须考虑以下条件：
 
 

- 必须以所有可用方式节约的非常昂贵的水 
- 花园中各种植物对水分的需求，从多肉植物到喜欢水分的植物
- 在没有人的情况下需...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>用于Home Assistant，ESP8266和MiFlora的自动花园浇水系统</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497606/"><img src="https://habrastorage.org/webt/87/-y/wi/87-ywilifgui1kkhe06izsbt7ag.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前段时间，我的家人在一个非常温暖和干旱的地方有一所带小花园的房子，我们面临着定期浇水的问题。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我希望灌溉系统是自动的，在选择灌溉系统时，我必须考虑以下条件：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 必须以所有可用方式节约的非常昂贵的水 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 花园中各种植物对水分的需求，从多肉植物到喜欢水分的植物</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在没有人的情况下需要完全自动浇水，最好是可以远程控制 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 不能避免灌溉错误的干旱气候</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在评估了在本地DIY网络和亚马逊上找到的现成的解决方案并阅读了有关其可靠性（通常不是最高的）的评论之后，我们决定尝试自己做一些事情。 </font></font><br>
<a name="habracut"></a><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免责声明：作者不是IT专家，也不声称自己是该主题的专业知识。</font><font style="vertical-align: inherit;">项目执行的水平是一种爱好。</font><font style="vertical-align: inherit;">作者非常了解他在编程和电子领域的知识水平，并将非常感谢您为改进和优化所用解决方案提供的建议。</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电路原理图</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
花园分为四个灌溉区，每个灌溉区都配备了单独的土壤湿度传感器，可以根据单独的时间表和不同的水量浇水。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在地面上，铺设带孔的滴灌PND管，这些管与会聚在集水单元中的管相连，并通过电磁阀与供水相连。</font><font style="vertical-align: inherit;">阀由连接到ESP8266（Sonoff 4Ch）的继电器控制。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
夜间由计时器来浇水，以增加被吸收到地下且不会被太阳蒸发的水量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在计划的浇水时间，检查是否符合以下条件：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 土壤水分低于预定值 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 接下来的2天没有足够的预计降水 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不超过此管线的灌溉水限制</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二手设备</font></font></h3><br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已安装HassIO的</font><b><font style="vertical-align: inherit;">Raspberry Pie</font></b><font style="vertical-align: inherit;">（已安装）</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESPHome</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固件</font><b><font style="vertical-align: inherit;">ESP32 DevKit</font></b><font style="vertical-align: inherit;">，用作MiFlora的蓝牙网关并从有线湿度传感器接收数据。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有线湿度传感器</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电容式土壤湿度传感器v1.2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">位于花园中</font><font style="vertical-align: inherit;">，可测量最接近ESP32安装地点的浇水区中的湿度，MiFlora </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传感器</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过BLE连接到ESP32，后者可测量偏远浇水区中的湿度。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SONOFF 4Ch</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（用ESPHome缝制）位于进水单元中，所有浇水区的管道都从那里进来</font><b><font style="vertical-align: inherit;">。4个常闭电磁阀</font></b><font style="vertical-align: inherit;">，电压</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为220V</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于水位上并连接到Sonoff 4Ch。打开供水进行灌溉。选择了一个常闭模型，以使在电气和电子设备发生任何故障时“泛滥”的可能性最小，并使所需的继电器输出数量最小。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脉冲</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水表位于进水单元中灌溉系统的入口，并与Sonoff 4ch连接。允许将水流量数据完全传输给Home Assistant，并实现给定数量的灌溉功能。事实证明，在此版本的Sonoff上，固件的触点已经焊接好了，甚至还有一个免费的GPIO02-上面挂着一个脉冲计数器，这是非常成功的。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ec/zz/d9/eczzd9zfq4drf8katpm4ofyn0b4.jpeg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它看起来像一个装有阀门和水表的集热器。</font><font style="vertical-align: inherit;">控制器（sonoff 4Ch）没有进入机架，它已安装在IP65防护罩中半米的位置</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESPHome和家庭助理设置</font></font></h3><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">索诺夫4ch</font></font></b><div class="spoiler_text"> ESPHome    ,     :<br>
<br>
<pre><code class="xml hljs">switch:<font></font>
  - platform: gpio<font></font>
    name: "   1"<font></font>
    pin: GPIO12<font></font>
    id: sw1<font></font>
    icon: mdi:water<font></font>
  - platform: gpio<font></font>
    name: "   2"<font></font>
    pin: GPIO5<font></font>
    id: sw2<font></font>
    icon: mdi:water<font></font>
  - platform: gpio<font></font>
    name: "   3"<font></font>
    pin: GPIO4<font></font>
    id: sw3<font></font>
    icon: mdi:water<font></font>
  - platform: gpio<font></font>
    name: "   4"<font></font>
    pin: GPIO15<font></font>
    id: sw4<font></font>
    icon: mdi:water<font></font>
binary_sensor:<font></font>
  - platform: gpio<font></font>
    name: "WaterCounter"<font></font>
    id: button<font></font>
    pin:<font></font>
      number: GPIO2<font></font>
      mode: INPUT_PULLUP<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电容式土壤湿度传感器v1.2</font></font></b><div class="spoiler_text">   ESPHome:<br>
<br>
<pre><code class="xml hljs">sensor:<font></font>
  - platform: adc<font></font>
    pin: GPIO34<font></font>
    filters:<font></font>
      - lambda: |-<font></font>
          if (x &gt; 3.22) {<font></font>
            return 0;<font></font>
          } else if (x <span class="hljs-tag">&lt; <span class="hljs-attr">1.65</span>) {
            <span class="hljs-attr">return</span> <span class="hljs-attr">100</span>;
          } <span class="hljs-attr">else</span> {
            <span class="hljs-attr">return</span> (<span class="hljs-attr">3.22-x</span>) / (<span class="hljs-attr">3.22-1.65</span>) * <span class="hljs-attr">100.0</span>;
          }
    <span class="hljs-attr">name:</span> "   <span class="hljs-attr">1</span>  "
    <span class="hljs-attr">update_interval:</span> <span class="hljs-attr">60s</span>
    <span class="hljs-attr">attenuation:</span> <span class="hljs-attr">11db</span>
    <span class="hljs-attr">unit_of_measurement:</span> "%"
    <span class="hljs-attr">accuracy_decimals:</span> <span class="hljs-attr">0</span>
    <span class="hljs-attr">icon:</span> <span class="hljs-attr">mdi:water-percent</span>
</span></code></pre><br>
       (ADC)  <br>
  ,        (   3.22 )     (1,65 ).      log'   ESPHome  HassIO            .<br>
<br>
<img src="https://habrastorage.org/webt/sb/tf/b4/sbtfb4ckgxx7kltxe6kk8a5q0r4.png"><br>
<br>
  ESP32  Home Assistant    ,         <br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脉冲水表</font></font></b><div class="spoiler_text">   «»,          (   ).       —      ,   ,        (  —  3   10 ). <br>
,      GND    GPIO      .<br>
<br>
  ESPHome   : <br>
<br>
<pre><code class="xml hljs">binary_sensor:<font></font>
  - platform: gpio<font></font>
    name: "WaterCounter"<font></font>
    id: counter<font></font>
    pin:<font></font>
      number: GPIO2<font></font>
      mode: INPUT_PULLUP<font></font>
</code></pre><br>
 Home Assistant   :<br>
<br>
     (counter),       <br>
          (,   «»  ).      —  counter,              ESPHome,   sensor,          counter (       ).<br>
<br>
           2      —    ,    «».       ,   ,                      . <br>
<br>
<div class="spoiler"><b class="spoiler_title">    ( automations.yaml   )</b><div class="spoiler_text"><pre><code class="xml hljs">- alias:     <font></font>
  trigger:<font></font>
  - entity_id: binary_sensor.watercounter<font></font>
    platform: state<font></font>
    from: 'on'<font></font>
    to: 'off'<font></font>
  action:<font></font>
  - data:<font></font>
      entity_id:<font></font>
      - counter.my_water_counter<font></font>
    service: counter.increment<font></font>
- alias:    1 <font></font>
  trigger:<font></font>
  - entity_id: binary_sensor.watercounter<font></font>
    platform: state<font></font>
    from: 'on'<font></font>
    to: 'off'<font></font>
  condition:<font></font>
    - condition: state<font></font>
      entity_id: switch.sistema_poliva_liniia_1<font></font>
      state: 'on'<font></font>
  action:<font></font>
  - data:<font></font>
      entity_id:<font></font>
      - counter.my_water_line1, counter.my_water_line1t<font></font>
    service: counter.increment    <font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title">  configuration.yaml    +      </b><div class="spoiler_text"><pre><code class="xml hljs"><font></font>
sensor:<font></font>
  - platform: template<font></font>
    sensors:<font></font>
      water_counter:    <font></font>
        unit_of_measurement: 'M3'<font></font>
        value_template: "{{ (states('counter.my_water_counter')| float)/1000 }}"    <font></font>
counter:<font></font>
  my_water_counter:<font></font>
    initial: 2.667<font></font>
    step: 10<font></font>
  my_water_line1:<font></font>
    name: " 1     ()"<font></font>
    initial: 0<font></font>
    step: 10<font></font>
  my_water_line1t:<font></font>
    name: " 1   ()"<font></font>
    initial: 0<font></font>
    step: 10<font></font>
</code></pre><br>
</div></div><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MiFlora传感器</font></font></b><div class="spoiler_text"> MiFlora   ESPHome   ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow">esphome.io</a> <br>
 Home Assistant          — , ,   «» .   —     ,        .<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虚拟降雨传感器</font></font></b><div class="spoiler_text">   —          .            ,   . <br>
<br>
       darksky.  ,          Apple        « ». API  , ,   ,      ,   HA     .      darksky, ,          .<br>
<br>
  2        :<br>
<br>
<div class="spoiler"><b class="spoiler_title">  configuration.yaml  sensors.yaml   </b><div class="spoiler_text"><pre><code class="xml hljs"><font></font>
sensor:<font></font>
  - platform: darksky<font></font>
    api_key: xxxx_your_API_key_xxxx<font></font>
    forecast:<font></font>
      - 1<font></font>
      - 2<font></font>
    monitored_conditions:<font></font>
      - precip_intensity<font></font>
</code></pre><br>
   HA   : sensor.dark_sky_precip_intensity_1d  sensor.dark_sky_precip_intensity_2d,              .<br>
</div></div><br>
       template-sensor:<br>
<br>
<div class="spoiler"><b class="spoiler_title">  configuration.yaml  sensors.yaml    </b><div class="spoiler_text"><pre><code class="xml hljs"><font></font>
sensor:<font></font>
  - platform: template<font></font>
    sensors:<font></font>
       rain2days:    <font></font>
        unit_of_measurement: 'mm'<font></font>
        value_template: "{{ (((states('sensor.dark_sky_precip_intensity_2d')| float)+(states('sensor.dark_sky_precip_intensity_1d')| float))*24)| round(3) }}"    <font></font>
</code></pre><br>
 HA  sensor.rain2days          2 . <br>
  ,   Darksky         ,              <br>
</div></div><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
收集完所有数据后，您可以直接进行浇水。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这就是我从家庭助理中的一个区域查看界面的方式：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pf/l6/ut/pfl6ut8aoieytcg0kxlk-mjslcu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里您可以设置用于灌溉的水量（使用滑块），并查看主要传感器和计数器的值。</font><font style="vertical-align: inherit;">我为其中一条线路提供了接口，其余的一切都一样，仅在带有有线数据传感器的线路上要少一些。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在界面中，您会注意到一个“多余的”细节-辅助传感器“已达到标准”。</font><font style="vertical-align: inherit;">它必须被引入，因为 </font><font style="vertical-align: inherit;">我无法获得条件：当达到水量标准时，模板可以工作以停止自动化，结果，自动化只是检查该传感器的值。</font><font style="vertical-align: inherit;">我确信可以使自动化的这一部分变得更简单，更优雅，但是我的水平还不够。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下是生成的“拐杖”模板传感器的代码：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浇水充足传感器（在configuration.yaml或单独的文件中）</font></font></b><div class="spoiler_text"><pre><code class="xml hljs">  - platform: template<font></font>
    sensors:<font></font>
      line4_status:<font></font>
        friendly_name: " 4 -  "<font></font>
        value_template: &gt;-<font></font>
          {% if states('counter.my_water_line4t')|float &gt; states('input_number.slider4')|float %}<font></font>
            yes<font></font>
          {% elif states('counter.my_water_line4t')|float == states('input_number.slider4')|float  %}<font></font>
            yes<font></font>
          {% else %}<font></font>
            no<font></font>
          {% endif %}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
开始浇水的自动化最终看起来像这样：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始浇水（在automations.yaml或单独的文件中）</font></font></b><div class="spoiler_text"><pre><code class="xml hljs">- alias:   4   23.01<font></font>
  trigger:<font></font>
    platform: time<font></font>
    at: "23:01:00"<font></font>
  condition:<font></font>
   condition: and<font></font>
   conditions:<font></font>
#    <font></font>
    - condition: numeric_state<font></font>
      entity_id: sensor.rainfor2days<font></font>
      below: 5<font></font>
#      <font></font>
    - condition: numeric_state<font></font>
      entity_id: sensor.miflora_1_moisture<font></font>
      below: 50<font></font>
# ,       <font></font>
    - condition: state<font></font>
      entity_id: 'sensor.line4_status'<font></font>
      state: 'no'<font></font>
  action:<font></font>
   - service: switch.turn_on<font></font>
     entity_id: switch.sistema_poliva_liniia_4<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
浇水从傍晚开始，每条线在其自己的时间间隔开始。</font><font style="vertical-align: inherit;">按开始时间进行分隔可让您使用一个进水水表来获取4条线上的数据。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在启动时，将检查三个条件：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是否不超过今天的用水量限制（例如，如果打开了手动浇水）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">湿度是否超过50％（根据我们的条件观察，新洒的土壤的水分含量不超过60％）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在接下来的两天内，预计不会出现大于5毫米的降水。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下一个自动化是禁用浇水：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用浇水（在automations.yaml或单独的文件中）</font></font></b><div class="spoiler_text"><pre><code class="xml hljs">- alias:   4 <font></font>
  trigger:<font></font>
#      <font></font>
  - entity_id: sensor.line4_status<font></font>
    platform: state<font></font>
    to: 'yes'<font></font>
    for: <font></font>
      seconds: 5    <font></font>
#   <font></font>
  - platform: time<font></font>
    at: "23:59:00"<font></font>
#     <font></font>
  - platform: numeric_state<font></font>
    entity_id: sensor.miflora_1_moisture<font></font>
    above: 65<font></font>
#       <font></font>
  - platform: state<font></font>
    entity_id: switch.sistema_poliva_liniia_4<font></font>
    to: 'on'<font></font>
    for: <font></font>
      minutes: 60<font></font>
  action:<font></font>
   - service: switch.turn_off<font></font>
     entity_id: switch.sistema_poliva_liniia_4<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在自动化中，使用了多达4种触发方式，但是在大多数情况下，触发是由第一种触发的-“拐杖”传感器，该传感器监测超出极限的水量。</font><font style="vertical-align: inherit;">出于安全原因，其余触发器大部分都已制成。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好吧，与此问题相关的最后一个自动化是重置每日计数器</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将每日计数器清零（在automations.yaml或单独的文件中）</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><font></font>
- alias:    4 <font></font>
  trigger:<font></font>
  - platform: time<font></font>
    at: "00:00:01"<font></font>
  action:<font></font>
  - service: counter.reset<font></font>
    entity_id: counter.my_water_line4t<font></font>
</code></pre><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目经济学</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
灌溉系统控制部分的成本如下：（</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在项目开始之前已经安装了HassIO的Raspberry PIE和在花园中带有涂层的WiFi路由器，我没有考虑它们）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UNIPUMP BCX-15 1/2“电磁阀（常闭）4 * 20欧元</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sonoff 4CH 17欧元</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
脉冲计Pulsar 8欧元</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESP32 DevKitC 3.5欧元</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电容式土壤湿度传感器v1.2 2 * 0.67欧元</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MiFlora传感器2 * 16欧元防护罩</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
，收集器，电线，配件</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
总计</font><font style="vertical-align: inherit;">约50欧元</font><font style="vertical-align: inherit;">总计：约190欧元</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
传感器和MK的安装时间大约是下午3-4点，持续了几个小时，但是大部分时间都花在了“发明自行车”和“拐杖”上，总的来说，工作很少。</font><font style="vertical-align: inherit;">系统的物理组装大约花费了两个晚上。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般而言，与“傻”计时器系统相比，节水量预计约为20-50％，按当地水价计算，该系统应在一个或两个季节内获得回报。</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺点和修改计划</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该项目的结果显示了一些细微之处和进一步改进的机会。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特别是我将用24V型号代替220V电磁阀-该电压是灌溉系统的标准电压。在这种情况下，您将必须在系统上添加24V变压器，并将Sonoff 4Ch更改为具有干式触点的某些物体（例如Sonoff 4CH Pro或自组装的物体）。阀门本身更便宜（8欧元起），并减少了触电的可能性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果还表明，使用塑料管道时，供水压力过高，并且配件在灌溉周期中可能会泄漏。就我而言，这并不重要，所有配件都位于浇水地面上方，但是以良好的方式，您需要在进口处添加一个减压器以降低压力。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于无法计量少于10升的灌溉用水量，我感到更加不高兴-该容积是这种水表的最小可测量量。</font><font style="vertical-align: inherit;">这个问题可以通过拆解柜台并更换轮子来解决，但是直到那时手还没有到达那里。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN497588/index.html">Spring Security-通过BitBucket的OAuth2授权Web应用程序示例</a></li>
<li><a href="../zh-CN497590/index.html">我们处理波动函数崩溃算法</a></li>
<li><a href="../zh-CN497594/index.html">外部数据存储：从IBM 1311到今天。第1部分</a></li>
<li><a href="../zh-CN497596/index.html">PHP万岁</a></li>
<li><a href="../zh-CN497602/index.html">您是否认为自己是签名人？你在跟谁开玩笑</a></li>
<li><a href="../zh-CN497608/index.html">流量分析系统如何通过MITER ATT＆CK来检测黑客策略，第5部分</a></li>
<li><a href="../zh-CN497612/index.html">关于市场看不见的手如何将我转移到遥远地方的故事</a></li>
<li><a href="../zh-CN497614/index.html">思想实验，悖论和逻辑边界//我们注定了＃2</a></li>
<li><a href="../zh-CN497616/index.html">亚历山大·马卡罗夫（Yii）关于开源，会议和Yii的访谈</a></li>
<li><a href="../zh-CN497618/index.html">实施高度安全的远程访问的概念</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>