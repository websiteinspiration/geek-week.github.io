<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👃🏿 🧑🏽‍🤝‍🧑🏻 👩🏿‍🤝‍👨🏼 Superposition d'une texture 2D sur un objet 3D à l'aide de p5.js (partie 2 - Application d'un motif à un cube) 🏨 📥 🗾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il s'agit de la deuxième partie du projet dans laquelle nous imposons un motif 2D dynamique à un objet 3D. Vous pouvez commencer par la première parti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Superposition d'une texture 2D sur un objet 3D à l'aide de p5.js (partie 2 - Application d'un motif à un cube)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/505402/"><img src="https://habrastorage.org/webt/4s/4t/rf/4s4trfjd_x_iewiw8ectzn3cqva.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit de la deuxième partie du projet dans laquelle nous imposons un motif 2D dynamique à un objet 3D. </font><font style="vertical-align: inherit;">Vous pouvez commencer par la première partie ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partie 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ou simplement copier le code résultant quelques paragraphes ci-dessous. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a quelque temps, j'ai créé un modèle généré à l'aide de plusieurs lignes de code dans la bibliothèque p5.js.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p5.js est une bibliothèque Javascript créée en 2014. </font><font style="vertical-align: inherit;">Son objectif principal est de devenir une fenêtre sur le monde de la programmation pour les designers, artistes, enseignants et autres représentants des professions créatives. </font><font style="vertical-align: inherit;">Il prend en charge à la fois l'animation et les diagrammes, se traduit facilement au format Web.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vais maintenant vous dire comment créer la pièce finale - appliquer un motif à un objet 3D (dans ce cas, un cube).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer à travailler à partir de zéro, vous devez créer un projet dans l'éditeur en ligne </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">editor.p5js.org.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nous continuons de modifier le code suivant:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> =<span class="hljs-number">20</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
translate(<span class="hljs-number">200</span>,<span class="hljs-number">200</span>)
  <span class="hljs-keyword">let</span> x = r+*cos(a);
  <span class="hljs-keyword">let</span> y = r+*sin(a);<font></font>
  fill(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
   =  + <span class="hljs-number">0.06</span>
  a = a + <span class="hljs-number">0.3</span><font></font>
    <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour rendre notre canevas volumineux, nous devons ajouter le paramètre WEBGL à la fonction qui crée notre canevas: createCanvas (400,400, WEBGL). Étant donné que le point de référence pour un tel objet est déjà au centre, nous pouvons (et devons le faire!) Supprimer le translate (200 200), qui a effectué la correction dans une image plate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour diversifier le jeu de couleurs et créer une image plus spectaculaire, remplaçons les paramètres fill () par nos variables r, a, c - à chaque nouvelle itération de la boucle infinie draw (), la couleur des ellipses changera légèrement. Ajoutons également une certaine distance entre les cercles et les angles d'inclinaison en modifiant le taux de variation des variables c et a.</font></font><br>
<br>
<pre><code class="javascript hljs">   =  + <span class="hljs-number">0.06</span>
  a = a + <span class="hljs-number">0.3</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme dernière amélioration, ajoutons push () avant notre code de modèle et pop () après. </font><font style="vertical-align: inherit;">Le cadrage de cette manière rend le code isolé - il ne sera pas affecté par les autres objets que nous créerons.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> c=<span class="hljs-number">20</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>, WEBGL);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  push()<font></font>
  <span class="hljs-keyword">let</span> x = r+c*cos(a);
  <span class="hljs-keyword">let</span> y = r+c*sin(a);<font></font>
  fill(r,a,c);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
  c = c + <span class="hljs-number">0.09</span>
  a = a + <span class="hljs-number">0.8</span><font></font>
  pop()<font></font>
}<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/fo/di/7n/fodi7nd_wup_avsim2xk4yqcugy.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fin de compte, nous obtenons quelque chose comme ça. </font><font style="vertical-align: inherit;">Il est temps de créer un cube. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la même fonction draw (), après pop () nous ajoutons le code de la boîte:</font></font><br>
<br>
<pre><code class="javascript hljs">  push()<font></font>
  box(<span class="hljs-number">200</span>)<font></font>
  pop()<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, la boîte d'une taille de 200 est tournée vers nous d'un seul côté et ressemble à un carré. Pour estimer le volume, nous devons le déployer. Pour ce faire, ajoutez la quatrième variable, en haut, à l'angle r, a, c existant, avec une valeur par défaut de 0. Pour que ce paramètre affecte notre cube, après la deuxième pression (), mais avant de créer la boîte. ajoutez trois fonctions: rotationX (), rotationY (), rotationZ () avec le paramètre d'angle pour chacune. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est logique qu'un objet avec un angle de rotation de 0 degrés ne tourne pas, nous ajoutons donc un changement de la valeur de l'angle variable à 0,003 (pour commencer, cela suffira). En conséquence, nous obtenons le code suivant:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> c=<span class="hljs-number">20</span>
<span class="hljs-keyword">let</span> angle = <span class="hljs-number">0</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>, WEBGL);<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  push()<font></font>
  <span class="hljs-keyword">let</span> x = r+c*cos(a);
  <span class="hljs-keyword">let</span> y = r+c*sin(a);<font></font>
  fill(r,a,c);<font></font>
  ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
  c = c + <span class="hljs-number">0.09</span>
  a = a + <span class="hljs-number">0.8</span><font></font>
  pop()<font></font>
  <font></font>
  push()<font></font>
  rotateX(angle), <font></font>
  rotateY(angle), <font></font>
  rotateZ(angle)<font></font>
  box(<span class="hljs-number">200</span>)<font></font>
  angle = angle + <span class="hljs-number">0.003</span><font></font>
  pop()<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque notre arrière-plan est créé une seule fois (il est en configuration) - nous interceptons le premier bug de notre cube efface l'arrière-plan lorsqu'il est tourné. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w5/cx/dt/w5cxdthj4s6tyqx3jea88dnt9ng.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour y remédier, vous pouvez simplement transférer background (200) à l'intérieur de la fonction draw (). Cependant, nous avons maintenant un autre problème - nos cercles commencent à disparaître, comme ils l'ont fait au début, car maintenant ils sont remplacés à chaque nouveau cycle et n'apparaissent que pendant une fraction de seconde à partir de le néant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour résoudre ce problème, nous devons créer une nouvelle variable (par exemple, art) sans valeur par défaut au tout début à côté d'autres variables de niveau supérieur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la fonction setup (), nous l'assimilons à la fonction createGraphics (400,400), puis nous l'utilisons à d'autres endroits.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous de définir les mêmes paramètres que lors de la création du canevas pour conserver la dimensionnalité.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, à l'intérieur du code du motif, nous ajoutons la variable art via le point à l'ellipse et ses propriétés (telles que fill (), etc., si vous les avez créées). </font></font><br>
<br>
<pre><code class="javascript hljs">art.fill(r,a,c);<font></font>
  art.ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, il reste à imposer le motif au cube comme une texture. </font><font style="vertical-align: inherit;">Pour ce faire, ajoutez la propriété texture (art) à l'intérieur du code de cube. </font><font style="vertical-align: inherit;">La logique est la suivante: nous créons l'essence d'un art objet graphique isolé, qui appelle les fonctions pour créer un motif avec les propriétés spécifiées, et après cela nous donnons à l'art comme paramètre de propriété une texture pour le cube.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> r=<span class="hljs-number">10</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> c=<span class="hljs-number">20</span>
<span class="hljs-keyword">let</span> angle = <span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> art<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setup</span>(<span class="hljs-params"></span>) </span>{<font></font>
  createCanvas(<span class="hljs-number">400</span>, <span class="hljs-number">400</span>, WEBGL);<font></font>
  art = createGraphics(<span class="hljs-number">400</span>,<span class="hljs-number">400</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">draw</span>(<span class="hljs-params"></span>) </span>{<font></font>
  background(<span class="hljs-number">220</span>);<font></font>
  push()<font></font>
  <span class="hljs-keyword">let</span> x = r+c*cos(a);
  <span class="hljs-keyword">let</span> y = r+c*sin(a);<font></font>
  art.fill(r,a,c);<font></font>
  art.ellipse (x,y,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);<font></font>
  c = c + <span class="hljs-number">0.09</span>
  a = a + <span class="hljs-number">0.8</span><font></font>
  pop()<font></font>
  <font></font>
  push()<font></font>
  texture(art)<font></font>
  rotateX(angle), <font></font>
  rotateY(angle), <font></font>
  rotateZ(angle)<font></font>
  box(<span class="hljs-number">200</span>)<font></font>
  angle = angle + <span class="hljs-number">0.003</span><font></font>
  pop()<font></font>
}</code></pre><br>
<img src="https://habrastorage.org/webt/en/ya/ds/enyads2ckbcarldnouacdfmsz8m.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reste à résoudre le dernier problème: notre motif commence à apparaître des coins du cube. </font><font style="vertical-align: inherit;">Pour commencer à partir du centre, nous pouvons simplement ajouter la moitié de la largeur et de la longueur du cube au paramètre x et y pour décaler le centre du début du dessin du motif.</font></font><br>
<br>
<pre><code class="javascript hljs">art.ellipse (x+<span class="hljs-number">200</span>,y+<span class="hljs-number">200</span>,<span class="hljs-number">10</span>,<span class="hljs-number">10</span>);</code></pre><br>
<img src="https://habrastorage.org/webt/gw/cf/uy/gwcfuybz_4rc4eb7xclxv0b7x74.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous souhaitez diversifier le motif, vous pouvez essayer de simplement changer les paramètres ou même ajouter plusieurs motifs qui se croisent, par exemple, à partir d'un autre projet - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment recréer l'effet du motif moiré dans la bibliothèque p5.js pour un débutant (guide rapide)</font></font></a><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">→ L'idée et une partie du code source sont tirées de l'article de Nazia Fakhruddin: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Créer une texture 2D sur une forme 3D dans p5.js</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lien vers les résultats du projet</font></font></a></blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr505388/index.html">Treezor - Leader des services bancaires à la Société Générale</a></li>
<li><a href="../fr505390/index.html">Fondateur de la communauté F #: «OOP et AF du cerveau doivent mourir» // Nous sommes condamnés # 7</a></li>
<li><a href="../fr505394/index.html">Antiquités: Nokia E90, le dernier communicateur</a></li>
<li><a href="../fr505398/index.html">Les côtés sombres et clairs du travail chez Yandex</a></li>
<li><a href="../fr505400/index.html">À quoi devraient ressembler les modèles?</a></li>
<li><a href="../fr505404/index.html">La façon la plus simple d'apprendre l'anglais avec des vidéos TED</a></li>
<li><a href="../fr505412/index.html">Accès sécurisé à une maison intelligente en l'absence d'une adresse IP publique (partie 2)</a></li>
<li><a href="../fr505416/index.html">MikroTik en mode répéteur - tout comme One-Two-Three</a></li>
<li><a href="../fr505418/index.html">[Question] Avez-vous vu des gens qui utilisent des abonnements au contenu mobile?</a></li>
<li><a href="../hi486176/index.html">कॉर्पोरेट ईमेल पत्राचार मेमो</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>