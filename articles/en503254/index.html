<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è∏Ô∏è ü§¨ üë©üèº‚Äçüíº Streaming and casting youtube and more ... via raspberry pi with Gotubecast and KODI TubeCast üì¥ üï∫üèæ üë©üèΩ‚Äçüç≥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How difficult is it to transfer youtube music or video through a phone or other portable, mobile device to your Raspberry pi? And if not portable? Is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Streaming and casting youtube and more ... via raspberry pi with Gotubecast and KODI TubeCast</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503254/"><img src="https://habrastorage.org/getpro/habr/post_images/e5b/c48/771/e5bc487717d8386f7eef96fc2459569d.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How difficult is it to transfer youtube music or video through a phone or other portable, mobile device to your Raspberry pi? </font><font style="vertical-align: inherit;">And if not portable? </font><font style="vertical-align: inherit;">Is it easy to manage media content through Windows or Linux PC? </font><font style="vertical-align: inherit;">It turns out that no. </font><font style="vertical-align: inherit;">I want to consider installing, and setting up several applications on your raspberry with the help of which we can do this.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will assume that streaming in this situation is the process of transferring some kind of media content that is located somewhere on sites on the Internet or, for example, on a local server with our media library to play it on raspberry pi. And casting, in turn, comes from the word cast when we ‚Äútransfer control‚Äù of the media content of an external device to our television, and more precisely, to our raspberry pi connected to a television or music center. In this situation, through the mobile, by launching your youtube application, we redirect the output of video or music through our malinka to the TV. Remember to connect your raspberry pi to the TV via HDMI.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are two options to consider these applications. </font><font style="vertical-align: inherit;">The first option, we configured everything in our project ViaMyBox and you can not bother with various nuances of linux configuration, in this version of the raspbian buster and download the distribution </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://viamybox.com/downloadpage/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or directly from raspberry pi from the repository:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /home/pi<font></font>
git <span class="hljs-built_in">clone</span> https://github.com/viatc/viamybox.git
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
and run the script -&gt; Home Theater -&gt; Cast youtube:</font></font><br>
<br>
<pre><code class="bash hljs">sudo /home/pi/viamybox/scripts/via-setup.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Well, or configure everything yourself as you like, following the examples below. </font><font style="vertical-align: inherit;">I will not compare and describe in detail the functionality in this article of these applications, but simply share the experience of configuration and installation and the nuances that I encountered.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We meet! </font><font style="vertical-align: inherit;">Gotubecast</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Project page: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/CBiX/gotubecast</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Gotubecast is a small program to make your own TV player on YouTube. </font><font style="vertical-align: inherit;">In other words, by launching gotubecast on raspberry pi, we can use the youtube application of the phone or other devices to connect to raspberry pi and launch the youtube movie on the TV. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zj/94/wa/zj94wa_wczvtm9mzob49owc-59i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But in order for this to happen, you will need to take several actions for this ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This program is written in Go. </font><font style="vertical-align: inherit;">Therefore, you need to install it:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /home/pi
<span class="hljs-comment"># </span><font></font>
wget https://dl.google.com/go/go1.13.7.linux-armv6l.tar.gz<font></font>
<span class="hljs-comment"># </span>
sudo tar -C /usr/<span class="hljs-built_in">local</span>/ -xvzf go1.13.7.linux-armv6l.tar.gz
<span class="hljs-comment">#    </span><font></font>
mkdir -p projects/{src,pkg,bin}<font></font>
<span class="hljs-comment"># </span><font></font>
nano /home/pi/.profile<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And write into it our environment variables:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:/usr/<span class="hljs-built_in">local</span>/go/bin
<span class="hljs-built_in">export</span> GOBIN=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/projects/bin"</span>
<span class="hljs-built_in">export</span> GOPATH=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/projects/src"</span>
<span class="hljs-built_in">export</span> GOROOT=<span class="hljs-string">"/usr/local/go"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Check this package:</font></font><br>
<br>
<pre><code class="bash hljs">go version
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Then install our gotubecast:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /home/pi<font></font>
go get github.com/CBiX/gotubecast<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the project, which is located in our created folder /home/pi/projects/src/src/github.com/CBiX/gotubecast/examples, the author prudently wrote the raspi.sh script for raspberry, which simplifies the launch of gotubecast. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We launch it and now the magic is close ...</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /home/pi/projects/src/src/github.com/CBiX/gotubecast/examples<font></font>
./raspi.sh<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After starting the script, we will see a line, something like </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Your pairing code: 901-900-123-183 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It will allow us to find our TV through the phone. </font><font style="vertical-align: inherit;">We go to the youtube application on the phone and then through the account icon in the settings -&gt; watch TV and drive in our code. </font><font style="vertical-align: inherit;">After that, an icon appears through which youtube will be available to view through our raspberry pi. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uw/z3/yi/uwz3yixy5djjkybbr_py53trfrc.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/uc/bu/rz/ucburzh2j1gvkh04aev9rse0rty.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the TV can be lost if there is no connection of the raspberry pi with the google application for a long time, etc. Therefore, in addition to pairing code, it is possible to link your TV to your goggle application using Screen Id forever. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will generate it on our raspberry pi:</font></font><br>
<br>
<pre><code class="bash hljs">wget https://www.youtube.com/api/lounge/pairing/generate_screen_id<font></font>
cat generate_screen_id<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And add it to the file:</font></font><br>
<br>
<pre><code class="bash hljs">nano /home/pi/projects/src/src/github.com/CBiX/gotubecast/examples/raspi.sh
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
into a variable on the following line: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
export SCREEN_ID = "aauaju8Example5539vbb" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To start all this at once at startup, make yourself a small service daemon in the folder:</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /lib/systemd/system/gotubecast.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
and in it:</font></font><br>
<br>
<pre><code class="bash hljs">[Unit]<font></font>
Description=Cast youtube<font></font>
Wants=network-online.target<font></font>
After=network.target network-online.target<font></font>
<font></font>
[Service]<font></font>
Type=simple<font></font>
ExecStart=/bin/bash /home/pi/projects/src/src/github.com/CBiX/gotubecast/examples/raspi.sh<font></font>
Restart=on-abort<font></font>
User=pi<font></font>
Group=pi<font></font>
<font></font>
[Install]<font></font>
WantedBy=multi-user.target<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, initialize it in the system:</font></font><br>
<br>
<pre><code class="bash hljs">systemctl <span class="hljs-built_in">enable</span> gotubecast.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And it will start when the system starts. </font><font style="vertical-align: inherit;">As it turned out, starting the demon, in the absence of a network, it crashes. </font><font style="vertical-align: inherit;">More precisely, raspi.sh does not find the network. </font><font style="vertical-align: inherit;">You can make the network services wait settings through sudo raspi-config.sh, but it‚Äôs generally more pleasant when raspbian downloads quickly) Therefore, let the script check the network itself. </font><font style="vertical-align: inherit;">Add a wait check to the raspi.sh file:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-keyword">while</span> ! ping -q -c 1 8.8.8.8 &gt;/dev/null ; <span class="hljs-keyword">do</span> sleep 1; <span class="hljs-keyword">done</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
copy gotubecast to the daddy for our executable files</font></font><br>
<br>
<pre><code class="bash hljs">sudo cp /home/pi/projects/bin/gotubecast /usr/bin/
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And everything is ready :-) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yes, if you are not a Linuxoid and you have ripples in the eyes of the teams, I automated the entire process described above in the script and it looks like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eu/jf/op/eujfopwrzn1-phdewf9nnsuhvki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To use it, download the project through the site or through github:</font></font><br>
<br>
<pre><code class="bash hljs">git <span class="hljs-built_in">clone</span> https://github.com/viatc/viamybox.git</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
and run the script /home/pi/viamybox/scripts/via-setup.sh and go to the Home theater menu:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> /home/pi<font></font>
git <span class="hljs-built_in">clone</span> https://github.com/viatc/viamybox.git<font></font>
sudo /home/pi/viamybox/scripts/via-setup.sh<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tested on Raspbian Buster OS.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launch Youtube through KODI</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have KODI, then launching a youtube movie through it is much easier. </font><font style="vertical-align: inherit;">To do this, you just need to install the TubeCast plugin. </font><font style="vertical-align: inherit;">Of the advantages, this kodi plugin does not require initial configuration and the plugin perfectly ‚Äúsees‚Äù our raspberry pi without manually pairing code. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ug/gj/tk/uggjtkur86e1zdxqbmznqswmxqe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And after installing the plugin, you will immediately see the cast icon on your andriod youtube application or on youtube page in the browser.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k2/qy/ll/k2qyllrend6ieyebb3nwhd9yxq8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
From the description, it follows that this is an implementation of the Cast V1 protocol for Youtube mobile applications, which in turn is based on the DIAL protocol via SSDP. This technology allows you to connect to your youtube channel as an external service via the Internet. This allows you to find your device with KODI on board without even being on the same network with it. Just update your pairing code on the streaming device. Thus, we connect two devices and transfer control through one device to another, but not the media content itself. Therefore, the transmitting and receiving device (in this case, our raspberry pi) must be on the Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I hope it was interesting. If so, write comments!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the next part, I would like to talk about how to play youtube and other media content from the console terminal with the mps-youtube and straw-viewer and raspicast media combines.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en503242/index.html">Does a programmer need ethics?</a></li>
<li><a href="../en503244/index.html">Consciousness and thesis of Max Fry</a></li>
<li><a href="../en503246/index.html">Simple service discovery in Prometheus via Consul</a></li>
<li><a href="../en503248/index.html">Code review Terminator. Review for which you will be thanked</a></li>
<li><a href="../en503250/index.html">What programming language to learn in 2020?</a></li>
<li><a href="../en503260/index.html">About startups and startups</a></li>
<li><a href="../en503262/index.html">Why ‚Äúangina‚Äù is not ‚Äúsore throat‚Äù, but ‚Äúresin‚Äù is not ‚Äúrubber‚Äù, or False translator friends</a></li>
<li><a href="../en503264/index.html">How instagram anti-vaccines promote their conspiracy theories</a></li>
<li><a href="../en503268/index.html">There is everything, but not what you are looking for</a></li>
<li><a href="../en503272/index.html">The Role of Service Delivery Manager (SDM) in the Kanban Method: How to Hire SDM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>