<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚊 💉 🦉 Frontend-Entwicklung von Portalen für Open Source-Software: Erfahrungsaustausch 🎞️ 👨🏾‍🔬 👸🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im ersten Teil des Artikels darüber, wie wir Portallösungen für die größten Arbeitgeber in Russland erstellen, wurde die Architektur vom Backend besch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Frontend-Entwicklung von Portalen für Open Source-Software: Erfahrungsaustausch</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digdes/blog/492212/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ersten Teil des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Artikels darüber, wie wir Portallösungen für die größten Arbeitgeber in Russland erstellen, wurde die Architektur vom Backend beschrieben. </font><font style="vertical-align: inherit;">In diesem Artikel werden wir zum Frontend übergehen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/j5/rj/wzj5rj7alebchimas2cqght5dcq.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie bereits im ersten Teil erwähnt, bestand unser Hauptziel darin, eine Plattform zu entwickeln, die einfach skaliert und gewartet werden kann. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiederverwendbarkeit Die</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Vorderseite ist größtenteils in </font><b><font style="vertical-align: inherit;">Vue.js</font></b><font style="vertical-align: inherit;"> geschrieben. Da das gesamte Portal in Portlets unterteilt ist, ist jedes von ihnen eine separate Vue-Instanz mit eigenem Vuex, Vue-Router und eigenen Komponenten. Jede solche Instanz wird in ein eigenes Repository verschoben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da sich das Portlet in seinem Repository befindet, stellt sich die Frage, wie nicht viel des gleichen Codetyps für verschiedene Portlets geschrieben werden kann. Um dieses Problem zu lösen, übertragen wir alles, was wiederverwendet werden kann, in ein separates Repository, das dann über Git-Module verbunden wird. Im Moment gibt es zwei solche Submodule.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Man speichert gemeinsame Funktionen: Dies sind gemeinsame Komponenten, Dienste, Konstanten usw. Wir haben dieses Modul namens Vue-common. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das zweite Submodul enthält Einstellungen für die Montage, es speichert Konfigurationen für das Webpack sowie Lader und Helfer, die während der Montage benötigt werden. Dieses Modul heißt Vue-Bundler. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zur Vereinfachung der Arbeit mit der API wurden die REST-Methoden auch in allgemeine und lokale Methoden unterteilt. In Vue-common wurden Methoden eingeführt, um eine Liste der Portalbenutzer, Verwaltungsmethoden, den Zugriff auf das Portal-Dateisystem und andere zu erhalten. Alle API-Endpunkte wurden in separate Dienste verschoben, die am Einstiegspunkt registriert und mit der Vue-Instanz verbunden waren. Dann können sie überall in der Anwendung verwendet werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder einzelne Dienst ist im Plugin registriert. </font><font style="vertical-align: inherit;">Vue verfügt über eine integrierte Verwendungsfunktion zum Verbinden von Plugins. </font><font style="vertical-align: inherit;">Lesen Sie </font><font style="vertical-align: inherit;">mehr über Plugins in Vue </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Plugin selbst wird folgendermaßen initialisiert:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Api</span> </span>{<font></font>
    constructor () {<font></font>
        <span class="hljs-comment">//  http ,   </span>
        <span class="hljs-keyword">this</span>.instance = instance<font></font>
<font></font>
        <span class="hljs-comment">//     </span>
       <span class="hljs-comment">//     this,      http </span>
        Object.keys(commonServices).forEach(name =&gt; commonServices[name](<span class="hljs-keyword">this</span>))<font></font>
        <font></font>
        <span class="hljs-comment">//     </span>
	requireService.keys().forEach(filename =&gt; requireService(filename).<span class="hljs-keyword">default</span>(<span class="hljs-keyword">this</span>))<font></font>
    }<font></font>
<font></font>
    install () {<font></font>
	Vue.prototype.$api= <span class="hljs-keyword">this</span><font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-function">export <span class="hljs-keyword">default</span> new <span class="hljs-title">Api</span><span class="hljs-params">()</span>
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusätzlich zur Initialisierung:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die http-Client-Instanz wird erstellt. </font><font style="vertical-align: inherit;">Das setzt die baseURL unseres Backends und der Header</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> instance = axios.create({<font></font>
	baseURL: <span class="hljs-string">'/example/api'</span>,<font></font>
	responseType: <span class="hljs-string">'json'</span>,<font></font>
	headers: {<font></font>
		<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
		<span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-cache'</span>,
		<span class="hljs-string">'Pragma'</span>: <span class="hljs-string">'no-cache'</span>,<font></font>
	}<font></font>
})<font></font>
                backend   ,   axios.</code></pre><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es werden Dienste erstellt, die die Anforderungen selbst speichern</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-comment">// api -   http </span>
export <span class="hljs-keyword">default</span> api =&gt; {<font></font>
	api.exampleService= {<font></font>
		exampleGetRequest(params) {<font></font>
			<span class="hljs-keyword">return</span> api.instance.request({<font></font>
				method: <span class="hljs-string">'get'</span>,<font></font>
				url: `example/get`,<font></font>
				params<font></font>
			})<font></font>
		},<font></font>
		examplePostRequest(data) {<font></font>
			<span class="hljs-keyword">return</span> api.instance.request({<font></font>
				method: <span class="hljs-string">'post'</span>,<font></font>
				url: `example/post`,<font></font>
				data<font></font>
			})<font></font>
		},<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Regel reicht es aus, nur einen solchen Dienst zu erstellen, und er ist bereits für jedes Portlet in der Api-Klasse registriert</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allgemeine und lokale Dienste sind registriert</font></font><br>
<br>
<pre><code class="java hljs">     <span class="hljs-keyword">const</span> requireService = require.context(<span class="hljs-string">'./service'</span>, <span class="hljs-keyword">false</span>, /.service.js$/)
</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Komponenten werden sie sehr einfach verwendet. </font><font style="vertical-align: inherit;">Zum Beispiel:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
	<span class="hljs-attr">methods</span>: {<font></font>
		someMethod() {<font></font>
    			<span class="hljs-keyword">this</span>.$api.exampleService.exampleGetRequest()<font></font>
}<font></font>
}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie Anfragen außerhalb der Anwendung stellen müssen, können Sie dies tun:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//    (@ -     )</span>
<span class="hljs-keyword">import</span> api <span class="hljs-keyword">from</span> ‘@/api’<font></font>
<font></font>
<span class="hljs-comment">//        </span><font></font>
api.exampleService.exampleGetRequest()<font></font>
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skalierung</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wie oben erwähnt, wird für jedes Portal ein separates Bundle gesammelt, und jedes Bundle verfügt über eigene Einstiegspunkte. In jedem von ihnen werden Komponenten und Assets registriert, die Autorisierung für die lokale Entwicklung konfiguriert und Plug-Ins verbunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komponenten werden für jede Anwendung global registriert, sowohl lokal als auch allgemein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Komponentenregistrierung sieht folgendermaßen aus:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">import</span> _ from “lodash”<font></font>
<font></font>
<span class="hljs-keyword">const</span> requireComponent = require.context(<span class="hljs-string">'@/components'</span>, <span class="hljs-keyword">true</span>, /^[^_].+\.vue$/i)<font></font>
<font></font>
requireComponent.keys().forEach(filename =&gt; {<font></font>
    <span class="hljs-keyword">const</span> componentConfig = requireComponent(filename)<font></font>
<font></font>
    <span class="hljs-comment">// Get PascalCase name of component</span>
    <span class="hljs-keyword">const</span> componentName = _.upperFirst(<font></font>
        _.camelCase(/\/\w+\.vue/.exec(filename)[<span class="hljs-number">0</span>].replace(/^\.\<span class="hljs-comment">//, '').replace(/\.\w+$/, ''))</span><font></font>
    )<font></font>
<font></font>
    Vue.component(componentName, componentConfig.<span class="hljs-keyword">default</span> || componentConfig)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manchmal muss das Portal, das wir entwickeln, einzigartige Funktionen hinzufügen. Dazu müssen Sie Komponenten schreiben, die für das Portal einzigartig sind, oder eine Komponente einfach auf eine andere Weise implementieren. Es reicht aus, eine Komponente in einem separaten Ordner zu erstellen, z. B. / components-portal / * portal name * / *. Vue, und sie am gewünschten Einstiegspunkt zu registrieren, wobei require.context nicht für einen Ordner, sondern für mehrere Ordner hinzugefügt wird.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> contexts = [<font></font>
    require.context(<span class="hljs-string">'@/components'</span>, <span class="hljs-keyword">true</span>, /^[^_].+\.vue$/i),<font></font>
   require.context(<span class="hljs-string">'@/components-portal/example'</span>, <span class="hljs-keyword">true</span>, /^[^_].+\.vue$/i)<font></font>
]<font></font>
<font></font>
contexts.forEach(requireComponent =&gt; {<font></font>
    requireComponent.keys().forEach(filename =&gt; {<font></font>
        <span class="hljs-keyword">const</span> componentConfig = requireComponent(filename)<font></font>
<font></font>
        <span class="hljs-comment">// Get PascalCase name of component</span>
        <span class="hljs-keyword">const</span> componentName = _.upperFirst(<font></font>
            _.camelCase(/\/\w+\.vue/.exec(filename)[<span class="hljs-number">0</span>].replace(/^\.\<span class="hljs-comment">//, '').replace(/\.\w+$/, ''))</span><font></font>
        )<font></font>
<font></font>
        Vue.component(componentName, componentConfig.<span class="hljs-keyword">default</span> || componentConfig)<font></font>
    })<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie für die Komponente für ein bestimmtes Portal denselben Namen wie für die allgemeine Komponentenbibliothek festlegen, wird diese einfach als Eigenschaft des Objekts neu geschrieben und als Komponente für dieses Portal verwendet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assets wie SVG-Symbole werden ebenfalls global registriert. </font><font style="vertical-align: inherit;">Wir verwenden svg-sprite-loader, um ein Sprite aus svg-Symbolen zu erstellen und sie dann über &lt;use: xlink: href = "# * icon name *" /&gt; zu verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie werden wie </font><font style="vertical-align: inherit;">folgt </font><font style="vertical-align: inherit;">registriert:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">const</span> requireAll = (r) =&gt; r.keys().forEach(r)<font></font>
<font></font>
<span class="hljs-keyword">const</span> requireContext = require.context(<span class="hljs-string">'@/assets/icons/'</span>, <span class="hljs-keyword">true</span>, /\.svg$/)<font></font>
<font></font>
requireAll(requireContext)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um nicht nur die Funktionalität, sondern auch die Komponentenstile zu skalieren, haben wir einen Mechanismus zum Ändern der Stile für ein bestimmtes Portal implementiert. </font><font style="vertical-align: inherit;">Einzeldateikomponenten geben Stile im &lt;style&gt; -Tag an und werden standardmäßig verwendet. </font><font style="vertical-align: inherit;">Um Stile für ein bestimmtes Portal zu implementieren, müssen Sie sie in einem anderen Tag registrieren</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de492194/index.html">Treffen Sie einen Mann, der drahtlose Geräte verkauft, um schnell Luxusautos zu stehlen</a></li>
<li><a href="../de492200/index.html">Testautomatisierung: Java oder Python?</a></li>
<li><a href="../de492202/index.html">Коронавирус COVID-19: только факты, без паники</a></li>
<li><a href="../de492204/index.html">So umgehen Sie Fehler beim Erstellen von Berichten in Power BI und beim Aufbau eines Upload-Systems für Big Data</a></li>
<li><a href="../de492210/index.html">Technischer Überblick über die Infinidat-Speicherarchitektur</a></li>
<li><a href="../de492214/index.html">Warum lohnt es sich, sich beim Gehen zu treffen? Von der Wissenschaft bewiesen, von der Mafia bestätigt</a></li>
<li><a href="../de492216/index.html">Speichern von Werten in einer .NET-Anwendung in der Erstellungsphase</a></li>
<li><a href="../de492218/index.html">Zu beachtende Icon-Design-Regeln</a></li>
<li><a href="../de492220/index.html">5 wenig bekannte Geheimnisse der Pandas</a></li>
<li><a href="../de492222/index.html">Write-up CTFZone Quals 2019: Huhn</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>