<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🈹 🌥️ 🤴🏾 Membuat SQL Server dan PerfMon Friends 👌🏾 🏩 🤴🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di foto ada adegan dari komedi lama yang baik "Pesawat" - boomer mengingatnya. 
 
 
 
 Dia tidak di sini karena kebetulan. Namun bermanfaat nantinya.
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Membuat SQL Server dan PerfMon Friends</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497238/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di foto ada adegan dari komedi lama yang baik "Pesawat" - boomer mengingatnya. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ln/if/dn/lnifdnnc4rrtbmkaivipqr0gbks.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dia tidak di sini karena kebetulan. </font><font style="vertical-align: inherit;">Namun bermanfaat nantinya.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dba tidak suka perfmon</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini tidak sama sekali karena antarmuka PerfMon tidak berubah dengan Windows NT 3.1 (?) Dan mengembalikan kehangatan dua per seribu. Ngomong-ngomong, mungkin seseorang tahu penjelasan untuk fakta aneh ini. Panel kontrol ditulis ulang beberapa kali dalam setahun. Bahkan kalkulator pun ditulis ulang. Tapi bukan perfMon. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DBA berpikir dengan kata-kata penutup. Ketika seorang dokter DBA yang baik tiba di server SQL yang sakit, ia membuka kopernya, dan di dalam koper ada sejumlah besar tempat yang melayani dengan setia. Dia mengambil yang terpendek dari memori. Terkadang DBA dapat melihat metrik PerfMon - disk fisik, atau Panjang Antrian Disk. Namun, DBA nyata akan mendapatkan metrik server SQL sendiri, bukan melalui PerfMon, tetapi dengan tambalan, misalnya, seperti ini:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> sys.dm_os_performance_counters 
  <span class="hljs-keyword">where</span> object_name=<span class="hljs-string">'SQLServer:Buffer Manager'</span> 
    <span class="hljs-keyword">and</span> counter_name <span class="hljs-keyword">like</span> <span class="hljs-string">'Page life expectancy%'</span> 
	<span class="hljs-keyword">and</span> instance_name=<span class="hljs-string">''</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat perwakilan TI, bercerai dari lingkup DBA, tanyakan padanya, "metrik apa yang ingin Anda kumpulkan?" </font><font style="vertical-align: inherit;">(well, ada semua jenis splunk, squared-up, dll.), maka DBA mulai memikirkan skrip, dan sisanya tentang metrik perfmon. </font><font style="vertical-align: inherit;">Pada saat yang sama, sebagai aturan, mereka mencoba membuang semua metrik pada DBA. </font><font style="vertical-align: inherit;">Ketika ini terjadi, gambar tidak berguna dalam kemacetannya. </font><font style="vertical-align: inherit;">Dan kemudian </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">klip video</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pendek </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">dari film "Airplane"</font></a><font style="vertical-align: inherit;"> akan membantu saya </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Akibatnya, DBA menulis keri, yang menulis statistik setiap N menit ke beberapa piring dalam database DBAtasks. </font><font style="vertical-align: inherit;">Apakah Anda mengenali diri sendiri?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Advokat Iblis (perfmon)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun demikian, penghitung perfmon adalah alat standar. </font><font style="vertical-align: inherit;">Mereka dapat login, mengatur peringatan, tetapi yang paling penting, ada sejumlah besar sistem yang "menggabungkan" metrik-metrik ini dari banyak mesin menjadi repositori terpusat, memungkinkan Anda untuk menganalisis dan membangun grafik yang indah (dan tidak seperti perfmon). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ternyata kita bisa berteman dengan dunia SQL dan dunia PerfMon! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah ini saya akan menunjukkan caranya.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekarang spesifik akan pergi</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh, kami akan menunjukkan cara mengekspor metrik yang SQL sendiri tidak terbitkan ke PerfMon. </font><font style="vertical-align: inherit;">Misalnya, kueri di bawah ini:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">select</span>
  <span class="hljs-keyword">convert</span>(<span class="hljs-built_in">numeric</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<span class="hljs-keyword">round</span>(((<span class="hljs-keyword">sum</span>(version_store_reserved_page_count)*<span class="hljs-number">1.0</span>)/<span class="hljs-number">128.00</span>),<span class="hljs-number">2</span>)),
  <span class="hljs-keyword">convert</span>(<span class="hljs-built_in">numeric</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<span class="hljs-keyword">round</span>(((<span class="hljs-keyword">sum</span>(user_object_reserved_page_count)*<span class="hljs-number">1.0</span>)/<span class="hljs-number">128.00</span>),<span class="hljs-number">2</span>)),
  <span class="hljs-keyword">convert</span>(<span class="hljs-built_in">numeric</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<span class="hljs-keyword">round</span>(((<span class="hljs-keyword">sum</span>(internal_object_reserved_page_count)*<span class="hljs-number">1.0</span>)/<span class="hljs-number">128.00</span>),<span class="hljs-number">2</span>))
<span class="hljs-keyword">from</span>
  tempdb.sys.dm_db_file_space_usage;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mengembalikan jumlah ruang tempdb yang digunakan oleh versi store (untuk snapshot), objek pengguna (tab #tab dan ##) dan mengurutkan / ruang penyimpanan sementara. </font><font style="vertical-align: inherit;">Mari buat metrik untuk mereka (18+, tim tidak memiliki dokumen)</font></font><br>
<br>
<pre><code class="sql hljs">dbcc addinstance ('SQLServer:User Settable', 'TempDB version store KB')<font></font>
dbcc addinstance ('SQLServer:User Settable', 'TempDB user store KB')<font></font>
dbcc addinstance ('SQLServer:User Settable', 'TempDB sort store KB')<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini akan membuat tiga metrik dalam SQLServer -&gt; UserSettable -&gt; Query. </font><font style="vertical-align: inherit;">Metriknya adalah bilangan bulat - int (bukan bigint). </font><font style="vertical-align: inherit;">Selain itu, maknanya diartikan apa adanya. </font><font style="vertical-align: inherit;">Artinya, jika Anda membutuhkan delta dari nilai sebelumnya, maka ini adalah urusan Anda. </font><font style="vertical-align: inherit;">Namun dalam kasus ini, kita hanya perlu memberikan nilai ke metrik:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">declare</span> @TEMPDBver <span class="hljs-built_in">int</span>, @TEMPDBuser <span class="hljs-built_in">int</span>, @TEMPDBsort <span class="hljs-built_in">int</span>
<span class="hljs-keyword">select</span><font></font>
<font></font>
@TEMPDBver = <span class="hljs-keyword">convert</span>(<span class="hljs-built_in">numeric</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<span class="hljs-keyword">round</span>(((<span class="hljs-keyword">sum</span>(version_store_reserved_page_count) *<span class="hljs-number">1.0</span>)/<span class="hljs-number">128.00</span>),<span class="hljs-number">2</span>)),<font></font>
@TEMPDBuser = <span class="hljs-keyword">convert</span>(<span class="hljs-built_in">numeric</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<span class="hljs-keyword">round</span>(((<span class="hljs-keyword">sum</span>(user_object_reserved_page_count) *<span class="hljs-number">1.0</span>)/<span class="hljs-number">128.00</span>),<span class="hljs-number">2</span>)),<font></font>
@TEMPDBsort = <span class="hljs-keyword">convert</span>(<span class="hljs-built_in">numeric</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),<span class="hljs-keyword">round</span>(((<span class="hljs-keyword">sum</span>(internal_object_reserved_page_count) *<span class="hljs-number">1.0</span>)/<span class="hljs-number">128.00</span>),<span class="hljs-number">2</span>))
<span class="hljs-keyword">from</span> tempdb.sys.dm_db_file_space_usage;<font></font>
<font></font>
if @TEMPDBver is not null    <font></font>
  dbcc setinstance ('SQLServer:User Settable', 'Query', <font></font>
    'TempDB version store KB', @TEMPDBver)<font></font>
if @TEMPDBuser is not null   <font></font>
  dbcc setinstance ('SQLServer:User Settable', 'Query', <font></font>
   'TempDB user store KB', @TEMPDBuser)<font></font>
if @TEMPDBsort is not null   <font></font>
  dbcc setinstance ('SQLServer:User Settable', 'Query', <font></font>
    'TempDB sort store KB', @TEMPDBsort)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya itu saja. </font><font style="vertical-align: inherit;">Sekarang panggil saja kode ini secara teratur dan semuanya akan berfungsi.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penghitung Delta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita membuat penghitung delta. </font><font style="vertical-align: inherit;">Ini akan menjadi batas waktu penguncian dalam ms.</font></font><br>
<br>
<pre><code class="sql hljs">dbcc addinstance ('SQLServer:User Settable', '<span class="hljs-keyword">LOCK</span> ms per s<span class="hljs-string">')
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di sini Anda dapat mengajukan keberatan kepada saya bahwa metrik semacam itu sudah ada:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> sys.dm_os_performance_counters 
  <span class="hljs-keyword">where</span> counter_name <span class="hljs-keyword">like</span> <span class="hljs-string">'Lock Wait Time (ms)%'</span> 
    <span class="hljs-keyword">and</span> instance_name=<span class="hljs-string">'_Total'</span>
    <span class="hljs-keyword">and</span> object_name=<span class="hljs-string">'SQLServer:Locks'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetapi metrik ini akhirnya konsisten. </font><font style="vertical-align: inherit;">Seperti yang Anda ingat, jika proton tidak stabil, maka setiap basis data di alam semesta pada akhirnya konsisten. </font><font style="vertical-align: inherit;">Artinya, jika Anda membuat kunci dan melihat nilai metrik ini, maka itu tidak akan tumbuh! </font><font style="vertical-align: inherit;">Dan hanya pada akhir kunci nilainya akan melonjak tajam selama waktu tunggu penuh. </font><font style="vertical-align: inherit;">Pada grafik, alih-alih 'dataran tinggi' yang diharapkan, Anda akan mendapatkan puncak yang tajam, yang juga merusak skala Anda di sepanjang sumbu Y. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Masalah yang sama adalah dengan kvery:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">select</span> <span class="hljs-keyword">sum</span>(wait_time_ms) 
  <span class="hljs-keyword">from</span> sys.dm_os_wait_stats 
  <span class="hljs-keyword">where</span> wait_type <span class="hljs-keyword">like</span> <span class="hljs-string">'LCK_%'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oleh karena itu, kita harus menambahkan waktu yang sekarang ke waktu kunci 'selesai':</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">declare</span> @NEWlock <span class="hljs-built_in">bigint</span>
<span class="hljs-keyword">select</span> @NEWlock=<span class="hljs-keyword">sum</span>(wait_time_ms) 
  <span class="hljs-keyword">from</span> sys.dm_os_wait_stats 
  <span class="hljs-keyword">where</span> wait_type <span class="hljs-keyword">like</span> <span class="hljs-string">'LCK_%'</span> <span class="hljs-comment">-- finished waits</span>
<span class="hljs-keyword">select</span> @NEWlock=@NEWlock+<span class="hljs-keyword">isnull</span>(<span class="hljs-keyword">sum</span>(waittime),<span class="hljs-number">0</span>) 
  <span class="hljs-keyword">from</span> master.dbo.sysprocesses 
  <span class="hljs-keyword">where</span> blocked&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> lastwaittype <span class="hljs-keyword">like</span> <span class="hljs-string">'LCK_%'</span> <span class="hljs-comment">-- waits in progress</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertanyaan ini sudah memberikan dataran tinggi yang benar pada grafik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kita perlu mempertimbangkan delta dari nilai sebelumnya. </font><font style="vertical-align: inherit;">Ada dua cara:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desain proses sebagai pekerjaan yang sering disebut (katakanlah, sekali per menit). </font><font style="vertical-align: inherit;">Buat label untuk menyimpan nilai sebelumnya. </font><font style="vertical-align: inherit;">Bahkan, sering kali buruk untuk menyebut pekerjaan (overhead + kompetisi untuk riwayat pelaksanaan Pekerjaan), dan Anda dapat melakukannya tanpa plat tambahan:</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat proses yang berjalan dalam satu lingkaran tanpa akhir dengan menunggu. </font><font style="vertical-align: inherit;">Proses mengingat nilai sebelumnya dalam variabel. </font><font style="vertical-align: inherit;">Kami akan memproses proses tersebut sebagai pekerjaan dengan dua jadwal: saat mulai dan satu jam sekali (jika pekerjaan jatuh, maka akan dimulai kembali)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam kasus kedua, sangat mungkin untuk melakukan siklus setiap lima detik atau bahkan lebih sering. </font><font style="vertical-align: inherit;">Jadi, kita dapat:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">declare</span> @OLDlock <span class="hljs-built_in">bigint</span>, @NEWlock <span class="hljs-built_in">bigint</span>
<span class="hljs-keyword">declare</span> @<span class="hljs-keyword">lock</span> <span class="hljs-built_in">int</span>, @<span class="hljs-keyword">seconds</span> <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span> <span class="hljs-comment">-- must match WAITFOR</span>
<span class="hljs-keyword">loop</span>:
  <span class="hljs-keyword">set</span> @OLDlock=@NEWlock <span class="hljs-comment">-- shift new to old</span>
  <span class="hljs-keyword">select</span> @NEWlock=<span class="hljs-keyword">sum</span>(wait_time_ms) 
    <span class="hljs-keyword">from</span> sys.dm_os_wait_stats 
	<span class="hljs-keyword">where</span> wait_type <span class="hljs-keyword">like</span> <span class="hljs-string">'LCK_%'</span> <span class="hljs-comment">-- finished waits</span>
  <span class="hljs-keyword">select</span> @NEWlock=@NEWlock+<span class="hljs-keyword">isnull</span>(<span class="hljs-keyword">sum</span>(waittime),<span class="hljs-number">0</span>) 
    <span class="hljs-keyword">from</span> master.dbo.sysprocesses 
	<span class="hljs-keyword">where</span> blocked&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> lastwaittype <span class="hljs-keyword">like</span> <span class="hljs-string">'LCK_%'</span> <span class="hljs-comment">-- waits in progress</span>
  <span class="hljs-keyword">set</span> @<span class="hljs-keyword">lock</span>=(@NEWlock-@OLDlock)/@<span class="hljs-keyword">seconds</span> <span class="hljs-comment">-- this is delta</span>
  <span class="hljs-keyword">if</span> @<span class="hljs-keyword">lock</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span>    
    dbcc setinstance (<span class="hljs-string">'SQLServer:User Settable'</span>, <span class="hljs-string">'Query'</span>, 
	  <span class="hljs-string">'LOCK ms per s'</span>, @<span class="hljs-keyword">lock</span>)<font></font>
  waitfor delay <span class="hljs-string">'00:00:05'</span> 
<span class="hljs-keyword">goto</span> <span class="hljs-keyword">loop</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Harap dicatat bahwa pertama kali Anda menjalankan loop DBCC, itu akan dilewati (yang benar), karena @OLDlock (dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengunci</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) akan menjadi nol.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id497226/index.html">Webinar "Pemantauan jarak jauh dan diagnostik peralatan dalam produksi modern"</a></li>
<li><a href="../id497228/index.html">Mengurai Tugas CTF dengan Pakar Keamanan Informasi</a></li>
<li><a href="../id497230/index.html">Kompresi (kompresi) gambar berbagai format</a></li>
<li><a href="../id497232/index.html">Nikolay Petrov: "OpenStreetMap adalah proyek di mana tidak perlu untuk berkomunikasi dengan orang-orang"</a></li>
<li><a href="../id497234/index.html">Memodifikasi Proxy MQTT</a></li>
<li><a href="../id497240/index.html">Analisis laporan Baruch Sadogursky "DevOps untuk pengembang (atau menentang mereka?!)"</a></li>
<li><a href="../id497242/index.html">Respirator setengah masker buatan sendiri dari bahan improvisasi dalam 10 menit</a></li>
<li><a href="../id497248/index.html">Layanan microser atau sistem modular? Bagaimana pelanggan dapat memilih pendekatan arsitektur TI suatu produk</a></li>
<li><a href="../id497254/index.html">Cisco HyperFlex: Peluncuran, Konfigurasi, Integrasi Cloud - 21-22 April</a></li>
<li><a href="../id497258/index.html">Tcl / Tk. Penjelajah file alternatif untuk platform Linux dan Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>