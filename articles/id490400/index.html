<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😶 ⛲️ ➡️ Menggunakan perpustakaan OpenCV untuk mengenali busur elips di bagian 2D awan titik 3D 🕺🏻 👨🏽‍🎤 🚡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sehubungan dengan penyebaran yang lebih luas dari pemindai laser yang terjangkau (kapten) yang mampu menerima awan titik 3D ( 3DOT ) dan aplikasi yang...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Menggunakan perpustakaan OpenCV untuk mengenali busur elips di bagian 2D awan titik 3D</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490400/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sehubungan dengan penyebaran yang lebih luas dari pemindai laser yang terjangkau (kapten) yang mampu menerima awan titik 3D ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DOT</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dan aplikasi yang lebih luas dari teknologi ini di berbagai bidang (dari teknik mesin hingga keamanan, dari industri minyak hingga arsitektur), minat dalam pemrosesan algoritma telah dihidupkan kembali. awan poin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Salah satu aplikasi populer </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3d</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam industri adalah pembuatan dokumentasi desain hanya untuk peralatan yang dibangun, tua atau yang dikonversi, yang biasanya terdiri dari jaringan pipa dan struktur lain dari geometri silinder. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mendeteksi primitif geometri dalam </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DOT</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , perpustakaan 3D khusus, misalnya, </font><em><font style="vertical-align: inherit;">Microsoft PCL</font></em><font style="vertical-align: inherit;"> , biasanya digunakan</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Pendekatan dengan penggunaan perpustakaan siap pakai, bersama dengan kelebihannya, memiliki kelemahan. Misalnya, sulit untuk memasukkannya ke dalam skema pemrosesan Kadov yang ada, yang biasanya memiliki dimensi 2D. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita pertimbangkan bagaimana mungkin untuk memproses </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3dOT</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , misalnya, stasiun pemompaan, dimulai dengan bagian 2D dan menggunakan seluruh gudang pemrosesan 2D, yang tersedia di perpustakaan pemrosesan gambar yang andal dan dioptimalkan, misalnya </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/c2/bu/-i/c2bu-isuyb45ji2pz_6nibzg8zi.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 1. Model PL 3D stasiun pompa</font></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Elemen utama dari bagian yang diperoleh dengan memindai berbagai struktur pipa adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busur elips</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/8w/zl/2h/8wzl2hcgbhlmexqxdvl6ezottgm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 2. Penampang horizontal model 3D stasiun pemompaan pada tingkat rata-rata</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Untuk artikel ini, kami membatasi pertimbangan kami pada satu algoritma kunci yang memungkinkan kami mendeteksi busur elips yang sewenang-wenang - ini adalah algoritma berulang untuk </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pertumbuhan segmen busur dan pengikatan </font></font></i><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wilayah</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><em><font style="vertical-align: inherit;">pertumbuhan wilayah dan penghubungan tepi</font></em><font style="vertical-align: inherit;"> ).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algoritma pertumbuhan adalah yang paling jelas dan mudah diverifikasi, meskipun memakan waktu dibandingkan dengan algoritma statistik, yang lebih cocok untuk kasus ketika adegan berisi objek yang digabungkan longgar, jauh yang dimiliki oleh satu elips. </font><font style="vertical-align: inherit;">Algoritma ini akan dibahas dalam artikel mendatang.</font></font><br>
<br>
</p><h4>  </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk saat ini, untuk kesederhanaan, kami menghilangkan prosedur untuk mendapatkan bagian dari file sumber </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3DOT</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , preprocessing bagian, mengelompokkannya untuk mengisolasi primitif geometris, serta mengikat berikutnya, perbaikan, dan operasi fotogrametrik lainnya yang diperlukan untuk mendapatkan parameter model. Kami tidak akan membahas parameterisasi algoritma pencarian heuristik dengan cara yang sama. Mari kita jelaskan semua </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operasi dasar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari mana algoritma dibangun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami berasumsi bahwa kami perlu mendeteksi (mengenali, mengklasifikasikan) busur elips (yaitu, menghitung parameter elips, serta sudut awal dan akhir dari busur elips) pada gambar ini, memotong dari bagian horizontal awan titik. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/co/rj/km/corjkmmhyxcxvrnex89_iex1aei.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 3. Salah satu busur elips dari penampang model 3D (setelah dihaluskan)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk meminimalkan pekerjaan dengan raster secara membabi buta, kami akan melakukan semua operasi dengan raster melalui </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">garis besar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The OpenCV </font></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findContours</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prosedur </font><font style="vertical-align: inherit;">penemuan pada raster </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tikar</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> semua eksternal (tanpa bentuk internal) </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kontur</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam bentuk vektor dari titik vektor bilangan bulat (dalam koordinat raster):</font></font><br>
<pre><code class="cpp hljs"> <span class="hljs-function">Mat <span class="hljs-title">mat</span><span class="hljs-params">(size)</span></span>;
 <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;Point&gt;&gt; contours;<font></font>
 findContours(mat, contours, RETR_EXTERNAL, CHAIN_APPROX_SIMPLE);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah operasi utama kami, yang dalam beberapa kasus sederhana </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sepenuhnya menyelesaikan tugas</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Tetapi karena kasus-kasus degenerasi tidak selalu ditemukan, mari kita pertimbangkan secara lebih rinci teknologi pemrosesan melalui pembentukan kontur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Operasi sebaliknya, menghasilkan raster sesuai dengan sirkuit eksternal yang ada menggunakan </font><font style="vertical-align: inherit;">fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , juga terlihat sederhana:</font></font><br>
<pre><code class="cpp hljs"> drawContours(mat, contours, <span class="hljs-number">-1</span>, Scalar(<span class="hljs-number">255</span>), <span class="hljs-number">-1</span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu juga sangat sering digunakan untuk menutupi kontur, menggambar, atau untuk menghitung luas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, pada tahap awal, kami memiliki satu </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set tambalan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (potongan kurva tertentu) yang perlu dihubungkan dalam busur elips, menghilangkan bagian-bagian komponen lain dari struktur (misalnya, pengencang) atau noise optik yang muncul akibat membayangi selama pemindaian dan lainnya. alasan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita buat </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsi diskriminan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang akan mengembalikan jenis kontur (elips, segmen linier, penetasan atau yang lainnya), serta titik akhir kontur dan rotari garis besar yang diputar:</font></font><br>
<pre><code class="cpp hljs"> contourTypeSearch(
   <span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;Point&gt; &amp;contour, Vec4i &amp;def, RotatedRect &amp;rc);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rasio panjang dan lebar persegi panjang membantu untuk dengan cepat membedakan kontur dekat dengan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">segmen linier</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , serta </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kontur kebisingan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kecil </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kotak yang diputar di </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memiliki </font><font style="vertical-align: inherit;">sistem koordinat yang </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kompleks</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Jika bukan sudut itu sendiri yang diperlukan, tetapi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fungsi trigonometriknya</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , semakin tidak jelas dari konteksnya. Jika nilai </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">absolut sudut digunakan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , harus diperhitungkan bahwa </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sudut dihitung dari horizontal ke tepi pertama persegi panjang berlawanan arah jarum jam dan memiliki nilai negatif</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Titik akhir dari</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kontur elips ditemukan menggunakan prosedur kami, yang menerima raster </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mat</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan garis diskriminasi yang diekstraksi dari gambar asli dengan menutupi dan mengembalikan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cacat maksimum</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<pre><code class="cpp hljs"> contourConvFeature(mat, &amp;def, … );</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode utama untuk fungsi ini adalah memanggil dua prosedur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; *hull = <span class="hljs-keyword">new</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;();<font></font>
 convexHull(contour, *hull);<font></font>
 <span class="hljs-built_in">vector</span>&lt;Vec4i&gt; *defs = <span class="hljs-keyword">new</span> <span class="hljs-built_in">vector</span>&lt;Vec4i&gt;();<font></font>
 convexityDefects(contour, *hull, *defs);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosedur pertama menemukan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poligon cembung</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk kontur yang diteliti, yang kedua - menghitung semua </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cacat </font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">cembung</font></i><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami hanya mengambil </font><font style="vertical-align: inherit;">cacat </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terbesar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam hal cembung, mengingat ia menentukan titik akhir dari kontur. Ini mungkin tidak terjadi jika batas eksternal atau internal kontur memiliki </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fitur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam rangka untuk </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memperlancar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mereka </font><font style="vertical-align: inherit;">, kami menerapkan smoothing tambahan untuk kontur yang diteliti (dan tidak seluruh gambar agar tidak “blur” yang isthmuses antara kontur dan tidak melanggar topologi asli). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cb/e2/tl/cbe2tlqhmia2hyb727mcspjsb5w.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 4. Perhitungan cacat tonjolan.Opsi </font></font></i><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(a)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> secara salah mendefinisikan titik akhir merah. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsi (b)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mendefinisikan titik akhir dengan benar. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Opsi (c)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mendefinisikan ulang titik akhir pada bentuk aslinya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena kontur yang </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dibuat ulang</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> setiap kali dalam teknologi kami mengadopsi, kami </font><font style="vertical-align: inherit;">harus re-mencari titik-titik korespondensi (atau lebih tepatnya, indeks mereka) dengan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pencarian lengkap</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> prosedur </font><font style="vertical-align: inherit;">:</font></font><br>
<pre><code class="cpp hljs"> nearestContourPtIdx(<span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;Point&gt; &amp;contour, <span class="hljs-keyword">const</span> Point&amp; pt);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk kasus-kasus ketika tidak mungkin untuk sepenuhnya menghilangkan fitur, mode tambahan </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pemisahan busur</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> juga dilaksanakan </font><font style="vertical-align: inherit;">(bekerja secara terpisah dengan busur internal / eksternal). Ini penting, misalnya, dalam kasus di mana busur eksternal kontur </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bersentuhan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan objek lain atau </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">berisik</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dalam hal ini, Anda bisa bekerja dengan busur internal. Dalam hal ini, tidak perlu untuk memproses busur eksternal dan internal secara terpisah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, menurut rumus terkenal untuk rasio </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kerapatan busur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jari</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><i><font style="vertical-align: inherit;">jari</font></i><font style="vertical-align: inherit;"> lingkaran </font><font style="vertical-align: inherit;">diperkirakan </font><font style="vertical-align: inherit;">dan elips yang terlalu besar ditolak:</font></font><br>
<pre><code class="matlab hljs">R = bulge / <span class="hljs-number">2</span> + SQR(<span class="hljs-built_in">hypot</span>) / (<span class="hljs-number">8</span> * bulge);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, untuk semua kontur, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metrik cacat konveksitasnya</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ditemukan </font><font style="vertical-align: inherit;">(atau diklasifikasikan sebagai linier atau kecil dan dikeluarkan dari prosedur). </font><font style="vertical-align: inherit;">Pada tahap terakhir, parameter tambahan ditambahkan ke metrik asli, seperti parameter dimensi yang diputar, dll., Dan set metrik lengkap yang sedang dipelajari </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dipesan berdasarkan ukuran</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<pre><code class="cpp hljs"> <span class="hljs-keyword">typedef</span> tuple&lt;<span class="hljs-keyword">int</span> , <span class="hljs-comment">// </span>
   RotatedRect, <span class="hljs-comment">//  </span>
   Vec4i, <span class="hljs-comment">//  </span>
   <span class="hljs-keyword">int</span>&gt; <span class="hljs-comment">// </span>
   RectDefMetric;</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algoritma untuk menghubungkan segmen busur pada titik akhir</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algoritma pertumbuhan jelas dan jelas: kami mengambil kontur terbesar sebagai </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benih</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan mencoba menumbuhkannya, yaitu, menemukan dan menempelkan tambalan terdekat ke titik akhir yang memenuhi kondisi pertumbuhan. Pada gambar dewasa, kita masukkan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busur elips yang diinginkan</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Topeng dan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kurangi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> angka dari set aslinya. Kami ulangi prosedur pertumbuhan </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hingga set awal habis</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosedur dasar dari algoritma pertumbuhan terlihat seperti ini:</font></font><br>
<pre><code class="cpp hljs"> <span class="hljs-built_in">vector</span>&lt;Point&gt; *patch =<font></font>
    growingContours(contour, def, tmp, hull);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
di mana </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kontur</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah kontur yang diteliti, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">def</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah cacat cembungnya, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lambung</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah poligon cembung dari seluruh wilayah, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tmp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> adalah matriks buffer tambahan. Pada output, kita mendapatkan kontur vektor yang tumbuh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosedur ini terdiri dari siklus upaya untuk menumbuhkan benih, diakhiri dengan melelahkan tambalan yang tersedia untuk pertumbuhan, atau dibatasi oleh </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parameter jumlah iterasi maksimum</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tp/se/p1/tpsep1tdzgtvitxcnptg9rxu4m0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 5. Banyak tambalan untuk pertumbuhan tanpa benih</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Kesulitan utama adalah memilih </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tambalan terdekat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke titik akhir kontur, sehingga gambar tumbuh hanya </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maju</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Untuk </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arah tangensial</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami mengambil garis rata-rata milik busur di sekitar titik akhir. Pada </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 6</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menampilkan kandidat untuk koneksi ke seed pada iterasi tertentu. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5g/8x/ij/5g8xijwx2owywp4kgjielcgoft8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 6. Benih dikelilingi oleh sejumlah tambalan kandidat pertumbuhan.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Untuk setiap tambalan kandidat, metrik berikut dihitung:</font></font><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">typedef</span> tuple&lt;
   <span class="hljs-keyword">double</span>, <span class="hljs-comment">//    2      2   </span>
   <span class="hljs-keyword">bool</span>, <span class="hljs-keyword">bool</span>, <span class="hljs-comment">//,  4   </span>
   <span class="hljs-keyword">int</span>, <span class="hljs-comment">// </span>
   Vec4i&gt; <span class="hljs-comment">//  </span>
   DistMetric;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hanya tambalan yang jatuh ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kerucut tangensial yang</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diperhitungkan </font><font style="vertical-align: inherit;">. Kemudian tambalan dengan jarak terkecil dipilih dan, dengan mencetak bagian penghubung ke dalam raster, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">terhubung</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ke ujung benih yang sesuai. Untuk ujung lain dari seed, sebuah patch yang cocok dengan parameter dicari, dan jika ditemukan, juga terhubung ke seed. Kemudian benih </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">disamarkan dan dikurangi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari banyak tambalan. Prosedur ini diulangi sejak awal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhir prosedur pertumbuhan, kami mendapatkan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">busur elips</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yang masih harus diverifikasi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memulai, gunakan </font><i><font style="vertical-align: inherit;">OpenCV</font></i><font style="vertical-align: inherit;"> standar</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prosedur yang diterima patch kami (dalam bentuk jalur, kami ingat bahwa jalur dan raster dapat dipertukarkan dengan kami) dan mengembalikan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dimensi yang diputar</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , yaitu, elips lengkap.</font></font><br>
<pre><code class="cpp hljs"> RotatedRect box = fitEllipse(patch);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian, kami menolak elips yang terlalu besar dan terlalu kecil, dan kemudian kami menerapkan prosedur asli kami untuk </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membandingkan area dari</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> busur elips yang dihasilkan dan patch pertumbuhan awal dalam </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bentuk raster</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Prosedur ini mencakup beberapa trik yang disamarkan, jadi kami akan menghilangkan deskripsinya untuk saat ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan akhirnya, kami menemukan parameter yang tersisa dari elips yang terdeteksi - sudut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">awal dan akhir</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (kami sudah tahu setengah-sumbu dari </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fitEllipse</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menentukan sudut awal dan akhir, kami melanjutkan sebagai berikut: kami mengubah elips lengkap kami, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kembali ke poligon,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan dengan penghitungan langsung kami menemukan titik-titik yang paling dekat dengan ujung kami. </font><i><font style="vertical-align: inherit;">Koordinat sudut</font></i><font style="vertical-align: inherit;"> mereka</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Bahkan, indeks) dan akan menjadi sudut awal dan akhir dari busur elips. </font><font style="vertical-align: inherit;">Dalam kode, tampilannya seperti ini (sedikit disederhanakan):</font></font><br>
<pre><code class="cpp hljs"> <span class="hljs-function">pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;
   <span class="hljs-title">ellipseAngles</span><span class="hljs-params">(<span class="hljs-keyword">const</span> RotatedRect &amp;box,
   <span class="hljs-built_in">vector</span>&lt;Point&gt; &amp;ell, <span class="hljs-keyword">const</span> Point &amp;ps, 
   <span class="hljs-keyword">const</span> Point &amp;pe, <span class="hljs-keyword">const</span> Point &amp;pm)</span> 
 </span>{
    <span class="hljs-built_in">vector</span>&lt;Point&gt; ell0;<font></font>
    ellipse2Poly(Point(box.center.x, box.center.y), <font></font>
      Size(box.size.width / <span class="hljs-number">2</span>, box.size.height / <span class="hljs-number">2</span>),<font></font>
      box.angle, <span class="hljs-number">0</span>, <span class="hljs-number">355</span>, <span class="hljs-number">5</span>, ell0);
    <span class="hljs-keyword">int</span> i0 = nearestContourPtIdx(ell0, ps);
    <span class="hljs-keyword">int</span> i1 = nearestContourPtIdx(ell0, pe);<font></font>
    cutSides(ell0, i0, i1, i2, ell, <span class="hljs-literal">nullptr</span>);
    <span class="hljs-keyword">return</span> pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;(i0, i1);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prosedur </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cutSides</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kami </font><font style="vertical-align: inherit;">memperhitungkan </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">topologi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> arc traversal elips. </font><font style="vertical-align: inherit;">Secara total, delapan kemungkinan kasus melewati indeks </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i0, i1, i2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> harus dipertimbangkan </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Apakah kita mengikuti kontur luar atau dalam, dan mana dari indeks yang lebih besar, awal atau akhir? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih mudah melihat kode:</font></font><br>
<pre><code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">cutSides</span><span class="hljs-params">(
   <span class="hljs-keyword">const</span> <span class="hljs-built_in">vector</span>&lt;Point&gt; &amp;ell0, <span class="hljs-keyword">int</span> i0, <span class="hljs-keyword">int</span> i1, <span class="hljs-keyword">int</span> i2, 
   <span class="hljs-built_in">vector</span>&lt;Point&gt; *ell_in, <span class="hljs-built_in">vector</span>&lt;Point&gt; *ell_out)</span>
 </span>{
   <span class="hljs-keyword">if</span> (i0 &lt; i1) {
      <span class="hljs-keyword">if</span> (i2 &gt; i0 &amp;&amp; i2 &lt; i1) {
         <span class="hljs-keyword">if</span> (ell_in) {...}
            <span class="hljs-keyword">if</span> (ell_out) {...}<font></font>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (ell_in) {...}
            <span class="hljs-keyword">if</span> (ell_out) {...}<font></font>
        }}<font></font>
    <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (i2 &gt; i1 &amp;&amp; i2 &lt; i0) {
            <span class="hljs-keyword">if</span> (ell_in) {...}
            <span class="hljs-keyword">if</span> (ell_out) {...}<font></font>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (ell_in) {...}
            <span class="hljs-keyword">if</span> (ell_out) {...}<font></font>
        }}}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beberapa hasil mendeteksi elips dalam kasus kompleks ditunjukkan pada </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gambar 7</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/56/hd/jv56hdcpfuvmi59k0unppjknlq4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam artikel berikut, metode deteksi statistik akan dipertimbangkan.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id490386/index.html">Bagaimana lagi menghasilkan uang di bursa saham dan mengurangi risiko: saham perusahaan dengan pembayaran dividen</a></li>
<li><a href="../id490390/index.html">Olga Makushenko, Managing Director 101XP: "5 kesalahan utama dalam mengembangkan game sebagai bisnis"</a></li>
<li><a href="../id490392/index.html">Catchain: TON Algoritma Konsensus Blockchain</a></li>
<li><a href="../id490394/index.html">Commodore Amiga 500+: jangan sampai ada yang tersinggung</a></li>
<li><a href="../id490398/index.html">Hogwarts Merah. Petugas, atau Mengapa seorang sejarawan seperti seorang detektif</a></li>
<li><a href="../id490404/index.html">Mengapa dan bagaimana 5G akan mengubah segalanya: teknologi, implementasi bertahap, dan basis elemen untuk peralatan pelanggan</a></li>
<li><a href="../id490406/index.html">Sangat menarik: bagaimana kita menciptakan haniot yang tidak bisa diekspos</a></li>
<li><a href="../id490408/index.html">FreeBSD: гораздо лучше GNU/Linux</a></li>
<li><a href="../id490410/index.html">Neuron hidup dan buatan terhubung melalui Internet</a></li>
<li><a href="../id490412/index.html">Mungkin kita harus sedikit tenang dengan JavaScript?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>