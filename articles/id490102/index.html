<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚽️ ⬆️ 👍🏿 wc ke D: 712 karakter tanpa cabang tunggal 🏴󠁧󠁢󠁳󠁣󠁴󠁿 👨🏻‍🚒 👿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setelah membaca " Beat With a 80-Line Program di Haskell," yang saya temukan di Hacker News , saya memutuskan bahwa D mungkin lebih baik. Dan saya men...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>wc ke D: 712 karakter tanpa cabang tunggal</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490102/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setelah membaca " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beat With a 80-Line Program di Haskell,"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> yang saya temukan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , saya memutuskan bahwa D mungkin lebih baik. </font><font style="vertical-align: inherit;">Dan saya menulis wc di D. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note.per. </font><font style="vertical-align: inherit;">Saya sarankan menerjemahkan artikel di atas</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0xd34df00d</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tetapi ia lebih suka untuk membuat berdasarkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Winning With Twenty Lines of Haskell: Writing Your Wc"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dan sekarang </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel </font></font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itu berlipat ganda</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seperti pengulangan "koin dicetak."</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Program</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Terdiri dari satu file - 34 baris dan 712 karakter.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode sumber</font></font></b><div class="spoiler_text"><pre><code class="swift hljs"><span class="hljs-keyword">import</span> std.stdio : writefln, File;
<span class="hljs-keyword">import</span> std.algorithm : map, fold, splitter;
<span class="hljs-keyword">import</span> std.range : walkLength;
<span class="hljs-keyword">import</span> std.typecons : Yes;
<span class="hljs-keyword">import</span> std.uni : byCodePoint;<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Line</span> </span>{<font></font>
	size_t chars;<font></font>
	size_t words;<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Output</span> </span>{<font></font>
	size_t lines;<font></font>
	size_t words;<font></font>
	size_t chars;<font></font>
}<font></font>
<font></font>
<span class="hljs-type">Output</span> combine(<span class="hljs-type">Output</span> a, <span class="hljs-type">Line</span> b) pure nothrow {
	<span class="hljs-keyword">return</span> <span class="hljs-type">Output</span>(a.lines + <span class="hljs-number">1</span>, a.words + b.words, a.chars + b.chars);<font></font>
}<font></font>
<font></font>
<span class="hljs-type">Line</span> toLine(char[] l) pure {
	<span class="hljs-keyword">return</span> <span class="hljs-type">Line</span>(l.byCodePoint.walkLength, l.splitter.walkLength);<font></font>
}<font></font>
<font></font>
void main(string[] args) {<font></font>
	auto f = <span class="hljs-type">File</span>(args[<span class="hljs-number">1</span>]);
	<span class="hljs-type">Output</span> o = f<font></font>
		.byLine(<span class="hljs-type">Yes</span>.keepTerminator)<font></font>
		.<span class="hljs-built_in">map</span>!(l =&gt; toLine(l))<font></font>
		.fold!(combine)(<span class="hljs-type">Output</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));<font></font>
<font></font>
	writefln!<span class="hljs-string">"%u %u %u %s"</span>(o.lines, o.words, o.chars, args[<span class="hljs-number">1</span>]);<font></font>
}</code></pre><br>
</div></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, ia menggunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Phobos, pustaka D standar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tetapi mengapa tidak? </font><font style="vertical-align: inherit;">Phobos indah, dan dilengkapi dengan setiap kompiler D. Program itu sendiri tidak mengandung pernyataan if. </font><font style="vertical-align: inherit;">Dan dalam implementasi wc di Haskell, beberapa jika digunakan. </font><font style="vertical-align: inherit;">Program D, selain yang utama, berisi tiga fungsi lebih kecil. </font><font style="vertical-align: inherit;">Saya bisa dengan mudah meletakkan semua fungsionalitas dalam satu rantai rentang, tetapi mungkin melebihi 80 karakter per baris. </font><font style="vertical-align: inherit;">Ini adalah prinsip dasar gaya kode.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apakah wc pada D lebih cepat dari coreutils wc? </font><font style="vertical-align: inherit;">Tidak, tapi butuh 15 menit untuk menulis versi saya (saya harus mencari walkLength karena saya lupa nama fungsinya).</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file data</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">garis</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">byte</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coreutils</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haskell</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app.d</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">46</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">906</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3,5 ms ± 1,9 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39,6 ms ± 7,8 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8,9 ms ± 2,1 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">big.txt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">862</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64rb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4,7 ms ± 2,0 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39,6 ms ± 7,8 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9,8 ms ± 2,1 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vbig.txt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,7 jt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">96 jt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">658.6ms ± 24.5ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">226,4 ms ± 29,5 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,102 s ± 0,022 s</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vbig2.txt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.1M</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">671M</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4,4 s ± 0,058 dtk</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,1 s ± 0,039 dtk</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7,4 s ± 0,085 dtk</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Penyimpanan:</font></font><div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file data</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coreutils</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haskell</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app.d</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2052K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7228K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7708K</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">big.txt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2112K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7512K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7616K</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vbig.txt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2288K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42620K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7712K</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vbig2.txt</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2360K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50860K</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7736K</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apakah Haskell lebih cepat? </font><font style="vertical-align: inherit;">Untuk file besar, tentu saja, tetapi menggunakan multithreading. </font><font style="vertical-align: inherit;">Untuk file kecil, GNU coreutils masih menang. </font><font style="vertical-align: inherit;">Pada tahap ini, versi saya kemungkinan besar dibatasi oleh IO, dan bagaimanapun, ini cukup cepat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya tidak akan berdebat bahwa satu bahasa lebih cepat dari yang lain. </font><font style="vertical-align: inherit;">Jika Anda menghabiskan waktu mengoptimalkan patokan mikro, kemungkinan besar Anda akan menang. </font><font style="vertical-align: inherit;">Namun tidak dalam kehidupan nyata. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapi saya akan berpendapat bahwa pemrograman fungsional dalam D hampir menyusul dengan FP di Haskell.</font></font></b><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sedikit tentang rentang dalam D</font></font></h3><br>
<img src="https://habrastorage.org/webt/gp/qe/oo/gpqeookkvehf2hdsowdegomcqai.png" align="left"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">range adalah abstraksi yang dapat diulang tanpa menyentuh koleksi yang mendasarinya (jika ada). </font><font style="vertical-align: inherit;">Secara teknis, range dapat berupa struktur atau kelas yang mengimplementasikan satu atau lebih interface Range. </font><font style="vertical-align: inherit;">Bentuk paling sederhana, InputRange, membutuhkan fungsi</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">popFront</span><span class="hljs-params">()</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan dua anggota atau properti </font></font><br>
<br>
<pre><code class="cpp hljs">T front;
<span class="hljs-keyword">bool</span> empty;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
T adalah jenis elemen generik yang berkisar berulang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rentang D adalah tipe spesifik. </font><font style="vertical-align: inherit;">Ketika rentang jatuh ke pernyataan foreach, kompiler melakukan modifikasi kecil.</font></font><br>
<br>
<pre><code class="cpp hljs">foreach (e; range) { ... }</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
berubah menjadi </font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> __r = range; !__r.empty; __r.popFront()) {
    <span class="hljs-keyword">auto</span> e = __r.front;<font></font>
    ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
auto e = menghitung jenis dan setara dengan T e =. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan mengingat hal ini, mudah untuk membuat rentang yang dapat digunakan oleh foreach.</font></font><br>
<br>
<pre><code class="java hljs">struct Iota {
	<span class="hljs-keyword">int</span> front;
	<span class="hljs-keyword">int</span> end;<font></font>
<font></font>
	<span class="hljs-meta">@property</span> <span class="hljs-function">bool <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.front == <span class="hljs-keyword">this</span>.end;<font></font>
	}<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">popFront</span><span class="hljs-params">()</span> </span>{<font></font>
		++<span class="hljs-keyword">this</span>.front;<font></font>
	}<font></font>
}<font></font>
<font></font>
unittest {<font></font>
	<span class="hljs-keyword">import</span> std.stdio;<font></font>
	foreach(it; Iota(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)) {<font></font>
		writeln(it);<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Iota adalah contoh rentang yang sangat sederhana. </font><font style="vertical-align: inherit;">Berfungsi sebagai generator, tanpa memiliki koleksi yang mendasarinya. </font><font style="vertical-align: inherit;">Ia beralih melalui bilangan bulat dari awal hingga selesai dengan penambahan satu. </font><font style="vertical-align: inherit;">Cuplikan ini mengungkapkan sedikit sintaks D.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-meta">@property</span> <span class="hljs-function">bool <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atribut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ property</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memungkinkan Anda untuk menggunakan fungsi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kosong</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan cara yang sama seperti variabel anggota (memanggil fungsi tanpa tanda kurung). Atribut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di bagian akhir berarti bahwa kita tidak mengubah data instance yang kita sebut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kosong</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Uji unit bawaan mencetak angka dari 0 hingga 10. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fitur kecil lainnya adalah tidak adanya konstruktor eksplisit. Struktur Iota memiliki dua variabel int anggota. Dalam pernyataan pendahuluan dalam pengujian, kami membuat instance Iota seolah-olah memiliki konstruktor yang menerima dua int. Ini adalah struktur literal. Ketika kompiler D melihat ini, tetapi struktur tidak memiliki konstruktor yang sesuai, maka sesuai dengan urutan deklarasi variabel - anggota struktur akan ditugaskan int.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hubungan antara ketiga anggota itu sederhana. </font><font style="vertical-align: inherit;">Jika kosong salah, depan dijamin untuk mengembalikan elemen baru setelah iterasi setelah memanggil popFront. </font><font style="vertical-align: inherit;">Setelah memanggil popFront, nilai kosong dapat berubah. </font><font style="vertical-align: inherit;">Jika ini benar, itu berarti bahwa tidak ada lagi elemen untuk beralih dan panggilan lebih lanjut ke depan tidak valid. </font><font style="vertical-align: inherit;">Menurut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi InputRange</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">depan dapat dihitung dengan benar jika dan hanya jika pengembalian kosong atau akan kembali salah.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">front dapat dikomputasi beberapa kali tanpa memanggil popFront atau memutasi rentang atau data yang mendasarinya, dan memberikan hasil yang sama untuk setiap perhitungan.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan ekspresi foreach, atau loop, tidak terlalu fungsional. </font><font style="vertical-align: inherit;">Misalkan kita ingin memfilter semua angka ganjil untuk Iota. </font><font style="vertical-align: inherit;">Kita bisa menempatkan if di dalam blok foreach, tapi itu hanya akan memperburuknya. </font><font style="vertical-align: inherit;">Akan lebih baik jika kita memiliki rentang yang menerima rentang dan predikat yang memutuskan apakah suatu elemen cocok atau tidak.</font></font><br>
<br>
<pre><code class="java hljs">struct Filter {<font></font>
	Iota input;<font></font>
	<span class="hljs-function">bool <span class="hljs-title">function</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span> predicate</span>;<font></font>
<font></font>
	<span class="hljs-keyword">this</span>(Iota input, <span class="hljs-function">bool <span class="hljs-title">function</span><span class="hljs-params">(<span class="hljs-keyword">int</span>)</span> predicate) </span>{
		<span class="hljs-keyword">this</span>.input = input;
		<span class="hljs-keyword">this</span>.predicate = predicate;
		<span class="hljs-keyword">this</span>.testAndIterate();<font></font>
	}<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">testAndIterate</span><span class="hljs-params">()</span> </span>{
		<span class="hljs-keyword">while</span>(!<span class="hljs-keyword">this</span>.input.empty<font></font>
				&amp;&amp; !<span class="hljs-keyword">this</span>.predicate(<span class="hljs-keyword">this</span>.input.front))<font></font>
		{<font></font>
			<span class="hljs-keyword">this</span>.input.popFront();<font></font>
		}<font></font>
	}<font></font>
<font></font>
	<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">popFront</span><span class="hljs-params">()</span> </span>{
		<span class="hljs-keyword">this</span>.input.popFront();
		<span class="hljs-keyword">this</span>.testAndIterate();<font></font>
	}<font></font>
<font></font>
	<span class="hljs-meta">@property</span> <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">front</span><span class="hljs-params">()</span> </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.input.front;<font></font>
	}<font></font>
<font></font>
	<span class="hljs-meta">@property</span> <span class="hljs-function">bool <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> </span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.input.empty;<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-function">bool <span class="hljs-title">isEven</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span> </span>{
	<span class="hljs-keyword">return</span> a % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>;<font></font>
}<font></font>
<font></font>
unittest {<font></font>
	foreach(it; Filter(Iota(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>), &amp;isEven)) {<font></font>
		writeln(it);<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Filter sekali lagi sangat sederhana: Iota dan pointer fungsi diperlukan. </font><font style="vertical-align: inherit;">Saat membuat Filter, kami memanggil testAndIterate, yang mengambil elemen dari Iota sampai kosong atau predikat mengembalikan false. </font><font style="vertical-align: inherit;">Idenya adalah bahwa predikat memutuskan apa yang harus disaring dan apa yang harus pergi. </font><font style="vertical-align: inherit;">Properti depan dan kosong hanya diterjemahkan ke Iota. </font><font style="vertical-align: inherit;">Satu-satunya hal yang benar-benar melakukan pekerjaan adalah popFront. </font><font style="vertical-align: inherit;">Ini mengembalikan item saat ini dan memanggil testAndIterate. </font><font style="vertical-align: inherit;">Itu saja. </font><font style="vertical-align: inherit;">Ini adalah implementasi filter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, testAndIterate memiliki loop sementara, tetapi menulis ulang menggunakan rekursi, menurut saya, sangat bodoh. Apa yang membuat D hebat adalah bahwa Anda dapat menggunakan metode yang tepat untuk setiap tugas. Pemrograman fungsional itu baik, dan sering memamerkan, tetapi terkadang tidak. Jika sedikit assembler inline diperlukan atau lebih menyenangkan, gunakan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Filter Panggilan masih tidak terlihat bagus. </font><font style="vertical-align: inherit;">Dengan asumsi Anda terbiasa membaca dari kiri ke kanan, Filter muncul sebelum Iota, bahkan jika itu berjalan setelah Iota. </font><font style="vertical-align: inherit;">D tidak memberikan pernyataan pipa, tetapi menggunakan Unified Function Call Syntax (UFCS). </font><font style="vertical-align: inherit;">Jika suatu ekspresi dapat secara implisit dikonversi ke parameter pertama dari suatu fungsi, maka fungsi tersebut dapat dipanggil seolah-olah itu adalah fungsi anggota dari ekspresi ini. </font><font style="vertical-align: inherit;">Ini cukup rumit, saya mengerti. </font><font style="vertical-align: inherit;">Contoh akan membantu:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-built_in">string</span> a)</span> </span>{
	<span class="hljs-keyword">return</span> a ~ <span class="hljs-string">"World"</span>;<font></font>
}<font></font>
<font></font>
unittest {<font></font>
	<span class="hljs-built_in">string</span> a = foo(<span class="hljs-string">"Hello "</span>);
	<span class="hljs-built_in">string</span> b = <span class="hljs-string">"Hello "</span>.foo();<font></font>
	assert(a == b);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contoh di atas menunjukkan dua panggilan ke fungsi foo. </font><font style="vertical-align: inherit;">Seperti yang dinyatakan secara tidak langsung, kedua panggilan itu setara. </font><font style="vertical-align: inherit;">Apa artinya ini untuk contoh Filter Iota kami? </font><font style="vertical-align: inherit;">UFCS memungkinkan kami menulis ulang unit test seperti ini:</font></font><br>
<br>
<pre><code class="swift hljs">unittest {<font></font>
	foreach(it; <span class="hljs-type">Iota</span>(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>).<span class="hljs-type">Filter</span>(&amp;isEven)) {<font></font>
		writeln(it);<font></font>
	}<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementasi peta / transformasi untuk jangkauan sekarang harus dapat diakses oleh setiap pembaca. </font><font style="vertical-align: inherit;">Tentu saja, filter dapat dibuat lebih abstrak menggunakan templat, tetapi ini hanya detail, tidak ada yang secara konsep baru. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, ada berbagai jenis rentang, misalnya, dua arah. </font><font style="vertical-align: inherit;">Tebak peluang apa yang memberi Anda ini. </font><font style="vertical-align: inherit;">Kiat cepat: ada dua primitif baru dalam rentang dua arah yang disebut kembali dan popBack. </font><font style="vertical-align: inherit;">Ada jenis rentang lain, tetapi setelah Anda memahami rentang input yang ditunjukkan di atas dua kali, Anda hampir semua mengenalinya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Hanya untuk kejelasan, jangan menerapkan filter, peta, atau lipatan Anda sendiri; </font><font style="vertical-align: inherit;">perpustakaan standar Phobos D memiliki semua yang Anda butuhkan. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengambil</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lihat di </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">std.algorithm</font></a><font style="vertical-align: inherit;"> dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std.range</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tentang Penulis</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Robert Schadeck meraih gelar master dalam ilmu komputer dari University of Oldenburg. </font><font style="vertical-align: inherit;">Tesis masternya berjudul "DMCD - Distributed Multithreaded D Compiler dengan Caching", di mana ia bekerja untuk menciptakan D-compiler dari awal. </font><font style="vertical-align: inherit;">Dia adalah seorang mahasiswa pascasarjana dalam ilmu komputer pada 2012-2018. </font><font style="vertical-align: inherit;">di Universitas Oldenburg. </font><font style="vertical-align: inherit;">Disertasi doktoralnya berfokus pada sistem kuorum bersama dengan grafik. </font><font style="vertical-align: inherit;">Sejak 2018, ia senang menggunakan D dalam pekerjaan sehari-harinya, bekerja untuk Symmetry Investments.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang Investasi Simetri</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Symmetry Investments adalah perusahaan investasi global dengan kantor di Hong Kong, Singapura dan London. </font><font style="vertical-align: inherit;">Kami telah melakukan bisnis sejak 2014 setelah berhasil memisahkan diri dari hedge fund utama New York.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di Symmetry, kami berusaha untuk mengambil risiko yang wajar untuk menciptakan nilai bagi pelanggan, mitra, dan karyawan kami. Kami mendapat manfaat dari kemampuan kami untuk menghasilkan kontrak win-win - dalam arti luas. Menang-Menang adalah prinsip dasar etika dan strategis kami. Dengan menghasilkan opsi menang-menang, kita dapat menciptakan solusi unik yang menggabungkan perspektif yang biasanya dianggap tidak kompatibel atau berlawanan, dan mencakup semua yang terbaik yang dapat ditawarkan masing-masing pihak. Kami mengintegrasikan kembali arbitrase pendapatan tetap dengan strategi makro global. Kami menemukan dan mengembangkan teknologi yang berfokus pada potensi integrasi manusia-mesin. Kami menciptakan sistem di mana mesin melakukan yang terbaik, mendukung orang di dalamnyasehingga mereka melakukan yang terbaik. Kami menciptakan meritokrasi berdasarkan kolaborasi: budaya di mana kontribusi individu melayani tujuan pribadi dan kolektif - dan dihargai sesuai dengan itu. Kami menghargai rasa kepemilikan dan semangat kerja sama tim, realisasi diri, dan komunitas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Orang-orang Symmetry Investments telah menjadi anggota aktif Komunitas D sejak 2014. </font><font style="vertical-align: inherit;">Kami mensponsori pengembangan proyek excel-d, dpp, autowrap, libmir dan lainnya. </font><font style="vertical-align: inherit;">Kami meluncurkan Symmetry Autumn of Code pada tahun 2018 dan menjadi tuan rumah DConf 2019 di London. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perkiraan. </font><font style="vertical-align: inherit;">Karena penerjemah, seperti biasa, mabuk, saya tidak dapat menjamin keakuratan beberapa istilah manusia, dan saya tidak mengerti apa pun di bagian terakhir. </font><font style="vertical-align: inherit;">Jadi kirim koreksi dalam komunikasi pribadi.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id490088/index.html">Cara melanjutkan membuat peta di UE4</a></li>
<li><a href="../id490092/index.html">Andrei Zaretsky, Alexander Trukhanov: "Biayanya cukup untuk minum kopi"</a></li>
<li><a href="../id490094/index.html">Kembali ke akar: kami mengendarai komputer langsung dari MBR</a></li>
<li><a href="../id490096/index.html">Cara mudah untuk membuat hub USB kecil untuk Raspberry Pi</a></li>
<li><a href="../id490100/index.html">Kembangkan perangkat lunak untuk penyewaan skuter terdesentralisasi. Siapa bilang itu mudah?</a></li>
<li><a href="../id490104/index.html">Pelindung matahari pintar dari Bosch. Tes prototipe</a></li>
<li><a href="../id490110/index.html">Dari pengembang ke manajer dan sebaliknya</a></li>
<li><a href="../id490112/index.html">Monads sebagai pola penggunaan kembali kode</a></li>
<li><a href="../id490114/index.html">Yandex.Practicum - Analis Data. Wisuda</a></li>
<li><a href="../id490118/index.html">10 fakta paling penting tentang SERM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>