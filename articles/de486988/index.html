<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÅ ü§∂üèæ üë©üèø‚Äçü§ù‚Äçüë®üèº Taschenwetterstation üì∏ üìå üíæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ja, bei der Wetterstation geht es um etwas, das eine Vielzahl von Parametern von der Richtung und St√§rke des Windes bis zur Sonneneinstrahlung misst, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Taschenwetterstation</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486988/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ja, bei der Wetterstation geht es um etwas, das eine Vielzahl von Parametern von der Richtung und St√§rke des Windes bis zur Sonneneinstrahlung misst, aber es gab keinen passenderen Begriff, sodass Sie irref√ºhren m√ºssen. </font><font style="vertical-align: inherit;">Aber √ºber die Gr√∂√üe ist alles fair.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/sb/vf/yl/sbvfylae2jg5ca22n6incvh0_le.jpeg"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Ger√§t hat vielleicht nicht viel kommerziellen Wert, weil </font><font style="vertical-align: inherit;">Selbst in Bezug auf die Anzahl der Komponenten ist es vielen Chinesen unterlegen und nicht nur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit √§hnlicher Funktionalit√§t. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DIY ist auch schwer zu benennen, da beispielsweise Leiterplatten mit anschlie√üendem L√∂ten kleiner / bleifreier Komponenten bestellt werden m√ºssen, wodurch sich die Anzahl der Personen, die das Ger√§t wiederholen m√∂chten, erheblich verringert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Wetterstation selbst wurde als etwas geschaffen, ich m√∂chte denken, √§sthetisch, kompakt und in der Lage, die Temperatur + Luftfeuchtigkeit schnell zu beurteilen, und sobald der ausgew√§hlte Sensor auch √ºber den Druck berichten kann, dann auch dies. </font><font style="vertical-align: inherit;">Alles sieht ungef√§hr so ‚Äã‚Äãaus (anklickbar):</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/xy/6q/1n/xy6q1n0mungrju5uff3k_qznrhw.jpeg"></div></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/pa/ur/8t/paur8tgioddbzxqzwbkywgcr9pg.jpeg"></div><br>
</a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Vergleich:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/on/6z/bi/on6zbi8c1riuymare1htfaoy3gy.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√úber Eisen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Sensor wurde der BOSCH-BME280 gew√§hlt, der die gew√ºnschten Umgebungsparameter, zumindest nach I2C, mindestens nach SPI, acht Beine in einem bleifreien LGA-Geh√§use von 2,5 x 2,5 mm liefert - relativ preiswert, winzig. Zun√§chst wurde ein ausgefeilterer Sensor aus derselben BME680-Serie geplant, der neben Daten, Luftfeuchtigkeit und Luftdruck laut Datenblatt auch die Luftqualit√§t anhand des sogenannten Index for Air Quality (IAQ) bewerten kann. Es scheint nicht schlecht zu sein, aber tats√§chlich stellte sich heraus, dass IAQ nur mit BSEC: Bosch Software Environmental Cluster erhalten werden kann, das basierend auf den Sensorwerten und dem √Ñndern dieser Werte den IAQ berechnet. Es scheint, dass Sie das Zeugnis selbst nehmen und alles berechnen k√∂nnen; Nicht sicher so. Auf Anfrage zur Messung der Luftqualit√§t gibt der Sensor einen Widerstand in Ohm an.Es erw√§rmt das Innere eines kleinen empfindlichen Bereichs, der mit Leitf√§higkeit auf das Vorhandensein fl√ºchtiger organischer Substanzen - fl√ºchtiger organischer Verbindungen (VOC) - reagiert und das Ergebnis liefert, d.h. Widerstand gegen diesen Bereich. Im Prinzip,</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einige Handwerker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bieten ihre eigenen Algorithmen zur Interpretation dieser Messwerte ohne BSEC an, aber unter anderem lie√üen die Mehrfachkosten im Vergleich zum BME280 keine Wahl.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xm/6f/ua/xm6fuaet6jexqzojp2ijibwk8yg.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Display besteht aus zwei TOS-F2101, dies sind gew√∂hnliche Sieben-Segment-Indikatoren von gr√ºner Farbe mit einer gemeinsamen Kathode. </font><font style="vertical-align: inherit;">Bemerkenswert ist, dass dies die Gr√∂√üe und das Geh√§use f√ºr die Oberfl√§chenmontage sind, sodass Sie sie auf unkonventionelle Weise platzieren k√∂nnen. </font><font style="vertical-align: inherit;">Dies sind √ºbrigens die kleinsten planaren Indikatoren, die zum Verkauf angeboten wurden, und sie bestimmen gr√∂√ütenteils die Gr√∂√üe des gesamten Ger√§ts.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mv/s2/ur/mvs2urkyspmxu99dx60ynxqs0ju.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwaltet alle STM32F072 in einem 48-poligen QFPN-Geh√§use. </font><font style="vertical-align: inherit;">Ausgew√§hlt wiederum basierend auf der Gr√∂√üe, Verf√ºgbarkeit von Peripherieger√§ten und der erforderlichen Anzahl von Schlussfolgerungen f√ºr die Steuerung von Indikatoren, die in der dualen Version aus irgendeinem Grund nicht auftreten und die Schlussfolgerungen anst√§ndig sein m√ºssen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dd/1q/ph/dd1qph6m-u11ozvyb8nudzl1mf0.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Rest sind Widerst√§nde, Kondensatoren, ein 3,3-V-Spannungswandler, je weniger - desto besser, nat√ºrlich innerhalb angemessener Grenzen und TTX-Komponenten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der USB-Anschluss befindet sich auf der Platine. F√ºr einen zuverl√§ssigen Kontakt sollte die Dicke der Leiterplatte ungef√§hr 2 mm betragen. Wenn Sie sich von der Zeichnung auf USB Typ A leiten lassen, gibt es etwas mehr, aber wenn Sie die Maske auf beiden Seiten ber√ºcksichtigen, stellt sich heraus, dass dies ziemlich ertr√§glich ist. Nat√ºrlich bietet dieses Anschlussformat mehr Chancen f√ºr mechanische Sch√§den an der USB-Steckdose, aber im Gro√üen und Ganzen kann dies mit einem normalen Flash-Laufwerk behoben werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Touch-Taste ist ein rundes Polygon unter dem Bild auf der Tafel. Die Taste reagiert auf eine kurze und lange Ber√ºhrung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zus√§tzlich zur Anzeige verf√ºgt die Karte √ºber drei LEDs, die anzeigen, welche der Messwerte derzeit auf der Anzeige angezeigt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie f√ºr die Software. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Programm wird mit CMSIS geschrieben, die Betriebsfrequenz betr√§gt 48 MHz und stammt von einer internen Quelle. Hier gibt es eine, Sie k√∂nnen sogar USB damit verwenden, ohne externen Quarz zu verwenden. F√ºr Flexibilit√§t und m√∂glicherweise Erweiterung der Funktionalit√§t wird FreeRTOS hinzugef√ºgt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Touch-Taste wird vom Touch Sensing Controller (TSC) bedient. Da es weder eine Tastatur √ºber die Touch-Tasten auf der Platine noch Schieberegler gibt, wenn die Touchpads in einer Linie kombiniert sind, und es einen Sensor gibt, der kurze und lange Ber√ºhrungen erfasst, macht es keinen Sinn, die umfassende Bibliothek von ST zu verwenden. Das Prinzip der Sensorbedienung ist einfach: Es sind mehrere Stifte zu Gruppen zusammengefasst. Ein Kondensator (Abtastkondensator) Cs ist mit einem von ihnen verbunden. Dieser Stift wird beispielhaft. Die verbleibenden Stifte der Gruppe k√∂nnen mit den Sensorpolygonen verbunden werden, die tats√§chlich auch Cx-Kondensatoren sind . Die Steuerung l√§dt die Kapazit√§t des Deponiekondensators Cx auf und diese Ladung destilliert dann in das Modell Cs. Der Vorgang wird bis zu einer bestimmten Spannungsgrenze an Cs wiederholt. Die Sensorkapazit√§t ist normalerweise gering.Daher sind viele solcher Operationen erforderlich, und es gibt ein separates Register (TSC_IOGxCR) zum Z√§hlen. Wenn Sie den Sensor ber√ºhren, wird die Kapazit√§t Cx ‚Äã‚Äãgr√∂√üer und die Zyklen zum Laden von Cs werden weniger ben√∂tigt. Dies wird sofort behoben und eine Ber√ºhrung wird nach oben gemeldet. √úbrigens steigt die Sensorkapazit√§t an, wenn keine direkte Ber√ºhrung erfolgt, sodass der Sensor vor physischem Kontakt gesch√ºtzt werden kann, z. B. mit einer Maske, oder Sie k√∂nnen verschiedene Ann√§herungsgrade aufzeichnen.oder verschiedene Ann√§herungsgrade festlegen.oder verschiedene Ann√§herungsgrade festlegen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr die Kommunikation mit dem BME280 wird die I2C-Schnittstelle verwendet. </font><font style="vertical-align: inherit;">Die Implementierung von I2C in STM32F072 ist einfacher als im beliebten STM32F103. Unter anderem m√ºssen Sie 1/2 / viele empfangene Bytes nicht separat verfolgen. Es reicht aus, deren Anzahl im Voraus anzugeben (I2C_CR2.NBYTES [7: 0]). </font><font style="vertical-align: inherit;">Dieselbe Bibliothek f√ºr die Arbeit mit dem Sensor wird </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bereitgestellt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und vom Hersteller des Sensors empfohlen. </font><font style="vertical-align: inherit;">Um die Messwerte mithilfe der Bibliothek lesen zu k√∂nnen, m√ºssen Sie zwei Strukturen erstellen - f√ºr Einstellungen und Daten. </font><font style="vertical-align: inherit;">In den Einstellungen, die Sie vornehmen m√ºssen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensoradresse am I2C-Bus</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I2C Lese- / Schreibfunktionen sowie Verz√∂gerungsfunktion</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Anzahl der Ablesungen von Anzeigen zur Mittelung (√úberabtastung) x1, x2 usw. f√ºr jeden der Parameter Temperatur / Feuchtigkeit / Druck</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filterkoeffizient f√ºr ADC</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeitraum der Entfernung von Parameterwerten</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Allgemeinen k√∂nnen Sie f√ºr einen der Parameter, die gelesen werden k√∂nnen, eine Temperatur belassen</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Betriebsart "normal" - mit regelm√§√üigen Ablesungen, "erzwungen" - Ablesungen auf Anfrage</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der ‚Äûnormale‚Äú Modus ausgew√§hlt ist, k√∂nnen die tats√§chlichen Werte der Messwerte im Prinzip durch Ausf√ºhren der Funktion ‚Äûbme280_get_sensor_data‚Äú ermittelt werden. Dabei werden die entsprechenden Sensorregister √ºberpr√ºft, die direkten Messwerte gelesen und anschlie√üend gem√§√ü den im Mikrokreis im Werk aufgezeichneten Korrekturfaktoren verarbeitet. </font><font style="vertical-align: inherit;">Infolgedessen enth√§lt die Ausgangsdatenstruktur die Temperatur in Grad Celsius, die relative Luftfeuchtigkeit in Prozent und den atmosph√§rischen Druck in Pascal. </font><font style="vertical-align: inherit;">Im "erzwungenen" Modus m√ºssen Sie nur jedes Mal vor dem Lesen der Messwerte die Konvertierung "bme280_set_sensor_mode" ausf√ºhren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das allgemeine Prinzip des Ger√§ts lautet wie folgt: Schlie√üen Sie es in einer mobilen Version an USB oder an Power Bank an. F√ºr die anf√§ngliche Anzeige und Umschaltung von Messwerten - eine kurze Ber√ºhrung des Sensors, um sie zu deaktivieren - eine lange Ber√ºhrung. Zuerst wird die Temperatur in Grad Celsius angezeigt, dann die relative Luftfeuchtigkeit in Prozent und der Luftdruck in Millimetern Quecksilber, weil Es gibt nur zwei Indikatoren, und der Druckindikator geht selten √ºber siebenhundert hinaus, dann ist die Nummer sieben hier virtuell. Wenn Sie den Sensor l√§ngere Zeit nicht ber√ºhren, werden die Anzeigen ausgeschaltet, sodass Sie beispielsweise die Power Bank nicht entladen. Der durchschnittliche Verbrauch des Ger√§ts betr√§gt ~ 50 mA, und die Hauptverbraucher sind nur Indikatoren. Wenn Sie sie ausschalten, wird die Z√§hlung an Mikroampere gesendet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/os/yc/m4/osycm4d_nxftmdscyosimsmxyqu.jpeg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9g/of/6q/9gof6qylzgjq2zeba4rkgumqvze.jpeg"></div><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/n91MdTEM7X4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infolgedessen beliefen sich die Gesamtkosten der Komponenten im Januar 2020 auf etwa 850 Rubel. Dies ist ohne Ber√ºcksichtigung der Platine einfach, weil </font><font style="vertical-align: inherit;">Der Hersteller hatte Neujahrsrabatte, und ich habe Gutscheine, aber es ist unwahrscheinlich, dass dies in naher Zukunft erneut geschieht, zumindest bis zum n√§chsten Dezember. </font><font style="vertical-align: inherit;">Nun, wer sich mit der Quelle vertraut machen will, kann es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tun </font><font style="vertical-align: inherit;">.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de486976/index.html">Probleme der russischen Informationserziehung und ihre m√∂glichen L√∂sungen</a></li>
<li><a href="../de486978/index.html">Feldnotizen: Eine der gr√∂√üten OpenSource-Konferenzen FOSDEM 2020</a></li>
<li><a href="../de486980/index.html">Kim Dotcom: Gefangen, die meistgesuchte Person online. Teil 1</a></li>
<li><a href="../de486982/index.html">So lernen Sie die Front-End-Entwicklung, finden Ihren ersten Job und bekommen keine Unebenheiten</a></li>
<li><a href="../de486984/index.html">Python Gateway bei InterSystems IRIS</a></li>
<li><a href="../de486994/index.html">Winkel: Integrationstests (flache Tests)</a></li>
<li><a href="../de486998/index.html">G√ºnstiger und schneller Druck des Thermodruckers</a></li>
<li><a href="../de487000/index.html">Citrus: Style Set f√ºr AvaloniaUI</a></li>
<li><a href="../de487002/index.html">Augmented Reality Marketing: Was es ist und wie es funktioniert</a></li>
<li><a href="../de487004/index.html">Warum immer mehr US-Bundesstaaten die Netzneutralit√§t zur√ºckgeben - diskutieren Sie den Verlauf der Ereignisse</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>