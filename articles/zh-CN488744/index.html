<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’« ğŸ² ğŸ¹ åœ¨C ++ä¸­ä½¿ç”¨OpenALçš„æŒ‡å—ã€‚ç¬¬1éƒ¨åˆ†ï¼šæ’­æ”¾å£°éŸ³ ğŸ„ ğŸœ ğŸ§›</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ‚¨çš„æ¸¸æˆéœ€è¦å£°éŸ³ï¼æ‚¨å¯èƒ½å·²ç»ä½¿ç”¨OpenGLåœ¨å±å¹•ä¸Šç»˜å›¾ã€‚æ‚¨å·²ç»å¼„æ¸…äº†å®ƒçš„APIï¼Œå› æ­¤æ‚¨é€‰æ‹©äº†OpenALï¼Œå› ä¸ºè¯¥åç§°çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ã€‚
 
 å¥½æ¶ˆæ¯æ˜¯ï¼ŒOpenALä¹Ÿæœ‰ä¸€ä¸ªéå¸¸ç†Ÿæ‚‰çš„APIã€‚å®ƒæœ€åˆæ—¨åœ¨æ¨¡æ‹ŸOpenGLè§„èŒƒAPIã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨ä¼—å¤šæ¸¸æˆå£°éŸ³ç³»ç»Ÿä¸­é€‰æ‹©å®ƒçš„åŸå› ã€‚å¦å¤–ï¼Œå®ƒæ˜¯è·¨å¹³å°çš„ã€‚
 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>åœ¨C ++ä¸­ä½¿ç”¨OpenALçš„æŒ‡å—ã€‚ç¬¬1éƒ¨åˆ†ï¼šæ’­æ”¾å£°éŸ³</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488744/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨çš„æ¸¸æˆéœ€è¦å£°éŸ³ï¼</font><font style="vertical-align: inherit;">æ‚¨å¯èƒ½å·²ç»ä½¿ç”¨OpenGLåœ¨å±å¹•ä¸Šç»˜å›¾ã€‚</font><font style="vertical-align: inherit;">æ‚¨å·²ç»å¼„æ¸…äº†å®ƒçš„APIï¼Œå› æ­¤æ‚¨é€‰æ‹©äº†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenALï¼Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› ä¸ºè¯¥åç§°çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¥½æ¶ˆæ¯æ˜¯ï¼ŒOpenALä¹Ÿæœ‰ä¸€ä¸ªéå¸¸ç†Ÿæ‚‰çš„APIã€‚</font><font style="vertical-align: inherit;">å®ƒæœ€åˆæ—¨åœ¨æ¨¡æ‹ŸOpenGLè§„èŒƒAPIã€‚</font><font style="vertical-align: inherit;">è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨ä¼—å¤šæ¸¸æˆå£°éŸ³ç³»ç»Ÿä¸­é€‰æ‹©å®ƒçš„åŸå› ã€‚</font><font style="vertical-align: inherit;">å¦å¤–ï¼Œå®ƒæ˜¯è·¨å¹³å°çš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è¯¦ç»†è®¨è®ºåœ¨ç”¨C ++ç¼–å†™çš„æ¸¸æˆä¸­ä½¿ç”¨OpenALéœ€è¦å“ªäº›ä»£ç ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†é€šè¿‡ä»£ç ç¤ºä¾‹è®¨è®º3Dç©ºé—´ä¸­çš„å£°éŸ³ï¼ŒéŸ³ä¹å’Œå£°éŸ³å®šä½ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenALçš„å†å²</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä¼šå°½é‡ç®€çŸ­ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œå®ƒæ˜¯æ•…æ„è®¾è®¡ä¸ºæ¨¡ä»¿OpenGL APIçš„ï¼Œè¿™æ˜¯æœ‰åŸå› çš„ã€‚è¿™æ˜¯è®¸å¤šäººéƒ½çŸ¥é“çš„ä¾¿æ·APIï¼Œå¦‚æœå›¾å½¢æ˜¯æ¸¸æˆå¼•æ“çš„ä¸€ä¾§ï¼Œåˆ™å£°éŸ³åº”è¯¥æœ‰æ‰€ä¸åŒã€‚æœ€åˆï¼ŒOpenALåº”è¯¥æ˜¯å¼€æºçš„ï¼Œä½†æ˜¯åæ¥å‘ç”Ÿäº†ä¸€äº›äº‹æƒ…â€¦â€¦ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äººä»¬å¯¹å£°éŸ³çš„å…´è¶£ä¸åŠå›¾å½¢ï¼Œå› æ­¤Creativeæœ€ç»ˆå°†OpenALèµ‹äºˆäº†å®ƒçš„è´¢äº§ï¼Œå¹¶ä¸”</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‚è€ƒå®ç°</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç°åœ¨</font><em><font style="vertical-align: inherit;">æ˜¯</font></em><font style="vertical-align: inherit;">ä¸“æœ‰çš„è€Œä¸æ˜¯å…è´¹çš„ã€‚ä½†ï¼</font><font style="vertical-align: inherit;">OpenAL </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§„èŒƒ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»ç„¶æ˜¯â€œå¼€æ”¾â€æ ‡å‡†ï¼Œå³å·²</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘å¸ƒ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰æ—¶ä¼šä¿®æ”¹è§„æ ¼ï¼Œä½†æ•°é‡ä¸å¤šã€‚å£°éŸ³çš„å˜åŒ–é€Ÿåº¦ä¸å¦‚å›¾å½¢å˜åŒ–å¿«ï¼Œå› ä¸ºæ²¡æœ‰ç‰¹åˆ«çš„éœ€è¦ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¼€æ”¾è§„èŒƒå…è®¸å…¶ä»–äººåˆ›å»ºè§„èŒƒçš„å¼€æºå®ç°ã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAL Soft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°±æ˜¯è¿™æ ·ä¸€ç§å®ç°</font><font style="vertical-align: inherit;">ï¼Œå¦ç‡åœ°è¯´ï¼Œå¯»æ‰¾å…¶ä»–ä»»ä½•</font><font style="vertical-align: inherit;">å®ç°éƒ½æ˜¯</font><font style="vertical-align: inherit;">æ²¡æœ‰æ„ä¹‰çš„ã€‚è¿™æ˜¯æˆ‘å°†è¦ä½¿ç”¨çš„å®ç°ï¼Œå¹¶ä¸”æˆ‘å»ºè®®æ‚¨ä¹Ÿä½¿ç”¨å®ƒã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¥¹æ˜¯è·¨å¹³å°çš„ã€‚</font><font style="vertical-align: inherit;">å®ƒçš„å®ç°éå¸¸å¥‡æ€ª-å®é™…ä¸Šï¼Œåº“å†…éƒ¨ä½¿ç”¨ç³»ç»Ÿä¸­å­˜åœ¨çš„å…¶ä»–å£°éŸ³APIã€‚</font><font style="vertical-align: inherit;">åœ¨Windowsä¸Šï¼Œå®ƒä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DirectSound</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåœ¨Unixä¸Šï¼Œä½¿ç”¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œå¥¹å¾—ä»¥è·¨å¹³å°ã€‚</font><font style="vertical-align: inherit;">æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯åŒ…è£…APIçš„å¤§åã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯èƒ½ä¼šæ‹…å¿ƒæ­¤APIçš„é€Ÿåº¦ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ä¸ç”¨æ‹…å¿ƒã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯ç›¸åŒçš„å£°éŸ³ï¼Œä¸ä¼šäº§ç”Ÿå¾ˆå¤§çš„è´Ÿè½½ï¼Œå› æ­¤ä¸éœ€è¦å›¾å½¢APIè¿›è¡Œçš„å¤§ä¼˜åŒ–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œæœ‰äº†è¶³å¤Ÿçš„æ•…äº‹ï¼Œè®©æˆ‘ä»¬ç»§ç»­æ¢è®¨æŠ€æœ¯ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨éœ€è¦åœ¨OpenALä¸­ç¼–å†™ä»€ä¹ˆä»£ç ï¼Ÿ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨éœ€è¦åœ¨æ‚¨é€‰æ‹©çš„å·¥å…·é“¾ä¸­æ„å»ºOpenAL Softã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„è¿‡ç¨‹ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">â€œæºä»£ç å®‰è£…â€éƒ¨åˆ†ä¸­</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„è¯´æ˜è¿›è¡Œæ“ä½œ</font><font style="vertical-align: inherit;">ã€‚æˆ‘ä»æ¥æ²¡æœ‰é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœé‡åˆ°ä»»ä½•å›°éš¾ï¼Œè¯·åœ¨åŸå§‹æ–‡ç« ä¸‹å†™è¯„è®ºï¼Œæˆ–</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å†™åˆ°OpenAL Softé‚®ä»¶åˆ—è¡¨</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œæ‚¨å°†éœ€è¦ä¸€äº›å£°éŸ³æ–‡ä»¶ä»¥åŠä¸‹è½½å®ƒä»¬çš„æ–¹æ³•ã€‚å°†éŸ³é¢‘æ•°æ®åŠ è½½åˆ°ç¼“å†²åŒºä¸­ä»¥åŠå„ç§éŸ³é¢‘æ ¼å¼çš„ç»†å¾®ç»†èŠ‚ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œä½†æ˜¯æ‚¨å¯ä»¥é˜…è¯»æœ‰å…³</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½å’Œä¼ è¾“Ogg / Vorbisæ–‡ä»¶çš„ä¿¡æ¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚ä¸‹è½½WAVæ–‡ä»¶éå¸¸ç®€å•ï¼ŒInternetä¸Šå·²ç»æœ‰æ•°ç™¾ç¯‡å…³äºæ­¤çš„æ–‡ç« ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æŸ¥æ‰¾éŸ³é¢‘æ–‡ä»¶çš„ä»»åŠ¡å¿…é¡»è‡ªå·±å†³å®šã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥ä¸‹è½½Internetä¸Šçš„è®¸å¤šå™ªéŸ³å’Œçˆ†ç‚¸å£°ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæœ‰è°£è¨€ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°è¯•</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼–å†™è‡ªå·±çš„ChiptuneéŸ³ä¹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font><font style="vertical-align: inherit;">HabrÃ©ä¸Šçš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¿»è¯‘</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦å¤–ï¼Œè¯·å¦¥å–„ä¿å­˜</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€Š OpenALSoftç¨‹åºå‘˜æŒ‡å—ã€‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è¯¥æ–‡æ¡£æ˜¯å…·æœ‰â€œå®˜æ–¹â€ä¸“ä¸šçŸ¥è¯†çš„pdfæ›´å¥½çš„æ–‡æ¡£ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®é™…ä¸Šï¼Œä»…æ­¤è€Œå·²ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†å‡å®šæ‚¨å·²ç»çŸ¥é“å¦‚ä½•ç¼–å†™ä»£ç ï¼Œä½¿ç”¨IDEå’Œå·¥å…·é“¾ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenAL APIæ¦‚è¿°</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ­£å¦‚æˆ‘å¤šæ¬¡è¯´è¿‡çš„ï¼Œå®ƒç±»ä¼¼äºOpenGL APIã€‚ç›¸ä¼¼ä¹‹å¤„åœ¨äºå®ƒåŸºäºçŠ¶æ€ï¼Œå¹¶ä¸”æ‚¨ä¸æè¿°ç¬¦/æ ‡è¯†ç¬¦äº¤äº’ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸å¯¹è±¡æœ¬èº«äº¤äº’ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenGLå’ŒOpenALä¸­çš„APIçº¦å®šä¹‹é—´å­˜åœ¨å·®å¼‚ï¼Œä½†æ˜¯å®ƒä»¬å¹¶ä¸é‡è¦ã€‚åœ¨OpenGLä¸­ï¼Œæ‚¨éœ€è¦è¿›è¡Œç‰¹æ®Šçš„OSè°ƒç”¨ä»¥ç”Ÿæˆæ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚è¿™äº›æŒ‘æˆ˜é’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿè€Œæœ‰æ‰€ä¸åŒï¼Œ</font><font style="vertical-align: inherit;">å¹¶ä¸”å¹¶ä¸æ˜¯OpenGLè§„èŒƒçš„</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çœŸæ­£</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»„æˆéƒ¨åˆ†ã€‚åœ¨OpenALä¸­ï¼Œä¸€åˆ‡éƒ½ä¸åŒ-ä¸Šä¸‹æ–‡åˆ›å»ºåŠŸèƒ½æ˜¯è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”ä¸æ“ä½œç³»ç»Ÿæ— å…³ï¼Œå®ƒä»¬æ˜¯ç›¸åŒçš„ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸APIè¿›è¡Œäº¤äº’æ—¶ï¼Œå¯ä»¥ä¸ä¸‰ç§ä¸»è¦ç±»å‹çš„å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¬ä¼—</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆâ€œå¬ä¼—â€ï¼‰æ˜¯3Dç©ºé—´ä¸­â€œè€³æœµâ€çš„ä½ç½®ï¼ˆå§‹ç»ˆåªæœ‰ä¸€ä¸ªå¬ä¼—ï¼‰ã€‚</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æº</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆâ€œæºâ€ï¼‰æ˜¯å†æ¬¡åœ¨3Dç©ºé—´ä¸­å‘å‡ºå£°éŸ³çš„â€œæ‰¬å£°å™¨â€ã€‚</font><font style="vertical-align: inherit;">ä¾¦å¬å™¨å’Œä¿¡å·æºå¯ä»¥åœ¨ç©ºé—´ä¸­ç§»åŠ¨ï¼Œå¹¶ä¸”æ ¹æ®æ­¤æƒ…å†µï¼Œé€šè¿‡æ¸¸æˆä¸­çš„æ‰¬å£°å™¨æ‰€å¬åˆ°çš„å£°éŸ³ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åçš„å¯¹è±¡æ˜¯</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼“å†²åŒº</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬å­˜å‚¨å£°éŸ³çš„æ ·æœ¬ï¼Œè¿™äº›å£°éŸ³å°†ä¸ºå¬ä¼—æ’­æ”¾ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹Ÿæœ‰</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¨¡å¼</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¯¥æ¸¸æˆçš„ç”¨é€”æ”¹å˜éŸ³é¢‘é€šè¿‡OpenALçš„å¤„ç†æ–¹å¼ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ„æ–™æ¥æº</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚ä¸Šæ‰€è¿°ï¼Œè¿™äº›å¯¹è±¡æ˜¯å£°éŸ³çš„æ¥æºã€‚</font><font style="vertical-align: inherit;">å¯ä»¥è®¾ç½®å®ƒä»¬çš„ä½ç½®å’Œæ–¹å‘ï¼Œå¹¶å°†å®ƒä»¬ä¸å›æ”¾éŸ³é¢‘æ•°æ®çš„ç¼“å†²åŒºå…³è”ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¬ä¼—</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¸¸æˆä¸­å”¯ä¸€çš„ä¸€ç»„â€œè€³æœµâ€ã€‚</font><font style="vertical-align: inherit;">æ”¶å¬è€…å¬åˆ°çš„å†…å®¹é€šè¿‡è®¡ç®—æœºçš„æ‰¬å£°å™¨å¤åˆ¶ã€‚</font><font style="vertical-align: inherit;">ä»–ä¹Ÿæœ‰èŒä½ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼“å†²æ¶²</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨OpenGLä¸­ï¼Œç­‰æ•ˆé¡¹æ˜¯Texture2Dã€‚</font><font style="vertical-align: inherit;">æœ¬è´¨ä¸Šï¼Œè¿™æ˜¯æºå†ç°çš„éŸ³é¢‘æ•°æ®ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">èµ„æ–™ç±»å‹</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†èƒ½å¤Ÿæ”¯æŒè·¨å¹³å°ä»£ç ï¼ŒOpenALæ‰§è¡Œä¸€å®šçš„åŠ¨ä½œåºåˆ—å¹¶å®šä¹‰ä¸€äº›æ•°æ®ç±»å‹ã€‚</font><font style="vertical-align: inherit;">å®é™…ä¸Šï¼Œå®ƒéå¸¸ç²¾ç¡®åœ°éµå¾ªOpenGLï¼Œå› æ­¤æˆ‘ä»¬ç”šè‡³å¯ä»¥ç›´æ¥å°†OpenALç±»å‹è½¬æ¢ä¸ºOpenGLç±»å‹ã€‚</font><font style="vertical-align: inherit;">ä¸‹è¡¨åˆ—å‡ºäº†å®ƒä»¬åŠå…¶ç­‰æ•ˆé¡¹ã€‚</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¾“å…¥ç±»å‹</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é”®å…¥openalc</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é”®å…¥opengl</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++ Typedef</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æè¿°</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALboolean</code></td>
<td><code>ALCboolean</code></td>
<td><code>GLboolean</code></td>
<td><code>std::int8_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8ä½å¸ƒå°”å€¼</font></font></td>
</tr>
<tr>
<td><code>ALbyte</code></td>
<td><code>ALCbyte</code></td>
<td><code>GLbyte</code></td>
<td><code>std::int8_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¦ç¬¦å·</font><font style="vertical-align: inherit;">çš„</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™„åŠ ä»£ç çš„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 8ä½æ•´æ•°å€¼</font></font></td>
</tr>
<tr>
<td><code>ALubyte</code></td>
<td><code>ALCubyte</code></td>
<td><code>GLubyte</code></td>
<td><code>std::uint8_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8ä½æ— ç¬¦å·æ•´æ•°å€¼</font></font></td>
</tr>
<tr>
<td><code>ALchar</code></td>
<td><code>ALCchar</code></td>
<td><code>GLchar</code></td>
<td><code>char</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¦å·</font></font></td>
</tr>
<tr>
<td><code>ALshort</code></td>
<td><code>ALCshort</code></td>
<td><code>GLshort</code></td>
<td><code>std::int16_t</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16ä½æœ‰ç¬¦å·æ•´æ•°å€¼</font></font></td>
</tr>
<tr>
<td><code>ALushort</code></td>
<td><code>ALCushort</code></td>
<td><code>GLushort</code></td>
<td><code>std::uint16_t</code></td>
<td>16-    </td>
</tr>
<tr>
<td><code>ALint</code></td>
<td><code>ALCint</code></td>
<td><code>GLint</code></td>
<td><code>std::int32_t</code></td>
<td>32-      </td>
</tr>
<tr>
<td><code>ALuint</code></td>
<td><code>ALCuint</code></td>
<td><code>GLuint</code></td>
<td><code>std::uint32_t</code></td>
<td>32-    </td>
</tr>
<tr>
<td><code>ALsizei</code></td>
<td><code>ALCsizei</code></td>
<td><code>GLsizei</code></td>
<td><code>std::int32_t</code></td>
<td> 32-   </td>
</tr>
<tr>
<td><code>ALenum</code></td>
<td><code>ALCenum</code></td>
<td><code>GLenum</code></td>
<td><code>std::uint32_t</code></td>
<td> 32- </td>
</tr>
<tr>
<td><code>ALfloat</code></td>
<td><code>ALCfloat</code></td>
<td><code>GLfloat</code></td>
<td><code>float</code></td>
<td>32-     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IEEE 754</a></td>
</tr>
<tr>
<td><code>ALdouble</code></td>
<td><code>ALCdouble</code></td>
<td><code>GLdouble</code></td>
<td><code>double</code></td>
<td>64-     IEEE 754</td>
</tr>
<tr>
<td><code>ALvoid</code></td>
<td><code>ALCvoid</code></td>
<td><code>GLvoid</code></td>
<td><code>void</code></td>
<td> </td>
</tr>
</tbody>
</table></div><br>
<h2>  OpenAL</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ‰ä¸€ç¯‡æœ‰å…³å¦‚ä½•</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç®€åŒ–OpenALé”™è¯¯è¯†åˆ«</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„æ–‡ç« </font><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯å‡ºäºå®Œæ•´æ€§è€ƒè™‘ï¼Œæˆ‘å°†åœ¨è¿™é‡Œé‡å¤ã€‚æœ‰ä¸¤ç§</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„OpenAL APIè°ƒç”¨ï¼šå¸¸è§„å’Œä¸Šä¸‹æ–‡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥ä¸Šä¸‹æ–‡å¼€å¤´çš„è°ƒç”¨</font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»ä¼¼äºOpenGL win32è°ƒç”¨ï¼Œä»¥è·å–æ¸²æŸ“ä¸Šä¸‹æ–‡æˆ–åœ¨Linuxä¸Šçš„å¯¹åº”ä¸Šä¸‹æ–‡ã€‚å£°éŸ³å¯¹äºæ‰€æœ‰æ“ä½œç³»ç»Ÿéƒ½å…·æœ‰ç›¸åŒçš„è°ƒç”¨æ¥è¯´å·²ç»è¶³å¤Ÿç®€å•äº†ã€‚æ™®é€šç”µè¯ä»¥å¼€å¤´</font></font><code>al</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¦åœ¨ä¸Šä¸‹æ–‡è°ƒç”¨ä¸­å‡ºé”™ï¼Œè¯·è‡´ç”µ</font></font><code>alcGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼›å¯¹äºå¸¸è§„é€šè¯ï¼Œæˆ‘ä»¬è‡´ç”µ</font></font><code>alGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å®ƒä»¬è¿”å›ä¸€ä¸ªå€¼</font></font><code>ALCenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–ä¸€ä¸ª</font></font><code>ALenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç®€å•åˆ—å‡ºå¯èƒ½çš„é”™è¯¯</font><font style="vertical-align: inherit;">çš„å€¼</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨ï¼Œæˆ‘ä»¬å°†åªè€ƒè™‘ä¸€ç§æƒ…å†µï¼Œä½†åœ¨å…¶ä»–æ‰€æœ‰æƒ…å†µä¸‹ï¼Œå®ƒä»¬å‡ ä¹éƒ½æ˜¯ç›¸åŒçš„ã€‚</font><font style="vertical-align: inherit;">è®©æˆ‘ä»¬æ¥åº”å¯¹é€šå¸¸çš„æŒ‘æˆ˜</font></font><code>al</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªé¢„å¤„ç†å™¨å®æ¥å®Œæˆä¼ é€’ç»†èŠ‚çš„å·¥ä½œï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> alCall(function, ...) alCallImpl(__FILE__, __LINE__, function, __VA_ARGS__)</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»ç†è®ºä¸Šè®²ï¼Œä½ çš„ç¼–è¯‘å™¨å¯èƒ½ä¸æ”¯æŒ</font></font><code>__FILE__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»»</font></font><code>__LINE__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯ï¼Œè¯´å®è¯ï¼Œæˆ‘ä¼šæ„Ÿåˆ°æƒŠè®¶ï¼Œå¦‚æœè¿™è¢«è¯æ˜æ˜¯å¦‚æ­¤ã€‚</font></font><code>__VA_ARGS__</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¡¨ç¤ºå¯ä»¥ä¼ é€’ç»™æ­¤å®çš„å¯å˜æ•°é‡çš„å‚æ•°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ‰‹åŠ¨æ¥æ”¶ä¸Šæ¬¡æŠ¥å‘Šçš„é”™è¯¯å¹¶ä¸ºæ ‡å‡†é”™è¯¯æµæ˜¾ç¤ºä¸€ä¸ªæ¸…æ™°çš„å€¼ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">check_al_errors</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; filename, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line)</span>
</span>{<font></font>
    ALenum error = alGetError();<font></font>
    <span class="hljs-keyword">if</span>(error != AL_NO_ERROR)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"***ERROR*** ("</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; line &lt;&lt; <span class="hljs-string">")\n"</span> ;
        <span class="hljs-keyword">switch</span>(error)<font></font>
        {<font></font>
        <span class="hljs-keyword">case</span> AL_INVALID_NAME:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_NAME: a bad name (ID) was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_INVALID_ENUM:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_ENUM: an invalid enum value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_INVALID_VALUE:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_VALUE: an invalid value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_INVALID_OPERATION:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_INVALID_OPERATION: the requested operation is not valid"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> AL_OUT_OF_MEMORY:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"AL_OUT_OF_MEMORY: the requested operation resulted in OpenAL running out of memory"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"UNKNOWN AL ERROR: "</span> &lt;&lt; error;<font></font>
        }<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ²¡æœ‰å¤ªå¤šå¯èƒ½çš„é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">æˆ‘åœ¨ä»£ç ä¸­ç¼–å†™çš„è§£é‡Šæ˜¯æ‚¨å°†è·å¾—çš„æœ‰å…³è¿™äº›é”™è¯¯çš„å”¯ä¸€ä¿¡æ¯ï¼Œä½†æ˜¯è§„èŒƒè¯´æ˜äº†ä¸ºä»€ä¹ˆç‰¹å®šåŠŸèƒ½å¯èƒ½è¿”å›ç‰¹å®šé”™è¯¯çš„åŸå› ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åï¼Œæˆ‘ä»¬å®ç°ä¸¤ä¸ªä¸åŒçš„æ¨¡æ¿å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å°†åŒ…è£…æ‰€æœ‰çš„OpenGLè°ƒç”¨ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alFunction, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename, 
                <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, 
                alFunction function, 
                Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;!<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;
</span>{
    <span class="hljs-keyword">auto</span> ret = function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);<font></font>
    check_al_errors(filename,line);<font></font>
    <span class="hljs-keyword">return</span> ret;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alcFunction, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alcCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename, 
                 <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, 
                 alcFunction function, 
                 ALCdevice* device, 
                 Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-keyword">bool</span>&gt;
</span>{<font></font>
    function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);
    <span class="hljs-keyword">return</span> check_alc_errors(filename,line,device);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…¶ä¸­æœ‰ä¸¤ä¸ªï¼Œå› ä¸ºç¬¬ä¸€ä¸ªç”¨äºè¿”å›çš„OpenALå‡½æ•°ï¼Œ</font></font><code>void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¬¬äºŒä¸ªç”¨äºè¯¥å‡½æ•°è¿”å›éç©ºå€¼ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨ä¸å¤ªç†Ÿæ‚‰C ++ä¸­çš„å…ƒç¼–ç¨‹æ¨¡æ¿ï¼Œé‚£ä¹ˆè¯·çœ‹ä¸€ä¸‹cä»£ç çš„å„ä¸ªéƒ¨åˆ†</font></font><code>std::enable_if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬ç¡®å®šç¼–è¯‘å™¨ä¸ºæ¯ä¸ªå‡½æ•°è°ƒç”¨å®ç°è¿™äº›æ¨¡æ¿å‡½æ•°ä¸­çš„å“ªä¸ªã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç°åœ¨é€šè¯ä¹Ÿä¸€æ ·</font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> alcCall(function, device, ...) alcCallImpl(__FILE__, __LINE__, function, device, __VA_ARGS__)</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">check_alc_errors</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; filename, <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, ALCdevice* device)</span>
</span>{<font></font>
    ALCenum error = alcGetError(device);<font></font>
    <span class="hljs-keyword">if</span>(error != ALC_NO_ERROR)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"***ERROR*** ("</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">": "</span> &lt;&lt; line &lt;&lt; <span class="hljs-string">")\n"</span> ;
        <span class="hljs-keyword">switch</span>(error)<font></font>
        {<font></font>
        <span class="hljs-keyword">case</span> ALC_INVALID_VALUE:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_VALUE: an invalid value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_INVALID_DEVICE:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_DEVICE: a bad device was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_INVALID_CONTEXT:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_CONTEXT: a bad context was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_INVALID_ENUM:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_INVALID_ENUM: an unknown enum value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ALC_OUT_OF_MEMORY:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ALC_OUT_OF_MEMORY: an unknown enum value was passed to an OpenAL function"</span>;
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"UNKNOWN ALC ERROR: "</span> &lt;&lt; error;<font></font>
        }<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alcFunction, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alcCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename, 
                 <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line, 
                 alcFunction function, 
                 ALCdevice* device, 
                 Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-keyword">bool</span>&gt;
</span>{<font></font>
    function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);
    <span class="hljs-keyword">return</span> check_alc_errors(filename,line,device);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> alcFunction, <span class="hljs-keyword">typename</span> ReturnType, <span class="hljs-keyword">typename</span>... Params&gt;
<span class="hljs-keyword">auto</span> <span class="hljs-title">alcCallImpl</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* filename,
                 <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint_fast32_t</span> line,
                 alcFunction function,
                 ReturnType&amp; returnValue,
                 ALCdevice* device, 
                 Params... params)</span>
-&gt;<span class="hljs-keyword">typename</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">enable_if_t</span>&lt;!<span class="hljs-built_in">std</span>::is_same_v&lt;<span class="hljs-keyword">void</span>,<span class="hljs-title">decltype</span><span class="hljs-params">(function(params...))</span>&gt;,<span class="hljs-keyword">bool</span>&gt;
</span>{<font></font>
    returnValue = function(<span class="hljs-built_in">std</span>::forward&lt;Params&gt;(params)...);
    <span class="hljs-keyword">return</span> check_alc_errors(filename,line,device);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€å¤§çš„å˜åŒ–æ˜¯</font></font><code>device</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‰€æœ‰è°ƒç”¨éƒ½ä½¿ç”¨</font><font style="vertical-align: inherit;">çš„åŒ…å«</font><font style="vertical-align: inherit;">ï¼Œ</font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥åŠæ ·å¼é”™è¯¯</font></font><code>ALCenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><code>ALC_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®ƒä»¬çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œå¹¶ä¸”åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œä»å¾ˆå°çš„æ›´æ”¹</font></font><code>al</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ°</font></font><code>alc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸¥é‡ç ´åäº†æˆ‘çš„ä»£ç å’Œç†è§£ï¼Œå› æ­¤æˆ‘åªæ˜¯ç»§ç»­åœ¨å®ƒä¸Šé¢ç»§ç»­é˜…è¯»</font></font><code>c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å°±è¿™æ ·ã€‚</font><font style="vertical-align: inherit;">é€šå¸¸ï¼ŒC ++ä¸­çš„OpenALè°ƒç”¨çœ‹èµ·æ¥åƒä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* example #1 */</span>
alGenSources(<span class="hljs-number">1</span>, &amp;source);<font></font>
ALenum error = alGetError();<font></font>
<span class="hljs-keyword">if</span>(error != AL_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #2 */</span><font></font>
alcCaptureStart(&amp;device);<font></font>
ALCenum error = alcGetError();<font></font>
<span class="hljs-keyword">if</span>(error != ALC_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #3 */</span>
<span class="hljs-keyword">const</span> ALchar* sz = alGetString(param);<font></font>
ALenum error = alGetError();<font></font>
<span class="hljs-keyword">if</span>(error != AL_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #4 */</span>
<span class="hljs-keyword">const</span> ALCchar* sz = alcGetString(&amp;device, param);<font></font>
ALCenum error = alcGetError();<font></font>
<span class="hljs-keyword">if</span>(error != ALC_NO_ERROR)<font></font>
{<font></font>
    <span class="hljs-comment">/* handle different possibilities */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">/* example #1 */</span>
<span class="hljs-keyword">if</span>(!alCall(alGenSources, <span class="hljs-number">1</span>, &amp;source))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #2 */</span>
<span class="hljs-keyword">if</span>(!alcCall(alcCaptureStart, &amp;device))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #3 */</span>
<span class="hljs-keyword">const</span> ALchar* sz;
<span class="hljs-keyword">if</span>(!alCall(alGetString, sz, param))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">/* example #4 */</span>
<span class="hljs-keyword">const</span> ALCchar* sz;
<span class="hljs-keyword">if</span>(!alcCall(alcGetString, sz, &amp;device, param))<font></font>
{<font></font>
    <span class="hljs-comment">/* error occurred */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™å¯¹æ‚¨æ¥è¯´ä¼¼ä¹å¾ˆå¥‡æ€ªï¼Œä½†æ˜¯å¯¹æˆ‘æ¥è¯´æ›´æ–¹ä¾¿ã€‚</font><font style="vertical-align: inherit;">å½“ç„¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©å…¶ä»–ç»“æ„ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½.wavæ–‡ä»¶</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯ä»¥è‡ªå·±ä¸‹è½½å®ƒä»¬ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åº“ã€‚</font><font style="vertical-align: inherit;">è¿™æ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åŠ è½½.wavæ–‡ä»¶çš„å¼€æºå®ç°</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ç–¯äº†ï¼Œæ‰€ä»¥æˆ‘è‡ªå·±åšï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> <span class="hljs-title">convert_to_int</span><span class="hljs-params">(<span class="hljs-keyword">char</span>* buffer, <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> len)</span>
</span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> a = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::endian::native == <span class="hljs-built_in">std</span>::endian::little)
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">memcpy</span>(&amp;a, buffer, len);
    <span class="hljs-keyword">else</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i)
            <span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">char</span>*&gt;(&amp;a)[<span class="hljs-number">3</span> - i] = buffer[i];
    <span class="hljs-keyword">return</span> a;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">load_wav_file_header</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::ifstream&amp; file,
                          <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; channels,
                          <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span>&amp; sampleRate,
                          <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; bitsPerSample,
                          ALsizei&amp; size)</span>
</span>{
    <span class="hljs-keyword">char</span> buffer[<span class="hljs-number">4</span>];
    <span class="hljs-keyword">if</span>(!file.is_open())
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
<font></font>
    <span class="hljs-comment">// the RIFF</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read RIFF"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">strncmp</span>(buffer, <span class="hljs-string">"RIFF"</span>, <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: file is not a valid WAVE file (header doesn't begin with RIFF)"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// the size of the file</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read size of file"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// the WAVE</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read WAVE"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">strncmp</span>(buffer, <span class="hljs-string">"WAVE"</span>, <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: file is not a valid WAVE file (header doesn't contain WAVE)"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// "fmt/0"</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read fmt/0"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// this is always 16, the size of the fmt data chunk</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read the 16"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// PCM should be 1?</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read PCM"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// the number of channels</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read number of channels"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    channels = convert_to_int(buffer, <span class="hljs-number">2</span>);<font></font>
<font></font>
    <span class="hljs-comment">// sample rate</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read sample rate"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    sampleRate = convert_to_int(buffer, <span class="hljs-number">4</span>);<font></font>
<font></font>
    <span class="hljs-comment">// (sampleRate * bitsPerSample * channels) / 8</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read (sampleRate * bitsPerSample * channels) / 8"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// ?? dafaq</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read dafaq"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// bitsPerSample</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">2</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read bits per sample"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    bitsPerSample = convert_to_int(buffer, <span class="hljs-number">2</span>);<font></font>
<font></font>
    <span class="hljs-comment">// data chunk header "data"</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read data chunk header"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">strncmp</span>(buffer, <span class="hljs-string">"data"</span>, <span class="hljs-number">4</span>) != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: file is not a valid WAVE file (doesn't have 'data' tag)"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// size of data</span>
    <span class="hljs-keyword">if</span>(!file.read(buffer, <span class="hljs-number">4</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: could not read data size"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    size = convert_to_int(buffer, <span class="hljs-number">4</span>);<font></font>
<font></font>
    <span class="hljs-comment">/* cannot be at the end of file */</span>
    <span class="hljs-keyword">if</span>(file.eof())<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: reached EOF on the file"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(file.fail())<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: fail state set on the file"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">char</span>* <span class="hljs-title">load_wav</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; filename,
               <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; channels,
               <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span>&amp; sampleRate,
               <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span>&amp; bitsPerSample,
               ALsizei&amp; size)</span>
</span>{
    <span class="hljs-function"><span class="hljs-built_in">std</span>::ifstream <span class="hljs-title">in</span><span class="hljs-params">(filename, <span class="hljs-built_in">std</span>::ios::binary)</span></span>;
    <span class="hljs-keyword">if</span>(!in.is_open())<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not open \""</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">"\""</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">if</span>(!load_wav_file_header(in, channels, sampleRate, bitsPerSample, size))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not load wav header of \""</span> &lt;&lt; filename &lt;&lt; <span class="hljs-string">"\""</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">char</span>* data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[size];<font></font>
<font></font>
    in.read(data, size);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> data;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä¸ä¼šè§£é‡Šä»£ç ï¼Œå› ä¸ºè¿™ä¸å®Œå…¨æ˜¯æœ¬æ–‡çš„ä¸»é¢˜ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯å¦‚æœä¸</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WAVæ–‡ä»¶</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">è§„èŒƒ</font></a><font style="vertical-align: inherit;">å¹¶è¡Œé˜…è¯»çš„è¯å¾ˆæ˜æ˜¾</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆå§‹åŒ–ä¸é”€æ¯</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–OpenALï¼Œç„¶ååƒä»»ä½•ä¼˜ç§€çš„ç¨‹åºå‘˜ä¸€æ ·ï¼Œåœ¨å®Œæˆä½¿ç”¨åå®Œæˆå®ƒã€‚</font><font style="vertical-align: inherit;">å®ƒåˆå§‹åŒ–æœŸé—´ä½¿ç”¨</font></font><code>ALCdevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼ˆæ³¨æ„ï¼Œè¿™</font></font><code>ALC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸æ˜¯</font></font></i> <code>AL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼‰ï¼ŒåŸºæœ¬ä¸Šä»£è¡¨äº†ä½ çš„è®¡ç®—æœºä¸Šæ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼Œå¹¶ç”¨å®ƒçš„ä¸œè¥¿</font></font><code>ALCcontext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<code>ALCdevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»ä¼¼äºé€‰æ‹©å›¾å½¢å¡ã€‚</font><font style="vertical-align: inherit;">OpenGLæ¸¸æˆå°†åœ¨å…¶ä¸Šæ¸²æŸ“ã€‚</font></font><code>ALCcontext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»ä¼¼äºæ‚¨è¦ä¸ºOpenGLåˆ›å»ºï¼ˆä»¥æ“ä½œç³»ç»Ÿå”¯ä¸€çš„æ–¹å¼ï¼‰çš„æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alcdevice</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ— è®ºå£°éŸ³æ˜¯å£°å¡è¿˜æ˜¯èŠ¯ç‰‡ï¼ŒOpenALè®¾å¤‡éƒ½æ˜¯é€šè¿‡å£°éŸ³è¾“å‡ºçš„ï¼Œä½†æ˜¯ä»ç†è®ºä¸Šè®²ï¼Œå®ƒå¯ä»¥æœ‰å¾ˆå¤šä¸åŒçš„ä¸œè¥¿ã€‚ä¸æ ‡å‡†è¾“å‡º</font></font><code>iostream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¯ä»¥æ˜¯æ‰“å°æœºè€Œä¸æ˜¯å±å¹•ä¸€æ ·ï¼Œè®¾å¤‡å¯ä»¥æ˜¯æ–‡ä»¶ï¼Œç”šè‡³æ˜¯æ•°æ®æµã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå¯¹äºç¼–ç¨‹æ¸¸æˆï¼Œå®ƒå°†æ˜¯å£°éŸ³è®¾å¤‡ï¼Œé€šå¸¸æˆ‘ä»¬å¸Œæœ›å®ƒæˆä¸ºç³»ç»Ÿä¸­çš„æ ‡å‡†å£°éŸ³è¾“å‡ºè®¾å¤‡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¦è·å–ç³»ç»Ÿä¸­å¯ç”¨è®¾å¤‡çš„åˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½è¯·æ±‚å®ƒä»¬ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">get_available_devices</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;&amp; devicesVec, ALCdevice* device)</span>
</span>{
    <span class="hljs-keyword">const</span> ALCchar* devices;
    <span class="hljs-keyword">if</span>(!alcCall(alcGetString, devices, device, <span class="hljs-literal">nullptr</span>, ALC_DEVICE_SPECIFIER))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
<font></font>
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>* ptr = devices;<font></font>
<font></font>
    devicesVec.clear();<font></font>
<font></font>
    <span class="hljs-keyword">do</span><font></font>
    {<font></font>
        devicesVec.push_back(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>(ptr));<font></font>
        ptr += devicesVec.back().size() + <span class="hljs-number">1</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">while</span>(*(ptr + <span class="hljs-number">1</span>) != <span class="hljs-string">'\0'</span>);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®é™…ä¸Šï¼Œè¿™åªæ˜¯è°ƒç”¨å‘¨å›´çš„åŒ…è£…å™¨</font></font><code>alcGetString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¿”å›å€¼æ˜¯æŒ‡å‘ç”±ä¸€ä¸ªå€¼åˆ†éš”</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä»¥ä¸¤ä¸ªå€¼ç»“å°¾</font><font style="vertical-align: inherit;">çš„å­—ç¬¦ä¸²åˆ—è¡¨çš„æŒ‡é’ˆ</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚åœ¨è¿™é‡Œï¼ŒåŒ…è£…ç¨‹åºå°†å…¶ç®€å•åœ°è½¬æ¢ä¸ºå¯¹æˆ‘ä»¬æ–¹ä¾¿çš„å‘é‡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¿™æ ·åšï¼æˆ‘æ€€ç–‘åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°æ¸¸æˆéƒ½å¯ä»¥ç®€å•åœ°å°†å£°éŸ³è¾“å‡ºåˆ°è®¾å¤‡ï¼Œæ— è®ºå®ƒæ˜¯ä»€ä¹ˆã€‚æˆ‘å¾ˆå°‘çœ‹åˆ°ç”¨äºæ›´æ”¹è¦é€šè¿‡å…¶è¾“å‡ºå£°éŸ³çš„éŸ³é¢‘è®¾å¤‡çš„é€‰é¡¹ã€‚å› æ­¤ï¼Œè¦åˆå§‹åŒ–OpenALè®¾å¤‡ï¼Œæˆ‘ä»¬ä½¿ç”¨call </font></font><code>alcOpenDevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æ­¤è°ƒç”¨ä¸å…¶ä»–è°ƒç”¨ç•¥æœ‰ä¸åŒï¼Œå› ä¸ºå®ƒæ²¡æœ‰æŒ‡å®šå¯é€šè¿‡è·å–çš„é”™è¯¯çŠ¶æ€</font></font><code>alcGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶ç§°ä¸ºæ™®é€šå‡½æ•°ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs">ALCdevice* openALDevice = alcOpenDevice(<span class="hljs-literal">nullptr</span>);
<span class="hljs-keyword">if</span>(!openALDevice)<font></font>
{<font></font>
    <span class="hljs-comment">/* fail */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨å·²ç»åˆ—å‡ºäº†å¦‚ä¸Šæ‰€ç¤ºçš„è®¾å¤‡ï¼Œå¹¶ä¸”å¸Œæœ›ç”¨æˆ·é€‰æ‹©å…¶ä¸­ä¹‹ä¸€ï¼Œåˆ™éœ€è¦å°†å…¶åç§°</font></font><code>alcOpenDevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ”¹ä¸º</font></font><code>nullptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚å‘é€</font></font><code>nullptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è®¢å•</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥é»˜è®¤æ‰“å¼€è®¾å¤‡</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¿”å›å€¼æ˜¯ç›¸åº”çš„è®¾å¤‡ï¼Œæˆ–è€…</font></font><code>nullptr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘ç”Ÿé”™è¯¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ ¹æ®æ‚¨æ˜¯å¦å·²å®Œæˆæšä¸¾ï¼Œé”™è¯¯å¯èƒ½ä¼šä½¿ç¨‹åºåœæ­¢è¿è¡Œã€‚æ²¡æœ‰è®¾å¤‡=æ²¡æœ‰OpenALï¼›æ²¡æœ‰OpenAL =æ²¡æœ‰å£°éŸ³ï¼›æ²¡æœ‰å£°éŸ³=æ²¡æœ‰æ¸¸æˆã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…³é—­ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬è¦åšçš„æœ€åä¸€ä»¶äº‹å°±æ˜¯æ­£ç¡®å®Œæˆå®ƒã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">ALCboolean closed;
<span class="hljs-keyword">if</span>(!alcCall(alcCloseDevice, closed, openALDevice, openALDevice))<font></font>
{<font></font>
    <span class="hljs-comment">/* do we care? */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå¦‚æœä¸å¯èƒ½å®Œæˆï¼Œé‚£ä¹ˆè¿™å¯¹æˆ‘ä»¬å°±ä¸å†é‡è¦ã€‚åœ¨å…³é—­è®¾å¤‡ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…³é—­æ‰€æœ‰åˆ›å»ºçš„ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯æ ¹æ®æˆ‘çš„ç»éªŒï¼Œæ­¤è°ƒç”¨ä¹Ÿå¯ä»¥å®Œæˆä¸Šä¸‹æ–‡ã€‚ä½†æ˜¯æˆ‘ä»¬ä¼šåšå¯¹çš„ã€‚å¦‚æœæ‚¨åœ¨æ‹¨æ‰“ç”µè¯ä¹‹å‰å®Œæˆäº†æ‰€æœ‰æ“ä½œ</font></font><code>alcCloseDevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œåˆ™åº”è¯¥æ²¡æœ‰é”™è¯¯ï¼Œå¹¶ä¸”ç”±äºæŸç§åŸå› è€Œå‡ºç°äº†é”™è¯¯ï¼Œé‚£ä¹ˆæ‚¨å°†æ— èƒ½ä¸ºåŠ›ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œæ¥è‡ªçš„å‘¼å«</font></font><code>alcCall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘é€äº†è¯¥è®¾å¤‡çš„ä¸¤ä¸ªå‰¯æœ¬ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µçš„åŸå› æ˜¯æ¨¡æ¿å‡½æ•°çš„å·¥ä½œæ–¹å¼-ä¸€ç§ç”¨äºé”™è¯¯æ£€æŸ¥ï¼Œå¦ä¸€ç§ç”¨ä½œå‡½æ•°å‚æ•°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»ç†è®ºä¸Šè®²ï¼Œæˆ‘å¯ä»¥æ”¹è¿›æ¨¡æ¿å‡½æ•°ï¼Œä»¥ä¾¿å®ƒä¼ é€’ç¬¬ä¸€ä¸ªå‚æ•°ä»¥è¿›è¡Œé”™è¯¯æ£€æŸ¥ï¼Œå¹¶ä»ç„¶å°†å…¶å‘é€ç»™å‡½æ•°ï¼›</font><font style="vertical-align: inherit;">ä½†æˆ‘å¾ˆæ‡’ã€‚</font><font style="vertical-align: inherit;">æˆ‘å°†æŠŠå®ƒç•™ä½œåŠŸè¯¾ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬çš„ALCä¸Šä¸‹æ–‡</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆå§‹åŒ–çš„ç¬¬äºŒéƒ¨åˆ†æ˜¯ä¸Šä¸‹æ–‡ã€‚</font><font style="vertical-align: inherit;">å’Œä»¥å‰ä¸€æ ·ï¼Œå®ƒç±»ä¼¼äºOpenGLçš„æ¸²æŸ“ä¸Šä¸‹æ–‡ã€‚</font><font style="vertical-align: inherit;">ä¸€ä¸ªç¨‹åºä¸­å¯ä»¥æœ‰å¤šä¸ªä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦ã€‚</font><font style="vertical-align: inherit;">æ¯ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰è‡ªå·±çš„</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾¦å¬å™¨</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æº</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨ä¸Šä¸‹æ–‡ä¹‹é—´ä¼ é€’å®ƒä»¬ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¹Ÿè®¸è¿™åœ¨å£°éŸ³å¤„ç†è½¯ä»¶ä¸­å¾ˆæœ‰ç”¨ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œå¯¹äº99.9ï¼…çš„æ¸¸æˆè€Œè¨€ï¼Œä»…ä¸€ç§æƒ…å†µå°±è¶³å¤Ÿäº†ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡éå¸¸ç®€å•ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs">ALCcontext* openALContext;
<span class="hljs-keyword">if</span>(!alcCall(alcCreateContext, openALContext, openALDevice, openALDevice, <span class="hljs-literal">nullptr</span>) || !openALContext)<font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not create audio context"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-comment">/* probably exit program */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æˆ‘ä»¬éœ€è¦</font></font><code>ALCdevice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°±æƒ³è¦åˆ›å»ºä¸Šä¸‹æ–‡çš„</font><font style="vertical-align: inherit;">å†…å®¹è¿›è¡Œæ²Ÿé€š</font><font style="vertical-align: inherit;">ï¼›</font><font style="vertical-align: inherit;">æˆ‘ä»¬è¿˜å¯ä»¥ä¼ é€’ä¸€ä¸ªå¯é€‰çš„é›¶å°¾é”®å’Œå€¼åˆ—è¡¨ï¼Œè¿™äº›é”®å’Œå€¼</font></font><code>ALCint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯åº”ä½¿ç”¨ä¸Šä¸‹æ–‡åˆ›å»ºçš„å±æ€§ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€å®è¯´ï¼Œæˆ‘ä»€è‡³ä¸çŸ¥é“åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å±æ€§ä¼ é€’ä¼šæ´¾ä¸Šç”¨åœºã€‚</font><font style="vertical-align: inherit;">æ‚¨çš„æ¸¸æˆå°†åœ¨å…·æœ‰å¸¸è§„å£°éŸ³åŠŸèƒ½çš„å¸¸è§„è®¡ç®—æœºä¸Šè¿è¡Œã€‚</font><font style="vertical-align: inherit;">å±æ€§å…·æœ‰é»˜è®¤å€¼ï¼Œå…·ä½“å–å†³äºè®¡ç®—æœºï¼Œå› æ­¤è¿™å¹¶ä¸æ˜¯ç‰¹åˆ«é‡è¦ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯å¦‚æœæ‚¨ä»ç„¶éœ€è¦å®ƒï¼š</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å±æ€§åç§°</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æè¿°</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ALC_FREQUENCY</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¾“å‡ºç¼“å†²å™¨çš„æ··é¢‘ï¼Œä»¥Hzä¸ºå•ä½</font></font></td>
</tr>
<tr>
<td><code>ALC_REFRESH</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ–°é—´éš”ï¼Œä»¥Hzä¸ºå•ä½</font></font></td>
</tr>
<tr>
<td><code>ALC_SYNC</code></td>
<td><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡å‡ºå®ƒåº”è¯¥æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ä¸Šä¸‹æ–‡</font></font></td>
</tr>
<tr>
<td><code>ALC_MONO_SOURCES</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯¥å€¼æœ‰åŠ©äºå‘Šè¯‰æ‚¨å°†ä½¿ç”¨å¤šå°‘ä¸ªæºï¼Œè¿™äº›æºéœ€è¦èƒ½å¤Ÿå¤„ç†å•å£°é“éŸ³é¢‘æ•°æ®ã€‚</font><font style="vertical-align: inherit;">å®ƒä¸é™åˆ¶æœ€å¤§æ•°é‡ï¼Œè€Œåªæ˜¯è®©æ‚¨åœ¨äº‹å…ˆçŸ¥é“è¿™ä¸€ç‚¹æ—¶æ›´åŠ æœ‰æ•ˆã€‚</font></font></td>
</tr>
<tr>
<td><code>ALC_STEREO_SOURCES</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›¸åŒï¼Œä½†ç”¨äºç«‹ä½“å£°æ•°æ®ã€‚</font></font></td>
</tr>
</tbody>
</table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ”¶åˆ°é”™è¯¯ï¼Œåˆ™å¾ˆå¯èƒ½æ˜¯å› ä¸ºæ‰€éœ€çš„å±æ€§ä¸å¯ç”¨ï¼Œæˆ–è€…æ— æ³•ä¸ºå—æ”¯æŒçš„è®¾å¤‡åˆ›å»ºå…¶ä»–ä¸Šä¸‹æ–‡ï¼›è¿™æ˜¯å› ä¸ºé”™è¯¯ã€‚</font><font style="vertical-align: inherit;">è¿™å°†å¯¼è‡´é”™è¯¯</font></font><code>ALC_INVALID_VALUE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨ä¼ é€’çš„è®¾å¤‡æ— æ•ˆï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯</font></font><code>ALC_INVALID_DEVICE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬å·²ç»åœ¨æ£€æŸ¥æ­¤é”™è¯¯ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ›å»ºä¸Šä¸‹æ–‡è¿˜ä¸å¤Ÿã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä»ç„¶éœ€è¦ä½¿å…¶ä¿æŒæœ€æ–°çŠ¶æ€-çœ‹èµ·æ¥åƒWindows OpenGLæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œå¯¹å—ï¼Ÿ</font><font style="vertical-align: inherit;">è¿™æ˜¯ç›¸åŒçš„ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">ALCboolean contextMadeCurrent = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">if</span>(!alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, openALContext)<font></font>
   || contextMadeCurrent != ALC_TRUE)<font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not make audio context current"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-comment">/* probably exit or give up on having sound */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¯¹äºä¸Šä¸‹æ–‡ï¼ˆæˆ–å…¶ä¸­çš„æºå’Œä¾¦å¬å™¨ï¼‰è¿›è¡Œä»»ä½•è¿›ä¸€æ­¥çš„æ“ä½œï¼Œéƒ½å¿…é¡»ä½¿ä¸Šä¸‹æ–‡æˆä¸ºå½“å‰ä¸Šä¸‹æ–‡ã€‚</font><font style="vertical-align: inherit;">è¯¥æ“ä½œå°†è¿”å›</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹ï¼Œå‘é€çš„å”¯ä¸€å¯èƒ½çš„è¯¯å·®å€¼</font></font><code>alcGetError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯ï¼Œ</font></font><code>ALC_INVALID_CONTEXT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ˜¯ä»åç§°æ¸…æ¥šã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Œæˆä¸Šä¸‹æ–‡ï¼Œå³ </font><font style="vertical-align: inherit;">é€€å‡ºç¨‹åºæ—¶ï¼Œæœ‰å¿…è¦ä½¿ä¸Šä¸‹æ–‡ä¸å†æ˜¯æœ€æ–°çš„ï¼Œç„¶åé”€æ¯å®ƒã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(!alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, <span class="hljs-literal">nullptr</span>))<font></font>
{<font></font>
    <span class="hljs-comment">/* what can you do? */</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span>(!alcCall(alcDestroyContext, openALDevice, openALContext))<font></font>
{<font></font>
    <span class="hljs-comment">/* not much you can do */</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fromçš„å”¯ä¸€å¯èƒ½é”™è¯¯ä¸</font><font style="vertical-align: inherit;">- </font></font><code>alcDestroyContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›¸åŒ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨åšå¯¹äº†æ‰€æœ‰äº‹æƒ…ï¼Œé‚£ä¹ˆæ‚¨å°†ä¸€äº‹æ— æˆï¼Œä½†å¦‚æœæ‚¨åšå¾—æ­£ç¡®ï¼Œé‚£ä¹ˆå°†ä¸€äº‹æ— æˆã€‚</font></font><code>alcMakeContextCurrent</code><font style="vertical-align: inherit;"></font><code>ALC_INVALID_CONTEXT</code><font style="vertical-align: inherit;"></font><br>
<br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºä»€ä¹ˆè¦æ£€æŸ¥æ— æ³•è§£å†³çš„é”™è¯¯ï¼Ÿ</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› ä¸ºæˆ‘å¸Œæœ›æœ‰å…³å®ƒä»¬çš„æ¶ˆæ¯è‡³å°‘å‡ºç°åœ¨é”™è¯¯æµä¸­ï¼ˆå¯¹æˆ‘ä»¬æ¥è¯´ç¡®å®å¦‚æ­¤ï¼‰ï¼Œ</font></font><code>alcCall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡è®¾å®ƒæ°¸è¿œä¸ä¼šç»™æˆ‘ä»¬å¸¦æ¥é”™è¯¯ï¼Œä½†æ˜¯çŸ¥é“è¿™æ ·çš„é”™è¯¯å‘ç”Ÿåœ¨å…¶ä»–äººçš„è®¡ç®—æœºä¸Šå°†å¾ˆæœ‰ç”¨ã€‚</font><font style="vertical-align: inherit;">å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç ”ç©¶é—®é¢˜ï¼Œå¹¶æœ‰å¯èƒ½</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘OpenAL Softå¼€å‘äººå‘˜æŠ¥å‘Šé”™è¯¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ’­æ”¾æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå£°éŸ³</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¥½äº†ï¼Œæ‰€æœ‰è¿™äº›å°±è¶³å¤Ÿäº†ï¼Œè®©æˆ‘ä»¬æ’­æ”¾å£°éŸ³ã€‚</font><font style="vertical-align: inherit;">é¦–å…ˆï¼Œæˆ‘ä»¬æ˜¾ç„¶éœ€è¦ä¸€ä¸ªå£°éŸ³æ–‡ä»¶ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œè¿™æ˜¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘å°†æ°¸è¿œå®Œæˆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">æ¸¸æˆ</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://indiegamedev.net/wp-content/uploads/2020/02/iamtheprotectorofthissystem.wav</font></font></a></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘æ˜¯è¿™ä¸ªç³»ç»Ÿçš„ä¿æŠ¤è€…ï¼</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
å› æ­¤ï¼Œæ‰“å¼€IDEå¹¶ä½¿ç”¨ä»¥ä¸‹ä»£ç ã€‚åˆ‡è®°æ’å…¥OpenAL Softå¹¶æ·»åŠ ä¸Šé¢æ˜¾ç¤ºçš„æ–‡ä»¶ä¸Šä¼ ä»£ç å’Œé”™è¯¯æ£€æŸ¥ä»£ç ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{<font></font>
    ALCdevice* openALDevice = alcOpenDevice(<span class="hljs-literal">nullptr</span>);
    <span class="hljs-keyword">if</span>(!openALDevice)
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
<font></font>
    ALCcontext* openALContext;<font></font>
    <span class="hljs-keyword">if</span>(!alcCall(alcCreateContext, openALContext, openALDevice, openALDevice, <span class="hljs-literal">nullptr</span>) || !openALContext)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not create audio context"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
    ALCboolean contextMadeCurrent = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span>(!alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, openALContext)<font></font>
       || contextMadeCurrent != ALC_TRUE)<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not make audio context current"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> channels;
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> sampleRate;
    <span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> bitsPerSample;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt; soundData;
    <span class="hljs-keyword">if</span>(!load_wav(<span class="hljs-string">"iamtheprotectorofthissystem.wav"</span>, channels, sampleRate, bitsPerSample, soundData))<font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not load wav"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    ALuint buffer;<font></font>
    alCall(alGenBuffers, <span class="hljs-number">1</span>, &amp;buffer);<font></font>
<font></font>
    ALenum format;<font></font>
    <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
        format = AL_FORMAT_MONO8;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
        format = AL_FORMAT_MONO16;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
        format = AL_FORMAT_STEREO8;<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
        format = AL_FORMAT_STEREO16;<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span>
            &lt;&lt; <span class="hljs-string">"ERROR: unrecognised wave format: "</span>
            &lt;&lt; channels &lt;&lt; <span class="hljs-string">" channels, "</span>
            &lt;&lt; bitsPerSample &lt;&lt; <span class="hljs-string">" bps"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    alCall(alBufferData, buffer, format, soundData.data(), soundData.size(), sampleRate);<font></font>
    soundData.clear(); <span class="hljs-comment">// erase the sound in RAM</span><font></font>
<font></font>
    ALuint source;<font></font>
    alCall(alGenSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
    alCall(alSourcef, source, AL_PITCH, <span class="hljs-number">1</span>);<font></font>
    alCall(alSourcef, source, AL_GAIN, <span class="hljs-number">1.0f</span>);<font></font>
    alCall(alSource3f, source, AL_POSITION, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
    alCall(alSource3f, source, AL_VELOCITY, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
    alCall(alSourcei, source, AL_LOOPING, AL_FALSE);<font></font>
    alCall(alSourcei, source, AL_BUFFER, buffer);<font></font>
<font></font>
    alCall(alSourcePlay, source);<font></font>
<font></font>
    ALint state = AL_PLAYING;<font></font>
<font></font>
    <span class="hljs-keyword">while</span>(state == AL_PLAYING)<font></font>
    {<font></font>
        alCall(alGetSourcei, source, AL_SOURCE_STATE, &amp;state);<font></font>
    }<font></font>
<font></font>
    alCall(alDeleteSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
    alCall(alDeleteBuffers, <span class="hljs-number">1</span>, &amp;buffer);<font></font>
<font></font>
    alcCall(alcMakeContextCurrent, contextMadeCurrent, openALDevice, <span class="hljs-literal">nullptr</span>);<font></font>
    alcCall(alcDestroyContext, openALDevice, openALContext);<font></font>
<font></font>
    ALCboolean closed;<font></font>
    alcCall(alcCloseDevice, closed, openALDevice, openALDevice);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç¼–è¯‘ä¸­ï¼</font><font style="vertical-align: inherit;">æˆ‘ä»¬ç»„æˆï¼</font><font style="vertical-align: inherit;">å‘å°„ï¼</font></font><em><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘æ˜¯è¿™ä¸ªç³»ç»Ÿçš„è´Ÿè´£äºº</font></font></strong></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å¦‚æœå¬ä¸åˆ°å£°éŸ³ï¼Œè¯·å†æ¬¡æ£€æŸ¥æ‰€æœ‰å†…å®¹ã€‚</font><font style="vertical-align: inherit;">å¦‚æœåœ¨æ§åˆ¶å°çª—å£ä¸­å†™äº†ä¸€äº›å†…å®¹ï¼Œé‚£ä¹ˆè¿™åº”è¯¥æ˜¯é”™è¯¯æµçš„æ ‡å‡†è¾“å‡ºï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬çš„é”™è¯¯æŠ¥å‘ŠåŠŸèƒ½åº”è¯¥å‘Šè¯‰æˆ‘ä»¬äº§ç”Ÿé”™è¯¯çš„æºä»£ç è¡Œã€‚</font><font style="vertical-align: inherit;">å¦‚æœå‘ç°</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é”™è¯¯ï¼Œè¯·é˜…è¯»ã€Š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¨‹åºå‘˜æŒ‡å—ã€‹</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å’Œ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è§„èŒƒï¼Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»¥äº†è§£å‡½æ•°å¯åœ¨ä½•ç§æ¡ä»¶ä¸‹ç”Ÿæˆæ­¤é”™è¯¯ã€‚</font><font style="vertical-align: inherit;">è¿™å°†å¸®åŠ©æ‚¨è§£å†³é—®é¢˜ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæœªæˆåŠŸï¼Œè¯·åœ¨åŸå§‹æ–‡ç« ä¸‹å‘è¡¨è¯„è®ºï¼Œæˆ‘å°†å°½åŠ›æä¾›å¸®åŠ©ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸‹è½½RIFF WAVEæ•°æ®</font></font></h3><br>
<pre><code class="cpp hljs"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> channels;
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">int32_t</span> sampleRate;
<span class="hljs-built_in">std</span>::<span class="hljs-keyword">uint8_t</span> bitsPerSample;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">char</span>&gt; soundData;
<span class="hljs-keyword">if</span>(!load_wav(<span class="hljs-string">"iamtheprotectorofthissystem.wav"</span>, channels, sampleRate, bitsPerSample, soundData))<font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span> &lt;&lt; <span class="hljs-string">"ERROR: Could not load wav"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ˜¯æŒ‡waveå¼•å¯¼ä»£ç ã€‚</font><font style="vertical-align: inherit;">é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ä»¥æŒ‡é’ˆå½¢å¼æˆ–ä»¥å‘é‡å½¢å¼æ¥æ”¶æ•°æ®ï¼šé€šé“æ•°ï¼Œé‡‡æ ·ç‡å’Œæ¯ä¸ªæ ·æœ¬çš„ä½æ•°ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼“å†²æ¶²äº§ç”Ÿ</font></font></h3><br>
<pre><code class="cpp hljs">ALuint buffer;<font></font>
alCall(alGenBuffers, <span class="hljs-number">1</span>, &amp;buffer);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¦‚æœæ‚¨æ›¾ç»åœ¨OpenGLä¸­ç”Ÿæˆçº¹ç†æ•°æ®ç¼“å†²åŒºï¼Œåˆ™å¯èƒ½çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ã€‚æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªç¼“å†²åŒºå¹¶å‡è£…å®ƒä»…å­˜åœ¨äºå£°å¡ä¸­ã€‚å®é™…ä¸Šï¼Œå®ƒå¾ˆå¯èƒ½å­˜å‚¨åœ¨æ™®é€šRAMä¸­ï¼Œä½†æ˜¯OpenALè§„èŒƒæŠ½è±¡äº†æ‰€æœ‰è¿™äº›æ“ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œè¯¥å€¼</font></font><code>ALuint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜¯</font><font style="vertical-align: inherit;">ç¼“å†²åŒº</font><font style="vertical-align: inherit;">çš„</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¥æŸ„</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚è¯·è®°ä½ï¼Œ</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼“å†²åŒº</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ¬è´¨ä¸Šæ˜¯å£°å¡å†…å­˜ä¸­çš„å£°éŸ³æ•°æ®ã€‚æˆ‘ä»¬ä¸å†</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç›´æ¥è®¿é—®</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤æ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬ä»ç¨‹åºï¼ˆä»å¸¸è§„RAMï¼‰ä¸­</font><em><font style="vertical-align: inherit;">è·å–</font></em><font style="vertical-align: inherit;">äº†æ•°æ®å¹¶å°†å…¶ç§»è‡³å£°å¡/èŠ¯ç‰‡ç­‰ã€‚ OpenGLçš„å·¥ä½œåŸç†ç±»ä¼¼ï¼Œå°†çº¹ç†æ•°æ®ä»RAMç§»åˆ°VRAMã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™ä¸ª</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æè¿°ç¬¦</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº§ç”Ÿ</font></font><code>alGenBuffers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å®ƒæœ‰å‡ ä¸ªå¯èƒ½çš„é”™è¯¯å€¼ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯</font></font><code>AL_OUT_OF_MEMORY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸å†å¯ä»¥å‘å£°å¡æ·»åŠ å£°éŸ³æ•°æ®ã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨å•ä¸ªç¼“å†²åŒºï¼Œ</font><font style="vertical-align: inherit;">åˆ™ä¸ä¼šå‡ºç°</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é”™è¯¯ï¼Œä½†æ˜¯å¦‚æœè¦</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»ºengineï¼Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ™éœ€è¦è€ƒè™‘æ­¤é”™è¯¯</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¡®å®šéŸ³é¢‘æ•°æ®çš„æ ¼å¼</font></font></h3><br>
<pre><code class="cpp hljs">ALenum format;<font></font>
<font></font>
<span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
    format = AL_FORMAT_MONO8;<font></font>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">1</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
    format = AL_FORMAT_MONO16;<font></font>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">8</span>)<font></font>
    format = AL_FORMAT_STEREO8;<font></font>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(channels == <span class="hljs-number">2</span> &amp;&amp; bitsPerSample == <span class="hljs-number">16</span>)<font></font>
    format = AL_FORMAT_STEREO16;<font></font>
<span class="hljs-keyword">else</span><font></font>
{<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cerr</span>
        &lt;&lt; <span class="hljs-string">"ERROR: unrecognised wave format: "</span>
        &lt;&lt; channels &lt;&lt; <span class="hljs-string">" channels, "</span>
        &lt;&lt; bitsPerSample &lt;&lt; <span class="hljs-string">" bps"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å£°éŸ³æ•°æ®çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼šæœ‰å¤šä¸ª</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é€šé“</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œ</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¯ä¸ªæ ·æœ¬</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éƒ½æœ‰ä¸€ä¸ª</font><em><font style="vertical-align: inherit;">ä½</font></em><font style="vertical-align: inherit;">å¤§å°</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æ•°æ®ç”±è®¸å¤š</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ·æœ¬</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»„æˆ</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†ç¡®å®š</font><font style="vertical-align: inherit;">éŸ³é¢‘æ•°æ®ä¸­</font><font style="vertical-align: inherit;">çš„</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ·æœ¬</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ•°é‡</font><font style="vertical-align: inherit;">ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">int_fast32_t</span> numberOfSamples = dataSize / (numberOfChannels * (bitsPerSample / <span class="hljs-number">8</span>));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»€ä¹ˆå¯ä»¥æ–¹ä¾¿åœ°è½¬æ¢ä¸ºè®¡ç®—</font><font style="vertical-align: inherit;">éŸ³é¢‘æ•°æ®</font><font style="vertical-align: inherit;">çš„</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒç»­æ—¶é—´</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> duration = numberOfSamples / sampleRate;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†æ˜¯ï¼Œå°½ç®¡æˆ‘ä»¬æ—¢ä¸éœ€è¦çŸ¥é“</font></font><code>numberOfSamples</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä¹Ÿä¸</font><font style="vertical-align: inherit;">éœ€è¦çŸ¥é“</font></font><code>duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œä½†æ˜¯äº†è§£å¦‚ä½•ä½¿ç”¨æ‰€æœ‰è¿™äº›ä¿¡æ¯å¾ˆé‡è¦ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿”å›</font></font><code>format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-æˆ‘ä»¬éœ€è¦å‘Šè¯‰OpenALéŸ³é¢‘æ•°æ®æ ¼å¼ã€‚è¿™çœ‹èµ·æ¥å¾ˆæ˜æ˜¾ï¼Œå¯¹å§ï¼Ÿç±»ä¼¼äºå¡«å……OpenGLçº¹ç†ç¼“å†²åŒºçš„æ–¹å¼ï¼Œå³æ•°æ®æ˜¯æŒ‰BGRAåºåˆ—å¹¶ç”±8ä½å€¼ç»„æˆçš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨OpenALä¸­æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸ºäº†å‘Šè¯‰OpenALå¦‚ä½•è§£é‡Šæˆ‘ä»¬ç¨åå°†ä¼ é€’çš„æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ•°æ®æ ¼å¼ã€‚åœ¨</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ ¼å¼ä¸‹</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒæ„å‘³ç€OpenALå¯ä»¥ç†è§£ã€‚åªæœ‰å››ç§å¯èƒ½çš„å«ä¹‰ã€‚å£°é“æ•°é‡æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼šä¸€ä¸ªä»£è¡¨å•å£°é“ï¼Œä¸¤ä¸ªä»£è¡¨ç«‹ä½“å£°ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é™¤äº†é€šé“æ•°ï¼Œæˆ‘ä»¬è¿˜æœ‰æ¯ä¸ªæ ·æœ¬çš„ä½æ•°ã€‚</font><font style="vertical-align: inherit;">å®ƒç­‰äºæˆ–</font></font><code>8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><code>16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œæœ¬è´¨ä¸Šæ˜¯å£°éŸ³è´¨é‡ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å› æ­¤ï¼Œä½¿ç”¨æ³¢æµªè´Ÿè½½åŠŸèƒ½å·²å‘ŠçŸ¥æˆ‘ä»¬çš„æ¯ä¸ªæ ·æœ¬çš„é€šé“å’Œæ¯”ç‰¹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šè¦</font></font><code>ALenum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨</font><font style="vertical-align: inherit;">å“ªä¸ª</font><font style="vertical-align: inherit;">å‚æ•°ä½œä¸ºå°†æ¥çš„å‚æ•°</font></font><code>format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¼“å†²æ¶²å¡«å……</font></font></h3><br>
<pre><code class="cpp hljs">alCall(alBufferData, buffer, format, soundData.data(), soundData.size(), sampleRate);<font></font>
soundData.clear(); <span class="hljs-comment">// erase the sound in RAM</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¿™æ ·ï¼Œä¸€åˆ‡éƒ½åº”è¯¥å¾ˆç®€å•ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬åŠ è½½åˆ°OpenALç¼“å†²åŒºï¼Œ</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æè¿°ç¬¦</font></font></em> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŒ‡å‘è¯¥ç¼“å†²åŒº</font></font><code>buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼›</font><font style="vertical-align: inherit;">ç”±ptræŒ‡å‘çš„æ•°æ®</font><font style="vertical-align: inherit;">çš„æŒ‡å®š</font></font><code>soundData.data()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¤§å°</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬è¿˜å°†é€šè¿‡å‚æ•°å°†è¿™äº›æ•°æ®çš„æ ¼å¼å‘ŠçŸ¥OpenAL </font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">
æœ€åï¼Œæˆ‘ä»¬ä»…åˆ é™¤æ³¢åŠ è½½ç¨‹åºæ¥æ”¶åˆ°çš„æ•°æ®ã€‚</font><font style="vertical-align: inherit;">ä¸ºä»€ä¹ˆï¼Ÿ</font><font style="vertical-align: inherit;">å› ä¸ºæˆ‘ä»¬å·²ç»å°†å®ƒä»¬å¤åˆ¶åˆ°äº†å£°å¡ã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬ä¸éœ€è¦å°†å®ƒä»¬å­˜å‚¨åœ¨ä¸¤ä¸ªåœ°æ–¹å¹¶èŠ±è´¹å®è´µçš„èµ„æºã€‚</font><font style="vertical-align: inherit;">å¦‚æœå£°å¡ä¸¢å¤±äº†æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€å†æ¬¡ä»ç£ç›˜ä¸‹è½½å®ƒï¼Œè€Œæ— éœ€å°†å…¶å¤åˆ¶åˆ°CPUæˆ–å…¶ä»–äººã€‚</font></font><code>size</code><font style="vertical-align: inherit;"></font><code>sampleRate</code><font style="vertical-align: inherit;"></font><code>format</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥æºè®¾å®š</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å›æƒ³ä¸€ä¸‹ï¼ŒOpenALæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾¦å¬å™¨</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒä¾¦å¬ä¸€ä¸ªæˆ–å¤šä¸ª</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æº</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘å‡ºçš„å£°éŸ³</font><font style="vertical-align: inherit;">ã€‚å¥½äº†ï¼Œç°åœ¨æ˜¯åˆ›å»ºå£°æºçš„æ—¶å€™äº†ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs">ALuint source;<font></font>
alCall(alGenSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
alCall(alSourcef, source, AL_PITCH, <span class="hljs-number">1</span>);<font></font>
alCall(alSourcef, source, AL_GAIN, <span class="hljs-number">1.0f</span>);<font></font>
alCall(alSource3f, source, AL_POSITION, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
alCall(alSource3f, source, AL_VELOCITY, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<font></font>
alCall(alSourcei, source, AL_LOOPING, AL_FALSE);<font></font>
alCall(alSourcei, source, AL_BUFFER, buffer);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è€å®è¯´ï¼Œç”±äºè¿™äº›é»˜è®¤å€¼éå¸¸é€‚åˆæˆ‘ä»¬ï¼Œå› æ­¤æ— éœ€è®¾ç½®å…¶ä¸­ä¸€äº›å‚æ•°ã€‚ä½†è¿™å‘æˆ‘ä»¬å±•ç¤ºäº†æ‚¨å¯ä»¥å°è¯•å¹¶æŸ¥çœ‹å…¶å·¥ä½œæ–¹å¼çš„æŸäº›æ–¹é¢ï¼ˆæ‚¨ç”šè‡³å¯ä»¥ç‹¡çŒ¾åœ°é‡‡å–è¡ŒåŠ¨ï¼Œå¹¶éšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹å˜å®ƒä»¬ï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘ä»¬ç”Ÿæˆæºä»£ç -è¯·è®°ä½ï¼Œè¿™ä¹Ÿæ˜¯</font><font style="vertical-align: inherit;">OpenAL APIå†…éƒ¨å†…å®¹çš„</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¥æŸ„</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚æˆ‘ä»¬å°†éŸ³è°ƒï¼ˆéŸ³è°ƒï¼‰è®¾ç½®ä¸ºä¸æ”¹å˜ï¼Œä½¿å¢ç›Šï¼ˆéŸ³é‡ï¼‰ç­‰äºéŸ³é¢‘æ•°æ®çš„åŸå§‹å€¼ï¼Œå¹¶é‡ç½®ä½ç½®å’Œé€Ÿåº¦ï¼›æˆ‘ä»¬</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ä¼šå¾ªç¯æ’­æ”¾</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å£°éŸ³ï¼Œå› ä¸ºå¦åˆ™æˆ‘ä»¬çš„ç¨‹åºå°†æ°¸è¿œä¸ä¼šç»“æŸï¼Œå¹¶æŒ‡ç¤ºç¼“å†²åŒºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
è¯·è®°ä½ï¼Œä¸åŒçš„æºå¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç¼“å†²åŒºã€‚</font><font style="vertical-align: inherit;">ä¾‹å¦‚ï¼Œä»ä¸åŒåœ°æ–¹å°„å‡»ç©å®¶çš„æ•Œäººå¯ä»¥æ’­æ”¾ç›¸åŒçš„å°„å‡»å£°éŸ³ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦å¤ªå¤šçš„å£°éŸ³æ•°æ®å‰¯æœ¬ï¼Œè€Œåªéœ€è¦åœ¨3Dç©ºé—´ä¸­çš„å‡ ä¸ªåœ°æ–¹å³å¯äº§ç”Ÿå£°éŸ³ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ’­æ”¾å£°éŸ³</font></font></h3><br>
<pre><code class="cpp hljs">alCall(alSourcePlay, source);<font></font>
<font></font>
ALint state = AL_PLAYING;<font></font>
<font></font>
<span class="hljs-keyword">while</span>(state == AL_PLAYING)<font></font>
{<font></font>
    alCall(alGetSourcei, source, AL_SOURCE_STATE, &amp;state);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¼€å§‹æ’­æ”¾æºä»£ç ã€‚</font><font style="vertical-align: inherit;">åªéœ€è‡´ç”µ</font></font><code>alSourcePlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå€¼æ¥å­˜å‚¨</font></font><code>AL_SOURCE_STATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æº</font><font style="vertical-align: inherit;">çš„å½“å‰çŠ¶æ€</font><font style="vertical-align: inherit;">å¹¶ä¸æ–­æ›´æ–°å®ƒã€‚</font><font style="vertical-align: inherit;">å½“å®ƒä¸å†ç›¸ç­‰æ—¶ï¼Œ</font></font><code>AL_PLAYING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ‘ä»¬å¯ä»¥ç»§ç»­ã€‚</font><font style="vertical-align: inherit;">æ‚¨å¯ä»¥å°†çŠ¶æ€æ›´æ”¹ä¸º</font></font><code>AL_STOPPED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“å®ƒå®Œæˆä»ç¼“å†²åŒºå‘å‡ºå£°éŸ³æ—¶ï¼ˆæˆ–å‘ç”Ÿé”™è¯¯æ—¶ï¼‰ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨è®¾ç½®loopingçš„å€¼</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå£°éŸ³å°†æ°¸è¿œæ’­æ”¾ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹æºç¼“å†²åŒºå¹¶æ’­æ”¾å¦ä¸€ç§å£°éŸ³ã€‚</font><font style="vertical-align: inherit;">æˆ–é‡æ’­ç›¸åŒçš„å£°éŸ³ç­‰ã€‚</font><font style="vertical-align: inherit;">åªéœ€è®¾ç½®ç¼“å†²åŒºï¼Œä½¿ç”¨</font></font><code>alSourcePlay</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®ƒï¼Œ</font></font><code>alSourceStop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¿…è¦æ—¶</font><font style="vertical-align: inherit;">ä½¿ç”¨</font><font style="vertical-align: inherit;">å®ƒ</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åœ¨ä»¥ä¸‹æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°è€ƒè™‘è¿™ä¸€ç‚¹ã€‚</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¸…æ´ç”¨å“</font></font></h3><br>
<pre><code class="cpp hljs">alCall(alDeleteSources, <span class="hljs-number">1</span>, &amp;source);<font></font>
alCall(alDeleteBuffers, <span class="hljs-number">1</span>, &amp;buffer);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç”±äºæˆ‘ä»¬åªæ’­æ”¾ä¸€æ¬¡éŸ³é¢‘æ•°æ®ç„¶åé€€å‡ºï¼Œå› æ­¤æˆ‘ä»¬å°†åˆ é™¤å…ˆå‰åˆ›å»ºçš„æºå’Œç¼“å†²åŒºã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…¶ä½™ä»£ç æ— éœ€è§£é‡Šå³å¯ç†è§£ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¥ä¸‹æ¥è¦å»å“ªé‡Œï¼Ÿ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
äº†è§£æœ¬æ–‡ä»‹ç»çš„æ‰€æœ‰å†…å®¹ä¹‹åï¼Œæ‚¨å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªå°æ¸¸æˆï¼</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å°è¯•åˆ›å»ºPong</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æˆ–</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å…¶ä»–ç»å…¸æ¸¸æˆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› ä¸ºä¸éœ€è¦å®ƒä»¬ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä½†è¦è®°ä½ï¼</font><font style="vertical-align: inherit;">è¿™äº›ç¼“å†²åŒºä»…é€‚ç”¨äºçŸ­å£°éŸ³ï¼Œæœ€æœ‰å¯èƒ½æŒç»­å‡ ç§’é’Ÿã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ‚¨éœ€è¦éŸ³ä¹æˆ–å£°éŸ³è¡¨æ¼”ï¼Œåˆ™éœ€è¦å°†éŸ³é¢‘æµä¼ è¾“åˆ°OpenALã€‚</font><font style="vertical-align: inherit;">æˆ‘ä»¬å°†åœ¨ä¸€ç³»åˆ—æ•™ç¨‹çš„ä»¥ä¸‹éƒ¨åˆ†ä¸­è®¨è®ºè¿™ä¸€ç‚¹ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN488730/index.html">ä¿„ç½—æ–¯å…³äºç‰©è”ç½‘ï¼Œæ™ºèƒ½åˆ¶é€ å’Œæ™ºèƒ½åŸå¸‚çš„æ–°æ ‡å‡†</a></li>
<li><a href="../zh-CN488732/index.html">æœ‰æ‰åçš„è¥¿è’™å…ˆç”Ÿï¼šç‹¬ç‰¹çš„èƒ½åŠ›å’Œ3Dæ‰“å°å¦‚ä½•æ”¹å˜ç”Ÿäº§æµç¨‹</a></li>
<li><a href="../zh-CN488736/index.html">è¿œç¨‹å·¥ä½œæ­£åœ¨è“¬å‹ƒå‘å±•</a></li>
<li><a href="../zh-CN488740/index.html">Simo Ahavaæä¾›çš„Googleè·Ÿè¸ªä»£ç ç®¡ç†å™¨çš„è‡ªå®šä¹‰HTMLè·Ÿè¸ªä»£ç æŒ‡å—</a></li>
<li><a href="../zh-CN488742/index.html">çœ‹åˆ°æ¶æ„äº†å—ï¼Ÿæˆ‘çœ‹ä¸åˆ°ï¼Œä½†å¥¹æ˜¯</a></li>
<li><a href="../zh-CN488748/index.html">ä½¿ç”¨Djangoåˆ›å»ºTodoåº”ç”¨ç¨‹åºã€‚ç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN488750/index.html">æé¾™æ¼«æ­¥ï¼š20ä¸–çºªçš„ä¸¤å°å¤§å‹è®¡ç®—æœº</a></li>
<li><a href="../zh-CN488752/index.html">Golang + Phaser3 = MMORPG-æˆ‘ä»¬ä¸ºæ— å°½çš„ä¸–ç•Œå¥ å®šäº†åŸºç¡€</a></li>
<li><a href="../zh-CN488754/index.html">ä¸€æ¬¡å…¨éƒ¨ï¼šè‡ªåŠ¨æ£€æŸ¥åŒ…è£…è¢‹å°ºå¯¸</a></li>
<li><a href="../zh-CN488756/index.html">å¦‚ä½•ä½¿ç”¨æ–°çš„googlesheets4åŒ…åœ¨Rä¸­ä½¿ç”¨Google Sheets APIï¼ˆGoogle Sheets API v4ï¼‰</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>