<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍💻 🆔 📱 この記事には水が多すぎます。 🧑🏿‍🤝‍🧑🏽 🙆🏾 🎪</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="「私たちは新しいゲームの開発を始めており、冷たい水が必要です。あなたはこれができますか？ "
 
 
 -私に尋ねました。「もちろん、問題ありません。もちろんできます。「私は答えましたが、私の声は危険に震えました。「Unityについても？」-そして、多くの作業が先に進んでいることが明らかになりました...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>この記事には水が多すぎます。</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451604/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「私たちは新しいゲームの開発を始めており、冷たい水が必要です。</font><font style="vertical-align: inherit;">あなたはこれができますか？ "</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/iilqtDkeIBE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-私に尋ねました。</font><font style="vertical-align: inherit;">「もちろん、問題ありません。</font><font style="vertical-align: inherit;">もちろんできます。「私は答えましたが、私の声は危険に震えました。</font><font style="vertical-align: inherit;">「Unityについても？」-そして、多くの作業が先に進んでいることが明らかになりました。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから、水。そのときまで、C＃とまったく同じようにUnityを見ていなかったので、知っているツールであるC ++とDX9でプロトタイプを作成することにしました。そのときに私が知っていて、実際に練習できたのは、サーフェスを形成するための法線のスクロールテクスチャと、それに基づくプリミティブディスプレイスメントマッピングでした。すぐに絶対にすべてを変える必要がありました。水面のリアルなアニメーション形状。複雑な（強く）シェーディング。泡の生成。カメラに取り付けられたLODシステム。私はインターネットでこのすべてを行う方法を探し始めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、最初のポイントは、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Jerry Tessendorf </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のSimulating Ocean Waterの</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理解でした</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一連の厄介な式を備えたアカデミックページャーは、私にあまり与えられなかったので、数回読んでもほとんど理解できませんでした。</font><font style="vertical-align: inherit;">一般的な原則は明らかでした。各フレームの高さマップは、高速フーリエ変換を使用して生成されます。これは、時間の関数として、形状を滑らかに変化させて現実的な水面を形成します。</font><font style="vertical-align: inherit;">しかし、私はどのように、または何を数えるべきか知りませんでした。</font><font style="vertical-align: inherit;">D3D9のシェーダーでFFTを計算する知恵をゆっくりと掘り下げ、インターネットの荒野で1時間見つけようとしたが、（残念ながら）役に立たなかった記事のソースコードは本当に役に立ちました。</font><font style="vertical-align: inherit;">最初の結果が得られました（核戦争として怖い）：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/tdfwF1R81O4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の成功は喜ばしく、Unityへの水の転送はその完了とともに始まりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
海戦でのゲームでは、水に関するいくつかの要件が提案されました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアルな表情。</font><font style="vertical-align: inherit;">近い角度と離れた角度、動的な泡、散乱などのように美しい。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまな気象条件のサポート：穏やか、嵐、中間条件。</font><font style="vertical-align: inherit;">時刻を変更します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シミュレートされた表面、浮遊物体上での船の浮力の物理学。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゲームはマルチプレイヤーなので、水は戦闘のすべての参加者にとって同じでなければなりません。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表面描画：ボレーコアの飛行の描画された領域、コアへの進入から水中への泡。 </font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジオメトリ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
観察者が動くと離散的に再構築される、カメラを中心とする四分木状の構造を構築することが決定されました。</font><font style="vertical-align: inherit;">なぜ離散的ですか？</font><font style="vertical-align: inherit;">カメラでメッシュをスムーズに移動するか、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">リアルタイムウォーターレンダリングの</font></a><font style="vertical-align: inherit;">ように画面空間</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">の再投影を</font></a><font style="vertical-align: inherit;">使用する場合</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-投影グリッドの概念の導入</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その後、ジオメトリグリッドの解像度が不十分なために長期計画では、波高のマップをサンプリングすると、ポリゴンが上下に「ジャンプ」します。これは非常に印象的です。画像が波打つ。これを克服するには、水メッシュポリゴンの解像度を大幅に上げるか、ジオメトリを長距離にわたって「平坦化」するか、ポリゴンを構築して移動して、これらのシフトが見えないようにする必要があります。私たちの水は進歩的です（へへ）と私は3番目のパスを選択しました。同様の手法（特に、ゲームで地形を作成した人なら誰でも知っている）と同様に、詳細レベルの遷移の境界にあるT字型接合を取り除く必要があります。この問題を解決するために、最初に、与えられたテッセレーションパラメータを持つ3種類のクワッドが計算されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/al/df/nw/aldfnwtnd2iihq2np9juxe5lvjm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のタイプは、より低い詳細への移行ではないクワッド用です。</font><font style="vertical-align: inherit;">どちらの側も頂点の数が2分の1に減少していません。</font><font style="vertical-align: inherit;">2番目のタイプは境界用ですが、四角形ではありません。</font><font style="vertical-align: inherit;">3番目のタイプは、角度境界クワッドです。</font><font style="vertical-align: inherit;">最終的な水メッシュは、これらの3種類のメッシュを回転およびスケーリングすることによって作成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、LOD水位の色が異なるレンダリングがどのように見えるかです。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/JycUZlod3xs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のフレームは、2つの異なる詳細レベルの接続を示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレームとしてのビデオは、クワッドで満たされています。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VldNrYKLb0w" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはずっと前のことでした（そして、本当ではありません）。</font><font style="vertical-align: inherit;">GPUで直接、より最適かつ柔軟に直接実行できるようになりました（GPU上のGPU Pro 5. Quadtrees）。</font><font style="vertical-align: inherit;">そして、それは1回の描画呼び出しで描画され、テッセレーションは詳細を上げることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、プロジェクトはD3D11に移行しましたが、海洋レンダリングのこの部分のアップグレードには手が届きませんでした。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">波形生成</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これには、高速フーリエ変換が必要です。</font><font style="vertical-align: inherit;">ウェーブテクスチャの選択された（必要な）解像度（ここでは、どのデータがそこに格納されるかを説明します）について、アーティストが設定したパラメーター（力、風向、波の風向への依存度など）を使用して初期データを準備します。</font><font style="vertical-align: inherit;">これはすべて、いわゆる数式に入力する必要があります。</font><font style="vertical-align: inherit;">フィリップススペクトル。</font><font style="vertical-align: inherit;">時間を考慮して、フレームごとに受信した初期データを変更し、FFTを実行します。</font><font style="vertical-align: inherit;">出力では、フラットメッシュの頂点のオフセットを含むすべての方向のテクスチャタイリングを取得します。</font><font style="vertical-align: inherit;">ハイトマップだけではないのはなぜですか？</font><font style="vertical-align: inherit;">高さのオフセットのみを保存する場合、結果は非現実的な「泡立つ」質量になり、海のようにしか見えません。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2234r1xpuI8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3つの座標すべての変位を考慮すると、美しい「鋭い」現実的な波が生成されます。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/tFhKaV1u-AY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つのアニメーションテクスチャでは不十分です。</font><font style="vertical-align: inherit;">タイリングは表示されますが、近い将来には詳細が不十分になります。</font><font style="vertical-align: inherit;">ここで説明するアルゴリズムを使用して、1つではなく3つのFFT生成テクスチャを作成します。</font><font style="vertical-align: inherit;">最初は大きな波です。</font><font style="vertical-align: inherit;">基本的な波形を設定し、物理学に使用されます。</font><font style="vertical-align: inherit;">第二は中波です。</font><font style="vertical-align: inherit;">そして最後に、最小。</font><font style="vertical-align: inherit;">3つのFFTジェネレーター（4番目のオプションは最終的なミックスです）：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/gqxbAOS4sGM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レイヤーのパラメーターは互いに独立して設定され、結果のテクスチャはウォーターシェーダーで混合されて最終的な波形になります。</font><font style="vertical-align: inherit;">オフセットと並行して、各レイヤーの法線マップも生成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての戦闘参加者の水の「均一性」は、戦闘の開始時に海洋パラメータを同期させることによって保証されます。</font><font style="vertical-align: inherit;">この情報は、サーバーによって各クライアントに送信されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物理的浮力モデル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
美しい絵を描くだけでなく、船のリアルな動きも必要だったからです。また、ゲームに嵐の海（大きな波）が存在する必要があるという事実を考慮すると、解決する必要がある別のタスクは、生成された海の表面にあるオブジェクトの浮力を確保することでした。最初に、GPUをウェーブのテクスチャにリードバックしようとしました。しかし、海上戦闘のすべての物理はサーバー、海、または波形を設定するその最初のレイヤーで行う必要があることがすぐに明らかになったため、サーバーでも読み取る必要があります（そして、おそらく、高速および/または互換性のあるGPU）、GPU FFTジェネレーターの完全な機能コピーを、UnityのネイティブC ++プラグインとしてCPUに書き込むことが決定されました。私はFFTアルゴリズムを自分で実装せず、Intel Performance Primitives（IPP）ライブラリで使用しました。しかし、結果のバインドと後処理はすべて私が行い、その後SSEの最適化とフローの並列化を行いました。これには、各フレームのFFTのデータ配列の準備、および計算された値の波オフセットマップへの最終変換が含まれます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアルゴリズムには、水物理学の要件に基づいた興味深い機能がもう1つありました。必要なのは、世界の特定のポイントで波高をすばやく取得するための関数でした。これはオブジェクトの浮力を構築するための基礎であるため、これは論理的です。しかし、FFTプロセッサの出力では、高さマップではなくオフセットマップが得られるため、テクスチャからの通常の選択では、必要に応じて波の高さが得られませんでした。簡単にするために、2Dオプションを検討します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u6/ec/pe/u6ecpek-vcazrjpgh4ygxwhon2g.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
波を形成するために、テクセル（垂直線で示されるテクスチャ要素）には、フラットメッシュ（青い点）の頂点の最終位置（矢印の先端）の方向のオフセットを定義するベクトル（矢印）が含まれています。このデータを取得して、関心のあるポイントで水の高さを抽出しようとするとします。たとえば、hBでの高さを知る必要があります。テクセルベクトルtBを取得すると、hCの近くのポイントへのオフセットが得られます。これは、必要なものとは大きく異なる場合があります。この問題を解決するには、2つのオプションがあります。高さの要求ごとに、隣接するテクセルのセットをチェックして、目的の位置へのオフセットがあるテクセルを見つけます。この例では、最も近いオフセットを含むものとしてテクセルtAを見つけます。しかし、このアプローチは迅速に呼び出すことはできません。テクセル半径をスキャンすると、どのサイズ（および嵐の海や穏やかな、変位は大きく異なる場合があります）長い時間がかかる場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のオプション-オフセットマップを計算した後、散乱アプローチを使用して高さマップに変換します。これは、各オフセットベクトルについて、シフトするポイントに設定する波の高さを書き込むことを意味します。これは個別のデータ配列になり、関心のあるポイントの高さを取得するために使用されます。この図を使用すると、セルtBには、ベクトルtA→hBから取得した高さhBが含まれます。もう1つの機能があります。セルtAには、移動するベクトルがないため、有効な値は含まれません。そのような「穴」を埋めるために、それらを隣接する値で埋めるためのパッセージが作成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ベクトル（赤-大変位、緑-小）を使用して変位を視覚化した場合の外観です。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/uBk8F55lR74" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残りは簡単です。条件付き喫水線の平面が船に設定されます。その上で、サンプルポイントの長方形グリッドが決定されます。これは、船の水から押し出す力の適用場所を定義します。次に、各ポイントについて、上記の水面高さマップを使用して水面下かどうかを確認します。ポイントが水面下にある場合、ポイントから水面までの距離でスケーリングされた、このポイントでのボディの物理的ハルまで垂直力を適用します。もし水上にいるなら、私たちは何もしません、重力は私たちのためにすべてをします。実際、式はもう少し複雑です（すべてが船の動作の微調整用です）が、基本的な原則はこれです。下の浮力視覚化ビデオでは、青い立方体がサンプルの場所であり、それらから下の線は水から押し出す力の大きさです。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/mwNRIKbRdpQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サーバーの実装には、別の興味深い最適化ポイントがあります。同じ気象条件（同じFFTシミュレータパラメータ）を通過する場合、異なる戦闘インスタンスに対して異なる水をシミュレートする必要はありません。したがって、論理的な決定は、シミュレーターのプールを作成することでした。これに対して、戦闘ユニットは、指定されたパラメーターでシミュレートされた水を得るための要求を満たします。パラメータが複数のインスタンスで同じである場合、同じ水がそれらに戻ります。これはMemor Mapped File APIを使用して実装されます。 FFTシミュレーターが作成されると、必要なブロックの記述子をエクスポートすることにより、FFTシミュレーターはそのデータにアクセスできます。サーバーインスタンスは、実際のシミュレータを起動する代わりに、これらの記述子によって開かれたデータを単に提供する「ダミー」を起動します。この機能に関連するいくつかの面白いバグがありました。参照カウントエラーのため、シミュレータは破棄されましたが、メモリマップファイルは、少なくとも1つのハンドルが開いている間は生きています。データの更新が停止し（シミュレーターがない）、水が「停止」しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クライアント側では、ウェーブに当たるコアの数を計算し、パーティクルシステムとフォームシステムを再生するために、波形に関する情報が必要です。</font><font style="vertical-align: inherit;">ダメージはサーバー上で計算され、コアが水に入ったかどうかも正確に判断する必要があります（特に嵐の場合、波は船を閉じる可能性があります）。</font><font style="vertical-align: inherit;">ここでは、パララックスマッピングまたはSSAO効果で行われるように、アナロジーによるハイトマップトレースを行う必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シェーディング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原則として、他の場所と同じように。反射、屈折、表面下散乱は、底の深さを考慮し、フレネル効果を考慮し、鏡面反射光を考慮して巧みに練られています。太陽の位置に応じて、尾根の散乱を考慮します。泡は次のように生成されます：波の頂上に「泡のスポット」を作成し（高さをメトリックとして使用）、強度を下げながら、新しく作成したスポットを前のフレームのスポットに適用します。このように、波の頂上から泡のしみが尾の形でにじみ出ます。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/MyzFcwr641g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
取得した「スポット」テクスチャをマスクとして使用して、泡や汚れなどのテクスチャを混ぜ合わせます。波の表面には、泡のかなりリアルな動的パターンが得られます。</font><font style="vertical-align: inherit;">このマスクは、FFTレイヤーごとに作成されます（3つあります）。最終的なミックスでは、すべてがミックスされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上のビデオは泡マスクを視覚化しています。</font><font style="vertical-align: inherit;">1番目と2番目のレイヤー。</font><font style="vertical-align: inherit;">ジェネレータのパラメータを変更すると、結果がテクスチャに表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、少し不器用な嵐の海のビデオ。</font><font style="vertical-align: inherit;">ここでは、波形、ジェネレーター機能、泡をはっきりと見ることができます：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/MAPUbmV4BAA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">水汲み</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用画像：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/gz/1p/zzgz1pslmj1tg5si7o8mwnxqjye.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マーカー、核の拡大領域の視覚化。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コアが水に当たったところで泡を引く。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">船の泡状の航跡</font></font></li>
<li>   ,         .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかな基本ケースは、射影テクスチャリングです。実装されました。ただし、追加の要件があります。解像度が不足しているため、最も近いビューは石鹸であり（それを増やすことはできますが、無限に増やすことはできません）、これらの水面上の投影図が遠くに見えるようにしたいと思います。同じ問題はどこで解決されますか？そうです、影（シャドウマップ）です。彼女はどのように解決されますか？右、カスケード（並列分割）シャドウマップ。また、この技術を実用化し、私たちの仕事に適用します。カメラ錐台をN（通常3〜4）サブフラストに分割します。それぞれについて、水平面に説明用の長方形を作成します。このような各長方形について、正射投影行列を作成し、N個のそのようなオルソカメラのそれぞれについて、対象となるすべてのオブジェクトを描画します。このようなカメラはそれぞれ個別のテクスチャで描画し、次に海洋シェーダーで描画します。それらを1つの固体の投影画像に結合します。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/etG8tddmbmk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから私は海に旗の質感のある巨大な飛行機を置きました</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pd/uk/jr/pdukjrlnug2wu4debjrhlxbdxrc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ez/dw/nm/ezdwnm3u85dzpavd5iz8e2u9q2k.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これ</font><font style="vertical-align: inherit;">はスプリットに含まれているものです：</font><font style="vertical-align: inherit;">通常の写真に加えて、まったく同じ方法で泡の追加のマスクを描く必要があります（船の跡とコアがぶつかる場所の場合）、そして船の下の水を絞るためのマスク。</font><font style="vertical-align: inherit;">これはたくさんのカメラと多くの通路です。</font><font style="vertical-align: inherit;">最初は非常にブレーキがかかりましたが、D3D11に切り替えた後、ジオメトリックシェーダーでジオメトリの「伝播」を使用し、各コピーをSV_RenderTergetArrayIndexを介して個別のレンダーターゲットに描画すると、この効果を大幅に加速することができました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改善とアップグレード</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D3D11は多くの場面で非常にフリーハンドです。それとUnity 5に切り替えた後、計算シェーダーでFFTジェネレーターを作成しました。視覚的には何も変わっていませんが、少し速くなっています。別の本格的なカメラレンダーからの反射のテクスチャの誤算を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Screen Space Planar Reflections</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクノロジーに転送すると</font><font style="vertical-align: inherit;">、パフォーマンスが大幅に向上しました。上記の水面オブジェクトの最適化について書きましたが、手がメッシュをQuadtree GPUに転送できませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、より最適かつ簡単に実行できます。たとえば、CPUシミュレーターで庭をフェンスせずに、WARP（ソフトウェア）d3dデバイスを備えたサーバーでGPUオプションを実行するだけです。そこにあるデータ配列はそれほど大きくありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まあ、一般的には、どういうわけか。</font><font style="vertical-align: inherit;">開発が始まった当時は、すべてモダンでクールでした。</font><font style="vertical-align: inherit;">今ではすでに古くなっています。</font><font style="vertical-align: inherit;">githubに似た類似物である</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があっても、利用可能な資料は他にもあり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">海があるほとんどのゲームは同様のアプローチを使用します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja451594/index.html">PHPロシア2019レポートガイド</a></li>
<li><a href="../ja451596/index.html">灰色枢機卿.NET-ジョンギャロウェイ</a></li>
<li><a href="../ja451598/index.html">ユニットフェアリーフェアリーフェアリー：DSL in C＃</a></li>
<li><a href="../ja451600/index.html">アメリカで仕事を探すときにカバーレターを書く方法：7つのヒント</a></li>
<li><a href="../ja451602/index.html">MITER ATT＆CKを勉強しています。モバイルマトリックス：デバイスアクセス。パート1</a></li>
<li><a href="../ja451606/index.html">インターネットの歴史：崩壊、パート2</a></li>
<li><a href="../ja451610/index.html">セキュリティウィーク20：Firefox拡張機能を無効にする</a></li>
<li><a href="../ja451614/index.html">「私たちがロシアで話し合っていることは、西洋でも同様です」：デニス・ネクリドフへのインタビュー</a></li>
<li><a href="../ja451618/index.html">CampusInsight：インフラストラクチャの監視からユーザーエクスペリエンスの分析まで</a></li>
<li><a href="../ja451620/index.html">Stravaヒートマップカードの自動認証</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>