<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯд╡ЁЯП╗ ЁЯЖТ ЁЯзТЁЯП╗ рдПрдХ рдЫрджреНрдо 3 рдбреА рд░реЗрд╕рд┐рдВрдЧ рдЧреЗрдо рдмрдирд╛рдирд╛: рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдФрд░ рдЦреЗрд▓ рдХреЛ рдЦрддреНрдо рдХрд░рдирд╛ ЁЯМТ ЁЯСйЁЯП╛тАНЁЯФз ЁЯСиЁЯП╗тАНЁЯОи</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рднрд╛рдЧ 3. рдкрд╣рд╛рдбрд╝рд┐рдпрд╛рдБ
 
 рдкрд┐рдЫрд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдордиреЗ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЫрджреНрдо рддреНрд░рд┐-рдЖрдпрд╛рдореА рд░реЗрд╕рд┐рдВрдЧ рдЧреЗрдо рдмрдирд╛рдпрд╛ , рдЬрд┐рд╕рдореЗрдВ рд╕реАрдзреА рд╕рдбрд╝рдХреЛрдВ рдФрд░ рдШрдЯрддрд╛ рдХреЛ рд╕рд╛рдХрд╛рд░ рдХрд┐рдпрд╛ред 
 
 рдЗрд╕ рдмрд╛рд░ рд╣рдо рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>рдПрдХ рдЫрджреНрдо 3 рдбреА рд░реЗрд╕рд┐рдВрдЧ рдЧреЗрдо рдмрдирд╛рдирд╛: рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдФрд░ рдЦреЗрд▓ рдХреЛ рдЦрддреНрдо рдХрд░рдирд╛</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/499442/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднрд╛рдЧ 3. рдкрд╣рд╛рдбрд╝рд┐рдпрд╛рдБ</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/892/231/4e8/8922314e8acebdd3ae14fba511d17294.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд┐рдЫрд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдордиреЗ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЫрджреНрдо рддреНрд░рд┐-рдЖрдпрд╛рдореА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░реЗрд╕рд┐рдВрдЧ рдЧреЗрдо рдмрдирд╛рдпрд╛</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬрд┐рд╕рдореЗрдВ рд╕реАрдзреА рд╕рдбрд╝рдХреЛрдВ рдФрд░ рдШрдЯрддрд╛ рдХреЛ рд╕рд╛рдХрд╛рд░ рдХрд┐рдпрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рдмрд╛рд░ рд╣рдо рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреА рджреЗрдЦрднрд╛рд▓ рдХрд░реЗрдВрдЧреЗ; </font><font style="vertical-align: inherit;">рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдШреБрдорд╛рд╡рджрд╛рд░ рд╕рдбрд╝рдХреЗрдВ рдмрдирд╛рдиреЗ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдпрд╣ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реЛрдЧрд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд╣рд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдордиреЗ рддреНрд░рд┐-рдЖрдпрд╛рдореА рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рдкреНрд░рдХреНрд╖реЗрдкрдг рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рддреНрд░рд┐рднреБрдЬреЛрдВ рдХреЗ рдирд┐рдпрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/949/0ab/47b/9490ab47bb570b61218e46e5913c18bb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... рдЬреЛ рд╣рдореЗрдВ 2 рдбреА рд╕реНрдХреНрд░реАрди рдХреЗ рд╕рдордиреНрд╡рдп рдореЗрдВ 3 рдбреА рджреБрдирд┐рдпрд╛ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдкреЗрд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдореАрдХрд░рдгреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреЗрддреГрддреНрд╡ рдХрд░рддрд╛ рдерд╛ред</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/edb/246/e18/edb246e187e7fe0eb027b53c58790c34.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... рд▓реЗрдХрд┐рди рддрдм рд╕реЗ рд╣рдордиреЗ рдХреЗрд╡рд▓ рд╕реАрдзреА рд╕рдбрд╝рдХреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛, рджреБрдирд┐рдпрд╛ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЛ рдХреЗрд╡рд▓ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдШрдЯрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА </font><font style="vertical-align: inherit;">, рдХреНрдпреЛрдВрдХрд┐ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рджреЛрдиреЛрдВ </font><font style="vertical-align: inherit;">рд╢реВрдиреНрдп рдХреЗ рдмрд░рд╛рдмрд░ рдереЗред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╣рдореЗрдВ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕реВрдЯ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ рдХрд┐ рд╡реЗ рд╕рдбрд╝рдХ рд╕реЗрдЧрдореЗрдВрдЯ рдХреЛ рдЧреИрд░-рдСрдиреЗрд╕реНрдЯреЛ рд╕рдордиреНрд╡рдп </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y рджреЗрдВ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдореМрдЬреВрджрд╛ рдлрд╝рдВрдХреНрд╢рди </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╛рджреБрдИ рд░реВрдк рд╕реЗ рдХрд╛рдо </font><font style="vertical-align: inherit;">рдХрд░реЗрдЧрд╛ </font><font style="vertical-align: inherit;">ред</font></font><a name="habracut"></a><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ede/dc6/295/ededc629516e6f0d2c7f1ca6b111e17d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рдБ, рдпрд╣ рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред </font><font style="vertical-align: inherit;">рдмрд╕ рдкреНрд░рддреНрдпреЗрдХ рд╕рдбрд╝рдХ рдЦрдВрдб рдХреЗ рд╡рд┐рд╢реНрд╡ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рд▓рд┐рдП </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдШрдЯрдХ рдЬреЛрдбрд╝реЗрдВ </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдбрд╝рдХ рдЬреНрдпрд╛рдорд┐рддрд┐ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдореМрдЬреВрджрд╛ рдкрджреНрдзрддрд┐ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВрдЧреЗ, </font></font><code>addSegment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд╛рдХрд┐ рдЗрд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдлрд╝рдВрдХреНрд╢рди </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P2.world.y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдФрд░ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p1.world.y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд┐рдЫрд▓реЗ рдЕрдиреБрднрд╛рдЧ рдХреЗ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P2.world.y рд╕реЗ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдореЗрд▓ </font><strong><font style="vertical-align: inherit;">рдЦрд╛ рд╕рдХреЗ</font></strong><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSegment</span>(<span class="hljs-params">curve, y</span>) </span>{
  <span class="hljs-keyword">var</span> n = segments.length;<font></font>
  segments.push({<font></font>
     <span class="hljs-attr">index</span>: n,
        <span class="hljs-attr">p1</span>: { <span class="hljs-attr">world</span>: { <span class="hljs-attr">y</span>: lastY(), <span class="hljs-attr">z</span>:  n   *segmentLength }, <span class="hljs-attr">camera</span>: {}, <span class="hljs-attr">screen</span>: {} },
        <span class="hljs-attr">p2</span>: { <span class="hljs-attr">world</span>: { <span class="hljs-attr">y</span>: y,       <span class="hljs-attr">z</span>: (n+<span class="hljs-number">1</span>)*segmentLength }, <span class="hljs-attr">camera</span>: {}, <span class="hljs-attr">screen</span>: {} },
     <span class="hljs-attr">curve</span>: curve,
     <span class="hljs-attr">color</span>: <span class="hljs-built_in">Math</span>.floor(n/rumbleLength)%<span class="hljs-number">2</span> ? COLORS.DARK : COLORS.LIGHT<font></font>
  });<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lastY</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> (segments.length == <span class="hljs-number">0</span>) ? <span class="hljs-number">0</span> : segments[segments.length<span class="hljs-number">-1</span>].p2.world.y;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХрдо ( </font></font><code>LOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), рдордзреНрдпрдо ( </font></font><code>MEDIUM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдФрд░ рдЙрдЪреНрдЪ ( </font></font><code>HIGH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ </font><font style="vertical-align: inherit;">рдХреЛ рдирд┐рд░реВрдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдерд┐рд░рд╛рдВрдХ рдЬреЛрдбрд╝реЗрдВ </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> ROAD = {
  <span class="hljs-attr">LENGTH</span>: { <span class="hljs-attr">NONE</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">SHORT</span>:  <span class="hljs-number">25</span>, <span class="hljs-attr">MEDIUM</span>:  <span class="hljs-number">50</span>, <span class="hljs-attr">LONG</span>:  <span class="hljs-number">100</span> },
  <span class="hljs-attr">HILL</span>:   { <span class="hljs-attr">NONE</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">LOW</span>:    <span class="hljs-number">20</span>, <span class="hljs-attr">MEDIUM</span>:  <span class="hljs-number">40</span>, <span class="hljs-attr">HIGH</span>:   <span class="hljs-number">60</span> },
  <span class="hljs-attr">CURVE</span>:  { <span class="hljs-attr">NONE</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">EASY</span>:    <span class="hljs-number">2</span>, <span class="hljs-attr">MEDIUM</span>:   <span class="hljs-number">4</span>, <span class="hljs-attr">HARD</span>:    <span class="hljs-number">6</span> }<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдореМрдЬреВрджрд╛ рдкрджреНрдзрддрд┐ рдХреЛ рдмрджрд▓реЗрдВ </font></font><code>addRoad()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддрд╛рдХрд┐ рдпрд╣ рддрд░реНрдХ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рдИ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░рд╛рдкреНрдд рдХрд░реЗ </font><font style="vertical-align: inherit;">, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд╣рд╛рдбрд╝реА рд╕реЗ рдХреНрд░рдорд┐рдХ рдЪрдврд╝рд╛рдИ рдФрд░ рд╡рдВрд╢ рдХреЗ рд▓рд┐рдП рдЪрд┐рдХрдирд╛рдИ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addRoad</span>(<span class="hljs-params">enter, hold, leave, curve, y</span>) </span>{
  <span class="hljs-keyword">var</span> startY   = lastY();
  <span class="hljs-keyword">var</span> endY     = startY + (Util.toInt(y, <span class="hljs-number">0</span>) * segmentLength);
  <span class="hljs-keyword">var</span> n, total = enter + hold + leave;
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; enter ; n++)<font></font>
    addSegment(Util.easeIn(<span class="hljs-number">0</span>, curve, n/enter), Util.easeInOut(startY, endY, n/total));
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; hold  ; n++)<font></font>
    addSegment(curve, Util.easeInOut(startY, endY, (enter+n)/total));<font></font>
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; leave ; n++)<font></font>
    addSegment(Util.easeInOut(curve, <span class="hljs-number">0</span>, n/leave), Util.easeInOut(startY, endY, (enter+hold+n)/total));<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдордиреЗ рднрд╛рдЧ 2 рдПрд╕ рдореЗрдВ рдЬреЛ рдХреБрдЫ рдХрд┐рдпрд╛, рдЙрд╕рдХреЗ рд╕рдорд╛рди </font></font><code>addSCurves()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд╣рдо рдЬреНрдпрд╛рдорд┐рддрд┐ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрд┐рд╕реА рднреА рддрд░реАрдХреЗ рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addLowRollingHills</span>(<span class="hljs-params">num, height</span>) </span>{<font></font>
  num    = num    || ROAD.LENGTH.SHORT;<font></font>
  height = height || ROAD.HILL.LOW;<font></font>
  addRoad(num, num, num,  <span class="hljs-number">0</span>,  height/<span class="hljs-number">2</span>);<font></font>
  addRoad(num, num, num,  <span class="hljs-number">0</span>, -height);<font></font>
  addRoad(num, num, num,  <span class="hljs-number">0</span>,  height);<font></font>
  addRoad(num, num, num,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>);<font></font>
  addRoad(num, num, num,  <span class="hljs-number">0</span>,  height/<span class="hljs-number">2</span>);<font></font>
  addRoad(num, num, num,  <span class="hljs-number">0</span>,  <span class="hljs-number">0</span>);<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрджреНрдпрддрди рд╡рд┐рдзрд┐ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рдЬрд╛ рд░рд╣реЗ рдЖрд░реНрдХреЗрдб рдЧреЗрдо рдореЗрдВ, рд╣рдо рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдЦрд┐рд▓рд╛рдбрд╝реА рдпрд╛ рдЦреЗрд▓ рдХреА рджреБрдирд┐рдпрд╛ рдХреЛ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░рддреА рд╣реИрдВ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рд╡рд┐рдзрд┐ рдореЗрдВ </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рд╡рд░реНрддрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд╛рдбрд╝реА рдкреНрд░рддрд┐рдкрд╛рджрди</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд┐рдзрд┐ рдХреЛ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднреА рдХрд┐рд╕реА рднреА рдмрджрд▓рд╛рд╡ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкреНрд░рдХреНрд╖реЗрдкрдг рд╕рдореАрдХрд░рдгреЛрдВ рдХреЛ рдореВрд▓ рд░реВрдк рд╕реЗ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛ рддрд╛рдХрд┐ рдЧреИрд░-рд╢реВрдиреНрдп </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рд╕рд╛рде рд╕рдбрд╝рдХ рдЦрдВрдбреЛрдВ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рдВрдмрди рд╕реНрдХреНрд░реЙрд▓рд┐рдВрдЧ рдкреГрд╖реНрдарднреВрдорд┐</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рднреА рд╕рдбрд╝рдХ рдЦрдВрдбреЛрдВ рдореЗрдВ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛ </font><font style="vertical-align: inherit;">, рдХреЗрд╡рд▓ рдкрд░рд┐рд╡рд░реНрддрди рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдкреГрд╖реНрдарднреВрдорд┐ рдХреА рдкрд░рддреЛрдВ рдХреЗ рдКрд░реНрдзреНрд╡рд╛рдзрд░ рд╡рд┐рд╕реНрдерд╛рдкрди рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реЛрдЧрд╛ (рдЬреИрд╕реЗ рд╡реЗ рдШрдЯрддрд╛ рдХреЗ рд╕рд╛рде рдХреНрд╖реИрддрд┐рдЬ рд░реВрдк рд╕реЗ рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВ)ред </font><font style="vertical-align: inherit;">рд╣рдо рдЗрд╕реЗ рд╣реЗрд▓реНрдкрд░ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдПрдХ рдЕрдиреНрдп рддрд░реНрдХ рдХреЗ рд╕рд╛рде рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>Render.background</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдмрд╕реЗ рд╕рд░рд▓ рддрдВрддреНрд░ рд╕реНрдерд┐рддрд┐ рдХреЗ рд╕рд╛рдкреЗрдХреНрд╖ рд╕рд╛рдорд╛рдиреНрдп рдкреГрд╖реНрдарднреВрдорд┐ рдХрд╛ рд╡рд┐рд╕реНрдерд╛рдкрди рд╣реЛрдЧрд╛ </font></font><code>playerY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдЬрд┐рд╕реЗ </font><font style="vertical-align: inherit;">рд╡рд░реНрддрдорд╛рди </font><font style="vertical-align: inherit;">рд╕реНрдерд┐рддрд┐ </font><font style="vertical-align: inherit;">рд╕реЗрдЧрдореЗрдВрдЯ рдХреЗ </font><font style="vertical-align: inherit;">рд╡рд┐рд╢реНрд╡ рд╕реНрдерд┐рддрд┐рдпреЛрдВ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реЗ рдкреНрд░рдХреНрд╖реЗрдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </font><font style="vertical-align: inherit;">)ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╕рдмрд╕реЗ рдпрдерд╛рд░реНрдерд╡рд╛рджреА рд╡реНрдпрд╡рд╣рд╛рд░ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕рдВрднрд╡рддрдГ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рд╕рдбрд╝рдХ рдХреЗ рд╡рд░реНрддрдорд╛рди рдЦрдВрдб рдХреЗ рдврд▓рд╛рди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдкреНрд░рднрд╛рд╡ рд╕рд░рд▓ рд╣реИ рдФрд░ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдбреЗрдореЛ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреА рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд╖реНрдХрд░реНрд╖</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╕рдм рд╣реИ, рдЕрдм рд╣рдо рдЕрд╕рд▓реА рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдирдХрд▓реА рдШрдЯреЛрдВ рдХреЛ рдкреВрд░рдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/892/231/4e8/8922314e8acebdd3ae14fba511d17294.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЕрдиреБрдорд╛рдирд┐рдд 3 рдбреА рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рд╕рд╣рд┐рдд рдкрд╣рд▓реЗ рднрд╛рдЧ рдореЗрдВ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдХрд╛рдо, рдореИрдВрдиреЗ рдЖрдкрдХреЛ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд╣рд▓реЗ рдирд╣реАрдВ рдмрддрд╛рдпрд╛ рдерд╛ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд▓реЗрдЦ рдХреЗ рдЕрдВрддрд┐рдо рднрд╛рдЧ рдореЗрдВ рд╣рдо рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕, рд╕рд╛рде рд╣реА рд╕рдбрд╝рдХ рдХреЗ рдХрд┐рдирд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдкреЗрдбрд╝реЛрдВ рдФрд░ рд╣реЛрд░реНрдбрд┐рдВрдЧ рдХреЛ рдЬреЛрдбрд╝реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд╣рдо рдЕрдиреНрдп рдХрд╛рд░реЛрдВ рдХреЛ рднреА рдЬреЛрдбрд╝реЗрдВрдЧреЗ рдЬрд┐рдирдХреЗ рдЦрд┐рд▓рд╛рдл рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдХрд░рдирд╛, рдЯрдХрд░рд╛рд╡реЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдирд╛ рдФрд░ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ "рд╕рд░реНрдХрд▓ рд░рд┐рдХреЙрд░реНрдб" рдХреЛ рдареАрдХ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реЛрдЧрд╛ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рднрд╛рдЧ 4. рддреИрдпрд╛рд░ рд╕рдВрд╕реНрдХрд░рдг</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/103/563/0d1/1035630d19106de2f85edebb24d0421f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЗрд╕ рднрд╛рдЧ рдореЗрдВ рд╣рдо рдЬреЛрдбрд╝реЗрдВрдЧреЗ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд┐рд▓рдмреЛрд░реНрдб рдФрд░ рдкреЗрдбрд╝</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдиреНрдп рдХрд╛рд░реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯрдХрд░рд╛рд╡ рдХреА рдорд╛рдиреНрдпрддрд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реЛрдВ рдХреЗ рд░реБрдбрд┐рдореЗрдВрдЯрд░реА рдП.рдЖрдИ.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реИрдк рдЯрд╛рдЗрдорд░ рдФрд░ рд▓реИрдк рд░рд┐рдХреЙрд░реНрдб рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░рдлреЗрд╕</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... рдФрд░ рдпрд╣ рдЕрдВрддрдд: рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ "рдЧреЗрдо" рдХрд╣рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рдПрдХ рдкрд░реНрдпрд╛рдкреНрдд рд╕реНрддрд░ рдХреА рдЕрдиреНрддрд░рдХреНрд░рд┐рдпрд╛рд╢реАрд▓рддрд╛ рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдб рд╕рдВрд░рдЪрдирд╛ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ</font></font></h2><br>
<blockquote><em>     ,            /,         Javascript.</em></blockquote><br>
<blockquote><em>                .     () ,             ...</em></blockquote><br>
<blockquote><em>тАж      ,       ,           ,  ,         .</em></blockquote><br>
<h2></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f6f/111/acc/f6f111accbba448459e25c6fe761ff05.png"></div> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рднрд╛рдЧ 1 рдореЗрдВ, рдЦреЗрд▓ рдЪрдХреНрд░ рдХреА рд╢реБрд░реБрдЖрдд рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдордиреЗ рд╕рднреА рдХрд╛рд░реЛрдВ, рдкреЗрдбрд╝реЛрдВ рдФрд░ рд╣реЛрд░реНрдбрд┐рдВрдЧ рдореЗрдВ рдПрдХ рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╢реАрдЯ рдЕрдкрд▓реЛрдб рдХреАред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдк рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдХрд┐рд╕реА рднреА рдЫрд╡рд┐ рд╕рдВрдкрд╛рджрдХ рдореЗрдВ рдПрдХ рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╢реАрдЯ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЫрд╡рд┐рдпреЛрдВ рдХреЗ рднрдВрдбрд╛рд░рдг рдФрд░ рдПрдХ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЙрдкрдХрд░рдг рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреА рдЧрдгрдирд╛ рдХреЛ рд╕реМрдВрдкрдирд╛ рдмреЗрд╣рддрд░ рд╣реИред </font><font style="vertical-align: inherit;">рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╢реАрдЯ рдХреЛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░реВрдмреА рдЬреЗрдо рд╕реНрдкреНрд░рд╛рдЗрдЯ-рдлреИрдХреНрдЯреНрд░реА рдХреЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧ рд╕реЗ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рд░реЗрдХ рдХрд╛рд░реНрдп рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдХрд╛рд░реНрдп рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЫрд╡рд┐ рдлрд╝рд╛рдЗрд▓реЛрдВ рд╕реЗ рд╕рдВрдпреБрдХреНрдд рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╢реАрдЯ рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ x, y, w, h рдХреА рдЧрдгрдирд╛ рднреА рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рд╕реНрдерд┐рд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ </font></font><code>SPRITES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> SPRITES = {
  <span class="hljs-attr">PALM_TREE</span>:   { <span class="hljs-attr">x</span>:    <span class="hljs-number">5</span>, <span class="hljs-attr">y</span>:    <span class="hljs-number">5</span>, <span class="hljs-attr">w</span>:  <span class="hljs-number">215</span>, <span class="hljs-attr">h</span>:  <span class="hljs-number">540</span> },
  <span class="hljs-attr">BILLBOARD08</span>: { <span class="hljs-attr">x</span>:  <span class="hljs-number">230</span>, <span class="hljs-attr">y</span>:    <span class="hljs-number">5</span>, <span class="hljs-attr">w</span>:  <span class="hljs-number">385</span>, <span class="hljs-attr">h</span>:  <span class="hljs-number">265</span> },<font></font>
<font></font>
  <span class="hljs-comment">// ... etc</span><font></font>
<font></font>
  <span class="hljs-attr">CAR04</span>:       { <span class="hljs-attr">x</span>: <span class="hljs-number">1383</span>, <span class="hljs-attr">y</span>:  <span class="hljs-number">894</span>, <span class="hljs-attr">w</span>:   <span class="hljs-number">80</span>, <span class="hljs-attr">h</span>:   <span class="hljs-number">57</span> },
  <span class="hljs-attr">CAR01</span>:       { <span class="hljs-attr">x</span>: <span class="hljs-number">1205</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1018</span>, <span class="hljs-attr">w</span>:   <span class="hljs-number">80</span>, <span class="hljs-attr">h</span>:   <span class="hljs-number">56</span> },<font></font>
};</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реЛрд░реНрдбрд┐рдВрдЧ рдФрд░ рдкреЗрдбрд╝ рдЬреЛрдбрд╝рдирд╛</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдбрд╝рдХ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдЦрдВрдб рдореЗрдВ рдПрдХ рд╕рд░рдгреА рдЬреЛрдбрд╝реЗрдВ рдЬрд┐рд╕рдореЗрдВ рд╕рдбрд╝рдХ рдХреЗ рдХрд┐рдирд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╣реЛрдВрдЧреЗред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдкреНрд░рд╛рдЗрдЯ </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрдВ рд╕рдВрдЧреНрд░рд╣ рд╕реЗ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>SPRITES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд╕рд╛рде рдореЗрдВ рдПрдХ рдХреНрд╖реИрддрд┐рдЬ рдСрдлрд╕реЗрдЯ </font></font><code>offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬрд┐рд╕реЗ рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ -1 рд╕рдбрд╝рдХ рдХреЗ рдмрд╛рдПрдВ рдХрд┐рдирд╛рд░реЗ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ +1 рдХрд╛ рдЕрд░реНрде рд╣реИ рджрд╛рд╣рд┐рдиреЗ рдХрд┐рдирд╛рд░реЗ, рдЬреЛ рд╣рдореЗрдВ рдореВрд▓реНрдп рдкрд░ рдирд┐рд░реНрднрд░ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ </font></font><code>roadWidth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреБрдЫ рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЛ рдЬрд╛рдирдмреВрдЭрдХрд░ рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ, рджреВрд╕рд░реЛрдВ рдХреЛ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSegment</span>(<span class="hljs-params"></span>) </span>{<font></font>
  segments.push({<font></font>
    ...<font></font>
    sprites: [],<font></font>
    ...<font></font>
  });<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSprite</span>(<span class="hljs-params">n, sprite, offset</span>) </span>{<font></font>
  segments[n].sprites.push({ <span class="hljs-attr">source</span>: sprite, <span class="hljs-attr">offset</span>: offset });<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetSprites</span>(<span class="hljs-params"></span>) </span>{<font></font>
<font></font>
  addSprite(<span class="hljs-number">20</span>,  SPRITES.BILLBOARD07, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">40</span>,  SPRITES.BILLBOARD06, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">60</span>,  SPRITES.BILLBOARD08, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">80</span>,  SPRITES.BILLBOARD09, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">100</span>, SPRITES.BILLBOARD01, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">120</span>, SPRITES.BILLBOARD02, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">140</span>, SPRITES.BILLBOARD03, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">160</span>, SPRITES.BILLBOARD04, <span class="hljs-number">-1</span>);<font></font>
  addSprite(<span class="hljs-number">180</span>, SPRITES.BILLBOARD05, <span class="hljs-number">-1</span>);<font></font>
<font></font>
  addSprite(<span class="hljs-number">240</span>, SPRITES.BILLBOARD07, <span class="hljs-number">-1.2</span>);<font></font>
  addSprite(<span class="hljs-number">240</span>, SPRITES.BILLBOARD06,  <span class="hljs-number">1.2</span>);<font></font>
<font></font>
  <font></font>
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">250</span> ; n &lt; <span class="hljs-number">1000</span> ; n += <span class="hljs-number">5</span>) {<font></font>
    addSprite(n, SPRITES.COLUMN, <span class="hljs-number">1.1</span>);<font></font>
    addSprite(n + Util.randomInt(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>), SPRITES.TREE1, <span class="hljs-number">-1</span> - (<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">2</span>));<font></font>
    addSprite(n + Util.randomInt(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>), SPRITES.TREE2, <span class="hljs-number">-1</span> - (<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">2</span>));<font></font>
  }<font></font>
<font></font>
  ...<font></font>
}</code></pre><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЛрдЯ: рдпрджрд┐ рд╣рдо рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЧреЗрдо рдмрдирд╛ рд░рд╣реЗ рдереЗ, рддреЛ рд╣рдо рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдФрд░ рдШрдЯрддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдирдХреНрд╢рд╛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдбрд╝рдХ рд╕рдВрдкрд╛рджрдХ рдХреЛ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╕рд╛рде рд╣реА рд╕рдбрд╝рдХ рдХреЗ рд╕рд╛рде рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рддрдВрддреНрд░ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ ... рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╣рдо рдЗрд╕реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font></font><code>addSprite()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╢реАрдиреЗрдВ рдЬреЛрдбрд╝рдирд╛</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдбрд╝рдХ рдХреЗ рдХрд┐рдирд╛рд░реЛрдВ рдкрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдХрд╛рд░реЛрдВ рдХрд╛ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рдЬреЛрдбрд╝реЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">рдЬреЛ рд░рд╛рдЬрдорд╛рд░реНрдЧ рдкрд░ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛рд░реЛрдВ рдХреЗ </font><font style="vertical-align: inherit;">рдПрдХ рдЕрд▓рдЧ рд╕рдВрдЧреНрд░рд╣ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдкреНрд░рддреНрдпреЗрдХ рдЦрдВрдб рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░ рд▓реЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> cars      = [];  <span class="hljs-comment">// array of cars on the road</span>
<span class="hljs-keyword">var</span> totalCars = <span class="hljs-number">200</span>; <span class="hljs-comment">// total number of cars on the road</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addSegment</span>(<span class="hljs-params"></span>) </span>{<font></font>
  segments.push({<font></font>
    ...<font></font>
    cars: [], <span class="hljs-comment">// array of cars within this segment</span><font></font>
    ...<font></font>
  });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рджреЛ рдСрдЯреЛрдореЛрдмрд╛рдЗрд▓ рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХрд╛ рднрдВрдбрд╛рд░рдг рд╣рдореЗрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рдЪрд▓рдиреЗ-рдлрд┐рд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдХрд┐ рдПрдХ рддрд░реАрдХреЗ рд╕реЗ рд╕рднреА рдХрд╛рд░реЛрдВ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдЬрд╛рдПрдВ </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕реЗрдЧрдореЗрдВрдЯ рд╕реЗ рджреВрд╕рд░реЗ рд╕реНрдерд╛рди рдкрд░ рд▓реЗ рдЬрд╛рдПрдВ; </font><font style="vertical-align: inherit;">рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ, рдпрд╣ рд╣рдореЗрдВ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ рд╡рд╛рд▓реЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдкрд░ рдХреЗрд╡рд▓ рдорд╢реАрдиреЛрдВ </font><font style="vertical-align: inherit;">рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкреНрд░рддреНрдпреЗрдХ рдорд╢реАрди рдХреЛ рдПрдХ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдХреНрд╖реИрддрд┐рдЬ рдкрд╛рд░реА, z рд╕реНрдерд┐рддрд┐, рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╕реНрд░реЛрдд рдФрд░ рдЧрддрд┐ рджреА рдЬрд╛рддреА рд╣реИ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resetCars</span>(<span class="hljs-params"></span>) </span>{<font></font>
  cars = [];<font></font>
  <span class="hljs-keyword">var</span> n, car, segment, offset, z, sprite, speed;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span> ; n &lt; totalCars ; n++) {<font></font>
    offset = <span class="hljs-built_in">Math</span>.random() * Util.randomChoice([<span class="hljs-number">-0.8</span>, <span class="hljs-number">0.8</span>]);<font></font>
    z      = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * segments.length) * segmentLength;<font></font>
    sprite = Util.randomChoice(SPRITES.CARS);<font></font>
    speed  = maxSpeed/<span class="hljs-number">4</span> + <span class="hljs-built_in">Math</span>.random() * maxSpeed/(sprite == SPRITES.SEMI ? <span class="hljs-number">4</span> : <span class="hljs-number">2</span>);<font></font>
    car = { <span class="hljs-attr">offset</span>: offset, <span class="hljs-attr">z</span>: z, <span class="hljs-attr">sprite</span>: sprite, <span class="hljs-attr">speed</span>: speed };<font></font>
    segment = findSegment(car.z);<font></font>
    segment.cars.push(car);<font></font>
    cars.push(car);<font></font>
  }<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд╛рдбрд╝реА рдкреНрд░рддрд┐рдкрд╛рджрди (рд╡рд╛рдкрд╕реА)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдкрд┐рдЫрд▓реЗ рд╣рд┐рд╕реНрд╕реЛрдВ рдореЗрдВ, рдореИрдВрдиреЗ рд╕рдбрд╝рдХ рдХреЗ рд╕реЗрдЧрдореЗрдВрдЯ рдХреЛ рд░реЗрдВрдбрд░ рдХрд░рдиреЗ рдХреА рдмрд╛рдд рдХреА, рдЬрд┐рд╕рдореЗрдВ рдХрд░реНрд╡реНрд╕ рдФрд░ рд╣рд┐рд▓реНрд╕ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдирдореЗрдВ рдХреЛрдб рдХреА рдХреБрдЫ рд▓рд╛рдЗрдиреЗрдВ рдереАрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдореИрдВрдиреЗ рдирд╣реАрдВ рдорд╛рдирд╛ред рдЙрдиреНрд╣реЗрдВ </font></font><code>maxy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрди рдХреЗ рдиреАрдЪреЗ рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ </font><font style="vertical-align: inherit;">рдПрдХ рд╡реЗрд░рд┐рдПрдмрд▓ рдХреА рдЪрд┐рдВрддрд╛ рдереА </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рд╕реНрдХреНрд░реАрди рдХреЗ рдХрд┐рд╕ рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдерд╛, рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрдЧрдореЗрдВрдЯ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рддреЗ рд╕рдордп рдШрдЯрддреЗ рд╣реБрдП:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; drawDistance ; n++) {<font></font>
<font></font>
  ...<font></font>
<font></font>
  if ((segment.p1.camera.z &lt;= cameraDepth) || <span class="hljs-comment">// behind us</span>
      (segment.p2.screen.y &gt;= maxy))          <span class="hljs-comment">// clip by (already rendered) segment</span>
    <span class="hljs-keyword">continue</span>;<font></font>
<font></font>
  ...<font></font>
<font></font>
  maxy = segment.p2.screen.y;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╣рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рджрд╛рди рдХреА рдЧрдИ рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рдХрд╡рд░ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдлрд╕рд▓ рдЦрдВрдбреЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">рдХрд▓рд╛рдХрд╛рд░ рдХреЗ</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
рдкрд╛рд░рдВрдкрд░рд┐рдХ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдореЗрдВ,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд░реЗрдВрдбрд░рд┐рдВрдЧ рдЖрдо рддреМрд░ рдкрд░ рд╕рд╛рдордиреЗ рдХреА рдУрд░ рд╣реЛрддреА рд╣реИ, рдЬрдмрдХрд┐ рдХрд░реАрдм рд╕реЗрдЧрдореЗрдВрдЯ рджреВрд░ рдХреЗ рд▓реЛрдЧреЛрдВ рдХреЛ рдУрд╡рд░рд▓реИрдк рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╣рдо рдмрд╣реБрднреБрдЬ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдореЗрдВ рд╕рдордп рдирд╣реАрдВ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдЕрдВрддрддрдГ рдУрд╡рд░рд░рд╛рдЗрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдЗрд╕рд▓рд┐рдП рдЖрдЧреЗ рд╕реЗ рдкреАрдЫреЗ рдФрд░ рдлрд╕рд▓ рдХреЗ рджреВрд░ рдХреЗ рдЦрдВрдбреЛрдВ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ рдЙрдирдХреЗ рдЕрдиреБрдорд╛рдирд┐рдд рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдЫреЛрдЯреЗ рд╣реЛрдиреЗ рдкрд░ рдЦрдВрдбреЛрдВ рдХреЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреНрд░рджрд╛рди рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ </font></font><code>maxy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд┐рд▓рдмреЛрд░реНрдб, рдкреЗрдбрд╝реЛрдВ рдФрд░ рдХрд╛рд░реЛрдВ рдХрд╛ рдкреНрд░рддрд┐рдкрд╛рджрди</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╕рдбрд╝рдХ рдХреЗ рдЦрдВрдбреЛрдВ рдХреЗ рдЖрдЧреЗ рд╕реЗ рдкреАрдЫреЗ рддрдХ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдкреБрдирд░рд╛рд╡реГрддреНрдд рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЗ рдкреНрд░рддрд┐рдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдЕрдХреНрд╕рд░ рдПрдХ рджреВрд╕рд░реЗ рдХреЛ рдУрд╡рд░рд▓реИрдк рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдХрд▓рд╛рдХрд╛рд░ рдХреЗ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдЧрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╣рдорд╛рд░реЗ рддрд░реАрдХреЗ рдХреЛ рдЬрдЯрд┐рд▓ рдмрдирд╛рддрд╛ рд╣реИ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рд╣рдореЗрдВ рджреЛ рдЪрд░рдгреЛрдВ рдореЗрдВ рд╕рдбрд╝рдХ рдЦрдВрдбреЛрдВ рдХреЛ рдмрд╛рдпрдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░рддрд╛ рд╣реИ:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдбрд╝рдХ рдкреНрд░рддрд┐рдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдкреАрдЫреЗ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЗ рдкреНрд░рддрд┐рдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ</font></font></li>
</ol><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8db/7d3/347/8db7d3347ac49621e67b7bbe2028fc6e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдЕрддрд┐рд╡реНрдпрд╛рдкреА рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдореЗрдВ рдкрд╣рд╛рдбрд╝реА рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдХреНрд╖рд┐рддрд┐рдЬ рдХреЗ рдХрд╛рд░рдг рд╕реНрдкреНрд░рд╛рдЗрдЯ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдпрджрд┐ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХрд╛рдлреА рдЕрдзрд┐рдХ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдЗрд╕рдХреЗ рдКрдкрд░реА рд╣рд┐рд╕реНрд╕реЗ рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП, рднрд▓реЗ рд╣реА рд╡рд╣ рдЬрд┐рд╕ рдЦрдВрдб рдкрд░ рд╕реНрдерд┐рдд рд╣реИ рд╡рд╣ рдкрд╣рд╛рдбрд╝реА рдХреЗ рдкреАрдЫреЗ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЗрд╕рдХрд╛ рдкреНрд░рддрд┐рдкрд╛рджрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо </font><font style="vertical-align: inherit;">рдЪрд░рдг 1 рдореЗрдВ </font></font><code>maxy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдкрдВрдХреНрддрд┐ рдХреЗ рд░реВрдк </font><font style="vertical-align: inherit;">рдореЗрдВ </font><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдЦрдВрдб </font><font style="vertical-align: inherit;">рдХреЗ рдореВрд▓реНрдп рдХреЛ рдмрдЪрд╛рдХрд░ рдЕрдВрддрд┐рдо рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font></font><code>clip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдлрд┐рд░ рд╣рдо </font></font><code>clip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг 2 рдореЗрдВ </font><font style="vertical-align: inherit;">рд▓рд╛рдЗрди рдХреЗ рд╕рд╛рде рдЗрд╕ рдЦрдВрдб рдХреЗ рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреА рдХрдЯрд╛рдИ рдХрд░ рд╕рдХрддреЗ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣реИрдВред рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рдмрд╛рдХреА рддрд░реНрдХ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ </font><font style="vertical-align: inherit;">рд╕рдбрд╝рдХ рдЦрдВрдбреЛрдВ </font><font style="vertical-align: inherit;">рдХреЗ рдЧреБрдгрд╛рдВрдХ </font></font><code>scale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ </font></font><code>screen</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗ </font><font style="vertical-align: inherit;">рдЖрдзрд╛рд░ рдкрд░ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЛ рд╕реНрдХреЗрд▓ рдФрд░ рд╕реНрдХреЗрд▓ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдП </font><font style="vertical-align: inherit;">(рдЧрдгрдирд╛ рдХреА рдЧрдИ) рдЪрд░рдг 1), рдЬрд┐рд╕рдХреЗ рдХрд╛рд░рдг рд╡рд┐рдзрд┐ рдХреЗ рджреВрд╕рд░реЗ рдЪрд░рдг рдореЗрдВ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// back to front painters algorithm</span>
<span class="hljs-keyword">for</span>(n = (drawDistance<span class="hljs-number">-1</span>) ; n &gt; <span class="hljs-number">0</span> ; n--) {<font></font>
  segment = segments[(baseSegment.index + n) % segments.length];<font></font>
<font></font>
  <span class="hljs-comment">// render roadside sprites</span>
  <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span> ; i &lt; segment.sprites.length ; i++) {<font></font>
    sprite      = segment.sprites[i];<font></font>
    spriteScale = segment.p1.screen.scale;<font></font>
    spriteX     = segment.p1.screen.x + (spriteScale * sprite.offset * roadWidth * width/<span class="hljs-number">2</span>);<font></font>
    spriteY     = segment.p1.screen.y;<font></font>
    Render.sprite(ctx, width, height, resolution, roadWidth, sprites, sprite.source, spriteScale, spriteX, spriteY, (sprite.offset &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">-1</span> : <span class="hljs-number">0</span>), <span class="hljs-number">-1</span>, segment.clip);<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">// render other cars</span>
  <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span> ; i &lt; segment.cars.length ; i++) {<font></font>
    car         = segment.cars[i];<font></font>
    sprite      = car.sprite;<font></font>
    spriteScale = Util.interpolate(segment.p1.screen.scale, segment.p2.screen.scale, car.percent);<font></font>
    spriteX     = Util.interpolate(segment.p1.screen.x,     segment.p2.screen.x,     car.percent) + (spriteScale * car.offset * roadWidth * width/<span class="hljs-number">2</span>);<font></font>
    spriteY     = Util.interpolate(segment.p1.screen.y,     segment.p2.screen.y,     car.percent);<font></font>
    Render.sprite(ctx, width, height, resolution, roadWidth, sprites, car.sprite, spriteScale, spriteX, spriteY, <span class="hljs-number">-0.5</span>, <span class="hljs-number">-1</span>, segment.clip);<font></font>
  }<font></font>
<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд┐рд▓рдмреЛрд░реНрдб рдФрд░ рдкреЗрдбрд╝реЛрдВ рдХреЗ рд╕рд╛рде рдЯрдХрд░рд╛рд╡</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдм рдЬрдм рд╣рдо рд╕рдбрд╝рдХ рдХреЗ рдХрд┐рдирд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рд╡рд╕реНрддреБ рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЛ рдЬреЛрдбрд╝ рдФрд░ рд╕реМрдВрдк рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ рд╣рдореЗрдВ </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП рд╡рд┐рдзрд┐ рдХреЛ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ </font><font style="vertical-align: inherit;">рдХрд┐ рдХреНрдпрд╛ рдЦрд┐рд▓рд╛рдбрд╝реА рдиреЗ рдЕрдкрдиреЗ рд╡рд░реНрддрдорд╛рди рдЦрдВрдб рдореЗрдВ рдЗрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рднреА рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд┐рдпрд╛ рд╣реИ: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо </font></font><code>Util.overlap()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдпрддреЛрдВ рдХреЗ рдЪреМрд░рд╛рд╣реЗ рдХреА рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рдорд╛рдиреНрдпрддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП рдПрдХ рд╕рд╣рд╛рдпрдХ рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рдХрд╛ </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдПрдХ рдЪреМрд░рд╛рд╣реЗ рдХрд╛ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ, рддреЛ рд╣рдо рдХрд╛рд░ рдХреЛ рд░реЛрдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> ((playerX &lt; <span class="hljs-number">-1</span>) || (playerX &gt; <span class="hljs-number">1</span>)) {
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; playerSegment.sprites.length ; n++) {<font></font>
    sprite  = playerSegment.sprites[n];<font></font>
    spriteW = sprite.source.w * SPRITES.SCALE;<font></font>
    <span class="hljs-keyword">if</span> (Util.overlap(playerX, playerW, sprite.offset + spriteW/<span class="hljs-number">2</span> * (sprite.offset &gt; <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>), spriteW)) {
      <span class="hljs-comment">// stop the car</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЛрдЯ: рдпрджрд┐ рдЖрдк рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреЛрдб рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╣рдо рдХрд╛рд░ рдХреЛ рд░реЛрдХ рдирд╣реАрдВ рд░рд╣реЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рддрдм рдпрд╣ рдмрд╛рдзрд╛рдУрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдмрдЧрд╝рд▓ рдореЗрдВ рдЬрд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдЧрд╛; </font><font style="vertical-align: inherit;">рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╣реИрдХ рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рдо рдЙрдирдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдареАрдХ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдХрд╛рд░ рдХреЛ рд╕реНрдкреНрд░рд╛рдЗрдЯ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ "рд╕реНрд▓рд┐рдк" рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред</font></font></em><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдЯрдХрд░рд╛рд╡</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рдбрд╝рдХ рдХреЗ рдХрд┐рдирд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдЯрдХрд░рд╛рд╡ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдореЗрдВ рдЕрдиреНрдп рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рдЯрдХрд░рд╛рд╡ рдХреЛ рдкрд╣рдЪрд╛рдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рдПрдХ рдЪреМрд░рд╛рд╣реЗ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╣рдо рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдЙрд╕ рдорд╢реАрди рдХреЗ рдкреАрдЫреЗ "рдзрдХреНрдХрд╛" рджреЗрдХрд░ рдзреАрдорд╛ рдХрд░ рджреЗрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╡рд╣ рдЯрдХрд░рд╛ рдЧрдпрд╛ рдерд╛:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; playerSegment.cars.length ; n++) {<font></font>
  car  = playerSegment.cars[n];<font></font>
  carW = car.sprite.w * SPRITES.SCALE;<font></font>
  <span class="hljs-keyword">if</span> (speed &gt; car.speed) {
    <span class="hljs-keyword">if</span> (Util.overlap(playerX, playerW, car.offset, carW, <span class="hljs-number">0.8</span>)) {
      <span class="hljs-comment">// slow the car</span>
      <span class="hljs-keyword">break</span>;<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╢реАрди рдЕрдкрдбреЗрдЯ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддрд╛рдХрд┐ рдЕрдиреНрдп рдХрд╛рд░реЗрдВ рд╕рдбрд╝рдХ рдХреЗ рд╕рд╛рде рдЖрдЧреЗ рдмрдврд╝реЗрдВ, рд╣рдо рдЙрдиреНрд╣реЗрдВ рд╕рдмрд╕реЗ рд╕рд░рд▓ AI рджреЗрдВрдЧреЗ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдерд┐рд░ рдЧрддрд┐ рд╕реЗ рд╕рд╡рд╛рд░реА рдХрд░реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдУрд╡рд░рдЯреЗрдХ рдХрд░рдиреЗ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдШреВрдордирд╛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдУрд╡рд░рдЯреЗрдХ рдХрд░рдиреЗ рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЕрдиреНрдп рдХрд╛рд░реЛрдВ рдХреЗ рдЖрд╕рдкрд╛рд╕ рдЬрд╛рдирд╛</font></font></li>
</ul><br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЛрдЯ: рд╣рдореЗрдВ рд╕рдбрд╝рдХ рдкрд░ рд╡рдХреНрд░ рдХреЗ рд╕рд╛рде рдЕрдиреНрдп рдХрд╛рд░реЛрдВ рдХреЛ рдореЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡рдХреНрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдирд╣реАрдВ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрджрд┐ рд╣рдо рдХрд╛рд░реЛрдВ рдХреЛ рд╕рдбрд╝рдХ рдХреЗ рдЦрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рдЖрдЧреЗ рдмрдврд╝рд╛рддреЗ рд╣реИрдВ, рддреЛ рд╡реЗ рд╕реНрд╡рддрдГ рдШрдЯрддрд╛ рдХреЗ рд╕рд╛рде рдЧреБрдЬрд░реЗрдВрдЧреЗред</font></font></em></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рд╕рдм рдЦреЗрд▓ рдЪрдХреНрд░ рдХреЗ </font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреМрд░рд╛рди рд╣реЛрддрд╛ рд╣реИ рдПрдХ рдХреЙрд▓ рдХреЗ рджреМрд░рд╛рди </font></font><code>updateCars()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рд░ рдХреЛ рдПрдХ рдирд┐рд░рдВрддрд░ рдЧрддрд┐ рд╕реЗ рдЖрдЧреЗ рдмрдврд╝рд╛рддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рд╕реЗрдЧрдореЗрдВрдЯ рд╕реЗ рдЕрдЧрд▓реЗ рддрдХ рд╕реНрд╡рд┐рдЪ рдХрд░рддреЗ рд╣реИрдВ рдпрджрд┐ рд╡реЗ рдЗрд╕ рдлреНрд░реЗрдо рдХреЗ рджреМрд░рд╛рди рдкрд░реНрдпрд╛рдкреНрдд рджреВрд░реА рдкрд░ рдЪрд▓реЗ рдЧрдП рд╣реИрдВред</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateCars</span>(<span class="hljs-params">dt, playerSegment, playerW</span>) </span>{
  <span class="hljs-keyword">var</span> n, car, oldSegment, newSegment;
  <span class="hljs-keyword">for</span>(n = <span class="hljs-number">0</span> ; n &lt; cars.length ; n++) {<font></font>
    car         = cars[n];<font></font>
    oldSegment  = findSegment(car.z);<font></font>
    car.offset  = car.offset + updateCarOffset(car, oldSegment, playerSegment, playerW);<font></font>
    car.z       = Util.increase(car.z, dt * car.speed, trackLength);<font></font>
    car.percent = Util.percentRemaining(car.z, segmentLength); <span class="hljs-comment">// useful for interpolation during rendering phase</span><font></font>
    newSegment  = findSegment(car.z);<font></font>
    <span class="hljs-keyword">if</span> (oldSegment != newSegment) {<font></font>
      index = oldSegment.cars.indexOf(car);<font></font>
      oldSegment.cars.splice(index, <span class="hljs-number">1</span>);<font></font>
      newSegment.cars.push(car);<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╡рд┐рдзрд┐ </font><em><font style="vertical-align: inherit;">"рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐рдорддреНрддрд╛"</font></em></font><code>updateCarOffset()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИ </font><font style="vertical-align: inherit;">, рдЬрд┐рд╕рд╕реЗ рдорд╢реАрди рдЦрд┐рд▓рд╛рдбрд╝реА рдпрд╛ рдЕрдиреНрдп рдорд╢реАрдиреЛрдВ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдЬрд╛ рд╕рдХрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рдХреЛрдб рдЖрдзрд╛рд░ рдореЗрдВ рд╕рдмрд╕реЗ рдЬрдЯрд┐рд▓ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИ, рдФрд░ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЧреЗрдо рдореЗрдВ рдпрд╣ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдорд╢реАрди рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдбреЗрдореЛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдпрдерд╛рд░реНрдерд╡рд╛рджреА рд▓рдЧреЗрдВред </font><font style="vertical-align: inherit;">
рд╣рдорд╛рд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ, рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдорд╢реАрди рдХреЛ рдордЬрдмреВрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рднреЛрд▓реЗ AI рдмреНрд░реВрдЯ рдмрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ:</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЧреЗ рджреЗрдЦрд┐рдП 20 рд╕реЗрдЧрдореЗрдВрдЯ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рд╡рд╣ рдЙрд╕рдХреЗ рд╕рд╛рдордиреЗ рдПрдХ рдзреАрдореА рдХрд╛рд░ рдкрд╛рддрд╛ рд╣реИ рдЬреЛ рдЙрд╕рдХреЗ рд░рд╛рд╕реНрддреЗ рдХреЛ рдкрд╛рд░ рдХрд░рддреА рд╣реИ, рддреЛ рдЙрд╕реЗ рдЧреЛрд▓ рдХрд░реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдбрд╝рдХ рдХреЗ рдмрд╛рдИрдВ рдУрд░ рдмрд╛рдзрд╛рдУрдВ рд╕реЗ рджрд╛рдПрдБ рдореБрдбрд╝реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдбрд╝рдХ рдХреЗ рджрд╛рдИрдВ рдУрд░ рдмрд╛рдзрд╛рдУрдВ рдХреЗ рдмрд╛рдИрдВ рдУрд░ рдореБрдбрд╝реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢реЗрд╖ рджреВрд░реА рдХреЗ рднреАрддрд░ рдмрд╛рдзрд╛рдУрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдореБрдбрд╝реЗрдВ</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╣рдо рдЙрди рдХрд╛рд░реЛрдВ рдХреЗ рд╕рд╛рде рднреА рдзреЛрдЦрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рд▓рд┐рдП рдЕрджреГрд╢реНрдп рд╣реИрдВ, рдЬрд┐рд╕рд╕реЗ рдЙрдиреНрд╣реЗрдВ рдмрд╕ рдПрдХ-рджреВрд╕рд░реЗ рдХреЗ рдЪрдХреНрдХрд░ рд▓рдЧрд╛рдиреЗ рдФрд░ рдЧреБрдЬрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рдорд┐рд▓рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЙрдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреА рджреГрд╢реНрдпрддрд╛ рдХреЗ рднреАрддрд░ "рд╕реНрдорд╛рд░реНрдЯ" рджрд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateCarOffset</span>(<span class="hljs-params">car, carSegment, playerSegment, playerW</span>) </span>{<font></font>
<font></font>
  <span class="hljs-keyword">var</span> i, j, dir, segment, otherCar, otherCarW, lookahead = <span class="hljs-number">20</span>, carW = car.sprite.w * SPRITES.SCALE;<font></font>
<font></font>
  <span class="hljs-comment">// optimization, dont bother steering around other cars when 'out of sight' of the player</span>
  <span class="hljs-keyword">if</span> ((carSegment.index - playerSegment.index) &gt; drawDistance)
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
<font></font>
  <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span> ; i &lt; lookahead ; i++) {<font></font>
    segment = segments[(carSegment.index+i)%segments.length];<font></font>
<font></font>
    <span class="hljs-keyword">if</span> ((segment === playerSegment) &amp;&amp; (car.speed &gt; speed) &amp;&amp; (Util.overlap(playerX, playerW, car.offset, carW, <span class="hljs-number">1.2</span>))) {
      <span class="hljs-keyword">if</span> (playerX &gt; <span class="hljs-number">0.5</span>)<font></font>
        dir = <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (playerX &lt; <span class="hljs-number">-0.5</span>)<font></font>
        dir = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">else</span>
        dir = (car.offset &gt; playerX) ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>;
      <span class="hljs-keyword">return</span> dir * <span class="hljs-number">1</span>/i * (car.speed-speed)/maxSpeed; <span class="hljs-comment">// the closer the cars (smaller i) and the greater the speed ratio, the larger the offset</span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span> ; j &lt; segment.cars.length ; j++) {<font></font>
      otherCar  = segment.cars[j];<font></font>
      otherCarW = otherCar.sprite.w * SPRITES.SCALE;<font></font>
      <span class="hljs-keyword">if</span> ((car.speed &gt; otherCar.speed) &amp;&amp; Util.overlap(car.offset, carW, otherCar.offset, otherCarW, <span class="hljs-number">1.2</span>)) {
        <span class="hljs-keyword">if</span> (otherCar.offset &gt; <span class="hljs-number">0.5</span>)<font></font>
          dir = <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (otherCar.offset &lt; <span class="hljs-number">-0.5</span>)<font></font>
          dir = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">else</span>
          dir = (car.offset &gt; otherCar.offset) ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">return</span> dir * <span class="hljs-number">1</span>/i * (car.speed-otherCar.speed)/maxSpeed;<font></font>
      }<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ, рдпрд╣ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛рдлреА рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╛рдордиреЗ рдХрд╛рд░реЛрдВ рдХреА рдПрдХ рдмрдбрд╝реА рднреАрдбрд╝ рдХреЗ рд╕рд╛рде, рд╣рдо рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХрд╛рд░реЗрдВ рдмрд╛рдПрдВ рд╕реЗ рджрд╛рдПрдВ рдФрд░ рдкреАрдЫреЗ рд╕реЗ рдЖрдЧреЗ рдмрдврд╝ рд░рд╣реА рд╣реИрдВ, рдЕрдиреНрдп рджреЛ рдорд╢реАрдиреЛрдВ рдХреЗ рдмреАрдЪ рдХреА рдЦрд╛рдИ рдХреЛ рдирд┐рдЪреЛрдбрд╝рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реА рд╣реИред </font><font style="vertical-align: inherit;">рдПрдЖрдИ рдХреА рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рдиреЗ рдХреЗ рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдХрд╛рд░реЛрдВ рдХреЛ рдзреАрдорд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ рдпрджрд┐ рд╡реЗ рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдмрд╛рдзрд╛рдУрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдЬрдЧрд╣ рдирд╣реАрдВ рд╣реИред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлреЗрд╕</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЕрдВрдд рдореЗрдВ, рд╣рдо рдПрдХ рдЕрд▓реНрдкрд╡рд┐рдХрд╕рд┐рдд HTML рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛рдПрдВрдЧреЗ:</font></font><br>
<br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;div id = "hud"&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  &lt;span id = "speed" рд╡рд░реНрдЧ = "hud"&gt; &lt;span id = "speed_value" рд╡рд░реНрдЧ = "рдореВрд▓реНрдп"&gt; 0 &lt;/ span&gt; mph &lt;/ span&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  &lt;span id = "current_lap_time" рд╡рд░реНрдЧ = "hud"&gt; рд╕рдордп: &lt;span id = "current_lap_time_value" рд╡рд░реНрдЧ = "рдореВрд▓реНрдп"&gt; 0.0 &lt;/ span&gt; &lt;/ span&gt; </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  &lt;span id = "last_lap_time" рд╡рд░реНрдЧ = "hud"&gt; рдЕрдВрддрд┐рдо рдЧреЛрдж: &lt;span id = "last_lap_time_value" рд╡рд░реНрдЧ = "рдореВрд▓реНрдп"&gt; 0.0 &lt;/ span&gt; &lt;/ span&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  &lt;span id = "fast_lap_time" рд╡рд░реНрдЧ = "hud"&gt; рд╕рдмрд╕реЗ рддреЗрдЬрд╝ рдЧреЛрдж: &lt;span id = "fast_lap_time_value" рд╡рд░реНрдЧ = "рдореВрд▓реНрдп"&gt; 0.0 &lt;/ span&gt; &lt;/ span&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/ Div&gt;</font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... рдФрд░ рдЗрд╕рдореЗрдВ CSS рд╕реНрдЯрд╛рдЗрд▓ рдЬреЛрдбрд╝реЗрдВ</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-selector-id">#hud</span>                   { <span class="hljs-attribute">position</span>: absolute; <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>; <span class="hljs-attribute">width</span>: <span class="hljs-number">640px</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>; <span class="hljs-attribute">font-family</span>: Verdana, Geneva, sans-serif; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8em</span>; <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.4</span>); <span class="hljs-attribute">color</span>: black; <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">2px</span> solid black; <span class="hljs-attribute">box-sizing</span>: border-box; <span class="hljs-attribute">-moz-box-sizing</span>: border-box; <span class="hljs-attribute">-webkit-box-sizing</span>: border-box; }
<span class="hljs-selector-id">#hud</span> <span class="hljs-selector-class">.hud</span>              { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0.6</span>); <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black; <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>; <span class="hljs-attribute">transition-property</span>: background-color; <span class="hljs-attribute">transition-duration</span>: <span class="hljs-number">2s</span>; <span class="hljs-attribute">-webkit-transition-property</span>: background-color; <span class="hljs-attribute">-webkit-transition-duration</span>: <span class="hljs-number">2s</span>; }
<span class="hljs-selector-id">#hud</span> <span class="hljs-selector-id">#speed</span>            { <span class="hljs-attribute">float</span>: right; }
<span class="hljs-selector-id">#hud</span> <span class="hljs-selector-id">#current_lap_time</span> { <span class="hljs-attribute">float</span>: left;  }
<span class="hljs-selector-id">#hud</span> <span class="hljs-selector-id">#last_lap_time</span>    { <span class="hljs-attribute">float</span>: left; <span class="hljs-attribute">display</span>: none;  }
<span class="hljs-selector-id">#hud</span> <span class="hljs-selector-id">#fast_lap_time</span>    { <span class="hljs-attribute">display</span>: block; <span class="hljs-attribute">width</span>: <span class="hljs-number">12em</span>;  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto; <span class="hljs-attribute">text-align</span>: center; <span class="hljs-attribute">transition-property</span>: background-color; <span class="hljs-attribute">transition-duration</span>: <span class="hljs-number">2s</span>; <span class="hljs-attribute">-webkit-transition-property</span>: background-color; <span class="hljs-attribute">-webkit-transition-duration</span>: <span class="hljs-number">2s</span>; }
<span class="hljs-selector-id">#hud</span> <span class="hljs-selector-class">.value</span>            { <span class="hljs-attribute">color</span>: black; <span class="hljs-attribute">font-weight</span>: bold; }
<span class="hljs-selector-id">#hud</span> <span class="hljs-selector-class">.fastest</span>          { <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">215</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.5</span>); }</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... рдФрд░ рд╣рдо рдЦреЗрд▓ рдЪрдХреНрд░ рдХреЗ рджреМрд░рд╛рди рдЗрд╕рдХреЗ рдЕрджреНрдпрддрди () рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░реЗрдВрдЧреЗ:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">if</span> (position &gt; playerZ) {
  <span class="hljs-keyword">if</span> (currentLapTime &amp;&amp; (startPosition &lt; playerZ)) {<font></font>
    lastLapTime    = currentLapTime;<font></font>
    currentLapTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (lastLapTime &lt;= Util.toFloat(Dom.storage.fast_lap_time)) {<font></font>
      Dom.storage.fast_lap_time = lastLapTime;<font></font>
      updateHud(<span class="hljs-string">'fast_lap_time'</span>, formatTime(lastLapTime));<font></font>
      Dom.addClassName(<span class="hljs-string">'fast_lap_time'</span>, <span class="hljs-string">'fastest'</span>);<font></font>
      Dom.addClassName(<span class="hljs-string">'last_lap_time'</span>, <span class="hljs-string">'fastest'</span>);<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span> {<font></font>
      Dom.removeClassName(<span class="hljs-string">'fast_lap_time'</span>, <span class="hljs-string">'fastest'</span>);<font></font>
      Dom.removeClassName(<span class="hljs-string">'last_lap_time'</span>, <span class="hljs-string">'fastest'</span>);<font></font>
    }<font></font>
    updateHud(<span class="hljs-string">'last_lap_time'</span>, formatTime(lastLapTime));<font></font>
    Dom.show(<span class="hljs-string">'last_lap_time'</span>);<font></font>
  }<font></font>
  <span class="hljs-keyword">else</span> {<font></font>
    currentLapTime += dt;<font></font>
  }<font></font>
}<font></font>
<font></font>
updateHud(<span class="hljs-string">'speed'</span>,            <span class="hljs-number">5</span> * <span class="hljs-built_in">Math</span>.round(speed/<span class="hljs-number">500</span>));<font></font>
updateHud(<span class="hljs-string">'current_lap_time'</span>, formatTime(currentLapTime));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рд╕рд╣рд╛рдпрдХ рд╡рд┐рдзрд┐ </font></font><code>updateHud()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрдВ DOM рддрддреНрд╡реЛрдВ рдХреЛ рддрднреА рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ рдЬрдм рдорд╛рди рдмрджрд▓рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рддрд░рд╣ рдХрд╛ рдЕрдкрдбреЗрдЯ рдПрдХ рдзреАрдореА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ рдФрд░ рд╣рдореЗрдВ рдЗрд╕реЗ 60fps рдкрд░ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдпрджрд┐ рдорд╛рди рд╕реНрд╡рдпрдВ рдирд╣реАрдВ рдмрджрд▓рддреЗ рд╣реИрдВред</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateHud</span>(<span class="hljs-params">key, value</span>) </span>{ <span class="hljs-comment">// accessing DOM can be slow, so only do it if value has changed</span>
  <span class="hljs-keyword">if</span> (hud[key].value !== value) {<font></font>
    hud[key].value = value;<font></font>
    Dom.set(hud[key].dom, value);<font></font>
  }<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд╖реНрдХрд░реНрд╖</font></font></h2><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/103/563/0d1/1035630d19106de2f85edebb24d0421f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fuh! </font><font style="vertical-align: inherit;">рдЕрдВрддрд┐рдо рднрд╛рдЧ рд▓рдВрдмрд╛ рдерд╛, рд▓реЗрдХрд┐рди рд╣рдо рдЕрднреА рднреА рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдП, рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдорд╛рдкреНрдд рд╕рдВрд╕реНрдХрд░рдг</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрд╕ рдЪрд░рдг рдореЗрдВ рдкрд╣реБрдВрдЪ рдЧрдпрд╛ рдЬрд╣рд╛рдВ рдЗрд╕реЗ рдПрдХ рдЦреЗрд▓ рдХрд╣рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╡рд╣ рдЕрднреА рднреА </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдорд╛рдкреНрдд</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЦреЗрд▓ </font><font style="vertical-align: inherit;">рд╕реЗ рджреВрд░ рд╣реИ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдпрд╣ рдЕрднреА рднреА рдПрдХ рдЦреЗрд▓ рд╣реИред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдпрд╣ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд╣реИ рдХрд┐ рд╣рдо рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рдЧреЗрдо рдмрдирд╛рдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣реЗ, рднрд▓реЗ рд╣реА рдпрд╣ рдХрд┐рддрдирд╛ рд╕рд░рд▓ рд╣реЛред </font><font style="vertical-align: inherit;">рдореИрдВ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдкреВрд░реНрдг рд░рд╛рдЬреНрдп рдореЗрдВ рд▓рд╛рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдирд╣реАрдВ рдмрдирд╛ рд░рд╣рд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рдЗрд╕реЗ рдХреЗрд╡рд▓ </font><font style="vertical-align: inherit;">рдЫрджреНрдо рддреНрд░рд┐-рдЖрдпрд╛рдореА рд░реЗрд╕рд┐рдВрдЧ рдЦреЗрд▓реЛрдВ рдХреЗ рд╡рд┐рд╖рдп рдХреЗ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдЪрдп рдХреЗ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд░реВрдк рдореЗрдВ рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </font><font style="vertical-align: inherit;">ред </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдХреЛрдб </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ github рджреНрд╡рд╛рд░рд╛ рдкреЛрд╕реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдФрд░ рдЖрдк рдЗрд╕реЗ рдФрд░ рдЕрдзрд┐рдХ рдЙрдиреНрдирдд рд░реЗрд╕рд┐рдВрдЧ рдЧреЗрдо рдореЗрдВ рдмрджрд▓рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЖрдк рднреА рдЖрдЬрдорд╛ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдзреНрд╡рдирд┐ рдкреНрд░рднрд╛рд╡ рдЬреЛрдбрд╝реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрдЧреАрдд рд╕рд┐рдВрдХ рдореЗрдВ рд╕реБрдзрд╛рд░</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлреБрд▓рд╕реНрдХреНрд░реАрди рд▓рд╛рдЧреВ рдХрд░реЗрдВ</font></font></li>
<li>   (   , ,    ,  ..)</li>
<li>    </li>
<li>   (,   ..)</li>
<li>       </li>
<li> ,     </li>
<li> ,          -</li>
<li> ,     </li>
<li>   (   ,     ..)</li>
<li>    drawDistance</li>
<li>         x,y</li>
<li>     </li>
<li>      (   ,  )</li>
<li> </li>
<li> </li>
<li>     </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рдВрдЯрд╛ рдФрд░ рд╕рдбрд╝рдХ рдХрдиреЗрдХреНрд╢рди</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рд╛рдд рдФрд░ рджрд┐рди рдХрд╛ рдкрд░рд┐рд╡рд░реНрддрди</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореМрд╕рдо рдХреА рд╕реНрдерд┐рддрд┐</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реБрд░рдВрдЧреЛрдВ, рдкреБрд▓реЛрдВ, рдмрд╛рджрд▓реЛрдВ, рджреАрд╡рд╛рд░реЛрдВ, рдЗрдорд╛рд░рддреЛрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢рд╣рд░, рд░реЗрдЧрд┐рд╕реНрддрд╛рди, рд╕рд╛рдЧрд░</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рдореЗрдВ рд╕рд┐рдПрдЯрд▓ рдФрд░ рд╕реНрдкреЗрд╕ рд╕реБрдИ рдЬреЛрдбрд╝реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдЦрд▓рдирд╛рдпрдХ" - рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдпреЛрдЧрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреЗрд▓ рдореЛрдб - рд╕рдмрд╕реЗ рддреЗрдЬ рдЧреЛрдж, рдПрдХ рджреМрдбрд╝ рдкрд░ рдПрдХ (рд╕рд┐рдХреНрдХреЗ рдЙрдард╛ ?, рдЦрд▓рдирд╛рдпрдХ рдкрд░ рд╢реВрдЯрд┐рдВрдЧ?)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреЗрдордкреНрд▓реЗ рдЕрдиреБрдХреВрд▓рди рд╡рд┐рдХрд▓реНрдк рдХреЗ рдЯрди</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрджрд┐ред</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">...</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рддреЛ рд╣рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдПрдХ рдФрд░ "рд╕рдкреНрддрд╛рд╣рд╛рдВрдд рдкрд░рд┐рдпреЛрдЬрдирд╛" рдЬреЛ рдЙрдореНрдореАрдж рд╕реЗ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдордп рд▓реЗрддреА рдереА, рд▓реЗрдХрд┐рди рдЕрдВрдд рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдерд╛ред</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрджрд░реНрдн</font></font></h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦреЛрдВ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреА рд╢реБрд░реБрдЖрдд, рд╕реАрдзреА рд╕рдбрд╝рдХреЗрдВ рдФрд░ рдШрдЯрддрд╛</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реВ рдХрд╛ рдЫрджреНрдо 3 рдбреА рдкреЗрдЬ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд░реЛрдд</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
рдЦреЗрд▓рдиреЗ рдпреЛрдЧреНрдп рдбреЗрдореЛ рдХреЗ рд▓рд┐рдП рд▓рд┐рдВрдХ:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реАрдзреЗ рд╕рдбрд╝рдХ рдбреЗрдореЛ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдШрдЯрддрд╛ рдХреЗ рд╕рд╛рде рдбреЗрдореЛ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд╛рдбрд╝рд┐рдпреЛрдВ рдХрд╛ рдбреЗрдореЛ</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдорд╛рдкреНрдд рд╕рдВрд╕реНрдХрд░рдг</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi499432/index.html">PHPUnit рдореЗрдВ рдпреВрдирд┐рдЯ рдЯреЗрд╕реНрдЯ рдХреА рд╕реНрд╡рд╛рдпрддреНрддрддрд╛</a></li>
<li><a href="../hi499434/index.html">рдЬреНрдЮрд╛рди рдкреНрд░рдмрдВрдзрди рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд░реЗрдВ: "рдкрд╛рдЙрдЪ", "рддреЛрддрд╛ рдЬреБрд░реНрдорд╛рдирд╛" рдФрд░ рдХреНрд▓рд┐рдк рд╕реЛрдЪ рдХреЛ рд▓рд╛рдн</a></li>
<li><a href="../hi499436/index.html">рд░рд┐рдореЛрдЯ-рдирд┐рдпрдВрддреНрд░рд┐рдд рдПрдВрдЬрд╛рдЗрдо рд╕реНрдЯреНрд░реЛрдХ рдФрд░ рд░реАрдврд╝ рдХреА рдЪреЛрдЯреЛрдВ рдХреЗ рдЙрдкрдЪрд╛рд░ рдореЗрдВ рддреЗрдЬреА рд▓рд╛рдПрдЧрд╛</a></li>
<li><a href="../hi499438/index.html">рдкрд░реАрдХреНрд╖рдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреНрд░реАрдо рдФрд░ рди рдХреЗрд╡рд▓</a></li>
<li><a href="../hi499440/index.html">рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдПрдХ рд╢рд╛рдирджрд╛рд░ рд▓реЛрдХреЛрдореЛрдЯрд┐рд╡ рдХреЗ рд▓рд┐рдП рджреБрдирд┐рдпрд╛ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдСрдЯреЛрдкрд╛рдпрд▓рдЯ рд▓рд┐рдЦрд╛ рдерд╛</a></li>
<li><a href="../hi499444/index.html">Postgres: рдмреНрд▓реЛрдЯ, pg_repack рдФрд░ рдЖрд╕реНрдердЧрд┐рдд рдмрд╛рдзрд╛рдПрдВ</a></li>
<li><a href="../hi499446/index.html">рд╡реАрдЖрд░ рдХреЗ рд▓рд┐рдП рдПрд╕рдЯреАрдИрдкреА рдкреНрд░рд╛рд░реВрдк рдмреВрдЯрд▓реЛрдбрд░реНрд╕ рдХрд╛ рдкрд░реАрдХреНрд╖рдг</a></li>
<li><a href="../hi499448/index.html">рдЯрд╛рдЗрдкрд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ рдЗрдирд╡рд░реНрд╕реАрдлреНрдпреВрдЬ рдХреЗ рд╕рд╛рде Node.js рдореЗрдВ SOLID рдФрд░ рд╕реНрддрд░рд┐рдд рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛</a></li>
<li><a href="../hi499450/index.html">рдкрд╛рдпрдерди рдореЗрдВ рдЖрдиреБрд╡рд╛рдВрд╢рд┐рдХреА / рд╡рд┐рдХрд╛рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдПрдХ рдЦреЗрд▓ рдлрд╛рд░рд╕реА рдХреЗ рд▓рд┐рдП рдЙрдкрдХрд░рдг рдЪреБрдирдирд╛</a></li>
<li><a href="../hi499452/index.html">рдХреНрд▓рд┐рдирд┐рдХ рдореЗрдВ рдПрдХ рдиреЗрддреНрд░ рд░реЛрдЧ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХрд╛ рд╣рд░ рджрд┐рди: рдЬрдм рдбреЙрдХреНрдЯрд░ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>