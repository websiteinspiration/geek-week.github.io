<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚óÄÔ∏è üîö ‚úçüèΩ A new look at Fullstack development with the Ruby on Rails framework üôçüèæ üé≥ üö°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Is it possible to seriously discuss fullstack development? If you look towards large frameworks for the frontend and for the backend, then talking abo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>A new look at Fullstack development with the Ruby on Rails framework</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501510/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is it possible to seriously discuss fullstack development? If you look towards large frameworks for the frontend and for the backend, then talking about fullstack looks doubtful. I suggest looking at the term </font></font><code>fullstack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from the point of view of Ruby on Rails and the earlier simpler principles of implementing interactivity on classic web pages. I present to you an overview of the frontend features provided in the Ruby on Rails framework or related to it.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zn/ao/g7/znaog7ljsa7wgujplmojshggrfk.png" alt="image"><br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ruby on Rails is an MVC framework that focuses on rapid development, and pays a lot of attention to maintaining consistency within a project (so that it doesn't turn out ‚Äúanyhow‚Äù ‚Äúquickly‚Äù). </font><font style="vertical-align: inherit;">It provides many tools for both backend and frontend development. </font><font style="vertical-align: inherit;">In the classic fullstack direction, there was a momentary omission due to ignorance of its development and misconception about the lag of used funds. </font><font style="vertical-align: inherit;">The objective of this article is to highlight how the fullstack approach develops and how many different interesting possibilities have appeared in it.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webpacker</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpacker is a gem that ships with Ruby on Rails. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpacker provides a wrapper over Webpack: commands for connecting and starting configurations for work. </font><font style="vertical-align: inherit;">Webpacker de facto sets the standard for working with frontend in Ruby on Rails, promotes the use of the latest JavaScript features and modern principles of working with code (structure, modularity, assembly, and much more). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpacker defines the general configurations needed to get started and the structure of the application, which increases certainty and simplifies the understanding of the project by different developers. </font><font style="vertical-align: inherit;">For the JavaScript code, the folder </font></font><code>app/javascript/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the primary file </font><font style="vertical-align: inherit;">is allocated </font></font><code>app/javascript/packs/application.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Files and folders added by Webpacker</font></font></b>
                        <div class="spoiler_text"><code>config/webpacker.yml<br>
config/webpack/<br>
config/webpack/development.js<br>
config/webpack/environment.js<br>
config/webpack/production.js<br>
config/webpack/test.js<br>
package.json<br>
postcss.config.js<br>
babel.config.js<br>
.browserslistrc<br>
node_modules/<br>
bin/webpack<br>
bin/webpack-dev-server<br>
app/javascript/<br>
app/javascript/packs/<br>
app/javascript/packs/application.js</code><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpacker starts by default during the process of creating a new application and performs its settings. </font><font style="vertical-align: inherit;">You can create the application right away with additional configurations for Stimulus, Vue, Typescript or another one from the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">list provided</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">rails new myapp --webpack=stimulus</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Or install additional configurations after creating the application:</font></font><br>
<br>
<pre><code class="bash hljs">bundle <span class="hljs-built_in">exec</span> rails webpacker:install:stimulus</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Develop Frontend with the Ruby on Rails framework = use the most current JavaScript development approaches. </font><font style="vertical-align: inherit;">All the convenience of using modern JavaScript standards are well integrated with Ruby on Rails. </font><font style="vertical-align: inherit;">The necessary configurations are provided for working with Webpack, which allows you to be less distracted by the correct organization of the project and focus on solving popular tasks using the familiar environment.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Turbolinks</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Turbolinks is the JavaScript library that ships with Ruby on Rails. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The priority task of Turbolinks is to ease the load on the server and reduce ‚Äúseams‚Äù when navigating to application URLs. This feature is often compared with SPA, as it gives the impression of a re-rendering of content in the browser instead of plain plain transitions between pages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Turbolinks working principle: to navigate between pages not by standard switching to a new address, but by fulfilling a request to this address ‚Äúin the background‚Äù via ajax, loading the response in JavaScript, and replacing the page contents with a new one. This process is accompanied by special events that allow you to add functionality to the transition between pages and to return to previous pages. For instance,</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to start the transition to a different address: </font></font><code>turbolinks:click, turbolinks:before-visit, turbolinks:visit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or the processing of a request for a new page: </font></font><code>turbolinks:request-start, turbolinks:request-end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or on the process of displaying a new page </font></font><code>turbolinks:before-render, turbolinks:render, turbolinks:load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition, Turbolinks has a progress bar, caches the history of loaded pages and allows you to specify non-updated page elements.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actioncable</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ActionCable is part of the Ruby on Rails framework. </font><font style="vertical-align: inherit;">ActionCable makes working with web sockets. </font><font style="vertical-align: inherit;">To list channels on the server, a folder </font></font><code>app/channels/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with primary files </font></font><code>channel.rb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and is </font><font style="vertical-align: inherit;">provided </font></font><code>connection.rb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">To implement the connection to these channels - a folder </font></font><code>app/javascript/channels/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with files </font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>consumer.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It‚Äôs better to get acquainted with the possibilities of ActionCable right away with an example. </font><font style="vertical-align: inherit;">The simplest connection to web sockets with its help can be implemented in just a couple of steps.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create Channel File</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / channels / hello_channel.rb</font></font></b>
                        <div class="spoiler_text"><pre><code class="ruby hljs"><span class="hljs-comment"># app/channels/hello_channel.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloChannel</span> &lt; ApplicationCable::Channel</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">subscribed</span></span>
    stream_from <span class="hljs-string">"hello_1"</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><br>
</div>
                    </div></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a subscription to this channel</font></font><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / javascript / channels / hello_channel.js</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">// app/javascript/channels/hello_channel.js</span>
<span class="hljs-keyword">import</span> consumer <span class="hljs-keyword">from</span> <span class="hljs-string">"./consumer"</span><font></font>
<font></font>
consumer.subscriptions.create({ <span class="hljs-attr">channel</span>: <span class="hljs-string">"HelloChannel"</span> }, {<font></font>
  received(data) {<font></font>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Data received"</span>, data);
    <span class="hljs-built_in">document</span>.body.innerText += <span class="hljs-string">`\nHello, <span class="hljs-subst">${data.name}</span>!`</span><font></font>
  }<font></font>
})<font></font>
</code></pre><br>
</div>
                    </div><br>
</li>
</ol><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And the connection to the web sockets is ready. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now, to check it, we need a simple page and an action for sending out. </font><font style="vertical-align: inherit;">To do this, create a controller and add its addresses to the routes</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / controllers / hello_controller.rb</font></font></b>
                        <div class="spoiler_text"><pre><code class="ruby hljs"><span class="hljs-comment"># app/controllers/hello_controller.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    render <span class="hljs-symbol">:html</span> =&gt; <span class="hljs-string">"Hello page..."</span>, <span class="hljs-symbol">:layout</span> =&gt; <span class="hljs-literal">true</span>
  <span class="hljs-keyword">end</span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
    ActionCable.server.broadcast(<span class="hljs-string">"hello_1"</span>, <span class="hljs-symbol">name:</span> params[<span class="hljs-symbol">:name</span>])<font></font>
    head <span class="hljs-number">200</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">config / routes.rb</font></font></b>
                        <div class="spoiler_text"><pre><code class="ruby hljs"><span class="hljs-comment"># config/routes.rb</span>
get <span class="hljs-string">"/hello"</span> =&gt; <span class="hljs-string">"hello#index"</span>
get <span class="hljs-string">"/hello/new"</span> =&gt; <span class="hljs-string">"hello#new"</span>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We start the application, go to the address </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">127.0.0.1haps000</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">hello</font></a><font style="vertical-align: inherit;"> and open the browser console, in it you can see the logging of messages that come from the server via web sockets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, we send a request for action mailing:</font></font><br>
<br>
<pre><code class="bash hljs">curl http://127.0.0.1:3000/hello/new?name=World</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And look at the / hello page and the output in its console.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Form Helpers and Rails-ujs</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Noteworthy are some not new, but well-established features of the Ruby on Rails framework. </font><font style="vertical-align: inherit;">Among them are helpers for representations and forms. </font><font style="vertical-align: inherit;">The initial convenience of helpers is that they facilitate the integration of markup with models, configurations, and other backend components. </font><font style="vertical-align: inherit;">The advantage of form helpers over conventional markup is the ability to quickly list form fields without going into the details of their binding to model attributes - using helpers, the relationship between them will be formed automatically. </font><font style="vertical-align: inherit;">A fragment showing an example of binding form fields with controller parameters and model attributes:</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / views / articles / new.html.erb</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">&lt;%# app/views/articles/new.html.erb %&gt;<font></font>
&lt;%#      %&gt;<font></font>
&lt;%= form_with(model: Article.new) do |f| %&gt;<font></font>
  &lt;div&gt;<font></font>
    &lt;%= f.label :title %&gt;<font></font>
    &lt;%= f.text_field :title %&gt;<font></font>
  &lt;/div&gt;<font></font>
  &lt;div&gt;<font></font>
    &lt;%= f.label :text %&gt;<font></font>
    &lt;%= f.text_area :text %&gt;<font></font>
  &lt;/div&gt;<font></font>
  &lt;%= f.submit %&gt;<font></font>
&lt;% end %&gt;<font></font>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">config / locales / ru.yml</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs"># config/locales/ru.yml<font></font>
#       <font></font>
ru:<font></font>
  activerecord:<font></font>
    attributes:<font></font>
      article:<font></font>
        title:  <font></font>
        text:  <font></font>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">config / application.rb</font></font></b>
                        <div class="spoiler_text"><pre><code class="ruby hljs"><span class="hljs-comment"># config/application.rb</span>
<span class="hljs-comment">#        config/application.rb</span>
config.i18n.default_locale = <span class="hljs-symbol">:ru</span>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / controllers / articles_controller.rb</font></font></b>
                        <div class="spoiler_text"><pre><code class="ruby hljs"><span class="hljs-comment"># app/controllers/articles_controller.rb</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
    <span class="hljs-comment">#  new   </span>
    <span class="hljs-comment"># rails -     </span>
  <span class="hljs-keyword">end</span><font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
    <span class="hljs-comment">#        </span><font></font>
    @article = Article.create(article_params)<font></font>
<font></font>
    <span class="hljs-comment">#    -    ,</span>
    <span class="hljs-comment">#    url  </span>
    <span class="hljs-comment">#   ,   </span><font></font>
    redirect_to @article<font></font>
  <span class="hljs-keyword">end</span><font></font>
<font></font>
  private<font></font>
<font></font>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">article_params</span></span>
    <span class="hljs-comment">#      </span>
    params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:article</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:text</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can learn more about this example </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rails-ujs</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rails-ujs is the core part of the Ruby on Rails framework for unobtrusive JavaScript. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rails-ujs provides several additional options for page elements that change or expand the way they work. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remote option - designed for elements that access the server (links, forms) to make requests asynchronous. </font><font style="vertical-align: inherit;">Link example:</font></font><br>
<br>
<pre><code class="plaintext hljs">&lt;%= link_to " ", new_article_path, remote: true %&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To display the results of this query requires additional manipulation, for example, adding handler to remote-events: </font></font><code>ajax:success, ajax:error, ajax:complete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The confirm option - allows you to request confirmation of the action before it is executed.</font></font><br>
<br>
<pre><code class="plaintext hljs">&lt;%= link_to "", article_path(article), method: :delete,<font></font>
  data: { confirm: ' ,     ?' } %&gt;<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Disable_with option - allows you to deactivate an item after an action</font></font><br>
<pre><code class="plaintext hljs">&lt;%= form.submit data: { disable_with: "..." } %&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Additionally, Rails-ujs has several handy features. </font><font style="vertical-align: inherit;">Here are some of them: </font></font><br>
<br>
<code>Rails.fire(obj, name, data)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- event call function </font></font><br>
<code>Rails.ajax(options)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- wrapper over XMLHttpRequest </font></font><br>
<code>Rails.isCrossDomain(url)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- verification of url belonging to another domain </font></font><br>
<code>Rails.$(selector)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- wrapper over document.querySelectorAll You can </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
connect them to your code with the command</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> Rails <span class="hljs-keyword">from</span> <span class="hljs-string">"@rails/ujs"</span>
</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stimulus - JavaScript framework from Ruby on Rails developers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stimulus is one of the rare frameworks and unique in its own way, since it implements frontend development using new JavaScript approaches, while it does not seek to control all your actions and does not impose a separation of the frontend from the backend. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The basic task of Stimulus is to bind handlers to events. According to Stimulus, the source code must be placed on controller classes, and their methods should be used as handlers. By default, the folder </font></font><code>app/javascript/controllers/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the primary file </font><font style="vertical-align: inherit;">is allocated for stimulus controllers in the project </font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Here we can add our controllers, for this we need to create a file with a suffix </font></font><code>_controller.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, for example,</font></font><code>articles_controller.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Next, the Stimulus loader imports such files and connects the controllers to the corresponding blocks on our pages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The controllers in Stimulus have additional equipment: initialization of the controller object ( </font></font><code>initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), helpers for accessing elements inside the block ( </font></font><code>targets</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, targets), attaching the controller object to the block ( </font></font><code>connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) and disconnecting from it ( </font></font><code>disconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), accessing the data attributes of the block ( </font></font><code>this.data.get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">The following is an example of an active / inactive stateful block written in Stimulus.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / views / home / show.html.erb</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">&lt;%# app/views/home/show.html.erb %&gt;<font></font>
<font></font>
&lt;%#   home   %&gt;<font></font>
&lt;%#      (  ) %&gt;<font></font>
&lt;div data-controller="home"<font></font>
    data-home-active-text="Activated" data-home-deactive-text="Deactivated"&gt;<font></font>
<font></font>
  &lt;%#    text  home  %&gt;<font></font>
  &lt;p data-target="home.text"&gt;&lt;/p&gt;<font></font>
<font></font>
  &lt;%#   action click  home %&gt;<font></font>
  &lt;button data-action="home#click"&gt;&lt;/button&gt;<font></font>
<font></font>
&lt;/div&gt;<font></font>
</code></pre><br>
</div>
                    </div><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / javascript / controllers / home_controller.js</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">// app/javascript/controllers/home_controller.js</span>
<span class="hljs-keyword">import</span> { Controller } <span class="hljs-keyword">from</span> <span class="hljs-string">"stimulus"</span><font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span> </span>{
  <span class="hljs-comment">//  </span>
  <span class="hljs-keyword">static</span> targets = [ <span class="hljs-string">"text"</span> ]<font></font>
<font></font>
  initialize() {<font></font>
    <span class="hljs-comment">//      </span>
    <span class="hljs-keyword">this</span>.activeText = <span class="hljs-keyword">this</span>.data.get(<span class="hljs-string">"active-text"</span>);
    <span class="hljs-keyword">this</span>.deactiveText = <span class="hljs-keyword">this</span>.data.get(<span class="hljs-string">"deactive-text"</span>);<font></font>
  }<font></font>
<font></font>
  connect() {<font></font>
    <span class="hljs-comment">//   /</span>
    <span class="hljs-keyword">this</span>.active = <span class="hljs-keyword">this</span>.data.get(<span class="hljs-string">"active"</span>) == <span class="hljs-string">"true"</span>;
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">this</span>.refresh();<font></font>
  }<font></font>
<font></font>
  disconnect() {<font></font>
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">this</span>.element.setAttribute(<span class="hljs-string">"data-home-active"</span>, !!<span class="hljs-keyword">this</span>.active);<font></font>
  }<font></font>
<font></font>
  click() {<font></font>
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">this</span>.active = !<span class="hljs-keyword">this</span>.active;
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">this</span>.refresh();<font></font>
  }<font></font>
<font></font>
  <span class="hljs-comment">//    </span><font></font>
  refresh(){<font></font>
    <span class="hljs-comment">//     </span>
    <span class="hljs-keyword">this</span>.element.style.background =   <span class="hljs-keyword">this</span>.active ? <span class="hljs-string">"none"</span> : <span class="hljs-string">"#EEE"</span>;
    <span class="hljs-comment">//  </span>
    <span class="hljs-keyword">this</span>.textTarget.innerHTML =   <span class="hljs-keyword">this</span>.active ? <span class="hljs-keyword">this</span>.activeText : <span class="hljs-keyword">this</span>.deactiveText;
    <span class="hljs-comment">//   </span>
    <span class="hljs-keyword">this</span>.textTarget.style.color = <span class="hljs-keyword">this</span>.active ? <span class="hljs-string">"black"</span> : <span class="hljs-string">"#777"</span>;<font></font>
  }<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despite the preservation of the old principles for implementing interactive functionality on classic pages, the development approach with Stimulus is significantly improved: the structure of the source code is structured in a new way, the binding of handlers to events is changed, and additional equipment is provided. </font><font style="vertical-align: inherit;">Thanks to these amenities and its simplicity, the Stimulus framework allows you to quickly and competently structure even a large frontend. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Additionally, it is worth emphasizing that Stimulus combines well with other Ruby on Rails features - useful emergence appears in almost every bundle.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus and Webpacker</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Webpacker provides commands for creating an application with a connected Stimulus:</font></font><br>
<br>
<pre><code class="bash hljs">rails new myapp --webpack=stimulus</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Or to connect it to an already created project:</font></font><br>
<br>
<pre><code class="bash hljs">bundle <span class="hljs-built_in">exec</span> rails webpacker:install:stimulus</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus and JavaScript</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stimulus promotes the use of modern JavaScript development principles to implement interactivity on your pages. </font><font style="vertical-align: inherit;">With Stimulus, the frontend solution is built in a modular way, OOP is used for event handlers, and the code is thoughtfully structured. </font><font style="vertical-align: inherit;">Using the targeting tool, using stimulus controllers, it‚Äôs convenient to control the connection to the block elements of complex graphic components taken from third-party libraries or written independently (calendars, auto-compilers, lists, trees and others). </font><font style="vertical-align: inherit;">Thanks to this, Stimulus is one of the simplest ways to switch from outdated frontend-tools and get the necessary productivity from the use of modern pure JavaScript.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus and Ruby on Rails</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With the code structure recommended by Stimulus, you continue to write in JavaScript in the same way you would in Ruby on Rails. </font><font style="vertical-align: inherit;">You also declare controllers, also bind actions to methods. </font><font style="vertical-align: inherit;">With Stimulus, frontend development becomes similar to backend, which makes it easier to work both there and there.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus and ActionCable</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using the initialize and connect methods in stimulus controllers, it‚Äôs convenient to bind web sockets not to the whole page, but to its individual blocks and to precisely work with incoming messages. </font><font style="vertical-align: inherit;">It is becoming easier to organize several parallel streams on one page with independent channel switching.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus and Turbolinks</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stimulus is activated as soon as Turbolinks loads the page; no additional manipulations are needed to connect Stimulus to the blocks of the page. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Turbolinks not only facilitates the loading of pages, but also caches their contents upon transition. When you return to the cached page from the history, Stimulus is activated automatically, as when loading a new page. If you want to save some values ‚Äã‚Äãbefore disconnecting the controller from the unit, you can use the method </font></font><code>disconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- and then, when returning and connecting the controller, it will be able to restore its last state. In the code of the first example of working with Stimulus, you can see how, when disconnecting ( </font></font><code>disconnect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), the value is fixed in the data-attribute of the controller block </font></font><code>this.active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and when connecting ( </font></font><code>connect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), it is extracted back.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Return through pages can be a useful way to work with the application. </font><font style="vertical-align: inherit;">For example, when working with a form, it may be necessary to fill in / edit the value in the directory on another page, then return and select new data. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another example: let's say we need to edit or see the values ‚Äã‚Äãon the web chat settings page. </font><font style="vertical-align: inherit;">It will be useful for us, when disconnecting the controller from the unit with the conversation, to remember the identifier of the last message, so when returning, first request the missing new messages, and then open the connection via web sockets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, a return on page history can be used as a convenient way to work with your web application.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus and Helpers Forms</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stimulus works closely with markup, and with the help of helpers, data is easily embedded in html blocks, thanks to this, part of the data can be loaded into the data attribute of the block and delivered to the controller.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / views / articles / show.html.erb</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">&lt;%#       app/views/articles/show.html.erb %&gt;<font></font>
<font></font>
&lt;%#      %&gt;<font></font>
&lt;% article_data = article.attributes<font></font>
      .slice("id", "created_at", "updated_at", "author", "title").to_json %&gt;<font></font>
<font></font>
&lt;%#   div    content_tag %&gt;<font></font>
&lt;%= content_tag :div,<font></font>
    :data =&gt; { controller: :articles },<font></font>
    "data-articles-attributes" =&gt; article_data do %&gt;<font></font>
  &lt;%# ... %&gt;<font></font>
&lt;% end %&gt;<font></font>
</code></pre><br>
</div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app / javascript / controllers / articles_controller.js (snippet)</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-comment">//   initialize  app/javascript/controllers/articles_controller.js</span><font></font>
initialize() {<font></font>
  <span class="hljs-keyword">this</span>.attributes = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-keyword">this</span>.data.get(<span class="hljs-string">"attributes"</span>));
  <span class="hljs-comment">//   </span>
  <span class="hljs-comment">// ...</span><font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stimulus and Rails-ujs</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using Stimulus and remote options, you can directly connect controllers to ajax events and process query results. </font><font style="vertical-align: inherit;">Declare the link using Rails-ujs and attach a stimulus handler to it.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link with remote option and stimulus handler</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">&lt;%= link_to " ",<font></font>
  article_path(article, format: :html),<font></font>
  data: { remote: true, action: "ajax:success-&gt;articles#showArticle" } %&gt;<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
When you click on this link, an asynchronous Ajax request to the rails controller </font></font><code>articles_controller.rb</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for the show action </font><font style="vertical-align: inherit;">will occur </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Upon receipt of a positive response, an event will fire </font></font><code>ajax:success</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and the method </font></font><code>showArticle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from the controller </font><font style="vertical-align: inherit;">will be </font><font style="vertical-align: inherit;">called</font></font><code>app/javascript/controllers/articles_controller.js</code><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controller showArticle method app / javascript / controllers / articles_controller.js</font></font></b>
                        <div class="spoiler_text"><pre><code class="javascript hljs">showArticle(e) {<font></font>
<font></font>
  <span class="hljs-comment">//      </span>
  <span class="hljs-keyword">const</span> xhr = e.detail[<span class="hljs-number">2</span>];<font></font>
<font></font>
  <span class="hljs-comment">//    </span>
  <span class="hljs-keyword">this</span>.showFormTarget.innerHTML = xhr.responseText;<font></font>
<font></font>
  <span class="hljs-comment">//  </span>
  <span class="hljs-keyword">this</span>.showFormTarget.style.display = <span class="hljs-string">"block"</span>;<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What's next?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These tools, together with the Ruby on Rails framework, open new horizons for fullstack development. </font><font style="vertical-align: inherit;">Moreover, the described tools are relatively simple and do not require long dives - everything necessary for a successful project is on the surface. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Build web applications with modern and fast fullstack development tools with the Ruby on Rails framework and enjoy it!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501498/index.html">How much C ++ code needs to be written to parse the Authorization HTTP header using easy_parser from RESTinio?</a></li>
<li><a href="../en501500/index.html">Visual hack: what threatens and how to protect yourself from spying</a></li>
<li><a href="../en501502/index.html">New Lab Digital Synthesis Continues Harris Book and Helps Make FPGA Video Game</a></li>
<li><a href="../en501506/index.html">About GDI leaks and the importance of luck</a></li>
<li><a href="../en501508/index.html">Damn old CRM</a></li>
<li><a href="../en501516/index.html">Let's turn off the vacuum ?! Alexey Lesovsky</a></li>
<li><a href="../en501520/index.html">C # 8 and null validity. How do we live with this</a></li>
<li><a href="../en501522/index.html">Free Skillbox Webinars: Writing Games in PHP, Unity and Unreal Engine</a></li>
<li><a href="../en501524/index.html">Secrets of synchronizing the electromagnetic fields of the Earth and a living organism</a></li>
<li><a href="../en501526/index.html">Why Canadian English is considered "dirty" and what does Keanu Reeves have to do with it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>