<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•– ğŸ‘©ğŸ½ ğŸ¤³ğŸ¼ Mikrosha. Chapitre un. ContrÃ´leur de carte SD ğŸ’ ğŸ§”ğŸ¾ ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beaucoup de gens se souviennent de ce merveilleux PC. Je l'ai eu quand j'avais 11 ans. Cela a pris 28 ans et maintenant j'ai dÃ©cidÃ© de faire des appar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mikrosha. Chapitre un. ContrÃ´leur de carte SD</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500816/"><img src="https://habrastorage.org/getpro/habr/post_images/4e4/843/62d/4e484362df0eacd9d8d9a7444c4a6c64.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de gens se souviennent de ce merveilleux PC. </font><font style="vertical-align: inherit;">Je l'ai eu quand j'avais 11 ans. Cela a pris 28 ans et maintenant j'ai dÃ©cidÃ© de faire des appareils d'extension, ce qui me manquait alors, comme passe-temps.</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IdÃ©e</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le rÃ©seau, j'ai vu plusieurs options pour les tÃ©lÃ©chargeurs SD pour de tels PC, je n'aimais pas la prÃ©sence de microcontrÃ´leurs, je voulais utiliser des circuits "vintage, chaleureux DIP", c'est pourquoi j'ai dÃ©cidÃ© d'utiliser "KR1533" sur la logique domestique. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En complÃ©ment. </font><font style="vertical-align: inherit;">RAM J'ai appliquÃ© UT62256. </font><font style="vertical-align: inherit;">Il s'agit de la seule puce importÃ©e du projet. </font><font style="vertical-align: inherit;">Bien sÃ»r, il Ã©tait possible d'installer KP537RU10 ou KP537RU25A, mais d'une part, ils devraient Ãªtre installÃ©s non pas un mais deux (j'ai prÃ©vu 4 Ko de RAM supplÃ©mentaire), et d'autre part j'avais UT62256, mais je n'avais pas KR537, et je ne l'avais pas Je voulais. </font><font style="vertical-align: inherit;">Par consÃ©quent, je me suis permis la libertÃ© d'importer, puis l'idÃ©e est venue d'utiliser les 32 Ko de RAM supplÃ©mentaires, avec changement de page. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bs/hq/ho/bshqhoyuqbckntjlxyd73v88gb8.jpeg"> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour la ROM, j'ai choisi KR573RF5, il n'y en avait que deux propres.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organigramme</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AprÃ¨s m'Ãªtre assis au-dessus d'une tasse de thÃ©, j'ai dessinÃ© un tel diagramme. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/e40/650/c2d/e40650c2d607251445e4774ab7f524ed.jpg"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici la puce RAM, la puce ROM et le bloc PORT. Le bloc PORT a une interface parallÃ¨le ayant 8 entrÃ©es et 8 sorties. Lors de l'Ã©criture Ã  l'adresse EFFF, le code Ã©crit est dÃ©fini sur les sorties, et lors de la lecture Ã  partir de la mÃªme adresse, la valeur lue correspond Ã  l'Ã©tat des entrÃ©es. Trois des sorties et une des entrÃ©es sont connectÃ©es Ã  la carte SD via un convertisseur de niveau.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La RAM est reprÃ©sentÃ©e par la puce UT62256 et dispose de 32 Ko de mÃ©moire. Ã‰tant donnÃ© que la plage d'adresses E000-EFFE est proche de 4 Ko (4095 octets), nous obtenons 8 pages sÃ©lectionnÃ©es par le bloc PORT, bits 1, 2 et 3. C'est-Ã -dire que l'Ã©criture Ã  l'adresse EFFF dÃ©finit la page conformÃ©ment Ã  ces trois bits. La lecture de ce port montre Ã©galement quelle page est actuellement sÃ©lectionnÃ©e (dans les mÃªmes bits). Au total, nous avons 32760 octets de RAM supplÃ©mentaire (4095x8str). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La puce ROM est KR573RF5. Il est connectÃ© Ã  l'espace d'adressage F000-F7FF et contient le code BSVV (BIOS), la tÃ¢che de ce code est d'initialiser la carte SD, de charger le systÃ¨me d'exploitation Ã  partir de celle-ci et de lui transfÃ©rer le contrÃ´le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En consÃ©quence, aprÃ¨s avoir allumÃ© le PC, nous tapons le Moniteur systÃ¨me GF000 et appuyons sur VK.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ã€ l'avenir, il est possible de modifier la ROM native du Moniteur systÃ¨me pour dÃ©marrer automatiquement le systÃ¨me d'exploitation Ã  partir de la carte SD, et le PC ira Ã  l'invite du moniteur standard si le tÃ©lÃ©chargement a Ã©chouÃ© ou a Ã©tÃ© interrompu, par exemple, en appuyant sur une touche. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'y repenserai.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SchÃ¨me</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Environ 2-3 heures Ã  l'ordinateur, et j'ai dessinÃ© le diagramme suivant dans EAGLE. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/457/20c/399/45720c3997d2e7861a69285379e0d26f.jpg"><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zoom</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
J'ai dessinÃ© en fonction des microcircuits que j'avais. </font><font style="vertical-align: inherit;">Il est possible que le nombre de puces logiques puisse Ãªtre rÃ©duit si d'autres portes sont utilisÃ©es, mais je n'en avais qu'une. </font><font style="vertical-align: inherit;">Et Ã  l'avenir, j'optimiserai trÃ¨s probablement le circuit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Analyse de circuit de bas niveau ...</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... enlevÃ© sous le spoiler, je pense que peu de gens sont intÃ©ressÃ©s par cette jungle.</font></font></b>
                        <div class="spoiler_text">     V3/1,     A14  A15  ,    N3   ,        .1.   V1/2      G,     IC2.    A  B,    A12  A13 . , ,        A14  A15,        A12  A13.      â€” 1110, <br>
  A15-1; A14-1; A13-1; A12-0.       N2.    ,        5  11,  - ,         ,            .  1   5,   2   11.   ,   1C ,   2C ,    .1     5,   .0 â€”  11.<br>
<br>
:       Exxx  =1,   Â«PORTÂ»,        Exxx  C=0,   Â«RAMÂ».<br>
<br>
 Â«CÂ»      ,     (A0-A11).      xFFF,  =1,   =0. :  Â«PORTÂ»   EFFF,   Â«RAMÂ»  E000-EFFE.<br>
<br>
 Â«RAMÂ»    CS  IC3,   ,  ,     E000-EFFE      .     E000-EFFE      .     EFFF      IC4,     .      Â«PORTÂ»  Â«WRÂ» c   V1/5, V1/6  V3/4.<br>
<br>
   EFFF       IC5,    <br>
   B0-B7. <br>
<br>
           .     Â« Â»   CS3      CS  . </div>
                    </div><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assemblage de disposition</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, je n'ai plus la possibilitÃ© d'empoisonner la planche Ã  la maison, et moi, en prenant un morceau de PCB double face recouvert d'une feuille, j'en ai sciÃ© le rectangle nÃ©cessaire. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce rectangle Ã©tait fermement insÃ©rÃ© dans la fente Â«interface interneÂ» du PC, ne pendait pas et ne bougeait pas. Ensuite, j'ai grattÃ© les coussinets Ã  l'arriÃ¨re et Ã  l'avant. Cela s'est plutÃ´t bien passÃ©. Puis l'agencement grossier des microcircuits et la reconnaissance des trous. Sur la face avant, je l'ai percÃ© avec une grosse perceuse afin que les bornes des microcircuits n'entrent pas en contact avec la feuille avant. Au verso, j'ai grattÃ© le pÃ©rimÃ¨tre de chaque rangÃ©e de contacts et je l'ai divisÃ© en plots de contact.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'Ã©tape suivante, j'ai mis tous les microcircuits (et la prise) et disparu de l'arriÃ¨re. Il a fallu beaucoup de temps Ã  l'installation, que j'ai rÃ©alisÃ©e avec un MGTF fin. Il a conduit le cÃ¢blage des deux cÃ´tÃ©s, de l'avant, il a soudÃ© directement aux jambes des microcircuits, de l'arriÃ¨re aux sites. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/2a3/6b0/811/2a36b081191f9121d1c009aa800343d7.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois le processus de soudage terminÃ©, j'ai dÃ©cidÃ© de faire attention au convertisseur de niveau de signal. Le fait est que la carte SD fonctionne avec une tension de 3,3V, et les puces KR1533AP6 et KR1533IR22 TTL 5v. Par consÃ©quent, j'ai dÃ» faire un petit foulard adaptateur, sur lequel les niveaux Ã©taient limitÃ©s aux diodes zener. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le signal provenant de la carte SD vers le contrÃ´leur que je viens de tirer vers la source 3.3v. RÃ©sistance 10k. Comme la pratique l'a montrÃ©, ce signal n'a pas besoin d'Ãªtre converti. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/1a9/b60/a51/1a9b60a514daff10804816ab02db91f9.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien que dans la version finale, je ferai probablement un onduleur basÃ© sur un comparateur.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai utilisÃ© un adaptateur microSD vers SD comme support de carte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En gÃ©nÃ©ral, il n'y a eu aucun problÃ¨me particulier lors de l'assemblage de la mise en page, mÃªme si j'avais peur que certains microcircuits ne fonctionnent pas correctement.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tests de disposition</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, j'ai vÃ©rifiÃ© le fonctionnement de la RAM, Ã©crit les modÃ¨les Â«AAÂ», Â«55Â», Â«F0Â» et Â«0FÂ» dans la zone E000-EFFE en utilisant la directive System Monitor Â«FÂ» et les ai vÃ©rifiÃ©s en utilisant la directive Â«DÂ». </font><font style="vertical-align: inherit;">Tout s'est avÃ©rÃ© normal. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, avec la directive Â«MÂ», j'ai commencÃ© Ã  Ã©crire diffÃ©rentes valeurs Ã  l'adresse EFFF, et Ã  regarder les changements sur les pattes du registre 153322 avec un multimÃ¨tre, les Ã©tats correspondaient aux codes enregistrÃ©s. </font><font style="vertical-align: inherit;">De plus, lors de la lecture Ã  partir de ce port, le code contenait la page sÃ©lectionnÃ©e, conformÃ©ment au plan, et mÃªme lorsque le signal MISO Ã©tait fermÃ© au sol dans le bit bas, il s'est avÃ©rÃ© Ãªtre 0 et lorsqu'il a Ã©tÃ© ouvert 1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il Ã©tait mÃªme quelque peu suspect que tous les microcircuits fonctionnent et que l'installation ait rÃ©ussi. pas d'erreurs.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSVV</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Bien sÃ»r, je n'avais pas d'outils spÃ©ciaux pour Ã©crire des programmes pour 58080. </font><font style="vertical-align: inherit;">J'ai dÃ» Ã©crire un programme dans un cahier (bloc-notes), puis le traduire manuellement en codes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CrÃ©Ã© un fichier dans l'Ã©diteur sous DOS "HIEW" et commencÃ© Ã  le remplir de codes. </font><font style="vertical-align: inherit;">Pour l'essentiel, j'ai pris mon projet sous AVR, dans lequel il y avait une initialisation standard de la carte SD. </font><font style="vertical-align: inherit;">Le projet Ã©tait ancien et n'utilisait aucun systÃ¨me de fichiers, juste un enregistreur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai d'abord Ã©crit une fonction de bas niveau de l'interface de programmation SPI, puis une routine d'initialisation de carte SD de haut niveau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'est avÃ©rÃ© quelque chose comme cet algorithme ...</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... qui est mis sous le spoiler, je pense qu'il est dÃ©jÃ  connu de tout le monde.</font></font></b>
                        <div class="spoiler_text">1.    ()  90;<br>
2.  CS  .1   10  FF;<br>
3.  CS  .0;<br>
4.  CMD0;<br>
5.   01,    7;<br>
6.  .  =0,    ,    2;<br>
7.  CMD8;<br>
8.  ACMD41;<br>
9.   00,   11<br>
10.  .  =0,    ,    8;<br>
11.  CMD58.<br>
12.  2       EFFE.<br>
13.  .<br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Le registre de la carte OCR a Ã©galement Ã©tÃ© lu dans la routine d'initialisation et le 2Ã¨me octet a Ã©tÃ© Ã©crit Ã  l'adresse EFFE. </font><font style="vertical-align: inherit;">Cela Ã©tait nÃ©cessaire pour dÃ©terminer le type de carte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas de SDSC - 80h, et dans le cas de SDHC - C0h. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Si l'initialisation n'a pas rÃ©ussi, le message Â«SD CARD ERRORÂ» s'est affichÃ©, puis le moniteur s'est Ã©teint sans rÃ©initialisation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai converti ce BSVV en WAV et l'ai tÃ©lÃ©chargÃ© sur le PC via l'entrÃ©e bande, puis je l'ai dÃ©boguÃ©, corrigÃ© le code source et tÃ©lÃ©chargÃ© Ã  nouveau.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Des ponts</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai maintenant de la RAM supplÃ©mentaire, d'une taille de 32 760 octets, divisÃ©e en 8 pages. Mais comment naviguer entre les pages? Comment un programme exÃ©cutÃ© sur la premiÃ¨re page peut-il invoquer une routine situÃ©e sur la quatriÃ¨me? </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour rÃ©soudre ce problÃ¨me, j'ai fourni des ponts logiciels. Un pont est une petite zone dans la ROM qui sert de mÃ©diateur au transfert de contrÃ´le.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, l'exÃ©cution du code doit transfÃ©rer le contrÃ´le Ã  la page numÃ©ro 3, Ã  l'adresse E4B5. Ensuite, le code d'exÃ©cution place les 12 bits infÃ©rieurs (4B5) dans la paire de registres du processeur HL, et dans les quatre bits supÃ©rieurs met la valeur 3 - le numÃ©ro de page. Maintenant, dans la paire de registres HL, la valeur 34B5 est Ã©crite. Et le code saute (JMP) dans la zone ROM, qui est appelÃ©e le pont JMP, il va simplement Ã  une adresse fixe dans la ROM. Le code dans cette zone extrait le numÃ©ro de page des bits hauts de la paire de registres HL et les Ã©crit dans le registre du bloc PORT Ã  l'adresse EFFF. La troisiÃ¨me page de RAM est maintenant affichÃ©e dans la zone E000-EFFE. Le programme JMP-Bridge rÃ©initialise les quatre bits de poids fort de la paire de registres HL et y Ã©crit Â«EÂ». Maintenant, dans la paire de registres HL, il y a dÃ©jÃ  une adresse physique E4B5, et ici le programme JMP-Bridge lui transfÃ¨re le contrÃ´le.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela transfÃ¨re le contrÃ´le entre les pages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a un CALL-Bridge, il est nÃ©cessaire d'appeler un sous-programme avec un retour, et diffÃ¨re de JMP-Bridge en enregistrant la page actuelle sur la pile, et la procÃ©dure inverse pour le retour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux ponts suivants sont STA-Bridge et LDA-Bridge. </font><font style="vertical-align: inherit;">Comme les noms le suggÃ¨rent, le premier Ã©crit le registre de la batterie dans une adresse logique (en HL), et le second lit les donnÃ©es de l'adresse logique dans ce registre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GrÃ¢ce Ã  ces deux ponts, un programme s'exÃ©cutant Ã  partir d'une page peut stocker des donnÃ©es dans une autre.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chargement du systÃ¨me d'exploitation</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous regardez le secteur de dÃ©marrage de la carte SD, vous pouvez voir que le texte Â«Erreur de disque, appuyez sur n'importe quelle touche pour redÃ©marrerÂ» se trouve aux adresses 1AC-1D4. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a56/a5a/a9b/a56a5aa9bd2e2f2a81499a567ad2da25.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oui, c'est tellement Ã©trange Ã  quoi cela ressemble sur la photo, car l'encodage des caractÃ¨res de Mikroshi ne coÃ¯ncide pas avec ASCII. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai dÃ©cidÃ© d'utiliser cette zone pour y placer les donnÃ©es pour tÃ©lÃ©charger le PC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, je mets le code 00 en position 1BA, et ainsi je coupe le record. Maintenant, juste "Erreur de disque" devrait s'afficher et c'est tout. Les octets restants sont Ã  moi. Le principe est simple, 6 octets de signature MicrOS, et 4 octets d'adresse sur la carte SD du dÃ©but du fichier avec OS. Dans BSVV, j'ai Ã©crit, aprÃ¨s avoir reÃ§u le secteur de dÃ©marrage de la carte SD, la signature est vÃ©rifiÃ©e, et s'il y en a une, prenez les 4 octets suivants et utilisez-la comme adresse de secteur pour charger le systÃ¨me d'exploitation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il n'y a pas de signature, le message Â«OS DOWNLOAD ERRORÂ» s'affiche et le Moniteur systÃ¨me s'Ã©teint sans rÃ©initialisation.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, enfin, tout fonctionne. </font><font style="vertical-align: inherit;">BSVV est Ã©crit, mais j'ai encore besoin de l'Ã©crire sur ROM. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/49a/cb4/d36/49acb4d36b5b9709eba320cca18b1b39.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pour cela, je dois modifier toutes les adresses des appels et des sauts de sous-programme, car ce processeur a un adressage absolu. </font><font style="vertical-align: inherit;">Et j'ai Ã©crit BSVV pour la rÃ©gion 6000-67FF Ã  charger en RAM. </font><font style="vertical-align: inherit;">Mais maintenant, nous devons changer tous les 6xxx en Fxxx. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, je suis dans les conditions Â«popanetskyÂ». </font><font style="vertical-align: inherit;">J'ai un programmeur ROM, mais c'est un ancien, sous un port LPT. </font><font style="vertical-align: inherit;">Et il n'y a pas un seul ordinateur avec LPT. </font><font style="vertical-align: inherit;">Mais il y a une paire d'Atmega32A, dans le package PDIP40 et une planche Ã  pain. </font><font style="vertical-align: inherit;">Vous devrez peut-Ãªtre Ã©muler LPT Ã  l'aide d'AVR. </font><font style="vertical-align: inherit;">Mais peut-Ãªtre que tout ira bien ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout pour l'instant. </font><font style="vertical-align: inherit;">Merci pour l'attention! </font><font style="vertical-align: inherit;">Ã€ suivreâ€¦</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr500796/index.html">Ce qu'il faut analyser avant de concevoir une interface</a></li>
<li><a href="../fr500798/index.html">Maintenant je sais que mon collÃ¨gue a du python, ou comment notre Ã©quipe entretient des relations Ã  distance pendant la distance</a></li>
<li><a href="../fr500800/index.html">Pourquoi les logiciels ne sont pas toujours une marchandise et oÃ¹ profitent les TI</a></li>
<li><a href="../fr500804/index.html">DÃ©briefing de l'Audi A8</a></li>
<li><a href="../fr500806/index.html">Escorte</a></li>
<li><a href="../fr500818/index.html">Interfaces de neuro-ordinateurs pour les jeux: ce que l'on sait aujourd'hui</a></li>
<li><a href="../fr500822/index.html">Qui enterrera le Web moderne?</a></li>
<li><a href="../fr500840/index.html">Analyse de trame Mortal Kombat 11</a></li>
<li><a href="../fr500844/index.html">Allez optimisations dans VictoriaMetrics. Alexander Valyalkin</a></li>
<li><a href="../fr500848/index.html">MVP par un seul dÃ©veloppeur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>