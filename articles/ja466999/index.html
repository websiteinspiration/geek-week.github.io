<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨ğŸ» ğŸ‘©ğŸ¾â€ğŸš’ ğŸ§ Pythonã®ä¸€èˆ¬çš„ãªCLIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ¯”è¼ƒï¼šã‚¯ãƒªãƒƒã‚¯ã€ã‚»ãƒ¡ãƒ³ãƒˆã€ç«ãªã© ğŸ‘¬ ğŸï¸ ğŸ’“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pythonã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æœ€é©ãªè¨€èªã§ã‚ã‚Šã€ã“ã‚Œã‚‰ã®ã‚¿ã‚¹ã‚¯ã®ãŸã‚ã®å¤šæ•°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å¼·èª¿ã—ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€ã©ã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå­˜åœ¨ã—ã¾ã™ã‹ï¼Ÿãã—ã¦ã©ã¡ã‚‰ã‚’ã¨ã‚‹ã¹ãã‹ï¼Ÿã“ã®è³‡æ–™ã¯ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ä¸–ç•Œã§äººæ°—ã®é«˜ã„ãƒ„ãƒ¼ãƒ«ã§ã¯ãªãã€2ç•ªç›®ã®è³ªå•ã«ç­”ãˆã‚‹è©¦ã¿ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚
 
 èª­ã¿ã‚„ã™ã...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pythonã®ä¸€èˆ¬çš„ãªCLIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ¯”è¼ƒï¼šã‚¯ãƒªãƒƒã‚¯ã€ã‚»ãƒ¡ãƒ³ãƒˆã€ç«ãªã©</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466999/"><img src="https://habrastorage.org/webt/rp/ek/be/rpekben_u6jtlwru-flsslxk70e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æœ€é©ãªè¨€èªã§ã‚ã‚Šã€ã“ã‚Œã‚‰ã®ã‚¿ã‚¹ã‚¯ã®ãŸã‚ã®å¤šæ•°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å¼·èª¿ã—ã¦ã„ã¾ã™ã€‚</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã—ã‹ã—ã€ã©ã®ã‚ˆã†ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå­˜åœ¨ã—ã¾ã™ã‹ï¼Ÿ</font><font style="vertical-align: inherit;">ãã—ã¦ã©ã¡ã‚‰ã‚’ã¨ã‚‹ã¹ãã‹ï¼Ÿ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®è³‡æ–™ã¯ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ä¸–ç•Œã§äººæ°—ã®é«˜ã„ãƒ„ãƒ¼ãƒ«ã§ã¯ãªãã€2ç•ªç›®ã®è³ªå•ã«ç­”ãˆã‚‹è©¦ã¿ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èª­ã¿ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯2ã¤ã®æŠ•ç¨¿ã«åˆ†ã‹ã‚Œã¦ã„ã¾ã™ã€‚1ã¤ç›®ã¯æœ€ã‚‚äººæ°—ã®ã‚ã‚‹6ã¤ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¯”è¼ƒã—ã€2ã¤ç›®ã¯äººæ°—ãŒä½ãã€ã‚ˆã‚Šå…·ä½“çš„ã§ã™ãŒã€æ³¨ç›®ã«å€¤ã—ã¾ã™ã€‚</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å„ä¾‹ã§ã¯ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todolib</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãŒPython 3.7 </font><font style="vertical-align: inherit;">ã§</font><font style="vertical-align: inherit;">è¨˜è¿°ã•ã‚Œã¦ãŠã‚Š</font><font style="vertical-align: inherit;">ã€ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã€è¡¨ç¤ºã€ã‚¿ã‚°ä»˜ã‘ã€å‰Šé™¤ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ®‹ã‚Šã¯ã€ç‰¹å®šã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã®å®Ÿè£…ã®å˜ç´”ã•ã‚’æ¡ä»¶ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¿ã‚¹ã‚¯è‡ªä½“ã¯jsonãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚jsonãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€åˆ¥ã®å‘¼ã³å‡ºã—ã§ä¿å­˜ã•ã‚Œã¾ã™-ã‚µãƒ³ãƒ—ãƒ«ã®è¿½åŠ æ¡ä»¶ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã«åŠ ãˆã¦ã€å®Ÿè£…ã”ã¨ã«ç°¡å˜ãªãƒ†ã‚¹ãƒˆãŒè¨˜è¿°ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä»¥ä¸‹ã®ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’å«ã‚€Pytestã¯ã€ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@pytest.fixture(autouse=True)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">db</span>(<span class="hljs-params">monkeypatch</span>):</span>
    <span class="hljs-string">"""
    monkeypatch     ,
          
    """</span>
    value = {<span class="hljs-string">"tasks"</span>: []}<font></font>
    monkeypatch.setattr(todolib.TodoApp, <span class="hljs-string">"get_db"</span>, <span class="hljs-keyword">lambda</span> _: value)
    <span class="hljs-keyword">return</span> value<font></font>
<font></font>
<span class="hljs-meta">@pytest.yield_fixture(autouse=True)</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">check</span>(<span class="hljs-params">db</span>):</span>
    <span class="hljs-string">"""      """</span>
    <span class="hljs-keyword">yield</span>
    <span class="hljs-keyword">assert</span> db[<span class="hljs-string">"tasks"</span>] <span class="hljs-keyword">and</span> db[<span class="hljs-string">"tasks"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"title"</span>] == <span class="hljs-string">"test"</span><font></font>
<font></font>
<span class="hljs-comment"># ,     </span>
EXPECTED = <span class="hljs-string">"Task 'test' created with number 1.\n"</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŸå‰‡ã¨ã—ã¦ã€ä¸Šè¨˜ã®ã™ã¹ã¦ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å®Ÿè¨¼ã™ã‚‹ã®ã«ååˆ†ã§ã™ã€‚</font><font style="vertical-align: inherit;">å®Œå…¨ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã®</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒªãƒã‚¸ãƒˆãƒªã§</font><font style="vertical-align: inherit;">å…¥æ‰‹ã§ã</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">argparse</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">argparse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ˜ç¢ºãªåˆ©ç‚¹ã‚’æŒã£ã¦ã„ã‚‹-ãã‚ŒãŒæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚Šã€ãã®APIã‚’å­¦ã¶ã“ã¨ã¯é›£ã—ã„ã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼šãƒ‘ãƒ¼ã‚µãƒ¼ãŒã‚ã‚Šã€å¼•æ•°å†…ã®å¼•æ•°ãŒã‚ã‚Šã¾ã™æŒã£ã¦ã„ã‚‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¿ã‚¤ãƒ—ã§</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DEST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŠã‚ˆã³</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ˜ãƒ«ãƒ—</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚µãƒ–ãƒ‘ãƒ¼ã‚µãƒ¼</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -å¼•æ•°ã¨ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸€éƒ¨ã‚’åˆ¥ã€…ã®ã‚³ãƒãƒ³ãƒ‰ã«åˆ†é›¢ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ã‚µãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€è¦‹ã—ãŸã¨ã“ã‚ã€çã—ã„ã“ã¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ãƒ‘ãƒ¼ã‚µãƒ¼ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ç§ã®æ„è¦‹ã§ã¯ã€ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨æ¯”è¼ƒã—ãŸå ´åˆã€èª­ã¿ã‚„ã™ã•ã¯æœ€é«˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã•ã¾ã–ã¾ãªã‚³ãƒãƒ³ãƒ‰ã®å¼•æ•°ãŒ1ã‹æ‰€ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_parser</span>():</span>
    parser = argparse.ArgumentParser(<span class="hljs-string">"Todo notes - argparse version"</span>)<font></font>
    parser.add_argument(<font></font>
        <span class="hljs-string">"--verbose"</span>, <span class="hljs-string">"-v"</span>, action=<span class="hljs-string">"store_true"</span>, help=<span class="hljs-string">"Enable verbose mode"</span><font></font>
    )<font></font>
    parser.add_argument(<span class="hljs-string">"--version"</span>, <span class="hljs-string">"-V"</span>, action=<span class="hljs-string">"store_true"</span>, help=<span class="hljs-string">"Show version"</span>)<font></font>
    subparsers = parser.add_subparsers(title=<span class="hljs-string">"Commands"</span>, dest=<span class="hljs-string">"cmd"</span>)<font></font>
<font></font>
    add = subparsers.add_parser(<span class="hljs-string">"add"</span>, help=<span class="hljs-string">"Add new task"</span>)<font></font>
    add.add_argument(<span class="hljs-string">"title"</span>, help=<span class="hljs-string">"Todo title"</span>)<font></font>
<font></font>
    show = subparsers.add_parser(<span class="hljs-string">"show"</span>, help=<span class="hljs-string">"Show tasks"</span>)<font></font>
    show.add_argument(<font></font>
        <span class="hljs-string">"--show-done"</span>, action=<span class="hljs-string">"store_true"</span>, help=<span class="hljs-string">"Include done tasks in the output"</span><font></font>
    )<font></font>
<font></font>
    done = subparsers.add_parser(<span class="hljs-string">"done"</span>, help=<span class="hljs-string">"Mark task as done"</span>)<font></font>
    done.add_argument(<span class="hljs-string">"number"</span>, type=int, help=<span class="hljs-string">"Task number"</span>)<font></font>
<font></font>
    remove = subparsers.add_parser(<span class="hljs-string">"remove"</span>, help=<span class="hljs-string">"Remove task"</span>)<font></font>
    remove.add_argument(<span class="hljs-string">"number"</span>, type=int, help=<span class="hljs-string">"Task number"</span>)<font></font>
<font></font>
    <span class="hljs-keyword">return</span> parser
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚¤ãƒ³</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãã—ã¦ã€ã“ã‚Œã‚‚åŒã˜ã“ã¨ã§ã™ã€‚å¼•æ•°ã‚’è§£æã™ã‚‹ã“ã¨ã‚’é™¤ã„ã¦ã€ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ã“ã‚Œä»¥ä¸Šä½•ã‚‚ã§ãã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ãƒ­ã‚¸ãƒƒã‚¯ã¯ç‹¬ç«‹ã—ã¦1ã‹æ‰€ã§è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸€æ–¹ã§-ç”Ÿãã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚Šã€ã‚‚ã†ä¸€æ–¹ã§ã¯ã‚ˆã‚Šè‰¯ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€ãã®æ–¹æ³•ã¯ã¾ã æ˜ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPDï¼š</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ°—ã¥ã„ãŸã‚ˆã†ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å®Ÿéš›ã€ã‚µãƒ–ãƒ‘ãƒ¼ã‚µãƒ¼ã¯set_defaultsï¼ˆfunc = fooï¼‰ã‚’ä»‹ã—ã¦é–¢æ•°ã‚’è¨­å®šã§ãã¾ã™ã€‚ã¤ã¾ã‚Šã€argparseã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ¡ã‚¤ãƒ³ã‚’å°ã•ã„ã‚µã‚¤ã‚ºã«çŸ­ç¸®ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç”Ÿæ´»ã—ã€å­¦ã³ã¾ã™ã€‚</font></font></i><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">raw_args=None</span>):</span>
    <span class="hljs-string">""" Argparse example entrypoint """</span><font></font>
    parser = get_parser()<font></font>
    args = parser.parse_args(raw_args)<font></font>
    logging.basicConfig()<font></font>
<font></font>
    <span class="hljs-keyword">if</span> args.verbose:<font></font>
        logging.getLogger(<span class="hljs-string">"todolib"</span>).setLevel(logging.INFO)
    <span class="hljs-keyword">if</span> args.version:<font></font>
        print(lib_version)<font></font>
        exit(<span class="hljs-number">0</span>)<font></font>
    cmd = args.cmd<font></font>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> cmd:<font></font>
        parser.print_help()<font></font>
        exit(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">with</span> TodoApp.fromenv() <span class="hljs-keyword">as</span> app:
        <span class="hljs-keyword">if</span> cmd == <span class="hljs-string">"add"</span>:<font></font>
            task = app.add_task(args.title)<font></font>
            print(task, <span class="hljs-string">"created with number"</span>, task.number, end=<span class="hljs-string">".\n"</span>)
        <span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">"show"</span>:<font></font>
            app.print_tasks(args.show_done)<font></font>
        <span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">"done"</span>:<font></font>
            task = app.task_done(args.number)<font></font>
            print(task, <span class="hljs-string">"marked as done."</span>)
        <span class="hljs-keyword">elif</span> cmd == <span class="hljs-string">"remove"</span>:<font></font>
            task = app.remove_task(args.number)<font></font>
            print(task, <span class="hljs-string">"removed from list."</span>)
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆä¸­</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®å‡ºåŠ›ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capsys</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã‚’</font><i><font style="vertical-align: inherit;">ä½¿ç”¨</font></i><font style="vertical-align: inherit;">ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€stdoutãŠã‚ˆã³stderrã‹ã‚‰ã®ãƒ†ã‚­ã‚¹ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_argparse</span>(<span class="hljs-params">capsys</span>):</span>
    todo_argparse.main([<span class="hljs-string">"add"</span>, <span class="hljs-string">"test"</span>])<font></font>
    out, _ = capsys.readouterr()<font></font>
    <span class="hljs-keyword">assert</span> out == EXPECTED
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆè¨ˆ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ©ç‚¹-è§£æã®ãŸã‚ã®è‰¯ã„æ©Ÿä¼šã®ã‚»ãƒƒãƒˆã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å­˜åœ¨ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çŸ­æ‰€-argparseã¯å¼•æ•°ã®ã¿ã‚’è§£æã—ã¾ã™ã€‚ãƒ¡ã‚¤ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ã®ã»ã¨ã‚“ã©ã¯è‡ªåˆ†ã§ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ãƒ†ã‚¹ãƒˆã§çµ‚äº†ã‚³ãƒ¼ãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹æ–¹æ³•ã¯æ˜ç¢ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docopt</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">docopt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯å°ã•ãªï¼ˆargparseã‚’ä½¿ç”¨ã—ãŸ2500ã¨æ¯”è¼ƒã—ã¦600è¡Œæœªæº€ï¼‰ãƒ‘ãƒ¼ã‚µãƒ¼ã§ã‚ã‚Šã€GitHubã®èª¬æ˜ã‚’å¼•ç”¨ã™ã‚‹ã“ã¨ã§ç¬‘é¡”ã«ãªã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">docoptã®ä¸»ãªã‚¢ã‚¤ãƒ‡ã‚¢ã¯ã€ãŸã¨ãˆã°docstringã®ã‚ˆã†ã«ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ãƒ†ã‚­ã‚¹ãƒˆã§æ–‡å­—ã©ãŠã‚Šã«è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒã˜githubã®docopt&gt; 6700ã¤æ˜Ÿã§ã€å°‘ãªãã¨ã‚‚22åƒã®ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã“ã‚Œã¯pythonå®Ÿè£…ã§ã®ã¿ã§ã™ï¼</font><font style="vertical-align: inherit;">docoptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸ã«ã¯ã€Cã‚„PHPã‹ã‚‰CoffeeScriptã€ã•ã‚‰ã«ã¯Rã¾ã§ã€ã•ã¾ã–ã¾ãªè¨€èªç”¨ã®å¤šãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚ˆã†ãªã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ç°¡æ½”ã•ã¨å˜ç´”ã•ã«ã‚ˆã£ã¦ã®ã¿èª¬æ˜ã§ãã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ã‚µãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
argparseã¨æ¯”è¼ƒã™ã‚‹ã¨ã€ã“ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã¯å¤§ããªå‰é€²ã§ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-string">"""Todo notes on docopt.

Usage:
  todo_docopt [-v | -vv ] add &lt;task&gt;
  todo_docopt [-v | -vv ] show --show-done
  todo_docopt [-v | -vv ] done &lt;number&gt;
  todo_docopt [-v | -vv ] remove &lt;number&gt;
  todo_docopt -h | --help
  todo_docopt --version

Options:
  -h --help     Show help.
  -v --verbose  Enable verbose mode.
"""</span>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚¤ãƒ³</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä¸€èˆ¬ã«ã€ã™ã¹ã¦ãŒargparseã¨åŒã˜ã§ã™ãŒã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è©³ç´°ã«</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã„ãã¤ã‹ã®å€¤ï¼ˆ0-2ï¼‰ãŒã‚ã‚Šã€å¼•æ•°ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ç•°ãªã‚Šã¾ã™ï¼šdocoptã¯å±æ€§ã‚’æŒã¤åå‰ç©ºé–“ã§ã¯ãªãã€ã‚³ãƒãƒ³ãƒ‰ã®é¸æŠãŒç¤ºã•ã‚Œã‚‹ãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒªã®ã¿ã‚’è¿”ã—ã¾ã™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifã«</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã€å½¼å¥³ã®ãƒ–ãƒ¼ãƒ«å€¤ã‚’é€šã—ã¦</font><font style="vertical-align: inherit;">ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">argv=None</span>):</span><font></font>
    args = docopt(__doc__, argv=argv, version=lib_version)<font></font>
    log.setLevel(levels[args[<span class="hljs-string">"--verbose"</span>]])<font></font>
    logging.basicConfig()<font></font>
    log.debug(<span class="hljs-string">"Arguments: %s"</span>, args)<font></font>
<font></font>
    <span class="hljs-keyword">with</span> TodoApp.fromenv() <span class="hljs-keyword">as</span> app:
        <span class="hljs-keyword">if</span> args[<span class="hljs-string">"add"</span>]:<font></font>
            task = app.add_task(args[<span class="hljs-string">"&lt;task&gt;"</span>])<font></font>
            print(task, <span class="hljs-string">"created with number"</span>, task.number, end=<span class="hljs-string">".\n"</span>)
        <span class="hljs-keyword">elif</span> args[<span class="hljs-string">"show"</span>]:<font></font>
            app.print_tasks(args[<span class="hljs-string">"--show-done"</span>])
        <span class="hljs-keyword">elif</span> args[<span class="hljs-string">"done"</span>]:<font></font>
            task = app.task_done(args[<span class="hljs-string">"&lt;number&gt;"</span>])<font></font>
            print(task, <span class="hljs-string">"marked as done."</span>)
        <span class="hljs-keyword">elif</span> args[<span class="hljs-string">"remove"</span>]:<font></font>
            task = app.remove_task(args[<span class="hljs-string">"&lt;number&gt;"</span>])<font></font>
            print(task, <span class="hljs-string">"removed from list."</span>)
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆä¸­</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
argparseãƒ†ã‚¹ãƒˆã«ä¼¼ã¦ã„ã¾ã™ï¼š</font></font><br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_docopt</span>(<span class="hljs-params">capsys</span>):</span>
    todo_docopt.main([<span class="hljs-string">"add"</span>, <span class="hljs-string">"test"</span>])<font></font>
    out, _ = capsys.readouterr()<font></font>
    <span class="hljs-keyword">assert</span> out == EXPECTED
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆè¨ˆ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åˆ©ç‚¹-ãƒ‘ãƒ¼ã‚µãƒ¼ã®ã‚³ãƒ¼ãƒ‰ãŒã¯ã‚‹ã‹ã«å°‘ãªã„ã“ã¨ã€ã‚³ãƒãƒ³ãƒ‰ã¨å¼•æ•°ã®è¨˜è¿°ã¨èª­ã¿å–ã‚Šã®å®¹æ˜“ã•ã€çµ„ã¿è¾¼ã¿ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãšçŸ­æ‰€ã€argparseã¨åŒã˜-ã®ãƒ­ã‚¸ãƒƒã‚¯ã®å¤šãã®</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸»è¦ãª</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€ã‚ãªãŸã¯ãƒ†ã‚¹ãƒˆçµ‚äº†ã‚³ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€docoptã®ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ0.6.2ï¼‰ã¯ã¾ã å®‰å®šã—ã¦ãŠã‚‰ãšã€ä»Šå¾Œã‚‚ãã†ãªã‚‹å¯èƒ½æ€§ã¯ä½ã„ã§ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯</font><font style="vertical-align: inherit;">2012å¹´ã‹ã‚‰2013å¹´æœ«ã¾ã§</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ´»ç™ºã«</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€æœ€å¾Œã®ã‚³ãƒŸãƒƒãƒˆã¯12æœˆ17æ—¥ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ç¾æ™‚ç‚¹ã§æœ€ã‚‚ä¸æ„‰å¿«ãªã®ã¯ã€ä¸€éƒ¨ã®docoptå¸¸é€£ãŒãƒ†ã‚¹ãƒˆä¸­ã«DeprecationWarningã‚’å¼•ãèµ·ã“ã™ã“ã¨ã§ã™ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒªãƒƒã‚¯</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒªãƒƒã‚¯ã¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> argparseã‚„docoptã¨ã¯æ©Ÿèƒ½ã®æ•°ã¨ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ä»‹ã—ã¦ã‚³ãƒãƒ³ãƒ‰ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è¨˜è¿°ã™ã‚‹æ–¹æ³•</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ãŒ</font></a><font style="vertical-align: inherit;">æ ¹æœ¬çš„ã«ç•°ãªã‚Šã€ãƒ­ã‚¸ãƒƒã‚¯è‡ªä½“ã¯å¤§ããª</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã§ã¯ãªãå€‹åˆ¥ã®é–¢æ•°ã«åˆ†é›¢ã™ã‚‹ã“ã¨ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">è‘—è€…ã¯ã€Clickã«ã¯å¤šãã®è¨­å®šãŒã‚ã‚‹ã¨ä¸»å¼µã—ã¦ã„ã¾ã™ãŒã€æ¨™æº–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§ååˆ†ã§ã™ã€‚</font><font style="vertical-align: inherit;">æ©Ÿèƒ½ã®ä¸­ã§ã¯ã€ãƒã‚¹ãƒˆã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã¨ãã®é…å»¶èª­ã¿è¾¼ã¿ãŒå¼·èª¿ã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯éå¸¸ã«äººæ°—ãŒã‚ã‚Šã¾ã™ï¼š8100å€‹ã‚’è¶…ãˆã‚‹ã‚¹ã‚¿ãƒ¼ã‚’æŒã¡ã€å°‘ãªãã¨ã‚‚174åƒï¼ˆï¼ï¼‰å€‹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã«åŠ ãˆã¦ã€ã¾ã é–‹ç™ºä¸­ã§ã™ï¼šãƒãƒ¼ã‚¸ãƒ§ãƒ³7.0ãŒ2018å¹´ç§‹ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã€æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆã¨ãƒãƒ¼ã‚¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã“ã®æ—¥ã«è¡¨ç¤ºã•ã‚Œã¾ã™æ—¥ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ã‚µãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã§ã¯ã€ç§ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confirmation_optionã®</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿</font><font style="vertical-align: inherit;">ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ç¢ºèªã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ãã‚Œã‚’ç¤ºã™ãŸã‚ã«ã€ã‚¿ã‚¹ã‚¯ã®ãƒªã‚¹ãƒˆå…¨ä½“ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ãƒ¯ã‚¤ãƒ—ã‚³ãƒãƒ³ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs">levels = [logging.WARN, logging.INFO, logging.DEBUG]<font></font>
<font></font>
pass_app = click.make_pass_decorator(TodoApp)<font></font>
<font></font>
<font></font>
<span class="hljs-meta">@click.group()</span>
<span class="hljs-meta">@click.version_option(lib_version, prog_name="todo_click")</span>
<span class="hljs-meta">@click.option("-v", "--verbose", count=True)</span>
<span class="hljs-comment"># click   ,    </span>
<span class="hljs-meta">@click.option("--db", help="Path to the database file")</span>
<span class="hljs-meta">@click.pass_context</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cli</span>(<span class="hljs-params">ctx, verbose, db</span>):</span>
    <span class="hljs-string">"""Todo notes - click version."""</span>
    level = levels[min(verbose, <span class="hljs-number">2</span>)]<font></font>
    logging.basicConfig(level=level)<font></font>
    logging.getLogger(<span class="hljs-string">"todolib"</span>).setLevel(level)<font></font>
    ctx.obj = TodoApp.fromenv(db)<font></font>
    atexit.register(ctx.obj.save)<font></font>
<font></font>
<font></font>
<span class="hljs-meta">@cli.command()</span>
<span class="hljs-meta">@click.argument("task")</span>
<span class="hljs-meta">@pass_app</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">app, task</span>):</span>
    <span class="hljs-string">""" Add new task. """</span><font></font>
    task = app.add_task(task)<font></font>
    click.echo(<span class="hljs-string">f"<span class="hljs-subst">{task}</span> created with number <span class="hljs-subst">{task.number}</span>."</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-meta">@cli.command()</span>
<span class="hljs-meta">@click.option("--show-done", is_flag=True, help="Include done tasks")</span>
<span class="hljs-meta">@pass_app</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span>(<span class="hljs-params">app, show_done</span>):</span>
    <span class="hljs-string">""" Show current tasks. """</span><font></font>
    app.print_tasks(show_done)<font></font>
<font></font>
<font></font>
<span class="hljs-meta">@cli.command()</span>
<span class="hljs-meta">@click.argument("number", type=int)</span>
<span class="hljs-meta">@pass_app</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">done</span>(<span class="hljs-params">app, number</span>):</span>
    <span class="hljs-string">""" Mark task as done. """</span><font></font>
    task = app.task_done(number)<font></font>
    click.echo(<span class="hljs-string">f"<span class="hljs-subst">{task}</span> marked as done."</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-meta">@cli.command()</span>
<span class="hljs-meta">@click.argument("number", type=int)</span>
<span class="hljs-meta">@pass_app</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">remove</span>(<span class="hljs-params">app, number</span>):</span>
    <span class="hljs-string">""" Remove task from the list. """</span><font></font>
    task = app.remove_task(number)<font></font>
    click.echo(<span class="hljs-string">f"<span class="hljs-subst">{task}</span> removed from the list."</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-meta">@cli.command()</span>
<span class="hljs-meta">@click.confirmation_option(prompt="Are you sure you want to remove database")</span>
<span class="hljs-meta">@pass_app</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">wipe</span>(<span class="hljs-params">app</span>):</span>
    <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> app.list_tasks():<font></font>
        task.remove()<font></font>
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚¤ãƒ³</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã“ã§Clickã®ä¸»ãªåˆ©ç‚¹ã«é­é‡ã—ã¾ã™ã€‚ã‚³ãƒãƒ³ãƒ‰ã®ãƒ­ã‚¸ãƒƒã‚¯ãŒæ©Ÿèƒ½ã«ã‚ˆã£ã¦åˆ†é›¢ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ¡ã‚¤ãƒ³ã«ã¯ã»ã¨ã‚“ã©ä½•ã‚‚æ®‹ã£ã¦ã„ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ç’°å¢ƒå¤‰æ•°ã‹ã‚‰å¼•æ•°ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å—ã‘å–ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã®æ©Ÿèƒ½ã‚‚ç¤ºã—ã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
    cli(auto_envvar_prefix=<span class="hljs-string">"TODO"</span>)
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆä¸­</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clickã®å ´åˆã€</font><font style="vertical-align: inherit;">ãã®ã‚ˆã†ãªã“ã¨ã®ãŸã‚ã®ãƒ©ãƒ³ãƒŠãƒ¼ã‚’æŒã¤</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">click.testing</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ã®ã§ã€sys.stdoutã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸ</font><font style="vertical-align: inherit;">ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CliRunner</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è‡ªä½“ãŒå‡ºåŠ›ã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã™ã‚‹</font><font style="vertical-align: inherit;">ã ã‘ã§ãªã</font><font style="vertical-align: inherit;">ã€çµ‚äº†ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã®ã™ã¹ã¦ãŒpytestã‚’ä½¿ç”¨ã—ã€æ¨™æº–ã¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šå–å¾—ã™ã‚‹ã“ã¨ãªãã€ãƒ†ã‚¹ãƒˆã‚¯ãƒªãƒƒã‚¯ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã«ã‚ãªãŸã‚’å¯èƒ½ã«ã™ã‚‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</font><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> click.testing
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_click</span>():</span><font></font>
    runner = click.testing.CliRunner()<font></font>
    result = runner.invoke(todo_click.cli, [<span class="hljs-string">"add"</span>, <span class="hljs-string">"test"</span>])
    <span class="hljs-keyword">assert</span> result.exit_code == <span class="hljs-number">0</span>
    <span class="hljs-keyword">assert</span> result.output == EXPECTED
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆè¨ˆ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã‚Œã¯ã‚¯ãƒªãƒƒã‚¯ãŒã§ãã‚‹ã“ã¨ã®ã»ã‚“ã®ä¸€éƒ¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">æ®‹ã‚Šã®APIã‹ã‚‰-å€¤ã®æ¤œè¨¼ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¨ã®çµ±åˆï¼ˆè‰²ã€ãƒšãƒ¼ã‚¸ãƒ£ãƒ¼ã€ã‚ˆã‚Šå°‘ãªã„ã€é€²è¡ŒçŠ¶æ³ãƒãƒ¼ãªã©ï¼‰ã€çµæœã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãªã©ã€‚</font><font style="vertical-align: inherit;">ã‚ãªãŸã¯</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã§</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½¼ã‚‰ã®ä¾‹ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ã</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¾ã™</font></a><font style="vertical-align: inherit;">ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é•·æ‰€ï¼šã‚ã‚‰ã‚†ã‚‹æ©Ÿä¼šã®ãŸã‚ã®å¤šãã®ãƒ„ãƒ¼ãƒ«ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ã§ã‚ã‚‹ã¨åŒæ™‚ã«ã€ãƒãƒ¼ãƒ ã‚’èª¬æ˜ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã€ãƒ†ã‚¹ãƒˆã®å®¹æ˜“ã•ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ©ã‚¤ãƒ•ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çŸ­æ‰€ï¼šã€Œã‚¯ãƒªãƒƒã‚¯ã€ã®æ¬ ç‚¹ã¯ä½•ã§ã™ã‹ï¼Ÿã“ã‚Œã¯é›£ã—ã„è³ªå•ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãŸã¶ã‚“ã€å½¼ã¯æ¬¡ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ä½•ãŒã§ãã‚‹ã®ã‹çŸ¥ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç«</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¯ã€Googleã‹ã‚‰ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ç”¨ã®è‹¥ã„ï¼ˆ2017å¹´ã«ç™»å ´ã—ãŸï¼‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ãªãã€é€èªçš„ã«å¼•ç”¨ã—ã¦ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ã‚‰ã‚†ã‚‹</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Python </font><i><font style="vertical-align: inherit;">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ</font></i><font style="vertical-align: inherit;">ã‹ã‚‰ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™</font><font style="vertical-align: inherit;">ã€‚</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¨ã‚Šã‚ã‘ã€fireã¯ã‚³ãƒ¼ãƒ‰ã®é–‹ç™ºã¨ãƒ‡ãƒãƒƒã‚°ã«å½¹ç«‹ã¡ã€CLIã§æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã‚’é©å¿œã•ã›ã‚‹ã®ã«å½¹ç«‹ã¡ã€bashã‹ã‚‰Pythonã¸ã®ç§»è¡Œã‚’å®¹æ˜“ã«ã—ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªä½œæ¥­ã®ãŸã‚ã®ç‹¬è‡ªã®REPLã‚’æŒã£ã¦ã„ã‚‹ã¨è¿°ã¹ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">æ§˜å­ã‚’è¦‹ã‚ˆã†ï¼Ÿ</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ã‚µãƒ¼ã¨ãƒ¡ã‚¤ãƒ³</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fire.Fireã¯å®Ÿéš›ã«ã¯ã€ä»»æ„ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€ã‚³ãƒãƒ³ãƒ‰åã¨å¯¾å¿œã™ã‚‹é–¢æ•°ã‚’å«ã‚€è¾æ›¸ãªã©ï¼‰ã‚’å—ã‘å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŸã¡ã«ã¨ã£ã¦é‡è¦ãªã®ã¯ã€FireãŒã‚¯ãƒ©ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è»¢é€ã‚’è¨±å¯ã™ã‚‹ã“ã¨ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ãŸãŒã£ã¦ã€ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã¯ã™ã¹ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã«å…±é€šã®å¼•æ•°ã‚’å—ã‘å…¥ã‚Œã€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨å±æ€§ã¯å€‹åˆ¥ã®ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Commands</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, db=None, verbose=False</span>):</span>
        level = logging.INFO <span class="hljs-keyword">if</span> verbose <span class="hljs-keyword">else</span> logging.WARNING<font></font>
        logging.basicConfig(level=level)<font></font>
        logging.getLogger(<span class="hljs-string">"todolib"</span>).setLevel(level)<font></font>
        self._app = todolib.TodoApp.fromenv(db)<font></font>
        atexit.register(self._app.save)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">version</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> todolib.__version__<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">self, task</span>):</span>
        <span class="hljs-string">"""Add new task."""</span><font></font>
        task = self._app.add_task(task)<font></font>
        print(task, <span class="hljs-string">"created with number"</span>, task.number, end=<span class="hljs-string">".\n"</span>)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span>(<span class="hljs-params">self, show_done=False</span>):</span>
        <span class="hljs-string">""" Show current tasks. """</span><font></font>
        self._app.print_tasks(show_done)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">done</span>(<span class="hljs-params">self, number</span>):</span>
        <span class="hljs-string">""" Mark task as done. """</span><font></font>
        task = self._app.task_done(number)<font></font>
        print(task, <span class="hljs-string">"marked as done."</span>)<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">remove</span>(<span class="hljs-params">self, number</span>):</span>
        <span class="hljs-string">""" Removes task from the list. """</span><font></font>
        task = self._app.remove_task(number)<font></font>
        print(task, <span class="hljs-string">"removed from the list."</span>)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">args=None</span>):</span><font></font>
    fire.Fire(Commands, command=args)<font></font>
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ•ãƒ©ã‚°</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fireã«ã¯ç‰¹åˆ¥ãªæ§‹æ–‡ã‚’æŒã¤ç‹¬è‡ªã®ãƒ•ãƒ©ã‚°ãŒã‚ã‚Šï¼ˆã€Œ-ã€ã®å¾Œã«æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰ã€ãƒ‘ãƒ¼ã‚µãƒ¼ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®å†…éƒ¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‘¼ã³å‡ºã—ä¾‹</font></font></b><div class="spoiler_text"><pre><code class="bash hljs">$ ./todo_fire.py show -- --trace<font></font>
Fire trace:<font></font>
1. Initial component<font></font>
2. Instantiated class <span class="hljs-string">"Commands"</span> (todo_fire.py:9)<font></font>
3. Accessed property <span class="hljs-string">"show"</span> (todo_fire.py:25)<font></font>
$ ./todo_fire.py -- --verbose | head -n 12 <span class="hljs-comment">#    , ,  Commands._app</span><font></font>
NAME<font></font>
    todo_fire.py -<font></font>
<font></font>
SYNOPSIS<font></font>
    todo_fire.py - GROUP | COMMAND<font></font>
<font></font>
GROUPS<font></font>
    GROUP is one of the following:<font></font>
<font></font>
     _app<font></font>
       Todo Application definition.<font></font>
$ ./todo_fire.py show -- --interactive<font></font>
Fire is starting a Python REPL with the following objects:<font></font>
Modules: atexit, fire, logging, todolib<font></font>
Objects: Commands, args, component, main, result, self, todo_fire.py, trace<font></font>
<font></font>
Python 3.7.4 (default, Aug 15 2019, 13:09:37) <font></font>
[GCC 7.4.0] on linux<font></font>
Type <span class="hljs-string">"help"</span>, <span class="hljs-string">"copyright"</span>, <span class="hljs-string">"credits"</span> or <span class="hljs-string">"license"</span> <span class="hljs-keyword">for</span> more information.<font></font>
(InteractiveConsole)<font></font>
&gt;&gt;&gt; self<font></font>
&lt;__main__.Commands object at 0x7fd0a6125bd0&gt;<font></font>
&gt;&gt;&gt; self._app.db<font></font>
{<span class="hljs-string">'tasks'</span>: [{<span class="hljs-string">'title'</span>: <span class="hljs-string">'test'</span>, <span class="hljs-string">'done'</span>: False}]}
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆä¸­</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
mainé–¢æ•°ã®ãƒ†ã‚¹ãƒˆã¯argparseã¨docoptã®ãƒ†ã‚¹ãƒˆã«ä¼¼ã¦ã„ã‚‹ã®ã§ã€ã“ã“ã§ã¯è¦ç‚¹ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŒæ™‚ã«ã€Fireã®å†…çœçš„ãªæ€§è³ªã«ã‚ˆã‚Šã€Commandsã‚¯ãƒ©ã‚¹ã‚’ã™ãã«ãƒ†ã‚¹ãƒˆã™ã‚‹ã“ã¨ã‚‚åŒæ§˜ã«å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã¯æ³¨ç›®ã«å€¤ã—ã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆè¨ˆ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç«ã¯ã‚¯ãƒªãƒƒã‚¯ã‚ˆã‚Šã‚‚èˆˆå‘³æ·±ã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ã‚µãƒ¼ã«å¤šãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ãƒªã‚¹ãƒˆã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ§‹æˆã¯æœ€å°é™ã§ã€ãƒ‡ãƒãƒƒã‚°ç”¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼è‡ªä½“</font><font style="vertical-align: inherit;">ã¯ã‚¯ãƒªãƒƒã‚¯ã‚ˆã‚Šã‚‚ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é–‹ç™ºã•ã‚Œ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã¾ã™ï¼ˆä»Šå¤60ã‚³ãƒŸãƒƒãƒˆï¼‰ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çŸ­æ‰€ï¼šã‚¯ãƒªãƒƒã‚¯ã‚„ä»–ã®ãƒ‘ãƒ¼ã‚µãƒ¼ã‚ˆã‚Šã‚‚ã¯ã‚‹ã‹ã«å°‘ãªã„ã“ã¨ãŒã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">ä¸å®‰å®šãªAPIï¼ˆç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.2.1ï¼‰ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚»ãƒ¡ãƒ³ãƒˆ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å®Ÿéš›ã€</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cementã¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­£ç¢ºã«ã¯CLIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ãªãã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ãŒã€ã•ã¾ã–ã¾ãªçµ±åˆã‚’å‚™ãˆãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„è¤‡é›‘ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é©ã—ã¦ã„ã‚‹ã¨ä¸»å¼µã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ã‚µãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cementã®ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ç•°å¸¸ã«è¦‹ãˆã¾ã™ãŒã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ã‚ˆãè¦‹ã‚‹ã¨ã€ãŠãªã˜ã¿ã®argparseãŒå†…éƒ¨ã«ã‚ã‚‹ã¨æ¨æ¸¬ã™ã‚‹ã®ã¯ç°¡å˜ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ãŠãã‚‰ãã“ã‚Œã¯æœ€å–„ã®æ–¹æ³•ã§ã™-æ–°ã—ã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å­¦ã¶å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> cement <span class="hljs-keyword">import</span> Controller, ex
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Base</span>(<span class="hljs-params">Controller</span>):</span>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        label = <span class="hljs-string">"base"</span><font></font>
<font></font>
        arguments = [<font></font>
            (<font></font>
                [<span class="hljs-string">"-v"</span>, <span class="hljs-string">"--version"</span>],<font></font>
                {<span class="hljs-string">"action"</span>: <span class="hljs-string">"version"</span>, <span class="hljs-string">"version"</span>: <span class="hljs-string">f"todo_cement v<span class="hljs-subst">{todolib.__version__}</span>"</span>},<font></font>
            )<font></font>
        ]<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">_default</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-string">"""Default action if no sub-command is passed."""</span><font></font>
        self.app.args.print_help()<font></font>
<font></font>
<span class="hljs-meta">    @ex(help="Add new task", arguments=[(["task"], {"help": "Task title"})])</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add</span>(<span class="hljs-params">self</span>):</span><font></font>
        title = self.app.pargs.task<font></font>
        self.app.log.debug(<span class="hljs-string">f"Task title: <span class="hljs-subst">{title!r}</span>"</span>)<font></font>
        task = self.app.todoobj.add_task(title)<font></font>
        print(task, <span class="hljs-string">"created with number"</span>, task.number, end=<span class="hljs-string">".\n"</span>)<font></font>
<font></font>
<span class="hljs-meta">    @ex(</span>
        help=<span class="hljs-string">"Show current tasks"</span>,<font></font>
        arguments=[<font></font>
            ([<span class="hljs-string">"--show-done"</span>], dict(action=<span class="hljs-string">"store_true"</span>, help=<span class="hljs-string">"Include done tasks"</span>))<font></font>
        ],<font></font>
    )<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span>(<span class="hljs-params">self</span>):</span><font></font>
        self.app.todoobj.print_tasks(self.app.pargs.show_done)<font></font>
<font></font>
<span class="hljs-meta">    @ex(help="Mark task as done", arguments=[(["number"], {"type": int})])</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">done</span>(<span class="hljs-params">self</span>):</span><font></font>
        task = self.app.todoobj.task_done(self.app.pargs.number)<font></font>
        print(task, <span class="hljs-string">"marked as done."</span>)<font></font>
<font></font>
<span class="hljs-meta">    @ex(help="Remove task from the list", arguments=[(["number"], {"type": int})])</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">remove</span>(<span class="hljs-params">self</span>):</span><font></font>
        task = self.app.todoobj.remove_task(self.app.pargs.number)<font></font>
        print(task, <span class="hljs-string">"removed from the list."</span>)
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¢ãƒ—ãƒªã¨ãƒ¡ã‚¤ãƒ³</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¨ã‚Šã‚ã‘ã€ã‚»ãƒ¡ãƒ³ãƒˆã¯ä¾ç„¶ã¨ã—ã¦ä¾‹å¤–ã§ä¿¡å·ã‚’ãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã¯ã€SIGINT / SIGTERMã®ã‚¼ãƒ­ã‚³ãƒ¼ãƒ‰å‡ºåŠ›ã§ã“ã“ã«ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoApp</span>(<span class="hljs-params">App</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, argv=None</span>):</span><font></font>
        super().__init__(argv=argv)<font></font>
        self.todoobj = <span class="hljs-literal">None</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">load_db</span>(<span class="hljs-params">self</span>):</span><font></font>
        self.todoobj = todolib.TodoApp.fromenv()<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">save</span>(<span class="hljs-params">self</span>):</span><font></font>
        self.todoobj.save()<font></font>
<font></font>
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Meta</span>:</span>
        <span class="hljs-comment"># application label</span>
        label = <span class="hljs-string">"todo_cement"</span>
        <span class="hljs-comment"># register handlers</span><font></font>
        handlers = [Base]<font></font>
        hooks = [(<span class="hljs-string">"post_setup"</span>, <span class="hljs-keyword">lambda</span> app: app.load_db()), (<span class="hljs-string">"pre_close"</span>, <span class="hljs-keyword">lambda</span> app: app.save())]
        <span class="hljs-comment"># call sys.exit() on close</span>
        close_on_exit = <span class="hljs-literal">True</span><font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span>
    <span class="hljs-keyword">with</span> TodoApp() <span class="hljs-keyword">as</span> app:
        <span class="hljs-keyword">try</span>:<font></font>
            app.run()<font></font>
        <span class="hljs-keyword">except</span> CaughtSignal <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">if</span> e.signum <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (signal.SIGINT, signal.SIGTERM):
                <span class="hljs-keyword">raise</span>
            app.log.debug(<span class="hljs-string">f"\n<span class="hljs-subst">{e}</span>"</span>)<font></font>
            app.exit_code = <span class="hljs-number">0</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ¡ã‚¤ãƒ³ã®ãƒ•ã‚§ãƒ¼ã‚ºã‚’èª­ã‚€ã¨ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã•ã‚ŒãŸ__enter __ / __ exit__ã§todolib.TodoAppã®ãƒ­ãƒ¼ãƒ‰ã¨ä¿å­˜ã‚’è¡Œã†ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ã‚»ãƒ¡ãƒ³ãƒˆãƒ•ãƒƒã‚¯ã‚’ç¤ºã™ãŸã‚ã«ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚§ãƒ¼ã‚ºã¯æœ€çµ‚çš„ã«å€‹åˆ¥ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«åˆ†é›¢ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆä¸­</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ†ã‚¹ãƒˆã«ã¯ã€åŒã˜ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_cement</span>(<span class="hljs-params">capsys</span>):</span>
    <span class="hljs-keyword">with</span> todo_cement.TodoApp(argv=[<span class="hljs-string">"add"</span>, <span class="hljs-string">"test"</span>]) <span class="hljs-keyword">as</span> app:<font></font>
        app.run()<font></font>
        out, _ = capsys.readouterr()<font></font>
        <span class="hljs-keyword">assert</span> out == EXPECTED
        <span class="hljs-comment">#     jinja,      </span>
        <span class="hljs-keyword">assert</span> app.last_rendered <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ¦‚è¦</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é•·æ‰€ï¼šAPIã®ã‚»ãƒƒãƒˆã¯ã‚¹ã‚¤ã‚¹ã®ãƒŠã‚¤ãƒ•ã®ã‚»ãƒƒãƒˆã®ã‚ˆã†ãªã‚‚ã®ã§ã€ãƒ•ãƒƒã‚¯ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚‹æ‹¡å¼µæ€§ã€å®‰å®šã—ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªé–‹ç™ºã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çŸ­æ‰€ï¼šç©ºã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‚</font><font style="vertical-align: inherit;">å°ã•ãªã‚»ãƒ¡ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å°‘ã—è¤‡é›‘ã«è¦‹ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¯ãƒ¬ã‚ª</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cleoã¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã“ã“ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆGitHubã§åˆè¨ˆç´„400ã‚¹ã‚¿ãƒ¼ï¼‰ã»ã©äººæ°—ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ã¯</font></a><font style="vertical-align: inherit;">ç¨‹é ã„ã§ã™ãŒã€PoetryãŒå‡ºåŠ›ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹æ–¹æ³•ã‚’ç ”ç©¶ã—ãŸã¨ãã€ãã‚Œã‚’çŸ¥ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã—ãŸãŒã£ã¦ã€Cleoã¯ä¾å­˜é–¢ä¿‚ã€virtualenvã€ãŠã‚ˆã³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€ã™ã§ã«è¿°ã¹ãŸè©©ã®ä½œè€…ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®1ã¤ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã™ã§ã«è¤‡æ•°å›æ›¸ã‹ã‚Œã¦ã„ã‚‹habrã®è©©ã«ã¤ã„ã¦ã€ãŠã‚ˆã³ãã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«éƒ¨åˆ†ã«ã¤ã„ã¦-ã„ã„ãˆã€‚</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‘ãƒ¼ã‚µãƒ¼</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚¯ãƒ¬ã‚ªã¯ã€ã‚»ãƒ¡ãƒ³ãƒˆã¨åŒæ§˜ã«ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åŸå‰‡ã«åŸºã¥ã„ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒãƒ³ãƒ‰ã¯Commandã‚¯ãƒ©ã‚¹ã¨ãã®docstringã‚’ä»‹ã—ã¦å®šç¾©ã•ã‚Œã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯optionï¼ˆï¼‰ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã•ã‚‰ã«ã€ãƒ†ã‚­ã‚¹ãƒˆã®å‡ºåŠ›ã«ä½¿ç”¨ã•ã‚Œã‚‹lineï¼ˆï¼‰ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã¤ã¾ã‚Šã€è‰²ï¼‰ã¨ã€ãƒœãƒƒã‚¯ã‚¹ã‹ã‚‰ã®è©³ç´°ãƒ•ãƒ©ã‚°ã®æ•°ã«åŸºã¥ãå‡ºåŠ›ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚¯ãƒ¬ã‚ªã«ã‚‚ãƒ†ãƒ¼ãƒ–ãƒ«å‡ºåŠ›ãŒã‚ã‚Šã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã¾ãŸã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã€‚</font><font style="vertical-align: inherit;">ãã—ã¦ã€ã¾ã ...ä¸€èˆ¬çš„ã«ã€ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚½ãƒ¼ã‚¹</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword">from</span> cleo <span class="hljs-keyword">import</span> Command <span class="hljs-keyword">as</span> BaseCommand
<span class="hljs-comment"># cleo    clikit,         </span>
<span class="hljs-keyword">from</span> clikit.api.io <span class="hljs-keyword">import</span> flags <span class="hljs-keyword">as</span> verbosity<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Command</span>(<span class="hljs-params">BaseCommand</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
        super().__init__()<font></font>
        self.todoapp = <span class="hljs-literal">None</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">with</span> todolib.TodoApp.fromenv() <span class="hljs-keyword">as</span> app:<font></font>
            self.todoapp = app<font></font>
            self.do_handle()<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_handle</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">raise</span> NotImplementedError<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AddCommand</span>(<span class="hljs-params">Command</span>):</span>
    <span class="hljs-string">"""
    Add new task.

    add {task : Task to add}
    """</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_handle</span>(<span class="hljs-params">self</span>):</span>
        title = self.argument(<span class="hljs-string">"task"</span>)<font></font>
        task = self.todoapp.add_task(title)<font></font>
        <span class="hljs-comment"># will be printed only on "-vvv"</span>
        self.line(<span class="hljs-string">f"Title: <span class="hljs-subst">{title}</span>"</span>, style=<span class="hljs-string">"comment"</span>, verbosity=verbosity.DEBUG)<font></font>
        self.line(<span class="hljs-string">f"Task &lt;info&gt;<span class="hljs-subst">{task.title}</span>&lt;/&gt; created with number <span class="hljs-subst">{task.number}</span>."</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShowCommand</span>(<span class="hljs-params">Command</span>):</span>
    <span class="hljs-string">"""
    Show current tasks.

    show {--show-done : Include tasks that are done.}
    """</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_handle</span>(<span class="hljs-params">self</span>):</span>
        tasks = self.todoapp.list_tasks(self.option(<span class="hljs-string">"show-done"</span>))
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> tasks:<font></font>
            self.line(<span class="hljs-string">"There is no TODOs."</span>, style=<span class="hljs-string">"info"</span>)<font></font>
        self.render_table(<font></font>
            [<span class="hljs-string">"Number"</span>, <span class="hljs-string">"Title"</span>, <span class="hljs-string">"Status"</span>],<font></font>
            [<font></font>
                [str(task.number), task.title, <span class="hljs-string">""</span> <span class="hljs-keyword">if</span> task.done <span class="hljs-keyword">else</span> <span class="hljs-string">"âœ˜"</span>]
                <span class="hljs-keyword">for</span> task <span class="hljs-keyword">in</span> tasks<font></font>
            ],<font></font>
        )<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoneCommand</span>(<span class="hljs-params">Command</span>):</span>
    <span class="hljs-string">"""
    Mark task as done.

    done {number : Task number}
    """</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_handle</span>(<span class="hljs-params">self</span>):</span>
        task = self.todoapp.task_done(int(self.argument(<span class="hljs-string">"number"</span>)))<font></font>
        self.line(<span class="hljs-string">f"Task &lt;info&gt;<span class="hljs-subst">{task.title}</span>&lt;/&gt; marked as done."</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RemoveCommand</span>(<span class="hljs-params">Command</span>):</span>
    <span class="hljs-string">"""
    Removes task from the list.

    remove {number : Task number}
    """</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_handle</span>(<span class="hljs-params">self</span>):</span>
        task = self.todoapp.remove_task(int(self.argument(<span class="hljs-string">"number"</span>)))<font></font>
        self.line(<span class="hljs-string">f"Task &lt;info&gt;<span class="hljs-subst">{task.title}</span>&lt;/&gt; removed from the list."</span>)
</code></pre><br>
</div></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¡ã‚¤ãƒ³</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¿…è¦ãªã®ã¯ã€</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cleo.Application</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€</font><i><font style="vertical-align: inherit;">add_commandsã«</font></i><font style="vertical-align: inherit;">ã‚³ãƒãƒ³ãƒ‰ã‚’æ¸¡ã™ã“ã¨ã ã‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆä¸­ã«ç¹°ã‚Šè¿”ã•ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€ã“ã‚Œã¯ã™ã¹ã¦ãƒ¡ã‚¤ãƒ³ã‹ã‚‰ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«è»¢é€ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> cleo <span class="hljs-keyword">import</span> Application <span class="hljs-keyword">as</span> BaseApplication<font></font>
<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoApp</span>(<span class="hljs-params">BaseApplication</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>
        super().__init__(name=<span class="hljs-string">"ToDo app - cleo version"</span>, version=todolib.__version__)<font></font>
        self.add_commands(AddCommand(), ShowCommand(), DoneCommand(), RemoveCommand())<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>(<span class="hljs-params">args=None</span>):</span><font></font>
    TodoApp().run(args=args)<font></font>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆä¸­</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cleoã§ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚</font><s><font style="vertical-align: inherit;">ã«ã€</font></s><font style="vertical-align: inherit;">ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®</font><font style="vertical-align: inherit;">ã™ã¹ã¦ã®æˆäººã®</font><s><font style="vertical-align: inherit;">å”çˆ¶ã®</font></s><font style="vertical-align: inherit;">ã‚ˆã†ã«</font><font style="vertical-align: inherit;">ã€I / Oã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’çµ‚äº†ã™ã‚‹</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CommandTester</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãŒã‚ã‚Š</font><font style="vertical-align: inherit;">ã¾ã™ã€‚</font></font><s><font style="vertical-align: inherit;"></font></s><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_cleo</span>():</span><font></font>
    app = todo_cleo.TodoApp()<font></font>
    command = app.find(<span class="hljs-string">"add"</span>)<font></font>
    tester = cleo.CommandTester(command)<font></font>
    tester.execute(<span class="hljs-string">"test"</span>)
    <span class="hljs-keyword">assert</span> tester.status_code == <span class="hljs-number">0</span>
    <span class="hljs-keyword">assert</span> tester.io.fetch_output() == <span class="hljs-string">"Task test created with number 0.\n"</span>
</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆè¨ˆ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
é•·æ‰€ï¼šã‚¿ã‚¤ãƒ—ãƒ’ãƒ³ãƒˆã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã€‚é–‹ç™ºã‚’ç°¡ç´ åŒ–ã—ã¾ã™ï¼ˆå¤šãã®IDEã¨ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã¯OOPã‚³ãƒ¼ãƒ‰ã¨ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’é©åˆ‡ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼‰ã€‚å¼•æ•°ã ã‘ã§ãªãI / Oã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ååˆ†ãªæ©Ÿèƒ½</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ©ã‚¹ã¾ãŸã¯ãƒã‚¤ãƒŠã‚¹ï¼šI / O Cleo / CliKitã¨ã®ã¿äº’æ›æ€§ã®ã‚ã‚‹ç‹¬è‡ªã®å†—é•·ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã€‚ãƒ­ã‚®ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€cleoã®é–‹ç™ºã«ä¼´ã£ã¦ç¶­æŒã™ã‚‹ã®ãŒé›£ã—ã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
çŸ­æ‰€ï¼šæ˜ã‚‰ã‹ã«-å€‹äººçš„ãªæ„è¦‹-è‹¥ã„APIï¼šãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã¯ã€è©©ã‚’é™¤ã„ã¦åˆ¥ã®ã€Œå¤§è¦æ¨¡ãªã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸è¶³ã—ã¦ãŠã‚Šã€Cleoã¯é–‹ç™ºã¨ä¸¦è¡Œã—ã¦1ã¤ã®ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦é–‹ç™ºã—ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå¤ããªã£ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼ˆãŸã¨ãˆã°ã€ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ãŒclikitãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ãªãã€clikit.api.io.flagsã«ã‚ã‚‹ãªã©ï¼‰ã€‚ä¸€èˆ¬ã«ã€ä¸ååˆ†ã§APIå…¨ä½“ã‚’åæ˜ ã—ã¦ã„ã¾ã›ã‚“ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cementã¨æ¯”è¼ƒã—ã¦ã€Cleoã¯CLIã«é‡ç‚¹ã‚’ç½®ã„ã¦ãŠã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‡ºåŠ›ã§ã®ä¾‹å¤–ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’éè¡¨ç¤ºã«ã™ã‚‹ï¼‰ã«ã¤ã„ã¦è€ƒãˆãŸã®ã¯å½¼ã ã‘ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€å½¼-å†ã³å€‹äººçš„ãªæ„è¦‹-ã¯ã€APIã®è‹¥ã•ã¨å®‰å®šæ€§ã§ã‚»ãƒ¡ãƒ³ãƒˆã«è² ã‘ã¾ã—ãŸã€‚</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€çµ‚çš„ã«</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ™‚ç‚¹ã§ã€èª°ã‚‚ãŒã™ã§ã«è‡ªåˆ†ã®æ„è¦‹ã‚’æŒã£ã¦ã„ã¾ã™ãŒã€ãã‚Œã¯è‰¯ã„ã“ã¨ã§ã™ãŒã€çµè«–ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚ä½•ã‚ˆã‚Šã‚‚ClickãŒå¥½ãã§ã™ã€‚ãªãœãªã‚‰ã€å¤šãã®ã‚‚ã®ãŒã‚ã‚Šã€åŒæ™‚ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã¨ãƒ†ã‚¹ãƒˆãŒç°¡å˜ã ã‹ã‚‰ã§ã™ã€‚</font><font style="vertical-align: inherit;">ã‚³ãƒ¼ãƒ‰ã‚’æœ€å°é™ã«ã—ã‚ˆã†ã¨ã™ã‚‹å ´åˆã¯ã€Fireã‹ã‚‰å§‹ã‚ã¦ãã ã•ã„ã€‚</font><font style="vertical-align: inherit;">ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯Memcachedã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€jinjaã¨æ‹¡å¼µæ€§ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™-ã‚»ãƒ¡ãƒ³ãƒˆã‚’å–ã‚‹ã¨å¾Œæ‚”ã—ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ãƒšãƒƒãƒˆã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã™ã‹ã€ãã‚Œã¨ã‚‚ä»–ã®ã“ã¨ã‚’è©¦ã—ãŸã„ã§ã™ã‹-ã‚¯ãƒ¬ã‚ªã‚’è¦‹ã¦ãã ã•ã„ã€‚</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja466979/index.html">å¤‰æ•°ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’å¤‰æ›´ã™ã‚‹-Visual Studio Code</a></li>
<li><a href="../ja466983/index.html">ãƒ†ã‚¹ãƒ©ã®çµŒå–¶ã«å‹ã¦ãªã„ç†ç”±</a></li>
<li><a href="../ja466985/index.html">æ–°ã—ã„C ++æ¨™æº–ã«ã¤ã„ã¦</a></li>
<li><a href="../ja466987/index.html">éå®šå‹ã®ã€Œlsã€ã¾ãŸã¯linuxoidã®æ¥½ã—ã¿æ–¹</a></li>
<li><a href="../ja466995/index.html">PVS-Studioçµ±åˆç”¨ã®è­¦å‘Šæ¬¡ä¸–ä»£ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ§‹æˆ</a></li>
<li><a href="../ja467003/index.html">1075ã‚«ãƒ†ã‚´ãƒªï¼ˆ36000è£½å“ï¼‰ã®é«˜é€Ÿã§ä¾¿åˆ©ãªé©å¿œãƒ¡ãƒ‹ãƒ¥ãƒ¼</a></li>
<li><a href="../ja467005/index.html">å¤šé …å¼ã‚’æ­£ã—ãç€è‰²ã™ã‚‹æ–¹æ³•</a></li>
<li><a href="../ja467007/index.html">FLProg-ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¸ã®ç‹¬ç«‹ã—ãŸçµ±åˆ</a></li>
<li><a href="../ja467009/index.html">Notionã¨Pythonã‚’ä½¿ç”¨ã—ã¦ãƒ›ãƒ¼ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆã™ã‚‹</a></li>
<li><a href="../ja467011/index.html">ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã‚’å§‹ã‚ã‚‹ãŸã‚ã«èª­ã‚€ã¹ãã‚‚ã®ï¼šæœ¬ã€è¾æ›¸ã€ã‚³ãƒ¼ã‚¹</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>