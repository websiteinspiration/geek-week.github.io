<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¶üèª ü§±üèø ‚ñ´Ô∏è Geben Sie es an. Yandex-Bericht üç¢ ü§ûüèº üßõ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Eine gute API-Spezifikation hilft Kunden bei der Verwendung. Vor einigen Monaten bei Big Pytup, Yandex-Entwickler Alexander BryazginBryazginnnmachte e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Geben Sie es an. Yandex-Bericht</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/501088/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine gute API-Spezifikation hilft Kunden bei der Verwendung. </font><font style="vertical-align: inherit;">Vor einigen Monaten bei Big Pytup, Yandex-Entwickler Alexander Bryazgin</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bryazginnn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">machte eine Pr√§sentation dar√ºber, worauf die REST-API-Spezifikation als Beispiel f√ºr OpenAPI + Swagger basiert und warum ein solches Bundle ben√∂tigt wird. </font><font style="vertical-align: inherit;">In der √úbersicht k√∂nnen Sie herausfinden, wie wir die automatische Generierung der Spezifikation im fertigen Service vermasselt haben, welche Bibliotheken f√ºr uns n√ºtzlich waren und welche Art von Optimierung sich um die OpenAPI-Spezifikation handelt.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/A9Ij-qJOLjM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Hallo zusammen, ich hei√üe Alexander. </font><font style="vertical-align: inherit;">Ich m√∂chte mit Ihnen √ºber die Spezifikationen sprechen.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/3_/p0/1a/3_p01asrvx6y_ynsx1g3j5lxz8y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insbesondere m√∂chte ich auf einige Themen eingehen. </font><font style="vertical-align: inherit;">Was sind Spezifikationen am Beispiel der REST-API-Spezifikationen? </font><font style="vertical-align: inherit;">Weiter - als wir die Generierung der Spezifikation in unserem Service befestigten. </font><font style="vertical-align: inherit;">Und am Ende auf der s√º√üen Seite - welche Tools, Tuning, um die Ergebnisse unserer Spezifikationsgenerierung zu verwenden, am Beispiel einer Spezifikation wie OpenAPI und Swagger UI.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST-API-Spezifikation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was sind Spezifikationen und was meine ich damit in meinem Bericht? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hu/qb/sf/huqbsf_ym4m_kdnwny0cl-o1h24.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuallererst ist es die Schnittstellenbeschreibungssprache, eine Sprache zur Beschreibung von Schnittstellen, eine Beschreibung, die einem bestimmten Format entspricht. </font><font style="vertical-align: inherit;">Es kann automatisch analysiert werden, da es ein striktes Format und solche Besonderheiten hat, dass es nicht von der Sprache selbst abh√§ngt, in der die Schnittstelle implementiert ist. </font><font style="vertical-align: inherit;">Angenommen, Sie haben einen Python-Webserver, f√ºr die Sprache der Schnittstellenbeschreibung spielt dies keine Rolle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt viele Sprachen zum Spezifizieren von Spezifikationen. </font><font style="vertical-align: inherit;">Dies sind Spezifikationen f√ºr REST, RPC, GraphQL usw. Heute werden wir uns mit der REST-Spezifikation befassen.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openapi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns anhand des OpenAPI-Beispiels √ºber Spezifikationen sprechen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/2z/k_/bp2zk_scdpvupmqvq9pdfhe00ym.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns zun√§chst verstehen, was OpenAPI ist. </font><font style="vertical-align: inherit;">Dies ist genau die gleiche Sprache, um die Spezifikationen zu beschreiben. </font><font style="vertical-align: inherit;">An sich ist es eine Datei - im Format YAML, JSON oder XML, wer es mehr mag - mit einer Beschreibung der Schnittstelle, der Handle-Endpunkte und der Schemata.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stolzieren</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir √ºber OpenAPI sprechen, k√∂nnen wir nichts √ºber Swagger sagen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dn/q7/gj/dnq7gjawouaidqmvvpc1bqt1-vq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger ist im Wesentlichen eine OpenAPI-Benutzeroberfl√§che, mit der Sie Ihre Spezifikation wundersch√∂n visualisieren k√∂nnen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i5/mq/gm/i5mqgmitqhnsiwmarq7bsv4iyra.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Swagger wie in OpenAPI gibt es eine Beschreibung der Endpunkte, die in Ihrer Spezifikation enthalten sind. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qh/ru/3k/qhru3kukegnvaui-3n--ulcfmn8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Ihrer API befindet sich eine Beschreibung der Autorisierung. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xf/6w/pv/xf6wpvuh_kampioguvbuwasohha.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt eine Beschreibung der Modelle oder Schaltkreise, mit denen Sie in Ihrer API arbeiten. Akzeptieren Sie sie beispielsweise zur Eingabe oder geben Sie sie zur Ausgabe zur√ºck. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/er/ho/7o/erho7oaraobdmskbvtwnkzcfo40.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt eine Beschreibung von Beispielen und erwarteten Anforderungen und Antworten von Ihrer API. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g1/tk/qf/g1tkqfq19vi3bkcfbdvnp1gtqre.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus k√∂nnen Sie in Ihrem Swagger aufgrund der Tatsache, dass es sich um eine Benutzeroberfl√§che handelt und in Ihrem Browser ausgef√ºhrt wird, hier und jetzt in Echtzeit Anforderungen an Ihre API ausf√ºhren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/st/km/ps/stkmpsq0mevhyvxyxb0wncgp9li.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link von der Folie</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit all dem k√∂nnen Sie auf einem vom Swagger-Team vorbereiteten Pr√ºfstand herumspielen. Dies ist petstore.swagger.io. Es gibt eine Beispielspezifikation, die von Swagger angesprochen wurde. Sie k√∂nnen zum echten Backend gehen und ber√ºhren. Empfehlen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/um/xa/at/umxaatwequxmejnq8vcu-teyctm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also sagen wir: OpenAPI, Swagger, Spezifikation. Aber warum wird all dies f√ºr eine Person ben√∂tigt, die beispielsweise ein Backend schreibt? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens werden Spezifikationen h√§ufig w√§hrend der Entwurfsphase unserer API verwendet. Das hei√üt, normale Leute, die sich der Aufgabe gestellt haben, ein Backend zu schreiben, beschreiben zun√§chst, was sie implementieren m√∂chten. Das hei√üt, sie beginnen mit dem Entwurf ihrer API, einer Liste der Endpunkte, die sie implementieren m√∂chten, einer Liste der zu manipulierenden Schemata, Parameter usw. In diesem Fall sind die Spezifikationen und Tools rund um die Spezifikationen sehr praktisch.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus gibt es einen beliebten Fall. </font><font style="vertical-align: inherit;">F√ºr das, was wir die Spezifikation im Dienst zu uns gezogen haben? </font><font style="vertical-align: inherit;">Dies ist die Dokumentation. </font><font style="vertical-align: inherit;">Die Verf√ºgbarkeit von Spezifikationen bietet Ihnen eine gute Gelegenheit, Ihre API zu beschreiben und diese Informationen mit jemandem zu teilen: entweder mit den Front-End-Anbietern in Ihrem Team oder mit externen Kunden, die sich in Sie integrieren m√∂chten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aufgrund der Tatsache, dass die Spezifikation in einem bestimmten strengen Format geschrieben ist, kann sie auch automatisch verarbeitet werden, dh an der Selbstbeobachtung der API beteiligt sein. </font><font style="vertical-align: inherit;">Und obendrein k√∂nnen Sie viele Werkzeuge fangen, die Ihnen das Leben erleichtern k√∂nnen. </font><font style="vertical-align: inherit;">Ich werde es Ihnen sp√§ter genauer und ausf√ºhrlicher erl√§utern.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie wir OpenAPI vorbereiten</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben uns entschieden, warum wir das alles brauchen. Lassen Sie uns dar√ºber sprechen, wie wir die Erstellung von Spezifikationen in unserem Service vermasselt haben. Zun√§chst ein kleiner Kontext. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w4/hj/gi/w4hjgi6vmhrhx68hkvza41qehrw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als wir zu dem Schluss kamen, dass wir die Spezifikation k√ºrzen w√ºrden, folgten wir nicht dem normalen Pfad, als wir das Projekt zum ersten Mal im Sinne eines Prototyps mit einer Spezifikation schrieben. Wir haben bereits ein Backend erstellt, es flog bereits mit uns und wir wollten die Spezifikation als Dokumentationsmethode teilen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und unser Backend war pl√∂tzlich in Python. Wir haben Falcon als Framework, Marshmallow als Serialisierungs- und Deserialisierungswerkzeug und Webargs als Validierungswerkzeug verwendet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w4/hj/gi/w4hjgi6vmhrhx68hkvza41qehrw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem einfachsten Ausschnitt aus dem Petstore, den ich zuvor erw√§hnt habe, k√∂nnen wir uns vorstellen, wie unser Service in der Phase aussehen k√∂nnte, in der wir eine Spezifikation erstellen wollten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Dienst w√ºrde es ein vereinfachtes Paar von Schemata geben: den Typ unseres Haustieres, dh die Kategorie, und tats√§chlich die Tiere selbst. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eu/ks/li/euksliz1yyqgyc8r6fdemxvyg9m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, wir w√ºrden mehrere Schemata auf Marshmallow beschreiben. Au√üerdem w√ºrden wir einige Stifte vorbereiten, um beispielsweise unsere Favoriten zu registrieren und zu erhalten. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/hf/ag/gehfag2dcnp0te3s38lcq9_a0eg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tats√§chlich w√ºrden sie die Anwendung selbst beschreiben, was den Endpunkt f√ºr das Erstellen und Empfangen von Haustieren erh√∂hen w√ºrde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xy/46/4t/xy464tkcd9zijove5dxpdwgahqe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So w√ºrde es zusammen aussehen. Ziemlich einfacher Service. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns dar√ºber nachdenken, welche Optionen wir zum Erstellen einer OpenAPI-Konfiguration haben. Die einfachste und naivste Option ist, wie ich bereits sagte, nur eine Datei. Warum machen wir diese Datei nicht mit unseren H√§nden? Wir wissen, welche Eingabedaten wir haben, wir haben Endpunkte. Es scheint offensichtlich, nehmen Sie einfach und schreiben Sie.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rp/2m/vm/rp2mvmq8ugglyeu45yia-3a2fuc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor allem aber sind wir Programmierer. Wir machen nichts gerne mit unseren H√§nden. Wir m√∂chten, dass etwas Standard f√ºr uns generiert wird. Zweitens, wenn wir alles von Hand unterst√ºtzen w√ºrden, m√ºssten wir sicherlich API-√Ñnderungen sowie eine Datei unterst√ºtzen, die woanders liegt. Wie jeder Service ist auch unser Produkt volatil, ebenso wie die Spezifikation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher sind wir zu dem Schluss gekommen, dass wir eine OpenAPI-Konfiguration generieren wollen. Angesichts unseres Technologie-Stacks haben wir eine Bibliothek wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">apispec gefunden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Apispec ist eine Bibliothek von Herstellern, dh den Autoren von Marshmallow und Webargs. Zusammen bilden sie ein gro√ües √ñkosystem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mal sehen, wie Sie Apispec auf unserem Stack verwenden k√∂nnen, um zu lernen, wie eine Spezifikation f√ºr uns generiert wird.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tq/l2/xr/tql2xr9l9bxlpssq3y6nnupgld4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir hatten eine Ressource und einen speziellen Handler f√ºr die get-Methode dieser Ressource. Er hat eine Art K√∂rper. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/6d/ls/6c/6dls6cd5xma9pvhckxnxudotg9w.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um Apispec zu lehren und ihn wissen zu lassen, was wir in unserem Stift tun, f√ºgen wir dem Dokument etwas hinzu. Wir f√ºgen dort eine Beschreibung hinzu, die f√ºr den Menschen verst√§ndlich ist. In unserem Fall ist dies ein Beispiel f√ºr Antworten: Manchmal kommt es vor, dass unser Stift mit zweihundert antwortet, und im Hauptteil unserer Antwort befindet sich JSON mit einem Schema, dem Pet-Datenmodell. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/iu/gi/cgiugib1tipdvdpny7dk1jj25do.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/9g/bi/7h/9gbi7hsxekrvswxcpwhgvmackoi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Am Beispiel einer Nachanfrage beschreiben wir: Zus√§tzlich zu der Tatsache, dass es eine Antwort 201 gibt, in der wir Pet zur√ºckgeben, gibt es auch den erwarteten Text der Anfrage, der zu uns kommt. Und innerhalb dieser Anfrage erwarten wir JSON und erwarten, dass dieser JSON im Pet-Format vorliegt.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dr/is/3t/dris3tronnmqrjhgneplaqzouni.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben docstrings hinzugef√ºgt, dann m√ºssen wir lernen, wie man eine Spezifikation generiert. Dazu schreiben wir eine Art Skript, einen roten Knopf, und bringen apispec bei, eine Spezifikation f√ºr uns zu generieren. Wir deklarieren ein Apispec-Objekt, aus dem wir einige Metadaten unseres Dienstes beschreiben, und schreiben dann einfach die Datei, die generierte Spezifikation, im YAML-Format. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mal sehen, was f√ºr diese riesige Anwendung in dieser Datei generiert wurde. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ka/m2/yw/kam2ywt0vofxyenimp2aqpn8dmu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zun√§chst enth√§lt diese Datei eine Beschreibung der Version, in der die Spezifikation generiert wurde. Dies ist wichtig, damit jeder, der diese Spezifikation interpretiert, versteht, welches Format zu interpretieren ist. Die technischen Daten variieren von Version zu Version.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weiter gibt es eine Beschreibung unseres Service. Dieser Titel, die Version, vielleicht gibt es eine Beschreibung, wenn Sie es wollen, und dann eine Liste von Servern, zu denen Sie gehen, die Stifte ziehen, unser Backend sehen und ber√ºhren k√∂nnen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ui/cn/bi/uicnbixldrhetobxeixo4-rfqlu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus sprie√üen die Datenschemata selbst, die wir dort manipulieren, mit einer Beschreibung der Typen, Beispielen zum Ausf√ºllen dieser Daten und einigen Regeln. Vielleicht sind dies einige Extremwerte, vielleicht die Bindungsparameter. Hier sehen Sie eine Liste der erforderlichen Attribute. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2j/ig/td/2jigtdwc9ln_m4d5c40ytq3b1sq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zus√§tzlich zu den Schemata w√§chst dort die Beschreibung der Endpunkte. In diesem Fall sprie√üt die Beschreibung jeder Methode. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bu/9p/ce/bu9pce82nchhnzbyssgqhduzseg.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit der get-Methode erhalten wir eine Beschreibung dessen, was wir mit der get-Methode machen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/lj/eh/kiljehsuttdb1uqsusabn0kkwwe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und genau die Beschreibung, die wir in die Dokumentzeichenfolgen des entsprechenden Endpunkts eingef√ºgt haben, ist auf dem Post entstanden. </font><font style="vertical-align: inherit;">Das hei√üt, wir haben bereits eine Art Datei erhalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was sollen wir jetzt damit machen? </font><font style="vertical-align: inherit;">Was n√ºtzt das? </font><font style="vertical-align: inherit;">Zun√§chst einmal k√∂nnen Sie als Eigent√ºmer des Backends bereits all diesen potenziellen Kunden, die zu Ihren Stiften gehen, diese Spezifikation geben. </font><font style="vertical-align: inherit;">Und das wird den Jungs helfen, sich zu integrieren. </font><font style="vertical-align: inherit;">Das hei√üt, die Datei, die wir erstellt haben, l√§sst Sie nicht die Augen ausstechen. </font><font style="vertical-align: inherit;">Es ist gut lesbar. </font><font style="vertical-align: inherit;">Es kann durch die Augen gesehen und irgendwie analysiert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist aber auch schwierig. </font><font style="vertical-align: inherit;">Mal sehen, welche anderen Tools es gibt, um Ihr Leben zu vereinfachen, und welche Art von Abstimmung sich um die generierte Spezifikation dreht.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Geb√§ck</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dann kommen wir zur n√§chsten Phase, in der wir anhand des OpenAPI-Beispiels √ºber ein n√ºtzliches Toolkit f√ºr Spezifikationen sprechen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ru/kk/mw/rukkmw8jlzqgxmnubf3ndxn-ckw.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link von der Folie</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Das erste Tool, √ºber das ich sprechen m√∂chte, ist Swagger-UI. Im Folgenden werde ich Links zu einer Webressource bereitstellen, in der Sie das entsprechende Tool, in diesem Fall SwaggerHub, oder den Befehl zum Starten des entsprechenden Dokuments mit Docker aufrufen k√∂nnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir alle lieben Docker sehr. Docker hilft Ihnen dabei, JavaScript oder Java nicht lokal zu installieren. Nehmen Sie es einfach, f√ºhren Sie es mit einem Befehl aus, und alles funktioniert f√ºr Sie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger-UI ist also in der Tat ein Dienstprogramm, mit dem Sie Ihre Spezifikation wundersch√∂n anzeigen k√∂nnen. Wie ich bereits sagte, werden diese lokal mit Docker ausgef√ºhrt, m√∂glicherweise mit Swagger.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen das Gebietsschema anzeigen oder freigeben, indem Sie die Spezifikation in Swagger auf Ihrer Hardware ausf√ºhren. Senden Sie au√üerdem alle potenziellen Benutzer an diese Spezifikation. Sie ist schon viel verst√§ndlicher, sch√∂ner. Direkt darin k√∂nnen Sie die Abfrageausf√ºhrung durchf√ºhren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oo/t2/ko/oot2kocvjaeri2wdtdybfzsbnno.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link von der Folie</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Zus√§tzlich zur Swagger-Benutzeroberfl√§che gibt es ein praktisches Swagger-Editor-Tool. Sie k√∂nnen es im Web verwenden, Sie k√∂nnen es in einem Gebietsschema oder auf einer beliebigen Schreibmaschine abrufen. Sie k√∂nnen die Spezifikation in Echtzeit √§ndern und ihre Anzeige hier sehen. Das hei√üt, es ist ein sehr praktisches Tool zum Beispiel beim Entwerfen einer API, wenn Sie keine Spezifikation generiert haben und Ihr Backend irgendwie streicheln oder beschreiben m√∂chten, ohne ein reales oder generiertes Backend hinter sich zu haben.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j7/js/zo/j7jszonnqgfdxiyucziggnbr2kk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes kommt das wunderbare Prisma-Tool. Ich m√∂chte n√§her darauf eingehen. Prism ist ein Dienstprogramm von Spotlight. Mit der Spezifikation k√∂nnen Sie den Mock-Server anheben, der gem√§√ü der Spezifikation funktioniert, die Sie ihm zugef√ºhrt haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das hei√üt, in diesem Fall sehen wir die Einf√ºhrung von Prism √ºber der Spezifikation, die ich direkt unter dem Swagger-Laden gestohlen habe. Wir sehen, dass Prism alle Endpunkte gefunden hat, die in der Spezifikation angegeben sind, und gesagt hat, dass sie sie ehrlich st√∂ren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir zu f√ºhlen, was Prism kann.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/q4/il/wkq4ilyu29eoustye1c6zpbfleo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst finden wir den Stift, versuchen ihn zu ziehen und pl√∂tzlich sehen wir, dass Prism uns sagt: Entschuldigung, 401 Fehler. Wir gehen in die Spezifikation und sehen, dass dieser Stift tats√§chlich hinter der Autorisierung verborgen ist. Der Sicherheitsbereich ist dort klar beschrieben. Darin sehen wir, dass die Autorisierungsmethode OAuth ist, und wir verstehen: Tats√§chlich hat Prism eine Art Autorisierungsdaten von uns erwartet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hr/a9/8l/hra98lo9j-n1wboqvztd2rtzh2a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir, ihm Autorisierungsdaten in dem Format zu √ºbertragen, auf das er wartet. Es ist klar, dass das Zeichen irgendwie luftig ist, f√ºr Prisma spielt es keine Rolle, was es im Wesentlichen ist. Das Format ist ihm wichtig. Das hei√üt, wenn er auf OAuth wartet, wartet er auf Autorisierungsdaten in einem bestimmten Format.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir ruckeln mit der Autorisierung und sehen bereits den 400. Fehler. Wir schauen uns an, was wir in der Spezifikation haben. In der Spezifikation sehen wir, dass wir einige erforderliche Attribute nicht √ºbergeben haben. Lassen Sie uns sie weitergeben. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3u/24/k2/3u24k2uo0vk6pp9hru3vteaclso.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das magische Attribut ist Status. Es wird in der Tat gem√§√ü der ENUM-Spezifikation angegeben. Wenn wir einen Status √ºbertragen h√§tten, der nicht in dieser ENUM enthalten ist, h√§tten wir einen Vierpunkt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier haben wir den g√ºltigen Status √ºbergeben und sehen, dass das Backend mit einer vollst√§ndig g√ºltigen XML mit den Daten geantwortet hat. Die Daten in dieser XML werden jetzt nur noch aus dem in der Spezifikation angegebenen Beispiel zur√ºckgegeben. Das hei√üt, in der Spezifikation f√ºr jedes Feld gibt es einen solchen Abschnitt als Beispiel, in dem Sie ein Beispiel f√ºr Daten angeben k√∂nnen, die zur√ºckgegeben werden k√∂nnen. Hier brachte Prisma sie gerade zur√ºck.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/od/sd/6w/odsd6whlpmsf1vuwm_rdtgjadhk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber abgesehen von der Tatsache, dass Sie den Stift ziehen k√∂nnen und erwarten, dass es ehrliche zweihundert geben wird, gibt es die M√∂glichkeit, Prisma zu sagen - geben Sie mir einen bestimmten Antwortcode zur√ºck. Normalerweise beschreiben wir in der Spezifikation das unterschiedliche Verhalten unseres Stifts, und mit g√ºltigen Daten entsprechen sie nicht immer zweihundert. Sie k√∂nnen beispielsweise nach IDs in der Datenbank suchen, um festzustellen, dass eine solche ID nicht vorhanden ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall deklarieren wir jedem einen bestimmten Code, beispielsweise den 400. oder 422., wie Sie m√∂chten. Das hei√üt, mit einem g√ºltigen Eintrag gibt es nicht immer einen g√ºltigen Ausgang. Daher beschreiben wir in der Spezifikation verschiedene Antwortoptionen. Und wir k√∂nnen beim Ruckeln des Stiftprismas klar sagen: Dieses Mal warte ich darauf, dass Sie mir antworten, sagen wir, der 404. Fehler. Angenommen, dies ist ein Fall, wenn ich mit einer ID am Griff ziehe, aber es gibt keine solche ID.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ys/wg/lt/yswgltoo-e7vyjv5mesvlkvolji.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammenfassend: Welche Funktionen gibt es im Allgemeinen zus√§tzlich zu den bereits erw√§hnten? Auch dies ist ein Mock-Server, den Sie abholen k√∂nnen. Er wird gem√§√ü der Spezifikation antworten und Autorisierungsanfragen validieren. Es werden auch die Daten √ºberpr√ºft, die Sie an das Ger√§t gesendet haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zus√§tzlich zur Validierung der Anforderung werden Antworten generiert. Im einfachsten Fall werden, wie gesagt, Antworten anhand von Beispielen generiert. Es gibt eine zweite Option - wenn Sie explizit danach fragen: Bitte generieren Sie dynamische Antworten. Eine dynamische Strategie bedeutet, dass je nach Typ, z. B. int, Tausende, Milliarden oder etwas anderes generiert werden. Oder f√ºr die Zeichenfolge ein seltsamer und unverst√§ndlicher Hash.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ich beim ersten Durchlauf sagte, dass Sie Daten generieren k√∂nnen, fragten wir uns: Es w√§re cool, wenn Prism in faker integriert w√§re. Diejenigen, die den Python-F√§lscher verwendet haben, wissen wahrscheinlich, wie cool es ist, wenn Sie einige Daten sperren oder Daten in der Datenbank emulieren m√∂chten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prism ist also in JavaScript geschrieben. JavaScript hat auch Faker.js und Prism hat eine automatische Integration mit faker. Sie k√∂nnen in Ihrer Spezifikation explizit angeben, welche Arten von F√§lschungsdaten Ihr Stift geben soll. Das hei√üt, OpenAPI unterst√ºtzt ein Plug-In-System, mit dem Sie Ihre Spezifikation erweitern k√∂nnen, sodass OpenAPI und der Parser selbst keine Rolle spielen. Wenn es jedoch Plugins gibt, die Ihre Spezifikation analysieren, k√∂nnen sie einige zus√§tzliche Felder verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prism bietet Ihnen daher die M√∂glichkeit, das optionale X-Faker-Plugin-Feld zu verwenden. Sehr bequem. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier habe ich unter dem Sternchen angegeben, dass R√ºckrufe in OpenAPI beschrieben werden k√∂nnen. Dies ist das Interaktionsschema, wenn Sie einen R√ºckruf an einen bestimmten Stift registrieren und darauf warten, dass Sie einen bestimmten R√ºckruf an die von Ihnen registrierte URL erhalten. Also, Prisma und es wei√ü, wie man nass wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interessant: Prisma kann nicht nur im Mock-Modus, sondern auch im Proxy-Modus angehoben werden. Sie stellen diesen Proxy einfach vor Ihr echtes Backend, und alle Anforderungen, die Prism durchlaufen und zur√ºckkommen, werden von Prism gem√§√ü den Spezifikationen validiert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn einige Daten - z. B. Eingabe oder Ausgabe, Anforderung oder Antwort - voneinander abweichen, schreibt er dies in das Protokoll. Er macht das ganz transparent, es hat keinen Einfluss auf das wirkliche Verhalten. Im Allgemeinen hei√üt es in der Dokumentation, dass es in der Produktion leicht angehoben werden kann. Ehrlich gesagt habe ich es nicht selbst versucht. Sicher gibt es eine Art Overhead, aber ich kann immer noch nichts dazu sagen. Sie k√∂nnen f√ºhlen, versuchen und erz√§hlen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dar√ºber hinaus ist es durch das, was ich bereits gesagt habe, m√∂glich, bestimmte Anfragen zu erzwingen. Das hei√üt, kommen Sie zum Mock-Server und sagen Sie: Ich m√∂chte ein bestimmtes Beispiel oder eine bestimmte Art von Antwort. Wir haben bereits √ºber die Art der Antwort gesprochen. Auch in der OpenAPI-Spezifikation k√∂nnen mehrere Antwortoptionen angegeben und explizit benannt werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen also kommen und Prisma sagen: Dieses Mal m√∂chte ich ein bestimmtes Beispiel, das n√§chste Mal m√∂chte ich ein anderes Beispiel. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lu/ks/3i/luks3i81suk0tx_npozzbwrgpmi.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link von der Folie</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
√úber Prisma gesprochen. Nun zum Postboten. Ich liebe ihn so sehr. Postman ist also sofort in OpenAPI integriert. Sie k√∂nnen die OpenAPI-Spezifikation buchst√§blich mit nur zwei Tastenklicks importieren. Und er erstellt eine Sammlung von Anfragen gem√§√ü Ihrer Spezifikation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gleichzeitig bereitet er alle Abfrageparameter, alle K√∂rperparameter, alle Umgebungen und Berechtigungen vor. Sie m√ºssen die Daten nur mit einigen echten IDs oder etwas anderem, Autorisierungstoken, beenden. Sehr bequem.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hv/_n/it/hv_nit8modo3fisqvijmuemcwzq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir fahren vom Postboten weiter. Wir haben √ºber Prism gesprochen, es hat Funktionalit√§t - Abfragevalidierung. Tats√§chlich gibt es ein separates Dienstprogramm, mit dem Sie Ihr wirklich laufendes Backend gnadenlos saugen und sehen k√∂nnen, ob es wirklich gem√§√ü der Spezifikation funktioniert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dredd analysiert die Spezifikation. Er nimmt, zieht alle Stifte und schaut auf das, was zu ihm zur√ºckgekehrt ist. Im Allgemeinen kann dredd als Infrastruktur zum Schreiben von Tests behandelt werden, da alle seine Anforderungen durch seine Hooks erg√§nzt werden k√∂nnen. Das hei√üt, von der Box aus k√∂nnen Sie dredd so starten, wie es ist, wie ich es hier gestartet habe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oder Sie k√∂nnen dredd ausf√ºhren, indem Sie eine Reihe von Hooks √ºbergeben, die tats√§chlich in der Ideologie eines regul√§ren Tests funktionieren. Es gibt etwas, das sich auf die gesamte Testreihe auswirkt. Es gibt Hooks, die vor dem Test, nach dem Test und der gesamten Infrastruktur ausgef√ºhrt werden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/p1/0s/7w/p10s7w3s_sj3l5yvjoyzhssvnjq.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link von der Folie</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Als n√§chstes m√∂chte ich detaillierter auf ein solches Tool von Swagger selbst als Swagger-Codegen eingehen. In der Tat ist es ein bisschen wie ein Schweizer Messer. Was f√ºr Gedanken hatten die Jungs, als sie dieses Instrument geschrieben haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn jemand in ein Backend integriert werden muss, beschreiben Sie normalerweise selten eine http-Anfrage hier zu einem bestimmten Zeitpunkt in der Gesch√§ftslogik. Am h√§ufigsten kapseln Sie die Arbeit mit einem bestimmten Backend in einer Entit√§t im Client.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Jungs kamen also auf die Idee, dass wir mit einer Spezifikation ganz klar beschreiben und vorhersagen k√∂nnen, wie der Client f√ºr dieses Backend aussehen w√ºrde. Und die Jungs haben einen Kundengenerator gemacht. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xx/mp/bs/xxmpbsw0ksdzbh2yb6vrvbrxylw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versuchen wir, die Client-Generierung gem√§√ü der Petstore-Spezifikation zu starten. Wir werden sehen, dass dieser Generator vom Swagger-Client selbst generiert wurde, in dem sich der Python-Client selbst befindet. Hier in der Startzeile k√∂nnen Sie deutlich sehen, dass ich einen Client in Python generiere. Tats√§chlich unterst√ºtzt es eine gro√üe Anzahl von Sprachen. Was ist hier wichtig? Spitzenreiter werden JavaScript m√∂gen, Hipster werden Go m√∂gen. Alles was du willst.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zus√§tzlich zum Client in Python erstellte er einige Dokumente und testete magische Ordner. Wir werden sp√§ter ausf√ºhrlicher dar√ºber sprechen. Und viel Zucker, damit Sie diesen Client in eine fertige Bibliothek einwickeln k√∂nnen. Es gibt Gitignore, es gibt CI-Dateien, sagen wir f√ºr Travis, es gibt Zucker f√ºr Git. Es gibt Anforderungen, setup.py und tox.ini. Das hei√üt, alles, was Ihnen hilft, diesen Client einfach zu √ºbernehmen, festzuschreiben und zu senden, liegt bereits in Form einer Bibliothek vor, die wiederverwendet werden kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns genauer an, was er im Client generiert hat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xy/rl/sv/xyrlsvzq6lsyg1ujajxjfpqcdgu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Client generierte er neben einigen Hilfsdateien zwei sehr wichtige Verzeichnisse API und Modelle. In Modellen haben wir die Datenmodelle, die wir manipulieren. Jedes Modell ist einfach eine Python-Klasse, die von einem Objekt mit __init__ geerbt wird, das alle Arten von Parametern f√ºr dieses Schema verwendet, sowie Getter und Setter, die den Status des Objekts √§ndern. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lk/zo/ib/lkzoibgytyj3yh883ypi3tlrlqs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neben dem Modell wurden dort auch Entit√§ten wie PetApi angezeigt. Dies sind lediglich Client-Wrapper √ºber der Endpunktgruppe, die OpenAPI entweder nach Tags oder nach Endpunkten gruppiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dieser Client verf√ºgt √ºber alle Stifte, die Sie zucken k√∂nnen, um echte Daten zu √ºbertragen. Dann fliegen sie zu einem Backend.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8x/9s/ju/8x9sju8tcpqdmm6ymz40sbaiarc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was wird von diesem generierten Client implementiert? Aus dem Interessanten - dem vertraglichen Ansatz. Reden wir mehr √ºber ihn. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der vertragliche Programmieransatz legt nahe, dass Sie bei der Implementierung der Interaktion zwischen Client und Server immer bestimmte Regeln und Vertr√§ge einhalten, unabh√§ngig davon, ob es sich um Daten handelt, die der Client an den Server weitergibt, oder um Daten, die der Server an den Client weitergibt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Vertragsansatz empfiehlt Ihnen daher, Ihre Daten und Ihre Interaktion jedes Mal in Echtzeit auf Einhaltung des Vertrags zu √ºberpr√ºfen. Wenn dieser Vertrag ein Schema der von uns √ºbermittelten Daten ist und nicht unseren Erwartungen entspricht, nicht erf√ºllt ist, m√ºssen Sie dies sagen und den Fehler hier und jetzt anzeigen. Gehen Sie nicht zum echten Backend, warten Sie nicht auf vier Punkte, sondern sagen Sie es jetzt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oder ein anderer Fall: Wir sind zum Backend gegangen, haben einige Daten erhalten, aber sie entsprechen nicht dem, worauf wir gewartet haben. Angenommen, einige Felder, von denen wir erwartet haben, dass sie gef√ºllt sind, werden leer. Wir werden hier und jetzt dar√ºber sprechen und nicht, wenn wir irgendwo im Wald irgendwo auf dem Call-Stack liegen und nicht herausfinden, warum etwas heruntergefallen ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Swagger-Codegen generiert also Kunden und Modelle gem√§√ü dem Vertragsansatz. Sie k√∂nnen in Echtzeit sagen: Ja, ich m√∂chte, dass der Client zur Laufzeit alle Daten auf Einhaltung der Vertr√§ge √ºberpr√ºft. Und wenn der Vertrag nicht erf√ºllt ist, wird er dies sofort sagen. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wd/cv/cf/wdcvcfmelgbc911cza5jnwuxc4c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben eine Art Pit-Client mit einem vertraglichen Ansatz generiert, aber au√üerdem hat Swagger-Codegen Dokumentations-Stubs f√ºr uns generiert. Tats√§chlich sind sie recht einfach, aber sie k√∂nnen alle f√ºr jedes Modell gedreht werden. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4n/xb/hx/4nxbhxsvwigzwulp0o-cgvggx0c.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auch Swagger-Codegen erzeugte eine Art Teststubs. Alles, damit Sie den generierten Code mit minimalem Aufwand ausrollen und mit Tests mit kontinuierlicher Integration in Form einer Bibliothek mit einem Git mit allen Schnickschnack ausf√ºhren k√∂nnen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jz/ab/zy/jzabzyk84w7w8mhuxfyvfl5wc7m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns noch einmal kurz darauf eingehen. Wir haben uns nur einen Fall angesehen - eine M√∂glichkeit, Clients f√ºr die API zu generieren. Aus dem wichtigen vertraglichen Ansatz. Ich m√∂chte sagen: Als ich einen Kunden f√ºr eine echte Zoohandlung gem√§√ü deren Spezifikationen generiert habe und wirklich zu deren Backend gegangen bin, hat dieser vertragliche Ansatz pl√∂tzlich die ung√ºltigen Daten erfasst, die von der Zoohandlung zur√ºckgegeben wurden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst dachte ich - sie sind ein bisschen seltsam. Sie selbst haben die Spezifikation generiert, und das Backend funktioniert f√ºr sie nicht richtig. Aber es scheint mir, dass sie es absichtlich getan haben, damit wir die Kraft des Vertragsansatzes sehen k√∂nnen. Es gab nicht viele Daten und sie wurden eindeutig generiert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auch in der Kundengeneration und in einer anderen Generation k√∂nnen Sie Ihre eigenen Vorlagen verwenden. Wenn Sie also einen Client in einem bestimmten Format generieren m√∂chten, k√∂nnen Sie Ihre Vorlage speichern und vorbereiten und Clients nach Ihren W√ºnschen generieren. Wenn Sie jeden Tag herumgehen und Integrationen generieren, wird es Ihnen vielleicht sehr gefallen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie k√∂nnen diese Clients auch konfigurieren und den Import Ihrer Modelle schreiben, anstatt der von Swagger-Codegen generierten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zus√§tzlich zum Generieren von Clients f√ºr die API k√∂nnen Sie die Spezifikation dem Generator zuf√ºhren und die Stubs des Servers selbst generieren. Das ist sehr merkw√ºrdig. Das hei√üt, Sie generieren eine Art Backend, das angeblich gem√§√ü der Spezifikation funktioniert. Es ist klar, dass es dort keine Gesch√§ftslogik gibt. Aber vielleicht ist es praktisch als eine Art Ger√ºst, das hei√üt, einen Entwurf vorzubereiten, mit dem Sie bereits etwas tun k√∂nnen. Ich habe es nicht benutzt, aber ich empfehle einen Blick darauf zu werfen - vielleicht finden Sie etwas N√ºtzliches f√ºr sich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter anderem k√∂nnen Sie Dokumentation im HTML- und Confluence-Format erstellen, wenn jemand sie verwendet. Dort endeten auch die Beispiele, die ich f√ºr OpenAPI zeigen wollte. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bw/mm/7o/bwmm7osu5o5m_nozsic84gevl68.jpeg"><br>
<b><sup><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle diese Tools sind unter den beiden folgenden Links auf der Folie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verf√ºgbar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">openapi.tools</font></a><font style="vertical-align: inherit;"> und</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/APIs-guru/awesome-openapi3</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ich m√∂chte die Tuning-Gruppen in der OpenAPI-Spezifikation anzeigen. In der Tat gibt es viele Werkzeuge. Dies sind nur Gruppen, dh Arten von Werkzeugen, die Sie verwenden k√∂nnen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Von Bedeutung ist hier ein Konverter von einer Spezifikation zur anderen. Das hei√üt, Sie k√∂nnen die Blueprint-API oder was auch immer Sie m√∂chten aus der OpenAPI-Spezifikation generieren und umgekehrt. Es gibt eine Bibliothek f√ºr Mock, f√ºr Dokumentation. Das hei√üt, alles, wor√ºber ich gesprochen habe, wird sich in diesen Gruppen widerspiegeln.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt einen Link, dem Sie auch folgen k√∂nnen. Achten Sie darauf, schauen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ga/7c/l9/ga7cl9jxvn0wzptbyrde_l-fjuc.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Link von der Folie</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neben den Tools rund um OpenAPI gibt es auch Tools rund um Swagger. </font><font style="vertical-align: inherit;">Es gibt SwaggerHub und Swagger Inspector. </font><font style="vertical-align: inherit;">Sie werden blau hervorgehoben, da es sich um ein webbasiertes Toolkit handelt. </font><font style="vertical-align: inherit;">Sie k√∂nnen direkt dorthin gehen und als Dienst den SwaggerHub und den Swagger Inspector verwenden, die eigentlich eine √úberlagerung der folgenden Bibliotheken darstellen: Swagger-Editor, Swagger-Codegen, Swagger-UI. </font><font style="vertical-align: inherit;">All das haben wir gerade besprochen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Bibliotheken sind gelb, wie wir gesehen haben, Open Source. </font><font style="vertical-align: inherit;">Es gibt auf GitHub, in Form von Docker. </font><font style="vertical-align: inherit;">Verwenden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br>
<img src="https://habrastorage.org/webt/7s/sf/jq/7ssfjqj01gdiek3-9wspmzovjsy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was haben wir heute besprochen? REST-API-Spezifikation am Beispiel von OpenAPI und Swagger. Ich m√∂chte betonen, dass OpenAPI nur eine M√∂glichkeit ist, die Spezifikation zu beschreiben. Es gibt viele davon. Siehe auch die Blueprint-API. Vielleicht mag jemand anderes etwas. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1a/0f/gp/1a0fgp8uuikaes5v4un8tam6z9s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben auch Swagger gesehen. Im Wesentlichen handelt es sich, wie bereits erw√§hnt, nur um eine sch√∂ne Benutzeroberfl√§che rund um die Spezifikation, mit der Sie sie auf bequeme Weise anzeigen und erkunden k√∂nnen. Tats√§chlich gibt es auch viele dieser Tools, die von ReDoc und Sphinx bis hin zu Markdown reichen. Das hei√üt, Sie k√∂nnen Markdown aus OpenAPI generieren und es wird in allen GitHub, GitLab - wo immer Sie wollen - wundersch√∂n angezeigt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben uns auch ein Beispiel auf unserem Technologie-Stack angesehen, wie wir jetzt die Spezifikation generieren. Aber wie Sie bemerkt haben, ist dies ziemlich kompliziert und unpraktisch, da wir tats√§chlich Gesch√§ftslogik und Dokumentstrings duplizieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gx/er/qc/gxerqcbvgjayoxqbschiwlldcow.jpeg"><br>
<b><sup><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Links von der Folie: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FastAPI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAFRS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rororo</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Von Interesse empfehle ich Ihnen, sich FastAPI anzuschauen. </font><font style="vertical-align: inherit;">Styopa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ihnen heute mehr dar√ºber </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">erz√§hlen</font></a><font style="vertical-align: inherit;"> . Mit FastAPI k√∂nnen Sie sofort eine Spezifikation erstellen. Ihnen f√§llt dort √ºberhaupt nichts ein. Schreiben Sie einfach den Code und erhalten Sie die fertige Spezifikation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei weitere Frameworks: SAFRS und Rororo. Die Namen sind nat√ºrlich magisch. Sie arbeiten ein wenig an einem anderen Modell, lassen Sie nicht √ºber die Spezifikation nachdenken und bekommen sie nur als Nebeneffekt. Im Gegenteil, Sie haben eine Spezifikation, die Handler antreibt. Dies ist grob gesagt eine spezifikationsgetriebene Entwicklung. Sie haben nicht so viele Sterne wie FastAPI, aber es scheint mir, dass sie Aufmerksamkeit verdienen, werfen Sie einen Blick darauf. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bg/wy/u2/bgwyu2t0-lmkl0137h_yawj4cuk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und schlie√ülich haben wir anhand der Beispiele von OpenAPI und Swagger besprochen, welche Art von Dienstprogramm es um die Spezifikation gibt. F√ºr alle Punkte, die ich </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
verlinke </font><font style="vertical-align: inherit;">, gibt es sicher viele interessante Dinge: </font><font style="vertical-align: inherit;">- OpenAPI / Swagger </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.io/docs/specification/about</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- Beispiel f√ºr Falcon + Marshmallow + Apispec </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/marshmallow-code/apispec</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/tiangolo/fastapi</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
- OpenAPI / Swagger </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Br√∂tchen </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openapi.tools </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swagger.io/tools swagger.io/tools/open-source/open-source-integrations </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/APIs-guru/awesome-openapi3</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Was habe ich </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">?</font></a><font style="vertical-align: inherit;"> war die Nachricht des Berichts? </font><font style="vertical-align: inherit;">Leute, das Schreiben von Spezifikationen ist keine B√ºrokratie. </font><font style="vertical-align: inherit;">Und das ist nicht so schwierig, wie es auf den ersten Blick erscheinen mag, sondern eher einfach und bietet viele n√ºtzliche Werkzeuge, die Ihnen gro√üe Chancen er√∂ffnen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schreiben Sie die Spezifikationen. </font><font style="vertical-align: inherit;">Empfehlen. </font><font style="vertical-align: inherit;">Vielen Dank.</font></font><br>
<br>
<hr><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle Codes und Links sind in der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√§sentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verf√ºgbar </font><font style="vertical-align: inherit;">.</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de501064/index.html">Zum Flug des chinesischen Versuchsschiffs. Infografiken und Collagen.</a></li>
<li><a href="../de501068/index.html">Deepfakes und Deep Media: Ein neues Schlachtfeld f√ºr Sicherheit</a></li>
<li><a href="../de501076/index.html">Monat entfernt. Wir fassen die Life Hacks der Leiter der Arbeitsgruppen der Jet Infosystems zusammen und teilen sie</a></li>
<li><a href="../de501084/index.html">Beobachtbare Dienste in Angular</a></li>
<li><a href="../de501086/index.html">Summ3r von h4ck 2020. Sommer-Tutorial f√ºr digitale Sicherheit</a></li>
<li><a href="../de501090/index.html">K8S Multicluster Reise</a></li>
<li><a href="../de501092/index.html">√úber die Suche nach vielversprechendem Juni und "udalenka". Erfahrung als Redmadrobot Technical Support Manager</a></li>
<li><a href="../de501098/index.html">SmartLi Smart Battery-L√∂sungen f√ºr modulare USV</a></li>
<li><a href="../de501106/index.html">Der einfachste englische Wortsimulator mit Python und Balabolka</a></li>
<li><a href="../de501108/index.html">Nvidia Streaming Multiprozessor-Verlauf</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>