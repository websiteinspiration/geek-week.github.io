<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßí ‚≠ïÔ∏è üë®üèª‚ÄçüöÄ Programaci√≥n declarativa de aplicaciones cliente-servidor en Android. Parte 2 ‚öïÔ∏è üë®üèæ‚Äçüíª ‚ôÇÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El art√≠culo anterior mostr√≥ brevemente las ventajas de la programaci√≥n declarativa de aplicaciones cliente-servidor para Android en comparaci√≥n con el...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Programaci√≥n declarativa de aplicaciones cliente-servidor en Android. Parte 2</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502024/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">art√≠culo anterior</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mostr√≥ brevemente las ventajas de la programaci√≥n declarativa de aplicaciones cliente-servidor para Android en comparaci√≥n con el imperativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora escribiremos un proyecto peque√±o pero suficiente para evaluar la efectividad de la biblioteca DePro. </font><font style="vertical-align: inherit;">Es parte de uno de los </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ejemplos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> educativos </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">de la biblioteca</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">El dise√±o de todas las pantallas que describimos se muestra en las siguientes figuras:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f6c/afe/af5/f6cafeaf546e9467b0a1b71b122b7eeb.png" alt="imagen"> <img src="https://habrastorage.org/getpro/habr/post_images/287/0cb/0b9/2870cb0b957f2ed4318cd78a137ebf3a.png" alt="imagen"> <img src="https://habrastorage.org/getpro/habr/post_images/0d7/f08/980/0d7f08980838c23cc41258eca7a3093e.png" alt="imagen"><br>
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla DRAWER Pantalla CATALOGUE Pantalla PRODUCT_LIST</font></font></pre><br>
<img src="https://habrastorage.org/getpro/habr/post_images/5a1/32c/952/5a132c9529aadcf1101fe14137e4ff17.png" alt="imagen"> <img src="https://habrastorage.org/getpro/habr/post_images/b4b/c8e/768/b4bc8e768bb0d616ddb4a4325986cdab.png" alt="imagen"> <img src="https://habrastorage.org/getpro/habr/post_images/227/00e/5f5/22700e5f57ffbc8fc43429ee87f79b87.png" alt="imagen"><br>
<pre> CATALOG_           DESCRIPT          CHARACTERISTIC</pre><br>
<img src="https://habrastorage.org/getpro/habr/post_images/5a6/635/394/5a6635394bccc0473f79ed51b0fab8b6.png" alt="imagen"> <img src="https://habrastorage.org/getpro/habr/post_images/150/f30/32f/150f3032f242fc892db119d5b0fc15a2.png" alt="imagen"> <img src="https://habrastorage.org/getpro/habr/post_images/a0d/44f/49b/a0d44f49bd430384c67a9e6a81a4bbe1.png" alt="imagen"><br>
<pre> FITNESS           FITNESS_          </pre><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde estas pantallas, su funcionalidad se entiende generalmente. El men√∫ lateral contiene dos elementos "Cat√°logo" y "Estado f√≠sico". Cuando selecciona un elemento, se muestra la pantalla correspondiente. La pantalla CAT√ÅLOGO contiene una lista horizontal de "Noticias". Cuando hace clic en cualquier "producto nuevo", se muestra una pantalla con una descripci√≥n de este producto. Descripci√≥n consta de dos pesta√±as: "Descripci√≥n" y "Caracter√≠sticas". Tambi√©n en la pantalla CAT√ÅLOGO hay una lista desplegable "Cat√°logo". Cuando hace clic en la flecha hacia abajo, el directorio se abre (se cierra). Cuando hace clic en la l√≠nea completa, se muestra la pantalla PRODUCT_LIST con una lista de productos para el art√≠culo seleccionado en el cat√°logo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando hace clic en el elemento "Fitness", se muestra la pantalla APTITUD con una lista de servicios. La lista depende del club seleccionado en la ruleta. Cuando intenta salir de la aplicaci√≥n, aparece un cuadro de di√°logo de advertencia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El servidor transfiere datos en formato json a la aplicaci√≥n. </font><font style="vertical-align: inherit;">La estructura de datos para cada pantalla se describe a continuaci√≥n. </font><font style="vertical-align: inherit;">En las aplicaciones escritas en DePro desde la API, solo se usa la URL, la estructura de datos solo se necesita para establecer correctamente la vista de nombre (id), porque el enlace se realiza por nombre. </font><font style="vertical-align: inherit;">Vale la pena se√±alar que los datos son una porci√≥n incompleta de datos reales. </font><font style="vertical-align: inherit;">Por lo tanto, puede que no haya conexiones en nombres, im√°genes. </font><font style="vertical-align: inherit;">En particular, las im√°genes del producto suman un total de 20 piezas. </font><font style="vertical-align: inherit;">Por lo tanto, la misma imagen puede estar en muchos productos.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API por ejemplo pantallas</font></font></b>
                        <div class="spoiler_text"> CATALOG    () URL depro/cron/news,  GET.       .     .<br>
<br>
 <br>
<br>
<pre><code class="plaintext hljs">    {<font></font>
        "product_id":4610,<font></font>
        "catalog_id":15984,<font></font>
        "product_name":"  20  6  ( 1*20) APRO",<font></font>
        "catalog_code":"ZRG-20kit",<font></font>
        "picture":"depro/cronimg/picture_1.jpeg",<font></font>
        "bar_code":"4824041010653",<font></font>
        "oem":"",<font></font>
        "price":175.98,<font></font>
        "brand":"APRO",<font></font>
        "product_code":"032578",<font></font>
        "gift":0,<font></font>
        "bonus":0,<font></font>
        "new_product":1,<font></font>
        "quantity":5<font></font>
    },<font></font>
    . . .<font></font>
</code></pre><br>
     URL depro/cron/catalog. <br>
<br>
   URL depro/cron/catalog_ex   catalog_id      id ,  .<br>
<br>
    :<br>
<br>
<pre><code class="plaintext hljs">[<font></font>
    {<font></font>
        "catalog_id":15510,<font></font>
        "parent_id":0,<font></font>
        "catalog_name":""<font></font>
    },<font></font>
    {<font></font>
        "catalog_id":15584,<font></font>
        "parent_id":0,<font></font>
        "catalog_name":""<font></font>
    },<font></font>
    . . .<font></font>
]<font></font>
</code></pre><br>
 PRODUCT_LIST URL depro/cron/product_list  : expandedLevel  catalog_id.<br>
 expandedLevel ‚Äî    (0, 1  2), catalog_id ‚Äî id  .<br>
<br>
   0  1    ,    ,                .<br>
<br>
 GET<br>
<br>
        ()<br>
<br>
       URL depro/cron/product_barcode  <br>
 barcode_scanner. <br>
<br>
       URL depro/cron/product_search   product_name.     LIKE.  product_name      .<br>
<br>
        .<br>
<br>
 DESCRIPT <br>
<br>
 : URL depro/cron/product_id   product_id.  GET.<br>
<br>
<br>
<br>
<pre><code class="plaintext hljs">{<font></font>
    "product_id":2942,<font></font>
    "catalog_id":15594,<font></font>
    "product_name":"   2110, 2111, 2112,  Sens ''  ",<font></font>
    "catalog_code":"23.3828"<font></font>
    ,"picture":"depro/cronimg/picture_16.jpeg",<font></font>
    "bar_code":"2000000148472",<font></font>
    "oem":"2112-3851010",<font></font>
    "price":103.02,<font></font>
    "brand":", . , ",<font></font>
    "product_code":"027729",<font></font>
    "gift":1,<font></font>
    "bonus":0,<font></font>
    "new_product":0,<font></font>
    "quantity":16<font></font>
}<font></font>
</code></pre><br>
: URL depro/cron/product_analog   product_id.  GET.<br>
<br>
<br>
<br>
<pre><code class="plaintext hljs">[<font></font>
    {<font></font>
        "product_id":561,<font></font>
        "catalog_id":15587,<font></font>
        "product_name":"   2110, 2111, 2112 (  16 . ) AURORA",<font></font>
        "catalog_code":"WP-LA2112",<font></font>
        "picture":"depro/cronimg/picture_12.jpeg",<font></font>
        "bar_code":"2900011680711",<font></font>
        "oem":"2112-1307010",<font></font>
        "price":188.16,<font></font>
        "brand":"AURORA, Poland",<font></font>
        "product_code":"016807",<font></font>
        "gift":0,<font></font>
        "bonus":1,<font></font>
        "new_product":0,<font></font>
        "quantity":15<font></font>
    },<font></font>
    . . .<font></font>
]</code></pre><br>
<br>
 CHARACTERISTIC URL depro/cron/product_charact   product_id.  GET.<br>
<br>
<br>
<pre><code class="plaintext hljs">[<font></font>
    {<font></font>
        "prop_id":2764,<font></font>
        "product_id":2942,<font></font>
        "name":"",<font></font>
        "value":", . , "<font></font>
    },<font></font>
    {<font></font>
        "prop_id":2765,<font></font>
        "product_id":2942,<font></font>
        "name":"   ",<font></font>
        "value":","<font></font>
    },<font></font>
    . . .<font></font>
]</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora considere nuestros pasos para escribir una solicitud. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. En el estudio crearemos un nuevo proyecto. El nombre se puede establecer a su discreci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Despliegue de recursos. Como se mencion√≥ en el primer art√≠culo, los archivos de recursos (XML) se usan de manera convencional. Por lo tanto, para no perder el tiempo en cosas conocidas, simplemente descargamos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todos los recursos necesarios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descomprima el archivo res_example.zip resultante. En el estudio, elimine todo el contenido de la carpeta res. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Transfiera el contenido de la carpeta res descomprimida a la carpeta res del proyecto. Despu√©s de eso, teniendo en cuenta las caracter√≠sticas de Android Studio, es posible que deba borrar el proyecto y / o ejecutar el comando Invalid Caches / Restart. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Conexi√≥n de la biblioteca </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la secci√≥n de dependencias del archivo build.gradle del m√≥dulo, debe especificar:</font></font><br>
<br>
<pre><code class="java hljs">    implementation <span class="hljs-string">'github.com/deprosystem/depro:compon:3.0.1'</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la secci√≥n de Android del archivo build.gradle del m√≥dulo, debe especificar:</font></font><br>
<br>
<pre><code class="java hljs">    packagingOptions {<font></font>
        exclude <span class="hljs-string">'META-INF/DEPENDENCIES'</span><font></font>
    }<font></font>
    compileOptions {<font></font>
        sourceCompatibility JavaVersion.VERSION_1_8<font></font>
        targetCompatibility JavaVersion.VERSION_1_8<font></font>
    }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al elegir el atributo minSdkVersion, debe tener en cuenta que la biblioteca admite minSdkVersion = 17. Despu√©s de cambiar build.gradle, debe sincronizar el proyecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Creaci√≥n de clases necesarias (archivos). </font><font style="vertical-align: inherit;">Cuando se trabaja con la biblioteca, solo se utilizan 4 clases: MyDeclareScreens: se describen todas las pantallas; </font><font style="vertical-align: inherit;">MyParams: establece los par√°metros necesarios para la aplicaci√≥n; </font><font style="vertical-align: inherit;">MyApp: se inicia la biblioteca DePro; </font><font style="vertical-align: inherit;">MainActivity - actividad de inicio. </font><font style="vertical-align: inherit;">Puedes usar tus propios nombres de clase. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree la clase MyDeclareScreens.java. </font><font style="vertical-align: inherit;">Sus contenidos son los siguientes:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyDeclareScreens</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DeclareScreens</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> String<font></font>
            MAIN = <span class="hljs-string">"main"</span>, DRAWER = <span class="hljs-string">"DRAWER"</span>, CATALOG = <span class="hljs-string">"CATALOG"</span>,<font></font>
            DESCRIPT = <span class="hljs-string">"DESCRIPT"</span>, CHARACTERISTIC = <span class="hljs-string">"CHARACTERISTIC"</span>,<font></font>
            PRODUCT_LIST = <span class="hljs-string">"PRODUCT_LIST"</span>, PRODUCT_DESCRIPT = <span class="hljs-string">"PRODUCT_DESCRIPT"</span>,<font></font>
            FITNESS = <span class="hljs-string">"FITNESS"</span>;<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">declare</span><span class="hljs-params">()</span> </span>{<font></font>
        activity(MAIN, R.layout.activity_main)<font></font>
                .navigator(finishDialog(R.string.attention, R.string.finishOk))<font></font>
                .drawer(R.id.drawer, R.id.content_frame, R.id.left_drawer, <span class="hljs-keyword">null</span>, DRAWER);<font></font>
<font></font>
        fragment(DRAWER, R.layout.fragment_drawer)<font></font>
                .menu(model(menu), view(R.id.recycler));<font></font>
<font></font>
        fragment(CATALOG, R.layout.fragment_catalog)<font></font>
                .navigator(handler(R.id.back, VH.OPEN_DRAWER))<font></font>
                .component(TC.RECYCLER_HORIZONTAL, model(Api.NEWS_PROD).pagination().progress(R.id.progr),<font></font>
                        view(R.id.recycler_news, R.layout.item_news_prod),<font></font>
                        navigator(start(PRODUCT_DESCRIPT)))<font></font>
                .component(TC.RECYCLER, model(Api.CATALOG),<font></font>
                        view(R.id.recycler, <span class="hljs-string">"expandedLevel"</span>, <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[]{R.layout.item_catalog_type_1,<font></font>
                                R.layout.item_catalog_type_2, R.layout.item_catalog_type_3})<font></font>
                                .expanded(R.id.expand, R.id.expand, model(Api.CATALOG_EX, <span class="hljs-string">"catalog_id"</span>)),<font></font>
                        navigator(start(PRODUCT_LIST)));<font></font>
<font></font>
        activity(PRODUCT_LIST, R.layout.activity_product_list, <span class="hljs-string">"%1$s"</span>, <span class="hljs-string">"catalog_name"</span>).animate(AS.RL)<font></font>
                .navigator(back(R.id.back))<font></font>
                .component(TC.RECYCLER, model(Api.PRODUCT_LIST, <span class="hljs-string">"expandedLevel,catalog_id"</span>),<font></font>
                        view(R.id.recycler, R.layout.item_product_list)<font></font>
                                .visibilityManager(visibility(R.id.bonus_i, <span class="hljs-string">"bonus"</span>),<font></font>
                                        visibility(R.id.gift_i, <span class="hljs-string">"gift"</span>),<font></font>
                                        visibility(R.id.newT, <span class="hljs-string">"new_product"</span>)),<font></font>
                        navigator(start(PRODUCT_DESCRIPT)));<font></font>
<font></font>
        activity(PRODUCT_DESCRIPT, R.layout.activity_product_descript, <span class="hljs-string">"%1$s"</span>, <span class="hljs-string">"catalog_name"</span>).animate(AS.RL)<font></font>
                .navigator(back(R.id.back))<font></font>
                .setValue(item(R.id.product_name, TS.PARAM, <span class="hljs-string">"product_name"</span>))<font></font>
                .component(TC.PAGER_F, view(R.id.pager, DESCRIPT, CHARACTERISTIC)<font></font>
                        .setTab(R.id.tabs, R.array.descript_tab_name));<font></font>
<font></font>
        fragment(DESCRIPT, R.layout.fragment_descript)<font></font>
                .component(TC.PANEL, model(Api.PRODUCT_ID, <span class="hljs-string">"product_id"</span>),<font></font>
                        view(R.id.panel).visibilityManager(visibility(R.id.bonus, <span class="hljs-string">"bonus"</span>)))<font></font>
                .component(TC.RECYCLER, model(Api.ANALOG_ID_PRODUCT,<span class="hljs-string">"product_id"</span>),<font></font>
                        view(R.id.recycler, R.layout.item_product_list).noDataView(R.id.not_analog)<font></font>
                                .visibilityManager(visibility(R.id.bonus_i, <span class="hljs-string">"bonus"</span>),<font></font>
                                        visibility(R.id.gift_i, <span class="hljs-string">"gift"</span>),<font></font>
                                        visibility(R.id.newT, <span class="hljs-string">"new_product"</span>)),<font></font>
                        navigator(start(<span class="hljs-number">0</span>, PRODUCT_DESCRIPT, PS.RECORD),<font></font>
                                handler(<span class="hljs-number">0</span>, VH.BACK))) ;<font></font>
<font></font>
        fragment(CHARACTERISTIC, R.layout.fragment_characteristic)<font></font>
                .component(TC.RECYCLER, model(Api.CHARACT_ID_PRODUCT, <span class="hljs-string">"product_id"</span>),<font></font>
                        view(R.id.recycler, <span class="hljs-string">"2"</span>, <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] {R.layout.item_property, R.layout.item_property_1}));<font></font>
<font></font>
        fragment(FITNESS, R.layout.fragment_fitness)<font></font>
                .navigator(handler(R.id.back, VH.OPEN_DRAWER))<font></font>
                .component(TC.SPINNER, model(JSON, getString(R.string.clubs)),<font></font>
                        view(R.id.spinner, R.layout.item_spin_drop, R.layout.item_spin_hider))<font></font>
                .component(TC.RECYCLER, model(Api.FITNESS, <span class="hljs-string">"clubId"</span>),<font></font>
                        view(R.id.recycler, R.layout.item_fitness), <span class="hljs-keyword">null</span>).eventFrom(R.id.spinner);<font></font>
    }<font></font>
<font></font>
    Menu menu = <span class="hljs-keyword">new</span> Menu()<font></font>
            .item(R.drawable.list, R.string.m_catalog, CATALOG, <span class="hljs-keyword">true</span>)<font></font>
            .divider()<font></font>
            .item(R.drawable.ic_aura, R.string.fitness, FITNESS);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√°s adelante describiremos todas las construcciones DePro utilizadas. </font><font style="vertical-align: inherit;">Para conectar la importaci√≥n, use las teclas alt + enter. </font><font style="vertical-align: inherit;">El rojo tambi√©n se resaltar√° en la clase Api en la que se establecen las direcciones para todas las solicitudes. </font><font style="vertical-align: inherit;">Su contenido se dar√° m√°s adelante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree la clase MyParams.java. </font><font style="vertical-align: inherit;">En la mayor√≠a de los casos, la configuraci√≥n predeterminada es suficiente. </font><font style="vertical-align: inherit;">En nuestro caso, configuraremos solo la URL base.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyParams</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppParams</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setParams</span><span class="hljs-params">()</span> </span>{<font></font>
        baseUrl = <span class="hljs-string">"https://deprosystem.com/"</span>;<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cambie el contenido creado por el estudio de la clase MainActivity a lo siguiente:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseActivity</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getNameScreen</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> MyDeclareScreens.MAIN;<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el manifiesto de MainActivity, puede especificar la orientaci√≥n vertical. </font><font style="vertical-align: inherit;">En principio, la biblioteca admite la rotaci√≥n de pantalla, pero en esta versi√≥n para pantallas del tipo de actividad (), adem√°s del inicio, tambi√©n se prescribe orientaci√≥n vertical. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cree la clase MyApp:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> MyApp instance;
    <span class="hljs-keyword">private</span> Context context;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MyApp <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-keyword">null</span>) {<font></font>
            instance = <span class="hljs-keyword">new</span> MyApp();<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> instance;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate();<font></font>
        instance = <span class="hljs-keyword">this</span>;<font></font>
        context = getApplicationContext();<font></font>
<font></font>
        DeclareParam.build(context)<font></font>
                .setAppParams(<span class="hljs-keyword">new</span> MyParams())<font></font>
                .setDeclareScreens(<span class="hljs-keyword">new</span> MyDeclareScreens());<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es un singleton regular en el m√©todo onCreate en el que se configuran MyParams y MyDeclareScreens. </font></font><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recuerde describir MyApp en el manifiesto.</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Para finalizar, cree la clase Api:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Api</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String CATALOG = <span class="hljs-string">"depro/cron/catalog"</span>,<font></font>
            NEWS_PROD = <span class="hljs-string">"depro/cron/news_prod"</span>,<font></font>
            PRODUCT_LIST = <span class="hljs-string">"depro/cron/product_list"</span>,<font></font>
            PRODUCT_ID = <span class="hljs-string">"depro/cron/product_id"</span>,<font></font>
            ANALOG_ID_PRODUCT = <span class="hljs-string">"depro/cron/product_analog"</span>,<font></font>
            CHARACT_ID_PRODUCT = <span class="hljs-string">"depro/cron/product_charact"</span>,<font></font>
            FITNESS = <span class="hljs-string">"depro/cron/fitness"</span>,<font></font>
            CATALOG_EX = <span class="hljs-string">"depro/cron/catalog_ex"</span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Ahora puede ejecutar la aplicaci√≥n para su ejecuci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si todo se ingresa correctamente, cuando se inicie la aplicaci√≥n, se mostrar√°n todas las pantallas especificadas (y funcionar√°n). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como vemos, solo tenemos cinco clases simples para toda la aplicaci√≥n. Y cuatro de ellos son auxiliares. Sus contenidos son independientes del n√∫mero de pantallas. La descripci√≥n, generalmente no trivial, de las pantallas tambi√©n ocupa un poco de espacio (menos de 80 l√≠neas). Ahora mostramos que la descripci√≥n no solo no es grande, sino que tampoco es complicada. Para hacer esto, describimos el funcionamiento de los componentes de la biblioteca usados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se indica en el primer art√≠culo, las pantallas en la biblioteca pueden ser actividad o fragmento, lo que establece el nombre de pantalla (l√≠nea) y el dise√±o. Los enlaces a las pantallas se hacen por sus nombres. La elecci√≥n de qu√© tipo de pantalla utilizar se lleva a cabo de la manera habitual.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla PRINCIPAL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Entonces, desde el dise√±o se puede ver que la pantalla de inicio tiene un men√∫ lateral y un contenedor para fragmentos. En el marcado de R.layout.activity_main, se establece un DrawerLayout est√°ndar. Por lo tanto, en la descripci√≥n de la pantalla PRINCIPAL, especificamos el componente del caj√≥n, al que pasamos la identificaci√≥n del propio DrawerLayout y sus contenedores para la barra lateral y los fragmentos. Tambi√©n indicamos el nombre de la pantalla (CAJ√ìN), que se mostrar√° en la barra lateral. El navegador finishDialog indica que antes de salir de la aplicaci√≥n, debe emitir un di√°logo de confirmaci√≥n. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla de CAJ√ìN</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Contiene solo un componente de men√∫ para el que se especifica un modelo de tipo Men√∫ en el modelo, y en la vista de identificaci√≥n de un elemento de marcado de tipo RecyclerView, que mostrar√° el men√∫. El men√∫ en s√≠ indica que el elemento de men√∫ "CAT√ÅLOGO" se mostrar√° en el contenedor de fragmentos cuando se inicie el men√∫.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla CATALOGO</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Contiene una Nueva Lista horizontal. Cuando recibe datos del servidor, su modelo usa paginaci√≥n y muestra el progreso en R.id.progr. Si su Internet es r√°pido, es posible que no note la aparici√≥n de un panel con progreso. Si desea verlo, puede cambiar a un Internet m√°s lento o cambiar el color de fondo de R.id.progr. En este caso, al menos lo ver√° parpadear. Para la paginaci√≥n, se utilizan los par√°metros especificados en AppParams de manera predeterminada. La vista se da R.id.recycler_news con RecyclerView y dise√±o para elementos. Cuando hace clic en cualquier elemento de la lista, se inicia la pantalla PRODUCT_DESCRIPT.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lista del directorio es un men√∫ desplegable. El nivel de divulgaci√≥n se define en el campo "nivel expandido". Si no se transmite con los datos de origen, la biblioteca misma se ocupar√° de esto. El mismo par√°metro establece qu√© dise√±o de la lista usar en cada nivel de divulgaci√≥n. El hecho de que la lista sea desplegable sirve para la funcionalidad expandida (...). El modelo se configurar√° en el proveedor para recibir datos del servidor para los siguientes niveles. El modelo especifica la direcci√≥n de la solicitud Api.CATALOG_EX y el nombre del par√°metro de solicitud "catalog_id". En expandido, R.id.expand tambi√©n se indica: un elemento de marcado en los elementos haciendo clic en el cual se expandir√° la lista y la identificaci√≥n del elemento que se rotar√° animadamente 180 grados al expandirse, cerrando la lista. Y finalmente, el navegador indicaque cuando hace clic en el elemento de la lista, se abrir√° la pantalla PRODUCT_LIST.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El navegador, que se refiere a toda la pantalla, indica que cuando hace clic en el elemento R.id.back, se abrir√° un panel lateral. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla PRODUCT_LIST</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Al especificar una pantalla, se indica que el valor actual del par√°metro nombre_categor√≠a se mostrar√° en el encabezado y la animaci√≥n de salida ser√° de derecha a izquierda (AS.RL). La descripci√≥n de la lista ya nos es familiar. Lo √∫nico para la presentaci√≥n es el VisorManager, que controla la visibilidad de los elementos de marcado seg√∫n los valores de los datos correspondientes. El navegador relacionado con toda la pantalla indica que cuando hace clic en el elemento R.id.back, volver√° a la pantalla anterior. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla PRODUCT_DESCRIPT</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuevo para nosotros es un componente de tipo PAGER_F. Est√° asociado con un ViewPager normal. Se le muestra una lista de pantallas (fragmentos) para mostrar, y TabLayout (setTab) est√° conectado. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La pantalla PRODUCT_DESCRIPT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aparece en la pesta√±a DESCRIPCI√ìN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un componente del tipo PANEL muestra datos obtenidos por el modelo. La lista "Anal√≥gicos" muestra una lista de productos similares, si los hay, o usando la funcionalidad noDataView (), el mensaje "Faltan los anal√≥gicos". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla CARACTER√çSTICA</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Muestra una lista de caracter√≠sticas del producto. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pantalla FITNESS</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Un componente de tipo SPINNER muestra una lista de clubes con la opci√≥n de seleccionar uno. La lista de palos se establece en el modelo como una cadena json.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lista de categor√≠as de clases es normal. </font><font style="vertical-align: inherit;">La funci√≥n eventFrom (...) indica que al cambiar el componente asociado con R.id.spinner (en nuestro caso, el spiner), es necesario actualizar los datos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El c√≥digo de la aplicaci√≥n discutida en el art√≠culo se puede ver en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El art√≠culo es solo orientativo. </font><font style="vertical-align: inherit;">M√°s completamente con las capacidades de la biblioteca DePro est√° disponible en la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es502008/index.html">Programaci√≥n a las masas.</a></li>
<li><a href="../es502012/index.html">Azure para todos: curso de introducci√≥n</a></li>
<li><a href="../es502014/index.html">Su empleador: celebre el D√≠a del Freelancer</a></li>
<li><a href="../es502018/index.html">Podcast sobre la seguridad de los dispositivos m√≥viles y el desarrollo de soluciones de protecci√≥n para ellos.</a></li>
<li><a href="../es502020/index.html">RoadHunters.io - trae motociclistas alrededor del mundo</a></li>
<li><a href="../es502028/index.html">Vanya va a la abuela o JavaScript din√°mico adaptativo</a></li>
<li><a href="../es502030/index.html">Servicios web en Oracle</a></li>
<li><a href="../es502034/index.html">Los componentes controlados y no controlados en React no tienen que ser complicados</a></li>
<li><a href="../es502038/index.html">Levantando un √°tomo, enfoque 2.0.1</a></li>
<li><a href="../es502040/index.html">Acerca de Phrasal Verbs-5 (arriba / abajo)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>