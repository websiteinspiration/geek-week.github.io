<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💐 👩‍🍳 🏂🏾 中国のチップADC Hx711を使用する 🥑 🖐🏿 🖋️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="この投稿を書く理由は、Hx711チップに基づくモジュールの24ビットデルタシグマADCコンバーターに対処したいという欲求です。コンバーター自体は、メーカーが推奨するスイッチング回路（????）に従って既製のモジュールの形で組み立てられます。Andrey Gerasimenkoのブログ「3.3Vからの...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>中国のチップADC Hx711を使用する</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487066/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この投稿を書く理由は、Hx711チップに基づくモジュールの24ビットデルタシグマADCコンバーターに対処したいという欲求です。</font><font style="vertical-align: inherit;">コンバーター自体は、メーカーが推奨するスイッチング回路（????）に従って既製のモジュールの形で組み立てられます。</font><font style="vertical-align: inherit;">Andrey Gerasimenkoのブログ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「3.3VからのADC711-中国のドキュメントを信じないでください...」で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このWebサイトのこのモジュールの動作に関するコメントもあります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このモジュールをテストするために、ATmega16マイクロコントローラーに基づく回路、ADCモジュール、HD44780コントローラーに基づくBC1602 2行LCD、4つのボタンが組み立てられました。コードVision AVR、バージョン1.25.9プロフェッショナル、AVR Studio 4、バージョン4.09.0.338、AVR JTAG USBプログラマー。これにより、水晶のプログラミングだけでなく、必要に応じて、マイクロコントローラーでのプログラムの実行を段階的に追跡することができ、開発環境として使用されました。ほとんどリアルタイムで。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dn/yi/hh/dnyihhcg8d2ckj5tzu68ae5f_cg.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ADCの信号源として、最大重量が40 kgの中国製ロードセルを選択しました。標準センサー挿入ユニット。 「ネイティブ」積分ユニットを使用すると、単一点ひずみゲージのモデルCZL A6からすべての想定出力データを取得できることに注意してください。そのため、シングルポイントタイプのひずみゲージは、プラットフォームの技術仕様で指定されたサイズを使用して重量を測定した貨物の場所に使用する場合、張力橋の不均衡信号がプラットフォーム上の荷重の位置に依存しないように設計されています。これは、センサー本体の機械的特性です。幾何学的寸法、接着されたひずみゲージフィルムの場所、特にセンサー本体の中央にある「骨」の切り欠き、センサー本体に適用されるトルクに影響を与えるプラットフォームのサイズによって、この独立性が決まります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/jp/zw/k1jpzwxmwwbmdko-l2o7tj_bfbc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、最後のソースは「GOST 29329-92。静的計量用のはかり。一般的な技術要件。」このGOSTは、重量測定器の特性を定義します。 EXCELオフィスプログラムで作業することも重要です。 EXCEL 2003 XP3を使用しています。これにより、既製の方法を使用して結果をすばやく処理できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私の実験を繰り返すために必要なすべての情報が完全に提供されていることを願っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モジュールを操作するために使用するプログラム自体です。プログラムはCHECKに焦点を当てており、直接ではほとんどありません。変更することなく、一部の適用されたニーズに適用できます。彼らが言うように、「どこに適用するかによる」。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラム自体はブロック構造です。 4つのルーチンと5番目のメインメインで構成されています。最初のサブルーチン：ReadCountは、ADCモジュールからデータを読み取り、それらをCount変数に生成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CreatInputは、32の値から変換データの入力配列を生成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CreatOutputは、16データのウィンドウサイズで移動平均を整理することにより、ADC変換データの出力配列を生成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キー、キーストロークに応答するためのシンプルなプログラム。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以上です。特にメガリソースが許可されているため、変数は基本的にすべてグローバルです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/md/z4/xz/mdz4xz4rpghbubo4yfc4luas2y4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メインプログラムはCreatInput入力配列を作成することから始まり、次に入力データは移動平均法を使用してフィルター処理されます。このフィルターの選択は、以下に基づいています。プログラムの実行中、ディスプレイ上のデータはかなり大きな範囲でその値を変更します。私は、プラットフォームでの努力なしでADCの値を取り、表にまとめました。値は、AVR Studio環境でJATAG USBデバッガーを使用して取得されました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8w/x7/ne/8wx7ne82a80fp4ofgryytwhza7s.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Excelファイルの「Data Acquisition」の「Moving Average」タブには、変動する入力データInputBuff（発振スパン436単位）を3.12.16間隔の平均化ウィンドウでフィルタリングした結果が表示されます。結果はA37-A40セルに表示されます。この場合、最も効果的なのは、この場合、16サンプルのウィンドウを持つ移動平均であることがわかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成されたグラフはこれを明確に示しています。</font><font style="vertical-align: inherit;">データは動作中のコントローラーから取得され、データ表示手順への移行時に停止します。</font><font style="vertical-align: inherit;">このようなデータキャプチャの例を写真に示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/li/d2/5s/lid25s7vqelzw_hlumiy2uol9qa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さまざまなデジタルフィルターを使用したデータフィルタリングの方法では、入力の変動を「抑える」ことができませんでした。</font><font style="vertical-align: inherit;">入力データのグラフを見ると、ここのガウス分布は「におい」すらありません。</font><font style="vertical-align: inherit;">ブログのユーザーNikopol_86によって確認されたように「中国のドキュメントを信じてはいけない」</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nikopol_86 2019年2月5日09:27 0</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
正直なところ、彼はあらゆる比率で十分なノイズを持っています。入力回路が短絡した状態で発行されたADCコードの密度分布についていくつかの調査を行ったため、最大1000 1_5Vの広がりがあり、nifigaは正規の分布法則ではありません。これは、基板配線に問題があるか、ADCに問題があるか、すべて一緒になっていることを示唆しています。また、彼も温度安定性を備えておらず、主張されている動作温度範囲が現実に対応していないことに気付きました。 5 kgのひずみゲージをADCに接続した場合にのみ、室内の温度を1度変更すると読み取り値が2グラム増加し、指で超小型回路を温めると、読み取り値は5〜7グラムに上昇します。一般に、私はこのデバイスでキャットフードディスペンサーしか作成できないと自分で結論を出しました。1つのトラム停留所での精度は十分以上です。そして悲しいかな、AOまたはT1の高品質なADCを使用する必要があるため、通常のソリューションは安価ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、結論が確認されました。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確か</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に、同じことが当てはまります</font><b><font style="vertical-align: inherit;">。jushabrauser2019年2月4日午後12:52。</font></b></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
信号対雑音比が1未満の場合、これは役に立ちません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブリッジ回路でも。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、通常の条件下（特別な数学や回路がない場合）では、少なくとも8つの下位ビットが意味をなさない（ほとんどの場合）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
350ルーブルの24の正直な中国のビット？スリッパは言わないで。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
鉄自体が「横になっている」場合、それについて何ができますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、ソースデータがケーキではないため、3次の非線形フィルターでも役に立たない。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場所から、このモジュールがスケールの構成で何ができるかを見たかったのです。 ADCの最後のビットのジッターに関する問題をネットワークで検索すると、フォーラム</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kazus.ru/forums/showthread.php?t=105320&amp;page=4につながりました。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ここでは、読み取り値の安定化に関する全体的な議論を示します。ただし、提案された数学的方法のいずれも、受け取った入力データを「落ち着かせる」ことはできませんでした。 「ハードウェア」自体から、読み取り値を安定させるために、デジタルとアナログのアースの接続、および入力Bのアースへの短絡が導入されました。コントローラー回路とは別に、6vバッテリー（スタビライザー7805が続く）からモジュールを完全にシールドして給電しました。結果はありません、入力データが変動しています...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、「クリーン」な24番目のカテゴリは取得できず、ここでの理由は質の悪いm /回路であると思われます。したがって、結果の変換範囲をトリミングする必要があります。このために、ReadCountプログラムでは、データを100で割った線が導入されました。100は2〜8度弱です。に。 AD変換は16ビットで行われます。しかし、そのような制限でさえ証言を信頼できるものにはしませんでした。そして、ここでの理由は、ひずみゲージのプロパティです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、キャリブレーションプロセスを適用した後（ADCの値とプラットフォーム上の重量をリンク）、重量はグラムで表示されます。彼は500グラムを500と表示し、1 kgを1000と表示します。分割価格は1グラムです。それら。 40 kgのセンサーで40,000ディビジョンを取得します。ロードセルの技術データによると、センサーから取得できるのは3,000ディビジョンのみです（センサー名のシンボルC3）。したがって、除算の価格は（40000/3000）= 13.3グラムになります。ただし、GOST 29329によれば、重量計測は数値3では機能しません。桁数を使用する必要があります。2.1.3 </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">校正除算値（e）、スケール除算価格（d）、および読み取り分解能（dd）の質量単位は、以下から選択する必要があります。1X10a; 2X10a; 5X10a、ここでaは正、負の整数またはゼロです。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
に。メーカーが保証するこのセンサーの分割価格10グラム。つまり、出力形式は0.0x kgです。ここで、x = 1,2,3、... .0です。 5グラムの分割価格を作ってみましょう。関連するプログラムアクションが一覧表示されます。このような制限の後、センサーから40,000 / 5 = 8,000目盛りを「取得」します。これは、許容値の2.6倍です。これらの仮定の後、結果のスケールは非常に着実に機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
適用されたロードセルとその「解像度」に関する上記の注釈では、このモジュールが24ビット変換を生成できないと断定することはできません。ただし、私はこのセンサーを1グラムの分解能で、別のADコンバーターを備えた別のデバイスで動作するようにテストしました。このデバイスでは、重量変動が3グラム以下であるため、センサーの動作と変換は満足できるものと見なすことができます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このADCを商取引で使用できないものは何ですか？</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さて、最初で最も重要なことは、測定値の温度依存性です。第2に、ATMEGAに組み込まれている除算および乗算演算を使用して、特に8ビットの場合、これらの条件下で全重量範囲にわたってスケールを校正することは困難です。プログラムはセンサーの過負荷にまったく反応しないことに注意してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの不便を克服する方法。最初に、温度センサーを入力し、温度値から重量測定値を調整します。これはかなり複雑です。 「安く」とは、さまざまな負荷に対して校正オプションを導入することであり、温度によって引き起こされる誤差に応じて、作業で使用される重量を校正します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目は難しいです。乗算と除算の手順を表とせん断の操作に置き換えます。これは、ウェイトを作成する上でこのモジュールを使用する最良の方法だと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スケールするためのプログラムを作成するための要件の説明を完了するためには、各バランスに取り付けられた「スケールの計量のプログラム（認証）キャリブレーション」を使用する必要がある。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m / s Hx711に基づくはかりの作成は、はかりのすべての計量要件に応じて可能です。</font><font style="vertical-align: inherit;">変換の温度依存性の補正の導入は、別の手順で提供する必要があります。</font><font style="vertical-align: inherit;">16ビットを超える解像度のモジュールを使用するには、別の方法と制御が必要です。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja487056/index.html">インターネット上でRDPを開いたままにしておくのは危険ですか？</a></li>
<li><a href="../ja487058/index.html">「Hadoop。ZooKeeper「Mail.Ruグループテクノストリームシリーズ」「Hadoopでの大規模データの分散処理」</a></li>
<li><a href="../ja487060/index.html">Google Chromeを使用していますか？したがって、GoogleはX-client-dataを介してデータを収集します</a></li>
<li><a href="../ja487062/index.html">CBSのおかげで、Linuxユーザーはスタートレックを見ることができました。</a></li>
<li><a href="../ja487064/index.html">独立開発者としての2年目</a></li>
<li><a href="../ja487068/index.html">APEC名刺：中国およびその他の国へのビジネスビザの代わり</a></li>
<li><a href="../ja487072/index.html">結婚をしたい</a></li>
<li><a href="../ja487074/index.html">ABLYY NLPテクノロジーがニュースを監視し、リスクを管理する方法</a></li>
<li><a href="../ja487076/index.html">Google / Yandex Adsが表示されない：15の理由</a></li>
<li><a href="../ja487078/index.html">同僚に要求なしで物事を取るように教えた方法</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>