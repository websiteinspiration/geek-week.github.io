<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💾 🧓🏻 🤷 1Cサーバークラスターについて 🍟 😄 👨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="クラスターは、並列
 または分散システムの一種です
 。1。複数の相互接続された
 コンピューターで構成されます。
 2.単一の
 統合されたコンピューターリソースとして使用
 
 。GregoryF. Pfister、「クラスターを求めて」。
 
 前提：ビジネスアプリケーション（たとえば、ERP...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>1Cサーバークラスターについて</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/1c/blog/493008/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスターは、並列</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または分散システムの</font><font style="vertical-align: inherit;">一種です</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。1。複数の相互接続された</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピューターで</font><font style="vertical-align: inherit;">構成され</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.単一の</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
統合されたコンピューターリソース</font><font style="vertical-align: inherit;">として使用</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。GregoryF. Pfister、「クラスターを求めて」。</font></font></a></i><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前提：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジネスアプリケーション（たとえば、ERPシステム）があり、数千（場合によっては数万）のユーザーが同時に作業します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必須です：</font></font></b><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザー数の増加に伴い、ハードウェアリソースの増加により、必要なアプリケーションパフォーマンスを提供できるように、アプリケーションをスケーラブルにします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムコンポーネント（ソフトウェアとハ​​ードウェアの両方）の障害、コンポーネント間の接続の喪失、その他の起こりうる問題に対してアプリケーションを耐性のあるものにします。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムリソースをできるだけ効率的に使用し、目的のアプリケーションパフォーマンスを提供します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システムの導入と管理を簡単にします。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの問題を解決するために、1C：Enterpriseプラットフォームでクラスターアーキテクチャを使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはすぐに望ましい結果に到達しませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、我々は、クラスタのタイプを選んだか、一種のクラスタのが何であるかについてお話しますそのスーツ私たちと私たちのバージョンにバージョンから進化したクラスタ、及びそのアプローチは、私たちは最終的に機能システムの作成を許可する方法</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の数十</font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、数千</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の同時ユーザーを。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0g/mo/rq/0gmorqiise6fvaouym5mwpabl7y.png" alt="画像"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事のエピグラフの著者であるGregory Pfisterは、彼の著書「クラスターを探して」に書いているように、ハードウェアやソフトウェアの特定のメーカーではなく、1台のコンピューターの能力を欠くか冗長性を必要とする顧客によって発明されました。</font><font style="vertical-align: inherit;">これは前世紀の60年代にフィスターによれば起こりました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
従来、以下の主要なタイプのクラスターを区別します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フェールオーバークラスター（HA、高可用性クラスター）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">負荷分散クラスター（LBC）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンピューティングクラスタ（高性能コンピューティングクラスタ、HPC）</font></font></li>
<li>   (grid)      ,              .   grid-      ,    .  grid-    HPC-,      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
問題（システムコンポーネントの障害に対する耐性とリソースの効率的な使用）を解決するために、フェールセーフクラスターとクラスターの機能をロードバランシングと組み合わせる必要がありました。</font><font style="vertical-align: inherit;">私たちはこの決定にすぐには至りませんでしたが、段階的に進化論に近づきました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最新ではない方のために、1Cビジネスアプリケーションの配置方法を簡単に説明します。</font><font style="vertical-align: inherit;">これらは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブジェクト指向の言語</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">記述されたアプリケーションであり、</font><font style="vertical-align: inherit;">会計業務の自動化のために「研ぎ澄まされた」。</font><font style="vertical-align: inherit;">この言語で記述されたアプリケーションを実行するには、1C：エンタープライズプラットフォームランタイムがコンピューターにインストールされている必要があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C：Enterprise 8.0</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1Cアプリケーションサーバーの最初のバージョン（まだクラスターではありません）は、プラットフォームバージョン8.0で登場しました。それ以前は、1Cはクライアントサーバーバージョンで機能し、データはファイルDBMSまたはMS SQLに保存され、ビジネスロジックはクライアントでのみ機能していました。バージョン8.0では、3層アーキテクチャ「クライアント-アプリケーションサーバー-DBMS」に移行しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プラットフォーム8.0のサーバー1Cは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COM +</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1Cでアプリケーションコードを実行できるサーバー。</font><font style="vertical-align: inherit;">COM +を使用すると、既製のトランスポートが提供され、クライアントアプリケーションがネットワーク経由でサーバーと通信できるようになりました。</font><font style="vertical-align: inherit;">1C開発者が利用できるクライアントサーバーの相互作用とアプリケーションオブジェクトの両方のアーキテクチャの多くは、COM +の使用を考慮して設計されています。</font><font style="vertical-align: inherit;">当時、フォールトトレランスはアーキテクチャに組み込まれていなかったため、サーバーのクラッシュによりすべてのクライアントがシャットダウンしました。</font><font style="vertical-align: inherit;">サーバーアプリケーションがクラッシュすると、COM +は最初のクライアントがアクセスしたときにそれを解除し、クライアントは最初から（サーバーへの接続から）作​​業を開始しました。</font><font style="vertical-align: inherit;">当時、すべての顧客に1つのプロセスが提供されていました。</font></font><br>
<img src="https://habrastorage.org/webt/fg/oo/en/fgooenmx-pqv5tuizcfcvbvbaqg.png" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C：エンタープライズ8.1</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のバージョンでは、次のものが必要でした。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部のユーザーの事故やエラーが他のユーザーの事故やエラーにつながらないように、お客様にフォールトトレランスを提供します。 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COM +テクノロジを削除します。</font><font style="vertical-align: inherit;">COM +はWindowsでのみ動作し、当時はLinuxで動作する可能性がすでに関連してきました。</font></font></li>
</ul> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、新しいバージョンのプラットフォームをゼロから開発したくありませんでした。リソースが多すぎるためです。</font><font style="vertical-align: inherit;">実績を最大限に活用し、バージョン8.0用に開発されたアプリケーションとの互換性を維持したいと考えました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのため、バージョン8.1では最初のクラスターが登場しました。</font><font style="vertical-align: inherit;">リモートプロシージャコール（TCPの上に）のプロトコルを実装しました。これは、見かけ上、エンドコンシューマークライアントのCOM +のように見えました（つまり、クライアントサーバーコールを担当するコードを実際に書き換える必要はありませんでした）。</font><font style="vertical-align: inherit;">同時に、C ++プラットフォームに依存しないサーバーを実装し、WindowsとLinuxの両方で動作できるようにしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モノリシックサーバーバージョン8.0は、クライアントにサービスを提供するワークプロセスと、クラスターの操作をサポートする2つのサービスプロセスの3種類のプロセスに置き換えられました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rphostは、顧客にサービスを提供し、アプリケーションコードを実行するワークフローです。</font><font style="vertical-align: inherit;">クラスターには複数のワークフローを含めることができ、異なるワークフローを異なる物理サーバーで実行できます。この拡張性により、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ragent-他のすべてのタイプのプロセスを開始するサーバーエージェントプロセス、およびこのサーバーにあるクラスターの主要なリスト。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rmngrは、クラスター全体の操作を制御するクラスターマネージャーです（ただし、アプリケーションコードは機能しません）。 </font></font></li>
</ul><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カットの下には、クラスター内のこれら3つのプロセスの動作図があります。</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/mn/yh/tc/mnyhtcaf9zf3_nqddsbfq4xgpsg.png" alt="image"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
セッション中、クライアントは1つのワークフローで作業しました。このプロセスが提供するすべてのクライアントを対象としたワークフローの低下により、セッションは異常終了しました。</font><font style="vertical-align: inherit;">残りの顧客は働き続けました。</font></font><br>
<img src="https://habrastorage.org/webt/wm/tm/mc/wmtmmcct7xd6v2ecl6vi7nlx5dk.png" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C：エンタープライズ8.2</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バージョン8.2では、1Cアプリケーションがネイティブ（実行可能）クライアントだけで</font><font style="vertical-align: inherit;">なく</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブラウザーでも</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（アプリケーションコードを変更せずに</font><font style="vertical-align: inherit;">）実行できるようにしたかっ</font><font style="vertical-align: inherit;">たのです。</font><font style="vertical-align: inherit;">この点で、特に、アプリケーションの現在の状態をrphostワークフローとの現在の接続から切り離し、ステートレスにするというタスクが発生しました。</font><font style="vertical-align: inherit;">その結果、ワークフローの外部に保存する必要のあるセッションとセッションデータの概念が生じました（ステートレスであるため）。</font><font style="vertical-align: inherit;">セッション情報を保存およびキャッシュするセッションデータサービスが開発されました。</font><font style="vertical-align: inherit;">他のサービスも登場-管理されたトランザクションロックのサービス、全文検索サービスなど。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このバージョンでは、フォールトトレランスの向上、ロードバランシング、クラスターの冗長メカニズムなど、いくつかの重要な革新も導入されました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">耐障害性</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作業プロセスがステートレスになり、作業に必要なすべてのデータが現在のクライアントの外部に保存されたため、ワークフロー接続が失敗した場合、クライアントは次回サーバーにアクセスしたときに別の「ライブ」ワークフローに切り替えました。ほとんどの場合、そのようなスイッチはクライアントには見えません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メカニズムはこのように機能します。何らかの理由でワークフローへのクライアントの呼び出しを最後まで完了できなかった場合、クライアント部分は、呼び出しエラーを受信した場合、同じワークフローまたは別のワークフローへの接続を再確立することにより、この呼び出しを繰り返すことができます。ただし、常に通話を繰り返すことはできません。呼び出しを繰り返すと、サーバーに呼び出しを送信したが、結果を受信しなかったことを意味します。呼び出しを繰り返して、2番目の呼び出しを行うときに、サーバーでの前の呼び出しの結果を評価します（これに関する情報はセッションデータのサーバーに格納されます）。これは、呼び出しがそこに「継承」する（トランザクションを閉じる、セッションデータを保存する）時間がある場合です。など）-繰り返すのは不可能であり、データの不整合が発生します。呼び出しを繰り返すことができない場合、クライアントは回復不可能なエラーに関するメッセージを受け取ります。クライアントアプリケーションを再起動する必要があります。呼び出しを「継承」できなかった場合（これは最も一般的な状況です。これは、レポート、フォームへのデータの表示など、多くの呼び出しはデータを変更せず、データを変更する呼び出しにはトランザクションがないためです。または、セッションデータの変更がマネージャに送信されるまで（呼び出しの痕跡はありません）、データの不整合のリスクなしに繰り返すことができます。ワークフローがクラッシュしたり、ネットワーク接続が中断されたりすると、このような呼び出しが繰り返され、クライアントアプリケーションのこの「災害」はまったく気付かれずに発生します。その変更データ-トランザクションがコミットされるまで、またはセッションデータの変更がマネージャーに送信されるまで-呼び出しの痕跡はありません）-データの不整合のリスクなしに繰り返すことができます。ワークフローがクラッシュしたり、ネットワーク接続が中断されたりすると、このような呼び出しが繰り返され、クライアントアプリケーションのこの「災害」はまったく気付かれずに発生します。その変更データ-トランザクションがコミットされるまで、またはセッションデータの変更がマネージャーに送信されるまで-呼び出しの痕跡はありません）-データの不整合のリスクなしに繰り返すことができます。ワークフローがクラッシュしたり、ネットワーク接続が中断されたりすると、このような呼び出しが繰り返され、クライアントアプリケーションのこの「災害」はまったく気付かれずに発生します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">負荷分散</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合のロードバランシングのタスクは次のとおりです。新しいクライアントがシステムに入ります（またはすでに動作しているクライアントが別の呼び出しを行います）。</font><font style="vertical-align: inherit;">クライアントに最大速度を提供するために、クライアントの呼び出しを送信するサーバーとワークフローを選択する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、負荷分散されたクラスターの標準的なタスクです。</font><font style="vertical-align: inherit;">それを解決するためのいくつかの典型的なアルゴリズムがあります、例えば：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Round-Robin ()</a> –    ,      ,   –    . .    .           .    ,          «» .           (   )    .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Weighted Round Robin</a> –  Round-Robin:          ,    ́    .</li>
<li>Least Connections:     ,       .</li>
<li>Least Response Time:       :    ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのクラスターでは、本質的に最小応答時間に近いアルゴリズムを選択しました。クラスタ内のすべてのサーバー上のワークフローのパフォーマンスに関する統計を収集するメカニズムがあります。クラスター内の各サーバープロセスへの参照呼び出しを行います。参照呼び出しには、ディスクサブシステム、メモリ、プロセッサの機能のサブセットが含まれ、そのような呼び出しが行われる速さを評価します。過去10分間の平均であるこれらの測定結果は基準です。クラスター内のどのサーバーが最も生産的であり、一定期間内にクライアント接続を送信するのに適しています。クライアント要求は、最も生産的なサーバーをロードするような方法で分散されます-運が良いサーバーをロードします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいクライアントからの要求は、現時点で最も生産性の高いサーバーに送信されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存のクライアントからの要求は、ほとんどの場合、そのサーバーと、前の要求が送信されたワークフローに送信されます。</font><font style="vertical-align: inherit;">サーバー上の広範なデータセットは、動作中のクライアントに関連付けられています。プロセス間で（さらにはサーバー間で）データを転送するのは非常にコストがかかります（ただし、これも可能です）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
既存のクライアントからのリクエストは、次の2つの場合に別のワークフローに転送されます。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これ以上プロセスはありません。以前にクライアントが操作していたワークフローが利用できなくなりました（プロセスが停止した、サーバーが利用できなくなったなど）。</font></font></li>
<li>   :     ,            ,     ,   ,              .         ,  ,     –             .    –      (..   ).</li>
</ol><br>
<br>
<h3> </h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクティブ/パッシブ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
スキームを使用することで、クラスターの復元力を高めることにしました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">稼働中と予約の2つのクラスターを構成する機会がありました。</font><font style="vertical-align: inherit;">プライマリクラスターが利用できない場合（ネットワークの問題、またはスケジュールされたメンテナンスなど）、クライアントの呼び出しはバックアップクラスターにリダイレクトされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、この設計は構成が非常に困難でした。</font><font style="vertical-align: inherit;">管理者は2つのサーバーグループを手動でクラスターにアセンブルして構成する必要がありました。</font><font style="vertical-align: inherit;">時々、管理者は競合する設定を設定することでミスを犯しました。</font><font style="vertical-align: inherit;">設定をチェックするための一元的なメカニズムはありませんでした。</font><font style="vertical-align: inherit;">しかし、それにもかかわらず、このアプローチはシステムのフォールトトレランスを向上させました。</font></font><br>
<img src="https://habrastorage.org/webt/ik/k7/06/ikk7062chdd8qtpk0kzvfncq7vu.png" alt="画像"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1C：エンタープライズ8.3</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バージョン8.3では、フォールトトレランスを担当するサーバー側のコードを大幅に書き直しました。構成が複雑であるため、アクティブ/パッシブクラスタースキームを放棄することにしました。システムには1つのフォールトトレラントクラスターのみが残り、任意の数のサーバーで構成されます。これは、障害が発生</font><font style="vertical-align: inherit;">したノードへの要求が残りの稼働中のノードに分散</font><font style="vertical-align: inherit;">される</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクティブ/アクティブ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スキーム</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">近いもの</font><font style="vertical-align: inherit;">です。これにより、クラスターの構成が簡単になりました。フォールトトレランスを向上させ、ロードバランシングを改善する多くの操作が自動化されました。重要なイノベーションのうち：</font></font><br>
<br>
<ul>
<li>   « »: , ,               .                ,           «»          .</li>
<li>     ,  ,            .</li>
<li>  ,     ,     ,   ,   ,    :</li>
</ul><br>
<img src="https://habrastorage.org/webt/o7/aw/pz/o7awpzltn3jxnderotcyf_wbahm.png" alt="画像"><br>
<br>
<img src="https://habrastorage.org/webt/v5/kc/rj/v5kcrjv3ldm96l3ovj1seqobrga.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの開発の主なアイデアは、管理者の作業を簡略化し、サーバー操作のレベルで低下するのではなく、管理者が慣れ親しんだ用語でクラスターを構成できるようにし、クラスターの作業の「手動制御」のレベルを最小限に抑え、ほとんどの作業タスクと起こりうる問題を解決するためのクラスターメカニズムを提供することです自動操縦。」</font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/9i/zy/da9izy3cj4wlf80nr8s35tqnp3e.png" alt="画像"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォールトトレランスの3つのリンク</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご存知のように、システムのコンポーネントが個別に信頼できる場合でも、システムのコンポーネントが互いに原因となる問題が発生する可能性があります。</font><font style="vertical-align: inherit;">システムのパフォーマンスにとって重要な場所の数を最小限に抑えたかったのです。</font><font style="vertical-align: inherit;">重要な追加の考慮事項は、プラットフォームに適用されたメカニズムの変更の最小化と、適用されたソリューションの変更の除外でした。</font><font style="vertical-align: inherit;">バージョン8.3では、「ジョイント」のフォールトトレランスを確保するためのリンクが3つありました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/1g/s1/kb1gs1mfus_rsminiyizg4t5dma.png" alt="画像"><br>
<ol>
<li>  ,   HTTP(S),  -.   -     -.    ,   HTTP  -,    (     HTTP)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">libcurl</a>    . </li>
<li>  ,                     .</li>
<li>  -   .       1,   -     .    -            .       ,         .           ,     –    .    -         (,     ,   ,         ) –          .</li>
<li>     ,    rmngr.    20 (    ) —   ,     ..                .     1:          .</li>
</ol><br>
<br>
<h2> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フォールトトレランスメカニズムのおかげで、1C：エンタープライズプラットフォームで作成されたアプリケーションは、クラスター内の本番サーバーのさまざまなタイプの障害に成功しても、ほとんどのクライアントは再起動せずに機能し続けます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
呼び出しを繰り返すことができない、またはサーバーのクラッシュがトランザクションの途中などの非常に不幸な時点でプラットフォームをキャッチし、それらをどのように処理するかが明確でない状況があります。サーバーがクラスター内にある場合、統計的に良好なクライアントの存続を確保するようにしています。原則として、サーバー障害によるクライアントの平均損失は数パーセントです。この場合、「失われた」すべてのクライアントは、クライアントアプリケーションを再起動した後も、クラスター内で引き続き機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バージョン8.3の1Cサーバークラスターの信頼性が大幅に向上しました。</font><font style="vertical-align: inherit;">1C製品を導入することは長い間珍しくありません。そこでは、同時に作業しているユーザーの数が数千に達します。</font><font style="vertical-align: inherit;">5,000ユーザーと10,000ユーザーの両方が同時に作業する実装があります。たとえば、</font><font style="vertical-align: inherit;">1C：Trade ManagementアプリケーションがロシアのすべてのBeeline販売</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">店</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にサービスを提供するBeelineの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">導入</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、または</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">貨物輸送会社でのビジネスライン</font></a><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">実装などです。</font></a><font style="vertical-align: inherit;">このアプリケーションは、ビジネスラインのIT部門の開発者が1C：エンタープライズプラットフォームで独自に作成したもので、貨物輸送の全サイクルに対応しています。</font><font style="vertical-align: inherit;">当社の内部クラスター負荷テストは、最大20,000ユーザーの同時操作をシミュレートします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、私たちのクラスターで他に役立つものを簡単にリストしたいと思います（リストは不完全です）。</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>,         . ,             ,   .</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a> – ,   ,   ,   (      – <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   </a>  ..)      . ,   ,      (, )     ,   ERP, ,           ERP.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a> – ,     (,  ,    ..).  ,  ,    ,     ,   ,        .</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja492994/index.html">TestMaceパート1の新機能：クラウド同期、更新されたインターフェースなど</a></li>
<li><a href="../ja492996/index.html">Goでのカスタム日付形式のマーシャリングおよびアンマーシャリング</a></li>
<li><a href="../ja492998/index.html">データセンターのフリーランシングでどのように混乱したか、そしてそれから何が生まれたのか</a></li>
<li><a href="../ja493000/index.html">例としてGitLabを使用してレガシーコードを処理する方法</a></li>
<li><a href="../ja493002/index.html">350人の遠隔地：状況</a></li>
<li><a href="../ja493010/index.html">Quarkusが命令型プログラミングと反応型プログラミングを組み合わせる方法</a></li>
<li><a href="../ja493012/index.html">窓からの空気、リレー、ケーブル配線：ビジネスセンターの独占プロバイダーに出会わないようにする方法</a></li>
<li><a href="../ja493014/index.html">Higher School of Economics、Higher School of Economics、Higher School of Economics Higher School of EconomicsのGame Dev Training ProgramのディレクターVyacheslav Utochkinへのインタビュー：Game Devに関する20の質問</a></li>
<li><a href="../ja493016/index.html">「あなたのための記事を読む」という見出し。2020年1月〜2月</a></li>
<li><a href="../ja493018/index.html">開発者は最新のブラウザーの複雑さを高く評価しました</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>