<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⚫️ 🧓🏽 📆 GCC 10の静的分析 💪🏻 ✌🏾 👨‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="私はGCC、GNU Compiler Collectionの Red Hatで働いています。 GCCの次のメジャーリリースであるGCC 10では、さまざまな問題を実行時ではなくコンパイル時に検出するための静的分析パスである、新しい-fanalyzerオプションを実装しました。
 
 静的分析を「側方...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>GCC 10の静的分析</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496278/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/9l/lv/xy/9llvxyksdezoz6p-mo6o6x6am8q.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GCC、GNU Compiler Collectionの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Red Hatで働いてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。 GCCの次のメジャーリリースであるGCC </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、</font><font style="vertical-align: inherit;">さまざまな問題を実行時ではなくコンパイル時に検出するための静的分析パスである</font><font style="vertical-align: inherit;">、新しい</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fanalyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションを実装しました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
静的分析を「側方」（おそらく独自仕様）の追加ツールとして使用するよりも、コンパイラーをコンパイル-編集-デバッグサイクルの一部として使用して、コードを記述したらすぐに問題を特定する方が良いと思います。したがって、コンパイラーと同じように、コンパイラーとまったく同じようにコードを認識する静的アナライザーをコンパイラーに組み込むことが適切と思われます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、この質問は対処する必要がある大きな問題です。このリリースでは、Cコードで見られる問題の種類、特に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダブルフリーエラー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に焦点を当てました</font><font style="vertical-align: inherit;">が、将来のリリースで拡張できるフレームワークを作成することを目的として（さらに追加できる場合） C以外の言語のチェックとサポート）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オーバーヘッドが多すぎずに、アナライザーが適切な量の追加検証を提供することを願っています。</font><font style="vertical-align: inherit;">追加のチェック間の妥当な妥協点として、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fanalyzerを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイル時間を「ちょうど」2倍</font><font style="vertical-align: inherit;">にしようとしました</font><font style="vertical-align: inherit;">。以下に示すように、これまでのところ成功していませんが、現在取り組んでいます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、コードはGCC 10のメインGCCブランチにあり、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイラーエクスプローラー（別名godbolt.org）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でテストできます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">中小規模の例ではうまく機能しますが、産業での使用の準備ができていないことを意味するバグがあります。</font><font style="vertical-align: inherit;">私は、GCC 10がリリースされるまでに（おそらく4月に）この機能がCコードに効果的に適用されることを期待して、修正に取り組んでいます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">診断方法</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、二重解放エラーの最も単純な例です。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *ptr)</span>
</span>{
  <span class="hljs-built_in">free</span>(ptr);
  <span class="hljs-built_in">free</span>(ptr);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fanalyzerを使用した</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
GCC 10は、</font><font style="vertical-align: inherit;">これを次のように報告します。</font></font><br>
<pre><code class="bash hljs">$ gcc -c -fanalyzer double-free-1.c<font></font>
double-free-1.c: In <span class="hljs-keyword">function</span> ‘<span class="hljs-built_in">test</span>’:<font></font>
double-free-1.c:6:3: warning: double-‘free’ of ‘ptr’ [CWE-415] [-Wanalyzer-double-free]<font></font>
    6 |   free(ptr);<font></font>
      |   ^~~~~~~~~<font></font>
  ‘<span class="hljs-built_in">test</span>’: events 1-2<font></font>
    |<font></font>
    |    5 |   free(ptr);<font></font>
    |      |   ^~~~~~~~~<font></font>
    |      |   |<font></font>
    |      |   (1) first ‘free’ here<font></font>
    |    6 |   free(ptr);<font></font>
    |      |   ~~~~~~~~~<font></font>
    |      |   |<font></font>
    |      |   (2) second ‘free’ here; first ‘free’ was at (1)<font></font>
    |</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このログは、GCCがいくつかの新しいトリックを学んだことを示しています。 1つ目は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Common Weakness Enumeration（CWE）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">識別子の診断機能</font><font style="vertical-align: inherit;">です。この例では、ダブルフリー診断に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CWE-415の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タグが付けられてい</font><font style="vertical-align: inherit;">ます。このタグが結論をより理解しやすくし、精度を高め、検索エンジンに入力するのが簡単になることを願っています。これまでのところ、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fanalyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からの診断のみ</font><font style="vertical-align: inherit;">がCWE脆弱性識別子でマークされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GCC 10を適切な端末（たとえば、新しいgnome-terminal）で使用する場合、CWE識別子は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">問題の説明につながる</font></a><font style="vertical-align: inherit;">ハイパーリンクです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ハイパーリンクと言えば、多くのリリースで、GCCが警告を発行すると、この警告を管理するオプションが出力されます。</font><font style="vertical-align: inherit;">GCC 10以降、このオプションテキストはクリックスルーハイパーリンクになりました（ここでも、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">かなり開発された端末を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">想定し</font><font style="vertical-align: inherit;">ています）。このオプションのドキュメントが表示されます（アナライザーに関連するものだけでなく、すべての警告について）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GCC診断には、問題をトリガーするコードのパスを示すイベントチェーンを関連付けることができます。</font><font style="vertical-align: inherit;">上記の例では制御フローがないため、イベントは2つしかありませんが、2番目のイベントが最初のイベントとどのように関連しているかを説明で確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
より完全な例を示します。</font><font style="vertical-align: inherit;">次のコードに問題がありますか？</font><font style="vertical-align: inherit;">（ヒント：今回は二重リリースではありません）：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;setjmp.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-keyword">static</span> jmp_buf env;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">inner</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{<font></font>
  longjmp(env, <span class="hljs-number">1</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">middle</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
  <span class="hljs-keyword">void</span> *ptr = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">1024</span>);<font></font>
  inner();<font></font>
  <span class="hljs-built_in">free</span>(ptr);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">outer</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span>
</span>{
  <span class="hljs-keyword">int</span> i;<font></font>
<font></font>
  i = setjmp(env);<font></font>
  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<font></font>
    middle();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><b><font style="vertical-align: inherit;">GCC-fanalyzerが報告するもので</font></b><font style="vertical-align: inherit;">、ASCII出力を使用した</font><b><font style="vertical-align: inherit;">プロシージャ</font></b><font style="vertical-align: inherit;">間の制御フローを示しています。</font></font><br>
<br>
<pre><code class="bash hljs">$ gcc -c -fanalyzer longjmp-demo.c<font></font>
longjmp-demo.c: In <span class="hljs-keyword">function</span> ‘inner’:<font></font>
longjmp-demo.c:8:3: warning: leak of ‘ptr’ [CWE-401] [-Wanalyzer-malloc-leak]<font></font>
    8 |   longjmp(env, 1);<font></font>
      |   ^~~~~~~~~~~~~~~<font></font>
  ‘outer’: event 1<font></font>
    |<font></font>
    |   18 | void outer(void)<font></font>
    |      |      ^~~~~<font></font>
    |      |      |<font></font>
    |      |      (1) entry to ‘outer’<font></font>
    |<font></font>
  ‘outer’: event 2<font></font>
    |<font></font>
    |   22 |   i = setjmp(env);<font></font>
    |      |       ^~~~~~<font></font>
    |      |       |<font></font>
    |      |       (2) ‘setjmp’ called here<font></font>
    |<font></font>
  ‘outer’: events 3-5<font></font>
    |<font></font>
    |   23 |   <span class="hljs-keyword">if</span> (i == 0)<font></font>
    |      |      ^<font></font>
    |      |      |<font></font>
    |      |      (3) following ‘<span class="hljs-literal">true</span>’ branch (when ‘i == 0’)...<font></font>
    |   24 |     middle();<font></font>
    |      |     ~~~~~~~~<font></font>
    |      |     |<font></font>
    |      |     (4) ...to here<font></font>
    |      |     (5) calling ‘middle’ from ‘outer’<font></font>
    |<font></font>
    +--&gt; ‘middle’: events 6-8<font></font>
           |<font></font>
           |   11 | static void middle(void)<font></font>
           |      |             ^~~~~~<font></font>
           |      |             |<font></font>
           |      |             (6) entry to ‘middle’<font></font>
           |   12 | {<font></font>
           |   13 |   void *ptr = malloc(1024);<font></font>
           |      |               ~~~~~~~~~~~~<font></font>
           |      |               |<font></font>
           |      |               (7) allocated here<font></font>
           |   14 |   inner();<font></font>
           |      |   ~~~~~~~<font></font>
           |      |   |<font></font>
           |      |   (8) calling ‘inner’ from ‘middle’<font></font>
           |<font></font>
           +--&gt; ‘inner’: events 9-11<font></font>
                  |<font></font>
                  |    6 | static void inner(void)<font></font>
                  |      |             ^~~~~<font></font>
                  |      |             |<font></font>
                  |      |             (9) entry to ‘inner’<font></font>
                  |    7 | {<font></font>
                  |    8 |   longjmp(env, 1);<font></font>
                  |      |   ~~~~~~~~~~~~~~~<font></font>
                  |      |   |<font></font>
                  |      |   (10) ‘ptr’ leaks here; was allocated at (7)<font></font>
                  |      |   (11) rewinding from ‘longjmp’ <span class="hljs-keyword">in</span> ‘inner’...<font></font>
                  |<font></font>
    &lt;-------------+<font></font>
    |<font></font>
  ‘outer’: event 12<font></font>
    |<font></font>
    |   22 |   i = setjmp(env);<font></font>
    |      |       ^~~~~~<font></font>
    |      |       |<font></font>
    |      |       (12) ...to ‘setjmp’ <span class="hljs-keyword">in</span> ‘outer’ (saved at (2))<font></font>
    |</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記はかなり冗長ですが、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setjmp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">longjmpを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用すると、何が起こっているのかを伝えるためにこれが当てはまる可能性が</font><font style="vertical-align: inherit;">あり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">説明が十分に明確であることを願っています。longjmpの呼び出しが</font><font style="vertical-align: inherit;">、クリーンアップを</font><font style="vertical-align: inherit;">行わずに</font><font style="vertical-align: inherit;">、スタック</font><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">中央</font></b><font style="vertical-align: inherit;">のクリーンアップポイントの</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外側</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まで</font><font style="vertical-align: inherit;">拡張するとメモリリークが発生します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
上記のASCII出力が気に入らない場合は、</font><b><font style="vertical-align: inherit;">-fdiagnostics-path-format = Separate-events</font></b><font style="vertical-align: inherit;">を使用して、イベントを別個の「メモ」診断として表示でき</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="bash hljs">$ gcc -c -fanalyzer -fdiagnostics-path-format=separate-events longjmp-demo.c<font></font>
longjmp-demo.c: In <span class="hljs-keyword">function</span> ‘inner’:<font></font>
longjmp-demo.c:8:3: warning: leak of ‘ptr’ [CWE-401] [-Wanalyzer-malloc-leak]<font></font>
    8 |   longjmp(env, 1);<font></font>
      |   ^~~~~~~~~~~~~~~<font></font>
longjmp-demo.c:18:6: note: (1) entry to ‘outer’<font></font>
   18 | void outer(void)<font></font>
      |      ^~~~~<font></font>
In file included from longjmp-demo.c:1:<font></font>
longjmp-demo.c:22:7: note: (2) ‘setjmp’ called here<font></font>
   22 |   i = setjmp(env);<font></font>
      |       ^~~~~~<font></font>
longjmp-demo.c:23:6: note: (3) following ‘<span class="hljs-literal">true</span>’ branch (when ‘i == 0’)...<font></font>
   23 |   <span class="hljs-keyword">if</span> (i == 0)<font></font>
      |      ^<font></font>
longjmp-demo.c:24:5: note: (4) ...to here<font></font>
   24 |     middle();<font></font>
      |     ^~~~~~~~<font></font>
longjmp-demo.c:24:5: note: (5) calling ‘middle’ from ‘outer’<font></font>
longjmp-demo.c:11:13: note: (6) entry to ‘middle’<font></font>
   11 | static void middle(void)<font></font>
      |             ^~~~~~<font></font>
longjmp-demo.c:13:15: note: (7) allocated here<font></font>
   13 |   void *ptr = malloc(1024);<font></font>
      |               ^~~~~~~~~~~~<font></font>
longjmp-demo.c:14:3: note: (8) calling ‘inner’ from ‘middle’<font></font>
   14 |   inner();<font></font>
      |   ^~~~~~~<font></font>
longjmp-demo.c:6:13: note: (9) entry to ‘inner’<font></font>
    6 | static void inner(void)<font></font>
      |             ^~~~~<font></font>
longjmp-demo.c:8:3: note: (10) ‘ptr’ leaks here; was allocated at (7)<font></font>
    8 |   longjmp(env, 1);<font></font>
      |   ^~~~~~~~~~~~~~~<font></font>
longjmp-demo.c:8:3: note: (11) rewinding from ‘longjmp’ <span class="hljs-keyword">in</span> ‘inner’...<font></font>
In file included from longjmp-demo.c:1:<font></font>
longjmp-demo.c:22:7: note: (12) ...to ‘setjmp’ <span class="hljs-keyword">in</span> ‘outer’ (saved at (2))<font></font>
   22 |   i = setjmp(env);<font></font>
      |       ^~~~~~</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fdiagnostics-path-format = none</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">使用</font></b><font style="vertical-align: inherit;">してそれらをオフにすることもできます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">JSON出力形式もあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての新しい診断には、タイプ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Wanalyzer-SOMETHING</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の名前が</font><font style="vertical-align: inherit;">付いてい</font><font style="vertical-align: inherit;">ます。上記の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Wanalyzer-double-free</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Wanalyzer-malloc-leak</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はすでに</font><b><font style="vertical-align: inherit;">確認済み</font></b><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これらの診断はすべて、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fanalyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><b><font style="vertical-align: inherit;">有効</font></b><font style="vertical-align: inherit;">な場合に</font><b><font style="vertical-align: inherit;">有効になり</font></b><font style="vertical-align: inherit;">ますが、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Wno-analyzer-SOMETHINGオプションを使用して</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（たとえば、プラグマを使用して）</font><font style="vertical-align: inherit;">選択的に無効にすることができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい警告はどのようになりますか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダブルフリー検出に加えて、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">malloc</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fopen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リークチェックが実行され</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *filename)</span>
</span>{<font></font>
  FILE *f = fopen(filename, <span class="hljs-string">"r"</span>);
  <span class="hljs-keyword">void</span> *p = <span class="hljs-built_in">malloc</span>(<span class="hljs-number">1024</span>);
  <span class="hljs-comment">/* do stuff */</span>
}</code></pre><br>
<pre><code class="bash hljs">$ gcc -c -fanalyzer leak.c<font></font>
leak.c: In <span class="hljs-keyword">function</span> ‘<span class="hljs-built_in">test</span>’:<font></font>
leak.c:9:1: warning: leak of ‘p’ [CWE-401] [-Wanalyzer-malloc-leak]<font></font>
    9 | }<font></font>
      | ^<font></font>
  ‘<span class="hljs-built_in">test</span>’: events 1-2<font></font>
    |<font></font>
    |    7 |   void *p = malloc(1024);<font></font>
    |      |             ^~~~~~~~~~~~<font></font>
    |      |             |<font></font>
    |      |             (1) allocated here<font></font>
    |    8 |   /* <span class="hljs-keyword">do</span> stuff */<font></font>
    |    9 | }<font></font>
    |      | ~<font></font>
    |      | |<font></font>
    |      | (2) ‘p’ leaks here; was allocated at (1)<font></font>
    |<font></font>
leak.c:9:1: warning: leak of FILE ‘f’ [CWE-775] [-Wanalyzer-file-leak]<font></font>
    9 | }<font></font>
      | ^<font></font>
  ‘<span class="hljs-built_in">test</span>’: events 1-2<font></font>
    |<font></font>
    |    6 |   FILE *f = fopen(filename, <span class="hljs-string">"r"</span>);<font></font>
    |      |             ^~~~~~~~~~~~~~~~~~~~<font></font>
    |      |             |<font></font>
    |      |             (1) opened here<font></font>
    |......<font></font>
    |    9 | }<font></font>
    |      | ~<font></font>
    |      | |<font></font>
    |      | (2) ‘f’ leaks here; was opened at (1)<font></font>
    |</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解放後のメモリ使用量の監視：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">link</span> {</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">link</span> *<span class="hljs-title">next</span>;</span> };<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">free_a_list_badly</span><span class="hljs-params">(struct link *n)</span>
</span>{
  <span class="hljs-keyword">while</span> (n) {
    <span class="hljs-built_in">free</span>(n);<font></font>
    n = n-&gt;next;<font></font>
  }<font></font>
}</code></pre><br>
<pre><code class="bash hljs">$ gcc -c -fanalyzer use-after-free.c<font></font>
use-after-free.c: In <span class="hljs-keyword">function</span> ‘free_a_list_badly’:<font></font>
use-after-free.c:9:7: warning: use after ‘free’ of ‘n’ [CWE-416] [-Wanalyzer-use-after-free]<font></font>
    9 |     n = n-&gt;next;<font></font>
      |     ~~^~~~~~~~~<font></font>
  ‘free_a_list_badly’: events 1-4<font></font>
    |<font></font>
    |    7 |   <span class="hljs-keyword">while</span> (n) {<font></font>
    |      |         ^<font></font>
    |      |         |<font></font>
    |      |         (1) following ‘<span class="hljs-literal">true</span>’ branch (when ‘n’ is non-NULL)...<font></font>
    |    8 |     free(n);<font></font>
    |      |     ~~~~~~~<font></font>
    |      |     |<font></font>
    |      |     (2) ...to here<font></font>
    |      |     (3) freed here<font></font>
    |    9 |     n = n-&gt;next;<font></font>
    |      |     ~~~~~~~~~~~<font></font>
    |      |       |<font></font>
    |      |       (4) use after ‘free’ of ‘n’; freed at (3)<font></font>
    |</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非ヒープポインターの解放制御：</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span>
</span>{
  <span class="hljs-keyword">int</span> buf[<span class="hljs-number">10</span>];
  <span class="hljs-keyword">int</span> *ptr;<font></font>
<font></font>
  <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">10</span>)<font></font>
    ptr = buf;<font></font>
  <span class="hljs-keyword">else</span>
    ptr = (<span class="hljs-keyword">int</span> *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span> (<span class="hljs-keyword">int</span>) * n);<font></font>
<font></font>
  <span class="hljs-comment">/* do stuff.  */</span><font></font>
<font></font>
  <span class="hljs-comment">/* oops; this free should be conditionalized.  */</span>
  <span class="hljs-built_in">free</span>(ptr);<font></font>
}</code></pre><br>
<pre><code class="bash hljs">$ gcc -c -fanalyzer heap-vs-stack.c<font></font>
heap-vs-stack.c: In <span class="hljs-keyword">function</span> ‘<span class="hljs-built_in">test</span>’:<font></font>
heap-vs-stack.c:16:3: warning: ‘free’ of ‘ptr’ <span class="hljs-built_in">which</span> points to memory not on the heap [CWE-590] [-Wanalyzer-free-of-non-heap]<font></font>
   16 |   free(ptr);<font></font>
      |   ^~~~~~~~~<font></font>
  ‘<span class="hljs-built_in">test</span>’: events 1-4<font></font>
    |<font></font>
    |    8 |   <span class="hljs-keyword">if</span> (n &lt; 10)<font></font>
    |      |      ^<font></font>
    |      |      |<font></font>
    |      |      (1) following ‘<span class="hljs-literal">true</span>’ branch (when ‘n &lt;= 9’)...<font></font>
    |    9 |     ptr = buf;<font></font>
    |      |     ~~~~~~~~~<font></font>
    |      |         |<font></font>
    |      |         (2) ...to here<font></font>
    |      |         (3) pointer is from here<font></font>
    |......<font></font>
    |   16 |   free(ptr);<font></font>
    |      |   ~~~~~~~~~<font></font>
    |      |   |<font></font>
    |      |   (4) call to ‘free’ here<font></font>
    |</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シグナル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ハンドラ内での使用が安全でないことがわかっている関数の使用を監視します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;signal.h&gt;</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">extern</span> <span class="hljs-keyword">void</span> <span class="hljs-title">body_of_program</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">custom_logger</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *msg)</span>
</span>{
  <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"LOG: %s"</span>, msg);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handler</span><span class="hljs-params">(<span class="hljs-keyword">int</span> signum)</span>
</span>{<font></font>
  custom_logger(<span class="hljs-string">"got signal"</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *argv)</span>
</span>{<font></font>
  custom_logger(<span class="hljs-string">"started"</span>);<font></font>
<font></font>
  signal(SIGINT, handler);<font></font>
<font></font>
  body_of_program();<font></font>
<font></font>
  custom_logger(<span class="hljs-string">"stopped"</span>);<font></font>
<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br>
<pre><code class="bash hljs">$ gcc -c -fanalyzer signal.c<font></font>
signal.c: In <span class="hljs-keyword">function</span> ‘custom_logger’:<font></font>
signal.c:8:3: warning: call to ‘fprintf’ from within signal handler [CWE-479] [-Wanalyzer-unsafe-call-within-signal-handler]<font></font>
    8 |   fprintf(stderr, <span class="hljs-string">"LOG: %s"</span>, msg);<font></font>
      |   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<font></font>
  ‘main’: events 1-2<font></font>
    |<font></font>
    |   16 | int main(int argc, const char *argv)<font></font>
    |      |     ^~~~<font></font>
    |      |     |<font></font>
    |      |     (1) entry to ‘main’<font></font>
    |......<font></font>
    |   20 |   signal(SIGINT, handler);<font></font>
    |      |   ~~~~~~~~~~~~~~~~~~~~~~~<font></font>
    |      |   |<font></font>
    |      |   (2) registering ‘handler’ as signal handler<font></font>
    |<font></font>
  event 3<font></font>
    |<font></font>
    |cc1:<font></font>
    | (3): later on, when the signal is delivered to the process<font></font>
    |<font></font>
    +--&gt; ‘handler’: events 4-5<font></font>
           |<font></font>
           |   11 | static void handler(int signum)<font></font>
           |      |             ^~~~~~~<font></font>
           |      |             |<font></font>
           |      |             (4) entry to ‘handler’<font></font>
           |   12 | {<font></font>
           |   13 |   custom_logger(<span class="hljs-string">"got signal"</span>);<font></font>
           |      |   ~~~~~~~~~~~~~~~~~~~~~~~~~~~<font></font>
           |      |   |<font></font>
           |      |   (5) calling ‘custom_logger’ from ‘handler’<font></font>
           |<font></font>
           +--&gt; ‘custom_logger’: events 6-7<font></font>
                  |<font></font>
                  |    6 | void custom_logger(const char *msg)<font></font>
                  |      |      ^~~~~~~~~~~~~<font></font>
                  |      |      |<font></font>
                  |      |      (6) entry to ‘custom_logger’<font></font>
                  |    7 | {<font></font>
                  |    8 |   fprintf(stderr, <span class="hljs-string">"LOG: %s"</span>, msg);<font></font>
                  |      |   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<font></font>
                  |      |   |<font></font>
                  |      |   (7) call to ‘fprintf’ from within signal handler<font></font>
                  |</code></pre><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の警告</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
と一緒に</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なすべきことは何ですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在の形式では、検証は中小規模の例に適していますが、実際のCコードにスケーリングするときに遭遇する2つの問題領域があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、状態制御コードにエラーがあります。</font><font style="vertical-align: inherit;">チェッカーの内部には、プログラムの状態を抽象的に説明するためのクラスがあります。</font><font style="vertical-align: inherit;">チェッカーは、状態を簡略化し、制御フローの接続ポイントでの状態をマージするロジックを使用して、ペア（点、状態）の有向グラフを作成することにより、プログラムを調べます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論的には、状態が複雑になりすぎると、審査官は定義が最も少ない状態に移行する必要がありますが、このアプローチでは、特定の時点で状態の数が急増し、検査員の作業が遅くなり、最終的に安全限界に達するというエラーが発生します、およびプログラムを完全には調べません。これを修正するために、状態制御コードの根本を書き直しました。来週マスターを書き直したいと思っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、プログラムを完全に調べた場合でも、</font><b><font style="vertical-align: inherit;">-fanalyzer</font></b><font style="vertical-align: inherit;">アナライザーによって生成されたコードのパス</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時々不条理に冗長です。私が見た中で最悪なのは、GCC自体をコンパイルするときに報告される初期化されていないデータを使用するための110イベントのパスです。これは誤検出であると思います。ユーザーがこのようなことを経験することを期待するのは合理的でないことは明らかです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは、グラフ（ポイント、状態）を通る最短のパスを見つけようとし、そこから一連のイベントを生成して、このチェーンを単純化しようとします。実際、彼は一連ののぞき穴の最適化をイベントチェーンに適用して、問題を示す最小限のチェーンを取得しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は最近、役立つはずのパスから制御フローの非必須エッジをフィルターする方法を実装し、同様のパッチに取り組んで、プロシージャ間の冗長なエッジを排除しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
具体的な例として、実際のエラー（15年前ではありますが）でアナライザーを試してみました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-CVE-2005-1689</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、krb5 1.4.1のダブルフリーの脆弱性。誤検知なしでエラーを正しく識別しますが、現時点ではstderrには170行の出力があります。ここに出力を1行で表示する代わりに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、このリンクで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もともとは1187行でした。さまざまなエラーを修正し、さらに簡素化して170行にした。問題の一部は、</font><b><font style="vertical-align: inherit;">krb5_xfree</font></b><font style="vertical-align: inherit;">マクロを使用し</font><font style="vertical-align: inherit;">て</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">free</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が実行されること</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、およびパス出力コードは、マクロ内でイベントが発生するたびに各マクロがどのように展開されるかを示しています。</font><font style="vertical-align: inherit;">おそらく、診断ごとに1回だけマクロ拡張が出力に表示されるはずです。</font><font style="vertical-align: inherit;">また、各診断の最初のいくつかのイベントは手続き間のロジックであり、実際にはユーザーには関係ありません（この問題の修正に取り組んでいます）。</font><font style="vertical-align: inherit;">これらの変更により、結論ははるかに短くなるはずです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、最良のインターフェースは、警告ごとに1つずつ、別個のHTMLファイルを作成し、追加情報の場所を示す「メモ」を提供できるでしょうか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エンドユーザーに警告について十分な情報を提供したいが、それをオーバーロードしないでください。</font><font style="vertical-align: inherit;">これを導入するより良い方法はありますか？</font><font style="vertical-align: inherit;">コメント欄で教えてください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">試す方法</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GCC 10はFedora 32に登場する予定で、数か月後にリリースされる予定です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単なコード例については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">godbolt.orgで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オンラインで新しいGCCを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">いじってみてください</font></a><font style="vertical-align: inherit;">（gcc "trunk"を選択</font><font style="vertical-align: inherit;">し、コンパイラオプションに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-fanalyzer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加して</font><b><font style="vertical-align: inherit;">ください</font></b><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸運を </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、翻訳者がフォーラムから追加しました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dlang、Walter Brightの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Hacker Newsへ</font></a><font style="vertical-align: inherit;">のコメント</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><br>
</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、Dをデフォルト</font><font style="vertical-align: inherit;">で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">safe @ safeに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ liveの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有権/借用システムを実装する</font><font style="vertical-align: inherit;">という[私の]アイデアの進歩と一致しています</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このバスにジャンプするか、移動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダブルフリーは、関数でデータフロー分析（DFA）を実行することで追跡できます。これは、Dがテニュアシステムの初期の実装でこれを行う方法とまったく同じです。これは、DFAなしで実行でき、正しい結果の90％しか受信しておらず、多くの誤検知が発生しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前、私は多くの静的チェッカーを使用しており、誤検知の割合はそれらを使用することを拒否するのに十分に高かった。これが、DがDFAを使用して0％の誤検知で100％の陽性信号を出す理由です（検出されたすべてのリークは100％のリークであり、起こりうるすべてのリークが100％キャッチされるわけではないことに注意してください）。コンパイラが最適化に合格するときにDFAを使用したため、これが可能になることはわかっていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
トラッキングを機能させるには、「無料」と呼ばれる機能のイベントを単にトラッキングすることはできません。最後に、通常のことは、独自のメモリアロケータを記述することであり、コンパイラはそれが何であるかを認識しません。したがって、パラメーターパラメータータイプの関数が呼び出された関数によって「消費」されたとき、および単に関数に「貸し出された」とき（したがって、Owner / Borrowerシステムの命名法）をコンパイラーに通知するメカニズムが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dの助けを借りて克服できる問題の1つは、ポインターを使用してコンポーネント操作に分解する必要がある複雑なセマンティック構造がいくつかあることです。 Rustが言語を簡略化することでこの問題を簡略化したことに気づきました:-)。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、これが行われると、それは機能し、十分に機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事には合理的な結論を出すための詳細が欠けているため、GCC 10が何をするかについてこれは重要ではないことに注意してください。</font><font style="vertical-align: inherit;">しかし、これは、プログラミング言語のメモリセキュリティエラーに飽き飽きしているという一般的な傾向の一部であると私は考えています。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Dlang.orgのディスカッションフォーラムの</font></a><font style="vertical-align: inherit;"> Dを理解するためのTimon Heraのコメント</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><br>
</h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ liveは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有権/借用システムで</font><i><font style="vertical-align: inherit;">はあり</font></i><font style="vertical-align: inherit;">ませんが、所有権と借用に関する概念に依存しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有権/借用システムは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@セーフ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ live</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -noに</font><font style="vertical-align: inherit;">所有権のセマンティクスを課し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは、</font><font style="vertical-align: inherit;">セキュリティが保証されていない</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@システム</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@信頼済み</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードの</font><font style="vertical-align: inherit;">リンターにすぎませ</font><font style="vertical-align: inherit;">ん。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja496262/index.html">CVE IDの取得</a></li>
<li><a href="../ja496266/index.html">コロナウイルス：みんな死ぬか？</a></li>
<li><a href="../ja496268/index.html">2020年の企業顧客向けHuawei Enterpriseネットワーキング製品とソリューション</a></li>
<li><a href="../ja496272/index.html">差別的なプライバシー：ライブラリの比較</a></li>
<li><a href="../ja496276/index.html">世界のスターによる70の素晴らしいビデオコース</a></li>
<li><a href="../ja496280/index.html">リモート開発：最初のスプリントインサイト</a></li>
<li><a href="../ja496282/index.html">決済プラットフォームのクリーンなアーキテクチャ</a></li>
<li><a href="../ja496284/index.html">ロシアで石油を検索する方法</a></li>
<li><a href="../ja496286/index.html">新しいFederation / Eagle宇宙船の計算方法。TESISへのインタビュー</a></li>
<li><a href="../ja496288/index.html">ターゲット言語の1つとしてKotlinを選択した理由。パート1：回顧</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>