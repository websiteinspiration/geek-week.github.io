<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹🏾 👩🏼‍🤝‍👨🏾 📙 React + Mobx：ポイントは何ですか？ 📼 🐨 🌙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今日は、私たちのプロジェクトでMobxへの移行がどのように行われたか、それがもたらす利点についてお話ししたいと思います。代表的なプロジェクトも示し、主な問題について説明します。しかし、最初に、はじめに。
 
 
 
 なぜ何かに切り替える必要があるのですか？実際、この質問に対する答えはすでに戦いの半...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>React + Mobx：ポイントは何ですか？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471048/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日は、私たちのプロジェクトでMobxへの移行がどのように行われたか、それがもたらす利点についてお話ししたいと思います。</font><font style="vertical-align: inherit;">代表的なプロジェクトも示し、主な問題について説明します。</font><font style="vertical-align: inherit;">しかし、最初に、はじめに。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lv/he/d2/lvhed2wb-qbln7ffhw3_e9ljj0e.png" alt="画像"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
なぜ何かに切り替える必要があるのですか？実際、この質問に対する答えはすでに戦いの半分です。新しいテクノロジーが新しいという理由だけで、多くの人が新しいテクノロジーの適用を好みます。履歴書には良い傾向があり、自己啓発の可能性がトレンドにある。先に進むだけでもいいですね。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでも、各ツールは独自の問題を解決する必要があり、商用コードを作成するときは、何らかの方法でそれらから反発します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのプロジェクトでは、ユーザーがデータを入力したり、フォームを操作したりするウィジェットがいくつかあります。</font><font style="vertical-align: inherit;">原則として、各ウィジェットには複数の画面があります。</font><font style="vertical-align: inherit;">むかしむかし、それはすべて古き良きMarkoJSテンプレートエンジン+クライアントの必須jQueryで動作しました。</font><font style="vertical-align: inherit;">フォームとのインタラクションは命令的なスタイルで書かれていますが、それ以外の場合は、コールバックであり、これはすでに過去にあるように見えるすべて同じです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に</font><b><font style="vertical-align: inherit;">反応</font></b><font style="vertical-align: inherit;">時間です</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">クライアントのビジネスロジックはますます複雑になり、多くの対話オプションがあり、命令コードは複雑な混乱に変わりました。</font><font style="vertical-align: inherit;">宣言的反応コードははるかに便利であることがわかりました。</font><font style="vertical-align: inherit;">ようやく、プレゼンテーションではなくロジックに集中し、コンポーネントを再利用して、新しい機能を開発するためのタスクをさまざまな従業員に簡単に分散させることができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、純粋なReactのアプリケーションは、時間の経過とともに具体的な境界にかかっています。もちろん、くしゃみごとにthis.setStateを記述し、その非同期性について考えるのは面倒ですが、コンポーネントの厚さを介してデータとコールバックをスローすると、特に困難になります。つまり、データとプレゼンテーションを完全に分離するときがきました。どうすれば純粋なReactでそれを実現できるかという問題ではありませんが、業界ではフロントエンドアプリケーションのFluxアーキテクチャを実装するフレームワークが最近人気を博しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空室の記事と参照の数から判断すると、</font><b><font style="vertical-align: inherit;">Redux</font></b><font style="vertical-align: inherit;">は私たちの中で最も有名です。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">実際、私はすでに最後の瞬間と同じように、プロジェクトにインストールして開発を開始するために手を持っています（これは文字通りです！）悪魔がHabrを突き抜け、「ReduxまたはMobx？」というトピックについての議論がありました。</font><font style="vertical-align: inherit;">これがこの記事です：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/en/post/459706</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それとその下のすべてのコメントを読んだ後、私はまだ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mobxを</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用することに</font><b><font style="vertical-align: inherit;">気づきました</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度。</font><font style="vertical-align: inherit;">最も重要な質問への回答-なぜこれがすべてですか？</font><font style="vertical-align: inherit;">-それはこのように見えます：プレゼンテーションとデータを分離する時が来ました。コールバックと転送された属性の相互受粉なしに、宣言的なスタイル（およびレンダリング）でデータ管理を構築したいと思います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで続行する準備が整いました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.アプリケーションについて</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、スクリーンとフォームの特定のデザイナーを前面に構築する必要があります。それらは、ビジネスの変化する要件に従って、すばやくシャッフルし、互いに接続することができます。</font><font style="vertical-align: inherit;">これにより、必然的に次のように移動します。完全に分離されたコンポーネントのコレクションと、各ウィジェットに対応するいくつかの基本コンポーネントを作成します（実際、これらは個別のSPAであり、一般的なアプリケーションの新しいビジネスケースで毎回作成されます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例では、これらのガジェットの1つを省略したバージョンを示します。</font><font style="vertical-align: inherit;">余分なコードを積み上げないように、3つの入力フィールドと1つのボタンのフォームとします。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.データ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mobxは本質的にフレームワークではなく、単なるライブラリです。マニュアルには、データを直接編成しないことが明記されています。あなた自身がそのような組織を考え出す必要があります。ちなみに、</font><font style="vertical-align: inherit;">バージョン5ではSybmolデータ型を使用しているため</font><font style="vertical-align: inherit;">、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mobx 4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">していますが、残念ながら、すべてのブラウザーでサポートされているわけではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、すべてのデータは個別のエンティティに割り当てられます。 ：私たちのアプリケーションは、2つのフォルダのセットを求めて</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々はすべてのビューを置く</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">店舗</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、データが含まれることになるだけでなく、それらを操作するためのロジックを。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、私たちの典型的なデータ入力コンポーネントは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Input.js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><i><font style="vertical-align: inherit;">InputStore.jsの</font></i><font style="vertical-align: inherit;"> 2つのファイルで構成されています。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最初のファイルは、表示を完全に担当する愚かなReactコンポーネントです。2番目は、このコンポーネントのデータ、ユーザールール（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onClick</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onChange</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例に直接進む前に、別の重要な問題を解決する必要があります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.管理</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ええと、View-Storeの完全に自律的なコンポーネントがありますが、アプリケーション全体でどのように統合するのでしょうか。表示のために、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のルートコンポーネントが</font><i><font style="vertical-align: inherit;">あり</font></i><font style="vertical-align: inherit;">、データフローを管理するために、メインストレージは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mainStore.js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。原理は単純です。mainStoreは、必要なすべてのコンポーネントのすべてのリポジトリについてすべて知っています（これがどのように行われるかを以下に示します）。他のリポジトリは世界についてまったく何も知りません（まあ、1つの例外があります-辞書です）。したがって、データがどこに行き、どこで傍受するかを知ることが保証されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9c/bf/wi/9cbfwie08uztcx5vvocxj6szwqq.jpeg" alt="画像"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mainStoreは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宣言的に、その状態の一部を変更することにより、残りのコンポーネントを制御できます。次の図では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状態</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はコンポーネントストアを指し、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算された値</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を指し、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メインストア</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y1/d9/uv/y1d9uvdt1z24mzeezyjzer0jjj0.png" alt="画像"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レッツ・スタート・書き込みコードを。</font><font style="vertical-align: inherit;">メインアプリケーションファイルindex.js：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom"</span>;
<span class="hljs-keyword">import</span> {Provider} <span class="hljs-keyword">from</span> <span class="hljs-string">"mobx-react"</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">"./components/App"</span>;
<span class="hljs-keyword">import</span> mainStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./stores/mainStore"</span>;
<span class="hljs-keyword">import</span> optionsStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./stores/optionsStore"</span>;
<span class="hljs-comment">//  IE11</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"es6-object-assign"</span>).polyfill();
<span class="hljs-built_in">require</span>( <span class="hljs-string">"./static/less/main.less"</span>);<font></font>
<font></font>
<span class="hljs-keyword">const</span> stores = {<font></font>
    mainStore,<font></font>
    optionsStore,<font></font>
    <span class="hljs-attr">ButtonStore</span> : mainStore.ButtonStore,    
    <span class="hljs-attr">FioStore</span> : mainStore.FioStore,
    <span class="hljs-attr">EmailStore</span> : mainStore.EmailStore<font></font>
};<font></font>
<font></font>
ReactDOM.render((<font></font>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> {<span class="hljs-attr">...stores</span>}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
), <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'reactContainer'</span>));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、Mobxの基本概念を確認できます。</font><font style="vertical-align: inherit;">データ（ストア）は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロバイダー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メカニズムを介してアプリケーションのどこからでも利用できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">操作に必要なリポジトリをリストして、アプリケーションをラップします。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロバイダー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">するには、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mobx-reactモジュール</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">を</font></i><font style="vertical-align: inherit;">接続し</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">主制御ストアのためには</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタートから他のすべてのデータへのアクセス権を持っている、我々は内の子ストアを初期化し</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// mainStore.js</span><font></font>
<font></font>
<span class="hljs-keyword">import</span> optionsStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./optionsStore"</span>;
<span class="hljs-keyword">import</span> ButtonStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./ButtonStore"</span>;
<span class="hljs-keyword">import</span> FioStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./FioStore"</span>;
<span class="hljs-keyword">import</span> EmailStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./EmailStore"</span>;<font></font>
....<font></font>
<font></font>
class mainStore {<font></font>
    <span class="hljs-keyword">constructor</span>() {
        <span class="hljs-comment">/**
         *   
         */</span>
        <span class="hljs-keyword">this</span>.ButtonStore = <span class="hljs-keyword">new</span> ButtonStore();      
        <span class="hljs-keyword">this</span>.FioStore = <span class="hljs-keyword">new</span> FioStore();
        <span class="hljs-keyword">this</span>.EmailStore = <span class="hljs-keyword">new</span> EmailStore();       <font></font>
<font></font>
    ...</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App.js</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々のアプリケーションのスケルトン</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> {observer, inject} <span class="hljs-keyword">from</span> <span class="hljs-string">"mobx-react"</span>;
<span class="hljs-keyword">import</span> ButtonArea <span class="hljs-keyword">from</span> <span class="hljs-string">"./ButtonArea"</span>;
<span class="hljs-keyword">import</span> Email <span class="hljs-keyword">from</span> <span class="hljs-string">"./Email"</span>;
<span class="hljs-keyword">import</span> Fio <span class="hljs-keyword">from</span> <span class="hljs-string">"./Fio"</span>;
<span class="hljs-keyword">import</span> l10n <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../l10n/localization.js"</span>;<font></font>
<font></font>
@inject(<span class="hljs-string">"mainStore"</span>)<font></font>
@observer<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);       <font></font>
    };<font></font>
<font></font>
    render() { <font></font>
        <span class="hljs-keyword">const</span> mainStore = <span class="hljs-keyword">this</span>.props.mainStore;<font></font>
    <font></font>
        <span class="hljs-keyword">return</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"container"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Fio</span>
                    <span class="hljs-attr">label</span>=<span class="hljs-string">{l10n.ru.profile.name}</span>
                    <span class="hljs-attr">name</span>=<span class="hljs-string">{</span>"<span class="hljs-attr">name</span>"}
                    <span class="hljs-attr">value</span>=<span class="hljs-string">{mainStore.userData.name}</span>
                    <span class="hljs-attr">daData</span>=<span class="hljs-string">{true}</span>                
                /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Fio</span>
                    <span class="hljs-attr">label</span>=<span class="hljs-string">{l10n.ru.profile.surname}</span>
                    <span class="hljs-attr">name</span>=<span class="hljs-string">{</span>"<span class="hljs-attr">surname</span>"}
                    <span class="hljs-attr">value</span>=<span class="hljs-string">{mainStore.userData.surname}</span>
                    <span class="hljs-attr">daData</span>=<span class="hljs-string">{true}</span>                  
                /&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">Email</span>
                    <span class="hljs-attr">label</span>=<span class="hljs-string">{l10n.ru.profile.email}</span>
                    <span class="hljs-attr">name</span>=<span class="hljs-string">{</span>"<span class="hljs-attr">email</span>"}
                    <span class="hljs-attr">value</span>=<span class="hljs-string">{mainStore.userData.email}</span>                     
                /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">ButtonArea</span> /&gt;</span>                
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>            <font></font>
        );<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 2つの基本的なMobxの概念があり</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジェクト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">観察者が</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">イン</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジェクト</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、アプリケーションに必要なストアのみを実装します。私たちは、リスト、当社のアプリケーションの使用異なるリポジトリの異なる部分</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注入は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、カンマで区切って指定します。当然、プラグ可能なストアは、最初は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロバイダーに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストされているはず</font><font style="vertical-align: inherit;">です。リポジトリは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this.props.yourStoreName</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を通じてコン​​ポーネントで使用できます</font><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブザーバー</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -デコレーターは、コンポーネントがMobxを使用して変更されるデータにサブスクライブされることを示します。データが変更されました-コンポーネントで反応が発生しました（以下に表示されます）。したがって、特別なサブスクリプションとコールバックはありません-Mobxは変更自体を提供します！</font></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mainStore</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">での</font><font style="vertical-align: inherit;">
アプリケーション全体の管理に</font><font style="vertical-align: inherit;">戻りますが、ここではコンポーネントを実行します。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Email</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buttonの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3つのタイプがあります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">1つ目と3つ目をユニバーサルにし、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メールを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタムにします。</font><font style="vertical-align: inherit;">彼から始めましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表示は通常のダムReactコンポーネントです。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Email.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> {inject, observer} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx-react'</span>;<font></font>
<font></font>
@inject(<span class="hljs-string">"EmailStore"</span>)<font></font>
@observer<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Email</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);        <font></font>
    }; <font></font>
<font></font>
    componentDidMount = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {        
        <span class="hljs-keyword">this</span>.props.EmailStore.validate(<span class="hljs-keyword">this</span>.props.name);<font></font>
    };<font></font>
<font></font>
    componentWillUnmount = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.props.EmailStore.unmount(<span class="hljs-keyword">this</span>.props.name);<font></font>
    };<font></font>
<font></font>
    render() {         <font></font>
        <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">this</span>.props.name;
        <span class="hljs-keyword">const</span> EmailStore = <span class="hljs-keyword">this</span>.props.EmailStore;
        <span class="hljs-keyword">const</span> params = EmailStore.params;         
        <span class="hljs-keyword">let</span> status = <span class="hljs-string">"form-group email "</span>;
        <span class="hljs-keyword">if</span> (params.isCorrect &amp;&amp; params.onceValidated) status += <span class="hljs-string">"valid"</span>;
        <span class="hljs-keyword">if</span> (params.isWrong &amp;&amp; params.onceValidated) status += <span class="hljs-string">"error"</span>;    <font></font>
<font></font>
        <span class="hljs-keyword">return</span> (            
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{status}</span>&gt;</span>           
                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">{name}</span>&gt;</span>{this.props.label}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                    <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>                 
                    <span class="hljs-attr">disabled</span>=<span class="hljs-string">{this.props.disabled}</span>
                    <span class="hljs-attr">name</span>=<span class="hljs-string">{name}</span>
                    <span class="hljs-attr">id</span>=<span class="hljs-string">{name}</span>
                    <span class="hljs-attr">value</span>=<span class="hljs-string">{params.value}</span>
                    <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> EmailStore.bindData(e, name)}                                              
                /&gt;                
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}                <font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検証の外部コンポーネントを接続します。要素がレイアウトに既に含まれている後にこれを行うことが重要です。</font><font style="vertical-align: inherit;">したがって、ストアのメソッドは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">componentDidMount</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で呼び出され</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リポジトリ自体：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EmailStore.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {action, observable} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx'</span>;
<span class="hljs-keyword">import</span> reactTriggerChange <span class="hljs-keyword">from</span> <span class="hljs-string">"react-trigger-change"</span>;
<span class="hljs-keyword">import</span> Validators <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../helpers/Validators"</span>;
<span class="hljs-keyword">import</span> {<font></font>
    getTarget<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../helpers/elementaries"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmailStore</span> </span>{<font></font>
<font></font>
    @observable params = {<font></font>
        <span class="hljs-attr">value</span> : <span class="hljs-string">""</span>,  
        <span class="hljs-attr">disabled</span> : <span class="hljs-literal">null</span>,
        <span class="hljs-attr">isCorrect</span> : <span class="hljs-literal">null</span>,
        <span class="hljs-attr">isWrong</span> : <span class="hljs-literal">null</span>,
        <span class="hljs-attr">onceValidated</span> : <span class="hljs-literal">null</span>,
        <span class="hljs-attr">prevalidated</span> : <span class="hljs-literal">null</span><font></font>
    }<font></font>
   <font></font>
    <span class="hljs-comment">/**
     *     
     */</span>
    @action bindData = <span class="hljs-function">(<span class="hljs-params">e, name</span>) =&gt;</span> {      
        <span class="hljs-keyword">this</span>.params.value = getTarget(e).value;        <font></font>
    };    <font></font>
    <font></font>
    <span class="hljs-comment">/**
     *  
     */</span>
    @action validate = <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> callbacks = {
            <span class="hljs-attr">success</span> : <span class="hljs-function">(<span class="hljs-params">formatedValue</span>) =&gt;</span> {                                 
                <span class="hljs-keyword">this</span>.params.value = formatedValue;
                <span class="hljs-keyword">this</span>.params.isCorrect = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">this</span>.params.isWrong = <span class="hljs-literal">false</span>;    
                <span class="hljs-keyword">this</span>.params.onceValidated = <span class="hljs-literal">true</span>;<font></font>
            },<font></font>
            <span class="hljs-attr">fail</span> : <span class="hljs-function">(<span class="hljs-params">formatedValue</span>) =&gt;</span> {                                          
                <span class="hljs-keyword">this</span>.params.value = formatedValue;
                <span class="hljs-keyword">this</span>.params.isCorrect = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">this</span>.params.isWrong = <span class="hljs-literal">true</span>;                    <font></font>
            }<font></font>
        };<font></font>
        <span class="hljs-keyword">const</span> options = {
            <span class="hljs-attr">type</span> : <span class="hljs-string">"email"</span><font></font>
        };<font></font>
        <span class="hljs-keyword">const</span> element = <span class="hljs-built_in">document</span>.getElementById(name);
        <span class="hljs-keyword">new</span> Validators(element, options, callbacks).init();
        <span class="hljs-comment">//   </span><font></font>
        reactTriggerChange(element);<font></font>
        <span class="hljs-keyword">this</span>.params.prevalidated = <span class="hljs-literal">true</span>;<font></font>
    };   <font></font>
<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの新しいエンティティに注意を払う価値があります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブザーバブル</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -オブジェクト、フィールドの変更はすべてMobxによって監視されます（そして</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブザーバー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">信号を送信します。</font><i><font style="vertical-align: inherit;">オブザーバー</font></i><font style="vertical-align: inherit;">は特定のストレージにサブスクライブしています）。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -このデコレータは、アプリケーションの状態を変更し、および/または副作用を引き起こす任意のハンドラをラップする必要があります。ここでは</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">@ observable paramsの</font></i><font style="vertical-align: inherit;"> valueの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を変更します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
これで、シンプルなコンポーネントが完成しました。ユーザーデータを追跡して記録できます。後で、中央リポジトリ</font><i><font style="vertical-align: inherit;">mainStore</font></i><font style="vertical-align: inherit;">がこのデータを変更するために</font><font style="vertical-align: inherit;">どのように</font><font style="vertical-align: inherit;">サブスクライブする</font><font style="vertical-align: inherit;">かを確認し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
典型的な</font><i><font style="vertical-align: inherit;">Fio</font></i><font style="vertical-align: inherit;">コンポーネント</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">前のものとの違いは、このタイプのコンポーネントを1つのアプリケーションで無制限に何度も使用することです。</font><font style="vertical-align: inherit;">これにより、コンポーネントストアに追加の要件が課せられます。</font><font style="vertical-align: inherit;">その上で、優れた</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DaData</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスを使用して、入力文字に関するヒントを</font><b><font style="vertical-align: inherit;">増やし</font></b><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">表示：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fio.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> {inject, observer} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx-react'</span>;
<span class="hljs-keyword">import</span> {get} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx'</span>;<font></font>
<font></font>
@inject(<span class="hljs-string">"FioStore"</span>)<font></font>
@observer<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fio</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);        <font></font>
    };  <font></font>
<font></font>
    componentDidMount = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-comment">/**
         *      
         */</span>
        <span class="hljs-keyword">this</span>.props.FioStore.registration(<span class="hljs-keyword">this</span>.props);<font></font>
    };<font></font>
<font></font>
    componentWillUnmount = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.props.FioStore.unmount(<span class="hljs-keyword">this</span>.props.name);<font></font>
    };<font></font>
<font></font>
    render() {<font></font>
<font></font>
        <span class="hljs-comment">/**
         *      
         *  DaData:
         * data.surname - 
         * data.name -         
         * https://dadata.ru/api/suggest/name
         */</span>
        <span class="hljs-keyword">const</span> FioStore = <span class="hljs-keyword">this</span>.props.FioStore;
        <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">this</span>.props.name;
        <span class="hljs-keyword">const</span> item = get(FioStore.items, name);   
        <span class="hljs-keyword">if</span> (item &amp;&amp; item.isCorrect &amp;&amp; item.onceValidated &amp;&amp; !item.prevalidated) status = <span class="hljs-string">"valid"</span>;
        <span class="hljs-keyword">if</span> (item &amp;&amp; item.isWrong &amp;&amp; item.onceValidated) status = <span class="hljs-string">"error"</span>;
        <span class="hljs-comment">//    store </span>
        <span class="hljs-keyword">let</span> value = <span class="hljs-keyword">this</span>.props.value;
        <span class="hljs-keyword">if</span> (item) value = item.value;       <font></font>
<font></font>
        <span class="hljs-keyword">return</span> (            
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"form-group fio"</span>&gt;</span>                
                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htlmfor</span>=<span class="hljs-string">{name}</span>&gt;</span>{this.props.label}<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>          
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
                    <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>                                               
                    <span class="hljs-attr">disabled</span>=<span class="hljs-string">{this.props.disabled}</span>
                    <span class="hljs-attr">name</span>=<span class="hljs-string">{name}</span>
                    <span class="hljs-attr">id</span>=<span class="hljs-string">{name}</span>
                    <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>                     
                    <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> FioStore.bindData(e, name)}                                                                
                /&gt;                
                {(item &amp;&amp; item.suggestions &amp;&amp; item.suggestions.length &gt; 0) &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"hint-container"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{</span>"<span class="hljs-attr">hint-container-</span>" + <span class="hljs-attr">item.id</span>}&gt;</span>{item.suggestions.map((suggestion, i) =&gt; {
                    return (
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>"<span class="hljs-attr">suggestion-item</span> <span class="hljs-attr">fs-</span>" + <span class="hljs-attr">i</span>} <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{suggestion.data[name]}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> FioStore.setSuggestion(e, name)}&gt;
                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"suggestion-text"</span>&gt;</span>{suggestion.data[name]}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>)
                })}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}      <font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに何か新しいものがあります。コンポーネントの状態に直接アクセスするのではなく、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介してアクセスし</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。</font></font><br>
<pre><code class="javascript hljs">get(FioStore.items, name)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際には、コンポーネントインスタンスの数は無制限であり、リポジトリはこのタイプのすべてのコンポーネントに対して1つです。</font><font style="vertical-align: inherit;">したがって、登録時に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Map</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に各インスタンスのパラメーターを入力します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fiostore.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {action, autorun, observable, get, set} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx'</span>;
<span class="hljs-keyword">import</span> reactTriggerChange <span class="hljs-keyword">from</span> <span class="hljs-string">"react-trigger-change"</span>;
<span class="hljs-keyword">import</span> Validators <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../helpers/Validators"</span>;
<span class="hljs-keyword">import</span> {<font></font>
    getDaData, <font></font>
    blockValidate<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../helpers/functions"</span>;
<span class="hljs-keyword">import</span> {<font></font>
    getAttrValue,<font></font>
    scrollToElement,<font></font>
    getTarget<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../helpers/elementaries"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FioStore</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>() { <font></font>
        autorun(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-comment">/**
             *        .         setSuggestion()
             */</span>
            <span class="hljs-keyword">const</span> self = <span class="hljs-keyword">this</span>;<font></font>
            $(<span class="hljs-string">"body"</span>).click(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
                <span class="hljs-keyword">if</span> (e.target.className !== <span class="hljs-string">"suggestion-item"</span> &amp;&amp; e.target.className !== <span class="hljs-string">"suggestion-text"</span>) {
                    <span class="hljs-keyword">const</span> items = self.items.entries(); 
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> [key, value] <span class="hljs-keyword">of</span> items) {<font></font>
                        value.suggestions = [];                       <font></font>
                    }                                             <font></font>
                }<font></font>
            });<font></font>
        })<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   items       Fio   
     */</span>
    @observable items = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([]);<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     */</span>
    @action registration = <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {        
        <span class="hljs-keyword">const</span> nameExists = get(<span class="hljs-keyword">this</span>.items, params.name);      
        <span class="hljs-keyword">if</span> (!blockValidate({params, nameExists, <span class="hljs-attr">type</span>: <span class="hljs-string">"Fio"</span>})) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; 
        <span class="hljs-comment">//  items  </span>
        <span class="hljs-keyword">const</span> value = {
            <span class="hljs-attr">value</span> : params.value, 
            <span class="hljs-attr">disabled</span> : params.disabled,
            <span class="hljs-attr">isCorrect</span> : <span class="hljs-literal">null</span>,
            <span class="hljs-attr">isWrong</span> : <span class="hljs-literal">null</span>,
            <span class="hljs-attr">suggestions</span> : [],        
            <span class="hljs-attr">daData</span> : params.daData,
            <span class="hljs-attr">startValidation</span> : <span class="hljs-literal">true</span>,
            <span class="hljs-comment">//     </span>
            <span class="hljs-attr">onceValidated</span> : <span class="hljs-literal">false</span>,
            <span class="hljs-comment">//     </span>
            <span class="hljs-attr">prevalidated</span> : <span class="hljs-literal">false</span><font></font>
        };<font></font>
        set(<span class="hljs-keyword">this</span>.items, params.name, value);         
        <span class="hljs-keyword">this</span>.validate(params.name);  <font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     */</span>
    @action unmount = <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.items.delete(name);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     *   
     */</span>
    @action bindData = <span class="hljs-function">(<span class="hljs-params">e, name</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> value = getTarget(e).value;
        <span class="hljs-keyword">const</span> item = get(<span class="hljs-keyword">this</span>.items, name);
        <span class="hljs-comment">/**
         *     DaData
         */</span>
        <span class="hljs-keyword">if</span> (item.daData &amp;&amp; !item.startValidation) {<font></font>
            getDaData({value, <span class="hljs-attr">type</span>: <span class="hljs-string">"fio"</span>, name})<font></font>
                .then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {<font></font>
                    item.suggestions = result.suggestions;                    <font></font>
                })<font></font>
                .catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {<span class="hljs-built_in">console</span>.log(error)})<font></font>
        } <span class="hljs-keyword">else</span> {<font></font>
            item.startValidation = <span class="hljs-literal">false</span>;<font></font>
            item.value = value;<font></font>
        }<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">/**
     *  
     */</span>
    @action setSuggestion = <span class="hljs-function">(<span class="hljs-params">e, name</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (e) e.preventDefault();       <font></font>
        get(<span class="hljs-keyword">this</span>.items, name).value = getAttrValue(e);
        <span class="hljs-comment">//    </span>
        get(<span class="hljs-keyword">this</span>.items, name).suggestions = [];<font></font>
        get(<span class="hljs-keyword">this</span>.items, name).isCorrect = <span class="hljs-literal">true</span>; <font></font>
        get(<span class="hljs-keyword">this</span>.items, name).isWrong = <span class="hljs-literal">false</span>;<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">/**
     *  
     */</span>
    @action validate = <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> callbacks = {
            <span class="hljs-attr">success</span> : <span class="hljs-function">(<span class="hljs-params">formatedValue</span>) =&gt;</span> {        <font></font>
                get(<span class="hljs-keyword">this</span>.items, name).value = formatedValue;<font></font>
                get(<span class="hljs-keyword">this</span>.items, name).isCorrect = <span class="hljs-literal">true</span>;<font></font>
                get(<span class="hljs-keyword">this</span>.items, name).isWrong = <span class="hljs-literal">false</span>;      <font></font>
                get(<span class="hljs-keyword">this</span>.items, name).onceValidated = <span class="hljs-literal">true</span>;<font></font>
            },<font></font>
            <span class="hljs-attr">fail</span> : <span class="hljs-function">(<span class="hljs-params">formatedValue</span>) =&gt;</span> {                         <font></font>
                get(<span class="hljs-keyword">this</span>.items, name).value = formatedValue;<font></font>
                get(<span class="hljs-keyword">this</span>.items, name).isCorrect = <span class="hljs-literal">false</span>;<font></font>
                get(<span class="hljs-keyword">this</span>.items, name).isWrong = <span class="hljs-literal">true</span>;             <font></font>
            }<font></font>
        };<font></font>
        <span class="hljs-keyword">const</span> options = {
            <span class="hljs-attr">type</span> : <span class="hljs-string">"fio"</span><font></font>
        };<font></font>
        <span class="hljs-keyword">const</span> element = <span class="hljs-built_in">document</span>.getElementById(name);
        <span class="hljs-keyword">new</span> Validators(element, options, callbacks).init();
        <span class="hljs-comment">//   </span><font></font>
        reactTriggerChange(element);            <font></font>
        get(<span class="hljs-keyword">this</span>.items, name).prevalidated = <span class="hljs-literal">true</span>;<font></font>
    };   <font></font>
<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジェネリックコンポーネントの状態は次のように初期化されます。 </font></font><br>
<br>
<pre><code class="javascript hljs">@observable items = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([]);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常のJSオブジェクトを操作する方が便利ですが、フィールドの値を変更するときに「タップ」されません。</font><font style="vertical-align: inherit;">新しいコンポーネントがページに追加されると、フィールドは動的に追加されます。</font><font style="vertical-align: inherit;">個別に取得するDaDataヒントを受け取ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボタンコンポーネントは似ていますが、ヒントはありません。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Button.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> {inject, observer} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx-react'</span>;<font></font>
<font></font>
@inject(<span class="hljs-string">"ButtonStore"</span>)<font></font>
@observer<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);        <font></font>
    }; <font></font>
<font></font>
    componentDidMount = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-comment">/**
         *      
         */</span>
        <span class="hljs-keyword">this</span>.props.ButtonStore.registration(<span class="hljs-keyword">this</span>.props);<font></font>
    };<font></font>
<font></font>
    componentWillUnmount = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">this</span>.props.ButtonStore.unmount(<span class="hljs-keyword">this</span>.props.name);<font></font>
    };<font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">const</span> name = <span class="hljs-keyword">this</span>.props.name;   
        <span class="hljs-keyword">return</span> (            
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"form-group button"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span>                  
                    <span class="hljs-attr">disabled</span>=<span class="hljs-string">{this.props.disabled}</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> this.props.ButtonStore.bindClick(e, name)}
                    name={name}
                    id={name}
                &gt;{this.props.text}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>               
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ButtonStore.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {action, observable, get, set} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx'</span>;
<span class="hljs-keyword">import</span> {blockValidate} <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../helpers/functions"</span>;<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ButtonStore</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>() {}<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   items       Button   
     */</span>
    @observable items = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>([])    <font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     */</span>
    @action registration = <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {        
        <span class="hljs-keyword">const</span> nameExists = get(<span class="hljs-keyword">this</span>.items, params.name);      
        <span class="hljs-keyword">if</span> (!blockValidate({params, nameExists, <span class="hljs-attr">type</span>: <span class="hljs-string">"Button"</span>})) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-comment">//  items  </span>
        <span class="hljs-keyword">const</span> value = {           
            <span class="hljs-attr">disabled</span> : params.disabled,       
            <span class="hljs-attr">isClicked</span> : <span class="hljs-literal">false</span>     <font></font>
        };<font></font>
        set(<span class="hljs-keyword">this</span>.items, params.name, value);      <font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     */</span>
    @action unmount = <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.items.delete(name);<font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     */</span>
    @action bindClick = <span class="hljs-function">(<span class="hljs-params">e, name</span>) =&gt;</span> {<font></font>
        e.preventDefault();       <font></font>
        get(<span class="hljs-keyword">this</span>.items, name).isClicked = <span class="hljs-literal">true</span>;       <font></font>
    };<font></font>
<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Button</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
のコンポーネントは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ButtonAreaの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> HOCコンポーネントによってラップされ</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">古いコンポーネントには独自のストアのセットと最年少のストアが含まれていることに注意してください。</font><font style="vertical-align: inherit;">組み込みコンポーネントのチェーンでは、パラメーターやコールバックを転送する必要はありません。</font><font style="vertical-align: inherit;">特定のコンポーネントの操作に必要なすべてのものは、直接それに追加されます。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ButtonArea.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> {inject, observer} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx-react'</span>;
<span class="hljs-keyword">import</span> l10n <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../l10n/localization.js"</span>;
<span class="hljs-keyword">import</span> Button <span class="hljs-keyword">from</span> <span class="hljs-string">"./Button"</span>;<font></font>
<font></font>
@inject(<span class="hljs-string">"mainStore"</span>, <span class="hljs-string">"optionsStore"</span>)<font></font>
@observer<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ButtonArea</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>(props) {
        <span class="hljs-keyword">super</span>(props);        <font></font>
    };      <font></font>
<font></font>
    render() {<font></font>
        <span class="hljs-keyword">return</span> (            
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"button-container"</span>&gt;</span>                
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{this.props.optionsStore.dict.buttonsHeading}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> 
                    <span class="hljs-attr">name</span>=<span class="hljs-string">{</span>"<span class="hljs-attr">send_data</span>"}  
                    <span class="hljs-attr">disabled</span>=<span class="hljs-string">{this.props.mainStore.buttons.sendData.disabled</span> ? <span class="hljs-attr">true</span> <span class="hljs-attr">:</span> <span class="hljs-attr">false</span>}
                    <span class="hljs-attr">text</span>=<span class="hljs-string">{l10n.ru.common.continue}</span>                                         
                /&gt;</span> 
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
        );<font></font>
    }<font></font>
}</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、すべてのコンポーネントの準備が整いました。</font><font style="vertical-align: inherit;">問題は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mainStore</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のマネージャーに</font><i><font style="vertical-align: inherit;">任されています。</font></i><font style="vertical-align: inherit;">まず、すべてのストレージコード：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mainStore.js</font></font></b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword">import</span> {observable, computed, autorun, reaction, get, action} <span class="hljs-keyword">from</span> <span class="hljs-string">'mobx'</span>;
<span class="hljs-keyword">import</span> optionsStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./optionsStore"</span>;
<span class="hljs-keyword">import</span> ButtonStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./ButtonStore"</span>;
<span class="hljs-keyword">import</span> FioStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./FioStore"</span>;
<span class="hljs-keyword">import</span> EmailStore <span class="hljs-keyword">from</span> <span class="hljs-string">"./EmailStore"</span>;
<span class="hljs-keyword">import</span> {<font></font>
    fetchOrdinary, <font></font>
    sendStats<font></font>
} <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../helpers/functions"</span>;
<span class="hljs-keyword">import</span> l10n <span class="hljs-keyword">from</span> <span class="hljs-string">"../../../l10n/localization.js"</span>;<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">mainStore</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">constructor</span>() {<font></font>
<font></font>
        <span class="hljs-comment">/**
         *   
         */</span>
        <span class="hljs-keyword">this</span>.ButtonStore = <span class="hljs-keyword">new</span> ButtonStore();       
        <span class="hljs-keyword">this</span>.FioStore = <span class="hljs-keyword">new</span> FioStore();
        <span class="hljs-keyword">this</span>.EmailStore = <span class="hljs-keyword">new</span> EmailStore();        <font></font>
<font></font>
        autorun(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {     
            <span class="hljs-keyword">this</span>.fillBlocks();         
            <span class="hljs-keyword">this</span>.fillData();<font></font>
        });<font></font>
        <font></font>
<font></font>
        <span class="hljs-comment">/**
         *     
         */</span><font></font>
        reaction(<font></font>
            <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.dataInput,<font></font>
            (result) =&gt; {<font></font>
                <span class="hljs-keyword">let</span> isIncorrect = <span class="hljs-literal">false</span>;
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> result) {
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j <span class="hljs-keyword">in</span> result[i]) {
                        <span class="hljs-keyword">const</span> res = result[i][j];              
                        <span class="hljs-keyword">if</span> (!res.isCorrect) isIncorrect = <span class="hljs-literal">true</span>;                 
                        <span class="hljs-keyword">this</span>.userData[j] = res.value;   <font></font>
                    }<font></font>
                };<font></font>
                <span class="hljs-keyword">if</span> (!isIncorrect) {                 
                    <span class="hljs-keyword">this</span>.buttons.sendData.disabled = <span class="hljs-literal">false</span>
                } <span class="hljs-keyword">else</span> {                  
                    <span class="hljs-keyword">this</span>.buttons.sendData.disabled = <span class="hljs-literal">true</span><font></font>
                };<font></font>
            }<font></font>
        );<font></font>
<font></font>
        <span class="hljs-comment">/**
         *    
         */</span><font></font>
        reaction(<font></font>
            <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.sendDataButton,<font></font>
            (result) =&gt; {<font></font>
                <span class="hljs-keyword">if</span> (result) {
                    <span class="hljs-keyword">if</span> (result.isClicked) {<font></font>
                        get(<span class="hljs-keyword">this</span>.ButtonStore.items, <span class="hljs-string">"send_data"</span>).isClicked = <span class="hljs-literal">false</span>;
                        <span class="hljs-keyword">const</span> authRequestSuccess = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"request is success!"</span>)<font></font>
                        };<font></font>
                        <span class="hljs-keyword">const</span> authRequestFail = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"request is fail!"</span>)<font></font>
                        };<font></font>
                        <span class="hljs-keyword">const</span> request = {
                            <span class="hljs-attr">method</span> : <span class="hljs-string">"send_userdata"</span>,
                            <span class="hljs-attr">params</span> : {
                                <span class="hljs-attr">name</span> : <span class="hljs-keyword">this</span>.userData.name,                               
                                <span class="hljs-attr">surname</span> : <span class="hljs-keyword">this</span>.userData.surname,
                                <span class="hljs-attr">email</span> : <span class="hljs-keyword">this</span>.userData.email<font></font>
                            }<font></font>
                        };<font></font>
                        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Request body is:"</span>);
                        <span class="hljs-built_in">console</span>.log(request);<font></font>
                        fetchOrdinary(<font></font>
                            optionsStore.OPTIONS.sendIdentUrl,<font></font>
                            <span class="hljs-built_in">JSON</span>.stringify(request),<font></font>
                            {<font></font>
                                <span class="hljs-attr">success</span>: authRequestSuccess,
                                <span class="hljs-attr">fail</span>: authRequestFail<font></font>
                            }<font></font>
                        );<font></font>
                    }<font></font>
                }<font></font>
            }<font></font>
        );       <font></font>
<font></font>
    }<font></font>
<font></font>
    @observable userData = {<font></font>
        <span class="hljs-attr">name</span> : <span class="hljs-string">""</span>,      
        <span class="hljs-attr">surname</span> : <span class="hljs-string">""</span>,       
        <span class="hljs-attr">email</span> : <span class="hljs-string">""</span><font></font>
    };<font></font>
<font></font>
    @observable buttons = {      <font></font>
        <span class="hljs-attr">sendData</span> : {
          <span class="hljs-attr">disabled</span> : <span class="hljs-literal">true</span><font></font>
        }<font></font>
    };  <font></font>
    <font></font>
    <span class="hljs-comment">/**
     *    
     * @key -  
     * @value -      (name, type),         
     */</span><font></font>
    componentsMap = {<font></font>
        <span class="hljs-attr">userData</span> : [<font></font>
            [<span class="hljs-string">"name"</span>, <span class="hljs-string">"fio"</span>],           <font></font>
            [<span class="hljs-string">"surname"</span>, <span class="hljs-string">"fio"</span>], <font></font>
            [<span class="hljs-string">"email"</span>, <span class="hljs-string">"email"</span>], <font></font>
            [<span class="hljs-string">"send_data"</span>, <span class="hljs-string">"button"</span>]<font></font>
        ]<font></font>
    };       <font></font>
<font></font>
    <span class="hljs-comment">/**
     *     listener'  stores
     */</span><font></font>
    @observable listenerBlocks = {};<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     */</span>
    @action fillBlocks = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.componentsMap) {
            <span class="hljs-keyword">const</span> pageBlock = <span class="hljs-keyword">this</span>.componentsMap[i];
            <span class="hljs-comment">//      (key)     (value)</span>
            <span class="hljs-keyword">const</span> blocks = {};<font></font>
            pageBlock.forEach(<span class="hljs-function">(<span class="hljs-params">item, i</span>) =&gt;</span> {
                <span class="hljs-keyword">const</span> _name = item[<span class="hljs-number">0</span>];
                <span class="hljs-keyword">const</span> _type = item[<span class="hljs-number">1</span>];
                <span class="hljs-keyword">if</span> (!blocks[_type]) {<font></font>
                    blocks[_type] = [_name]<font></font>
                } <span class="hljs-keyword">else</span> {<font></font>
                    blocks[_type].push(_name)<font></font>
                }                <font></font>
            })<font></font>
            <span class="hljs-keyword">this</span>.listenerBlocks[i] = blocks;<font></font>
        }      <font></font>
    };<font></font>
<font></font>
    <span class="hljs-comment">/**
     *   
     */</span>
    @action fillData = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {      
        <span class="hljs-keyword">if</span> (optionsStore.preset) {
            <span class="hljs-comment">// ,   undefined,    </span>
            <span class="hljs-keyword">if</span> (optionsStore.preset.name) <span class="hljs-keyword">this</span>.userData.name = optionsStore.preset.name;
            <span class="hljs-keyword">if</span> (optionsStore.preset.surname) <span class="hljs-keyword">this</span>.userData.surname = optionsStore.preset.surname;           <font></font>
        }<font></font>
    };   <font></font>
<font></font>
    <span class="hljs-comment">/**
     * Listener   
     */</span>
    @computed <span class="hljs-keyword">get</span> <span class="hljs-title">dataInput</span>() {
        <span class="hljs-keyword">const</span> mappedResult = {               
            <span class="hljs-attr">fio</span> : {},
            <span class="hljs-attr">email</span> : {
                <span class="hljs-attr">email</span> : {}<font></font>
            }<font></font>
        };  <font></font>
        <font></font>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.FioStore &amp;&amp; <span class="hljs-keyword">this</span>.FioStore.items) {    
            <span class="hljs-keyword">this</span>.listenerBlocks.userData.fio.forEach(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
                <span class="hljs-keyword">const</span> i = get(<span class="hljs-keyword">this</span>.FioStore.items, item);
                <span class="hljs-keyword">if</span> (i) {<font></font>
                    mappedResult.fio[item] = {<font></font>
                        <span class="hljs-attr">isCorrect</span> : i.isCorrect,                       
                        <span class="hljs-attr">value</span> : i.value<font></font>
                    }<font></font>
                }<font></font>
            })<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.EmailStore &amp;&amp; <span class="hljs-keyword">this</span>.EmailStore.params) {<font></font>
            mappedResult.email.email = {<font></font>
                <span class="hljs-attr">isCorrect</span> : <span class="hljs-keyword">this</span>.EmailStore.params.isCorrect,                 
                <span class="hljs-attr">prevalidated</span> : <span class="hljs-keyword">this</span>.EmailStore.params.prevalidated,
                <span class="hljs-attr">value</span> : <span class="hljs-keyword">this</span>.EmailStore.params.value<font></font>
            }   <font></font>
        }<font></font>
       <font></font>
        <span class="hljs-keyword">return</span> mappedResult<font></font>
    } <font></font>
<font></font>
<font></font>
    <span class="hljs-comment">/**
     * Listener    
     */</span>
    @computed <span class="hljs-keyword">get</span> <span class="hljs-title">sendDataButton</span>() {
        <span class="hljs-keyword">let</span> result = {};
        <span class="hljs-keyword">const</span> i = get(<span class="hljs-keyword">this</span>.ButtonStore.items, <span class="hljs-string">"send_data"</span>);
        <span class="hljs-keyword">if</span> (i) {<font></font>
            result = {<font></font>
                <span class="hljs-attr">isClicked</span> : i.isClicked<font></font>
            }<font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> result<font></font>
    }   <font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> mainStore();</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらにいくつかの重要なエンティティ。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブザーバブルの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更を追跡する関数のデコレーターです</font><font style="vertical-align: inherit;">。 Mobxの重要な利点は、計算さ</font><font style="vertical-align: inherit;">れて結果として返される</font><font style="vertical-align: inherit;">データのみが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追跡さ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れること</font><font style="vertical-align: inherit;">です</font><font style="vertical-align: inherit;">。この反応と、結果として、仮想DOMの再描画は、必要な場合にのみ発生します。</font></font><br>
 <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアクション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -変化した状態に基づいて副作用を整理するためのツール。これは2つの関数を使用します。最初の関数は計算された状態を返し、2番目の関数は状態の変化を追跡する効果を備えています。この例では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反応</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2回適用されます。最初に、フィールドの状態を見て、フォーム全体が正しいかどうかを判断し、各フィールドの値も記録します。 2番目では、ボタンをクリックします（より正確には、「ボタンが押された」という記号がある場合）、サーバーにデータを送信します。データオブジェクトがブラウザコンソールに表示されます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mainStoreは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのリポジトリを知っている</font><font style="vertical-align: inherit;">ので</font><font style="vertical-align: inherit;">、ボタンのクリックを処理した直後に、命令型のフラグを無効にすることができます。</font></font><br>
<br>
<pre><code class="javascript hljs">get(<span class="hljs-keyword">this</span>.ButtonStore.items, <span class="hljs-string">"send_data"</span>).isClicked = <span class="hljs-literal">false</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような「命令型」の存在がどの程度許容できるかについて議論できますが、いずれの場合でも、制御は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mainStore</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><i><font style="vertical-align: inherit;">ButtonStore</font></i><font style="vertical-align: inherit;">への</font><font style="vertical-align: inherit;">一方向でのみ行わ</font><font style="vertical-align: inherit;">れ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autorunは</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、変更を保存するための反応としてではなく、いくつかのアクションを指令的に実行したい場合に使用されます。この例では、1つの補助関数が起動され、辞書のデータがフォームフィールドに事前入力されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、一連のアクションは次のとおりです。コンポーネントはユーザーイベントを追跡し、その状態を変更します。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メイン</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を通して</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算された</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算のみ変更された状態に基づいて結果。その他の</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまなリポジトリのさまざまな状態の変化に注意してください。さらに、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反応</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を通じて</font><i><font style="vertical-align: inherit;">、</font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">計算</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結果</font><i><font style="vertical-align: inherit;">に</font></i><font style="vertical-align: inherit;">基づいて</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブザーバブル</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">アクション</font><i><font style="vertical-align: inherit;">を</font></i><font style="vertical-align: inherit;">実行するとともに</font><font style="vertical-align: inherit;">、副作用を実行します（たとえば、AJAXリクエストを作成します）。上</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obsevables</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要に応じて再描画されている子コンポーネントを、署名しました。変更の場所と内容を完全に制御できる単方向データストリーム。</font><font style="vertical-align: inherit;">例とコードを自分で</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">試すことができ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。リポジトリへのリンク：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/botyaslonim/mobx-habr</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、いつものように：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm i</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm run local</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パブリック</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フォルダーの</font><i><font style="vertical-align: inherit;">index.html</font></i><font style="vertical-align: inherit;">ファイル</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">DaDataのヒントは私の無料のアカウントで機能するため、habr効果により、いくつかの時点で低下する可能性があります。</font><b><font style="vertical-align: inherit;">Mobx</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
でのアプリケーションの動作に関する建設的なコメントや提案があれば嬉しく思います</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、このライブラリはデータの処理を大幅に簡略化したと言います。</font><font style="vertical-align: inherit;">中小規模のアプリケーションの場合、コンポーネントとコールバックのプロパティを忘れて、ビジネスロジックに直接集中することは間違いなく非常に便利なツールになります。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471038/index.html">Linux記述子ファイルと例</a></li>
<li><a href="../ja471040/index.html">[ブックマーク] ReactマニュアルのPDFおよびePUBバージョン</a></li>
<li><a href="../ja471042/index.html">pwnable.kr 25による問題解決-OTP。Linuxファイルのサイズ制限</a></li>
<li><a href="../ja471044/index.html">Sass MediaScreen-CSSデバイスの定義</a></li>
<li><a href="../ja471046/index.html">スタイリッシュなアバロニア</a></li>
<li><a href="../ja471050/index.html">D言語開発資金融資：新しいプラットフォームと新しい助成金...</a></li>
<li><a href="../ja471052/index.html">ハズしてもいいですか？ジェネリック型プログラミングによるヒット</a></li>
<li><a href="../ja471054/index.html">暗号通貨の量子脅威の現実性と「予言2027」の問題についてLongrid</a></li>
<li><a href="../ja471062/index.html">スマートホームを管理するようにアリスに教える方法。Yandexレポート</a></li>
<li><a href="../ja471066/index.html">zipアーカイブはどのように見え、それに対して何ができるか</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>