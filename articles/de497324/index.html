<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ûüèø üóΩ üöÇ "Wie der Apfel eines Auges ..." oder wir stellen ein einfaches Sicherheitssystem her, das auf einem Mikrocontroller (Canny oder Arduino) und Raspberry PI basiert ‚òëÔ∏è ‚ô•Ô∏è üë©üèª‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="W√§hrend der Vorbereitung des Artikels √ºber die Erkennung von Mikrocontrollern mit TensorFlow und OpenCV fielen mir gleichzeitig Craftduino, Canny 3 ti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>"Wie der Apfel eines Auges ..." oder wir stellen ein einfaches Sicherheitssystem her, das auf einem Mikrocontroller (Canny oder Arduino) und Raspberry PI basiert</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/497324/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W√§hrend der Vorbereitung des Artikels √ºber die Erkennung von Mikrocontrollern mit TensorFlow und OpenCV fielen mir gleichzeitig Craftduino, Canny 3 tiny und Raspberry PI auf. Danach entschied ich, dass es gro√üartig w√§re, sie erneut in einem Artikel zu kombinieren. Ich habe lange dar√ºber nachgedacht, wor√ºber ich schreiben soll, und dann sch√§me ich mich zuzugeben, dass ich ein gesunder Onkel war und noch nie etwas √ºber UART verbunden hatte. "Alles muss im Leben versucht werden", dachte ich. Es ist jedoch langweilig, nur √ºber die Verbindung zu UART zu schreiben. Daher wurden sofort alle Arten von ‚ÄûSpielzeug‚Äú bestellt, darunter das brandneue Arduino und einige Sensoren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also werden wir heute ein Sicherheitssystem f√ºr meinen Lieblingsstift erstellen. Bist du √ºberrascht, warum ein Stift? Das Geheimnis ist einfach, ich bin in allen Fragen der Elektronik sehr unerfahren. Als ich den Drucksensor bestellte, dachte ich, dass er √ºber den gesamten Bereich funktionieren w√ºrde, aber es stellte sich heraus, dass er nur f√ºr einen bestimmten Kontaktbereich funktioniert. Seltsamerweise, aber im ganzen Haus gab es nichts Schweres, Stabiles und Passendes, au√üer diesem Stift. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nun, bis auf meinen Finger, aber ich war nicht bereit, damit zu experimentieren</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Artikel werde ich meine Erfahrungen mit dem Anschluss eines Drucksensors und eines Doppler-Bewegungssensors an Mikrocontroller teilen. Wir werden die Controller √ºber die kabelgebundene UART-Schnittstelle mit dem GPIO Raspberry PI 3 verbinden. Dann werden wir ein einfaches Programm an Python schreiben, um den Status des Sicherheitssystems anzuzeigen, und am Ende werden wir das Smartphone mit VNC an die ‚ÄûHimbeere‚Äú anschlie√üen, um das Sicherheitssystem in einiger Entfernung vom Computer zu √ºberwachen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√∂chten Sie Indiana Jones arbeitslos machen? Dann sind Sie unter Katze willkommen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bi/nx/ru/binxrusi0n6mkswqbzmfsvt3lnq.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie immer werde ich am Anfang erkl√§ren, dass ich selbst neu in der Heimwerkerelektronik bin und langsam von Artikel zu Artikel lerne. </font><font style="vertical-align: inherit;">Nehmen Sie daher nicht wahr, was ich als die ultimative Wahrheit schreiben werde. </font><font style="vertical-align: inherit;">Sicher kann alles besser gemacht werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden heute √ºber Folgendes sprechen: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil I: Einf√ºhrung </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil II: Anschlie√üen der Schaltung und des Programms f√ºr Canny 3 winzig </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil III: Anschlie√üen der Schaltung und des Programms f√ºr Arduino Uno </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil IV: Raspberry PI und das √úberwachungsprogramm in Python </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil V: Fazit</font></font></a><br>
<a name="I"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil I: Einf√ºhrung</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der aufmerksame Leser kann die Frage stellen: ‚ÄûWarum haben Sie Arduino gekauft, wenn Sie CraftDuino bereits erw√§hnt haben?‚Äú. Alles ist sehr allt√§glich. </font><font style="vertical-align: inherit;">CraftDuino brach erneut. </font><font style="vertical-align: inherit;">Einmal</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drzugrik</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe es repariert und jetzt ist es "Selbstisolation" und ich wollte eine Person nicht umsonst st√∂ren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also n√§herten wir uns reibungslos der Materialbasis. </font><font style="vertical-align: inherit;">F√ºr diesen Artikel habe ich verwendet:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Druckwiderstand FSR402:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/1n/1e/ac/1n1eacbwx7ut25yotoswobz9u9a.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Doppler-Bewegungssensor RCWL-0516:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ao/-a/cd/ao-acdxaqtajtd0ed1hlqrqetqk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In dem Gesch√§ft, in dem ich beide Sensoren in der Beschreibung auf der Website gekauft habe, wurde geschrieben, dass sie f√ºr Arduino waren, aber in der Praxis stellte sich heraus, dass keine speziellen Bibliotheken ben√∂tigt wurden und alles ohne Probleme auf Canny begann.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mikrocontroller Arduino Uno:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/va/om/wx/vaomwxb6dsmmidh9bgg9qtpprnu.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Canny 3 Tiny Microcontroller - Version mit Klemmenblock und Kabelbaum:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/be/70/bzbe70wksqorza7989bkeidhhm8.png"></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Raspberry PI 3 Modell B Single Board Computer:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/xr/ig/xt/xrigxt2ft6fnwzmcg1bh5gu6drg.png"></div> </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sonstiges: Breboard-Steckbretter, Krokodildr√§hte und -clips, Himbeer-Netzteil </font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kommen wir zur Sache.</font></font><br>
<a name="II"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teil II: Anschlie√üen der Schaltung und des Programms f√ºr Canny 3 tiny</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt viele Beispiele im Internet, wie man Arduino √ºber UART verbindet. Es gibt viel weniger Beispiele f√ºr Canny. Beginnen wir also damit. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die L√§nge des Artikels nicht zu erh√∂hen und mich nicht zu wiederholen, m√∂chte ich Sie daran erinnern, dass ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in diesem Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die grundlegendsten Probleme bei der Arbeit mit Canny und der CannyLab-Entwicklungsumgebung </font><font style="vertical-align: inherit;">sowie ein Beispiel f√ºr den Anschluss von Sensoren an einen Analog-Digital-Wandler (ADC) und die √úbertragung einer Nachricht √ºber Virtual COM betrachtet habe Port habe ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in diesem Artikel gemacht</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr diejenigen, die dies nicht lesen, aber sofort versuchen, die Sensoren an den ADC anzuschlie√üen, gibt es einen wichtigen Punkt. Wiederholen Sie meinen Fehler nicht, damit die Ausg√§nge der Controller Nr. 5 und Nr. 6 im ADC-Modus funktionieren, m√ºssen Sie die Jumper wie in der Abbildung unten einstellen. Es ist nicht schwer, auch ich habe es getan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/o3/eu/68/o3eu68jhpsacuwweo5rmddzkfag.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer wichtiger Punkt an den Controller-Ausg√§ngen ist die Versorgungsspannung. Wenn Sie also eine externe Stromquelle anstelle von USB anschlie√üen, stellen Sie sicher, dass die Ausgangsspannung die zul√§ssige Spannung f√ºr Sensoren und UART nicht √ºberschreitet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
F√ºr diesen Artikel h√§tte uns ein Jumper gereicht, aber wenn wir einen L√∂tkolben h√§tten, warum sollten wir dann Zeit mit Kleinigkeiten verschwenden?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Achten Sie auf den Klemmenblock. Der native Kabelbaum ist bei dieser Version des Controllers Standard. Er ist robust und wahrscheinlich praktisch, wenn er im Auto verwendet wird, jedoch nicht f√ºr Experimente am Tisch. Ich habe mir das Know-how ausgedacht, das native Geschirr durch Gurte ersetzt, die oft mit Computerausr√ºstung geb√ºndelt sind, oder in Gesch√§ften verkauft, in denen DIY-Elektronik verkauft wird, und es hat sich als sehr praktisch herausgestellt. Sie sitzen nicht schlecht im Block, sind weich und verl√§ngern sich zus√§tzlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir mit dem Verbindungsdiagramm fort:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/l-/w6/d_/l-w6d_fdkhl4hw2gqeuudmippqq.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alles ist ganz einfach und erfordert keine besonderen F√§higkeiten, ich denke, fast jeder kann damit umgehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie uns zun√§chst die Macht des Boards behandeln. Wir werden den "Boden" vom "-" Ausgang des Controllers nehmen, aber mit dem Plus ist nicht alles so klar. Auf den ersten Blick erscheint es logisch, eine Verbindung zum ‚Äû+‚Äú - Terminal herzustellen, in der Praxis handelt es sich jedoch anscheinend um ein Terminal f√ºr + 5V INPUT. Stattdessen konfigurieren wir stattdessen einen der Ausg√§nge als + 5V-Ausgang, versorgen ihn mit einer logischen Einheit und ziehen ihn auf das ‚ÄûPlus‚Äú. Ich habe mich f√ºr Ausgang 3 entschieden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Drucksensor ist sehr einfach angeschlossen. In der Tat ist dies ein Widerstand. Wir versorgen eines seiner ‚ÄûBeine‚Äú mit Strom und wickeln von den zweiten ‚ÄûBeinen‚Äú den Draht zum an den ADC angeschlossenen Controller-Eingang (entweder Nr. 5 oder Nr. 6). Ich habe Nr. 6 gew√§hlt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe den Drucksensor √ºbrigens zweimal verloren. Mein zweiter Fehler war das Anschlie√üen des Sensors. Es passt nicht in das Steckbrett, es stellt sich heraus, dass es an einen Schraubklemmenblock oder √§hnliches angeschlossen werden muss. Ich musste mit den "Krokodilen" raus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Bewegungssensor ist nicht viel komplizierter angeschlossen. Wir stecken +5 V von der Platine in die Vin-Buchse, verbinden ihn mit der GND-Buchse auf dem Steckbrett und verbinden die OUT-Buchse mit einem beliebigen Digitaleingang des Controllers. Ich habe ihn an Ausgang Nr. 5 angeschlossen (wir wir werden es nicht in den ADC-Modus schalten). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt, den Controller √ºber UART mit der "Raspberry" zu verbinden. Dazu muss der Controller-Ausgang Nr. 2, der in unserem UART-Modus zum TX-Ausgang wird, mit dem Raspberry GPIO RX-Eingang verbunden werden, und die Erdung auf der Platine und der Raspberry PI GPIO GND m√ºssen ebenfalls angeschlossen werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Viele Leute raten dazu, den Spannungspegel auf 3,3 V zu koordinieren, und ich habe sogar versucht, Canny √ºber einen Spannungsteiler anzuschlie√üen, aber es funktioniert schlechter als ohne (oder funktioniert √ºberhaupt nicht), also habe ich in diesem Fall direkt an den Raspberry UART angeschlossen. </font><font style="vertical-align: inherit;">Es scheint, dass nichts ausgebrannt ist. </font><font style="vertical-align: inherit;">Alles arbeitet.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tn/9g/jd/tn9gjdkty542gzjkh5gjvg1l8_8.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vielleicht hatten Sie den Gedanken: "Warum ist es mit Kabeln zum UART verbunden, wenn m√∂glich √ºber Bluetooth?" </font><font style="vertical-align: inherit;">In der Tat gibt es viele Beispiele f√ºr die Verbindung von Arduino √ºber UART mit dem HC-06-Modul im Netzwerk. </font><font style="vertical-align: inherit;">Wenn Sie dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> glauben </font><font style="vertical-align: inherit;">, stellt Canny auch problemlos eine Verbindung her. </font><font style="vertical-align: inherit;">Aber ich habe es nicht selbst versucht. </font><font style="vertical-align: inherit;">Ich wollte eine Verbindung √ºber Kabel herstellen und habe beschlossen, die Bluetooth-Verbindung auf das n√§chste Mal zu verschieben. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht die Schaltung aus:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ao/rn/tg/aorntgjqegbbdoydxfiwo1scijg.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fahren wir mit dem Programm f√ºr die Steuerung fort (Diagramm):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9g/fu/yt/9gfuytcpdiwhzqza7wpjbh_eyyo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Parametereinstellung"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> schalten wir den ADC-Modus f√ºr Kanal (Eingang) Nr. 6 ein, √ºbertragen Kanal Nr. 3 in den diskreten Ausgangsmodus und speisen eine logische Einheit ein (in unserem Fall + 5V). </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wurde fast alles analysiert </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nur UART-Einstellungen sind uns unbekannt. </font><font style="vertical-align: inherit;">Zum Gl√ºck ist alles einfach. </font><font style="vertical-align: inherit;">Canny 3 tiny hat nur 1 UART-Schnittstelle (zum Beispiel hat Canny 7 zwei davon). </font><font style="vertical-align: inherit;">Wenn der UART-Modus aktiviert ist, wird Ausgang Nr. 1 zu RX, Ausgang Nr. 2 TX. </font><font style="vertical-align: inherit;">Wir werden die √ºbliche Baudrate von 9600 w√§hlen, aber der Daten√ºbertragungsmodus ist begrenzt. </font><font style="vertical-align: inherit;">Die verf√ºgbare Anzahl von Datenbits betr√§gt nur 8 Bytes und 1 Stoppbit (f√ºr "√§ltere" Controller-Modelle gibt es mehr Auswahlm√∂glichkeiten). Um UART zu aktivieren, muss </font><b><font style="vertical-align: inherit;">das UART1-Konfigurationsregister</font></b><font style="vertical-align: inherit;"> in das entsprechende Register eingetragen werden</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schreiben Sie eine vordefinierte Konstante:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/qg/18/ccqg18wcifd7jnqqr6rqsgijl28.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem Fall war es sogar m√∂glich, eine Konstante zu w√§hlen, die nur den UART-√úbertragungsmodus enthielt, da wir nicht vorhaben, etwas zur√ºckzunehmen. Aber ich habe beschlossen, ein allgemeineres Beispiel zu zeigen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie beim Erstellen des Diagramms den richtigen Controller ausgew√§hlt haben, k√∂nnen Sie in CannyLab nicht die Konstante ausw√§hlen, die nicht zu ihm passt. Daher funktioniert die Auswahl eines wissentlich gef√§hrlichen Modus nicht. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Wahrheit ist immer die M√∂glichkeit, eine Konstante manuell einzugeben, aber es ist besser, dies nicht zu tun.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir werden 10 Zeichen in der Nachricht senden (einschlie√ülich 2 Probleme), also werden wir eine Konstante von 10 in das Nachrichtenregister schreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich bin mir nicht sicher, ob 1 TX auf eins angehoben wird, aber nur f√ºr den Fall, dass ich dieses Element aktiviert habe, wie ich es verstehe, brauche ich es Nicht mit einem Widerstand festziehen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Block</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Periodisches Senden √ºber UART und VCP"</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir verwenden den PWM-Generator, um 1 Mal in 2 Sekunden zu senden, damit der Controller den Kanal keine Sekunde lang verstopft, indem er st√§ndig eine Nachricht sendet. Wir verwenden den "Trailing Edge Detector". Dies funktioniert nur einmal im Moment des Umschaltens von eins auf null. Wenn die Steuerung zu diesem Zeitpunkt bereit ist, eine Nachricht √ºber UART zu senden, kommen zwei Einheiten an den Eingang des logischen Multiplikationsblocks, ebenfalls "1", und weisen die Steuerung an, eine Nachricht √ºber UART zu senden und auch nur f√ºr den Fall, dass ein USB-COM-Anschluss debuggt wird (dar√ºber habe ich </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in einem fr√ºheren Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ausf√ºhrlich geschrieben </font><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Anzeige"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alles ist ganz einfach. Wenn die Werte des Drucksensors unter einem bestimmten Schwellenwert liegen und der Bewegungssensor ausgel√∂st hat (er gibt dem Ausgang ‚Äû1‚Äú), schalten wir die gr√ºne LED der Steuerung als Alarmsignal ein. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es w√§re cool, wenn das System wie in einem Film funktionieren w√ºrde: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zv/uz/vn/zvuzvnxgsn-kbzb2vvbtjh8gxeu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber wir beschr√§nken uns nur darauf, die LED einzuschalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine visuelle Demonstration:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/2w/wa/nf/2wwanfi6z0fgo9pie5ay7kdo2_w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist noch der letzte Block </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄûNachrichtenbildung‚Äú</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √ºbrig </font><b><font style="vertical-align: inherit;">.</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wir empfangen Daten vom ADC, die ADC-Aufl√∂sung liegt zwischen 0 und 1023. Wir senden Zeichen an UART, was bedeutet, dass die Messwerte vom Drucksensor in eine Zeichenfolge umgewandelt werden m√ºssen. Da die maximale Anzahl 1023 (4 Stellen) betr√§gt, ben√∂tigen wir 4 Bytes. "Number to String Converter" gibt ein paar Zeichen an den Ausg√§ngen aus. Wir haben 2 Zeichenpaare, von denen jedes UART- und VCP-Nachrichten an die Installationsregister sendet. Als n√§chstes m√ºssen wir ein Trennzeichen schreiben, damit die Messwerte nicht zusammengef√ºhrt werden, da CannyLab einige Zeichen verwendet. Dann nehmen wir zwei Leerzeichen als Trennzeichen. In √§hnlicher Weise konvertieren wir die Messwerte des Bewegungssensors. Er ergibt entweder 00 oder 01, was bedeutet, dass wir nur ein Zeichenpaar ben√∂tigen. Schreiben Sie ganz am Ende der Nachricht die Zeilenumbruch- und Zeilenumbruchzeichen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie ich bereits in dem Artikel √ºber den Fotowiderstand geschrieben habe, verf√ºgt Canny nicht √ºber einen eigenen COM-Port-Monitor, aber Sie k√∂nnen jeden von Drittanbietern verwenden. Da wir die Arduino-IDE etwas sp√§ter verwenden, verwenden wir den integrierten COM-Port-Monitor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also lege ich einen Finger auf den Drucksensor und bewege mich auf dem Weg:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/te/h7/yw/teh7yw7biknpy6-wwyxp9adtjui.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Diagramm kann wie der gesamte folgende Code von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> heruntergeladen werden </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun gehen wir weiter zum Arduino.</font></font><br>
<br>
<a name="III"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil III: Schaltplan und Programm f√ºr Arduino Uno </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde nicht so ausf√ºhrlich √ºber Arduino sprechen, weil alles ziemlich trivial ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schaltplan:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fs/db/7c/fsdb7cfmep12vakizj2mibjylaw.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beachten Sie! Da der Arduino RX / TX-Ausgang mit 5 V und der Raspberry PI mit 3,3 V betrieben wird, wird empfohlen, den Arduino mit speziellen Modulen oder zumindest mit einem Spannungsteiler an den Raspberry UART anzuschlie√üen. Ich habe kein spezielles Modul, aber der Spannungsteiler ist immer willkommen. Ich habe 3 Widerst√§nde mit einem Nennwert von 1000 Ohm genommen. Und er tippte nach dem zweiten Widerstand, auf den 2/3 der Spannung abfallen wird. Wenn Sie die Stromversorgung √ºber USB auf 5 V abrunden, stellt sich heraus, dass dies nur der Fall ist </font></font><code> 5*0.66=3.3 </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl ich Arduino auch direkt mit dem UART Raspberry PI verbunden habe und alles zu funktionieren schien. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir verbinden den Drucksensor mit ‚Äû+‚Äú und mit dem Analogeingang ‚ÄûA1‚Äú. Der Bewegungssensor f√ºr Stromversorgung und Digitaleingang Nr. 5. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So sieht die Schaltung im zusammengebauten Zustand aus:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/dh/0b/u4/dh0bu4cuhrr2kiw6svtg58dzqr8.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der Skizzencode f√ºr Ardino: </font><font style="vertical-align: inherit;">
Der Code ist einfach, das einzige, was es wert ist, erkl√§rt zu werden, ist die Variable ‚ÄûAnpassung‚Äú. </font><font style="vertical-align: inherit;">Tatsache ist, dass der Drucksensor bei Anschluss an den Arduino manchmal auch ohne Last Werte ungleich Null zeigte, und ich dachte an nichts Besseres, als den Durchschnittswert von ‚ÄûRauschen‚Äú zu subtrahieren, um die Messwerte mit Canny zu vereinheitlichen. </font><font style="vertical-align: inherit;">
Ebenso wie im vorherigen Fall haben wir das Display mit einer eingebauten LED implementiert, falls die Sensoren funktionierten:</font></font><br>
<br>
<code>byte photoPin = A0;<br>
<br>
void setup() {<br>
 Serial.begin(9600);<br>
 pinMode(photoPin, INPUT);<br>
 pinMode(5, INPUT); <br>
 pinMode(13, OUTPUT);<br>
}<br>
<br>
void loop() {<br>
 int adjustment = 250;<br>
 int pressure_sensor = analogRead(A1) - adjustment;<br>
 int motion_sensor = digitalRead(5);<br>
<br>
Serial.print(pressure_sensor);<br>
 Serial.print(" ");<br>
 Serial.println(motion_sensor);<br>
 if ((pressure_sensor&lt;380) &amp;&amp; (motion_sensor==1))<br>
 {<br>
 digitalWrite(LED_BUILTIN, HIGH); <br>
 }<br>
 else {<br>
 digitalWrite(LED_BUILTIN, LOW); <br>
 }<br>
 delay(1000);<br>
}<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/gw/sa/ld/gwsalds7c3tdqys4dqiywwal-os.png"></div><br>
<br>
<a name="IV"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Teil IV: Raspberry PI und das √úberwachungsprogramm in Python</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst m√ºssen Sie UART sowie SSH und VNC aktivieren und dann √ºber ein Smartphone eine Verbindung zu Raspberry herstellen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gehen Sie zu den Raspberry PI-Einstellungen und aktivieren Sie SSH, VNC, UART wie im Bild:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qh/gj/xq/qhgjxq2lh6ovw0uvszrpiwdrqpe.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nur f√ºr den Fall, ich habe Bluetooth ausgeschaltet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir werden ein einfaches Python-Programm schreiben. Ich habe die integrierte IDE verwendet und keine zus√§tzlichen Python-Module installiert. </font><font style="vertical-align: inherit;">Ich hatte einen Raspbian mit mittelgro√üem Desktop-Image, der ungef√§hr 1,1 GB ben√∂tigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In unserem √úberwachungsprogramm verwenden wir sowohl die Konsole als auch die grafische Oberfl√§che, um Informationen anzuzeigen. </font><font style="vertical-align: inherit;">Um die GUI zu implementieren, habe ich mich f√ºr Tkinter entschieden. </font><font style="vertical-align: inherit;">Ich benutze es wirklich zum zweiten Mal in meinem Leben, aber ich brauchte nur ein paar Textfelder und ein Dialogfeld. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist der Programmcode:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">import</span> serial
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> ttk
<span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox<font></font>
<font></font>
serialport = serial.Serial(<span class="hljs-string">"/dev/ttyS0"</span>, baudrate=<span class="hljs-number">9600</span>, timeout=<span class="hljs-number">1.0</span>) <font></font>
<font></font>
window = Tk()  <font></font>
window.title(<span class="hljs-string">"Security system for my pen"</span>)  <font></font>
window.geometry(<span class="hljs-string">'400x170'</span>)
<span class="hljs-comment">#Presure sensor label</span>
lbl_ps = ttk.Label(window, text=<span class="hljs-string">"Pressure sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)<font></font>
lbl_ps_status = ttk.Label(window, text=<span class="hljs-string">" "</span>,  font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)
<span class="hljs-comment">#Motion sensor label</span>
lbl_ms = ttk.Label(window, text=<span class="hljs-string">"Motion sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)<font></font>
lbl_ms_status = ttk.Label(window, text=<span class="hljs-string">" "</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)<font></font>
<font></font>
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
   counter = <span class="hljs-number">0</span>
   rcv = serialport.readline().decode(<span class="hljs-string">'utf-8'</span>).replace(<span class="hljs-string">"\r\n"</span>,<span class="hljs-string">""</span>).split(<span class="hljs-string">'  '</span>)
   <span class="hljs-keyword">if</span> (len(rcv)==<span class="hljs-number">2</span>):<font></font>
       ps=rcv[<span class="hljs-number">0</span>]<font></font>
       ms=rcv[<span class="hljs-number">1</span>]
       <span class="hljs-keyword">print</span> (ps+ <span class="hljs-string">" "</span> +ms)
       <span class="hljs-keyword">if</span> (int(ps)&lt;<span class="hljs-number">380</span>):<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Warning!"</span>)<font></font>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Ok"</span>)<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (int(ms)&gt;<span class="hljs-number">0</span>):<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Warning!"</span>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Ok"</span>  <font></font>
       window.update_idletasks()  <font></font>
       window.update()<font></font>
       <span class="hljs-keyword">if</span> (counter == <span class="hljs-number">2</span>):<font></font>
            messagebox.showinfo(<span class="hljs-string">"Alarm!"</span>, <span class="hljs-string">"heck your pen!"</span>)     <font></font>
       time.sleep(<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde wahrscheinlich den Import von Bibliotheken √ºberspringen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Import legen wir die Einstellungen f√ºr UART, den Port selbst, die Geschwindigkeit und das Timeout fest.</font></font><br>
<br>
<pre><code class="python hljs">serialport = serial.Serial(<span class="hljs-string">"/dev/ttyS0"</span>, baudrate=<span class="hljs-number">9600</span>, timeout=<span class="hljs-number">1.0</span>) 
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes platzieren wir Textfelder (Beschriftung) im Tabellenlayout (im Raster). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben 4 Felder, von denen 2 unver√§ndert sind, und der Status des Sensors wird in den anderen beiden angezeigt.</font></font><br>
<br>
<pre><code class="python hljs">window.title(<span class="hljs-string">"Security system for my pen"</span>)  <font></font>
window.geometry(<span class="hljs-string">'400x170'</span>)
<span class="hljs-comment">#Presure sensor label</span>
lbl_ps = ttk.Label(window, text=<span class="hljs-string">"Pressure sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">0</span>)<font></font>
lbl_ps_status = ttk.Label(window, text=<span class="hljs-string">" "</span>,  font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ps_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">0</span>)
<span class="hljs-comment">#Motion sensor label</span>
lbl_ms = ttk.Label(window, text=<span class="hljs-string">"Motion sensor"</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms.grid(column=<span class="hljs-number">0</span>, row=<span class="hljs-number">1</span>)<font></font>
lbl_ms_status = ttk.Label(window, text=<span class="hljs-string">" "</span>, font=(<span class="hljs-string">"Arial Bold"</span>, <span class="hljs-number">20</span>))<font></font>
lbl_ms_status.grid(column=<span class="hljs-number">1</span>, row=<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie als N√§chstes eine Endlosschleife. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu Beginn des Zyklus setzen wir das Alarmetikett zur√ºck </font></font><code> counter </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lesen Sie dann die Daten von der seriellen Schnittstelle. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um nicht alle Eintr√§ge wie "\ x00" anzuzeigen, codieren wir die Nachricht in UTF-8 neu. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann entfernen wir den Anfang und das Ende der Zeile, so dass nur noch Zahlen √ºbrig bleiben. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes teilen wir die Zeile, achten auf die Leerzeichen 2, nicht auf 1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit das Programm nicht abst√ºrzt, wenn die Nachricht falsch ist, wird der weitere Code, der an den Empfang der Nachricht gebunden ist, in eine bedingte Struktur gepackt, die nur funktioniert, wenn die Nachricht in zwei Teile geteilt werden kann. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zeigen Sie den Drucksensor und den Bewegungssensor in der Konsole an.</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
   counter = <span class="hljs-number">0</span>
   rcv = serialport.readline().decode(<span class="hljs-string">'utf-8'</span>).replace(<span class="hljs-string">"\r\n"</span>,<span class="hljs-string">""</span>).split(<span class="hljs-string">'  '</span>)
   <span class="hljs-keyword">if</span> (len(rcv)==<span class="hljs-number">2</span>):<font></font>
       ps=rcv[<span class="hljs-number">0</span>]<font></font>
       ms=rcv[<span class="hljs-number">1</span>]
       <span class="hljs-keyword">print</span> (ps+ <span class="hljs-string">" "</span> +ms)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir √ºberpr√ºfen, ob die Sensoren funktionieren. Wenn alles in Ordnung ist, schreibt das System ‚ÄûOK‚Äú. Wenn einer der Sensoren funktioniert, erh√∂ht sich der Z√§hler um 1 und es wird eine Warnung ausgegeben.</font></font><br>
<br>
<pre><code class="python hljs">
       <span class="hljs-keyword">if</span> (int(ps)&lt;<span class="hljs-number">380</span>):<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Warning!"</span>)<font></font>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ps_status.config(text = <span class="hljs-string">" Ok"</span>)<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (int(ms)&gt;<span class="hljs-number">0</span>):<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Warning!"</span>
           counter += <span class="hljs-number">1</span>
       <span class="hljs-keyword">else</span>:<font></font>
           lbl_ms_status[<span class="hljs-string">'text'</span>]=<span class="hljs-string">" Ok"</span>  
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im letzten Block aktualisieren wir die Elemente des Tkinter-Formulars. Anschlie√üend √ºberpr√ºfen wir, wie viele Sensoren funktionierten. </font><font style="vertical-align: inherit;">Wenn beide Sensoren im Zyklus gearbeitet haben, erscheint ein modales Fenster mit einer Alarmmeldung.</font></font><br>
<br>
<pre><code class="python hljs"><font></font>
       window.update_idletasks()  <font></font>
       window.update()<font></font>
       <span class="hljs-keyword">if</span> (counter == <span class="hljs-number">2</span>):<font></font>
            messagebox.showinfo(<span class="hljs-string">"Alarm!"</span>, <span class="hljs-string">"heck your pen!"</span>)     <font></font>
       time.sleep(<span class="hljs-number">1</span>)
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hierbei ist zu beachten, dass der Bewegungssensor ab dem Moment der Bewegungserkennung zwei Sekunden lang den Ausgang ‚Äû1‚Äú h√§lt. </font><font style="vertical-align: inherit;">In der Regel funktioniert das System also. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unten finden Sie Screenshots, die den Betrieb des Programms zeigen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Sensoren sind ruhig:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ag/k4/5g/agk45gfxxjwlw0mnho5ev1azihs.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eines von zwei Dingen hat funktioniert:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/wv/pl/ccwvplgtz7cehxt6j49n4eilcr0.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beide funktionierten, das System wartet darauf, dass der Bediener best√§tigt:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/mb/ex/zombexigilxlkmribvot0spkq-g.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass alles wie geplant war.</font></font><br>
<br>
<a name="V"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fazit </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abschlie√üend sollten Sie von einem Smartphone aus eine Verbindung zu einem Raspberry PI herstellen. Im Prinzip gibt es nichts Kompliziertes. Wenn Sie eine Verbindung von einem Computer aus herstellen k√∂nnen, k√∂nnen Sie dies von einem Telefon aus tun. Alles, was Sie wissen m√ºssen, ist die Himbeer-IP, der Benutzername und das Passwort. Ich habe VNC Viewer auf meinem Android-Smartphone installiert, aber Sie k√∂nnen sicherlich einen anderen Client haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist nicht sehr bequem zu bedienen, aber es funktioniert:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/cr/wb/st/crwbstmutqolgb1vhz6iwdr0pz4.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich m√∂chte Sie noch einmal daran erinnern, dass der gesamte Code von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> heruntergeladen werden kann </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jedes Mal verspreche ich mir, dass ich keinen langen Artikel schreiben werde, aber auch hier hat der Entwurf 10 gedruckte Seiten √ºberschritten. </font><font style="vertical-align: inherit;">Der Artikel zeigt ein einfach zu implementierendes Beispiel f√ºr ein hausgemachtes Sicherheitssystem. Der Spielraum f√ºr Vorstellungskraft ist riesig. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ich verstehe, dass der Artikel f√ºr Sie interessant war, werde ich sp√§ter einen weiteren Artikel √ºber die Verbindung √ºber einen Bluetooth-Adapter skizzieren. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass ich eine kleine Artikelserie habe, daher werde ich der Einfachheit halber Links zu anderen verwandten Artikeln hinterlassen:</font></font></i><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Eins, zwei, drei - verbrenne den Weihnachtsbaum!" </font><font style="vertical-align: inherit;">oder mein erster Blick auf den winzigen Controller CANNY 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ziel hat viele Erscheinungsformen ..." oder wir automatisieren die Steuerung einer Autolampe mit CANNY 3 tiny und einem Fotowiderstand</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Welche Yachth√§fen?" </font><font style="vertical-align: inherit;">oder wir steuern den Controller √ºber Bluetooth mit einer mobilen Anwendung auf Xamarin (Android)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
</li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de497314/index.html">Wie tief der Challenger Abyss ist: Tiefe messen</a></li>
<li><a href="../de497316/index.html">Eigener Server oder √∂ffentliche Cloud?</a></li>
<li><a href="../de497318/index.html">Netzwerksimulator-Tutorial ns-3. Kapitel 3</a></li>
<li><a href="../de497320/index.html">Wichtige Trends beim Testen von Software von SmartBear: Testtypen und Trends</a></li>
<li><a href="../de497322/index.html">Objektives Testen des Qualit√§tsfaktors mit Customer Journey Map</a></li>
<li><a href="../de497326/index.html">Sicherere SSH-Konnektivit√§t mit DNSSEC</a></li>
<li><a href="../de497328/index.html">Einfache M√∂glichkeit, eine Sprache zu lernen (beliebig)</a></li>
<li><a href="../de497330/index.html">Chrome Remote Desktop. Ferngesteuerte Hilfe</a></li>
<li><a href="../de497332/index.html">Houston, wir haben ein Problem. Systemdesignfehler</a></li>
<li><a href="../de497334/index.html">Die ber√ºchtigten Fehler und wie man sie am Beispiel von ClickHouse vermeidet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>