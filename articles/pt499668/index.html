<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‡ ğŸ² ğŸ“¶ DependÃªncias do JavaScript do caminho para o inferno ğŸ›µ ğŸš ğŸ¯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cada projeto JavaScript comeÃ§a com boas intenÃ§Ãµes, a saber, que seus criadores prometem a si mesmos nÃ£o usar muitos pacotes NPM durante seu desenvolvi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>DependÃªncias do JavaScript do caminho para o inferno</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499668/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada projeto JavaScript comeÃ§a com boas intenÃ§Ãµes, a saber, que seus criadores prometem a si mesmos nÃ£o usar muitos pacotes NPM durante seu desenvolvimento. Mas, mesmo que os desenvolvedores faÃ§am esforÃ§os considerÃ¡veis â€‹â€‹para manter essa promessa, os pacotes NPM penetram gradualmente em seus projetos. O tamanho do arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aumenta com o tempo. E desde a </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalaÃ§Ã£o das dependÃªncias, ocorre um verdadeiro horror, expresso em adiÃ§Ãµes e exclusÃµes de pacotes, especialmente perceptÃ­veis no prÃ³ximo PR ... </font><font style="vertical-align: inherit;">
"EstÃ¡ tudo bem", diz o lÃ­der da equipe. O resto da equipe concorda com a cabeÃ§a. O que mais fazer? Todos gostamos do fato de que o ecossistema JavaScript estÃ¡ vivo e bem. NÃ£o precisamos reinventar a roda todas as vezes e tentar resolver os problemas que jÃ¡ foram resolvidos pela comunidade de cÃ³digo aberto.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/be/cf/ky/becfkyhkcfavrlygimyyrliz9t4.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que vocÃª crie um blog e deseje usar o Gatsby.js. </font><font style="vertical-align: inherit;">Tente adicionar este gerador de sites com base no seu projeto. </font><font style="vertical-align: inherit;">Agora parabÃ©ns. </font><font style="vertical-align: inherit;">Seu projeto tinha apenas 19.000 dependÃªncias adicionais. </font><font style="vertical-align: inherit;">Isto Ã© normal? </font><font style="vertical-align: inherit;">QuÃ£o complexa pode uma Ã¡rvore de dependÃªncia de JavaScript se tornar? </font><font style="vertical-align: inherit;">Como uma Ã¡rvore de dependÃªncia se transforma em inferno? </font><font style="vertical-align: inherit;">Vamos descobrir.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que Ã© um pacote JavaScript?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O NPM (Node Package Manager, Node Package Manager) armazena o maior registro de pacotes do mundo. </font><font style="vertical-align: inherit;">Estes sÃ£o pacotes JavaScript. </font><font style="vertical-align: inherit;">O NPM Ã© mais do que RubyGems, PyPi e Maven combinados. </font><font style="vertical-align: inherit;">Essa conclusÃ£o pode ser feita com base na anÃ¡lise dos dados do projeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module Counts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que monitora o nÃºmero de pacotes nos registros populares.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/d83/158/259d831584b0a9a5d1fd6226e3f799b0.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dados sobre o nÃºmero de pacotes em registros populares</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
VocÃª pode pensar que quantidades muito grandes de cÃ³digo estÃ£o representadas neste grÃ¡fico. </font><font style="vertical-align: inherit;">Do jeito que Ã©. </font><font style="vertical-align: inherit;">Para transformar um projeto em um pacote NPM, este pacote deve ter um arquivo</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esse pacote pode ser enviado ao registro do NPM.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que Ã© o package.json?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui estÃ£o as tarefas que ele resolve </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele lista os pacotes dos quais seu projeto depende (esta Ã© uma lista de dependÃªncias do projeto).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nele, usando as regras do controle de versÃ£o semÃ¢ntico, sÃ£o definidas as versÃµes dos pacotes de dependÃªncia que seu projeto pode usar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permite reproduzir o ambiente necessÃ¡rio para o pacote funcionar e, como resultado, simplifica a transferÃªncia do projeto para outros desenvolvedores.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pode ser pensado como um arquivo </font></font><code>README</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bombeado com esterÃ³ides. </font><font style="vertical-align: inherit;">Aqui vocÃª pode descrever as dependÃªncias do seu pacote, aqui vocÃª pode escrever scripts que sÃ£o executados durante a montagem e teste do projeto. </font><font style="vertical-align: inherit;">O mesmo arquivo contÃ©m informaÃ§Ãµes sobre a versÃ£o do projeto especificada pelo desenvolvedor e uma descriÃ§Ã£o do projeto. </font><font style="vertical-align: inherit;">Estamos particularmente interessados â€‹â€‹na possibilidade </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de especificar dependÃªncias do projeto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez o fato de as dependÃªncias do projeto estarem indicadas neste arquivo pareÃ§a um tanto alarmante. </font><font style="vertical-align: inherit;">Imagine que existe um pacote que depende de outro pacote e esse outro pacote depende de outro pacote. </font><font style="vertical-align: inherit;">Essa cadeia de dependÃªncias pode ser arbitrariamente longa. </font><font style="vertical-align: inherit;">Por esse motivo, instalar o Ãºnico pacote, Gatsby.js, significa equipar o projeto com 19.000 dependÃªncias adicionais.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de dependÃªncia em package.json</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para entender melhor como as listas de dependÃªncias do projeto crescem com o tempo, vamos falar sobre os diferentes tipos de dependÃªncias que um projeto pode ter. </font><font style="vertical-align: inherit;">Nomeadamente, </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podem ser encontradas </font><font style="vertical-align: inherit;">as </font><font style="vertical-align: inherit;">seguintes seÃ§Ãµes que descrevem vÃ¡rias dependÃªncias:</font></font><br>
<br>
<ul>
<li><code>dependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - sÃ£o dependÃªncias comuns, cuja funcionalidade Ã© usada no projeto e que Ã© acessada a partir de seu cÃ³digo.</font></font></li>
<li><code>devDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- estas sÃ£o dependÃªncias de desenvolvimento. </font><font style="vertical-align: inherit;">Por exemplo, a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais bonita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usada para formatar o cÃ³digo.</font></font></li>
<li><code>peerDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - se as dependÃªncias forem gravadas nesta seÃ§Ã£o, o desenvolvedor do pacote informarÃ¡ quem irÃ¡ instalÃ¡-lo que precisarÃ¡ de uma versÃ£o especÃ­fica do pacote especificado nesta seÃ§Ã£o.</font></font></li>
<li><code>optionalDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eles listam dependÃªncias opcionais, como a incapacidade de instalar, que nÃ£o violarÃ¡ o processo de instalaÃ§Ã£o do pacote.</font></font></li>
<li><code>bundledDependencies</code> â€”    ,    .     ,    NPM,    ,             .</li>
</ul><br>
<h2><font color="#3AC1EF">   package-lock.json</font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos sabemos que o arquivo </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no decorrer do trabalho no projeto, passa constantemente por mudanÃ§as. Algo Ã© removido, algo Ã© adicionado a ele. Isso Ã© especialmente perceptÃ­vel ao exibir o PR que contÃ©m uma versÃ£o atualizada desse arquivo. Muitas vezes tomamos isso como garantido. Um arquivo Ã© </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerado automaticamente sempre que um arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou pasta Ã© </font><font style="vertical-align: inherit;">alterado </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Isso permite manter o conteÃºdo da Ã¡rvore de dependÃªncias exatamente como era quando vocÃª instalou as dependÃªncias do projeto. Isso permite, ao instalar o projeto, reproduzir a Ã¡rvore de dependÃªncia. Isso resolve o problema de ter diferentes versÃµes do mesmo pacote de diferentes desenvolvedores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere um projeto cujas dependÃªncias incluem React. A entrada correspondente estÃ¡ disponÃ­vel em </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Se vocÃª olhar para o arquivo</font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deste projeto, vocÃª poderÃ¡ ver algo como o seguinte:</font></font><br>
<br>
<pre><code class="javascript hljs">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"react"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"version"</span>: <span class="hljs-string">"16.13.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"resolved"</span>: <span class="hljs-string">"https://registry.npmjs.org/react/-/react-16.13.0.tgz"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"integrity"</span>: <span class="hljs-string">"sha512-TSavZz2iSLkq5/oiE7gnFzmURKZMltmi193rm5HEoUDAXpzT9Kzw6oNZnGoai/4+fUnm7FqS5dwgUL34TujcWQ=="</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"requires"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"loose-envify"</span>: <span class="hljs-string">"^1.1.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"object-assign"</span>: <span class="hljs-string">"^4.1.1"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"prop-types"</span>: <span class="hljs-string">"^15.6.2"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um arquivo </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã© uma grande lista de dependÃªncias do projeto. </font><font style="vertical-align: inherit;">Aqui estÃ£o as versÃµes de dependÃªncia, caminhos (URIs) para os mÃ³dulos, hashes usados â€‹â€‹para verificar a integridade do mÃ³dulo e os pacotes necessÃ¡rios para este mÃ³dulo. </font><font style="vertical-align: inherit;">Se vocÃª ler este arquivo, poderÃ¡ encontrar registros de todos os pacotes que o React precisa. </font><font style="vertical-align: inherit;">Ã‰ aqui que estÃ¡ o verdadeiro inferno das dependÃªncias. </font><font style="vertical-align: inherit;">Tudo o que o projeto precisa estÃ¡ descrito aqui.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compreendendo as dependÃªncias do Gatsby.js</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como Ã© que, tendo estabelecido apenas uma dependÃªncia, adicionamos atÃ© 19.000 dependÃªncias ao projeto? </font><font style="vertical-align: inherit;">Ã‰ tudo sobre dependÃªncias de dependÃªncia. </font><font style="vertical-align: inherit;">Ã‰ por isso que temos o que temos:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm install --save gatsby<font></font>
<font></font>
...<font></font>
<font></font>
+ gatsby@2.19.28<font></font>
added 1 package from 1 contributor, removed 9 packages, updated 10 packages and audited 19001 packages <span class="hljs-keyword">in</span> 40.382s
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se vocÃª procurar </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, poderÃ¡ encontrar apenas uma dependÃªncia. Mas se vocÃª observar </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, acontece que diante de nÃ³s hÃ¡ um monstro de quase 14 kilobytes. Uma resposta mais detalhada sobre o significado de todas essas linhas de cÃ³digo que </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podem ser encontradas no arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositÃ³rio Gatsby.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Existem muitas dependÃªncias diretas, ou seja, de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acordo com os cÃ¡lculos da NPM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , 132. Se cada uma dessas dependÃªncias tiver pelo menos mais uma dependÃªncia, o nÃºmero total de dependÃªncias do projeto duplicarÃ¡ - e haverÃ¡ 264 dependÃªncias. Claro que, no mundo real, nÃ£o Ã© assim. Cada dependÃªncia direta do projeto possui mais de uma dependÃªncia inerente. Como resultado, a lista de dependÃªncias do projeto Ã© muito longa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, teremos interesse em quantas vezes a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lodash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ã© usada como dependÃªncia para outros pacotes </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm ls lodash<font></font>
example-js-package@1.0.0<font></font>
â””â”€â”¬ gatsby@2.19.28<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ @babel/core@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â”œâ”€â”¬ @babel/generator@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ â”œâ”€â”¬ @babel/types@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ @babel/traverse@7.8.6<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ @typescript-eslint/parser@2.22.0<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”¬ @typescript-eslint/typescript-estree@2.22.0<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”œâ”€â”¬ babel-preset-gatsby@0.2.29<font></font>
&nbsp;&nbsp;â”‚ â””â”€â”¬ @babel/preset-env@7.8.6<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”œâ”€â”¬ @babel/plugin-transform-block-scoping@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”œâ”€â”¬ @babel/plugin-transform-classes@7.8.6<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ â””â”€â”¬ @babel/helper-define-map@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”œâ”€â”¬ @babel/plugin-transform-modules-amd@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ â””â”€â”¬ @babel/helper-module-transforms@7.8.6<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â”‚ &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;â”‚ &nbsp; â””â”€â”¬ @babel/plugin-transform-sticky-regex@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; &nbsp; â””â”€â”¬ @babel/helper-regex@7.8.3<font></font>
&nbsp;&nbsp;â”‚ &nbsp; &nbsp; &nbsp; â””â”€â”€ lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, a maioria dessas dependÃªncias Ã© representada pela mesma versÃ£o do lodash. </font><font style="vertical-align: inherit;">E com essa abordagem, </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haverÃ¡ apenas uma pasta da biblioteca lodash. </font><font style="vertical-align: inherit;">Ã‰ verdade que esse geralmente nÃ£o Ã© o caso. </font><font style="vertical-align: inherit;">Ã€s vezes, pacotes diferentes precisam de versÃµes diferentes do mesmo pacote. </font><font style="vertical-align: inherit;">Ã‰ por isso que muitas piadas apareceram sobre o tamanho enorme da pasta </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">No nosso caso, no entanto, nem tudo Ã© tÃ£o ruim:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh node_modules<font></font>
200M&nbsp; &nbsp; node_modules<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
200 megabytes nÃ£o Ã© tÃ£o ruim. </font><font style="vertical-align: inherit;">Vi como o tamanho desta pasta atinge facilmente 700 MB. </font><font style="vertical-align: inherit;">Se vocÃª estiver interessado em aprender quais mÃ³dulos ocupam mais espaÃ§o, execute o seguinte comando:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh ./node_modules/* | sort -nr | grep <span class="hljs-string">'\dM.*'</span><font></font>
&nbsp;17M&nbsp; &nbsp; ./node_modules/rxjs<font></font>
8.4M&nbsp; &nbsp; ./node_modules/@types<font></font>
7.4M&nbsp; &nbsp; ./node_modules/core-js<font></font>
6.8M&nbsp; &nbsp; ./node_modules/@babel<font></font>
5.4M&nbsp; &nbsp; ./node_modules/gatsby<font></font>
5.2M&nbsp; &nbsp; ./node_modules/eslint<font></font>
4.8M&nbsp; &nbsp; ./node_modules/lodash<font></font>
3.6M&nbsp; &nbsp; ./node_modules/graphql-compose<font></font>
3.6M&nbsp; &nbsp; ./node_modules/@typescript-eslint<font></font>
3.5M&nbsp; &nbsp; ./node_modules/webpack<font></font>
3.4M&nbsp; &nbsp; ./node_modules/moment<font></font>
3.3M&nbsp; &nbsp; ./node_modules/webpack-dev-server<font></font>
3.2M&nbsp; &nbsp; ./node_modules/caniuse-lite<font></font>
3.1M&nbsp; &nbsp; ./node_modules/graphql<font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rxjs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ã© um pacote insidioso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui estÃ¡ um comando simples que ajuda a reduzir o tamanho da pasta </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e simplificar sua estrutura:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm dedup<font></font>
moved 1 package and audited 18701 packages <span class="hljs-keyword">in</span> 4.622s<font></font>
<font></font>
51 packages are looking <span class="hljs-keyword">for</span> funding<font></font>
&nbsp;&nbsp;run `npm fund` <span class="hljs-keyword">for</span> details<font></font>
<font></font>
found 0 vulnerabilities<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desduplicaÃ§Ã£o, o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm tenta simplificar a estrutura da Ã¡rvore de dependÃªncias localizando as dependÃªncias usadas por outras dependÃªncias e movendo-as para que possam ser compartilhadas. Isso se aplica ao nosso exemplo de lodash. Muitos pacotes sÃ£o usados </font></font><code>lodash @4.17.15</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como resultado, para garantir sua operacionalidade, basta instalar esta versÃ£o da biblioteca apenas uma vez. Obviamente, essa Ã© a situaÃ§Ã£o em que entramos desde o inÃ­cio, apenas estabelecendo dependÃªncias. Se, no processo de trabalho em um projeto, </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adicionar novas dependÃªncias, Ã s vezes Ã© recomendÃ¡vel lembrar a equipe </font></font><code>npm dedup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Se vocÃª usar o gerenciador de pacotes do yarn, um comando semelhante serÃ¡ semelhante ao do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yarn dedupe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas, de fato, nÃ£o hÃ¡ necessidade, pois a otimizaÃ§Ã£o de dependÃªncia Ã© realizada automaticamente quando o comando Ã© executado </font></font><code>yarn install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VisualizaÃ§Ã£o de DependÃªncias</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interessado em uma representaÃ§Ã£o grÃ¡fica das dependÃªncias do seu projeto? </font><font style="vertical-align: inherit;">Nesse caso, vocÃª pode criar uma apresentaÃ§Ã£o usando ferramentas especiais. </font><font style="vertical-align: inherit;">Vamos considerar alguns deles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, Ã© apresentado um resultado de visualizaÃ§Ã£o de dependÃªncia obtido em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm.anvaka.com/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/f5d/373/dfbf5d37377bd62f4ea5cf422de62c74.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VisualizaÃ§Ã£o de dependÃªncia usando npm.anvaka.com</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aqui vocÃª pode ver as dependÃªncias das dependÃªncias do pacote de projeto Gatsby.js. O resultado Ã© semelhante a uma enorme web. O projeto Gatsby.js tem tantas dependÃªncias que essa "web" quase "travou" meu navegador.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Agora</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se estiver interessado, um link para este diagrama. Pode ser apresentado em forma 3D.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui estÃ¡ uma visualizaÃ§Ã£o feita usando o</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm.broofa.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/285/cd6/c52/285cd6c52a00d9e87a7bc2095df6023f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um fragmento de uma visualizaÃ§Ã£o de dependÃªncia feita usando o npm.broofa.com</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ã‰ semelhante a um fluxograma. </font><font style="vertical-align: inherit;">Ela, para o Gatsby.js, acaba sendo muito complicada. </font><font style="vertical-align: inherit;">VocÃª pode dar uma olhada</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Elementos do circuito podem ser coloridas com base em estimativas de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npms.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">VocÃª pode enviar seu prÃ³prio arquivo para o site</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A ferramenta</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Package Phobia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permite descobrir quanto espaÃ§o ele precisa antes de instalar um pacote.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25c/d26/ae4/25cd26ae4fc708f0c6900c5ad3a5dead.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InformaÃ§Ãµes sobre o pacote recebidas usando a fobia do pacote</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aqui vocÃª pode descobrir sobre o tamanho do pacote publicado e quanto espaÃ§o em disco serÃ¡ necessÃ¡rio apÃ³s a instalaÃ§Ã£o.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConclusÃ£o: com grande poder vem grande responsabilidade</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, quero dizer que JavaScript e NPM sÃ£o Ã³timas ferramentas. </font><font style="vertical-align: inherit;">O bom Ã© que os desenvolvedores modernos tÃªm a oportunidade de usar um conjunto enorme de dependÃªncias. </font><font style="vertical-align: inherit;">Executar o comando </font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para evitar que vocÃª escreva algumas linhas de cÃ³digo Ã© tÃ£o fÃ¡cil que Ã s vezes esquecemos as consequÃªncias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que vocÃª leu atÃ© esse ponto, deve ter um entendimento mais completo dos recursos da estrutura da Ã¡rvore de dependÃªncia do npm-project. </font><font style="vertical-align: inherit;">Se vocÃª adicionar uma biblioteca ao projeto que Ã© muito grande ou apenas explorar as dependÃªncias do seu projeto, sempre poderÃ¡ tirar proveito do que discutimos aqui e analisar as dependÃªncias. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Deseja usar o menor nÃºmero possÃ­vel de dependÃªncias em seus projetos npm?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt499656/index.html">SimulaÃ§Ã£o do controlador de temperatura PID</a></li>
<li><a href="../pt499658/index.html">Um trabalhador em vez de um testador? Vale a pena estudar Selenium em 2020?</a></li>
<li><a href="../pt499662/index.html">Raiz de confianÃ§a para IoT e outras tendÃªncias de seguranÃ§a da IoT</a></li>
<li><a href="../pt499664/index.html">Portando APIs para TypeScript como um solucionador de problemas</a></li>
<li><a href="../pt499666/index.html">PEP 572 (ExpressÃµes de atribuiÃ§Ã£o no python 3.8)</a></li>
<li><a href="../pt499670/index.html">Ğ¯ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ¶Ñƒ Ğ½Ğ° JavaScript</a></li>
<li><a href="../pt499674/index.html">Outro passo para computadores Ã³pticos</a></li>
<li><a href="../pt499676/index.html">Mais de 90 ferramentas Ãºteis para o Kubernetes: implantaÃ§Ã£o, gerenciamento, monitoramento, seguranÃ§a e muito mais</a></li>
<li><a href="../pt499680/index.html">Aprendendo Kubernetes: BÃ¡sico 14 a 16 de maio, AvanÃ§ado de 18 a 20 de maio</a></li>
<li><a href="../pt499682/index.html">O que posso ganhar no hackathon, exceto por um prÃªmio em dinheiro?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>