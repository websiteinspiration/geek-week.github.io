<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍇 🍲 📶 Dependências do JavaScript do caminho para o inferno 🛵 🚐 🏯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cada projeto JavaScript começa com boas intenções, a saber, que seus criadores prometem a si mesmos não usar muitos pacotes NPM durante seu desenvolvi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Dependências do JavaScript do caminho para o inferno</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/499668/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada projeto JavaScript começa com boas intenções, a saber, que seus criadores prometem a si mesmos não usar muitos pacotes NPM durante seu desenvolvimento. Mas, mesmo que os desenvolvedores façam esforços consideráveis ​​para manter essa promessa, os pacotes NPM penetram gradualmente em seus projetos. O tamanho do arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aumenta com o tempo. E desde a </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instalação das dependências, ocorre um verdadeiro horror, expresso em adições e exclusões de pacotes, especialmente perceptíveis no próximo PR ... </font><font style="vertical-align: inherit;">
"Está tudo bem", diz o líder da equipe. O resto da equipe concorda com a cabeça. O que mais fazer? Todos gostamos do fato de que o ecossistema JavaScript está vivo e bem. Não precisamos reinventar a roda todas as vezes e tentar resolver os problemas que já foram resolvidos pela comunidade de código aberto.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/be/cf/ky/becfkyhkcfavrlygimyyrliz9t4.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Suponha que você crie um blog e deseje usar o Gatsby.js. </font><font style="vertical-align: inherit;">Tente adicionar este gerador de sites com base no seu projeto. </font><font style="vertical-align: inherit;">Agora parabéns. </font><font style="vertical-align: inherit;">Seu projeto tinha apenas 19.000 dependências adicionais. </font><font style="vertical-align: inherit;">Isto é normal? </font><font style="vertical-align: inherit;">Quão complexa pode uma árvore de dependência de JavaScript se tornar? </font><font style="vertical-align: inherit;">Como uma árvore de dependência se transforma em inferno? </font><font style="vertical-align: inherit;">Vamos descobrir.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que é um pacote JavaScript?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O NPM (Node Package Manager, Node Package Manager) armazena o maior registro de pacotes do mundo. </font><font style="vertical-align: inherit;">Estes são pacotes JavaScript. </font><font style="vertical-align: inherit;">O NPM é mais do que RubyGems, PyPi e Maven combinados. </font><font style="vertical-align: inherit;">Essa conclusão pode ser feita com base na análise dos dados do projeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module Counts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que monitora o número de pacotes nos registros populares.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/259/d83/158/259d831584b0a9a5d1fd6226e3f799b0.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dados sobre o número de pacotes em registros populares</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Você pode pensar que quantidades muito grandes de código estão representadas neste gráfico. </font><font style="vertical-align: inherit;">Do jeito que é. </font><font style="vertical-align: inherit;">Para transformar um projeto em um pacote NPM, este pacote deve ter um arquivo</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Esse pacote pode ser enviado ao registro do NPM.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que é o package.json?</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui estão as tarefas que ele resolve </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ele lista os pacotes dos quais seu projeto depende (esta é uma lista de dependências do projeto).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nele, usando as regras do controle de versão semântico, são definidas as versões dos pacotes de dependência que seu projeto pode usar.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permite reproduzir o ambiente necessário para o pacote funcionar e, como resultado, simplifica a transferência do projeto para outros desenvolvedores.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pode ser pensado como um arquivo </font></font><code>README</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bombeado com esteróides. </font><font style="vertical-align: inherit;">Aqui você pode descrever as dependências do seu pacote, aqui você pode escrever scripts que são executados durante a montagem e teste do projeto. </font><font style="vertical-align: inherit;">O mesmo arquivo contém informações sobre a versão do projeto especificada pelo desenvolvedor e uma descrição do projeto. </font><font style="vertical-align: inherit;">Estamos particularmente interessados ​​na possibilidade </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de especificar dependências do projeto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez o fato de as dependências do projeto estarem indicadas neste arquivo pareça um tanto alarmante. </font><font style="vertical-align: inherit;">Imagine que existe um pacote que depende de outro pacote e esse outro pacote depende de outro pacote. </font><font style="vertical-align: inherit;">Essa cadeia de dependências pode ser arbitrariamente longa. </font><font style="vertical-align: inherit;">Por esse motivo, instalar o único pacote, Gatsby.js, significa equipar o projeto com 19.000 dependências adicionais.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de dependência em package.json</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para entender melhor como as listas de dependências do projeto crescem com o tempo, vamos falar sobre os diferentes tipos de dependências que um projeto pode ter. </font><font style="vertical-align: inherit;">Nomeadamente, </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podem ser encontradas </font><font style="vertical-align: inherit;">as </font><font style="vertical-align: inherit;">seguintes seções que descrevem várias dependências:</font></font><br>
<br>
<ul>
<li><code>dependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - são dependências comuns, cuja funcionalidade é usada no projeto e que é acessada a partir de seu código.</font></font></li>
<li><code>devDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- estas são dependências de desenvolvimento. </font><font style="vertical-align: inherit;">Por exemplo, a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais bonita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usada para formatar o código.</font></font></li>
<li><code>peerDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - se as dependências forem gravadas nesta seção, o desenvolvedor do pacote informará quem irá instalá-lo que precisará de uma versão específica do pacote especificado nesta seção.</font></font></li>
<li><code>optionalDependencies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eles listam dependências opcionais, como a incapacidade de instalar, que não violará o processo de instalação do pacote.</font></font></li>
<li><code>bundledDependencies</code> —    ,    .     ,    NPM,    ,             .</li>
</ul><br>
<h2><font color="#3AC1EF">   package-lock.json</font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos sabemos que o arquivo </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, no decorrer do trabalho no projeto, passa constantemente por mudanças. Algo é removido, algo é adicionado a ele. Isso é especialmente perceptível ao exibir o PR que contém uma versão atualizada desse arquivo. Muitas vezes tomamos isso como garantido. Um arquivo é </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerado automaticamente sempre que um arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou pasta é </font><font style="vertical-align: inherit;">alterado </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Isso permite manter o conteúdo da árvore de dependências exatamente como era quando você instalou as dependências do projeto. Isso permite, ao instalar o projeto, reproduzir a árvore de dependência. Isso resolve o problema de ter diferentes versões do mesmo pacote de diferentes desenvolvedores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considere um projeto cujas dependências incluem React. A entrada correspondente está disponível em </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Se você olhar para o arquivo</font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deste projeto, você poderá ver algo como o seguinte:</font></font><br>
<br>
<pre><code class="javascript hljs">&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"react"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"version"</span>: <span class="hljs-string">"16.13.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"resolved"</span>: <span class="hljs-string">"https://registry.npmjs.org/react/-/react-16.13.0.tgz"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"integrity"</span>: <span class="hljs-string">"sha512-TSavZz2iSLkq5/oiE7gnFzmURKZMltmi193rm5HEoUDAXpzT9Kzw6oNZnGoai/4+fUnm7FqS5dwgUL34TujcWQ=="</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"requires"</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"loose-envify"</span>: <span class="hljs-string">"^1.1.0"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"object-assign"</span>: <span class="hljs-string">"^4.1.1"</span>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">"prop-types"</span>: <span class="hljs-string">"^15.6.2"</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um arquivo </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é uma grande lista de dependências do projeto. </font><font style="vertical-align: inherit;">Aqui estão as versões de dependência, caminhos (URIs) para os módulos, hashes usados ​​para verificar a integridade do módulo e os pacotes necessários para este módulo. </font><font style="vertical-align: inherit;">Se você ler este arquivo, poderá encontrar registros de todos os pacotes que o React precisa. </font><font style="vertical-align: inherit;">É aqui que está o verdadeiro inferno das dependências. </font><font style="vertical-align: inherit;">Tudo o que o projeto precisa está descrito aqui.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compreendendo as dependências do Gatsby.js</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como é que, tendo estabelecido apenas uma dependência, adicionamos até 19.000 dependências ao projeto? </font><font style="vertical-align: inherit;">É tudo sobre dependências de dependência. </font><font style="vertical-align: inherit;">É por isso que temos o que temos:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm install --save gatsby<font></font>
<font></font>
...<font></font>
<font></font>
+ gatsby@2.19.28<font></font>
added 1 package from 1 contributor, removed 9 packages, updated 10 packages and audited 19001 packages <span class="hljs-keyword">in</span> 40.382s
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você procurar </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, poderá encontrar apenas uma dependência. Mas se você observar </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, acontece que diante de nós há um monstro de quase 14 kilobytes. Uma resposta mais detalhada sobre o significado de todas essas linhas de código que </font></font><code>package-lock.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">podem ser encontradas no arquivo </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repositório Gatsby.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Existem muitas dependências diretas, ou seja, de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acordo com os cálculos da NPM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , 132. Se cada uma dessas dependências tiver pelo menos mais uma dependência, o número total de dependências do projeto duplicará - e haverá 264 dependências. Claro que, no mundo real, não é assim. Cada dependência direta do projeto possui mais de uma dependência inerente. Como resultado, a lista de dependências do projeto é muito longa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, teremos interesse em quantas vezes a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lodash</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é usada como dependência para outros pacotes </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm ls lodash<font></font>
example-js-package@1.0.0<font></font>
└─┬ gatsby@2.19.28<font></font>
&nbsp;&nbsp;├─┬ @babel/core@7.8.6<font></font>
&nbsp;&nbsp;│ ├─┬ @babel/generator@7.8.6<font></font>
&nbsp;&nbsp;│ │ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ ├─┬ @babel/types@7.8.6<font></font>
&nbsp;&nbsp;│ │ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;├─┬ @babel/traverse@7.8.6<font></font>
&nbsp;&nbsp;│ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;├─┬ @typescript-eslint/parser@2.22.0<font></font>
&nbsp;&nbsp;│ └─┬ @typescript-eslint/typescript-estree@2.22.0<font></font>
&nbsp;&nbsp;│ &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;├─┬ babel-preset-gatsby@0.2.29<font></font>
&nbsp;&nbsp;│ └─┬ @babel/preset-env@7.8.6<font></font>
&nbsp;&nbsp;│ &nbsp; ├─┬ @babel/plugin-transform-block-scoping@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; │ └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ &nbsp; ├─┬ @babel/plugin-transform-classes@7.8.6<font></font>
&nbsp;&nbsp;│ &nbsp; │ └─┬ @babel/helper-define-map@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; │ &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ &nbsp; ├─┬ @babel/plugin-transform-modules-amd@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; │ └─┬ @babel/helper-module-transforms@7.8.6<font></font>
&nbsp;&nbsp;│ &nbsp; │ &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;│ &nbsp; └─┬ @babel/plugin-transform-sticky-regex@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; &nbsp; └─┬ @babel/helper-regex@7.8.3<font></font>
&nbsp;&nbsp;│ &nbsp; &nbsp; &nbsp; └── lodash@4.17.15&nbsp; deduped<font></font>
&nbsp;&nbsp;...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Felizmente, a maioria dessas dependências é representada pela mesma versão do lodash. </font><font style="vertical-align: inherit;">E com essa abordagem, </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haverá apenas uma pasta da biblioteca lodash. </font><font style="vertical-align: inherit;">É verdade que esse geralmente não é o caso. </font><font style="vertical-align: inherit;">Às vezes, pacotes diferentes precisam de versões diferentes do mesmo pacote. </font><font style="vertical-align: inherit;">É por isso que muitas piadas apareceram sobre o tamanho enorme da pasta </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">No nosso caso, no entanto, nem tudo é tão ruim:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh node_modules<font></font>
200M&nbsp; &nbsp; node_modules<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
200 megabytes não é tão ruim. </font><font style="vertical-align: inherit;">Vi como o tamanho desta pasta atinge facilmente 700 MB. </font><font style="vertical-align: inherit;">Se você estiver interessado em aprender quais módulos ocupam mais espaço, execute o seguinte comando:</font></font><br>
<br>
<pre><code class="bash hljs">$ du -sh ./node_modules/* | sort -nr | grep <span class="hljs-string">'\dM.*'</span><font></font>
&nbsp;17M&nbsp; &nbsp; ./node_modules/rxjs<font></font>
8.4M&nbsp; &nbsp; ./node_modules/@types<font></font>
7.4M&nbsp; &nbsp; ./node_modules/core-js<font></font>
6.8M&nbsp; &nbsp; ./node_modules/@babel<font></font>
5.4M&nbsp; &nbsp; ./node_modules/gatsby<font></font>
5.2M&nbsp; &nbsp; ./node_modules/eslint<font></font>
4.8M&nbsp; &nbsp; ./node_modules/lodash<font></font>
3.6M&nbsp; &nbsp; ./node_modules/graphql-compose<font></font>
3.6M&nbsp; &nbsp; ./node_modules/@typescript-eslint<font></font>
3.5M&nbsp; &nbsp; ./node_modules/webpack<font></font>
3.4M&nbsp; &nbsp; ./node_modules/moment<font></font>
3.3M&nbsp; &nbsp; ./node_modules/webpack-dev-server<font></font>
3.2M&nbsp; &nbsp; ./node_modules/caniuse-lite<font></font>
3.1M&nbsp; &nbsp; ./node_modules/graphql<font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rxjs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> é um pacote insidioso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está um comando simples que ajuda a reduzir o tamanho da pasta </font></font><code>node_modules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e simplificar sua estrutura:</font></font><br>
<br>
<pre><code class="bash hljs">$ npm dedup<font></font>
moved 1 package and audited 18701 packages <span class="hljs-keyword">in</span> 4.622s<font></font>
<font></font>
51 packages are looking <span class="hljs-keyword">for</span> funding<font></font>
&nbsp;&nbsp;run `npm fund` <span class="hljs-keyword">for</span> details<font></font>
<font></font>
found 0 vulnerabilities<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desduplicação, o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm tenta simplificar a estrutura da árvore de dependências localizando as dependências usadas por outras dependências e movendo-as para que possam ser compartilhadas. Isso se aplica ao nosso exemplo de lodash. Muitos pacotes são usados </font></font><code>lodash @4.17.15</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como resultado, para garantir sua operacionalidade, basta instalar esta versão da biblioteca apenas uma vez. Obviamente, essa é a situação em que entramos desde o início, apenas estabelecendo dependências. Se, no processo de trabalho em um projeto, </font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adicionar novas dependências, às vezes é recomendável lembrar a equipe </font></font><code>npm dedup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Se você usar o gerenciador de pacotes do yarn, um comando semelhante será semelhante ao do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yarn dedupe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Mas, de fato, não há necessidade, pois a otimização de dependência é realizada automaticamente quando o comando é executado </font></font><code>yarn install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualização de Dependências</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interessado em uma representação gráfica das dependências do seu projeto? </font><font style="vertical-align: inherit;">Nesse caso, você pode criar uma apresentação usando ferramentas especiais. </font><font style="vertical-align: inherit;">Vamos considerar alguns deles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguir, é apresentado um resultado de visualização de dependência obtido em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm.anvaka.com/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/f5d/373/dfbf5d37377bd62f4ea5cf422de62c74.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualização de dependência usando npm.anvaka.com</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aqui você pode ver as dependências das dependências do pacote de projeto Gatsby.js. O resultado é semelhante a uma enorme web. O projeto Gatsby.js tem tantas dependências que essa "web" quase "travou" meu navegador.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Agora</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , se estiver interessado, um link para este diagrama. Pode ser apresentado em forma 3D.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está uma visualização feita usando o</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npm.broofa.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/285/cd6/c52/285cd6c52a00d9e87a7bc2095df6023f.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um fragmento de uma visualização de dependência feita usando o npm.broofa.com</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
É semelhante a um fluxograma. </font><font style="vertical-align: inherit;">Ela, para o Gatsby.js, acaba sendo muito complicada. </font><font style="vertical-align: inherit;">Você pode dar uma olhada</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Elementos do circuito podem ser coloridas com base em estimativas de</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> npms.io</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Você pode enviar seu próprio arquivo para o site</font></font><code>package.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A ferramenta</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Package Phobia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permite descobrir quanto espaço ele precisa antes de instalar um pacote.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25c/d26/ae4/25cd26ae4fc708f0c6900c5ad3a5dead.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Informações sobre o pacote recebidas usando a fobia do pacote</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Aqui você pode descobrir sobre o tamanho do pacote publicado e quanto espaço em disco será necessário após a instalação.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão: com grande poder vem grande responsabilidade</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, quero dizer que JavaScript e NPM são ótimas ferramentas. </font><font style="vertical-align: inherit;">O bom é que os desenvolvedores modernos têm a oportunidade de usar um conjunto enorme de dependências. </font><font style="vertical-align: inherit;">Executar o comando </font></font><code>npm install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para evitar que você escreva algumas linhas de código é tão fácil que às vezes esquecemos as consequências. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora que você leu até esse ponto, deve ter um entendimento mais completo dos recursos da estrutura da árvore de dependência do npm-project. </font><font style="vertical-align: inherit;">Se você adicionar uma biblioteca ao projeto que é muito grande ou apenas explorar as dependências do seu projeto, sempre poderá tirar proveito do que discutimos aqui e analisar as dependências. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queridos leitores!</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Deseja usar o menor número possível de dependências em seus projetos npm?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/a_/bs/aa/a_bsaactpbr8fltzymtkhqbw1d4.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt499656/index.html">Simulação do controlador de temperatura PID</a></li>
<li><a href="../pt499658/index.html">Um trabalhador em vez de um testador? Vale a pena estudar Selenium em 2020?</a></li>
<li><a href="../pt499662/index.html">Raiz de confiança para IoT e outras tendências de segurança da IoT</a></li>
<li><a href="../pt499664/index.html">Portando APIs para TypeScript como um solucionador de problemas</a></li>
<li><a href="../pt499666/index.html">PEP 572 (Expressões de atribuição no python 3.8)</a></li>
<li><a href="../pt499670/index.html">Я перехожу на JavaScript</a></li>
<li><a href="../pt499674/index.html">Outro passo para computadores ópticos</a></li>
<li><a href="../pt499676/index.html">Mais de 90 ferramentas úteis para o Kubernetes: implantação, gerenciamento, monitoramento, segurança e muito mais</a></li>
<li><a href="../pt499680/index.html">Aprendendo Kubernetes: Básico 14 a 16 de maio, Avançado de 18 a 20 de maio</a></li>
<li><a href="../pt499682/index.html">O que posso ganhar no hackathon, exceto por um prêmio em dinheiro?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>