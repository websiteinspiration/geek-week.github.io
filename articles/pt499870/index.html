<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔁 🛌 👧🏿 Pylint: um teste detalhado do analisador de código ⚛️ 👩🏽‍🚀 🐿️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando Luke trabalhou com Flake8 e ficou de olho em Pylint, ele teve a impressão de que 95% dos erros gerados por Pylint eram falsos. Outros desenvolv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pylint: um teste detalhado do analisador de código</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/leader-id/blog/499870/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando Luke trabalhou com Flake8 e ficou de olho em Pylint, ele teve a impressão de que 95% dos erros gerados por Pylint eram falsos. Outros desenvolvedores tinham experiência diferente na interação com esses analisadores, então Luke decidiu analisar a situação em detalhes e estudar seu trabalho em 11 mil linhas de seu código. Além disso, ele elogiou os benefícios do Pylint, vendo-o como um complemento ao Flake8. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/je/g5/rljeg5-o7_1uoatmk9_mez8dslm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luke ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Luke Plant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - um dos desenvolvedores britânicos, em cujo artigo, com a análise de analisadores de código populares, nos deparamos recentemente. Os linters estudam o código, ajudam a encontrar erros e o tornam estilisticamente consistente com os padrões e o código que os desenvolvedores da sua equipe escrevem. Os mais comuns são Pylint e Flake8. Estamos em </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leader-ID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Também os usamos, então traduzimos com alegria o artigo dele. </font><font style="vertical-align: inherit;">Esperamos que isso melhore sua experiência com essas ferramentas.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurações iniciais e base de teste</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para esse experimento, participei do código de um de meus projetos e lancei o Pylint com configurações básicas. </font><font style="vertical-align: inherit;">Depois, tentou analisar o resultado: quais avisos eram úteis e quais eram falsos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma pequena ajuda sobre o projeto do qual o código foi retirado:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um aplicativo regular escrito em Django (ou seja, dentro do mesmo Python). </font><font style="vertical-align: inherit;">O Django tem suas próprias peculiaridades e, como estrutura, possui suas limitações, mas permite escrever código Python normal. </font><font style="vertical-align: inherit;">Outras bibliotecas que usam modelos (funções de retorno de chamada ou modelos de design do método de modelo) também têm algumas de suas desvantagens como estrutura.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consiste em 22.000 linhas de código. </font><font style="vertical-align: inherit;">Aproximadamente 11.000 linhas passaram pelo Pylint (9.000 se falhas omitidas). </font><font style="vertical-align: inherit;">Essa parte do projeto consistia principalmente em visualizações e código de teste.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para analisar o código desse projeto, já usei o Flake8, tendo processado todos os erros recebidos. </font><font style="vertical-align: inherit;">O objetivo deste experimento foi avaliar os benefícios do Pylint como um complemento ao Flake8.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O projeto tem uma boa cobertura de teste do código, mas como sou seu único autor, não tive a oportunidade de usar a revisão por pares.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que essa análise seja útil para outros desenvolvedores decidirem usar o Pylint na pilha para verificar a qualidade do código. </font><font style="vertical-align: inherit;">Suponho que se você já estiver usando algo como o Pylint, você o usará sistematicamente para o controle de qualidade necessário do código, a fim de minimizar problemas.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, a Pylint emitiu 1650 reivindicações para o meu código. </font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo, agrupei todos os comentários do analisador por tipo e dei meus comentários a eles. </font><font style="vertical-align: inherit;">Se você precisar de uma descrição detalhada dessas mensagens, consulte a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seção apropriada da</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lista de funções do Pylint.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Insetos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Pylint encontrou exatamente um bug no meu código. </font><font style="vertical-align: inherit;">Considero um erro um erro que ocorre ou pode surgir potencialmente durante a operação do programa. </font><font style="vertical-align: inherit;">Nesse caso, usei exceções - </font></font><code>broad-except.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isto é </font></font><code>except Exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, não apenas a exceção, que o Flake8 captura. </font><font style="vertical-align: inherit;">Isso resultaria em comportamento em tempo de execução, com algumas exceções. </font><font style="vertical-align: inherit;">Se esse erro surgisse no tempo de execução (não o fato de aparecer), o comportamento incorreto do código não teria consequências sérias, no entanto ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Total: 1</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Útil</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além desse erro, Pylint encontrou mais algumas que eu categorizei como úteis. </font><font style="vertical-align: inherit;">O código não caiu deles, mas pode haver problemas durante a refatoração e, em princípio, erros no futuro ao expandir a lista de recursos e dar suporte ao código. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sete deles eram </font></font><code>too-many-locals</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>too-many-branches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>too-many-local-variables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Eles pertenciam a três partes do meu código mal estruturadas. </font><font style="vertical-align: inherit;">Seria bom pensar na estrutura e tenho certeza de que poderia fazer melhor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outros erros:</font></font><br>
<br>
<ul>
<li><code>unused-argument</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 3 - um deles era realmente um batente, e o código foi executado corretamente aleatoriamente. </font><font style="vertical-align: inherit;">Os outros dois argumentos desnecessários e não utilizados levariam a problemas no futuro se eu os usasse.</font></font></li>
<li><code>redefined-builtin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><code>dangerous-default-value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2 - não bugs, porque nunca usei os valores padrão, mas seria bom corrigir isso por precaução. </font></font></li>
<li><code>stop-iteration-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1 - aqui eu aprendi algo novo para mim mesmo, nunca o teria encontrado.</font></font></li>
<li><code>no-self-argument</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 16</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edições cosméticas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu prestaria menos atenção a essas coisas. </font><font style="vertical-align: inherit;">Eles são insignificantes ou improváveis. </font><font style="vertical-align: inherit;">Por outro lado, sua correção não será supérflua. </font><font style="vertical-align: inherit;">Alguns deles são estilísticos controversos. </font><font style="vertical-align: inherit;">Eu falei sobre alguns batentes semelhantes em outras seções, mas os listados aqui também são adequados para este contexto. </font><font style="vertical-align: inherit;">Usando o Pylint regularmente, eu corrigia essas “falhas”, mas na maioria dos casos não me preocupo com elas. </font></font><br>
<br>
<code>invalid-name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 192 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estes eram basicamente nomes de variáveis ​​com uma única letra. </font><font style="vertical-align: inherit;">Usado nesses contextos em que não era assustador, por exemplo:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/94f/833/bf1/94f833bf1008d8403a0e44716852c587.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ou</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e43/9a2/75c/e439a275ceeb9508d0566015a7875e3b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitos estavam no código de teste:</font></font><br>
<br>
<ul>
<li><code>len-as-condition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 20</font></font></li>
<li><code>useless-object-inheritance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 16 (herdado do Python 2)</font></font></li>
<li><code>no-else-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 11</font></font></li>
<li><code>no-else-raise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><code>bad-continuation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 6</font></font></li>
<li><code>redefined-builtin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 4</font></font></li>
<li><code>inconsistent-return-statements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><code>consider-using-set-comprehension</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><code>chained-comparison</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TOTAL: 252</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sem utilidade </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foi quando eu tive motivos para escrever o código da maneira que o escrevi, mesmo que em alguns lugares pareça incomum. </font><font style="vertical-align: inherit;">E, na minha opinião, é melhor deixá-lo desta forma, embora alguns não concordem ou prefiram um estilo diferente de escrever código que possa potencialmente evitar problemas.</font></font><br>
<br>
<ul>
<li><code>too-many-ancestors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 76</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estavam no código de teste onde eu usava muitas classes de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impurezas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para colocar utilitários ou tocos.</font></font><br>
<br>
<ul>
<li><code>unused-variable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 43</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foi encontrado quase o tempo todo no código de teste, onde eu quebrei o recorde:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c7/206/1bd/2c72061bd4270ea1128d3ea63a26e18a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... e não usou nenhum dos elementos. </font><font style="vertical-align: inherit;">Existem várias maneiras de impedir que o Pylint relate erros (por exemplo, forneça nomes </font></font><strong><code>unused</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Mas se você deixar na forma em que escrevi, será legível e as pessoas (inclusive eu) serão capazes de entendê-lo e apoiá-lo.</font></font><br>
<br>
<ul>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 26</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses foram os casos em que designei nomes apropriados no contexto, mas aqueles que não atendiam aos padrões de nomenclatura Pylint. </font><font style="vertical-align: inherit;">Por exemplo, db (esta é uma abreviação comum para banco de dados) e alguns outros nomes não-padrão, que, na minha opinião, eram mais compreensíveis. </font><font style="vertical-align: inherit;">Mas você pode não concordar comigo.</font></font><br>
<br>
<ul>
<li><strong><code>redefined-outer-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 16</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Às vezes, o nome de uma variável é digitado corretamente nos contextos interno e externo. </font><font style="vertical-align: inherit;">E você nunca precisará usar um nome externo de um contexto interno.</font></font><br>
<br>
<ul>
<li><strong><code>too-few-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 14</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os exemplos incluem classes com dados criados usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">attrs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , onde não há métodos públicos, e uma classe que implementa a interface do dicionário, mas que é necessária para garantir que o método funcione corretamente.</font></font><strong><code>__getitem__</code></strong><br>
<br>
<ul>
<li><strong><code>no-self-use</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 12</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles apareceram no código de teste, onde adicionei intencionalmente métodos à classe base sem um parâmetro </font></font><strong><code>self</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pois dessa maneira era mais conveniente importá-los e disponibilizá-los para o caso de teste. </font><font style="vertical-align: inherit;">Alguns deles até envolvem funções separadas.</font></font><br>
<br>
<ul>
<li><strong><code>attribute-defined-outside-init</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 10</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesses casos, havia boas razões para escrever o código como está. </font><font style="vertical-align: inherit;">Basicamente, esses erros ocorreram no código de teste.</font></font><br>
<br>
<ul>
<li><strong><code>too-many-locals</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 6, </font></font><strong><code>too-many-return-statements</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 6, </font></font><strong><code>too-many-branches</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 2, </font></font><strong><code>too-many-statements</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">× 2</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, esses recursos eram muito longos. </font><font style="vertical-align: inherit;">Mas, olhando para eles, não vi boas maneiras de limpá-los e melhorá-los. </font><font style="vertical-align: inherit;">Um dos recursos era simples, embora longo. </font><font style="vertical-align: inherit;">Tinha uma estrutura muito clara e não foi escrita de forma torta, e qualquer maneira de reduzi-la em que eu pudesse pensar incluiria camadas inúteis de funções desnecessárias ou inconvenientes.</font></font><br>
<br>
<ul>
<li><strong><code>arguments-differ</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 6</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso se deve principalmente ao uso de * args e ** kwargs em um método substituído, o que permite que você se proteja de alterações na assinatura de métodos de bibliotecas de terceiros (mas, em alguns casos, essa mensagem pode indicar erros reais).</font></font><br>
<br>
<ul>
<li><strong><code>ungrouped-imports</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 4</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu já uso o isort para importar </font></font><br>
<br>
<ul>
<li><strong><code>fixme</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 4</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, há várias coisas que precisam ser corrigidas, mas no momento não quero corrigi-las. </font></font><br>
<br>
<ul>
<li><strong><code>duplicate-code</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 3</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Às vezes, você usa uma pequena quantidade de código padrão, o que é simplesmente necessário e, quando não há muita lógica real no corpo da função, esse aviso é acionado.</font></font><br>
<br>
<ul>
<li><strong><code>broad-except</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>abstract-method</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>redefined-builtin</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>too-many-lines</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu tentei descobrir de que maneira natural quebrar esse módulo, mas não consegui. </font><font style="vertical-align: inherit;">Este é um exemplo em que você pode ver que o linter é a ferramenta errada. </font><font style="vertical-align: inherit;">Se eu tiver um módulo com 980 linhas de código e adicionar mais 30, cruzo o limite de 1000 linhas e as notificações do linter não me ajudarão aqui. </font><font style="vertical-align: inherit;">Se 980 linhas são boas, por que 1010 é ruim? </font><font style="vertical-align: inherit;">Não quero refatorar este módulo, mas quero que o linter não produza erros. </font><font style="vertical-align: inherit;">A única solução neste momento que vejo é fazer de alguma forma um modo de silenciar o ponteiro, o que contradiz o objetivo final.</font></font><br>
<br>
<ul>
<li><strong><code>pointless-statement</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>expression-not-assigned</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>cyclic-import</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nós descobrimos o ciclo movendo suas partes para uma das funções. </font><font style="vertical-align: inherit;">Não consegui encontrar uma maneira melhor de estruturar o código com base em restrições.</font></font><br>
<br>
<ul>
<li><strong><code>unused-import</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu já adicionei </font></font><code># NOQA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ao usar o Flake8 para que esse erro não apareça.</font></font><br>
<br>
<ul>
<li><strong><code>too-many-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se na minha classe de teste existem 35 testes em vez de 20 regulamentados, isso é realmente um problema? </font></font><br>
<br>
<ul>
<li><strong><code>too-many-arguments</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 243</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não foi possível corrigir</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa categoria reflete erros que não posso corrigir, mesmo que eu quisesse, devido a restrições externas, como a necessidade de retornar ou passar classes para uma biblioteca ou estrutura de terceiros que devem atender a certos requisitos.</font></font><br>
<br>
<ul>
<li><strong><code>unused-argument</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 21</font></font></li>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 13</font></font></li>
<li><strong><code>protected-access</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 3</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acesso incluído a "objetos internos documentados", como </font></font><code>sys._getframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no stdlib e no Django </font></font><code>Model._meta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<ul>
<li><strong><code>too-few-public-methods</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 3</font></font></li>
<li><strong><code>too-many-arguments</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>wrong-import-position</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 2</font></font></li>
<li><strong><code>attribute-defined-outside-init</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>too-many-ancestors</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 46</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mensagens falsas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coisas nas quais Pylint está claramente errado. </font><font style="vertical-align: inherit;">Nesse caso, esses não são erros do Pylint: o fato é que o Python é dinâmico e o Pylint está tentando descobrir coisas que não podem ser feitas de maneira perfeita ou confiável.</font></font><br>
<br>
<ul>
<li><strong><code>no-member</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 395</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Associado a várias classes base: do Django e aquelas que eu mesmo criei. </font><font style="vertical-align: inherit;">Pylint não conseguiu detectar a variável devido ao dinamismo / metaprogramação. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muitos erros ocorreram devido à estrutura do código de teste (usei um modelo do django-functest, que em alguns casos pode ser corrigido adicionando classes base adicionais usando métodos "abstratos" que chamam </font></font><strong><code>NotImplementedError</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ou, possivelmente, renomeando muitas classes de teste (I Eu não fiz isso, porque em alguns casos seria confuso).</font></font><br>
<br>
<ul>
<li><strong><code>invalid-name</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 52</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema surgiu principalmente porque a Pylint aplicou a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regra constante</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">PEP8</font></a><font style="vertical-align: inherit;"> , considerando que todo nome de nível superior definido com </font></font><strong><code>=</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é uma "constante". </font><font style="vertical-align: inherit;">Definir exatamente o que entendemos por constante é mais difícil do que parece, mas isso não se aplica a algumas coisas que são inerentemente constantes, por exemplo, funções. </font><font style="vertical-align: inherit;">Além disso, a regra não deve ser aplicada a formas menos familiares de criar funções, por exemplo:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d3/945/0fd/4d39450fdda92751a828ba4344e309b5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alguns exemplos são discutíveis devido à falta de definição do que é uma constante. </font><font style="vertical-align: inherit;">Por exemplo, uma instância de uma classe definida no nível do módulo, que pode ou não ter um estado mutável, deve ser considerada constante? </font><font style="vertical-align: inherit;">Por exemplo, nesta expressão:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c56/a26/52f/c56a2652fd28c08feee8306c6c96a048.png"></div><br>
<ul>
<li><strong><code>no-self-use</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 23</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O método Pylint indicado incorretamente pode ser uma função para muitos casos em que uso herança para executar várias implementações, respectivamente, não posso convertê-las em funções.</font></font><br>
<br>
<ul>
<li><strong><code>protected-access</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 5</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Pylint avaliou incorretamente quem era o "proprietário" (o fragmento de código atual cria o atributo protegido do objeto e o utiliza localmente, mas o Pylint não vê isso).</font></font><br>
<br>
<ul>
<li><strong><code>no-name-in-module</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>import-error</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
<li><strong><code>pointless-statement</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> × 1</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta declaração realmente produziu o resultado:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/454/9c4/3ea/4549c43ea3cdb8f7910eaa2edce758cd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu usei isso para causar intencionalmente um erro incomum que é improvável que seja encontrado pelos testes. </font><font style="vertical-align: inherit;">Não culpo Pylint por não o reconhecer ... </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 477</font></font></strong><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subtotal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainda não estamos na linha de chegada, mas é hora de agrupar nossos resultados:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blocos “Bom” - “Bugs” e “Utilitários” - aqui o Pylint definitivamente ajudou: 17.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Neutro” - “Alterações cosméticas” - um benefício menor do Pylint, os erros não causarão danos: 252.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Ruim” - “Inútil”, “Não é possível corrigir”, “Imprecisões” - onde o Pylint deseja alterações no código, onde não é necessário. </font><font style="vertical-align: inherit;">Incluindo onde as edições não podem ser feitas devido a dependências externas ou onde a Pylint simplesmente analisou incorretamente o código: 766.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A proporção de bom para ruim é muito pequena. </font><font style="vertical-align: inherit;">Se Pylint fosse meu colega ajudando na revisão do código, eu imploraria para que ele fosse embora. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para remover notificações falsas, você pode abafar a classe de erro de saída (que aumentará a inutilidade do uso do Pylint) ou adicionar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comentários especiais</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ao código. </font><font style="vertical-align: inherit;">Eu não quero fazer o último, porque:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leva tempo!</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não gosto de acumular comentários que existem para silenciar o linter.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De bom grado, adicionarei esses pseudo-comentários quando houver uma vantagem definitiva do linter. </font><font style="vertical-align: inherit;">Além disso, estou ansioso por comentários, portanto, o destaque da minha sintaxe os exibe de maneira vívida: conforme recomendado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">No entanto, em alguns lugares, eu já adicionei # comentários </font></font><code>NOQA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para abafar o Flake8, mas com eles para uma seção você pode adicionar apenas cinco códigos de erro.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docstrings</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os problemas remanescentes descobertos pela Pylint estavam faltando linhas de documentação. </font><font style="vertical-align: inherit;">Coloquei-os em uma categoria separada porque:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eles são muito controversos e você pode ter uma política completamente diferente em relação a essas coisas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Não tive tempo para analisar todos eles.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No total, a Pylint descobriu 620 dockstrings ausentes (em módulos, funções, métodos de classe). </font><font style="vertical-align: inherit;">Mas em muitos casos, eu estava certo. </font><font style="vertical-align: inherit;">Por exemplo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando tudo estiver claro a partir do nome. </font><font style="vertical-align: inherit;">Por exemplo:</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando uma docstring já está definida - por exemplo, se eu implementar a interface do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">roteador de banco de dados do Django</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Adicionar sua própria linha neste caso pode ser perigoso.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outros casos, essas linhas de descrição não prejudicariam meu código. </font><font style="vertical-align: inherit;">Em cerca de 15 a 30% dos casos encontrados por Pylint, eu pensaria: "Sim, preciso adicionar uma doutrina aqui, obrigado Pylint pelo lembrete". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, não gosto das ferramentas que fazem a adição de dockstrings em qualquer lugar e em qualquer lugar, porque acho que nesse caso elas ficarão ruins. </font><font style="vertical-align: inherit;">É melhor não escrevê-los. </font><font style="vertical-align: inherit;">Uma situação semelhante com comentários ruins:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lê-los é uma perda de tempo: eles não têm informações adicionais ou contêm informações incorretas,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eles ajudam subconscientemente a destacar docstrings no texto, porque contêm informações úteis (se você as escrever no caso). </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os avisos sobre linhas de documentação ausentes são irritantes: para removê-los, é necessário adicionar comentários separadamente, o que leva aproximadamente a mesma quantidade de tempo que a adição do próprio encaixe. </font><font style="vertical-align: inherit;">Além disso, tudo cria ruído visual. </font><font style="vertical-align: inherit;">Como resultado, você obterá linhas de documentação que não são necessárias ou úteis.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acredito que minhas suposições iniciais sobre a inutilidade do Pylint se mostraram corretas (no contexto da base de código para a qual eu uso o Flake8). Para que eu possa usá-lo, o indicador que reflete o número de falsos positivos deve ser menor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além de criar ruído visual, é necessário mais tempo para classificar ou filtrar as notificações falsas, e eu não gostaria de adicionar nada disso ao projeto. Os desenvolvedores juniores serão mais humildes ao fazer edições para remover os comentários de Pylint. Mas isso fará com que eles quebrem o código de trabalho, não percebam que o Pylint está errado ou que, como resultado, você terá muita refatoração para que o Pylint possa entender seu código corretamente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você usa o Pylint em um projeto desde o início ou em um projeto onde não há dependências externas, acho que você terá uma opinião diferente e o número de notificações falsas será menor. </font><font style="vertical-align: inherit;">No entanto, isso pode levar a custos de tempo adicionais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra abordagem é usar o Pylint para um número limitado de tipos de erros. </font><font style="vertical-align: inherit;">No entanto, havia apenas algumas, cujas respostas se mostraram corretas ou extremamente raramente falsas (em termos relativos e absolutos). </font><font style="vertical-align: inherit;">Entre eles estão: </font></font><code>dangerous-default-value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>stop-iteration-return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>broad-exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>useless-object-inheritance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De qualquer forma, espero que este artigo tenha ajudado você a considerar usar Pylint ou em uma disputa com colegas.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt499846/index.html">Quando a coleta de lixo separada começará a funcionar e por que é necessário o monitoramento em vídeo de sites para contêineres de lixo</a></li>
<li><a href="../pt499850/index.html">Como analisar os concorrentes e estabelecer uma estratégia digital em 40 minutos</a></li>
<li><a href="../pt499852/index.html">Documentação em inglês para Angular</a></li>
<li><a href="../pt499854/index.html">Apache Bigtop e a escolha da distribuição do Hadoop hoje</a></li>
<li><a href="../pt499858/index.html">O que fazer no fim de semana: uma visão geral de alguns jogos de tabuleiro para quem está cansado de telas azuis</a></li>
<li><a href="../pt499872/index.html">Modularidade em Java 9</a></li>
<li><a href="../pt499874/index.html">Detecção de tosse no Intel NUC</a></li>
<li><a href="../pt499876/index.html">Os 5 melhores livros clássicos para melhorar a alfabetização financeira e preparar os primeiros passos no intercâmbio</a></li>
<li><a href="../pt499878/index.html">A luta por milissegundos. Como escolher o servidor com menos ping</a></li>
<li><a href="../pt499882/index.html">Como selecionamos designers e conduzimos entrevistas técnicas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>