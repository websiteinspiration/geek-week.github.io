<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì° üìÑ üì° M√°scaras de jogo voltadas para o rosto no Instagram ou clique duas vezes nos olhos ‚≠êÔ∏è üëèüèΩ üö∂üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Que bobagem, voc√™ pensa. Que tipo de conjunto de palavras sem sentido? Mas, infelizmente ou felicidades - algu√©m assim, hoje isso n√£o √© bobagem, mas r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>M√°scaras de jogo voltadas para o rosto no Instagram ou clique duas vezes nos olhos</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/486498/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qr/9p/o1/qr9po1b7d633kt3pmdsf2esb9io.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que bobagem, voc√™ pensa. Que tipo de conjunto de palavras sem sentido? Mas, infelizmente ou felicidades - algu√©m assim, hoje isso n√£o √© bobagem, mas realidade. O artigo ser√° sobre um jogo que escrevi para o Instagram no qual seu rosto √© usado como um controlador, ou melhor, n√£o apenas ele, mas √†s vezes toda a cabe√ßa. Mover-se pelo campo de jogo √© realizado girando e inclinando a cabe√ßa, e a op√ß√£o de a√ß√£o √© abrir a boca ou dar um duplo clique (piscando) nos olhos. Provavelmente valeria a pena piscar duas vezes ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh admir√°vel mundo novo! Provavelmente, descolados do futuro desenvolver√£o scripts para gerar bela fuma√ßa colorida por tr√°s de suas c√°psulas espaciais leves ou escrever shaders para dar efeitos visuais interessantes aos port√µes negros de um teleporte pessoal, como flocos de neve caindo (Web 100.0) ou neblina fractal (WebGL 100.0) ou ... N√£o, talvez N√£o tenho imagina√ß√£o suficiente para imaginar que tipo de absurdo poder√≠amos lidar no futuro: tento pensar muito logicamente. Mas cerca de 30 anos atr√°s, certamente, em nenhum sonho, sob nenhuma circunst√¢ncia, poder√≠amos at√© pensar que hoje criaremos m√°scaras para uma rede social chamada Instagram. E al√©m do mais, que dentro dessas m√°scaras os jogos completos aparecer√£o. Fiquei assustado e interessante. Em suma, assustador interessante. E, como voc√™ j√° entendeu, eu n√£o pude resistir e tamb√©m escrevi esse jogo.Obviamente, para reproduzi-lo, voc√™ deve ter um smartphone no Android ou iOS com uma c√¢mera frontal e o aplicativo Instagram instalado.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este jogo √© Tic Tac Toe. </font><font style="vertical-align: inherit;">Em geral, este √© um dos primeiros jogos que criei na minha vida, e talvez at√© o primeiro - n√£o me lembro agora. </font><font style="vertical-align: inherit;">Mas eu escrevi de volta em Pascal, depois arrastei esse antigo algoritmo para o Delphi. </font><font style="vertical-align: inherit;">Depois disso, o jogo, √© claro, tamb√©m apareceu na web, no meu site: bem, em sua p√°gina pessoal sem seu tic-tac-toe pessoal ... E agora √© hora de colocar esse jogo √©pico no Instagram. </font><font style="vertical-align: inherit;">Em geral, se eu fosse um punhal ou um tac toe neste jogo (provavelmente um dedo do p√©), poderia contar muito sobre minha longa e interessante vida ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que tipo de m√°scaras s√£o essas?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para come√ßar - uma breve digress√£o hist√≥rica. As m√°scaras no Instagram apareceram gra√ßas √† equipe bielorrussa que desenvolveu o aplicativo selfie MSQRD. Depois que o aplicativo foi comprado pelo Facebook, a equipe da corpora√ß√£o continuou a integrar sua tecnologia aos produtos do Facebook. Portanto, havia uma plataforma que oferecia recursos de realidade aumentada, Spark AR. Em agosto de 2019, a plataforma deixou o status beta e ficou dispon√≠vel para todos os usu√°rios que agora podem criar conte√∫do de realidade aumentada para o Facebook e o Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As m√°scaras foram concebidas como filtros para dar efeitos engra√ßados √† sua fisionomia com a subsequente coloca√ß√£o de uma selfie em uma rede social. Quanto aos jogos mascarados, n√£o encontrei tantos. Existe um Flying Face, um an√°logo do Flappy Bird, onde um p√°ssaro voa pela tela, e voc√™ precisa impedir que colidir com obst√°culos, piscando nos momentos certos. Eu tamb√©m vi um jogo em que voc√™ precisa pegar comida caindo da boca de cima para baixo. Um atirador como Invaders. E um corredor 3D onde um personagem corre ao longo de uma rua da cidade e pula obst√°culos. Talvez haja mais um pouco. Em geral, o t√≥pico √© bastante novo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O processo de cria√ß√£o de conte√∫do ocorre no ambiente de desenvolvimento Spark AR Studio, que pode ser baixado gratuitamente no Windows. Al√©m disso, vale a pena fazer o download do aplicativo Spark AR Player para testar os efeitos que voc√™ cria em dispositivos m√≥veis Andrioid ou iOS, para os quais esses efeitos s√£o, de fato, destinados. A conex√£o com o computador √© via cabo USB, pelo menos no meu caso com um smartphone Android. Depois de baixar a m√°scara atrav√©s do componente Facebook / sparkarhub e passar a modera√ß√£o, sua m√°scara (ou jogo) estar√° dispon√≠vel para todos os usu√°rios do Instagram da Internet. A m√°scara pode ser obtida por link direto ou na p√°gina de seu criador no Instagram.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o √© dif√≠cil entender como trabalhar no Spark AR Studio. </font><font style="vertical-align: inherit;">N√£o vou me debru√ßar sobre isso em detalhes, principalmente porque a Internet est√° cheia de li√ß√µes sobre esse t√≥pico. </font><font style="vertical-align: inherit;">Observo apenas que h√° duas maneiras de desenvolver um aplicativo mais ou menos interativo que envolve algo mais do que apenas aplicar algum tipo de sprite est√°tico no rosto: isso √© criar os chamados patches e escrever scripts. </font><font style="vertical-align: inherit;">O primeiro m√©todo se assemelha visualmente ao trabalho com materiais em um editor 3D, e o segundo √© apenas a programa√ß√£o em Javascript usando uma API especializada. </font><font style="vertical-align: inherit;">Eu escolhi a segunda op√ß√£o. </font><font style="vertical-align: inherit;">No entanto, ningu√©m pro√≠be combinar os dois m√©todos: a partir dos scripts, existe a possibilidade de acessar tudo o que est√° acontecendo nos patches.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artes gr√°ficas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, para iniciantes, seria bom criar alguns elementos gr√°ficos que ser√£o usados ‚Äã‚Äãno jogo. </font><font style="vertical-align: inherit;">Abra seu programa de modelagem 3D favorito e crie. </font><font style="vertical-align: inherit;">Estou usando o Blender. </font><font style="vertical-align: inherit;">Em princ√≠pio, voc√™ pode criar apenas sprites separados e perguntar a eles alguma l√≥gica de comportamento usando o Spark AR e n√£o usar o editor 3D. </font><font style="vertical-align: inherit;">Mas eu decidi fazer figuras volumosas de cruzes e dedos do p√©, para que eu n√£o pudesse prescindir desse editor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira coisa a fazer √© criar uma textura 2D. </font><font style="vertical-align: inherit;">Combine todas as texturas em um atlas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/9y/ii/n8/9yiin8wu1jf3emkzbnyjn88jmgq.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cetim de textura</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora sobre modelos 3D. Como espa√ßo 3D do jogo, √© usado um plano de dois tri√¢ngulos, no qual a marca√ß√£o de campo √© esticada (aqui est√° aquele fragmento de malha grande do atlas de textura). O atlas em si est√° com um canal alfa transparente. 9 quadrados azuis, tamb√©m constitu√≠dos por dois tri√¢ngulos cada, ser√£o inseridos no campo. Al√©m disso, al√©m dos nove azuis, o modelo 3D conter√° nas mesmas coordenadas 9 quadrados verdes e vermelhos que estar√£o ocultos no in√≠cio do jogo. O significado √© que, no estado normal, a cor de todos os quadrados do campo √© azul e verde e vermelho s√£o usados ‚Äã‚Äãcomo cursor para selecionar a posi√ß√£o em que voc√™ deseja definir uma cruz ou um zero, respectivamente. Al√©m disso, verde e vermelho s√£o usados ‚Äã‚Äãpara destacar a linha vencedora de tr√™s c√©lulas no final de cada rodada. Seria o suficiente, √© claro,use 9 quadrados azuis e apenas 3 quadrados verdes e vermelhos, mas voc√™ precisar√°, al√©m de mostrar / ocultar, definir algum tipo de l√≥gica de movimento. Pareceu-me que apenas escond√™-los e exibi-los sem nenhuma manipula√ß√£o das coordenadas no espa√ßo seria mais f√°cil, e o modelo 3D o carregaria de forma insignificante.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/vy/fk/bs/vyfkbs_c_hezcstqfoebd2xyjoy.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O campo de jogo</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
No jogo, as posi√ß√µes de tr√™s quadrados em cada um dos nove grupos, √© claro, coincidem. Aqui, eu apenas os espalhei verticalmente em uma das c√©lulas para demonstrar claramente em que consiste o modelo 3D como um todo. Observe que as caixas recebem nomes (na figura √† direita) de uma certa maneira: de b11 a b33, de g11 a g33 e de r11 a r33, em que cada d√≠gito muda no intervalo de 1 a 3. Em outras palavras, a letra indica uma cor, e os n√∫meros s√£o a linha e a coluna. √â necess√°rio acessar as caixas (malhas, na terminologia 3D) pelos nomes do script, para que seja conveniente ocult√°-las e exibi-las.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois modelei as figuras das cruzes e dos dedos, colocando-as tamb√©m em pares em cada c√©lula. </font><font style="vertical-align: inherit;">(Para maior clareza, ele elevou um dos zeros.) N√£o olhe para o fato de que sua textura √© t√£o "alegre" at√© agora. </font><font style="vertical-align: inherit;">Fiz isso pela conveni√™ncia de aplicar uma varredura UV. </font><font style="vertical-align: inherit;">Ent√£o, no atlas de textura, substitu√≠ as texturas das figuras por mais calmas, que voc√™ pode ver no pr√≥prio jogo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qq/qc/cp/qqqccp5siugamnwegcpegomgank.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pe√ßas do jogo</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Finalmente, eu modelei 4 setas planas que indicar√£o a dire√ß√£o o cursor se move no jogo. </font><font style="vertical-align: inherit;">Apliquei uma textura em sua geometria: na folha de sprite, esta √© uma seta triangular branca em um tra√ßo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exportamos todos os modelos 3D (todos os tr√™s, isto √©, o campo, as formas e as setas) para o formato FBX, que requer o Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Importar para o Spark AR Studio</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, inicie o Spark AR Studio e importe modelos 3D para l√°. Eles aparecer√£o na lista de ativos no canto inferior esquerdo. Ao mesmo tempo, criaremos para n√≥s uma m√°scara tem√°tica com tinta de guerra na forma de ‚Äútatuagens‚Äù de uma cruz e um dedo no rosto. Voc√™ pode aprender sobre como criar uma m√°scara texturizada a partir de milhares de li√ß√µes na rede global ou da documenta√ß√£o oficial da plataforma. N√£o vou me concentrar nisso. Resumindo: baixe o "espa√ßo em branco", abra-o no seu editor de gr√°ficos favorito, desenhe algo em cima, salve, importe a imagem para o Spark AR Studio, ajuste os par√¢metros de material e textura.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/pv/-d/aw/pv-dawxo7-dqxkgd2rxga-umd7w.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arraste nossos modelos de Ativos para a lista de cenas acima. Al√©m disso, precisamos que eles sejam renderizados em uma determinada ordem: primeiro o campo (field.fbx), depois o modelo das figuras (fieldxo.fbx) e, finalmente, as setas (setas.fbx). Al√©m disso, na camada inferior tamb√©m haver√° faceTracker com faceMesh - essa √© uma m√°scara para o seu rosto. Voc√™ provavelmente pode lan√ßar modelos no palco em qualquer ordem, no entanto, pretendo desativar a classifica√ß√£o de profundidade para todos os materiais (exceto figuras) - Teste de profundidade e Buffer de grava√ß√£o para profundidade (nas propriedades do material), para que sejam renderizados na ordem que eu defino manualmente: m√°scara - campo - figuras - setas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos materiais de cada camada, defina Blend Mode = Alpha para que os objetos fiquem transparentes nas partes em que isso √© especificado na textura. </font><font style="vertical-align: inherit;">E definiremos as texturas Filtering = Medium para suaviza√ß√£o. </font><font style="vertical-align: inherit;">(Se voc√™ selecionar um material ou textura na lista √† esquerda, todas as propriedades dispon√≠veis ser√£o exibidas no lado direito da janela.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, adicione o elemento Script ao elemento Ativos (clicando no elemento esquerdo + Adicionar ativo). </font><font style="vertical-align: inherit;">E al√©m dos modelos 3D, o script.js aparecer√° na lista, clicando no qual seu editor de texto externo ser√° aberto. </font><font style="vertical-align: inherit;">Quando voc√™ salva no editor, seu programa √© reiniciado no Spark AR Studio.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programa√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No in√≠cio do script, conecte os m√≥dulos que precisamos neste projeto. </font><font style="vertical-align: inherit;">Esta √© uma cena, rastreamento de rosto, m√≥dulos para trabalhar com tempo, som e anima√ß√£o.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> Scene = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Scene'</span>);
<span class="hljs-keyword">const</span> FaceTracking = <span class="hljs-built_in">require</span>(<span class="hljs-string">'FaceTracking'</span>);
<span class="hljs-keyword">const</span> Time = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Time'</span>);
<span class="hljs-keyword">const</span> Audio = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Audio'</span>);
<span class="hljs-keyword">const</span> Animation = <span class="hljs-built_in">require</span>(<span class="hljs-string">'Animation'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem muitas maneiras de implementar o jogo da velha em Javascript. </font><font style="vertical-align: inherit;">Este artigo n√£o √© sobre como implementar este jogo em uma determinada linguagem de programa√ß√£o, mas sobre como gerenciar com a ajuda de uma pessoa. </font><font style="vertical-align: inherit;">Descreverei pontos-chave espec√≠ficos da intera√ß√£o com o sistema Spark AR, para que o princ√≠pio seja entendido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acesso ao fragmento nomeado do modelo 3D (malha), por exemplo, ao quadrado azul na primeira linha, segunda coluna do campo de jogo:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'b12'</span>);</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Lembre-se de b12 - foi assim que chamamos essa malha no editor 3D.)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Acesso √† cruz nesta posi√ß√£o:</font></font><br>
<br>
<pre><code class="javascript hljs">Scene.root.find(<span class="hljs-string">'x12'</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Escondendo um dedo do p√© (o), colocando uma cruz (x) e colorindo em verde (g) as c√©lulas do campo '32' (terceira linha, segunda coluna):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// figure</span>
Scene.root.find(<span class="hljs-string">'o32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'x32'</span>).hidden = <span class="hljs-literal">false</span>;
<span class="hljs-comment">// background</span>
Scene.root.find(<span class="hljs-string">'b32'</span>).hidden = <span class="hljs-literal">true</span>;<font></font>
Scene.root.find(<span class="hljs-string">'g32'</span>).hidden = <span class="hljs-literal">false</span>;<font></font>
Scene.root.find(<span class="hljs-string">'r32'</span>).hidden = <span class="hljs-literal">true</span>;</code></pre><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/xg/bz/tkxgbzthiw7ubagtismtw7pmedk.jpeg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cruz verde com luz de fundo verde no campo '32'.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Inscreva-se nos eventos de rota√ß√£o e inclina√ß√£o da cabe√ßa para se movimentar pelo campo.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//vert: fov+ back-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationX.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//hor: rt+ dn-</span>
FaceTracking.face(<span class="hljs-number">0</span>).cameraTransform.rotationY.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">var</span> v = event.newValue;<font></font>
	...<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo √© muito simples aqui. </font><font style="vertical-align: inherit;">Retiramos do evento os valores da rota√ß√£o ou inclina√ß√£o da cabe√ßa (event.newValue) e verificamos se est√£o fora de um determinado intervalo. </font><font style="vertical-align: inherit;">Se sim, mova o cursor (caixa verde) visualmente na dire√ß√£o desejada. </font><font style="vertical-align: inherit;">Um valor negativo da rota√ß√£o da cabe√ßa corresponde √† sua rota√ß√£o para a esquerda, positiva - para a direita. </font><font style="vertical-align: inherit;">Da mesma forma - inclinar a cabe√ßa para frente e para tr√°s para se mover ao longo das linhas. </font><font style="vertical-align: inherit;">Todo o intervalo √© de -1 a +1. </font><font style="vertical-align: inherit;">Assim, voc√™ pode implementar o movimento do cursor e ...</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E ent√£o me dei conta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De repente, percebi que controlar o cursor no campo da maneira que eu escolhi era inconveniente: voc√™ precisa virar a cabe√ßa para mover uma c√©lula, retornar a cabe√ßa √† sua posi√ß√£o original, gir√°-la novamente para o pr√≥ximo passo e assim por diante. E por que n√£o usar apenas os valores fracion√°rios de virar a cabe√ßa para os lados e inclinar-se para frente e para tr√°s para focar imediatamente a c√©lula desejada no campo? Ou seja, como indicar ao cursor sua posi√ß√£o com um olhar, ou melhor, com a dire√ß√£o da cabe√ßa. E ent√£o o primeiro m√©todo √© um treino muito dif√≠cil para o pesco√ßo. A educa√ß√£o f√≠sica √©, obviamente, boa, mas n√£o na mesma medida. Naturalmente, lembraremos a posi√ß√£o atual em algum lugar em ap.cur = {x: 1, y: 1} para apagar o cursor na posi√ß√£o anterior e salvar as coordenadas da nova posi√ß√£o, que √© subsequentemente necess√°ria para o "clique". A prop√≥sitoflechas visuais para indicar a dire√ß√£o do movimento do cursor n√£o s√£o mais necess√°rias: lan√ßamos um modelo 3D (flechas.fbx) do projeto. Voc√™ tamb√©m pode apagar a imagem da seta da textura.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Piscar duas vezes?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E agora chegamos ao mais interessante. </font><font style="vertical-align: inherit;">Clique duas vezes nos olhos. </font><font style="vertical-align: inherit;">Admita, voc√™ queria fazer isso a partir do momento em que aprendeu sobre isso no in√≠cio do artigo? </font><font style="vertical-align: inherit;">Agora voc√™ dir√° a seus amigos que o mouse j√° est√° desatualizado e que o piscar duplo √© usado hoje por um clique! </font><font style="vertical-align: inherit;">Piscar duas vezes. </font><font style="vertical-align: inherit;">Por que dobrar? </font><font style="vertical-align: inherit;">Tudo √© simples: uma √∫nica pessoa involuntariamente periodicamente, portanto, pendurar eventos em um √∫nico piscar de olhos seria sadismo.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/qb/ke/8j/qbke8jqkze91tmgkb2xrhxhjrbm.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Spark AR, h√° eventos leftEye.openness e rightEye.openness, assinando o qual, voc√™ pode obter o valor de abertura de cada olho em event.newValue no intervalo de 0 a 1. Consideraremos o olho fechado com um valor menor que 0,1. </font><font style="vertical-align: inherit;">E chamaremos a fun√ß√£o de processamento de piscada ap.blink1 () (ap √© um espa√ßo para nome, √© apenas mais conveniente para mim).</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).leftEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});<font></font>
<font></font>
<span class="hljs-comment">//leftEye</span>
FaceTracking.face(<span class="hljs-number">0</span>).rightEye.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &lt; <span class="hljs-number">0.1</span>) {<font></font>
		ap.blink1();<font></font>
	};<font></font>
});</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na fun√ß√£o de processamento de piscada propriamente dita, definimos o intervalo m√≠nimo entre as piscadas de 200 milissegundos para que essa fun√ß√£o n√£o funcione imediatamente duas vezes ao piscar com os dois olhos, pois sua chamada est√° pendurada em cada olho. </font><font style="vertical-align: inherit;">Eu acho que est√° claro. </font><font style="vertical-align: inherit;">Al√©m disso, definimos o tempo m√°ximo de piscar duplo - 1 segundo. </font><font style="vertical-align: inherit;">Se nos ajustarmos a esse intervalo, a fun√ß√£o action () funcionar√°, o que exibir√° a cruz na posi√ß√£o atual. </font><font style="vertical-align: inherit;">Ao mesmo tempo, penduraremos action () no evento mouth.openness - para que o jogador tenha a op√ß√£o de colocar uma cruz em piscar duas vezes ou em abrir a boca.</font></font><br>
<br>
<pre><code class="javascript hljs">blink1:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">var</span> tmNew = <span class="hljs-built_in">Date</span>.now();
	<span class="hljs-keyword">if</span>  (tmNew - ap.blinkStart &gt; <span class="hljs-number">200</span>) {<font></font>
		ap.blinkCount++;<font></font>
		<span class="hljs-keyword">if</span>  (ap.blinkCount &gt; <span class="hljs-number">1</span>) {
			<span class="hljs-comment">//action</span>
			<span class="hljs-keyword">if</span> (tmNew - ap.blinkStart &lt; <span class="hljs-number">1000</span>) {<font></font>
				ap.action();<font></font>
			};<font></font>
			ap.blinkCount = <span class="hljs-number">0</span>;<font></font>
			ap.blinkStart = <span class="hljs-number">0</span>;<font></font>
		} <span class="hljs-keyword">else</span> {<font></font>
			ap.blinkStart = tmNew;<font></font>
		};<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-attr">action</span>:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">if</span>  (ap.fProc == <span class="hljs-literal">false</span>) {<font></font>
		ap.fProc = <span class="hljs-literal">true</span>;<font></font>
		xo.putx();<font></font>
	};<font></font>
},<font></font>
<font></font>
<span class="hljs-comment">//mouth</span>
FaceTracking.face(<span class="hljs-number">0</span>).mouth.openness.monitor().subscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
	<span class="hljs-keyword">if</span>  (event.newValue &gt; <span class="hljs-number">0.2</span>) {<font></font>
		ap.action();<font></font>
	};<font></font>
});</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sons</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontrei-os nas se√ß√µes livres de royalties de v√°rios sites de efeitos sonoros. Detalhes importantes: O Spark AR requer arquivos de som de um determinado formato, a saber, M4A, mono, 44,1 kHz, 16 bits. Conversores online de wav e mp3 para m4a est√£o em estoque na rede global. Eu adicionei som a quatro eventos: mover, ganhar punhais, ganhar tac toe e empatar. O volume total de todos os sons ap√≥s a convers√£o foi de 105 Kb. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar sons em um script, voc√™ precisa conectar um m√≥dulo de √°udio no script, adicionar o n√∫mero desejado de alto-falantes √† cena pelo n√∫mero de sons (eu tenho Speaker0, Speaker1, Speaker2, Speaker3), adicionar o m√≥dulo Playback Controllers ao Assets, criar o n√∫mero necess√°rio de subitens audioPlaybackController nele de acordo com o n√∫mero de sons e conecte um som a cada alto-falante.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/zz/ib/s8/zzibs8wwtsk_0dzinsuzxu4klb4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, voc√™ pode reproduzir o som do script da seguinte maneira (por exemplo, o som de um clique):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> audioClick = Audio.getPlaybackController(<span class="hljs-string">'audioPlaybackControllerClick'</span>);<font></font>
audioClick.reset();<font></font>
audioClick.setPlaying(<span class="hljs-literal">true</span>);</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Constru√ß√£o final</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para criar constru√ß√µes para todos os dispositivos m√≥veis suportados (Android, iOs), basta clicar em Arquivo -&gt; Exportar. O volume do jogo para cada plataforma m√≥vel com todos os modelos e texturas 3D no meu caso foi de cerca de 1 Mb. Em seguida, voc√™ precisa acessar o Spark AR Hub no Facebook / sparkarhub no navegador e fazer upload do arquivo exportado para l√°. Voc√™ tamb√©m precisa preencher uma descri√ß√£o, pesquisar palavras-chave e baixar um v√≠deo de demonstra√ß√£o. Al√©m disso, deve ser filmado no telefone atrav√©s da c√¢mera do Instagram. Para fazer isso, no hub, h√° uma se√ß√£o "Visualizar c√¢mera" que cont√©m um link. Este link pode ser aberto em um dispositivo m√≥vel. O aplicativo Instagram ser√° iniciado e sua m√°scara (jogo) ser√° aberta nele. O link tamb√©m pode ser enviado para teste a todos os seus amigos, que, √© claro, devem ter um smartphone com o aplicativo Instagram instalado.At√© o final do processo de modera√ß√£o, a m√°scara n√£o estar√° vis√≠vel para todos os usu√°rios e eles n√£o poder√£o adicion√°-la √† sua lista de efeitos at√© que seja vis√≠vel apenas por este link.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O processo de modera√ß√£o geralmente leva alguns dias (pode levar at√© 10 dias √∫teis). Pelo que entendi, a princ√≠pio o efeito est√° sujeito a testes de m√°quina, pelo menos um v√≠deo de demonstra√ß√£o - com certeza, porque um segundo ap√≥s o envio recebi uma mensagem de que a modera√ß√£o n√£o passou. Raz√£o - o v√≠deo cont√©m texto. Em geral, por alguma raz√£o, o texto mascarado n√£o √© fundamentalmente bem-vindo, como dizem as regras. Eu tive que redesenhar a interface do jogo para que a pontua√ß√£o n√£o ca√≠sse constantemente acima da cabe√ßa do jogador, como eu havia feito antes, mas aparecesse apenas no final de cada rodada. E volte a gravar o v√≠deo. Depois de fazer todas as altera√ß√µes, reenviei meu jogo com modera√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tr√™s dias depois, o jogo foi aprovado, depois de movido para a se√ß√£o "Estilos de c√¢mera". </font><font style="vertical-align: inherit;">Sinceramente, n√£o me lembro em qual se√ß√£o eu a inseri inicialmente (e a se√ß√£o ou, em outras palavras, a categoria, precisava ser selecionada). </font><font style="vertical-align: inherit;">Isso n√£o √© √≥bvio, j√° que n√£o h√° se√ß√£o de jogos para o Instagram. </font><font style="vertical-align: inherit;">Mas tudo bem, agora vamos saber onde colocar novos jogos. </font><font style="vertical-align: inherit;">Se os jogos aparecerem no futuro, provavelmente o Instagram deve adicionar uma nova se√ß√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode experimentar uma m√°scara acessando o perfil de seu criador no Instagram e clicando no √≠cone de suas m√°scaras abaixo (emoticon com duas vantagens). </font><font style="vertical-align: inherit;">O mesmo se aplica, √© claro, aos jogos mascarados. </font><font style="vertical-align: inherit;">Anteriormente, durante o teste beta de m√°scaras, tamb√©m era necess√°rio assinar o autor. </font><font style="vertical-align: inherit;">Mas agora esta regra foi cancelada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles n√£o pagam dinheiro para criar m√°scaras e n√£o h√° loja de m√°scaras pagas onde possam ser vendidas, como aplicativos em lojas conhecidas. Al√©m disso, voc√™ n√£o precisa pagar pelo posicionamento da m√°scara criada no seu perfil. S√≥ √© necess√°rio aguardar a passagem da modera√ß√£o. No entanto, muitos blogueiros e empresas ordenam o desenvolvimento de m√°scaras de marca para si. Bem, √© claro, voc√™ pode pedir aos seus assinantes que experimentem as m√°scaras que voc√™ criou e joguem seus jogos, transmitindo tudo isso para a hist√≥ria do Instagram. Tais a√ß√µes podem produzir o chamado efeito viral, especialmente se o jogo for interessante. Isso pode ajudar a promover sua conta. No entanto, agora nem todo mundo tem pregui√ßa de fazer m√°scaras. Mas a ideia dos jogos mascarados do Instagram ainda √© bastante nova. Al√©m disso, h√° um limite de entrada mais alto e menos concorr√™ncia,j√° que nem todo criador de m√°scaras √© um programador para escrever um jogo completo.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt486480/index.html">Waymo Robocars (Google) come√ßa a entregar pacotes em Phoenix, EUA</a></li>
<li><a href="../pt486482/index.html">Rostos √∫nicos: contagem de visitantes, busca de pessoas de fora, identifica√ß√£o em sistemas de reconhecimento</a></li>
<li><a href="../pt486484/index.html">Novo coronav√≠rus nCOV / 2019-nCoV / NCP / COVID19: previs√µes, estat√≠sticas, prote√ß√£o, not√≠cias [4th reprint, rev.07.03]</a></li>
<li><a href="../pt486488/index.html">Sistema operacional Sivelkiriya: Descri√ß√£o introdut√≥ria</a></li>
<li><a href="../pt486492/index.html">Icloud phishers e onde eles moram</a></li>
<li><a href="../pt486500/index.html">Componentes da Web e padr√µes abertos</a></li>
<li><a href="../pt486506/index.html">Edi√ß√£o n¬∫ 30: Treinamento em TI - problemas e desafios atuais das principais empresas</a></li>
<li><a href="../pt486510/index.html">Exibindo informa√ß√µes de exce√ß√£o antes da sa√≠da de emerg√™ncia</a></li>
<li><a href="../pt486512/index.html">Brevemente sobre como ensinar as MFPs da Brother a digitalizar no Windows Server</a></li>
<li><a href="../pt486514/index.html">Leitura de fim de semana: 10 materiais sobre r√©plicas de placas de som, bibliotecas de som abertas e software de √°udio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>