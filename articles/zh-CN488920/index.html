<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📺 🥑 ⛵️ 确定Kubernetes中Kafka集群的适当大小 💷 ↩️ 👨🏽‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注意佩雷夫。：在本文中，Banzai Cloud共享了一个使用其特殊实用程序的示例，以促进Kubernetes中Kafka的操作。这些说明说明了如何确定最佳的基础结构大小并配置Kafka本身以实现所需的吞吐量。
 
 
 
 Apache Kafka是一个分布式流媒体平台，用于创建可靠，可伸缩和高性...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>确定Kubernetes中Kafka集群的适当大小</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/488920/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意佩雷夫。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：在本文中，Banzai Cloud共享了一个使用其特殊实用程序的示例，以促进Kubernetes中Kafka的操作。这些说明说明了如何确定最佳的基础结构大小并配置Kafka本身以实现所需的吞吐量。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/hw/a_/x4/hwa_x4pat6hztyyuh8lorl015pq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Apache Kafka是一个分布式流媒体平台，用于创建可靠，可伸缩和高性能的实时流媒体系统。 Kubernetes可以扩展其令人印象深刻的功能。为此，我们开发了</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kafka开源运算符</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和一个名为</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"> Supertubes</font></a><font style="vertical-align: inherit;">的工具</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它们使您可以在Kubernetes中运行Kafka并使用其各种功能，例如微调代理的配置，基于带有重新平衡的指标进行扩展，机架感知（硬件资源的意识），“软” </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（优雅）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滚动更新等。</font></font><a name="habracut"></a><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在您的集群中尝试Supertubes：</font></font><br>
<br>
<pre><code class="bash hljs">curl https://getsupertubes.sh | sh  supertubes install -a --no-democluster --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
或参考</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您还可以阅读有关Kafka的某些功能，这些功能在Supertubes和Kafka运算符的帮助下是自动化的。</font><font style="vertical-align: inherit;">我们已经在博客中写过关于它们的信息：</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不好了！</font><font style="vertical-align: inherit;">卡夫卡的另一个Kubernetes运营商</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据Prometheus指标监控和操作Kafka</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka在Kubernetes上的意识</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Istio基准上运行Apache Kafka</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Kafka运算符对用户进行身份验证和访问控制的集群</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka在Kubernetes上滚动升级和动态配置</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka的Envoy协议过滤器，网格化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当您决定在Kubernetes中部署Kafka集群时，可能会遇到确定基础架构的最佳大小以及需要微调Kafka配置以满足带宽需求的问题。</font><font style="vertical-align: inherit;">每个代理的最大性能取决于其核心基础结构组件的性能，例如内存，处理器，磁盘速度，网络带宽等。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理想情况下，代理的配置应使基础结构的所有元素都得到最大程度的利用。但是，在现实生活中，此设置非常复杂。用户更有可能将代理配置为最大化使用一个或两个组件（磁盘，内存或处理器）。通常，当代理程序的配置允许您“使用全部”最慢的组件时，该代理程序将显示出最佳性能。这样我们就可以大致了解一个经纪人可以处理的负载。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从理论上讲，我们还可以估计在给定负载下工作所需的代理数量。但是，实际上，存在许多不同级别的配置选项，以至于很难（如果不是不可能）评估某种配置的潜​​在性能。换句话说，从某些给定的性能开始计划配置是非常困难的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于Supertubes用户，我们通常采用以下方法：从某种配置（基础架构+设置）开始，然后测量其性能，调整代理设置并再次重复该过程。直到充分利用最慢的基础结构组件的潜力为止。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这样，我们对集群需要处理多少负载的代理有一个更清晰的了解（代理的数量还取决于其他因素，例如确保稳定性的消息副本的最小数量，分区领导者的数量等）。另外，我们了解到需要哪种基础架构组件垂直扩展。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本文将讨论我们采取的步骤，以从初始配置中最慢的组件中“榨取一切”，并测量Kafka集群的吞吐量。高度弹性的配置至少需要三个工作代理（</font></font><code>min.insync.replicas=3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）分为三个不同的辅助功能区。</font><font style="vertical-align: inherit;">为了配置，扩展和监视Kubernetes基础架构，我们使用了自己的混合云容器管理平台</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pipeline</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它支持内部部署（裸机，VMware）和五种类型的云（阿里巴巴，AWS，Azure，谷歌，甲骨文）及其任意组合。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于Kafka集群的基础架构和配置的思考</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于以下示例，我们选择AWS作为云服务提供商，并选择EKS作为Kubernetes发行版。</font><font style="vertical-align: inherit;">可以使用</font><font style="vertical-align: inherit;">经CNCF认证的Banzai Cloud的Kubernetes发行版</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PKE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来实现类似的配置</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">磁碟</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
亚马逊提供</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各种类型的EBS卷</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">SSD是</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gp2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">基础</font><font style="vertical-align: inherit;">，但是，为了确保高吞吐量，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gp2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会消耗累积的贷款</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（I / O积分）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此我们首选</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">，它提供稳定的高吞吐量。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例类型</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kafka的性能高度依赖于操作系统的页面缓存，因此我们需要具有足够内存以供代理（JVM）和页面缓存使用的实例。实例</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.2xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个不错的开始，因为它具有16 GB的内存，并且已</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对使用EBS进行了优化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。其缺点是每24小时最多只能提供30分钟的最高性能。如果您的工作负载需要较长时间才能达到最佳性能，请查看其他类型的实例。我们就是这样做的，在</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处</font><i><font style="vertical-align: inherit;">停止</font></i><font style="vertical-align: inherit;">。它提供的最大吞吐量为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">593.75 Mb / s。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">EBS </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io1卷</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的最大吞吐量</font><font style="vertical-align: inherit;">高于</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例的</font><i><font style="vertical-align: inherit;">吞吐量</font></i><font style="vertical-align: inherit;">，因此，最慢的基础结构元素可能是</font><i><font style="vertical-align: inherit;">此类</font></i><font style="vertical-align: inherit;">实例</font><font style="vertical-align: inherit;">的I / O吞吐量（这也应由我们的负载测试结果证实）。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与VM实例和磁盘的性能相比，网络带宽应相当大，否则网络将成为瓶颈。</font><font style="vertical-align: inherit;">在我们的案例中，</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络接口</font><font style="vertical-align: inherit;">支持的速度高达10 Gb / s，这明显高于VM的I / O实例的带宽。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经纪人部署</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
应该将代理部署（在Kubernetes中计划）到专用节点，以避免与其他进程争夺处理器，内存，网络和磁盘资源。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java版本</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
逻辑选择是Java 11，因为从JVM正确确定运行代理的容器可用的处理器和内存的意义上说，它与Docker兼容。</font><font style="vertical-align: inherit;">知道处理器限制很重要，因此JVM在内部透明地设置了GC线程和JIT编译器线程的数量。</font><font style="vertical-align: inherit;">我们</font></font><code>banzaicloud/kafka:2.13-2.4.0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Java 11中</font><font style="vertical-align: inherit;">使用了</font><font style="vertical-align: inherit;">包含Kafka 2.4.0（Scala 2.13）</font><font style="vertical-align: inherit;">的Kafka映像</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您想了解有关Kubernetes上Java / JVM的更多信息，请查看我们的以下出版物：</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么我的Java应用程序被OOMKilled</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何为Java 10应用程序正确调整容器大小</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul></blockquote><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经纪人内存设置</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
设置代理的内存有两个关键方面：JVM和Kubernetes pod的设置。</font><font style="vertical-align: inherit;">为pod设置的内存限制必须大于最大堆大小，以便JVM在其自身的内存中以及Java活跃的Kafka使用的操作系统页面高速缓存中具有足够的空间。</font><font style="vertical-align: inherit;">在我们的测试中，我们使用参数运行Kafka代理</font></font><code>-Xmx4G -Xms2G</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且pod的内存限制为</font></font><code>10 Gi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，可以</font><font style="vertical-align: inherit;">根据容器的内存限制，</font><font style="vertical-align: inherit;">使用</font></font><code>-XX:MaxRAMPercentage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">来自动获取JVM的内存设置</font></font><code>-X:MinRAMPercentage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经纪人处理器设置</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般来说，可以通过增加Kafka使用的线程数来提高并发性，从而提高生产率。</font><font style="vertical-align: inherit;">可用于Kafka的处理器越多越好。</font><font style="vertical-align: inherit;">在我们的测试中，我们从6个处理器的限制开始，然后逐渐（迭代）将其数量增加到15个。此外，我们</font></font><code>num.network.threads=12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在代理设置中进行设置，以增加从网络接收并发送数据的流的数量。</font><font style="vertical-align: inherit;">立即发现追随者经纪人不能足够快地接收副本，他们提高</font></font><code>num.replica.fetchers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到4以提高追随者经纪人复制领导者邮件的速度。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">负载生成工具</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
确保在Kafka集群（正在运行基准测试）达到其最大负载之前，所选负载生成器的电势不会耗尽。</font><font style="vertical-align: inherit;">换句话说，有必要对负载生成工具的功能进行初步评估，并为其选择具有足够数量的处理器和内存的实例类型。</font><font style="vertical-align: inherit;">在这种情况下，我们的工具将产生比Kafka集群可消化的负载更多的负载。</font><font style="vertical-align: inherit;">经过多次实验，我们选择了</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge的</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三个副本</font><font style="vertical-align: inherit;">，每个</font><font style="vertical-align: inherit;">副本</font><font style="vertical-align: inherit;">中都启动了生成器。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标杆管理</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
性能评估是一个反复的过程，包括以下步骤：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 基础架构设置（EKS集群，Kafka集群，负载生成工具以及Prometheus和Grafana）；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 在一定时期内产生负载，以过滤收集的性能指标中的随机偏差；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 根据观察到的性能指标微调代理的基础结构和配置；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复此过程，直到达到所需的Kafka群集带宽水平。</font><font style="vertical-align: inherit;">同时，它应该稳定地重现并显示最小的带宽变化。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下一节描述了基准测试群集中执行的步骤。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具类</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下工具用于快速部署基本配置，负载生成和性能评估：</font></font><br>
<br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Banzai Cloud Pipeline</a>    EKS  Amazon c <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Prometheus</a> (   Kafka  )  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Grafana</a> (   ).   <b></b>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pipeline</a> ,    ,   ,  ,   ,      .</li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Sangrenel</a> —      Kafka.</li>
<li>  Grafana    Kafka  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetes Kafka</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Node Exporter</a>.</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supertubes CLI是在Kubernetes中配置Kafka集群的最简单方法。</font><font style="vertical-align: inherit;">Zookeeper，Kafka操作员，Envoy和许多其他组件均已安装并正确配置，以启动Kubernetes中可用于生产环境的Kafka集群。</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要安装</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">supertubes CLI，请</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给出的说明</font><font style="vertical-align: inherit;">。</font></font></li>
</ul></li>
</ul><br>
<img src="https://habrastorage.org/webt/98/xv/7i/98xv7iy-cxitdjo3xakipblgp5u.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EKS集群</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
准备一个带有专用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c5.4xlarge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作节点的EKS群集，</font><i><font style="vertical-align: inherit;">该</font></i><font style="vertical-align: inherit;">工作节点</font><font style="vertical-align: inherit;">位于各个可用区中，用于带有Kafka代理的Pod，以及用于负载生成器和监视基础结构的专用节点。</font></font><br>
<br>
<pre><code class="bash hljs">banzai cluster create -f https://raw.githubusercontent.com/banzaicloud/kafka-operator/master/docs/benchmarks/infrastructure/cluster_eks_202001.json</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当EKS群集运行时，启用其集成的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">监视服务</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -它将Prometheus和Grafana部署到群集。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka系统组件</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用supertubes CLI在EKS中安装Kafka系统组件（Zookeeper，kafka-operator）：</font></font><br>
<br>
<pre><code class="bash hljs">supertubes install -a --no-democluster --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt;</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卡夫卡集群</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，EKS使用</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gp2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> EBS </font><i><font style="vertical-align: inherit;">卷</font></i><font style="vertical-align: inherit;">，因此您需要基于</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">io1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卷</font><font style="vertical-align: inherit;">为Kafka集群</font><font style="vertical-align: inherit;">创建一个单独的存储类</font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="plaintext hljs">kubectl create -f - &lt;&lt;EOF<font></font>
apiVersion: storage.k8s.io/v1<font></font>
kind: StorageClass<font></font>
metadata:<font></font>
  name: fast-ssd<font></font>
provisioner: kubernetes.io/aws-ebs<font></font>
parameters:<font></font>
  type: io1<font></font>
  iopsPerGB: "50"<font></font>
  fsType: ext4<font></font>
volumeBindingMode: WaitForFirstConsumer<font></font>
EOF</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为代理设置参数，</font></font><code>min.insync.replicas=3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并在三个不同的可用区域中的节点上部署代理pod：</font></font><br>
<br>
<pre><code class="bash hljs">supertubes cluster create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f https://raw.githubusercontent.com/banzaicloud/kafka-operator/master/docs/benchmarks/infrastructure/kafka_202001_3brokers.yaml --<span class="hljs-built_in">wait</span> --timeout 600</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主题</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们同时启动了负载生成器的三个实例。</font><font style="vertical-align: inherit;">他们每个人都写自己的主题，也就是说，我们只需要三个主题：</font></font><br>
<br>
<pre><code class="bash hljs">supertubes cluster topic create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f -&lt;&lt;EOF<font></font>
apiVersion: kafka.banzaicloud.io/v1alpha1<font></font>
kind: KafkaTopic<font></font>
metadata:<font></font>
  name: perftest1<font></font>
spec:<font></font>
  name: perftest1<font></font>
  partitions: 12<font></font>
  replicationFactor: 3<font></font>
  retention.ms: <span class="hljs-string">'28800000'</span><font></font>
  cleanup.policy: delete<font></font>
EOF<font></font>
<font></font>
supertubes cluster topic create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f -&lt;&lt;EOF<font></font>
apiVersion: kafka.banzaicloud.io/v1alpha1<font></font>
kind: KafkaTopic<font></font>
metadata:<font></font>
    name: perftest2<font></font>
spec:<font></font>
  name: perftest2<font></font>
  partitions: 12<font></font>
  replicationFactor: 3<font></font>
  retention.ms: <span class="hljs-string">'28800000'</span><font></font>
  cleanup.policy: delete<font></font>
EOF<font></font>
<font></font>
supertubes cluster topic create -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt; -f -&lt;&lt;EOF<font></font>
apiVersion: kafka.banzaicloud.io/v1alpha1<font></font>
kind: KafkaTopic<font></font>
metadata:<font></font>
  name: perftest3<font></font>
spec:<font></font>
  name: perftest3<font></font>
  partitions: 12<font></font>
  replicationFactor: 3<font></font>
  retention.ms: <span class="hljs-string">'28800000'</span><font></font>
  cleanup.policy: delete<font></font>
EOF</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于每个主题，复制因子均为3-高可用性生产系统的最小建议值。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">负载生成工具</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们启动了负载生成器的三个实例（每个实例在一个单独的主题中编写）。</font><font style="vertical-align: inherit;">对于负载生成器的Pod，您需要注册节点相似性，以便仅在为其分配的节点上计划它们：</font></font><br>
<br>
<pre><code class="plaintext hljs">apiVersion: extensions/v1beta1<font></font>
kind: Deployment<font></font>
metadata:<font></font>
  labels:<font></font>
    app: loadtest<font></font>
  name: perf-load1<font></font>
  namespace: kafka<font></font>
spec:<font></font>
  progressDeadlineSeconds: 600<font></font>
  replicas: 1<font></font>
  revisionHistoryLimit: 10<font></font>
  selector:<font></font>
    matchLabels:<font></font>
      app: loadtest<font></font>
  strategy:<font></font>
    rollingUpdate:<font></font>
      maxSurge: 25%<font></font>
      maxUnavailable: 25%<font></font>
    type: RollingUpdate<font></font>
  template:<font></font>
    metadata:<font></font>
      creationTimestamp: null<font></font>
      labels:<font></font>
        app: loadtest<font></font>
    spec:<font></font>
      affinity:<font></font>
        nodeAffinity:<font></font>
          requiredDuringSchedulingIgnoredDuringExecution:<font></font>
            nodeSelectorTerms:<font></font>
            - matchExpressions:<font></font>
              - key: nodepool.banzaicloud.io/name<font></font>
                operator: In<font></font>
                values:<font></font>
                - loadgen<font></font>
      containers:<font></font>
      - args:<font></font>
        - -brokers=kafka-0:29092,kafka-1:29092,kafka-2:29092,kafka-3:29092<font></font>
        - -topic=perftest1<font></font>
        - -required-acks=all<font></font>
        - -message-size=512<font></font>
        - -workers=20<font></font>
        image: banzaicloud/perfload:0.1.0-blog<font></font>
        imagePullPolicy: Always<font></font>
        name: sangrenel<font></font>
        resources:<font></font>
          limits:<font></font>
            cpu: 2<font></font>
            memory: 1Gi<font></font>
          requests:<font></font>
            cpu: 2<font></font>
            memory: 1Gi<font></font>
        terminationMessagePath: /dev/termination-log<font></font>
        terminationMessagePolicy: File<font></font>
      dnsPolicy: ClusterFirst<font></font>
      restartPolicy: Always<font></font>
      schedulerName: default-scheduler<font></font>
      securityContext: {}<font></font>
      terminationGracePeriodSeconds: 30</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
需要注意的几点：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 负载生成器会生成512字节的消息，并以500条消息的批次将其发布到Kafka。</font></font></li>
<li>    <code>-required-acks=all</code>   ,          Kafka.  ,          ,  ,    ,  .           <i>(consumers)</i>   ,       ,       ,   .</li>
<li>     20 worker' (<code>-workers=20</code>).  worker  5 producer',     worker'   Kafka.      100 producer',        Kafka.</li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集群监控</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在对Kafka集群进行压力测试期间，我们还监控了其运行状况，以确保没有pod重启，不同步的副本以及最大的吞吐量，同时波动最小：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">负载生成器会编写有关已发布消息数和错误级别的标准统计信息。</font><font style="vertical-align: inherit;">错误的百分比应保留在值中</font></font><code>0,00%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由kafka-operator部署的</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">Cruise Control</font></a><font style="vertical-align: inherit;">提供了一个仪表板，我们还可以在该仪表板上监视集群的状态。</font><font style="vertical-align: inherit;">要查看此面板，请执行以下操作：</font></font><br>
<br>
<pre><code class="bash hljs">supertubes cluster cruisecontrol show -n kafka --kubeconfig &lt;path-to-eks-cluster-kubeconfig-file&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩小和扩展</font><font style="vertical-align: inherit;">的ISR级别</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（同步副本数）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为0。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测量结果</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个代理，消息大小-512字节</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过将分区均匀地分布在三个代理上，我们设法实现了</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约500 Mb / s（每秒约99万条消息）的性能</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ql/5s/kk/ql5skk9eq59vw1dxiptnpv5baoo.png"><br>
<br>
<img src="https://habrastorage.org/webt/ye/cg/rc/yecgrcrh-mrdchebbysisw4mg3a.png"><br>
<br>
<img src="https://habrastorage.org/webt/5i/t6/it/5it6itlq4hfnndz2f-refjm1sbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JVM虚拟机的内存消耗未超过2 GB：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pc/_s/-f/pc_s-fapugnsmx114p1rssgst8m.png"><br>
<br>
<img src="https://habrastorage.org/webt/2e/1-/qw/2e1-qwc0rb2fqk_bw_hkgr0jbl8.png"><br>
<br>
<img src="https://habrastorage.org/webt/m-/tr/nw/m-trnwodxrqpftqhnrnp35f25cy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
磁盘带宽达到了最大I / O带宽代理工作的所有三个实例上的节点：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tr/tx/tg/trtxtgaqntrbc_bwrxmxmxh9opu.png"><br>
<br>
<img src="https://habrastorage.org/webt/_k/ns/dh/_knsdhmjkkc2245qffym_pnkxge.png"><br>
<br>
<img src="https://habrastorage.org/webt/rq/xo/8x/rqxo8xwg5dualnt3uqt2jxmfeta.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从节点的内存使用情况数据来看，系统缓冲和缓存大约需要10-15 GB：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p3/ls/r6/p3lsr6ixa3wx0zfeowuqo_qlpq0.png"><br>
<br>
<img src="https://habrastorage.org/webt/aq/tn/fd/aqtnfdsjnp33e3buy5dxkrvojg4.png"><br>
<br>
<img src="https://habrastorage.org/webt/pi/aa/iv/piaaivarggmqsqiopmtx_doi4tg.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个代理，消息大小-100字节</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
随着消息大小的减少，吞吐量将减少约15-20％：处理每条消息所花费的时间会受到影响。</font><font style="vertical-align: inherit;">此外，处理器负载几乎翻了一番。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mp/9l/9l/mp9l9lcmuwuh866dce_v0puzrt0.png"><br>
<br>
<img src="https://habrastorage.org/webt/z0/ck/hd/z0ckhdrst6iqql9i5drcksb7y7i.png"><br>
<br>
<img src="https://habrastorage.org/webt/hu/dg/dp/hudgdpo3e8s0ft0zxd7tngwne3y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于代理节点仍具有未使用的内核，因此可以通过更改Kafka的配置来提高性能。</font><font style="vertical-align: inherit;">这不是一件容易的事，因此，要提高吞吐量，最好使用较大的消息。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4个代理，消息大小-512字节</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您只需添加新的代理并保持分区的平衡即可轻松提高Kafka集群的性能（这可确保代理之间的负载平均分配）。</font><font style="vertical-align: inherit;">在我们的情况下，添加代理后，群集吞吐量增加到</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">〜580 Mb / s（每秒约110万条消息）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">事实证明，增长幅度小于预期：这主要是由于分区的不平衡（并非所有经纪人都在机会高峰期工作）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8x/cs/nq/8xcsnqeafi6tom_rxrbb5jz1zmk.png"><br>
<br>
<img src="https://habrastorage.org/webt/_2/qm/2j/_2qm2jqmcig_qwnypgirtzwcnw0.png"><br>
<br>
<img src="https://habrastorage.org/webt/zn/vx/jm/znvxjmy9hpxm3c29l-x616hfyfa.png"><br>
<br>
<img src="https://habrastorage.org/webt/gm/mt/sc/gmmtscxckvpwqr3ypzmkz45jscu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JVM计算机的内存消耗保持在2 GB以下：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a7/w7/qh/a7w7qh73p6ug6ozgqksh224fanc.png"><br>
<br>
<img src="https://habrastorage.org/webt/pe/cn/gs/pecngsl4nhacfu1drnmevl3p96q.png"><br>
<br>
<img src="https://habrastorage.org/webt/ee/vh/ei/eevheiyiaf_sxnw8epxlsnizxak.png"><br>
<br>
<img src="https://habrastorage.org/webt/lz/gj/lb/lzgjlblbytxjujal32u1nmgjixo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分区不平衡影响了具有驱动器的代理的操作：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4w/ga/3j/4wga3j3ogq8d_pesoite7ln9alk.png"><br>
<br>
<img src="https://habrastorage.org/webt/jb/sh/rl/jbshrlplduwv4xrnfdhab65auy8.png"><br>
<br>
<img src="https://habrastorage.org/webt/3r/dw/ox/3rdwox-qntdekifec-vuoooozuc.png"><br>
<br>
<img src="https://habrastorage.org/webt/oz/ux/cd/ozuxcdtsqz-rfgwmun8iljtgxcq.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发现</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上面介绍的迭代方法可以扩展为涵盖更复杂的场景，包括数百个使用者，重新分区，滚动更新，pod重新启动等。所有这些使我们能够评估Kafka集群在各种条件下的功能极限，确定其工作瓶颈并找到应对方法。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们开发了Supertubes，可以快速，轻松地部署集群，对其进行配置，添加/删除代理和主题，响应警报，并确保Kafka在整个Kubernetes中都能正常工作。我们的目标是帮助专注于主要任务（“生成”和“使用” Kafka消息），并将Supertubes和Kafka的所有辛苦工作提供给操作员。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您对Banzai Cloud技术和开源项目感兴趣，请在</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LinkedIn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上订阅该公司</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">译者的PS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另请参阅我们的博客：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与K8s中的Redis运算符有关的一个故事，以及用于分析该数据库中数据的实用程序的简要概述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">畅通无阻的RabbitMQ迁移到Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自CoreOS的Zetcd：用... storage etcd替换ZooKeeper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。”</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN488908/index.html">KPI文案或对远程作者对员工和自由职业者的工作进行评估的功能</a></li>
<li><a href="../zh-CN488910/index.html">《爱与数学》一书。隐藏现实的心脏</a></li>
<li><a href="../zh-CN488912/index.html">Python新闻比特币价格预测</a></li>
<li><a href="../zh-CN488916/index.html">Cascadeur：掉猫的问题</a></li>
<li><a href="../zh-CN488918/index.html">数据工程师或die折：一个开发人员的故事</a></li>
<li><a href="../zh-CN488926/index.html">5个针对Microsoft AI工程师的免费课程</a></li>
<li><a href="../zh-CN488942/index.html">UX食客和团队的工件：它是什么，为什么需要它们，以及如何选择</a></li>
<li><a href="../zh-CN488946/index.html">Python控制台菜单</a></li>
<li><a href="../zh-CN488948/index.html">UPD。在Golang上测试REST API。12万[＃/秒]不是极限吗？</a></li>
<li><a href="../zh-CN488950/index.html">蜂窝机器中的时间</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>