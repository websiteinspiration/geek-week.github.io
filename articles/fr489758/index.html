<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🏫 🎻 📉 Angulaire: un exemple d'utilisation de NGRX 🤙🏾 💘 💂🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article est une continuation de l'article «Angular: An Introductory Introduction to NGRX».
 
 Exemple NGRX
 Dans notre exemple, il y aura une list...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Angulaire: un exemple d'utilisation de NGRX</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489758/"><img src="https://habrastorage.org/webt/rz/7h/ee/rz7heen5ey-lo47udm7sn4owfzg.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet article est une continuation de l'article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«Angular: An Introductory Introduction to NGRX».</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple NGRX</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans notre exemple, il y aura une liste d'utilisateurs, une page de détails utilisateur et quelques informations de configuration initiale que vous devriez obtenir lorsque vous démarrez l'application. </font><font style="vertical-align: inherit;">Nous allons implémenter quelques threads NGRX importants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plan d'action:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation de la bibliothèque</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création d'une structure de dossiers pour le stockage </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création de stockage et de valeurs initiales</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création d'actions</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création de réducteurs (réducteurs)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création d'effets</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création de sélecteurs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration finale</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation du stockage dans les composants</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors faisons-le ...</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation de la bibliothèque</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous allons utiliser Angle Cli pour créer le projet, puis nous ajouterons les bibliothèques ngrx. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Créez un projet:</font></font><br>
<br>
<pre><code class="bash hljs">ng new angular-ngrx --style=scss</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez les bibliothèques NGRX nécessaires:</font></font><br>
<br>
<pre><code class="bash hljs">npm install @ngrx/core @ngrx/store @ngrx/effects @ngrx/store-devtools @ngrx/router-store --save</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous installons presque toutes les bibliothèques de l'écosystème ngrx. </font><font style="vertical-align: inherit;">La plupart d'entre eux décrivent leur objectif assez clairement: le noyau, le stockage, les effets, mais il y en a un couple pour lequel vous vous demandez peut-être pourquoi ils sont nécessaires?</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">store-devtools</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Un puissant outil de débogage.</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">router-store</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Enregistre l'état du routeur angulaire dans le stockage.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Structure des dossiers pour le stockage</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par discuter de la structure des fichiers du référentiel. </font><font style="vertical-align: inherit;">Cette structure de fichiers et toute la configuration de stockage doivent exister dans le module principal de votre application, mais dans notre exemple, elle est absente, donc le stockage existera dans le module principal de notre application (les étapes sont presque les mêmes si vous le faites dans le module principal). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j2/pu/w_/j2puw_y4zbz0o1n1yemhvo9_ie0.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La structure des dossiers est une représentation de la composition de stockage réelle. </font><font style="vertical-align: inherit;">Vous aurez un dossier principal avec le nom «magasin» et cinq sous-dossiers qui représentent chacun des acteurs clés du magasin: «Actions», «Effets», «Redurs», «Sélecteurs» et «État».</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création de stockage et de valeurs initiales</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme nous l'avons mentionné précédemment, nous aurons deux sections principales: notre application, les utilisateurs et la configuration. </font><font style="vertical-align: inherit;">Pour les deux, nous devons créer un état et un état initial, et faire de même pour l'état de l'application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons créé deux interfaces pour la définition et la configuration des utilisateurs. </font><font style="vertical-align: inherit;">Nous en avons également un pour la réponse HTTP de l'utilisateur, c'est juste un tableau IUser. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/01/by/u-/01byu-tmzaa4tzpxzbr6ezfax5y.jpeg" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/hp/m7/l1/hpm7l1osf9nrlyjesvju9c33mxm.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par l'état de l'utilisateur (store / state / user.state.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i9/pl/l-/i9pll-liw2wtmhlnuas8b1n0dzy.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Que faisons-nous ici:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous créons et exportons une interface avec une structure d'environnement utilisateur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous faisons de même avec l'état utilisateur initial, qui implémente l'interface nouvellement créée.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour l'état de configuration, nous faisons de même (store / states / config.state.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/88/tb/xm/88tbxmezhb0cau7fbbrzv6kevi8.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, nous devons générer l'état de l'application (store / states / app.state.ts):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/in/mt/-t/inmt-tcdv5300xnatjpq9bix9os.jpeg" alt="image"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'état de l'application contient l'état et la configuration de l'utilisateur, ainsi que l'état du routeur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, nous définissons l'état initial de l'application.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfin, il exporte la fonction pour obtenir l'état initial (nous l'utiliserons plus tard).</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création d'actions</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous de lire la définition de l'action dont nous avons discuté dans l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article précédent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous devons créer des actions pour les utilisateurs et les paramètres. </font><font style="vertical-align: inherit;">Commençons par les actions utilisateur (store / actions / user.actions.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bj/34/rb/bj34rbgqv70s0mbqidrxbadtchk.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parcourons un peu le code:</font></font><br>
<br>
<ol>
<li>  Enum,     .  ,          , ,     .</li>
<li>          .      Action  ngrx. ,        ,        ,      .</li>
<li>,   ,    .     ,    , ,   .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et c'est tout ... créer des actions est facile. </font><font style="vertical-align: inherit;">Voyons à quoi ressemblent les actions de configuration (store / actions / config.actions.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lc/ay/ew/lcayewp9ls8yumaflh3wybi2tuc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rien de nouveau ici, vous vous sentez probablement maintenant à l'aise avec tout ce qui se passe dans ce fichier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Génial, nous avons déjà déterminé le statut et les actions ... créons des engrenages!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Création de boîtes de vitesses</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous de lire la définition des boîtes de vitesses dont nous avons discuté dans un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article précédent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous aurons des boîtes de vitesses qui répondent à certaines actions, car d'autres seront gérées par des effets que nous allons implémenter plus tard. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous aurons besoin d'un réducteur pour les utilisateurs et d'un autre pour la configuration, mais nous aurons également besoin de générer des réducteurs d'application, commençons par regarder les réducteurs d'utilisateurs (store / redurs / user.reducers.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ju/4j/7y/ju4j7ytjci0hkzq9zeceffolc-s.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
discutons de l'implémentation:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une déclaration de réduction reçoit un état et, dans ce cas, une action utilisateur et retourne un IUserState.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À l'aide de l'instruction switch, nous générons des observations pour chaque type d'action possible.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chaque cas renvoie un nouvel objet, qui est le résultat de la fusion de l'ancien état et de la nouvelle valeur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toutes les boîtes de vitesses ont un résultat par défaut, qui renvoie simplement l'état sans aucun changement.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et c'est tout. </font><font style="vertical-align: inherit;">Vous ne trouverez rien d'autre dans la boîte de vitesses. </font><font style="vertical-align: inherit;">Jetons un coup d'œil aux réducteurs de configuration (state / redurs / config.reducers.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ou/ky/3m/ouky3m_fpspiahaj5j4sgf5owvk.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, regardons les réducteurs d'application (store): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ej/66/hg/ej66hgbbt97ljvpbqs728feti9g.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, nous ajoutons tous les réducteurs à la carte des réducteurs de l'application. </font><font style="vertical-align: inherit;">Nous utilisons une carte de réduction d'action pour une vérification de type supplémentaire. </font><font style="vertical-align: inherit;">Plus tard, nous allons fournir cette application avec des réducteurs pour le module de magasin.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter des effets</font></font></h3><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assurez-vous de lire la définition des «effets», dont nous avons discuté dans un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article précédent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous avez probablement déjà remarqué que dans les boîtes de vitesses, nous ne traitons pas toutes les actions. </font><font style="vertical-align: inherit;">C'est parce que nous allons gérer les actions manquées dans les effets, car ces actions ont des effets secondaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commençons par les effets personnalisés (store / effects / user.effects.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2n/bk/2c/2nbk2cyc2d_rlrasu6cdi0qjyps.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de ce qui se passe dans ce fichier. </font><font style="vertical-align: inherit;">Essayons de les expliquer:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous déclarons nos effets personnalisés à l'aide d'un décorateur injecté.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous déclarons nos effets en utilisant le décorateur d'effets fourni par ngrx / Effects.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En utilisant les actions fournies par ngrx / Effects, nous allons démarrer le pipeline de notre opérateur pour cet effet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'étape suivante consiste à définir le type d'action d'effet à l'aide de l'opérateur ofType.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les parties suivantes sont les opérateurs rxjs que nous utilisons pour obtenir ce dont nous avons besoin (nous avons déjà un lien vers la documentation rxjs dans cet article).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enfin, dans la dernière instruction, Effect enverra une autre action.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le constructeur, nous implémentons les services que nous allons utiliser, les actions pour ngrx / Effects, et dans ce cas également le référentiel (notez qu'il s'agit d'une démo, et nous obtenons l'utilisateur sélectionné dans la liste des utilisateurs de notre référentiel).</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est presque la même structure que vous verrez avec n'importe quel effet. </font><font style="vertical-align: inherit;">Dans ce cas, nous envoyons uniquement une action réussie, mais nous pouvons envoyer des erreurs ou tout autre état que nous voulons traiter dans nos réducteurs d'application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Considérez les effets de configuration (store / effects / config.effects.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/vy/xo/rgvyxoxw13yif9tlsok083hyfhu.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps de parler des sélecteurs ...</font></font><br>
<br>
<h3> </h3><br>
<blockquote>   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>.</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cela n'a aucun sens de répéter les tranches de notre état partout, alors créons des sélecteurs que nous pouvons réutiliser. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme toujours, regardons d'abord les sélecteurs d'utilisateurs (store / selectors / user.selectors.ts): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h9/ki/nj/h9kinj8iveawvqfcy2ax6cbi_wu.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci est vraiment compréhensible car nous ne faisons aucune transformation de données dans nos sélecteurs, mais </font><font style="vertical-align: inherit;">renvoyons </font><font style="vertical-align: inherit;">simplement la tranche du magasin référencée par le sélecteur en utilisant la fonction createSelector de ngrx / store. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le premier paramètre est un fragment du stockage qui sera utilisé pour recevoir des données (il peut s'agir d'un tableau avec plusieurs parties de l'état), le deuxième paramètre est une fonction anonyme qui décidera ce que le sélecteur retournera.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Regardons les sélecteurs de configuration (store / selectors / config.selectors.ts):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rf/x3/sy/rfx3syjbo0zah5fkr3d5lyxm-6o.png" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration finale</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, nous avons créé tout ce dont notre stockage a besoin, mais il nous manque encore une chose: tout assembler. </font><font style="vertical-align: inherit;">Je vais le faire dans le module d'application, mais vous pouvez appliquer la même chose dans le module principal de votre application. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutons un module d'application: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/af/bv/op/afbvopehkmcitmm2xps9ch8mwdy.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
qu'avons-nous fait ici:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous importons nos boîtes de vitesses et les fournissons dans le module de stockage forRoot.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous importons nos effets et les fournissons à l'intérieur du tableau dans le module d'effets forRoot.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous mettons en place la configuration du module d'état du routeur qui fournit le routeur stateKey.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et nous ajoutons des outils de développement de magasin si l'environnement n'est pas en production.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux premières étapes sont nécessaires, tandis que les étapes 3 et 4 sont fortement recommandées, mais elles ne sont pas obligatoires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous avons enfin terminé ... nous pouvons utiliser notre stockage en composants!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation du stockage dans certains composants</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous approchons de la fin! </font><font style="vertical-align: inherit;">Voyons comment utiliser notre stockage ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D'abord, obtenons la configuration au démarrage de l'application:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/-w/kx/sq/-wkxsqjesnv939hqsrqu4w9aqoq.png" alt="image"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous ajoutons du stockage à notre composant app.com.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous définissons la propriété du composant sur la valeur du sélecteur dans la configuration, car nous voulons afficher certaines de ces informations en HTML.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chez onInit, nous soumettons l'action pour obtenir la configuration.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout ... Nous codons déjà un effet qui contrôlera cette action, et un réducteur qui gérera cet effet. </font><font style="vertical-align: inherit;">Dès que le magasin entre dans un nouvel état, le sélecteur changera la valeur de notre propriété. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comment associer cela à HTML: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wx/us/db/wxusdb0f2gbleczgbej7qiquuvk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dès que config $ aura une valeur, nous la verrons en HTML. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant la liste des utilisateurs (conteneurs / utilisateurs / utilisateurs.component.ts):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-s/xe/oi/-sxeoitbesiozalk-fx2apletno.png" alt="image"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout comme nous gérons la configuration, nous allons obtenir une liste d'utilisateurs. </font><font style="vertical-align: inherit;">Tout d'abord, nous injectons le référentiel dans le composant utilisateur.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sur onInit, nous publions une action pour obtenir des utilisateurs.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous créons une propriété pour le composant et lui attribuons une liste d'utilisateurs à l'aide du sélecteur de liste d'utilisateurs.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le HTML ressemble à ceci: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rg/2p/a2/rg2pa2kcp1kzmwzdcm3u1cjg89y.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous affichons la liste des utilisateurs dans le composant de présentation, envoyant la liste et associant l'utilisateur sélectionné à la fonction de navigation, qui peut être vue dans le composant conteneur d'utilisateur ci-dessus. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regardons le composant conteneur personnalisé:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/af/do/ge/afdogebu_sm4girkz_pheed6768.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ce composant reçoit l'identifiant de paramètre de la route activée, et vous êtes probablement déjà familier avec le reste, envoie l'identifiant comme paramètre, sélectionne l'utilisateur sélectionné ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous déboguez l'application, vous pouvez voir les outils de développement, qui sont assez simples à utiliser ... mais dans cet article, nous avons suffisamment étudié, et j'espère que vous pourrez facilement comprendre ces outils.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, j'ai essayé de fournir une introduction claire et compréhensible à NGRX, vous donnant tout ce que vous devez savoir pour commencer le développement à l'aide de cet outil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'espère vraiment que l'article vous aidera à comprendre le modèle d'action et vous recommande de le télécharger et de jouer un peu avec le code.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489744/index.html">Convertir la notation infixe en suffixe</a></li>
<li><a href="../fr489746/index.html">Dans la plupart des cas, la sérialisation dans Android n'est pas nécessaire</a></li>
<li><a href="../fr489750/index.html">Gestion d'un cluster Docker Swarm à l'aide de Swarmpit</a></li>
<li><a href="../fr489754/index.html">20 systèmes de gestion de projet, aperçu de 100 puces</a></li>
<li><a href="../fr489756/index.html">Créer un effet crayon en SVG</a></li>
<li><a href="../fr489760/index.html">Conscience et existence. Mécanique quantique sans paradoxes</a></li>
<li><a href="../fr489762/index.html">Un exemple simple d'analyse et d'analyse de données pour World of Tanks</a></li>
<li><a href="../fr489764/index.html">"The Destination a beaucoup de formes ..." ou nous automatisons le contrôle d'une ampoule à l'aide de CANNY 3 Tiny et d'une photorésistance</a></li>
<li><a href="../fr489768/index.html">Comment π combine des blocs en collision et un algorithme de recherche quantique</a></li>
<li><a href="../fr489770/index.html">Vidéo de MinskJS mitap: mon rapport sur les extensions de navigateur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>