<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéø ü§≥üèæ üöë Modelo de arquitetura MVI na multiplataforma Kotlin, parte 1 üë®üèº‚Äçüè´ üëø üë©üèø‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° cerca de um ano, fiquei interessado na nova tecnologia Kotlin Multiplatform. Ele permite que voc√™ escreva um c√≥digo comum e o compile para diferent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modelo de arquitetura MVI na multiplataforma Kotlin, parte 1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/501968/"><img src="https://habrastorage.org/webt/nl/1i/n-/nl1in-q1zjy6mzgvzrr875nd4lq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° cerca de um ano, fiquei interessado na nova tecnologia Kotlin Multiplatform. Ele permite que voc√™ escreva um c√≥digo comum e o compile para diferentes plataformas, enquanto tem acesso √† API deles. Desde ent√£o, tenho experimentado ativamente nesta √°rea e promovido essa ferramenta em nossa empresa. Um resultado, por exemplo, √© a nossa biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reaktive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Extens√µes reativas para multiplataforma Kotlin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos aplicativos Badoo e Bumble para desenvolvimento para Android, usamos o modelo de arquitetura MVI (para obter mais detalhes sobre nossa arquitetura, consulte o artigo de Zsolt Kocsi: ‚ÄúArquitetura </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moderna de MVI baseada em Kotlin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"). Trabalhando em v√°rios projetos, me tornei um grande f√£ dessa abordagem. Obviamente, n√£o pude perder a oportunidade de experimentar o MVI no Kotlin Multiplatform. Al√©m disso, o caso era adequado: precis√°vamos escrever exemplos para a biblioteca Reaktive. Ap√≥s essas minhas experi√™ncias, fiquei ainda mais inspirado pelo MVI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu sempre presto aten√ß√£o em como os desenvolvedores usam o Kotlin Multiplatform e como eles constroem a arquitetura desses projetos. De acordo com minhas observa√ß√µes, o desenvolvedor m√©dio do Kotlin Multiplatform √© na verdade um desenvolvedor Android que usa o modelo MVVM em seu trabalho simplesmente porque est√° acostumado a isso. Alguns aplicam adicionalmente ‚Äúarquitetura limpa‚Äù. No entanto, na minha opini√£o, o MVI √© mais adequado para a Kotlin Multiplatform, e ‚Äúarquitetura limpa‚Äù √© uma complica√ß√£o desnecess√°ria.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por isso, decidi escrever esta s√©rie de tr√™s artigos sobre os seguintes t√≥picos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma breve descri√ß√£o do modelo MVI, declara√ß√£o do problema e cria√ß√£o de um m√≥dulo comum usando o Kotlin Multiplatform.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integra√ß√£o de um m√≥dulo comum em aplicativos iOS e Android.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste de unidade e integra√ß√£o.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abaixo est√° o primeiro artigo da s√©rie. </font><font style="vertical-align: inherit;">Ser√° de interesse de todos que j√° usam ou est√£o planejando usar o Kotlin Multiplatform.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Percebo imediatamente que o objetivo deste artigo n√£o √© ensinar como trabalhar com a pr√≥pria Multiplataforma Kotlin. </font><font style="vertical-align: inherit;">Se voc√™ acha que n√£o possui conhecimento suficiente nessa √°rea, recomendo que voc√™ se familiarize primeiro com a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introdu√ß√£o e a documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (especialmente as </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">se√ß√µes</font></a><font style="vertical-align: inherit;"> " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concorr√™ncia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " e " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imutabilidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " para entender os recursos do modelo de mem√≥ria Kotlin / Native). </font><font style="vertical-align: inherit;">Neste artigo, n√£o descreverei a configura√ß√£o do projeto, m√≥dulos e outras coisas que n√£o est√£o relacionadas ao t√≥pico.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, vamos lembrar o que √© MVI. </font><font style="vertical-align: inherit;">A abrevia√ß√£o significa Model-View-Intent. </font><font style="vertical-align: inherit;">Existem apenas dois componentes principais no sistema:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo - uma camada de l√≥gica e dados (o modelo tamb√©m armazena o estado atual do sistema);</font></font></li>
<li> (View) ‚Äî UI-,     (states)     (intents).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O diagrama a seguir provavelmente j√° √© familiar para muitos: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5x/zj/2g/5xzj2gjuwvbtanwvgprrspjyfms.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, vemos esses componentes muito b√°sicos: o modelo e a apresenta√ß√£o. Tudo o resto s√£o os dados que circulam entre eles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â f√°cil ver que os dados se movem apenas em uma dire√ß√£o. Os estados v√™m do modelo e caem na visualiza√ß√£o para exibi√ß√£o, as inten√ß√µes v√™m da visualiza√ß√£o e entram no modelo para processamento. Essa circula√ß√£o √© chamada de fluxo de dados unidirecional. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na pr√°tica, um modelo √© frequentemente representado por uma entidade chamada Store (√© emprestada do Redux). No entanto, isso nem sempre acontece. Por exemplo, em nossa biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVICore, o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modelo √© chamado de Recurso.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m √© importante notar que o MVI est√° intimamente relacionado √† reatividade. </font><font style="vertical-align: inherit;">A apresenta√ß√£o dos fluxos de dados e sua transforma√ß√£o, bem como o gerenciamento do ciclo de vida das assinaturas, √© muito conveniente para implementar usando bibliotecas de programa√ß√£o reativas. </font><font style="vertical-align: inherit;">Um n√∫mero bastante grande deles j√° est√° dispon√≠vel, no entanto, ao escrever c√≥digo geral no Kotlin Multiplatform, podemos usar apenas bibliotecas de v√°rias plataformas. </font><font style="vertical-align: inherit;">Precisamos de abstra√ß√£o para fluxos de dados, precisamos da capacidade de conectar e desconectar suas entradas e sa√≠das, al√©m de realizar transforma√ß√µes. </font><font style="vertical-align: inherit;">No momento, conhe√ßo duas dessas bibliotecas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nossa biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reaktive</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - implementa√ß√£o de extens√µes reativas na multiplataforma Kotlin;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corotinas e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fluxo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - implementa√ß√£o de correntes de frio com corotinas Kotlin.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Formula√ß√£o do problema</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O objetivo deste artigo √© mostrar como usar o modelo MVI no Kotlin Multiplatform e quais s√£o as vantagens e desvantagens dessa abordagem. </font><font style="vertical-align: inherit;">Portanto, n√£o vou me apegar a nenhuma implementa√ß√£o espec√≠fica do MVI. </font><font style="vertical-align: inherit;">No entanto, usarei o Reaktive, porque os fluxos de dados ainda s√£o necess√°rios. </font><font style="vertical-align: inherit;">Se desejado, tendo entendido a id√©ia, o Reaktive pode ser substitu√≠do por corotinas e Flow. </font><font style="vertical-align: inherit;">Em geral, tentarei tornar nosso MVI o mais simples poss√≠vel, sem complica√ß√µes desnecess√°rias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para demonstrar o MVI, tentarei implementar o projeto mais simples que atenda aos seguintes requisitos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">suporte para Android e iOS;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demonstra√ß√£o de opera√ß√£o ass√≠ncrona (entrada-sa√≠da, processamento de dados, etc.);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o m√°ximo de c√≥digo comum poss√≠vel;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementa√ß√£o de UI com ferramentas nativas de cada plataforma;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">falta de Rx no lado da plataforma (para que voc√™ n√£o precise especificar depend√™ncias no Rx como uma "API").</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como exemplo, escolhi um aplicativo muito simples: uma tela com um bot√£o, clicando na qual uma lista com imagens arbitr√°rias de gatos ser√° baixada e exibida. </font><font style="vertical-align: inherit;">Para fazer upload de imagens, usarei a API aberta: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://thecatapi.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Isso permitir√° que voc√™ cumpra os requisitos de opera√ß√£o ass√≠ncrona, pois √© necess√°rio fazer o download de listas da Web e analisar o arquivo JSON. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ pode encontrar todo o c√≥digo-fonte do projeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em nosso GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introdu√ß√£o: abstra√ß√µes para MVI</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, precisamos apresentar algumas abstra√ß√µes para o nosso MVI. </font><font style="vertical-align: inherit;">Vamos precisar dos componentes b√°sicos - o modelo e a visualiza√ß√£o - e algumas tipealias.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typealiases</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para processar inten√ß√µes, apresentamos um ator (Ator) - uma fun√ß√£o que aceita a inten√ß√£o e o estado atual e retorna um fluxo de resultados (Efeito):</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/6cb0694e570e01a126f820ff6767fe5b.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102432667" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpactor-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpactor-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpactor-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typealias </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ator</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inten√ß√£o</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inten√ß√£o</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observ√°vel</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpActor.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m precisamos de um redutor (Redutor) - uma fun√ß√£o que produz efeito e estado atual e retorna um novo estado:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/083d13a424ec0fee93901bfcc63ff1ef.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434310" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpreducer-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpreducer-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpreducer-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">typealias </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redutor</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpReducer.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Loja</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A loja apresentar√° um modelo da MVI. </font><font style="vertical-align: inherit;">Ele deve aceitar inten√ß√µes e distribuir uma corrente de estados. </font><font style="vertical-align: inherit;">Ao assinar um fluxo de estado, o estado atual deve ser emitido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos apresentar a interface apropriada:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/76bc9ed85106c836234b957acec63723.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433133" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpstoreinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpstoreinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpstoreinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loja</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inten√ß√£o </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fora </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consumidor</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inten√ß√£o</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;, </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observable</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;, </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descart√°vel</font></font></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpStoreInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, nossa loja possui as seguintes propriedades:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">possui dois par√¢metros gen√©ricos: Inten√ß√£o de entrada e Estado de sa√≠da;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© consumidor de inten√ß√µes (Consumidor &lt;Intent&gt;);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© um fluxo de estado (Observable &lt;State&gt;);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© destrut√≠vel (descart√°vel).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como n√£o √© muito conveniente implementar essa interface a cada vez, precisaremos de um certo assistente:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/9cccbb6d90992ae9dfeeb17e38087541.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433272" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpstorehelper-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpstorehelper-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpstorehelper-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StoreHelper</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inten√ß√£o </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fora </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">efeito </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpstorehelper-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initialState </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpstorehelper-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">privada </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ator </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ator</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inten√ß√£o</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpstorehelper-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-smi">reducer</span><span class="pl-k">:</span> <span class="pl-en">Reducer</span>&lt;<span class="pl-en">State</span>, <span class="pl-en">Effect</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpstorehelper-kt-LC5" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">Observable</span>&lt;<span class="pl-en">State</span>&gt;, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpstorehelper-kt-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpstorehelper-kt-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">init</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpstorehelper-kt-LC8" class="blob-code blob-code-inner js-file-line">        ensureNeverFrozen()</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpstorehelper-kt-LC9" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpstorehelper-kt-LC10" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpstorehelper-kt-LC11" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> subject <span class="pl-k">=</span> <span class="pl-en">BehaviorSubject</span>(initialState)</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpstorehelper-kt-LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpstorehelper-kt-LC13" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onIntent</span>(<span class="pl-smi">intent</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpstorehelper-kt-LC14" class="blob-code blob-code-inner js-file-line">        actor(subject.value, intent).subscribeScoped(isThreadLocal <span class="pl-k">=</span> <span class="pl-c1">true</span>, onNext <span class="pl-k">=</span> ::onEffect)</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpstorehelper-kt-LC15" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpstorehelper-kt-LC16" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpstorehelper-kt-LC17" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onEffect</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">efeito </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efeito</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpstorehelper-kt-LC18" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        subject.onNext (redutor (subject.value, effect))</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpstorehelper-kt-LC19" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpstorehelper-kt-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpstorehelper-kt-LC21" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substituir a </font></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">inscri√ß√£o </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertida</font></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><span class="pl-smi"><font style="vertical-align: inherit;">observador </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">ObservableObserver</font></span><font style="vertical-align: inherit;"> &lt; </font><span class="pl-en"><font style="vertical-align: inherit;">Estado</font></span><font style="vertical-align: inherit;"> &gt;) {</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpstorehelper-kt-LC22" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        subject.subscribe (observador)</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpstorehelper-kt-LC23" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstorehelper-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpstorehelper-kt-LC24" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpStoreHelper.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
StoreHelper √© uma classe pequena que facilitar√° a cria√ß√£o de uma loja. </font><font style="vertical-align: inherit;">Possui as seguintes propriedades:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">possui tr√™s par√¢metros gen√©ricos: inten√ß√£o de entrada e efeito e estado de sa√≠da;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aceita o estado inicial atrav√©s do construtor, do ator e da caixa de velocidades;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© um fluxo de estados;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">destrut√≠vel (descart√°vel);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sem congelamento (para que os assinantes tamb√©m n√£o sejam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">congelados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (interface da Reaktive para gerenciar assinaturas);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aceita e processa inten√ß√µes e efeitos.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja o diagrama da nossa loja. </font><font style="vertical-align: inherit;">O ator e a caixa de velocidades nele s√£o detalhes de implementa√ß√£o: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-l/ss/ct/-lssctmy9h8oat9htzn25q4xbji.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos considerar o m√©todo onIntent com mais detalhes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aceita inten√ß√µes como argumento;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chama o ator e passa a inten√ß√£o e o estado atual para ele;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assina o fluxo de efeitos retornado pelo ator;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direciona todos os efeitos para o m√©todo onEffect;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A assinatura dos efeitos √© realizada usando o sinalizador </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isThreadLocal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (isso evita o congelamento no Kotlin / Native).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos dar uma olhada no m√©todo onEffect:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toma efeitos como argumento;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chama a caixa de velocidades e transfere o efeito e o estado atual para ela;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passa o novo estado para BehaviorSubject, o que leva ao recebimento do novo estado por todos os assinantes.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vis√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos entrar na apresenta√ß√£o. </font><font style="vertical-align: inherit;">Ele deve aceitar modelos para exibi√ß√£o e fornecer um fluxo de eventos. </font><font style="vertical-align: inherit;">Tamb√©m criaremos uma interface separada:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/589842b3ed09f58164f295a8cd97f1a9.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433318" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpmviview-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpmviview-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpmviview-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fora </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evento </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpmviview-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eventos </font><span class="pl-k"><font style="vertical-align: inherit;">val </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observable</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpmviview-kt-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpmviview-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divers√£o </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">render</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modelo </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpmviview-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpmviview-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpMviView.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma visualiza√ß√£o possui as seguintes propriedades:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">possui dois par√¢metros gen√©ricos: Modelo de entrada e Evento de sa√≠da;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aceita modelos para exibi√ß√£o usando o m√©todo render;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">despacha um fluxo de eventos usando a propriedade events</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicionei o prefixo Mvi ao nome do MviView para evitar confus√£o com o Android View. </font><font style="vertical-align: inherit;">Al√©m disso, n√£o expandi as interfaces Consumer e Observable, mas simplesmente usei a propriedade e o m√©todo. </font><font style="vertical-align: inherit;">Isso √© para que voc√™ possa definir a interface de apresenta√ß√£o para a plataforma de implementa√ß√£o (Android ou iOS) sem exportar o Rx como uma depend√™ncia "api". </font><font style="vertical-align: inherit;">O truque √© que os clientes n√£o interagem diretamente com a propriedade "events", mas implementam a interface MviView, expandindo a classe abstrata. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione imediatamente esta classe abstrata para representar:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/b988c98e92bd48139a0d3951134c8e9c.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433330" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpabstractmviview-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpabstractmviview-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpabstractmviview-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">abstract</span> <span class="pl-k">class</span> <span class="pl-en">AbstractMviView</span>&lt;<span class="pl-k">in</span> <span class="pl-en">Model</span> <span class="pl-k">:</span> <span class="pl-c1">Any</span>, <span class="pl-en">Event</span> <span class="pl-k">:</span> <span class="pl-c1">Any</span>&gt; <span class="pl-k">:</span> <span class="pl-e">MviView</span>&lt;<span class="pl-en">Model</span>, <span class="pl-en">Event</span>&gt; {</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpabstractmviview-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> subject <span class="pl-k">=</span> <span class="pl-en">PublishSubject</span>&lt;<span class="pl-en">Event</span>&gt;()</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpabstractmviview-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">val</span> events<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Event</span>&gt; <span class="pl-k">=</span> subject</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpabstractmviview-kt-LC4" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpabstractmviview-kt-LC5" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">protected</span> <span class="pl-k">fun</span> <span class="pl-en">dispatch</span>(<span class="pl-smi">event</span><span class="pl-k">:</span> <span class="pl-en">Event</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpabstractmviview-kt-LC6" class="blob-code blob-code-inner js-file-line">        subject.onNext(event)</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpabstractmviview-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpabstractmviview-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpabstractmviview-kt-LC8" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpAbstractMviView.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa classe nos ajudar√° na emiss√£o de eventos e tamb√©m evitar√° que a plataforma interaja com o Rx. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um diagrama que mostra como isso funcionar√°: A </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wu/kr/ad/wukradmtg6czbxwjr_3fqi91txu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Loja produz estados que s√£o transformados em modelos e exibidos pela visualiza√ß√£o. </font><font style="vertical-align: inherit;">O √∫ltimo produz eventos que s√£o convertidos em inten√ß√µes e entregues √† Loja para processamento. </font><font style="vertical-align: inherit;">Essa abordagem remove a coer√™ncia entre a loja e a apresenta√ß√£o. </font><font style="vertical-align: inherit;">Mas, em casos simples, uma vis√£o pode funcionar diretamente com estados e inten√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â tudo o que precisamos para implementar o MVI. </font><font style="vertical-align: inherit;">Vamos escrever o c√≥digo geral.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥digo comum</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plano</font></font></h3><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Faremos um m√≥dulo geral cuja tarefa √© fazer o download e exibir uma lista de imagens de gatos.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na interface do usu√°rio, abstra√≠mos a interface e transferiremos sua implementa√ß√£o para fora.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esconderemos nossa implementa√ß√£o atr√°s de uma fachada conveniente.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kittenstore</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos come√ßar com o principal - crie um KittenStore que carregar√° uma lista de imagens:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/0a4a907bc8385e21e129c1d45f971714.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433398" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStore </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">selada </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inten√ß√£o</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recarregar </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe de </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">dados </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC7" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isLoading </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC8" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagens</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC9" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC10" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">selada </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC11" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe de </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">dados </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Images</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">urls </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> emptyList ()) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC12" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erro de </font><span class="pl-k"><font style="vertical-align: inherit;">objeto </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC13" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC14" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreinterface-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreinterface-kt-LC15" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Expandimos a interface da loja com tipos de inten√ß√£o e tipos de estado. </font><font style="vertical-align: inherit;">Aten√ß√£o: a interface √© declarada como interna. </font><font style="vertical-align: inherit;">Nossa KittenStore s√£o os detalhes de implementa√ß√£o do m√≥dulo. </font><font style="vertical-align: inherit;">Nossa inten√ß√£o √© apenas uma - Recarregar, causa o carregamento de uma lista de imagens. </font><font style="vertical-align: inherit;">Mas vale a pena considerar a condi√ß√£o com mais detalhes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o sinalizador isLoading indica se o download est√° em andamento ou n√£o;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A propriedade data pode ter uma de duas op√ß√µes:</font></font><br>
 <ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagens - uma lista de links para imagens;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Erro - significa que ocorreu um erro.</font></font></li>
</ul></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos come√ßar a implementa√ß√£o. </font><font style="vertical-align: inherit;">Faremos isso em etapas. </font><font style="vertical-align: inherit;">Primeiro, crie uma classe KittenStoreImpl vazia que implementar√° a interface KittenStore:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/4d89b73d8f2ac1d54079b7dc7bd24056.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433730" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl1-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC2" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStore</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC3" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substituir </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divers√£o </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onNext</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">valor </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC7" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substituir a </font></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">inscri√ß√£o </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertida</font></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><span class="pl-smi"><font style="vertical-align: inherit;">observador </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">ObservableObserver</font></span><font style="vertical-align: inherit;"> &lt; </font><span class="pl-en"><font style="vertical-align: inherit;">Estado</font></span><font style="vertical-align: inherit;"> &gt;) {</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC8" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl1-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl1-kt-LC9" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl1.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m implementamos a interface familiar DisposableScope. </font><font style="vertical-align: inherit;">Isso √© necess√°rio para um gerenciamento conveniente de assinaturas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Precisamos baixar a lista de imagens da Web e analisar o arquivo JSON. </font><font style="vertical-align: inherit;">Declare as depend√™ncias correspondentes:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/5f7790cf91b5f46e7e83cf2cc02e02e5.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433772" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl2-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">rede </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privada </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">Rede</font></span><font style="vertical-align: inherit;"> ,</font></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o privado </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analisador </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analisador</font></font></span>    </td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC4" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">KittenStore</span>, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC13" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">load</span>()<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">String</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC14" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC15" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC16" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Parser</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC17" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an√°lise </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">divertida</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;&gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC18" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl2-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl2-kt-LC19" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl2.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A Rede far√° o download do texto do arquivo JSON da Rede, e o Analisador analisar√° o arquivo JSON e retornar√° uma lista de links de imagem. </font><font style="vertical-align: inherit;">No caso de um erro, talvez acabe simplesmente sem resultado. </font><font style="vertical-align: inherit;">Neste artigo, n√£o estamos interessados ‚Äã‚Äãno tipo de erro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora declare os efeitos e redutor:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/bbd8458785d5c77f684023ecf6bf67c6.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433788" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl3-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">rede </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privada </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">Rede</font></span><font style="vertical-align: inherit;"> ,</font></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o privado </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analisador </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analisador</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC4" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">KittenStore</span>, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reduce</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">effect</span><span class="pl-k">:</span> <span class="pl-en">Effect</span>)<span class="pl-k">:</span> <span class="pl-en">State</span> <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC13" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">when</span> (effect) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC14" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Effect</span>.<span class="pl-en">LoadingStarted</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> state.copy(isLoading <span class="pl-k">=</span> <span class="pl-c1">true</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC15" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Effect</span>.<span class="pl-en">LoadingFinished</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> state.copy(isLoading <span class="pl-k">=</span> <span class="pl-c1">false</span>, <span class="pl-k">data</span> <span class="pl-k">=</span> <span class="pl-en">State</span>.<span class="pl-en">Data</span>.<span class="pl-en">Images</span>(urls <span class="pl-k">=</span> effect.imageUrls))</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC16" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Effect</span>.<span class="pl-en">LoadingFailed</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> state.copy(isLoading <span class="pl-k">=</span> <span class="pl-c1">false</span>, <span class="pl-k">data</span> <span class="pl-k">=</span> <span class="pl-en">State</span>.<span class="pl-en">Data</span>.<span class="pl-en">Error</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC17" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC18" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC19" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">sealed</span> <span class="pl-k">class</span> <span class="pl-en">Effect</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC20" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">object</span> LoadingStarted <span class="pl-k">:</span> <span class="pl-e">Effect</span>()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC21" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">data</span> <span class="pl-k">class</span> <span class="pl-en">LoadingFinished</span>(<span class="pl-k">val</span> <span class="pl-smi">imageUrls</span><span class="pl-k">:</span> <span class="pl-c1">List</span>&lt;<span class="pl-c1">String</span>&gt;) <span class="pl-k">:</span> <span class="pl-e">Effect</span>()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC22" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">object</span> LoadingFailed <span class="pl-k">:</span> <span class="pl-e">Effect</span>()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC23" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC25" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC26" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">load</span>()<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">String</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC27" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC28" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC29" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Parser</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC30" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an√°lise </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">divertida</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;&gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC31" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl3-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittenstoreimpl3-kt-LC32" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl3.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de iniciar o download, fornecemos o efeito LoadingStarted, que faz com que o sinalizador isLoading seja definido. </font><font style="vertical-align: inherit;">Ap√≥s a conclus√£o do download, emitimos LoadingFinished ou LoadingFailed. </font><font style="vertical-align: inherit;">No primeiro caso, limpamos o sinalizador isLoading e aplicamos a lista de imagens; no segundo, tamb√©m limpamos o sinalizador e aplicamos o estado de erro. </font><font style="vertical-align: inherit;">Observe que os efeitos s√£o a API privada da nossa KittenStore. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, implementamos o pr√≥prio download:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/0908f90ae8233bb3f164c1f6a518141d.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433858" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl4-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-smi">network</span><span class="pl-k">:</span> <span class="pl-en">Network</span>,</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> <span class="pl-smi">parser</span><span class="pl-k">:</span> <span class="pl-en">Parser</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC4" class="blob-code blob-code-inner js-file-line">) <span class="pl-k">:</span> <span class="pl-e">KittenStore</span>, <span class="pl-en">DisposableScope</span> by <span class="pl-en">DisposableScope</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC7" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reload</span>(<span class="pl-smi">network</span><span class="pl-k">:</span> <span class="pl-en">Network</span>, <span class="pl-smi">parser</span><span class="pl-k">:</span> <span class="pl-en">Parser</span>)<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Effect</span>&gt; <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC13" class="blob-code blob-code-inner js-file-line">        network</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC14" class="blob-code blob-code-inner js-file-line">            .load()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC15" class="blob-code blob-code-inner js-file-line">            .flatMap(<span class="pl-smi">parser</span>::parse)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC16" class="blob-code blob-code-inner js-file-line">            .map(<span class="pl-smi">Effect</span>::<span class="pl-en">LoadingFinished</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC17" class="blob-code blob-code-inner js-file-line">            .observeOn(mainScheduler)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC18" class="blob-code blob-code-inner js-file-line">            .asObservable()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC19" class="blob-code blob-code-inner js-file-line">            .defaultIfEmpty(<span class="pl-en">Effect</span>.<span class="pl-en">LoadingFailed</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC20" class="blob-code blob-code-inner js-file-line">            .startWithValue(<span class="pl-en">Effect</span>.<span class="pl-en">LoadingStarted</span>)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC21" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC22" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reduce</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">effect</span><span class="pl-k">:</span> <span class="pl-en">Effect</span>)<span class="pl-k">:</span> <span class="pl-en">State</span> <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC23" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC24" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC25" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">sealed</span> <span class="pl-k">class</span> <span class="pl-en">Effect</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC26" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC27" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC28" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC29" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC30" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">load</span>()<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">String</span>&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC31" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC32" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC33" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Parser</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC34" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">fun</span> <span class="pl-en">parse</span>(<span class="pl-smi">json</span><span class="pl-k">:</span> <span class="pl-c1">String</span>)<span class="pl-k">:</span> <span class="pl-en">Maybe</span>&lt;<span class="pl-c1">List</span>&lt;<span class="pl-c1">String</span>&gt;&gt;</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC35" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl4-kt-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-mvikmpkittenstoreimpl4-kt-LC36" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl4.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, vale a pena prestar aten√ß√£o ao fato de que passamos o Network e o Parser para a fun√ß√£o recarregar, apesar de eles j√° estarem dispon√≠veis para n√≥s como propriedades do construtor. </font><font style="vertical-align: inherit;">Isso √© feito para evitar refer√™ncias a isso e, como resultado, congelar toda a KittenStore. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, finalmente, use o StoreHelper e termine a implementa√ß√£o do KittenStore:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/90c8f4d3af71de9b1bababbf24a02f6b.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433888" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenstoreimpl5-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-smi"><font style="vertical-align: inherit;">rede </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privada </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">Rede</font></span><font style="vertical-align: inherit;"> ,</font></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o privado </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analisador </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analisador</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStore</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">val</span> helper <span class="pl-k">=</span> <span class="pl-en">StoreHelper</span>(<span class="pl-en">State</span>(), ::handleIntent, ::reduce).scope()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">onNext</span>(<span class="pl-smi">value</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC9" class="blob-code blob-code-inner js-file-line">        helper.onIntent(value)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC10" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">override</span> <span class="pl-k">fun</span> <span class="pl-en">subscribe</span>(<span class="pl-smi">observer</span><span class="pl-k">:</span> <span class="pl-en">ObservableObserver</span>&lt;<span class="pl-en">State</span>&gt;) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC13" class="blob-code blob-code-inner js-file-line">        helper.subscribe(observer)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC14" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC15" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC16" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">handleIntent</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">intent</span><span class="pl-k">:</span> <span class="pl-en">Intent</span>)<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Effect</span>&gt; <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC17" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">when</span> (intent) {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC18" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">is</span> <span class="pl-en">Intent</span>.<span class="pl-en">Reload</span> <span class="pl-k">-</span><span class="pl-k">&gt;</span> reload(network, parser)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC19" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC21" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reload</span>(<span class="pl-smi">network</span><span class="pl-k">:</span> <span class="pl-en">Network</span>, <span class="pl-smi">parser</span><span class="pl-k">:</span> <span class="pl-en">Parser</span>)<span class="pl-k">:</span> <span class="pl-en">Observable</span>&lt;<span class="pl-en">Effect</span>&gt; <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC22" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">fun</span> <span class="pl-en">reduce</span>(<span class="pl-smi">state</span><span class="pl-k">:</span> <span class="pl-en">State</span>, <span class="pl-smi">effect</span><span class="pl-k">:</span> <span class="pl-en">Effect</span>)<span class="pl-k">:</span> <span class="pl-en">State</span> <span class="pl-k">=</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC25" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC26" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC27" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">private</span> <span class="pl-k">sealed</span> <span class="pl-k">class</span> <span class="pl-en">Effect</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC28" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"><span class="pl-c">//</span> Omitted code</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC29" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC30" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC31" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">interface</span> <span class="pl-en">Network</span> {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC32" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertido </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">talvez</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC33" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC34" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC35" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analisador de </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interface</font></span><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC36" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an√°lise </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">divertida</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">json </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;&gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC37" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenstoreimpl5-kt-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-mvikmpkittenstoreimpl5-kt-LC38" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenStoreImpl5.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossa KittenStore est√° pronta! </font><font style="vertical-align: inherit;">Passamos √† apresenta√ß√£o.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kittenview</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Declare a seguinte interface:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/9645de0c34f245bb0af0e331c2771491.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433909" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittenviewinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittenviewinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evento</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">modelo de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe de </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">dados</font></span><font style="vertical-align: inherit;"> (</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isLoading </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC4" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isError </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC5" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imageUrls </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">List</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC6" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    )</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">Evento de </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">selada</font></span><font style="vertical-align: inherit;"> {</font></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC9" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> RefreshTriggered </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC10" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittenviewinterface-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittenviewinterface-kt-LC11" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenViewInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anunciamos um modelo de exibi√ß√£o com sinalizadores de carga e erro e uma lista de links de imagens. </font><font style="vertical-align: inherit;">Temos apenas um evento - RefreshTriggered. </font><font style="vertical-align: inherit;">√â emitido sempre que o usu√°rio chama uma atualiza√ß√£o. </font><font style="vertical-align: inherit;">KittenView √© a API p√∫blica do nosso m√≥dulo.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tarefa dessa fonte de dados √© fazer o download de texto para um arquivo JSON da Web. </font><font style="vertical-align: inherit;">Como sempre, declare a interface:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/cb13bbeabf7bd57f53059b3b71b021da.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433928" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittendatasourceinterface-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittendatasourceinterface-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittendatasourceinterface-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittendatasourceinterface-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittendatasourceinterface-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">carga </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">divertida</font></span><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">limite </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deslocamento </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Int</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt;</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittendatasourceinterface-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittendatasourceinterface-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenDataSourceInterface.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As implementa√ß√µes de fonte de dados ser√£o feitas para cada plataforma separadamente. </font><font style="vertical-align: inherit;">Portanto, podemos declarar um m√©todo de f√°brica usando expect / real:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/eb5277b5d9684ad992f52edc09140836.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433944" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittendatasourcefactory-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittendatasourcefactory-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittendatasourcefactory-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">divers√£o </font></span><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esperada </font></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">KittenDataSource</font></span><font style="vertical-align: inherit;"> () </font><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">KittenDataSource</font></span></font><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenDataSourceFactory.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As implementa√ß√µes da fonte de dados ser√£o discutidas na pr√≥xima parte, onde implementaremos aplicativos para iOS e Android.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integra√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O est√°gio final √© a integra√ß√£o de todos os componentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementa√ß√£o da interface de rede:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/5ba850187daea56be5b69035ff36aa5c.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433957" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-kittenstorenetwork-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-kittenstorenetwork-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-kittenstorenetwork-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interna </font></span></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreNetwork</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-kittenstorenetwork-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">private </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val </font></font></span> <span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dataSource </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-kittenstorenetwork-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rede</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-kittenstorenetwork-kt-LC4" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substituir </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divers√£o </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Talvez</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dataSource.load (limit </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , offset </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstorenetwork-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-kittenstorenetwork-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreNetwork.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Implementa√ß√£o da interface do analisador:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/d14c01adbef415bb1164ffd00536301c.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433981" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-kittenstoreparser-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-kittenstoreparser-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-kittenstoreparser-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interno</font></span><font style="vertical-align: inherit;"> KittenStoreParser </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-e"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analisador</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-kittenstoreparser-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substituir </font></font></span> <font style="vertical-align: inherit;"><span class="pl-en"><font style="vertical-align: inherit;">an√°lise </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertida</font></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font><span class="pl-smi"><font style="vertical-align: inherit;">json </font></span><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-c1"><font style="vertical-align: inherit;">String</font></span><font style="vertical-align: inherit;"> ) </font><span class="pl-k"><font style="vertical-align: inherit;">: </font></span><span class="pl-en"><font style="vertical-align: inherit;">Talvez</font></span><font style="vertical-align: inherit;"> &lt; </font><span class="pl-c1"><font style="vertical-align: inherit;">List</font></span><font style="vertical-align: inherit;"> &lt; </font><span class="pl-c1"><font style="vertical-align: inherit;">String</font></span><font style="vertical-align: inherit;"> &gt;&gt; </font><span class="pl-k"><font style="vertical-align: inherit;">=</font></span></font><span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-smi"><font style="vertical-align: inherit;"></font></span><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <span class="pl-en"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-c1"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-c1"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font><span class="pl-k"><font style="vertical-align: inherit;"></font></span></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-kittenstoreparser-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        maybeFromFunction {</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-kittenstoreparser-kt-LC4" class="blob-code blob-code-inner js-file-line">            <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Json</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JsonConfiguration</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Est√°vel</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-kittenstoreparser-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                .parseJson (json)</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-kittenstoreparser-kt-LC6" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                .jsonArray</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-kittenstoreparser-kt-LC7" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">                .map {it.jsonObject.getPrimitive ( </font></font><span class="pl-s"><span class="pl-pds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> url </font></font><span class="pl-pds"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) .content}</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-kittenstoreparser-kt-LC8" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        }</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-kittenstoreparser-kt-LC9" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            .subscribeOn (computationScheduler)</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-kittenstoreparser-kt-LC10" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            .onErrorComplete ()</font></font></td>
      </tr>
      <tr>
        <td id="file-kittenstoreparser-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-kittenstoreparser-kt-LC11" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreParser.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui usamos a biblioteca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kotlinx.serialization</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A an√°lise √© realizada em um planejador de computa√ß√£o para evitar o bloqueio do encadeamento principal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Converter estado para visualizar o modelo:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/93b72bd2faa46640b125605b674b7c10.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102433991" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpstatetomodel-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpstatetomodel-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpstatetomodel-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertido </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">interno</font></span><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toModel</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpstatetomodel-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpstatetomodel-kt-LC3" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        isLoading </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> isLoading,</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpstatetomodel-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        isError </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dados</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpstatetomodel-kt-LC5" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagens </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpstatetomodel-kt-LC6" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erro </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verdadeiro</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpstatetomodel-kt-LC7" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpstatetomodel-kt-LC8" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        imageUrls </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dados</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpstatetomodel-kt-LC9" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagens </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dados</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .urls</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpstatetomodel-kt-LC10" class="blob-code blob-code-inner js-file-line">            <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os dados</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erro </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> emptyList ()</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpstatetomodel-kt-LC11" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpstatetomodel-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpstatetomodel-kt-LC12" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    )</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpStateToModel.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Converta eventos em inten√ß√µes:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/51ee3616f1664dcc2322a206fc2def16.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434002" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpeventtointent-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpeventtointent-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpeventtointent-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evento </font><span class="pl-k"><font style="vertical-align: inherit;">interno </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertido</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toIntent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpeventtointent-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpeventtointent-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isso</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpeventtointent-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpeventtointent-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">evento</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RefreshTriggered </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recarregar</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpeventtointent-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpeventtointent-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpEventToIntent.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ pelo </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prepara√ß√£o da fachada:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/f425417396ab89af2d098c33577bf7f1.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434013" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittencomponent1-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittencomponent1-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenComponent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC2" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC3" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divers√£o </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onViewCreated</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exibi√ß√£o </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC6" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertido </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onStart</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC7" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertido </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onStop</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC10" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC12" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertido </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onViewDestroyed</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC13" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divertido </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onDestroy</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> () {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC16" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent1-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittencomponent1-kt-LC17" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver cru</font></font></a>
        <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MviKmpKittenComponent1.kt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        hospedado com ‚ù§ por </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Familiar para muitos desenvolvedores do Android. </font><font style="vertical-align: inherit;">√â √≥timo para iOS e at√© JavaScript. </font><font style="vertical-align: inherit;">O diagrama da transi√ß√£o entre os estados do ciclo de vida de nossa fachada se parece com o seguinte: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kb/li/4z/kbli4zpkq5ts6lgucpwfrjegwq0.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
explicarei brevemente o que est√° acontecendo aqui:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeiro, o m√©todo onCreate √© chamado, depois de - onViewCreated e, em seguida - onStart: isso coloca a fachada em condi√ß√£o de trabalho (iniciada);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em algum momento ap√≥s isso, o m√©todo onStop √© chamado: isso coloca a fachada em um estado parado (parado);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em um estado parado, um dos dois m√©todos pode ser chamado: onStart ou onViewDestroyed, ou seja, a fachada pode ser iniciada novamente ou a visualiza√ß√£o pode ser destru√≠da;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quando a vista √© destru√≠da, ela pode ser criada novamente (onViewCreated) ou a fachada inteira pode ser destru√≠da (onDestroy).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A implementa√ß√£o da fachada pode ser assim:</font></font><br>
<br>
<div class="oembed"><script type="text/javascript" src="https://gist.github.com/746d656d5a629e58afd10a5d1a6f41c6.js"></script><link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-31007ea0d3bd9f80540adfbc55afc7bd.css"><div id="gist102434056" class="gist">
    <div class="gist-file">
      <div class="gist-data">
        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-mvikmpkittencomponent2-kt" class="file">
    

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-kotlin ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip="">
      <tbody><tr>
        <td id="file-mvikmpkittencomponent2-kt-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classe </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenComponent</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC2" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">private </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">val</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> store </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC3" class="blob-code blob-code-inner js-file-line">        <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreImpl</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC4" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            rede </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreNetwork</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dataSource </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenDataSource</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ()),</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC5" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">            parser </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenStoreParser</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC6" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">        )</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC7" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC8" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"></font></span> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">visualiza√ß√£o </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var </font></font></span><font style="vertical-align: inherit;"><span class="pl-k"><font style="vertical-align: inherit;">privada </font></span></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView? </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC9" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">private </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> startStopScope </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DisposableScope? </font></font></span> <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span> <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulo</font></font></span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC10" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC11" class="blob-code blob-code-inner js-file-line">    <span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divers√£o </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onViewCreated</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><span class="pl-smi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exibi√ß√£o </font></font></span><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font></span> <span class="pl-en"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KittenView</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) {</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC12" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .view </font></font><span class="pl-k"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> view</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC13" class="blob-code blob-code-inner js-file-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    }</font></font></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC15" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onStart</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC16" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">val</span> view <span class="pl-k">=</span> requireNotNull(view)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC17" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC18" class="blob-code blob-code-inner js-file-line">        startStopScope <span class="pl-k">=</span> disposableScope {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC19" class="blob-code blob-code-inner js-file-line">            store.subscribeScoped(onNext <span class="pl-k">=</span> <span class="pl-smi">view</span>::render)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC20" class="blob-code blob-code-inner js-file-line">            view.events.map(<span class="pl-smi">Event</span>::toIntent).subscribeScoped(onNext <span class="pl-k">=</span> <span class="pl-smi">store</span>::onNext)</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC21" class="blob-code blob-code-inner js-file-line">        }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC22" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onStop</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC25" class="blob-code blob-code-inner js-file-line">        start<span class="pl-en">StopScope?</span>.dispose()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC26" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC27" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC28" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onViewDestroyed</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC29" class="blob-code blob-code-inner js-file-line">        view <span class="pl-k">=</span> <span class="pl-c1">null</span></td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC30" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC31" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC32" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">fun</span> <span class="pl-en">onDestroy</span>() {</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC33" class="blob-code blob-code-inner js-file-line">        store.dispose()</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC34" class="blob-code blob-code-inner js-file-line">    }</td>
      </tr>
      <tr>
        <td id="file-mvikmpkittencomponent2-kt-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-mvikmpkittencomponent2-kt-LC35" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div class="gist-meta">
        <a href="" style="float:right">view raw</a>
        <a href="">MviKmpKittenComponent2.kt</a>
        hosted with ‚ù§ by <a href="">GitHub</a>
      </div>
    </div>
</div>
</div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como funciona:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primeiro, criamos uma inst√¢ncia do KittenStore;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no m√©todo onViewCreated, lembramos do link para o KittenView;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no onStart, assinamos o KittenStore e o KittenView;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no onStop, n√≥s os espelhamos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no onViewDestroyed, limpamos o link da visualiza√ß√£o;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">em onDestroy, destrua o KittenStore.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este foi o primeiro artigo da minha s√©rie MVI na Kotlin Multiplatform. </font><font style="vertical-align: inherit;">Nele n√≥s:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lembrou o que √© o MVI e como ele funciona;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fez a implementa√ß√£o mais simples de MVI no Kotlin Multiplatform usando a biblioteca Reaktive;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">criou um m√≥dulo comum para carregar uma lista de imagens usando o MVI.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe as propriedades mais importantes do nosso m√≥dulo comum:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">conseguimos colocar todo o c√≥digo no m√≥dulo multiplataforma, exceto o c√≥digo da interface do usu√°rio; </font><font style="vertical-align: inherit;">toda a l√≥gica, al√©m das conex√µes e convers√µes entre a l√≥gica e a interface do usu√°rio, √© comum;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l√≥gica e interface do usu√°rio s√£o completamente independentes;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a implementa√ß√£o da interface do usu√°rio √© muito simples: voc√™ s√≥ precisa exibir os modelos de exibi√ß√£o recebidos e lan√ßar eventos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A integra√ß√£o do m√≥dulo tamb√©m √© simples: tudo o que voc√™ precisa √©:</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementar interface KittenView (protocolo);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crie uma inst√¢ncia do KittenComponent;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chame seus m√©todos de ciclo de vida na hora certa;</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">essa abordagem evita o "fluxo" de Rx (ou corotina) nas plataformas, o que significa que n√£o precisamos gerenciar nenhuma assinatura no n√≠vel do aplicativo;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">todas as classes importantes s√£o abstra√≠das por interfaces e testadas.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na pr√≥xima parte, mostrarei na pr√°tica como √© a integra√ß√£o do KittenComponent nos aplicativos iOS e Android. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Siga-me no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twitter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e fique conectado!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501948/index.html">Como um trem viaja de esta√ß√£o para esta√ß√£o: recursos de roteamento</a></li>
<li><a href="../pt501954/index.html">Se o VR aguarda o Microsoft Kinect ou √© o futuro dos jogos - vamos conversar juntos</a></li>
<li><a href="../pt501956/index.html">Nossa experi√™ncia trabalhando com dados no etcd Kubernetes-cluster diretamente (sem a API do K8s)</a></li>
<li><a href="../pt501960/index.html">Escala de pesquisa. Elasticsearch Suas vantagens e requisitos b√°sicos para instala√ß√£o</a></li>
<li><a href="../pt501964/index.html">Para que servem os computadores industriais?</a></li>
<li><a href="../pt501970/index.html">O que voc√™ precisa para criar uma boa masmorra em RPG?</a></li>
<li><a href="../pt501976/index.html">Como aprender a testar o software</a></li>
<li><a href="../pt501978/index.html">Como o histograma do Prometheus funciona?</a></li>
<li><a href="../pt501980/index.html">A hist√≥ria de um projeto ou como eu criei 7 anos de PBX baseado em Asterisk e Php</a></li>
<li><a href="../pt501982/index.html">Como transferir um shader de um mecanismo de jogo para o Substance Painter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>