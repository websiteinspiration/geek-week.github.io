<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õπüèª üôÜ üßù Comment choisir l'√©quipement pour un jeu persan en Python üë©üèæ‚Äçü§ù‚Äçüë®üèΩ ‚ôìÔ∏è üôáüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous apprenons √† trouver le meilleur pour notre voleur √† l'aide de la programmation. Nous d√©terminons √©galement si le programme nous conduit ¬´par le n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Comment choisir l'√©quipement pour un jeu persan en Python</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495774/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous apprenons √† trouver le meilleur pour notre voleur √† l'aide de la programmation. </font><font style="vertical-align: inherit;">Nous d√©terminons √©galement si le programme nous conduit ¬´par le nez¬ª.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w7/x1/va/w7x1vaurpxvsovlu61g5smq7mzc.png" alt="image"><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Objectif:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apprendre √† simuler √©tape par √©tape la partie n√©cessaire de la m√©canique du jeu in vitro, √† obtenir les donn√©es n√©cessaires et √† en tirer des conclusions. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ce dont vous avez besoin:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Python 3, l'environnement pour travailler avec du code (j'ai PyCharm). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les jeux, beaucoup de gens veulent tirer le meilleur parti de leurs personnages, et pour cela, vous devez choisir la combinaison d'√©quipement la plus optimale, ce qui est souvent beaucoup. </font><font style="vertical-align: inherit;">Essayons d'√©crire notre propre algorithme pour tester diff√©rentes combinaisons d'√©quipements et collecter des donn√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un premier temps </font><font style="vertical-align: inherit;">, je me </font><font style="vertical-align: inherit;">suis inspir√© par le jeu ¬´ World of Warcraft: Classic ¬ª (j'ai pris les ic√¥nes √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">partir de </font><font style="vertical-align: inherit;">l√†</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), mais dans le processus que </font><font style="vertical-align: inherit;">je fait quelques simplifications. </font><font style="vertical-align: inherit;">Lien vers l'ensemble du projet √† la fin de l'article.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âTAPE 1 - √©valuer la zone de recherche</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que nous ayons un personnage dans la classe Rogue. </font><font style="vertical-align: inherit;">Il est n√©cessaire de lui ramasser du mat√©riel dans lequel il infligera un maximum de d√©g√¢ts √† l'ennemi. </font><font style="vertical-align: inherit;">Nous sommes int√©ress√©s par les choses pour les machines √† sous ¬´armes dans la main droite¬ª (4 pi√®ces), ¬´Armes dans la main gauche¬ª (4 pi√®ces), ¬´Gants¬ª (2 pi√®ces), ¬´T√™te¬ª (3 pi√®ces), ¬´Poitrine¬ª (3 pi√®ces), ¬´Jambes¬ª (3 pi√®ces), ¬´Pieds¬ª (2 pi√®ces). </font><font style="vertical-align: inherit;">Nous allons mettre leurs diff√©rentes combinaisons sur le personnage et simuler la bataille. </font><font style="vertical-align: inherit;">Et si vous appliquez l'id√©e de recherche exhaustive (avec laquelle nous commencerons), pour √©valuer toutes les combinaisons, vous devrez d√©penser au moins 4 * 4 * 2 * 3 * 3 * 3 * 2 = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1728</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> combats. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une √©valuation plus pr√©cise des meilleures combinaisons, vous devrez mener des batailles suppl√©mentaires. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, d√©j√† √† ce stade, nous pouvons pr√©senter le sch√©ma du projet comme suit:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y5/nj/qd/y5njqdx3sswkgaadzfqzxr2x8-4.png" alt="image"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âTAPE 2 - analyser la m√©canique du jeu</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commen√ßons par le personnage. </font><font style="vertical-align: inherit;">Il a de telles caract√©ristiques qui affectent les dommages caus√©s les uns aux autres:</font></font><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puissance d'attaque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - elle est convertie directement en d√©g√¢ts caus√©s par un coup normal (1 √† 1). </font><font style="vertical-align: inherit;">Calcul√© par la formule: points de puissance d'attaque + points de force + points de dext√©rit√©</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Force</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - +1 pour attaquer la puissance et tout (quoi faire, c'est la conception du jeu)</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dext√©rit√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - +1 pour attaquer la puissance, et √©galement toutes les 20 unit√©s d'agilit√© ajoutent 1% de chances de critique</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√®te. </font><font style="vertical-align: inherit;">chance</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la chance de causer un double dommage si la frappe ne glisse pas et manque</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√©cision</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - augmentation des chances de toucher un adversaire</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ma√Ætrise</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - chaque unit√© de ma√Ætrise r√©duit la probabilit√© d'une frappe glissante de 4% (ce qui est initialement √©gal √† 40%, ce qui signifie que 10 unit√©s de ma√Ætrise excluent compl√®tement la possibilit√© d'une frappe glissante)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme ci-dessous montre les valeurs de base de notre voleur et comment les mettre sur un √©quipement les change: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/b_/uk/ln/b_uklnhezlo6c095bo9scextmzm.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est donc temps de commencer √† √©crire du code. </font><font style="vertical-align: inherit;">Nous d√©crivons ce que nous savons d√©j√† dans la classe Rogue. </font><font style="vertical-align: inherit;">La m√©thode </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_stats_without_equip</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> restaurera l'√©tat du personnage sans √©quipement, ce qui est utile lors du changement de collections. </font><font style="vertical-align: inherit;">Les m√©thodes </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculate_critical_percent</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculate_glancing_percent</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† l'avenir ne seront appel√©es que si n√©cessaire, mettant √† jour les valeurs de caract√©ristiques sp√©cifiques.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">premi√®res lignes de classe</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rogue</span>:</span>
    <span class="hljs-string">"""    ."""</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
<font></font>
        <span class="hljs-comment">#    ( -     ):</span>
        self.basic_stat_agility = <span class="hljs-number">50</span>
        self.basic_stat_power = <span class="hljs-number">40</span>
        self.basic_stat_hit = <span class="hljs-number">80</span>
        self.basic_stat_crit = <span class="hljs-number">20</span>
        self.basic_stat_mastery = <span class="hljs-number">0</span><font></font>
<font></font>
        <span class="hljs-comment">#     :</span><font></font>
        self.set_stats_without_equip()<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#       :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_stats_without_equip</span>(<span class="hljs-params">self</span>):</span><font></font>
        self.stat_agility = self.basic_stat_agility<font></font>
        self.stat_power = self.basic_stat_power<font></font>
        self.stat_attackpower = self.stat_agility + self.stat_power<font></font>
        self.stat_hit = self.basic_stat_hit<font></font>
        self.direct_crit_bonus = <span class="hljs-number">0</span><font></font>
        self.calculate_critical_percent()<font></font>
        self.stat_mastery = self.basic_stat_mastery<font></font>
        self.calculate_glancing_percent()<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#      :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calculate_critical_percent</span>(<span class="hljs-params">self</span>):</span>
        self.stat_crit = self.basic_stat_crit + self.direct_crit_bonus + self.stat_agility // <span class="hljs-number">20</span><font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#      :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">calculate_glancing_percent</span>(<span class="hljs-params">self</span>):</span>
        self.stat_glancing_percent = <span class="hljs-number">40</span> - self.stat_mastery * <span class="hljs-number">4</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez maintenant vous occuper de l'√©quipement. </font><font style="vertical-align: inherit;">Afin de trier facilement toutes choses, en cr√©ant leurs combinaisons, j'ai d√©cid√© de cr√©er un dictionnaire s√©par√© pour chaque type d'√©quipement: RIGHT_HANDS, LEFT_HANDS, GLOVES, HEADS, CHESTS, PANTS, BOOTS. </font><font style="vertical-align: inherit;">Les tuples suivants sont stock√©s en tant que valeurs dans les dictionnaires: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wk/1r/3z/wk1r3zdn1_ovtwrtlxzttyc1tb4.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ez un fichier s√©par√© pour les dictionnaires avec √©quipement. </font><font style="vertical-align: inherit;">J'ai plusieurs de ces fichiers avec diff√©rents ensembles.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©quipement de test abstrait</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#    ,     :</span>
<span class="hljs-comment"># 0 - , 1 - , 2 - , 3 - , 4 - , 5 - , 6 - </span><font></font>
<font></font>
EQUIPMENT_COLLECTION = <span class="hljs-string">'custom'</span><font></font>
<font></font>
RIGHT_HANDS = dict()<font></font>
RIGHT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">50</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">22</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">4</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>)<font></font>
<font></font>
LEFT_HANDS = dict()<font></font>
LEFT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">35</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">22</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">4</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>)<font></font>
<font></font>
GLOVES = dict()<font></font>
GLOVES[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
GLOVES[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
HEADS = dict()<font></font>
HEADS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">22</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
CHESTS = dict()<font></font>
CHESTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">30</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
PANTS = dict()<font></font>
PANTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
PANTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<font></font>
PANTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
BOOTS = dict()<font></font>
BOOTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">14</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
BOOTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenue de World of Warcraft</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#    ,     :</span>
<span class="hljs-comment"># 0 - , 1 - , 2 - , 3 - , 4 - , 5 - , 6 - </span><font></font>
<font></font>
EQUIPMENT_COLLECTION = <span class="hljs-string">"wow_classic_preraid"</span><font></font>
<font></font>
RIGHT_HANDS = dict()<font></font>
RIGHT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  \''</span>, <span class="hljs-number">81</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">49</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">57</span>, <span class="hljs-number">9</span>, <span class="hljs-number">9</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
LEFT_HANDS = dict()<font></font>
LEFT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">'  \''</span>, <span class="hljs-number">52</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">49</span>, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">57</span>, <span class="hljs-number">9</span>, <span class="hljs-number">9</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
GLOVES = dict()<font></font>
GLOVES[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">28</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
GLOVES[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
HEADS = dict()<font></font>
HEADS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">13</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">32</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
HEADS[<span class="hljs-number">4</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">19</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
CHESTS = dict()<font></font>
CHESTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">60</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">50</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
CHESTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">11</span>, <span class="hljs-number">18</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
PANTS = dict()<font></font>
PANTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">46</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
PANTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
BOOTS = dict()<font></font>
BOOTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">21</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
BOOTS[<span class="hljs-number">2</span>] = (<span class="hljs-string">'  '</span>, <span class="hljs-number">40</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
BOOTS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">0</span>, <span class="hljs-number">23</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajouter la cha√Æne equipype au constructeur de la classe Rogue</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#    ,    id  :</span>
    <span class="hljs-comment"># 0 -  , 1 -  , 2 - , 3 - , 4 - , 5 - , 6 - </span>
    self.equipment_slots = [<span class="hljs-number">0</span>] * <span class="hljs-number">7</span><font></font>
<font></font>
    <span class="hljs-comment">#    ,      :</span>
    self.equipment_names = [<span class="hljs-string">''</span>] * <span class="hljs-number">7</span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ajoutons √©galement √† notre classe les </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©thodes wear_item</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (calcul des caract√©ristiques lors de l' </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enfilage</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et les </font><i><b><font style="vertical-align: inherit;">m√©thodes unwear_all</font></b></i><font style="vertical-align: inherit;"> (supprimer tout).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√©thodes de classe responsables du travail avec l'√©quipement</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#   "  ":</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unwear_all</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-comment">#  id      :</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, len(self.equipment_slots) ):<font></font>
            self.equipment_slots[i] = <span class="hljs-number">0</span>
            self.equipment_names[i] = <span class="hljs-string">''</span><font></font>
<font></font>
        self.set_stats_without_equip()<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#    :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">wear_item</span>(<span class="hljs-params">self, slot, item_id, items_list</span>):</span><font></font>
<font></font>
        <span class="hljs-comment">#      ,        ,   :</span>
        <span class="hljs-keyword">if</span> self.equipment_slots[slot] == <span class="hljs-number">0</span>:<font></font>
            self.equipment_slots[slot] = item_id<font></font>
            self.equipment_names[slot] = items_list[item_id][<span class="hljs-number">0</span>]<font></font>
            self.stat_agility += items_list[item_id][<span class="hljs-number">2</span>]<font></font>
            self.stat_power += items_list[item_id][<span class="hljs-number">3</span>]
            <span class="hljs-comment">#  ,            :</span>
            self.stat_attackpower += items_list[item_id][<span class="hljs-number">1</span>] + items_list[item_id][<span class="hljs-number">2</span>] + items_list[item_id][<span class="hljs-number">3</span>]<font></font>
            self.stat_hit += items_list[item_id][<span class="hljs-number">4</span>]<font></font>
            self.direct_crit_bonus += items_list[item_id][<span class="hljs-number">5</span>]<font></font>
            self.stat_mastery += items_list[item_id][<span class="hljs-number">6</span>]<font></font>
<font></font>
            <span class="hljs-comment">#         . ,   . :</span>
            <span class="hljs-keyword">if</span> items_list[item_id][<span class="hljs-number">2</span>] != <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> items_list[item_id][<span class="hljs-number">5</span>] != <span class="hljs-number">0</span>:<font></font>
                self.calculate_critical_percent()<font></font>
<font></font>
            <span class="hljs-comment">#    ,    :</span>
            <span class="hljs-keyword">if</span> items_list[item_id][<span class="hljs-number">6</span>] != <span class="hljs-number">0</span>:<font></font>
                self.calculate_glancing_percent()<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, le fait de combiner certaines choses donne des bonus suppl√©mentaires (dans ¬´World of Warcraft¬ª, c'est ce qu'on appelle un ¬´bonus d'ensemble¬ª). </font><font style="vertical-align: inherit;">Dans mon ensemble abstrait, un tel bonus est donn√© en mettant en m√™me temps la garde √† droite des for√™ts et la garde √† gauche des for√™ts. </font><font style="vertical-align: inherit;">Ajoutez ceci au code de la m√©thode </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wear_item</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©finir des bonus dans la m√©thode wear_item</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#      "custom":</span>
            <span class="hljs-keyword">if</span> EQUIPMENT_COLLECTION == <span class="hljs-string">'custom'</span>:
                <span class="hljs-comment">#      "  " (id 1   " "),     "  " (id 1   " "),   2  . :</span>
                <span class="hljs-keyword">if</span> slot == <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">if</span> self.equipment_slots[<span class="hljs-number">1</span>] == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> self.equipment_slots[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:<font></font>
                        self.direct_crit_bonus += <span class="hljs-number">2</span><font></font>
                        self.calculate_critical_percent()<font></font>
                        print(<span class="hljs-string">'  ...'</span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, notre voleur doit apprendre √† se battre. </font><font style="vertical-align: inherit;">Nous consid√©rerons un combat comme une s√©rie de 1000 attaques contre un adversaire qui nous tourne le dos et est occup√© par autre chose (une situation typique pour World of Warcraft). </font><font style="vertical-align: inherit;">Chaque gr√®ve, ind√©pendamment des pr√©c√©dentes, peut √™tre:</font></font><br>
<br>
<ul>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - d√©g√¢ts standard, dans notre mod√®le √©quivalent √† la "puissance d'attaque" du personnage</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en mouvement</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 70% de d√©g√¢ts par rapport √† la normale</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">critique</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - double dommage par rapport √† la normale</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manquer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 0 d√©g√¢t</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela sera d√©termin√© par une s√©rie de v√©rifications selon ce sch√©ma: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7m/tr/bg/7mtrbgwb8yoi5loosr9fwn8eqny.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pour un voleur avec des valeurs de base, ce sch√©ma prend la forme: </font><i><b><font style="vertical-align: inherit;">Programmons</font></b></i></font><br>
<br>
<img src="https://habrastorage.org/webt/-q/ha/dr/-qhadrqxtuy5bom3dkhkvvh3lta.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
cette m√©canique en ajoutant la m√©thode </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do_attack</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au code de notre classe. </font><font style="vertical-align: inherit;">Il renverra un tuple de deux nombres: (r√©sultat de l'attaque, d√©g√¢ts caus√©s).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code d'attaque</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#    :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">do_attack</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-comment">#   :</span>
        event_hit = randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)<font></font>
<font></font>
        <span class="hljs-comment">#  :</span>
        <span class="hljs-keyword">if</span> event_hit &gt; self.stat_hit:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-number">0</span><font></font>
<font></font>
        <span class="hljs-comment">#  :</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment">#   :</span>
            event_glancing = randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)<font></font>
<font></font>
            <span class="hljs-comment">#    ,    ,</span>
            <span class="hljs-comment">#      10  "",  stat_glancing_percent   0,</span>
            <span class="hljs-comment">#      </span>
            <span class="hljs-keyword">if</span> event_glancing &lt;= self.stat_glancing_percent:<font></font>
                damage = floor(self.stat_attackpower * <span class="hljs-number">0.7</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>, damage<font></font>
<font></font>
            <span class="hljs-comment">#    :</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment">#   :</span>
                event_crit = randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)<font></font>
<font></font>
                <span class="hljs-comment">#    :</span>
                <span class="hljs-keyword">if</span> event_crit &gt; self.stat_crit:<font></font>
                    damage = self.stat_attackpower<font></font>
                    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>, damage<font></font>
<font></font>
                <span class="hljs-comment">#   :</span>
                <span class="hljs-keyword">else</span>:<font></font>
                    damage = self.stat_attackpower * <span class="hljs-number">2</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>, damage
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous obtiendrons un affichage pratique de l'√©tat actuel du voleur, afin qu'√† tout moment vous puissiez v√©rifier ce qui lui arrive:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">red√©finir la m√©thode magique __str__</font></font></b><div class="spoiler_text"><pre><code class="python hljs">    ...
    <span class="hljs-comment">#  " "     :</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__str__</span>(<span class="hljs-params">self</span>):</span><font></font>
<font></font>
        <span class="hljs-comment">#      :</span>
        using_equipment_names = <span class="hljs-string">''</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, len(self.equipment_names) - <span class="hljs-number">1</span> ):<font></font>
            using_equipment_names += self.equipment_names[i] + <span class="hljs-string">'", "'</span>
        using_equipment_names = <span class="hljs-string">'"'</span> + using_equipment_names + self.equipment_names[<span class="hljs-number">-1</span>] + <span class="hljs-string">'"'</span><font></font>
<font></font>
        <span class="hljs-comment">#  :</span>
        description = <span class="hljs-string">' 60 \n'</span>
        description += using_equipment_names + <span class="hljs-string">'\n'</span>
        description += <span class="hljs-string">' : '</span> + str(self.stat_attackpower) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_agility) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_power) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_hit) + <span class="hljs-string">'%\n'</span>
        description += <span class="hljs-string">'. : '</span> + str(self.stat_crit) + <span class="hljs-string">'%\n'</span>
        description += <span class="hljs-string">': '</span> + str(self.stat_mastery) + <span class="hljs-string">' .\n'</span>
        description += <span class="hljs-string">' . .: '</span> + str(self.stat_glancing_percent) + <span class="hljs-string">'%\n'</span>
        <span class="hljs-keyword">return</span> description
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âTAPE 3 - Pr√©paration au lancement</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est maintenant temps d'√©crire un code qui fournira des combats pour tous les ensembles d'√©quipements possibles. </font><font style="vertical-align: inherit;">Pour ce faire, j'appelle s√©quentiellement des fonctions selon ce sch√©ma:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s2/vu/to/s2vutoqapwumtqcjqgzmiryezma.png" alt="image"><br>
<br>
<ol>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">run_session</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - les boucles imbriqu√©es sont impl√©ment√©es ici, triant tous les dictionnaires requis avec des choses et appelant la fonction suivante pour chaque combinaison; </font><font style="vertical-align: inherit;">√† la fin, le texte du rapport sera g√©n√©r√© et enregistr√© dans le journal de session</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">test_combination</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - tous les v√™tements pr√©c√©demment port√©s sont r√©initialis√©s et la m√©thode wear_item est appel√©e encore et encore, habillant le personnage dans une nouvelle ¬´tenue¬ª, apr√®s quoi la fonction suivante est appel√©e</font></font></li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simulate_fight</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - la m√™me m√©thode do_attack est appel√©e 1000 fois, les donn√©es re√ßues sont conserv√©es, si n√©cessaire, un journal d√©taill√© est conserv√© pour chaque bataille</font></font></li>
</ol><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonctions run_session, test_combination, simulate_fight</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#     :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_session</span>(<span class="hljs-params">SESSION_LOG</span>):</span><font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    fight_number = <span class="hljs-number">1</span><font></font>
<font></font>
    <span class="hljs-comment">#    :</span>
    all_fight_data = <span class="hljs-string">''</span><font></font>
<font></font>
    <span class="hljs-comment">#      :</span>
    <span class="hljs-keyword">for</span> new_righthand_id <span class="hljs-keyword">in</span> RIGHT_HANDS:
        <span class="hljs-comment">#      :</span>
        <span class="hljs-keyword">for</span> new_lefthand_id <span class="hljs-keyword">in</span> LEFT_HANDS:
            <span class="hljs-comment">#   :</span>
            <span class="hljs-keyword">for</span> new_gloves_id <span class="hljs-keyword">in</span> GLOVES:
                <span class="hljs-comment">#   :</span>
                <span class="hljs-keyword">for</span> new_head_id <span class="hljs-keyword">in</span> HEADS:
                    <span class="hljs-comment">#   :</span>
                    <span class="hljs-keyword">for</span> new_chest_id <span class="hljs-keyword">in</span> CHESTS:
                        <span class="hljs-comment">#   :</span>
                        <span class="hljs-keyword">for</span> new_pants_id <span class="hljs-keyword">in</span> PANTS:
                            <span class="hljs-comment">#   :</span>
                            <span class="hljs-keyword">for</span> new_boots_id <span class="hljs-keyword">in</span> BOOTS:<font></font>
<font></font>
                                new_fight_data = test_combination(fight_number,<font></font>
                                                                  new_righthand_id,<font></font>
                                                                  new_lefthand_id,<font></font>
                                                                  new_gloves_id,<font></font>
                                                                  new_head_id,<font></font>
                                                                  new_chest_id,<font></font>
                                                                  new_pants_id,<font></font>
                                                                  new_boots_id<font></font>
                                                                  )<font></font>
<font></font>
                                all_fight_data += new_fight_data<font></font>
                                fight_number += <span class="hljs-number">1</span><font></font>
<font></font>
    <span class="hljs-comment">#       :</span><font></font>
    save_data_to_file(SESSION_LOG, all_fight_data)<font></font>
<font></font>
<span class="hljs-comment">#       :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_combination</span>(<span class="hljs-params">fight_number, righthand_id, lefthand_id, gloves_id, head_id, chest_id, pants_id, boots_id</span>):</span><font></font>
<font></font>
    <span class="hljs-comment">#   :</span><font></font>
    my_rogue.unwear_all()<font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    my_rogue.wear_item(<span class="hljs-number">0</span>, righthand_id, RIGHT_HANDS)<font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    my_rogue.wear_item(<span class="hljs-number">1</span>, lefthand_id, LEFT_HANDS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">2</span>, gloves_id, GLOVES)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">3</span>, head_id, HEADS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">4</span>, chest_id, CHESTS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">5</span>, pants_id, PANTS)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span>
    my_rogue.wear_item(<span class="hljs-number">6</span>, boots_id, BOOTS)<font></font>
<font></font>
<font></font>
    <span class="hljs-comment">#    "" :</span>
    equipment_profile = str(righthand_id) + <span class="hljs-string">','</span> + str(lefthand_id) + <span class="hljs-string">','</span> + str(gloves_id) + \
                            <span class="hljs-string">','</span> + str(head_id) + <span class="hljs-string">','</span> + str(chest_id) + <span class="hljs-string">','</span> + str(pants_id) + \
                            <span class="hljs-string">','</span> + str(boots_id)<font></font>
<font></font>
    print(my_rogue)<font></font>
    print(<span class="hljs-string">'equipment_profile ='</span>, equipment_profile)<font></font>
<font></font>
    <span class="hljs-comment">#        :</span>
    <span class="hljs-keyword">return</span> simulate_fight(equipment_profile, fight_number)<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#  ,    attacks_total   :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">simulate_fight</span>(<span class="hljs-params">equipment_profile, fight_number</span>):</span>
    <span class="hljs-keyword">global</span> LOG_EVERY_FIGHT<font></font>
<font></font>
    <span class="hljs-comment">#   :</span>
    sum_of_attack_types = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]<font></font>
    sum_of_damage = <span class="hljs-number">0</span><font></font>
<font></font>
    <span class="hljs-comment">#  ,     :</span>
    <span class="hljs-keyword">if</span> LOG_EVERY_FIGHT:<font></font>
        fight_log = <span class="hljs-string">''</span><font></font>
        verdicts = {<font></font>
            <span class="hljs-number">0</span>: <span class="hljs-string">'.'</span>,
            <span class="hljs-number">1</span>: <span class="hljs-string">'.'</span>,
            <span class="hljs-number">2</span>: <span class="hljs-string">'.'</span>,
            <span class="hljs-number">3</span>: <span class="hljs-string">'.'</span><font></font>
        }<font></font>
<font></font>
    attacks = <span class="hljs-number">0</span>
    <span class="hljs-keyword">global</span> ATTACKS_IN_FIGHT<font></font>
<font></font>
    <span class="hljs-comment">#  ,      :</span>
    <span class="hljs-keyword">while</span> attacks &lt; ATTACKS_IN_FIGHT:
        <span class="hljs-comment">#  - :</span><font></font>
        damage_info = my_rogue.do_attack()<font></font>
<font></font>
        <span class="hljs-comment">#   :</span>
        sum_of_damage += damage_info[<span class="hljs-number">1</span>]<font></font>
<font></font>
        <span class="hljs-comment">#   :</span>
        sum_of_attack_types[ damage_info[<span class="hljs-number">0</span>] ] += <span class="hljs-number">1</span><font></font>
<font></font>
        attacks += <span class="hljs-number">1</span><font></font>
<font></font>
        <span class="hljs-comment">#  ,   :</span>
        <span class="hljs-keyword">if</span> LOG_EVERY_FIGHT:<font></font>
            fight_log += verdicts[ damage_info[<span class="hljs-number">0</span>] ] + <span class="hljs-string">' '</span> + str(damage_info[<span class="hljs-number">1</span>]) + <span class="hljs-string">' '</span> + str(sum_of_damage) + <span class="hljs-string">'\n'</span><font></font>
<font></font>
    <span class="hljs-comment">#  ,  :</span>
    <span class="hljs-keyword">if</span> LOG_EVERY_FIGHT:
        <span class="hljs-comment">#  :</span>
        filename = <span class="hljs-string">'fight_logs/log '</span> + str(fight_number) + <span class="hljs-string">'.txt'</span><font></font>
        save_data_to_file(filename, fight_log)<font></font>
<font></font>
    <span class="hljs-comment">#       :</span>
    attacks_statistic = <span class="hljs-string">','</span>.join(map(str, sum_of_attack_types))<font></font>
    fight_data = <span class="hljs-string">'#'</span> + str(fight_number) + <span class="hljs-string">'/'</span> + equipment_profile + <span class="hljs-string">'/'</span> + str(sum_of_damage) + <span class="hljs-string">','</span> + attacks_statistic + <span class="hljs-string">'\n'</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> fight_data
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour enregistrer les journaux, j'utilise deux fonctions simples:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonctions save_data, add_data</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#     :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">save_data_to_file</span>(<span class="hljs-params">filename, data</span>):</span>
    <span class="hljs-keyword">with</span> open(filename, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf8'</span>) <span class="hljs-keyword">as</span> f:<font></font>
        print(data, file=f)<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#     :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append_data_to_file</span>(<span class="hljs-params">filename, data</span>):</span>
    <span class="hljs-keyword">with</span> open(filename, <span class="hljs-string">'a+'</span>, encoding=<span class="hljs-string">'utf8'</span>) <span class="hljs-keyword">as</span> f:<font></font>
        print(data, file=f)<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il ne reste donc plus qu'√† √©crire quelques lignes pour d√©marrer la session et enregistrer ses r√©sultats. </font><font style="vertical-align: inherit;">Nous importons √©galement les modules Python standard n√©cessaires. </font><font style="vertical-align: inherit;">C'est l√† que vous pouvez d√©terminer quel √©quipement sera test√©. </font><font style="vertical-align: inherit;">Pour les fans de World of Warcraft, j'ai ramass√© de l'√©quipement √† partir de l√†, mais rappelez-vous que ce projet n'est qu'une reconstruction approximative du m√©canicien √† partir de l√†.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code de programme</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#     :</span>
<span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint<font></font>
<font></font>
<span class="hljs-comment">#     :</span>
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> floor<font></font>
<font></font>
<span class="hljs-comment">#    :</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> time<font></font>
<font></font>
<span class="hljs-comment">#    :</span>
<span class="hljs-keyword">from</span> operations_with_files <span class="hljs-keyword">import</span> *<font></font>
<font></font>
<span class="hljs-comment">#      :</span>
<span class="hljs-keyword">from</span> equipment_custom <span class="hljs-keyword">import</span> *
<span class="hljs-comment">#from equipment_wow_classic import *</span>
<span class="hljs-comment">#from equipment_obvious_strong import *</span>
<span class="hljs-comment">#from equipment_obvious_weak import *</span><font></font>
<font></font>
<font></font>
<span class="hljs-comment"># :</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    ATTACKS_IN_FIGHT = <span class="hljs-number">1000</span><font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    LOG_EVERY_FIGHT = <span class="hljs-literal">False</span><font></font>
<font></font>
    <span class="hljs-comment">#     :</span>
    SESSION_LOG = <span class="hljs-string">'session_logs/for '</span> + EQUIPMENT_COLLECTION + <span class="hljs-string">' results '</span> + datetime.strftime(datetime.now(), <span class="hljs-string">'%Y-%m-%d_%H-%M-%S'</span>) + <span class="hljs-string">'.txt'</span>
    print(<span class="hljs-string">'SESSION_LOG ='</span>, SESSION_LOG)<font></font>
<font></font>
    <span class="hljs-comment">#  :</span><font></font>
    my_rogue = Rogue()<font></font>
<font></font>
    <span class="hljs-comment">#  :</span><font></font>
    time_begin = time()<font></font>
<font></font>
    <span class="hljs-comment">#   :</span><font></font>
    run_session(SESSION_LOG)<font></font>
<font></font>
    <span class="hljs-comment">#   :</span><font></font>
    time_session = time() - time_begin<font></font>
    duration_info = <span class="hljs-string">' : '</span> + str( round(time_session, <span class="hljs-number">2</span>) ) + <span class="hljs-string">' .'</span>
    print(<span class="hljs-string">'\n'</span> + duration_info)<font></font>
    append_data_to_file(SESSION_LOG, duration_info + <span class="hljs-string">'\n'</span>)<font></font>
<font></font>
    <span class="hljs-comment">#  ,   5    :</span>
    top_sets_info = show_best_sets(SESSION_LOG, <span class="hljs-number">5</span>)<font></font>
<font></font>
    <span class="hljs-comment">#          :</span><font></font>
    append_data_to_file(SESSION_LOG, top_sets_info)<font></font>
<font></font>
<span class="hljs-keyword">else</span>:<font></font>
    print(<span class="hljs-string">'__name__ is not "__main__".'</span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une session de 1728 batailles prend 5 secondes sur mon ordinateur portable. </font><font style="vertical-align: inherit;">Si vous d√©finissez LOG_EVERY_FIGHT = True, les fichiers contenant des donn√©es pour chaque combat appara√Ætront dans le dossier fight_logs, mais la session prendra d√©j√† 9 secondes. </font><font style="vertical-align: inherit;">Dans tous les cas, le journal de session appara√Ætra dans le dossier session_logs:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 premi√®res lignes du journal</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">#1/1,1,1,1,1,1,1/256932,170,324,346,160<font></font>
#2/1,1,1,1,1,1,2/241339,186,350,331,133<font></font>
#3/1,1,1,1,1,2,1/221632,191,325,355,129<font></font>
#4/1,1,1,1,1,2,2/225359,183,320,361,136<font></font>
#5/1,1,1,1,1,3,1/243872,122,344,384,150<font></font>
#6/1,1,1,1,1,3,2/243398,114,348,394,144<font></font>
#7/1,1,1,1,2,1,1/225342,170,336,349,145<font></font>
#8/1,1,1,1,2,1,2/226414,173,346,322,159<font></font>
#9/1,1,1,1,2,2,1/207862,172,322,348,158<font></font>
#10/1,1,1,1,2,2,2/203492,186,335,319,160<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, il ne suffit pas de tenir une session; vous devez extraire des informations de ces centaines de lignes sur ces combinaisons de choses qui ont conduit aux meilleurs r√©sultats. </font><font style="vertical-align: inherit;">Pour ce faire, nous allons √©crire deux autres fonctions. </font><font style="vertical-align: inherit;">L'id√©e g√©n√©rale est d'ouvrir le journal re√ßu, de cr√©er une liste des montants des d√©g√¢ts pour chaque bataille, de les trier et, par exemple, d'√©crire les noms des objets utilis√©s pour les 5 meilleures situations.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonctions pour d√©terminer la vitesse sup√©rieure</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment">#       :</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show_best_sets</span>(<span class="hljs-params">SESSION_LOG, number_of_sets</span>):</span><font></font>
<font></font>
    <span class="hljs-comment">#      :</span><font></font>
    list_log = list()<font></font>
<font></font>
    <span class="hljs-comment">#   ,      list_log ,</span>
    <span class="hljs-comment">#          :</span>
    <span class="hljs-keyword">with</span> open(SESSION_LOG, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf8'</span>) <span class="hljs-keyword">as</span> f:<font></font>
        lines = f.readlines()<font></font>
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:
            <span class="hljs-keyword">try</span>:<font></font>
                list_line = line.split(<span class="hljs-string">'/'</span>)<font></font>
                list_fight = list_line[<span class="hljs-number">2</span>].split(<span class="hljs-string">','</span>)<font></font>
                list_log.append( ( int(list_fight[<span class="hljs-number">0</span>]), list_line[<span class="hljs-number">1</span>].split(<span class="hljs-string">','</span>) ) )
            <span class="hljs-keyword">except</span> IndexError:
                <span class="hljs-keyword">break</span><font></font>
<font></font>
    <span class="hljs-comment">#  ,      :</span>
    list_log.sort(reverse=<span class="hljs-literal">True</span>)<font></font>
<font></font>
    <span class="hljs-comment">#   ,  number_of_sets     :</span>
    top_sets_info = <span class="hljs-string">''</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, number_of_sets):<font></font>
        current_case = list_log[i]<font></font>
<font></font>
        <span class="hljs-comment">#           :</span>
        clear_report = <span class="hljs-string">''</span>
        equipment_names = <span class="hljs-string">''</span>
        equip_group = <span class="hljs-number">1</span><font></font>
<font></font>
        <span class="hljs-keyword">for</span> equip_id <span class="hljs-keyword">in</span> current_case[<span class="hljs-number">1</span>]:<font></font>
            equipment_names += <span class="hljs-string">'\n'</span> + get_equip_name(equip_id, equip_group)<font></font>
            equip_group += <span class="hljs-number">1</span><font></font>
<font></font>
        line_for_clear_report = <span class="hljs-string">'\n#'</span> + str(i+<span class="hljs-number">1</span>) + <span class="hljs-string">' - '</span> + str(current_case[<span class="hljs-number">0</span>]) + <span class="hljs-string">'   :'</span> + equipment_names<font></font>
        clear_report += line_for_clear_report<font></font>
<font></font>
        print(<span class="hljs-string">'\n'</span>, clear_report)<font></font>
        top_sets_info += clear_report + <span class="hljs-string">'\r'</span><font></font>
<font></font>
    <span class="hljs-keyword">return</span> top_sets_info<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#     id:</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_equip_name</span>(<span class="hljs-params">equip_id, equip_group</span>):</span><font></font>
    equip_id = int(equip_id)<font></font>
<font></font>
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> RIGHT_HANDS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">2</span>:
        <span class="hljs-keyword">return</span> LEFT_HANDS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">return</span> GLOVES[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">4</span>:
        <span class="hljs-keyword">return</span> HEADS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">5</span>:
        <span class="hljs-keyword">return</span> CHESTS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">6</span>:
        <span class="hljs-keyword">return</span> PANTS[equip_id][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">if</span> equip_group == <span class="hljs-number">7</span>:
        <span class="hljs-keyword">return</span> BOOTS[equip_id][<span class="hljs-number">0</span>]
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, √† la fin des lignes de journal avec 5 s√©lections apparaissent, montrant le meilleur r√©sultat:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lignes de journal enfin lisibles</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"> : 4.89 .<font></font>
<font></font>
#1 - 293959   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#2 - 293102   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#3 - 290573   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#4 - 287592   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#5 - 284929   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âTAPE 4 - √©valuer la durabilit√© des r√©sultats</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de se rappeler qu'il y a des √©l√©ments de hasard dans ce projet: lors de la d√©termination du type de trait √† l'aide de la fonction </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">randint</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lors de tests r√©p√©t√©s, j'ai remarqu√© que lors de la r√©p√©tition de sessions avec les m√™mes donn√©es d'entr√©e, les 5 premi√®res s√©lections peuvent varier. </font><font style="vertical-align: inherit;">Ce n'est pas tr√®s heureux, et a pris pour r√©soudre le probl√®me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai d‚Äôabord fait un kit de test de l‚Äô√©quipement ¬´evident_strong¬ª, o√π m√™me sans tests, il est √©vident quelles s√©lections sont les meilleures:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regardez le set evident_strong</font></font></b><div class="spoiler_text"><pre><code class="python hljs">EQUIPMENT_COLLECTION = <span class="hljs-string">'obvious_strong'</span><font></font>
<font></font>
RIGHT_HANDS = dict()<font></font>
RIGHT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">5000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">800</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
RIGHT_HANDS[<span class="hljs-number">3</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
LEFT_HANDS = dict()<font></font>
LEFT_HANDS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">4000</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
LEFT_HANDS[<span class="hljs-number">2</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
GLOVES = dict()<font></font>
GLOVES[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
HEADS = dict()<font></font>
HEADS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
CHESTS = dict()<font></font>
CHESTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
PANTS = dict()<font></font>
PANTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<font></font>
<font></font>
BOOTS = dict()<font></font>
BOOTS[<span class="hljs-number">1</span>] = (<span class="hljs-string">' '</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec cet ensemble, il y aura </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> combats (3 √©p√©es * 2 poignards * 1 * 1 * 1 * 1 * 1). Dans le top 5, la bataille o√π la pire √©p√©e et la pire dague sont prises ne doit pas √™tre incluse. Eh bien, bien s√ªr, la premi√®re place devrait √™tre une s√©lection avec deux lames les plus solides. Si vous y pensez, alors pour chaque collection, il est √©vident dans quel endroit elle tombera. Tests effectu√©s, les attentes ont √©t√© satisfaites. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici une visualisation du r√©sultat d'un des tests de cet ensemble: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zg/_i/zp/zg_izpaduytv7ypjflofdbm2tdg.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, j'ai r√©duit au minimum l'√©cart dans le montant des bonus accord√©s par ces lames </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5000, 800, 20 et 4000, 10 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√†</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5, 4, 3 et 2, 1, respectivement (dans le projet, cet ensemble se trouve dans le fichier ¬´equipment_obvious_weak.py¬ª). Et ici, tout √† coup, la combinaison de l'√©p√©e la plus forte et du pire poignard est arriv√©e en t√™te. De plus, dans l'un des tests, les deux meilleures armes sont soudainement arriv√©es en derni√®re position: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ae/ql/t2/aeqlt2_rmff3kmd9gmotvibtine.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
comment comprendre cela? Les attentes quant √† la disposition manifestement correcte des collections sont rest√©es inchang√©es, mais le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">degr√© de diff√©rence</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> entre elles a √©t√© consid√©rablement </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©duit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Et maintenant, les accidents pendant les batailles (le rapport des coups et des coups, des coups critiques et non critiques, etc.) ont acquis une importance d√©cisive.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√©rifions √† quelle fr√©quence le "duo de lames sup√©rieures" ne tombera pas en premier lieu. </font><font style="vertical-align: inherit;">J'ai fait 100 lancements de ce type (pour cela, j'ai encapsul√© les ¬´lignes de lancement de programme¬ª dans un cycle de 100 it√©rations et j'ai commenc√© √† tenir un journal sp√©cial pour toute cette ¬´super session¬ª). </font><font style="vertical-align: inherit;">Voici la visualisation des r√©sultats: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nz/oe/qu/nzoequlloochqmzvl6oybzepjay.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, les r√©sultats de notre programme ne sont pas toujours stables (34% des ¬´bons¬ª r√©sultats contre 66% des ¬´mauvais¬ª). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La stabilit√© des r√©sultats est </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directement proportionnelle √† la</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> diff√©rence des bonus des articles test√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que la diff√©rence dans le montant des bonus de bonnes choses qu'il est logique de tester est faiblement perceptible (comme dans "World of Warcraft"), les r√©sultats de ces tests seront relativement instables (instable, instable, etc.).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âTAPE 5 - Accro√Ætre la r√©silience</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous essayons de penser logiquement. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous d√©crivons le crit√®re de r√©ussite: le</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬´duo de lames sup√©rieures¬ª devrait √™tre en premi√®re place dans 99% des cas. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Situation actuelle:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 34% de ces cas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous ne changez pas l'approche accept√©e en principe (le passage de la simulation de batailles pour toutes les s√©lections √† un simple calcul de caract√©ristiques par exemple), alors il reste √† changer certains param√®tres quantitatifs de notre mod√®le. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour mener non pas une bataille pour chaque collection, mais plusieurs, puis enregistrer la moyenne arithm√©tique dans le journal, jeter le meilleur et le pire, etc.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">effectuer plusieurs s√©ances de test en g√©n√©ral, puis prendre √©galement la ¬´moyenne¬ª</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©tendre la bataille elle-m√™me de 1000 hits √† une certaine valeur, ce qui sera suffisant pour que les r√©sultats soient justes pour les collections qui sont tr√®s proches en termes de bonus total</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, il m'a sembl√© une id√©e r√©ussie avec une extension de la bataille, car c'est √† cet endroit que se passe tout ce qui a provoqu√© l'extension de cet article. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je </font><font style="vertical-align: inherit;">testerai l' </font><font style="vertical-align: inherit;">hypoth√®se selon laquelle l'allongement de la bataille de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> coups augmentera la stabilit√© des r√©sultats (pour cela, vous devez d√©finir la constante ATTACKS_IN_FIGHT √† 10000). Et c'est ainsi: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/iq/il/rc/iqilrc6kulybrfs1apchkyyleik.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puis il a d√©cid√© de passer de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10 000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100 000</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tirs, ce qui a conduit √† un succ√®s √† cent pour cent. Apr√®s cela, en utilisant la m√©thode de recherche binaire, il a commenc√© √† s√©lectionner le nombre de hits qui donnerait 99% de succ√®s pour se d√©barrasser des calculs excessifs. Arr√™t√© √† 46875.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qg/oz/gx/qgozgxod9pupmsmzlloagt3hs2g.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si mon estimation de la fiabilit√© de 99% d'un syst√®me avec une telle longueur de bataille est correcte, alors deux tests cons√©cutifs r√©duisent la probabilit√© d'erreur √† 0,01 * 0,01 = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,0001</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, si vous ex√©cutez un test avec une bataille de 46 875 coups pour un ensemble d'√©quipement pour 1 728 batailles, cela prendra 233 secondes et inspirera la confiance que les r√®gles de ¬´l'√©p√©e du ma√Ætre¬ª:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les r√©sultats de 1728 batailles pour 46875 frappes</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"> : 233.89 .<font></font>
<font></font>
#1 - 13643508   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#2 - 13581310   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#3 - 13494544   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
<font></font>
#4 - 13473820   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#5 - 13450956   :<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Et cela est facile √† expliquer: deux ¬´√©p√©es du ma√Ætre¬ª vous permettent d'obtenir 10 unit√©s de comp√©tence, ce qui, selon la m√©canique inh√©rente, √©limine la possibilit√© de coups coulissants, et cela ajoute environ 40% des coups lorsque des dommages X ou 2X sont appliqu√©s au lieu de 0,7X. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©sultat d'un test similaire pour les fans de WoW:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">les r√©sultats de 1296 batailles de 46875 coups s√ªrs (wow classique preraid)</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs"> : 174.58 .<font></font>
<font></font>
<font></font>
#1 - 19950930   :<font></font>
  '<font></font>
  '<font></font>
  <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#2 - 19830324   :<font></font>
  '<font></font>
  '<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#3 - 19681971   :<font></font>
  '<font></font>
  '<font></font>
  <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#4 - 19614600   :<font></font>
  '<font></font>
  '<font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
  <font></font>
<font></font>
#5 - 19474463   :<font></font>
  '<font></font>
  '<font></font>
  <font></font>
 <font></font>
 <font></font>
 <font></font>
 <font></font>
</code></pre><br>
</div></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sommaire</font></font></h2><br>
<ol>
<li>    ‚Äî  . ,        ,     4 * 4 * 3 * 3 * 3 * 3 * 2 = <b>2592</b>, ..  33% .       .</li>
<li>  :   ,             ,    ,         .</li>
<li>,    :        ,        ,  ,    .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai post√© tout le code du projet sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ch√®re communaut√©, je serai heureux de recevoir des commentaires sur ce sujet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD du 04/08/2020: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci aux commentaires</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deerenaros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">knotri</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Griboks</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai r√©alis√© qu'au lieu de simuler des milliers de batailles, vous pouvez calculer l'attente math√©matique pour un coup et, sur cette base, classer l'√©quipement. </font><font style="vertical-align: inherit;">J'ai jet√© tout ce qui </font><font style="vertical-align: inherit;">concerne les </font><font style="vertical-align: inherit;">combats hors du code, au </font><font style="vertical-align: inherit;">lieu de la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simulate_fight</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonction que </font><font style="vertical-align: inherit;">je l'ai </font><font style="vertical-align: inherit;">fait </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calculate_expectation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En sortie, j'obtiens les m√™mes r√©sultats. </font><font style="vertical-align: inherit;">Ajout du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> r√©sultant au r√©f√©rentiel </font><font style="vertical-align: inherit;">.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr495764/index.html">CSI Linux: distribution Linux pour les cyber-enqu√™tes et OSINT</a></li>
<li><a href="../fr495766/index.html">Sch√©ma JSON. √ätre ou ne pas √™tre?</a></li>
<li><a href="../fr495768/index.html">Conception d'interface pour contr√¥leur industriel</a></li>
<li><a href="../fr495770/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 339 (30 mars - 5 avril)</a></li>
<li><a href="../fr495772/index.html">Cr√©ation de Pixel Art Maker en JavaScript</a></li>
<li><a href="../fr495780/index.html">Nous √©tudions le moteur VoIP Mediastreamer2. 3e partie</a></li>
<li><a href="../fr495782/index.html">FOSS News n ¬∞ 10 - examen des nouvelles gratuites et open source du 30 mars au 5 avril 2020</a></li>
<li><a href="../fr495784/index.html">SamsPcbGuide, Part 14: Technology - Microdevelopment and Chip-On-Technology Technology</a></li>
<li><a href="../fr495786/index.html">Annulation globale</a></li>
<li><a href="../fr495788/index.html">Un appareil d'un coronavirus ou un autre chariot d'une miche de pain?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>