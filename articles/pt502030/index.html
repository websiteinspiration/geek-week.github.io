<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüíª üíÇüèº ü§üüèª Servi√ßos Web no Oracle üì∞ ü§æüèø ‚ö°Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Servi√ßos webamplamente utilizado para integra√ß√£o entre componentes de um sistema ou entre sistemas diferentes. A popularidade dos servi√ßos da Web como...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Servi√ßos Web no Oracle</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/502030/"><img src="https://habrastorage.org/webt/bn/fa/9y/bnfa9ydnf9mlh7nubs0t86xfdm4.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßos web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amplamente utilizado para integra√ß√£o entre componentes de um sistema ou entre sistemas diferentes. A popularidade dos servi√ßos da Web como forma de integra√ß√£o se deve √† sua versatilidade, bem como √† facilidade de implementa√ß√£o e depura√ß√£o. A versatilidade est√° associada √† transfer√™ncia de dados usando a Internet e o protocolo HTTP. Os servi√ßos da Web facilitam a constru√ß√£o de integra√ß√µes entre componentes escritos em diferentes idiomas, executados em diferentes sistemas operacionais e plataformas. A facilidade de implementar servi√ßos da Web √© obtida por meio de ferramentas e componentes integrados em muitos IDEs que permitem desenvolver rapidamente o servi√ßo da Web (lado do provedor) e o c√≥digo necess√°rio para chamar o servi√ßo no lado do cliente. Os servi√ßos de depura√ß√£o s√£o simplificados pelo uso de formatos de troca de dados leg√≠veis por humanos - XML ‚Äã‚Äãe JSON. Al√©m disso,Existem muitos utilit√°rios para servi√ßos de depura√ß√£o e teste, incluindo carga.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, consideraremos v√°rias maneiras de criar servi√ßos da Web diretamente do Oracle DBMS, ou seja, sem usar ferramentas de terceiros.</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conte√∫do</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Native Oracle XML DB Web Services</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> Oracle XML DB HTTP server</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   HTTP</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   -</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> Access List (ACL)</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> -    </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Oracle REST Data Service</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> 1:   POST-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    WS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  HTTP-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CGI-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> 2:     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Java Servlet</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Database Access Descriptor (PL/SQL Servlet)</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a></div>
                    </div><br>
<a name="Introduction"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fundo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado: sistema de informa√ß√µes de neg√≥cios de uma grande rede de distribui√ß√£o (cerca de mil lojas de varejo), composta por muitos componentes e subsistemas. </font><font style="vertical-align: inherit;">Dentro de cada loja, h√° um servidor principal - um banco de dados Oracle com a principal l√≥gica de neg√≥cios. </font><font style="vertical-align: inherit;">Os n√≥s de caixa s√£o gerenciados por software separado do banco de dados local. </font><font style="vertical-align: inherit;">Este software coleta periodicamente dados do servidor principal (via WS SOAP) e devolve os resultados da venda (troca de arquivos).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O progresso n√£o parou e novos equipamentos apareceram nas lojas. Os dados deste equipamento devem ser enviados periodicamente ao servidor principal da loja (per√≠odo - a cada poucos minutos), a integra√ß√£o deve necessariamente passar pelo servi√ßo da web, a mensagem deve ter um determinado formato, a autentica√ß√£o n√£o √© necess√°ria. Analisamos os contratos de troca de dados e descobrimos que a tecnologia usada dos servi√ßos da Web n√£o permitir√° a integra√ß√£o com esses equipamentos. E a busca por uma solu√ß√£o come√ßou ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, foram consideradas v√°rias op√ß√µes para implementar o servi√ßo da Web necess√°rio, at√© escrever um componente separado que abriria uma janela para o banco de dados Oracle para o banco de dados Oracle: por um lado, forneceria um servi√ßo da Web, por outro, interagiria com o banco de dados via JDBC. </font><font style="vertical-align: inherit;">A dificuldade √© que o novo componente, em primeiro lugar, teria que ser instalado em mil lojas e, em segundo lugar, teria surgido outro link que teria que ser acompanhado. </font><font style="vertical-align: inherit;">Portanto, a prioridade ainda era a op√ß√£o de implementar um servi√ßo da Web com as ferramentas integradas da Oracle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado das pesquisas, encontramos quatro maneiras que consideraremos neste artigo:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßos da Web Oracle DB DB nativos</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßo de Dados REST Oracle</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servlet Java</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descritor de acesso ao banco de dados (servlet PL / SQL)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As duas primeiras op√ß√µes ser√£o consideradas em mais detalhes. </font><font style="vertical-align: inherit;">O Oracle XML DB Web Services nativo foi usado em nosso sistema inicialmente, ou seja, foi herdado, por assim dizer. </font><font style="vertical-align: inherit;">O ORDS se tornou um substituto para essa tecnologia desatualizada (apesar de eu ainda ter que trabalhar duro e instalar o ORDS em mil lojas). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dois outros m√©todos - Java Servlet e PL / SQL Servlet - foram considerados junto com o ORDS ao procurar uma alternativa ao Native Oracle WS, mas n√£o o usamos no projeto. </font><font style="vertical-align: inherit;">Portanto, n√£o consideraremos essas abordagens em detalhes e nos limitaremos a uma breve refer√™ncia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O artigo apresentar√° alguns exemplos pr√°ticos de implementa√ß√£o de servi√ßos da Web com instru√ß√µes que ajudar√£o a criar um servi√ßo em funcionamento.</font></font><br>
<br>
<a name="NativeOracle"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßos da Web Oracle DB DB nativos</font></font></h2><br>
<a name="NativeOracleFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Permite organizar o acesso ao banco de dados Oracle via HTTP usando o WS SOAP (vers√£o 1.1):</font></font><br>
<br>
<ul>
<li> SQL-  XQuery-  SOAP.</li>
<li>     (   ).</li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  -     :      ,   HTTP-.</li>
<li> -    (WSDL),          ,  -.</li>
<li>     -.  ,    ‚Äî    ,      ‚Äî        .</li>
<li>   XML-.   ,  ,        XML,            - ‚Äî   Oracle  .   ,      WS-    Oracle    ‚Äî    ,    - . </li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  WSDL   ,      ,    - .        ‚Äî       WSDL,      WSDL ,    .</li>
<li>       ( 50 ).          ,   ‚Äî  ,     . ,     - ‚Äî   ,  ,   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vale ressaltar que a autentica√ß√£o √© necess√°ria para todas as solicita√ß√µes ao servi√ßo da Web (da </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Autentica√ß√£o b√°sica: o Oracle XML DB suporta autentica√ß√£o b√°sica, em que um cliente envia o nome do usu√°rio e a senha em texto n√£o criptografado no cabe√ßalho da autoriza√ß√£o). </font><font style="vertical-align: inherit;">No Oracle, voc√™ pode configurar o acesso an√¥nimo aos recursos do servidor via HTTP - usando a configura√ß√£o do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle XML DB Protocol Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas, na verdade, funciona apenas para solicita√ß√µes GET, e a autentica√ß√£o √© necess√°ria para solicita√ß√µes POST. </font><font style="vertical-align: inherit;">Como o Oracle WS nativo funciona apenas com solicita√ß√µes POST, n√£o h√° como configurar o acesso an√¥nimo para esta tecnologia.</font></font><br>
<br>
<a name="NativeOracleSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Costumiza√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar o Oracle WS nativo, voc√™ precisar√° de: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure o servidor HTTP interno no Oracle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure o acesso dentro do banco de dados Oracle (abra a porta HTTP).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie um servlet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure a ACL (lista de acesso).</font></font></li>
</ol><br>
<a name="NativeOracleSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar o servidor HTTP do Oracle XML DB</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servidor HTTP j√° deve funcionar por padr√£o, mas em alguns casos pode ser necess√°ria uma configura√ß√£o adicional do ouvinte - adicionando o seguinte bloco ao DESCRIPTION_LIST:</font></font><br>
<br>
<pre><code class="sql hljs">(DESCRIPTION=<font></font>
  (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=8080))(Presentation=HTTP)(Session=RAW)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, voc√™ precisa reiniciar o ouvinte.</font></font><br>
<br>
<a name="NativeOracleSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar acesso HTTP</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verificando a porta atual quanto a HTTP.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> dbms_xdb.gethttpport() <span class="hljs-keyword">AS</span> http_port <span class="hljs-keyword">FROM</span> dual;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um valor "0" significa que o acesso HTTP est√° desativado.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o de porta.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--    web-services</span>
    dbms_xdb.setHttpPort(<span class="hljs-number">8080</span>);
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></li>
</ol><br>
<a name="NativeOracleSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um servlet para um servi√ßo da web</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o servi√ßo da Web funcione, √© necess√°rio o registro do servlet na configura√ß√£o do banco de dados.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script para criar um servlet</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_servlet_name      <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'orawsv'</span>;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--   orawsv   Native Web Services</span><font></font>
    DBMS_XDB.deleteServletMapping(l_servlet_name);<font></font>
    DBMS_XDB.deleteServlet(l_servlet_name);<font></font>
 <font></font>
    DBMS_XDB.addServlet( NAME     =&gt; l_servlet_name<font></font>
                       , LANGUAGE =&gt; 'C'<font></font>
                       , DISPNAME =&gt; 'Oracle Query Web Service'<font></font>
                       , DESCRIPT =&gt; 'Servlet for issuing queries as a Web Service'<font></font>
                       , SCHEMA   =&gt; 'XDB');<font></font>
 <font></font>
    DBMS_XDB.addServletSecRole( SERVNAME =&gt; l_servlet_name<font></font>
                              , ROLENAME =&gt; 'XDB_WEBSERVICES'<font></font>
                              , ROLELINK =&gt; 'XDB_WEBSERVICES');<font></font>
 <font></font>
    DBMS_XDB.addServletMapping( PATTERN =&gt; '/orawsv<span class="hljs-comment">/*'
                              , NAME    =&gt; l_servlet_name);
    COMMIT;
END;
/</span></code></pre></div>
                    </div><br>
<a name="NativeOracleSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurar lista de acesso</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para acessar o Oracle por HTTP, voc√™ precisa adicionar regras na configura√ß√£o do DBMS. </font><font style="vertical-align: inherit;">Isso √© feito usando os utilit√°rios internos do DBMS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para configurar a ACL, voc√™ precisar√° de:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">script editando a configura√ß√£o do banco de dados (abaixo);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esquema do banco de dados para o qual a configura√ß√£o √© feita.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, o esquema do banco de dados para o qual a ACL est√° sendo configurada j√° deve ser criado. </font><font style="vertical-align: inherit;">Nos exemplos abaixo, haver√° refer√™ncias a esta se√ß√£o, nos locais em que voc√™ precisar√° criar novos esquemas de banco de dados - para eles, ser√° necess√°rio configurar a ACL.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No esquema SYS, executamos o script de configura√ß√£o da ACL:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_ws_user       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'WS_SOAP_TEST'</span>; <span class="hljs-comment">--    ,        WS</span><font></font>
    l_acl           VARCHAR2(250) := 'acl_allow_all.xml';<font></font>
    l_tmp           VARCHAR2(250);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_OVER_HTTP TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_WITH_PUBLIC TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--       PL/SQL </span>
    <span class="hljs-keyword">BEGIN</span>
        dbms_network_acl_admin.drop_acl(acl =&gt; <span class="hljs-string">'/sys/acls/'</span>||l_acl);<font></font>
    EXCEPTION<font></font>
        WHEN dbms_network_acl_admin.acl_not_found THEN<font></font>
            NULL;<font></font>
    <span class="hljs-keyword">END</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--  ACL</span><font></font>
    dbms_network_acl_admin.create_acl( acl         =&gt; l_acl<font></font>
                                     , description =&gt; 'Allow all connections'<font></font>
                                     , is_grant    =&gt; TRUE<font></font>
                                     , start_date  =&gt; SYSTIMESTAMP<font></font>
                                     , end_date    =&gt; NULL<font></font>
                                     , principal   =&gt; 'SYS'<font></font>
                                     , privilege   =&gt; 'connect');<font></font>
 <font></font>
    dbms_network_acl_admin.assign_acl( acl        =&gt; l_acl<font></font>
                                     , host       =&gt; '*'<font></font>
                                     , lower_port =&gt; NULL<font></font>
                                     , upper_port =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-comment">--    (resolve) </span><font></font>
    dbms_network_acl_admin.add_privilege( acl        =&gt; l_acl<font></font>
                                        , principal  =&gt; l_ws_user<font></font>
                                        , is_grant   =&gt; TRUE<font></font>
                                        , privilege  =&gt; 'resolve'<font></font>
                                        , POSITION   =&gt; NULL<font></font>
                                        , start_date =&gt; SYSTIMESTAMP<font></font>
                                        , end_date   =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deve-se notar imediatamente que a configura√ß√£o da ACL √© necess√°ria ao usar n√£o apenas o Oracle WS nativo, mas tamb√©m todos os outros m√©todos de cria√ß√£o de servi√ßos da web discutidos neste artigo.</font></font><br>
<br>
<a name="NativeOracleExample"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo de servi√ßo da Web usando um procedimento em lote</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s vamos precisar:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O esquema do banco de dados no qual os objetos para processamento de solicita√ß√µes de servi√ßo da web ser√£o localizados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela para registro.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pacote com procedimento / fun√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qualquer ferramenta que permita enviar solicita√ß√µes da web. </font><font style="vertical-align: inherit;">Nesse caso, o aplicativo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SOAP UI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foi usado </font><font style="vertical-align: inherit;">, mas voc√™ pode escolher qualquer outra ferramenta, at√© a linha de comando.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Recursos: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os par√¢metros do procedimento devem ter tipos simples ou de objeto. </font><font style="vertical-align: inherit;">Caso contr√°rio, o procedimento n√£o ser√° percebido como um m√©todo de servi√ßo da web e n√£o ser√° inclu√≠do na lista de m√©todos de servi√ßo.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para implementar estruturas complexas de dados de entrada ou sa√≠da, voc√™ precisa usar tipos de objeto (os tipos de lote n√£o podem ser usados).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criamos os objetos de banco de dados necess√°rios:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esquema </font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_SOAP_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_soap_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_soap_test;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione imediatamente um novo esquema √† ACL. </font><font style="vertical-align: inherit;">O script na se√ß√£o anterior.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No novo esquema, crie uma tabela para log </font></font><code>T_WS_REQ_LOG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG<font></font>
(<font></font>
  id_log      <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message     <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  proc        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">128</span>),<font></font>
  dtm_request <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">' HTTP-'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.proc <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.dtm_request <span class="hljs-keyword">IS</span> <span class="hljs-string">'/ '</span>;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pacote com um procedimento simples:</font></font><br>
<br>
<pre><code class="sql hljs">
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    );<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    )<font></font>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_req_log (message, proc)
    <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'ID='</span>||a_id||<span class="hljs-string">'; DATA='</span>||a_data, <span class="hljs-string">'proc_simple'</span>)
    <span class="hljs-keyword">RETURNING</span> id_log <span class="hljs-keyword">INTO</span> o_result;
<span class="hljs-keyword">END</span> proc_simple;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servi√ßo web mais simples √© criado e pronto para ser usado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para acessar o servi√ßo, voc√™ precisa usar o URL no seguinte formato:</font></font><br>
<br>
<pre><code class="sql hljs">http://[server]:[port]/[servlet_name]/[DB_SCHEMA]/[WS_OBJ]?wsdl</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[servidor]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nome de dom√≠nio ou endere√ßo IP do servidor de banco de dados Oracle </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[porta]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - porta para acesso via HTTP especificado na se√ß√£o "Configurando o acesso via HTTP" </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[servlet_name]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nome do servlet especificado na se√ß√£o "Criando um servlet para a Web servi√ßo ‚Äù </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[DB_SCHEMA]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nome do esquema do banco de dados (em mai√∫sculas) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[WS_OBJ]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nome do servi√ßo (em mai√∫sculas), que √© igual ao nome do objeto de banco de dados, no nosso caso - o nome do pacote </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que o URL √© importante! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemplo de link:</font></font><br>
<br>
<pre><code class="sql hljs">http://my.server:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST?wsdl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se clicarmos neste link no navegador, seremos criados automaticamente com base em nosso pacote WSDL: </font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wsdl</font></font></b>
                        <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">definitions</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/"</span>
    <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns:xsd</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span>
    <span class="hljs-attr">xmlns:soap</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/soap/"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">types</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xsd:schema</span> <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
     <span class="hljs-attr">elementFormDefault</span>=<span class="hljs-string">"qualified"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_DATA-VARCHAR2-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_ID-NUMBER-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:integer"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span><font></font>
 <font></font>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"O_RESULT"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:schema</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">types</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEInput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">portType</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEInputMessage"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutputMessage"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">portType</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">binding</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTBinding"</span>
           <span class="hljs-attr">type</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">soap:binding</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"document"</span> <span class="hljs-attr">transport</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/soap/http"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">soap:operation</span>
 <span class="hljs-attr">soapAction</span>=<span class="hljs-string">"PROC_SIMPLE"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">output</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">binding</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTService"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">documentation</span>&gt;</span>Oracle Web Service<span class="hljs-tag">&lt;/<span class="hljs-name">documentation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">port</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPort"</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTBinding"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">soap:address</span> 
             <span class="hljs-attr">location</span>=<span class="hljs-string">"http://******:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span><font></font>
 <font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">definitions</span>&gt;</span></code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para testar o servi√ßo, crie um novo projeto SOAP na interface do usu√°rio SOAP. </font><font style="vertical-align: inherit;">Como o URL, especifique o endere√ßo do exemplo acima. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s a abertura, </font></font><code>Request 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vemos que o modelo de solicita√ß√£o j√° √© gerado automaticamente pelo WSDL especificado. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione imediatamente a autoriza√ß√£o b√°sica para a solicita√ß√£o - o login e a senha s√£o os mesmos que ao conectar-se ao banco de dados. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/e_/re/qie_rezy1hizdhgrcy-y--2ghae.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Solicita√ß√£o e resposta de exemplo. </font><font style="vertical-align: inherit;">Observe que uma linha foi adicionada √† solicita√ß√£o gerada automaticamente </font></font><code>&lt;pk:O_RESULT-VARCHAR2-OUT/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">O fato √© que h√° um erro no Oracle 12c: as vari√°veis ‚Äã‚ÄãOUT n√£o s√£o adicionadas ao WSDL para o Oracle WS nativo). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j6/ch/em/j6chemtum0xqyl4tz6kmandwjdc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado da chamada √© vis√≠vel na tabela de log.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/5t/sy/be5tsyoz24pbltgramyceh86xf8.png"><br>
<br>
<a name="NativeOracleSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tecnologia nativa de servi√ßos de banco de dados Oracle XML pode ser usada como uma solu√ß√£o industrial, desde que n√£o haja carga pesada nesse servi√ßo da web (uma solicita√ß√£o em alguns segundos). </font><font style="vertical-align: inherit;">Essa op√ß√£o √© adequada quando os consumidores n√£o possuem requisitos estritos para um servi√ßo da Web (seus atributos, estruturas de dados, l√≥gica de processamento) e n√£o h√° contrato estritamente predeterminado. </font><font style="vertical-align: inherit;">Se voc√™ precisar criar um servi√ßo da web de acordo com um WSDL predefinido (como no nosso caso com novos equipamentos), a tecnologia nativa do Oracle WS ser√° inadequada.</font></font><br>
<br>
<a name="OracleREST"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßo de Dados REST Oracle</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A partir da vers√£o 11.1, a Oracle introduziu o suporte completo ao RESTful na forma de um m√≥dulo separado chamado Oracle REST Data Service (ORDS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS √© um aplicativo Java que permite criar uma API RESTful para um banco de dados Oracle usando SQL e PL / SQL. √â uma alternativa ao uso do Oracle HTTP Server e mod_plsql. Em ess√™ncia, o ORDS √© uma interface HTTP entre o mundo externo e um banco de dados Oracle. Essa interface permite fechar solicita√ß√µes HTTP recebidas para qualquer objeto de banco de dados - uma tabela ou procedimento PL / SQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo o que precisa ser feito √© instalar, configurar e executar o ORDS para o banco de dados necess√°rio. O processo adicional de cria√ß√£o de servi√ßos REST se resume √† grava√ß√£o de c√≥digo em PL / SQL (ou mesmo clicando no IDE se o c√≥digo estiver com pregui√ßa de gravar). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nenhuma licen√ßa adicional √© necess√°ria para instalar o ORDS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Requisitos:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java JDK 8 ou superior;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle 11.1 ou posterior (o Oracle 11 XE Release 2 tamb√©m √© suportado).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√°rias op√ß√µes de implanta√ß√£o do ORDS s√£o suportadas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modo aut√¥nomo;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no servidor de aplicativos (Oracle WebLogic Server, Apache Tomcat).</font></font></li>
</ul><br>
<a name="OracleRESTFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ORDS permite: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organize o acesso aos recursos em um estilo RESTful.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie uma intera√ß√£o no estilo de "Chamada de procedimento remoto" (intera√ß√£o no estilo RPC).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Simplificando, com a ajuda do ORDS, voc√™ pode abrir o acesso via HTTP a certos objetos de banco de dados - tabelas, procedimentos, fun√ß√µes, pacotes. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No primeiro caso,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> estamos lidando com recursos no sentido de que eles s√£o entendidos no estilo de arquitetura RESTful. Cada recurso √© definido por um URI exclusivo, e as opera√ß√µes com recursos (CRUD - criar, ler, modificar, excluir) s√£o determinadas pelas opera√ß√µes da solicita√ß√£o HTTP: PUT, POST, GET, DELETE. Por exemplo, se o recurso for uma entrada na tabela de funcion√°rios, essa entrada estar√° dispon√≠vel por um URI do formul√°rio:</font></font><br>
<br>
<pre><code class="sql hljs">GET https://server:port/ords/workspace/hr/employees/7369</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, o nome do esquema do banco de dados, o nome da tabela e o ID do registro na tabela s√£o indicados no URI. Portanto, essa solicita√ß√£o HTTP realmente executa uma opera√ß√£o SELECT da tabela especificada. Com outras opera√ß√µes (adi√ß√£o, altera√ß√£o, exclus√£o), o princ√≠pio da comunica√ß√£o √© o mesmo: o caminho para o recurso √© indicado no URI e par√¢metros adicionais s√£o indicados no corpo da solicita√ß√£o, por exemplo, os valores de campo para inserir o registro na tabela. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No segundo caso, em</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vez de acessar o recurso, uma chamada de procedimento √© usada diretamente, o que pode fazer o mesmo que no primeiro caso (CRUD), al√©m de executar qualquer outra l√≥gica que implemente o processo de neg√≥cios necess√°rio. Uma chamada de procedimento de um pacote pode ser feita usando uma solicita√ß√£o HTTP deste formato:</font></font><br>
<br>
<pre><code class="sql hljs">http://localhost:8080/ords/my_schema/my_pkg/MY_PROC</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Os par√¢metros para o procedimento s√£o transferidos no corpo da solicita√ß√£o na forma de estruturas no formato JSON </font></font><code>{"param" : "value"}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">A mesma abordagem √© usada ao usar o WS Oracle nativo, discutido acima, mas no caso de servi√ßos REST, n√£o h√° restri√ß√µes impostas pelo protocolo SOAP. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">profissionais</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um mecanismo flex√≠vel que permite implementar servi√ßos da web de qualquer complexidade.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplicidade de implementa√ß√£o: para transformar um procedimento PL / SQL em um servi√ßo da web, voc√™ precisa executar apenas alguns comandos t√≠picos. </font><font style="vertical-align: inherit;">E, usando o SQL Developer, a cria√ß√£o de uma API REST se transforma em um clique do mouse com o m√≠nimo de c√≥digo escrito.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A capacidade de implementar um servi√ßo da web sem autentica√ß√£o.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menos</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O ORDS n√£o est√° inclu√≠do no pacote padr√£o do Oracle - ele deve ser instalado separadamente para cada servidor (licen√ßas adicionais, como j√° mencionadas, n√£o s√£o necess√°rias). </font><font style="vertical-align: inherit;">Isso pode ser um problema se voc√™ tiver milhares de servidores de banco de dados.</font></font></li>
</ul><br>
<a name="OracleRESTSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Costumiza√ß√£o</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ORDS pode ser iniciado de dois modos: por meio do servidor de aplicativos ou no modo independente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este artigo descreve apenas a op√ß√£o para executar no modo aut√¥nomo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o ORDS funcione, voc√™ precisa:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina as configura√ß√µes antes da instala√ß√£o.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclua a instala√ß√£o do ODRS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inicie o ORDS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure a ACL (para o esquema de banco de dados desejado).</font></font></li>
</ol><br>
<a name="OracleRESTSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defini√ß√µes</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A distribui√ß√£o ORDS possui um arquivo com par√¢metros parecidos com este por padr√£o:</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=<font></font>
db.port=<font></font>
db.servicename=<font></font>
db.sid=<font></font>
db.username=APEX_PUBLIC_USER<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8080<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma descri√ß√£o dos par√¢metros pode ser encontrada na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Par√¢metros para o modo aut√¥nomo:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√¢metro</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descri√ß√£o</font></font></b></td>
</tr>
<tr>
<td><code>db.hostname</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome ou endere√ßo IP do Oracle Database Server </font></font></td>
</tr>
<tr>
<td><code>db.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Porta do banco de dados (por exemplo, 1521)</font></font></td>
</tr>
<tr>
<td><code>db.servicename</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banco de dados de nome de servi√ßo</font></font></td>
</tr>
<tr>
<td><code>db.username</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O nome de usu√°rio do gateway PL / SQL. </font><font style="vertical-align: inherit;">Padr√£o = APEX_PUBLIC_USER, mas o exemplo n√£o planeja usar o APEX, portanto, voc√™ pode deixar esse par√¢metro em branco</font></font></td>
</tr>
<tr>
<td><code>db.password</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Senha do usu√°rio (tamb√©m n√£o preencha) </font></font></td>
</tr>
<tr>
<td><code>migrate.apex.rest</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transi√ß√£o de servi√ßos RESTful APEX para ORDS. </font><font style="vertical-align: inherit;">Defina como false se o APEX n√£o for usado.</font></font></td>
</tr>
<tr>
<td><code>rest.services.apex.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure o ORDS para uso no APEX</font></font></td>
</tr>
<tr>
<td><code>rest.services.ords.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Defina o esquema do banco de dados para ORDS (ORDS_PUBLIC_USER e ORDS_METADATA). </font><font style="vertical-align: inherit;">O valor deve ser verdadeiro</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espa√ßo de tabela padr√£o para o esquema ORDS_METADATA</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espa√ßo de tabela tempor√°rio para o esquema ORDS_METADATA</font></font></td>
</tr>
<tr>
<td><code>standalone.http.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A porta na qual o ORDS ser√° executado. </font><font style="vertical-align: inherit;">Essa porta ser√° usada no URI para acessar o WS.</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espa√ßo de tabela padr√£o para o esquema ORDS_PUBLIC_USER</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espa√ßo de tabela tempor√°rio para o esquema ORDS_PUBLIC_USER</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, o conte√∫do do arquivo deve se parecer com isso:</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=your_server_host_name<font></font>
db.port=1521<font></font>
db.servicename=your_db_servicename<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=false<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8888<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As configura√ß√µes necess√°rias est√£o conclu√≠das, voc√™ pode prosseguir com a instala√ß√£o.</font></font><br>
<br>
<a name="OracleRESTSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instala√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Executamos o comando no sistema operacional:</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por padr√£o, o arquivo de configura√ß√£o √© obtido no diret√≥rio </font></font><code>params</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localizado ao lado de </font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Voc√™ pode especificar explicitamente o caminho para este arquivo usando o par√¢metro </font></font><code>--parameterFile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="xml hljs">java -jar ords.war --parameterFile /path/to/params/myown_params.properties</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na caixa de di√°logo de instala√ß√£o, fa√ßa o seguinte: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indicamos o caminho para o diret√≥rio para salvar a configura√ß√£o (no exemplo, √© indicado </font></font><code>conf </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- como resultado, no mesmo diret√≥rio em que o arquivo est√° localizado </font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ser√° criado um diret√≥rio </font></font><code>conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no qual os arquivos com a configura√ß√£o ORDS ser√£o criados).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s o comando Digitar a senha do banco de dados para ORDS_PUBLIC_USER, inseriremos a senha do esquema </font></font><code>ORDS_PUBLIC_USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sob esse usu√°rio, o ORDS se conectar√° ao banco de dados.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s o prompt Digite 1 se voc√™ deseja usar o PL / SQL Gateway ou 2 para pular esta etapa, responderemos ‚Äú2‚Äù, pois n√£o usaremos o APEX e n√£o precisamos migrar </font></font><code>mod_plsql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s a instru√ß√£o Digite 1 se voc√™ deseja iniciar no modo aut√¥nomo ou 2 para sair [1] aparecer, n√≥s respondemos ‚Äú1‚Äù.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ap√≥s a instru√ß√£o Digite 1 se estiver usando HTTP ou 2 se estiver usando HTTPS [1], responderemos 1.</font></font></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Di√°logo de instala√ß√£o</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war install<br>
This Oracle REST Data Services instance has not yet been configured.<br>
Please complete the following prompts<br>
 <br>
 <br>
Enter the location to store configuration data: conf<br>
Enter the database password for ORDS_PUBLIC_USER:<br>
Confirm password:<br>
 03, 2019 2:47:49 PM oracle.dbtools.rt.config.setup.SchemaSetup getInstallOrUpgrade<br>
WARNING: Failed to connect to user ORDS_PUBLIC_USER jdbc:oracle:thin:@//***YOUR_HOST_NAME.DOMAIN***:1521/***YOUR_SERVICE_NAME.DOMAIN***<br>
 <br>
Enter 1 if you want to use PL/SQL Gateway or 2 to skip this step.<br>
If using Oracle Application Express or migrating from mod_plsql then you must enter 1 [1]:2<br>
 03, 2019 2:48:32 PM<br>
INFO: reloaded pools: []<br>
Enter 1 if you wish to start in standalone mode or 2 to exit [1]:<br>
Enter 1 if using HTTP or 2 if using HTTPS [1]:<br>
2019-09-03 14:48:49.754:INFO::main: Logging initialized @4276887ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 2:48:49 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 2:48:50 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
Exception in thread "main" java.lang.reflect.InvocationTargetException<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)<br>
 at oracle.dbtools.jarcl.Entrypoint.main(Entrypoint.java:89)<br>
Caused by: java.lang.OutOfMemoryError: Java heap space<br>
 at java.util.Arrays.copyOf(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.util.AbstractMap.toString(Unknown Source)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.zip.ZipIndex.toString(ZipIndex.java:166)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.JarClassLoader.toString(JarClassLoader.java:51)<br>
 at org.eclipse.jetty.server.ClassLoaderDump.dump(ClassLoaderDump.java:67)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:225)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.server.handler.ContextHandler.dump(ContextHandler.java:259)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:162)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:701)<br>
 at org.eclipse.jetty.util.component.Dumpable.dump(Dumpable.java:62)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:684)<br>
 at oracle.dbtools.standalone.StandaloneConfiguration.start(StandaloneConfiguration.java:241)<br>
 at oracle.dbtools.standalone.Standalone.execute(Standalone.java:508)<br>
 at oracle.dbtools.cmdline.DefaultCommand.execute(DefaultCommand.java:137)<br>
 at oracle.dbtools.cmdline.Commands.execute(Commands.java:207)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:163)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:368)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, um diret√≥rio com a configura√ß√£o do ORDS ser√° criado e os esquemas de utilidade para o ORDS aparecer√£o no banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejo </font><font style="vertical-align: inherit;">tamb√©m: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instale o Oracle REST Data Services 3.0.X em menos de 5 minutos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="OracleRESTSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lan√ßamento</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O in√≠cio no modo independente √© realizado pelo comando:</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war standalone</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iniciar caixa de di√°logo</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war standalone<br>
2019-09-03 15:52:45.825:INFO::main: Logging initialized @2079ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 3:52:45 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 3:52:45 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
2019-09-03 15:52:47.124:INFO:oejs.Server:main: jetty-9.4.z-SNAPSHOT; built: 2019-05-02T09:46:34.874Z; git: 14f32d50076f2b706f41a33066eb364d8492e199; jvm 1.8.0_221-b11<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: DefaultSessionIdManager workerName=node0<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: No SessionScavenger set, using defaults<br>
2019-09-03 15:52:47.180:INFO:oejs.session:main: node0 Scavenging every 660000ms<br>
 03, 2019 3:52:48 PM<br>
INFO: Configuration properties for: |apex|pu|<br>
db.hostname=***YOUR_HOST_NAME.DOMAIN***<br>
db.password=******<br>
db.port=1521<br>
db.servicename=***YOUR_SERVICE_NAME.DOMAIN***<br>
db.username=ORDS_PUBLIC_USER<br>
resource.templates.enabled=true<br>
 <br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.MaxLimit in configuration |apex|pu| is using a value of 10, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.InitialLimit in configuration |apex|pu| is using a value of 3, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:50 PM<br>
INFO: Oracle REST Data Services initialized<br>
Oracle REST Data Services version : 19.2.0.r1991647<br>
Oracle REST Data Services server info: jetty/9.4.z-SNAPSHOT<br>
 <br>
2019-09-03 15:52:50.484:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@d56d67{/ords,null,AVAILABLE}<br>
2019-09-03 15:52:50.658:INFO:oejs.AbstractConnector:main: Started ServerConnector@12325ad{HTTP/1.1,[http/1.1, h2c]}{0.0.<br>
0.0:8082}<br>
2019-09-03 15:52:50.659:INFO:oejs.Server:main: Started @6914ms</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, o ORDS est√° em funcionamento. </font><font style="vertical-align: inherit;">O endere√ßo do servi√ßo da web ser√° http: // &lt;hostname&gt;: / ords / ..., em que &lt;hostname&gt; √© o nome do computador que est√° executando o ORDS (ele n√£o precisa corresponder ao nome do servidor de banco de dados, ou seja, o ORDS pode ser executado em outro host ), &lt;port&gt; - a porta especificada na configura√ß√£o do ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se desejar, voc√™ pode criar um script para executar automaticamente o ORDS quando o sistema operacional for iniciado.</font></font><br>
<br>
<a name="OracleRESTSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o de acesso</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E o √∫ltimo passo √© configurar a ACL. </font><font style="vertical-align: inherit;">As etapas s√£o as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mesmas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que o uso do Oracle Oracle nativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ deve concluir esta etapa ap√≥s a cria√ß√£o do esquema do banco de dados, para que os exemplos abaixo indiquem separadamente quando voc√™ precisa executar esta configura√ß√£o. </font><font style="vertical-align: inherit;">At√© o momento, podemos assumir que todas as etapas preliminares foram conclu√≠das e prosseguir com os exemplos.</font></font><br>
<br>
<a name="OracleRESTExample1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo 1: Manipulador para uma solicita√ß√£o POST</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como exemplo, considere a op√ß√£o de implementa√ß√£o de intera√ß√£o no estilo RPC, ou seja, criaremos um m√©todo de servi√ßo da Web, cujo manipulador ser√° um procedimento em lote. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, foi nessa vers√£o que o trabalho com ORDS foi implementado em nosso projeto para a rede de distribui√ß√£o, e o resultado atendeu √†s suas expectativas. </font><font style="vertical-align: inherit;">Foi uma maneira r√°pida e universal de criar novos m√©todos de servi√ßos da web para diferentes processos de neg√≥cios - desde o trabalho com o equipamento at√© a API dos sites. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como mencionado acima, o suporte ao ORDS tamb√©m est√° inclu√≠do no SQL Developer (o IDE do banco de dados desenvolvido pela Oracle). </font><font style="vertical-align: inherit;">No SQL Developer, a cria√ß√£o de servi√ßos da Web est√° dispon√≠vel diretamente nos itens de menu ou no menu de contexto.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, exemplos s√£o feitos usando o SQL Developer (vers√£o 18), mas o c√≥digo PL / SQL que √© executado no banco de dados como resultado de a√ß√µes no IDE tamb√©m est√° inclu√≠do. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A vers√£o do banco de dados no qual as experi√™ncias foram feitas:</font></font><br>
<br>
<pre><code class="sql hljs">SQL&gt; <span class="hljs-keyword">SELECT</span> v.BANNER <span class="hljs-keyword">FROM</span> v$<span class="hljs-keyword">version</span> v;<font></font>
 <font></font>
BANNER<font></font>
<span class="hljs-comment">--------------------------------------------------------------------------------</span>
Oracle DATABASE 12c Enterprise Edition <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - <span class="hljs-number">64</span><span class="hljs-built_in">bit</span> Production<font></font>
PL/<span class="hljs-keyword">SQL</span> <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
CORE	<span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span>	Production<font></font>
TNS <span class="hljs-keyword">FOR</span> Linux: <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
NLSRTL <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production</code></pre><br>
<a name="OracleRESTExample1-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um usu√°rio de teste para WS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, precisamos novamente de um novo esquema - crie-o:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_test;</code></pre><br>
<a name="OracleRESTExample1-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurando um Esquema de Banco de Dados</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s a cria√ß√£o do diagrama, √© necess√°rio torn√°-lo acess√≠vel atrav√©s do ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por esta:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No SQL Developer, crie uma conex√£o para </font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na lista de conex√µes, chame o menu de contexto para a nova conex√£o. </font><font style="vertical-align: inherit;">Escolha </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servi√ßos REST ‚Üí Ativar Servi√ßos REST ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/qy/yv/jqqyyveitff-wlvruwzfefp8bae.png"><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na caixa de di√°logo, marque a caixa ao lado de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Habilitar esquema</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (voc√™ tamb√©m pode alterar o par√¢metro " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schema alias</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " aqui </font><font style="vertical-align: inherit;">se desejar que </font></font><code>ws_test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outro texto seja exibido no URI em </font><font style="vertical-align: inherit;">vez do nome do esquema </font><font style="vertical-align: inherit;">):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/0d/f-/jc0df-k8qea-djnenwxg4spe2xw.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao clicar em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Avan√ßar"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , veremos o c√≥digo PL / SQL que ser√° executado no banco de dados (e voc√™ pode escrever sozinho sem usar o IDE):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wg/pd/pb/wgpdpbaxjzxzqv7ju6vf4yzp2i0.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listagem:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.ENABLE_SCHEMA( p_enabled             =&gt; <span class="hljs-literal">TRUE</span>
                      , p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>
                      , p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>
                      , p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>
                      , p_auto_rest_auth      =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
<a name="OracleRESTExample1-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um m√≥dulo e modelo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, voc√™ precisa criar um m√≥dulo e modelo para o recurso. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um m√≥dulo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma unidade estrutural que permite agrupar v√°rios modelos de recursos relacionados √† l√≥gica. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um modelo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um servi√ßo da web espec√≠fico que atende a um conjunto espec√≠fico de m√©todos para um recurso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulo de recursos:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> uma unidade organizacional usada para agrupar modelos de recursos relacionados. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo de recurso:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> um servi√ßo RESTful individual capaz de atender a solicita√ß√µes de algum conjunto de URIs (Universal Resource Identifiers). O conjunto de URIs √© definido pelo padr√£o de URI do modelo de recursos.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por exemplo, para uma loja online, um m√≥dulo pode ser chamado</font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- neste m√≥dulo, todas as APIs da loja ser√£o combinadas. </font><font style="vertical-align: inherit;">Os modelos podem ser recursos espec√≠ficos, por exemplo, um pedido (modelo </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), cat√°logo de produtos (modelo </font></font><code>item</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), pagamento (modelo </font></font><code>payment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para criar um m√≥dulo e um modelo, √© necess√°rio executar as seguintes etapas:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na √°rvore de objetos, abra a se√ß√£o Servi√ßos de Dados REST, chame o menu de contexto na se√ß√£o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√≥dulos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , selecione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Novo m√≥dulo ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ar/uv/ry/aruvrywejhtzq-3oigkirmjy0qy.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na caixa de di√°logo de cria√ß√£o do m√≥dulo, especifique o nome do m√≥dulo ( </font></font><code>shop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), prefixo URI (tamb√©m especificamos </font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- no exemplo abaixo, veremos imediatamente qual ser√° o modelo de endere√ßo de servi√ßo da web), coloque um daw na frente do </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Publish</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , clique em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Next&gt;"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/ak/mf/dbakmfibj3ir0cxttme-zjuz4qu.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na pr√≥xima caixa de di√°logo, especifique o nome do modelo, por exemplo </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, e clique novamente em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Avan√ßar&gt;"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na √∫ltima caixa de di√°logo, vemos todos os par√¢metros inseridos do m√≥dulo e modelo. </font><font style="vertical-align: inherit;">Na guia </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">voc√™ pode ver o c√≥digo PL / SQL que ser√° executado no banco de dados quando voc√™ clicar em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concluir</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/al/g0/yjalg0-ud3fp5x37qtx5nyemwxq.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para criar um m√≥dulo </font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, voc√™ pode adicionar mais padr√µes - tamb√©m na √°rvore de objetos, o menu de contexto e selecionando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o Adicionar o modelo ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Listagem de c√≥digo para criar um m√≥dulo e um modelo</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.DEFINE_MODULE( p_module_name    =&gt; <span class="hljs-string">'shop'</span>
                      , p_base_path      =&gt; <span class="hljs-string">'shop'</span>
                      , p_items_per_page =&gt;  <span class="hljs-number">25</span>
                      , p_status         =&gt; <span class="hljs-string">'PUBLISHED'</span>
                      , p_comments       =&gt; <span class="hljs-literal">NULL</span>);<font></font>
 <font></font>
    ORDS.DEFINE_TEMPLATE( p_module_name    =&gt; 'shop'<font></font>
                        , p_pattern        =&gt; 'order'<font></font>
                        , p_priority       =&gt; 0<font></font>
                        , p_etag_type      =&gt; 'HASH'<font></font>
                        , p_etag_query     =&gt; NULL<font></font>
                        , p_comments       =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br>
<a name="OracleRESTExample1-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um manipulador de solicita√ß√µes HTTP</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora precisamos criar um manipulador de solicita√ß√µes HTTP para o nosso servi√ßo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, precisamos criar objetos de banco de dados que conter√£o a l√≥gica de processamento de solicita√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Precisamos de uma tabela para registro e um pacote no qual haver√° um c√≥digo manipulador.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie uma tabela usando um script:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG<font></font>
(<font></font>
  id_log          <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message         <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_header  <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_body    <span class="hljs-keyword">CLOB</span>,<font></font>
  response_header <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  response_body   <span class="hljs-keyword">CLOB</span>,<font></font>
  dtz_log         <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">WITH</span> <span class="hljs-built_in">TIME</span> ZONE <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">'  HTTP- (ORDS)'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.dtz_log <span class="hljs-keyword">IS</span> <span class="hljs-string">'/  '</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_WS_LOG PRIMARY <span class="hljs-keyword">KEY</span> (ID_LOG) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie um pacote:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    );<font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/<font></font>
 <font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>
<span class="hljs-keyword">AS</span>
    l_clob      <span class="hljs-keyword">CLOB</span>;<font></font>
    l_amount    NUMBER := 2000;<font></font>
    l_offset    NUMBER := 1;<font></font>
    l_buffer    VARCHAR2(32767);<font></font>
    l_length    PLS_INTEGER := dbms_lob.getlength(a_blob);<font></font>
<span class="hljs-keyword">BEGIN</span>
    dbms_lob.createtemporary(l_clob, <span class="hljs-literal">TRUE</span>);<font></font>
    dbms_lob.OPEN(l_clob, dbms_lob.lob_readwrite);<font></font>
    WHILE l_offset &lt;= l_length LOOP<font></font>
        l_buffer := UTL_RAW.cast_to_varchar2(UTL_RAW.convert( r            =&gt; dbms_lob.substr(a_blob, l_amount, l_offset)<font></font>
                                                            , from_charset =&gt; a_from_charset<font></font>
                                                            , to_charset   =&gt; a_to_charset));<font></font>
        IF LENGTH(l_buffer) &gt; 0 THEN<font></font>
            dbms_lob.writeappend(l_clob, LENGTH(l_buffer), l_buffer);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_offset := l_offset + l_amount;<font></font>
        EXIT WHEN l_offset &gt; l_length;<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
    RETURN l_clob;<font></font>
<span class="hljs-keyword">END</span> blob2clob;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp<font></font>
        );<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, para o modelo criado, voc√™ precisa adicionar um manipulador. </font><font style="vertical-align: inherit;">Adicione um manipulador para o m√©todo HTTP </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, execute as seguintes etapas:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chamamos o menu de contexto para o modelo, selecione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicionar manipulador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, em seguida, selecione o m√©todo HTTP:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gh/hs/2l/ghhs2llhlojihuhzkko_pcfm6bo.png"></li>
<li>     .   <b>SQL Worksheet</b>  PL/SQL-,         HTTP-   <code>POST</code>.     ,   <code>process_request</code>    .  ,     bind- <code>:body</code> ‚Äî    ORDS,          (    BLOB).       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"></a>.      <code>:body_text</code>,        CLOB.        ,   ,   ,       ORDS  .     <code>:body_text</code>   ,        ¬´¬ª .       <code>:body</code>,      CLOB    . ,     :<br>
<br>
<img src="https://habrastorage.org/webt/z7/jw/md/z7jwmdky6orqwntld4kwoy_lw7i.png"><br>
</li>
<li>  Save REST Handler ‚Äî      .<br>
<br>
   POST-:<br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se necess√°rio, voc√™ pode obter o c√≥digo PL / SQL para criar um manipulador. </font><font style="vertical-align: inherit;">Para fazer isso, no menu de contexto do m√≥dulo ORDS, selecione Defini√ß√£o REST e especifique onde produzir o script de cria√ß√£o do m√≥dulo, por exemplo, para a √°rea de transfer√™ncia:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6i/r4/ww/6ir4wwzdqbzg2zen2mmshbmmroq.png"></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O c√≥digo resultante para criar o m√≥dulo</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">-- Generated by Oracle SQL Developer REST Data Services 18.1.0.095.1630</span>
<span class="hljs-comment">-- Exported REST Definitions from ORDS Schema Version 18.4.0.r3541002</span>
<span class="hljs-comment">-- Schema: WS_TEST   Date: Wed Oct 23 20:19:54 MSK 2019</span>
<span class="hljs-comment">--</span>
<span class="hljs-keyword">BEGIN</span><font></font>
  ORDS.ENABLE_SCHEMA(<font></font>
      p_enabled             =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
      p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
      p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>,<font></font>
      p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>,<font></font>
      p_auto_rest_auth      =&gt; <span class="hljs-literal">TRUE</span>);    <font></font>
 <font></font>
  ORDS.DEFINE_MODULE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_base_path      =&gt; '/shop/',<font></font>
      p_items_per_page =&gt;  25,<font></font>
      p_status         =&gt; 'PUBLISHED',<font></font>
      p_comments       =&gt; NULL);      <font></font>
  ORDS.DEFINE_TEMPLATE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_priority       =&gt; 0,<font></font>
      p_etag_type      =&gt; 'HASH',<font></font>
      p_etag_query     =&gt; NULL,<font></font>
      p_comments       =&gt; NULL);<font></font>
  ORDS.DEFINE_HANDLER(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_method         =&gt; 'POST',<font></font>
      p_source_type    =&gt; 'plsql/block',<font></font>
      p_items_per_page =&gt;  0,<font></font>
      p_mimes_allowed  =&gt; '',<font></font>
      p_comments       =&gt; NULL,<font></font>
      p_source         =&gt; <font></font>
'<span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; ''application/json'');<font></font>
        htp.p(''{ "result" : "error", "message" : "''||SQLERRM||''" }'');<font></font>
<span class="hljs-keyword">END</span>;'<font></font>
      );<font></font>
 <font></font>
 <font></font>
  <span class="hljs-keyword">COMMIT</span>; 
<span class="hljs-keyword">END</span>;</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nota: se voc√™ executar o procedimento de cria√ß√£o do m√≥dulo </font></font><code>ORDS.DEFINE_MODULE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">novamente, todos os modelos deste m√≥dulo ser√£o exclu√≠dos automaticamente e n√£o haver√° aviso sobre isso!</font></font><br>
<br>
<a name="OracleRESTExample1-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo de chamada</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â aqui que nosso servi√ßo da web est√° pronto. </font><font style="vertical-align: inherit;">Resta verificar seu trabalho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para verificar, executamos a solicita√ß√£o:</font></font><br>
<br>
<pre><code class="xml hljs">POST http://****:8888/ords/ws_test/shop/order HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json<font></font>
Content-Length: 22<font></font>
Host: ****:8888<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{ "message" : "test" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em resposta, obtemos:</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Wed, 23 Oct 2019 16:54:53 GMT<font></font>
Content-Type: application/json<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{ "result" : "success" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O resultado da execu√ß√£o do m√©todo √© um registro com o corpo da solicita√ß√£o e resposta na tabela de log: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/89/tp/cj89tpjfzxvmdot-nsdr15nn49c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, a solicita√ß√£o HTTP enviada foi processada com √™xito pelo procedimento do pacote.</font></font><br>
<br>
<a name="OracleRESTExample1-Step6"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√¢metros da solicita√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Acima, j√° vimos o resultado de um simples servi√ßo da web. </font><font style="vertical-align: inherit;">Agora vamos complicar um pouco a tarefa adicionando par√¢metros adicionais √† solicita√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
H√° duas maneiras de passar par√¢metros: </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via URL. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os par√¢metros s√£o definidos no URL no formato padr√£o:</font></font><br>
<br>
<pre><code class="sql hljs">http://...URI...?p1=val1&amp;p2=val2</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via HEADER. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os par√¢metros s√£o definidos no cabe√ßalho da solicita√ß√£o como </font></font><code>p1: val1</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No ORDS no manipulador de solicita√ß√µes, os par√¢metros s√£o definidos como vari√°veis ‚Äã‚Äãde liga√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicionamos dois par√¢metros ao exemplo anterior: </font></font><code>prm1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- par√¢metro no URI, </font></font><code>prm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- par√¢metro no cabe√ßalho da solicita√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para processar esses par√¢metros, </font></font><code>PK_ORDS_API.process_request:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adicionamos o </font><font style="vertical-align: inherit;">procedimento, </font><font style="vertical-align: inherit;">adicionamos os par√¢metros </font></font><code>a_prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>a_prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aos quais os valores de nossos par√¢metros da solicita√ß√£o vir√£o.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Procedimento do manipulador de solicita√ß√£o com novos par√¢metros</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    , a_prm_uri     VARCHAR2 := NULL<font></font>
    , a_prm_hdr     VARCHAR2 := NULL<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
    lh_hdr('a_prm_uri')             := a_prm_uri;<font></font>
    lh_hdr('a_prm_hdr')             := a_prm_hdr;<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp);<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro do procedimento, simplesmente registramos os valores dos novos par√¢metros no log. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione novos par√¢metros ao manipulador de solicita√ß√µes POST - na forma de vari√°veis ‚Äã‚Äãde liga√ß√£o </font></font><code>:prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>:prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Manipulador da solicita√ß√£o POST com novos par√¢metros:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob), a_prm_uri =&gt; :prm_uri, a_prm_hdr =&gt; :prm_hdr);<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No manipulador, na guia </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√¢metros</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">declare as vari√°veis: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mc/cx/mh/mccxmhpqkgnbkll850xmlojvy6e.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse formul√°rio, o primeiro campo ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nome</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) cont√©m o nome do par√¢metro esperado na solicita√ß√£o, o segundo campo ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√¢metro de Liga√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) - o nome da vari√°vel de liga√ß√£o que ser√° especificada no manipulador dessa solicita√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos executar a solicita√ß√£o com novos par√¢metros: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/rj/e5/k1rje5cdkd9prfi8r-canaolczs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resultado - os par√¢metros da solicita√ß√£o foram salvos no log: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/vy/c6/4yvyc6zvhi_xkhod215lxywbdee.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que os par√¢metros do URI tamb√©m podem ser recuperados da vari√°vel CGI </font></font><code>QUERY_STRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ou seja, para obter os par√¢metros, n√£o √© necess√°rio iniciar as vari√°veis ‚Äã‚Äãde liga√ß√£o - voc√™ pode analis√°-las no pr√≥prio procedimento do manipulador solicita√ß√£o.</font></font><br>
<br>
<a name="OracleRESTExample1-Step7"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vari√°veis ‚Äã‚ÄãCGI</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com HTTP no Oracle, √© poss√≠vel obter os valores das vari√°veis ‚Äã‚Äãde ambiente que refletem o contexto da solicita√ß√£o HTTP. </font><font style="vertical-align: inherit;">Voc√™ pode obter os valores das vari√°veis, utilizando o procedimento </font></font><code>OWA_UTIL.get_cgi_env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lista de vari√°veis ‚Äã‚ÄãCGI dispon√≠veis no PL / SQL</font></font></b>
                        <div class="spoiler_text"><code>APEX_LISTENER_VERSION<br>
GATEWAY_INTERFACE<br>
GATEWAY_IVERSION<br>
HTTP_ACCEPT_ENCODING<br>
HTTP_HOST<br>
HTTP_PORT<br>
HTTP_USER_AGENT<br>
PATH_ALIAS<br>
PATH_INFO<br>
PLSQL_GATEWAY<br>
QUERY_STRING<br>
REMOTE_ADDR<br>
REMOTE_USER<br>
REQUEST_CHARSET<br>
REQUEST_IANA_CHARSET<br>
REQUEST_METHOD<br>
REQUEST_PROTOCOL<br>
REQUEST_SCHEME<br>
SCRIPT_NAME<br>
SERVER_NAME<br>
SERVER_PORT<br>
SERVER_PROTOCOL<br>
SERVER_SOFTWARE<br>
WEB_AUTHENT_PREFIX<br>
host<br>
user-agent<br>
CONTENT-LENGTH<br>
CONTENT-TYPE</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consulte tamb√©m: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cabe√ßalhos HTTP (OWA_UTIL) e vari√°veis ‚Äã‚Äãde liga√ß√£o espec√≠ficas do ORDS</font></font></a><br>
<br>
<a name="OracleRESTExample2"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemplo 2: Acessando uma Tabela Atrav√©s do ORDS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste exemplo, consideramos a organiza√ß√£o do acesso a um objeto de banco de dados (a uma tabela) por meio do ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como no exemplo anterior, fazemos acesso sem autoriza√ß√£o. </font><font style="vertical-align: inherit;">Veja como tornar o acesso seguro aos recursos na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para tornar um objeto de banco de dados acess√≠vel por meio do ORDS, voc√™ precisa executar apenas uma etapa - o comando </font></font><code>ORDS.ENABLE_OBJECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Depois disso, o objeto pode ser acessado por um URI do formul√°rio:</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<a name="OracleRESTExample2-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie um padr√£o de teste</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, criaremos a tabela "Pedidos". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Script de cria√ß√£o da tabela:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_ORDER<font></font>
(<font></font>
  id_order   <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-keyword">NUM</span>        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>),<font></font>
  buyer_name <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">256</span>),<font></font>
  dt_order   <span class="hljs-built_in">DATE</span>,<font></font>
  memo       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>)<font></font>
);<font></font>
 <font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.id_order <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.num <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.buyer_name <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.dt_order <span class="hljs-keyword">IS</span> <span class="hljs-string">'  '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.memo <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_ORDER PRIMARY <span class="hljs-keyword">KEY</span> (ID_ORDER) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre><br>
<a name="OracleRESTExample2-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abrindo acesso √† tabela atrav√©s do ORDS</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em SQL Developer invocar o menu de contexto para a mesa necess√°rio, selecione </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o Habilitar o servi√ßo REST ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/pe/iw/jmpeiwllpn8ailltyqp-zmyfxji.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na janela de configura√ß√µes de acesso, marque a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caixa de sele√ß√£o Ativar objeto</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , desmarque a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caixa de sele√ß√£o Autoriza√ß√£o necess√°ria</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , clique em </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Concluir"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Avan√ßar"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para ver o c√≥digo PL / SQL recebido):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9q/fj/9e/9qfj9eql816su08ignjwhfbjp24.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Depois de executar estas etapas, a tabela </font></font><code>T_ORDER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fica dispon√≠vel atrav√©s de HTTP, o URI base para acessar o recurso:</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listagem de inclus√£o de tabela:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
  <span class="hljs-keyword">PRAGMA</span> AUTONOMOUS_TRANSACTION;
<span class="hljs-keyword">BEGIN</span><font></font>
 <font></font>
    ORDS.ENABLE_OBJECT(p_enabled =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
                       p_schema =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
                       p_object =&gt; <span class="hljs-string">'T_ORDER'</span>,<font></font>
                       p_object_type =&gt; <span class="hljs-string">'TABLE'</span>,<font></font>
                       p_object_alias =&gt; <span class="hljs-string">'t_order'</span>,<font></font>
                       p_auto_rest_auth =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">commit</span>;<font></font>
 <font></font>
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
</li>
</ol><br>
<a name="OracleRESTExample2-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie ou edite um registro</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O acesso √† tabela est√° aberto - verificamos como voc√™ pode criar e editar registros na tabela atrav√©s do ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para criar um registro, executamos a solicita√ß√£o </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na documenta√ß√£o do ORDS, a seguinte descri√ß√£o </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© especificada </font><font style="vertical-align: inherit;">na descri√ß√£o do m√©todo </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou seja, o campo </font></font><code>KeyValues</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chave do registro) deve ser preenchido mesmo para um registro rec√©m-criado. </font><font style="vertical-align: inherit;">A consulta em si deve listar todos os campos da tabela (mas o campo chave pode ser omitido).</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inqu√©rito</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 157<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1"<font></font>
}</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em resposta, obtemos todos os campos do registro rec√©m-criado:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><font></font>
HTTP/1.1 200 OK<font></font>
Content-Type: application/json<font></font>
Content-Location: http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "  1",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinamos o conte√∫do da tabela - nosso novo registro apareceu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/sb/ud/oysbudug0wwzgn8u7rz5jacs4ng.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para alterar o registro, chamamos o mesmo m√©todo PUT. </font><font style="vertical-align: inherit;">Altere a nota em nossa ordem:</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 178<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1.  "<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na resposta, obtemos o mesmo JSON com os par√¢metros do registro modificado. </font><font style="vertical-align: inherit;">Na tabela, vemos que a nota foi atualizada:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/ba/ax/gbbaax7cmuudt8bd9osl3ugr6to.png"><br>
<br>
<a name="OracleRESTExample2-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recuperando Registros de uma Tabela</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem tr√™s modos de consultar dados de uma tabela:</font></font><br>
 <br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicita√ß√£o de p√°gina:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?offset=&lt;Offset&gt;&amp;limit=&lt;Limit&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pedido de condi√ß√µes:</font></font><br>
<br>
<pre><code class="sql hljs"> GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?q=&lt;FilterClause&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solicita√ß√£o de chave prim√°ria:</font></font><br>
 <br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obter todos os registros, voc√™ pode executar a consulta sem especificar nenhum par√¢metro:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Responda</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:39:58 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "items": [   {<font></font>
      "id_order": 25,<font></font>
      "num": "ords-3472634",<font></font>
      "buyer_name": "Buyer Name",<font></font>
      "dt_order": "2019-10-25T12:00:00Z",<font></font>
      "memo": "—û¬µ–É‚Äö—ï–Ü‚Äπ‚Ññ ¬∑¬∞—î¬∞¬∑ 1.  ¬∑—ò¬µ–Ö‚Äö–ä —ó–Ç—ò¬µ‚Ä°¬∞–Ö¬µ",<font></font>
      "links": [      {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      }]<font></font>
   }],<font></font>
   "hasMore": false,<font></font>
   "limit": 25,<font></font>
   "offset": 0,<font></font>
   "count": 1,<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "first",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como fazer com que o Oracle adicione uma codifica√ß√£o ao cabe√ßalho Content-Type √© uma quest√£o em aberto.</font></font></i><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Responda</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:44:35 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "—û¬µ–É‚Äö—ï–Ü‚Äπ‚Ññ ¬∑¬∞—î¬∞¬∑ 1.  ¬∑—ò¬µ–Ö‚Äö–ä —ó–Ç—ò¬µ‚Ä°¬∞–Ö¬µ",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<a name="OracleRESTExample2-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apagar registro</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para excluir, use o m√©todo HTTP </font></font><code>DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inqu√©rito:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q={<span class="hljs-string">"id_order"</span>:<span class="hljs-number">25</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O pedido em sua forma original:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q=%<span class="hljs-number">7</span>B%<span class="hljs-number">22</span>id_order%<span class="hljs-number">22</span>%<span class="hljs-number">3</span>A25%<span class="hljs-number">7</span>D</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Responda:</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date=Fri, 25 Oct 2019 16:23:39 GMT<font></font>
Content-Type=application/json<font></font>
Transfer-Encoding=chunked<font></font>
 <font></font>
{"rowsDeleted":1}</code></pre><br>
<a name="OracleRESTSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">achados</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ORDS √© um mecanismo bastante flex√≠vel e vers√°til para trabalhar com servi√ßos da Web, que permite implementar o REST completo. Em termos de desempenho, √© muito superior ao Native Oracle WS, com sua pesada an√°lise interna de XML. Para implementar um sistema altamente carregado, essa abordagem n√£o √© adequada: nesse caso, √© necess√°ria uma pilha de tecnologia diferente - um servidor de aplicativos separado, solicita√ß√µes de proxy, uso de bancos de dados em cluster e assim por diante. No entanto, para a implementa√ß√£o de sistemas com um n√∫mero relativamente pequeno de solicita√ß√µes HTTP (at√© 10 a 20 por segundo), o ORDS √© a abordagem ideal em desempenho e flexibilidade. O ORDS √© inferior ao Oracle WS nativo apenas em termos de gera√ß√£o de uma especifica√ß√£o de servi√ßo da Web: o √∫ltimo fornece uma especifica√ß√£o totalmente conclu√≠da (WSDL) que pode ser fornecida "como est√°" para os consumidores do servi√ßo. ORDS tamb√©m tem a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacidade</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gerando uma descri√ß√£o, mas para a abordagem considerada neste artigo com um servi√ßo totalmente universal (quando h√° um procedimento de processamento comum para todos os servi√ßos), a gera√ß√£o autom√°tica da especifica√ß√£o se torna imposs√≠vel. </font><font style="vertical-align: inherit;">O Oracle gerar√° apenas uma especifica√ß√£o de n√≠vel superior e as partes (modelos de dados) dever√£o ser descritas manualmente.</font></font><br>
<br>
<a name="Alternatives"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abordagens alternativas</font></font></h2><br>
<a name="JavaServlet"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servlet Java</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa op√ß√£o para criar servi√ßos da Web no m√©todo de configura√ß√£o √© semelhante ao Oracle WS nativo: tamb√©m requer o uso do servidor HTTP interno do Oracle, bem como configura√ß√µes da ACL (como, de fato, todos os outros m√©todos). Mas, diferentemente do Native Oracle WS, essa op√ß√£o funciona com HTTP puro. Manipuladores de solicita√ß√£o, neste caso, s√£o escritos em Java e olhar apenas para o tipo HTTP-request ( </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e assim por diante, embora possa ser feito e uma rotina de tratamento para todos os tipos), e l√≥gica de processamento permanece completamente a crit√©rio do desenvolvedor. Voc√™ pode transferir o corpo da solicita√ß√£o ‚Äúcomo est√°‚Äù para a l√≥gica do banco de dados, desmont√°-lo e process√°-lo l√°, pode deixar parte da l√≥gica ao lado do manipulador Java e chamar o procedimento desejado a partir do banco de dados, dependendo dos dados que vieram na solicita√ß√£o.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa abordagem para a implementa√ß√£o de servi√ßos da Web √© bastante universal e tamb√©m n√£o requer a instala√ß√£o de nenhum componente adicional. </font><font style="vertical-align: inherit;">N√£o conseguimos aplic√°-lo apenas devido aos requisitos estritos do servi√ßo: precis√°vamos de um servi√ßo da web que n√£o exigisse autentica√ß√£o. </font><font style="vertical-align: inherit;">Ao implementar essa abordagem, a autentica√ß√£o √© necess√°ria e esse requisito n√£o pode ser contornado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Consulte a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> do </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Oracle para</font></a><font style="vertical-align: inherit;"> obter mais detalhes sobre esse m√©todo </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a name="DatabaseAccessDescriptor"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descritor de acesso ao banco de dados (servlet PL / SQL)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta op√ß√£o √© completamente semelhante √† anterior, apenas o procedimento armazenado PL / SQL atua como o manipulador de solicita√ß√µes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
URL de exemplo - o nome do pacote, o nome do procedimento, os par√¢metros (solicita√ß√£o GET) s√£o indicados:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/servlet_plsql/pi_test.test_serv?p_path=ppp </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No caso de uma solicita√ß√£o POST, os nomes dos par√¢metros devem ser inseridos diretamente no corpo da solicita√ß√£o atrav√©s do sinal ‚Äú=‚Äù, o que √© bastante inconveniente, pois o tipo de conte√∫do da solicita√ß√£o (ContentType) nesse caso pode ser apenas texto. </font><font style="vertical-align: inherit;">Voc√™ pode transferir uma estrutura xml ou json apenas neste formul√°rio:</font></font><br>
<br>
<pre><code class="sql hljs">p_proc_param_name=&lt;xml_data&gt;‚Ä¶&lt;/xml_data&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vers√£o do servi√ßo da web √© aplic√°vel apenas nos casos em que estamos lidando com solicita√ß√µes muito simples - o procedimento chama com tipos de dados simples. </font><font style="vertical-align: inherit;">Transmitir qualquer estrutura multin√≠vel complexa nesta op√ß√£o n√£o funcionar√°. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa abordagem √© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descrita</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em </font><font style="vertical-align: inherit;">detalhes </font><font style="vertical-align: inherit;">no site da ORACLE-BASE.</font></font><br>
<br>
<a name="Conclusion"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criar um servi√ßo da Web no Oracle √© uma tarefa bastante simples que n√£o requer a escrita de nenhum tipo de c√≥digo super complexo. Ao mesmo tempo, os desenvolvedores da Oracle entram em seu arsenal um mecanismo bastante poderoso que permite integrar sistemas heterog√™neos ou partes de sistemas por meio de HTTP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, examinamos quatro abordagens para a cria√ß√£o de servi√ßos da web. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Oracle WS nativo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma tecnologia desatualizada que tem suas vantagens: WSDL gerado automaticamente, an√°lise autom√°tica de XML, sem necessidade de instalar software adicional. A principal desvantagem √© o baixo desempenho e a limita√ß√£o dos tipos de dados suportados. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- na minha opini√£o, a maneira preferida de criar servi√ßos da web. Flex√≠vel o suficiente e vers√°til. Das inconveni√™ncias desse m√©todo, podemos apenas distinguir que ele n√£o est√° inclu√≠do no pacote padr√£o do Oracle, ou seja, requer uma instala√ß√£o separada. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Java Servlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma maneira completamente universal que n√£o requer a instala√ß√£o de software adicional. No entanto, tudo precisa ser feito completamente manualmente, pois n√£o h√° possibilidade de gera√ß√£o autom√°tica de servi√ßos. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O servlet PL / SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© a abordagem menos bem-sucedida. Das vantagens, podemos distinguir que nesta op√ß√£o temos a capacidade de chamar procedimentos armazenados via HTTP sem a necessidade de instalar software adicional ou sem escrever c√≥digo adicional em outros idiomas: todo o c√≥digo √© escrito apenas em PL / SQL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obrigado a todos pela aten√ß√£o! </font><font style="vertical-align: inherit;">Espero que o material do artigo seja √∫til para aqueles que est√£o de alguma forma conectados aos produtos Oracle e esteja intrigado com os problemas de integra√ß√£o intra-sistema e intersistema.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Materiais adicionais</font></font></b>
                        <div class="spoiler_text"><b>Native Oracle XML DB Web Services </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Using Native Oracle XML DB Web Services</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Native Oracle XML DB Web Services in Oracle 11g Release 1</a><br>
<br>
<b>ORDS</b><br>
<br>
: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Installation, Configuration, and Development Guide</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Install Oracle REST Data Services 3.0.X in under 5 minutes</a><br>
<br>
CGI-: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-">HTTP Headers (OWA_UTIL) and ORDS-Specific Bind Variables</a><br>
<br>
  ORDS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Authentication</a><br>
<br>
ORDS  Open API (Swagger): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Open API 2.0 (Swagger) Support</a><br>
<br>
ORDS,  BLOB: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ORDS web services returning BLOBs</a> <br>
<br>
<b>Java Servlet </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Writing Oracle XML DB HTTP Servlets in Java</a><br>
<br>
<b>Database Access Descriptor (PL/SQL Servlet)</b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DBMS_EPG ‚Äî The Embedded PL/SQL Gateway in Oracle 10g Database Release 2</a> <br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt501998/index.html">Pre√ßo caro de estilos. Relat√≥rio Yandex</a></li>
<li><a href="../pt502000/index.html">12 cursos online de engenharia de dados</a></li>
<li><a href="../pt502004/index.html">M√©todo Kanban: Entendendo seu processo como um processo coletivo de constru√ß√£o de conhecimento - Parte 1 (receitas)</a></li>
<li><a href="../pt502008/index.html">Programa√ß√£o para as massas</a></li>
<li><a href="../pt502028/index.html">Vanya vai para a av√≥ ou JavaScript din√¢mico adapt√°vel</a></li>
<li><a href="../pt502034/index.html">Componentes controlados e n√£o controlados no React n√£o precisam ser complicados</a></li>
<li><a href="../pt502038/index.html">Gerando um √°tomo, abordagem 2.0.1</a></li>
<li><a href="../pt502040/index.html">Sobre os Phrasal Verbs-5 (cima / baixo)</a></li>
<li><a href="../pt502046/index.html">Ferrugem de cinco anos</a></li>
<li><a href="../pt502048/index.html">Comportamento complexo sem redes neurais e treinamento. A base filos√≥fica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>