<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèø üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë© üê¥ ¬øDebo almacenar las fuentes de Google en mi servidor? üöÅ üéã üîà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En las √∫ltimas semanas, por coincidencia en el trabajo y en proyectos de terceros, he aprendido mucho sobre las fuentes web, as√≠ como tambi√©n sobre la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>¬øDebo almacenar las fuentes de Google en mi servidor?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vdsina/blog/490366/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En las √∫ltimas semanas, por coincidencia en el trabajo y en proyectos de terceros, he aprendido mucho sobre las fuentes web, as√≠ como tambi√©n sobre las fuentes de Google en particular. Gracias a esto, puedo dar una respuesta m√°s detallada a una pregunta que me pareci√≥ simple en el pasado: ¬ødeber√≠a almacenar Google Fonts en su servidor?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hablando objetivamente, admito que las fuentes no son mi fuerte. Prefiero un enfoque m√°s pr√°ctico y no me concentro en el dise√±o (mira este sitio y aseg√∫rate de que sea as√≠) y antes de eso no sent√≠ la necesidad de usar fuentes no est√°ndar. Por supuesto, se ven un poco m√°s agradables y "marcan" el texto. Pero para el texto principal, tienen poco sentido. Nunca califiqu√© el art√≠culo (o lo relacion√© con su contenido de manera diferente), solo porque se utiliz√≥ una hermosa fuente para enviarlo. Sin embargo, era plenamente consciente del impacto negativo de las fuentes adicionales en el rendimiento y la velocidad de carga de la p√°gina, por lo que quiz√°s debido a esto soy parcial.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, muchos pueden estar en desacuerdo conmigo, y las fuentes, ya sean importantes para m√≠ personalmente o no, son utilizadas regularmente por muchos otros desarrolladores y, a menudo, simplemente no tienen otra opci√≥n. </font><font style="vertical-align: inherit;">Veamos qu√© se puede hacer para no perder la velocidad del sitio y dejar felices a los dise√±adores.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos autohospedados vs externos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hace unos a√±os se consideraba normal usar CDN para conectar recursos compartidos (por ejemplo, jQuery con </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code.jquery.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://almanac."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s√≠, todav√≠a lo usan mucho</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Para aclarar, por CDN me refiero a cargar recursos del dominio de otra persona, no de su propia CDN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raz√≥n fue que los navegadores supuestamente limitaron el n√∫mero de conexiones a cada dominio (generalmente a 6 conexiones), por lo que usar otro dominio le dio otras 6 conexiones. Esto podr√≠a ser cierto en el pasado (especialmente cuando la restricci√≥n era &lt;6 dominios) y antes de que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://www.tunetheweb.com/security/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTPS se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> convirtiera en la norma, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aumentando significativamente los costos de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> conexi√≥n. Adem√°s, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://www.tunetheweb.com/performance/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP / 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en realidad se beneficia del uso de una conexi√≥n (¬°sobre todo!), por lo que usar otros dominios suele ser una p√©rdida de rendimiento en lugar de una adquisici√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra forma de lograr lo mismo fue fragmentar el dominio principal con uno o m√°s subdominios t√©cnicos (por ejemplo, assets.example.com), y en este caso, las fuentes nuevamente no aparecen en su dominio principal, desde donde se carga su p√°gina web. Sin embargo, este m√©todo tiene los mismos problemas de conexi√≥n, por lo que no se puede llamar ganancia de rendimiento, incluso si alguna vez lo fue. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otra ventaja de un CDN p√∫blico era la alta probabilidad de que los visitantes ya tuvieran esta versi√≥n de jQuery condicional en el cach√©. Pero, nuevamente, estoy convencido de que esto es demasiado. Hay tantas bibliotecas y sus versiones, y</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://www.speedshop.co/2015/11/05/page-weight-doesnt-matter.html&amp;usg=ALkJrhgoAMf-ZhZER8sdvoQ6T8jroDpWrQ#"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El cach√© del navegador es m√°s peque√±o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de lo que parece, por lo que una coincidencia de este tipo es muy poco probable. Adem√°s, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Safari utiliza un cach√© HTTP √∫nico</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada dominio visitado, por razones de privacidad (cach√© de doble clave), y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chrome tambi√©n presentar√° esta funci√≥n pronto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por lo tanto, no hay nada m√°s para discutir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este tema se convierte sin problemas en una conversaci√≥n sobre el impacto de las CDN de terceros en la privacidad. No tiene idea de c√≥mo y por qu√© est√°n rastreando a sus usuarios, lo que no puede suceder con una soluci√≥n autohospedada. Y las innovaciones recientes en la ley obligan a muchos sitios a enumerar expl√≠citamente todas las cookies utilizadas en el sitio. No es la tarea m√°s f√°cil cuando se usan CDN de terceros.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante mucho tiempo, he estado convencido de que los CDN de terceros o incluso el fragmentaci√≥n de sus propios dominios est√°n muy lejos de la ganancia de rendimiento prometida. Con demasiada frecuencia, puede encontrar sitios donde el dominio principal distribuye solo index.html, y luego </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se pierde mucho tiempo desperdiciando la configuraci√≥n de nuevas conexiones</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto sin mencionar las implicaciones de seguridad de descargar recursos de sitios de terceros. S√≠, hay </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SRI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero puede </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://nooshu.github.io/blog/2019/12/17/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">causar problemas inesperados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y honestamente no veo el punto. Si es un recurso est√°tico (donde puede usar SRI), almac√©nelo localmente, y si no es est√°tico (porque el contenido puede cambiar), no puede usar SRI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, el uso de recursos de fuentes de terceros amenaza con convertirse en un √∫nico punto de falla (SPOF) y deshabilitar su sitio. </font><font style="vertical-align: inherit;">Esto ha </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sucedido m√°s de una vez</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y, aunque puede parecer poco probable que Google Fonts se caiga, puede ser bloqueado por representantes de la compa√±√≠a o por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pa√≠ses enteros</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, cada vez m√°s personas aconsejan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mantener sus recursos est√°ticos en su lugar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , idealmente en el dominio desde el que distribuye las p√°ginas web. </font><font style="vertical-align: inherit;">Las fuentes son recursos est√°ticos, por lo que se aplica lo mismo a ellas, ¬øverdad? </font><font style="vertical-align: inherit;">Bueno, resulta que no todo es tan simple, porque las fuentes tienen sus propias peculiaridades y t√©cnicas de optimizaci√≥n, lo que puede hacer que el almacenamiento local sea un poco m√°s complicado ...</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuentes de Google y c√≥mo funcionan</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Fonts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es un recurso incre√≠ble si te gustan las fuentes. 977 fuentes gratuitas que cualquiera puede usar gratis. Las fuentes comerciales a menudo son rid√≠culamente caras y generalmente tienen licencia en lugar de venderse, es decir, las tarifas se cobran en funci√≥n del n√∫mero esperado de visitas a la p√°gina. Por lo tanto, tener muchas fuentes gratuitas y f√°ciles de usar en una colecci√≥n es muy √∫til. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero eso no es todo. Google Fonts, como muchos proveedores de recursos para sitios (consulte el ejemplo de jQuery anterior), proporciona CDN y almacena fuentes para que todos puedan usar directamente desde sus servidores. Esto significa que puede comenzar a usar fuentes simplemente agregando una l√≠nea de c√≥digo en su sitio para cargar la hoja de estilo:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/css?family=Lato&amp;display=swap"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n puede agregar m√°s propiedades y fuentes en una l√≠nea para cargar varias fuentes y variaciones de cada una de ellas:</font></font><br>
<br>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i,900%7CPoppins:300,400,700,900&amp;display=swap"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La desventaja es una ca√≠da en el rendimiento (la ventaja tambi√©n est√° en el rendimiento, pero esto no es tan obvio, llegaremos a esto). </font><font style="vertical-align: inherit;">El problema es que su sitio (digamos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.example.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) carga una hoja de estilo de fonts.googleapis.com, que devuelve algunos CSS con reglas de fuente de fuente. </font><font style="vertical-align: inherit;">Aqu√≠ est√° la fuente del enlace en el ejemplo anterior:</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-comment">/* latin-ext */</span>
<span class="hljs-keyword">@font-face</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Lato'</span>;
  <span class="hljs-attribute">font-style</span>: normal;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
  <span class="hljs-attribute">font-display</span>: swap;
  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato Regular'</span>), <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato-Regular'</span>), <span class="hljs-built_in">url</span>(https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff2'</span>);
  <span class="hljs-attribute">unicode-range</span>: U+<span class="hljs-number">0100</span>-<span class="hljs-number">024</span>F, U+<span class="hljs-number">0259</span>, U+<span class="hljs-number">1</span>E00-<span class="hljs-number">1</span>EFF, U+<span class="hljs-number">2020</span>, U+<span class="hljs-number">20</span>A0-<span class="hljs-number">20</span>AB, U+<span class="hljs-number">20</span>AD-<span class="hljs-number">20</span>CF, U+<span class="hljs-number">2113</span>, U+<span class="hljs-number">2</span>C60-<span class="hljs-number">2</span>C7F, U+A720-A7FF;<font></font>
}<font></font>
<span class="hljs-comment">/* latin */</span>
<span class="hljs-keyword">@font-face</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Lato'</span>;
  <span class="hljs-attribute">font-style</span>: normal;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
  <span class="hljs-attribute">font-display</span>: swap;
  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato Regular'</span>), <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato-Regular'</span>), <span class="hljs-built_in">url</span>(https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjx4wXiWtFCc.woff2) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff2'</span>);
  <span class="hljs-attribute">unicode-range</span>: U+<span class="hljs-number">0000</span>-<span class="hljs-number">00</span>FF, U+<span class="hljs-number">0131</span>, U+<span class="hljs-number">0152</span>-<span class="hljs-number">0153</span>, U+<span class="hljs-number">02</span>BB-<span class="hljs-number">02</span>BC, U+<span class="hljs-number">02</span>C6, U+<span class="hljs-number">02</span>DA, U+<span class="hljs-number">02</span>DC, U+<span class="hljs-number">2000</span>-<span class="hljs-number">206</span>F, U+<span class="hljs-number">2074</span>, U+<span class="hljs-number">20</span>AC, U+<span class="hljs-number">2122</span>, U+<span class="hljs-number">2191</span>, U+<span class="hljs-number">2193</span>, U+<span class="hljs-number">2212</span>, U+<span class="hljs-number">2215</span>, U+FEFF, U+FFFD;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hablaremos sobre lo que significan algunas de estas configuraciones m√°s adelante (y tambi√©n sobre por qu√© hay dos reglas de fuente), pero por ahora esto significa que puede usar esta fuente en sus estilos de esta manera:</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Lato'</span>, sans-serif;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, ahora tiene que conectarse a fonts.googleapis.com, descargar CSS y luego conectarse a fonts.gstatic.com y descargar las fuentes por s√≠ mismas (por qu√© Google no puede alojar tanto CSS como fuentes en el mismo dominio, ¬°realmente no lo entiendo!). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo, el navegador detecta las fuentes con retraso al cargar la p√°gina (despu√©s de todo, debe cargar CSS para encontrar enlaces a ellas). Pero las fuentes de Google se descubren incluso m√°s tarde, porque CSS necesita descargarse desde </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otro</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dominio, y luego las fuentes del tercer dominio y, como mencion√©, establecer una conexi√≥n HTTPS tampoco es instant√°nea. Esto se puede ver en el siguiente diagrama en cascada generado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebPageTest</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tenga en cuenta que todas las pruebas se ejecutaron con Chrome - 3GSlow):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/94/si/uk/94siukfgpsuc3y8vvcenns7d8rm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La l√≠nea 1 muestra que HTML se carga primero. </font><font style="vertical-align: inherit;">Luego, tan pronto como se descarga y lee en menos de 2 segundos, el navegador detecta la necesidad de cargar el CSS de Google Fonts y lo carga en la l√≠nea 4. Se tarda un segundo en establecer una conexi√≥n, y luego se descarga un archivo durante 3,5 segundos. </font><font style="vertical-align: inherit;">Finalmente, el navegador se enter√≥ de la existencia de nuestra fuente y la carg√≥ en la l√≠nea 6, despu√©s de haber perdido otro 1 ¬º de segundo en el camino hacia la conexi√≥n con fonts.gstatic.com. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, usar esta fuente de Google Fonts nos cuesta tres segundos completos de productividad desde el momento en que HTML est√° disponible, ¬°sin tener en cuenta el tiempo para descargar la fuente en s√≠!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acelerar las fuentes de Google precargando recursos </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede mitigar este terrible impacto en el rendimiento al cargar CSS y fuentes de dos dominios diferentes. El primer dominio (para CSS) debe ubicarse m√°s cerca del comienzo del archivo index.html para que el navegador lo lea lo antes posible, pero el segundo a√∫n est√° oculto. Sin embargo, sabemos c√≥mo ser√° este dominio (fonts.gstatic.com), por lo que podemos abrir la conexi√≥n de antemano para ahorrar tiempo en la segunda conexi√≥n m√°s adelante:</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.gstatic.com"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/css?family=Lato&amp;display=swap"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al volver a probar, vemos la siguiente imagen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0-/ab/1r/0-ab1rf2caybdrxaloc5xrs6d0k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ vemos que la conexi√≥n en la l√≠nea 5 est√° abierta de antemano, antes de cargar CSS. Entonces ganamos m√°s de un segundo (descargando fuentes en 4 segundos, no 5.25), porque logramos evitar perder el tiempo durante la conexi√≥n y las fuentes se descargan inmediatamente despu√©s de leer las fuentes CSS Google. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede pensar que podr√≠a seguir adelante y precargar toda la fuente, en lugar de estar contento con solo unirse al dominio, pero Google Fonts llama a las fuentes hashes √∫nicos. En el ejemplo anterior, la fuente descargada se llama S6uyw4BMUTPHjx4wXg.woff2, no lato.woff2, por lo que la precarga no es posible a menos que desee que su sitio se bloquee un d√≠a cuando Google de repente decida cambiar este hash.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cualquier caso, si usa Google Fonts y no tiene intenci√≥n de hacer nada m√°s despu√©s de leer esta nota, agregue al menos una conexi√≥n preliminar al dominio, si a√∫n no lo ha hecho. Esta es solo una l√≠nea de c√≥digo y deber√≠a mejorar significativamente el rendimiento de su p√°gina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En realidad, Google Fonts proporciona un comando similar en los encabezados HTTP cuando procesa CSS:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1g/7n/lg/1g7nlg8c-qteofu6cr1t3eep2bi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero en muchos casos esto no ayudar√° mucho, porque para cuando reciba los encabezados de respuesta HTTP del servidor con CSS, el navegador ya sabe que desea conectarse a este dominio para descargar fuentes. </font><font style="vertical-align: inherit;">Por lo tanto, es mejor que especifique esto en el c√≥digo HTML para que la precarga funcione antes (no importa que est√© duplicada de esta manera, simplemente se ignorar√° el segundo intento). </font><font style="vertical-align: inherit;">Sin embargo, si su p√°gina a√∫n se est√° procesando para cuando se reciben los encabezados del servidor CSS de Google Fonts y el DOM no est√° listo (¬øtal vez esto es una se√±al de demasiado JavaScript en su p√°gina?), Esto puede ayudar a mejorar el rendimiento cuando finalmente se aclare qu√© fuente descargar.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualizaci√≥n de fuente: intercambio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el c√≥digo de fuente anterior, puede ver la pantalla de fuente: swap; line. Esta es una instrucci√≥n relativamente nueva. Se puede agregar a la declaraci√≥n de fuente y le indicar√° al navegador que use primero el respaldo, es decir, la fuente del sistema (sans-serif en este ejemplo), y luego reemplazarlo con la fuente real despu√©s de descargarlo. De esta forma, puede evitar retrasos en la carga de contenido cuando la fuente a√∫n no se ha cargado y tambi√©n puede mejorar el rendimiento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S√≠, esto lleva a un brote de texto sin estilo (FOUT): los mismos "saltos" en el contenido durante la carga de la p√°gina, pero a algunas personas no les gusta (mi opini√≥n est√° de acuerdo, el contenido es m√°s importante que el estilo, pero el texto que salta a trav√©s de la p√°gina es molesto, aunque esto puede mitigarse ajustando la fuente de repuesto). Una alternativa es el texto invisible flash (FOIT). En este caso, el texto est√° oculto hasta que aparece la fuente, lo que obviamente retrasa la descarga y puede causar otros problemas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">si se carga un texto, ¬°pero otros no</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cualquier caso, antes de la introducci√≥n de font-display: swap, diferentes navegadores trataban esto de manera diferente: algunos, como IE y Edge, usaban FOUT, otros usaban FOIT, y ten√≠an diferentes tiempos hasta que esperaban a que las fuentes esperaran. Debido a esto, si la fuente no se carga, su contenido puede permanecer invisible durante mucho tiempo. La introducci√≥n de font-display: swap permiti√≥ a los desarrolladores de sitios web decidir por s√≠ mismos c√≥mo ocurrir√≠a esto. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La mayor√≠a de los navegadores admiten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> font-display: swap, con la excepci√≥n de IE y Edge, pero como se mencion√≥ anteriormente, de todos modos usan esto de manera predeterminada. Las fuentes de Google </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tambi√©n admiten</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> varias opciones de visualizaci√≥n de fuentes y ofrecen visualizaci√≥n de fuentes: intercambio por defecto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, otro consejo si usa las fuentes de Google es verificar que tiene el par√°metro &amp; display = swap en la URL, y si no (se ha admitido recientemente), agr√©guelo: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
por ejemplo, reemplace esto:</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.gstatic.com"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/css?family=Lato"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este:</font></font><br>
<br>
<pre><code class="xml hljs">
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.gstatic.com"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">crossorigin</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/css?family=Lato&amp;display=swap"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span>&gt;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n puede </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especificar uno de los otros valores de visualizaci√≥n de fuente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por ejemplo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opcional</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , si lo desea. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desafortunadamente, esto resuelve solo la mitad del problema. </font><font style="vertical-align: inherit;">Esta instrucci√≥n est√° en CSS, que devuelve Google Fonts, por lo que solo es √∫til despu√©s de haber descargado el archivo CSS. </font><font style="vertical-align: inherit;">Por lo tanto, ayuda a hacer frente al retraso mientras se cargan las fuentes, pero no ayuda mientras espera que se cargue este CSS. </font><font style="vertical-align: inherit;">Por lo tanto, esta es una buena mejora (al menos para aquellos que prefieren FOUT), pero a√∫n no es la soluci√≥n completa en su conjunto.</font></font><br>
<br>
<h2>  Google Fonts</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Yo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ayud√© a crear Web almanaque</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (una mirada fant√°stica en el estado de la Internet - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://almanac."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ver por</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s√≠ mismo si no lo ha visto todav√≠a) y la descarga lenta de las fuentes de Google en nuestro sitio me molesta y quer√≠a arreglarlo. Especialmente FOUT con visualizaci√≥n de fuente: intercambio. Me preguntaba si podr√≠amos reducir el impacto de esto, y la soluci√≥n local parec√≠a estar almacenando archivos localmente, posiblemente usando precarga. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya hemos utilizado las t√©cnicas anteriores (precarga y visualizaci√≥n de fuentes: intercambio;), pero, por supuesto, ser√≠a mejor evitar conectar CSS desde el exterior. Sabemos lo que habr√° en este CSS. Entonces, ¬øcon confianza elegir autohospedado? Aqu√≠ es donde se pone interesante ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encontr√© un script conveniente en GitHub ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descarga de fuentes de Google</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), lo que me ayud√≥ a descargar todas las diferentes opciones de fuente (ya que hab√≠a muchas, hasta 9 dependiendo de la p√°gina), y luego copi√© el CSS, que se muestra en nuestra hoja de estilo principal, y carg√≥ las fuentes en el servidor. Existen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">otras herramientas en l√≠nea</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que hacen lo mismo. Todo parec√≠a funcionar, y nos deshicimos de la molesta carga de CSS y la necesidad de trabajar con dos dominios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, despu√©s de una inspecci√≥n m√°s cercana, not√© que las fuentes eran m√°s grandes:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1w/hk/fs/1whkfsun5mb15p76jzen2eft4wk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, ha habido un aumento significativo en el tama√±o (¬°hasta un 74% adicional para algunos de ellos!) En comparaci√≥n con las fuentes descargadas de Google (derecha) y las fuentes ubicadas localmente (izquierda). Inicialmente, pens√© que esto se deb√≠a a mi servidor web local, por ejemplo, debido a que la compresi√≥n estaba desactivada. Pero las fuentes WOFF2 son servidas sin compresi√≥n por el servidor web, o al menos deber√≠a serlo, ya que el formato incluye compresi√≥n Brotli. Adem√°s, la captura de pantalla anterior muestra los bytes cargados (negro en la parte superior), as√≠ como los bytes sin comprimir (ligeramente m√°s claros en la parte inferior) para cada columna (son bastante similares en ambas columnas, ya que las fuentes se env√≠an realmente sin compresi√≥n por el servidor web, pero los bytes descargados incluyen encabezados HTTP , por lo que son un poco m√°s grandes), y hubo diferencias en los bytes comprimidos y no comprimidos, por lo que ese no es el punto.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La comparaci√≥n de las reglas de tipo de letra obtenidas usando la herramienta con las originales revel√≥ una diferencia: de las </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
fuentes de Google:</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-comment">/* latin-ext */</span>
<span class="hljs-keyword">@font-face</span> {
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Lato'</span>;
    <span class="hljs-attribute">font-style</span>: normal;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
    <span class="hljs-attribute">font-display</span>: swap;
    <span class="hljs-attribute">src</span>: <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato Regular'</span>), <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato-Regular'</span>), <span class="hljs-built_in">url</span>(https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff2'</span>);
    <span class="hljs-attribute">unicode-range</span>: U+<span class="hljs-number">0100</span>-<span class="hljs-number">024</span>F, U+<span class="hljs-number">0259</span>, U+<span class="hljs-number">1</span>E00-<span class="hljs-number">1</span>EFF, U+<span class="hljs-number">2020</span>, U+<span class="hljs-number">20</span>A0-<span class="hljs-number">20</span>AB, U+<span class="hljs-number">20</span>AD-<span class="hljs-number">20</span>CF, U+<span class="hljs-number">2113</span>, U+<span class="hljs-number">2</span>C60-<span class="hljs-number">2</span>C7F, U+A720-A7FF;<font></font>
}<font></font>
<span class="hljs-comment">/* latin */</span>
<span class="hljs-keyword">@font-face</span> {
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Lato'</span>;
    <span class="hljs-attribute">font-style</span>: normal;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
    <span class="hljs-attribute">font-display</span>: swap;
    <span class="hljs-attribute">src</span>: <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato Regular'</span>), <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato-Regular'</span>), <span class="hljs-built_in">url</span>(https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjx4wXiWtFCc.woff2) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff2'</span>);
    <span class="hljs-attribute">unicode-range</span>: U+<span class="hljs-number">0000</span>-<span class="hljs-number">00</span>FF, U+<span class="hljs-number">0131</span>, U+<span class="hljs-number">0152</span>-<span class="hljs-number">0153</span>, U+<span class="hljs-number">02</span>BB-<span class="hljs-number">02</span>BC, U+<span class="hljs-number">02</span>C6, U+<span class="hljs-number">02</span>DA, U+<span class="hljs-number">02</span>DC, U+<span class="hljs-number">2000</span>-<span class="hljs-number">206</span>F, U+<span class="hljs-number">2074</span>, U+<span class="hljs-number">20</span>AC, U+<span class="hljs-number">2122</span>, U+<span class="hljs-number">2191</span>, U+<span class="hljs-number">2193</span>, U+<span class="hljs-number">2212</span>, U+<span class="hljs-number">2215</span>, U+FEFF, U+FFFD;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde la herramienta de descarga:</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-keyword">@font-face</span> {
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Lato'</span>;
    <span class="hljs-attribute">font-style</span>: normal;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
    <span class="hljs-attribute">src</span>:
        <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato Regular'</span>),
        <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato-Regular'</span>),
        <span class="hljs-comment">/* from https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjx4wXg.woff2 */</span>
        <span class="hljs-built_in">url</span>(<span class="hljs-string">'Lato_400.woff2'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff2'</span>),
        <span class="hljs-comment">/* from https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjx4wWA.woff */</span>
        <span class="hljs-built_in">url</span>(<span class="hljs-string">'Lato_400.woff'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff'</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La primera diferencia es que perdimos la visualizaci√≥n de la fuente: la l√≠nea de intercambio, pero esto se puede solucionar sin problemas. </font><font style="vertical-align: inherit;">Mucho m√°s interesante es el hecho de que Google Fonts distribuye dos fuentes, e incluye diferentes rangos Unicode en ellas. </font><font style="vertical-align: inherit;">Esto se debe al subconjunto de fuentes y reduce los archivos de fuentes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subconjunto de fuentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El subconjunto de fuentes es la eliminaci√≥n de caracteres que no va a utilizar para reducir el tama√±o del archivo de fuente. Por lo general, la mayor√≠a de los occidentales usan solo caracteres latinos, y descargar una fuente con todos los caracteres que probablemente no usar√° es irracional. Hab√≠a escuchado sobre esto antes, ¬°pero nunca pens√© cu√°n significativo podr√≠a tener esto! Google Fonts renderiza autom√°ticamente una fuente con un conjunto de caracteres latinos, y tambi√©n, cuando es posible, conecta una segunda fuente para caracteres latinos extendidos (por ejemplo, ƒÄ), que se descargar√°n solo si es necesario. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, tambi√©n puede solicitar una fuente especial que contenga solo los caracteres que necesita con el par√°metro de texto: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://fonts.googleapis.com/css?family=Lato&amp;text=ABC</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A juzgar por otras observaciones, la herramienta de carga de fuentes que utilic√© aparentemente admite el subconjunto de fuentes, pero solo para todo el "idioma" (lat√≠n o lat√≠n extendido), y combina ambos subconjuntos de caracteres en un solo archivo. </font><font style="vertical-align: inherit;">Al final, volv√≠ a usar lo que usaba mi navegador y dej√© de usar esta herramienta. </font><font style="vertical-align: inherit;">Esto dio tama√±os de archivo similares (con una ligera diferencia debido a los encabezados HTTP en mi entorno de desarrollo), pero pronto descubr√≠ que no era solo un subconjunto de fuentes.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Fonts distribuye fuentes de forma inteligente</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Google Fonts no siempre representa el mismo CSS y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">depende del agente de usuario utilizado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por ejemplo, para Internet Explorer 11, env√≠a lo siguiente:</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-keyword">@font-face</span> {
    <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Lato'</span>;
    <span class="hljs-attribute">font-style</span>: normal;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
    <span class="hljs-attribute">font-display</span>: swap;
    <span class="hljs-attribute">src</span>: <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato Regular'</span>), <span class="hljs-built_in">local</span>(<span class="hljs-string">'Lato-Regular'</span>), <span class="hljs-built_in">url</span>(https://fonts.gstatic.com/s/lato/v16/S6uyw4BMUTPHjx4wWA.woff) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff'</span>);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ puede ver que solo proporciona el formato WOFF, ya que IE 11 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no es compatible con WOFF2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y, por la misma raz√≥n, no se especifica el rango unicode. Proporciona visualizaci√≥n de fuente: intercambio (como se√±al√© en la URL para CSS), aunque el navegador no lo admite, pero no da√±a. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No es solo el fabricante y la versi√≥n del navegador. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sugerencia de fuente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">incluye instrucciones adicionales en el archivo de fuente, que luego se utilizan para proporcionar la mejor visualizaci√≥n de la fuente, especialmente en pantallas de baja resoluci√≥n o para tama√±os realmente peque√±os. La sugerencia de fuentes se usa en Windows, pero no en MacOS, por lo que dependiendo del sistema operativo con el que trabaje al recibir fuentes de Google, utilizando un navegador (incluso si usa Chrome en cada plataforma), puede obtener archivos de fuentes con sugerencias o sin √©l. Si descargas la versi√≥n de Windows y la usas por ti mismo, en realidad har√°s que los usuarios de MacOS sufran la necesidad de procesar grandes archivos de fuentes llenos de sugerencias no utilizadas, y si haces lo contrario, puedes hacer que los usuarios de Windows sufran una peor visualizaci√≥n de fuentes, sin sugerencia de fuente.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando us√© Google Fonts, y cuando descargu√© fuentes para uso local, lo hice en mi Mac, as√≠ que obtuve archivos m√°s peque√±os. </font><font style="vertical-align: inherit;">Cuando utilic√© la herramienta, obtuve fuentes completas, con sugerencias. </font><font style="vertical-align: inherit;">¬°Esa fue otra raz√≥n para la gran diferencia de tama√±o! </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øLa sugerencia de fuentes sigue siendo relevante?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, porque las pantallas de alta definici√≥n se han vuelto m√°s comunes; esta es una buena pregunta, y muchas fuentes se entregan inicialmente sin sugerencias, ya que lleva mucho tiempo crearlas. </font><font style="vertical-align: inherit;">Cuando est√° presente, puede aumentar significativamente el tama√±o de la fuente. </font><font style="vertical-align: inherit;">En el caso de Lato, el tama√±o se duplica. </font><font style="vertical-align: inherit;">¬øVale la pena la carga de trabajo adicional que encontrar√°s al abandonar Google Fonts y localizar las fuentes localmente? </font><font style="vertical-align: inherit;">Esta es otra decisi√≥n que debes tomar por ti mismo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, Google Fonts CDN es compatible con un script inteligente que regala las fuentes m√°s adecuadas, optimiz√°ndolas para mantener el m√°ximo rendimiento. Al cambiar al almacenamiento local de fuentes, tendr√° que configurar todo esto usted mismo, y existe la posibilidad de perder la visualizaci√≥n correcta de sus fuentes en algunos navegadores si no lo hace. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para Web Almanac, analizamos las estad√≠sticas de los navegadores de los visitantes y decidimos admitir solo WOFF2, y tambi√©n usar versiones de MacOS sin sugerencias, ya que pesan la mitad. Este CSS simplificado (especialmente porque </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el rango unicode es</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> compatible con todos los navegadores que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admiten WOFF2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), y los usuarios de IE 11 y otros navegadores antiguos ven sans-serif de forma predeterminada, lo que no se ve muy bien, pero en nuestra opini√≥n, las fuentes son una mejora progresiva, e incluso sin ellas, el sitio a√∫n es m√°s que utilizable. Adem√°s, los navegadores m√°s antiguos pueden incluso beneficiarse del uso de fuentes predeterminadas del sistema, ya que es probable que se usen en m√°quinas m√°s antiguas y de baja potencia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambi√©n puede </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hacer otros ajustes a las fuentes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que usa si lo desea (¬°compruebe las licencias primero!), Pero copiar las fuentes predeterminadas de Google utilizadas en Chrome en MacOS probablemente sea suficiente para la mayor√≠a de nosotros si desea admitir solo los navegadores WOFF2 sin sugerencias. .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, si nos decidimos por las fuentes de Google, tendr√≠amos WOFF (e incluso formatos m√°s antiguos) e insinuar√≠amos cuando sea necesario, sin la necesidad de una configuraci√≥n profunda de sustituci√≥n de la fuente correcta dependiendo del navegador. </font><font style="vertical-align: inherit;">Por lo tanto, el uso de Google Fonts para fuentes a√∫n tiene ciertas ventajas, y al elegir el almacenamiento local, las rechaza. </font><font style="vertical-align: inherit;">Esto tambi√©n se aplica a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cualquier mejora futura de Google Fonts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mejoras de fuentes futuras</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como profundic√© en el tema de las fuentes y advert√≠ que podr√≠a perder cualquier beneficio futuro de las fuentes de Google al ir al almacenamiento local, quiero alejarme un poco del tema principal y hablar sobre otras cosas interesantes que descubr√≠. </font><font style="vertical-align: inherit;">¬øCu√°les son los pr√≥ximos grandes cambios en el mundo de las fuentes? </font><font style="vertical-align: inherit;">Bueno, hay dos cambios que actualmente se est√°n discutiendo activamente y que pueden afectar las fuentes en el futuro (y, por lo tanto, pueden ser compatibles con Google Fonts, posiblemente de forma predeterminada si elige usar este servicio): fuentes variables y enriquecimiento progresivo de fuentes .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fuentes variables</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las fuentes variables le</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permiten usar diferentes estilos de fuente sin tener que descargar archivos individuales. Mencion√© anteriormente que Web Almanac usa hasta 9 archivos de fuentes diferentes, pero en realidad son solo 2 fuentes. La raz√≥n es simple: el sitio tambi√©n utiliza negrita, cursiva, negrita e incluso versiones m√°s delgadas de uno o ambos. Tantas variaciones de la misma fuente pueden parecer inapropiadas y puede pensar que el navegador en s√≠ se encargar√° de cambiar el grosor del texto o escribir en cursiva. S√≠, es posible. Pero cada navegador hace esto un poco diferente, y los resultados </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pueden ser radicalmente diferentes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por lo que muchos los llaman "fuentes artificiales".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La √∫nica forma de garantizar la misma pantalla es utilizar una "fuente real" espec√≠ficamente para cada estilo que necesite. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las fuentes variables </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estandarizan la visualizaci√≥n de diversas variaciones de fuentes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y la necesidad de archivos adicionales desaparece. Te√≥ricamente, podr√≠amos reemplazar estas 9 fuentes con 2 cuando sus versiones de fuente variable est√©n disponibles. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto abre un mont√≥n de posibilidades para usar fuentes en Internet. Aunque me parezca que las 9 opciones para las dos fuentes son demasiado, en realidad no lo es, mientras que las fuentes variables permitir√≠an variaciones infinitas. En dispositivos m√≥viles, puede establecer un grosor ligeramente diferente para "negrita" que en computadoras de escritorio y tabletas. Fuentes variables con </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unas simples instrucciones CSS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permita esto sin el costo de los recursos para descargar una fuente adicional. Recientemente en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DotCSS, </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jason Pamental</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> habl√≥ sobre las fuentes variables y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demostr√≥</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥mo puede obtener una p√°gina bellamente dise√±ada con lo que parecen ser muchas fuentes diferentes, ¬°todo usando un solo archivo! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usar fuentes variables tambi√©n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">significa cargar todas las variaciones de fuentes al mismo tiempo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , evitando la confusi√≥n causada por los problemas mencionados anteriormente. Esto tambi√©n conduce a menos redibujos del dise√±o: sin fuentes variables, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> navegador </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">volver√° a dibujar</font></a><font style="vertical-align: inherit;"> la p√°gina </font><font style="vertical-align: inherit;">una y otra vez a medida que se cargue cada variante de fuente individual. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las fuentes variables tienen buen soporte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en los navegadores modernos, pero su inconveniente es el gran tama√±o, porque almacenar diferentes variaciones de fuente requiere m√°s espacio, como es el caso con las sugerencias de fuentes. </font><font style="vertical-align: inherit;">Depende de la fuente, pero generalmente son dos veces m√°s grandes despu√©s de la compresi√≥n, por lo que para justificar su uso, debe necesitar al menos dos estilos. </font><font style="vertical-align: inherit;">Aun as√≠, es mejor que prefiera un archivo m√°s peque√±o que se carga para mostrar texto cr√≠tico, en lugar de un archivo m√°s grande para mostrar todo el texto. </font><font style="vertical-align: inherit;">Y de nuevo, ¬øpuede usar font-display: swap ser una soluci√≥n menos problem√°tica? </font><font style="vertical-align: inherit;">¬°Esto depende de cada propietario del sitio para decidir!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enriquecimiento progresivo de fuentes</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El enriquecimiento progresivo de fuentes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en esencia, lleva el subconjunto a un nuevo nivel y le permite descargar definiciones de caracteres adicionales seg√∫n sea necesario en forma de una secuencia de informaci√≥n adicional que complementa la fuente cargada actualmente, pero no agrega una adicional. Esto puede parecer una peque√±a ventaja para nosotros los occidentales, pero para otros idiomas, especialmente en el Lejano Oriente, los archivos de fuentes pueden ser muy masivos (por ejemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2Mb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), debido a la gran cantidad de caracteres en estos idiomas. Por esta raz√≥n, las fuentes web se usan con menos frecuencia en dichos pa√≠ses y el enriquecimiento progresivo de las fuentes puede tener un efecto positivo en la situaci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El enriquecimiento progresivo de fuentes, seg√∫n tengo entendido, se encuentra en una etapa mucho m√°s temprana que las fuentes variables, pero hay</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demostraci√≥n en l√≠nea</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En cualquier caso, este es otro cambio potencialmente interesante relacionado con las fuentes.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øGoogle Fonts continuar√° mejorando?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado c√≥mo funciona Google Fonts, es f√°cil imaginar que puede seguir creciendo con nuevas mejoras, como las que se describen en este art√≠culo (¬°o muchas otras!), Con solo cambiar el CSS que proporciona. Y √©l puede hacerlo sabiamente. Por ejemplo, determinar si su navegador admite nueva tecnolog√≠a (como lo hace ahora con el formato de fuente - WOFF o WOFF2), o de otras maneras. Por ejemplo, si solicita m√°s de dos fuentes y le da a la fuente variable menos recursos, entonces puede automatizar y vincular el mismo archivo de fuente en varios anuncios de fuente, y si solicita solo una opci√≥n, consulte una m√°s liviana, fuente tradicional ¬øSuena descabellado? </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya lo hicieron con una fuente.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Oswald)! Honestamente, no s√© si lo mismo es posible con el enriquecimiento progresivo de fuentes, porque no entiendo completamente el principio de su trabajo, pero ser√° interesante verlo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, vale la pena mencionar que al usar Fuentes de Google, al actualizar fuentes, por ejemplo, para agregar nuevos conjuntos de caracteres o corregir errores en los glifos, obtienes nuevas fuentes autom√°ticamente. Con el almacenamiento local, esto no funcionar√°, al menos no sin intervenci√≥n de una mano. Tal vez podr√≠a mirar en la direcci√≥n de las solicitudes de proxy a trav√©s de su dominio y, por lo tanto, tomar lo mejor de ambas opciones, pero esto probablemente ser√° m√°s lento y requerir√° una configuraci√≥n y administraci√≥n adicionales.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por otro lado, el almacenamiento local proporciona estabilidad, ya que algunas actualizaciones pueden afectar su dise√±o, por ejemplo, si un t√≠tulo en una l√≠nea comienza a extenderse a dos debido a un cambio de fuente. </font><font style="vertical-align: inherit;">Hay una categor√≠a de personas que est√°n muy molestas por esto</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beneficios del almacenamiento de fuentes locales</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, hemos discutido muchas teor√≠as, y aunque existen beneficios potenciales obvios del almacenamiento local, tambi√©n hay dificultades para considerar, por lo que usar Google Fonts tambi√©n tiene algunos beneficios obvios. Entonces, ¬øvale la pena alojarse en uno mismo? Depende de las comodidades reales en una situaci√≥n particular. Si la diferencia en el rendimiento es insignificante, puede valer la pena seguir usando Google Fonts, si es grande, respectivamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para Web Almanac, recientemente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://github.com/HTTPArchive/almanac."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seleccionamos el almacenamiento local de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Google Fonts, y las pruebas mostraron cambios dram√°ticos:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oa/xy/ha/oaxyhappghsnk9rj-l4qoicboki.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La imagen inferior contiene fuentes locales en nuestro servidor de prueba, y puede ver que el tiempo de descarga se redujo a la mitad, ¬°de 6 a 3 segundos! ¬°Despu√©s de un an√°lisis m√°s profundo, vi que la productividad aument√≥ a√∫n m√°s (3 ‚Öì segundos de ahorro)! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo que no es tan obvio (pero lo que veremos m√°s adelante), en este punto, las fuentes no est√°n completamente cargadas en ninguna de las im√°genes, con el almacenamiento local, toma 7.5 segundos y 10.5 segundos cuando se usa Google Fonts. Sin embargo, las fuentes utilizadas son bastante similares a las est√°ndar, y no hay saltos notables en el dise√±o. Esto se puede ver en el siguiente diagrama:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ai/zw/vu/aizwvu3sstjfwd68gd7gzhez4im.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El diagrama muestra que la p√°gina con almacenamiento local (en rojo) se carga casi por completo en 2,4 segundos, y luego se actualiza varias veces m√°s a medida que se cargan las im√°genes, despu√©s de lo cual tambi√©n se muestran las fuentes. S√≠, me gustar√≠a simplificar todo, pero a√∫n as√≠ es imposible optimizar algunos costos de descarga de fuentes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La raz√≥n por la que las mejoras son realmente tangibles se debe a una cosa m√°s que no tuve en cuenta al principio: la representaci√≥n de bloques CSS. Entonces, si hay un enlace a Google Fonts CSS, el navegador no solo retrasa la visualizaci√≥n del texto, sino que tambi√©n retrasa la visualizaci√≥n de todo el contenido de la p√°gina. La fuente es una mejora progresiva, por lo que podemos renderizar con seguridad el resto de la p√°gina e incluso el texto en s√≠ (con fuentes est√°ndar / alternativas), pero el navegador no lo hace, solo ve que hay algo de CSS e intenta cargarlo, posponiendo la descarga El resto de la p√°gina. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No hay carga asincr√≥nica para CSS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- pero tal vez deber√≠a ser para tales casos? Sin embargo, corremos el riesgo de que, en caso de problemas para conectarse a Google Fonts, ¬°no se pueda acceder a todo su sitio hasta que el navegador deje de intentar procesar el enlace! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v6/3_/oo/v63_oow5ktzvixadg7tpirrthcs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la tabla de comparaci√≥n anterior, la l√≠nea verde vertical del Inicio de procesamiento ya ocurre despu√©s de 6 segundos, ya que tiene que esperar hasta que se cargue el CSS de Google Fonts en la l√≠nea 12, pasando la mitad del tiempo conect√°ndose al dominio y la otra mitad cargando realmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compare esto con la versi√≥n local: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x6/hm/4c/x6hm4c_omalxhr4ogx_5pueneci.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aqu√≠ podemos comenzar a renderizar tan pronto como se cargue y procese el CSS del sitio en 2.5 segundos. Esto se debe a que no hay demora para conectarse al dominio de Google Fonts.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En ambos casos, vemos que el inicio del renderizado ocurre antes de que se carguen las fuentes, y gracias a la magia de la visualizaci√≥n de fuentes: intercambio, el texto a√∫n es visible. Por lo tanto, al menos cuando se usa font-display: swap, ser√≠a mejor si Google Fonts no se cargara usando la representaci√≥n de bloqueo de CSS, sino que, por ejemplo, se cargara a trav√©s de JavaScript as√≠ncrono, que inserta fuentes CSS en la p√°gina solo despu√©s de c√≥mo se descargan Si el proceso se implementara de esta manera, no se producir√≠an demoras en el procesamiento, sin embargo, todav√≠a hay demoras al conectarse y una larga espera para que el texto se muestre correctamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: Cre√© un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">problema en GitHub Google Fonts</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con una propuesta para agregar una forma de descargar Google Fonts sin bloquear el renderizado. ¬°Vote si usted tambi√©n lo desea!</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zach Leatherman aboga por este enfoque para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reducir el n√∫mero de redibujos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y muestra que esto tambi√©n es posible solo con JavaScript, sin la necesidad de un archivo CSS. </font><font style="vertical-align: inherit;">Luego, muestra otras ventajas de administrar sus fuentes con JavaScript, por ejemplo, puede negarse a descargar las fuentes si el sitio est√° abierto desde una red lenta (utilizando la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API de informaci√≥n de red</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), o si el usuario tiene habilitada la configuraci√≥n </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guardar-Datos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prefiere-Movimiento reducido</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Caracter√≠sticas interesantes!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precargando Fuentes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una vez que se haya alejado de las URL hash de Google, podr√° precargar la fuente para mejorar a√∫n m√°s el rendimiento. Sin embargo, esta opci√≥n tiene algunas fallas potenciales, como lo discuti√≥ Andy Davies en el art√≠culo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precargando fuentes y el rompecabezas de las prioridades</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . B√°sicamente, al precargar las fuentes y subirlas en el orden de prioridad, impl√≠citamente disminuye la prioridad de otras descargas cr√≠ticas (por ejemplo, CSS), y debido a un error en Chrome, las fuentes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pueden incluso saltar por</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> encima de algunas de ellas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, la precarga cuando no se utilizar√° la fuente provocar√° una carga innecesaria innecesaria, por ejemplo, si la versi√≥n local existe y se puede usar con prioridad, o si el navegador no admite este formato de fuente (aunque todos los navegadores que admiten la carga previa tambi√©n admiten WOFF2 ) Junto con la recomendaci√≥n de usar la carga previa, Google claramente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le advierte sobre esto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y es bueno ver que le prestan atenci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se utiliza la funci√≥n font-display: swap, la necesidad de precargar puede no ser tan fuerte. </font><font style="vertical-align: inherit;">Aunque en este caso, a√∫n puede ganar tiempo descargando la cantidad m√≠nima requerida de fuentes y evitando FOUT y redibujando. </font><font style="vertical-align: inherit;">Por el momento, no utilizamos la precarga en Web Almanac y antes de comenzar, necesitamos algunas pruebas m√°s, pero por ahora estoy satisfecho con lo que es.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Respondiendo una pregunta en el t√≠tulo del art√≠culo: s√≠, vale la pena, ya que el aumento de rendimiento es significativo. </font><font style="vertical-align: inherit;">Por supuesto, sus resultados pueden variar, ya que todo depende del sitio en particular, as√≠ que pruebe, pruebe y pruebe nuevamente. </font><font style="vertical-align: inherit;">Pero, creo, esta sigue siendo la mejor opci√≥n, en t√©rminos de rendimiento, para la mayor√≠a de los sitios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, Google Fonts no es solo un repositorio de cientos de fuentes gratuitas, sino que tambi√©n es un mecanismo de entrega inteligente que utiliza muchas de las √∫ltimas t√©cnicas de optimizaci√≥n para representar las fuentes m√°s adecuadas con el m√≠nimo esfuerzo por parte del propietario del sitio. Al cambiar a autohospedado, idealmente deber√≠a volver a implementar muchas mejoras √∫tiles, como la visualizaci√≥n de fuentes: intercambio, eliminaci√≥n de sugerencias de fuentes (al menos para algunos navegadores), o de lo contrario, solo puede da√±ar el rendimiento de las pesadas. archivos de fuente</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta no es una tarea f√°cil (y Google Fonts lo hace por usted, s√≠). Pero dado que ahora usar solo el formato WOFF2 es la √∫nica opci√≥n realista, y los navegadores admiten la mayor√≠a de las t√©cnicas de optimizaci√≥n, todo se ha vuelto mucho m√°s f√°cil que antes. Sin embargo, vale la pena tener alg√∫n conocimiento sobre las fuentes web antes de configurarlo todo (¬°espero que esta publicaci√≥n haya ayudado en esto!), Y al mismo tiempo est√© atento a los nuevos cambios en el mundo de las fuentes, ya que sin duda habr√° m√°s mejoras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, ¬øtal vez est√°bamos demasiado interesados ‚Äã‚Äãen la optimizaci√≥n y con el almacenamiento local podemos permitirnos usar la fuente completa, sin subconjuntos y con sugerencias? En el sitio web de Google Fonts, puede descargar cualquier fuente y es relativamente simple, aunque es extra√±o que el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo no incluya los formatos WOFF y WOFF2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuando utilizo este m√©todo de carga, ¬°lo cual es completamente incomprensible para m√≠! </font><font style="vertical-align: inherit;">Sin embargo, si est√° realmente interesado en mejorar el rendimiento (¬°y deber√≠a estar interesado!), Entonces debe intentar hacer lo correcto. </font><font style="vertical-align: inherit;">Este art√≠culo solo muestra que es un poco m√°s complicado que simplemente descargar y colocar fuentes en su sitio, como siempre esper√©. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬°Guau, algo de texto result√≥ ser m√°s largo de lo que esperaba! </font><font style="vertical-align: inherit;">Pero espero que haya estado tan interesado en comprender el tema como usted y ahora tenga un par de ideas nuevas para acelerar las descargas de fuentes en su sitio. </font><font style="vertical-align: inherit;">Le recomiendo que siga a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jason</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zach</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en Twitter para obtener m√°s informaci√≥n sobre las fuentes, y a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para obtener m√°s informaci√≥n sobre la velocidad general de las aplicaciones web.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/9fa/cf4/a34/9facf4a348ef01048b4eb5e16ae66daa.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es490354/index.html">Mejora de la cultura de seguridad de la informaci√≥n en empresas fintech.</a></li>
<li><a href="../es490356/index.html">Presentamos Kubernetes CCM (Cloud Controller Manager) para Yandex.Cloud</a></li>
<li><a href="../es490358/index.html">¬øUn programador moderno necesita poder crear algoritmos?</a></li>
<li><a href="../es490362/index.html">Kubernetes en el esp√≠ritu de la pirater√≠a: nuestro camino hacia los microservicios y una plantilla preparada para la implementaci√≥n</a></li>
<li><a href="../es490364/index.html">Los centros de datos consumen mucha electricidad, pero a√∫n no amenazan el clima</a></li>
<li><a href="../es490372/index.html">Entrevista en Dodo Pizza</a></li>
<li><a href="../es490376/index.html">Plural</a></li>
<li><a href="../es490378/index.html">IPv6: un mundo maravilloso que merece una r√°pida transici√≥n a √©l</a></li>
<li><a href="../es490380/index.html">Retraso en la finalizaci√≥n del pod cuando se elimina</a></li>
<li><a href="../es490382/index.html">Contenido de la reuni√≥n # 2 de FunCorp iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>