<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎼 👩🏽‍🏫 🐮 C＃からC ++への製品の移植を自動化した方法 🤷🏿 ☀️ 👏🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブル。この投稿では、ソースコードがC＃で開発されたC ++言語のライブラリの月次リリースをどのように整理したかについて説明します。これは、マネージC ++についてではなく、アンマネージC ++とCLR環境の間のブリッジを作成することについてでもありません。元のC＃コードのAPIと機能を...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>C＃からC ++への製品の移植を自動化した方法</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495360/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブル。</font><font style="vertical-align: inherit;">この投稿では、ソースコードがC＃で開発されたC ++言語のライブラリの月次リリースをどのように整理したかについて説明します。</font><font style="vertical-align: inherit;">これは、マネージC ++についてではなく、アンマネージC ++とCLR環境の間のブリッジを作成することについてでもありません。元のC＃コードのAPIと機能を繰り返すC ++コード生成の自動化についてです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
言語間でコードを変換し、.Netライブラリーの機能を自分でエミュレートするために必要なインフラストラクチャーを作成したため、通常は学術的と見なされる問題を解決しています。これにより、C ++言語用のDonets以前の製品の毎月のリリースのリリースも開始でき、C＃コードの対応するバージョンから各リリースのコードを取得できました。同時に、元のコードをカバーするテストも一緒に移植され、C ++で特別に作成されたテストとともに、結果のソリューションのパフォーマンスを制御できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、プロジェクトの歴史とプロジェクトで使用されているテクノロジーについて簡単に説明します。</font><font style="vertical-align: inherit;">技術的な側面は私にとってはるかに興味深いので、経済的正当化の問題についで触れます。</font><font style="vertical-align: inherit;">連載の以下の記事では、コミュニティーに関連する質問がある場合は、コード生成やメモリー管理などのトピックだけでなく、他のトピックについても詳しく説明します。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バックグラウンド</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当初、当社は.Netプラットフォーム用のライブラリのリリースに携わっていました。</font><font style="vertical-align: inherit;">これらのライブラリは主に、いくつかのファイル形式（ドキュメント、テーブル、スライド、グラフィック）とプロトコル（電子メール）を操作するためのAPIを提供し、そのようなソリューションの市場で特定のニッチを占めています。</font><font style="vertical-align: inherit;">すべての開発はC＃で行われました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2000年代の終わりに、同社はJava向けの同様の製品のリリースを開始し、それ自体のために新しい市場に参入することを決定しました。ゼロから開発するには、明らかに、影響を受けるすべての製品の初期開発に匹敵するリソースへの投資が必要になります。 Donnetコードを、呼び出しとデータをJavaから.Net（またはその逆）に変換するレイヤーにラップするオプションも、いくつかの理由で拒否されました。代わりに、既存のコードを新しいプラットフォームに完全に移行することが何らかの方法で可能かどうかという質問が出されました。これは、1回限りのプロモーションではなく、2つの言語間で同期された各製品の新しいリリースの月次リリースであるため、さらに重要でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
決定を2つの部分に分けることが決定されました。</font><font style="vertical-align: inherit;">1つ目は、いわゆるPorterです。Cのソースコード構文をJavaに変換し、同時に.Netの型とメソッドをJavaライブラリの対応するもので置き換えます。</font><font style="vertical-align: inherit;">2番目の「ライブラリ」は、Javaと直接通信することが困難または不可能である.Netライブラリの部分の作業をエミュレートし、これに使用可能なサードパーティコンポーネントを引き付けます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような計画の主要な実現可能性を支持して、次のスポークは：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">思想的には、C＃とJava言語は非常によく似ています-少なくとも、型の構造とメモリを使用する作業の構成は、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリの移植に関するもので、GUIを移植する必要はありませんでした。</font></font></li>
<li>  ,  , -    ,        System.Net  System.Drawing;</li>
<li>   ,        .Net ( Framework,   Standard   Xamarin),          .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳細は説明しません。個別の記事に値するためです（1つではありません）。</font><font style="vertical-align: inherit;">開発開始から最初のJava製品のリリースまで約2年かかったといっても過言ではなく、それ以来、Java製品のリリースは同社の常識となっています。</font><font style="vertical-align: inherit;">プロジェクトの開発中、ポーターは、確立されたルールに従ってテキストを変換する単純なユーティリティから、ソースコードのAST表現で機能する複雑なコードジェネレーターに進化しました。</font><font style="vertical-align: inherit;">ライブラリもコードで埋め尽くされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Javaの方向性の成功により、同社は新たな市場にさらに拡大したいという同社の願いが決定され、2013年に同様のシナリオでのC ++言語向けの製品のリリースについて質問が出されました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題の定式化</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポジティブバージョンの製品を確実にリリースするには、任意のC＃コードからC ++コードを取得し、コンパイルしてチェックし、クライアントに提供できるフレームワークを作成する必要がありました。これは、数十万行から数百万行（依存関係を除く）の範囲のボリュームを持つライブラリに関するものでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、Javaポーターの経験も考慮に入れられました。最初は、それが構文を変換するための単純なツールである場合、移植されたコードを手動でファイナライズする習慣が自然に生じました。製品の迅速なリリースに焦点を当てた短期的には、開発プロセスを加速できるため、これは適切でしたが、長期的には、各翻訳エラーが発生するたびに修正する必要があるため、リリースのために各バージョンを準備するコストが大幅に増加しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もちろん、この複雑さは管理可能でした-少なくとも、C＃コードの次の2つのリビジョンのポーターの出力間の差として計算される、結果のJavaコードにパッチのみを転送することによって。このアプローチにより、移植された各行を一度だけ修正することが可能になり、将来、変更が加えられていない開発済みのコードを使用できるようになりました。ただし、ポジティブなポーターを開発する際の目標は、移植されたコードを修正する段階を取り除くことであり、フレームワーク自体を修正することではありませんでした。したがって、ポーターコードで、任意のまれな変換エラーが1回修正されます。この修正は、移植されたすべての製品の今後のすべてのリリースに適用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポーター自体に加えて、次の問題を解決するライブラリをC ++で開発することも必要でした。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移植されたコードが機能するために必要な範囲での.Net環境のエミュレーション。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移植されたC＃コードをC ++の現実（型構造、メモリ管理、その他のサービスコード）に適合させる。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「書き換えられたC＃」とC ++自体の違いを平滑化し、.Netパラダイムに慣れていないプログラマが移植されたコードを使用しやすくします。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかな理由により、.Netタイプを標準ライブラリのタイプに直接マッピングする試みは行われていません。</font><font style="vertical-align: inherit;">代わりに、Donnet型の代わりに、常に彼のライブラリの型を使用することが決定されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの読者は、なぜ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monoの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ような既存の実装を使用しなかったのかをすぐに尋ねます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それには理由がありました。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このような完成したライブラリーを引き付けることにより、最初の要件のみを満たし、2番目の要件は満たさず、3番目の要件は満たさないようにすることができます。</font></font></li>
<li> Mono   C# ,  ,   ,       .</li>
<li>      (API,  ,   ,   C++,   )   ,     .</li>
<li>    ,    .Net,                  .  ,           ,      .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理論的には、このようなライブラリは完全にポートを使用してC ++に変換できますが、システムライブラリがないと、移植されたコードのデバッグは原則として不可能であるため、開発の最初に完全に機能するポーターが必要になります。さらに、システムライブラリの呼び出しはボトルネックになる傾向があるため、システムライブラリの変換されたコードを最適化するという問題は、移植された製品のコードよりもさらに深刻になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、サードパーティのライブラリにすでに実装されている関数へのアクセスを提供するアダプタのセットとしてライブラリを開発することが決定されましたが、.NetのようなAPI（Javaと同様）を使用しました。これにより、作業が減り、既製の、すでに最適化されたC ++コンポーネントが使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレームワークの重要な要件は、移植されたコードが（ライブラリに関する限り）ユーザーアプリケーションの一部として機能する必要があることでした。これは、ガベージコレクション環境で任意のクライアントコードを強制的に実行できないため、メモリ管理モデルがC ++プログラマーに明確にされている必要があることを意味しました。妥協モデルとして、スマートポインターの使用が選択されました。このような移行を確実に実現する方法（特に、循環リンクの問題を解決する方法）については、別の記事で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の要件は、ライブラリだけでなく、それらのテストも移植できることでした。</font><font style="vertical-align: inherit;">同社は自社製品のテストカバレッジの高い文化を誇りとしており、C ++で元のコード用に記述されたものと同じテストを実行できるため、翻訳後の問題の検索が大幅に簡素化されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残りの要件（起動形式、テストカバレッジ、テクノロジなど）は、主にプロジェクトでの作業方法とプロジェクトでの方法に関係していました。</font><font style="vertical-align: inherit;">それらについては詳しく説明しません。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物語</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
先に進む前に、会社の構造について少し説明しなければなりません。会社はリモートで作業し、その中のすべてのチームが分散されています。特定の製品の開発は通常、チームの責任であり、言語（ほとんどの場合）と地理（主に）によって統一されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトの活発な作業は2013年秋に始まりました。会社の分散構造のため、また開発の成功に関するいくつかの疑問のため、フレームワークの3つのバージョンがすぐに発売されました。これにより、効果の低いソリューションの開発が停止し、必要に応じてリソースが再割り当てされると想定されていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
将来的には、さらに4つのチームが「共通」フレームワークに関する作業に参加し、そのうち2つは後で彼らの決定を再検討し、C ++用の製品のリリースを拒否しました。 2017年の初めに、「個別の」ソリューションの1つの開発を停止し、対応するチームを「共通の」フレームワークで作業するように転送することが決定されました。開発が中止さ</font><font style="vertical-align: inherit;">れたのは、メモリ管理の手段として</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boehm GC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用することを想定しており</font><font style="vertical-align: inherit;">、システムライブラリの一部のはるかに豊富な実装が含まれていたため、「一般的な」ソリューションに転送されました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このように、2つの開発、つまり移植された製品のリリースが1つになりました。1つは「個人」、もう1つは「集合」です。当社の（「共通」）フレームワークに基づく最初のリリースは2018年2月に行われました。その後、このソリューションを使用する6つのチームすべてのリリースは毎月となり、フレームワーク自体は会社の個別の製品としてリリースされました。それをオープンソースにするという疑問さえ提起されましたが、この議論はまだ発展していません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同様のフレームワークで独立して作業を続けてきたチームも、2018年に最初のC ++リリースをリリースしました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のリリースには、元の製品の切り捨てられたバージョンが含まれていたため、重要でない部分をブロードキャストする作業を可能な限り遅らせることができました。</font><font style="vertical-align: inherit;">以降のリリースでは、機能の部分的な追加が行われました（現在も行われています）。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトに関する作業の組織</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いくつかのチームによるプロジェクトでの共同作業の組織は、大きな変化を遂げることができました。当初、1つの大きな「中央」チームがフレームワークの開発、サポート、修正を担当し、C ++での最終製品のリリースに関与する小さな「製品」チームが主に彼らの移植を試みることを決定しましたコードとフィードバック（移植、コンパイル、実行エラーに関する情報）の提供。ただし、このようなスキームは、中央チームがすべての「製品」チームからの要求で過負荷になり、発生した問題が解決されるまで先に進むことができなかったため、非生産的であることが判明しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この特定の開発の状態に大きく依存しない理由により、「中央」チームを解散し、人々を「製品」チームに転送することを決定しました。この場合、各チーム自体が共通の基盤を使用するか、プロジェクトの独自の分岐を生成するかを決定します。このような質問の発言は、その時点でコードが安定していたJavaフレームワークに関連していましたが、できるだけ早くC ++ライブラリをいっぱいにするための努力の統合が必要でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この作業形式にも欠点があったため、将来、別の改革が行われました。 「中央」チームは復元されましたが、構成は小さくなりましたが、機能は異なりました。現在、プロジェクトの実際の開発ではなく、共同作業の組織化を担当していました。これには、CI環境のサポート、マージリクエストプラクティスの整理、開発参加者との定期的な会議の開催、ドキュメントのサポート、テストのカバー、アーキテクチャソリューションとトラブルシューティングの支援などが含まれます。さらに、チームは技術的負債やその他のリソースを集中的に使用する領域を排除するタスクを引き受けました。このモードでは、開発は今日まで続きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、このプロジェクトは数人（約5人）の開発者の努力によって開始され、多くの場合、約20人の人数でした。フレームワークの開発とサポート、および6つの移植された製品のリリースを担当する約10〜15人は、近年安定した値と見なすことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのラインの作者は、2016年半ばに入社し、「一般的な」ソリューションを使用してコードをブロードキャストするチームの1つで作業を開始しました。同じ年の冬、「中央」チームを再編成することが決定したとき、私は彼女のチームリーダーのポジションに移動しました。したがって、今日のプロジェクトでの私の経験は3年半以上です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移植された製品のリリースを担当するチームの自律性により、場合によっては、開発者がデフォルトでどのように動作するかについて妥協するよりも、動作モードで移植者を補足する方が簡単であることが判明しました。</font><font style="vertical-align: inherit;">これは、ポーターを構成するときに利用できるオプションの数を、予想以上に説明しています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テクノロジー</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトで使用されているテクノロジーについて説明します。 PorterはC＃で記述されたコンソールアプリケーションです。この形式では、「port-compile-run tests」などのタスクを実行するスクリプトに組み込むのが簡単だからです。さらに、ボタンをクリックすることで同じ目標を達成できるGUIコンポーネントがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
古代の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NRefactory</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ライブラリは、コードの解析とセマンティクスの解決を担当します</font><font style="vertical-align: inherit;">。残念ながら、プロジェクトの開始時点では、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roslyn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はまだ利用可能ではありませんでしたが、もちろん、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Roslyn</font></a><font style="vertical-align: inherit;">への移行は計画されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポーターは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ASTウッド</font></a><font style="vertical-align: inherit;">通路を使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報を収集し、C ++出力コードを生成します。 C ++コードが生成されると、AST表現は作成されず、すべてのコードがプレーンテキストとして保存されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、ポーターは微調整のために追加情報を必要とします。そのような情報は、オプションと属性の形で彼に送信されます。オプションはプロジェクト全体にすぐに適用され、たとえば、クラスのエクスポートマクロメンバーの名前やコード分析で使用されるC＃プリプロセッサー定義を設定できます。属性はタイプとエンティティに掛けられ、それらに固有の処理を決定します（たとえば、クラスメンバーのキーワード「const」または「mutable」を生成する、またはそれらを移植から除外する必要がある）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C＃クラスと構造はC ++クラスに変換され、それらのメンバーと実行可能コードは最も近い同等のものに変換されます。ジェネリック型とジェネリックメソッドはC ++テンプレートにマップされます。 C＃リンクは、ライブラリで定義されたスマートポインタ（強いまたは弱い）に変換されます。ポーターの原則の詳細については、別の記事で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、元のC＃アセンブリはC ++プロジェクトに変換されます。これは、.Netライブラリーではなく、共有ライブラリーに依存しています。これを次の図に示します</font></font><br>
<br>
<img src="https://habrastorage.org/webt/of/d1/s-/ofd1s-pimst_5rrcxzz8t-fh0nq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。cmakeは、ライブラリと移植されたプロジェクトの構築に使用されます。コンパイラVS 2017および2019（Windows）、GCCおよびClang（Linux）が現在サポートされています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のように、ほとんどの.Net実装は、作業の大部分を実行するサードパーティライブラリの薄層です。</font><font style="vertical-align: inherit;">以下が含まれます：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skia-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">グラフィックを操作するための;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボタン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -暗号化機能をサポートします。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ICU-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字列、エンコーディング、およびカルチャを操作するため。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Libxml2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -XMLでの作業用。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PCRE2-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正規表現での作業用。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zlib-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">圧縮関数を実装します。</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブースト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -さまざまな目的のため。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のいくつかのライブラリ。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポーターとライブラリーの両方が数多くのテストでカバーされています。</font><font style="vertical-align: inherit;">ライブラリテストでは、gtestフレームワークを使用します。</font><font style="vertical-align: inherit;">ポーターテストは主にNUnit / xUnitで記述され、いくつかのカテゴリに分かれており、次のことを証明しています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらの入力ファイルのポーター出力はターゲットと一致します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイルおよび起動後の移植されたプログラムの出力はターゲットと一致します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力プロジェクトからのNUnitテストは、移植されたプロジェクトで正常にgtestテストに変換され、合格します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移植されたプロジェクトAPIはC ++で正常に動作します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">個々のオプションと属性が翻訳プロセスに与える影響は予想通りです。</font></font></li>
</ul><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitLab</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用してソースコードを格納します</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenkinsが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> CI環境として選択</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">さ</font></a><font style="vertical-align: inherit;">れました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">移植された製品は、Nugetパッケージおよびダウンロードアーカイブとして入手できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトに取り組んでいる間、私たちは多くの問題に直面しなければなりませんでした。</font><font style="vertical-align: inherit;">それらのいくつかは予想されていましたが、他はすでにプロセスに現れました。</font><font style="vertical-align: inherit;">主なものを簡単にリストします。</font></font><br>
<br>
<ol>
<li><b>     .Net  C++.</b><br>
  ,   C++    Object,       RTTI.           .Net   STL.</li>
<li><b>   .</b><br>
       ,          ,    . ,  C#     ,   C++ — .</li>
<li><b>  .</b><br>
   —   .          ,   .   ,            .</li>
<li><b>    .</b><br>
 C++   ,        ,        .</li>
<li><b>    C#.</b><br>
 C#    ,      C++.    ,     :<br>
<br>
<ul>
<li>   ,    ;</li>
<li>   ,       (,       yeild);</li>
<li>,      (,            ,       ,        C#);</li>
<li>,   C++ (,  C#        foreground-).</li>
</ul></li>
<li><b>  .</b><br>
,        .Net  ,          .</li>
<li><b>   .</b><br>
- ,     ,        «» ,     .  ,  ,  ,     ,     using,             -.                 .   ,             .</li>
<li><b> .</b><br>
         ,    ,   ,  ,   ,    /     -          .</li>
<li><b>    .</b><br>
     .       ,           .    ,       ,      ,     .</li>
<li><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知的財産の保護の難しさ。</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くのクラスメンバーは結果なしにヘッダーファイルから削除できないため、C＃コードがボックス化されたソリューションによってかなり簡単に難読化される場合、C ++では追加の作業を行う必要があります。</font><font style="vertical-align: inherit;">一般的なクラスとメソッドをテンプレートに変換すると、アルゴリズムが公開されて脆弱性が生まれます。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それにもかかわらず、このプロジェクトは技術的な観点から非常に興味深いものです。</font><font style="vertical-align: inherit;">それに取り組むことで、たくさん学ぶことができ、たくさん学ぶことができます。</font><font style="vertical-align: inherit;">タスクの学問的な性質もこれに貢献しています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロジェクトの一環として、興味深い実用的な問題を解決するシステムを、その直接的な実用化のために実装することができました。会社の図書館の月刊号を、当初意図されていなかった言語で編成しました。ほとんどの問題は完全に解決可能であり、結果として得られるソリューションは信頼性が高く、実用的であることがわかりました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まもなく、さらに2つの記事を発行する予定です。それらの1つは、例、ポーターがどのように機能するか、C ++コンストラクトがC ++でどのように表示されるかを詳細に説明します。別のスピーチでは、2つの言語のメモリモデルの互換性を確保する方法について説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コメント欄の質問に答えてみます。</font><font style="vertical-align: inherit;">読者が私たちの開発の他の側面に関心を示し、回答がコメントでの対応を超え始めた場合、新しい記事の公開を検討します。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja495348/index.html">研究：Covid-19がメールマーケティングのパフォーマンスに与える影響</a></li>
<li><a href="../ja495350/index.html">ホームWebサーバー、または独自のホスティングプロバイダー</a></li>
<li><a href="../ja495354/index.html">死ぬことなく20の言語で製品を継続的にリリースする方法は？</a></li>
<li><a href="../ja495356/index.html">Javaでの分散KVストレージ用のRAFTコンセンサスアルゴリズムの実装</a></li>
<li><a href="../ja495358/index.html">Kubernetesで欠落しているイメージを検出するためのk8s-image-availability-exporterの紹介</a></li>
<li><a href="../ja495362/index.html">自己分離とプログラム：家で夢中にならないようにして、便利に時間を過ごす方法</a></li>
<li><a href="../ja495364/index.html">APIスタイルガイド、またはユーザーに考えさせない</a></li>
<li><a href="../ja495366/index.html">16種類のプログラマ、または開発者は同じロボットではありません</a></li>
<li><a href="../ja495368/index.html">自己隔離の条件で自己散歩する自己犬に自己登録します</a></li>
<li><a href="../ja495370/index.html">公共は悪</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>