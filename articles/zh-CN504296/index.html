<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛰️ 🚮 🤸🏻 在Python中生成随机分支 🕛 🤺 👨🏿‍🎨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="回忆道金斯，其主要思想可以表达如下：如果长时间将龙卷风放在垃圾桶上，则可以组装一架波音747。一种结构的出现是由于混战者的混乱：对所有无意义和无序的过程中的所有事物进行排序和重新组合，可以看到相当有意义和有序的过程。如果这样的过程是固定的并以某种方式重复，那么这个昨天是布朗运动的系统今天就会开始看起...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>在Python中生成随机分支</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504296/"><img src="https://habrastorage.org/webt/fy/vd/nr/fyvdnr83rzvq1tow9chyg7e0kry.gif" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回忆道金斯，其主要思想可以表达如下：如果</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长时间</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将龙卷风放在垃圾桶上，则可以组装一架波音747。一种结构的出现是由于混战者的混乱：对所有无意义和无序的过程中的所有事物进行排序和重新组合，可以看到相当有意义和有序的过程。如果这样的过程是固定的并以某种方式重复，那么这个昨天是布朗运动的系统今天就会开始看起来好像它的行为是由一只看不见的手所建立的，并且它正在采取一些有意义的行动。同时，根本没有手。她准备好了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了再次确保这一点，我努力编写某种数字化生活，在没有混乱的情况下，无需人为指示，它就能为自己随机生成逻辑并存在于其自然栖息地-操作系统中。是的，在这种情况下，可能与“人为生活”方向的许多程序有所不同，“人为生活”方向是“生活”在畜栏里，产生“食肉动物”和“草食动物”，并与“食物”和其他食物共存。这些程序均未与系统对象（进程，文件等）进行交互，这意味着该代码并没有真正存在。另外，该代码还是以一种方式仍然执行人需要的某种任务，因此范围非常有限。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了在操作系统中实现具有很大动作自由度的代码，而这又不仅仅是混乱的可执行指令集，出现了一个由3个模块组成的模型。 </font></font><br>
<a name="habracut"></a><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随机生成主要可执行代码的模块</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随机教育模块</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS对象的“计算机视觉”模块</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在本文中，我们将讨论第一个模块，到目前为止，这只是随机分支的生成，即像“ if-elif-else”这样的结构。为什么分支？因为总的来说，任何生物的生命都由条件反应组成：我们所做的一切都是对感知信息的反应。如果发生某些情况，细胞会分裂;如果受害者看到强壮的掠食者，则试图逃跑;如果受害者较弱，则可以尝试攻击他;如果灯亮，蟑螂会散开;有人去吃饭，饿了，等等。等等-这排是无尽的。没有独立的，独立的动作，不受任何条件限制。因此，特别是将生物体的行为描述为对以下条件的反应：IF [某物] THEN [某物]。我们正在尝试产生这种行为。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为什么随机？为了离开代码，最大的机会是独立行动并尽可能使人（程序员）远离此过程（理想情况下完全排除在外）。对于程序员来说，后者是最困难的，因为每个人都习惯的标准编程类似于对动物的严格训练，必须严格按照程序员指示的方式执行，就像他在指示时所指示的那样。在这里情况恰好相反：最终生成的代码必须采取行动，以使其生成器的创建者无法预测。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在继续讨论生成器的图和代码之前，有必要详细介绍决策功能，该功能用作导体，允许执行代码的一部分或另一部分。我之前写过关于她的文章</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。然后被提示我描述了强化学习的思想和约翰·康威的游戏，名为``生命''。我很可能不反对使用已经开发或公开的内容。最后，所有新功能都是已知功能的综合，我本人也承认我采用了Windows中使用的优先处理流程的想法。在这里她很合适。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前，所提到的功能已进行了一些转换：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_solution</span>(<span class="hljs-params">p_random, p_deter</span>):</span>                       
    deter_flag = <span class="hljs-number">0</span>
    random_flag = <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> p_random &gt;= random.random():<font></font>
            p_random-=<span class="hljs-number">0.01</span>                                  <span class="hljs-comment">#  </span>
            p_deter+=<span class="hljs-number">0.01</span>
            random_flag = <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> p_deter &gt;= random.random():<font></font>
            p_deter-=<span class="hljs-number">0.01</span>                                   <span class="hljs-comment">#  </span>
            p_random+=<span class="hljs-number">0.01</span>
            deter_flag = <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> random_flag == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> deter_flag == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span>(p_random, p_deter, <span class="hljs-number">1</span>)
    <span class="hljs-keyword">elif</span> deter_flag == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> random_flag == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span>(p_random, p_deter, <span class="hljs-number">-1</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> (p_random, p_deter,<span class="hljs-number">0</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在输入时，它采用2个概率（默认情况下，它们最初都等于0.5），然后再逐个检查其操作。触发的概率将自身降低1％，同时将其他概率提高1％。因此，每当概率起作用时，它就减小，而其他概率就增加。结果，没有一个概率比另一个具有太大的优势，它们自平​​衡，形成以0.5为中心的正态分布，且工作邻域不超过+ -10％，这使该函数与标准随机数区分开来，在这种情况下，概率它始终等于0.5，并且不依赖于先前的计算。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
形象地讲，它是一个振幅很小的概率摆。如果第一个概率起作用而第二个概率不起作用，则返回1，否则返回-1，并且如果两个</font><font style="vertical-align: inherit;">概率</font><font style="vertical-align: inherit;">都起作用或不起作用，则返回0。因此，</font><font style="vertical-align: inherit;">用于2个传入概率</font><font style="vertical-align: inherit;">的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_solution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">将返回3个可能的动作之一，从而获得平衡具有3个可能的继续选项的分叉解决方案。将来，此功能可能会通用，并且可以采用无限数量的概率，因为分叉处的变化可以大于3，但是对于if-elif-else生成器，三个连续选项就足够了。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这里还应该注意的是，在代码中有不同的，可以说是典型的派生。例如，如下所示，在生成器的主要功能中，有一个分叉，其中可以选择一种构造分支的方案，其中只有3种，但是代码中还存在其他情况：插入一个动作块或开始递归，应该生成多少个动作行，应该多么复杂符合条件的put或or和elif否则。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我认为，应该针对每种类型的动作设置我们上面提到的概率摆：然后，仅根据该分叉之前发生的情况来平衡分叉，而不是在代码的其他某些部分中进行平衡。那些。在选择常规分支结构时，我们有一对自己的概率，而在构建其元素时，内部就有另一个概率。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然，您可以将所有动作用一对平衡，但是每个分叉处的概率将非常困难，并且取决于其他路口的所有先前动作。这样的设计的随机性会更高，但是现在我个人倾向于第一种方案，因为我喜欢其他小的设计在一个大的摆动摆的框架内摆动的设计。较小的余额产生于一个大余额。另外，在第二种方案中，随机性也绰绰有余。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当写分支产生，有必要做不仅可行的代码产生无差错代，而且这样的代码</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成if-elif-else的最大可能构造，但是没有2或3个这样的可能选项，例如，考虑以下可能的方案。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qu/oj/i3/quoji3ppc2arksk-xwafu3lfiqm.jpeg" width="350" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
方案中的图标</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[..]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示条件或一组随机动作的一组表达式。最基本的方案是1，其中条件简单地通过，然后是动作块。 2a和2b是if与一个elif或另一个的变化。在选项2c中，如果已经与几个elif结合使用，则没有其他选择。最后，在选项2d中，提出了最通用的方案，其中if包含几个elif和else 1。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果不需要建立无限的分支机构，那么一切都会很简单。在每个if，elif或其他之后，可以调用递归，这又可以进一步递归并在“右边”生成新的elif-else块。让我们看一下可能的选择方案。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y0/0z/vr/y00zvr1zkcwxuceu28olrpfabpo.jpeg" width="400" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实施例2e和2f示出了当在单个小数点之后或在另一个小数点之后调用递归时这种递归分支的简单特殊情况。选项2g描述了这种递归的最复杂和最一般的情况，即在每个省略号之后可以有一个动作块+递归（或立即递归），而在其他情况下也可能发生相同的情况。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当if和if块之后立即进行递归时，仍然存在变化。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/dv/ye/hxdvyem6hl667rv0v-e-mjhpiv8.jpeg" width="400" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这在选项3a和3b中可见。选项3c以最一般的形式显示了这种方案。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这并不是说上述方案涵盖了构建分支的所有可能选项，但是即使以这种形式，最终代码也很容易产生150行的分支，“向右”移动10-15步。无论如何，在必要时使方案复杂化并不困难。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以查看</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样的世代</font><font style="vertical-align: inherit;">的示例，</font><font style="vertical-align: inherit;">以确保分支可以非常多样化。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zs/8j/gd/zs8jgd-5efc6vzg0thgjztgfyq0.jpeg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您无需注意条件表达式和操作块的组成-为了直观起见，它们仅由两个变量，3个表达式以及少量算术和逻辑符号的组合生成。真正的重组“肉”的讨论不在本文的讨论范围内（这将在3个模块的讨论中进行讨论）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在继续直接检查生成器代码之前，有必要记住，生成的块必须水平向右移动（如果是elif，否则，如果是递归或动作块），并且还必须在分支完成后“返回”到左侧。而且，由于Python对于水平缩进非常挑剔，因此希望使步骤相同（在我们的示例中，步骤为3）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
下图说明了位移如何移位。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mu/p8/ue/mup8uegwtzj-fydzcdcsswbsutw.jpeg" width="500" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这里最重要的是，随着分支的加深，位移始终向右移动。但是，例如，如果我们有一个elif-else块，其中有多个elif或单个elif-else对，则需要“返回”浮动在右侧的笔架，以便下一个elif（或其他）以与该块中的上一个偏移量相同。为此，必须保存原始偏移量（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wall_offset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），并在分支生成结束后（例如，一个elif的完全分支），将其还原。这样可以确保块中的其他元素均匀地“彼此重叠”。此外，每个新块都有其自己的位移。相同的技巧可以在整个if-elif-else构造（包括递归）中实现和谐。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在让我们继续执行代码。该代码总共约200行，包含8个函数，我们在上面检查了其中之一。由于递归性和传递给函数的大量参数，它在某些地方可读性很差。首先，我将引用用于生成条件表达式和操作块的“肉”。</font></font><br>
<br>
<pre><code class="python hljs">var_list = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>]<font></font>
exp_list = [<span class="hljs-string">'a+b'</span>,<span class="hljs-string">'b-a'</span>, <span class="hljs-string">'b//a'</span>]<font></font>
sign = [<span class="hljs-string">'+'</span>,<span class="hljs-string">'-'</span>,<span class="hljs-string">'/'</span>,<span class="hljs-string">'*'</span>,<span class="hljs-string">'//'</span>]<font></font>
sign2 = [<span class="hljs-string">'&gt;'</span>,<span class="hljs-string">'&lt;'</span>,<span class="hljs-string">'=='</span>,<span class="hljs-string">'&gt;='</span>,<span class="hljs-string">'&lt;='</span>,<span class="hljs-string">'!='</span>]<font></font>
a = <span class="hljs-number">3</span>
b = <span class="hljs-number">2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如您所见，使用了两个变量：a和b（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">var_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），它们已初始化，3个算术表达式（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exp_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），以及两个带有符号的表（</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sign，sign2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。如前所述，现在不再需要结果表达式的组成，因此本文不予考虑-主要用于说明代码。还应注意一个特殊之处：在elif-else块的生成中，您需要跟踪else的外观并停止生成，否则else可能会出现在elif之前，这自然会引起错误。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fin_else_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志用于此目的</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们从主要的生成功能开始考虑。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">if_gen</span>(<span class="hljs-params">exp_list, var_list, if_str, offset_koeff, fin_else_flag, prob_list</span>):</span>             <font></font>
    choice_list = [exp_list, var_list]<font></font>
    base_offset = <span class="hljs-string">' '</span>
    <span class="hljs-comment">#   </span>
    prob_list[<span class="hljs-number">0</span>],prob_list[<span class="hljs-number">1</span>],sol = make_solution(prob_list[<span class="hljs-number">0</span>],prob_list[<span class="hljs-number">1</span>])       
    <span class="hljs-comment"># if +   (1   )        </span>
    <span class="hljs-keyword">if</span> sol == <span class="hljs-number">0</span>: 
        <span class="hljs-comment">#     +3                                                                   </span>
        action_str = action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list)                 
        <span class="hljs-keyword">return</span>(base_offset*offset_koeff+<span class="hljs-string">'if '</span>+ if_sub(exp_list,var_list, sign, prob_list) +<span class="hljs-string">':\n'</span> + action_str, offset_koeff, fin_else_flag, prob_list) 
    <span class="hljs-comment"># if + elif/else (2   )           </span>
    <span class="hljs-keyword">elif</span> sol == <span class="hljs-number">-1</span>:                                                                         <font></font>
        if_str= base_offset*offset_koeff+<span class="hljs-string">'if '</span>+ if_sub(exp_list,var_list, sign, prob_list) +<span class="hljs-string">':\n'</span> + action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list) <span class="hljs-comment"># if [..]:</span>
        <span class="hljs-comment">#  elif/else</span>
        prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol2=make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])             
        <span class="hljs-keyword">if</span> sol2!=<span class="hljs-number">0</span>:<font></font>
            ee_string=<span class="hljs-string">'elif'</span>
        <span class="hljs-keyword">else</span>:<font></font>
             ee_string=<span class="hljs-string">'else'</span>
        <span class="hljs-comment">#   elif/else</span><font></font>
        if_str, offset_koeff, fin_else_flag, prob_list = elif_else_block(ee_string, offset_koeff, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
        <span class="hljs-keyword">return</span>(if_str, offset_koeff, fin_else_flag, prob_list)
    <span class="hljs-comment"># if + if() (3   )</span>
    <span class="hljs-keyword">else</span>:                                                                                   <font></font>
            if_str= base_offset*offset_koeff+<span class="hljs-string">'if '</span>+ if_sub(exp_list,var_list, sign, prob_list) +<span class="hljs-string">':\n'</span> <span class="hljs-comment"># if [..]:</span>
            <span class="hljs-comment">#  if/if+ </span>
            prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>],sol = make_solution(prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>])        
            <span class="hljs-keyword">if</span> sol==<span class="hljs-number">0</span>:
                <span class="hljs-comment">#     +3</span>
                if_str+=action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list)      
            <span class="hljs-comment">#          </span><font></font>
            wall_offset = offset_koeff                                                      <font></font>
            if_rek, offset_koeff, fin_else_flag, prob_list = if_gen(exp_list, var_list, if_str, offset_koeff+<span class="hljs-number">3</span>, fin_else_flag, prob_list) <span class="hljs-comment">#  if+if</span>
            <span class="hljs-comment">#    </span><font></font>
            if_str+=if_rek   <font></font>
            <span class="hljs-comment">#   elif-else/                                                                </span>
            prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>],sol2=make_solution(prob_list[<span class="hljs-number">4</span>],prob_list[<span class="hljs-number">5</span>])         
            <span class="hljs-keyword">if</span> sol2!=<span class="hljs-number">0</span>:<font></font>
                prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol3=make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])
                <span class="hljs-keyword">if</span> sol3!=<span class="hljs-number">0</span>:<font></font>
                    ee_string=<span class="hljs-string">'elif'</span>
                <span class="hljs-keyword">else</span>:<font></font>
                    ee_string=<span class="hljs-string">'else'</span><font></font>
                if_str, offset_koeff, fin_else_flag, prob_list = elif_else_block(ee_string, wall_offset, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)  <font></font>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-comment">#     +3</span>
                if_str+=action_str_gen(choice_list, offset_koeff+<span class="hljs-number">3</span>, prob_list)              
            <span class="hljs-keyword">return</span>(if_str, offset_koeff,fin_else_flag, prob_list)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了带有“肉”的生成列表（exp_list，var_list）之外，该函数还</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受if_str-</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是依次收集生成的代码的行。之所以被接受是因为</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><b><font style="vertical-align: inherit;">本身</font></b><font style="vertical-align: inherit;">可以递归调用，因此建议不要丢失之前生成的代码。</font><b><font style="vertical-align: inherit;">offset_koeff</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
参数</font><font style="vertical-align: inherit;">是偏移系数，它是具有一个空格的行的系数（</font><b><font style="vertical-align: inherit;">base_offset</font></b><font style="vertical-align: inherit;">），因此，它负责代码块的水平位移。</font><font style="vertical-align: inherit;">我们</font><font style="vertical-align: inherit;">
在</font><font style="vertical-align: inherit;">上面讨论</font><font style="vertical-align: inherit;">了</font><b><font style="vertical-align: inherit;">fin_else_flag</font></b><font style="vertical-align: inherit;">，在这里它只是传递给一个负责生成if + elif / else的函数（请参见下文）。</font><font style="vertical-align: inherit;">
好吧，还有另一个参数-</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是一个包含10个概率（5对概率）的工作表</font></font><pre><code class="python hljs">prob_list = [<span class="hljs-number">0.5</span> <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>)] </code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并由</font><font style="vertical-align: inherit;">我们上面讨论</font><font style="vertical-align: inherit;">的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_solution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数使用</font><font style="vertical-align: inherit;">：与之对应的那对或那对概率与派生类型相对应（例如，主结构派生使用表中的前两个概率：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list [0]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list [1]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。例如，下图中可以看到此工作表中概率变化的结果。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/_o/qc/tw_oqckdotydpm1m5djcmdc3rgw.jpeg" width="550" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果在下一代中执行了相应的代码，则此列表中的概率会随着一代而变化。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在函数本身中，嵌套的choice_list会在开始时进行初始化-从“肉”中方便地随机生成表达式，并且</font><font style="vertical-align: inherit;">在一个空格</font><font style="vertical-align: inherit;">中将基本偏移量</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">base_offset =”</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成该表达式是必需的</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
之后是主fork，它通过make_solution函数将解决方案放入sol变量中。 Sol采用三个值（0，-1.1）之一并因此根据要构造的方案确定结构。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果+ [..]，则第一个选项实现最简单的选项。答案形成为具有当前偏移量的字符串（不一定等于0！），“ if”字符串，由</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_sub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数生成的随机条件</font><font style="vertical-align: inherit;">（将在后面讨论），回车以及使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action_str</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数生成操作块</font><font style="vertical-align: inherit;">（请参见下文）。 。结果，我们得到如下信息：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a+b)==(b)):<font></font>
   b=b<font></font>
   a=b-a<font></font>
   a=a</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第二个选项负责生成此类型：if [..] + elif / else-block（方案中的选项2）。</font><font style="vertical-align: inherit;">首先，在此处形成一条if + [..]行，然后出现一个elif / else分支，该分支决定将生成</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifif</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -elif还是if-else的elif-else块（e </font><b><font style="vertical-align: inherit;">lif_else_block</font></b><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">-参见下文）。</font><font style="vertical-align: inherit;">结果可能会有所不同。</font><font style="vertical-align: inherit;">例如：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a+b)==(a)):<font></font>
   b=a+b<font></font>
<span class="hljs-keyword">elif</span> ((b//a)==(a)):
   <span class="hljs-literal">None</span>
<span class="hljs-keyword">elif</span> ((a+b)&lt;=(a)):<font></font>
   a=b//a<font></font>
<span class="hljs-keyword">else</span>:
   <span class="hljs-keyword">if</span> ((b)&lt;=(a)):<font></font>
      a=b-a<font></font>
      b=a</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a)==(b-a)):<font></font>
   b=b-a<font></font>
   b=b<font></font>
   a=b<font></font>
   a=b-a<font></font>
<span class="hljs-keyword">elif</span> ((b)&gt;(b-a))<span class="hljs-keyword">and</span>((a)&lt;(b-a)):
   <span class="hljs-keyword">if</span> ((b//a)&lt;(a)):<font></font>
      b=b-a<font></font>
   <span class="hljs-keyword">elif</span> ((a+b)&lt;(b-a))<span class="hljs-keyword">and</span>((b)&lt;(a+b))<span class="hljs-keyword">or</span>((a+b)==(a+b)):<font></font>
      b=b<font></font>
      a=b-a<font></font>
   <span class="hljs-keyword">elif</span> ((a)&gt;(b-a)):
      <span class="hljs-literal">None</span></code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b)&lt;=(b-a))<span class="hljs-keyword">or</span>((a+b)&gt;=(b)):<font></font>
   a=a<font></font>
   b=b<font></font>
<span class="hljs-keyword">elif</span> ((b)&lt;=(b)):
   <span class="hljs-keyword">if</span> ((a)&gt;=(b)):<font></font>
      a=a+b<font></font>
      a=b<font></font>
<span class="hljs-keyword">elif</span> ((b)&gt;=(a)):<font></font>
   a=b-a<font></font>
   a=a<font></font>
   <span class="hljs-keyword">if</span> ((a)&gt;=(b))<span class="hljs-keyword">and</span>((b//a)==(a))<span class="hljs-keyword">and</span>((b//a)!=(b)):<font></font>
      b=b-a<font></font>
<span class="hljs-keyword">else</span>:<font></font>
   a=b//a<font></font>
   <span class="hljs-keyword">if</span> ((b//a)&lt;(b-a)):<font></font>
      a=b<font></font>
      a=b-a<font></font>
   <span class="hljs-keyword">else</span>:
      <span class="hljs-keyword">if</span> ((a)==(b)):<font></font>
         a=a<font></font>
         a=b//a<font></font>
         b=b<font></font>
         b=a+b<font></font>
         b=a<font></font>
      <span class="hljs-keyword">else</span>:
         <span class="hljs-literal">None</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第三个选项从一开始就实现了递归（方案中的选项3），即 </font><font style="vertical-align: inherit;">产生以下形式的分支：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a)==(a)):
   <span class="hljs-keyword">if</span> ((a+b)&lt;(b)):</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要么 </font></font><pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b-a)&lt;=(a)):<font></font>
   a=a<font></font>
   <span class="hljs-keyword">if</span> ((b-a)==(b)):<font></font>
      a=a<font></font>
      a=a</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，形成if行（类似），然后出现一个fork，该fork决定是否进一步插入操作块，然后保存偏移量并调用递归。必须保存偏移量，以便在完成递归并返回代码段之后，可以使用if在与原始行相同的偏移量处添加另一个elif-else块。在这里，您可以看到elif和else分支如何与它们的“ native” if处于相同的偏移量。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b-a)==(b)):<font></font>
<font></font>
   <span class="hljs-keyword">if</span> ((a)&gt;(a+b)):
      <span class="hljs-keyword">if</span> ((b)==(b-a)):<font></font>
         b=b<font></font>
         a=a<font></font>
      <span class="hljs-keyword">elif</span> ((b)&gt;(b)):
         <span class="hljs-literal">None</span>
      <span class="hljs-keyword">else</span>:
         <span class="hljs-literal">None</span><font></font>
         b=a<font></font>
         b=b</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接下来是elif-else-block / action块中的fork，它决定递归后是添加action块还是elif-else块。如果决定添加一个elif-else块，则类似于上述情况，在方案2中选择elif或else。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在此有必要注意以下事实：以+3的偏移量调用递归以将生成的代码向右移动一步，而elif-else块以wall_offset的偏移量调用，以便该块在递归后不会移到右侧，而是保留为“本机”原始if的偏移量。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结果可能大不相同：从简单到复杂，但是递归的出现立即产生了最华丽的分支。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b-a)&gt;(a+b))<span class="hljs-keyword">and</span>((b)&lt;(a+b)):
   <span class="hljs-keyword">if</span> ((b-a)&lt;=(a+b)):<font></font>
      b=b//a<font></font>
   <span class="hljs-keyword">elif</span> ((b)!=(a)):<font></font>
      a=b-a<font></font>
<span class="hljs-keyword">else</span>:
   <span class="hljs-keyword">if</span> ((a+b)!=(b-a)):<font></font>
      a=a</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((b)&lt;(b-a)):
   <span class="hljs-keyword">if</span> ((a+b)==(b-a))<span class="hljs-keyword">and</span>((b-a)&lt;(a+b))<span class="hljs-keyword">and</span>((b-a)==(a))<span class="hljs-keyword">and</span>((a)&gt;(b//a))<span class="hljs-keyword">or</span>((a+b)&gt;(b//a)):
      <span class="hljs-keyword">if</span> ((b)&gt;=(b-a)):<font></font>
         a=b<font></font>
         b=b<font></font>
         <span class="hljs-keyword">if</span> ((b)&gt;(b)):<font></font>
            a=a+b<font></font>
            b=a+b<font></font>
            a=a<font></font>
            b=a+b<font></font>
            b=b//a<font></font>
            b=a<font></font>
      <span class="hljs-keyword">else</span>:<font></font>
         b=a+b<font></font>
         a=b<font></font>
         a=b<font></font>
   <span class="hljs-keyword">elif</span> ((a)&lt;(b-a)):<font></font>
      a=b//a<font></font>
      a=b-a</code></pre><br>
<pre><code class="python hljs"><span class="hljs-keyword">if</span> ((a)&gt;=(b-a))<span class="hljs-keyword">or</span>((a)&gt;=(a))<span class="hljs-keyword">or</span>((b)&lt;=(b)):<font></font>
   a=a<font></font>
   a=a<font></font>
<span class="hljs-keyword">elif</span> ((a)==(a))<span class="hljs-keyword">and</span>((b)&gt;(b-a)):<font></font>
   a=b//a<font></font>
   <span class="hljs-keyword">if</span> ((a)&lt;(b)):
      <span class="hljs-keyword">if</span> ((a+b)==(b-a)):<font></font>
         a=a<font></font>
         <span class="hljs-keyword">if</span> ((a)!=(b//a)):
            <span class="hljs-keyword">if</span> ((b//a)!=(a))<span class="hljs-keyword">and</span>((b-a)&gt;=(b)):<font></font>
               a=b<font></font>
            <span class="hljs-keyword">else</span>:
               <span class="hljs-literal">None</span><font></font>
               a=b//a<font></font>
      <span class="hljs-keyword">else</span>:<font></font>
         b=b<font></font>
         b=a+b<font></font>
         <span class="hljs-keyword">if</span> ((b-a)&lt;=(b//a)):<font></font>
            a=b<font></font>
            a=b<font></font>
            a=a+b<font></font>
<span class="hljs-keyword">else</span>:<font></font>
   a=a+b<font></font>
   <span class="hljs-keyword">if</span> ((b-a)&gt;=(a)):<font></font>
      a=b<font></font>
      <span class="hljs-keyword">if</span> ((b-a)==(a))<span class="hljs-keyword">or</span>((b)!=(b//a)):<font></font>
         a=b-a<font></font>
         a=a<font></font>
         a=a<font></font>
         a=b//a<font></font>
         a=a+b<font></font>
         b=a</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在，让我们看一下</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else_block</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">，该</font><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">负责形成elif-else块，并从主要的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数调用</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">elif_else_block</span>(<span class="hljs-params">ee_string, offset_koeff, exp_list, var_list, sign, if_str, choice_list,  fin_else_flag, prob_list</span>):</span>
    <span class="hljs-keyword">if</span> ee_string==<span class="hljs-string">'elif'</span>:<font></font>
        sol3 = <span class="hljs-number">9</span>
        <span class="hljs-comment">#  </span><font></font>
        wall_offset = offset_koeff<font></font>
        <span class="hljs-comment">#  elif  </span>
        <span class="hljs-keyword">while</span> sol3!=<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> fin_else_flag!=<span class="hljs-number">1</span>:<font></font>
            temp_str, offset_koeff, fin_else_flag, prob_list=elif_else(<span class="hljs-string">'elif'</span>, wall_offset, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
            if_str+=temp_str<font></font>
            prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol3 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-comment">#  -   else   elif?</span>
        prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol = make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])
        <span class="hljs-keyword">if</span> sol!=<span class="hljs-number">0</span>:
            <span class="hljs-comment">#  else,   </span>
            fin_else_flag=<span class="hljs-number">1</span>
            temp_str,offset_koeff, fin_else_flag, prob_list=elif_else(<span class="hljs-string">'else'</span>, wall_offset, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
            if_str+=temp_str<font></font>
        <span class="hljs-keyword">return</span>(if_str,offset_koeff, fin_else_flag, prob_list)
    <span class="hljs-comment">#  else</span>
    <span class="hljs-keyword">else</span>: <font></font>
          temp_str,offset_koeff, fin_else_flag, prob_list=elif_else(<span class="hljs-string">'else'</span>, offset_koeff, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list)<font></font>
          if_str+=temp_str<font></font>
          <span class="hljs-keyword">return</span>(if_str, offset_koeff, fin_else_flag, prob_list)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此函数决定是在代码中添加elif还是elif / else块。她没有决定是否就干脆把别的，而是取决于输入值e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e_string</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是她从main函数接收</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。首先，elif块是在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while循环中</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的</font><font style="vertical-align: inherit;">，其中检查了2个条件：概率-块中的elif数和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fin_else_flag</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><b><font style="vertical-align: inherit;">取决于它</font></b><font style="vertical-align: inherit;">，并且如果它突然打开，则意味着在此之前已连接了其他东西，因此您需要退出循环。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
是否使用else和else附加到elif块的决定是由fork使用相同的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_solution</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数决定的</font><font style="vertical-align: inherit;">，如果附加了else，则</font><b><font style="vertical-align: inherit;">立即打开fin_else_flag</font></b><font style="vertical-align: inherit;">标志</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停止块生成。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
elif和else的直接连接由</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数执行</font><font style="vertical-align: inherit;">（请参见下文）。这里需要注意的是，在生成elif块时（以及将其附加到其上时），offset </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wall_offset</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于平滑地整体构建该块。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
现在考虑</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs">&lt;b&gt;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">elif_else</span>(<span class="hljs-params">ee_string, offset_koeff, exp_list, var_list, sign, if_str, choice_list, fin_else_flag, prob_list</span>):</span>
    ee_str = <span class="hljs-string">''</span>
    <span class="hljs-comment">#   else:  elif [..]:</span>
    <span class="hljs-keyword">if</span> ee_string==<span class="hljs-string">'else'</span>:<font></font>
        ee_str += <span class="hljs-string">' '</span>*offset_koeff+ee_string + <span class="hljs-string">':\n'</span>
    <span class="hljs-keyword">elif</span> ee_string==<span class="hljs-string">'elif'</span>:<font></font>
        ee_str += <span class="hljs-string">' '</span>*offset_koeff+ee_string+<span class="hljs-string">' '</span>+if_sub(exp_list, var_list, sign, prob_list) + <span class="hljs-string">':\n'</span>
    <span class="hljs-comment">#   -None /  +</span>
    prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>],sol = make_solution(prob_list[<span class="hljs-number">2</span>],prob_list[<span class="hljs-number">3</span>])
    <span class="hljs-keyword">if</span> sol!=<span class="hljs-number">0</span>:<font></font>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol2 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-keyword">if</span> sol2!=<span class="hljs-number">0</span>:
            <span class="hljs-comment">#  </span>
            ee_str+=action_str_gen(choice_list,offset_koeff+<span class="hljs-number">3</span>, prob_list)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># None</span>
            ee_str+=<span class="hljs-string">' '</span>*(offset_koeff+<span class="hljs-number">3</span>)+<span class="hljs-string">'None\n'</span>
        <span class="hljs-keyword">return</span>(ee_str, offset_koeff, fin_else_flag, prob_list)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment">#   </span>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol2 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-keyword">if</span> sol2==<span class="hljs-number">0</span>:
            <span class="hljs-comment">#  </span>
            ee_str+=action_str_gen(choice_list,offset_koeff+<span class="hljs-number">3</span>, prob_list)
        <span class="hljs-comment">#  if_gen</span>
        if_str, offset_koeff,  fin_else_flag, prob_list = if_gen(exp_list, var_list, if_str, offset_koeff+<span class="hljs-number">3</span>, fin_else_flag, prob_list)                 <font></font>
        ee_str+=if_str<font></font>
        <span class="hljs-keyword">return</span>(ee_str, offset_koeff, fin_else_flag, prob_list)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该功能负责生成elif或其他线条本身，以及这些线条之后的后续动作或递归块。它还使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ee_string</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量</font><font style="vertical-align: inherit;">（包含elif或else），并形成相应的字符串。然后是一个分支，确定下一步将执行什么：（动作块或无），或（动作块或动作块+递归）。在此fork中，分别分为两个子叉，在每种情况下，</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都会</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用适当的参数</font><b><font style="vertical-align: inherit;">调用make_solution</font></b><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">以进行决策。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
应该注意的是，当它出现在代码中时</font></font><code>if sol!=0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这意味着我们有意使代码的一部分优于另一部分，因为如果sol！= 0，则它等于-1或1，因此，另一段代码执行的频率将降低（仅当sol == 0时）。尤其是在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else_block</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数中使用了</font><b><font style="vertical-align: inherit;">此</font></b><font style="vertical-align: inherit;">函数，在该函数中</font><font style="vertical-align: inherit;">，让我们在块中形成更多的elif而不是给elif和else相等的可能性，对我们来说更有利可图。或者，例如，在</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">elif_else</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数中</font><b><font style="vertical-align: inherit;">，</font></b><font style="vertical-align: inherit;">当形成一个动作块或None时</font><b><font style="vertical-align: inherit;">，</font></b><font style="vertical-align: inherit;">我们为该选项提供了优势，而不是递归的目的-否则分支会增长到非常不雅的大小。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们只需要考虑负责条件和动作块中表达式随机生成的函数。就像我在上面说过的，在这个阶段它们并不起决定性作用，这里介绍它们通常是为了显示最终生成的代码是什么样的。但是由于它们已在生成器中使用，因此我们将简要介绍它们。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该函数负责生成</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action_str</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动作</font><b><font style="vertical-align: inherit;">块</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">action_str_gen</span>(<span class="hljs-params">choice_list, offset_koeff, prob_list</span>):</span>
    sol = <span class="hljs-number">9</span>
    curr_offset = <span class="hljs-string">' '</span>*offset_koeff<font></font>
    act_str = <span class="hljs-string">''</span>
    <span class="hljs-keyword">while</span> sol!=<span class="hljs-number">0</span>:<font></font>
        act_str+= curr_offset+rand(rand(choice_list[<span class="hljs-number">1</span>]))+<span class="hljs-string">'='</span>+rand(rand(choice_list))+<span class="hljs-string">'\n'</span>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
    <span class="hljs-keyword">return</span>(act_str)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这里的一切都非常简单：从嵌套列表choise_list（我们记得它由v </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ar_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（变量列表）和</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exp_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（表达式列表）组成），此函数由以下形式的一行组成：a = a + b或b = b 。</font><font style="vertical-align: inherit;">那些。</font><font style="vertical-align: inherit;">一个表达式被分配给该变量，或另一个变量（包括其自身）。</font><font style="vertical-align: inherit;">rand函数从列表中随机选择一个元素，此处仅此一个元素是为了不产生可怕的字符串。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rand</span>(<span class="hljs-params">t_list</span>):</span>
    <span class="hljs-keyword">return</span>(t_list[random.randint(<span class="hljs-number">0</span>,len(t_list)<span class="hljs-number">-1</span>)])</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
条件的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_sub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式生成函数</font><font style="vertical-align: inherit;">看起来更大。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">if_sub</span>(<span class="hljs-params">exp_list, var_list, sign, prob_list</span>):</span>
    sub_str = <span class="hljs-string">''</span>
    sol = <span class="hljs-number">9</span><font></font>
    choice_list = [exp_list, var_list]<font></font>
    flag = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> sol!=<span class="hljs-number">0</span>:<font></font>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])<font></font>
        sub_str+=<span class="hljs-string">'(('</span>+rand(rand(choice_list))+<span class="hljs-string">')'</span>+rand(sign2)+<span class="hljs-string">'('</span>+rand(rand(choice_list))+<span class="hljs-string">'))'</span>
        <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> sol==<span class="hljs-number">1</span>:<font></font>
            sub_str+=<span class="hljs-string">')'</span>
            flag=<span class="hljs-number">0</span><font></font>
        or_and_exp = or_and(prob_list)<font></font>
        <span class="hljs-keyword">if</span> len(or_and_exp):<font></font>
            sub_str+=or_and_exp<font></font>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">break</span>
        prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>],sol2 = make_solution(prob_list[<span class="hljs-number">6</span>],prob_list[<span class="hljs-number">7</span>])
        <span class="hljs-keyword">if</span> sol2 == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> (sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'D'</span> <span class="hljs-keyword">or</span> sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'R'</span>) <span class="hljs-keyword">and</span> flag == <span class="hljs-number">0</span>:<font></font>
            sub_str+=<span class="hljs-string">'('</span>
            flag = <span class="hljs-number">1</span><font></font>
    <font></font>
    <span class="hljs-keyword">if</span> sub_str[<span class="hljs-number">-1</span>] == <span class="hljs-string">'('</span>:
        <span class="hljs-keyword">if</span> sub_str[<span class="hljs-number">-2</span>]==<span class="hljs-string">'d'</span>:<font></font>
           sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-4</span>]
        <span class="hljs-keyword">elif</span> sub_str[<span class="hljs-number">-2</span>]==<span class="hljs-string">'r'</span>:<font></font>
             sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-3</span>]
        <span class="hljs-keyword">else</span>:<font></font>
            sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-1</span>]
    <span class="hljs-keyword">elif</span> sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'d'</span>:<font></font>
         sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-3</span>]
    <span class="hljs-keyword">elif</span> sub_str[<span class="hljs-number">-1</span>]==<span class="hljs-string">'r'</span>:<font></font>
         sub_str=sub_str[<span class="hljs-number">0</span>:<span class="hljs-number">-2</span>]
    <span class="hljs-keyword">else</span>:
         <span class="hljs-literal">None</span>
    <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span>:<font></font>
        sub_str+=<span class="hljs-string">')'</span>
        <span class="hljs-keyword">return</span>(sub_str)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span>(sub_str)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
它按类型生成表达式：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（（a）&gt; =（ba））或（（a）&gt; =（a））或（（b）&lt;=（b））</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同时，左侧和右侧都可以具有各种选项，并且可以作为单独的变量以及表达式或其组。</font><font style="vertical-align: inherit;">此处也使用逻辑运算符</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，为方便起见使用</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or_and_exp</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数选择</font><b><font style="vertical-align: inherit;">它们</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">or_and</span>(<span class="hljs-params">prob_list</span>):</span>
    prob_list[<span class="hljs-number">8</span>],prob_list[<span class="hljs-number">9</span>],sol = make_solution(prob_list[<span class="hljs-number">8</span>],prob_list[<span class="hljs-number">9</span>])
    <span class="hljs-keyword">if</span> sol==<span class="hljs-number">-1</span>:
        <span class="hljs-keyword">return</span>(<span class="hljs-string">'and'</span>)
    <span class="hljs-keyword">elif</span> sol==<span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span>(<span class="hljs-string">'or'</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span>(<span class="hljs-string">''</span>)</code></pre><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_sub</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
函数的其余部分</font><font style="vertical-align: inherit;">切断了表达式的多余</font><font style="vertical-align: inherit;">部分，</font><font style="vertical-align: inherit;">并在必要时添加</font><font style="vertical-align: inherit;">了</font><b><font style="vertical-align: inherit;">右</font></b><font style="vertical-align: inherit;">括号-我认为在此处考虑这些带有铃鼓的舞蹈是不方便的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
好，仅此而已。</font><font style="vertical-align: inherit;">例如，您可以启动生成器，如下所示：</font></font><br>
<br>
<pre><code class="python hljs">var_list = [<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>]<font></font>
exp_list = [<span class="hljs-string">'a+b'</span>,<span class="hljs-string">'b-a'</span>, <span class="hljs-string">'b//a'</span>]<font></font>
sign = [<span class="hljs-string">'+'</span>,<span class="hljs-string">'-'</span>,<span class="hljs-string">'/'</span>,<span class="hljs-string">'*'</span>,<span class="hljs-string">'//'</span>]<font></font>
sign2 = [<span class="hljs-string">'&gt;'</span>,<span class="hljs-string">'&lt;'</span>,<span class="hljs-string">'=='</span>,<span class="hljs-string">'&gt;='</span>,<span class="hljs-string">'&lt;='</span>,<span class="hljs-string">'!='</span>]<font></font>
a = <span class="hljs-number">3</span>
b = <span class="hljs-number">2</span>       
prob_list = [<span class="hljs-number">0.5</span> <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>)]      
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<font></font>
     if_str = <span class="hljs-string">''</span>
     if_str, offset_koeff, fin_else_flag, prob_list = if_gen(exp_list, var_list, if_str, <span class="hljs-number">0</span>,<span class="hljs-number">0</span>, prob_list)
     <span class="hljs-keyword">try</span>:<font></font>
         exec(compile(if_str,<span class="hljs-string">'gen'</span>,<span class="hljs-string">'exec'</span>))<font></font>
         print(if_str)<font></font>
         input()<font></font>
         <font></font>
     <span class="hljs-keyword">except</span> ZeroDivisionError:
         <span class="hljs-literal">None</span>
     <span class="hljs-keyword">except</span>:<font></font>
         print(<span class="hljs-string">'error'</span>)<font></font>
         print(if_str)<font></font>
         input()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，输入包含一个带有probabilities的</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">prob_list</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后在一个无限循环中，调用主函数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if_gen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并启动生成的生成字符串以供执行。值得单独处理ZeroDivisionError，因为用表达式的这种随机构造将其除以零是很常见的。启动后，只需按Enter键即可显示下一代。大多数情况下，它们将非常简单，但是经常分支，甚至非常分支。好了，</font><font style="vertical-align: inherit;">在开始时</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导入random</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也会很不错；）对于那些不想手工收集所有内容的人，可以从</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载文件</font><font style="vertical-align: inherit;">（文件if_gen.py）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
总之，我想说的是，我介绍的代码已经经过数十万代的测试，没有错误，同时它展示了我最终想要看到的if-elif-else方案的整个调色板。一次，由于错误，我给了代码的一部分递归的可能性太高了，我得到了52,000（！）代，并且行了（尽管comp被暂停了30秒）。这也表明算法的可靠性。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可能可以在某个地方更简洁地编写代码，在某个地方进行优化，以另一种方式编写主要功能，但是主要的是，该代码可以工作并每秒产生约250代，我认为这是可以接受的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我从来没有认为此代码可以自给自足-它只是未来数字有机体的模块，是为研究目的而编写的，因此几乎没有任何实际应用。</font><font style="vertical-align: inherit;">同时，对于使用上述代码的任何人造成的任何后果，我概不负责。我敦促所有人用刀切面包而不是其他东西。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在下一篇文章中，我们将考虑第二个模块，它将负责经验的随机形成。</font><font style="vertical-align: inherit;">这个主题有望比if生成器有趣得多，并且我一定会在发布后立即发布结果。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN504270/index.html">Svelte是小部件实现的不错选择吗？</a></li>
<li><a href="../zh-CN504276/index.html">十大开发人员书籍</a></li>
<li><a href="../zh-CN504282/index.html">在NSPK中创建企业架构</a></li>
<li><a href="../zh-CN504284/index.html">《纯粹的敏捷》一书。灵活性的基础</a></li>
<li><a href="../zh-CN504290/index.html">将开发人员作为CI服务进行负载测试</a></li>
<li><a href="../zh-CN504306/index.html">如何在Elbrus上制造用于存储Aerodisk Vostok的俄罗斯硬件</a></li>
<li><a href="../zh-CN504310/index.html">数据二分法：重新考虑与数据和服务的关系</a></li>
<li><a href="../zh-CN504312/index.html">俄语程序和GPL的统一注册。我的五分钱</a></li>
<li><a href="../zh-CN504314/index.html">通过HTTP请求在没有docker client的情况下实现docker pull和docker push命令</a></li>
<li><a href="../zh-CN504320/index.html">使用Linux的PVS-Studio C＃进行单行代码或Nethermind验证</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>