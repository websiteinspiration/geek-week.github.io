<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ™Ô∏è üê≠ üë®üèæ‚Äçü§ù‚Äçüë®üèº Por que voc√™ n√£o deve usar o WireGuard üìª üßíüèΩ üî≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, o WireGuard atrai muita aten√ß√£o, de fato - essa √© uma nova "estrela" entre as VPNs. Mas ele √© t√£o bom quanto parece? Gostaria de discuti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Por que voc√™ n√£o deve usar o WireGuard</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dcmiran/blog/492888/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recentemente, o WireGuard atrai muita aten√ß√£o, de fato - essa √© uma nova "estrela" entre as VPNs. Mas ele √© t√£o bom quanto parece? Gostaria de discutir algumas observa√ß√µes e considerar a implementa√ß√£o do WireGuard para explicar por que n√£o √© uma solu√ß√£o que substituir√° o IPsec ou o OpenVPN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neste artigo, gostaria de desmascarar alguns mitos [em torno do WireGuard]. Sim, levar√° muito tempo para ler; portanto, se voc√™ n√£o fez uma x√≠cara de ch√° ou caf√©, √© hora de faz√™-lo. Tamb√©m gostaria de agradecer a Peter por revisar meus pensamentos ca√≥ticos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o tenho como objetivo desacreditar os desenvolvedores do WireGuard, desvalorizar seus esfor√ßos ou id√©ias. O produto deles √© funcional, mas pessoalmente acho que √© apresentado completamente diferente do que realmente √© - √© apresentado como um substituto para o IPsec e o OpenVPN, que na realidade agora simplesmente n√£o existe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como observa√ß√£o, quero acrescentar que a responsabilidade por esse posicionamento do WireGuard √© da m√≠dia que falou sobre ele, e n√£o do projeto em si ou de seus criadores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ultimamente, n√£o h√° muitas boas not√≠cias sobre o t√≥pico do kernel do Linux. </font><font style="vertical-align: inherit;">Ent√£o, fomos informados sobre as vulnerabilidades monstruosas do processador, que foram niveladas por software, e Linus Torvalds falou sobre isso uma linguagem utilit√°ria e muito rude e chata do desenvolvedor. </font><font style="vertical-align: inherit;">O agendador ou a pilha da rede est√£o em n√≠vel zero - tamb√©m n√£o s√£o t√≥picos muito claros para revistas brilhantes. </font><font style="vertical-align: inherit;">E ent√£o o WireGuard aparece. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo parece √≥timo no papel: uma nova e empolgante tecnologia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas vamos olhar para ela com um pouco mais de cuidado.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documenta√ß√£o t√©cnica do WireGuard</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este artigo √© baseado na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documenta√ß√£o oficial do WireGuard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> escrita por Jason Donenfeld. </font><font style="vertical-align: inherit;">L√°, ele explica o conceito, objetivo e implementa√ß√£o t√©cnica do [WireGuard] no kernel do Linux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira frase diz:</font></font><br>
<br>
<blockquote>WireGuard [...]    IPsec     ,         / TLS,   OpenVPN,     ,      []. </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, a principal vantagem de todas as novas tecnologias √© sua </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simplicidade</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [em compara√ß√£o com seus antecessores]. </font><font style="vertical-align: inherit;">Mas uma VPN tamb√©m deve ser </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eficiente e segura</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, o que vem a seguir? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ disser que voc√™ [da VPN] n√£o precisa disso, poder√° terminar a leitura. </font><font style="vertical-align: inherit;">No entanto, observarei que essas tarefas s√£o colocadas antes de qualquer outra tecnologia de encapsulamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A mais interessante das cita√ß√µes acima est√° nas palavras "na maioria dos casos", que, √© claro, foram ignoradas pela imprensa. </font><font style="vertical-align: inherit;">E aqui estamos, onde acabamos por causa do caos criado por essa neglig√™ncia - neste artigo.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6a/6i/mh/6a6imhnuzbtscbkm7rdwladwddm.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WireGuard substituir√° minha conex√£o VPN [IPsec] entre sites?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o. </font><font style="vertical-align: inherit;">Simplesmente n√£o h√° chance de grandes fornecedores como Cisco, Juniper e outros comprarem o WireGuard para seus produtos. </font><font style="vertical-align: inherit;">Eles n√£o ‚Äúpulam trens passados‚Äù em movimento, a menos que haja uma grande necessidade disso. </font><font style="vertical-align: inherit;">Mais tarde, falarei sobre algumas das raz√µes pelas quais eles provavelmente n√£o seriam capazes de instalar os produtos WireGuard a bordo, mesmo que quisessem.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WireGuard transferir√° meu RoadWarrior de um laptop para um data center?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o. O WireGuard n√£o implementou um grande n√∫mero de fun√ß√µes importantes no momento para poder fazer algo assim. Por exemplo, ele n√£o pode usar o endere√ßo IP din√¢mico no lado do servidor do t√∫nel, e isso sozinho quebra todo o cen√°rio de um uso semelhante do produto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O IPFire √© frequentemente usado para canais da Internet de baixo custo, como DSL ou conex√£o a cabo. Isso faz sentido para uma empresa de pequeno ou m√©dio porte que n√£o precisa de fibra r√°pida.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[Nota do tradutor: n√£o esque√ßa que, em termos de comunica√ß√£o, a R√∫ssia e alguns pa√≠ses da CEI est√£o muito √† frente da Europa e dos Estados Unidos, porque come√ßamos a construir nossas redes muito mais tarde e com o advento das redes Ethernet e de fibra √≥tica como padr√£o, foi mais f√°cil reconstruir. Nos mesmos pa√≠ses da UE ou nos EUA, o acesso de banda larga xDSL a uma velocidade de 3-5 Mbps ainda √© a norma universal, e a conex√£o de fibra √≥ptica custa algum dinheiro irrealista para nossos padr√µes. Portanto, o autor do artigo fala da conex√£o DSL ou a cabo como normal, e n√£o do passado antigo.]</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No entanto, DSL, cabo, LTE (e outros m√©todos de acesso sem fio) t√™m endere√ßos IP din√¢micos. Obviamente, √†s vezes eles n√£o mudam frequentemente, mas ainda mudam. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existe um subprojeto chamado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"wg-dynamic"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O daemon de espa√ßo do usu√°rio √© adicionado para superar essa falha. </font><font style="vertical-align: inherit;">Um grande problema com o cen√°rio do usu√°rio descrito acima √© o agravamento da situa√ß√£o pelo endere√ßamento IPv6 din√¢mico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do ponto de vista do distribuidor, tudo isso tamb√©m n√£o parece muito bom. </font><font style="vertical-align: inherit;">Um dos objetivos do projeto era manter o protocolo simples e limpo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, tudo isso se tornou muito simples e primitivo, por isso precisamos usar software adicional para viabilizar todo esse design em condi√ß√µes da vida real.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WireGuard √© t√£o f√°cil de usar?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainda n√£o. N√£o estou dizendo que o WireGuard nunca ser√° uma boa alternativa para encaminhar um t√∫nel entre dois pontos, mas at√© agora √© apenas uma vers√£o alfa do produto que deve se tornar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas ent√£o o que ele realmente faz? O IPsec √© realmente muito mais dif√≠cil de operar? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente n√£o. O provedor IPsec considerou esse ponto e est√° entregando seu produto junto com uma interface como IPFire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para configurar um t√∫nel VPN atrav√©s do IPsec, voc√™ precisar√° de cinco conjuntos de dados que ser√£o necess√°rios para entrar na configura√ß√£o: seu pr√≥prio endere√ßo IP p√∫blico, o endere√ßo IP p√∫blico do lado receptor, sub-redes que voc√™ deseja tornar p√∫blico por meio dessa conex√£o VPN e pr√©-compartilhado chave. Assim, a VPN √© configurada em alguns minutos e √© compat√≠vel com qualquer fornecedor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, existem algumas exce√ß√µes nesta hist√≥ria. </font><font style="vertical-align: inherit;">Todo mundo que tentou encaminhar um t√∫nel VPN atrav√©s do IPsec para uma m√°quina no OpenBSD entende do que estou falando. </font><font style="vertical-align: inherit;">Existem alguns exemplos mais dolorosos, mas, na verdade, a boa pr√°tica de usar IPsec √© muito, muito mais.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre a complexidade do protocolo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O usu√°rio final n√£o precisa se preocupar com a complexidade do protocolo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se viv√™ssemos em um mundo em que essa era a verdadeira preocupa√ß√£o do usu√°rio, ter√≠amos nos livrado h√° muito tempo do SIP, H.323, FTP e outros protocolos criados h√° mais de dez anos que n√£o funcionam bem com o NAT. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existem raz√µes pelas quais o IPsec √© mais complicado que o WireGuard: ele faz muito mais. Por exemplo, autentica√ß√£o do usu√°rio usando um login / senha ou cart√£o SIM com EAP. Possui a capacidade expandida de adicionar novas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">primitivas criptogr√°ficas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o WireGuard n√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E isso significa que o WireGuard ir√° quebrar em algum momento, porque uma das primitivas criptogr√°ficas se enfraquecer√° ou ser√° completamente comprometida. O autor da documenta√ß√£o t√©cnica diz o seguinte:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vale notar que o WireGuard √© criptograficamente autoconfiante. </font><font style="vertical-align: inherit;">Ele intencionalmente carece da flexibilidade de cifras e protocolos. </font><font style="vertical-align: inherit;">Se furos s√©rios forem encontrados nas primitivas subjacentes, todos os pontos de extremidade precisar√£o ser atualizados. </font><font style="vertical-align: inherit;">Como voc√™ pode ver no fluxo cont√≠nuo de vulnerabilidades de SLL / TLS, a flexibilidade de criptografia agora aumentou tremendamente.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A √∫ltima frase √© absolutamente verdadeira. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Construir consenso sobre qual criptografia usar torna protocolos como IKE e TLS </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> complexos. </font><font style="vertical-align: inherit;">Muito complicado? </font><font style="vertical-align: inherit;">Sim, as vulnerabilidades s√£o bastante comuns no TLS / SSL e n√£o h√° alternativa para elas.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre como ignorar problemas reais</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine que voc√™ tem um servidor VPN com 200 clientes de combate, em algum lugar do mundo. Este √© um caso de uso muito padr√£o. Se voc√™ precisar alterar a criptografia, precisar√° entregar a atualiza√ß√£o para todas as c√≥pias do WireGuard nesses laptops, smartphones e assim por diante. </font><font style="vertical-align: inherit;">Entregue ao </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mesmo tempo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . √â literalmente imposs√≠vel. Os administradores que tentarem fazer isso levar√£o meses para implantar as configura√ß√µes necess√°rias, e as empresas de m√©dio porte levar√£o literalmente anos para sediar esse evento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
IPsec e OpenVPN oferecem negocia√ß√£o de criptografia. Portanto, algum tempo ap√≥s o qual voc√™ habilitar a nova criptografia, a antiga funcionar√°. Gra√ßas a isso, os clientes atuais poder√£o atualizar para a nova vers√£o. Depois que a atualiza√ß√£o √© lan√ßada, voc√™ simplesmente desativa a criptografia vulner√°vel. E isso √© tudo! Feito! voc√™ √© maravilhosa! E os clientes nem perceber√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este √© realmente um caso muito comum para grandes implanta√ß√µes, e at√© o OpenVPN tem algumas dificuldades. A compatibilidade com vers√µes anteriores √© importante e, embora voc√™ use criptografia mais fraca, para muitos isso n√£o causa o fechamento dos neg√≥cios. Porque isso levar√° √† paralisia de centenas de clientes devido √† incapacidade de fazer seu trabalho.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A equipe do WireGuard tornou seu protocolo mais simples, mas completamente inadequado para pessoas que n√£o t√™m controle constante sobre os dois pares do t√∫nel. </font><font style="vertical-align: inherit;">Na minha experi√™ncia, este √© o cen√°rio mais comum.</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/xz/8g/un/xz8gunpa9bqpa5viwsssog6fbv0.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criptografia!</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas qual √© essa nova criptografia interessante que o WireGuard usa?</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WireGuard usa Curve25519 para troca de chaves, ChaCha20 para criptografia e Poly1305 para autentica√ß√£o de dados. </font><font style="vertical-align: inherit;">Tamb√©m funciona com o SipHash para chaves de hash e o BLAKE2 para hash.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O ChaCha20-Poly1305 √© padronizado para IPsec e OpenVPN (via TLS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, o desenvolvimento de Daniel Bernstein √© usado com muita frequ√™ncia. O BLAKE2 √© o sucessor do BLAKE, o finalista do SHA-3 que n√£o venceu devido √† sua semelhan√ßa com o SHA-2. Se o SHA-2 fosse hackeado, havia uma alta probabilidade de o BLAKE ser comprometido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O IPsec e o OpenVPN n√£o precisam do SipHash devido ao seu design. Portanto, a √∫nica coisa que n√£o pode ser usada com eles no momento √© o BLAKE2, e somente at√© que seja padronizado. Isso n√£o √© uma grande desvantagem, porque as VPNs usam o HMAC para criar integridade, que √© considerada uma solu√ß√£o forte mesmo em conjunto com o MD5.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, cheguei √† conclus√£o de que todas as VPNs usam quase o mesmo conjunto de ferramentas criptogr√°ficas. </font><font style="vertical-align: inherit;">Portanto, o WireGuard n√£o √© mais nem menos seguro do que qualquer outro produto relevante quando se trata de criptografia ou integridade de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas mesmo isso n√£o √© a coisa mais importante que voc√™ deve prestar aten√ß√£o, de acordo com a documenta√ß√£o oficial do projeto. </font><font style="vertical-align: inherit;">Afinal, o principal √© a velocidade.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WireGuard √© mais r√°pido que outras solu√ß√µes VPN?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em resumo: n√£o, n√£o √© mais r√°pido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ChaCha20 √© uma cifra de fluxo mais f√°cil de implementar em software. Criptografa um bit de cada vez. Protocolos de bloco, como o AES, criptografam um bloco de 128 bits por vez. Para implementar o suporte a hardware, ser√£o necess√°rios muito mais transistores; portanto, processadores maiores v√™m com o AES-NI, uma extens√£o do conjunto de instru√ß√µes que executa algumas tarefas do processo de criptografia para aceler√°-lo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Era esperado que a AES-NI nunca chegasse a smartphones [e bateu, - aprox. trans.]. Para isso, o ChaCha20 foi desenvolvido - como uma alternativa f√°cil e econ√¥mica que economiza energia da bateria. Portanto, pode ser novidade para voc√™ que todo smartphone que voc√™ pode comprar hoje possui uma ou outra acelera√ß√£o para o AES e trabalha com essa criptografia mais rapidamente e com menos consumo de energia do que com o ChaCha20. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, quase todos os processadores de desktop / servidor adquiridos nos √∫ltimos dois anos t√™m AES-NI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, espero que a AES ultrapasse o ChaCha20 em todos os cen√°rios. Na documenta√ß√£o oficial do WireGuard, √© mencionado que, gra√ßas ao AVX512, o ChaCha20-Poly1305 ultrapassar√° o AES-NI, mas essa extens√£o do conjunto de comandos estar√° dispon√≠vel apenas em processadores grandes, o que novamente n√£o ajudar√° em equipamentos m√≥veis e menores que sempre trabalhar√£o mais rapidamente com o AES- NI. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o tenho certeza se isso poderia ter sido previsto durante o desenvolvimento do WireGuard, mas hoje o fato de ele estar pregado em uma criptografia j√° √© uma desvantagem que pode n√£o afetar muito o seu trabalho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O IPsec permite escolher livremente qual criptografia √© melhor para o seu aplicativo. E, claro, isso √© necess√°rio se, por exemplo, voc√™ deseja transferir 10 ou mais gigabytes de dados por meio de uma conex√£o VPN.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Problemas de integra√ß√£o do Linux</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Embora o WireGuard tenha escolhido um protocolo de criptografia moderno, isso j√° est√° causando muitos problemas. </font><font style="vertical-align: inherit;">E assim, em vez de usar o que √© suportado pelo kernel imediatamente, a integra√ß√£o do WireGuard foi adiada por anos devido √† falta dessas primitivas no Linux. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o estou totalmente ciente da situa√ß√£o em outros sistemas operacionais, mas provavelmente n√£o √© muito diferente da situa√ß√£o com o Linux.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como √© a realidade?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Infelizmente, toda vez que um cliente me pede para configurar uma conex√£o VPN para ele, me deparo com o t√≥pico de que eles usam credenciais e criptografia desatualizadas. O 3DES em conjunto com o MD5 ainda √© uma pr√°tica comum, assim como o AES-256 e o ‚Äã‚ÄãSHA1. E embora o √∫ltimo seja um pouco melhor - isso n√£o √© algo que deve ser usado em 2020. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para troca de chaves </font><font style="vertical-align: inherit;">, o RSA √© </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sempre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> usado - uma ferramenta lenta, mas bastante segura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meus clientes est√£o conectados com autoridades alfandeg√°rias e outras organiza√ß√µes e institui√ß√µes estatais, bem como com grandes corpora√ß√µes, cujos nomes s√£o conhecidos em todo o mundo. Todos eles usam um formul√°rio de solicita√ß√£o criado d√©cadas atr√°s, e a capacidade de usar o SHA-512 simplesmente nunca foi adicionada. N√£o posso dizer que isso de alguma forma afete claramente o progresso tecnol√≥gico, mas, obviamente, retarda o processo corporativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D√≥i-me ver isso, porque o IPsec suporta curvas el√≠pticas fora da curva desde o ano de 2005. O Curve25519 tamb√©m √© mais novo e mais acess√≠vel. Ainda existem alternativas ao AES, como Camellia e ChaCha20, mas, obviamente, nem todos eles s√£o suportados por grandes fornecedores, como Cisco e outros.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E as pessoas usam isso. </font><font style="vertical-align: inherit;">Existem muitos kits da Cisco, existem muitos kits projetados para funcionar com a Cisco. </font><font style="vertical-align: inherit;">Eles s√£o l√≠deres de mercado nesse segmento e n√£o est√£o muito interessados ‚Äã‚Äãem nenhuma inova√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, a situa√ß√£o [no segmento corporativo] √© terr√≠vel, mas n√£o veremos altera√ß√µes devido ao WireGuard. </font><font style="vertical-align: inherit;">√â prov√°vel que os fabricantes nunca identifiquem nenhum problema de desempenho com as ferramentas e a criptografia j√° em uso, eles n√£o ver√£o problemas ao usar o IKEv2 - e, portanto, n√£o est√£o procurando alternativas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em geral, voc√™ j√° pensou em abandonar a Cisco?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benchmarks</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos passar para os benchmarks da documenta√ß√£o do WireGuard. Embora essa [documenta√ß√£o] n√£o seja um artigo cient√≠fico, eu ainda esperava que os desenvolvedores adotassem uma abordagem mais cient√≠fica ou usassem uma abordagem cient√≠fica como refer√™ncia. Quaisquer benchmarks s√£o in√∫teis se n√£o puderem ser reproduzidos e, mais ainda, s√£o in√∫teis quando obtidos em laborat√≥rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na vers√£o do WireGuard para Linux, ele tira proveito do GSO - Generic Segmentation Offloading. Gra√ßas a ele, o cliente cria um pacote enorme de tamanho de 64 kilobytes e o criptografa / descriptografa em uma √∫nica abordagem. Assim, o custo de chamar e implementar opera√ß√µes criptogr√°ficas √© reduzido. Se voc√™ deseja maximizar a largura de banda da sua conex√£o VPN, √© uma boa ideia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas, como sempre, na realidade n√£o √© t√£o simples. O envio de um pacote t√£o grande para um adaptador de rede exige que ele seja dividido em muitos pacotes menores. O tamanho t√≠pico de envio √© de 1.500 bytes. Ou seja, nossos 64 kilobytes gigantes ser√£o divididos em 45 pacotes (1240 bytes de informa√ß√£o e 20 bytes de cabe√ßalho IP). Por um tempo, eles bloqueiam completamente a opera√ß√£o do adaptador de rede, porque devem ser enviados juntos e imediatamente. Como resultado, isso levar√° a um salto de prioridade e pacotes como, por exemplo, VoIP, ser√£o enfileirados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim, a alta taxa de transfer√™ncia, que o WireGuard afirma com tanta ousadia, √© alcan√ßada diminuindo a velocidade da opera√ß√£o de rede de outros aplicativos. E a equipe do WireGuard j√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confirmou</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> esta conclus√£o minha.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas vamos seguir em frente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acordo com os par√¢metros de refer√™ncia na documenta√ß√£o t√©cnica, a conex√£o mostra uma largura de banda de 1011 Mbit / s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Impressionante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso √© especialmente impressionante porque a largura de banda m√°xima te√≥rica de uma conex√£o Ethernet de gigabit √© 966 Mbps com um tamanho de pacote de 1.500 bytes menos 20 bytes por cabe√ßalho IP, 8 bytes por cabe√ßalho UDP e 16 bytes por cabe√ßalho de fio. . H√° outro cabe√ßalho IP no pacote encapsulado e outro no TCP de 20 bytes. Ent√£o, de onde veio essa largura de banda extra?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com os enormes quadros e vantagens do GSO, sobre os quais falamos acima, o m√°ximo te√≥rico com um tamanho de quadro de 9000 bytes ser√° 1014 Mbit / s. Geralmente, esse rendimento √© inating√≠vel na realidade, porque est√° associado a grandes dificuldades. Portanto, posso apenas assumir que o teste foi realizado usando quadros ainda mais ousados, excedendo o tamanho de 64 kilobytes com um m√°ximo te√≥rico de 1023 Mbps, suportado apenas por alguns adaptadores de rede. Mas isso n√£o √© absolutamente aplic√°vel em condi√ß√µes reais ou pode ser usado apenas entre duas esta√ß√µes conectadas diretamente uma √† outra, exclusivamente dentro do banco de ensaio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por√©m, como o t√∫nel da VPN √© encaminhado entre dois hosts usando uma conex√£o √† Internet que n√£o suporta quadros grandes, o resultado alcan√ßado no estande n√£o pode ser tomado como padr√£o. </font><font style="vertical-align: inherit;">Isso √© simplesmente uma conquista irrealista de laborat√≥rio, imposs√≠vel e n√£o aplic√°vel em condi√ß√µes reais de combate. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mesmo sentado no data center, eu n√£o seria capaz de transferir quadros maiores que 9000 bytes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O crit√©rio de aplicabilidade na vida real √© completamente violado e, como penso, o autor da "medida" se desacreditou seriamente por raz√µes √≥bvias.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/po/ra/2b/pora2bzrbixbty-gnnngbffbc-i.png"><br>
 <br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O √∫ltimo vislumbre de esperan√ßa</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O site da WireGuard fala muito sobre cont√™ineres e fica claro para o que realmente se destina. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma VPN simples e r√°pida que n√£o requer configura√ß√£o e pode ser implantada e configurada com ferramentas de orquestra√ß√£o massivas, como a Amazon em sua nuvem. Especificamente, a Amazon usa os recursos de hardware mais recentes que mencionei anteriormente, por exemplo - AVX512. Isso √© feito para acelerar o trabalho e n√£o estar vinculado ao x86 ou a qualquer outra arquitetura.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eles otimizam a largura de banda e os pacotes cujo tamanho excede 9000 bytes - isso resultar√° em enormes quadros encapsulados para a comunica√ß√£o de cont√™ineres entre si ou para opera√ß√µes de backup, criando instant√¢neos ou implementando esses cont√™ineres. </font><font style="vertical-align: inherit;">Mesmo endere√ßos IP din√¢micos n√£o afetar√£o a opera√ß√£o do WireGuard no caso do cen√°rio que descrevi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o √© ruim jogado. </font><font style="vertical-align: inherit;">Implementa√ß√£o brilhante e um protocolo muito fino, quase de refer√™ncia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas isso simplesmente n√£o √© adequado para o mundo fora do data center que voc√™ controla completamente. </font><font style="vertical-align: inherit;">Se voc√™ correr o risco e come√ßar a usar o WireGuard, ter√° que fazer compromissos constantes no desenvolvimento e na implementa√ß√£o do protocolo de criptografia.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√â f√°cil concluir que o WireGuard ainda n√£o est√° pronto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Foi concebida como uma solu√ß√£o leve e r√°pida para v√°rios problemas com as solu√ß√µes existentes. Infelizmente, por causa dessas solu√ß√µes, ele sacrificou muitos recursos que ser√£o relevantes para a maioria dos usu√°rios. √â por isso que n√£o pode substituir o IPsec ou o OpenVPN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o WireGuard se torne competitivo, ele precisa adicionar pelo menos a configura√ß√£o do endere√ßo IP e a configura√ß√£o de roteamento e DNS. Obviamente, √© para isso que os canais criptografados s√£o necess√°rios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A seguran√ßa √© minha principal prioridade e, no momento, n√£o tenho motivos para acreditar que o IKE ou TLS esteja de alguma forma comprometido ou quebrado. A criptografia moderna √© suportada em ambos, e eles foram testados por d√©cadas de opera√ß√£o. Se algo mais novo n√£o significa que √© algo, √© melhor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A interoperabilidade √© crucial quando voc√™ entra em contato com terceiros cujas esta√ß√µes voc√™ n√£o controla. </font><font style="vertical-align: inherit;">IPsec √© o padr√£o de fato e √© suportado quase universalmente. </font><font style="vertical-align: inherit;">E isso funciona. </font><font style="vertical-align: inherit;">E, independentemente da apar√™ncia, em teoria, o WireGuard no futuro pode n√£o ser compat√≠vel, mesmo com vers√µes diferentes de si mesmo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qualquer prote√ß√£o criptogr√°fica √© invadida mais cedo ou mais tarde e, portanto, deve ser substitu√≠da ou atualizada. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Negar todos esses fatos e querer cegamente usar o WireGuard para conectar seu iPhone √† esta√ß√£o de trabalho em casa √© apenas uma oficina sobre enfiar a cabe√ßa na areia.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt492874/index.html">Otimiza√ß√£o de renderiza√ß√£o para celular</a></li>
<li><a href="../pt492878/index.html">Chinelos geek: procurando resultados positivos em fechamentos tempor√°rios de escrit√≥rios</a></li>
<li><a href="../pt492880/index.html">O que devemos construir uma casa inteligente?</a></li>
<li><a href="../pt492884/index.html">Recebendo mensagens de transmiss√µes do youtube + autoriza√ß√£o do google em PHP</a></li>
<li><a href="../pt492886/index.html">Receita de testadores de recrutamento em massa</a></li>
<li><a href="../pt492894/index.html">Como n√£o perder todo o dinheiro em alguns minutos ou gerenciamento de riscos em negocia√ß√µes algor√≠tmicas</a></li>
<li><a href="../pt492900/index.html">Gerador de m√∫sica API de √°udio da Web Experi√™ncia para iniciantes</a></li>
<li><a href="../pt492906/index.html">Como diferentes tipos de MBTI respondem ao estresse</a></li>
<li><a href="../pt492908/index.html">Como solicitar uma transfer√™ncia tempor√°ria para trabalho remoto</a></li>
<li><a href="../pt492910/index.html">Controle de motor de passo via controlador Canny</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>