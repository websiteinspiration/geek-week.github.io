<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⏯️ ♏️ 👨‍✈️ Navegación entre vistas usando @EnvironmentObject en SwiftUI 👨‍👨‍👦‍👦 💂 ⛅️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La traducción del artículo fue preparada en la víspera del lanzamiento del curso avanzado "Desarrollador iOS" .
 
 
 
 Hola y bienvenidos a nuestro tu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Navegación entre vistas usando @EnvironmentObject en SwiftUI</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/501378/"><b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La traducción del artículo fue preparada en la víspera del lanzamiento del curso avanzado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Desarrollador iOS"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></i></b><br>
<br>
<img src="https://habrastorage.org/webt/dy/nh/af/dynhaf1v_qvyw2xcskvtvn3aesa.png"><br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hola y bienvenidos a nuestro tutorial! </font><font style="vertical-align: inherit;">En esta serie, hablamos sobre cómo navegar entre vistas en SwiftUI (¡sin usar una vista de navegación!). </font><font style="vertical-align: inherit;">Aunque esta idea puede parecer trivial, pero después de comprenderla un poco más, podemos aprender mucho sobre los conceptos de flujo de datos utilizados en SwiftUI. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la parte anterior,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aprendimos cómo implementar esto usando </font></font><code>@ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En esta parte, veremos cómo hacer lo mismo, pero de manera más eficiente usando @EnvironmentObject. </font><font style="vertical-align: inherit;">También vamos a agregar una pequeña animación de transición. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es lo que vamos a lograr:</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Su navegador no admite video HTML5.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatinP2Preview.mp4" type="video/mp4"></video></div></div></div><a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que tenemos</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entonces, acabamos de descubrir</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cómo navegar entre diferentes vistas usando ObservableObject. </font><font style="vertical-align: inherit;">En pocas palabras, creamos un ViewRouter y lo asociamos con la Vista Madre y nuestra Vista de Contenido. </font><font style="vertical-align: inherit;">Luego, simplemente manipulamos la propiedad CurrentPage ViewRouter haciendo clic en los botones de Vista de contenido. </font><font style="vertical-align: inherit;">Después de eso, MotherView se actualiza para mostrar la vista de contenido correspondiente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero hay una segunda forma más eficiente de lograr esta funcionalidad: </font></font><code>@EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¡ </font><font style="vertical-align: inherit;">usar </font><font style="vertical-align: inherit;">! </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sugerencia: puede descargar los últimos desarrollos aquí (esta es la carpeta "NavigateInSwiftUIComplete")</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Por qué el uso </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no es la mejor solución?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Probablemente se esté preguntando: ¿por qué deberíamos implementar esto de otra manera, cuando ya tenemos una solución que funcione? Bueno, si observa la lógica de la jerarquía de nuestra aplicación, se le hará evidente. Nuestra MotherView es la vista raíz que inicializa la instancia de ViewRouter. En MotherView, también inicializamos ContentViewA y ContentViewB, pasándoles la instancia de ViewRouter como BindableObject.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como puede ver, debemos seguir una jerarquía estricta que pasa un ObservableObject inicializado en sentido descendente a todas las subvistas. Ahora esto no es tan importante, pero imagine una aplicación más compleja con muchas vistas. Siempre necesitamos realizar un seguimiento de la transmisión de la vista raíz inicializable Observable a todas las subvistas y todas las subvistas de subvistas, etc., lo que en última instancia puede convertirse en una tarea bastante tediosa. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ij/ps/on/ijpson_0gvwhatcpzyosh2eacaq.jpeg"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para resumir: usar clean </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede ser problemático cuando se trata de jerarquías de aplicaciones más complejas.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cambio, podríamos inicializar ViewRouter cuando se inicie la aplicación para que todas las vistas se puedan conectar directamente a esta instancia, o, más bien, verla, independientemente de la jerarquía de la aplicación. </font><font style="vertical-align: inherit;">En este caso, la instancia de ViewRouter se verá como una nube que vuela sobre el código de nuestra aplicación, a la que todas las vistas acceden automáticamente sin preocuparse por la cadena de inicialización correcta en la jerarquía de vistas. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es solo el trabajo </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Qué es </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">?</font></font></h3><br>
<code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es un modelo de datos que, después de la inicialización, puede intercambiar datos con todas las representaciones de su aplicación. ¡Lo que es especialmente bueno es lo que se </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crea al proporcionar </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, para que podamos usar el nuestro </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para crear </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tan pronto como declaramos nuestro </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, todas las vistas pueden ser conectados al mismo, así como a las normales </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, pero sin la necesidad de una cadena de inicialización abajo de la jerarquía de la aplicación! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como ya se mencionó, </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ya debe inicializarse la primera vez que se accede. Como la nuestra </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, como vista raíz, analizará la propiedad </font></font><code>CurrentPage</code> <code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, debemos inicializarla </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuando se inicie la aplicación. Entonces podemos cambiar automáticamente la página actual</font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que luego requiere </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">una nueva representación.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ew/fr/9l/ewfr9lhz0xqhodfe5obumjykzoe.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementación </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como</font></font><code>EnvironmentObject</code></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, ¡actualice el código de nuestra aplicación! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primero, cambie el contenedor de la propiedad </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dentro </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de </font></font><code>@ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font><code>@EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView</span> : <span class="hljs-title">View</span> </span>{<font></font>
@<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span>
<span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
<span class="hljs-comment">//...</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La propiedad </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ahora </font><font style="vertical-align: inherit;">está </font><font style="vertical-align: inherit;">buscando </font></font><code>ViewRouter-EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Por lo tanto, debemos proporcionar a nuestra estructura </font></font><code>MotherView_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la instancia adecuada:</font></font><br>
<br>
<pre><code class="swift hljs">#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">MotherView</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se mencionó anteriormente, al iniciar nuestra aplicación, se le debe proporcionar inmediatamente una instancia </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de calidad </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ya que </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ahora se conoce como la representación raíz </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Por lo tanto, actualice la función de escena dentro del archivo de la </font></font><code>SceneDelegage.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">siguiente manera:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span><span class="hljs-params">(<span class="hljs-number">_</span> scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions)</span></span> {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> windowScene = scene <span class="hljs-keyword">as</span>? <span class="hljs-type">UIWindowScene</span> {
            <span class="hljs-keyword">let</span> window = <span class="hljs-type">UIWindow</span>(windowScene: windowScene)<font></font>
            window.rootViewController = <span class="hljs-type">UIHostingController</span>(rootView: <span class="hljs-type">MotherView</span>().environmentObject(<span class="hljs-type">ViewRouter</span>()))
            <span class="hljs-keyword">self</span>.window = window<font></font>
            window.makeKeyAndVisible()<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Genial, ahora cuando inicia la aplicación, SwiftUI crea una instancia </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en calidad </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, a la que ahora se pueden adjuntar todas las vistas de nuestra aplicación. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, vamos a actualizar la nuestra </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Cambie su </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">propiedad a </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y también actualice la estructura </font></font><code>ContentViewA_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewA</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
       <span class="hljs-comment">//...</span><font></font>
    }<font></font>
}<font></font>
#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewA_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ContentViewA</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif<font></font>
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sugerencia: De nuevo, la estructura </font></font><code>ContentViewsA_Previews</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiene su propia instancia </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ¡pero </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">está asociada con la instancia creada cuando se lanzó la aplicación! </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Repitamos esto para </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> SwiftUI<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewB</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-comment">//...</span><font></font>
    }<font></font>
}<font></font>
#<span class="hljs-keyword">if</span> <span class="hljs-type">DEBUG</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ContentViewB_Previews</span> : <span class="hljs-title">PreviewProvider</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: some <span class="hljs-type">View</span> {
        <span class="hljs-type">ContentViewB</span>().environmentObject(<span class="hljs-type">ViewRouter</span>())<font></font>
    }<font></font>
}<font></font>
#endif</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que </font></font><code>viewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nuestras </font><font style="vertical-align: inherit;">propiedades </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ahora </font><font style="vertical-align: inherit;">están </font><font style="vertical-align: inherit;">directamente relacionadas con / observar la instancia inicial </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ya no necesitamos inicializarlas en la nuestra </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Entonces, vamos a actualizar nuestro </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MotherView</span> : <span class="hljs-title">View</span> </span>{<font></font>
    <font></font>
    @<span class="hljs-type">EnvironmentObject</span> <span class="hljs-keyword">var</span> viewRouter: <span class="hljs-type">ViewRouter</span><font></font>
    <font></font>
    <span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> { 
        <span class="hljs-type">VStack</span> {
            <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page1"</span> {
                <span class="hljs-type">ContentViewA</span>()<font></font>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page2"</span> {
                <span class="hljs-type">ContentViewB</span>()<font></font>
            }<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto es simplemente genial: ya no necesitamos inicializar </font></font><code>ViewRouter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dentro de la nuestra </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y pasar su instancia a ContentView, que puede ser muy eficiente, especialmente para jerarquías más complejas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Genial, ejecutemos nuestra aplicación y veamos cómo funciona.</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Su navegador no admite video HTML5.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatingP2BeforeAnimation.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Genial, todavía podemos movernos entre nuestros puntos de vista!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agregar animaciones de transición</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como beneficio adicional, veamos cómo agregar una animación de transición al cambiar de “página1” a “página2”. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En SwiftUI, esto es bastante simple. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mire el </font></font><code>willChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">método que llamamos el archivo </font></font><code>ViewRouter.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuando se </font></font><code>CurrentPage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actualiza. </font><font style="vertical-align: inherit;">Como ya sabe, esto provoca un enlace </font></font><code>MotherView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para volver a mostrar su cuerpo, en última instancia, muestra otro </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, lo que significa pasar a otro </font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Podemos agregar animación simplemente envolviendo el método </font></font><code>willChange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en una función </font></font><code>withAnimation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> currentPage: <span class="hljs-type">String</span> = <span class="hljs-string">"page1"</span> {
        <span class="hljs-keyword">didSet</span> {<font></font>
            withAnimation() {<font></font>
                willChange.send(<span class="hljs-keyword">self</span>)<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora podemos agregar una animación de transición al mostrar otra </font></font><code>Content View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<blockquote><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"WithAnimation (_: _ :): devuelve el resultado de volver a calcular el cuerpo de la vista con la animación proporcionada"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Apple</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Queremos proporcionar a nuestra aplicación una transición emergente cuando navegue de </font></font><code>ContentViewA</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Para hacer esto, vaya al archivo </font></font><code>MotherView.swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y agregue el modificador de transición cuando se le llame </font></font><code>ContentViewB</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Puede elegir uno de varios tipos de transición predefinidos o incluso crear uno propio (pero este es un tema para otro artículo). </font><font style="vertical-align: inherit;">Para agregar una transición emergente, seleccionamos un tipo </font></font><code>.scale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">var</span> body: some <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page1"</span> {
                <span class="hljs-type">ContentViewA</span>()<font></font>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> viewRouter.currentPage == <span class="hljs-string">"page2"</span> {
                <span class="hljs-type">ContentViewB</span>()<font></font>
                    .transition(.scale)<font></font>
            }<font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ver cómo funciona, ejecute su aplicación en un simulador normal:</font></font><br>
<br>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Su navegador no admite video HTML5.</font></font><source src="https://blckbirds.com/wp-content/uploads/2020/02/NavigatinP2Preview.mp4" type="video/mp4"></video></div></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Genial, agregamos una agradable animación de transición a nuestra aplicación en solo unas pocas líneas de código! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Puedes descargar todo el código fuente </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aquí</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusión </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¡Eso es todo! </font><font style="vertical-align: inherit;">Aprendimos por qué es mejor usarlo </font></font><code>EnvironmentObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para navegar entre vistas en SwiftUI y cómo implementarlo. </font><font style="vertical-align: inherit;">También aprendimos cómo agregar animaciones de transición a la navegación. </font><font style="vertical-align: inherit;">Si quieres saber más, síguenos en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instagram</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y suscríbete a nuestro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boletín</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para no perderte actualizaciones, tutoriales y consejos sobre SwiftUI y mucho más.</font></font><br>
<br>
<hr><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lección gratuita: "Aceleración de aplicaciones iOS con instrumentos"</font></font></a><br>
<br>
<hr></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es501366/index.html">System Design Primer (Parte 1 con adiciones de microservicio)</a></li>
<li><a href="../es501368/index.html">Eventos digitales en Moscú del 11 al 17 de mayo</a></li>
<li><a href="../es501370/index.html">Trello: un sistema eficaz de gestión del conocimiento para un pequeño equipo de TI</a></li>
<li><a href="../es501374/index.html">Emulator Commodore 65</a></li>
<li><a href="../es501376/index.html">Agile nos enseña el verdadero significado de la arquitectura</a></li>
<li><a href="../es501380/index.html">Herramienta de creación de datos o lo que es común entre un Data Warehouse y un Smoothie</a></li>
<li><a href="../es501386/index.html">Reforma de MNT: cuaderno completamente abierto para paranoicos</a></li>
<li><a href="../es501388/index.html">¿Es posible Agile para toda la empresa?</a></li>
<li><a href="../es501392/index.html">Fuente receptiva. Adaptar texto entre diseño y valores mínimos</a></li>
<li><a href="../es501394/index.html">Sobre la traducción de "teoría" / "teóricamente" sin teoría / teórica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>