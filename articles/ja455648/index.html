<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👟 💗 🙆🏾 戦闘におけるMLライフサイクル 😰 ✌🏼 👷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="実際のML実装では、学習自体に4分の1の労力がかかります。残りの4分の3は、苦痛と官僚主義によるデータの準備であり、多くの場合、インターネットアクセス、インフラストラクチャのセットアップ、テスト、監視のない閉回路での複雑な展開です。何百ものシート、手動モード、モデルバージョンの競合、オープンソース、...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>戦闘におけるMLライフサイクル</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/455648/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実際のML実装では、学習自体に4分の1の労力がかかります。残りの4分の3は、苦痛と官僚主義によるデータの準備であり、多くの場合、インターネットアクセス、インフラストラクチャのセットアップ、テスト、監視のない閉回路での複雑な展開です。何百ものシート、手動モード、モデルバージョンの競合、オープンソース、厳しいエンタープライズに関するドキュメント-これらすべてがデータサイエンティストを待っています。しかし、彼はそのような「退屈な」運用上の問題には関心がなく、アルゴリズムを開発し、高品質を実現し、恩恵を与え、もはや覚えていない。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
おそらく、MLが1つのボタンでより簡単に、より速く、より速く実装されているところかもしれませんが、そのような例は見ていません。上記のすべては、フィンテックとテレコムにおけるフロントティアの経験です。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">HighLoad ++での</font></a><font style="vertical-align: inherit;">彼について</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 大容量ストレージと大量のデータ分析における、高負荷システムのアーキテクチャのエキスパートであるセルゲイヴィノグラドフ氏は言いました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ss/7n/cm/ss7ncmtdsij0wncwt-uuzxneit8.jpeg"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルのライフサイクル</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、対象領域のライフサイクルは3つの部分で構成されます。</font><font style="vertical-align: inherit;">最初</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に、仕事はビジネスから来</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">2つ目は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データエンジニアやデータサイエンティストがデータを準備</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、モデルを</font><strong><font style="vertical-align: inherit;">作成します</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第3部では、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カオス</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が始まります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最後の2つの異なる状況が発生します。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7GM9ac6ojtw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">便利屋</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初によくある状況は、データサイエンティストまたはデータエンジニアが製品にアクセスできることです。そのため、彼らは彼に次のように言います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
人は、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jupyter Notebook</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font><strong><font style="vertical-align: inherit;">ノートブック</font></strong><font style="vertical-align: inherit;">のバンドルを</font><font style="vertical-align: inherit;">受け取り、</font><font style="vertical-align: inherit;">それらを専らデプロイメントアーティファクトと見なし、一部のサーバーで楽しく複製し始めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてが正常であるように見えますが、常にそうであるとは限りません。</font><font style="vertical-align: inherit;">理由は後で説明します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">容赦のない搾取</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のストーリーはより複雑で、通常、悪用が穏やかな狂気の状態に達している企業で発生します。</font><font style="vertical-align: inherit;">データサイエンティストがソリューションを運用にもたらします。</font><font style="vertical-align: inherit;">彼らはこのブラックボックスを開いて、ひどい何かを見ます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ノートブック</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">異なるバージョンの漬物;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトのヒープ：いつどこでスクリプトを実行するか、スクリプトが生成するデータをどこに保存するかは明確ではありません。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このパズルでは、悪用によりバージョンの非互換性が発生します。</font><font style="vertical-align: inherit;">たとえば、データサイエンティストはライブラリの特定のバージョンを指定しなかったため、操作は最新のものでした。</font><font style="vertical-align: inherit;">しばらくすると、データサイエンティストは次の</font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことを行います。-間違ったバージョンのscikit-learnを配置すると、すべてのメトリックが消えます。</font><font style="vertical-align: inherit;">以前のバージョンにロールバックする必要があります。</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは完全に製品を壊し、搾取は苦しみます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">官僚</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緑のロゴのある企業では、データサイエンティストが運用を開始してモデルを持ち込むと、通常800枚のドキュメントが返されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
悲しいデータサイエンティストが去り、途中ですべてを放り投げ、それからやめました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データサイエンティストがすべてのサークルを通過し、最終的にすべてがデプロイされたとします。</font><font style="vertical-align: inherit;">しかし、すべてが正常に機能していることを理解することはできません。</font><font style="vertical-align: inherit;">私の経験では、同じ恵まれた銀行では、データサイエンス製品の監視はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
専門家が自分の仕事の結果をデータベースに書き込んでおくとよいでしょう。</font><font style="vertical-align: inherit;">しばらくすると、彼はそれらを受け取り、内部で何が起こるかを確認します。</font><font style="vertical-align: inherit;">しかし、これは常に起こるわけではありません。</font><font style="vertical-align: inherit;">ビジネスとデータサイエンティストがすべてがうまく機能していると単純に信じている場合、それは失敗した事例につながります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MFI</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはかつて、1つの大規模なマイクロファイナンス組織向けのスコアリングエンジンを開発しました。彼らは私たちに製品に行くのを許さなかったが、単に私たちからモデルのカスケードを取り、それをインストールして起動した。モデルのテスト結果はそれらを満たしました。しかし、6か月後に彼らは戻ってきました：</font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-すべてが悪いです。ビジネスは行きません、私たちはどんどん悪化しています。モデルは優れているようですが、結果は低下しており、詐欺とデフォルトはますます増えており、お金も少なくなっています。何を払ったの？それを正しくしましょう。</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
さらに、モデルへのアクセスは再び拒否されます。さらに、ログは1か月、6か月前にアンロードされました。私たちは別の月のアンロードを調査し、ある時点でMFIのIT部門が入力データを変更し、jsonのドキュメントではなく、xmlでドキュメントを送信し始めたという結論に達しました。モデルはjsonを予期していましたが、xmlを受け取りましたが、悲しいものであり、入力にデータがないと考えました。</font></font><br>
<br>
<blockquote>  ,     .     .</blockquote><br>
<h3> ,   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、モデルが適切に機能するという事実に直面しますが、何らかの理由で</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいバージョンが</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発</font><strong><font style="vertical-align: inherit;">さ</font></strong><font style="vertical-align: inherit;">れました</font><font style="vertical-align: inherit;">。モデルは再び何らかの形で持ち込まれ、再び地獄のすべてのサークルを通過する必要があります。ライブラリのバージョンが前のモデルと同じである場合は良好です。そうでない場合は、デプロイメントが新たに開始します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいバージョンを戦闘に</font><font style="vertical-align: inherit;">移す</font><font style="vertical-align: inherit;">前に、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストし</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たい</font><font style="vertical-align: inherit;">場合があります。それを本番環境に置き、同じトラフィックストリームを見て、正常であることを確認してください。これも完全な展開チェーンです。さらに、このモデルに従って、スコアリングの場合は実際の結果が発生しないようにシステムを設定しましたが、詳細な分析のために結果の監視と分析しかありませんでした。</font><strong><font style="vertical-align: inherit;">モデルのカスケードが使用される</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
状況があります</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のモデルの結果が以前のモデルに依存している場合、どういうわけか、モデルとどこかの間の相互作用を確立する必要があります。繰り返しますが、これをすべて維持します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そのような問題をどのように解決しますか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合</font><font style="vertical-align: inherit;">、特に小規模な企業</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、</font></font></strong><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手動モード</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">問題を1人</font><strong><font style="vertical-align: inherit;">で</font></strong><font style="vertical-align: inherit;">解決し</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">彼はすべてがどのように機能するかを理解し、モデルとライブラリのすべてのバージョンを念頭に置き、どこでどのスクリプトが機能するか、どのストアフロントを構築するかを知っています。</font><font style="vertical-align: inherit;">これはすべて素晴らしいです。</font><font style="vertical-align: inherit;">特に美しいのは、手動モードが残したストーリーです。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相続ストーリー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。いい人が小さな銀行で働いていた。かつて彼は南国に行って戻ってこなかった。その後、継承を得ました。モデルモデルが機能するストアフロントを生成する一連のコードです。コードは美しく、機能しますが、これまたはそのストアフロントを生成するスクリプトの正確なバージョンはわかりません。戦闘では、すべてのショップウィンドウが存在し、すべてが起動されます。私たちは2か月かけてこの複雑なもつれを解明し、どうにかして構造化しようとしました。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">苛酷な企業では、</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人々はあらゆる種類のPythonや木星などに煩わされたくありません。彼らはこう言います：</font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-IBM SPSSを購入してインストールすれば、すべてうまくいきます。バージョン管理の問題、データソースの問題、デプロイの問題は何とか解決されました。</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアプローチには存在する権利がありますが、誰もがそれを買う余裕はありません。</font><font style="vertical-align: inherit;">いずれにせよ、これはそのような高品質の鋸歯状の針です。</font><font style="vertical-align: inherit;">彼らはその上に座りますが、降りるのにうまくいきません-ノッチ。</font><font style="vertical-align: inherit;">そしてそれは通常多くの費用がかかります。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オープンソースは、</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前のアプローチの反対です。</font><font style="vertical-align: inherit;">開発者たちはインターネットをサーフィンし、さまざまな程度でタスクを解決する多くのオープンソースソリューションを見つけました。</font><font style="vertical-align: inherit;">これは優れた方法ですが、私たち自身では、要件を100％満たすソリューションを見つけることができませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、私たちは古典的なオプションを選択しました- </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちの決定</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その松葉杖、自転車、すべて独自のもの、ネイティブ。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは私たちの決定から何を望みますか？</font></font></h2><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてを自分で書かないでください</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちは、それ自体が十分に証明されており、私たちが協力している機関での運用に精通しているコンポーネント、特にインフラストラクチャコンポーネントを採用したいと考えています。</font><font style="vertical-align: inherit;">データサイエンティストの作業とDevOpsの作業を簡単に分離できる環境を作成するだけです。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つのモードでデータを処理します：バッチモードとバッチモードの両方</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちのタスクには、両方の操作モードが含まれます。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展開が容易で、境界が閉じています</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">機密の個人データを扱う場合、インターネット接続はありません。</font><font style="vertical-align: inherit;">この時点で、すべてが迅速かつ正確にプロダクションに到達するはずです。</font><font style="vertical-align: inherit;">したがって、私たちはGitlab、その中のCI / CDパイプラインとDockerに目を向け始めました。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルはそれ自体が目的ではありません。</font><font style="vertical-align: inherit;">私たちはモデル構築の問題を解決するのではなく、ビジネスの問題を解決します。</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パイプライン内には、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべての</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パイプラインコンポーネントの</font><strong><font style="vertical-align: inherit;">バージョン管理</font></strong><font style="vertical-align: inherit;">をサポートするルールとモデルの集合体が必要</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パイプラインとはどういう意味ですか？ロシアでは、マネーロンダリングとテロ資金供与との闘いに関する連邦法115が施行されています。中央銀行の勧告の表だけが16画面を占めています。これらは、銀行がそのようなデータを持っている場合に満たすことができる単純なルールであり、データを持たない場合はできません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
借り手、金融取引、またはその他のビジネスプロセスの評価は、当社が処理する一連のデータです。ストリームはこの種のルールを通過する必要があります。これらのルールは、アナリストが簡単に説明します。彼はデータサイエンティストではありませんが、法律やその他の指示をよく知っています。アナリストは座って、わかりやすい言葉で、データのチェックについて説明します。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルのカスケードを構築し</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">次のモデルがその作業に以前のモデルで取得した値を使用する場合、多くの場合状況が発生します。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仮説をすばやくテストします。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私は前の論文を繰り返します。データサイエンティストはある種のモデルを作成しました、それは戦いで回転し、うまく機能します。</font><font style="vertical-align: inherit;">何らかの理由で、専門家はより良い解決策を考え出しましたが、確立されたワークフローを台無しにしたくありません。</font><font style="vertical-align: inherit;">データサイエンティストは、戦闘システムの同じ戦闘トラフィックに新しいモデルをぶら下げています。</font><font style="vertical-align: inherit;">彼女は意思決定に直接関与していませんが、同じトラフィックを提供し、いくつかの結論を考慮し、これらの結論はどこかに保存されています。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">簡単な再利用機能。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くのタスクには同じタイプのコンポーネントがあり、特に機能やルールの抽出に関連するものがあります。</font><font style="vertical-align: inherit;">これらのコンポーネントを他のパイプラインにドラッグしたいと考えています。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どうするつもりでしたか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初に監視が必要です。</font><font style="vertical-align: inherit;">そして、その種類の2つ。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モニタリング</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">技術モニタリング。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パイプラインコンポーネントがデプロイされている場合、コンポーネントは、動作中のコンポーネントで何が起こっているか、つまりメモリ、CPU、ディスクをどのように消費するかを確認する必要があります。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジネス監視。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、実装の技術的なニュアンスから抽象化できるデータサイエンティストツールです。</font><font style="vertical-align: inherit;">設計レベルでの構築は、たとえば、機能の分布やスコアリングサービスの結果など、監視に使用できるモデルメトリックを決定するのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データサイエンティストはメトリックを定義し、それらがモニタリングシステムにどのように入るかについて心配するべきではありません。</font><font style="vertical-align: inherit;">唯一重要なことは、彼がこれらのメトリックと、メトリックが表示されるダッシュボードの外観を定義したことです。</font><font style="vertical-align: inherit;">さらに、スペシャリストはすべてを本番環境で立ち上げ、展開し、しばらくすると、測定基準が監視に注がれました。</font><font style="vertical-align: inherit;">したがって、製品にアクセスできないデータサイエンティストは、モデル内で何が起こっているかを確認できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テスト中</font></font></h3><br><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パイプラインの整合性を</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
テストし</font><font style="vertical-align: inherit;">ます。パイプラインの詳細を考えると、これは一種の計算グラフです。グラフを実装していることを理解したいのですが、それをバイパスして、そこから抜け出す方法を見つけることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
グラフにはコンポーネント-モジュールがあります。すべてのモジュールは、ユニットおよび統合テストに合格する必要があります。プロセスはデータサイエンティストにとって透過的で簡単なものでなければなりません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者はモデルを説明し、自分自身または他の誰かの助けを借りてテストします。すべてをGitlabに配置し、継続的インテグレーションによって構成されたパイプラインがレイズ、テスト、結果を確認します。すべてが良ければ-それはさらに進みます-いいえ-それは新たに始まります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データサイエンティストはモデルに焦点を当てており、内部に何があるのか​​わかりません。このために、彼はいくつかのものを与えられています。</font></font><br>
<br>
<ul>
<li><strong>API    </strong><strong> </strong>    — message bus.      ,           ,          pipeline.</li>
<li>    <strong> —  XGBoost</strong>  <strong>pickle</strong>.  data scientist  executer     —       pipeline.</li>
<li>   API  data scientist     pipeline —    .</li>
<li><strong>    </strong>        .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、モデルは私たちのために機能し、しばらくすると、サービスの履歴全体を上げようとする監査が到着します。監査では、作業の正しさ、私たちの詐欺がないことを確認したいと考えています。 SQLを知っている監査人が特別なリポジトリにアクセスし、すべてがどのように機能したか、どのような決定が行われたか、およびその理由を確認できるように、シンプルなツールが必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは2つの重要な物語の基礎を築きました。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタマージャーニー。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、メカニズムを使用して顧客の履歴全体（このシステムに実装されているビジネスプロセスの一部としてクライアントに起こったこと）を保存する機会です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DMPプラットフォームなどの外部データソースがある場合があります。それらから、ネットワーク上およびモバイルデバイスでの人間の行動に関する情報を取得します。これは、彼のモデルのLTVとスコアリングモデルに影響を与える可能性があります。借り手が支払いを遅らせている場合、これは悪意のある意図ではないと予測できます-単に問題があります。この場合、借り手にソフトなエクスポージャーを適用します。問題が解決すると、クライアントはローンを閉じます。彼が次回来るとき、私たちは彼のすべての話を知るでしょう。データサイエンティストはモデルから視覚的履歴を取得し、ライトモードでスコアリングを実行します。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">異常の識別</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。私たちは常に非常に複雑な世界に直面しています。たとえば、MFIの加速評価内の弱点は、自動詐欺の原因となる可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Customer Journeyは、モデルを通過するデータストリームにすばやく簡単にアクセスできるという概念です。</font><font style="vertical-align: inherit;">このモデルにより、大量発生時の不正の特徴である異常を簡単に検出できます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてはどのように配置されていますか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ためらうことなく、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kafka</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をメッセージバスパッチとして採用しました。</font><font style="vertical-align: inherit;">これは、多くのお客様に使用されている優れたソリューションであり、操作はそれで機能します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uu/5k/3r/uu5k3rnxw7lu4iulruewhzmif8w.jpeg"><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部のシステムコンポーネントは、会社自体ですでに使用されている場合があります。</font><font style="vertical-align: inherit;">システムを再構築するのではなく、すでに持っているものを再利用します。</font></font></blockquote><br>
<strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この場合の</font><strong><font style="vertical-align: inherit;">データストレージ</font></strong><font style="vertical-align: inherit;">は、クライアントが通常すでに持っているストレージです。</font><font style="vertical-align: inherit;">Hadoop、リレーショナルデータベース、非リレーショナルデータベースを使用できます。</font><font style="vertical-align: inherit;">HDFS、Hive、Impala、Greenplum、PostgreSQLをそのまま使用できます。</font><font style="vertical-align: inherit;">これらのストレージは、ショップのウィンドウのソースと見なされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
データはウェアハウスに到着し、ETLまたはお客様のETLがあればそれを通過します。</font><font style="vertical-align: inherit;">モデル内でさらに使用されるショップウィンドウを構築しています。</font><font style="vertical-align: inherit;">データストレージは読み取り専用モードで使用されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちの開発</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">黒板</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前は、30〜40年の数学者の奇妙な慣習に由来しています。これは、管理システムに住んでいるパイプラインのマネージャーです。 Blackboardには、ある種のメタストレージがあります。パイプライン自体と、すべてのコンポーネントを初期化するために必要な構成を格納します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのシステム作業は、Blackboardから始まります。奇跡的に、パイプラインはMeta Storageに行き着きました。しばらくすると、Blackboardはこれを理解し、パイプラインの現在のバージョンを引き出して初期化し、Kafka内に信号を送信します。</font><strong><font style="vertical-align: inherit;">ランタイム環境</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
があり</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。 Dockers上に構築されており、お客様のプライベートクラウドを含むサーバーに複製できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
箱から出して、主な</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">俳優:: Init</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化子です。これは、</font><strong><font style="vertical-align: inherit;">コンポーネントの</font></strong></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">構築</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">破棄の</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2つしか実行できない精霊</font><strong><font style="vertical-align: inherit;">です</font></strong><font style="vertical-align: inherit;">。彼はBlackboardからコマンドを受け取ります。「ここにパイプラインがあります。そのようなサーバーで、そのようなリソースをそのような量で実行する必要があります-作業してください！」その後、俳優はそれをすべて開始します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数学的には、アクターは1つ以上のオブジェクトを入力として受け取る関数であり、その内部では何らかのアルゴリズムに従ってオブジェクトの状態を変更し、出力では新しいオブジェクトを作成するか、既存のオブジェクトの状態を変更します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
技術的には、アクターはPythonプログラムです。その環境でDockerコンテナーで実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
俳優は他の俳優の存在を知りません。アクターに加えてパイプライン全体が全体として存在することを知っている唯一のエンティティはBlackboardです。システム内のすべてのアクターの実行ステータスを監視し、現在の状態を維持します。監視では、ビジネスプロセス全体の全体像として表現されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actor :: Initは多くのDockerコンテナを生成します。さらに、アクターはデータストレージを操作できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システム自体には、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イベントストレージ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネントがあります</font><font style="vertical-align: inherit;">。イベントストレージとして、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClickHouse</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。そのタスクは簡単です。Kafkaを介して俳優間で交換されるすべての情報はClickHouseに保存されます。これは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、さらなる監査のために</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行われ</font><font style="vertical-align: inherit;">ます。パイプライン操作のログです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アクターは、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カスタマージャーニー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用に開発することもでき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">彼らはパイプラインログの変更を確認し、すでにパイプライン内にあるモデルやコンポーネントがルールを操作するために必要なウィンドウを即座に再構築できます。</font><font style="vertical-align: inherit;">これは、継続的にデータを変更するプロセスです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モニタリングは、かなり原始的に</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prometheusに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基づいて構築されてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">アクターには基本的なAPIが与えられ、クローズドモードではありますが、開発者には十分透過的であり、メトリックスを含むメッセージをKafkaに送信します。</font><font style="vertical-align: inherit;">PrometheusはKafkaからメトリックを読み取り、リポジトリに格納します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
視覚化には</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grafana</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つの統合ポイント</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つ目は、ETLを介してデータウェアハウスに渡されるデータソースとの統合のポイントです。統合の2番目のポイント。たとえば、スコアリングサービスなど、サービスがデータコンシューマーによってすでに使用されている場合。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache ServiceMixを採用しました。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">経験上、これらの統合ポイントは、同じタイプのプロトコルと同じタイプであり、SOAP、RESTful、それほど頻繁ではないキューです。次のSOAPサービスを生成するために、独自のコンストラクターまたはサービスを開発する必要はありません。したがって、ServiceMixを使用してSDLで記述します。SDLでは、このサービスのデータモデルとその中に存在するメソッドが構築されます。次に、ServiceMix内のルーターをプッシュし、サービス自体を生成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
自分自身から、トリッキーな同期-非同期変換を追加しました。システム内に存在するすべての要求は非同期であり、メッセージバスを通過します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどのスコアリングサービスは同期です。 ServiceMixリクエストは、RESTまたはSOAPを介して送信されます。この時点で、彼はHTTPセッションの知識を保持しているゲートウェイを通過します。次に、メッセージをKafkaに送信し、パイプラインを介して実行され、ソリューションが生成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、解決策がない場合もあります。たとえば、何かが落ちた、または決定を下すのが難しいSLAがある場合、ゲートウェイは次のように監視します。「OK、リクエストを受け取った、彼は別のKafkaトピックで私に来た、または何も来なかったが、タイムアウトトリガーは機能した。」次に、同期から非同期への変換が再び行われ、同じHTTPセッション内で、コンシューマへの応答があり、作業の結果が返されます。これは間違いまたは通常の予測である可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、この場所では、偉大で強力なオープンソースのおかげで、私たちは味のない犬を食べました。最新バージョンのServiceMixと以前のバージョンのKafkaを使用し、すべてが完全に機能しました。このゲートウェイには、ServiceMixにすでに存在するキューブに基づいて書き込みました。 Kafkaの新しいバージョンがリリースされたとき、それを喜んで入手しましたが、以前に存在していたKafkaのメッセージ内のヘッダーのサポートが変更されたことがわかりました。 ServiceMix内のゲートウェイは、これらと連携できなくなりました。これを理解するために、私たちは多くの時間を費やしました。その結果、新しいバージョンのKafkaで動作する独自のゲートウェイを構築しました。私たちはServiceMix開発者に問題について書いて、答えを受け取りました：「ありがとう、次のバージョンで間違いなくあなたを助けます！」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、更新を監視し、定期的に何かを変更する必要があります。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インフラストラクチャはGitlabです。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その中にあるほとんどすべてのものを使用します。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードリポジトリ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">統合の継続/配信パイプラインの継続。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dockerコンテナのレジストリを維持するためのレジストリ。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部品</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5つのコンポーネントを開発しました。</font></font><br>
<br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">黒板</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -パイプラインのライフサイクル管理。</font><font style="vertical-align: inherit;">パイプラインから実行するパラメーターの場所、内容、内容。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特徴抽出</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は簡単に</font><strong><font style="vertical-align: inherit;">機能し</font></strong><font style="vertical-align: inherit;">ます-入力でそのようなデータモデルを取得し、データから必要なフィールドを選択し、それらを特定の値にマッピングすることを特徴抽出に通知します。</font><font style="vertical-align: inherit;">たとえば、クライアントの生年月日を取得し、年齢に変換して、モデルの機能として使用します。</font><font style="vertical-align: inherit;">特徴抽出はデータの強化を担当します。</font></font></li>
<li><strong>Rule based engine</strong> —    .    ,   ,     &lt;code&gt;if, else&lt;code/&gt;,      .</li>
<li><strong>Machine learning engine</strong> —   executor,         .     .</li>
<li><strong>Decision engine</strong> —   ,   .   , ,    ,   -      .       . ,     LTV- —     ,     ,  .</li>
</ul><br>
<br>
<h3> </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2セットの入力データを持つスコアリングサービスの例を考えてみます。</font><font style="vertical-align: inherit;">1つ目は借り手のアンケートで、彼自身が記入します。</font><font style="vertical-align: inherit;">2つ目は、信用調査機関の信用履歴であり、その財務規律について説明しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この合成例では、パイプラインは次のようになります。</font></font><br>
<img src="https://habrastorage.org/webt/o7/vy/dj/o7vydjrruyfittwhwzumh_gc_rq.jpeg"><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発者は</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能エクストラクタ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について説明し</font><font style="vertical-align: inherit;">ます。どの機能、どのデータをアンケートや信用履歴から抽出するか、どのような形式でモデルに送信するかについて説明します。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ルールのセット</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">たとえば、停止要因のチェック：パスポートの現実、有効性、有効な生年月日、18歳以上。</font></font></li>
<li> <strong> . </strong>   ,    .     ,      ,        pipeline.</li>
<li> <strong>Decision engine</strong>.             .</li>
<li> <strong></strong>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらすべてをyamlで説明します。</font><font style="vertical-align: inherit;">現在、視覚的な説明フォームはありません。</font><font style="vertical-align: inherit;">私たちはそれについて考えましたが、これを行うにはまだ十分な強さ、時間、心がありませんでした。</font><font style="vertical-align: inherit;">したがって、テキストエディターとyamlを使用してこれを行いました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのコンポーネントを説明するパイプライン開発者は、そのタイプを示します：特徴抽出、ルール、モデル、意思決定エンジン、その名前とバージョン。</font><font style="vertical-align: inherit;">これは重要です</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。Dockerコンテナは名前とバージョンに基づいて生成され</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは、Dockerコンテナが存在するレジストリへのリンクです。</font><font style="vertical-align: inherit;">それらを呼び出す初期化アクターには、この名前でアクセスします。</font><font style="vertical-align: inherit;">したがって、間違えた場合、この名前のDockerコンテナーはアセンブリ中に作成され、何世紀もの間残ります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パイプライン</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはすべてをより速くしたかったので、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonで</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書き始めました</font><font style="vertical-align: inherit;">-私たちはそれを知っており、すばやく書くことができます。 Pythonで作成された特徴抽出、ルール、モデル、意思決定エンジン。</font><strong><font style="vertical-align: inherit;">yamlに</font></strong></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
描かれたパイプライン</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">システム環境の説明のメタストレージへの保存はまだ完了していません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手動</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で行われ</font><strong><font style="vertical-align: inherit;">ます</font></strong><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ランタイム環境が10台のサーバーに複製されている場合、Blackboardはこのパイプラインを10台のサーバーで実行する必要があることを認識している必要があります。実行する場所と特定のコンポーネントを指定できます：サーバー、ルール、KafkaエントリポイントのIPアドレス、ポート、トピック。これはすべて手動モードで機能しますが。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのアーティファクトはGitLabに保存されます。</font><font style="vertical-align: inherit;">デプロイと初期化はAnsibleによって行われます。</font><font style="vertical-align: inherit;">それは複雑なプロセスであることがわかりました。</font><font style="vertical-align: inherit;">数十台のサーバー用の比較的大規模なインフラストラクチャが数時間でデプロイされますが、私たちのオペレーティングエンジニアは、これのためにAnsibleで50,000行のコードを記述しました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デプロイはどのように見えますか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GitLabにはパイプラインがあります。開発者はGitLabにコミットしています。 CIはプロセスを確認し、新しい成果物に気づき、テストを実行し、結果を生成しました。次に、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitLab Runnerがに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入り</font><font style="vertical-align: inherit;">、パイプラインに記述されているすべてのコンポーネントのDockerコンテナーを構築します。収集に成功した場合-すべてがレジストリに保存されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gz/dx/hr/gzdxhruymhjm2_wejqybqizdp0i.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dockerの利点は、バージョン管理の問題から離れることです。各コンポーネントの各Dockerコンテナには、必要なライブラリの独自のバージョンがあります。その結果、CIパイプラインは、Blackboardが動作するMeta Storageのビジネスプロセスにパイプラインの説明自体を保存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blackboardは定期的にMeta Storageを確認します-新しい変更を確認し、取得し、検証し、初期化アクターにメッセージを送信しました。彼はDockerコンテナーを引き上げ、数分後、複製し、持ち上げ、起動しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
初期化アクターは、起動に必要なすべての構成パラメーター（データベース、Kafka、監視システムへの接続）をMeta StorageからBlackboardから受け取ります。 Dockerコンテナーが初期状態で何も知らない、構成可能でなければならない情報は、初期化時に受信します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ライトが点灯し、監視にDockerコンテナーが表示され、ライトアップされました-パイプラインの準備ができました！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初は、DigitalOceanですべてを開発しました。その後、AWSとスケールウェイにデプロイする方法を学びましたが、後者はあまり愛されていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの顧客にとっての主なことは、これらすべてがその境界の内側で回転することができるということです。</font><font style="vertical-align: inherit;">パイプライン全体とそのインフラストラクチャ全体をお客様が管理できます。</font><font style="vertical-align: inherit;">漏れがないことが保証されています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一般的に高速ですか？</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
評価が難しい-正式な基準は簡単ではありません。</font><font style="vertical-align: inherit;">たとえば、リアルタイムリクエストで実行した最も複雑なパイプラインはこれです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2特徴抽出器入力。</font><font style="vertical-align: inherit;">データサイズは1 MB未満です。</font><font style="vertical-align: inherit;">大量のデータを含むjson。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8モデル-MLエンジンの8つのコピー。</font><font style="vertical-align: inherit;">それらはすべてXGBoostに基づいて回転していました。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RBエンジン（115の連邦法）内の18ブロックのルールセット。</font><font style="vertical-align: inherit;">マネーロンダリングの検証に関する1000のルールのブロック。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つの決定エンジン。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在、このサービスは回転しており、毎秒200リクエストを処理しています。</font><font style="vertical-align: inherit;">2つの特徴抽出、8つのモデル、18のブロック、1つの意思決定エンジンにより、意思決定には平均1.2秒かかります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">予定</font></font></h3><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">発見リソース。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部のサーバーが落ちたことを自動的に追跡しても機能しません。</font><font style="vertical-align: inherit;">デプロイメントプロセス中に、デプロイメント時にサーバーが落ちたことがわかります。</font><font style="vertical-align: inherit;">現在、解決に取り組んでいます。</font><font style="vertical-align: inherit;">私たちはすべてのリソースをMeta Storageの手で説明します。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビジュアルパイプラインデザイン</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BPMの</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ような特定のエンジンを紹介したいと思い</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これを使用すると、開発者は構文やスペルのエラーが多数あるyamlを記述せずに、キューブを視覚的に移動し、準備を整えてリポジトリーから描画します。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の言語での俳優のサポート。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実験のために、Java、Scala、Rでアクターを記述しています。コア自体はPythonですが、アクターはシステム全体とは独立して実行され、任意の言語を使用できます。</font><font style="vertical-align: inherit;">パイプライン開発者がおなじみの言語でアクターを記述できるように、他の言語で一連のAPIを提供するだけで十分です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結果はどうですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発の最初のバージョンは、2人で作業する1か月です。</font><font style="vertical-align: inherit;">製品ソリューションの前に-さらに6か月の作業。</font><font style="vertical-align: inherit;">その結果、私たち</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はデザイナー</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><strong><font style="vertical-align: inherit;">手に入れました</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コンストラクタのイメージにはいくつかの反復とアプローチが必要なため、困難を伴います。</font><font style="vertical-align: inherit;">上記のすべては、2018年11月の彼の状態です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デザイナーを操作する試みで、私たちは奇妙な熊手を見つけ、それを回避して回避する方法を学びました。</font><font style="vertical-align: inherit;">そして無駄ではありません-私たちにとって、そしてデザイナーを使用する顧客の操作にとっては、より簡単です。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセスは、開発者とメンテナンスの両方にとって理解可能です</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この不運なノートブックを製品化する方法、モデルを監視および展開する方法に関連する多くの問題を回避しました。</font></font><br>
<br>
<blockquote>, -      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a>,           .  ,     , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">UseData Conf</a>.  ,    ,       ,   16 .</blockquote></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja455638/index.html">アランケイはオブジェクトを発明しませんでした</a></li>
<li><a href="../ja455640/index.html">マーヴィンミンスキーの「感情マシン」：第4章「意識の認識方法」</a></li>
<li><a href="../ja455642/index.html">Yandex.Cloudの分散メッセージキューサービスのアーキテクチャ</a></li>
<li><a href="../ja455644/index.html">実際にデータを使用</a></li>
<li><a href="../ja455646/index.html">セキュリティウィーク24：Androidスマートフォンの工場バックドア</a></li>
<li><a href="../ja455650/index.html">ネジを分類するためのニューラルネットワークのトレーニング方法</a></li>
<li><a href="../ja455652/index.html">ディープラーニングと常識：チャットボットの開発</a></li>
<li><a href="../ja455658/index.html">伝説のIntel Core i7-2600K：2019年のSandy Bridgeのテスト（パート3）</a></li>
<li><a href="../ja455662/index.html">デコーダーとしてカム機構を備えた大型機械式ディスプレイ</a></li>
<li><a href="../ja455666/index.html">ITサービス会社でのアウトバウンドセールスの構築</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>