<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§î üÜñ üïã Interaction avec NIDD via SCEF √† l'aide de l'utilitaire Postman. Une br√®ve visite de SCEF et de ses fonctionnalit√©s üîÆ üé® üé•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article permettra √† ceux qui commencent tout juste leur d√©veloppement ou qui appliquent d√©j√† la technologie NB-IoT de se faire une id√©e de la fa√ßo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Interaction avec NIDD via SCEF √† l'aide de l'utilitaire Postman. Une br√®ve visite de SCEF et de ses fonctionnalit√©s</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489608/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cet article permettra √† ceux qui commencent tout juste leur d√©veloppement ou qui appliquent d√©j√† la technologie NB-IoT de se faire une id√©e de la fa√ßon d'interagir √† distance avec le dispositif NB-IoT.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/ax/eq/hjaxeqtz5llcdmfzbwcv6zosici.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bref avis</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NB-IoT marche facilement sur les talons de la 2G et s'est impos√© comme une norme √©co√©nerg√©tique pour les communications cellulaires, qui dans un avenir pr√©visible sera en mesure de faire sortir la 2G, ce qui a renforc√© sa position. La raison en est la capacit√© √† aborder avec souplesse le probl√®me de la consommation d'√©nergie de l'une des parties les plus consommatrices de l'appareil - l'√©metteur radio. Si vous n'entrez pas dans les d√©tails, alors avec NB-IoT, nous avons la possibilit√© de configurer de mani√®re flexible les modes de fonctionnement de l'appareil en d√©finissant le calendrier de communication de l'appareil et l'interaction de l'appareil avec les serveurs sur Internet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parall√®lement √† cela, le nombre de dispositifs d'abonn√©s connect√©s simultan√©ment √† une cellule augmente consid√©rablement, ainsi que les co√ªts de l'op√©rateur mobile pour maintenir l'op√©rabilit√© de cette communication elle-m√™me.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On suppose que le lecteur a une compr√©hension approximative de la technologie NB-IoT et qu'il y a une exp√©rience d'interaction minimale.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'article est r√©guli√®rement mis √† jour et mis √† jour.</font></font></blockquote><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Difficult√©s au sein du r√©seau NB-IoT</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Associ√© √† la capacit√© de contr√¥ler l'√©metteur radio et √† une efficacit√© √©nerg√©tique √©lev√©e, le probl√®me de l'envoi de donn√©es en direction du serveur vers le module (p√©riph√©rique) est venu. La raison en est qu'il est possible de fournir des centaines de milliers de p√©riph√©riques avec des adresses IP blanches, mais cela implique une grande quantit√© de surcharge et r√©duit la fiabilit√© globale du r√©seau en raison de sa complexit√©. Le module re√ßoit l'adresse du NAT de l'op√©rateur et il est difficile pour l'op√©rateur de la traduire "out" en raison du grand nombre d'appareils. Par exemple: 100 000 appareils, c'est le m√™me nombre d'adresses IP et dans le cadre d'IPv4, il ne semble tout simplement pas possible de le mettre en ≈ìuvre. La transition vers IPv6 peut r√©soudre ce probl√®me, mais vous devez toujours payer pour l'adresse ¬´blanche¬ª de l'appareil sur le r√©seau, ce qui affectera consid√©rablement la poche des clients d'entreprise.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, dans le cas g√©n√©ral, il s'av√®re que l'appareil ne peut fonctionner qu'en mode unidirectionnel, en transmettant des donn√©es au serveur sans possibilit√© de recevoir des donn√©es du serveur, car le serveur n'est pratiquement pas au courant lorsque l'appareil entre en contact pour la premi√®re fois. </font><font style="vertical-align: inherit;">Ou, utilisez en moyenne pas plus de cinq minutes apr√®s l'√©tablissement de la connexion entre l'appareil et le serveur pour transf√©rer des donn√©es du serveur vers l'appareil.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIDD (Non-IP Data Delivery) - pourquoi est-ce n√©cessaire?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous travaillez avec le r√©seau NB-IoT, il est tr√®s difficile de se tourner vers un appareil pour transmettre une commande ou certaines donn√©es. Pour r√©soudre ce probl√®me, un m√©canisme d'optimisation du transfert de petites quantit√©s de donn√©es, la livraison de donn√©es non IP (NIDD), a √©t√© invent√©. </font><font style="vertical-align: inherit;">Le m√©canisme r√©duit la taille globale du message transmis en r√©duisant les en-t√™tes. </font><font style="vertical-align: inherit;">Ceci, √† son tour, affecte positivement les caract√©ristiques de l'appareil: il r√©duit la consommation d'√©nergie et augmente l'autonomie (autonomie de la batterie). </font><font style="vertical-align: inherit;">En cons√©quence, le rejet de la prise en charge IP entra√Æne des appareils moins chers, un temps de d√©veloppement r√©duit, une comp√©titivit√© accrue sur le march√© des appareils IoT, etc.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCEF (Service Capability Exposure Function) - un cadeau pour les utilisateurs</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le SCEF est un √©l√©ment de r√©seau fonctionnel qui est apparu pour la premi√®re fois et le 3GPP version 13, d√©ploy√© du c√¥t√© de l'op√©rateur mobile et fournissant un canal de communication s√©curis√© entre le SCS / AS (Service Capability Server / Application Server) et le dispositif NB-IoT. SCEF fournit un canal de communication lors de la communication avec l'appareil via NIDD et donne acc√®s √† des capacit√©s / services r√©seau suppl√©mentaires du r√©seau NB-IoT via une interface de programmation d'application unique (√† partir de la description de l'API T8). Dans la version 13 du 3GPP, seul le m√©canisme SCEF d'interfa√ßage avec les interfaces de r√©seau cellulaire a √©t√© normalis√©. Ainsi, la charge du r√©seau est optimis√©e, l'interaction avec l'appareil est simplifi√©e, l'algorithme de l'appareil lui-m√™me est simplifi√©.SCEF r√©pond √©galement √† des exigences √©lev√©es en mati√®re de s√©curit√© de la transmission de donn√©es et de satisfaction des exigences pour confirmer le transfert de donn√©es r√©ussi dans les deux sens.</font></font><br>
<br>
<h3>    </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SCEF vous permet d'abstraire de syst√®mes complexes d'interaction avec le dispositif NB-IoT, y compris lorsque ce dernier est en mode eDRX ou PSM et n'est pas disponible pour le transfert de donn√©es en direction du serveur-&gt; dispositif. Lorsque l'appareil a √©t√© enregistr√© et ¬´convenu¬ª avec le r√©seau de l'op√©rateur du r√©seau au sujet du calendrier de communication, √† l'aide d'une interface simple, vous pouvez transf√©rer des donn√©es vers l'appareil et en recevoir des donn√©es, g√©rer ¬´l'abonnement¬ª de votre appareil et de l'AS √† certains √©v√©nements, d√©finir et lier vous-m√™me des √©v√©nements uniques. Noms d'identification universels et plus. Tout cela via la m√™me interface - API T8. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est important de noter qu'un serveur (AS) peut √™tre non pas un, mais plusieurs, et vous pouvez configurer de mani√®re flexible la distribution des informations entre les serveurs pour certains √©v√©nements ou groupes de p√©riph√©riques.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment √ßa fonctionne</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La solution la plus populaire pour organiser l'acc√®s d'un appareil √† un r√©seau cellulaire est l'utilisation d'un module cellulaire, par exemple:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/f6/yn/xw/f6ynxwxpeypur3-lg6wabxhwyay.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de son inscription dans un r√©seau cellulaire, un tel module transmet √† l'op√©rateur certaines informations, notamment l'IMSI d'une carte SIM d'abonn√© que l'op√©rateur peut associer au compte d'abonn√© ou √† l'abonn√© lui-m√™me s'il a acc√®s au compte personnel de l'op√©rateur. Derri√®re l'√©cran SCEF se cache la connaissance de la prochaine session de communication avec l'appareil. L'enregistrement d'un appareil non IP sur le r√©seau de l'op√©rateur n'est possible que s'il existe au moins un abonnement SCS / AS √† cet appareil. Aucun abonnement - personne ne communiquera avec cet appareil via NIDD, et l'appareil ne sera pas enregistr√© sur le r√©seau. Ainsi, SCEF, connaissant la prochaine session de communication, est en mesure de transf√©rer des donn√©es depuis / vers l'appareil, conform√©ment aux param√®tres de livraison sp√©cifi√©s et √† la dur√©e de vie du message transmis, sans avoir besoin d'organiser une surveillance suppl√©mentaire de l'√©tat du transfert de donn√©es et du contr√¥le de livraison.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L√©g√®ret√©</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'encapsulation d'unit√©s d'octets de donn√©es de l'appareil dans le protocole TCP et leur transfert vers le serveur sont co√ªteux en termes de centaines de milliers d'appareils abonn√©s dans le parc de l'entreprise. </font><font style="vertical-align: inherit;">SCEF vous permet d'abandonner l'IP sur l'appareil et de transf√©rer uniquement des donn√©es non IP, sans en-t√™tes IP via le canal de signal, ce qui contribue √† une r√©duction multiple du co√ªt de l'octet transmis et offre des avantages suppl√©mentaires de l'utilisation du service. </font><font style="vertical-align: inherit;">De plus, SCEF n'apporte aucune modification aux donn√©es transmises √† la fois √† l'appareil et √† partir de celui-ci, la charge utile est transmise de mani√®re transparente. </font><font style="vertical-align: inherit;">Par cons√©quent, en utilisant NIDD, il est possible de transf√©rer non seulement des donn√©es non structur√©es, mais √©galement des donn√©es ¬´envelopp√©es¬ª dans un format standardis√© compr√©hensible, tel que JSON, pour simplifier le traitement des donn√©es c√¥t√© AS.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©but des travaux</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La structure de l'URI (Uniform Resource Identifier) ‚Äã‚Äãsur l'exemple de Postman</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, vous devez avoir acc√®s √† votre compte personnel aupr√®s de l'op√©rateur (service M2M-manager). </font><font style="vertical-align: inherit;">Pour la mise en ≈ìuvre commerciale de MTS, une seule interface de compte personnel est fournie, o√π vous pouvez cr√©er ind√©pendamment un APN, un acc√®s de connexion / mot de passe √† l'API et attribuer les noms ScsAsID, extID pour vos appareils. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceux. </font><font style="vertical-align: inherit;">nous aurons au moins besoin:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScsAsID - Votre ID AS</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APN - celui qui est g√©n√©ralement utilis√© pour interagir avec le r√©seau ne fonctionnera pas</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Login / Password - donn√©es d'acc√®s √† votre compte personnel et d'interaction avec SCEF</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URI - Adresse HTT et port sur le r√©seau mis √† votre disposition par SCEF </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">externalID - ID de notre appareil</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passons √† la pratique</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La th√©orie est termin√©e, passons √† la partie la plus int√©ressante - la pratique sur le module de production SIMCom Wireless Solutions - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIM7020E</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/d6/_o/ued6_opqiacsy2l1axsi8zch1d0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez d'abord configurer le module lui-m√™me pour qu'il fonctionne avec NIDD. </font><font style="vertical-align: inherit;">Pour ce faire, mettez d'abord le module en mode CFUN = 0 et configurez-le:</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+CFUN=0<font></font>
+CPIN: NOT READY<font></font>
<font></font>
OK<font></font>
AT+ENVDM=1,tel_conn_mgr,default_pdn_flag,1,30<font></font>
OK<font></font>
AT*MCGDEFCONT="Non-IP","&lt;APN&gt;"<font></font>
OK<font></font>
AT+CFUN=1<font></font>
OK<font></font>
<font></font>
+CPIN: READY<font></font>
AT+EGACT=1,4,"&lt;APN&gt;"<font></font>
+EGACT:1<font></font>
<font></font>
OK<font></font>
<font></font>
+EGACT:1,1,1,4</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√©rification de l'enregistrement du module dans le r√©seau de donn√©es par paquets</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+CGREG?<font></font>
+CGREG: 0,1<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et terminer la configuration de NIDD</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=0,"&lt;APN&gt;","&lt;login&gt;","&lt;pass&gt;"<font></font>
+NIDD=0,0<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La r√©ponse du module contiendra account_id ici: + NIDD = 0, &lt;account_id&gt; - cela sera utile lors de l'activation de NIDD sur le module.</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=1,0<font></font>
+NIDD=1,0<font></font>
<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, account_id est 0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Termin√©. </font><font style="vertical-align: inherit;">√Ä ce stade, le travail avec le module est termin√©. </font><font style="vertical-align: inherit;">Passons √† la configuration de SCEF. </font></font><br>
<br>
<u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un point important: sans abonnement enregistr√© au SCEF, le module ne recevra pas d'inscription sur le r√©seau!</font></font></u><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SCEF</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API T8</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe un document sp√©cial d√©taillant l'interaction avec SCEF. </font><font style="vertical-align: inherit;">Cette API d√©finit un ensemble de mod√®les de donn√©es, de ressources et de proc√©dures connexes pour la transmission de donn√©es non IP.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/yd/nm/zz/ydnmzzwqtgnhqbxt7gnrsdpow00.png"></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Travailler avec SCEF et les abonnements aux services - JSON (JavaScript Object Notation)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les donn√©es qui incluent la configuration SCEF et qui sont transmises via HTTP / 1.1 √† SCEF doivent √™tre encod√©es au format JSON, et le corps de la requ√™te HTTP elle-m√™me dans le champ Content-Type doit inclure l'en-t√™te "application / json". </font><font style="vertical-align: inherit;">Dans le m√™me temps, si le message a √©t√© remis au destinataire et que la confirmation de livraison a √©t√© re√ßue - SCEF doit supprimer la configuration appropri√©e, envoyer le message via HTTP POST for AS avec le code d'√©tat ¬´200 OK¬ª et activer le rapport d'√©v√©nement.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Facteur</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je ne m'attarderai pas sur la fa√ßon de travailler avec cet utilitaire, sur Internet, vous pouvez trouver de nombreuses critiques. </font><font style="vertical-align: inherit;">Je peux seulement dire qu'il a quelques limitations dans sa version gratuite, mais nous n'avons pas besoin de beaucoup, la fonctionnalit√© fournie gratuitement est plus que suffisante pour nos t√¢ches. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s l'avoir t√©l√©charg√© et ouvert, le premier onglet nous accueillera - Launchpad, o√π il nous sera propos√© de cr√©er notre premi√®re demande, nous ne refuserons pas.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/mf/ej/si/mfejsivr_jj6forivsfp0jhstbu.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proc√©dez imm√©diatement √† la configuration de notre nouvel appareil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans un premier temps, nous avons configur√© la m√©thode GET, basculez-la en POST (un peu plus tard, il sera clair pourquoi cela est n√©cessaire). </font><font style="vertical-align: inherit;">Dans l'onglet ¬´Autorisation¬ª, entrez les ¬´informations d'identification¬ª que nous avons sous la main:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/96/ci/zc/96cizcahk44iy5-rpfvcznue3jw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cr√©ez maintenant notre premi√®re demande:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kp/zj/rp/kpzjrpd26ykmyt5r6xtyyoizk1w.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le corps de la demande, nous indiquons:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"pdnEstablishmentOption"</span>: <span class="hljs-string">"WAIT_FOR_UE"</span>,
    <span class="hljs-attr">"duration"</span>:<span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>
}</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Important!</font></font></b>
                        <div class="spoiler_text">  :<br>
<ul>
<li>‚Äúduration‚Äù ‚Äì      duration     SLA SCEF    (SCSAS/ID)   , SCEF    ,    </li>
<li>‚ÄúmaximumPacketSize‚Äù ‚Äì       / </li>
</ul></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notons imm√©diatement que les options suivantes sont possibles dans ¬´pdnEstablishmentOption¬ª:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WAIT_FOR_UE - tampon si le p√©riph√©rique n'est pas disponible (non enregistr√© sur le r√©seau ou dans le PSM ou dans un autre √©tat)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">INDICATE_ERROR - r√©pond imm√©diatement avec une erreur si le p√©riph√©rique n'est pas disponible</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEND_TRIGGER - utilisez le service de d√©clenchement d'appareil (canal de livraison alternatif via SMS). </font><font style="vertical-align: inherit;">Cet article n'est pas pris en compte.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous utilisons le m√™me param√®tre pour envoyer des donn√©es √† l'appareil. </font><font style="vertical-align: inherit;">Et lors de la cr√©ation d'un abonnement, nous pouvons imm√©diatement envoyer des donn√©es √† l'appareil, ce qui r√©duit le nombre de demandes d'API. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout! </font><font style="vertical-align: inherit;">Vous pouvez cliquer sur le bouton Envoyer et examiner attentivement ce que nous recevons en r√©ponse de SCEF:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>,<font></font>
    ‚ÄúreliableDataService<span class="hljs-attr">": false,
    "</span>maximumPacketSize<span class="hljs-attr">": 500,
    "</span>self<span class="hljs-attr">": "</span>/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;<span class="hljs-attr">",
    "</span>status<span class="hljs-attr">": "</span>ACTIVE<span class="hljs-attr">"
}</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans l'auto-ligne, nous sommes principalement int√©ress√©s par l'ID de la configuration que nous avons cr√©√©e, il est extr√™mement ind√©sirable de la perdre, car les op√©rateurs ne prendront probablement pas en charge la fonction de demande de toutes les configurations cr√©√©es. </font><font style="vertical-align: inherit;">Lorsqu'il y a plusieurs milliers de p√©riph√©riques cr√©√©s dans le cadre d'un ScsAsID, trop de charge sera cr√©√©e sur les serveurs SCEF pour diffuser toutes les configurations de p√©riph√©riques. </font><font style="vertical-align: inherit;">Nous prenons cela comme une r√®gle: un appareil = un abonnement dans le cadre du service ScsAsID. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, nous pouvons d√©j√† recevoir des donn√©es du module sur le serveur, l'adresse IP et le port dont nous avons indiqu√© ci-dessus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transfert de donn√©es du module vers l'AS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essayons de transf√©rer les donn√©es de l'appareil vers AS, revenons au module SIM7020E et si nous ne l'avons pas touch√© depuis le chapitre pr√©c√©dent et ne l'avons pas √©teint, nous lui enverrons la commande:</font></font><br>
<br>
<pre><code class="plaintext hljs">AT+NIDD=3,&lt;account_id&gt;,"6162636465"<font></font>
OK</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que notre message est encod√© en HEX et contient une s√©quence simple: ¬´abcde¬ª. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presque imm√©diatement sur le serveur (AS), qui est l'h√¥te, nous verrons:</font></font><br>
<br>
<pre><code class="xml hljs">POST / HTTP/1.1<font></font>
OCSGHTTPProcessor: 147ff7c6-a43d-4fc9-b303-0ca50f497747<font></font>
X-callback-t8-type: 3<font></font>
X-callback-url: http://<span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
X-api-network-service-node: 0<font></font>
Content-Type: application/json<font></font>
Content-Length: 214<font></font>
Host: <span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpAsyncClient/4.1.3 (Java/1.8.0_181)<font></font>
<font></font>
{"externalId":"<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>","niddConfiguration":"/3gpp-nidd/v1/<span class="hljs-tag">&lt;<span class="hljs-name">ScsAsID</span>&gt;</span>/configurations/<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>","data":"YWJjZGU=","reliableDataService":false}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le message lui-m√™me est arriv√© dans le codage </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base64</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et ressemble √† ceci:</font></font><br>
<pre><code class="plaintext hljs">YWJjZGU=</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous traduisons √† partir de l'encodage Base64, nous obtenons notre message d'origine:</font></font><br>
<pre><code class="plaintext hljs">abcde</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le codage Base64 est utilis√© car, lors de l'utilisation du codage ASCII, certaines donn√©es sont parfois perdues et l'utilisation de Base64 rend la transmission plus fiable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient √©galement de noter que dans ce cas, les informations transmises par le module ne sont pas stock√©es dans SCEF et sont imm√©diatement transmises √† notre serveur via HTTP.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transfert de donn√©es de l'AS vers le module</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin d'envoyer des donn√©es dans le sens de notre AS vers le module, revenons √† Postman et cr√©ons une nouvelle requ√™te en utilisant la m√©thode POST et l'encodage Base64. Nous enverrons 1234567890 (en Base64: MTIzNDU2Nzg5MA ==) √† notre module: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wz/mj/mc/wzmjmczcilbscfvrsjryyi5qfr8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter qu'un addendum est apparu dans le champ "adresse", dans lequel nous avons indiqu√© pour quelle configuration nous voulons envoyer le message. Si plusieurs appareils sont inclus dans notre configuration, vous pouvez utiliser l'identifiant ¬´externalGroupID¬ª et tous recevront ces donn√©es. Un autre point important est la dur√©e de vie du message envoy√©, indiqu√©e en secondes et a une plage assez large.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, si l'appareil n'est pas en ligne √† ce moment-l√†, notre message sera mis en m√©moire tampon sur SCEF, et la ligne ¬´maximumLatency¬ª nous dira combien de secondes il reste jusqu'√† ce que le message soit d√©truit si l'appareil ne nous contacte pas avant la minuterie que nous avons d√©finie. . </font><font style="vertical-align: inherit;">Voici √† quoi ressemblera la configuration SCEF actuelle demand√©e (en utilisant le m√©canisme GET, plus d'informations ci-dessous):</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">"http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ACTIVE"</span>,
    <span class="hljs-attr">"niddDownlinkDataTransfers"</span>: [<font></font>
    {<font></font>
        <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
        <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"data"</span>: <span class="hljs-string">"MDEyMzQ1Njc4OTA="</span>,
        <span class="hljs-attr">"maximumLatency"</span>: <span class="hljs-number">96</span>,
        <span class="hljs-attr">"priority"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">"self"</span>: <span class="hljs-string">"/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/1"</span><font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si, apr√®s expiration du d√©lai, l'appareil n'a toujours pas contact√©, SCEF informera votre serveur (AS) que le message n'a pas √©t√© remis en raison de l'expiration du d√©lai et le message sera supprim√©:</font></font><br>
<br>
<pre><code class="xml hljs">POST / HTTP/1.1<font></font>
OCSGHTTPProcessor: 14c8cab8-ecce-4868-a59e-1f784224518b<font></font>
X-callback-t8-type: 4<font></font>
X-callback-url: http://<span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
X-api-network-service-node: 0<font></font>
Content-Type: application/json<font></font>
Content-Length: 139<font></font>
Host: <span class="hljs-tag">&lt;<span class="hljs-name">IP</span> &gt;</span>:<span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span><font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpAsyncClient/4.1.3 (Java/1.8.0_181)<font></font>
<font></font>
{"niddDownlinkDataTransfer":"/3gpp-nidd/v1/<span class="hljs-tag">&lt;<span class="hljs-name">ScsAsID</span>&gt;</span>/configurations/<span class="hljs-tag">&lt;<span class="hljs-name">ID</span> &gt;</span>/downlink-data-deliveries/1","status":"FAILURE"}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cas de succ√®s, SCEF r√©pondra imm√©diatement:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"SUCCESS"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez ajouter la possibilit√© de hi√©rarchiser les messages au cas o√π ils seraient mis en m√©moire tampon. </font><font style="vertical-align: inherit;">Il est r√©gul√© par le param√®tre ¬´priorit√©¬ª. </font><font style="vertical-align: inherit;">Lorsqu'un nouveau message est envoy√© √† l'appareil et si le tampon de remise est d√©pass√© par SCEF, le message sera remplac√© par un message de priorit√© inf√©rieure, sinon le message ne sera pas accept√© pour la remise. </font><font style="vertical-align: inherit;">Il est √©galement possible de supprimer un message du tampon. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le message ne peut pas √™tre remis et qu'il est mis en m√©moire tampon, vous recevrez ce qui suit:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"self"</span>: <span class="hljs-string">"/3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/2"</span>,
   <span class="hljs-attr">"status"</span>: <span class="hljs-string">"BUFFERING"</span>
}</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Important!</font></font></b>
                        <div class="spoiler_text">  :<br>
/&lt;ID &gt;/downlink-data-deliveries/<b>1</b><br>
 ‚Äì      SCEF.  ,    .         .</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la r√©ception du message, le module signalera l'URC suivant:</font></font><br>
<br>
<pre><code class="plaintext hljs">+NIDD=4,0,11,0,"3031323334353637383930"</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lequel en traduction de HEX en ASCII sera notre message:</font></font><br>
<br>
<pre><code class="plaintext hljs">1234567890</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Laissez-le ici. </font><font style="vertical-align: inherit;">Notification de remise d'un message "tamponn√©":</font></font><br>
<br>
<pre><code class="json hljs">{
<span class="hljs-attr">"niddDownlinkDataTransfer"</span>:<span class="hljs-string">"3gpp-nidd/v1/&lt;ScsAsID&gt;/configurations/&lt;ID &gt;/downlink-data-deliveries/1"</span>,
<span class="hljs-attr">"status"</span>:<span class="hljs-string">"SUCCESS"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La surveillance de l'√©tat de l'√©tat de l'appareil est possible via un autre service SCEF appel√© ¬´Monitoring Event (MONTE)¬ª. </font><font style="vertical-align: inherit;">Au sein de MONTE, il est possible de recevoir des notifications sur les √©v√©nements et l'heure (par exemple, lorsque l'appareil devient disponible), en utilisant un syst√®me d'abonnement similaire. </font><font style="vertical-align: inherit;">Mais parlons-en une autre fois.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obtenir la configuration de SCEF</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous avez probablement remarqu√© que vous pouvez obtenir la configuration actuelle de SCEF. </font><font style="vertical-align: inherit;">Faisons cela. </font><font style="vertical-align: inherit;">Nous prenons le facteur que nous avons d√©j√† aim√© et cr√©ons la demande suivante en utilisant la m√©thode GET:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/i_/jp/j6/i_jpj6tfbbgoxt0u5sf6gl9obnk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceux. </font><font style="vertical-align: inherit;">nous laissons le corps du message lui-m√™me vide, et dans la barre d'adresse nous avons juste besoin de sp√©cifier l'ID de la configuration cr√©√©e pour nous afin de recevoir son √©tat actuel en r√©ponse:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">"&lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">"notificationDestination"</span>: <span class="hljs-string">" http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"ACTIVE"</span>,
    <span class="hljs-attr">"niddDownlinkDataTransfers"</span>: []<font></font>
}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppression d'une configuration sur SCEF</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien et le dernier - nous supprimerons la configuration cr√©√©e par nous. </font><font style="vertical-align: inherit;">Pour ce faire, utilisez la m√™me barre d'adresse que dans la configuration actuelle, mais changez-la en SUPPRIMER:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/w_/bt/n5/w_btn5pki3qerymozmgnub-f4ug.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√©ponse, nous recevrons:</font></font><br>
<br>
<pre><code class="json hljs">{
    <span class="hljs-attr">"externalId"</span>: <span class="hljs-string">" &lt;ID &gt;"</span>,
    <span class="hljs-attr">"duration"</span>: <span class="hljs-string">"2020-12-31T23:59:59Z"</span>,
    <span class="hljs-attr">" notificationDestination"</span>: <span class="hljs-string">" http://&lt;IP &gt;:&lt;port&gt;"</span>,
    <span class="hljs-attr">"reliableDataService"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"TERMINATED"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O√π dans la ligne ¬´√©tat¬ª, nous verrons que la configuration que nous avons cr√©√©e est supprim√©e.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus d'une th√®se peut √™tre √©crite sur le sujet de l'utilisation de SCEF, le sujet est vaste et deviendra bient√¥t extr√™mement pertinent pour de nombreux appareils M2M dans tous les domaines, et en particulier pour l'Internet des objets. </font><font style="vertical-align: inherit;">La principale chose que je voulais vous dire √©tait comment commencer √† travailler avec NIDD et SCEF hors de la bo√Æte afin que vous puissiez le d√©couvrir par vous-m√™me. </font><font style="vertical-align: inherit;">Mais je suis √©galement toujours heureux de vous aider: support@simcom.com (marqu√© pour l'√©quipe RUS), dans la lettre, vous devez indiquer vos coordonn√©es et quelques mots sur votre projet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans les articles suivants, nous analyserons soigneusement d'autres aspects du travail avec les modules cellulaires, et vous √©crivez dans les commentaires quel sujet vous int√©ressera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je tiens √† remercier tout particuli√®rement Sergey Novikov, l'expert principal des solutions convergentes et des services multim√©dias.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sanov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) de MTS pour une aide inestimable dans la pr√©paration de l'article.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sources utilis√©es</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NB-IoT: comment √ßa marche? </font><font style="vertical-align: inherit;">Partie 3: SCEF - un guichet unique d'acc√®s aux services de l'op√©rateur </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ETSI TS 129 122</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr489594/index.html">Framework vs Platform: quelle est la diff√©rence?</a></li>
<li><a href="../fr489596/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 334 (du 17 au 23 f√©vrier)</a></li>
<li><a href="../fr489600/index.html">GDC-2020: √† quoi s'attendre de l'une des plus grandes expositions de d√©veloppement de jeux</a></li>
<li><a href="../fr489602/index.html">Prerender sur toile 2D</a></li>
<li><a href="../fr489604/index.html">Comment puis-je, chef d'√©quipe, √©valuer des projets</a></li>
<li><a href="../fr489610/index.html">Domotique compl√®te dans un nouveau b√¢timent</a></li>
<li><a href="../fr489612/index.html">Conf√©rence DEFCON 27. Duplication de cl√©s m√©caniques √† acc√®s limit√©. Partie 2</a></li>
<li><a href="../fr489614/index.html">Marquage des r√©sidus de chaussures en 1C. R√©solution du probl√®me de num√©risation et de t√©l√©chargement vers Honest Sign</a></li>
<li><a href="../fr489618/index.html">Avons-nous besoin d'un tel format? .. et de quelques statistiques</a></li>
<li><a href="../fr489620/index.html">9 astuces pour les terminaux Windows par Scott Hanselman</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>