<!doctype html>
<html class="no-js" lang="zh-CN">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍⚕️ 🚥 🥗 使用声音包：React应用程序中的声音效果 📅 ▶️ 😷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="也许事实是我专业从事声音，但是我希望网络声音更大。
 
 我知道许多人不会支持我这种愿望。并非没有原因！从历史上看，互联网上的声音使用极其不成功且难看：
 
 

- 在网络的早期，一些页面播放了背景MIDI音乐。
- 弹出式诈骗者使用声音来达到他们的坏目标。他们借助声音寻求吸引用户的注意力，并使欺...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>使用声音包：React应用程序中的声音效果</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/495896/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也许事实是我专业从事声音，但是我希望网络声音更大。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我知道许多人不会支持我这种愿望。</font><font style="vertical-align: inherit;">并非没有原因！</font><font style="vertical-align: inherit;">从历史上看，互联网上的声音使用极其不成功且难看：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在网络的早期，一些页面播放了背景MIDI音乐。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹出式诈骗者使用声音来达到他们的坏目标。</font><font style="vertical-align: inherit;">他们借助声音寻求吸引用户的注意力，并使欺诈行为更加可信。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声音会出现在自动开始播放的视频中（嗯，这绝对是一场噩梦）。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
没错，我敢肯定，完全放弃声音就像孩子被水泼了一样。声音可以强调用户的操作；它们可以增强反馈。声音可以使一些乏味的动作变亮。如果网页上的声音带有品味，它们可以改善用户对项目的体验，使其更加“有形”和真实。</font><font style="vertical-align: inherit;">
这个想法并不新鲜：在游戏和移动应用程序中，声音不断被使用。实际上，网络是大势所趋的一个奇怪的例外。我想到的大多数数字产品都使用声音。我不是在谈论移动应用程序中使用的触觉响应，以使它们更接近现实。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/b-/6n/zy/b-6nzyre8opiksyua24jajetxqu.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在撰写博客的过程中，我想尝试声音。用户与之交互的博客的许多界面元素都会产生安静的声音。例如，在右上部分</font><font style="vertical-align: inherit;">博客的</font><font style="vertical-align: inherit;">家</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有几个按钮来切换主题，打开和关闭声音。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于很少使用网络声音，因此声音的使用会对用户对网站的感知产生重大影响。这是开发人员的一种秘密武器，使用它可能对某些项目产生令人惊讶的巨大积极影响。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了简化声音的使用，我设计了一个独立的</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm包</font></font></a> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形式的用于处理声音的挂钩，</font></font><code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将其发布。</font><font style="vertical-align: inherit;">在这里，我将讨论该挂钩的功能，并分享在网络上使用声音的技巧。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您渴望查看代码并开始使用此挂钩- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其GitHub存储库。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总览</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该软件包</font></font><code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个React挂钩，可帮助开发人员使用声音效果。</font><font style="vertical-align: inherit;">这是一个例子：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> useSound <span class="hljs-keyword">from</span> <span class="hljs-string">'use-sound'</span>;
<span class="hljs-keyword">import</span> boopSfx <span class="hljs-keyword">from</span> <span class="hljs-string">'../../sounds/boop.mp3'</span>;
<span class="hljs-keyword">const</span> BoopButton = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play] = useSound(boopSfx);
&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{play}</span>&gt;</span>Boop!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用此钩子将为项目构建增加大约1 Kb。</font><font style="vertical-align: inherit;">的确，他在异步模式下加载了第三方</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Howler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖项</font><font style="vertical-align: inherit;">，其大小为10 KB。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该挂钩为开发人员提供了许多不错的功能。</font><font style="vertical-align: inherit;">其中，我要注意以下几点：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过早停止播放，以及暂停并继续播放。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载诸如声音“精灵表”之类的东西并将其划分为单独的声音。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以设置播放速度，以加快和减慢声音的播放速度。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很多事件监听器。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">借助Howler，可以使用许多高级功能。</font></font></li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是hook文档，您可以在其中找到有关其用法和API参考的详细指南。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用声音基础</font></font></font></h2><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍安装</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
首先，您需要使用yarn或npm安装软件包：</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#  yarn</span><font></font>
yarn add use-sound<font></font>
<span class="hljs-comment">#  NPM</span><font></font>
npm install use-sound<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍进口</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
程序包</font></font><code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导出唯一的默认值-这是一个挂钩</font></font><code>useSound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以这样导入：</font></font><br>
<br>
<pre><code class="bash hljs">import useSound from <span class="hljs-string">'use-sound'</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另外，您将需要导入计划使用的音频文件。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果在处理React项目时使用的是</font></font><code>create-react-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gatsby之类的</font><font style="vertical-align: inherit;">东西</font><font style="vertical-align: inherit;">，那么您应该能够以与导入其他资源（如图像）相同的方式导入MP3文件：</font></font><br>
<br>
<pre><code class="bash hljs">import boopSfx from <span class="hljs-string">'../../sounds/boop.mp3'</span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果使用自写的Webpack配置，则将需要使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件加载器加载器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来处理.mp3文件</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此外，您可以使用放置在文件夹</font></font><code>public</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或中的</font><font style="vertical-align: inherit;">声音文件</font></font><code>static</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，本文显示的演示使用公共文件夹中的静态文件。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索并准备声音</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
安装依赖关系和编写代码只是成功的一半。</font><font style="vertical-align: inherit;">对于计分页面，我们需要选择适当的声音。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我最喜欢的用于查找声音的资源是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">freesound.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我在那里找到了几乎所有在我的博客中使用的声音。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创用CC零下</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有许多声音许可</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要下载文件，您需要在资源上注册。</font><font style="vertical-align: inherit;">您可以免费使用声音。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要做好以下准备：选择正确的声音，您必须认真浏览freesound.org的内容。</font><font style="vertical-align: inherit;">例如，这里的要点是许多声音质量较差。</font><font style="vertical-align: inherit;">可以将找到正确声音的过程与在大海捞针中寻找针头的过程进行比较。</font><font style="vertical-align: inherit;">实际使用中的声音准备就像未切割的钻石一样。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s声音的准备</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
freesound.org的许多声音需要一些改进：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声音像字符串一样，可以用空白框起来。</font><font style="vertical-align: inherit;">通常会切出无声片段，因此，在发声事件发生后立即会重现相应的声音效果。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">准备声音时，您可能需要调整其音量，以使一个项目中使用的所有声音具有相同的音量。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freesound.org具有以各种音频格式存储的声音。</font><font style="vertical-align: inherit;">您可能非常需要将您喜欢的声音转换为MP3。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以使用Audacity完成所有这些编辑。这是一个免费的开源跨平台音频编辑器。在这里，我不会讨论如何使用此编辑器，但是有很多很棒的教程。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为什么我要谈论将声音转换为MP3？事实是，以前所有浏览器都不支持音频格式。因此，在项目中包含MP3，AIFF和WAV文件并在支持它们的环境中使用它们是司空见惯的。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在现代情况下，对我们来说幸运的是，所有主流浏览器（包括IE 9）都支持MP3格式。MP3格式存储的声音也得到了很好的压缩。</font><font style="vertical-align: inherit;">这样一来，您可以转到比使用其他格式编码声音小得多的文件，而不损失质量。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声音和可用性</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管我主张在网络上使用声音，但我承认并非所有用户都喜欢它。在这里，我们谈论的是超越主观沉默的考虑。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有视力障碍的人使用屏幕阅读器来访问网页。而且，我们不仅在谈论那些看不见页面的人。例如，屏幕阅读器供有阅读困难的阅读障碍者和其他类似问题的人们使用。屏幕阅读器是用于解析文档和阅读文本的程序。如果站点包含很多声音效果，则它们可能会干扰从屏幕读取文本的程序的正常运行。反过来，这将阻止依赖于此类程序的人们使用该网站。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，在站点页面中包括一个用于打开和关闭声音的按钮很重要。此外，此类按钮应可用于键盘导航（使用Tab键）。理想情况下，在用户使用Tab键到达此类按钮之前，不应播放任何声音。另外，Web项目</font><font style="vertical-align: inherit;">必须</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记住</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该按钮的状态-这样用户不必经常使用它来使声音静音。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另一方面，听力障碍的用户甚至不会知道与页面的某些交互伴随声音。</font><font style="vertical-align: inherit;">对于在关闭声音的情况下在Internet上工作的人也是如此。</font><font style="vertical-align: inherit;">因此，重要的是在执行某些重要动作时不要完全依赖声音。</font><font style="vertical-align: inherit;">如果将声音用作对某些用户操作的确认，请确保在此页面上还显示对此操作的视觉确认。</font><font style="vertical-align: inherit;">网站应保持完整功能且无声音。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜谱</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
让我们看几个示例（在</font><font style="vertical-align: inherit;">本文原文</font><font style="vertical-align: inherit;">的相应</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您可以进行交互地实验并聆听不同控件发出的声音）。</font></font><br>
<br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍复选框</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我真的很喜欢这个标志。</font><font style="vertical-align: inherit;">如果您使用鼠标，请先非常快地单击它，然后在单击和释放鼠标按钮之间稍作停顿。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [isChecked, setIsChecked] = React.useState(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-literal">false</span><font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [playActive] = useSound(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'/sounds/pop-down.mp3'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.25</span> }<font></font>
&nbsp;&nbsp;);<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [playOn] = useSound(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'/sounds/pop-up-on.mp3'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.25</span> }<font></font>
&nbsp;&nbsp;);<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [playOff] = useSound(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'/sounds/pop-up-off.mp3'</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.25</span> }<font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Checkbox</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">name</span>=<span class="hljs-string">"demo-checkbox"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">checked</span>=<span class="hljs-string">{isChecked}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">label</span>=<span class="hljs-string">"I agree to self-isolate"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsChecked(!isChecked)}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMouseDown={playActive}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMouseUp={() =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isChecked ? playOff() : playOn();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}
&nbsp;&nbsp;&nbsp;&nbsp;/&gt;</span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍及早中断声音再现</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有时，您只希望在用户与某个控件交互时才播放声音。</font><font style="vertical-align: inherit;">请注意以下示例中仅当指针位于控件上方时才再现声音的方式。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-comment">// ,  ,  'rising-pops' :</span>
&nbsp;&nbsp;<span class="hljs-comment">// - fanfare</span>
&nbsp;&nbsp;<span class="hljs-comment">// - dun-dun-dun</span>
&nbsp;&nbsp;<span class="hljs-comment">// - guitar-loop</span>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/rising-pops.mp3'</span>;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play, { stop }] = useSound(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;soundUrl,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="hljs-attr">volume</span>: <span class="hljs-number">0.5</span> }<font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [isHovering, setIsHovering] = React.useState(
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-literal">false</span><font></font>
&nbsp;&nbsp;);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">{()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setIsHovering(true);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;play();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMouseLeave={() =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setIsHovering(false);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}
&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">ButtonContents</span> <span class="hljs-attr">isHovering</span>=<span class="hljs-string">{isHovering}</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hover over me!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">ButtonContents</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pitch增加音高</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是一个有趣效果的示例。</font><font style="vertical-align: inherit;">它包含以下事实：下次单击“赞”按钮所产生的声音要高于其上一次单击所产生的声音：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/glug-a.mp3'</span>;<font></font>
<font></font>
  <span class="hljs-keyword">const</span> [playbackRate, setPlaybackRate] = React.useState(<span class="hljs-number">0.75</span>);<font></font>
<font></font>
  <span class="hljs-keyword">const</span> [play] = useSound(soundUrl, {<font></font>
    playbackRate,<font></font>
    <span class="hljs-attr">volume</span>: <span class="hljs-number">0.5</span>,<font></font>
  });<font></font>
<font></font>
  <span class="hljs-keyword">const</span> handleClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {<font></font>
    setPlaybackRate(playbackRate + <span class="hljs-number">0.1</span>);<font></font>
    play();<font></font>
  };<font></font>
<font></font>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"img"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"Heart"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><font></font>
  );<font></font>
}</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▍按钮开始和暂停播放</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
这是用于启动和暂停声音的按钮的实现代码，这将帮助您开发新的Spotify：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/guitar-loop.mp3'</span>;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play, { stop, isPlaying }] = useSound(soundUrl);<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PlayButton</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">active</span>=<span class="hljs-string">{isPlaying}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">size</span>=<span class="hljs-string">{60}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">iconColor</span>=<span class="hljs-string">"var(--color-background)"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">idleBackgroundColor</span>=<span class="hljs-string">"var(--color-text)"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">activeBackgroundColor</span>=<span class="hljs-string">"var(--color-primary)"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">play</span>=<span class="hljs-string">{play}</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">stop</span>=<span class="hljs-string">{stop}</span>
&nbsp;&nbsp;&nbsp;&nbsp;/&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br>
<h3><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ound声音“精灵列表”</font></font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您打算在React组件中使用很多声音，那么使用声音“精灵列表”可能是有意义的。</font><font style="vertical-align: inherit;">声音精灵列表是一个包含许多不同声音的文件。</font><font style="vertical-align: inherit;">通过将它们打包到一个文件中，我们增加了使用它们的便利性，并且避免发出许多并行HTTP请求来下载单个文件（我希望有一天我们能够使用HTTP / 2复用）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这里，我们使用声音“精灵列表”创建鼓机。</font><font style="vertical-align: inherit;">您可以使用鼠标或键盘上的1-4键来播放虚拟卷轴。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Demo</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;<span class="hljs-keyword">const</span> soundUrl = <span class="hljs-string">'/sounds/909-drums.mp3'</span>;<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">const</span> [play] = useSound(soundUrl, {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">sprite</span>: {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">kick</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">350</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">hihat</span>: [<span class="hljs-number">374</span>, <span class="hljs-number">160</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">snare</span>: [<span class="hljs-number">666</span>, <span class="hljs-number">290</span>],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">cowbell</span>: [<span class="hljs-number">968</span>, <span class="hljs-number">200</span>],<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;});<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-comment">//  ,   'keydown',</span>
&nbsp;&nbsp;<span class="hljs-comment">//    .</span><font></font>
&nbsp;&nbsp;useKeyboardBindings({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">1</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'kick'</span> }),
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">2</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'hihat'</span> }),
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">3</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'snare'</span> }),
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-number">4</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> play({ <span class="hljs-attr">id</span>: <span class="hljs-string">'cowbell'</span> }),<font></font>
&nbsp;&nbsp;})<font></font>
<font></font>
&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"kick"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'kick' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"hihat"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'hihat' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"snare"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'snare' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">aria-label</span>=<span class="hljs-string">"cowbell"</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">onMouseDown</span>=<span class="hljs-string">{()</span> =&gt;</span> play({ id: 'cowbell' })}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/&gt;</span></span><font></font>
&nbsp;&nbsp;);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在包装中使用声音“精灵列表”的详细信息</font></font><code>use-sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，可以发现</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在开发网站时使用声音的领域中，我最担心的事实是这是一个研究很少的领域。</font><font style="vertical-align: inherit;">我已经尝试了一段时间的声音，但是我仍然觉得我才刚刚起步。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，现在您可以使用各种工具来开始自己的声音实验。</font><font style="vertical-align: inherit;">我建议您这样做，并找出它将引导您的地方。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">亲爱的读者们！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您如何在网页上使用声音？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN495884/index.html">使用递归神经网络的时间序列预测</a></li>
<li><a href="../zh-CN495888/index.html">PyCon俄罗斯已经为未来的演讲者开放了CFP。参与表格和预期主题</a></li>
<li><a href="../zh-CN495890/index.html">在Docker Swarm中配置Nginx / LetsEncrypt捆绑软件</a></li>
<li><a href="../zh-CN495892/index.html">你真的知道什么是数组吗？</a></li>
<li><a href="../zh-CN495894/index.html">JavaScript性能评估</a></li>
<li><a href="../zh-CN495898/index.html">处理Node.js中内存泄漏的实用指南</a></li>
<li><a href="../zh-CN495902/index.html">验证码：终止转换</a></li>
<li><a href="../zh-CN495904/index.html">可以预测流行吗？</a></li>
<li><a href="../zh-CN495908/index.html">奖励之路</a></li>
<li><a href="../zh-CN495910/index.html">在Ubuntu单板IMG映像中安装ROS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>