<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïå üé¢ üñåÔ∏è ECS back and forth üë®üèΩ‚Äçüéì ‚óΩÔ∏è üë©‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! I present to you the translation of the article "ECS back and forth - Part 1 - Introduction" by Michele skypjack Caini .
 ECS back and fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ECS back and forth</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490500/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, Habr! </font><font style="vertical-align: inherit;">I present to you the translation of the article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ECS back and forth</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Part 1 - Introduction"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> by </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Michele </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">skypjack</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Caini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<h1 id="ecs-back-and-forth"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECS back and forth</font></font></h1><br>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 1 - Introduction.</font></font></em></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When I first learned about the architectural template entity entity component system, I went to look for more information about it on the Internet. </font><font style="vertical-align: inherit;">But, unfortunately, then enough light was not shed on this topic, and there were no resources where different approaches with their pros and cons would be described. </font><font style="vertical-align: inherit;">Almost every article, post, comments (a significant proportion of them) were about one specific implementation and only slightly referred to other examples.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this post I will try to get you up to speed and discover some introductory models for you, giving some tips so that you can make your own ECS.</font></font></p><br>
<h2 id="pochemu-ya-dolzhen-ispolzovat-ecs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why should I use ECS?</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Try not to be fooled by what they say around. </font><font style="vertical-align: inherit;">If you are working on AAA projects at a serious level, the main reason why you should use such a serious tool is the organization of the code, and not (only) the performance. </font><font style="vertical-align: inherit;">Of course, performance is not the last thing, but a well-organized code base is priceless, and with most games you will not have performance problems, be they written using the OPP paradigm or with another optional implementation of the component template.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In essence, component-oriented programming is an extremely powerful tool that allows you to make code easily extensible and speed up the development cycle. </font><font style="vertical-align: inherit;">Undoubtedly, all this should be your primary goal.</font></font></p><br>
<p>,    .       ,               ,          .</p><a name="habracut"></a><br>
<h2 id="vvedenie"></h2><br>
<p>     ,        .</p><br>
<p> ,    .    ()   .  , ,  ,    ,     .           :   .<br>
    ,      .  ,   ,  ,  .</p><br>
<p>     ,     , ,      .  , ,         .</p><br>
<p>    ?</p><br>
<p>       (  ),   update .     ,         ,    ,      .</p><br>
<p>              ,    .     .             ,          ,   .       ,  .</p><br>
<p>     ,       ,          - .</p><br>
<h2 id="ecs-back-and-forth-1">ECS back and forth</h2><br>
<p>     ECS.</p><br>
<p>     ,      ,        .          <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">¬´Game Programing Patterns¬ª</a>.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"></a>   -.</p><br>
<p>     ,       ECS ,     .</p><br>
<p>  ,    ,      .</p><br>
<h3 id="unikalnye-identifikatory"> </h3><br>
<p>     -       .  ,         ,         .  ,      .                   ,         .</p><br>
<p>   ‚Äì         .       . </p><br>
<p>     .         ,  ‚Äî .     ,           .</p><br>
<p>     ,    ,  ,   ,     -.  -     ,        ,    .       ,   -    . ,  ,     , -         .</p><br>
<p>     ‚Äì <em>family generator</em>.      ,    .  ,   : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">entityx</a> and <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">EnTT</a>.</p><br>
<p>  family generator.</p><br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">family</span> {</span>
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> <span class="hljs-title">identifier</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span> </span>{
        <span class="hljs-keyword">static</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> value = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> value++;<font></font>
    } <font></font>
<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span>&gt;
    <span class="hljs-keyword">static</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> <span class="hljs-title">type</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span> </span>{
        <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-keyword">size_t</span> value = identifier();
        <span class="hljs-keyword">return</span> value;<font></font>
    }<font></font>
};</code></pre><br>
<p>      :</p><br>
<pre><code class="cpp hljs"><span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> id = family::type&lt;my_type&gt;();</code></pre><br>
<p>          .         . ,   ,       . </p><br>
<p>   family generator    .        ,   ,       ,      .</p><br>
<h3 id="s-nachala-associativnye-massivy-i-ierarhii"> :    </h3><br>
<p>   -       ( )   .    ‚Äì     ECS, ,   ,       - .</p><br>
<p> ,    ,        -    ,   .</p><br>
<p>      ?</p><br>
<p> ,      ,         .         ,       ,     .  bitset      .</p><br>
<p>      ,       ,  .  family generator         , .         . </p><br>
<p> ,  ‚Äî       .         ,           ,     ,   .  :</p><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">my_nth_system</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;game_objects&gt; &amp;objects)</span> </span>{
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;&amp;object: objects) {
        <span class="hljs-keyword">if</span>(object.has&lt;position, velocity&gt;()) {
            <span class="hljs-keyword">auto</span> &amp;pos = object.get&lt;position&gt;();
            <span class="hljs-keyword">auto</span> &amp;vel = object.get&lt;velocity&gt;();<font></font>
<font></font>
            <span class="hljs-comment">// ...</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br>
<p>   ,   :          ,     .  ,     ,      .</p><br>
<p>   .  ,               .    ,   :    ,   ,     .</p><br>
<p>      .  ,      ,        ,      .       ,     ,      , , ,                .   ,         .  ,          ,    .</p><br>
<p> ,      ‚Äì          .   ?         .      ,    .  ,   ?   ,             - ,        .</p><br>
<h3 id="na-puti-k-resheniyu-bez-ispolzovaniya-obektov-suschnosti--eto-indeksy">      :  ‚Äî  </h3><br>
<p>        ‚Äì    .</p><br>
<p>           .          ,      .                .            ,      .       .</p><br>
<p>,       ,  - ,    ‚Äî        :).        ,          .      0,  ‚Äì 1,   .    ,   ,       0,       1. </p><br>
<p>   ?        ,       ,      ,    0         0,   1        1,   .  ,    N   M   ,                 .</p><br>
<p>     .  ,         ,        .     ,     .  -  ,    entityx,    ECS  C++.</p><br>
<p>       bitset      .            .  ,   C   N &gt; 0.       C   ,      N .      C   0,      .     ? Bitsets ‚Äì      .</p><br>
<p>      ,     ,   ,  bitsets    .</p><br>
<p>,  ,       . ,     ,  ,   , , -,     .          ,  :   - - ,       ,     .     ,       ,     ,           ,  ,    .  bitset    ,      .</p><br>
<h2 id="chto-dalshe"> ?</h2><br>
<p> ,             . ,      ,        ,   ,      ,     .</p><br>
<p>         ,    .  , ,    ,  ,         . </p><br>
<h2 id="dayte-mne-znat-esli-vam-eto-pomoglo">  ,    </h2><br>
<p> ,   ,   .</p><br>
<p>    ,     ,     GitHub ,     .     ,     .</p><br>
<p>.</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en490490/index.html">Weekend Reading: 10 materials on the effects of sound on health - from ‚Äúnoise hygiene‚Äù to good sleep and GTD</a></li>
<li><a href="../en490492/index.html">Warehouse robot learns to sort non-standard things</a></li>
<li><a href="../en490494/index.html">Shop rats, Widiots and gamers: propaganda of the dangers of video games in the 80s</a></li>
<li><a href="../en490496/index.html">Creating an Online Store on Nuxt.js 2 Walkthrough Part 1</a></li>
<li><a href="../en490498/index.html">As I wrote a semi-decentralized cryptocurrency in PHP. (Part 2 - Development)</a></li>
<li><a href="../en490502/index.html">Ansible vs Puppet</a></li>
<li><a href="../en490510/index.html">Companies spend $ 16 billion on drones to capture 8 trillion market</a></li>
<li><a href="../en490512/index.html">(Almost) Auto-generate colors</a></li>
<li><a href="../en490516/index.html">AI exists, but is that not what we thought?</a></li>
<li><a href="../en490518/index.html">An Introduction to the Lena Data Analysis Architectural Framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>