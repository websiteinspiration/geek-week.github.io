<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéæ üóº üíáüèø ROS2 vs ROS1. Installing ROS2 on Ubuntu 18.04 üë©üèø‚Äçüè≠ ‚úñÔ∏è üë®‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ROS (Robotic operation system) confidently occupies a leading position in the standards of robotics. In the words of a famous politician, ‚Äúnot only ev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ROS2 vs ROS1. Installing ROS2 on Ubuntu 18.04</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/492058/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROS (Robotic operation system) confidently occupies a leading position in the standards of robotics. </font><font style="vertical-align: inherit;">In the words of a famous politician, ‚Äúnot only everything‚Äù is already using it. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this article, we will try to take a look at the next stage of ROS development - the ROS2 system, suitable for more ‚Äúsleek‚Äù developers. </font><font style="vertical-align: inherit;">Let's compare both systems in general terms, and at the same time install ROS2 on Ubuntu 18.04.</font></font><br>
<img src="https://habrastorage.org/webt/t5/or/sz/t5orszz4c_9hi-4amh2rguhijqi.png"><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/hc/yv/np/hcyvnpkgswck-mtyh7-b-rbocwu.jpeg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* image from </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.theconstructsim.com</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A slightly outdated model will be used as the basic PC configuration - intel NUC (5i5RYK), 4GB RAM, SSD M.2 120Gb. </font><font style="vertical-align: inherit;">NUC performance is enough "for the eyes" for ROS purposes, but single-board cards (raspberry, odroid, jetson) are deliberately not considered, because each of them has its own specifics. </font><font style="vertical-align: inherit;">It is assumed that Ubuntu 18.04 (recommended for use with ROS) is already installed.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introduction.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Over the past decade, ROS (ROS1) has grown and has grown several times. </font><font style="vertical-align: inherit;">Currently, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
he has a huge list of packages, where each package solves the problem either partially or </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
completely, which eliminates the concept of the invention of the wheel again. </font><font style="vertical-align: inherit;">The packages created by the community have led to the creation of a completely new approach to robotics and the proposed intelligent filling for existing systems.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Limitations of ROS1.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Despite the fact that ROS1 gave a certain freedom of communication with complex hardware and software components, there are some difficulties associated with the use of ROS1 in the final product. These difficulties begin to appear when there is a whole fleet of heterogeneous robots (mobile robots, robotic manipulators, and so on). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Establishing a relationship between them is quite difficult due to the architectural limitations of ROS1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 The first limitation is that ROS1 does not support the multimaster concept.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 The second limitation of ROS1 is that, despite the fact that nodes can communicate with each other without problems, there is no safe way in this communication. </font><font style="vertical-align: inherit;">Anyone who has the ability to connect to the master (master-node) can access the topics and then either exploit or modify them. </font><font style="vertical-align: inherit;">Therefore, the main purpose of ROS1 is to test the concept or prototype for scientific purposes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 And the third, perhaps the main limitation of ROS1 is that this system is not a real-time system. </font><font style="vertical-align: inherit;">This leads to delays in receiving data and their loss. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 All the above disadvantages pushed to the creation of ROS2.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What are the benefits of ROS2?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - allows you to establish secure connections between system components (nodes) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - the interaction is real-time </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - the connection of several robots into one network is simplified </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - the quality of communication between nodes </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 is </font><font style="vertical-align: inherit;">improved </font><font style="vertical-align: inherit;">- the ROS architecture level is implemented directly on the hardware </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - the latest packages are used updates (ROS1 is not updated as often). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS2 follows the industry standard and implements real-time interaction through the so-called DDS (Data Distributed Services) concept.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROS2 Versions</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first official stable version of ROS2 was released in December 2017. </font><font style="vertical-align: inherit;">The distribution was named "Ardent Apalone." </font><font style="vertical-align: inherit;">Then there was a release in June 2018, with the name "Bouncy Bolson". </font><font style="vertical-align: inherit;">Crystal Clemmys appeared in December 2018. Dashing Diademata (current version) in May 2019. As you can see, distributions are updated quite cheerfully, and, hopefully, the alphabet is enough for the first time.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OS support</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS2 supports (if we talk about official support) Linux, Windows, macOS, and Real-Time Operating Systems (RTOS) OS layers, ROS1 only Linux and macOS. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
More detailed OS support:</font></font><br>
<img src="https://habrastorage.org/webt/eg/hc/mx/eghcmxsgojwogzmaduavzuc4luu.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So why do you need ROS2?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS2 uses the same operating principles as ROS1. At the same time, ROS2 is not part of ROS1. ROS2 was created to step over the limits of its fellow by using newer dependencies and tools. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unlike ROS1, whose stack is written in C ++, and client libraries in C ++ and Python, ROS-2 also uses the C language. An independent level written in C is introduced that interacts with ROS2 client libraries such as rclcpp, rclpy, and rcljava. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS2 better supports network configurations and implements reliable connections.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROS2 also no longer uses the concept of nodelets (http://wiki.ros.org/nodelet) and supports the ability to initialize multiple nodes at the same time (multinode initialization). </font><font style="vertical-align: inherit;">Unlike ROS1, another distinguishing feature of ROS2 is the ability to track the status of a node and receive messages if a node or topic has been added or deleted. </font><font style="vertical-align: inherit;">This can be used to create fault tolerant systems. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Changes that have occurred in ROS2 compared to ROS1:</font></font><br>
<img src="https://habrastorage.org/webt/7k/pk/uk/7kpkukgdc147poqnqwb44k-nyhy.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install ROS2</font></font></h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we‚Äôll install from the sources the current distribution of Dashing Diademata (dashing) on ‚Äã‚ÄãUbuntu 18.04</font></font><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Set up the environment.</font></font></h3><br>
<code>$ sudo locale-gen en_US en_US.UTF-8<br>
$ sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8<br>
$ export LANG=en_US.UTF-8<br>
</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add ROS2 repositories.</font></font></h3><br>
<code>$ sudo apt update &amp;&amp; sudo apt install curl gnupg2 lsb-release<br>
$ curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc |<br>
sudo apt-key add -<br>
$ sudo sh -c 'echo "deb [arch=amd64,arm64] http://packages.ros.org/ros2/ubuntu `lsb_release -cs` main" &gt; /etc/apt/sources.list.d/ros2-latest.list'<br>
</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install the ROS Developer Tools.</font></font></h3><br>
<code>$ sudo apt update &amp;&amp; sudo apt install -y build-essential cmake git<br>
python3-colcon-common-extensions python3-lark-parser python3-pip<br>
python-rosdep python3-vcstool wget<br>
$ python3 -m pip install -U argcomplete flake8 flake8-blind-except<br>
flake8-builtins flake8-class-newline flake8-comprehensions flake8-<br>
deprecated flake8-docstrings flake8-import-order flake8-quotes<br>
pytest-repeat pytest-rerunfailures pytest pytest-cov pytest-runner<br>
setuptools<br>
$ sudo apt install --no-install-recommends -y libasio-dev libtinyxml2-dev<br>
</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a workspace ROS2.</font></font></h3><br>
<code>$ mkdir -p ~/ros2_ws/src<br>
$ cd ~/ros2_ws<br>
$ wget https://raw.githubusercontent.com/ros2/ros2/release-latest/ros2.repos<br>
$ vcs import src &lt; ros2.repos<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It will take some time.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Install dependencies using rosdep.</font></font></h3><br>
<code>$ sudo rosdep init<br>
$ rosdep update<br>
$ rosdep install --from-paths src --ignore-src --rosdistro dashing -y --skip-keys "console_bridge fastcdr fastrtps libopensplice67 libopensplice69<br>
rti-connext-dds-5.3.1 urdfdom_headers"<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If everything went well and the entry ‚ÄúAll required rosdeps installed successfully‚Äù appears in the terminal, you can proceed to the next step.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We collect the code, install colcon.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In ROS1, packages were collected using the catkin tool. </font><font style="vertical-align: inherit;">ROS2 uses colcon (a utility that includes catkin_make, catkin_make_isolated, catkin_tools, and ament_tools). </font><font style="vertical-align: inherit;">colcon can collect both ROS1 packets and ROS2 packets. </font><font style="vertical-align: inherit;">
After the last command, you can safely go to drink tea, because </font><font style="vertical-align: inherit;">Installation may take about an hour. </font><font style="vertical-align: inherit;">
Upon its successful completion, approximately the following information about the successful installation will appear in the terminal:</font></font><br>
<code>$ sudo apt install python3-colcon-common-extensions<br>
$ cd ~/ros2_ws/<br>
$ colcon build --symlink-install<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<img src="https://habrastorage.org/webt/sp/q8/cq/spq8cqdcwy1wgi2orxqudevbowg.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setting up the environment for ROS2 (environment).</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order not to enter the long command 'source ~ / ros2_ws / install / local_setup.bash' each time to initiate ROS in the terminal, add alias to bashrc: </font></font><br>
<code>$ sudo gedit ~/.bashrc</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Next, add the line at the end of the file: </font></font><br>
<code>alias initros2='source ~/ros2_ws/install/local_setup.bash</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Save, exit the file and re-read it with the command (so as not to reboot system):</font></font><br>
<code>$ source ~/.bashrc</code><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Check the operation of ROS2.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1st terminal: </font><font style="vertical-align: inherit;">
These commands start the talking node. </font><font style="vertical-align: inherit;">
2nd terminal: </font><font style="vertical-align: inherit;">
Here, respectively, the ‚Äúlistening‚Äù node is launched. </font><font style="vertical-align: inherit;">
Visually, both nodes look something like this: </font><font style="vertical-align: inherit;">
You can also look at the topics generated by the nodes in the 3rd terminal: </font><font style="vertical-align: inherit;">
To summarize. </font><font style="vertical-align: inherit;">ROS2 was reviewed in comparison with ROS1, the installation procedure for ROS2 (Dashing Diademata (dashing)) on Ubuntu 18.04 was demonstrated.</font></font><br>
<code>$ initros2<br>
$ ros2 run demo_nodes_cpp talker<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<code>$ initros2<br>
$ ros2 run demo_nodes_py listener<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<img src="https://habrastorage.org/webt/t6/rr/fs/t6rrfssulbc7kwyz7g_jda_3tro.png"><br>
<br><font style="vertical-align: inherit;"></font><br>
<img src="https://habrastorage.org/webt/wq/3k/qe/wq3kqeydablienpcxlf3mc7tqsa.png"><br>
<br><font style="vertical-align: inherit;"></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en492040/index.html">10 great github repositories every web developer should know</a></li>
<li><a href="../en492042/index.html">How coronavirus affects delivery services</a></li>
<li><a href="../en492048/index.html">Overview of Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software</a></li>
<li><a href="../en492054/index.html">Schr√∂dinger Automators</a></li>
<li><a href="../en492056/index.html">4 examples of iota transfers</a></li>
<li><a href="../en492060/index.html">How to solve? "ECONNREFUSED - connection refused by server"</a></li>
<li><a href="../en492062/index.html">Golang backend server template - part 1 (HTTP server)</a></li>
<li><a href="../en492066/index.html">Why Event Sourcing is the antipattern for microservices interaction</a></li>
<li><a href="../en492068/index.html">S7 Group opens a department ‚ÄúInformation Technologies in Aviation‚Äù at MIPT</a></li>
<li><a href="../en492074/index.html">Gotta go fast. Fast IMAP Email Sync</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>