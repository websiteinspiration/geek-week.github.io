<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🏭 👨🏾‍💼 👊🏼 F #, increasing the contrast of the image by aligning the histograms 🖖🏽 🔴 ✍🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The histogram alignment operation (increasing contrast) is often used to increase image quality. Within the framework of this article, the concept of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>F #, increasing the contrast of the image by aligning the histograms</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502986/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">histogram alignment</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> operation </font><font style="vertical-align: inherit;">(increasing contrast) is often used to increase image quality. </font><font style="vertical-align: inherit;">Within the framework of this article, the concept of a </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">histogram</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the theory of an algorithm for its alignment, and practical examples of the operation of this algorithm </font><font style="vertical-align: inherit;">will be considered </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">To facilitate image processing, we will use the </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV library</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Also, we will make a comparative analysis of the results of our algorithm and the algorithm that is already built into </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenCV</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<p><img src="https://habrastorage.org/webt/dn/pc/o5/dnpco5duag8x8_br59lp8nkbfiy.jpeg"></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The histogram is a function </font></font><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h (x)</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which returns the total number of pixels whose brightness is equal to </font></font><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Histogram </font></font><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h of</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> halftone image </font></font><strong><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></em></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is given by</font></font><br>
<br>
<p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo stretchy=&quot;false&quot;>(</mo><mi>m</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>,</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>I</mi><mo stretchy=&quot;false&quot;>(</mo><mi>r</mi><mo>,</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="26.336ex" height="2.634ex" viewBox="0 -809.3 11338.9 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-6D" x="966" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="1844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-3D" x="2511" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-7C" x="3568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="3846" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-72" x="4236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2C" x="4687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-63" x="5132" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="5566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-7C" x="5955" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-49" x="6234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="6738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-72" x="7128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2C" x="7579" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-63" x="8024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="8458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-3D" x="9125" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-6D" x="10181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-7C" x="11060" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font></mo></mrow><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font></mo></mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">|</font></font></mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1">h(m)=|(r, c) | I(r, c)=m|</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, where m corresponds to the intervals of brightness values</font></font><br>
</blockquote><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Below is the pseudo-code for calculating the histogram.</font></font></p><br>
<pre><code class="cpp hljs"><span class="hljs-comment">//   H    I.</span><font></font>
<font></font>
<span class="hljs-function">procedure <span class="hljs-title">histogram</span><span class="hljs-params">(I,H)</span></span>;<font></font>
{<font></font>
    <span class="hljs-comment">//     .</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span> to MaxVal<font></font>
        H[i] := <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-comment">//   .</span>
    <span class="hljs-keyword">for</span> L := <span class="hljs-number">0</span> to MaxRow
        <span class="hljs-keyword">for</span> P := <span class="hljs-number">0</span> to MaxCol {<font></font>
            grayval := I[r,c];<font></font>
            H[grayval] := H[grayval] + <span class="hljs-number">1</span>;<font></font>
        };<font></font>
}</code></pre><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visually, the histogram is a rectangle, the width of which is equal to the maximum possible value of the brightness of a point in the original image. </font><font style="vertical-align: inherit;">For grayscale images, we will work with a range of brightness of points from 0 to 255, which means that the width of the histogram will be 256. The height of the histogram can be any, but for clarity, we will work with rectangular histograms.</font></font></p><br>
<p>   ,  —     256 (  ),            .      .</p><br>
<h4 id="risunok-1-graficheskoe-otobrazhenie-gistogrammy-hx"> 1.    <em>h(x)</em></h4><br>
<p><img src="https://habrastorage.org/webt/nw/ty/gk/nwtygkavclwkf2yrjg9jq8xrgcy.png"></p><br>
<p>    .   —    <strong><em>cdf(x)</em></strong>       .</p><br>
<p>   ,     <strong>OpenCV</strong>  ,     ,     . ,         ,     .      F#     <strong>OpenCVSharp4</strong>. </p><br>
<p>     ,      Visual Studio,     .    ,    MacOS,   ,     "<strong><em>runtimes/osx-x64/native/libOpenCvSharpExtern.dylib</em></strong>"  ,       .         <br>
<strong>Unable to load shared library 'OpenCvSharpExtern' or one of its dependencies</strong></p><br>
<p>  ,    </p><br>
<pre><code class="haskell hljs"><span class="hljs-title">open</span> <span class="hljs-type">OpenCvSharp</span>
<span class="hljs-title">open</span> <span class="hljs-type">Microsoft</span>.<span class="hljs-type">FSharp</span>.<span class="hljs-type">NativeInterop</span><font></font>
<font></font>
// mat -   <span class="hljs-type">Mat</span>  <span class="hljs-type">OpenCV</span>
<span class="hljs-title">let</span> getHistogram (mat: <span class="hljs-type">Mat</span>) =<font></font>
    //   <font></font>
    <span class="hljs-keyword">let</span> hx = <span class="hljs-type">Array</span>.zeroCreate&lt;int&gt; <span class="hljs-number">256</span><font></font>
    //  <font></font>
    mat.<span class="hljs-type">ForEachAsByte</span>(fun value _ -&gt;
                           <span class="hljs-keyword">let</span> v = int (<span class="hljs-type">NativePtr</span>.get value <span class="hljs-number">0</span>)<font></font>
                           hx.[v] &lt;- hx.[v] + <span class="hljs-number">1</span>)<font></font>
    //  <font></font>
    hx</code></pre><br>
<p>  <strong> </strong>,  .        <strong><em></em></strong>  <strong><em>X</em></strong></p><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>c</mi><mi>d</mi><mi>x</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>h</mi><mo stretchy=&quot;false&quot;>(</mo><mn>0</mn><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mi>h</mi><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>+</mo><mi>h</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.448ex" height="2.634ex" viewBox="0 -809.3 13970.5 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-64" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-78" x="957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="1529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-78" x="1919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="2491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-3D" x="3158" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-68" x="4215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="4791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-30" x="5181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="5681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2B" x="6293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-68" x="7294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="7870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-31" x="8260" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="8760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2B" x="9150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2E" x="9928" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2E" x="10373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2E" x="10818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2B" x="11263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-68" x="12042" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="12618" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-78" x="13008" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="13580" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></mn><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2">cdx(x)=h(0)+h(1)+...+h(x)</script></p><br>
<p>  ,         <strong><em></em></strong>  <strong><em>X</em></strong>.        1 (  ).</p><br>
<p> ,  <strong><em>cdf(x)</em></strong></p><br>
<pre><code class="haskell hljs"><span class="hljs-title">let</span> getCdx hx = // hx - <font></font>
   //   <font></font>
   hx |&gt; <span class="hljs-type">Array</span>.mapi (fun x _ -&gt; <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> hx.[<span class="hljs-number">0.</span>.(x<span class="hljs-number">-1</span>)] |&gt; <span class="hljs-type">Array</span>.sum <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>)</code></pre><br>
<h2 id="vyravnivanie-gistogrammy"> </h2><br>
<p>  1 ,  <strong><em> </em></strong>   .         (  ),            .      ,   <strong><em> </em></strong>  ,         .</p><br>
<p>       2.</p><br>
<h4 id="risunok-2-vyrovnennaya-gistogramma"> 2.  </h4><br>
<p><img src="https://habrastorage.org/webt/wk/um/6a/wkum6ahvnhmo-ppvwwreev419tw.png"></p><br>
<p> ,           .</p><br>
<p>         :</p><br>
<p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>r</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mfrac><mrow><mi>c</mi><mi>d</mi><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mi>c</mi><mi>d</mi><msub><mi>f</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><mrow><mi>p</mi><mi>i</mi><mi>x</mi><mi>e</mi><mi>l</mi><mi>s</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></mfrac><mo>&amp;#x22C5;</mo><mn>255</mn><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.516ex" height="5.884ex" viewBox="0 -1562.8 16152.6 2533.5" role="img" focusable="false" style="vertical-align: -2.255ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-66" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-78" x="940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="1512" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-3D" x="2179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-72" x="3236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-6F" x="3687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-75" x="4173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-6E" x="4745" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-64" x="5346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="5869" y="0"></use><g transform="translate(6259,0)"><g transform="translate(120,0)"><rect stroke="none" width="7039" height="60" x="0" y="220"></rect><g transform="translate(60,725)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-64" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-66" x="957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-28" x="1507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-78" x="1897" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="2469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2212" x="3081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-63" x="4081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-64" x="4515" y="0"></use><g transform="translate(5038,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-69" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-6E" x="1224" y="0"></use></g></g></g><g transform="translate(1330,-686)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-69" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-78" x="849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-65" x="1421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-6C" x="1888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMATHI-73" x="2186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-2212" x="2878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-31" x="3878" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-22C5" x="13760" y="0"></use><g transform="translate(14261,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-35" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/502986/&amp;usg=ALkJrhiD3YJqWT52D7jz1GT_jhFcyGwsxw#MJMAIN-29" x="15763" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">u</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mfrac><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></mi><msub><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></mi><mrow class="MJX-TeXAtom-ORD"><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></mi></mrow></msub></mrow><mrow><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l</font></font></mi><mi><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s</font></font></mi><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></mn></mrow></mfrac><mo><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⋅</font></font></mo><mn><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">255</font></font></mn><mo stretchy="false"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3">f(x)=round(\frac{cdf(x)-cdf_{min}}{pixels-1}\cdot255)</script></p><br>
<p><br>
<strong><em>cdf(x)</em></strong> —        <em>X</em><br>
<strong><em>cdf_min</em></strong> —    ,   <br>
<strong><em>pixels</em></strong> —     <br>
<strong><em>255</em></strong> —     .     255<br>
<strong><em>round</em></strong> —       </p><br>
<p>  F#   :</p><br>
<pre><code class="haskell hljs">//  cdf_min
<span class="hljs-title">let</span> cdxMin = cdx |&gt; <span class="hljs-type">Array</span>.filter (fun v -&gt; v &gt; <span class="hljs-number">0</span>) |&gt; <span class="hljs-type">Array</span>.min<font></font>
//      <font></font>
<span class="hljs-title">let</span> totalPixels = src.<span class="hljs-type">Rows</span> * src.<span class="hljs-type">Cols</span> // src -   <span class="hljs-type">Mat</span>   <font></font>
<font></font>
<span class="hljs-title">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.src.<span class="hljs-type">Rows</span> <span class="hljs-keyword">do</span>
    for x <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.src.<span class="hljs-type">Cols</span> <span class="hljs-keyword">do</span><font></font>
        //     <font></font>
        <span class="hljs-keyword">let</span> s = int(src.<span class="hljs-type">At</span>&lt;byte&gt;(y, x))<font></font>
        //     <font></font>
        <span class="hljs-keyword">let</span> fx = (float(cdx.[s]) - float(cdxMin))/(float(totalPixels - <span class="hljs-number">1</span>))*<span class="hljs-number">255.</span><font></font>
        //    <font></font>
        equalizeImage.<span class="hljs-type">Circle</span>(x, y, <span class="hljs-number">1</span>, new <span class="hljs-type">Scalar</span>(double(fx)))</code></pre><br>
<p>     ,           .             .   ,     OpenCV       .</p><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"> </b>
                        <div class="spoiler_text"><pre><code class="haskell hljs">// <span class="hljs-type">Learn</span> more about <span class="hljs-type">F</span># at http://fsharp.org
<span class="hljs-title">open</span> <span class="hljs-type">OpenCvSharp</span>
<span class="hljs-title">open</span> <span class="hljs-type">Microsoft</span>.<span class="hljs-type">FSharp</span>.<span class="hljs-type">NativeInterop</span><font></font>
<font></font>
//     <font></font>
<span class="hljs-title">let</span> getHistogram (mat: <span class="hljs-type">Mat</span>) =
    <span class="hljs-keyword">let</span> hx = <span class="hljs-type">Array</span>.zeroCreate&lt;int&gt; <span class="hljs-number">256</span>
    mat.<span class="hljs-type">ForEachAsByte</span>(fun value _ -&gt;
                           <span class="hljs-keyword">let</span> v = int (<span class="hljs-type">NativePtr</span>.get value <span class="hljs-number">0</span>)<font></font>
                           hx.[v] &lt;- hx.[v] + <span class="hljs-number">1</span>)<font></font>
    hx<font></font>
<font></font>
//      <font></font>
<span class="hljs-title">let</span> getCdx hx =<font></font>
    hx |&gt; <span class="hljs-type">Array</span>.mapi (fun x _ -&gt; <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> hx.[<span class="hljs-number">0.</span>.(x<span class="hljs-number">-1</span>)] |&gt; <span class="hljs-type">Array</span>.sum <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>)<font></font>
<font></font>
//     <font></font>
<span class="hljs-title">let</span> drawHistogramAndCdx hx cdx (mat: <span class="hljs-type">Mat</span>) =
    <span class="hljs-keyword">let</span> histoWidth = <span class="hljs-number">256</span>
    <span class="hljs-keyword">let</span> histoHeight = <span class="hljs-number">256</span><font></font>
<font></font>
    //     <font></font>
    <span class="hljs-keyword">let</span> cdxMax = cdx |&gt; <span class="hljs-type">Array</span>.max<font></font>
    //      ( )<font></font>
    //    <font></font>
    <span class="hljs-keyword">let</span> cdxK = float(histoHeight)/float(cdxMax)<font></font>
<font></font>
    <span class="hljs-keyword">let</span> histMax = hx |&gt; <span class="hljs-type">Array</span>.max
    <span class="hljs-keyword">let</span> histK = float(histoHeight)/float(histMax)<font></font>
<font></font>
    <span class="hljs-keyword">let</span> histMat = new <span class="hljs-type">Mat</span>(histoWidth, histoHeight, <span class="hljs-type">MatType</span>.<span class="hljs-type">CV_8UC4</span>)<font></font>
    hx<font></font>
    |&gt; <span class="hljs-type">Array</span>.iteri (fun x v -&gt;
                        <span class="hljs-keyword">let</span> histDy = int(float(v)*histK)
                        <span class="hljs-keyword">let</span> cdxDy = int(float(cdx.[x])*cdxK)<font></font>
                        //   h(x)<font></font>
                        mat.<span class="hljs-type">Line</span>(x, histoHeight<span class="hljs-number">-1</span>, x, histoHeight<span class="hljs-number">-1</span>-histDy, <span class="hljs-type">Scalar</span>.<span class="hljs-type">White</span>)<font></font>
                        //    cdx(x)<font></font>
                        mat.<span class="hljs-type">Circle</span>(x, histoHeight-cdxDy, <span class="hljs-number">1</span>, <span class="hljs-type">Scalar</span>.<span class="hljs-type">Blue</span>))<font></font>
<font></font>
[&lt;<span class="hljs-type">EntryPoint</span>&gt;]
<span class="hljs-title">let</span> main argv =<font></font>
<font></font>
    <span class="hljs-keyword">let</span> histoWidth = <span class="hljs-number">256</span>
    <span class="hljs-keyword">let</span> histoHeight = <span class="hljs-number">256</span><font></font>
<font></font>
    <span class="hljs-keyword">let</span> src = <span class="hljs-type">Cv2</span>.<span class="hljs-type">ImRead</span>(<span class="hljs-string">"cat.jpg"</span>, <span class="hljs-type">ImreadModes</span>.<span class="hljs-type">Grayscale</span>)
    <span class="hljs-keyword">let</span> equalizeImage = new <span class="hljs-type">Mat</span>(src.<span class="hljs-type">Rows</span>, src.<span class="hljs-type">Cols</span>, <span class="hljs-type">MatType</span>.<span class="hljs-type">CV_8UC1</span>)<font></font>
<font></font>
    // calculate histogram h(x)<font></font>
    <span class="hljs-keyword">let</span> hx = getHistogram src<font></font>
<font></font>
    // calculate cdf(x) = h(<span class="hljs-number">0</span>) + h(<span class="hljs-number">1</span>) + .. + h(x)
    <span class="hljs-keyword">let</span> cdx = getCdx hx<font></font>
<font></font>
    // draw histogram<font></font>
    <span class="hljs-keyword">let</span> histMat = new <span class="hljs-type">Mat</span>(histoWidth, histoHeight, <span class="hljs-type">MatType</span>.<span class="hljs-type">CV_8UC4</span>)<font></font>
    drawHistogramAndCdx hx cdx histMat<font></font>
<font></font>
    // equalize the histogram<font></font>
    <span class="hljs-keyword">let</span> cdxMin = cdx |&gt; <span class="hljs-type">Array</span>.filter (fun v -&gt; v &gt; <span class="hljs-number">0</span>) |&gt; <span class="hljs-type">Array</span>.min
    <span class="hljs-keyword">let</span> totalPixels = src.<span class="hljs-type">Rows</span> * src.<span class="hljs-type">Cols</span><font></font>
<font></font>
    for y <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.src.<span class="hljs-type">Rows</span> <span class="hljs-keyword">do</span>
        for x <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.src.<span class="hljs-type">Cols</span> <span class="hljs-keyword">do</span>
            <span class="hljs-keyword">let</span> s = int(src.<span class="hljs-type">At</span>&lt;byte&gt;(y, x))
            <span class="hljs-keyword">let</span> fx = (float(cdx.[s]) - float(cdxMin))/(float(totalPixels - <span class="hljs-number">1</span>))*<span class="hljs-number">255.</span>
            //equalizeImage.<span class="hljs-type">Set</span>&lt;<span class="hljs-type">Scalar</span>&gt;(y, x, new <span class="hljs-type">Scalar</span>(double(fx)))<font></font>
            equalizeImage.<span class="hljs-type">Circle</span>(x, y, <span class="hljs-number">1</span>, new <span class="hljs-type">Scalar</span>(double(fx)))<font></font>
<font></font>
    // calculate equalize histogram<font></font>
    <span class="hljs-keyword">let</span> hx2 = getHistogram equalizeImage
    <span class="hljs-keyword">let</span> cdx2 = getCdx hx2<font></font>
<font></font>
    <span class="hljs-keyword">let</span> histMat2 = new <span class="hljs-type">Mat</span>(histoWidth, histoHeight, <span class="hljs-type">MatType</span>.<span class="hljs-type">CV_8UC4</span>)<font></font>
    drawHistogramAndCdx hx2 cdx2 histMat2<font></font>
<font></font>
    // opencv equalize histogram<font></font>
    <span class="hljs-keyword">let</span> opencCVImage = new <span class="hljs-type">Mat</span>(src.<span class="hljs-type">Rows</span>, src.<span class="hljs-type">Cols</span>, <span class="hljs-type">MatType</span>.<span class="hljs-type">CV_8UC1</span>)
    <span class="hljs-keyword">let</span> in1 = <span class="hljs-type">InputArray</span>.<span class="hljs-type">Create</span>(src)
    <span class="hljs-keyword">let</span> in2 = <span class="hljs-type">OutputArray</span>.<span class="hljs-type">Create</span>(opencCVImage)<font></font>
<font></font>
    <span class="hljs-type">Cv2</span>.<span class="hljs-type">EqualizeHist</span>(in1, in2)<font></font>
<font></font>
    // get opencv histogram<font></font>
    <span class="hljs-keyword">let</span> hx3 = getHistogram opencCVImage
    <span class="hljs-keyword">let</span> cdx3 = getCdx hx3<font></font>
<font></font>
    <span class="hljs-keyword">let</span> histMat3 = new <span class="hljs-type">Mat</span>(histoWidth, histoHeight, <span class="hljs-type">MatType</span>.<span class="hljs-type">CV_8UC4</span>)<font></font>
    drawHistogramAndCdx hx3 cdx2 histMat3<font></font>
<font></font>
    // show results<font></font>
    use w1 = new <span class="hljs-type">Window</span>(<span class="hljs-string">"original image"</span>, src)<font></font>
    use w2 = new <span class="hljs-type">Window</span>(<span class="hljs-string">"original histogram"</span>, histMat)<font></font>
<font></font>
    use w3 = new <span class="hljs-type">Window</span>(<span class="hljs-string">"custom equalize image"</span>, equalizeImage)<font></font>
    use w4 = new <span class="hljs-type">Window</span>(<span class="hljs-string">"custom equalize histogram"</span>, histMat2)<font></font>
<font></font>
    use w5 = new <span class="hljs-type">Window</span>(<span class="hljs-string">"opencv equalize image"</span>, opencCVImage)<font></font>
    use w6 = new <span class="hljs-type">Window</span>(<span class="hljs-string">"opencv equalize histogram"</span>, histMat3)<font></font>
<font></font>
    <span class="hljs-type">Cv2</span>.<span class="hljs-type">WaitKey</span>() |&gt; ignore<font></font>
<font></font>
    <span class="hljs-number">0</span> // return an integer exit code</code></pre></div>
                    </div><br>
<h2 id="sravnivaem--poluchennye-rezultaty">  </h2><br>
<h4 id="risunok-3-sravnivaem-rezultaty"> 3.  </h4><br>
<p>     ,     ,   OpenCV.</p><br>
<p>    ( ),  — ,      —    OpenCV.</p><br>
<p><img src="https://habrastorage.org/webt/jh/xr/lg/jhxrlg0nqgz1iabgqumouilyzzy.png"></p><br>
<p><img src="https://habrastorage.org/webt/y1/zj/p5/y1zjp5mjxupn55ou4q5xofxl9wg.png"></p><br>
<p><img src="https://habrastorage.org/webt/ue/ha/wu/uehawuhq7ywaxqlt24ql2udiicw.png"></p><br>
<p><img src="https://habrastorage.org/webt/sy/gz/y0/sygzy0e4j7tgmvkvb8i1qynjjlg.png"></p><br>
<h2 id="podvodim-itogi"> </h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The author of the article is far from original and did not come up with anything new, presenting to the public another story about how the histogram alignment algorithm is implemented and why it is needed. </font><font style="vertical-align: inherit;">The main purpose of the article was not only to talk about the algorithm, but also to give specific practical examples and source codes that you can copy and verify yourself, and possibly experiment. </font><font style="vertical-align: inherit;">Of course, the histogram algorithm is not the only one used to filter images. </font><font style="vertical-align: inherit;">But this is the topic of other issues.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en502972/index.html">SD Express: SD 8.0 & PCIe 4.0 standard. What is this and why?</a></li>
<li><a href="../en502974/index.html">C # Implementations in C # .NET</a></li>
<li><a href="../en502978/index.html">Color scheme without the help of a designer</a></li>
<li><a href="../en502980/index.html">ENT and plot in non-plot games on the example of Throne: Kingdom at War</a></li>
<li><a href="../en502984/index.html">How to choose a psychologist / psychotherapist?</a></li>
<li><a href="../en502988/index.html">Business expert and programming. Combine cannot be shared</a></li>
<li><a href="../en502992/index.html">How to make an electronic signature yourself</a></li>
<li><a href="../en502994/index.html">What Microsoft introduced to the Build developers: winget, GUI programs in WSL2 and more</a></li>
<li><a href="../en502998/index.html">We make the government services plugin work for all users in a terminal environment</a></li>
<li><a href="../en503000/index.html">Developing private skills for Alice. What is not taught at Alice's School</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>