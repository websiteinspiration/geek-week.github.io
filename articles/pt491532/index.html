<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê´ ‚úèÔ∏è ü§õüèº Laravel + Docker + Gitlab. Por onde come√ßar ü§≠ ü¶Ç üòú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Normalmente, eu sempre ficava sem uma janela de encaixe e achava que ela era necess√°ria apenas para grandes projetos em grandes empresas. Mas um dia v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Laravel + Docker + Gitlab. Por onde come√ßar</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491532/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normalmente, eu sempre ficava sem uma janela de encaixe e achava que ela era necess√°ria apenas para grandes projetos em grandes empresas. </font><font style="vertical-align: inherit;">Mas um dia vi como uma janela de encaixe funciona em conjunto com o gitlab de um amigo e percebi que ainda deveria estud√°-lo. </font><font style="vertical-align: inherit;">No entanto, como geralmente acontece, n√£o encontrei um artigo adequado - eles eram muito complexos ou incompletos ou estavam impl√≠citos que todos sabem por si s√≥. </font><font style="vertical-align: inherit;">Eu tive que procurar v√°rias fontes por um longo tempo, juntar tudo e, no final, consegui fazer um projeto simples e um CI / CD para ele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo o trabalho pode ser dividido em tr√™s partes: na m√°quina local, no hitlab e no servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, para a implementa√ß√£o do projeto, precisamos de uma conta gitlab e um servidor remoto com virtualiza√ß√£o KVM ou XEN.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 1. M√°quina local</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na m√°quina local, voc√™ precisa instalar a janela de encaixe. </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comente</font></font></b><div class="spoiler_text">  . Docker     Linux  ( Ubuntu, ),    Windows  MacOS.   macos     ,     Windows      .   - ,        linux .   - ,           .       VirtualBox.          Ubuntu     <br>
</div></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instalar em um ambiente Linux, voc√™ deve executar os seguintes comandos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exclua cont√™ineres antigos:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get remove docker docker-engine docker.io containerd runc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualize o apt:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale os seguintes pacotes para poder baixar a janela de encaixe do reposit√≥rio via https:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install \<font></font>
    apt-transport-https \<font></font>
    ca-certificates \<font></font>
    curl \<font></font>
    gnupg-agent \<font></font>
    software-properties-common</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione a chave da janela de encaixe GPG oficial:</font></font><br>
<br>
<pre><code class="bash hljs">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verifique se a impress√£o est√° correta:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-key fingerprint 0EBFCD88</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Responda:</font></font><br>
<br>
<pre><code class="bash hljs">pub   rsa4096 2017-02-22 [SCEA]<font></font>
      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88<font></font>
uid           [ unknown] Docker Release (CE deb) &lt;docker@docker.com&gt;<font></font>
sub   rsa4096 2017-02-22 [S]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Baixe a vers√£o est√°vel:</font></font><br>
<br>
<pre><code class="bash hljs">sudo add-apt-repository \
   <span class="hljs-string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   <span class="hljs-subst">$(lsb_release -cs)</span> \
   stable"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualize o apt novamente:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale o mecanismo docker mais recente:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install docker-ce docker-ce-cli containerd.io</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verifique o funcionamento da janela de encaixe:</font></font><br>
<br>
<pre><code class="bash hljs">sudo docker run hello-world</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se tudo estiver correto, o download da imagem Hello World come√ßar√°. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instru√ß√µes completas na documenta√ß√£o oficial da janela de encaixe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m precisamos instalar o docker-compose. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A instru√ß√£o oficial est√° aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instal√°-lo, execute os comandos no terminal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fa√ßa o download do reposit√≥rio:</font></font><br>
<br>
<pre><code class="bash hljs">sudo curl -L <span class="hljs-string">"https://github.com/docker/compose/releases/download/1.25.4/docker-compose-<span class="hljs-subst">$(uname -s)</span>-<span class="hljs-subst">$(uname -m)</span>"</span> -o /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicionando um exerc√≠cio certo:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verifica√ß√£o de vers√£o:</font></font><br>
<br>
<pre><code class="bash hljs">sudo docker-compose --version</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instalamos a janela de encaixe, agora √© necess√°rio coletar a imagem. </font><font style="vertical-align: inherit;">Para fazer isso, usei o artigo do site digitalocean: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.digitalocean.com/community/tutorials/how-to-set-up-laravel-nginx-and-mysql-with-docker-compose-ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Haver√° uma reimpress√£o deste artigo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baixando o Laravel e instalando depend√™ncias</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Na primeira etapa, baixamos a vers√£o mais recente do Laravel e instalamos as depend√™ncias do projeto, incluindo o Composer, o gerenciador de pacotes PHP no n√≠vel do aplicativo. </font><font style="vertical-align: inherit;">Instalaremos essas depend√™ncias usando o Docker para n√£o executar uma instala√ß√£o global do Composer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√° para o diret√≥rio inicial e clone a vers√£o mais recente do Laravel em um diret√≥rio chamado laravel-app:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~<font></font>
git <span class="hljs-built_in">clone</span> https://github.com/laravel/laravel.git laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√° para o diret√≥rio laravel-app:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> ~/laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, monte a imagem do compositor do Docker nos diret√≥rios necess√°rios para o seu projeto Laravel para evitar a sobrecarga de instalar o Composer globalmente:</font></font><br>
<br>
<pre><code class="bash hljs">docker run --rm -v $(<span class="hljs-built_in">pwd</span>):/app composer install</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os sinalizadores -v e --rm do comando docker run criam um cont√™iner virtual que se liga ao diret√≥rio atual at√© que seja exclu√≠do. </font><font style="vertical-align: inherit;">O conte√∫do do diret√≥rio ~ / laravel-app ser√° copiado para o cont√™iner e o conte√∫do do Composer criado dentro do cont√™iner da pasta do fornecedor ser√° copiado para o diret√≥rio atual. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em conclus√£o, defina o n√≠vel de permiss√µes no diret√≥rio do projeto para que ele perten√ßa a um usu√°rio sem privil√©gios de root:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chown -R <span class="hljs-variable">$USER</span>:<span class="hljs-variable">$USER</span> ~/laravel-app</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso ser√° importante quando voc√™ escrever o Dockerfile para a imagem do seu aplicativo, pois permitir√° trabalhar com o c√≥digo do aplicativo e iniciar processos no cont√™iner sem privil√©gios de root. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ inseriu o c√≥digo do aplicativo e pode prosseguir para a defini√ß√£o de servi√ßos usando o Docker Compose. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A cria√ß√£o de</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
aplicativos Docker Compose para </font><b><font style="vertical-align: inherit;">cria√ß√£o de arquivos</font></b><font style="vertical-align: inherit;"> com o Docker Compose simplifica o processo de configura√ß√£o e controle de vers√£o em sua infraestrutura. Para personalizar nosso aplicativo Laravel, criaremos um arquivo de composi√ß√£o de encaixe com a defini√ß√£o de servi√ßos de servidor da web, banco de dados e aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abra o arquivo:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/docker-compose.yml</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tr√™s servi√ßos s√£o definidos no arquivo docker-compose: app, webserver e db. </font><font style="vertical-align: inherit;">Adicione o seguinte c√≥digo ao arquivo, enquanto substitui a senha raiz por MYSQL_ROOT_PASSWORD, definida como a vari√°vel de ambiente de servi√ßo db, por uma senha de sua escolha:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">version: '3'<font></font>
services:<font></font>
<font></font>
  #PHP Service<font></font>
  app:<font></font>
    build:<font></font>
      context: .<font></font>
      dockerfile: Dockerfile<font></font>
    image: digitalocean.com/php<font></font>
    container_name: app<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    environment:<font></font>
      SERVICE_NAME: app<font></font>
      SERVICE_TAGS: dev<font></font>
    working_dir: /var/www<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  #Nginx Service<font></font>
  webserver:<font></font>
    image: nginx:alpine<font></font>
    container_name: webserver<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    ports:<font></font>
      - "80:80"<font></font>
      - "443:443"<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  #MySQL Service<font></font>
  db:<font></font>
    image: mysql:5.7.22<font></font>
    container_name: db<font></font>
    restart: unless-stopped<font></font>
    tty: true<font></font>
    ports:<font></font>
      - "3306:3306"<font></font>
    environment:<font></font>
      MYSQL_DATABASE: laravel<font></font>
      MYSQL_ROOT_PASSWORD: your_mysql_root_password<font></font>
      SERVICE_TAGS: dev<font></font>
      SERVICE_NAME: mysql<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
#Docker Networks<font></font>
networks:<font></font>
  app-network:<font></font>
    driver: bridge</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os seguintes servi√ßos est√£o inclu√≠dos aqui:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">app: essa defini√ß√£o de servi√ßo cont√©m o aplicativo Laravel e inicia a imagem personalizada do Docker, digitalocean.com/php. </font><font style="vertical-align: inherit;">Ele tamb√©m define o par√¢metro working_dir no cont√™iner como / var / www.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servidor da web: essa defini√ß√£o de servi√ßo pega a imagem nginx: alpine do Docker e abre as portas 80 e 443.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">db: essa defini√ß√£o de servi√ßo recupera a imagem mysql: 5.7.22 do Docker e define novas vari√°veis ‚Äã‚Äãde ambiente, incluindo o banco de dados laravel para seu aplicativo e a senha raiz do banco de dados. </font><font style="vertical-align: inherit;">Voc√™ pode usar qualquer nome de banco de dados que desejar; tamb√©m deve substituir sua_mysql_root_password por sua pr√≥pria senha forte. </font><font style="vertical-align: inherit;">Essa defini√ß√£o de servi√ßo tamb√©m mapeia a porta 3306 do host para a porta 3306 do cont√™iner.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cada propriedade container_name define um nome de container correspondente ao nome do servi√ßo. </font><font style="vertical-align: inherit;">Se voc√™ n√£o definir essa propriedade, o Docker fornecer√° a cada cont√™iner nomes que consistem no nome de uma pessoa hist√≥rica e em uma palavra aleat√≥ria, separados por um sublinhado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para simplificar a intera√ß√£o entre cont√™ineres, os servi√ßos se conectam √† rede de conex√£o chamada app-network. A rede de conex√£o usa uma ponte de software que permite que os cont√™ineres conectados a esta rede se comuniquem. O driver de ponte define automaticamente as regras do host para que os cont√™ineres em diferentes redes de conex√£o n√£o possam se comunicar diretamente entre si. Isso melhora a seguran√ßa do aplicativo, porque apenas servi√ßos relacionados podem se comunicar. Isso tamb√©m significa que voc√™ pode especificar redes e servi√ßos diferentes que se conectam a fun√ß√µes relacionadas: por exemplo, servi√ßos de aplicativos clientes podem usar a rede de front-end e servi√ßos de servidor podem usar a rede de back-end.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, vamos ver como adicionar volumes e vincular imagens montadas a defini√ß√µes de servi√ßo para salvar permanentemente os dados do aplicativo. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Armazenamento de dados persistente O</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Docker possui meios poderosos e convenientes para armazenamento de dados persistentes. </font><font style="vertical-align: inherit;">Em nosso aplicativo, usaremos volumes e imagens montadas para salvar permanentemente arquivos, aplicativos e configura√ß√µes do banco de dados. </font><font style="vertical-align: inherit;">Os volumes fornecem flexibilidade e preserva√ß√£o de backup ap√≥s o t√©rmino do ciclo de vida do cont√™iner, e imagens mont√°veis ‚Äã‚Äãmont√°veis ‚Äã‚Äãsimplificam as altera√ß√µes de c√≥digo durante o desenvolvimento, refletindo imediatamente as altera√ß√µes nos arquivos ou diret√≥rios de host nos cont√™ineres. </font><font style="vertical-align: inherit;">Usamos as duas op√ß√µes.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aten√ß√£o!</font></font></b><div class="spoiler_text">             ,   ,        .      ,       Docker   .       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Defina o volume denominado dbdata no arquivo docker-compose na defini√ß√£o de servi√ßo db para manter o banco de dados MySQL:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#MySQL Service<font></font>
db:<font></font>
  ...<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql<font></font>
    networks:<font></font>
      - app-network<font></font>
  ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um volume chamado dbdata √© usado para salvar permanentemente o conte√∫do da pasta / var / lib / mysql dentro do cont√™iner. </font><font style="vertical-align: inherit;">Isso permite que voc√™ pare e reinicie o servi√ßo db sem perder dados. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione uma defini√ß√£o de volume dbdata no final do arquivo:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#Volumes<font></font>
volumes:<font></font>
  dbdata:<font></font>
    driver: local</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com esta defini√ß√£o, voc√™ pode usar este volume para diferentes servi√ßos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, adicione a liga√ß√£o da imagem de montagem ao servi√ßo db para os arquivos de configura√ß√£o do MySQL:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">...<font></font>
#MySQL Service<font></font>
db:<font></font>
  ...<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql<font></font>
      - ./mysql/my.cnf:/etc/mysql/my.cnf<font></font>
  ...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa imagem montada vincula o arquivo ~ / laravel-app / mysql / my.cnf ao diret√≥rio /etc/mysql/my.cnf no cont√™iner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, adicione as imagens montadas ao servi√ßo do servidor da web. </font><font style="vertical-align: inherit;">Haver√° dois: um para o c√≥digo do aplicativo e outro para determinar a configura√ß√£o do Nginx</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">#Nginx Service<font></font>
webserver:<font></font>
  ...<font></font>
  volumes:<font></font>
      - ./:/var/www<font></font>
      - ./nginx/conf.d/:/etc/nginx/conf.d/<font></font>
  networks:<font></font>
      - app-network</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira imagem montada vincula o c√≥digo do aplicativo no diret√≥rio ~ / laravel-app ao diret√≥rio / var / www dentro do cont√™iner. O arquivo de configura√ß√£o, adicionado a ~ / laravel-app / nginx / conf.d /, tamb√©m √© montado em /etc/nginx/conf.d/ no cont√™iner, o que permite adicionar e alterar o conte√∫do do diret√≥rio de configura√ß√£o, conforme necess√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em conclus√£o, adicione as seguintes montagens de imagens montadas ao servi√ßo de aplicativo para obter c√≥digos de aplicativo e arquivos de configura√ß√£o:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="xml hljs">#PHP Service<font></font>
app:<font></font>
  ...<font></font>
  volumes:<font></font>
       - ./:/var/www<font></font>
       - ./php/local.ini:/usr/local/etc/php/conf.d/local.ini<font></font>
  networks:<font></font>
      - app-network<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servi√ßo de aplicativo vincula a imagem montada da pasta ~ / laravel-app, que cont√©m o c√≥digo do aplicativo, √† pasta / var / www. Isso agilizar√° o processo de desenvolvimento, pois qualquer altera√ß√£o no diret√≥rio local do aplicativo ser√° refletida imediatamente no cont√™iner. Voc√™ tamb√©m anexa o arquivo de configura√ß√£o PHP ~ / laravel-app / php / local.ini ao arquivo /usr/local/etc/php/conf.d/local.ini no cont√™iner. Mais tarde, voc√™ criar√° um arquivo de configura√ß√£o PHP local. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seu arquivo docker-compose agora ter√° a seguinte apar√™ncia:</font></font><br>
<br>
<code>~/laravel-app/docker-compose.yml</code><br>
<br>
<pre><code class="bash hljs">version: <span class="hljs-string">'3'</span><font></font>
services:<font></font>
<font></font>
  <span class="hljs-comment">#PHP Service</span><font></font>
  app:<font></font>
    build:<font></font>
      context: .<font></font>
      dockerfile: Dockerfile<font></font>
    image: digitalocean.com/php<font></font>
    container_name: app<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    environment:<font></font>
      SERVICE_NAME: app<font></font>
      SERVICE_TAGS: dev<font></font>
    working_dir: /var/www<font></font>
    volumes:<font></font>
      - ./:/var/www<font></font>
      - ./php/local.ini:/usr/<span class="hljs-built_in">local</span>/etc/php/conf.d/local.ini<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  <span class="hljs-comment">#Nginx Service</span><font></font>
  webserver:<font></font>
    image: nginx:alpine<font></font>
    container_name: webserver<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    ports:<font></font>
      - <span class="hljs-string">"80:80"</span>
      - <span class="hljs-string">"443:443"</span><font></font>
    volumes:<font></font>
      - ./:/var/www<font></font>
      - ./nginx/conf.d/:/etc/nginx/conf.d/<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
  <span class="hljs-comment">#MySQL Service</span><font></font>
  db:<font></font>
    image: mysql:5.7.22<font></font>
    container_name: db<font></font>
    restart: unless-stopped<font></font>
    tty: <span class="hljs-literal">true</span><font></font>
    ports:<font></font>
      - <span class="hljs-string">"3306:3306"</span><font></font>
    environment:<font></font>
      MYSQL_DATABASE: laravel<font></font>
      MYSQL_ROOT_PASSWORD: your_mysql_root_password<font></font>
      SERVICE_TAGS: dev<font></font>
      SERVICE_NAME: mysql<font></font>
    volumes:<font></font>
      - dbdata:/var/lib/mysql/<font></font>
      - ./mysql/my.cnf:/etc/mysql/my.cnf<font></font>
    networks:<font></font>
      - app-network<font></font>
<font></font>
<span class="hljs-comment">#Docker Networks</span><font></font>
networks:<font></font>
  app-network:<font></font>
    driver: bridge<font></font>
<span class="hljs-comment">#Volumes</span><font></font>
volumes:<font></font>
  dbdata:<font></font>
    driver: <span class="hljs-built_in">local</span></code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um Dockerfile O</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Docker permite definir o ambiente em cont√™ineres individuais usando um Dockerfile. </font><font style="vertical-align: inherit;">O Dockerfile permite criar imagens personalizadas. </font><font style="vertical-align: inherit;">que pode ser usado para instalar o software aplicativo necess√°rio e alterar as configura√ß√µes conforme necess√°rio. </font><font style="vertical-align: inherit;">Voc√™ pode transferir imagens criadas para o Docker Hub ou qualquer registro particular. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Dockerfile estar√° localizado no diret√≥rio ~ / laravel-app. </font><font style="vertical-align: inherit;">Crie um arquivo:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/Dockerfile</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este Dockerfile especificar√° a imagem base e os comandos e instru√ß√µes necess√°rios para criar a imagem do aplicativo Laravel. </font><font style="vertical-align: inherit;">Adicione o seguinte c√≥digo ao arquivo:</font></font><br>
<br>
<code>~/laravel-app/php/Dockerfile</code><br>
<br>
<pre><code class="xml hljs">FROM php:7.2-fpm<font></font>
<font></font>
# Copy composer.lock and composer.json<font></font>
COPY composer.lock composer.json /var/www/<font></font>
<font></font>
# Set working directory<font></font>
WORKDIR /var/www<font></font>
<font></font>
# Install dependencies<font></font>
RUN apt-get update &amp;&amp; apt-get install -y \<font></font>
    build-essential \<font></font>
    mysql-client \<font></font>
    libpng-dev \<font></font>
    libjpeg62-turbo-dev \<font></font>
    libfreetype6-dev \<font></font>
    locales \<font></font>
    zip \<font></font>
    jpegoptim optipng pngquant gifsicle \<font></font>
    vim \<font></font>
    unzip \<font></font>
    git \<font></font>
    curl<font></font>
<font></font>
# Clear cache<font></font>
RUN apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*<font></font>
<font></font>
# Install extensions<font></font>
RUN docker-php-ext-install pdo_mysql mbstring zip exif pcntl<font></font>
RUN docker-php-ext-configure gd --with-gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ --with-png-dir=/usr/include/<font></font>
RUN docker-php-ext-install gd<font></font>
<font></font>
# Install composer<font></font>
RUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer<font></font>
<font></font>
# Add user for laravel application<font></font>
RUN groupadd -g 1000 www<font></font>
RUN useradd -u 1000 -ms /bin/bash -g www www<font></font>
<font></font>
# Copy existing application directory contents<font></font>
COPY . /var/www<font></font>
<font></font>
# Copy existing application directory permissions<font></font>
COPY --chown=www:www . /var/www<font></font>
<font></font>
# Change current user to www<font></font>
USER www<font></font>
<font></font>
# Expose port 9000 and start php-fpm server<font></font>
EXPOSE 9000<font></font>
CMD ["php-fpm"]<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, o Dockerfile cria a imagem em cima da imagem do php: 7.2-fpm Docker. Esta √© uma imagem baseada em uma inst√¢ncia instalada do PHP FastCGI PHP-FPM. Este arquivo tamb√©m instala os pacotes necess√°rios para o Laravel: mcrypt, pdo_mysql, mbstring e imagick com o compositor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diretiva RUN especifica comandos para atualizar, instalar e configurar par√¢metros dentro de um cont√™iner, incluindo um usu√°rio dedicado e um grupo chamado www. A instru√ß√£o WORKDIR define o diret√≥rio / var / www como o diret√≥rio de trabalho do aplicativo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criar um usu√°rio e grupo separados com direitos de acesso limitados reduz a vulnerabilidade ao iniciar os cont√™ineres do Docker, que por padr√£o s√£o executados com privil√©gios de root. Em vez de executar este cont√™iner com privil√©gios de root, criamos um usu√°rio www com permiss√µes de leitura e grava√ß√£o para a pasta / var / www usando o comando COPY com o sinalizador --chown para copiar as permiss√µes da pasta do aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O comando EXPOSE abre a porta 9000 no cont√™iner para o servidor php-fpm. CMD indica o comando que deve ser executado ap√≥s a cria√ß√£o do cont√™iner. Aqui, o CMD indica o comando php-fpm que inicia o servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando terminar de fazer as altera√ß√µes, salve o arquivo e feche o editor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ pode definir a sua configura√ß√£o PHP. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configura√ß√£o do PHP</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ definiu a infraestrutura no arquivo docker-compose e agora pode configurar o servi√ßo PHP para atuar como um processador PHP para solicita√ß√µes Nginx recebidas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para configurar o PHP, voc√™ criar√° um arquivo local.ini na pasta php. </font><font style="vertical-align: inherit;">Este √© o arquivo que voc√™ vinculou ao arquivo /usr/local/etc/php/conf.d/local.ini no cont√™iner acima. </font><font style="vertical-align: inherit;">Criar este arquivo permitir√° que voc√™ ignore o arquivo php.ini padr√£o que o PHP l√™ na inicializa√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie um diret√≥rio php:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir ~/laravel-app/php</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, abra o arquivo local.ini:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/php/local.ini</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para demonstrar a configura√ß√£o do PHP, adicionaremos o seguinte c√≥digo para definir os limites de tamanho de upload de arquivo:</font></font><br>
<br>
<code>~/laravel-app/php/local.ini</code><br>
<br>
<pre><code class="xml hljs">upload_max_filesize=40M<font></font>
post_max_size=40M</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As diretivas upload_max_filesize e post_max_size definem o tamanho m√°ximo permitido dos arquivos enviados e mostram como definir as configura√ß√µes do php.ini a partir do arquivo local.ini. Voc√™ pode inserir qualquer par√¢metro de configura√ß√£o do PHP que deseja ignorar no arquivo local.ini. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurando o Nginx</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ao configurar o servi√ßo PHP, voc√™ pode modificar o servi√ßo Nginx para usar o PHP-FPM como um servidor FastCGI para servir conte√∫do din√¢mico. O servidor FastCGI √© baseado em um protocolo bin√°rio para a intera√ß√£o de programas interativos com um servidor da web. Informa√ß√µes adicionais podem ser encontradas no artigo ‚ÄúCompreendendo e implementando os proxies FastCGI no Nginx‚Äù. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para configurar o Nginx, voc√™ criar√° um arquivo app.conf com a configura√ß√£o de servi√ßos na pasta ~ / laravel-app / nginx / conf.d /. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, crie o diret√≥rio nginx / conf.d /:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p ~/laravel-app/nginx/conf.d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, crie o arquivo de configura√ß√£o app.conf:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/nginx/conf.d/app.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione o seguinte c√≥digo ao arquivo para configurar o Nginx:</font></font><br>
<br>
<code>~/laravel-app/nginx/conf.d/app.conf</code><br>
<br>
<pre><code class="xml hljs">server {<font></font>
    listen 80;<font></font>
    index index.php index.html;<font></font>
    error_log  /var/log/nginx/error.log;<font></font>
    access_log /var/log/nginx/access.log;<font></font>
    root /var/www/public;<font></font>
    location ~ \.php$ {<font></font>
        try_files $uri =404;<font></font>
        fastcgi_split_path_info ^(.+\.php)(/.+)$;<font></font>
        fastcgi_pass app:9000;<font></font>
        fastcgi_index index.php;<font></font>
        include fastcgi_params;<font></font>
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;<font></font>
        fastcgi_param PATH_INFO $fastcgi_path_info;<font></font>
    }<font></font>
    location / {<font></font>
        try_files $uri $uri/ /index.php?$query_string;<font></font>
        gzip_static on;<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O bloco do servidor configura o servidor da web Nginx usando as seguintes diretivas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">listen: esta diretiva define a porta que o servidor atende √†s solicita√ß√µes recebidas.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">error_log e access_log: essas diretivas definem arquivos para log.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">root: esta diretiva define o caminho para a pasta raiz, formando o caminho completo para qualquer arquivo solicitado no sistema de arquivos local.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No bloco de localiza√ß√£o php, a diretiva fastcgi_pass indica que o servi√ßo de aplicativo est√° escutando em um soquete TCP na porta 9000. Com ele, o servidor PHP-FPM escuta na rede, n√£o no soquete Unix. Embora o soquete Unix ofere√ßa uma ligeira vantagem de velocidade sobre o soquete TCP, ele n√£o possui um protocolo de rede e ignora a pilha de rede. Nos casos em que os hosts est√£o localizados no mesmo sistema, o uso de um soquete Unix pode fazer sentido, mas se os servi√ßos estiverem sendo executados em hosts diferentes, o soquete TCP oferece uma vantagem ao permitir a conex√£o com servi√ßos distribu√≠dos. Como nossos cont√™ineres de aplicativos e servidores da web s√£o executados em hosts diferentes, √© mais eficiente usar um soquete TCP em nossa configura√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando terminar de fazer as altera√ß√µes, salve o arquivo e feche o editor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas √† liga√ß√£o criada anteriormente, quaisquer altera√ß√µes na pasta nginx / conf.d / s√£o refletidas diretamente no cont√™iner do servidor da web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos ver os par√¢metros do MySQL. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurando o MySQL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ap√≥s configurar o PHP e o Nginx, voc√™ pode ativar o MySQL como um banco de dados para seu aplicativo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para configurar o MySQL, voc√™ precisa criar o arquivo my.cnf na pasta mysql. </font><font style="vertical-align: inherit;">Este √© o arquivo que voc√™ anexou ao arquivo /etc/mysql/my.cnf dentro do cont√™iner durante a etapa de configura√ß√£o do banco de dados. </font><font style="vertical-align: inherit;">Montar a imagem montada permite ignorar qualquer op√ß√£o my.cnf, se e quando necess√°rio. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para demonstrar como isso funciona, adicionaremos ao my.cnf configura√ß√µes que incluem o log de solicita√ß√£o geral e definiremos o arquivo de log. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie um diret√≥rio mysql:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir ~/laravel-app/mysql</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Crie o arquivo my.cnf:</font></font><br>
<br>
<pre><code class="bash hljs">nano ~/laravel-app/mysql/my.cnf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione o seguinte c√≥digo ao arquivo para ativar o log de consulta e definir o local do arquivo de log:</font></font><br>
<br>
<code>~/laravel-app/mysql/my.cnf</code><br>
<br>
<pre><code class="xml hljs">[mysqld]<font></font>
general_log = 1<font></font>
general_log_file = /var/lib/mysql/general.log</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O arquivo my.cnf suporta logs configurando o par√¢metro general_log como 1, o que permite logs gerais. </font><font style="vertical-align: inherit;">O par√¢metro general_log_file especifica onde os logs ser√£o armazenados. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iniciando cont√™ineres e alterando as configura√ß√µes do ambiente</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Voc√™ definiu todos os servi√ßos no arquivo docker-compose e criou os arquivos de configura√ß√£o para esses servi√ßos. </font><font style="vertical-align: inherit;">Agora voc√™ pode executar cont√™ineres. </font><font style="vertical-align: inherit;">Concluindo, criaremos uma c√≥pia do arquivo .env.example que o Laravel inclui por padr√£o e o nomear√° .env, pois o Laravel usa esse arquivo para determinar o ambiente:</font></font><br>
<br>
<pre><code class="bash hljs">cp .env.example .env</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de iniciar os cont√™ineres, configuraremos par√¢metros de instala√ß√£o espec√≠ficos neste arquivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora todos os seus servi√ßos est√£o definidos no arquivo docker-compose, e voc√™ s√≥ precisa executar um comando para iniciar todos os cont√™ineres, criar volumes e configurar e conectar redes:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose up -d</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na primeira vez que voc√™ inicia a composi√ß√£o do docker, todas as imagens necess√°rias do Docker ser√£o baixadas, o que pode levar algum tempo. </font><font style="vertical-align: inherit;">Depois de baixar as imagens e salv√°-las no computador local, o Compose criar√° seus cont√™ineres. </font><font style="vertical-align: inherit;">O sinalizador -d converte o processo em um daemon com o qual os cont√™ineres permanecem em execu√ß√£o em segundo plano. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s a conclus√£o do processo, use o seguinte comando para listar todos os cont√™ineres em execu√ß√£o:</font></font><br>
<pre><code class="bash hljs">docker ps</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ ver√° os seguintes resultados com dados nos cont√™ineres de aplicativos, servidor da web e banco de dados:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
CONTAINER ID        NAMES               IMAGE                             STATUS              PORTS<font></font>
c31b7b3251e0        db                  mysql:5.7.22                      Up 2 seconds        0.0.0.0:3306-&gt;3306/tcp<font></font>
ed5a69704580        app                 digitalocean.com/php              Up 2 seconds        9000/tcp<font></font>
5ce4ee31d7c0        webserver           nginx:alpine                      Up 2 seconds        0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesses resultados, o ID do CONTAINER √© um identificador exclusivo para cada cont√™iner e NAMES lista os nomes de servi√ßo para cada cont√™iner. </font><font style="vertical-align: inherit;">Voc√™ pode usar esses dois identificadores para acessar cont√™ineres. </font><font style="vertical-align: inherit;">IMAGE define o nome da imagem de cada cont√™iner e STATUS fornece informa√ß√µes sobre o status do cont√™iner: iniciado, reiniciado ou parado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ pode modificar o arquivo .env no cont√™iner do aplicativo para adicionar par√¢metros espec√≠ficos ao seu sistema. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abra o arquivo com o docker-compose exec, que permite executar comandos espec√≠ficos em cont√™ineres. </font><font style="vertical-align: inherit;">Nesse caso, voc√™ abre o arquivo para edi√ß√£o:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app nano .env</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Localize o bloco que especifica DB_CONNECTION e atualize-o para refletir a configura√ß√£o do sistema. </font><font style="vertical-align: inherit;">Voc√™ alterar√° os seguintes campos:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_HOST ser√° seu cont√™iner de banco de dados db.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_DATABASE ser√° o banco de dados laravel.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_USERNAME ser√° o nome de usu√°rio do seu banco de dados. </font><font style="vertical-align: inherit;">Nesse caso, usaremos laraveluser.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DB_PASSWORD ser√° uma senha protegida para esta conta de usu√°rio.</font></font></li>
</ol><br>
<code>/var/www/.env</code><br>
<br>
<pre><code class="xml hljs">DB_CONNECTION=mysql<font></font>
DB_HOST=db<font></font>
DB_PORT=3306<font></font>
DB_DATABASE=laravel<font></font>
DB_USERNAME=laraveluser<font></font>
DB_PASSWORD=your_laravel_db_password</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m √© necess√°rio corrigir as mesmas vari√°veis ‚Äã‚Äãno arquivo .env.example, pois ele ser√° usado posteriormente ao implantar no servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, configure a chave do aplicativo para o Laravel com o comando php artisan key: generate. </font><font style="vertical-align: inherit;">Este comando ir√° gerar uma chave e copi√°-la para o arquivo .env, que proteger√° as sess√µes do usu√°rio e os dados criptografados:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan key:generate</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ tem todas as configura√ß√µes de ambiente necess√°rias para executar o aplicativo. </font><font style="vertical-align: inherit;">Para armazenar em cache essas configura√ß√µes em um arquivo que acelera o carregamento do aplicativo, execute o comando:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan config:cache</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As defini√ß√µes de configura√ß√£o ser√£o carregadas no arquivo /var/www/bootstrap/cache/config.php no cont√™iner. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, abra o site </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no seu navegador </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">A p√°gina principal do aplicativo Laravel √© aberta. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um usu√°rio MySQL</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Ao instalar o MySQL, por padr√£o, apenas uma conta raiz administrativa √© criada com privil√©gios ilimitados para acessar o servidor de banco de dados. </font><font style="vertical-align: inherit;">Normalmente, ao trabalhar com um banco de dados, √© melhor evitar o uso de uma conta raiz administrativa. </font><font style="vertical-align: inherit;">Em vez disso, criaremos um usu√°rio de banco de dados especial para o banco de dados Laravel do nosso aplicativo. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para criar um novo usu√°rio, inicie o shell interativo bash no cont√™iner db usando o comando docker-compose exec:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> db bash</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dentro do cont√™iner, efetue login na conta administrativa raiz do MySQL:</font></font><br>
<br>
<pre><code class="sql hljs">mysql -u root -p</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ ser√° solicitado a digitar a senha especificada para a conta raiz do MySQL quando instalada no arquivo docker-compose. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Primeiro, verifique o banco de dados laravel definido no arquivo docker-compose. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Execute o comando show database para verificar os bancos de dados existentes:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">show</span> <span class="hljs-keyword">databases</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos resultados, voc√™ deve ver o banco de dados laravel:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
+--------------------+<font></font>
| Database           |<font></font>
+--------------------+<font></font>
| information_schema |<font></font>
| laravel            |<font></font>
| mysql              |<font></font>
| performance_schema |<font></font>
| sys                |<font></font>
+--------------------+<font></font>
5 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, crie uma conta de usu√°rio que ter√° acesso permitido a este banco de dados. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usamos o nome de usu√°rio laraveluser, mas voc√™ pode substitu√≠-lo por qualquer nome preferido. </font><font style="vertical-align: inherit;">Apenas verifique se o nome de usu√°rio e a senha correspondem aos do arquivo .env na etapa anterior:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">ON</span> laravel.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'laraveluser'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'your_laravel_db_password'</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Atualize os privil√©gios para notificar o servidor MySQL sobre altera√ß√µes:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Feche o MySQL:</font></font><br>
<br>
<pre><code class="sql hljs">EXIT;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saia do cont√™iner:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">exit</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ pode fazer a migra√ß√£o para testar o banco de dados:</font></font><br>
<br>
<pre><code class="bash hljs">docker-compose <span class="hljs-built_in">exec</span> app php artisan migrate</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os resultados da confirma√ß√£o da migra√ß√£o s√£o os seguintes:</font></font><br>
<br>
<pre><code class="bash hljs">Output<font></font>
<font></font>
Migration table created successfully.<font></font>
Migrating: 2014_10_12_000000_create_users_table<font></font>
Migrated:  2014_10_12_000000_create_users_table<font></font>
Migrating: 2014_10_12_100000_create_password_resets_table<font></font>
Migrated:  2014_10_12_100000_create_password_resets_table</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 2. Gitlab</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um novo projeto deve ser criado no Hitlab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora precisamos salvar o projeto no reposit√≥rio do hitlab. </font><font style="vertical-align: inherit;">Para fazer isso, chame os seguintes comandos da pasta do projeto na m√°quina local:</font></font><br>
<br>
<pre><code class="bash hljs">git init<font></font>
git remote add origin git@gitlab.com:&lt;&gt;/&lt;&gt;  <font></font>
git remote add origin https://gitlab.com/&lt;&gt;/&lt;&gt;      SSH<font></font>
git add .<font></font>
git commit -m <span class="hljs-string">"Initial commit"</span>
git push -u origin master</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O projeto deve aparecer em Vis√£o geral do projeto -&gt; Detalhes </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para facilitar a obten√ß√£o imediata do ambiente final, salvamos a imagem do docker do ambiente no registro da lista de ocorr√™ncias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, voc√™ deve fazer:</font></font><br>
<br>
<pre><code class="bash hljs">docker login registry.gitlab.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E jogue a imagem no gitlab:</font></font><br>
<br>
<pre><code class="bash hljs">docker build -t registry.gitlab.com/&lt;&gt;/&lt;&gt; .<font></font>
docker push registry.gitlab.com/&lt;&gt;/&lt;&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A imagem estar√° localizada em Packages-&gt; Container Registry.Para </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
finalizar com o gitlab, obtemos imediatamente a chave para o gitlab-runner. </font><font style="vertical-align: inherit;">Para fazer isso, v√° para Configura√ß√£o-&gt; CI / CD-&gt; Corredor. </font><font style="vertical-align: inherit;">A chave est√° na etapa 3 na se√ß√£o Configura√ß√£o manual (configure manualmente um corredor espec√≠fico).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parte 3. Configura√ß√£o do servidor</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O servidor VPS deve ser utilizado com o tipo de virtualiza√ß√£o KVM ou XEN. </font><font style="vertical-align: inherit;">A virtualiza√ß√£o como o OpenVZ compartilha o n√∫cleo do sistema entre todos os usu√°rios, portanto, n√£o √© poss√≠vel alterar os par√¢metros do kernel. </font><font style="vertical-align: inherit;">Para o teste, fiz o servidor KVM com o Docker pr√©-instalado. </font><font style="vertical-align: inherit;">No entanto, pode n√£o haver uma janela de encaixe no servidor. </font><font style="vertical-align: inherit;">Nesse caso, voc√™ deve instal√°-lo manualmente. </font><font style="vertical-align: inherit;">O algoritmo √© o mesmo que ao instalar na m√°quina local. </font><font style="vertical-align: inherit;">Tamb√©m √© necess√°rio verificar a vers√£o do php. </font><font style="vertical-align: inherit;">Para o Laravel, voc√™ precisa de pelo menos 7.2. </font><font style="vertical-align: inherit;">Eu tamb√©m tive que instalar separadamente a extens√£o para php ext-mbstring (no meu caso para php 7.3):</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update<font></font>
sudo apt-get install php7.3-mbstring<font></font>
</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, precisamos instalar o gitlab-runner. </font><font style="vertical-align: inherit;">O Runner √© um servi√ßo que aceita um webhook de um hitlab ao receber uma nova vers√£o e implanta tudo em nosso servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para instalar o gitlab-runner, voc√™ precisa:</font></font><br>
<br>
<pre><code class="bash hljs">curl -L --output /usr/<span class="hljs-built_in">local</span>/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s o download, defina a permiss√£o para executar:</font></font><br>
<br>
<pre><code class="bash hljs">sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/gitlab-runner
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, crie o usu√°rio gitlab-runner e execute o servi√ßo gitlab runner:</font></font><br>
<br>
<pre><code class="bash hljs">sudo useradd --comment <span class="hljs-string">'GitLab Runner'</span> --create-home gitlab-runner --shell /bin/bash<font></font>
sudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner<font></font>
sudo gitlab-runner start</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Registre o corredor. </font><font style="vertical-align: inherit;">Para fazer isso, precisamos do token da parte 2 deste artigo:</font></font><br>
<br>
<pre><code class="bash hljs">sudo gitlab-runner register</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em resposta, eles solicitar√£o o endere√ßo do seu hitlab. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Especifique </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gitlab.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="bash hljs">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )<font></font>
https://gitlab.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, voc√™ precisa inserir o token. </font><font style="vertical-align: inherit;">Digite o token da parte 2.</font></font><br>
<br>
<pre><code class="bash hljs">Please enter the gitlab-ci token <span class="hljs-keyword">for</span> this runner<font></font>
xxx<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, especifique uma descri√ß√£o e tags separadas por v√≠rgulas. </font><font style="vertical-align: inherit;">Ent√£o, somos oferecidos a escolher um executor. </font><font style="vertical-align: inherit;">Aqui voc√™ precisa selecionar um shell:</font></font><br>
<br>
<pre><code class="bash hljs"><font></font>
Please enter the executor:<font></font>
shell</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pelo que entendi, o executor √© um ambiente no qual o c√≥digo do arquivo .gitlab-ci.yml √© executado. </font><font style="vertical-align: inherit;">Existem bash, ssh, janela de encaixe, paralelos, caixa virtual e kubernets √† sua escolha. </font><font style="vertical-align: inherit;">A documenta√ß√£o recomenda que, se voc√™ n√£o souber o que usar, use o bash. </font><font style="vertical-align: inherit;">Essa √© uma op√ß√£o universal que √© executada na linha de comando do seu servidor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, precisamos adicionar o usu√°rio gitlab-runner ao grupo de usu√°rios do docker.</font></font><br>
<br>
<pre><code class="bash hljs">sudo usermod -aG docker gitlab-runner</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para evitar erros de acesso, adicione a sudoers</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /etc/sudoers</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
linha </font></font><br>
<br>
<pre><code class="bash hljs">gitlab-runner ALL=(ALL) NOPASSWD: ALL</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora podemos criar o arquivo .gitlab-ci.yml. </font><font style="vertical-align: inherit;">√â necess√°rio para a execu√ß√£o do chamado Pipeline: uma sequ√™ncia de comandos para implantar um projeto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, acesse o reposit√≥rio do projeto na lista de ocorr√™ncias e clique em Criar um novo arquivo. </font><font style="vertical-align: inherit;">O pr√≥prio Gitlab oferecer√° modelos de arquivo, entre eles, voc√™ deve selecionar .gitlab-ci.yml. </font><font style="vertical-align: inherit;">Ap√≥s criar um arquivo no gitlab, √© poss√≠vel selecionar um modelo para o conte√∫do do arquivo. </font><font style="vertical-align: inherit;">Eu escolhi o laravel e refiz um pouco para mim:</font></font><br>
<br>
<pre><code class="xml hljs"><font></font>
# This file is a template, and might need editing before it works on your project.<font></font>
# Official framework image. Look for the different tagged releases at:<font></font>
# https://hub.docker.com/r/library/php<font></font>
# .    ,        <font></font>
image: registry.gitlab.com/<span class="hljs-tag">&lt;<span class="hljs-name"></span>&gt;</span>/<span class="hljs-tag">&lt;<span class="hljs-name"></span>&gt;</span>:latest<font></font>
<font></font>
# Pick zero or more services to be used on all builds.<font></font>
# Only needed when using a docker container to run your tests in.<font></font>
# Check out: http://docs.gitlab.com/ce/ci/docker/using_docker_images.html#what-is-a-service<font></font>
services:<font></font>
  - mysql:latest<font></font>
#    <font></font>
variables:<font></font>
  MYSQL_DATABASE: laravel<font></font>
  MYSQL_ROOT_PASSWORD: ***********<font></font>
<font></font>
# This folder is cached between builds<font></font>
# ,      <font></font>
# http://docs.gitlab.com/ce/ci/yaml/README.html#cache<font></font>
cache:<font></font>
  paths:<font></font>
    - vendor/<font></font>
    - node_modules/<font></font>
<font></font>
# This is a basic example for a gem or script which doesn't use<font></font>
# services such as redis or postgres<font></font>
#     <font></font>
before_script:<font></font>
  #   <font></font>
  - sudo apt-get update -yqq<font></font>
  #    nodejs<font></font>
  - sudo apt-get install gnupg -yqq<font></font>
  #  Node   12<font></font>
  - curl -sL https://deb.nodesource.com/setup_12.x | sudo bash -<font></font>
  #  <font></font>
  - sudo apt-get install git nodejs libcurl4-gnutls-dev libicu-dev libmcrypt-dev libvpx-dev libjpeg-dev libpng-dev libxpm-dev zlib1g-dev libfreetype6-dev libxml2-dev libexpat1-dev libbz2-dev libgmp3-dev libldap2-dev unixodbc-dev libpq-dev libsqlite3-dev libaspell-dev libsnmp-dev libpcre3-dev libtidy-dev -yqq<font></font>
  #  composer<font></font>
  - curl -sS https://getcomposer.org/installer | php<font></font>
  - php composer.phar install<font></font>
  - composer install<font></font>
  #   Node<font></font>
  - npm install<font></font>
  # Copy over testing configuration.<font></font>
  # Don't forget to set the database config in .env.testing correctly<font></font>
  - DB_HOST=mysql<font></font>
  - DB_DATABASE=laravel<font></font>
  - DB_USERNAME=root<font></font>
  - DB_PASSWORD=*********<font></font>
  #  .env.example    .env<font></font>
  - cp .env.example .env<font></font>
  #  npm build<font></font>
  - npm run dev<font></font>
  #       laravel<font></font>
  - php artisan key:generate<font></font>
  - php artisan config:cache<font></font>
  - php artisan route:clear<font></font>
  - php artisan config:clear<font></font>
  - php artisan cache:clear<font></font>
  #  .<font></font>
  - docker-compose exec app php artisan migrate<font></font>
  #   <font></font>
  #- docker-compose exec app php artisan db:seed<font></font>
<font></font>
#<font></font>
test:<font></font>
  script:<font></font>
    #  <font></font>
    - php vendor/bin/phpunit --coverage-text --colors=never<font></font>
    #  npm<font></font>
    - npm test<font></font>
<font></font>
#       <font></font>
deploying:<font></font>
  stage: deploy<font></font>
  script:<font></font>
    - echo "Deployed"<font></font>
    - docker-compose stop<font></font>
    - docker-compose up -d<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois de executar com √™xito o pipeline (CI / CD-&gt; Pipelines) no endere√ßo IP do seu servidor, voc√™ dever√° ver sua p√°gina laravel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para configurar o CI / CD, usei as instru√ß√µes de Sean Bradley:</font></font><br>
<br>
<div class="oembed"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://youtu.be/RV0845KmsNI</font></font></a></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medium.com/@sean_bradley/auto-devops-with-gitlab-ci-and-docker-compose-f931233f080f</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt491520/index.html">Converter xls em xlsx e xml em c #</a></li>
<li><a href="../pt491522/index.html">Por que as mulheres vivem mais</a></li>
<li><a href="../pt491524/index.html">Stas Afanasyev. Juno. Pipelines baseados em io.Reader / io.Writer. Parte 2</a></li>
<li><a href="../pt491528/index.html">Minha experi√™ncia est√° realizando 1000 entrevistas. Sinopse do relat√≥rio por Yegor Bugaenko</a></li>
<li><a href="../pt491530/index.html">Mais uma vez cerca de 433 MHz transmissores e receptores</a></li>
<li><a href="../pt491534/index.html">Um breve guia para usar o GDB</a></li>
<li><a href="../pt491536/index.html">YouTube - Erro. Por favor, tente novamente mais tarde. ID de reprodu√ß√£o: <...></a></li>
<li><a href="../pt491540/index.html">Redes para um especialista em TI iniciante. Base obrigat√≥ria</a></li>
<li><a href="../pt491542/index.html">Transforma√ß√£o de cores: pesquisas de tabela de desbaste</a></li>
<li><a href="../pt491544/index.html">O que ler no fim de semana restante - livros sobre v√≠rus, hackers e a hist√≥ria do cartel "digital"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>