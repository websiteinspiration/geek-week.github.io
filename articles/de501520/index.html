<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë¥üèø üì± üí® C # 8 und Nullg√ºltigkeit. Wie leben wir damit? üì∞ üîª üîã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Kollegen! Es ist Zeit zu erw√§hnen, dass wir Pl√§ne haben, Ian Griffiths ' grundlegendes Buch √ºber C # 8 zu ver√∂ffentlichen:
 
 
 In der Zwischenz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>C # 8 und Nullg√ºltigkeit. Wie leben wir damit?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/501520/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Kollegen! </font><font style="vertical-align: inherit;">Es ist Zeit zu erw√§hnen, dass wir Pl√§ne haben, </font><font style="vertical-align: inherit;">Ian Griffiths ' </font><font style="vertical-align: inherit;">grundlegendes </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buch</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √ºber C # 8 zu ver√∂ffentlichen:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/iw/to/l-/iwtol-20o3gyqy1ppgnewp68giw.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der Zwischenzeit hat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Autor </font><font style="vertical-align: inherit;">in seinem </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Blog </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verwandte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel ver√∂ffentlicht,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in denen er die Feinheiten neuer Ph√§nomene wie Nullbarkeit, Null-Unwissenheit und Null-Bewusstsein betrachtet. </font><font style="vertical-align: inherit;">Wir haben beide Artikel unter einer √úberschrift √ºbersetzt und schlagen vor, sie zu diskutieren.</font></font><br>
<a name="habracut"></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die ehrgeizigste neue Funktion in C # 8.0 hei√üt </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nullbare Referenzen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Zweck dieser neuen Funktion ist es, den Schaden durch eine gef√§hrliche Sache auszugleichen, die der Informatiker Tony Hoar einst als " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Milliarden-Dollar-Fehler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " bezeichnete. </font><font style="vertical-align: inherit;">C # hat ein Schl√ºsselwort</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(das √Ñquivalent davon findet sich in vielen anderen Sprachen), und die Wurzeln dieses Schl√ºsselworts lassen sich auf die Sprache Algol W zur√ºckf√ºhren, an deren Entwicklung Hoar beteiligt war. In dieser alten Sprache (sie erschien 1966) k√∂nnten Variablen, die sich auf Instanzen eines bestimmten Typs beziehen, eine besondere Bedeutung erhalten, die darauf hinweist, dass diese Variable derzeit nirgends referenziert wird. Diese Gelegenheit wurde sehr h√§ufig genutzt, und heute glauben viele Experten (einschlie√ülich Hoar selbst), dass sie zur gr√∂√üten Quelle kostspieliger Softwarefehler aller Zeiten geworden ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was ist falsch daran, Null anzunehmen? In einer Welt, in der ein Link auf Null zeigen kann, m√ºssen Sie dies √ºberall dort ber√ºcksichtigen, wo Links in Ihrem Code verwendet werden. Andernfalls besteht die Gefahr, dass Sie zur Laufzeit abgelehnt werden. Manchmal ist es nicht zu l√§stig. Wenn Sie eine Variable mit einem Ausdruck </font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an derselben Stelle </font><font style="vertical-align: inherit;">initialisieren, </font><font style="vertical-align: inherit;">an der Sie sie deklarieren, wissen Sie, dass diese Variable ungleich Null ist. Aber selbst ein so einfaches Beispiel ist mit einer gewissen kognitiven Belastung behaftet: Vor der Ver√∂ffentlichung von C # 8 konnte der Compiler Ihnen nicht sagen, ob Sie etwas tun, in das dieser Wert konvertiert werden kann </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sobald Sie jedoch verschiedene Codefragmente zusammenf√ºgen, wird es viel schwieriger, solche Dinge mit Sicherheit zu beurteilen: Wie wahrscheinlich ist es, dass diese Eigenschaft, die ich gerade lese, zur√ºckkehren kann </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? Darf es senden?</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in diese Methode? In welchen Situationen kann ich sicher sein, dass die von mir aufgerufene Methode dieses Argument </font></font><code>out</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht auf </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sondern auf einen anderen Wert setzt? Dar√ºber hinaus beschr√§nkt sich die Angelegenheit nicht einmal darauf, sich daran zu erinnern, solche Dinge zu √ºberpr√ºfen; Es ist nicht ganz klar, was Sie tun sollen, wenn Sie auf Null sto√üen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei numerischen Typen in C # gibt es kein solches Problem: Wenn Sie eine Funktion schreiben, die einige Zahlen als Eingabe verwendet und als Ergebnis eine Zahl zur√ºckgibt, m√ºssen Sie sich nicht fragen, ob die √ºbertragenen Werte wirklich Zahlen sind und ob irgendetwas unter ihnen verwechselt werden kann. Wenn Sie eine solche Funktion aufrufen, m√ºssen Sie nicht dar√ºber nachdenken, ob sie anstelle einer Zahl etwas zur√ºckgeben kann. Es sei denn, eine solche Entwicklung von Ereignissen interessiert Sie als Option: In diesem Fall k√∂nnen Sie Parameter oder Ergebnisse des Typs deklarieren</font></font><code>int?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies zeigt an, dass Sie in diesem speziellen Fall wirklich die √úbertragung oder R√ºckgabe eines Nullwerts zulassen m√∂chten. F√ºr numerische Typen und allgemeiner f√ºr signifikante Typen war die Nulltoleranz immer eines der Dinge, die als Option freiwillig durchgef√ºhrt werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei den Referenztypen wurde vor C # 8.0 die Zul√§ssigkeit von Null nicht nur standardm√§√üig festgelegt, sondern konnte auch nicht deaktiviert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus Gr√ºnden der Abw√§rtskompatibilit√§t wird die G√ºltigkeit von Null auch in C # 8.0 standardm√§√üig fortgesetzt, da neue Sprachfunktionen in diesem Bereich deaktiviert bleiben, bis Sie sie explizit anfordern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobald Sie diese neue Funktion aktivieren, √§ndert sich jedoch alles. Der einfachste Weg, es zu aktivieren, besteht darin, es </font></font><code>&lt;Nullablegt;enable&lt;/Nullablegt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">innerhalb des Elements </font><font style="vertical-align: inherit;">hinzuzuf√ºgen </font><font style="vertical-align: inherit;">.</font></font><code>&lt;PropertyGroup&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Ihrer Datei </font></font><code>.csproj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. (Ich stelle fest, dass auch mehr filigrane Steuerung verf√ºgbar ist. Wenn Sie sie wirklich wirklich ben√∂tigen, k√∂nnen Sie das Verhalten so konfigurieren, dass es </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in jeder Zeile separat </font><font style="vertical-align: inherit;">zul√§ssig </font><font style="vertical-align: inherit;">ist. Als wir uns k√ºrzlich entschieden haben, diese Funktion in alle unsere Projekte aufzunehmen, stellte sich heraus, dass sie in einem Ma√üstab aktiviert wird Ein Projekt zu einem Zeitpunkt ist eine machbare Aufgabe.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die zul√§ssigen Links in C # 8.0 </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vollst√§ndig aktiviert sind, √§ndert sich die Situation: Standardm√§√üig wird jetzt angenommen, dass die Links nur dann keine Null zulassen, wenn Sie selbst nicht das Gegenteil angeben, genau wie bei signifikanten Typen ( Sogar die Syntax ist dieselbe: Sie k√∂nnten int? schreiben, wenn Sie wirklich wollten, dass der ganzzahlige Wert optional ist. Jetzt schreiben Sie Zeichenfolge?, wenn Sie meinen, dass Sie entweder eine Zeichenfolgenreferenz oder m√∂chten</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies ist eine sehr bedeutende √Ñnderung, und vor allem ist diese neue Funktion aufgrund ihrer Bedeutung standardm√§√üig deaktiviert. Microsoft h√§tte diese Sprachfunktion anders gestalten k√∂nnen: Sie k√∂nnten die Standardlinks auf Null setzen und eine neue Syntax einf√ºhren, mit der Sie angeben k√∂nnen, dass Sie sicherstellen m√∂chten, dass dies nicht zul√§ssig ist </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Vielleicht w√ºrde dies die Messlatte senken, wenn diese M√∂glichkeit untersucht wird, aber auf lange Sicht w√§re eine solche L√∂sung falsch, da in der Praxis die meisten Links in der riesigen Masse an C # -Code nicht darauf ausgelegt sind, darauf hinzuweisen </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, Null ist eine Ausnahme, keine Regel. Wenn diese neue Sprachfunktion aktiviert ist, wird das Verhindern von Null zu einem neuen Standard. Dies spiegelt sich auch im urspr√ºnglichen Funktionsnamen wider: "nullf√§hige Referenzen". Der Name ist merkw√ºrdig, da Links </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf C # 1.0 </font><font style="vertical-align: inherit;">verweisen k√∂nnten </font><font style="vertical-align: inherit;">. Die Entwickler haben jedoch betont, dass die Nullannahme nun in die Kategorie der Dinge f√§llt, die explizit angefordert werden m√ºssen. </font></font><br>
‚ÄÉ<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C # 8.0 vereinfacht das Einf√ºhren zul√§ssiger Links </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, da Sie diese Funktion schrittweise einf√ºhren k√∂nnen. Man muss keine Ja- oder Nein-Wahl treffen. Dies unterscheidet sich erheblich von der </font></font><code>async/await</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in C # 5.0 hinzugef√ºgten </font><font style="vertical-align: inherit;">Funktion </font><font style="vertical-align: inherit;">, die sich tendenziell ausbreitet: Tats√§chlich verpflichten asynchrone Vorg√§nge den Anrufer dazu</font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher muss sich der Code, der diesen Aufrufer aufruft </font></font><code>async</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, usw. ganz oben im Stapel befinden. Gl√ºcklicherweise sind Typen, die dies zulassen, </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unterschiedlich aufgebaut: Sie k√∂nnen selektiv und schrittweise implementiert werden. Sie k√∂nnen die Dateien einzeln oder bei Bedarf sogar zeilenweise durcharbeiten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der wichtigste Aspekt der zul√§ssigen Typen</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(dank dessen der √úbergang zu ihnen vereinfacht wird), ist, dass sie standardm√§√üig deaktiviert sind. Andernfalls w√ºrden die meisten Entwickler die Verwendung von C # 8.0 ablehnen, da ein solcher √úbergang in fast jeder Codebasis Warnungen verursachen w√ºrde. Aus den gleichen Gr√ºnden ist der Einstiegsschwellenwert f√ºr die Verwendung dieser neuen Funktion jedoch ziemlich hoch: Wenn eine neue Funktion so dramatische √Ñnderungen vornimmt, dass sie standardm√§√üig deaktiviert ist, m√∂chten Sie sich wahrscheinlich nicht damit anlegen, aber es gibt Probleme beim Umschalten wird immer unn√∂tig √Ñrger erscheinen. Aber das w√§re eine Schande, denn die Funktion ist sehr wertvoll. Es ist hilfreich, Fehler im Code zu finden, bevor Benutzer dies f√ºr Sie tun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie also √ºberlegen, Typen einzuf√ºhren, die dies zulassen</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachten Sie unbedingt, dass Sie diese Funktion Schritt f√ºr Schritt einf√ºhren k√∂nnen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nur Warnungen</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Die gr√∂bste Kontrolle √ºber das gesamte Projekt nach einem einfachen Ein- / Ausschalten ist die M√∂glichkeit, Warnungen unabh√§ngig von Anmerkungen zu aktivieren. Wenn ich beispielsweise die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nullannahme</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºr </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Corvus.ContentHandling.Json</font></a><font style="vertical-align: inherit;"> in unserem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corvus.ContentHandling-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Repository </font><font style="vertical-align: inherit;">vollst√§ndig aktiviere </font><font style="vertical-align: inherit;">und </font></font><code>&lt;Nullablegt;enable&lt;/Nullablegt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Gruppe von Eigenschaften in der Projektdatei </font><font style="vertical-align: inherit;">hinzuf√ºge </font><font style="vertical-align: inherit;">, werden in ihrem aktuellen Status sofort 20 Warnungen vom Compiler </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">angezeigt</font></a><font style="vertical-align: inherit;"> . Wenn ich es stattdessen verwende, </font></font><code>&lt;Nullablegt;warnings&lt;/Nullablegt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erhalte </font><font style="vertical-align: inherit;">ich </font><font style="vertical-align: inherit;">nur eine Warnung.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber warte! Warum werden mir weniger Warnungen angezeigt? Am Ende habe ich hier nur um Warnungen gebeten. Die Antwort auf diese Frage ist nicht ganz offensichtlich: Tatsache ist, dass einige Variablen und Ausdr√ºcke </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null-ahnungslos sein k√∂nnen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nullneutralit√§t</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
C # unterst√ºtzt zwei Interpretationen der Nullg√ºltigkeit. Erstens kann jede Variable eines Referenztyps als zulassend oder nicht zulassend deklariert werden </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und zweitens wird der Compiler nach M√∂glichkeit logisch schlie√üen, ob sich diese Variable </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an einem bestimmten Punkt im Code befinden </font><font style="vertical-align: inherit;">kann oder nicht </font><font style="vertical-align: inherit;">. Dieser Artikel befasst sich nur mit der ersten Art der Zul√§ssigkeit</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dh √ºber den statischen Typ einer Variablen (tats√§chlich gilt dies nicht nur f√ºr Variablen und Parameter und Felder, die ihnen im Geiste nahe stehen; sowohl statische als auch logisch ableitbare Zul√§ssigkeit werden </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f√ºr jeden Ausdruck in C # bestimmt.) Tats√§chlich ist Zul√§ssigkeit </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in ihrem ersten Sinne Das, was wir in Betracht ziehen, ist eine Erweiterung des Typsystems. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es stellt sich jedoch heraus, dass die Situation nicht so koh√§rent ist, wie man annehmen k√∂nnte, wenn wir uns nur auf die Nullzul√§ssigkeit f√ºr einen Typ konzentrieren. Dies ist nicht nur ein Kontrast zwischen "null G√ºltigkeit" und "ung√ºltig"</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">". In der Tat gibt es zwei weitere M√∂glichkeiten. Es gibt eine Kategorie von ‚Äûunbekannt‚Äú, die aufgrund der Verf√ºgbarkeit von Generika obligatorisch ist. Wenn Sie einen unbegrenzten Typparameter haben, k√∂nnen Sie nichts √ºber die G√ºltigkeit herausfinden </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Code, der die entsprechende verallgemeinerte Methode oder den Typ verwendet, kann ein Argument in ihnen ersetzen, das entweder zul√§sst oder nicht zul√§sst </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sie k√∂nnen Einschr√§nkungen hinzuf√ºgen, aber h√§ufig sind solche Einschr√§nkungen unerw√ºnscht, da sie den Umfang des verallgemeinerten Typs oder der verallgemeinerten Methode einschr√§nken. F√ºr Variablen oder Ausdr√ºcke eines unbegrenzten Typparameters muss die </font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Nicht-) G√ºltigkeit von Null unbekannt sein. vielleicht in jedem Fall die Frage der Zul√§ssigkeit</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wird separat f√ºr sie entschieden, aber wir wissen nicht, welche Option im generischen Code angezeigt wird, da dies vom Typargument abh√§ngt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die letztere Kategorie wird als "neutral" bezeichnet. Nach dem Prinzip der "Neutralit√§t" hat alles vor dem Aufkommen von C # 8.0 funktioniert, und dies funktioniert, wenn Sie die F√§higkeit zum Arbeiten mit nullbaren Links nicht aktivieren. (Grunds√§tzlich ist dies ein Beispiel f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√ºckwirkung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Obwohl die Idee der Nullneutralit√§t erstmals in C # 8.0 als nat√ºrlicher Codezustand eingef√ºhrt wurde, bevor die Nullg√ºltigkeit f√ºr Referenzen aktiviert wurde, bestanden C # -Designer darauf, dass diese Eigenschaft C # nie wirklich fremd war.)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielleicht m√ºssen Sie nicht erkl√§ren, was "Neutralit√§t" in diesem Fall bedeutet, da C # in diesem Sinne immer funktioniert hat, sodass Sie selbst alles verstehen ... obwohl dies vielleicht etwas unehrlich ist. H√∂ren Sie also zu: In einer Welt, in der es um Zul√§ssigkeit geht </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ist das wichtigste Merkmal von </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neutralen Ausdr√ºcken, dass sie keine Warnungen vor Nullakzeptanz ausl√∂sen. Sie k√∂nnen einen nullneutralen Ausdruck als zul√§ssige </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber nicht zul√§ssige Variable </font><font style="vertical-align: inherit;">zuweisen </font><font style="vertical-align: inherit;">. </font></font><code>Null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-neutrale Variablen (sowie Eigenschaften, Felder usw.) k√∂nnen Sie Ausdr√ºcke zuweisen, die der Compiler als "m√∂glich </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" oder "nicht </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" angesehen hat.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie nur Warnungen aktivieren, gibt es deshalb nicht so viele neue Warnungen. Der gesamte Code verbleibt im Kontext deaktivierter G√ºltigkeitsanmerkungen </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sodass alle Variablen, Parameter, Felder und Eigenschaften </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neutral sind. Dies bedeutet, dass Sie keine Warnungen erhalten, wenn Sie versuchen, sie in Verbindung mit Entit√§ten zu verwenden, die dies ber√ºcksichtigen </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum bekomme ich dann √ºberhaupt Warnungen? Ein h√§ufiger Grund ist der Versuch, auf inakzeptable Weise Freunde zu finden, die zwei Codeteile ber√ºcksichtigen </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Angenommen, ich habe eine Bibliothek, in der zul√§ssige Links vollst√§ndig enthalten sind </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und diese Bibliothek verf√ºgt √ºber die folgende tief erfundene Klasse:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">NullableAwareClass</span><font></font>
	{<font></font>
	    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span>? GetNullable() =&gt; DateTime.Now.Hour &gt; <span class="hljs-number">12</span> ? <span class="hljs-literal">null</span> : <span class="hljs-string">"morning"</span>;<font></font>
	<font></font>
<font></font>
	    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">RequireNonNull</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> s</span>)</span> =&gt; s.Length;<font></font>
	}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au√üerdem kann ich in einem anderen Projekt diesen Code in dem Kontext schreiben, in dem Nullg√ºltigkeitswarnungen aktiviert sind, die entsprechenden Anmerkungen jedoch deaktiviert sind: </font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">UseString</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> x</span>)</span> =&gt; NullableAwareClass.RequireNonNull(x);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da Anmerkungen zur Nullg√ºltigkeit deaktiviert sind, ist der Parameter </font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neutral. </font><font style="vertical-align: inherit;">Dies bedeutet, dass der Compiler nicht feststellen kann, ob dieser Code wahr ist oder nicht. </font><font style="vertical-align: inherit;">Wenn der Compiler Warnungen in F√§llen ausgibt, in denen </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neutrale Ausdr√ºcke mit denen gemischt werden, die dies ber√ºcksichtigen </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, kann ein erheblicher Teil dieser Warnungen als zweifelhaft angesehen werden. Daher werden keine Warnungen ausgegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit diesem Wrapper habe ich tats√§chlich die Tatsache versteckt, dass der Code die G√ºltigkeit ber√ºcksichtigt </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das hei√üt, jetzt kann ich so schreiben:</font></font><br>
<br>
<pre><code class="cs hljs">	<span class="hljs-keyword">int</span> x = UseString(NullableAwareClass.GetNullable());</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Compiler wei√ü, was er zur√ºckgeben </font></font><code>GetNullable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kann </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, aber da ich die Methode mit einem nullneutralen Parameter aufgerufen habe, wei√ü das Programm nicht, ob dies richtig oder falsch ist. Mit dem </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-neutralen Wrapper habe ich den Compiler deaktiviert, der hier jetzt kein Problem mehr sieht. Wenn ich diese beiden Methoden jedoch direkt kombinieren w√ºrde, w√§re alles anders:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">int</span> y = NullableAwareClass.RequireNonNull(NullableAwareClass.GetNullable());</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier √ºbergebe ich das Ergebnis </font></font><code>GetNullable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">direkt an </font></font><code>RequireNonNull</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn ich dies in einem Kontext versuchen w√ºrde, in dem Nullannahmen aktiviert sind, w√ºrde der Compiler eine Warnung generieren, unabh√§ngig davon, ob ich den Kontext der entsprechenden Anmerkungen aktiviert oder deaktiviert habe. In diesem speziellen Fall spielt der Kontext von Anmerkungen keine Rolle, da es keine Deklarationen mit einem Referenztyp gibt. Wenn Sie Warnungen bez√ºglich der Annahme von Null aktivieren, aber die entsprechenden Anmerkungen deaktivieren, werden alle Deklarationen </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neutral, was jedoch nicht bedeutet, dass alle Ausdr√ºcke solche werden. Wir wissen also, dass das Ergebnis </font></font><code>GetNullable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null ist. Daher erhalten wir eine Warnung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zusammenfassend: da alle Deklarationen im Kontext von deaktivierten Annotationen, die dies zulassen, </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sind</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-neutral, wir werden nicht viele Warnungen erhalten, da die meisten Ausdr√ºcke </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-neutral sind. Der Compiler kann jedoch weiterhin Fehler im Zusammenhang mit der Annahme </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in den F√§llen </font><font style="vertical-align: inherit;">abfangen, </font><font style="vertical-align: inherit;">in denen die Ausdr√ºcke keinen nullneutralen Intermedi√§r durchlaufen. Dar√ºber hinaus besteht der gr√∂√üte Vorteil in diesem Fall darin, Fehler zu erkennen, die mit Versuchen verbunden sind, potenzielle Nullwerte zu dereferenzieren, indem </font></font><code>.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beispielsweise verwendet wird:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-keyword">int</span> z = NullableAwareClass.GetNullable().Length;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Ihr Code gut gestaltet ist, sollte es keine gro√üe Anzahl solcher Fehler geben. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schrittweise Annotation des gesamten Projekts</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Nachdem Sie den ersten Schritt ausgef√ºhrt haben, aktivieren Sie einfach die Warnungen und fahren Sie mit der schrittweisen Aktivierung der Annotationen Datei f√ºr Datei fort. Es ist praktisch, sie sofort in das gesamte Projekt aufzunehmen, zu sehen, in welchen Dateien Warnungen angezeigt werden, und dann eine Datei auszuw√§hlen, in der relativ wenige Warnungen vorhanden sind. Deaktivieren Sie sie erneut auf der Ebene des gesamten Projekts und schreiben Sie oben in die ausgew√§hlte Datei </font></font><code>#nullable enable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dadurch wird die Annahme </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(sowohl f√ºr Warnungen als auch f√ºr Anmerkungen) in der gesamten Datei </font><font style="vertical-align: inherit;">vollst√§ndig aktiviert </font><font style="vertical-align: inherit;">(es sei denn, Sie deaktivieren sie mithilfe einer anderen Anweisung erneut</font></font><code>#nullable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Anschlie√üend k√∂nnen Sie die gesamte Datei durchgehen und sicherstellen, dass alle Entit√§ten, bei denen es wahrscheinlich ist, dass sie null sind, als zul√§ssig </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(d. H. Hinzuf√ºgen </font></font><code>?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) gekennzeichnet werden. Anschlie√üend k√∂nnen Sie Warnungen in dieser Datei bearbeiten, falls noch vorhanden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es kann sich herausstellen, dass das Hinzuf√ºgen aller erforderlichen Anmerkungen alles ist, was erforderlich ist, um alle Warnungen zu beseitigen. Das Gegenteil ist auch m√∂glich: Sie k√∂nnen feststellen, dass Sie eine Datei √ºber die G√ºltigkeit ordentlich kommentieren</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, andere Warnungen sind in anderen Dateien aufgetaucht, die es verwenden. In der Regel gibt es nicht viele solcher Warnungen, und Sie haben Zeit, diese schnell zu beheben. Aber wenn Sie nach diesem Schritt aus irgendeinem Grund nur in Warnungen ertrinken, haben Sie immer noch ein paar L√∂sungen. Erstens k√∂nnen Sie einfach die Auswahl abbrechen, diese Datei verlassen und eine andere √ºbernehmen. Zweitens k√∂nnen Sie Anmerkungen f√ºr die Mitglieder, von denen Sie glauben, dass sie die meisten Probleme verursachen, selektiv deaktivieren. ( </font></font><code>#nullable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen die </font><font style="vertical-align: inherit;">Direktive </font><font style="vertical-align: inherit;">so oft verwenden, wie Sie m√∂chten, sodass Sie die Einstellungen f√ºr die Nullg√ºltigkeit sogar zeilenweise steuern k√∂nnen, wenn Sie m√∂chten.) Wenn Sie sp√§ter zu dieser Datei zur√ºckkehren, wenn Sie die Nullg√ºltigkeit in den meisten Projekten bereits aktivieren, sehen Sie m√∂glicherweise weniger Warnungen als beim ersten Mal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt Zeiten, in denen Probleme nicht so einfach gel√∂st werden k√∂nnen. </font><font style="vertical-align: inherit;">In bestimmten Szenarien im Zusammenhang mit der Serialisierung (z. B. bei Verwendung von Json.NET oder Entity Framework) kann die Arbeit daher schwieriger sein. </font><font style="vertical-align: inherit;">Ich denke, dieses Problem verdient einen separaten Artikel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verkn√ºpfungen mit der Annahme </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verbessern die Ausdruckskraft Ihres Codes und erh√∂hen die Wahrscheinlichkeit, dass der Compiler Ihre Fehler abf√§ngt, bevor Benutzer auf sie sto√üen. </font><font style="vertical-align: inherit;">Daher ist es besser, diese Funktion nach M√∂glichkeit einzuschlie√üen. </font><font style="vertical-align: inherit;">Und wenn Sie es selektiv einbeziehen, werden sich die Vorteile schneller anf√ºhlen.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de501502/index.html">New Lab Digital Synthesis setzt Harris Book fort und hilft bei der Erstellung von FPGA-Videospielen</a></li>
<li><a href="../de501506/index.html">√úber GDI-Lecks und die Bedeutung des Gl√ºcks</a></li>
<li><a href="../de501508/index.html">Verdammt altes CRM</a></li>
<li><a href="../de501510/index.html">Ein neuer Blick auf die Fullstack-Entwicklung mit dem Ruby on Rails-Framework</a></li>
<li><a href="../de501516/index.html">Lassen Sie uns das Vakuum ausschalten ?! Alexey Lesovsky</a></li>
<li><a href="../de501522/index.html">Kostenlose Skillbox-Webinare: Schreiben von Spielen in PHP, Unity und Unreal Engine</a></li>
<li><a href="../de501526/index.html">Warum wird kanadisches Englisch als "schmutzig" angesehen und was hat Keanu Reeves damit zu tun?</a></li>
<li><a href="../de501528/index.html">Das Buch "Bash and Cybersecurity: Angriff, Verteidigung und Analyse √ºber die Linux-Befehlszeile"</a></li>
<li><a href="../de501534/index.html">Jetzt mit COVID-19 gibt es auch einen Ausschlag</a></li>
<li><a href="../de501536/index.html">Ma√ügeschneidert: Eine Geschichte dar√ºber, wie aus einer Codezeile Kilotonnen Kohle wurden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>