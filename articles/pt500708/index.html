<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦏 👩🏼‍🤝‍👨🏻 🛀🏾 Segurança e DBMS: o que você precisa lembrar ao escolher as ferramentas de proteção 🐘 🥘 📜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Meu nome é Denis Rozhkov, sou o chefe de desenvolvimento de software da Gazinformservice, na equipe de produtos Jatoba . A legislação e os regulamento...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Segurança e DBMS: o que você precisa lembrar ao escolher as ferramentas de proteção</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/500708/"><h1><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e1/315/3ed/1e13153edc98d4ac4b2de6858a7ea48c.png"></div></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Meu nome é Denis Rozhkov, sou o chefe de desenvolvimento de software da Gazinformservice, na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">equipe de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> produtos </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">Jatoba</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A legislação e os regulamentos corporativos impõem certos requisitos para a segurança do armazenamento de dados. </font><font style="vertical-align: inherit;">Ninguém deseja que terceiros obtenham acesso a informações confidenciais; portanto, os seguintes problemas são importantes para qualquer projeto: identificação e autenticação, gerenciamento de acesso a dados, garantia da integridade das informações no sistema, registro de eventos de segurança. </font><font style="vertical-align: inherit;">Portanto, quero falar sobre alguns pontos interessantes sobre a segurança do DBMS.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este artigo foi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escrito</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">@Databases Meetup,</font></a><font style="vertical-align: inherit;"> hospedado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mail.ru Cloud Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se você não quiser ler, poderá ver:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/n-54j9FHaMU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O artigo terá três partes:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como proteger conexões.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que é uma auditoria de ações e como registrar o que está acontecendo por parte do banco de dados e a conexão com ele.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como proteger os dados no próprio banco de dados e quais tecnologias existem para isso.</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a7d/19f/d89/a7d19fd894a9ea6e3f0ff7a0ad42db36.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os três componentes da segurança do DBMS: proteção de conexão, auditoria de atividades e proteção de dados</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proteção de conexão</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode se conectar ao banco de dados direta ou indiretamente por meio de aplicativos da web. </font><font style="vertical-align: inherit;">Como regra, o usuário do lado da empresa, ou seja, a pessoa que trabalha com o DBMS, não interage diretamente com ele. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de falar sobre a proteção de conexões, você precisa responder a perguntas importantes que dependem de como as medidas de segurança serão construídas:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se um usuário comercial é equivalente a um usuário DBMS;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O acesso aos dados do DBMS é fornecido apenas por meio da API que você controla ou há acesso diretamente às tabelas;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se o DBMS está alocado em um segmento protegido separado, quem interage com ele e como;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se pool / proxy e middleware são usados, o que pode alterar as informações sobre como a conexão é construída e quem usa o banco de dados.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos ver quais ferramentas podem ser usadas para proteger conexões:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use soluções de classe de firewall de banco de dados. </font><font style="vertical-align: inherit;">Uma camada adicional de proteção, pelo menos, aumentará a transparência do que está acontecendo no DBMS, no máximo - você pode fornecer proteção adicional aos dados.</font></font></li>
<li>  .     ,    .    —      -,    ,   .    ,  ,      .<br>
<br>
       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>,    MS SQL Vulnerability Assessmen   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>.&nbsp;</li>
<li>    .   ,   ,       ,         , ,    .      .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configure o SSL, se você não tiver uma separação de rede do DBMS dos usuários finais, ele não estará em uma VLAN separada. </font><font style="vertical-align: inherit;">Nesses casos, é necessário proteger o canal entre o consumidor e o próprio DBMS. </font><font style="vertical-align: inherit;">As ferramentas de proteção estão entre o código aberto.</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como isso afetará o desempenho do DBMS?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejamos um exemplo do PostgreSQL, como o SSL afeta a carga da CPU, aumentando os tempos e diminuindo o TPS, se houver muitos recursos, se você o habilitar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Carregamos o PostgreSQL usando o pgbench - é um programa simples para executar testes de desempenho. </font><font style="vertical-align: inherit;">Ele executa repetidamente uma sequência de comandos, possivelmente em sessões paralelas de banco de dados, e calcula a velocidade média da transação. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste 1 sem SSL e usando SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - uma conexão é estabelecida com cada transação:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require&nbsp;<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vs</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe --connect -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste 2 sem SSL e usando SSL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - todas as transações são executadas em uma conexão:</font></font><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres sslmode=require<font></font>
sslrootcert=rootCA.crt sslcert=client.crt sslkey=client.key"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vs</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">pgbench.exe -c 10 -t 5000 "host=192.168.220.129 dbname=taskdb user=postgres"</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outras configurações</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">scaling factor: 1<font></font>
query mode: simple<font></font>
number of clients: 10<font></font>
number of threads: 1<font></font>
number of transactions per client: 5000<font></font>
number of transactions actually processed: 50000/50000</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados do teste</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SEM SSL</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL</font></font></strong></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A conexão é estabelecida em cada transação</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">média de latência</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">171.915 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">187.695 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps, incluindo conexões que estabelecem</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.168112</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53.278062</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps excluindo conexões que estabelecem</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64.084546</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">58.725846</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todas as transações são realizadas em uma conexão.</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">média de latência</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6,722 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.342 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps incluindo conexões que estabelecem</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1587.657278</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1576.792883</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tps excluindo conexões que estabelecem</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1588.380574</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1577.694766</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em cargas leves, o efeito do SSL é comparável ao erro de medição. Se a quantidade de dados transferidos for muito grande, a situação poderá ser diferente. Se estabelecermos uma conexão para cada transação (isso é raro, geralmente a conexão é compartilhada entre usuários), você tem um grande número de conexões / desconexões, o efeito pode ser um pouco mais. Ou seja, pode haver riscos para a degradação do desempenho, no entanto, a diferença não é tão grande que não use proteção. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que há uma grande diferença ao comparar os modos de operação: na mesma sessão, você trabalha ou é diferente. Isso é compreensível: os recursos são gastos na criação de cada conexão.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tivemos um caso quando conectamos o Zabbix no modo de confiança, ou seja, não verificamos o md5, não havia necessidade de autenticação. Em seguida, o cliente pediu para ativar o modo de autenticação md5. Isso deu uma grande carga na CPU, o desempenho diminuiu. Eles começaram a procurar maneiras de otimizar. Uma das soluções possíveis para o problema é implementar uma restrição de rede, criar VLANs separadas para o DBMS, adicionar configurações para que fique claro quem está se conectando de onde e remover a autenticação.Você também pode otimizar as configurações de autenticação para reduzir os custos de habilitar a autenticação, mas em geral, usando vários métodos a autenticação afeta o desempenho e exige que esses fatores sejam considerados ao projetar o poder de computação dos servidores (hardware) para um DBMS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusão: em várias soluções, até pequenas nuances de autenticação podem afetar muito o projeto e é ruim quando fica claro apenas quando implementado em um produto.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auditoria de ações</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Uma auditoria pode ser não apenas um DBMS. </font><font style="vertical-align: inherit;">Auditoria é o recebimento de informações sobre o que está acontecendo em diferentes segmentos. </font><font style="vertical-align: inherit;">Pode ser um firewall de banco de dados e o sistema operacional no qual o DBMS é construído. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos DBMSs comerciais de nível empresarial com auditoria, tudo está bem, em código aberto - nem sempre. </font><font style="vertical-align: inherit;">Aqui está o que o PostgreSQL possui:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log padrão - log embutido;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensions: pgaudit - se você não tiver um registro padrão suficiente, poderá usar configurações separadas que resolvam alguns dos problemas.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Além do relatório no vídeo:</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
“O registro básico de operadores pode ser fornecido com o recurso de registro padrão com log_statement = all. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso é aceitável para monitoramento e outros usos, mas não fornece o nível de detalhe normalmente necessário para uma auditoria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não basta ter uma lista de todas as operações executadas com o banco de dados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Também deve ser possível encontrar declarações específicas que sejam do interesse do auditor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A ferramenta de registro padrão mostra o que o usuário solicitou, enquanto o pgAudit se concentra nos detalhes do que aconteceu quando o banco de dados fez a solicitação. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por exemplo, o auditor pode querer garantir que uma tabela específica tenha sido criada em uma janela de manutenção documentada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pode parecer uma tarefa simples para auditoria básica e grep, mas e se você encontrar algo parecido com este exemplo (intencionalmente confuso): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O log padrão fornece o seguinte: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LOG: instrução: DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
BEGIN </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTE 'CREATE TABLE import' || 'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que a procura de uma tabela de interesse pode exigir algum conhecimento de código nos casos em que as tabelas são criadas dinamicamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso não é o ideal, pois seria preferível pesquisar apenas pelo nome da tabela. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É aqui que o pgAudit será útil. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a mesma entrada, ela produzirá esta saída no log:</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDITORIA: SESSÃO, 33.1, FUNCTION, DO ,,, “DO $$ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
COMEÇA A </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 EXECUTAR 'CREATE TABLE import' || </font><font style="vertical-align: inherit;">'ant_table (id INT)'; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
END $$; " </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AUDIT: SESSION, 33,2, DDL, CREATE TABLE, TABLE, public.important_table, CREATE TABLE important_table (id INT) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não apenas o bloco DO está registrado, mas também o texto completo CREATE TABLE com o tipo de operador, tipo de objeto e nome completo, facilitando a pesquisa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
na conduta da revista de operadores SELECT e DML pgAudit pode ser configurada para registrar uma entrada separada para cada relacionamento, que é referenciado na instrução. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Não é necessário analisar para localizar todas as instruções relacionadas a uma tabela específica ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) " .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como isso afetará o desempenho do DBMS?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos executar os testes com a auditoria completa ativada e ver o que acontece com o desempenho do PostgreSQL. </font><font style="vertical-align: inherit;">Ativamos o log máximo do banco de dados em todos os aspectos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quase não mudamos nada no arquivo de configuração, desde o importante - ative o modo debug5 para obter o máximo de informações. </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">postgresql.conf</font></font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log_destination = 'stderr' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
logging_collector = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_truncate_on_rotation = on </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_age = 1d </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_rotation_size = 10MB </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_min_messages = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_error_statement = </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug5</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
log_min_duration_statement = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_parse =</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">debug_print_rewritten = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_print_plan = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debug_pretty_print = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_checkpoints = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_connections = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_disconnections = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_duration = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_hostname = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_lock_waits = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_replication_commands = em </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_temp_files = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
log_timezone =</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No DBMS do PostgreSQL com os parâmetros 1 CPU, 2,8 GHz, 2 GB de RAM, 40 GB de disco rígido, realizamos três testes de carga usando os seguintes comandos:</font></font><br>
<br>
<pre><code class="plaintext hljs">$ pgbench -p 3389 -U postgres -i -s 150 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 50 -j 2 -P 60 -T 600 benchmark<font></font>
$ pgbench -p 3389 -U postgres -c 150 -j 2 -P 60 -T 600 benchmark</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultado dos testes:</font></font></strong><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sem registro</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Com registro</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tempo total de preenchimento do banco de dados</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43,74 seg</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53,23 seg</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">72%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">91%</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste 1 (50 conexões)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Número de transações em 10 minutos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">74169</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32445</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transação / s</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atraso médio</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">405 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">925 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teste 2 (150 conexões a 100 possíveis)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Número de transações em 10 minutos</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">81727</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31429</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transação / s</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">136</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">52</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atraso médio</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">550 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1432 ms</font></font></td>
</tr>
<tr>
<td colspan="3"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre tamanhos</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tamanho do banco de dados</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2251 MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2262 MB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tamanho do log do banco de dados</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 Mb</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4587 Mb</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conclusão: uma auditoria completa não é muito boa. </font><font style="vertical-align: inherit;">Os dados da auditoria sairão em volume, como os dados no próprio banco de dados, ou até mais. </font><font style="vertical-align: inherit;">A quantidade de log que é gerada ao trabalhar com o DBMS é um problema comum no produto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Examinamos outros parâmetros:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A velocidade não muda muito: sem registro - 43,74 segundos, com registro - 53,23 seg.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O desempenho na RAM e na CPU diminuirá, pois você precisará criar um arquivo com a auditoria. </font><font style="vertical-align: inherit;">Também é perceptível no produtivo.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com um aumento no número de conexões, é claro, o desempenho se deteriorará levemente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas empresas com auditoria, é ainda mais difícil:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">há muitos dados;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a auditoria é necessária não apenas por meio do syslog no SIEM, mas também dos arquivos: de repente algo acontece com o syslog, o arquivo no qual os dados são salvos deve estar próximo ao banco de dados;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a auditoria requer uma prateleira separada, para não afundar nos discos de E / S, pois ocupa muito espaço;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acontece que os funcionários de SI precisam de GOSTs em todos os lugares, eles exigem identificação de convidados.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restrição de acesso a dados</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejamos as tecnologias usadas para proteger os dados e acessá-los no DBMS comercial e no código aberto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que pode ser usado como um todo:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criptografia e ofuscação de procedimentos e funções (quebra automática) - ou seja, ferramentas e utilitários separados que tornam o código ilegível do código legível. </font><font style="vertical-align: inherit;">É verdade que não pode ser alterado nem refatorado. </font><font style="vertical-align: inherit;">Essa abordagem às vezes é necessária pelo menos no lado do DBMS - a lógica das restrições de licenciamento ou a lógica de autorização é criptografada precisamente no nível do procedimento e da função.</font></font></li>
<li>     (RLS) —       ,      ,   - -     .</li>
<li>   (Masking) —          ,   ,    -    .  ,        .</li>
<li>  Security DBA/Application DBA/DBA — , ,      ,        database-  application-.  open source   ,     .  ,        .</li>
<li>       .   ,    ,         .</li>
<li>     —    .</li>
<li>End-to-end encryption   —  client-side       .</li>
<li> . ,   —    ,     .</li>
</ol><br>
<h3>     ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vejamos um exemplo de criptografia de coluna no PostgreSQL. </font><font style="vertical-align: inherit;">Existe um módulo pgcrypto, que permite armazenar campos selecionados em formato criptografado. </font><font style="vertical-align: inherit;">Isso é útil quando apenas alguns dados são valiosos. </font><font style="vertical-align: inherit;">Para ler os campos criptografados, o cliente passa a chave de descriptografia, o servidor descriptografa os dados e os emite para o cliente. </font><font style="vertical-align: inherit;">Sem uma chave com seus dados, ninguém pode fazer nada. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos testar com pgcrypto</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Crie uma tabela com dados criptografados e dados regulares. </font><font style="vertical-align: inherit;">Abaixo está o comando para criar tabelas; na primeira linha, um comando útil está criando a própria extensão com o registro do DBMS:</font></font><br>
<br>
<pre><code class="plaintext hljs">CREATE EXTENSION pgcrypto;<font></font>
CREATE TABLE t1 (id integer, text1 text, text2 text);<font></font>
CREATE TABLE t2 (id integer, text1 bytea, text2 bytea);<font></font>
INSERT INTO t1 (id, text1, text2)<font></font>
VALUES (generate_series(1,10000000), generate_series(1,10000000)::text, generate_series(1,10000000)::text);<font></font>
INSERT INTO t2 (id, text1, text2) VALUES (<font></font>
generate_series(1,10000000),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'),<font></font>
encrypt(cast(generate_series(1,10000000) AS text)::bytea, 'key'::bytea, 'bf'));</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, tentaremos fazer amostragem de dados de cada tabela e examinar os tempos de execução. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seleção da tabela sem função de criptografia</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select * from t1 limit 1000;" "host=192.168.220.129 dbname=taskdb<font></font>
user=postgres sslmode=disable" &gt; 1.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O cronômetro está ativado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">texto1 | </font><font style="vertical-align: inherit;">text2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
------ + ------- + ------- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">1 | </font><font style="vertical-align: inherit;">1 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 </font><font style="vertical-align: inherit;">2 </font><font style="vertical-align: inherit;">2 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">3 </font><font style="vertical-align: inherit;">3 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
997 | </font><font style="vertical-align: inherit;">997 </font><font style="vertical-align: inherit;">997 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
998 </font><font style="vertical-align: inherit;">998 </font><font style="vertical-align: inherit;">998.999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
| </font><font style="vertical-align: inherit;">999 </font><font style="vertical-align: inherit;">999 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">1000 </font><font style="vertical-align: inherit;">1000 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 linhas) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tempo: 1.386 ms </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Amostragem de uma tabela com função de criptografia:</font></font></strong><br>
<br>
<pre><code class="plaintext hljs">psql -c "\timing" -c "select id, decrypt(text1, 'key'::bytea, 'bf'),<font></font>
decrypt(text2, 'key'::bytea, 'bf') from t2 limit 1000;"<font></font>
"host=192.168.220.129 dbname=taskdb user=postgres sslmode=disable" &gt; 2.txt</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O cronômetro está ativado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&nbsp;&nbsp;id | </font><font style="vertical-align: inherit;">descriptografar | </font><font style="vertical-align: inherit;">descriptografar </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
----- + -------------- + ------------ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 1 | </font><font style="vertical-align: inherit;">\ x31 | </font><font style="vertical-align: inherit;">\ x31 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 2 | </font><font style="vertical-align: inherit;">\ x32 | </font><font style="vertical-align: inherit;">\ x32 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 3 | </font><font style="vertical-align: inherit;">\ x33 | </font><font style="vertical-align: inherit;">\ x33 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
999 | </font><font style="vertical-align: inherit;">\ x393939 | </font><font style="vertical-align: inherit;">\ x393939 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1000 | </font><font style="vertical-align: inherit;">\ x31303030 | </font><font style="vertical-align: inherit;">\ x31303030 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(1000 linhas) </font></font><br>
<br>
<font color="red"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tempo: 50,203 ms </font></font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resultados do teste</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td>&nbsp;</td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sem criptografia</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pgcrypto (descriptografar)</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Busca de 1000 linhas</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.386 ms</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50.203 ms</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quinze%</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM</font></font></td>
<td>&nbsp;</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ 5%</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A criptografia tem um grande impacto no desempenho. </font><font style="vertical-align: inherit;">Pode-se observar que o tempo aumentou, pois as operações de descriptografar dados criptografados (e a descriptografia geralmente ainda estão encapsuladas em sua lógica) requerem recursos significativos. </font><font style="vertical-align: inherit;">Ou seja, a idéia de criptografar todas as colunas que contêm algum tipo de dados é repleta de desempenho reduzido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No entanto, a criptografia não é uma bala de prata que resolve todos os problemas. </font><font style="vertical-align: inherit;">Os dados descriptografados e a chave de descriptografia no processo de descriptografia e transferência de dados estão localizados no servidor. </font><font style="vertical-align: inherit;">Portanto, as chaves podem ser interceptadas por quem tem acesso total ao servidor de banco de dados, por exemplo, um administrador do sistema.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando a coluna inteira para todos os usuários tem uma chave (mesmo que não seja para todos, mas para um conjunto limitado de clientes), isso nem sempre é bom e correto. </font><font style="vertical-align: inherit;">É por isso que eles começaram a criptografar de ponta a ponta; no DBMS, começaram a considerar opções para criptografar dados do cliente e do servidor, os mesmos repositórios de cofre de chaves que apareceram - produtos separados que fornecem gerenciamento de chaves no DBMS.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a97/d2d/cb2/a97d2dcb29c95253ff37b99f2bf1be40.png"></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um exemplo dessa criptografia no MongoDB</font></font></i></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recursos de segurança em DBMS comercial e de código aberto</font></font></h2><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funções</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um tipo</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Política de senha</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auditar</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Protegendo o código-fonte para procedimentos e funções</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RLS</font></font></strong></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criptografia</font></font></strong></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oráculo</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Msql</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
</tr>
<tr>
<td><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jatobá</font></font></strong></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comercial</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensões</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Livre</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensões</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensões</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extensões</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mongodb</font></font></strong></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Livre</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disponível apenas no MongoDB Enterprise</font></font></td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A tabela está longe de estar completa, mas a situação é a seguinte: em produtos comerciais, os problemas de segurança foram resolvidos por um longo tempo, em código aberto, como regra, alguns complementos são usados ​​para segurança, muitas funções não são suficientes, às vezes você precisa adicionar algo. Por exemplo, políticas de senha - no PostgreSQL existem muitas extensões diferentes ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) que implementam políticas de senha, mas, na minha opinião, nenhuma cobre todas as necessidades do segmento corporativo doméstico. </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que fazer se não for necessário em lugar algum</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? Por exemplo, quero usar um DBMS específico, no qual não há funções que o cliente exija.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, você pode usar soluções de terceiros que funcionam com diferentes DBMSs, por exemplo, “Crypto DB” ou “Garda DB”. Se estamos falando de soluções do segmento doméstico, eles sabem melhor sobre GOSTs do que em código aberto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda opção é escrever o que você precisa, implementar acesso e criptografia de dados no aplicativo no nível do procedimento. É verdade que, com o GOST, será mais difícil. Mas, em geral - você pode ocultar os dados conforme necessário, colocá-los no DBMS, obtê-los e descriptografá-los como deveriam, diretamente no nível do aplicativo. Ao mesmo tempo, pense imediatamente em como você protegerá esses algoritmos no aplicativo. Em nossa opinião, isso deve ser feito no nível do DBMS, porque funcionará mais rapidamente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa palestra foi feita pela primeira vez no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Databases Meetup</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pelo Mail.ru Cloud Solutions. Assista ao </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.youtube.com/redirect%3Fq%3D"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vídeo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outras aparições e inscreva-se nos anúncios de eventos do Telegram </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Around Kubernetes no Mail.ru Group</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que mais se pode ler sobre o tópico</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mais do que Ceph: MCS Block Cloud Storage</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como escolher um banco de dados para o projeto, para não selecionar novamente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ol></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500696/index.html">Como os tênis estão tentando se adaptar ao pé feminino</a></li>
<li><a href="../pt500698/index.html">Evgeny Katyshev: “O OpenStreetMap não é adequado para nenhuma informação”</a></li>
<li><a href="../pt500700/index.html">Suporte para TLS1.3 e expansão de sua conta pessoal: o que foi feito no primeiro trimestre de 2020</a></li>
<li><a href="../pt500704/index.html">Unicórnios (Airbnb, Uber, Lyft, Careem) demitem milhares de funcionários em meio a problemas durante a pandemia de coronavírus</a></li>
<li><a href="../pt500706/index.html">Atualizando o MySQL (Percona Server) de 5,7 para 8,0</a></li>
<li><a href="../pt500712/index.html">Coronavírus digital - uma combinação de ransomware e infostealer</a></li>
<li><a href="../pt500718/index.html">EPAM no modo remoto: como funciona</a></li>
<li><a href="../pt500720/index.html">Novos padrões de segurança da informação: dificultam a vida dos invasores</a></li>
<li><a href="../pt500722/index.html">“Asse até ficar pronto”: quem salva gravações raras de uma maneira tão incomum</a></li>
<li><a href="../pt500724/index.html">Como as autoridades financeiras dos EUA limitam o impacto negativo do jogo no declínio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>