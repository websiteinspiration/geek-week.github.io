<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍑 👐 👆🏾 5 Best Practices für die Verwendung von React Hooks in der Produktion 👵 😶 🏡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Autor des Artikels, die Übersetzung , von denen wir heute veröffentlicht werden, so dass commerce angenommen React Haken am Anfang 2019 - zum Zeit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>5 Best Practices für die Verwendung von React Hooks in der Produktion</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/494712/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Autor des Artikels, die Übersetzung , </font><font style="vertical-align: inherit;">von denen wir heute veröffentlicht werden, so dass </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">commerce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> angenommen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React Haken</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> am Anfang 2019 - zum Zeitpunkt ihres Erscheinens in 16.8.0 React. </font><font style="vertical-align: inherit;">Seitdem verarbeiten die Programmierer des Unternehmens ihren Code ständig und übersetzen ihn in Hooks. </font><font style="vertical-align: inherit;">Mit React-Hooks können Sie den Komponentenstatus und andere React-Funktionen verwenden, ohne Klassen zu verwenden. </font><font style="vertical-align: inherit;">Mithilfe von Hooks können Sie bei der Arbeit mit Funktionskomponenten eine Verbindung zu den Ereignissen des Komponentenlebenszyklus herstellen und auf Änderungen ihres Status reagieren.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/dp/fq/jr/dpfqjrae_1gxg8w2fhzc6izgffa.jpeg"></a><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurz über die Ergebnisse der Implementierung von Hooks</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir kurz und bündig darüber sprechen, was uns die Hooks gegeben haben, stellt sich heraus, dass sie zur Vereinfachung der Codebasis beigetragen haben, indem sie die Logik aus den Komponenten extrahiert und die Zusammensetzung verschiedener Funktionen erleichtert haben. </font><font style="vertical-align: inherit;">Darüber hinaus hat die Verwendung von Haken dazu geführt, dass wir viel gelernt haben. </font><font style="vertical-align: inherit;">Zum Beispiel, wie Sie Ihren Code durch kontinuierliche Verbesserung der vorhandenen Funktionalität besser strukturieren können. </font><font style="vertical-align: inherit;">Wir sind sicher, dass wir noch viel mehr interessante Dinge lernen werden, während wir weiter mit React Hooks arbeiten.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stärken der Hook-Implementierung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Einführung von Haken hat uns Folgendes gegeben:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbesserung der Lesbarkeit von Code. </font><font style="vertical-align: inherit;">Dies ist möglich durch die Verwendung kleinerer Komponentenbäume als zuvor. </font><font style="vertical-align: inherit;">Die Erstellung solcher Komponentenbäume wird durch unseren Wunsch erleichtert, Rendering-Eigenschaften und Komponenten höherer Ordnung aufzugeben.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbesserung der Code-Debugging-Funktionen. </font><font style="vertical-align: inherit;">Wir verfügten über eine verbesserte visuelle Darstellung des Codes und zusätzliche Debugging-Informationen, die von den React-Entwicklertools bereitgestellt wurden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verbesserung der Modularität des Projekts. </font><font style="vertical-align: inherit;">Aufgrund der Funktionsweise von Hooks wurde das Erstellen und Anwenden von Logik, die für die wiederholte Verwendung geeignet ist, vereinfacht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufgabentrennung. </font><font style="vertical-align: inherit;">Reaktionskomponenten sind für das Erscheinungsbild der Schnittstellenelemente verantwortlich, und Hooks bieten Zugriff auf die gekapselte Programmlogik.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt möchten wir unsere Empfehlungen zur Verwendung von Haken in der Produktion teilen.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Rufen Sie Hooks rechtzeitig von Komponenten ab und erstellen Sie benutzerdefinierte Hooks</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung von Haken in Funktionskomponenten ist ziemlich einfach. </font><font style="vertical-align: inherit;">Zum Beispiel haben wir uns schnell irgendwo beworben </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und unsere Arbeit fortgesetzt. </font><font style="vertical-align: inherit;">Dieser Ansatz erlaubt es jedoch nicht, alle Möglichkeiten, die Hooks bieten können, voll auszuschöpfen. </font><font style="vertical-align: inherit;">Presenting </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in Form eines kleinen </font></font><code>use&lt;StateName&gt;State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, und </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- in Form </font></font><code>use&lt;EffectName&gt;Effect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">konnten wir folgendes erreichen:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Komponenten sind kleiner als bei normalen Haken.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haken können in verschiedenen Komponenten wiederverwendet werden.</font></font></li>
<li>,         React,  ,    . ,   <code>State&lt;StateName&gt;</code>   <code>State</code>.        <code>React.useState</code>,     .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Abrufen von Hooks trägt auch dazu bei, dass wiederverwendbare und gemeinsam genutzte Logik in verschiedenen Teilen der Anwendung besser sichtbar ist. Eine ähnliche oder doppelte Logik ist schwieriger zu erkennen, wenn Sie nur im Komponentencode integrierte Hooks verwenden. Die resultierenden Hooks können klein sein und sehr wenig Code enthalten </font></font><code>useToggleState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Auf der anderen Seite können größere Haken </font></font><code>useProductFetcher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jetzt mehr Funktionen enthalten. Beides hat uns geholfen, die Codebasis zu vereinfachen, indem wir die Größe der React-Komponenten reduziert haben.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im folgenden Beispiel wird ein kleiner React-Hook erstellt, mit dem die Auswahl der Elemente gesteuert werden kann. </font><font style="vertical-align: inherit;">Die Vorteile der Kapselung dieser Funktionalität werden sofort deutlich, wenn Sie feststellen, wie oft eine solche Logik in der Anwendung verwendet wird. </font><font style="vertical-align: inherit;">Zum Beispiel, um eine Reihe von Aufträgen aus einer Liste auszuwählen.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//  </span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//   </span><font></font>
<font></font>
<span class="hljs-keyword">const</span> useSelection = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, setSelected] = React.useState()
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> select = React.useCallback(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> setSelected(<span class="hljs-comment">/** ... */</span>), [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selected,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSelect<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;])<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> [selected, select]<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [selected, select] = useSelection()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">selectedIds</span>=<span class="hljs-string">{selected}</span> <span class="hljs-attr">onSelect</span>=<span class="hljs-string">{id</span> =&gt;</span> select(id)} /&gt;</span><font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Über die Vorteile von React.useDebugValue</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Standard-Hook </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React.useDebugValue</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bezieht sich auf die wenig bekannten React-Funktionen. </font><font style="vertical-align: inherit;">Dieser Hook kann dem Entwickler beim Debuggen des Codes helfen. Er kann nützlich sein, um ihn in Hooks zu verwenden, die für die Freigabe vorgesehen sind. </font><font style="vertical-align: inherit;">Dies sind Benutzer-Hooks, die in vielen Komponenten der Anwendung verwendet werden. </font><font style="vertical-align: inherit;">Es wird jedoch </font></font><code>useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht empfohlen, es in allen Benutzer-Hooks zu verwenden, da die integrierten Hooks bereits Standard-Debug-Werte protokollieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich vor, Sie erstellen einen benutzerdefinierten Hook, mit dem Sie entscheiden können, ob bestimmte Funktionen der Anwendung aktiviert werden müssen. </font><font style="vertical-align: inherit;">Die der Entscheidung zugrunde liegenden Anwendungsstatusdaten können aus verschiedenen Quellen stammen. </font><font style="vertical-align: inherit;">Sie können in einem React-Kontextobjekt gespeichert werden, über das der Zugriff organisiert ist </font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um dem Entwickler beim Debuggen zu helfen, kann es bei der Arbeit mit React-Entwicklertools hilfreich sein, den analysierten Flag-Namen ( </font></font><code>flagName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) und die Variante des Flag-Werts ( </font></font><code>flagVariation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) zu kennen. </font><font style="vertical-align: inherit;">In diesem Fall kann uns die Verwendung eines kleinen Hakens helfen </font></font><code>React.useDebugValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useFeatureToggle</span>(<span class="hljs-params">flagName, flagVariation = true</span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> flags = React.useContext(FlagsContext)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> isFeatureEnabled = getIsFeatureEnabled(flagName, flagVariation)(flags)<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;React.useDebugValue({<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagName,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flagVariation,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">isEnabled</span>: isFeatureEnabled<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;})<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> isFeatureEnabled<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir jetzt mit den Tools des React-Entwicklers arbeiten, können wir Informationen über die Option des Flag-Werts, über den Flag-Namen und darüber, ob die für uns interessante Funktion aktiviert ist oder nicht, anzeigen.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a37/b3d/78c/a37b3d78c562b28184abd5d5a8fe1c93.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arbeiten mit React-Entwicklertools nach dem Anwenden des React.useDebugValue-Hooks</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Beachten Sie, dass in Fällen, in denen Benutzer-Hooks Standard-Hooks wie</font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder verwenden</font></font><code>React.useRef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, solche Hooks bereits die entsprechenden Status- oder Ref-Objektdaten protokollieren. </font><font style="vertical-align: inherit;">Infolgedessen ist die Verwendung von Ansichtskonstrukten hier</font></font><code>React.useDebugValue({ state })</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nicht besonders nützlich.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Die Kombination und Zusammensetzung der Haken</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als wir begannen, Hooks in unserer Arbeit zu implementieren und immer mehr Hooks in Komponenten zu verwenden, stellte sich schnell heraus, dass 5-10 Hooks in derselben Komponente vorhanden sein könnten. In diesem Fall wurden Haken verschiedener Typen verwendet. Zum Beispiel könnten wir 2-3 Hooks verwenden </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dann einen Hook </font></font><code>React.useContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(um beispielsweise Informationen über den aktiven Benutzer zu erhalten), einen Hook </font></font><code>React.useEffect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und auch Hooks aus anderen Bibliotheken wie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React-Router</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">React-Intl</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Obige wurde immer wieder wiederholt, so dass selbst sehr kleine Komponenten nicht so kompakt waren. Um dies zu vermeiden, haben wir begonnen, diese einzelnen Hooks in Benutzer-Hooks zu extrahieren, deren Gerät von der Komponente oder einer Anwendungsfähigkeit abhängt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stellen Sie sich einen Anwendungsmechanismus vor, mit dem eine Bestellung erstellt werden soll. </font><font style="vertical-align: inherit;">Bei der Entwicklung dieses Mechanismus wurden viele Komponenten sowie Haken verschiedener Typen verwendet. </font><font style="vertical-align: inherit;">Diese Haken können als benutzerdefinierte Haken kombiniert werden, wodurch die Benutzerfreundlichkeit der Komponenten erhöht wird. </font><font style="vertical-align: inherit;">Hier ist ein Beispiel für das Kombinieren eines Satzes kleiner Haken in einem Haken.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OrderCreate</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderCreater,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;orderFetcher,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applicationContext,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goToNextStep,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pendingOrder,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updatePendingChanges,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;revertPendingChanges<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;} = useOrderCreate()<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (<span class="hljs-comment">/** ...children */</span>)<font></font>
}<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Vergleich von React.useReducer und React.useState</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir haben oft auf </font></font><code>React.useState</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einen Standardhaken zurückgegriffen, um mit dem Zustand der Komponenten zu arbeiten. Im Laufe der Zeit muss der Zustand der Komponente jedoch möglicherweise kompliziert sein, was von den neuen Anforderungen an die Komponente abhängt, beispielsweise vom Vorhandensein mehrerer Werte im Zustand. In bestimmten Fällen kann die Verwendung </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dazu beitragen, die Verwendung mehrerer Werte zu vermeiden und die Logik der Aktualisierung des Status zu vereinfachen. Stellen Sie sich die Statusverwaltung vor, wenn Sie HTTP-Anforderungen stellen und Antworten empfangen. Um dies zu tun, müssen Sie möglicherweise mit Werten arbeiten, wie </font></font><code>isLoading</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Stattdessen kann der Zustand mithilfe eines Reduzierers gesteuert werden, der über verschiedene Aktionen zur Verwaltung von Zustandsänderungen verfügt. </font><font style="vertical-align: inherit;">Dieser Ansatz ermutigt den Entwickler im Idealfall, den Zustand der Schnittstelle in Form einer Zustandsmaschine wahrzunehmen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der übertragene </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reduzierer ähnelt den in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verwendeten Reduzierern, bei </font><font style="vertical-align: inherit;">denen das System den aktuellen Status der Aktion empfängt und den nächsten Status zurückgeben sollte. </font><font style="vertical-align: inherit;">Die Aktion enthält Informationen zu ihrem Typ sowie Daten, auf deren Grundlage der nächste Zustand gebildet wird. </font><font style="vertical-align: inherit;">Hier ist ein Beispiel eines einfachen Reduzierers zur Steuerung eines bestimmten Zählers:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> initialState = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> reducer = <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">switch</span> (action) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>: <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>: <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">case</span> <span class="hljs-string">'reset'</span>: <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unexpected action'</span>);<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Reduzierer kann isoliert getestet und dann in der Komponente verwendet werden, indem </font></font><code>React.useReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('increment')}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('decrement')}&gt;-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch('reset')}&gt;reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier können wir das anwenden, was wir in den vorherigen drei Abschnitten untersucht haben, nämlich alles in extrahieren </font></font><code>useCounterReducer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dadurch wird der Code verbessert, indem Informationen zum Aktionstyp vor einer Komponente ausgeblendet werden, die das Erscheinungsbild eines Schnittstellenelements beschreibt. </font><font style="vertical-align: inherit;">Auf diese Weise wird verhindert, dass Implementierungsdetails in die Komponente gelangen, und wir haben zusätzliche Möglichkeiten zum Debuggen von Code. </font><font style="vertical-align: inherit;">So sehen der resultierende benutzerdefinierte Hook und die Komponente, die ihn verwendet, aus:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> CounterActionTypes = {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Increment</span>: <span class="hljs-string">'increment'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Decrement</span>: <span class="hljs-string">'decrement'</span>,
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">Reset</span>: <span class="hljs-string">'reset'</span>,<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">const</span> useCounterReducer = <span class="hljs-function">(<span class="hljs-params">initialState</span>) =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> [count, dispatch] = React.useReducer(reducer, initialState);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> increment = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Increment));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> decrement = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Decrement));
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> reset = React.useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> dispatch(CounterActionTypes.Reset));<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increment,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decrement<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Component</span>(<span class="hljs-params"></span>) </span>{
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> {count, increment} = useCounterReducer(<span class="hljs-number">0</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> (
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{count}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{increment}</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;);<font></font>
};<font></font>
</code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Allmähliche Implementierung von Haken</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf den ersten Blick mag die Idee, schrittweise Haken einzuführen, nicht ganz logisch erscheinen, aber hier schlage ich vor, dass diejenigen, die so denken, einfach meiner Argumentation folgen. Im Laufe der Zeit finden verschiedene Muster Anwendung in der Codebasis. In unserem Fall umfassen diese Muster Komponenten höherer Ordnung, Rendering-Eigenschaften und jetzt Hooks. Bei der Übersetzung eines Projekts in ein neues Muster versuchen Entwickler nicht, den gesamten Code sofort neu zu schreiben, was im Allgemeinen fast unmöglich ist. Daher müssen Sie einen Plan für die Übertragung des Projekts an React-Hooks entwickeln, der keine wesentlichen Änderungen am Code vorsieht. Diese Aufgabe kann sehr schwierig sein, da Änderungen am Code normalerweise zu einer Zunahme seiner Größe und Komplexität führen. Durch die Einführung von Haken versuchen wir dies zu vermeiden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unsere Codebasis verwendet klassenbasierte Komponenten und Funktionskomponenten. Unabhängig davon, welche Komponente in einer bestimmten Situation verwendet wurde, haben wir versucht, die Logik über React-Hooks zu teilen. Zuerst implementieren wir die Logik in Hooks (oder wiederholen die vorhandene Implementierung bestimmter Mechanismen in ihnen) und erstellen dann kleine Komponenten höherer Ordnung, in denen diese Hooks verwendet werden. Danach werden diese Komponenten höherer Ordnung verwendet, um klassenbasierte Komponenten zu erstellen. Infolgedessen verfügen wir über eine Logik an einem Ort, die in Komponenten verschiedener Art verwendet werden kann. Hier ist ein Beispiel für die Implementierung der Hook-Funktionalität in Komponenten durch Komponenten höherer Ordnung.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> injectTracking = <span class="hljs-function">(<span class="hljs-params">propName = <span class="hljs-string">'tracking'</span></span>) =&gt;</span> <span class="hljs-function"><span class="hljs-params">WrappedComponent</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> WithTracking = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> tracking = useTracking();<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">const</span> trackingProp = {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[propName]: tracking,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...props</span>} {<span class="hljs-attr">...trackingProp</span>} /&gt;</span></span>;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;};<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;WithTracking.displayName = wrapDisplayName(WrappedComponent, <span class="hljs-string">'withTracking'</span>);<font></font>
<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> WithTracking;<font></font>
};<font></font>
<font></font>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> injectTracking;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dies zeigt die Implementierung der Hook-Funktionalität </font></font><code>useTracking</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in einer Komponente </font></font><code>WrappedComponent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dies ermöglichte es uns übrigens unter anderem, die Aufgaben der Implementierung von Hooks und des Umschreibens von Tests in den alten Teilen des Systems zu trennen. </font><font style="vertical-align: inherit;">Mit diesem Ansatz verfügen wir weiterhin über Mechanismen zur Verwendung von Hooks in allen Teilen der Codebasis.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zusammenfassung</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier sind einige Beispiele, wie die Verwendung von React-Hooks unsere Codebasis verbessert hat. </font><font style="vertical-align: inherit;">Wir hoffen, dass Hooks auch Ihrem Projekt zugute kommen können. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liebe Leser! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verwenden Sie React Hooks?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/iq/fi/b4/iqfib45pgphfrxv--zfemt0qnmw.jpeg"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de494692/index.html">Schmerzlose Injektionen mit 4D-Nadeln</a></li>
<li><a href="../de494700/index.html">Infektionsszenarien in bestimmten Städten basierend auf dem Datensatz der Bewegung von Menschen in ganz Russland</a></li>
<li><a href="../de494702/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 408 (23. - 29. März 2020)</a></li>
<li><a href="../de494704/index.html">CMI5 oder Leben nach SCORM</a></li>
<li><a href="../de494710/index.html">Verwendung moderner Grafikformate in Webprojekten</a></li>
<li><a href="../de494714/index.html">Über die positiven Auswirkungen variabler Schriftarten auf die Leistung von Webprojekten</a></li>
<li><a href="../de494716/index.html">Alles über das Auto-Schlüsselwort in CSS</a></li>
<li><a href="../de494718/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 504 (10.03.2020-16.03.2020)</a></li>
<li><a href="../de494720/index.html">Mein Spickzettel von Pandas</a></li>
<li><a href="../de494722/index.html">Die erste Vorschau-Version von Microsoft PowerShell 7.1 für Windows, Linux und macOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>