<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฐ ๐จ๐พโ๐ง ๐ ุงูููุฏุณุฉ ุงูุนูุณูุฉ ูุนุฑุถ The Witcher 3: ุชุฃุซูุฑุงุช ุงูุณูุงุก ุงููุฎุชููุฉ ๐๐ฟ ๐ ๐ต</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[ุฃุฌุฒุงุก ุงูุณุงุจูุฉ ูู ุงูุชุญููู: ุงูุฃูู ู ุงูุซุงูู ู ุงูุซุงูุซ .]
 
 ุงูุฌุฒุก 1. ุณุญุงุจุฉ ุณูุฑูุณ
 ุนูุฏูุง ุชุฌุฑู ุงููุนุจุฉ ูู ูุณุงุญุงุช ููุชูุญุฉ ุ ูุฅู ุฃุญุฏ ุงูุนูุงูู ุงูุชู ุชุญุฏุฏ ูุตุฏุงููุฉ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ุงูููุฏุณุฉ ุงูุนูุณูุฉ ูุนุฑุถ The Witcher 3: ุชุฃุซูุฑุงุช ุงูุณูุงุก ุงููุฎุชููุฉ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489118/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f2/033/d27/8f2033d27bc9d8a498716c85be1be1c0.png" alt="ุตูุฑุฉ"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[ุฃุฌุฒุงุก ุงูุณุงุจูุฉ ูู ุงูุชุญููู: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุซุงูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุซุงูุซ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .]</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 1. ุณุญุงุจุฉ ุณูุฑูุณ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ุชุฌุฑู ุงููุนุจุฉ ูู ูุณุงุญุงุช ููุชูุญุฉ ุ ูุฅู ุฃุญุฏ ุงูุนูุงูู ุงูุชู ุชุญุฏุฏ ูุตุฏุงููุฉ ุงูุนุงูู ูู ุงูุณูุงุก. ููุฑ ูู ุงูุฃูุฑ - ูุนุธู ุงูููุช ุชุฃุฎุฐ ุงูุณูุงุก ุญุฑููุง ุญูุงูู 40-50 ูช ูู ุงูุดุงุดุฉ ุจุฃููููุง. ุงูุณูุงุก ูู ุฃูุซุฑ ุจูุซูุฑ ูู ูุฌุฑุฏ ุชุฏุฑุฌ ุฌููู. ูุฏููุง ุงููุฌูู ูุงูุดูุณ ูุงูููุฑ ุ ูุฃุฎูุฑุง ุงูุบููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ุฃู ุงูุงุชุฌุงูุงุช ุงูุญุงููุฉ ูุจุฏู ุฃููุง ุชุชููู ูู ุชุฌุณูุฏ ุญุฌูู ููุณุญุจ ุจุงุณุชุฎุฏุงู Raymarching (ุงูุธุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐู ุงูููุงูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุ ูุฅู ุงูุบููู ูู The Witcher 3 ุชุนุชูุฏ ุจุงููุงูู ุนูู ุงููููุณ. ููุฏ ููุช ุจูุญุตูู ุจุงููุนู ูู ูุจู ุ ูููู ุงุชุถุญ ุฃู ูู ุดูุก ูุนูู ุฃูุซุฑ ุชุนููุฏูุง ููุง ุชููุนุช ูู ุงูุฃุตู. ุฅุฐุง ุงุชุจุนุช ุณูุณูุฉ ููุงูุงุชู ุ ูุฃูุช ุชุนูู ุฃู ููุงู ูุฑููุง ุจูู Blood and Wine DLC ูุจููุฉ ุงููุนุจุฉ. ูููุง ูุฏ ุชุชููุน ุ ููุงู ุจุนุถ ุงูุชุบููุฑุงุช ูู ุงูุนูู ูุน ุงูุณุญุจ ูู DLC.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู Witcher 3 ุนูู ุนุฏุฉ ุทุจูุงุช ูู ุงูุบููู. ุงุนุชูุงุฏูุง ุนูู ุงูุทูุณ ุ ูููู ุฃู ูููู ููุท </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุบููู ููููุจุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ุบููู ุชุฑุงูููุฉ </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุฑุจูุง ุจุนุถ ุงูุบููู ูู ุนุงุฆูุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุญุจ ุฐุงุช ุงูุทุจูุงุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ุนูู ุณุจูู ุงููุซุงู ุ ุฃุซูุงุก ุงูุนุงุตูุฉ). ูู ุงูููุงูุฉ ุ ูุฏ ูุง ุชููู ููุงู ุบููู ุนูู ุงูุฅุทูุงู.</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฎุชูู ุจุนุถ ุงูุทุจูุงุช ูู ุญูุซ ุงูููุงู ูุงูุชุธููู ุงููุณุชุฎุฏู ูุชูุฏูููุง. ูู ุงููุงุถุญ ุฃู ูุฐุง ูุคุซุฑ ุนูู ูุฏู ุชุนููุฏ ูุทูู ููุฏ ุงููุฌููุน ูุชุธููู ุงูุจูุณู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ูู ูุฐุง ุงูุชููุน ุ ููุงู ุจุนุถ ุงูุฃููุงุท ุงูุดุงุฆุนุฉ ุงูุชู ูููู ููุงุญุธุชูุง ุนูุฏ ุนุฑุถ ุงูุบููู ูู Witcher 3. ุฃููุงู ุ ูุชู ุนุฑุถูุง ุฌููุนูุง ูู ูุณุงุฑ ุงุณุชุจุงูู ุ ููุฐุง ูู ุงูุฎูุงุฑ ุงููุซุงูู. ูููู ูุณุชุฎุฏููู ุงูุฎูุท (ุงูุธุฑ ุฃุฏูุงู). ูุฐุง ูุฌุนู ูู ุงูุณูู ุงูุชุญูู ูู ููููุฉ ุชุบุทูุฉ ุทุจูุฉ ูููุตูุฉ ููุณูุงุก - ููุชุฃุซุฑ ุฐูู ุจูููุฉ ุฃููุง ูู ุชุธููู ุงูุจูุณู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/263/aec/b8a/263aecb8afa21e2b79b0333bcde55011.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ุฃู ุจุนุถ ุงูุทุจูุงุช ูุชู ุชูุฏูููุง ูุฑุชูู ุจููุณ ุงููุนููุงุช. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงููุธุฑ ูู ุงูุดูุฑุฉ ุ ุงุฎุชุฑุช ุฃูุตุฑ ุชุธููู ูู ุฃุฌู (1) ุนูู ุงูุฃุฑุฌุญ ุชูููุฐ ููุฏุณุชูุง ุงูุนูุณูุฉ ุงููุงููุฉ ุ (2) ูุนุฑูุฉ ุฌููุน ุฌูุงูุจูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ุฃูููุช ูุธุฑุฉ ูุงุญุตุฉ ุนูู ุณุญุงุจุฉ ุงูุณุฑุฎุณ ูู Witcher 3: Blood and Wine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุฅุทุงุฑ ูุซุงู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f81/eb8/a49/f81eb8a49dc315ef04d72b582fba869b.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุงูุชูุฏูู</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/885/b27/206/885b2720624e7a455987bb6239d0e371.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ูุฑูุฑ ุงูุชูุฏูู ุงูุฃูู</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f2/033/d27/8f2033d27bc9d8a498716c85be1be1c0.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ูุฑูุฑ ุงูุชุฌุณูุฏ ุงูุซุงูู</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูู ูุฐุง ุงูุฅุทุงุฑ ุจุงูุฐุงุช ุ ุชููู ุบููู ุงูุณูุฑูุช ูู ุงูุทุจูุฉ ุงูุฃููู ูู ุงูุชุฌุณูุฏ. </font><font style="vertical-align: inherit;">ููุง ุชุฑู ุ ูุชู ุชูุฏููู ูุฑุชูู ุ ููุง ูุฒูุฏ ูู ุณุทูุนู.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุธููู ููุฏุณู ูุฑุฃุณู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุชุธููู ุงูุจูุณู ุ ุณูุชุญุฏุซ ุจุฅูุฌุงุฒ ุนู ุชุธููู ุงูููุฏุณู ูุงูุฑุฃุณ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ุชุดุจู ุดุจูุฉ ุนุฑุถ ุงูุณุญุจ ููููุงู ูุจุฉ ุงูุณูุงุก ุงูุนุงุฏูุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b4c/774/8de/b4c7748de95ad07f2dddfc090e62e0d2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฌููุน ุงูููู ูู ุงููุงุตู ุงูุฒููู [0-1] ุ ูุฐูู ูุชูุณูุท ุงูุดุจูุฉ ุนูู ุงูููุทุฉ (0ุ0ุ0) ุ ูุชู ุงุณุชุฎุฏุงู ุงูููุงุณ ูุงูุงูุญุฑุงู ูุจู ุงูุชุญููู ุฅูู worldViewProj (ูุญู ูุนูู ุจุงููุนู ูุฐุง ุงูููุท ูู ุงูุฃุฌุฒุงุก ุงูุณุงุจูุฉ ูู ุงูุณูุณูุฉ). </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุงูุณุญุจ ุ ุชูุชุฏ ุงูุดุจูุฉ ุจููุฉ ุนูู ุทูู ุงููุณุชูู XY (ูุดูุฑ ุงููุญูุฑ Z ููุฃุนูู) ูุชุบุทูุฉ ูุณุงุญุฉ ุฃูุจุฑ ูู ูุฑู ุงูุฑุคูุฉ. </font><font style="vertical-align: inherit;">ูุงููุชูุฌุฉ ูู ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/341/0ca/95e/3410ca95ea9f0b3ef1fafe62cb5dba13.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุญุชูู ุงูุดุจูุฉ ุนูู ูุงููุงุช ุทุจูุนูุฉ ูููุงุณ. </font><font style="vertical-align: inherit;">ูุญุณุจ ุฌูุงุฒ ุชุธููู ุงูุฑุฃุณ ุฃูุถูุง ูุงูู ุซูุงุฆู ุงูุธู ุจูุงุณุทุฉ ุงูููุชุฌ ุงููุชุฌู - ูุชู ุนุฑุถ ุงูุซูุงุซุฉ ูู ุดูู ุนุงุฏู. </font><font style="vertical-align: inherit;">ููุงู ุฃูุถูุง ุญุณุงุจ ุนููู ููุถุจุงุจ (ูููู ูุณุทูุนู).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูุณู ุชุธููู</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏู ุฑูุฒ ุชุฌููุน ุชุธููู ุงูุจูุณู ููุง ููู:</font></font><br>
<br>
<pre><code class="cpp hljs"> ps_5_0  <font></font>
    dcl_globalFlags refactoringAllowed  <font></font>
    dcl_constantbuffer cb0[<span class="hljs-number">10</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb1[<span class="hljs-number">9</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb12[<span class="hljs-number">238</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb4[<span class="hljs-number">13</span>], immediateIndexed  <font></font>
    dcl_sampler s0, <span class="hljs-function">mode_default  
    <span class="hljs-title">dcl_resource_texture2d</span> <span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> t0  
    <span class="hljs-title">dcl_resource_texture2d</span> <span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> t1  
    dcl_input_ps linear v0.xyzw  
    dcl_input_ps linear v1.xyzw  
    dcl_input_ps linear v2.w  
    dcl_input_ps linear v3.xyzw  
    dcl_input_ps linear v4.xyz  
    dcl_input_ps linear v5.xyz  
    dcl_output o0.xyzw  
    dcl_temps 4  
   0: mul r0.xyz, cb0[9].xyzx, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">-1.000000</span>, <span class="hljs-number">0.000000</span>)</span>  
   1: dp3 r0.w, r0.xyzx, r0.xyzx  
   2: rsq r0.w, r0.w  
   3: mul r0.xyz, r0.wwww, r0.xyzx  
   4: mul r1.xy, cb0[0].xxxx, cb4[5].xyxx  
   5: mad r1.xy, v1.xyxx, cb4[4].xyxx, r1.xyxx  
   6: <span class="hljs-title">sample_indexable</span><span class="hljs-params">(texture2d)</span><span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> r1.xyzw, r1.xyxx, t0.xyzw, s0  
   7: add r1.xyz, r1.xyzx, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">-0.500000</span>, <span class="hljs-number">-0.500000</span>, <span class="hljs-number">-0.500000</span>, <span class="hljs-number">0.000000</span>)</span>  
   8: add r1.xyz, r1.xyzx, r1.xyzx  
   9: dp3 r0.w, r1.xyzx, r1.xyzx  
  10: rsq r0.w, r0.w  
  11: mul r1.xyz, r0.wwww, r1.xyzx  
  12: mul r2.xyz, r1.yyyy, v3.xyzx  
  13: mad r2.xyz, v5.xyzx, r1.xxxx, r2.xyzx  
  14: mov r3.xy, v1.zwzz  
  15: mov r3.z, v3.w  
  16: mad r1.xyz, r3.xyzx, r1.zzzz, r2.xyzx  
  17: dp3_sat r0.x, r0.xyzx, r1.xyzx  
  18: add r0.y, -cb4[2].x, cb4[3].x  
  19: mad r0.x, r0.x, r0.y, cb4[2].x  
  20: dp2 r0.y, -cb0[9].xyxx, -cb0[9].xyxx  
  21: rsq r0.y, r0.y  
  22: mul r0.yz, r0.yyyy, -cb0[9].xxyx  
  23: add r1.xyz, -v4.xyzx, cb1[8].xyzx  
  24: dp3 r0.w, r1.xyzx, r1.xyzx  
  25: rsq r1.z, r0.w  
  26: <span class="hljs-built_in">sqrt</span> r0.w, r0.w  
  27: add r0.w, r0.w, -cb4[7].x  
  28: mul r1.xy, r1.zzzz, r1.xyxx  
  29: dp2_sat r0.y, r0.yzyy, r1.xyxx  
  30: add r0.y, r0.y, r0.y  
  31: min r0.y, r0.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  32: add r0.z, -cb4[0].x, cb4[1].x  
  33: mad r0.z, r0.y, r0.z, cb4[0].x  
  34: mul r0.x, r0.x, r0.z  
  35: <span class="hljs-built_in">log</span> r0.x, r0.x  
  36: mul r0.x, r0.x, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">2.200000</span>)</span>  
  37: <span class="hljs-built_in">exp</span> r0.x, r0.x  
  38: add r1.xyz, cb12[236].xyzx, -cb12[237].xyzx  
  39: mad r1.xyz, r0.yyyy, r1.xyzx, cb12[237].xyzx  
  40: mul r2.xyz, r0.xxxx, r1.xyzx  
  41: mad r0.xyz, -r1.xyzx, r0.xxxx, v0.xyzx  
  42: mad r0.xyz, v0.wwww, r0.xyzx, r2.xyzx  
  43: add r1.x, -cb4[7].x, cb4[8].x  
  44: div_sat r0.w, r0.w, r1.x  
  45: mul r1.x, r1.w, cb4[9].x  
  46: mad r1.y, -cb4[9].x, r1.w, r1.w  
  47: mad r0.w, r0.w, r1.y, r1.x  
  48: mul r1.xy, cb0[0].xxxx, cb4[11].xyxx  
  49: mad r1.xy, v1.xyxx, cb4[10].xyxx, r1.xyxx  
  50: <span class="hljs-title">sample_indexable</span><span class="hljs-params">(texture2d)</span><span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> r1.x, r1.xyxx, t1.xyzw, s0  
  51: mad r1.x, r1.x, cb4[12].x, -cb4[12].x  
  52: mad_sat r1.x, cb4[12].x, v2.w, r1.x  
  53: mul r0.w, r0.w, r1.x  
  54: mul_sat r0.w, r0.w, cb4[6].x  
  55: mul o0.xyz, r0.wwww, r0.xyzx  
  56: mov o0.w, r0.w  
  57: ret </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุฅุฏุฎุงู ููุงููู ุณูุณูู. </font><font style="vertical-align: inherit;">ูุญุชูู ุฃุญุฏูุง ุนูู ุฎุฑูุทุฉ ุนุงุฏูุฉ (ูููุงุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xyz</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุดูู ุณุญุงุจู (ุงูููุงุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">ูุงูุซุงูู ูู ุงูุถูุถุงุก ูุชุดููู ุงูุดูู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f3/c27/a5e/1f3c27a5eea1412d5fa1fa632861a342.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ ุนุงุฏูุฉ ุ ุฎุงุตูุฉ CD Projekt Red</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37b/a53/d41/37ba53d412d20f476ddf71e81892b62a.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดูู ุณุญุงุจุฉ ุ ูุฑุต ูุถุบูุท ุงูููููุฉ Projekt ุงูุฃุญูุฑ</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/05e/1bb/edd/05e1bbedded7c16acefc1f67d5b3fd49.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุฌ ุงูุถูุถุงุก ุ ุฎุงุตูุฉ CD Projekt Red</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุงููุฎุฒู ุงููุคูุช ุงูุฑุฆูุณู ููุซูุงุจุช ูุน ูุนููุงุช ุงูุณุญุงุจุฉ ูู cb4. </font><font style="vertical-align: inherit;">ููุฐุง ุงูุฅุทุงุฑ ุ ูู ุงููุนุงูู ุงูุชุงููุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/942/229/4de/9422294de7d9ead5e2bec154eb897c7a.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุชู ุงุณุชุฎุฏุงู ููู ุฃุฎุฑู ูู ุงูุฃุตูุงุฏ ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุง ุชููู ุ ุณููุธุฑ ูููุง ุฃูุถูุง.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุณ ุงุชุฌุงู ุถูุก ุงูุดูุณ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ุดูุก ูุญุฏุซ ูู ุงูุชุธููู ูู ุญุณุงุจ ุงูุงุชุฌุงู ุงูุทุจูุนู ูุถูุก ุงูุดูุณ ุงูููููุจ ุนูู ุทูู ุงููุญูุฑ Z:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-number">0</span>: mul r0.xyz, cb0[<span class="hljs-number">9</span>].xyzx, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">-1.000000</span>, <span class="hljs-number">0.000000</span>)  
   <span class="hljs-number">1</span>: dp3 r0.w, r0.xyzx, r0.xyzx  
   <span class="hljs-number">2</span>: rsq r0.w, r0.w  
   <span class="hljs-number">3</span>: mul r0.xyz, r0.wwww, r0.xyzx  <font></font>
<font></font>
   float3 invertedSunlightDir = normalize(lightDir * float3(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>) );</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุฐูุฑูุง ุณุงุจููุง ุ ูุชู ุชูุฌูู ุงููุญูุฑ Z ุฅูู ุงูุฃุนูู ุ ู cb0 [9] ูู ุงุชุฌุงู ุถูุก ุงูุดูุณ. </font><font style="vertical-align: inherit;">ูุชูุฏู ูุฐู ุงูููุงูู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุดูุณ - ูู ุงูููู! </font><font style="vertical-align: inherit;">ููููู ุงูุชุญูู ูู ุฐูู ุนู ุทุฑูู ูุชุงุจุฉ ุชุธููู ุญุณุงุจู ุจุณูุท ูููู ุจุชุดุบูู NdotL ุจุณูุท ูุฅุฏุฑุงุฌู ูู ุชูุฑูุฑ ุชุธููู ูุคุฌู.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุญุงุจุฉ ุฃุฎุฐ ุงูุนููุงุช</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุญุณุงุจ texcoords ูุฃุฎุฐ ุนููุงุช ูู ูุณูุฌ ุงูุณุญุงุจุฉ ุ ูุชูุฑูุบ ุงููุงูู ุงูุนุงุฏู ูุชุทุจูุนู.</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-number">4</span>: mul r1.xy, cb0[<span class="hljs-number">0</span>].xxxx, cb4[<span class="hljs-number">5</span>].xyxx   
   <span class="hljs-number">5</span>: mad r1.xy, v1.xyxx, cb4[<span class="hljs-number">4</span>].xyxx, r1.xyxx   
   <span class="hljs-number">6</span>: sample_indexable(texture2d)(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>) r1.xyzw, r1.xyxx, t0.xyzw, s0   
   <span class="hljs-number">7</span>: add r1.xyz, r1.xyzx, l(<span class="hljs-number">-0.500000</span>, <span class="hljs-number">-0.500000</span>, <span class="hljs-number">-0.500000</span>, <span class="hljs-number">0.000000</span>)   
   <span class="hljs-number">8</span>: add r1.xyz, r1.xyzx, r1.xyzx   
   <span class="hljs-number">9</span>: dp3 r0.w, r1.xyzx, r1.xyzx   
  <span class="hljs-number">10</span>: rsq r0.w, r0.w   <font></font>
   <font></font>
   <font></font>
   <span class="hljs-comment">// Calc sampling coords  </span><font></font>
   float2 cloudTextureUV = Texcoords * textureScale + elapsedTime * speedFactors;  <font></font>
   <font></font>
   <span class="hljs-comment">// Sample texture and get data from it  </span><font></font>
   float4 cloudTextureValue = texture0.Sample( sampler0, cloudTextureUV ).rgba;  <font></font>
   float3 normalMap = cloudTextureValue.xyz;  <font></font>
   <span class="hljs-keyword">float</span> cloudShape = cloudTextureValue.a;  <font></font>
   <font></font>
   <span class="hljs-comment">// Unpack normal and normalize it  </span>
   float3 unpackedNormal = (normalMap - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2.0</span>;  <font></font>
   unpackedNormal = normalize(unpackedNormal);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุชุนุงูู ูุนูุง ุชุฏุฑูุฌูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุญุตูู ุนูู ุญุฑูุฉ ุงูุณุญุจ ุ ูุญุชุงุฌ ุฅูู ุงูููุช ุงููููุถู ุจุงูุซูุงูู ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cb [0] .x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุถุฑูุจูุง ูู ูุนุงูู ุงูุณุฑุนุฉ ุ ููุง ูุคุซุฑ ุนูู ูุฏู ุณุฑุนุฉ ุชุญุฑู ุงูุณุญุจ ุนุจุฑ ุงูุณูุงุก ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cb4 [5] .xy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ููุช ุณุงุจููุง ุ ูุชู ุชูุฏูุฏ ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุนูู ุทูู ููุฏุณุฉ ูุจุฉ ุงูุณูุงุก ุ ููุญุชุงุฌ ุฃูุถูุง ุฅูู ุนูุงูู ุชุญุฌูู ุงููุณูุฌ ุงูุชู ุชุคุซุฑ ุนูู ุญุฌู ุงูุบููู ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cb4 [4] .xy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุตูุบุฉ ุงูููุงุฆูุฉ ูู:</font></font><br>
<br>
<pre><code class="cpp hljs">samplingUV = Input.TextureUV * textureScale + time * speedMultiplier;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุฃุฎุฐ ุนููุงุช ูู ุฌููุน ุงููููุงุช ุงูุฃุฑุจุน ุ ูุฏููุง ุฎุฑูุทุฉ ุนุงุฏูุฉ (ูููุงุช RGB) ูุดูู ุณุญุงุจู (ุงูููุงุฉ ุฃ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุฑูุบ ุงูุฎุฑูุทุฉ ุงูุนุงุฏูุฉ ูู ุงููุงุตู ุงูุฒููู [0ุ </font><font style="vertical-align: inherit;">1] ูู ุงููุงุตู ุงูุฒููู [-1 ุ </font><font style="vertical-align: inherit;">1] ูุณุชุฎุฏู ุงูุตูุบุฉ ุงูุชุงููุฉ:</font></font><br>
<br>
<pre><code class="cpp hljs">unpackedNormal = (packedNormal - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2.0</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุฃูุถูุง ุงุณุชุฎุฏุงู ูุฐุง:</font></font><br>
<br>
<pre><code class="cpp hljs">unpackedNormal = packedNormal * <span class="hljs-number">2.0</span> - <span class="hljs-number">1.0</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฎูุฑูุง ุ ูููู ุจุชุทุจูุน ุงููุชุฌู ุงูุนุงุฏู ุบูุฑ ุงููุบูู.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุงูุจ ุนุงุฏู</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏ ูุฌูุฏ ุงููุชุฌูุงุช ุงูุนุงุฏูุฉ ุ ููุงููุงุช ุงูุธู ูุงูููุงุณ ุงูุซูุงุฆู ูู ุชุธููู ุงูุฑุฃุณ ุ ูุงููุชุฌู ุงูุทุจูุนู ูู ุงูุฎุฑูุทุฉ ุงูุนุงุฏูุฉ ุ ูุฅููุง ุนุงุฏุฉ ูุง ูุฑุณู ุงููุนุงููุฑ ุงูุทุจูุนูุฉ.</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">11</span>: mul r1.xyz, r0.wwww, r1.xyzx  
  <span class="hljs-number">12</span>: mul r2.xyz, r1.yyyy, v3.xyzx  
  <span class="hljs-number">13</span>: mad r2.xyz, v5.xyzx, r1.xxxx, r2.xyzx  
  <span class="hljs-number">14</span>: mov r3.xy, v1.zwzz  
  <span class="hljs-number">15</span>: mov r3.z, v3.w  
  <span class="hljs-number">16</span>: mad r1.xyz, r3.xyzx, r1.zzzz, r2.xyzx  <font></font>
    <font></font>
   <span class="hljs-comment">// Perform bump mapping  </span><font></font>
   float3 SkyTangent = Input.Tangent;  <font></font>
   float3 SkyNormal = (float3( Input.Texcoords.zw, Input.param3.w ));  <font></font>
   float3 SkyBitangent = Input.param3.xyz;  <font></font>
        <font></font>
   float3x3 TBN = float3x3(SkyTangent, SkyBitangent, SkyNormal);  <font></font>
   float3 finalNormal = (float3)mul( unpackedNormal, (TBN) );</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุทูุน (1)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุ ูุชู ุชุทุจูู ุญุณุงุจ NdotL ููุฐุง ูุคุซุฑ ุนูู ููุฏุงุฑ ุฅุถุงุกุฉ ุจูุณู ูุนูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ููุฏ ุงููุฌูุน ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">17</span>: dp3_sat r0.x, r0.xyzx, r1.xyzx  
  <span class="hljs-number">18</span>: add r0.y, -cb4[<span class="hljs-number">2</span>].x, cb4[<span class="hljs-number">3</span>].x  
  <span class="hljs-number">19</span>: mad r0.x, r0.x, r0.y, cb4[<span class="hljs-number">2</span>].x  </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ุชุตูุฑ NdotL ุนูู ุงูุฅุทุงุฑ ุงููุนูู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/283/f29/1a1/283f291a18105785a51af59dbbe8905a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูููุชุฌ ุงูุนุฏุฏู (ูุน ุงูุชุดุจุน) ููุงุณุชููุงุก ุจูู minIntensity ู maxIntensity. </font><font style="vertical-align: inherit;">ูุจูุถู ูุฐุง ุ ุณุชููู ุฃุฌุฒุงุก ุงูุบููู ุงููุถุงุกุฉ ุจุฃุดุนุฉ ุงูุดูุณ ุฃูุซุฑ ุฅุดุฑุงููุง.</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-comment">// Calculate cosine between normal and up-inv lightdir  </span>
   <span class="hljs-keyword">float</span> NdotL = saturate( dot(invertedSunlightDir, finalNormal) );  <font></font>
   <font></font>
   <span class="hljs-comment">// Param 1, line 19, r0.x  </span>
   <span class="hljs-keyword">float</span> intensity1 = lerp( param1Min, param1Max, NdotL );</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุทูุน (2)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุงู ุนุงูู ุขุฎุฑ ูุคุซุฑ ุนูู ุณุทูุน ุงูุบููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌุจ ุฃู ุชููู ุงูุบููู ุงูููุฌูุฏุฉ ูู ุฐูู ุงูุฌุฒุก ูู ุงูุณูุงุก ุญูุซ ุชูุฌุฏ ุงูุดูุณ ุฃูุซุฑ ุฅุจุฑุงุฒูุง. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุณุจ ุงูุชุฏุฑุฌ ุจูุงุกู ุนูู ุงููุณุชูู XY. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุณุชุฎุฏู ูุฐุง ุงูุชุฏุฑุฌ ูุญุณุงุจ ุงูุงุณุชููุงู ุงูุฎุทู ุจูู ููู min / max ุ ุนูู ุบุฑุงุฑ ูุง ูุญุฏุซ ูู ุงูุฌุฒุก (1). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ุฃูู ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูููููุง ุฃู ูุทูุจ ุชุบููู ุงูุณุญุจ ุงูููุฌูุฏุฉ ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุดูุณ ุ ูููู ูุฐุง ูุง ูุญุฏุซ ูู ูุฐุง ุงูุฅุทุงุฑ ุจุงูุฐุงุช ุ ูุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param2Min</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param2Max</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cb4 [0] .x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cb4 [1] .x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูุชู </font><i><font style="vertical-align: inherit;">ุชุนูููููุง</font></i><font style="vertical-align: inherit;"> ุนูู 1.0f.</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">20</span>: dp2 r0.y, -cb0[<span class="hljs-number">9</span>].xyxx, -cb0[<span class="hljs-number">9</span>].xyxx  
  <span class="hljs-number">21</span>: rsq r0.y, r0.y  
  <span class="hljs-number">22</span>: mul r0.yz, r0.yyyy, -cb0[<span class="hljs-number">9</span>].xxyx  
  <span class="hljs-number">23</span>: add r1.xyz, -v4.xyzx, cb1[<span class="hljs-number">8</span>].xyzx  
  <span class="hljs-number">24</span>: dp3 r0.w, r1.xyzx, r1.xyzx  
  <span class="hljs-number">25</span>: rsq r1.z, r0.w  
  <span class="hljs-number">26</span>: <span class="hljs-built_in">sqrt</span> r0.w, r0.w  
  <span class="hljs-number">27</span>: add r0.w, r0.w, -cb4[<span class="hljs-number">7</span>].x  
  <span class="hljs-number">28</span>: mul r1.xy, r1.zzzz, r1.xyxx  
  <span class="hljs-number">29</span>: dp2_sat r0.y, r0.yzyy, r1.xyxx  
  <span class="hljs-number">30</span>: add r0.y, r0.y, r0.y  
  <span class="hljs-number">31</span>: min r0.y, r0.y, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">32</span>: add r0.z, -cb4[<span class="hljs-number">0</span>].x, cb4[<span class="hljs-number">1</span>].x  
  <span class="hljs-number">33</span>: mad r0.z, r0.y, r0.z, cb4[<span class="hljs-number">0</span>].x  
  <span class="hljs-number">34</span>: mul r0.x, r0.x, r0.z  
  <span class="hljs-number">35</span>: <span class="hljs-built_in">log</span> r0.x, r0.x  
  <span class="hljs-number">36</span>: mul r0.x, r0.x, l(<span class="hljs-number">2.200000</span>)  
  <span class="hljs-number">37</span>: <span class="hljs-built_in">exp</span> r0.x, r0.x   <font></font>
   <font></font>
   <font></font>
   <span class="hljs-comment">// Calculate normalized -lightDir.xy (20-22)  </span><font></font>
   float2 lightDirXY = normalize( -lightDir.xy );  <font></font>
   <font></font>
   <span class="hljs-comment">// Calculate world to camera  </span><font></font>
   float3 vWorldToCamera = ( CameraPos - WorldPos );  <font></font>
   <span class="hljs-keyword">float</span> worldToCamera_distance = length(vWorldToCamera);  <font></font>
        <font></font>
   <span class="hljs-comment">// normalize vector  </span><font></font>
   vWorldToCamera = normalize( vWorldToCamera );  <font></font>
        <font></font>
   <font></font>
   <span class="hljs-keyword">float</span> LdotV = saturate( dot(lightDirXY, vWorldToCamera.xy) );  
   <span class="hljs-keyword">float</span> highlightedSkySection = saturate( <span class="hljs-number">2</span>*LdotV );  
   <span class="hljs-keyword">float</span> intensity2 = lerp( param2Min, param2Max, highlightedSkySection );  <font></font>
   <font></font>
   <span class="hljs-keyword">float</span> finalIntensity = <span class="hljs-built_in">pow</span>( intensity2 *intensity1, <span class="hljs-number">2.2</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุงูุฉ ุ ูุถุฑุจ ุงูุณุทูุน ููุฑูุน ุงููุชูุฌุฉ ุฅูู ููุฉ 2.2.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุบููู</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฃ ุญุณุงุจ ููู ุงูุบููู ุจุงูุญุตูู ุนูู ุซูุงุจุช ูู ุงูุซูุงุจุช ุงูุนุงุฒูุฉ ุชุดูุฑ ุฅูู ููู ุงูุบููู ุจุฌูุงุฑ ุงูุดูุณ ูุงูุบููู ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุณูุงุก. </font><font style="vertical-align: inherit;">ูููุง ุจูููุง ุ ูุชู ุฅุฌุฑุงุก ุงูุงุณุชููุงู ุงูุฎุทู ุจูุงุกู ุนูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">highlightSkySection</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูุชู ุถุฑุจ ุงููุชูุฌุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุซุงูุฉ ุงูููุงุฆู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุงูููุงูุฉ ุ ูุชู ุฎูุท ุงููุชูุฌุฉ ูุน ุงูุถุจุงุจ (ูุฃุณุจุงุจ ุงูุฃุฏุงุก ุ ุชู ุญุณุงุจูุง ุจูุงุณุทุฉ ุฌูุงุฒ ุชุธููู ุงูุฑุฃุณ).</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">38</span>: add r1.xyz, cb12[<span class="hljs-number">236</span>].xyzx, -cb12[<span class="hljs-number">237</span>].xyzx  
  <span class="hljs-number">39</span>: mad r1.xyz, r0.yyyy, r1.xyzx, cb12[<span class="hljs-number">237</span>].xyzx  
  <span class="hljs-number">40</span>: mul r2.xyz, r0.xxxx, r1.xyzx  
  <span class="hljs-number">41</span>: mad r0.xyz, -r1.xyzx, r0.xxxx, v0.xyzx  
  <span class="hljs-number">42</span>: mad r0.xyz, v0.wwww, r0.xyzx, r2.xyzx  <font></font>
   <font></font>
  float3 cloudsColor = lerp( cloudsColorBack, cloudsColorFront, highlightedSunSection );  <font></font>
  cloudsColor *= finalIntensity;  <font></font>
  cloudsColor = lerp( cloudsColor, FogColor, FogAmount );</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌุนู ุงูุณุญุจ ุงูุฑูููุฉ ุฃูุซุฑ ูุถูุญุง ูู ุงูุฃูู</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ููุณ ููุญูุธูุง ุฌุฏูุง ุนูู ุงูุฅุทุงุฑ ุ ูููู ูู ุงููุงูุน ูุฐู ุงูุทุจูุฉ ุฃูุซุฑ ูุถูุญูุง ุจุงููุฑุจ ูู ุงูุฃูู ุฃูุซุฑ ูู ุฑุฃุณ Geralt. </font><font style="vertical-align: inherit;">ููุฑูุณ ููููุฉ ุงูููุงู ุจุฐูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูููู ุฃู ุชูุงุญุธ ุฃู ุนูุฏ ุญุณุงุจ ุณุทูุน ุงูุซุงููุ ุญุณุจูุง ุทูู ูุงููุงุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">worldToCamera</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">23</span>: add r1.xyz, -v4.xyzx, cb1[<span class="hljs-number">8</span>].xyzx  
  <span class="hljs-number">24</span>: dp3 r0.w, r1.xyzx, r1.xyzx  
  <span class="hljs-number">25</span>: rsq r1.z, r0.w  
  <span class="hljs-number">26</span>: <span class="hljs-built_in">sqrt</span> r0.w, r0.w</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุฌุฏ ุงูุชูุฑุงุฑุงุช ุงูุชุงููุฉ ููุฐุง ุงูุทูู ูู ุงูููุฏ:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">26</span>: <span class="hljs-built_in">sqrt</span> r0.w, r0.w  
  <span class="hljs-number">27</span>: add r0.w, r0.w, -cb4[<span class="hljs-number">7</span>].x  <font></font>
  ...  <font></font>
  <span class="hljs-number">43</span>: add r1.x, -cb4[<span class="hljs-number">7</span>].x, cb4[<span class="hljs-number">8</span>].x  
  <span class="hljs-number">44</span>: div_sat r0.w, r0.w, r1.x</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงู ุ ูุง ุงูุฃูุฑ ูุนูุงุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cb [7] .x ู cb [8] .x ููุง ููู 2000.0 ู 7000.0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงุชุถุญ ุฃู ูุฐุง ูู ูุชูุฌุฉ ุงุณุชุฎุฏุงู ูุธููุฉ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linstep</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุชููู ุซูุงุซ ูุนููุงุช: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏ ุงูุฃุฏูู / ุงูุฃูุตู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ุงููุงุตู ุงูุฒููู </font><font style="vertical-align: inherit;">ูุงููููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนูู ูุฐุง ุนูู ุงููุญู ุงูุชุงูู: ุฅุฐุง ูุงูุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงููุงุตู ุงูุฒููู [ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">min</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] ุ ูุณุชูุฑุฌุน ุงูุฏุงูุฉ ุงูุงุณุชููุงู ุงูุฏุงุฎูู ุงูุฎุทู ูู ุงููุงุตู ุงูุฒููู [0.0 - 1.0]. </font><font style="vertical-align: inherit;">ูู ูุงุญูุฉ ุฃุฎุฑู ุ ุฅุฐุง ูุงูุช </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุงุฑุฌ ุงููุทุงู ุ ูุฅู linstep ุชูุฑุฌุน 0.0 ุฃู 1.0. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู ุจุณูุท:</font></font><br>
<br>
<pre><code class="cpp hljs">linstep( <span class="hljs-number">1000.0</span>, <span class="hljs-number">2000.0</span>, <span class="hljs-number">999.0</span>) = <span class="hljs-number">0.0</span>
linstep( <span class="hljs-number">1000.0</span>, <span class="hljs-number">2000.0</span>, <span class="hljs-number">1500.0</span>) = <span class="hljs-number">0.5</span>
linstep( <span class="hljs-number">1000.0</span>, <span class="hljs-number">2000.0</span>, <span class="hljs-number">2000.0</span>) = <span class="hljs-number">1.0</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃู ุฃููุง ุชุดุจู ุฅูู ุญุฏ ูุจูุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุณูุณ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">HLSL</font></a><font style="vertical-align: inherit;"> ุ ุจุงุณุชุซูุงุก ุฃูู ูู ูุฐู ุงูุญุงูุฉ ุ ุจุฏูุงู ูู ุงูุงุณุชููุงุก ุงููุฑููุชู ุ ูุชู ุชูููุฐ ุฎุทู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linstep ููุณุช ููุฒุฉ ูู HLSL ุ ูููููุง ูููุฏุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูุฌุฏุฑ ูุฌูุฏู ูู ูุฌููุนุฉ ุงูุฃุฏูุงุช ุงูุฎุงุตุฉ ุจู.</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-comment">// linstep:  </span>
 <span class="hljs-comment">//  </span>
 <span class="hljs-comment">// Returns a linear interpolation between 0 and 1 if t is in the range [min, max]   </span>
 <span class="hljs-comment">// if "v" is &lt;= min, the output is 0  </span>
 <span class="hljs-comment">// if "v" i &gt;= max, the output is 1  </span><font></font>
   <font></font>
 <span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">linstep</span><span class="hljs-params">( <span class="hljs-keyword">float</span> min, <span class="hljs-keyword">float</span> max, <span class="hljs-keyword">float</span> v )</span>  
 </span>{  
   <span class="hljs-keyword">return</span> saturate( (v - min) / (max - min) );  <font></font>
 } </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูุนูุฏ ุฅูู Witcher 3: ุจุนุฏ ุญุณุงุจ ูุฐุง ุงููุคุดุฑ ุ ูุงูุฅุจูุงุบ ุนู ูุฏู ูุณุงูุฉ ุฌุฒุก ูุนูู ูู ุงูุณูุงุก ูู Geralt ุ ูุณุชุฎุฏูู ูุฅุถุนุงู ุณุทูุน ุงูุณุญุจ:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">45</span>: mul r1.x, r1.w, cb4[<span class="hljs-number">9</span>].x  
  <span class="hljs-number">46</span>: mad r1.y, -cb4[<span class="hljs-number">9</span>].x, r1.w, r1.w  
  <span class="hljs-number">47</span>: mad r0.w, r0.w, r1.y, r1.x  <font></font>
   <font></font>
   <span class="hljs-keyword">float</span> distanceAttenuation = linstep( fadeDistanceStart, fadeDistanceEnd, worldToCamera_distance );  <font></font>
    <font></font>
   <span class="hljs-keyword">float</span> fadedCloudShape = closeCloudsHidingFactor * cloudShape;  <font></font>
   cloudShape = lerp( fadedCloudShape, cloudShape, distanceAttenuation );</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloudShape</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ููุงุฉ .a ูู ุงููุณูุฌ ุงูุฃูู ุ ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">closeCloudsHidingFactor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูููุฉ ุนุงุฒูุฉ ุซุงุจุชุฉ ุชุชุญูู ูู ุฑุคูุฉ ุงูุบููู ููู ุฑุฃุณ Geralt. </font><font style="vertical-align: inherit;">ูู ุฌููุน ุงูุฅุทุงุฑุงุช ุงูุชู ุงุฎุชุจุฑุชูุง ุ ูุงูุช ุชุณุงูู 0.0 ุ ููู ูุง ูุนุงุฏู ุบูุงุจ ุงูุณุญุจ. </font><font style="vertical-align: inherit;">ููุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">distanceAttenuation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุฌ 1.0 (ุงููุณุงูุฉ ูู ุงููุงููุฑุง ุฅูู ูุจุฉ ุงูุณูุงุก ุงูุฒูุงุฏุงุช)ุ ุงูุบููู ุชุตุจุญ ุฃูุซุฑ ูุถูุญุง.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎุฐ ุนููุงุช ูุณูุฌ ุงูุถูุถุงุก</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุญุณุงุจ ุฅุญุฏุงุซูุงุช ุฃุฎุฐ ุงูุนููุงุช ุงููููุณ ุงูุถูุถุงุก ุญุณุงุจุงุช ููุงุซูุฉ ููุณูุฌ ูู ุงูุบูููุ ุฅูุง ุฃูู ููููู ุงุณุชุฎุฏุงู ูุฌููุนุฉ ูุฎุชููุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">textureScale</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">speedMultiplier</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงูุทุจุน ุ ูุชู ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุนููุงุช ูุน ุชูููู ูุถุน ุนููุงู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงูุชูุงู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุฎุฐ ุนููุงุช ูู ุฌููุน ูุฐู ุงูููุงุฏ </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">48</span>: mul r1.xy, cb0[<span class="hljs-number">0</span>].xxxx, cb4[<span class="hljs-number">11</span>].xyxx  
  <span class="hljs-number">49</span>: mad r1.xy, v1.xyxx, cb4[<span class="hljs-number">10</span>].xyxx, r1.xyxx  
  <span class="hljs-number">50</span>: sample_indexable(texture2d)(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>) r1.x, r1.xyxx, t1.xyzw, s0  <font></font>
   <font></font>
   <span class="hljs-comment">// Calc sampling coords for noise  </span><font></font>
   float2 noiseTextureUV = Texcoords * textureScaleNoise + elapsedTime * speedFactorsNoise;  <font></font>
   <font></font>
   <span class="hljs-comment">// Sample texture and get data from it  </span>
   <span class="hljs-keyword">float</span> noiseTextureValue = texture1.Sample( sampler0, noiseTextureUV ).x;</code></pre> <br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุน ูู ุดูุก ูุนุง</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุงุณุชูุงู ูููุฉ ุงูุถูุถุงุก ุ ูุฌุจ ุฃู ูุฏูุฌูุง ูุน cloudShape. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุงุฌูุช ุจุนุถ ุงููุดุงูู ูู ููู ูุฐู ุงูุณุทูุฑ ุ ุญูุซ ุชูุฌุฏ ูุนููุฉ 2.w (ูุงูุชู ุชููู ุฏุงุฆููุง 1.0) ูุถูุถุงุก ูุชุนุฏุฏุฉ (ููุง ูููุฉ 5.0 ุ ูุฃุฎูุฐุฉ ูู ุงููุฎุฒู ุงููุคูุช ุงูุซุงุจุช). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูุฅู ุฃูู ุดูุก ููุง ูู ุงููููุฉ ุงูููุงุฆูุฉ ูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GeneralCloudsVisibility</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงูุชู ุชุคุซุฑ ุนูู ุฑุคูุฉ ุงูุบููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ูุธุฑุฉ ุฃูุถูุง ุนูู ุงููููุฉ ุงูููุงุฆูุฉ ููุถูุถุงุก. </font><font style="vertical-align: inherit;">ูุชู ุถุฑุจ </font><font style="vertical-align: inherit;">ุงูููู ุงููุงุชุฌ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุญุจุงูููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุถุฌูุฌ ุงูููุงุฆู ุ ูุงูุฐู ูุชู ุฅูุชุงุฌู ุฃูุถูุง ูููุงุฉ ุฃููุง.</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">51</span>: mad r1.x, r1.x, cb4[<span class="hljs-number">12</span>].x, -cb4[<span class="hljs-number">12</span>].x
  <span class="hljs-number">52</span>: mad_sat r1.x, cb4[<span class="hljs-number">12</span>].x, v2.w, r1.x
  <span class="hljs-number">53</span>: mul r0.w, r0.w, r1.x
  <span class="hljs-number">54</span>: mul_sat r0.w, r0.w, cb4[<span class="hljs-number">6</span>].x
  <span class="hljs-number">55</span>: mul o0.xyz, r0.wwww, r0.xyzx
  <span class="hljs-number">56</span>: mov o0.w, r0.w
  <span class="hljs-number">57</span>: ret   <font></font>
<font></font>
   <span class="hljs-comment">// Sample noise texture and get data from it  </span>
   <span class="hljs-keyword">float</span> noiseTextureValue = texture1.Sample( sampler0, noiseTextureUV ).x;  <font></font>
   noiseTextureValue = noiseTextureValue * noiseMult - noiseMult;  <font></font>
     <font></font>
   <span class="hljs-keyword">float</span> noiseValue = saturate( noiseMult * Input.param2.w + noiseTextureValue);  <font></font>
   noiseValue *= cloudShape;  <font></font>
     <font></font>
   <span class="hljs-keyword">float</span> finalNoise = saturate( noiseValue * generalCloudsVisibility);  <font></font>
   <font></font>
   <span class="hljs-keyword">return</span> float4( cloudsColor*finalNoise, finalNoise ); </code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌููุน</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุจุฏู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูุงุจูุฉ ููุชุตุฏูู ููุบุงูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููู ุงูููุงุฑูุฉ. </font><font style="vertical-align: inherit;">ุงูุตูุฑุฉ ุงูุฃููู ูู ุชุธููู ุจูุฏู ุ ูุงูุซุงููุฉ ูู ุชุธููู ุงููุนุจุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4cc/331/897/4cc3318976e9c1c54178683a2fee44c0.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุช ูุถููููุง ุ ูุฅู ุฌูุงุฒ ุชุธููู ูุชุงุญ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 2. ุงูุถุจุงุจ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ุชูููุฐ ุงูุถุจุงุจ ุจุทุฑู ูุฎุชููุฉ. ููุน ุฐูู ุ ูุงูุช ุงูุฃููุงุช ุงูุชู ูุงู ุจุฅููุงููุง ูููุง ุชุทุจูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุจุงุจ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุณูุท </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">ูุนุชูุฏ ุนูู ุงููุณุงูุฉ</font></a><font style="vertical-align: inherit;"> ูุงูุชุฎูุต ููู ุฅูู ุงูุฃุจุฏ ูู ุงููุงุถู (ุนูู ุงูุฃุฑุฌุญ). ุฅู ุงูุนูุด ูู ุนุงูู ุชุธููู ูุงุจู ููุจุฑูุฌุฉ ูุฏ ูุชุญ ุงูุจุงุจ ุฃูุงู ุญููู ุฌููููุฉ ุฌุฏูุฏุฉ ุ ูููู ุงูุฃูู ูู ุฐูู ุ ุฏูููุฉ ุฌุณุฏููุง ููุงูุนูุฉ ุจุตุฑููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชูุฏ ุงูุงุชุฌุงูุงุช ุงูุญุงููุฉ ูู ุชูุฏูู ุงูุถุจุงุจ ุฅูู ุชุธููู ุญุณุงุจู (ููุฒูุฏ ูู ุงูุชูุงุตูู ุ ุงูุธุฑ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนุฑุถ ุงูุชูุฏููู ุจุงุฑุช ุจุงุฑุชููุณูู). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุงูุฑุบู ูู ุญูููุฉ ุฃู ูุฐุง ุงูุนุฑุถ ุงูุชูุฏููู ุธูุฑ ูู ุนุงู 2014 ุ ูุชู ุฅุตุฏุงุฑ The Witcher 3 ูู 2015/2016 ุ ูุฅู ุงูุถุจุงุจ ูู ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ูุบุงูุฑุงุช Geralt ูุนุชูุฏ ุชูุงููุง ุนูู ุงูุดุงุดุฉ ููุชู ุชูููุฐู ููุนุงูุฌุฉ ูููุฐุฌูุฉ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุฃู ูุจุฏุฃ ุฌูุณุฉ ุงูููุฏุณุฉ ุงูุนูุณูุฉ ุงูุชุงููุฉ ุ ูุฌุจ ุฃู ุฃููู ุฃูู ุฎูุงู ุงูุนุงู ุงููุงุถู ุญุงููุช ุงูุชุดุงู ุถุจุงุจ Witcher 3 ุฎูุณ ูุฑุงุช ุนูู ุงูุฃูู ุ ููู ูู ูุฑุฉ ุฃุฎูู ูููุง. ุฅู ุฑูุฒ ุงููุฌูุน ุ ููุง ุณุชุฑู ูุฑูุจูุง ุ ูุนูุฏ ููุบุงูุฉ ุ ููุฐุง ูุฌุนู ุนูููุฉ ุฅูุดุงุก ุชุธููู ุงูุถุจุงุจ ุงููุงุจู ูููุฑุงุกุฉ ุนูู HLSL ุดุจู ูุณุชุญูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ุชูููุช ูู ุงูุนุซูุฑ ุนูู ุฃุฏุงุฉ ุชุธููู ุงูุถุจุงุจ ุนูู ุงูุฅูุชุฑูุช ูุงูุชู ุฌุฐุจุช ุงูุชุจุงูู ุนูู ุงูููุฑ ุจุณุจุจ ุชุดุงุจููุง ูุน ุถุจุงุจ The Witcher 3 ูู ุญูุซ ุงูุฃุณูุงุก ุงููุชุบูุฑุฉ ูุงูุชุฑุชูุจ ุงูุนุงู ููุชุนูููุงุช. ูู ููู ูุฐุง ุงูุชุธููู ูู ููุณู ุชูุงููุง ููุง ูู ุงูุญุงู ูู ุงููุนุจุฉ ุ ูุฐูู ูุงู ุนูู ุฅุนุงุฏุฉ ุตูุงุบุฉ ุงูุฃูุฑ ููููุงู. ุฃุฑูุฏ ุฃู ุฃููู ูุฐุง ุฃู ุงูุฌุฒุก ุงูุฑุฆูุณู ูู ููุฏ HLSL ุงูุฐู ุณุชุฑููู ููุง ุ ุจุงุณุชุซูุงุก ุงุซููู ุ ูู ุฃูู ุจุฅูุดุงุฆู / ุชุญูููู. ุชุฐูุฑ ูุฐุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ููุฏ ุงูุชุฌููุน ุงูุฎุงุต ุจุชุธููู ุจูุณู ุงูุถุจุงุจ - ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ููุณู ููุนุจุฉ ุจุฃููููุง (ุงูุฌุฒุก ุงูุฑุฆูุณู ูู ุนุงู 2015 ูููุง ูู DLC):</font></font><br>
<br>
<pre><code class="cpp hljs"> ps_5_0  <font></font>
    dcl_globalFlags refactoringAllowed  <font></font>
    dcl_constantbuffer cb3[<span class="hljs-number">2</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb12[<span class="hljs-number">214</span>], <span class="hljs-function">immediateIndexed  
    <span class="hljs-title">dcl_resource_texture2d</span> <span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> t0  
    <span class="hljs-title">dcl_resource_texture2d</span> <span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> t1  
    <span class="hljs-title">dcl_resource_texture2d</span> <span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> t2  
    dcl_input_ps_siv v0.xy, position  
    dcl_output o0.xyzw  
    dcl_temps 7  
   0: ftou r0.xy, v0.xyxx  
   1: mov r0.zw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span>  
   2: <span class="hljs-title">ld_indexable</span><span class="hljs-params">(texture2d)</span><span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> r1.x, r0.xyww, t0.xyzw  
   3: mad r1.y, r1.x, cb12[22].x, cb12[22].y  
   4: lt r1.y, r1.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
   5: if_nz r1.y  
   6:  utof r1.yz, r0.xxyx  
   7:  mul r2.xyzw, r1.zzzz, cb12[211].xyzw  
   8:  mad r2.xyzw, cb12[210].xyzw, r1.yyyy, r2.xyzw  
   9:  mad r1.xyzw, cb12[212].xyzw, r1.xxxx, r2.xyzw  
  10:  add r1.xyzw, r1.xyzw, cb12[213].xyzw  
  11:  div r1.xyz, r1.xyzx, r1.wwww  
  12:  <span class="hljs-title">ld_indexable</span><span class="hljs-params">(texture2d)</span><span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> r2.xyz, r0.xyww, t1.xyzw  
  13:  <span class="hljs-title">ld_indexable</span><span class="hljs-params">(texture2d)</span><span class="hljs-params">(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>)</span> r0.x, r0.xyzw, t2.xyzw  
  14:  max r0.x, r0.x, cb3[1].x  
  15:  add r0.yzw, r1.xxyz, -cb12[0].xxyz  
  16:  dp3 r1.x, r0.yzwy, r0.yzwy  
  17:  <span class="hljs-built_in">sqrt</span> r1.x, r1.x  
  18:  add r1.y, r1.x, -cb3[0].x  
  19:  add r1.zw, -cb3[0].xxxz, cb3[0].yyyw  
  20:  div_sat r1.y, r1.y, r1.z  
  21:  mad r1.y, r1.y, r1.w, cb3[0].z  
  22:  add r0.x, r0.x, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">-1.000000</span>)</span>  
  23:  mad r0.x, r1.y, r0.x, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  24:  div r0.yzw, r0.yyzw, r1.xxxx  
  25:  mad r1.y, r0.w, cb12[22].z, cb12[0].z  
  26:  add r1.x, r1.x, -cb12[22].z  
  27:  max r1.x, r1.x, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>  
  28:  min r1.x, r1.x, cb12[42].z  
  29:  mul r1.z, r0.w, r1.x  
  30:  mul r1.w, r1.x, cb12[43].x  
  31:  mul r1.zw, r1.zzzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.062500</span>, <span class="hljs-number">0.062500</span>)</span>  
  32:  dp3 r0.y, cb12[38].xyzx, r0.yzwy  
  33:  add r0.z, r0.y, cb12[42].x  
  34:  add r0.w, cb12[42].x, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  35:  div_sat r0.z, r0.z, r0.w  
  36:  add r0.w, -cb12[43].z, cb12[43].y  
  37:  mad r0.z, r0.z, r0.w, cb12[43].z  
  38:  mul r0.w, <span class="hljs-title">abs</span><span class="hljs-params">(r0.y)</span>, <span class="hljs-title">abs</span><span class="hljs-params">(r0.y)</span>  
  39:  mad_sat r2.w, r1.x, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0.002000</span>)</span>, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">-0.300000</span>)</span>  
  40:  mul r0.w, r0.w, r2.w  
  41:  lt r0.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>, r0.y  
  42:  movc r3.xyz, r0.yyyy, cb12[39].xyzx, cb12[41].xyzx  
  43:  add r3.xyz, r3.xyzx, -cb12[40].xyzx  
  44:  mad r3.xyz, r0.wwww, r3.xyzx, cb12[40].xyzx  
  45:  movc r4.xyz, r0.yyyy, cb12[45].xyzx, cb12[47].xyzx  
  46:  add r4.xyz, r4.xyzx, -cb12[46].xyzx  
  47:  mad r4.xyz, r0.wwww, r4.xyzx, cb12[46].xyzx  
  48:  ge r0.y, r1.x, cb12[48].y  
  49:  if_nz r0.y  
  50:   add r0.y, r1.y, cb12[42].y  
  51:   mul r0.w, r0.z, r0.y  
  52:   mul r1.y, r0.z, r1.z  
  53:   mad r5.xyzw, r1.yyyy, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">16.000000</span>, <span class="hljs-number">15.000000</span>, <span class="hljs-number">14.000000</span>, <span class="hljs-number">13.000000</span>)</span>, r0.wwww  
  54:   max r5.xyzw, r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span>  
  55:   add r5.xyzw, r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)</span>  
  56:   div_sat r5.xyzw, r1.wwww, r5.xyzw  
  57:   add r5.xyzw, -r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)</span>  
  58:   mul r1.z, r5.y, r5.x  
  59:   mul r1.z, r5.z, r1.z  
  60:   mul r1.z, r5.w, r1.z  
  61:   mad r5.xyzw, r1.yyyy, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">12.000000</span>, <span class="hljs-number">11.000000</span>, <span class="hljs-number">10.000000</span>, <span class="hljs-number">9.000000</span>)</span>, r0.wwww  
  62:   max r5.xyzw, r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span>  
  63:   add r5.xyzw, r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)</span>  
  64:   div_sat r5.xyzw, r1.wwww, r5.xyzw  
  65:   add r5.xyzw, -r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)</span>  
  66:   mul r1.z, r1.z, r5.x  
  67:   mul r1.z, r5.y, r1.z  
  68:   mul r1.z, r5.z, r1.z  
  69:   mul r1.z, r5.w, r1.z  
  70:   mad r5.xyzw, r1.yyyy, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">8.000000</span>, <span class="hljs-number">7.000000</span>, <span class="hljs-number">6.000000</span>, <span class="hljs-number">5.000000</span>)</span>, r0.wwww  
  71:   max r5.xyzw, r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span>  
  72:   add r5.xyzw, r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)</span>  
  73:   div_sat r5.xyzw, r1.wwww, r5.xyzw  
  74:   add r5.xyzw, -r5.xyzw, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)</span>  
  75:   mul r1.z, r1.z, r5.x  
  76:   mul r1.z, r5.y, r1.z  
  77:   mul r1.z, r5.z, r1.z  
  78:   mul r1.z, r5.w, r1.z  
  79:   mad r5.xy, r1.yyyy, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">4.000000</span>, <span class="hljs-number">3.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>)</span>, r0.wwww  
  80:   max r5.xy, r5.xyxx, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span>  
  81:   add r5.xy, r5.xyxx, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>)</span>  
  82:   div_sat r5.xy, r1.wwww, r5.xyxx  
  83:   add r5.xy, -r5.xyxx, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>)</span>  
  84:   mul r1.z, r1.z, r5.x  
  85:   mul r1.z, r5.y, r1.z  
  86:   mad r0.w, r1.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">2.000000</span>)</span>, r0.w  
  87:   max r0.w, r0.w, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>  
  88:   add r0.w, r0.w, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  89:   div_sat r0.w, r1.w, r0.w  
  90:   add r0.w, -r0.w, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  91:   mul r0.w, r0.w, r1.z  
  92:   mad r0.y, r0.y, r0.z, r1.y  
  93:   max r0.y, r0.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>  
  94:   add r0.y, r0.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  95:   div_sat r0.y, r1.w, r0.y  
  96:   add r0.y, -r0.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  97:   mad r0.y, -r0.w, r0.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  98:   add r0.z, r1.x, -cb12[48].y  
  99:   mul_sat r0.z, r0.z, cb12[48].z  
  100:  <span class="hljs-keyword">else</span>  
  101:   mov r0.yz, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>)</span>  
  102:  endif  
  103:  <span class="hljs-built_in">log</span> r0.y, r0.y  
  104:  mul r0.w, r0.y, cb12[42].w  
  105:  <span class="hljs-built_in">exp</span> r0.w, r0.w  
  106:  mul r0.y, r0.y, cb12[48].x  
  107:  <span class="hljs-built_in">exp</span> r0.y, r0.y  
  108:  mul r0.yw, r0.yyyw, r0.zzzz  
  109:  mad_sat r1.xy, r0.wwww, cb12[189].xzxx, cb12[189].ywyy  
  110:  add r5.xyz, -r3.xyzx, cb12[188].xyzx  
  111:  mad r5.xyz, r1.xxxx, r5.xyzx, r3.xyzx  
  112:  add r0.z, cb12[188].w, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">-1.000000</span>)</span>  
  113:  mad r0.z, r1.y, r0.z, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  114:  mul_sat r5.w, r0.z, r0.w  
  115:  lt r0.z, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span>, cb12[192].x  
  116:  if_nz r0.z  
  117:   mad_sat r1.xy, r0.wwww, cb12[191].xzxx, cb12[191].ywyy  
  118:   add r6.xyz, -r3.xyzx, cb12[190].xyzx  
  119:   mad r3.xyz, r1.xxxx, r6.xyzx, r3.xyzx  
  120:   add r0.z, cb12[190].w, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">-1.000000</span>)</span>  
  121:   mad r0.z, r1.y, r0.z, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  122:   mul_sat r3.w, r0.z, r0.w  
  123:   add r1.xyzw, -r5.xyzw, r3.xyzw  
  124:   mad r5.xyzw, cb12[192].xxxx, r1.xyzw, r5.xyzw  
  125:  endif  
  126:  mul r0.z, r0.x, r5.w  
  127:  mul r0.x, r0.x, r0.y  
  128:  dp3 r0.y, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0.333000</span>, <span class="hljs-number">0.555000</span>, <span class="hljs-number">0.222000</span>, <span class="hljs-number">0.000000</span>)</span>, r2.xyzx  
  129:  mad r1.xyz, r0.yyyy, r4.xyzx, -r2.xyzx  
  130:  mad r0.xyw, r0.xxxx, r1.xyxz, r2.xyxz  
  131:  add r1.xyz, -r0.xywx, r5.xyzx  
  132:  mad r0.xyz, r0.zzzz, r1.xyzx, r0.xywx  
  133: <span class="hljs-keyword">else</span>  
  134:  mov r0.xyz, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)</span>  
  135: endif  
  136: mov o0.xyz, r0.xyzx  
  137: mov o0.w, <span class="hljs-title">l</span><span class="hljs-params">(<span class="hljs-number">1.000000</span>)</span>  
  138: ret </span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุตุฑุงุญุฉ ุ ุงูุชุธููู ุทููู ุฌุฏูุง. </font><font style="vertical-align: inherit;">ุฑุจูุง ุชููู ุทูููุฉ ุฌุฏูุง ูุฅุฌุฑุงุก ุนูููุฉ ุนูุณูุฉ ูุนุงูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ูุซุงู ููุดูุฏ ุบุฑูุจ ุงูุดูุณ ูุน ุงูุถุจุงุจ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/375/d59/f51/375d59f5199e791efd99c218a0ea6f53.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ูููู ูุธุฑุฉ ุนูู ุงููุฏุฎูุงุช: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูุง ุจุงููุณุจุฉ ุฅูู ุงูุฃูุณุฌุฉ ุ ููุฏููุง ูุฎุฒู ูุคูุช ููุนูู ุ ูุถููุฑ ุงููุญูุท ุ ููุฎุฒู ุฃููุงู HDR.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ea/24d/ff0/9ea24dff07dad409a78834272d553b29.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฎุฒู ุงููุคูุช ูุนูู ุงููุงุฑุฏ</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e7/c8f/e3e/3e7c8fe3ee0dc58e3007f9a1bad7f877.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณุฏุงุฏ ุงููุญูุท ุงููุงุฑุฏ</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/748/51f/f3c/74851ff3ce8d38b77d9319329a334d4f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏู ุงููุฎุฒู ุงููุคูุช ูููู HDR ุงููุงุฑุฏ</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
... ููุชูุฌุฉ ุชุทุจูู ุชุธููู ุงูุถุจุงุจ ูู ูุฐุง ุงููุดูุฏ ููุง ููู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ee/2f8/5ad/1ee2f85adc2cc870769985308b6dcc48.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุฌ HDR ุจุนุฏ ุชุทุจูู ุงูุถุจุงุจ.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ูุณุชุฎุฏู ุงููุฎุฒู ุงููุคูุช ููุนูู ูุฅุนุงุฏุฉ ุฅูุดุงุก ุงูููุถุน ูู ุงูุนุงูู. ูุฐุง ูู ุงูููุท ุงูููุงุณู ูุชุธููู Witcher 3. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุญุตูู ุนูู ุจูุงูุงุช ุญุฌุจ ุงููุญูุท (ูู ุญุงูุฉ ุชููููู) ูุชูุญ ููุง ุฅุฎูุงุก ุงูุถุจุงุจ. ููุฑุฉ ุฐููุฉ ููุบุงูุฉ ุ ุฑุจูุง ููุฑุฉ ูุงุถุญุฉ ุ ูููู ูู ุฃููุฑ ุจูุง ุจูุฐู ุงูุทุฑููุฉ. ุณุฃุนูุฏ ุฅูู ูุฐุง ุงูุฌุงูุจ ูู ููุช ูุงุญู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฃ ุฌูุงุฒ ุชุธููู ุจุชุญุฏูุฏ ูุง ุฅุฐุง ูุงูุช ุงูุจูุณู ูู ุงูุณูุงุก. ูู ุญุงูุฉ ูุฌูุฏ ุงูุจูุณู ูู ุงูุณูุงุก (ุงูุนูู == 1.0) ุ ูุฅู ุงูุชุธููู ูุนูุฏ ุจุงูููู ุงูุฃุณูุฏ. ุฅุฐุง ูุงูุช ุงูุจูุณู ูู ุงููุดูุฏ (ุงูุนูู &lt;1.0) ุ ูุฅููุง ูุนูุฏ ุฅูุดุงุก ุงูููุถุน ูู ุงูุนุงูู ุจุงุณุชุฎุฏุงู ุงููุฎุฒู ุงููุคูุช ููุนูู (ุงูุณุทูุฑ 7-11) ููุณุชูุฑ ูู ุญุณุงุจ ุงูุถุจุงุจ.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุฏุซ ูุฑูุฑ ุงูุถุจุงุจ ุจุนุฏ ูุชุฑุฉ ูุฌูุฒุฉ ูู ุนูููุฉ ุงูุชุธููู ุงููุชุฃุฎุฑุฉ. </font><font style="vertical-align: inherit;">ูุฏ ุชูุงุญุธ ุฃู ุจุนุถ ุงูุนูุงุตุฑ ุงููุชุนููุฉ ุจุงูุชุดุบูู ุงูุฃูุงูู ููุณุช ูุชุงุญุฉ ุจุนุฏ. </font><font style="vertical-align: inherit;">ูู ูุฐุง ุงููุดูุฏ ุจุงูุฐุงุช ุ ุชู ุชุทุจูู ุฃุญุฌุงู ุฅุถุงุกุฉ ูุคุฌูุฉ ุ ูุจุนุฏ ุฐูู ูุฏููุง โโุดุนุฑ / ูุฌู / ุนููู Geralt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ุดูุก ุชุญุชุงุฌ ุฅูู ูุนุฑูุชู ุนู ุงูุถุจุงุจ ูู "The Witcher 3": ูุชููู ูู ุฌุฒุฃูู - "ููู ุงูุถุจุงุจ" ู "ููู ุงูุบูุงู ุงูุฌูู".</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FogResult</span>  
 {</span>  
    float4 paramsFog;     <span class="hljs-comment">// RGB: color, A: influence  </span>
    float4 paramsAerial;  <span class="hljs-comment">// RGB: color, A: influence  </span>
 };</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููู ุฌุฒุก ุซูุงุซุฉ ุฃููุงู: ุฃูุงูู ููุชูุณุท โโูุฎููู. </font><font style="vertical-align: inherit;">ุฃู ุฃูู ูู ุงููุฎุฒู ุงููุคูุช ุงููุณุชูุฑ ุชูุฌุฏ ุจูุงูุงุช ูุซู "FogColorFront" ู "FogColorMiddle" ู "AerialColorBack" ููุง ุฅูู ุฐูู ... ูููู ูุธุฑุฉ ุนูู ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b2/cd0/55d/0b2cd055d9f6876c57527b9934b3b6ad.png"></div><br>
<pre><code class="cpp hljs">   <span class="hljs-comment">// *** Inputs *** //  </span><font></font>
   float3 FogSunDir = cb12_v38.xyz;  <font></font>
   float3 FogColorFront = cb12_v39.xyz;  <font></font>
   float3 FogColorMiddle = cb12_v40.xyz;  <font></font>
   float3 FogColorBack = cb12_v41.xyz;  <font></font>
     <font></font>
   float4 FogBaseParams = cb12_v42;  <font></font>
   float4 FogDensityParamsScene = cb12_v43;  <font></font>
   float4 FogDensityParamsSky = cb12_v44;  <font></font>
     <font></font>
   float3 AerialColorFront = cb12_v45.xyz;  <font></font>
   float3 AerialColorMiddle = cb12_v46.xyz;  <font></font>
   float3 AerialColorBack = cb12_v47.xyz;  <font></font>
   float4 AerialParams = cb12_v48;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจู ุญุณุงุจ ุงูุฃููุงู ุงูููุงุฆูุฉ ุ ูุญุชุงุฌ ุฅูู ุญุณุงุจ ุงููุชุฌูุงุช ูููุชุฌุงุช ุงูุนุฏุฏูุฉ. </font><font style="vertical-align: inherit;">ูููู ููุชุธููู ุงููุตูู ุฅูู ููุถุน ุงูุจูุณู ูู ุงูุนุงูู ุ ูููุถุน ุงููุงููุฑุง (cb12 [0] .xyz) ูุงุชุฌุงู ุงูุถุจุงุจ / ุงูุฅุถุงุกุฉ (cb12 [38] .xyz). </font><font style="vertical-align: inherit;">ูุฐุง ูุณูุญ ููุง ุจุญุณุงุจ ุงููุงุชุฌ ุงูุนุฏุฏู ููุงูู ุดูู ุงูุถุจุงุจ ูุงุชุฌุงูู.</font></font><br>
<br>
<pre><code class="cpp hljs">   float3 frag_vec = fragPosWorldSpace.xyz - customCameraPos.xyz;  
   <span class="hljs-keyword">float</span> frag_dist = length(frag_vec);  <font></font>
     <font></font>
   float3 frag_dir = frag_vec / frag_dist;  <font></font>
   <font></font>
   <span class="hljs-keyword">float</span> dot_fragDirSunDir = dot(GlobalLightDirection.xyz, frag_dir);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณุงุจ ุชุฏุฑุฌ ุงููุฒุฌ ุ ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุฑุจุน ููุชุฌ ุงูุนุฏุฏ ุงููุทูู ุ ุซู ุถุฑุจ ุงููุชูุฌุฉ ูุฑุฉ ุฃุฎุฑู ูู ุจุนุถ ุงููุนููุงุช ุงูุชู ุชุนุชูุฏ ุนูู ุงููุณุงูุฉ:</font></font><br>
<br>
<pre><code class="cpp hljs">   float3 curr_col_fog;  <font></font>
   float3 curr_col_aerial;  <font></font>
   {  <font></font>
     <span class="hljs-keyword">float</span> _dot = dot_fragDirSunDir;  <font></font>
   <font></font>
     <span class="hljs-keyword">float</span> _dd = _dot;  <font></font>
     {  <font></font>
       <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> _distOffset = <span class="hljs-number">-150</span>;  
       <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> _distRange = <span class="hljs-number">500</span>;  
       <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> _mul = <span class="hljs-number">1.0</span> / _distRange;  
       <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> _bias = _distOffset * _mul;  <font></font>
   <font></font>
       _dd = <span class="hljs-built_in">abs</span>(_dd);  <font></font>
       _dd *= _dd;  <font></font>
       _dd *= saturate( frag_dist * _mul + _bias );  <font></font>
     }  <font></font>
   <font></font>
     curr_col_fog = lerp( FogColorMiddle.xyz, (_dot&gt;<span class="hljs-number">0.0f</span> ? FogColorFront.xyz : FogColorBack.xyz), _dd );  <font></font>
     curr_col_aerial = lerp( AerialColorMiddle.xyz, (_dot&gt;<span class="hljs-number">0.0f</span> ? AerialColorFront.xyz : AerialColorBack.xyz), _dd );  <font></font>
   }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุถุญ ูุฐุง ุงูููุฏ ุงูุจุฑูุฌู ููุง ูู ุฃูู ุฌุงุกุช ูุฐู 0.002 ู -0.300. </font><font style="vertical-align: inherit;">ููุง ูุฑู ุ ูุฅู ุงูููุชุฌ ุงูููุงุณู ุจูู ููุงูู ุงูุฑุคูุฉ ูุงูุฅุถุงุกุฉ ูุณุคูู ุนู ุงูุงุฎุชูุงุฑ ุจูู ุงูุฃููุงู "ุงูุฃูุงููุฉ" ู "ุงูุฎูููุฉ". </font><font style="vertical-align: inherit;">ุฐูู! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุตูุฑ ุงูุชุฏุฑุฌ ุงูููุงุฆู ุงููุงุชุฌ (_dd).</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d43/f03/ca0/d43f03ca005d504abd5cd236007f34f4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุน ุฐูู ุ ูุฅู ุญุณุงุจ ุชุฃุซูุฑ ุงูุบูุงู ุงูุฌูู / ุงูุถุจุงุจ ุฃูุซุฑ ุชุนููุฏูุง. ููุง ุชุฑูู ุ ูุฏููุง ุฎูุงุฑุงุช ุฃูุซุฑ ุจูุซูุฑ ูู ุฃููุงู RGB ููุท. ููู ุชุดูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุซุงูุฉ ุงููุดูุฏ. ูุณุชุฎุฏู Raymarching (16 ุฎุทูุฉ ุ ููุฐุง ูู ุงูุณุจุจ ูู ุฃูู ูููู ุชูุณูุน ุงูุฏูุฑุฉ) ูุชุญุฏูุฏ ุญุฌู ุงูุถุจุงุจ ูุนุงูู ุงููููุงุณ: ุนูุฏ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฌูุฏ ูุงูู [camera ---&gt; world] ุ ูููููุง ุชูุณูู ุฌููุน ููููุงุชู ุฅูู 16 - ุณุชููู ูุฐู ุฎุทูุฉ ูุงุญุฏุฉ. ููุง ูุฑู ุฃุฏูุงู ุ ูุฅู ูููู .z (ุงูุงุฑุชูุงุน) ููุท ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curr_pos_z_step</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ูู ุงูุฐู </font><font style="vertical-align: inherit;">ูุดุงุฑู ูู ุงูุญุณุงุจุงุช </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฑุฃ ุงููุฒูุฏ ุนู ุงูุถุจุงุจ ุงูุฐู ูุชู ุชุทุจููู ุจูุงุณุทุฉ raymarching ุ ุนูู ุณุจูู ุงููุซุงู ุ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-keyword">float</span> fog_amount = <span class="hljs-number">1</span>;  
   <span class="hljs-keyword">float</span> fog_amount_scale = <span class="hljs-number">0</span>;  <font></font>
   [branch]  <font></font>
   <span class="hljs-keyword">if</span> ( frag_dist &gt;= AerialParams.y )  <font></font>
   {  <font></font>
     <span class="hljs-keyword">float</span> curr_pos_z_base = (customCameraPos.z + FogBaseParams.y) * density_factor;  
     <span class="hljs-keyword">float</span> curr_pos_z_step = frag_step.z * density_factor;  <font></font>
   <font></font>
     [unroll]  <font></font>
     <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i=<span class="hljs-number">16</span>; i&gt;<span class="hljs-number">0</span>; --i )  <font></font>
     {  <font></font>
       fog_amount *= <span class="hljs-number">1</span> - saturate( density_sample_scale / (<span class="hljs-number">1</span> + max( <span class="hljs-number">0.0</span>, curr_pos_z_base + (i) * curr_pos_z_step ) ) );  <font></font>
     }  <font></font>
   <font></font>
     fog_amount = <span class="hljs-number">1</span> - fog_amount;  <font></font>
     fog_amount_scale = saturate( (frag_dist - AerialParams.y) * AerialParams.z );  <font></font>
   }  <font></font>
   <font></font>
   FogResult ret;  <font></font>
   <font></font>
   ret.paramsFog = float4 ( curr_col_fog, fog_amount_scale * <span class="hljs-built_in">pow</span>( <span class="hljs-built_in">abs</span>(fog_amount), final_exp_fog ) );  <font></font>
   ret.paramsAerial = float4 ( curr_col_aerial, fog_amount_scale * <span class="hljs-built_in">pow</span>( <span class="hljs-built_in">abs</span>(fog_amount), final_exp_aerial ) );</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงุถุญ ุฃู ูููุฉ ุงูุถุจุงุจ ุชุนุชูุฏ ุนูู ุงูุงุฑุชูุงุน (ุงูููููุงุช. z) ุ ููู ุงูููุงูุฉ ูุชู ุฑูุน ูููุฉ ุงูุถุจุงุจ ุฅูู ุฏุฑุฌุฉ ุงูุถุจุงุจ / ุงูุบูุงู ุงูุฌูู. </font><font style="vertical-align: inherit;">ูุชู ุฃุฎุฐ </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">final_exp_fog</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">final_exp_aerial</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงููุฎุฒู ุงููุคูุช ุงูุซุงุจุช ุ </font><font style="vertical-align: inherit;">ุชุณูุญ ูู ุจุงูุชุญูู ูู ููููุฉ ุชุฃุซูุฑ ุฃููุงู ุงูุถุจุงุจ ูุงูุฌู ุนูู ุงูุนุงูู ุจุงุฑุชูุงุน ูุชุฒุงูุฏ.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุงูุฒ ุงูุถุจุงุจ</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุธููู ุงูุฐู ูุฌุฏุชู ููุณ ูุฏูู ุฌุฒุก ุฑูุฒ ุงูุชุฌููุน ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">109</span>:  mad_sat r1.xy, r0.wwww, cb12[<span class="hljs-number">189</span>].xzxx, cb12[<span class="hljs-number">189</span>].ywyy  
  <span class="hljs-number">110</span>:  add r5.xyz, -r3.xyzx, cb12[<span class="hljs-number">188</span>].xyzx  
  <span class="hljs-number">111</span>:  mad r5.xyz, r1.xxxx, r5.xyzx, r3.xyzx  
  <span class="hljs-number">112</span>:  add r0.z, l(<span class="hljs-number">-1.000000</span>), cb12[<span class="hljs-number">188</span>].w  
  <span class="hljs-number">113</span>:  mad r0.z, r1.y, r0.z, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">114</span>:  mul_sat r5.w, r0.w, r0.z  
  <span class="hljs-number">115</span>:  lt r0.z, l(<span class="hljs-number">0.000000</span>), cb12[<span class="hljs-number">192</span>].x  
  <span class="hljs-number">116</span>:  if_nz r0.z  
  <span class="hljs-number">117</span>:   mad_sat r1.xy, r0.wwww, cb12[<span class="hljs-number">191</span>].xzxx, cb12[<span class="hljs-number">191</span>].ywyy  
  <span class="hljs-number">118</span>:   add r6.xyz, -r3.xyzx, cb12[<span class="hljs-number">190</span>].xyzx  
  <span class="hljs-number">119</span>:   mad r3.xyz, r1.xxxx, r6.xyzx, r3.xyzx  
  <span class="hljs-number">120</span>:   add r0.z, l(<span class="hljs-number">-1.000000</span>), cb12[<span class="hljs-number">190</span>].w  
  <span class="hljs-number">121</span>:   mad r0.z, r1.y, r0.z, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">122</span>:   mul_sat r3.w, r0.w, r0.z  
  <span class="hljs-number">123</span>:   add r1.xyzw, -r5.xyzw, r3.xyzw  
  <span class="hljs-number">124</span>:   mad r5.xyzw, cb12[<span class="hljs-number">192</span>].xxxx, r1.xyzw, r5.xyzw  
  <span class="hljs-number">125</span>:  endif</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ุญูููุง ุจูุง ุชูููุช ูู ูููู ุ ููุฐุง ูุดุจู ุฅุนุงุฏุฉ ุชุนุฑูู ุงูููู ูุชุฃุซูุฑ ุงูุถุจุงุจ: ูู </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุธู ุงูููุช ุ ูุชู ุฅุฌุฑุงุก ุฅุนุงุฏุฉ ุชุนุฑูู ูุงุญุฏุฉ ููุท (cb12_v192.x ุชุณุงูู 0.0) ุ ูููู ูู ูุฐู ุงูุญุงูุฉ ุจุงูุฐุงุช ุชููู ูููุชูุง 0.22 ุ ูุฐูู ูููู ุจุงูุชุฎุทู ุงูุซุงูู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cc7/2bd/1b8/cc72bd1b8cff0742cf4aad51a7e6ab3f.png"></div><br>
<pre><code class="cpp hljs"> <span class="hljs-meta">#<span class="hljs-meta-keyword">ifdef</span> OVERRIDE_FOG  </span><font></font>
     <font></font>
   <span class="hljs-comment">// Override  </span>
   <span class="hljs-keyword">float</span> fog_influence = ret.paramsFog.w; <span class="hljs-comment">// r0.w  </span><font></font>
   <font></font>
   <span class="hljs-keyword">float</span> override1ColorScale = cb12_v189.x;  
   <span class="hljs-keyword">float</span> override1ColorBias = cb12_v189.y;  <font></font>
   float3 override1Color = cb12_v188.rgb;  <font></font>
     <font></font>
   <span class="hljs-keyword">float</span> override1InfluenceScale = cb12_v189.z;  
   <span class="hljs-keyword">float</span> override1InfluenceBias = cb12_v189.w;  
   <span class="hljs-keyword">float</span> override1Influence = cb12_v188.w;  <font></font>
     <font></font>
   <span class="hljs-keyword">float</span> override1ColorAmount = saturate(fog_influence * override1ColorScale + override1ColorBias);  
   <span class="hljs-keyword">float</span> override1InfluenceAmount = saturate(fog_influence * override1InfluenceScale + override1InfluenceBias);    <font></font>
     <font></font>
<font></font>
   float4 paramsFogOverride;  <font></font>
   paramsFogOverride.rgb = lerp(curr_col_fog, override1Color, override1ColorAmount ); <span class="hljs-comment">// ***r5.xyz   </span><font></font>
     <font></font>
   <span class="hljs-keyword">float</span> param1 = lerp(<span class="hljs-number">1.0</span>, override1Influence, override1InfluenceAmount); <span class="hljs-comment">// r0.x  </span>
   paramsFogOverride.w = saturate(param1 * fog_influence ); <span class="hljs-comment">// ** r5.w  </span><font></font>
   <font></font>
     <font></font>
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> extraFogOverride = cb12_v192.x;  <font></font>
     <font></font>
   [branch]   <font></font>
   <span class="hljs-keyword">if</span> (extraFogOverride &gt; <span class="hljs-number">0.0</span>)  <font></font>
   {  <font></font>
     <span class="hljs-keyword">float</span> override2ColorScale = cb12_v191.x;  
     <span class="hljs-keyword">float</span> override2ColorBias = cb12_v191.y;  <font></font>
     float3 override2Color = cb12_v190.rgb;  <font></font>
     <font></font>
     <span class="hljs-keyword">float</span> override2InfluenceScale = cb12_v191.z;  
     <span class="hljs-keyword">float</span> override2InfluenceBias = cb12_v191.w;  
     <span class="hljs-keyword">float</span> override2Influence = cb12_v190.w;  <font></font>
       <font></font>
     <span class="hljs-keyword">float</span> override2ColorAmount = saturate(fog_influence * override2ColorScale + override2ColorBias);  
     <span class="hljs-keyword">float</span> override2InfluenceAmount = saturate(fog_influence * override2InfluenceScale + override2InfluenceBias);  <font></font>
      <font></font>
<font></font>
     float4 paramsFogOverride2;  <font></font>
     paramsFogOverride2.rgb = lerp(curr_col_fog, override2Color, override2ColorAmount); <span class="hljs-comment">// r3.xyz   </span><font></font>
           <font></font>
     <span class="hljs-keyword">float</span> ov_param1 = lerp(<span class="hljs-number">1.0</span>, override2Influence, override2InfluenceAmount); <span class="hljs-comment">// r0.z  </span>
     paramsFogOverride2.w = saturate(ov_param1 * fog_influence); <span class="hljs-comment">// r3.w  </span><font></font>
   <font></font>
     paramsFogOverride = lerp(paramsFogOverride, paramsFogOverride2, extraFogOverride);  <font></font>
   <font></font>
   }  <font></font>
   ret.paramsFog = paramsFogOverride;  <font></font>
     <font></font>
 <span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุงูุณุนุฑ ุงูููุงุฆู ุจุฏูู ุฅุนุงุฏุฉ ุชุนุฑูู ุงูุถุจุงุจ (ุงูุตูุฑุฉ ุงูุฃููู) ุ ูุน ุฅุนุงุฏุฉ ุชุนุฑูู ูุงุญุฏุฉ (ุงูุตูุฑุฉ ุงูุซุงููุฉ) ูุฅุนุงุฏุฉ ุชุนุฑูู ูุฒุฏูุฌุฉ (ุงูุตูุฑุฉ ุงูุซุงูุซุฉ ุ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ):</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b9/011/3c8/3b90113c8ad27f287cdb29a25a37470d.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/03a/791/d39/03a791d39e2082b80e86ea8daa488a64.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/375/d59/f51/375d59f5199e791efd99c218a0ea6f53.jpg"></div><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุธูู ุงูุงูุณุฏุงุฏ ุงููุญูุท</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุธููู ุงูุฐู ูุฌุฏุชู ุฃูุถูุง ูู ูุณุชุฎุฏู ุงูุงูุณุฏุงุฏ ุงููุญูุท ุนูู ุงูุฅุทูุงู. </font><font style="vertical-align: inherit;">ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุณูุฌ AO ูุฑุฉ ุฃุฎุฑู ูุงูุฑูุฒ ุงูุฐู ููููุง:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e7/c8f/e3e/3e7c8fe3ee0dc58e3007f9a1bad7f877.jpg"></div><br>
<pre><code class="cpp hljs">  <span class="hljs-number">13</span>:  ld_indexable(texture2d)(<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>,<span class="hljs-keyword">float</span>) r0.x, r0.xyzw, t2.xyzw  
  <span class="hljs-number">14</span>:  max r0.x, r0.x, cb3[<span class="hljs-number">1</span>].x  
  <span class="hljs-number">15</span>:  add r0.yzw, r1.xxyz, -cb12[<span class="hljs-number">0</span>].xxyz  
  <span class="hljs-number">16</span>:  dp3 r1.x, r0.yzwy, r0.yzwy  
  <span class="hljs-number">17</span>:  <span class="hljs-built_in">sqrt</span> r1.x, r1.x  
  <span class="hljs-number">18</span>:  add r1.y, r1.x, -cb3[<span class="hljs-number">0</span>].x  
  <span class="hljs-number">19</span>:  add r1.zw, -cb3[<span class="hljs-number">0</span>].xxxz, cb3[<span class="hljs-number">0</span>].yyyw  
  <span class="hljs-number">20</span>:  div_sat r1.y, r1.y, r1.z  
  <span class="hljs-number">21</span>:  mad r1.y, r1.y, r1.w, cb3[<span class="hljs-number">0</span>].z  
  <span class="hljs-number">22</span>:  add r0.x, r0.x, l(<span class="hljs-number">-1.000000</span>)  
  <span class="hljs-number">23</span>:  mad r0.x, r1.y, r0.x, l(<span class="hljs-number">1.000000</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฑุจูุง ูุฐุง ุงููุดูุฏ ููุณ ุฃูุถู ูุซุงู ุ ูุฃููุง ูุง ูุฑู ุงูุชูุงุตูู ูู ุฌุฒูุฑุฉ ุจุนูุฏุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุฏุนูุง ูููู ูุธุฑุฉ ุนูู ุงููุฎุฒู ุงููุคูุช ุงูุซุงุจุช ุ ูุงูุฐู ููุณุชุฎุฏู ูุชุนููู ูููุฉ ุงูุบูู ุงููุญูุท:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/343/c52/af4/343c52af44338628770912801bc3b32c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฃ ุจุชุญููู AO ูู ุงููุณูุฌ ุ ุซู ุชูููุฐ ุงูุชุนูููุงุช ุงููุตูู. ูู ูุฐุง ุงููุดูุฏ ุ cb3_v1.x ูุฑุชูุน ุฌุฏูุง (0.96888) ุ ููุง ูุฌุนู AO ุถุนูููุง ุฌุฏูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุณุจ ุงูุฌุฒุก ุงูุชุงูู ูู ุงูุฑูุฒ ุงููุณุงูุฉ ุจูู ููุงุถุน ุงููุงููุฑุง ูุงูุจูุณู ูู ุงูุนุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนุชูุฏ ุฃู ุงูุดูุฑุฉ ุชุชุญุฏุซ ุฃุญูุงููุง ุนู ููุณูุง ุ ูุฐูู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู HLSL ุ ุงูุฐู ูููู ุจูุนุธู ูุฐุง ุงูุฅุนุฏุงุฏ:</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">AdjustAmbientOcclusion</span><span class="hljs-params">(in <span class="hljs-keyword">float</span> inputAO, in <span class="hljs-keyword">float</span> worldToCameraDistance)</span>  
 </span>{  
   <span class="hljs-comment">// *** Inputs *** //  </span>
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> aoDistanceStart = cb3_v0.x;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> aoDistanceEnd = cb3_v0.y;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> aoStrengthStart = cb3_v0.z;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> aoStrengthEnd = cb3_v0.w;  <font></font>
      <font></font>
   <span class="hljs-comment">// * Adjust AO  </span>
   <span class="hljs-keyword">float</span> aoDistanceIntensity = linstep( aoDistanceStart, aoDistanceEnd, worldToCameraDistance );  
   <span class="hljs-keyword">float</span> aoStrength = lerp(aoStrengthStart, aoStrengthEnd, aoDistanceIntensity);   
   <span class="hljs-keyword">float</span> adjustedAO = lerp(<span class="hljs-number">1.0</span>, inputAO, aoStrength);  <font></font>
     <font></font>
   <span class="hljs-keyword">return</span> adjustedAO;   <font></font>
 }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงุณุชุฎุฏุงู ุงููุณุงูุฉ ุงููุญุณูุจุฉ ุจูู ุงููุงููุฑุง ูุงูุนุงูู ููุธููุฉ ูููุณุชูุจ. </font><font style="vertical-align: inherit;">ูุญู ูุนูู ุจุงููุนู ูุฐู ุงููุธููุฉ ุ ุธูุฑุช ูู ุชุธููู ุณุญุงุจุฉ cirrus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑู ุ ูู ุงููุฎุฒู ุงููุคูุช ุงูุซุงุจุช ูุฏููุง ููู ูุณุงูุฉ ุงูุจุฏุก / ุงูููุงูุฉ AO. </font><font style="vertical-align: inherit;">ูุคุซุฑ ูุงุชุฌ linstep ุนูู ููุฉ AO (ููุฐูู ูู cbuffer) ุ ูุชุคุซุฑ ุงูููุฉ ุนูู ุฅุฎุฑุงุฌ AO. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซุงู ููุฌุฒ: ุงูุจูุณู ุจุนูุฏ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุงููุณุงูุฉ 500. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุฑุฌุน linstep 1.0ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
aoStrength ูุณุงูู aoStrengthEnd ุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุชุฌ ุนู ูุฐุง ุฅุฑุฌุงุน AO ุ ููู ูุง ููุฑุจ ูู 77ูช (ุงูููุฉ ุงูููุงุฆูุฉ) ูู ูููุฉ ุงูุฅุฏุฎุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุนุฑุถ AO ุงููุงุฑุฏ ููุฐู ุงููุธููุฉ ูุณุจููุง ุฅูู ุงูุญุฏ ุงูุฃูุตู ููุชุดุบูู.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุน ูู ุดูุก ูุนุง</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุนุฏ ุชููู ููู ูุชุฃุซูุฑ ููู ุงูุถุจุงุจ ูููู ุงูุบูุงู ุงูุฌูู ุ ููููู ูู ุงูููุงูุฉ ุงูุฌูุน ุจููููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุจุฏุฃ ุจุชุฎููู ุงูุชุฃุซูุฑ ูุน AO ุงููุงุชุฌ:</font></font><br>
<br>
<pre><code class="cpp hljs">   ...<font></font>
   FogResult fog = CalculateFog( worldPos, CameraPosition, fogStart, ao, <span class="hljs-literal">false</span> );  <font></font>
      <font></font>
   <span class="hljs-comment">// Apply AO to influence  </span><font></font>
   fog.paramsFog.w *= ao;  <font></font>
   fog.paramsAerial.w *= ao; <font></font>
      <font></font>
   <span class="hljs-comment">// Mix fog with scene color  </span>
   outColor = ApplyFog(fog, colorHDR);</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูุณุญุฑ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฏุซ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุธููุฉ </font><b><font style="vertical-align: inherit;">ApplyFog</font></b><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-function">float3 <span class="hljs-title">ApplyFog</span><span class="hljs-params">(FogResult fog, float3 color)</span>  
 </span>{  
   <span class="hljs-keyword">const</span> float3 LuminanceFactors = float3(<span class="hljs-number">0.333f</span>, <span class="hljs-number">0.555f</span>, <span class="hljs-number">0.222f</span>);  <font></font>
   <font></font>
   float3 aerialColor = dot(LuminanceFactors, color) * fog.paramsAerial.xyz;  <font></font>
   color = lerp(color, aerialColor, fog.paramsAerial.w);  <font></font>
   color = lerp(color, fog.paramsFog.xyz, fog.paramsFog.w);  <font></font>
    <font></font>
   <span class="hljs-keyword">return</span> color.xyz;  <font></font>
 }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃููุงู ุ ูุญุณุจ ููุนุงู ุงูุจูุณู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6bd/b00/570/6bdb005708a11953aeb8ce711a942f0d.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูุถุฑุจูุง ุจููู ุงูุบูุงู ุงูุฌูู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7d/f89/f04/e7df89f04524c4e547a91a645317a387.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูููู ุจุฏูุฌ ููู HDR ูุน ููู ุงูุบูุงู ุงูุฌูู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cae/40a/912/cae40a9124b33e97aa38ac5b72b9a5ae.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูู ุฏูุฌ ุงููุชูุฌุฉ ุงููุชูุณุทุฉ ูุน ููู ุงูุถุจุงุจ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ee/2f8/5ad/1ee2f85adc2cc870769985308b6dcc48.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุดุฆ!</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุถ ููุทุงุช ุดุงุดุฉ ุงูุชุตุญูุญ</font></font></h4><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/012/b08/e69/012b08e69615702c9267f24f167dfa98.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุฃุซูุฑ ุงูุฌูู</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1b/c3a/f2c/b1bc3af2c5d59db606570a54e861659b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุบูุงู ุงูุฌูู</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d10/b17/0ab/d10b170ab255b3ff9b4d6fad60e1c1e3.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฃุซูุฑ ุงูุถุจุงุจ</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d76/9ae/dde/d769aedde1917ab6024e524d9c99625d.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงูุถุจุงุจ</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ad/b15/0dd/7adb150dddf4df73c8dc75e51aa9e138.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดูุฏ ููุชูู ุจุฏูู ุถุจุงุจ</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f53/fdc/507/f53fdc5076e000acb24a775ba7558e8a.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดูุฏ ุฌุงูุฒ ูุน ุงูุถุจุงุจ ููุท</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad1/223/e4a/ad1223e4aabc3dc3f07a77125b54211f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุดูุฏ ุงูููุงุฆู ูู ุงูุถุจุงุจ ุงูุฑุฆูุณู</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/375/d59/f51/375d59f5199e791efd99c218a0ea6f53.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดูุฏ ุฌุงูุฒ ูุฑุฉ ุฃุฎุฑู ูุน ูู ุงูุถุจุงุจ ูุณูููุฉ ุงูููุงุฑูุฉ</font></font></i><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌููุน</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุนุชูุฏ ุฃูู ููููู ููู ุงููุซูุฑ ููุง ุณุจู ุ ุฅุฐุง ูุธุฑุช ุฅูู ุงูุชุธููู ุ ููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุณุชุทูุน ุฃู ุฃููู ุจุณุฑูุฑ ุฃู ูุฐุง ุงูุชุธููู </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณ ุงูุดูุก ุงูุฃุตูู ุชูุงููุง - ุฅูู ูุฌุนููู ุณุนูุฏูุง ุฌุฏูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุนุงู ุ ุชุนุชูุฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุจุดูู ูุจูุฑ ุนูู ุงูููู ุงูุชู ูุชู ุชูุฑูุฑูุง ุฅูู ุงูุชุธููู. ูุฐุง ููุณ ุญูุงู "ุณุญุฑููุง" ูุนุทู ุฃููุงููุง ูุซุงููุฉ ูู ุงูุฅุฎุฑุงุฌ ุ ููู ูุชุทูุจ ุงููุซูุฑ ูู ุงูุชูุฑุงุฑุงุช ูุงูููุงููู ูุฌุนู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุชุจุฏู ูุงุฆูุฉ. ุฃุนุชูุฏ ุฃููุง ูููู ุฃู ุชููู ุนูููุฉ ุทูููุฉ ุ ูููู ุจุนุฏ ุฅููุงููุง ุ ุณุชููู ุงููุชูุฌุฉ ูููุนุฉ ููุบุงูุฉ ุ ุชูุงููุง ูุซู ูุดูุฏ ุบุฑูุจ ุงูุดูุณ ูุฐุง.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุณุชุฎุฏู Witcher 3 Sky Shader ุฃูุถูุง ุญุณุงุจุงุช ุงูุถุจุงุจ ูุฅูุดุงุก ุงูุชูุงู ุณูุณ ููุฃููุงู ุจุงููุฑุจ ูู ุงูุฃูู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุชู ุชูุฑูุฑ ูุฌููุนุฉ ูุฎุชููุฉ ูู ูุนุงููุงุช ุงููุซุงูุฉ ุฅูู ุชุธููู ุงูุณูุงุก. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูู ุฃุฐูุฑู - ูู ูุชู ุฅูุดุงุก / ุชุญููู ูุนุธู ูุฐุง ุงูุชุธููู ูู ูุจูู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฅุฑุณุงู ุฌููุน ุงูุฅูุฑุงุฑุงุช ุฅูู CD PROJEKT RED. </font><font style="vertical-align: inherit;">ุงุฏุนููู ุ ูููููู ุจุนูู ููุชุงุฒ.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก 3. ูุฌูู ุงูุฑูุงูุฉ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู The Witcher 3 ููุงู ุชูุงุตูู ุตุบูุฑุฉ ูููููุง ุบุฑูุจุฉ - ุฅุทูุงู ุงููุงุฑ ุนูู ุงููุฌูู. </font><font style="vertical-align: inherit;">ููู ุงููุซูุฑ ููุงูุชูุงู ุฃููุง ูุง ุชุจุฏู ูู ุงูุฏู ูุงููุจูุฐ DLC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงูููุฏูู ููููู ุฃู ุชุฑู ููู ุชุจุฏู:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/IWtutrr6ilE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูุฑู ููู ุชูููุง ูู ุงูุญุตูู ุนูู ูุฐุง ุงูุชุฃุซูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุชุฑูู ุ ูุฅู ุฌุณู ูุฌู ุงูุฑูุงูุฉ ุฃูุซุฑ ุฅุดุฑุงููุง ูู ุงูุฐูู. </font><font style="vertical-align: inherit;">ูุฐู ุฎุงุตูุฉ ูููุฉ ุณูุณุชุฎุฏููุง ูุงุญููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃุฌูุฏุชูุง ูุฃูููุฉ ุชูุงููุง: ุฃููุงู ุณุฃุตู ุงูุฎุตุงุฆุต ุงูุนุงูุฉ ุ ุซู ุณุฃุชุญุฏุซ ุนู ุงูููุถูุนุงุช ุงููุชุนููุฉ ุจุงูููุฏุณุฉ ุ ููู ุงูููุงูุฉ ุณููุชูู ุฅูู ุชุธููู ุงูุจูุณู ุ ุญูุซ ุชุญุฏุซ ุงูุฃุดูุงุก ุงูุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู.</font></font><br>
<cut></cut><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. ูุธุฑุฉ ุนุงูุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุตู ุจุฅูุฌุงุฒ ูุง ูุญุฏุซ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุฑุณู ูุฌูู ุงูุฑูุงูุฉ ูู ููุฑ ุงุณุชุจุงูู ุ ูุจุงุดุฑุฉ ุจุนุฏ ูุจุฉ ุงูุณูุงุก ูุงูุณูุงุก ูุงูููุฑ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c5/a71/7db/1c5a717dbd047aeaa183ce2a25e394d9.png"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DrawIndexed (720) - ูุจุฉ ุงูุณูุงุก ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DrawIndexed (2160) - ุงููุฌุงู ููุณูุงุก / ุงูููุฑ ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DrawIndexed (36) - ุบูุฑ ุฐู ุตูุฉ ุ ูุจุฏู ููุฃูู ููุงุฒู ูุงูุณุฏุงุฏ ุงูุดูุณ (ุ) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DrawIndexed (12) - ูุฌู ุงูุฑูุงูุฉ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DrawIndexInstanced (1116 ุ 1) - ุงูุณุญุจ ุงูุฑูููุฉ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุซู </font><font style="vertical-align: inherit;">ุงูุณุญุจ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฑูููุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุชู ุฑุณู ูู ูุฌู ุฅุทูุงู ูุงุฑ ูุฑุชูู ุนูู ุงูุชูุงูู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/baa/27d/e4c/baa27de4ced017770e9c89a01e136abd.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุฅุฌุฑุงุก ุงูููุงููุฉ ุงูุฃููู</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cc8/78b/cef/cc878bcef6dcc4b58e85f3a62f90be31.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฌุฉ ููุงููุฉ ุงูุณุญุจ ุงูุฃูู</font></font></i><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ee/33f/f6c/0ee33ff6cef3d11ca7cd460f21dc2b3f.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฌุฉ ุงุณุชุฏุนุงุก ุงูุณุญุจ ุงูุซุงูู</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููุง ูู ุงูุญุงู ูู ุงูุนุฏูุฏ ูู ุนูุงุตุฑ ุงูุชูุฑูุฑ ุงูุงุณุชุจุงูู ููุฐู ุงููุนุจุฉ ุ ูุชู ุงุณุชุฎุฏุงู ุญุงูุฉ ุงูุฎูุท ุงูุชุงููุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/263/aec/b8a/263aecb8afa21e2b79b0333bcde55011.jpg"></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. ุงูููุฏุณุฉ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ูุชุนูู ุจุงูููุฏุณุฉ ุ ูุฅู ุฃูู ุดูุก ูุฌุจ ุฐูุฑู ูู ุฃู ูู ูุฌู ุฑูุงูุฉ ูุชู ุชูุซููู ุจุฑุจุงุน ุฑููุน ูุน ุฃุบุทูุฉ: 4 ุฑุคูุณ ุ 6 ูุคุดุฑุงุช. </font><font style="vertical-align: inherit;">ูุฐุง ูู ุฃุจุณุท ุฑุจุงุนูุฉ ููููุฉ.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82c/fbf/96b/82cfbf96bbc652ea5ac32a5e568434a3.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุฑูุจ ุฑุจุงุนู ููุฌู ุงูุฑูุงูุฉ. </font></font></i><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/83c/59e/3f7/83c59e3f7e685d6e7f2080e88ff5be25.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุฑุจ ูู ุงูุฑุจุงุนู ุงูุชูุฑูุจู ููุฌู ุงูุฑูุงูุฉ. </font><font style="vertical-align: inherit;">ููููู ุฃู ุชุฑู ุนุฑุถ ุงูุฅุทุงุฑ ุงูุณููู ูุฎุท ูุดูุฑ ุฅูู ูุซูุซูู. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุชุธุฑ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ููุฌุฏ </font><i><font style="vertical-align: inherit;">DrawIndexed (12)</font></i><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">ูู ูุฐุง ูุนูู ุฃููุง ูุฑุณู ูุฌูุชูู ููุฑูุงูุฉ ูู ููุณ ุงูููุชุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนู.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d55/b39/bb2/d55b39bb2d2ea5908f4576d6396455fa.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ูุฐุง ุงูุฅุทุงุฑ ุ ููุน ุฃุญุฏ ูุฌูู ุงูุฑูุงูุฉ ุฎุงุฑุฌ ูุฑู ุงูุฑุคูุฉ ุชูุงููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฑูุฒ ุงููุฌูุน ุงูุฎุงุต ุจุธู ุชุธููู ุงูุฑุฃุณ:</font></font><br>
<br>
<pre><code class="cpp hljs"> vs_5_0  <font></font>
    dcl_globalFlags refactoringAllowed  <font></font>
    dcl_constantbuffer cb1[<span class="hljs-number">9</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb2[<span class="hljs-number">3</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb12[<span class="hljs-number">193</span>], immediateIndexed  <font></font>
    dcl_input v0.xyz  <font></font>
    dcl_input v1.xyzw  <font></font>
    dcl_input v2.xy  <font></font>
    dcl_input v3.xy  <font></font>
    dcl_input v4.xy  <font></font>
    dcl_input v5.xyz  <font></font>
    dcl_input v6.x  <font></font>
    dcl_input v7.x  <font></font>
    dcl_output o0.xyzw  <font></font>
    dcl_output o1.xyzw  <font></font>
    dcl_output o2.xy  <font></font>
    dcl_output o3.xyzw  <font></font>
    dcl_output_siv o4.xyzw, position  <font></font>
    dcl_temps <span class="hljs-number">5</span>  
   <span class="hljs-number">0</span>: mov r0.xyz, v0.xyzx  
   <span class="hljs-number">1</span>: mov r0.w, l(<span class="hljs-number">1.000000</span>)  
   <span class="hljs-number">2</span>: dp4 r1.x, r0.xyzw, cb2[<span class="hljs-number">0</span>].xyzw  
   <span class="hljs-number">3</span>: dp4 r1.y, r0.xyzw, cb2[<span class="hljs-number">1</span>].xyzw  
   <span class="hljs-number">4</span>: dp4 r1.z, r0.xyzw, cb2[<span class="hljs-number">2</span>].xyzw  
   <span class="hljs-number">5</span>: add r0.x, v2.x, v2.y  
   <span class="hljs-number">6</span>: add r0.y, -v2.y, v2.x  
   <span class="hljs-number">7</span>: add r2.xyz, -r1.zxyz, cb1[<span class="hljs-number">8</span>].zxyz  
   <span class="hljs-number">8</span>: dp3 r0.z, r2.xyzx, r2.xyzx  
   <span class="hljs-number">9</span>: rsq r0.z, r0.z  
  <span class="hljs-number">10</span>: mul r2.xyz, r0.zzzz, r2.xyzx  
  <span class="hljs-number">11</span>: dp3 r0.z, v5.xyzx, v5.xyzx  
  <span class="hljs-number">12</span>: rsq r0.z, r0.z  
  <span class="hljs-number">13</span>: mul r3.xyz, r0.zzzz, v5.xyzx  
  <span class="hljs-number">14</span>: mul r4.xyz, r2.xyzx, r3.yzxy  
  <span class="hljs-number">15</span>: mad r2.xyz, r2.zxyz, r3.zxyz, -r4.xyzx  
  <span class="hljs-number">16</span>: dp3 r0.z, r2.xyzx, r2.xyzx  
  <span class="hljs-number">17</span>: rsq r0.z, r0.z  
  <span class="hljs-number">18</span>: mul r2.xyz, r0.zzzz, r2.xyzx  
  <span class="hljs-number">19</span>: mad r0.z, v7.x, v6.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">20</span>: mul r3.xyz, r0.zzzz, r3.xyzx  
  <span class="hljs-number">21</span>: mul r3.xyz, r3.xyzx, v3.xxxx  
  <span class="hljs-number">22</span>: mul r2.xyz, r2.xyzx, v3.yyyy  
  <span class="hljs-number">23</span>: mad r0.xzw, r3.xxyz, r0.xxxx, r1.xxyz  
  <span class="hljs-number">24</span>: mad r0.xyz, r2.xyzx, r0.yyyy, r0.xzwx  
  <span class="hljs-number">25</span>: mov r0.w, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">26</span>: dp4 o4.x, r0.xyzw, cb1[<span class="hljs-number">0</span>].xyzw  
  <span class="hljs-number">27</span>: dp4 o4.y, r0.xyzw, cb1[<span class="hljs-number">1</span>].xyzw  
  <span class="hljs-number">28</span>: dp4 o4.z, r0.xyzw, cb1[<span class="hljs-number">2</span>].xyzw  
  <span class="hljs-number">29</span>: dp4 o4.w, r0.xyzw, cb1[<span class="hljs-number">3</span>].xyzw  
  <span class="hljs-number">30</span>: add r0.xyz, r0.xyzx, -cb12[<span class="hljs-number">0</span>].xyzx  
  <span class="hljs-number">31</span>: dp3 r0.w, r0.xyzx, r0.xyzx  
  <span class="hljs-number">32</span>: <span class="hljs-built_in">sqrt</span> r0.w, r0.w  
  <span class="hljs-number">33</span>: div r0.xyz, r0.xyzx, r0.wwww  
  <span class="hljs-number">34</span>: add r0.w, r0.w, -cb12[<span class="hljs-number">22</span>].z  
  <span class="hljs-number">35</span>: max r0.w, r0.w, l(<span class="hljs-number">0</span>)  
  <span class="hljs-number">36</span>: min r0.w, r0.w, cb12[<span class="hljs-number">42</span>].z  
  <span class="hljs-number">37</span>: dp3 r0.x, cb12[<span class="hljs-number">38</span>].xyzx, r0.xyzx  
  <span class="hljs-number">38</span>: mul r0.y, <span class="hljs-built_in">abs</span>(r0.x), <span class="hljs-built_in">abs</span>(r0.x)  
  <span class="hljs-number">39</span>: mad_sat r1.x, r0.w, l(<span class="hljs-number">0.002000</span>), l(<span class="hljs-number">-0.300000</span>)  
  <span class="hljs-number">40</span>: mul r0.y, r0.y, r1.x  
  <span class="hljs-number">41</span>: lt r1.x, l(<span class="hljs-number">0</span>), r0.x  
  <span class="hljs-number">42</span>: movc r1.yzw, r1.xxxx, cb12[<span class="hljs-number">39</span>].xxyz, cb12[<span class="hljs-number">41</span>].xxyz  
  <span class="hljs-number">43</span>: add r1.yzw, r1.yyzw, -cb12[<span class="hljs-number">40</span>].xxyz  
  <span class="hljs-number">44</span>: mad r1.yzw, r0.yyyy, r1.yyzw, cb12[<span class="hljs-number">40</span>].xxyz  
  <span class="hljs-number">45</span>: movc r2.xyz, r1.xxxx, cb12[<span class="hljs-number">45</span>].xyzx, cb12[<span class="hljs-number">47</span>].xyzx  
  <span class="hljs-number">46</span>: add r2.xyz, r2.xyzx, -cb12[<span class="hljs-number">46</span>].xyzx  
  <span class="hljs-number">47</span>: mad o0.xyz, r0.yyyy, r2.xyzx, cb12[<span class="hljs-number">46</span>].xyzx  
  <span class="hljs-number">48</span>: ge r0.y, r0.w, cb12[<span class="hljs-number">48</span>].y  
  <span class="hljs-number">49</span>: if_nz r0.y  
  <span class="hljs-number">50</span>:  mad r0.y, r0.z, cb12[<span class="hljs-number">22</span>].z, cb12[<span class="hljs-number">0</span>].z  
  <span class="hljs-number">51</span>:  mul r0.z, r0.w, r0.z  
  <span class="hljs-number">52</span>:  mul r0.z, r0.z, l(<span class="hljs-number">0.062500</span>)  
  <span class="hljs-number">53</span>:  mul r1.x, r0.w, cb12[<span class="hljs-number">43</span>].x  
  <span class="hljs-number">54</span>:  mul r1.x, r1.x, l(<span class="hljs-number">0.062500</span>)  
  <span class="hljs-number">55</span>:  add r0.x, r0.x, cb12[<span class="hljs-number">42</span>].x  
  <span class="hljs-number">56</span>:  add r2.x, cb12[<span class="hljs-number">42</span>].x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">57</span>:  div_sat r0.x, r0.x, r2.x  
  <span class="hljs-number">58</span>:  add r2.x, -cb12[<span class="hljs-number">43</span>].z, cb12[<span class="hljs-number">43</span>].y  
  <span class="hljs-number">59</span>:  mad r0.x, r0.x, r2.x, cb12[<span class="hljs-number">43</span>].z  
  <span class="hljs-number">60</span>:  add r0.y, r0.y, cb12[<span class="hljs-number">42</span>].y  
  <span class="hljs-number">61</span>:  mul r2.x, r0.x, r0.y  
  <span class="hljs-number">62</span>:  mul r0.z, r0.x, r0.z  
  <span class="hljs-number">63</span>:  mad r3.xyzw, r0.zzzz, l(<span class="hljs-number">16.000000</span>, <span class="hljs-number">15.000000</span>, <span class="hljs-number">14.000000</span>, <span class="hljs-number">13.000000</span>), r2.xxxx  
  <span class="hljs-number">64</span>:  max r3.xyzw, r3.xyzw, l(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  
  <span class="hljs-number">65</span>:  add r3.xyzw, r3.xyzw, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">66</span>:  div_sat r3.xyzw, r1.xxxx, r3.xyzw  
  <span class="hljs-number">67</span>:  add r3.xyzw, -r3.xyzw, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">68</span>:  mul r2.y, r3.y, r3.x  
  <span class="hljs-number">69</span>:  mul r2.y, r3.z, r2.y  
  <span class="hljs-number">70</span>:  mul r2.y, r3.w, r2.y  
  <span class="hljs-number">71</span>:  mad r3.xyzw, r0.zzzz, l(<span class="hljs-number">12.000000</span>, <span class="hljs-number">11.000000</span>, <span class="hljs-number">10.000000</span>, <span class="hljs-number">9.000000</span>), r2.xxxx  
  <span class="hljs-number">72</span>:  max r3.xyzw, r3.xyzw, l(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  
  <span class="hljs-number">73</span>:  add r3.xyzw, r3.xyzw, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">74</span>:  div_sat r3.xyzw, r1.xxxx, r3.xyzw  
  <span class="hljs-number">75</span>:  add r3.xyzw, -r3.xyzw, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">76</span>:  mul r2.y, r2.y, r3.x  
  <span class="hljs-number">77</span>:  mul r2.y, r3.y, r2.y  
  <span class="hljs-number">78</span>:  mul r2.y, r3.z, r2.y  
  <span class="hljs-number">79</span>:  mul r2.y, r3.w, r2.y  
  <span class="hljs-number">80</span>:  mad r3.xyzw, r0.zzzz, l(<span class="hljs-number">8.000000</span>, <span class="hljs-number">7.000000</span>, <span class="hljs-number">6.000000</span>, <span class="hljs-number">5.000000</span>), r2.xxxx  
  <span class="hljs-number">81</span>:  max r3.xyzw, r3.xyzw, l(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  
  <span class="hljs-number">82</span>:  add r3.xyzw, r3.xyzw, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">83</span>:  div_sat r3.xyzw, r1.xxxx, r3.xyzw  
  <span class="hljs-number">84</span>:  add r3.xyzw, -r3.xyzw, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">85</span>:  mul r2.y, r2.y, r3.x  
  <span class="hljs-number">86</span>:  mul r2.y, r3.y, r2.y  
  <span class="hljs-number">87</span>:  mul r2.y, r3.z, r2.y  
  <span class="hljs-number">88</span>:  mul r2.y, r3.w, r2.y  
  <span class="hljs-number">89</span>:  mad r2.zw, r0.zzzz, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">4.000000</span>, <span class="hljs-number">3.000000</span>), r2.xxxx  
  <span class="hljs-number">90</span>:  max r2.zw, r2.zzzw, l(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)  
  <span class="hljs-number">91</span>:  add r2.zw, r2.zzzw, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">92</span>:  div_sat r2.zw, r1.xxxx, r2.zzzw  
  <span class="hljs-number">93</span>:  add r2.zw, -r2.zzzw, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">1.000000</span>, <span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">94</span>:  mul r2.y, r2.z, r2.y  
  <span class="hljs-number">95</span>:  mul r2.y, r2.w, r2.y  
  <span class="hljs-number">96</span>:  mad r2.x, r0.z, l(<span class="hljs-number">2.000000</span>), r2.x  
  <span class="hljs-number">97</span>:  max r2.x, r2.x, l(<span class="hljs-number">0</span>)  
  <span class="hljs-number">98</span>:  add r2.x, r2.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">99</span>:  div_sat r2.x, r1.x, r2.x  
  <span class="hljs-number">100</span>:  add r2.x, -r2.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">101</span>:  mul r2.x, r2.x, r2.y  
  <span class="hljs-number">102</span>:  mad r0.x, r0.y, r0.x, r0.z  
  <span class="hljs-number">103</span>:  max r0.x, r0.x, l(<span class="hljs-number">0</span>)  
  <span class="hljs-number">104</span>:  add r0.x, r0.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">105</span>:  div_sat r0.x, r1.x, r0.x  
  <span class="hljs-number">106</span>:  add r0.x, -r0.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">107</span>:  mad r0.x, -r2.x, r0.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">108</span>:  add r0.y, r0.w, -cb12[<span class="hljs-number">48</span>].y  
  <span class="hljs-number">109</span>:  mul_sat r0.y, r0.y, cb12[<span class="hljs-number">48</span>].z  
  <span class="hljs-number">110</span>: <span class="hljs-keyword">else</span>  
  <span class="hljs-number">111</span>:  mov r0.xy, l(<span class="hljs-number">1.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>)  
  <span class="hljs-number">112</span>: endif  
  <span class="hljs-number">113</span>: <span class="hljs-built_in">log</span> r0.x, r0.x  
  <span class="hljs-number">114</span>: mul r0.z, r0.x, cb12[<span class="hljs-number">42</span>].w  
  <span class="hljs-number">115</span>: <span class="hljs-built_in">exp</span> r0.z, r0.z  
  <span class="hljs-number">116</span>: mul r0.z, r0.z, r0.y  
  <span class="hljs-number">117</span>: mul r0.x, r0.x, cb12[<span class="hljs-number">48</span>].x  
  <span class="hljs-number">118</span>: <span class="hljs-built_in">exp</span> r0.x, r0.x  
  <span class="hljs-number">119</span>: mul o0.w, r0.x, r0.y  
  <span class="hljs-number">120</span>: mad_sat r0.xy, r0.zzzz, cb12[<span class="hljs-number">189</span>].xzxx, cb12[<span class="hljs-number">189</span>].ywyy  
  <span class="hljs-number">121</span>: add r2.xyz, -r1.yzwy, cb12[<span class="hljs-number">188</span>].xyzx  
  <span class="hljs-number">122</span>: mad r2.xyz, r0.xxxx, r2.xyzx, r1.yzwy  
  <span class="hljs-number">123</span>: add r0.x, cb12[<span class="hljs-number">188</span>].w, l(<span class="hljs-number">-1.000000</span>)  
  <span class="hljs-number">124</span>: mad r0.x, r0.y, r0.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">125</span>: mul_sat r2.w, r0.x, r0.z  
  <span class="hljs-number">126</span>: lt r0.x, l(<span class="hljs-number">0</span>), cb12[<span class="hljs-number">192</span>].x  
  <span class="hljs-number">127</span>: if_nz r0.x  
  <span class="hljs-number">128</span>:  mad_sat r0.xy, r0.zzzz, cb12[<span class="hljs-number">191</span>].xzxx, cb12[<span class="hljs-number">191</span>].ywyy  
  <span class="hljs-number">129</span>:  add r3.xyz, -r1.yzwy, cb12[<span class="hljs-number">190</span>].xyzx  
  <span class="hljs-number">130</span>:  mad r1.xyz, r0.xxxx, r3.xyzx, r1.yzwy  
  <span class="hljs-number">131</span>:  add r0.x, cb12[<span class="hljs-number">190</span>].w, l(<span class="hljs-number">-1.000000</span>)  
  <span class="hljs-number">132</span>:  mad r0.x, r0.y, r0.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">133</span>:  mul_sat r1.w, r0.x, r0.z  
  <span class="hljs-number">134</span>:  add r0.xyzw, -r2.xyzw, r1.xyzw  
  <span class="hljs-number">135</span>:  mad o1.xyzw, cb12[<span class="hljs-number">192</span>].xxxx, r0.xyzw, r2.xyzw  
  <span class="hljs-number">136</span>: <span class="hljs-keyword">else</span>  
  <span class="hljs-number">137</span>:  mov o1.xyzw, r2.xyzw  
  <span class="hljs-number">138</span>: endif  
  <span class="hljs-number">139</span>: mov o3.xyzw, v1.xyzw  
  <span class="hljs-number">140</span>: mov o2.xy, v4.yxyy  
  <span class="hljs-number">141</span>: ret</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุ ูููู ูุญุณุงุจ ุงูุถุจุงุจ ุฃู ูุฌุฐุจ ุงูุงูุชุจุงู ุนูู ุงูููุฑ (ุงูุณุทูุฑ 30-138). ุญุณุงุจ ููุฉ ุงูุถุจุงุจ ููุทูู ูุฃุณุจุงุจ ุงูุฃุฏุงุก. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญู ูุณูุง ุจุญุงุฌุฉ ุฅูู ูุซู ูุฐู ุงูุฏูุฉ ูู ุงูุถุจุงุจ - ุนุงุฏุฉ ูุง ุชุทูุฑ ุงูููุงุฒู ููู ุฑุฃุณ Geralt ููุง ุชุตู ุฅูู ุงูุฃูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุชุฎุฒูู ูุนููุงุช ุงูุบูุงู ุงูุฌูู (rgb = color ุ a = ุชุฃุซูุฑ) ูู o0.xyzw ุ ููุนููุงุช ุงูุถุจุงุจ ูู o1.xyzw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o2.xy (ุงูุณุทุฑ 140) ุนุจุงุฑุฉ ุนู ุชูุณูุฑุฏ ููุท. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
o3.xyzw (ุงูุณุทุฑ 139) ุบูุฑ ุฐู ุตูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนูุง ูููู ุจุถุน ูููุงุช ุญูู ุญุณุงุจ ูุฑูุฒ ูู ุงูุนุงูู. ุชุธููู Vertex ูุคุฏู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุฉ ุงูุฅุนูุงูุงุช</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ุฃููุงู ููุจู ูู ุดูุก ุ ุชุฃุชู ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ ูููุญุงุช ุงูุฅุนูุงูุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุฑุฃุณ - ุฏุนูุง ูููู ูุธุฑุฉ ุนูููุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุจูุงูุงุช ุงูุฃููู ูู ุงููุธููุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/99a/470/7d5/99a4707d5f914222e7d55e2435f5692f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ุฐูุฑูุง ุฃุนูุงู ุ ูุฏููุง ููุง 2 ุฑุคูุณ ุฑุจุงุนูุฉ: 8 ุฑุคูุณ ุ 12 ูุคุดุฑูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ููุงุฐุง ูู ุงููููู ููุณู ููู ุฑุจุงุนูุฉุ </font><font style="vertical-align: inherit;">ุจุณูุท ููุบุงูุฉ - ูุฐุง ูู ูููู ูุฑูุฒ ุงูุฑุจุงุนู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุงูุฉ ุนูู ุฐูู ุ ูููู ููู ููุฉ ุฅุฒุงุญุฉ ูู ุงููุฑูุฒ ุฅูู ุญุงูุฉ ุงูุฑุจุงุนู:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cde/fdf/7e0/cdefdf7e0e5cfe91c4b9d20257b529b4.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุนูู ุฃู ูู ูุฌู ุฅุทูุงู ูุงุฑ ูู ุญุฌู (400 ุ 3) ูุญุฏุฉ ูู ุงููุถุงุก ุงูุนุงููู. </font><font style="vertical-align: inherit;">(ุนูู ุงููุณุชูู XY ุ ูู Witcher 3 ุ ูุชู ุชูุฌูู ุงููุญูุฑ Z ูุฃุนูู) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุนูุตุฑ ุงูุฃุฎูุฑ ุงูุฐู ูุญุชููู ูู ููุฉ ูู ูุงูู ุงุชุฌุงู ุงููุญุฏุฉ ูู ุงููุถุงุก ุงูุนุงููู ุงูุฐู ูุชุญูู ูู ุญุฑูุฉ ูุฌู ุงูุฑูุงูุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/416/06d/71a/41606d71a99d2f751f8b1d5a609b6c96.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธุฑูุง ูุฃู ุงูุจูุงูุงุช ุชุฃุชู ูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ููู ุงูุตุนุจ ููู ููููุฉ ุญุณุงุจูุง. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ุฏุนูุง ููุชูู ุฅูู ุฑูุฒ ููุญุฉ ุงูุฅุนูุงูุงุช. </font><font style="vertical-align: inherit;">ุงูููุฑุฉ ุจุณูุทุฉ ููุบุงูุฉ - ุฃููุงู ุชุญุตู ุนูู ูุงูู ูุญุฏุฉ ูู ูุฑูุฒ ุงูุฑุจุงุนู ุฅูู ุงููุงููุฑุง:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-number">7</span>: add r2.xyz, -r1.zxyz, cb1[<span class="hljs-number">8</span>].zxyz  
   <span class="hljs-number">8</span>: dp3 r0.z, r2.xyzx, r2.xyzx  
   <span class="hljs-number">9</span>: rsq r0.z, r0.z  
  <span class="hljs-number">10</span>: mul r2.xyz, r0.zzzz, r2.xyzx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุซู ูุญุตู ุนูู ูุชุฌู ุธูุงู ูุงุญุฏ ูุชุญูู ูู ุญุฑูุฉ ูุฌู ุงูุฑูุงูุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุธุฑ ุฅูู ุฃู ูุฐุง ุงููุชุฌู ุชู ุชุทุจูุนู ุจุงููุนู ุนูู ุฌุงูุจ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูุฅู ูุฐุง ุงูุชุทุจูุน ุบูุฑ ุถุฑูุฑู.</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">11</span>: dp3 r0.z, v5.xyzx, v5.xyzx  
  <span class="hljs-number">12</span>: rsq r0.z, r0.z  
  <span class="hljs-number">13</span>: mul r3.xyz, r0.zzzz, v5.xyzx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ูุงู ููุงู ูุชุฌูุงู ุ ูุณูุชู ุงุณุชุฎุฏุงู ููุชุฌ ูุชุฌู ูุชุญุฏูุฏ ูุชุฌู ุงูููุงุณ ุงูุซูุงุฆู ุงููุชุนุงูุฏ ูุน ููุง ุงููุชุฌููู ุงููุงุฏููู.</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">14</span>: mul r4.xyz, r2.xyzx, r3.yzxy  
  <span class="hljs-number">15</span>: mad r2.xyz, r2.zxyz, r3.zxyz, -r4.xyzx  
  <span class="hljs-number">16</span>: dp3 r0.z, r2.xyzx, r2.xyzx  
  <span class="hljs-number">17</span>: rsq r0.z, r0.z  
  <span class="hljs-number">18</span>: mul r2.xyz, r0.zzzz, r2.xyzx</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุขู ูุฏููุง ุชุทุจูุน </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุณ ุงูููุงุณ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (r3.xyz) ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bitangent</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (r2.xyz). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฏุนูุง ููุฏู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xsize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ysize ุงููุทุงุจููู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุนูุตุฑ ุงููุงุฑุฏ TEXCOORD1 ุ ุนูู ุณุจูู ุงููุซุงู (-200 ุ 1.50). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชู ุงูุญุณุงุจ ุงูููุงุฆู ููููุถุน ูู ุงููุถุงุก ุงูุนุงููู ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">19</span>: mad r0.z, v7.x, v6.x, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">20</span>: mul r3.xyz, r0.zzzz, r3.xyzx  
  <span class="hljs-number">21</span>: mul r3.xyz, r3.xyzx, v3.xxxx  
  <span class="hljs-number">22</span>: mul r2.xyz, r2.xyzx, v3.yyyy  
  <span class="hljs-number">23</span>: mad r0.xzw, r3.xxyz, r0.xxxx, r1.xxyz  
  <span class="hljs-number">24</span>: mad r0.xyz, r2.xyzx, r0.yyyy, r0.xzwx  
  <span class="hljs-number">25</span>: mov r0.w, l(<span class="hljs-number">1.000000</span>) </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุงููุธุฑ ุฅูู ุฃู r0.x ู r0.y ู r0.z ุชุณุงูู 1.0 ุ ูุชู ุชุจุณูุท ุงูุญุณุงุจ ุงูููุงุฆู: </font></font><br>
<br>
<code>worldSpacePosition = quadCenter + tangent * Xsize + bitangent * Ysize</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฌุฒุก ุงูุฃุฎูุฑ ูู ุถุฑุจ ุจุณูุท ูููุถุน ูู ุงููุถุงุก ุงูุนุงููู ุจูุงุณุทุฉ ูุตูููุฉ ุนุฑุถ ุงูุฅุณูุงุท ููุญุตูู ุนูู SV_Position:</font></font><br>
<br>
<pre><code class="cpp hljs">  <span class="hljs-number">26</span>: dp4 o4.x, r0.xyzw, cb1[<span class="hljs-number">0</span>].xyzw  
  <span class="hljs-number">27</span>: dp4 o4.y, r0.xyzw, cb1[<span class="hljs-number">1</span>].xyzw  
  <span class="hljs-number">28</span>: dp4 o4.z, r0.xyzw, cb1[<span class="hljs-number">2</span>].xyzw  
  <span class="hljs-number">29</span>: dp4 o4.w, r0.xyzw, cb1[<span class="hljs-number">3</span>].xyzw  </code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ุจููุณู ุดุงุฏุฑ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูู ููุถุญ ูู ูุณู ุงููุธุฑุฉ ุงูุนุงูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ุญุงูุฉ ุงููุฒุฌ ุงูุชุงููุฉ: </font><font style="vertical-align: inherit;">
ุญูุซ </font><i><font style="vertical-align: inherit;">SrcColor</font></i><font style="vertical-align: inherit;"> ู </font><i><font style="vertical-align: inherit;">SrcAlpha</font></i><font style="vertical-align: inherit;"> ููุง ุงูููููุงู .rgb ู .a ูู ุชุธููู ุงูุจูุณู ุ </font><i><font style="vertical-align: inherit;">ุนูู ุงูุชูุงูู</font></i><font style="vertical-align: inherit;"> ุ ู </font><i><font style="vertical-align: inherit;">DestColor ูู</font></i><font style="vertical-align: inherit;"> ููู </font><i><font style="vertical-align: inherit;">.rgb</font></i><font style="vertical-align: inherit;"> ุญุงูููุง ูู rendertarget. </font><font style="vertical-align: inherit;">
ุงููุคุดุฑ ุงูุฑุฆูุณู ุงูุฐู ูุชุญูู ูู ุงูุดูุงููุฉ ูู </font><i><font style="vertical-align: inherit;">SrcAlpha</font></i><font style="vertical-align: inherit;"> . ูุญุณุจูุง ุงูุนุฏูุฏ ูู ุฃุฌูุฒุฉ ุชุธููู ุงูุฃูุนุงุจ ุงูุงุณุชุจุงููุฉ ุนูู ุฃููุง ุนุชุงูุฉ ูุชุทุจููุง ูู ุงูููุงูุฉ ุนูู ุงููุญู ุงูุชุงูู: </font><font style="vertical-align: inherit;">
ูู ููู ุธู ุงููุฌูู ุงูุณุงูุท ุงุณุชุซูุงุกู. ุจุงุชุจุงุน ูุฐุง ุงูููุท ุ ูุนุชุจุฑ ุซูุงุซ ุญุงูุงุช ุชููู ูููุง </font><i><font style="vertical-align: inherit;">ุงูุนุชุงูุฉ</font></i><font style="vertical-align: inherit;"> 1.0 ู 0.1 ู 0.0.</font></font><br>
<br>
<code>FinalColor = SrcColor * One + DestColor * (1.0 - SrcAlpha) =<br>
FinalColor = SrcColor + DestColor * (1.0 - SrcAlpha)</code><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<code>return float4( color * opacity, opacity )</code><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<code>a) opacity = 1.0<br>
<br>
FinalColor = color * opacity + DestColor * (1.0 - opacity) =<br>
FinalColor = color = SrcColor</code><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/934/711/31c/93471131c99ec7b2249cff6edb698859.jpg"></div><br>
<code>b) opacity = 0.1<br>
<br>
FinalColor = color * opacity + DestColor * (1.0 - opacity) =<br>
FinalColor = 0.1 * color + 0.9 * DestColor</code><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/269/b24/d90/269b24d90592abb5065fba0f2a0aaf9f.jpg"></div><br>
<code>c) opacity = 0.0<br>
<br>
FinalColor = color * opacity + DestColor * (1.0 - opacity) =<br>
FinalColor = DestColor</code><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/191/75e/b6e/19175eb6e6757c04a0a063e75bad96f2.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ ููุฐุง ุงูุชุธููู ูู ุชุตููู ูุงุณุชุฎุฏุงู ุนุชุงูุฉ ูุธููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุชุงูุฉ (x)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงูุชู ุชุชุญูู ูู ุนุชุงูุฉ ุงูุจูุณู ุนูู ุทูู ูุฌู ุงูุชุตููุฑ. ุงูุดุฑุท ุงูุฑุฆูุณู ูู ุฃู ุงูุนุชุงูุฉ ูุฌุจ ุฃู ุชุตู ุฅูู ุงูููู ุงููุตูู ูู ููุงูุฉ ุงููุฌู ("ุฌุณูู") ูุชุชูุงุดู ุจุณูุงุณุฉ ุฅูู 0.0 (ุฅูู "ุฐููู"). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูุฏูุง ูุจุฏุฃ ูู ููู ุฑูุฒ ุงููุฌููุน ูุชุธููู ุงูุจูุณู ุ ูุตุจุญ ูุฐุง ูุงุถุญูุง:</font></font><br>
<br>
<pre><code class="cpp hljs"> ps_5_0  <font></font>
    dcl_globalFlags refactoringAllowed  <font></font>
    dcl_constantbuffer cb0[<span class="hljs-number">10</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb2[<span class="hljs-number">3</span>], immediateIndexed  <font></font>
    dcl_constantbuffer cb4[<span class="hljs-number">2</span>], immediateIndexed  <font></font>
    dcl_input_ps linear v0.xyzw  <font></font>
    dcl_input_ps linear v1.xyzw  <font></font>
    dcl_input_ps linear v2.y  <font></font>
    dcl_input_ps linear v3.w  <font></font>
    dcl_output o0.xyzw  <font></font>
    dcl_temps <span class="hljs-number">4</span>  
   <span class="hljs-number">0</span>: mov_sat r0.x, v2.y  
   <span class="hljs-number">1</span>: ge r0.y, r0.x, l(<span class="hljs-number">0.052579</span>)  
   <span class="hljs-number">2</span>: ge r0.z, l(<span class="hljs-number">0.965679</span>), r0.x  
   <span class="hljs-number">3</span>: <span class="hljs-keyword">and</span> r0.y, r0.z, r0.y  
   <span class="hljs-number">4</span>: if_nz r0.y  
   <span class="hljs-number">5</span>:  ge r0.y, l(<span class="hljs-number">0.878136</span>), r0.x  
   <span class="hljs-number">6</span>:  add r0.z, r0.x, l(<span class="hljs-number">-0.052579</span>)  
   <span class="hljs-number">7</span>:  mul r1.w, r0.z, l(<span class="hljs-number">1.211303</span>)  
   <span class="hljs-number">8</span>:  mov_sat r0.z, r1.w  
   <span class="hljs-number">9</span>:  mad r0.w, r0.z, l(<span class="hljs-number">-2.000000</span>), l(<span class="hljs-number">3.000000</span>)  
  <span class="hljs-number">10</span>:  mul r0.z, r0.z, r0.z  
  <span class="hljs-number">11</span>:  mul r0.z, r0.z, r0.w  
  <span class="hljs-number">12</span>:  mul r2.x, r0.z, l(<span class="hljs-number">0.084642</span>)  
  <span class="hljs-number">13</span>:  mov r1.yz, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.084642</span>, <span class="hljs-number">0.000000</span>)  
  <span class="hljs-number">14</span>:  movc r2.yzw, r0.yyyy, r1.yyzw, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.500000</span>)  
  <span class="hljs-number">15</span>:  <span class="hljs-keyword">not</span> r0.z, r0.y  
  <span class="hljs-number">16</span>:  if_z r0.y  
  <span class="hljs-number">17</span>:   ge r0.y, l(<span class="hljs-number">0.924339</span>), r0.x  
  <span class="hljs-number">18</span>:   add r0.w, r0.x, l(<span class="hljs-number">-0.878136</span>)  
  <span class="hljs-number">19</span>:   mul r1.w, r0.w, l(<span class="hljs-number">21.643608</span>)  
  <span class="hljs-number">20</span>:   mov_sat r0.w, r1.w  
  <span class="hljs-number">21</span>:   mad r3.x, r0.w, l(<span class="hljs-number">-2.000000</span>), l(<span class="hljs-number">3.000000</span>)  
  <span class="hljs-number">22</span>:   mul r0.w, r0.w, r0.w  
  <span class="hljs-number">23</span>:   mul r0.w, r0.w, r3.x  
  <span class="hljs-number">24</span>:   mad r1.x, r0.w, l(<span class="hljs-number">0.889658</span>), l(<span class="hljs-number">0.084642</span>)  
  <span class="hljs-number">25</span>:   mov r1.yz, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.084642</span>, <span class="hljs-number">0.974300</span>, <span class="hljs-number">0.000000</span>)  
  <span class="hljs-number">26</span>:   movc r2.xyzw, r0.yyyy, r1.xyzw, r2.xyzw  
  <span class="hljs-number">27</span>:  <span class="hljs-keyword">else</span>  
  <span class="hljs-number">28</span>:   mov r2.y, l(<span class="hljs-number">0</span>)  
  <span class="hljs-number">29</span>:   mov r0.y, l(<span class="hljs-number">-1</span>)  
  <span class="hljs-number">30</span>:  endif  
  <span class="hljs-number">31</span>:  <span class="hljs-keyword">not</span> r0.w, r0.y  
  <span class="hljs-number">32</span>:  <span class="hljs-keyword">and</span> r0.z, r0.w, r0.z  
  <span class="hljs-number">33</span>:  if_nz r0.z  
  <span class="hljs-number">34</span>:   ge r0.y, r0.x, l(<span class="hljs-number">0.924339</span>)  
  <span class="hljs-number">35</span>:   add r0.x, r0.x, l(<span class="hljs-number">-0.924339</span>)  
  <span class="hljs-number">36</span>:   mul r1.w, r0.x, l(<span class="hljs-number">24.189651</span>)  
  <span class="hljs-number">37</span>:   mov_sat r0.x, r1.w  
  <span class="hljs-number">38</span>:   mad r0.z, r0.x, l(<span class="hljs-number">-2.000000</span>), l(<span class="hljs-number">3.000000</span>)  
  <span class="hljs-number">39</span>:   mul r0.x, r0.x, r0.x  
  <span class="hljs-number">40</span>:   mul r0.x, r0.x, r0.z  
  <span class="hljs-number">41</span>:   mad r1.x, r0.x, l(<span class="hljs-number">-0.974300</span>), l(<span class="hljs-number">0.974300</span>)  
  <span class="hljs-number">42</span>:   mov r1.yz, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.974300</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>)  
  <span class="hljs-number">43</span>:   movc r2.xyzw, r0.yyyy, r1.xyzw, r2.xyzw  
  <span class="hljs-number">44</span>:  endif  
  <span class="hljs-number">45</span>: <span class="hljs-keyword">else</span>  
  <span class="hljs-number">46</span>:  mov r2.yzw, l(<span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.000000</span>, <span class="hljs-number">0.500000</span>)  
  <span class="hljs-number">47</span>:  mov r0.y, l(<span class="hljs-number">0</span>)  
  <span class="hljs-number">48</span>: endif  
  <span class="hljs-number">49</span>: mov_sat r2.w, r2.w  
  <span class="hljs-number">50</span>: mad r0.x, r2.w, l(<span class="hljs-number">-2.000000</span>), l(<span class="hljs-number">3.000000</span>)  
  <span class="hljs-number">51</span>: mul r0.z, r2.w, r2.w  
  <span class="hljs-number">52</span>: mul r0.x, r0.z, r0.x  
  <span class="hljs-number">53</span>: add r0.z, -r2.y, r2.z  
  <span class="hljs-number">54</span>: mad r0.x, r0.x, r0.z, r2.y  
  <span class="hljs-number">55</span>: movc r0.x, r0.y, r2.x, r0.x  
  <span class="hljs-number">56</span>: mad r0.y, cb4[<span class="hljs-number">1</span>].x, -cb0[<span class="hljs-number">9</span>].w, l(<span class="hljs-number">1.000000</span>)  
  <span class="hljs-number">57</span>: mul_sat r0.y, r0.y, v3.w  
  <span class="hljs-number">58</span>: mul r0.x, r0.y, r0.x  
  <span class="hljs-number">59</span>: mul r0.yzw, cb2[<span class="hljs-number">2</span>].xxyz, cb4[<span class="hljs-number">0</span>].xxxx  
  <span class="hljs-number">60</span>: mul r0.x, r0.x, cb2[<span class="hljs-number">2</span>].w  
  <span class="hljs-number">61</span>: dp3 r1.x, l(<span class="hljs-number">0.333000</span>, <span class="hljs-number">0.555000</span>, <span class="hljs-number">0.222000</span>, <span class="hljs-number">0.000000</span>), r0.yzwy  
  <span class="hljs-number">62</span>: mad r1.xyz, r1.xxxx, v0.xyzx, -r0.yzwy  
  <span class="hljs-number">63</span>: mad r0.yzw, v0.wwww, r1.xxyz, r0.yyzw  
  <span class="hljs-number">64</span>: add r1.xyz, -r0.yzwy, v1.xyzx  
  <span class="hljs-number">65</span>: mad r0.yzw, v1.wwww, r1.xxyz, r0.yyzw  
  <span class="hljs-number">66</span>: mul o0.xyz, r0.xxxx, r0.yzwy  
  <span class="hljs-number">67</span>: mov o0.w, r0.x  
  <span class="hljs-number">68</span>: ret</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุจุดูู ุนุงู ุ ุงูุชุธููู ุฃูุซุฑ ุชุนููุฏูุง ููููุงู ููุงู ูู ุงูุตุนุจ ุจุงููุณุจุฉ ูู ูุนุฑูุฉ ูุง ูุฌุฑู ููู. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูู ุฃูู ุฌุงุกุช ุฌููุน ุงูููู ูุซู 1.211303 ู 21.643608 ู 24.189651ุ </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฅุฐุง ููุง ูุชุญุฏุซ ุนู ุฏุงูุฉ ุงูุชุนุชูู ุ ูุฅููุง ุจุญุงุฌุฉ ุฅูู ูููุฉ ุฅุฏุฎุงู ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฃูุฑ ุจุณูุท ููุบุงูุฉ - texcoord ูู ุงููุทุงู ูู [0ุ1] (ุงูุณุทุฑ 0) ุณูููู ูููุฏูุง ููุง ุ ุญุชู ูุชููู ูู ุชุทุจูู ุงููุธููุฉ ุนูู ุทูู ุงูููุฒู ุจุงููุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชุญุชูู ูุธููุฉ ุงูุชุนุชูู ุนูู ุซูุงุซุฉ ุฃุฌุฒุงุก / ููุงุตู ูุญุฏุฏุฉ ุจูุงุณุทุฉ ุฃุฑุจุน ููุงุท ุชุญูู:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-comment">// current status: no idea how these are generated  </span>
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> controlPoint0 = <span class="hljs-number">0.052579</span>;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> controlPoint1 = <span class="hljs-number">0.878136</span>;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> controlPoint2 = <span class="hljs-number">0.924339</span>;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> controlPoint3 = <span class="hljs-number">0.965679</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุณ ูุฏู ุฃู ููุฑุฉ ุนู ููููุฉ ุงุฎุชูุงุฑูู / ุญุณุงุจูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุง ูููููุง ุฃู ูุฑู ูู ููุฏ ุงููุฌูุน ุ ุงูุดุฑุท ุงูุฃูู ูู ุงูุชุญูู ููุท ูุง ุฅุฐุง ูุงูุช ูููุฉ ุงูุฅุฏุฎุงู ูู ุงููุทุงู [controlPoint0 - controlPoint3]. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ูุฅู ุงูุชุนุชูู ูู 0.0 ููุท.</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-comment">// Input for the opacity function</span>
   <span class="hljs-keyword">float</span> y = saturate(Input.Texcoords.y);  <span class="hljs-comment">// r0.x</span><font></font>
     <font></font>
   <span class="hljs-comment">// Value of opacity function.  </span>
   <span class="hljs-comment">// 0 - no change  </span>
   <span class="hljs-comment">// 1 - full color  </span>
   <span class="hljs-keyword">float</span> opacity = <span class="hljs-number">0.0</span>;  <font></font>
     <font></font>
   [branch]   <font></font>
   <span class="hljs-keyword">if</span> (y &gt;= controlPoint0 &amp;&amp; y &lt;= controlPoint3)  <font></font>
   {  <font></font>
      ...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุนุฏ ูู ุดูุฑุฉ ุฑูุฒ ุงููุฌูุน ุฃุฏูุงู </font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุฑูุฑููุง</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฐุง ุฃุฑุฏูุง ุฃู ูููู ููู ุชุนูู ูุธููุฉ ุงูุชุนุชูู:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-number">6</span>: add r0.z, r0.x, l(<span class="hljs-number">-0.052579</span>)   
   <span class="hljs-number">7</span>: mul r1.w, r0.z, l(<span class="hljs-number">1.211303</span>)   
   <span class="hljs-number">8</span>: mov_sat r0.z, r1.w   
   <span class="hljs-number">9</span>: mad r0.w, r0.z, l(<span class="hljs-number">-2.000000</span>), l(<span class="hljs-number">3.000000</span>)   
  <span class="hljs-number">10</span>: mul r0.z, r0.z, r0.z   
  <span class="hljs-number">11</span>: mul r0.z, r0.z, r0.w   
  <span class="hljs-number">12</span>: mul r2.x, r0.z, l(<span class="hljs-number">0.084642</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญุชูู ุงูุฎุท 9 ุนูู ุงููุนุงูููู "-2.0" ู "3.0" ุ ููุง ูููุญ ุฅูู ุงุณุชุฎุฏุงู ูุธููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุณูุณ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . ูุนู ุ ูุฐุง ุชุฎููู ุฌูุฏ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุธููุฉ HLSL ุงูุณูุณ ูุน ุงููููุฐุฌ ุงูุฃููู: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุทูุฉ ุงูุณูุณ (min ุ max ุ x)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฏุฏ ุฏุงุฆููุง </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x ุฅูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">min-max</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]. ูู ูุฌูุฉ ูุธุฑ ุงููุฌููุน ุ ูุทุฑุญ ูุฐุง ุงูุญุฏ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุฏูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูููุฉ ุงูุฅุฏุฎุงู (ุฃู ูู r0.z ูู ุงูุณุทุฑ 9) ุ ูููู ูุง ููุฌุฏ ุดูุก ูุซู ุฐูู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. ุจุงููุณุจุฉ ุฅูู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏ ุงูุฃูุตู ุ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฐุง ูุนูู ุถููุงู ูุถุงุนูุฉ ูููุฉ ุงูุฅุฏุฎุงู ุ ูููู ูุง ููุฌุฏ ุดูุก ูุซู 'mul_sat' ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. ุจุฏูุงู ูู ุฐูู ุ ููุงู "mov_sat". ูุฐุง ูุฎุจุฑูุง ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏูููุฉ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏ ุงูุฃูุตู ูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุธุงุฆู smoothstep ูู 0 ู 1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุญู ูุนุฑู ุงูุขู ุฃู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ูููู ูู ุงููุงุตู ุงูุฒููู [0 ุ 1]. ููุง ุฐูุฑ ุฃุนูุงู ุ ููุงู ุซูุงุซุฉ ุฃุฌุฒุงุก ูู ุฏุงูุฉ ุงูุชุนุชูู. ูุดูุฑ ูุฐุง ุจูุถูุญ ุฅูู ุฃู ุงูุดูุฑุฉ ุชุจุญุซ ุนู ููุงููุง ูู ุงููุงุตู ุงูุฒููู [sectionStart-sectionEnd]. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฌูุงุจ ูู ูุธููุฉ Linstep!</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">linstep</span><span class="hljs-params">(<span class="hljs-keyword">float</span> min, <span class="hljs-keyword">float</span> max, <span class="hljs-keyword">float</span> v)</span>  
 </span>{  
   <span class="hljs-keyword">return</span> ( (v-min) / (max-min) );  <font></font>
 }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุนูู ุณุจูู ุงููุซุงู ุ ููุฃุฎุฐ ุงูุฌุฒุก ุงูุฃูู: [0.052579 - 0.878136]. </font><font style="vertical-align: inherit;">ูููู ุงูุทุฑุญ ูู ุงูุณุทุฑ 6. ุฅุฐุง ุงุณุชุจุฏููุง ุงููุณูุฉ ุจุงูุถุฑุจ -&gt; 1.0 / (0.878136 - 0.052579) = 1.0 / 0.825557 = ~ 1.211303. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุชูุฌุฉ ุงูุณูุงุณุฉ ูู ุงููุทุงู [0 ุ 1]. </font><font style="vertical-align: inherit;">ุงูุถุฑุจ ุนูู ุงูุฎุท 12 ูู ูุฒู ุงููุทุนุฉ. </font><font style="vertical-align: inherit;">ูู ูุทุนุฉ ููุง ูุฒููุง ุงูุฎุงุต ุ ููุง ูุณูุญ ูู ุจุงูุชุญูู ูู ุงูุนุชุงูุฉ ุงููุตูู ููุฐู ุงููุทุนุฉ ุงููุนููุฉ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูุนูู ุฃูู ุจุงููุณุจุฉ ููููุทุน ุงูุฃูู [0.052579 - 0.878136] ุ ุชููู ุงูุชุนุชูู ูู ุงููุทุงู [0 - 0.084642]. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููู ูุชุงุจุฉ ุฏุงูุฉ HLSL ุงูุชู ุชุญุณุจ ุงูุนุชุงูุฉ ูููุทุน ุนุดูุงุฆู ุนูู ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">getOpacityFunctionValue</span><span class="hljs-params">(<span class="hljs-keyword">float</span> x, <span class="hljs-keyword">float</span> cpLeft, <span class="hljs-keyword">float</span> cpRight, <span class="hljs-keyword">float</span> weight)</span>  
 </span>{  
   <span class="hljs-keyword">float</span> val = smoothstep( <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, linstep(cpLeft, cpRight, x) );  
   <span class="hljs-keyword">return</span> val * weight;  <font></font>
 }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ุ ูุฅู ุงููุฏู ููู ูู ุจุจุณุงุทุฉ ุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ููููุทุน ุงูููุงุจู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุฃูู ูุธุฑุฉ ุนูู ุงูุฃูุฒุงู:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> weight0 = <span class="hljs-number">0.084642</span>;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> weight1 = <span class="hljs-number">0.889658</span>;  
   <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> weight2 = <span class="hljs-number">0.974300</span>; <span class="hljs-comment">// note: weight0+weight1 = weight2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููููุง ูููุฏ ุงููุฌูุน ุ ูุชู </font><font style="vertical-align: inherit;">ุญุณุงุจ </font><font style="vertical-align: inherit;">ุฏุงูุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนุชูู (x) ุนูู</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุญู ุงูุชุงูู:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-keyword">float</span> opacity = <span class="hljs-number">0.0</span>;<font></font>
<font></font>
   [branch]   <font></font>
   <span class="hljs-keyword">if</span> (y &gt;= controlPoint0 &amp;&amp; y &lt;= controlPoint3)  <font></font>
   {  <font></font>
     <span class="hljs-comment">// Range of v: [0, weight0]  </span>
     <span class="hljs-keyword">float</span> v = getOpacityFunctionValue(y, controlPoint0, controlPoint1, weight0);  <font></font>
     opacity = v;  <font></font>
     <font></font>
     [branch]  <font></font>
     <span class="hljs-keyword">if</span> ( y &gt;= controlPoint1 )  <font></font>
     {  <font></font>
       <span class="hljs-comment">// Range of v: [0, weight1]  </span>
       <span class="hljs-keyword">float</span> v = getOpacityFunctionValue(y, controlPoint1, controlPoint2, weight1);  <font></font>
       opacity = weight0 + v;  <font></font>
   <font></font>
       [branch]  <font></font>
       <span class="hljs-keyword">if</span> (y &gt;= controlPoint2)  <font></font>
       {  <font></font>
         <span class="hljs-comment">// Range of v: [0, weight2]  </span>
         <span class="hljs-keyword">float</span> v = getOpacityFunctionValue(y, controlPoint2, controlPoint3, weight2);<font></font>
         opacity = weight2 - v;          <font></font>
       }  <font></font>
     }  <font></font>
   }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูููุง ููู ุฑุณู ุจูุงูู ููุธููุฉ ุงูุชุนุชูู. </font><font style="vertical-align: inherit;">ููููู ุจุณูููุฉ ุฑุคูุฉ ุฒูุงุฏุฉ ุญุงุฏุฉ ูู ุงูุชุนุชูู ุ ููุง ูุดูุฑ ุฅูู ุจุฏุงูุฉ ุฌุณู ูุฌู ุงูุฑูุงูุฉ:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5da/326/1f0/5da3261f0f88fa41ac963ca84fc79f99.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุงูุฉ ุนุชุงูุฉ ุงูุฑุณู ุงูุจูุงูู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูููุงุฉ ุงูุญูุฑุงุก - ูููุฉ ุงูุชุนุชูู - ุงูููุงุฉ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฎุถุฑุงุก - ููุงุท ุงูุชุญูู - ุงูููุงุฉ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุงูุฒุฑูุงุก - ุงูุฃูุฒุงู.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ุจุนุฏ ุญุณุงุจ ุงูุชุนุชูู ุ ูู ุดูุก ุขุฎุฑ ูู ูุฌุฑุฏ ุงูููุณุงุช ุงูุฃุฎูุฑุฉ. </font><font style="vertical-align: inherit;">ุซู ููุงู ูุถุงุนูุงุช ุฅุถุงููุฉ: ุนุชุงูุฉ ุงููุฌูู ูููู ุงููุฌู ุงูุฑุงูู ูุชุฃุซูุฑ ุงูุถุจุงุจ. </font><font style="vertical-align: inherit;">ููุง ูู ูุนุชุงุฏ ูู ุชุธููู TW3 ุ ููููู ุฃูุถูุง ุงูุนุซูุฑ ุนูู ูุถุงุนูุงุช ุฒุงุฆุฏุฉ ุนู ุทุฑูู 1.0 ููุง:</font></font><br>
<br>
<pre><code class="cpp hljs">   <span class="hljs-comment">// cb4_v1.x = 1.0  </span>
   <span class="hljs-keyword">float</span> starsOpacity = <span class="hljs-number">1.0</span> - cb0_v9.w * cb4_v1.x;    <font></font>
   opacity *= starsOpacity;  <font></font>
<font></font>
   <span class="hljs-comment">// Calculate color of a shooting star  </span>
   <span class="hljs-comment">// cb4_v0.x = 10.0</span>
   <span class="hljs-comment">// cb2_v2.rgb = (1.0, 1.0, 1.0)</span><font></font>
   float3 color = cb2_v2.rgb * cb4_v0.x;<font></font>
     <font></font>
   <span class="hljs-comment">// cb2_v2.w = 1  </span><font></font>
   opacity *= cb2_v2.w;<font></font>
     <font></font>
   FogResult fr = { Input.FogParams, Input.AerialParams };  <font></font>
   color = ApplyFog(fr, color);<font></font>
     <font></font>
   <span class="hljs-keyword">return</span> float4( color*opacity, opacity);  <font></font>
 }</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. ููุฎุต</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ุชููู ุงูุตุนูุจุฉ ุงูุฑุฆูุณูุฉ ูู ุงูุฌุฒุก ูุน ูุธููุฉ ุงูุชุนุชูู. ุจุนุฏ ูู ุชุดููุฑูุง ุ ูุตุจุญ ูู ุดูุก ุขุฎุฑ ุณูู ุงูููู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุช ุฃุนูุงู ุฃู ุชุธููู ุงูุจูุณู ูุนูุฏ ููููุงู ููููุงู. ูู ุงููุงูุน ุ ูุญู ููุชู ููุท ุจูููุฉ ูููุฉ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนุชูู (x)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุงูุชู ูุชู ุชุฎุฒูููุง ูู r2.x (ุจุฏุกูุง ูู ุงูุณุทุฑ 49). ููุน ุฐูู ุ ูุฅู ูุธููุฉ ุงูุชุนุชูู ูู ููุฏ ุงูุชุฌููุน ุชูุดุฆ ุซูุงุซุฉ ูุชุบูุฑุงุช ุฅุถุงููุฉ: minRange (r2.y) ุ maxRange (r2.z) ูุงููููุฉ (r2.w). ูููุง ูุนููุงุช ุชุณุชุฎุฏู ูุญุณุงุจ ุงูุชุนุชูู ุนูุฏ </font><font style="vertical-align: inherit;">ุนุฏู ุงุณุชุฎุฏุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนุชูู (x)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<code>lerp( minRange, maxRange, smoothstep(0, 1, value) );</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูู ุงููุงูุน ุ ูุชู ุงูุญุตูู ุนูู ูููุฉ ุงูุชุนุชูู ุงูููุงุฆูุฉ ูู ุงููุฑุน ุงูุดุฑุทู ูู ุงูุณุทุฑ 55 - ุฅุฐุง ูุงูุช ูููุฉ ุงูุฅุฏุฎุงู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุทุงู [controlPoint0 - controlPoint3] ุ ูุฐุง ูุนูู ุฃูู ูุชู ุงุณุชุฎุฏุงู ุฏุงูุฉ ุงูุชุนุชูู ุ ูุฐูู ูุชู ุชุญุฏูุฏ r2.x. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ุนูุฏูุง ุชููู </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุงุฑุฌ ุงููุงุตู ุงูุฒููู ุ ูุชู ุญุณุงุจ ุงูุชุนุชูู ูู r0.x ุ ุฃู ููููุง ูููุนุงุฏูุฉ ุฃุนูุงู. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ููุฏ ููุช ุจุชุตุญูุญ ุนุฏุฏ ูููู ูู ูุญุฏุงุช ุงูุจูุณู ุฎุงุฑุฌ ุงููุงุตู ุงูุฒููู [controlPoint0 - controlPoint3] ุ ูุชุจูู ุฏุงุฆููุง ุฃู ุงูุชุนุชูู ุงูููุงุฆู ูู ุตูุฑ. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ูุฐุง ูู ุดูุก ููุฐุง ุงูููู. </font><font style="vertical-align: inherit;">ู ูุงููุนุชุงุฏุ ุดูุฑุง ุนูู ุงููุฑุงุกู.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar489092/index.html">ููู ุชุนููุช ูุบุฉ ุฌุฏูุฏุฉ ุจุดูู ูุณุชูู ูู 12 ุดูุฑูุง: ุฏููู ุดุงูู</a></li>
<li><a href="../ar489100/index.html">ุชุญููู ุจูุงูุงุช SARS-CoV-2 Coronavirus (2019 -CCov)</a></li>
<li><a href="../ar489102/index.html">ุณููุงุฑูู ููููุฉ. "ูุนู ุ ุฃูุง ุดุฎุตูุงู ุฃุนุฑู ูุงุฏููุง"</a></li>
<li><a href="../ar489106/index.html">ููู ุชุฑูุช ุงูุตุญุงูุฉ ูุฃุตุจุญุช ูุจุฑูุฌ</a></li>
<li><a href="../ar489108/index.html">ุฅุถุงูุฉ ุงูุญููู ุงูุฎุงุตุฉ ุจู ุฅูู ุชูุฑูุฑ Pytest</a></li>
<li><a href="../ar489122/index.html">ุงุณุชุนูุงูุงุช OData ุงูููุชูุจุฉ ูู TypeScript</a></li>
<li><a href="../ar489128/index.html">ุงูุชุฏููู: ููููุฉ ุชูุฏูู ุงูููุชุฌ ุฅูู ุงูุณูู ุงูุฏูููุฉ (ูููุณ ุจุงูุฌููู)</a></li>
<li><a href="../ar489132/index.html">ูุณูุท ุงูุถูุก ุนูู ุงูุฃูุธูุฉ ุงููุชูุงููุฉ ุฃูุฑูุจุง 2020</a></li>
<li><a href="../ar489134/index.html">ุจุญุซ ูุฑู ุงูุชุตููู ูู ุดุฑูุงุช ุงูุฃุบุฐูุฉ ุงูุฑูุณูุฉ</a></li>
<li><a href="../ar489136/index.html">ุงูููุฒ ุจุนุดุฑูู ุฎุทูุง ูุงุณูู: ูุชุงุจุฉ ูุฑุญุงุถ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>