<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏼‍🤝‍👨🏾 👾 😶 Grandes apetitos para pequeños buffers en Node.js ⛽️ 👋🏿 😱</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ya hablé sobre el servicio para monitorear consultas a PostgreSQL , para lo cual implementamos un recopilador de registros del servidor en línea, cuya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Grandes apetitos para pequeños buffers en Node.js</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tensor/blog/488678/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ya hablé sobre el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">servicio para monitorear consultas a PostgreSQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para lo cual implementamos un recopilador de registros del servidor en línea, cuya tarea principal es recibir simultáneamente flujos de registros de una gran cantidad de hosts a la vez, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analizarlos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> rápidamente </font><b><font style="vertical-align: inherit;">en líneas</font></b><font style="vertical-align: inherit;"> , agruparlos en paquetes de acuerdo con ciertas reglas, procesar y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">escribir dar como resultado el</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> almacenamiento de </font><b><font style="vertical-align: inherit;">PostgreSQL</font></b><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vk/dn/xj/vkdnxj5l8luuvnk31xevce4auae.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En nuestro caso, estamos hablando de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">varios cientos de servidores</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y millones de solicitudes y planes que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generan más de 100 GB de registros por día</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Por lo tanto, no fue nada sorprendente cuando descubrimos que la mayor parte de los recursos se gasta precisamente en estas dos operaciones: analizar en líneas y escribir en la base de datos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos sumergimos en las entrañas del generador de perfiles y encontramos algunas características de trabajar con </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>Buffer</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.js, cuyo conocimiento puede ahorrarle mucho tiempo y recursos de servidor.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carga de la CPU</font></font></h2><br>
<img src="https://habrastorage.org/webt/od/uv/lm/oduvlmuc8wmu5obyljyygjnc8vw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mayor parte del tiempo del procesador se dedicó a procesar la secuencia de registro entrante, lo cual es comprensible. </font><font style="vertical-align: inherit;">Pero lo que no estaba claro era el recurso intensidad de uso de la primitiva </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“rebanar” de la corriente entrante de bloques binarios en líneas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> por </font></font><code>\r\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: El </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/v4/tb/dkv4tbigt2rwylskt8x_iqzcurc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
desarrollador atento será inmediatamente notar aquí una no tan eficiente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">byte de ciclo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a través de la memoria intermedia de entrada. </font><font style="vertical-align: inherit;">Bueno, dado que la línea puede ser "desgarrada" entre bloques vecinos, también queda un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"accesorio de cola" funcional del</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bloque procesado anterior.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Intentando readline</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Una revisión rápida de las soluciones disponibles nos trajo al </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">módulo de línea de lectura</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> regular </font><font style="vertical-align: inherit;">exactamente con la funcionalidad necesaria para cortar en líneas: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/px/0v/hepx0v5do7wgj9osz0cwyhuljvg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
después de que se implementó, la "división" desde la parte superior del generador de perfiles se hizo más profunda: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/5x/et/jc5xetsqi24hpgggyg0yss6ggww.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, como resultó, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">readline conduce a la fuerza la cadena a UTF-8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo cual es imposible hacer si la entrada de registro (solicitud, plan, texto de error) tiene una codificación de origen diferente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De hecho, incluso en un servidor PostgreSQL, varias bases de datos pueden estar activas simultáneamente, cada una de las cuales genera salida a un registro de servidor común exactamente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en su codificación original</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Como resultado, los propietarios de bases en win-1251 (a veces es conveniente usarlo para ahorrar espacio en disco si no se necesita un UNICODE multibyte "honesto") pudieron observar sus planes con aproximadamente tales nombres "rusos" de tablas e índices:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mb/6w/ri/mb6wriic6gmbvaz0koz8vddn_gm.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modificando la bicicleta</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es un problema ... Todavía es necesario hacer el corte usted mismo, pero con optimizaciones del tipo en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>Buffer.indexOf()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lugar de "byte-scan": </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ii/kf/h0/iikfh0v9mn2pyjd56eislxit69a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parece que todo está bien, la carga en el circuito de prueba no aumentó, win1251-nombres fueron reparados, salimos a la batalla ... ¡Ta-dam! </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El uso de la CPU rompe periódicamente el techo al 100%</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0r/k_/3u/0rk_3ujn57ml6uf2qs5xiuztnto.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¿Cómo es? ... Resulta que es nuestra culpa </font></font><code>Buffer.concat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con la que "pegamos la cola" sobrante del bloque anterior: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j6/nx/hw/j6nxhw_xyt8rhrz9z9dlfbaz7fo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero solo tenemos un pegado </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cuando pasamos una línea a través del bloque</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pero no deberían ser muchos - realmente, realmente? .. Bueno, casi. Solo que ahora a veces vienen </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"cadenas" de varios cientos de segmentos de 16 KB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iq/rk/54/iqrk54dnsrr9xhfgvawz5pptc90.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gracias a otros desarrolladores que se encargaron de generar esto. </font><font style="vertical-align: inherit;">Ocurre "raramente, pero con precisión", por lo que no fue posible ver de antemano en el circuito de prueba. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Está claro que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pegar varios cientos de veces al búfer en varios megabytes de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> piezas pequeñas es un camino directo al abismo de reasignaciones de memoria con el consumo de recursos de la CPU, lo que observamos. </font><font style="vertical-align: inherit;">Entonces, no lo peguemos hasta que la línea termine por completo. </font><font style="vertical-align: inherit;">Simplemente </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">colocaremos las "piezas" en una matriz</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hasta que sea el momento de dar "salida" a toda la línea: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5i/d8/ol/5id8olet5wr0mxddkn4u3ieuwu0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ahora la carga ha vuelto a los indicadores de línea de lectura.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consumo de memoria</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Muchas personas que escribieron en idiomas con asignación dinámica de memoria son conscientes de que uno de los "asesinos de rendimiento" más desagradables es la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">actividad en segundo plano del</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> recolector de basura (GC), que escanea los objetos creados en la memoria y elimina los que son más grandes No se requiere nadie. </font><font style="vertical-align: inherit;">Este problema también nos sobrecogió: en algún momento comenzamos a notar que la actividad de GC era demasiado y fuera de lugar. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/pp/ht/hgppht17ouvqyv9xdqv7wf4n5kq.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los "giros" tradicionales</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> realmente no ayudaron ... "¡Si todo lo demás falla, volcado!" </font><font style="vertical-align: inherit;">Y la sabiduría popular no decepcionó: vimos una </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nube de Buffer de 8360 bytes</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> con un tamaño total de 520 MB ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/s7/ct/km/s7ctkmzfmorz0qhbsaw1v3aorpw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y se generaron dentro de CopyBinaryStream, la situación comenzó a aclararse ...</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">COPIAR ... DE STDIN CON BINARIO</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para reducir la cantidad de tráfico transmitido a la base de datos, utilizamos el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">formato binario COPY</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">De hecho, para cada registro, debe enviar un búfer a la secuencia, que consta de "piezas": el número de campos en el registro (2 bytes) y luego la representación binaria de los valores de cada columna (4 bytes por tipo ID + datos). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que dicha fila de la tabla casi siempre tiene una longitud variable "resumida", la asignación inmediata de un </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">búfer de una longitud fija no es una opción</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; la reasignación si hay una falta de tamaño "devorará" fácilmente el rendimiento; ya ha aumentado. </font><font style="vertical-align: inherit;">Por lo tanto, también vale la pena "pegar con piezas" usando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><code>Buffer.concat()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memorándum</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, dado que tenemos muchas piezas repetidas una y otra vez (por ejemplo, la cantidad de campos en los registros de la misma tabla), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recordemos</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simplemente </font><b><font style="vertical-align: inherit;">y luego tomemos las listas</font></b><font style="vertical-align: inherit;"> , generadas una vez en la primera llamada. </font><font style="vertical-align: inherit;">Según el formato de COPIA, hay pocas opciones: las piezas típicas tienen una longitud de 1, 2 o 4 bytes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/32/c2/dx32c2pramljew4m2x2ztitewio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ... ¡bam, ha llegado un rastrillo! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5e/vd/mx/5evdmx_4gln9ccxajf2weqv2z4w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, sí, cada vez que crea un búfer, se asigna un trozo de memoria de 8 KB de forma predeterminada, de modo que los </font><font style="vertical-align: inherit;">pequeños búferes </font><font style="vertical-align: inherit;">que se crean </font></font><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en una fila</font></font></b></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se pueden apilar "uno al lado del otro" en la memoria ya asignada. </font><font style="vertical-align: inherit;">Y nuestra asignación funcionó "a pedido", y resultó que no estaba en absoluto "cerca", es por eso que cada uno de nuestros </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">búfer de 1-2-4 bytes ocupaba físicamente un encabezado de 8 KB +</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ¡aquí están, nuestros 520 MB!</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">memo inteligente</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hmm ... ¿Por qué tenemos que esperar hasta que se necesite este o aquel búfer de 1/2 byte? </font><font style="vertical-align: inherit;">Con 4 bytes es un problema por separado, pero algunas de estas diferentes opciones para un total de 256 + 65536. ¡ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deje</font></font><u><font style="vertical-align: inherit;"></font></u><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que </font><b><font style="vertical-align: inherit;">nagenerim su </font></b><b><u><font style="vertical-align: inherit;">fila</font></u></b><b><font style="vertical-align: inherit;"> de una vez</font></b><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">Al mismo tiempo, reducimos la condición para la existencia de cada verificación; también funcionará más rápido, ya que la inicialización se lleva a cabo solo al comienzo del proceso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fs/yq/ge/fsyqgetrrresipf9qmqpifnt-ku.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, además de las memorias intermedias de 1/2 byte, inmediatamente inicializamos la mayoría de los valores en ejecución (2 bytes inferiores y -1) para los de 4 bytes. </font><font style="vertical-align: inherit;">Y, ¡ayudó, solo 10 MB en lugar de 520 MB!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7l/7h/ot/7l7hotlahibczpu7nvmjsdxxo7a.png"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es488666/index.html">10 componentes de reacción para todas las ocasiones</a></li>
<li><a href="../es488668/index.html">Encadenamiento de CI / CD y automatización de Docker</a></li>
<li><a href="../es488670/index.html">Acerca de los registros de máscara</a></li>
<li><a href="../es488672/index.html">Depuración de microcontroladores ARM Cortex-M por UART</a></li>
<li><a href="../es488674/index.html">Infografía con Excel y PowerPoint</a></li>
<li><a href="../es488682/index.html">¿Cómo probar las habilidades de programación de Python? Tareas de Yandex</a></li>
<li><a href="../es488686/index.html">Uso de redes Flowmon para monitorear el rendimiento de aplicaciones distribuidas y bases de datos</a></li>
<li><a href="../es488690/index.html">Levenshtein reconocimiento de caracteres de menor distancia</a></li>
<li><a href="../es488692/index.html">Cómo migrar un gran proceso de IBM BPM a Camunda y no detener el desarrollo de funciones</a></li>
<li><a href="../es488696/index.html">Liderando las tendencias</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>