<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§æüèø üè¨ üë®‚Äçüë¶‚Äçüë¶ S√©rialisation Java: vitesse maximale sans structure de donn√©es rigide üßì ü¶å ü§ò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Notre √©quipe de Sberbank d√©veloppe un service de donn√©es de session qui organise l'√©change d'un contexte de session Java unique entre des applications...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>S√©rialisation Java: vitesse maximale sans structure de donn√©es rigide</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/488612/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notre √©quipe de Sberbank d√©veloppe un service de donn√©es de session qui organise l'√©change d'un contexte de session Java unique entre des applications distribu√©es. Notre service a un besoin urgent de s√©rialisation tr√®s rapide des objets Java, car cela fait partie de notre t√¢che critique. Au d√©part, ils nous sont venus √† l'esprit: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Protocol Buffers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Thrift</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Avro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CBOR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les trois premi√®res de ces biblioth√®ques n√©cessitent la s√©rialisation des objets pour d√©crire le sch√©ma de leurs donn√©es. </font><font style="vertical-align: inherit;">CBOR est si bas niveau qu'il ne peut s√©rialiser que les valeurs scalaires et leurs ensembles. </font><font style="vertical-align: inherit;">Ce dont nous avions besoin, c'√©tait d'une biblioth√®que de s√©rialisation Java qui ¬´n'a pas pos√© trop de questions¬ª et n'a pas forc√© le tri manuel des objets s√©rialisables ¬´en atomes¬ª. </font><font style="vertical-align: inherit;">Nous voulions s√©rialiser des objets Java arbitraires sans en savoir pratiquement rien, et nous voulions le faire le plus rapidement possible. </font><font style="vertical-align: inherit;">Par cons√©quent, nous avons organis√© un concours pour les solutions Open Source disponibles pour le probl√®me de s√©rialisation Java.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/52/0t/82/520t82yicq9kayb7s3bovbktf04.png" alt="KDPV"><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concurrents</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le concours, nous avons s√©lectionn√© les biblioth√®ques de s√©rialisation Java les plus populaires, utilisant principalement le format binaire, ainsi que des biblioth√®ques qui ont bien fonctionn√© dans d' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">autres </font></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revues de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s√©rialisation Java.</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Norme Java</font></font></i></td>
<td> Java- ¬´ ¬ª,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>2</td>
<td><i>Jackson JSON</i></td>
<td> &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FasterXML/jackson-databind</a>,  Java-   JSON-.<br>
</td>
</tr>
<tr>
<td>3</td>
<td><i>Jackson JSON (with types)</i></td>
<td>  ,   ,    ,      full qualified  Java-.        JSON- (,  )  .<br>
<div class="spoiler"><b class="spoiler_title">,    JSON...</b><div class="spoiler_text"><pre><code class="javascript hljs">[
  <span class="hljs-string">"ru.sbrf.ufs.dto.PersonDto"</span>,<font></font>
  {<font></font>
    <span class="hljs-string">"firstName"</span>:<span class="hljs-string">"Ivan"</span>,
    <span class="hljs-string">"lastName"</span>:<span class="hljs-string">"Ivanov"</span><font></font>
  }<font></font>
]<font></font>
</code></pre></div></div><div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper();<font></font>
}<font></font>
</code></pre>:<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> ObjectMapper <span class="hljs-title">createMapper</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ObjectMapper()<font></font>
            .enable(<font></font>
                    ACCEPT_SINGLE_VALUE_AS_ARRAY,<font></font>
                    ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,<font></font>
                    ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT,<font></font>
                    READ_UNKNOWN_ENUM_VALUES_AS_NULL,<font></font>
                    UNWRAP_SINGLE_VALUE_ARRAYS<font></font>
            )<font></font>
            .disable(<font></font>
                    FAIL_ON_INVALID_SUBTYPE,<font></font>
                    FAIL_ON_NULL_FOR_PRIMITIVES,<font></font>
                    FAIL_ON_IGNORED_PROPERTIES,<font></font>
                    FAIL_ON_UNKNOWN_PROPERTIES,<font></font>
                    FAIL_ON_NUMBERS_FOR_ENUMS,<font></font>
                    FAIL_ON_UNRESOLVED_OBJECT_IDS,<font></font>
                    WRAP_EXCEPTIONS<font></font>
            )<font></font>
            .enable(ALLOW_SINGLE_QUOTES)<font></font>
            .disable(FAIL_ON_EMPTY_BEANS)<font></font>
            .enable(MapperFeature.PROPAGATE_TRANSIENT_MARKER)<font></font>
            .setVisibility(FIELD, ANY)<font></font>
            .setVisibility(ALL, NONE)<font></font>
            .enableDefaultTyping(NON_FINAL);  <span class="hljs-comment">// !</span><font></font>
}<font></font>
</code></pre></div></div></td>
</tr>
<tr>
<td>4</td>
<td><i>Jackson Smile</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FasterXML/jackson-dataformats-binary/smile</a>,   Jackson-,  Java-    JSON- ‚Äì Smile.<br>
</td>
</tr>
<tr>
<td>5</td>
<td><i>Jackson Smile (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>6</td>
<td><i>Bson4Jackson</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">michel-kraemer/bson4jackson</a>,   Jackson-,  Java-    JSON- ‚Äì BSON.<br>
</td>
</tr>
<tr>
<td>7</td>
<td><i>Bson4Jackson (with types)</i></td>
<td>  ,   ,    ¬´Jackson JSON (with types)¬ª (full qualified  Java-    ).<br>
</td>
</tr>
<tr>
<td>8</td>
<td><i>BSON MongoDb</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mongodb/mongo-java-driver/bson</a>,&nbsp;&nbsp; Java-  BSON-.<br>
</td>
</tr>
<tr>
<td>9</td>
<td><i>Kryo</i></td>
<td>&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">EsotericSoftware/kryo</a>,&nbsp; Java-    .<br>
</td>
</tr>
<tr>
<td>10</td>
<td><i>Kryo (unsafe)</i></td>
<td>  ,   ,      sun.misc.Unsafe   /.<br>
<div class="spoiler"><b class="spoiler_title">  ...</b><div class="spoiler_text"> :<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.Input<font></font>
com.esotericsoftware.kryo.io.Output<font></font>
</code></pre>:<pre><code class="plaintext hljs">com.esotericsoftware.kryo.io.UnsafeInput<font></font>
com.esotericsoftware.kryo.io.UnsafeOutput</code></pre></div></div></td>
</tr>
<tr>
<td>11</td>
<td><i>FST</i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La biblioth√®que&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuedigerMoeller / de s√©rialisation rapide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui convertit les objets Java en son propre format binaire.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (dangereux)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La m√™me biblioth√®que que ci-dessus, mais configur√©e pour utiliser la classe sun.misc.Unsafe pour acc√©l√©rer la s√©rialisation / d√©s√©rialisation.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caract√©ristiques des param√®tres de la biblioth√®que ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs">FSTConfiguration fst = FSTConfiguration.createDefaultConfiguration();
</code></pre>:<pre><code class="plaintext hljs">FSTConfiguration fst = FSTConfiguration.createUnsafeBinaryConfiguration();</code></pre></div></div></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">treize</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One nio</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">biblioth√®que odnoklassniki / one-nio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui convertit les objets Java en son propre format binaire.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14</font></font></td>
<td><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un Nio (pour persister)</font></font></i></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La m√™me biblioth√®que que ci-dessus, mais configur√©e de mani√®re √† inclure des m√©tadonn√©es d√©taill√©es sur la classe de l'objet Java s√©rialisable dans le r√©sultat de la s√©rialisation. </font><font style="vertical-align: inherit;">Cela peut √™tre demand√© pendant le stockage √† long terme </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(par exemple, dans la base de donn√©es) avant la d√©s√©rialisation. </font><font style="vertical-align: inherit;">Autrement dit, l'objectif poursuivi est le m√™me que celui de Jackson JSON (avec types).</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caract√©ristiques des param√®tres de la biblioth√®que ...</font></font></b><div class="spoiler_text">:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithoutSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
SerializeStream out = <span class="hljs-keyword">new</span> SerializeStream( bufWithoutSerializers );<font></font>
out.writeObject(object);<font></font>
<span class="hljs-comment">// bufWithoutSerializers is the result</span>
</code></pre>:<pre><code class="java hljs"><span class="hljs-keyword">byte</span>[] bufWithSerializers = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[bufferSize];<font></font>
PersistStream out = <span class="hljs-keyword">new</span> PersistStream( bufWithSerializers );<font></font>
out.writeObject(object);<font></font>
bufWithSerializers = out.toByteArray();<font></font>
<span class="hljs-comment">// bufWithSerializers is the result</span>
</code></pre><br>
   <code>object</code>-  <code>result</code>&nbsp;  -:<br>
1) full qualified    <code>object</code>,<br>
2)     ,<br>
3) full qualified     ,<br>
4)        .<br>
  -  ,  One Nio   ,        .</div></div></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et c'est parti!</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Course</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La vitesse est le crit√®re principal pour √©valuer les biblioth√®ques de s√©rialisation Java qui participent √† notre concours improvis√©. </font><font style="vertical-align: inherit;">Afin d'√©valuer objectivement laquelle des biblioth√®ques de s√©rialisation est la plus rapide, nous avons pris </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des donn√©es r√©elles des journaux de notre syst√®me et compos√© des donn√©es de session synth√©tiques de diff√©rentes longueurs</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : de 0 √† 1 Mo. </font><font style="vertical-align: inherit;">Le format des donn√©es √©tait des cha√Ænes et des tableaux d'octets.</font></font><br>
<blockquote><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarque: Pour l'</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avenir, il faut dire que les gagnants et les perdants sont d√©j√† apparus sur les tailles d'objets s√©rialisables de 0 √† 10 Ko. </font><font style="vertical-align: inherit;">Une nouvelle augmentation de la taille des objets √† 1 Mo n'a pas chang√© le r√©sultat du concours. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä cet √©gard, pour plus de clart√©, les graphiques suivants des performances des s√©rialiseurs Java sont limit√©s par la taille des objets de 10 Ko.</font></font></blockquote><i> ,    :</i><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td></td>
<td>Intel<sup>R</sup>&nbsp;Core<sup>TM</sup> i7-6700 CPU, 3.4GHz, 8 cores</td>
</tr>
<tr>
<td></td>
<td>16 GB</td>
</tr>
<tr>
<td> </td>
<td>Microsoft Windows&nbsp;10&nbsp;(64-bit)</td>
</tr>
<tr>
<td>JRE</td>
<td>IBM J9 VM 1.7.0</td>
</tr>
</tbody></table></div><blockquote><strong>:</strong>   ,  IBM JRE    One Nio (   13  14).     <code>sun.reflect.MagicAccessorImpl</code>    <code>private</code>  <code>final</code> ( )  ,    . , IBM JRE      &nbsp;<code>sun.reflect.MagicAccessorImpl</code>,   ,     runtime .<br>
<br>
           (,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Serialization-FAQ</a>,  One Nio   ),    fork  ,    &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  .   &nbsp;<code>sun.reflect.MagicAccessorImpl</code>&nbsp;  fork-   <code>sun.misc.Unsafe</code>     .<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, dans notre fork, la s√©rialisation des cha√Ænes a √©t√© optimis√©e - les cha√Ænes ont commenc√© √† √™tre s√©rialis√©es 30 √† 40% plus rapidement lorsque vous travaillez sur IBM JRE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä cet √©gard, dans cette publication, tous les r√©sultats de la biblioth√®que One Nio ont √©t√© obtenus sur notre propre fork, et non sur la biblioth√®que d'origine.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La mesure directe de la vitesse de s√©rialisation / d√©s√©rialisation a √©t√© effectu√©e en utilisant </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Microbenchmark Harness</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (JMH) - un outil d'OpenJDK pour la construction et l'ex√©cution de benchmark-s. </font><font style="vertical-align: inherit;">Pour chaque mesure (un point sur le graphique), 5 secondes ont √©t√© utilis√©es pour ¬´r√©chauffer¬ª la machine virtuelle Java et 5 secondes suppl√©mentaires pour les mesures de temps elles-m√™mes, suivies d'une moyenne. </font></font><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></b></i><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code de r√©f√©rence JMH sans quelques d√©tails</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SerializationPerformanceBenchmark</span> </span>{<font></font>
<font></font>
    <span class="hljs-meta">@State( Scope.Benchmark )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parameters</span> </span>{<font></font>
<font></font>
        <span class="hljs-meta">@Param( {
            "Java standard",
            "Jackson default",
            "Jackson system",
            "JacksonSmile default",
            "JacksonSmile system",
            "Bson4Jackson default",
            "Bson4Jackson system",
            "Bson MongoDb",
            "Kryo default",
            "Kryo unsafe",
            "FST default",
            "FST unsafe",
            "One-Nio default",
            "One-Nio for persist"
        } )</span>
        <span class="hljs-keyword">public</span> String serializer;
        <span class="hljs-keyword">public</span> Serializer serializerInstance;<font></font>
<font></font>
        <span class="hljs-meta">@Param( { "0", "100", "200", "300", /*... */ "1000000" } )</span>  <span class="hljs-comment">// Toward 1 MB</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> sizeOfDto;
        <span class="hljs-keyword">public</span> Object dtoInstance;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serializedDto;<font></font>
<font></font>
        <span class="hljs-meta">@Setup( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
            serializerInstance = Serializers.getMap().get( serializer );<font></font>
            dtoInstance = DtoFactory.createWorkflowDto( sizeOfDto );<font></font>
            serializedDto = serializerInstance.serialize( dtoInstance );<font></font>
        }<font></font>
<font></font>
        <span class="hljs-meta">@TearDown( Level.Trial )</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">()</span> </span>{<font></font>
            serializerInstance = <span class="hljs-keyword">null</span>;<font></font>
            dtoInstance = <span class="hljs-keyword">null</span>;<font></font>
            serializedDto = <span class="hljs-keyword">null</span>;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">byte</span>[] serialization( Parameters parameters ) <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> parameters.serializerInstance.serialize(<font></font>
                parameters.dtoInstance );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">unserialization</span><span class="hljs-params">( Parameters parameters )</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{
        <span class="hljs-keyword">return</span> parameters.serializerInstance.deserialize(<font></font>
                parameters.serializedDto,<font></font>
                parameters.dtoInstance.getClass() );<font></font>
    }<font></font>
}<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici ce qui s'est pass√©: </font><font style="vertical-align: inherit;">
Tout d'abord, nous notons que les options de biblioth√®que qui ajoutent des m√©tadonn√©es suppl√©mentaires au r√©sultat de la s√©rialisation sont plus lentes que les configurations par d√©faut des m√™mes biblioth√®ques (voir les configurations ¬´avec types¬ª et ¬´pour persister¬ª). </font><font style="vertical-align: inherit;">
En g√©n√©ral, quelle que soit la configuration, </font><i><font style="vertical-align: inherit;">Jackson JSON et Bson4Jackson, qui sont hors course,</font></i><font style="vertical-align: inherit;"> deviennent des outsiders selon les r√©sultats de la s√©rialisation </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
De plus, </font><i><font style="vertical-align: inherit;">Java Standard abandonne la course en</font></i><font style="vertical-align: inherit;"> fonction des r√©sultats de d√©s√©rialisation </font><font style="vertical-align: inherit;">, comme pour n'importe quelle taille de donn√©es s√©rialisables, la d√©s√©rialisation est beaucoup plus lente que ses concurrents. </font><font style="vertical-align: inherit;">
Examinez de plus pr√®s les participants restants: </font><font style="vertical-align: inherit;">
selon les r√©sultats de la s√©rialisation, la biblioth√®que </font><i><font style="vertical-align: inherit;">FST</font></i><font style="vertical-align: inherit;"> est en leaders confiants</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/un/cl/x7/unclx7kgnmniixupznbhmuigcwi.png" alt="Racing - tous les participants"></a><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/ct/fm/cg/ctfmcgtlh9wo66vctatdvwujhzy.png" alt="Racing - sauf pour les √©trangers"></a><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et avec une augmentation de la taille des objets, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬´marche sur ses talons¬ª </font><font style="vertical-align: inherit;">. Notez que pour </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l'option ¬´for persist¬ª est beaucoup plus lente que la configuration par d√©faut pour la vitesse de s√©rialisation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous regardez la d√©s√©rialisation, nous voyons que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a r√©ussi √† d√©passer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec l'augmentation de la taille des donn√©es </font><font style="vertical-align: inherit;">. Dans ce dernier, au contraire, la configuration non standard ¬´unsafe¬ª effectue la d√©s√©rialisation beaucoup plus rapidement. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de mettre tous les points sur ET, regardons le r√©sultat total de la s√©rialisation et de la d√©s√©rialisation: </font><font style="vertical-align: inherit;">
Il est devenu √©vident qu'il y a </font><u><font style="vertical-align: inherit;">deux leaders sans √©quivoque: </font></u><u><i><font style="vertical-align: inherit;">FST (dangereux)</font></i></u><u><font style="vertical-align: inherit;"> et </font></u><u><i><font style="vertical-align: inherit;">One Nio</font></i></u><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Si sur de petits objets </font><i><font style="vertical-align: inherit;">FST (dangereux)</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/zp/qq/mw/zpqqmwuxdlsb_gvl3orjyd1pyda.png" alt="Course - sauf pour les √©trangers (classement g√©n√©ral)"></a><br>
<br><font style="vertical-align: inherit;"></font><u><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i></u><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;m√®ne en toute confiance, puis avec l'augmentation de la taille des objets s√©rialisables, il commence √† conc√©der et, finalement, inf√©rieur √† </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La troisi√®me position avec l'augmentation de la taille des objets s√©rialisables est prise en toute confiance par </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , m√™me si elle est presque deux fois en </font><u><i><font style="vertical-align: inherit;">avance</font></i></u><font style="vertical-align: inherit;"> sur les leaders.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pes√©e</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La taille du r√©sultat de la s√©rialisation est le deuxi√®me crit√®re le plus important pour √©valuer les biblioth√®ques de s√©rialisation Java. D'une certaine mani√®re, la vitesse de s√©rialisation / d√©s√©rialisation d√©pend de la taille du r√©sultat: il est plus rapide de former et de traiter un r√©sultat compact qu'un volume. Pour ¬´pond√©rer¬ª les r√©sultats de la s√©rialisation, tous les m√™mes objets Java ont √©t√© utilis√©s, form√©s √† partir de donn√©es r√©elles extraites des journaux syst√®me (cha√Ænes et tableaux d'octets). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, une propri√©t√© importante du r√©sultat de la s√©rialisation est √©galement combien il se comprime bien (par exemple, pour l'enregistrer dans la base de donn√©es ou d'autres stockages). Dans notre comp√©tition, nous avons utilis√© l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algorithme de</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> compression </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><i><font style="vertical-align: inherit;">Deflate</font></i></a><font style="vertical-align: inherit;"> , qui est la base de ZIP et gzip. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©sultats de la "pes√©e" √©taient les suivants:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/pb/ek/h-/pbekh-hfdtstyzpd2ttgtkfhb88.png" alt="Pes√©e"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©sultats les plus compacts devraient √™tre la s√©rialisation d'un des leaders de la course: </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La deuxi√®me place en compacit√© est </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revenue</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† </font><u><i><font style="vertical-align: inherit;">BSON MongoDb</font></i></u><font style="vertical-align: inherit;"> &nbsp;(qui a pris la troisi√®me place de la course). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En troisi√®me position en termes de compacit√©, la biblioth√®que </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s'est ¬´√©chapp√©e¬ª </font><font style="vertical-align: inherit;">, qui n'avait pas r√©ussi auparavant √† faire ses preuves en course. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©sultats de s√©rialisation de ces 3 leaders de la "pes√©e" sont √©galement parfaitement compress√©s (pr√®s de deux). </font><font style="vertical-align: inherit;">Il s'est av√©r√© √™tre le plus incompressible: l'√©quivalent binaire de JSON est Smile et JSON lui-m√™me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un fait curieux - tous les gagnants de la "pes√©e" lors de la s√©rialisation ajoutent la m√™me quantit√© de donn√©es de service aux petits et grands objets s√©rialisables.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Souplesse</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant de prendre une d√©cision responsable concernant le choix d'un gagnant, nous avons d√©cid√© de v√©rifier minutieusement la flexibilit√© de chaque s√©rialiseur et son utilisation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cela, nous avons compil√© 20 crit√®res pour √©valuer nos s√©rialiseurs participant au concours afin que ¬´pas une seule souris ne glisse¬ª devant nos yeux.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/zd/t4/it/zdt4itoudhnnpfo7e2l9jdscwdo.png" alt="Souplesse"></a><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notes de bas de page avec explications</font></font></b><div class="spoiler_text"><sup>1</sup>&nbsp; &nbsp; <i> <code>LinkedHashMap</code>.</i><br>
<sup>2</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>3</sup>&nbsp; &nbsp;<i>    ‚Äî ,    ‚Äî .</i><br>
<sup>4</sup>&nbsp; &nbsp;<i>  <code>sun.reflect.MagicAccessorImpl</code> ‚Äî : boxing/unboxing,   <code>BigInteger/BigDecimal/String</code>.   <code>MagicAccessorImpl</code>&nbsp;(  ' fork One Nio) ‚Äî .</i><br>
<sup>5</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>.</i><br>
<sup>6</sup>&nbsp; &nbsp;<i> <code>ArrayList</code>  <code>HashSet</code>      .</i><br>
<sup>7</sup>&nbsp; &nbsp;<i> <code>HashMap</code>.</i><br>
<sup>8</sup>&nbsp; &nbsp;<i>        ‚Äî ,     ,   /Map-,   (   <code>HashMap</code>).</i><br>
<sup>9</sup>&nbsp; &nbsp;<i>   -.</i><br>
<sup>10</sup>&nbsp;<i>   One Nio ‚Äî ,    ' fork- ‚Äî .</i><br>
<sup>11</sup> <i>     .</i><br>
</div></div><i><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Selon le 13√®me crit√®re, One Nio (pour persist) a re√ßu un autre point (19√®me).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Cet ¬´examen minutieux des candidats¬ª a √©t√© peut-√™tre l'√©tape la plus longue de notre ¬´casting¬ª. Mais ces r√©sultats de comparaison ouvrent bien la commodit√© d'utiliser des biblioth√®ques de s√©rialisation. Par cons√©quent, vous pouvez utiliser ces r√©sultats comme r√©f√©rence.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'√©tait une honte √† r√©aliser, mais nos leaders selon les r√©sultats des courses et des pes√©es -</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> FST (dangereux)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- s'est av√©r√© √™tre des √©trangers en termes de flexibilit√© ... Cependant, nous √©tions int√©ress√©s par un fait curieux: un Nio dans la configuration "for persist" (pas le plus rapide et le plus compact) a marqu√© le plus de points en termes de flexibilit√© - 19/20. L'opportunit√© de faire fonctionner la configuration One Nio par d√©faut (rapide et compacte) de mani√®re flexible semblait √©galement tr√®s attrayante - et il y avait un moyen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au tout d√©but, lorsque nous avons pr√©sent√© les participants au concours, il a √©t√© dit que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (pour persist)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> inclus dans le r√©sultat de s√©rialisation des </font><i><font style="vertical-align: inherit;">m√©ta-informations</font></i><font style="vertical-align: inherit;"> d√©taill√©es </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur la classe de l'objet Java s√©rialisable</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(*). </font><font style="vertical-align: inherit;">En utilisant ces m√©ta-informations pour la d√©s√©rialisation, la biblioth√®que One Nio sait exactement √† quoi ressemblait la classe de l'objet s√©rialisable au moment de la s√©rialisation. </font><font style="vertical-align: inherit;">C'est sur la base de ces connaissances que l'algorithme de d√©s√©rialisation One Nio est si flexible qu'il offre la compatibilit√© maximale r√©sultant de la s√©rialisation </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'est av√©r√© que les m√©ta-informations (*) peuvent √™tre obtenues s√©par√©ment pour la classe sp√©cifi√©e, s√©rialis√©es&nbsp; </font></font><code>byte[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;et envoy√©es du c√¥t√© o√π les objets Java de cette classe seront d√©s√©rialis√©s:</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Avec du code par √©tapes ...</font></font></b><div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-comment">//  ‚Ññ1:  -   SomeDto</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = Repository.get( SomeDto.class );<font></font>
<span class="hljs-keyword">byte</span>[] dtoMeta = serializeByDefaultOneNioAlgorithm( dtoSerializerWithMeta );<font></font>
//  ‚Ññ<span class="hljs-number">1</span>:  dtoMeta  ‚Ññ<span class="hljs-number">2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:  -    SomeDto      One Nio</span><font></font>
one.nio.serial.Serializer&lt;SomeDto&gt; dtoSerializerWithMeta = deserializeByOneNio( dtoMeta );<font></font>
Repository.provideSerializer( dtoSerializerWithMeta );<font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ1:    SomeDto</span>
<span class="hljs-keyword">byte</span>[] bytes1 = serializeByDefaultOneNioAlgorithm( object1 );
<span class="hljs-keyword">byte</span>[] bytes2 = serializeByDefaultOneNioAlgorithm( object2 );<font></font>
...<font></font>
<span class="hljs-comment">//  ‚Ññ1:    ‚Ññ2</span><font></font>
<font></font>
<span class="hljs-comment">//  ‚Ññ2:      SomeDto</span><font></font>
SomeDto object1 = deserializeByOneNio( bytes1 );<font></font>
SomeDto object2 = deserializeByOneNio( bytes2 );<font></font>
...<font></font>
</code></pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous effectuez cette proc√©dure explicite pour √©changer des m√©ta-informations sur les classes entre les services distribu√©s, ces services pourront s‚Äôenvoyer des objets Java s√©rialis√©s en utilisant la configuration One Nio par d√©faut (rapide et compacte). Apr√®s tout, pendant que les services sont en cours d'ex√©cution, les versions des classes de leur c√¥t√© sont inchang√©es, ce qui signifie qu'il n'y a aucune raison de ¬´faire glisser d'avant en arri√®re¬ª les m√©tadonn√©es constantes dans chaque r√©sultat de s√©rialisation lors de chaque interaction. Ainsi, apr√®s avoir fait un peu plus d'action au d√©but, vous pouvez utiliser la vitesse et la compacit√© de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simultan√©ment avec la flexibilit√© de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio (pour persist)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Exactement ce qui est n√©cessaire! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, pour le transfert d'objets Java entre services distribu√©s sous forme s√©rialis√©e (c'est pour cela que nous avons organis√© ce concours)&nbsp;</font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio a √©t√© le vainqueur de la flexibilit√©</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(19/20). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parmi les s√©rialiseurs Java qui se sont distingu√©s plus t√¥t en course et en pesage, une bonne flexibilit√© n'a pas √©t√© d√©montr√©e:</font></font><br>
<br>
<ul>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;(14,5 / 20),</font></font></li>
<li><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (13/20).</font></font></li>
</ul><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi√©destal</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelez-vous les r√©sultats des pr√©c√©dents concours de s√©rialisation Java:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en course, les deux premi√®res lignes du classement ont √©t√© divis√©es par </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (dangereux)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pris la troisi√®me place </font><font style="vertical-align: inherit;">,</font></font></li>
<li><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un Nio a</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> battu la pes√©e </font><font style="vertical-align: inherit;">, suivi de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en termes de flexibilit√©, juste pour notre t√¢che d'√©change de contexte de session entre des applications distribu√©es, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a de nouveau obtenu la premi√®re place&nbsp; </font><font style="vertical-align: inherit;">, et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BSON MongoDb</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kryo ont excell√©</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, en termes de la totalit√© des r√©sultats obtenus, le pi√©destal que nous avons obtenu est le suivant:</font></font><br>
<br>
<ol>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Dans la comp√©tition principale - courses - a partag√© la premi√®re place avec </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (dangereux)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais a pes√© de mani√®re significative le concurrent en termes de flexibilit√© de pesage et de test.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FST (unsafe)</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
√âgalement une biblioth√®que de s√©rialisation Java tr√®s rapide, cependant, il lui manque la compatibilit√© directe et r√©trospective des tableaux d'octets r√©sultant de la s√©rialisation.</font></font></li>
<li><strong>BSON MongoDB&nbsp;+&nbsp;Kryo</strong><br>
 2   3-      Java-,     .       2-   ,          .        <code>Collection</code>  <code>Map</code>,   <i>BSON MongoDB</i>     custom-  / (<code>Externalizable</code>  ..).</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä Sberbank, dans notre service de donn√©es de session, nous avons utilis√© la biblioth√®que </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui a remport√© la premi√®re place de notre concours. √Ä l'aide de cette biblioth√®que, les donn√©es de contexte de session Java ont √©t√© s√©rialis√©es et transf√©r√©es entre les applications. Gr√¢ce √† cette r√©vision, la vitesse de transport des sessions s'est acc√©l√©r√©e √† plusieurs reprises. Les tests de charge ont montr√© que dans des sc√©narios proches du comportement r√©el de l'utilisateur dans Sberbank Online, une acc√©l√©ration allant jusqu'√† 40% n'a √©t√© obtenue que gr√¢ce √† cette seule am√©lioration. Un tel r√©sultat signifie une r√©duction du temps de r√©ponse du syst√®me aux actions des utilisateurs, ce qui augmente le degr√© de satisfaction de nos clients. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le prochain article, je vais essayer de d√©montrer en action l'acc√©l√©ration suppl√©mentaire de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©riv√© de l'utilisation de la classe </font></font><code>sun.reflect.MagicAccessorImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Malheureusement, IBM JRE ne prend pas en charge les propri√©t√©s les plus importantes de cette classe, ce qui signifie que le plein potentiel de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One Nio</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur cette version de JRE n'a pas encore √©t√© r√©v√©l√©. </font><font style="vertical-align: inherit;">√Ä suivre.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr488602/index.html">iOS MEETUP # 2 de FUNCORP et Comment garder un d√©veloppeur √† jour</a></li>
<li><a href="../fr488604/index.html">Le condens√© de mati√®res fra√Æches du monde du frontend pour la derni√®re semaine n ¬∞ 402 (10-16 f√©vrier 2020)</a></li>
<li><a href="../fr488606/index.html">La v√©ritable essence des l√©zards</a></li>
<li><a href="../fr488608/index.html">"GLORY ZHPSS!" ou rappelez-vous GPSS World</a></li>
<li><a href="../fr488610/index.html">–ò—Å—Ç–æ—Ä–∏—è —á–µ–ª–æ–≤–µ–∫–∞, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫ —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω–æ–º—É –∏–∑–ª—É—á–µ–Ω–∏—é, –∏–ª–∏ –∫–∞–∫ –º—ã —â—É–ø–∞–µ–º –∫—Ä–∞–π –æ–±—Ä—ã–≤–∞‚Ä¶ UPD: +FAQ</a></li>
<li><a href="../fr488614/index.html">Bobbin 3.0.0 - revue des am√©liorations</a></li>
<li><a href="../fr488616/index.html">Null problem in Data Science and Machine Learning</a></li>
<li><a href="../fr488618/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 333 (10 - 16 f√©vrier)</a></li>
<li><a href="../fr488622/index.html">Les listes de contr√¥le remplacent-elles les r√©glementations?</a></li>
<li><a href="../fr488624/index.html">√âconomie mutuelle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>