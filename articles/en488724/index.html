<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙇🏽 🤲🏿 🐂 6 Best Security Practices for Go 🌦️ 🧖🏾 🚒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A translation of the article was prepared specifically for students of the Golang Developer course .
 
 
 
 
 The popularity of Golang has increased s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>6 Best Security Practices for Go</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/488724/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A translation of the article was prepared specifically for students of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the Golang Developer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> course </font><font style="vertical-align: inherit;">.</font></font></b></i><br>
<br>
<img src="https://habrastorage.org/webt/g3/jd/s7/g3jds7zwidxpwd-ubopyb-bjhle.png"><br>
<hr><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The popularity of Golang has increased significantly in recent years. Successful projects such as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and Terraform have made a big bet on this programming language. Go has recently become the de facto standard for creating command-line tools. In terms of security, Go has successfully managed according to its vulnerability reports, having only </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">one CVE registry since 2002</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, the absence of vulnerabilities does not mean that the programming language is highly secure. We humans can create unsafe applications if we do not follow certain rules. For example, knowing the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rules for writing safe code from OWASP</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we can think about how to apply these methods when using Go. </font><font style="vertical-align: inherit;">And this is exactly what I will do this time. </font><font style="vertical-align: inherit;">In this post, I will show you six practices to consider when developing with Go.</font></font><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Check input</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Checking user input is necessary not only for functional purposes, it also helps to avoid attacks by cybercriminals who send us intrusive data that could damage the system. Moreover, you help users to use this tool more confidently, preventing them from making silly and common mistakes. For example, you can prevent a user from trying to delete multiple entries at once. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To test user input, you can use native Go packages such as strconv to handle converting strings to other data types. Go also supports regular expressions with </font></font><code>regexp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for complex checks. Although Go prefers to use native libraries, there are third-party packages such as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">validator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">With validator, you can enable validation for structures or individual fields much more easily. </font><font style="vertical-align: inherit;">For example, the following code verifies that the structure </font></font><code>User</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contains a valid email address:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"fmt"</span><font></font>
<font></font>
	<span class="hljs-string">"gopkg.in/go-playground/validator.v9"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {<font></font>
	Email <span class="hljs-keyword">string</span> <span class="hljs-string">`json:"email" validate:"required,email"`</span>
	Name  <span class="hljs-keyword">string</span> <span class="hljs-string">`json:"name" validate:"required"`</span><font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	v := validator.New()<font></font>
	a := User{<font></font>
		Email: <span class="hljs-string">"a"</span>,<font></font>
	}<font></font>
<font></font>
	err := v.Struct(a)<font></font>
<font></font>
	<span class="hljs-keyword">for</span> _, e := <span class="hljs-keyword">range</span> err.(validator.ValidationErrors) {<font></font>
		fmt.Println(e)<font></font>
	}<font></font>
}</code></pre><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Use HTML templates</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One common critical vulnerability is cross-site scripting or XSS. The main exploit is that an attacker can inject malicious code into the application to modify the output. For example, someone might send JavaScript code as part of a query string in a URL. When the application returns the value of the user, JavaScript code can be executed. Therefore, as a developer, you should be aware of this possibility and clear the data entered by the user. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go has an </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html / template</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> package </font><font style="vertical-align: inherit;">to encode what the application returns to the user. Thus, instead of the browser doing input like</font></font><code><code>&lt;</code>script<code>&gt;</code>alert(‘ !’);<code>&lt;</code>/script<code>&gt;</code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">he will give a warning; </font><font style="vertical-align: inherit;">You can encode the input, and the application will process the input as typical HTML code printed in a browser. </font><font style="vertical-align: inherit;">An HTTP server that returns an HTML template will look like this:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"html/template"</span>
	<span class="hljs-string">"net/http"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {<font></font>
	param1 := r.URL.Query().Get(<span class="hljs-string">"param1"</span>)<font></font>
	tmpl := template.New(<span class="hljs-string">"hello"</span>)<font></font>
	tmpl, _ = tmpl.Parse(<span class="hljs-string">`{{define "T"}}{{.}}{{end}}`</span>)<font></font>
	tmpl.ExecuteTemplate(w, <span class="hljs-string">"T"</span>, param1)<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	http.HandleFunc(<span class="hljs-string">"/"</span>, handler)<font></font>
	http.ListenAndServe(<span class="hljs-string">":8080"</span>, <span class="hljs-literal">nil</span>)<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But there are third-party libraries that you can use when developing web applications on Go. </font><font style="vertical-align: inherit;">For example, the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gorilla web toolkit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which includes libraries to help developers do things like encode cookie authentication values. </font><font style="vertical-align: inherit;">There is also </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nosurf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which is an HTTP package that helps prevent cross-site request forgery ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSRF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Protect yourself from SQL injection </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you have been developing for some time, you may know about SQL injections, which still occupy the first position in the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OWASP top</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . However, there are some specific points you should consider when using Go. The first thing you need to do is make sure that the user who connects to the database has limited rights. It is also good practice to sanitize user input, as I described in the previous section, or to escape special characters and use the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTMLEscapeString</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> function </font><font style="vertical-align: inherit;">from the HTML template package. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the most important piece of code that you need to include is the use of parameterized queries. In Go, you do not prepare an expression (this is a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prepared Statement</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) in connection; You prepare it in the database. Here is an example of how to use parameterized queries:</font></font><br>
<br>
<pre><code class="go hljs">customerName := r.URL.Query().Get(<span class="hljs-string">"name"</span>)<font></font>
db.Exec(<span class="hljs-string">"UPDATE creditcards SET name=? WHERE customerId=?"</span>, customerName, <span class="hljs-number">233</span>, <span class="hljs-number">90</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, what if the database engine does not support the use of prepared expressions? </font><font style="vertical-align: inherit;">Or what if it affects query performance? </font><font style="vertical-align: inherit;">Well, you can use the db.Query () function, but first make sure you sanitize user input, as shown in the previous sections. </font><font style="vertical-align: inherit;">There are also third-party libraries, such as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sqlmap</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , to prevent SQL injection. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despite all our efforts, sometimes vulnerabilities slip or enter our applications through third parties. </font><font style="vertical-align: inherit;">To protect your web applications from critical attacks such as SQL injection, consider using an application security management platform such as </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sqreen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Encrypt sensitive information</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The fact that the string is difficult to read, for example, in base-64 format, does not mean that the hidden value is secret. You need a way to encrypt information that attackers cannot easily decode. Typical information that you would like to encrypt is database passwords, user passwords, or even social security numbers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The OWASP has several </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">recommendations</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on what encryption algorithms used, for example, </font></font><code>bcrypt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>PDKDF2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Argon2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><code>scrypt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Fortunately, there is a Go package that includes reliable implementations for encrypting information - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crypto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The following code is an example use </font></font><code>bcrypt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"database/sql"</span>
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span><font></font>
<font></font>
	<span class="hljs-string">"golang.org/x/crypto/bcrypt"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	ctx := context.Background()<font></font>
	email := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">"john.doe@somedomain.com"</span>)<font></font>
	password := []<span class="hljs-keyword">byte</span>(<span class="hljs-string">"47;u5:B(95m72;Xq"</span>)<font></font>
<font></font>
	hashedPassword, err := bcrypt.GenerateFromPassword(password, bcrypt.DefaultCost)<font></font>
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)<font></font>
	}<font></font>
<font></font>
	stmt, err := db.PrepareContext(ctx, <span class="hljs-string">"INSERT INTO accounts SET hash=?, email=?"</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)<font></font>
	}<font></font>
	result, err := stmt.ExecContext(ctx, hashedPassword, email)<font></font>
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(err)<font></font>
	}<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Please note that you still need to exercise caution when transferring information between services. </font><font style="vertical-align: inherit;">You would not want to send user data in plain text. </font><font style="vertical-align: inherit;">It doesn’t matter if the application encrypts user data before saving. </font><font style="vertical-align: inherit;">Suppose someone on the Internet can listen to your traffic and keep logs of your system’s requests. </font><font style="vertical-align: inherit;">An attacker can use this information to match it with other data from other systems.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Provide HTTPS connectivity</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Most browsers currently require HTTPS to work on every site. </font><font style="vertical-align: inherit;">Chrome, for example, will show you a warning if the site does not use HTTPS. </font><font style="vertical-align: inherit;">The information security department can use transit encryption for communication between services as a policy. </font><font style="vertical-align: inherit;">That is, to ensure the security of the transit connection in the system, it is not only about listening to the application on port 443. You also need to use the appropriate certificates and use HTTPS to prevent attackers from downgrading the protocol to HTTP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is a snippet of code for a web application that provides and uses the HTTPS protocol:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"crypto/tls"</span>
    <span class="hljs-string">"log"</span>
    <span class="hljs-string">"net/http"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
    mux := http.NewServeMux()<font></font>
    mux.HandleFunc(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(w http.ResponseWriter, req *http.Request)</span></span> {<font></font>
        w.Header().Add(<span class="hljs-string">"Strict-Transport-Security"</span>, <span class="hljs-string">"max-age=63072000; includeSubDomains"</span>)<font></font>
        w.Write([]<span class="hljs-keyword">byte</span>(<span class="hljs-string">"This is an example server.\n"</span>))<font></font>
    })<font></font>
    cfg := &amp;tls.Config{<font></font>
        MinVersion:               tls.VersionTLS12,<font></font>
        CurvePreferences:         []tls.CurveID{tls.CurveP521, tls.CurveP384, tls.CurveP256},<font></font>
        PreferServerCipherSuites: <span class="hljs-literal">true</span>,<font></font>
        CipherSuites: []<span class="hljs-keyword">uint16</span>{<font></font>
            tls.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,<font></font>
            tls.TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,<font></font>
            tls.TLS_RSA_WITH_AES_256_GCM_SHA384,<font></font>
            tls.TLS_RSA_WITH_AES_256_CBC_SHA,<font></font>
        },<font></font>
    }<font></font>
    srv := &amp;http.Server{<font></font>
        Addr:         <span class="hljs-string">":443"</span>,<font></font>
        Handler:      mux,<font></font>
        TLSConfig:    cfg,<font></font>
        TLSNextProto: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(*http.Server, *tls.Conn, http.Handler)</span>, 0),</span><font></font>
    }<font></font>
    log.Fatal(srv.ListenAndServeTLS(<span class="hljs-string">"tls.crt"</span>, <span class="hljs-string">"tls.key"</span>))<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Note that the application will listen on port 443. The next line is the line that provides HTTPS configuration:</font></font><br>
<br>
<pre><code class="go hljs">w.Header().Add(<span class="hljs-string">"Strict-Transport-Security"</span>, <span class="hljs-string">"max-age=63072000; includeSubDomains"</span>)</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can also specify the server name in the TLS configuration in this way:</font></font><br>
<pre><code class="go hljs">config := &amp;tls.Config{ServerName: <span class="hljs-string">"yourSiteOrServiceName"</span>}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is always recommended that you use back-end encryption, even if your web application is for internal communication only. </font><font style="vertical-align: inherit;">Imagine if for some reason an attacker could listen to your internal traffic. </font><font style="vertical-align: inherit;">Whenever possible, it is always best to raise the bar for possible future attackers.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Pay attention to errors and logs.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Last, but not least, error handling and logging in your Go applications. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To successfully troubleshoot production issues, you need to properly configure your applications. </font><font style="vertical-align: inherit;">You must take into account the errors you show to users. </font><font style="vertical-align: inherit;">You would not want users to know what exactly went wrong. </font><font style="vertical-align: inherit;">Attackers can use this information to determine what services and technologies you use. </font><font style="vertical-align: inherit;">In addition, you should remember that although the logs are wonderful, they are stored somewhere. </font><font style="vertical-align: inherit;">And if the logs fall into the wrong hands, they can be used to embed the upcoming attack in the system.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, the first thing you need to learn or remember is that there are no exceptions to Go. </font><font style="vertical-align: inherit;">This means that you need to handle errors differently than in other languages. </font><font style="vertical-align: inherit;">The standard looks like this:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-comment">//  </span>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go also offers a built-in library for working with logs. </font><font style="vertical-align: inherit;">The simplest code looks like this:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"log"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	log.Print(<span class="hljs-string">"Logging in Go!"</span>)<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But there are third-party libraries for maintaining logs. </font><font style="vertical-align: inherit;">Some of these are </font></font><code>logrus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>glog</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>loggo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Here is a small snippet of code using </font></font><code>logrus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-keyword">package</span> main<font></font>
<font></font>
<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"os"</span><font></font>
<font></font>
	log <span class="hljs-string">"github.com/sirupsen/logrus"</span><font></font>
)<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {<font></font>
	file, err := os.OpenFile(<span class="hljs-string">"info.log"</span>, os.O_CREATE|os.O_APPEND, <span class="hljs-number">0644</span>)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {<font></font>
		log.Fatal(err)<font></font>
	}<font></font>
<font></font>
	<span class="hljs-keyword">defer</span> file.Close()<font></font>
<font></font>
	log.SetOutput(file)<font></font>
	log.SetFormatter(&amp;log.JSONFormatter{})<font></font>
	log.SetLevel(log.WarnLevel)<font></font>
<font></font>
	log.WithFields(log.Fields{<font></font>
		<span class="hljs-string">"animal"</span>: <span class="hljs-string">"walrus"</span>,
		<span class="hljs-string">"size"</span>:   <span class="hljs-number">10</span>,<font></font>
	}).Info(<span class="hljs-string">"A group of walrus emerges from the ocean"</span>)<font></font>
}</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally, make sure that you apply all the previous recommendations, such as encryption and sanation of the data that you put in the logs.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is always room to grow</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These guidelines are the minimum that should be specific to your Go applications. </font><font style="vertical-align: inherit;">However, if your application is a command line tool, you will not need encryption methods for transit. </font><font style="vertical-align: inherit;">But the rest of the security tips apply to almost all types of applications. </font><font style="vertical-align: inherit;">If you want to know more, there is a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">book from OWASP specifically for Go</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that goes into some topics. </font><font style="vertical-align: inherit;">There is also a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repository</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> containing links to frameworks, libraries, and other security tools in Go.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No matter what you end up doing, remember that you can always increase the security of your application. </font><font style="vertical-align: inherit;">Attackers will always find new ways to exploit vulnerabilities, so try to constantly work on the security of your application.</font></font><br>
<hr><br>
<i>     . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a> — ,            ,           ,  .NET, Node.js  Java,     Docker.</i><br>
<br>
<b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   .</a></b></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en488708/index.html">Saving filtering logic in Swift Combine. Part 2</a></li>
<li><a href="../en488712/index.html">Check Point WatchTower - manage NGFW from a smartphone</a></li>
<li><a href="../en488716/index.html">Frontend materials from the Kazan mitap: Phoenix LiveView, frontops, JSON: API</a></li>
<li><a href="../en488720/index.html">Web Scraping Part 1</a></li>
<li><a href="../en488722/index.html">Security Week 08: viruses return</a></li>
<li><a href="../en488726/index.html">Interview with the engineer of NIPTB Onega - the winner of WorldSkills Hi-Tech about work, championship and CAD</a></li>
<li><a href="../en488728/index.html">Two ways to inflate the price of oil, or Attacks on oil and gas as a means of influencing stock indices</a></li>
<li><a href="../en488730/index.html">New Russian standards for the Internet of things, smart manufacturing and smart city</a></li>
<li><a href="../en488732/index.html">Talented Mr. Simon: How Unique Abilities and 3D Printing Can Change the Production Process</a></li>
<li><a href="../en488736/index.html">Remote work is gaining momentum</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>