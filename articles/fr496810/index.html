<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍨 🙆🏻 👩‍🏫 Analyse financière générale en Python (Partie 3) 🤚🏻 🙇🏽 👨‍👩‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Après tous les calculs présentés dans ce et cette publication, on peut se plonger dans l'analyse statistique et tenir compte de la méthode des moindre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Analyse financière générale en Python (Partie 3)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496810/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Après tous les calculs présentés dans </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ce</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> publication, on peut se </font><font style="vertical-align: inherit;">plonger dans l'analyse statistique et tenir compte de </font><font style="vertical-align: inherit;">la méthode des moindres carrés. </font><font style="vertical-align: inherit;">À cet effet, la bibliothèque de modèles de statistiques est utilisée, ce qui permet aux utilisateurs d'examiner les données, d'évaluer les modèles statistiques et d'effectuer des tests statistiques. </font><font style="vertical-align: inherit;">Cet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et cet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ont été pris comme base </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">La description de la fonction utilisée en anglais est disponible sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suivant </font><font style="vertical-align: inherit;">.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, un peu de théorie:</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">À propos de la régression linéaire</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La régression linéaire est utilisée comme modèle prédictif lorsqu'une relation linéaire est supposée entre la variable dépendante (la variable que nous essayons de prédire) et la variable indépendante (la variable et / ou les variables utilisées pour la prédiction). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas le plus simple, lors de l'examen, une variable est utilisée sur la base de laquelle nous essayons de prédire une autre. </font><font style="vertical-align: inherit;">La formule dans ce cas est la suivante: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y = C + M * X</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Y = variable dépendante (résultat / prévision / estimation)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C = Constante (ordonnée à l'origine)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> M = Pente de la droite de régression (pente ou gradient de la droite estimée; c'est la quantité par laquelle Y augmente en moyenne si on augmente X d'une unité)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> X = variable indépendante (prédicteur utilisé dans la prévision Y)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, il peut également exister une relation entre la variable dépendante et plusieurs variables indépendantes. </font><font style="vertical-align: inherit;">Pour ces types de modèles (en supposant la linéarité), nous pouvons utiliser une régression linéaire multiple de la forme suivante: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y = C + M1X1 + M2X2 + ...</font></font></b><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ratio bêta</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de choses ont déjà été écrites sur ce coefficient, par exemple, sur cette </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Brièvement, si vous n'entrez pas dans les détails, vous pouvez le caractériser comme suit: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actions avec un coefficient bêta:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zéro indique aucune corrélation entre l'action et l'indice</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> l'unité indique que l'action a la même volatilité que l'indice</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus d'un - indique une rentabilité (et donc des risques) du titre supérieure à celle de l'indice</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> moins d'un - stock moins volatil que l'indice</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En d'autres termes, si le stock augmente de 14%, alors que le marché n'a augmenté que de 10%, le coefficient bêta du stock sera de 1,4. </font><font style="vertical-align: inherit;">En règle générale, les marchés avec un bêta plus élevé peuvent offrir de meilleures conditions de récompense (et donc de risque).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-e/yf/ky/-eyfkygh_enn9wusk29gg2gyot8.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entraine toi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code Python suivant inclut un exemple de régression linéaire, où la variable d'entrée est le rendement de l'indice de la Bourse de Moscou et la variable estimée est le rendement des actions Aeroflot. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin d'éviter d'avoir à se rappeler comment télécharger les données et amener les données sous la forme nécessaire au calcul, le code est donné à partir du moment où les données sont téléchargées et jusqu'à ce que les résultats soient obtenus. </font><font style="vertical-align: inherit;">Voici la syntaxe complète pour effectuer une régression linéaire en Python à l'aide de modèles de statistiques:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># </span>
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> yfinance <span class="hljs-keyword">as</span> yf
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> statsmodels.api <span class="hljs-keyword">as</span> sm<font></font>
<font></font>
<span class="hljs-comment"># </span>
ticker = [<span class="hljs-string">'AFLT.ME'</span>,<span class="hljs-string">'IMOEX.ME'</span>]<font></font>
stock = yf.download(ticker)<font></font>
<font></font>
<span class="hljs-comment">#    </span>
all_adj_close = stock[[<span class="hljs-string">'Adj Close'</span>]]<font></font>
<font></font>
<span class="hljs-comment">#   </span>
all_returns = np.log(all_adj_close / all_adj_close.shift(<span class="hljs-number">1</span>))<font></font>
<font></font>
<span class="hljs-comment">#      </span>
aflt_returns = all_returns[<span class="hljs-string">'Adj Close'</span>][[<span class="hljs-string">'AFLT.ME'</span>]].fillna(<span class="hljs-number">0</span>)<font></font>
<font></font>
<span class="hljs-comment">#      </span>
moex_returns = all_returns[<span class="hljs-string">'Adj Close'</span>][[<span class="hljs-string">'IMOEX.ME'</span>]].fillna(<span class="hljs-number">0</span>)<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#   DataFrame</span><font></font>
<font></font>
return_data = pd.concat([aflt_returns, moex_returns], axis=<span class="hljs-number">1</span>)[<span class="hljs-number">1</span>:]<font></font>
return_data.columns = [<span class="hljs-string">'AFLT.ME'</span>, <span class="hljs-string">'IMOEX.ME'</span>]<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#      X  y</span>
X = sm.add_constant(return_data[<span class="hljs-string">'IMOEX.ME'</span>])<font></font>
y = return_data[<span class="hljs-string">'AFLT.ME'</span>]<font></font>
<font></font>
<font></font>
<span class="hljs-comment">#  </span><font></font>
model_moex = sm.OLS(y,X).fit()<font></font>
<font></font>
<span class="hljs-comment">#  </span><font></font>
print(model_moex.summary())<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/ed/xr/a9/edxra9sgz7wsy6bcfko4hte2hni.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le site Web de Yahoo, le coefficient bêta de Mosbirzhi diffère légèrement à la hausse. </font><font style="vertical-align: inherit;">Mais je dois honnêtement admettre que le calcul de certaines autres actions de la bourse russe a montré des différences plus importantes, mais dans l'intervalle. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w8/re/zg/w8rezgmmmshfkvnooj3bgbwpezg.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Même analyse pour l'action FB et l'indice SP500. </font><font style="vertical-align: inherit;">Ici, le calcul, comme dans l'original, s'effectue à travers le rendement mensuel.</font></font><br>
<br>
<pre><code class="python hljs">sp_500 = yf.download(<span class="hljs-string">'^GSPC'</span>)<font></font>
fb = yf.download(<span class="hljs-string">'FB'</span>)<font></font>
<font></font>
<span class="hljs-comment">#    </span>
fb = fb.resample(<span class="hljs-string">'BM'</span>).apply(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">-1</span>])<font></font>
sp_500 = sp_500.resample(<span class="hljs-string">'BM'</span>).apply(<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">-1</span>])<font></font>
<font></font>
monthly_prices = pd.concat([fb[<span class="hljs-string">'Close'</span>], sp_500[<span class="hljs-string">'Close'</span>]], axis=<span class="hljs-number">1</span>)<font></font>
monthly_prices.columns = [<span class="hljs-string">'FB'</span>, <span class="hljs-string">'^GSPC'</span>]<font></font>
<font></font>
monthly_returns = monthly_prices.pct_change(<span class="hljs-number">1</span>)<font></font>
clean_monthly_returns = monthly_returns.dropna(axis=<span class="hljs-number">0</span>)  <font></font>
<font></font>
X = clean_monthly_returns[<span class="hljs-string">'^GSPC'</span>]<font></font>
y = clean_monthly_returns[<span class="hljs-string">'FB'</span>]<font></font>
<font></font>
X1 = sm.add_constant(X)<font></font>
<font></font>
model_fb_sp_500 = sm.OLS(y, X1)<font></font>
<font></font>
results_fb_sp_500 = model_fb_sp_500.fit()<font></font>
print(results_fb_sp_500.summary())<font></font>
</code></pre><br>
<img src="https://habrastorage.org/webt/pb/67/sa/pb67saq7ogsncggyw-syzplqciu.jpeg" alt="image"><br>
<br>
<img src="https://habrastorage.org/webt/iq/kn/t5/iqknt566j5ed_mz7gzmhwt0gyyk.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, tout coïncidait et confirmait la possibilité d'utiliser des modèles statistiques pour déterminer le coefficient bêta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, et en bonus - si vous voulez n'obtenir que de la beta - vous voulez laisser le coefficient et le reste des statistiques de côté, alors un autre code est proposé pour le calculer:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> stats<font></font>
slope, intercept, r_value, p_value, std_err = stats.linregress(X, y)<font></font>
<font></font>
print(slope)<font></font>
<font></font>
<span class="hljs-number">1.0568997978702754</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Certes, cela ne signifie pas que toutes les autres valeurs obtenues doivent être ignorées, mais la connaissance des statistiques sera nécessaire pour les comprendre. </font><font style="vertical-align: inherit;">Je vais donner un petit extrait des valeurs obtenues:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> R au carré, qui est le coefficient de détermination et prend des valeurs de 0 à 1. Plus la valeur du coefficient est proche de 1, plus la dépendance est forte;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adj. </font><font style="vertical-align: inherit;">R au carré - R au carré ajusté en fonction du nombre d'observations et du nombre de degrés de liberté;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> std err - erreur standard d'estimation de coefficient;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P&gt; | t | </font><font style="vertical-align: inherit;">- valeur p Une valeur inférieure à 0,05 est considérée comme statistiquement significative;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,025 et 0,975 sont les valeurs inférieures et supérieures de l'intervalle de confiance.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout pour le moment. </font><font style="vertical-align: inherit;">Bien sûr, il est intéressant de rechercher une relation entre différentes valeurs afin de prédire l'autre à travers l'une et d'obtenir un profit. </font><font style="vertical-align: inherit;">Dans l'une des sources étrangères, l'indice a été prédit grâce au taux d'intérêt et au taux de chômage. </font><font style="vertical-align: inherit;">Mais si la variation du taux d'intérêt en Russie peut être prise sur le site Web de la Banque centrale, je continue de chercher d'autres. </font><font style="vertical-align: inherit;">Malheureusement, le site Web de Rosstat n'a pas pu trouver les sites pertinents. </font><font style="vertical-align: inherit;">Il s'agit de la publication finale dans les articles de l'analyse financière générale.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr496782/index.html">Comment j'ai refusé de calculer la racine carrée</a></li>
<li><a href="../fr496790/index.html">Unigine Engine - Nouveau Unique</a></li>
<li><a href="../fr496792/index.html">Dessiner un graphique avec le Caire dans GTK3</a></li>
<li><a href="../fr496802/index.html">Simple Made Easy - Rich Hickey (avec traduction en russe)</a></li>
<li><a href="../fr496804/index.html">Installation et configuration de Docker sur le sous-système Windows Linux (WSL)</a></li>
<li><a href="../fr496812/index.html">Zoom - négligence banale ou espionnage ciblé?</a></li>
<li><a href="../fr496816/index.html">Pouvez-vous sentir le candidat, est-il vivant?</a></li>
<li><a href="../fr496818/index.html">Des centaines de milliers de routes par seconde par cœur. Expérience Yandex.Routing</a></li>
<li><a href="../fr496820/index.html">Pièges de Terraform</a></li>
<li><a href="../fr496822/index.html">Comment les startups aux États-Unis meurent à cause du coronavirus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>