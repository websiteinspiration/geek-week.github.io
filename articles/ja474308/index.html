<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⬛️ 👨🏾‍🤝‍👨🏻 👩🏼‍💻 Pythonで記述されたHTTP APIのタイプ：Instagramの経験 🔮 🛌🏾 💗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今日は、InstagramでのPythonの使用に関するシリーズの2番目の資料を公開しています。最後の時間は、それがサーバーコードのInstagramの種類をチェックしていました。サーバーはPythonで書かれたモノリスです。数百万行のコードで構成され、数千のDjangoエンドポイントがあります。 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pythonで記述されたHTTP APIのタイプ：Instagramの経験</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/474308/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">今日は、InstagramでのPythonの使用に関するシリーズの2番目の資料を公開しています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の時間は、それがサーバーコードのInstagramの種類をチェックしていました。</font><font style="vertical-align: inherit;">サーバーはPythonで書かれたモノリスです。</font><font style="vertical-align: inherit;">数百万行のコードで構成され、数千のDjangoエンドポイントがあります。</font><font style="vertical-align: inherit;">
この記事では、Instagramがタイプを使用してHTTP APIを文書化し、HTTP APIを操作するときにコントラクトを適用する方法に焦点を当てています。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/nn/gh/jg/nnghjgmcauejll98mv34awk3cok.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状況の概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instagramモバイルクライアントを開くと、HTTPプロトコルを介して、Python（Django）サーバーのJSON-APIにアクセスします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、モバイルクライアントの作業を整理するために使用するAPIの複雑さを理解するためのシステムに関する情報です。</font><font style="vertical-align: inherit;">これが私たちが持っているものです：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー上の2000を超えるエンドポイント。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの画像、ビデオ、またはストーリーを表すクライアントデータオブジェクトの200を超えるトップレベルフィールド。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーコードを作成する何百人ものプログラマー（さらにはクライアントを扱うプログラマーも）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">毎日行われ、APIを変更するサーバーコードへの数百のコミット。</font><font style="vertical-align: inherit;">これは、新しいシステム機能をサポートするために必要です。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイプを使用して、複雑で絶えず進化するHTTP APIを文書化し、それらを使用するときに契約を実施します。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初から始めましょう。</font><font style="vertical-align: inherit;">Pythonコードの型注釈の構文の説明は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PEP 484に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登場しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">なぜ型注釈をコードに追加するのですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スターウォーズのヒーローに関する情報をダウンロードする関数を考えてみましょう：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_character</span>(<span class="hljs-params">id, calendar</span>):</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> id == <span class="hljs-number">1000</span>:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> Character(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id=<span class="hljs-number">1000</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name=<span class="hljs-string">"Luke Skywalker"</span>,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;birth_year=<span class="hljs-string">"19BBY"</span> <span class="hljs-keyword">if</span> calendar == Calendar.BBY <span class="hljs-keyword">else</span> ...<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数を理解するには、そのコードを読む必要があります。</font><font style="vertical-align: inherit;">これを実行すると、次のことがわかります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字</font><font style="vertical-align: inherit;">の整数識別子（</font><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">受け入れます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">対応する列挙型（</font></font><code>calendar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">から値を取得し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">たとえば</font></font><code>Calendar.BBY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、「ヤヴィンの戦いの前」、つまり「ヤヴィンの戦いの前」を意味します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは、この文字の識別子、名前、および誕生年を表すフィールドを含むエンティティの形式で、文字に関する情報を返します。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数には暗黙のコントラクトがあり、プログラマが関数コードを読み取るたびに復元する必要があるという意味です。ただし、関数コードは1回だけ作成され、何度も読み取る必要があるため、このコードを操作するこのアプローチは、特に優れているわけではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、関数を呼び出すメカニズムが上記の暗黙の規約に準拠していることを確認することは困難です。同様に、この契約が関数本体で尊重されていることを確認することは困難です。大規模なコードベースでは、このような状況はエラーを引き起こす可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、型注釈を宣言する同じ関数を考えます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_character</span>(<span class="hljs-params">id: int, calendar: Calendar</span>) -&gt; Character:</span>
&nbsp;&nbsp;&nbsp;&nbsp;...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
型注釈を使用すると、この関数の規約を明示的に表現できます。</font><font style="vertical-align: inherit;">関数に入力する必要があるものと、この関数が返すものを理解するには、そのシグネチャを読んでください。</font><font style="vertical-align: inherit;">型チェックシステムは、関数を静的に分析し、コード内の契約への準拠を検証できます。</font><font style="vertical-align: inherit;">これにより、クラス全体のエラーを取り除くことができます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまなHTTP APIのタイプ</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スターウォーズのヒーローに関する情報を受け取ることができるHTTP-APIを開発します。</font><font style="vertical-align: inherit;">このAPIを使用するときに使用される明示的なコントラクトを説明するために、型注釈を使用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APIは、</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字</font><font style="vertical-align: inherit;">識別子（</font><font style="vertical-align: inherit;">）をURLパラメータ</font></font><code>calendar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">として</font><font style="vertical-align: inherit;">、列挙値</font><font style="vertical-align: inherit;">を要求パラメータとして</font><font style="vertical-align: inherit;">受け入れる必要があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">APIは、文字情報を含むJSON応答を返す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APIリクエストは次のようになり、返されるレスポンスは次のとおりです。</font></font><br>
<br>
<pre><code class="plaintext hljs">curl -X GET https://api.starwars.com/characters/1000?calendar=BBY<font></font>
{<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;"id": 1000,<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;"name": "Luke Skywalker",<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;"birth_year": "19BBY"<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このAPIをDjangoに実装するには、最初にURLパスと、このパスに沿って作成されたHTTPリクエストを受信して​​応答を返すプレゼンテーション関数を登録する必要があります。</font></font><br>
<br>
<pre><code class="python hljs">urlpatterns = [<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;url(<span class="hljs-string">"characters/&lt;id&gt;/"</span>, get_character)<font></font>
]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数は、入力として、要求とURLパラメーター（この場合は- </font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）を</font><font style="vertical-align: inherit;">受け入れます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは</font></font><code>calendar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、対応する列挙からの値である</font><font style="vertical-align: inherit;">、目的のタイプのクエリパラメータを解析して導き</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">リポジトリから文字データを読み込み、JSONでシリアル化され、HTTP応答でラップされた辞書を返します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_character</span>(<span class="hljs-params">request: IGWSGIRequest, id: str</span>) -&gt; JsonResponse:</span>
&nbsp;&nbsp;&nbsp;&nbsp;calendar = Calendar(request.GET.get(<span class="hljs-string">"calendar"</span>, <span class="hljs-string">"BBY"</span>))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;character = Store.get_character(id, calendar)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> JsonResponse(asdict(character))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数には型注釈が付いていますが、HTTP APIのハードコントラクトは明示的に記述されていません。</font><font style="vertical-align: inherit;">この関数のシグネチャから、リクエストパラメータの名前やタイプ、またはレスポンスフィールドとそのタイプを見つけることができません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数表現のシグネチャを、以前に考慮された型注釈付きの関数のシグネチャとまったく同じ情報を提供することは可能ですか？</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_character</span>(<span class="hljs-params">id: int, calendar: Calendar</span>) -&gt; Character:</span>
&nbsp;&nbsp;&nbsp;&nbsp;...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数パラメーターは、クエリパラメーター（URL、クエリ、またはクエリ本文パラメーター）にすることができます。</font><font style="vertical-align: inherit;">関数によって返される値のタイプは、応答の内容を表す場合があります。</font><font style="vertical-align: inherit;">このアプローチでは、HTTP APIの明確に定義された理解可能な契約が自由に利用でき、その遵守は型チェックシステムによって保証されます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアイデアを実装するには？</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">デコレータ</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用して</font><font style="vertical-align: inherit;">、厳密に型指定された表現関数をDjango表現関数に変換します。</font><font style="vertical-align: inherit;">このステップでは、Djangoフレームワークの操作に関して変更を加える必要はありません。</font><font style="vertical-align: inherit;">これまでと同じミドルウェア、同じルート、その他のコンポーネントを使用できます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@api_view</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_character</span>(<span class="hljs-params">id: int, calendar: Calendar</span>) -&gt; Character:</span>
&nbsp;&nbsp;&nbsp;&nbsp;...</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デコレーター実装の詳細を検討してください</font></font><code>api_view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">api_view</span>(<span class="hljs-params">view</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;@functools.wraps(view)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">django_view</span>(<span class="hljs-params">request, *args, **kwargs</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params = {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;param_name: param.annotation(extract(request, param))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">for</span> param_name, param <span class="hljs-keyword">in</span> inspect.signature(view).parameters.items()<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data = view(**params)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> JsonResponse(asdict(data))<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> django_view</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは理解するのが難しいコードです。</font><font style="vertical-align: inherit;">その特徴を分析してみましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力値として、強く型付けされた表現関数を取り、それを通常のDjango表現関数でラップします。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">api_view</span>(<span class="hljs-params">view</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;@functools.wraps(view)<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">django_view</span>(<span class="hljs-params">request, *args, **kwargs</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> django_view</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Djangoビュー関数の実装を見てみましょう。</font><font style="vertical-align: inherit;">まず、強く型付けされたプレゼンテーション関数の引数を作成する必要があります。</font><font style="vertical-align: inherit;">イントロスペクションと</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インスペクション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モジュール</font><font style="vertical-align: inherit;">を使用して、この関数のシグネチャを取得し、そのパラメーターを反復処理します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">for</span> param_name, param <span class="hljs-keyword">in</span> inspect.signature(view).parameters.items()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パラメータごとに</font></font><code>extract</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リクエストからパラメータ値を取得</font><font style="vertical-align: inherit;">する関数を呼び出し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、パラメーターをシグニチャーで指定された予期されるタイプにキャストします（例えば、ストリング</font></font><code>calendar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を列挙要素を表す値に</font><font style="vertical-align: inherit;">キャストします</font></font><code>Calendar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br>
<pre><code class="python hljs">param.annotation(extract(request, param))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
構築した引数を使用して、強く型付けされた表現関数を呼び出します。</font></font><br>
<br>
<pre><code class="python hljs">data = view(**params)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数は、強く型付けされたクラス値を返します</font></font><code>Character</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この値を取得して辞書に変換し、JSON形式のHTTP応答でラップします。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">return</span> JsonResponse(asdict(data))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いいね！</font><font style="vertical-align: inherit;">これで、厳密に型指定されたビュー関数をラップするDjangoビュー関数ができました。</font><font style="vertical-align: inherit;">最後に、関数を見てみましょう</font></font><code>extract</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">extract</span>(<span class="hljs-params">request: HttpRequest, param: Parameter</span>) -&gt; Any:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">if</span> request.resolver_match.route.contains(<span class="hljs-string">f"&lt;<span class="hljs-subst">{param}</span>&gt;"</span>):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> request.resolver_match.kwargs.get(param.name)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">else</span>:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> request.GET.get(param.name)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各パラメーターは、URLパラメーターまたは要求パラメーターにすることができます。</font><font style="vertical-align: inherit;">リクエストURLパス（最初に登録したパス）は、Django URLロケーターシステムのルートオブジェクトで使用できます。</font><font style="vertical-align: inherit;">パスのパラメーター名を確認します。</font><font style="vertical-align: inherit;">名前がある場合、URLパラメータがあります。</font><font style="vertical-align: inherit;">これは、リクエストから何らかの方法でそれを抽出できることを意味します。</font><font style="vertical-align: inherit;">それ以外の場合、これはクエリパラメータであり、抽出することもできますが、他の方法でも可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です。</font><font style="vertical-align: inherit;">これは簡略化された実装ですが、APIを入力する基本的な考え方を示しています。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ型</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP応答のコンテンツを表すために使用されるタイプ（つまり- </font></font><code>Character</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は、データクラスまたは型付き辞書のいずれかで表すことができます。</font><font style="vertical-align: inherit;">データ</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、データを表すコンパクトなクラス記述形式です。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-meta">@dataclass(frozen=True)</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Character</span>:</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;id: int<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;name: str<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;birth_year: str<font></font>
luke = Character(<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;id=<span class="hljs-number">1000</span>,&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;name=<span class="hljs-string">"Luke Skywalker"</span>,&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;birth_year=<span class="hljs-string">"19BBY"</span>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instagramは通常、HTTP応答オブジェクトをモデル化するためにデータクラスを使用します。</font><font style="vertical-align: inherit;">主な機能は次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼らは自動的にテンプレートデザインと様々なヘルパーメソッドを生成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらはタイプチェックシステムにとって理解可能です。つまり、値はタイプチェックの対象となる可能性があります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼らは設計を通じて免疫を維持します</font></font><code>frozen=True</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらは、Python 3.7標準ライブラリで、またはPythonパッケージインデックスのバックポートとして使用できます。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
残念ながら、Instagramには、関数とモジュールの間で渡される、型のない大きな辞書を使用する古いコードベースがあります。</font><font style="vertical-align: inherit;">このすべてのコードを辞書からデータクラスに変換することは困難です。</font><font style="vertical-align: inherit;">その結果、新しいコードにはデータクラスを使用し、古いコードでは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型付き辞書</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用しています</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
型付き辞書を使用すると、クライアント辞書オブジェクトに型注釈を追加でき、作業中のシステムの動作を変更せずに型チェック機能を使用できます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> mypy_extensions <span class="hljs-keyword">import</span> TypedDict
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Character</span>(<span class="hljs-params">TypedDict</span>):</span><font></font>
&nbsp;&nbsp;&nbsp;&nbsp;id: int<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;name: str<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;birth_year: str<font></font>
luke: Character = {<span class="hljs-string">"id"</span>: <span class="hljs-number">1000</span>}<font></font>
luke[<span class="hljs-string">"name"</span>] = <span class="hljs-string">"Luke Skywalker"</span>
luke[<span class="hljs-string">"birth_year"</span>] = <span class="hljs-number">19</span>&nbsp; <span class="hljs-comment"># type error, birth_year expects a str</span>
luke[<span class="hljs-string">"invalid_key"</span>]&nbsp; <span class="hljs-comment"># type error, invalid_key does not exist</span></code></pre><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー処理</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プレゼンテーション関数は、エンティティとしての文字に関する情報を返すことが期待されています</font></font><code>Character</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">クライアントにエラーを返す必要がある場合はどうすればよいですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
フレームワークによってキャッチされ、エラー情報を含むHTTP応答に変換される例外をスローできます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">@api_view("GET")</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_character</span>(<span class="hljs-params">id: str, calendar: Calendar</span>) -&gt; Character:</span>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">try</span>:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span> Store.get_character(id)
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">except</span> CharacterNotFound:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">raise</span> Http404Exception()</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例は、このAPIに許可されるHTTPメソッドを設定するデコレーターのHTTPメソッドも示しています。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ツール</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP APIは、HTTPメソッド、要求タイプ、および応答タイプを使用して強く型付けされています。</font><font style="vertical-align: inherit;">このAPIをイントロスペクト</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、URLパスに</font><font style="vertical-align: inherit;">文字列</font><font style="vertical-align: inherit;">があり</font></font><code>calendar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クエリ文字列の対応する列挙に関連</font><font style="vertical-align: inherit;">する値を持つ</font><font style="vertical-align: inherit;">GETリクエストを受け入れる必要があると判断でき</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">また、そのようなリクエストへの応答として、JSONレスポンスにエンティティに関する情報を含める必要があることもわかります</font></font><code>Character</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このすべての情報で何ができるでしょうか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openapi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-これは、豊富な補助ツールセットの作成に使用されるAPI記述形式です。</font><font style="vertical-align: inherit;">これは全体のエコシステムです。</font><font style="vertical-align: inherit;">エンドポイントのイントロスペクションを実行し、受信したデータに基づいてOpenAPI仕様を生成するためのコードを記述する場合、これはこれらのツールの機能があることを意味します。</font></font><br>
<br>
<pre><code class="python hljs">paths:<font></font>
&nbsp;&nbsp;/characters/{id}:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;get:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="hljs-keyword">in</span>: path<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: id<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: integer<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required: true<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="hljs-keyword">in</span>: query<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: calendar<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: string<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enum: [<span class="hljs-string">"BBY"</span>]<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;responses:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string">'200'</span>:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;application/json:<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema:&nbsp;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: object<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</code></pre><br><font style="vertical-align: inherit;"></font><code>get_character</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前、タイプ、リクエスト、レスポンス情報を含む</font><font style="vertical-align: inherit;">
APIのHTTP-APIドキュメントを生成できます</font><font style="vertical-align: inherit;">。これは、適切なエンドポイントへの要求を満たす必要があるクライアント開発者にとって適切なレベルの抽象化です。このエンドポイントのPython実装コードを読み取る必要はありません。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/673/e79/28e/673e7928eb5c55d4d6ec83c506eaf450.png"><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIドキュメント</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これに基づいて、追加のツールを作成できます。たとえば、ブラウザからリクエストを実行する手段です。これにより、開発者はコードを記述することなく、関心のあるHTTP APIにアクセスできます。タイプセーフなクライアントコードを生成して、クライアントとサーバーの両方で型が正しく機能するようにすることもできます。このため、サーバー上で厳密に型指定されたAPIを自由に使用でき、呼び出しは厳密に型指定されたクライアントコードを使用して実行されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、下位互換性チェックシステムを作成できます。私たちは、あなたが問題のAPIにアクセスするために使用する必要のあるサーバコードの新しいバージョンをリリースした場合はどうなります</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>birth_year</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、そして私たちはすべてのキャラクターの誕生年を知っているわけではないことを理解していますか？</font><font style="vertical-align: inherit;">この場合、パラメーター</font></font><code>birth_year</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をオプションにする必要があり</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">が、同時に、同様のパラメーターを期待する古いバージョンのクライアントは単に機能しなくなる可能性があります。</font><font style="vertical-align: inherit;">APIは明示的なタイピングが異なりますが、対応するタイプは変わる可能性があります（たとえば、キャラクターの誕生年の使用が最初に必須で、その後オプションになった場合、APIは変更されます）。</font><font style="vertical-align: inherit;">APIの変更を追跡し、適切なタイミングでプロンプトを表示することでAPI開発者に警告することができます。</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンピュータが相互に通信するために使用できるアプリケーションプロトコルには、さまざまな種類があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この範囲の片側は、ThriftやgRPCなどのRPCフレームワークによって表されます。これらは通常、要求と応答に厳密なタイプを設定し、要求の操作を整理するためのクライアントコードとサーバーコードを生成するという点で異なります。 HTTPがなくても、JSONがなくても可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一方、Pythonで記述された非構造化Webフレームワークには、要求と応答の明示的なコントラクトがないものがあります。私たちのアプローチは、より明確に構造化されたフレームワークの典型的な機会を提供しますが、同時にHTTP + JSONバンドルを引き続き使用できるようにし、アプリケーションコードに最小限の変更を加える必要があるという事実に貢献します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアイデアは新しいものではないことに注意することが重要です。</font><font style="vertical-align: inherit;">私たちが説明した機能を開発者に提供する、強く型付けされた言語で書かれた多くのフレームワークがあります。</font><font style="vertical-align: inherit;">Pythonについて話す場合、これはたとえば</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIStar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレームワーク</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTP APIのタイプの使用を正常に委託しました。</font><font style="vertical-align: inherit;">APIを既存のプレゼンテーション機能に十分に適用できるという事実により、コードベース全体でAPIの入力に上記のアプローチを適用することができました。</font><font style="vertical-align: inherit;">私たちがしたことの価値は、すべてのプログラマーに明らかです。</font><font style="vertical-align: inherit;">つまり、自動生成されたドキュメントがサーバーを開発する人とInstagramクライアントを書く人との間の効果的なコミュニケーション手段になったということです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読者の皆様！</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PythonプロジェクトでHTTP APIの設計にどのように取り組みますか？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><div style="text-align:center;"><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></div></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja474294/index.html">バイナリー互換性：今または絶対</a></li>
<li><a href="../ja474298/index.html">P2Pゲートウェイのカード間転送操作の実装</a></li>
<li><a href="../ja474300/index.html">U2Fの信頼性が高く、安全で用途の広いバックアップ</a></li>
<li><a href="../ja474302/index.html">効果的なアプリケーションユーザビリティテストスクリプトの作成方法</a></li>
<li><a href="../ja474306/index.html">ポインティング、フォーカス、アクティブ状態のスタイルを変える。</a></li>
<li><a href="../ja474310/index.html">CSSに乱数はありますか？</a></li>
<li><a href="../ja474312/index.html">Windows Server CoreへのGUIのインストール</a></li>
<li><a href="../ja474316/index.html">自家製の電気自動車-パート1.すべての始まりと、YouTubeでの1,000,000回の視聴の記録</a></li>
<li><a href="../ja474318/index.html">仮想テーブルテーブルとは何ですか？</a></li>
<li><a href="../ja474320/index.html">DDDコミュニティ危機</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>