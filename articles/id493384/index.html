<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🌾 🤾🏻 🈴 Bukan sehari tanpa olah raga: memprogram ulang monitor detak jantung Tiongkok 🛀🏻 🏂🏽 🐒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Dengar, detak jantung macam apa yang harus kamu miliki saat jogging?" 
 - Ya, saya tidak tahu - 150 hit 
 - Ya? Mengapa saya punya 840? 
 - 840 per m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bukan sehari tanpa olah raga: memprogram ulang monitor detak jantung Tiongkok</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493384/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Dengar, detak jantung macam apa yang harus kamu miliki saat jogging?" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Ya, saya tidak tahu - 150 hit </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Ya? Mengapa saya punya 840? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 840 per menit ?! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Dan apa, itu perlu dipertimbangkan dalam satu menit atau apa? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Apa yang kamu pikirkan?" </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Yah, aku baru menghitung sampai aku tersesat ... Jadi, oke, aku pergi untuk menceritakan." </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(film "Hari Pemilihan") </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hampir persis tentang monitor detak jantung Cina. Seperti kata pepatah, jika Anda ingin melakukan sesuatu dengan baik, maka lakukan sendiri. Dan jika perangkat tidak berfungsi seperti yang diminta, maka mungkin akan mungkin untuk memperbaikinya?</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/fe/pp/23/fepp230sxqy_lyvvcnoihcc1_ey.png"></div><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Banyak orang yang tertarik dalam olahraga memantau detak jantung mereka selama berolahraga. </font><font style="vertical-align: inherit;">Untuk ini, monitor detak jantung digunakan. </font><font style="vertical-align: inherit;">Bukan tugas artikel ini untuk mempertimbangkan semua tipenya, tetapi salah satu yang paling dapat diandalkan dan terbukti adalah sensor denyut nadi dada yang menerima sinyal listrik dari jantung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sehubungan dengan aktivitas fisik saya yang sangat meningkat, monitor </font></font><abbr title="Detak jantung"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">denyut jantung</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kyto 2809 </font><font style="vertical-align: inherit;">dibeli </font><font style="vertical-align: inherit;">. Denyut nadi baik, tetapi ada kebutuhan untuk pengukuran interval RR yang akurat. </font><font style="vertical-align: inherit;">Monitor detak jantung mendukung dua protokol: ANT + dan BLE. </font><font style="vertical-align: inherit;">Menurut spesifikasinya, keduanya, selain secara langsung detak jantung, mentransmisikan durasi interval RR.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apa itu interval RR</font></font></b><div class="spoiler_text">RR  –     R    .<br>
<br>
<img src="https://habrastorage.org/webt/yd/in/ea/ydineadtr4darurwgdkucttqlse.png"><br>
 RR   ,  .     .        ,   (.    «  RR »   « »).         .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk merekam data dari kedua saluran, aplikasi Android ditulis untuk memenuhi kebutuhan Anda dengan log data ke file teks. </font><font style="vertical-align: inherit;">Monitor detak jantung analog dikirim sebagai standar yang kurang lebih memadai, mengirimkan sinyal pada frekuensi 5,3 kHz, terhubung langsung ke PC melalui arduino. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perbandingan pertama agak sedih.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/kf/yp/xw/kfypxwjqzbjd1jif9yp-dh9kto0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Perangkat" untuk satu denyut jantung nyata menunjukkan 4-5 tidak ada (pada grafik biru Anda dapat melihat banyak poin). </font><font style="vertical-align: inherit;">Denyut nadi, bahkan dengan mempertimbangkan kemungkinan rata-rata, tidak bersinar dengan akurat. </font><font style="vertical-align: inherit;">Tentang mengukur interval bicara RR tidak berjalan sama sekali. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Komunikasi dengan pabrikan tidak membuahkan hasil. </font><font style="vertical-align: inherit;">Selain beberapa video, upaya untuk meyakinkan saya bahwa semuanya baik-baik saja, dan frasa: "data denyut jantung KYTO2809 akurat!", Saya tidak mendapatkan apa pun dari mereka. </font><font style="vertical-align: inherit;">Lalu tatapannya jatuh pada kotak dengan obeng. </font><font style="vertical-align: inherit;">Membuka kasing, saya menemukan chip nRF51422.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/au/wi/0b/auwi0bchg8cuiqj74jaz-elv49g.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengetahui bahwa ada SDK untuk MK ini, saya memutuskan untuk mencoba merombaknya. </font><font style="vertical-align: inherit;">Program paling sederhana diperlukan di sana: dari penguat sinyal listrik jantung (setetes hitam di foto), sinyal masuk ke input MK, dan kemudian itu masalah teknik, kami menangkap pulsa melalui interupsi, mengukur waktu di antara mereka dan menampilkan semua ini melalui BLE dan ANT +. </font><font style="vertical-align: inherit;">Semuanya sederhana, tetapi tampaknya ada yang salah dengan programmer China. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chip ini diprogram melalui SWD. </font><font style="vertical-align: inherit;">Firmware asli dilindungi dari pembacaan. </font><font style="vertical-align: inherit;">Oleh karena itu, tanpa ragu-ragu, perintah </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"format c:"</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "--eraseall" dijalankan. </font><font style="vertical-align: inherit;">Papan bahkan menampilkan kontak yang sesuai. </font><font style="vertical-align: inherit;">Input dari penguat sinyal listrik jantung P0.07. </font><font style="vertical-align: inherit;">Pinout dari modul BLE itu sendiri adalah (atas ke bawah):</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GND</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vdd</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.30</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.00</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.01</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.02</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.03</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.04</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.05</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.06</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.07</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P0.08</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SDK berisi banyak contoh yang cukup untuk menulis firmware Anda sendiri. Chipnya sudah cukup tua dan SDK untuk itu juga sudah ketinggalan zaman, versi 10. Menggunakannya, layanan BLE dinaikkan pada monitor detak jantung: Informasi Perangkat, Layanan Baterai, Denyut Jantung. Profil HeartRate telah ditambahkan untuk ANT +. Kami mengukur interval RR dengan penghitung waktu, mengirim data ke profil BLE dan ANT +. Untuk menghemat biaya tanpa adanya rangsangan eksternal (dalam 5 detik), monitor detak jantung dimasukkan ke mode tidur. Ketika sebuah pulsa muncul (gangguan pada input), MK bangun. Dalam firmware dari pabrikan, Kyto2809 terus-menerus mengirimkan paket iklan melalui BLE, mis. bila hanya menggunakan saluran ANT +, BLE terus mengirim paket dan menguras baterai. Saya membatasi waktu iklan hingga 5 menit, yang seharusnya memiliki efek positif pada profitabilitas.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengujian telah menunjukkan bahwa untuk parameter Detak Jantung Dihitung lebih baik untuk memperkenalkan penyaringan (membuang data yang tidak akurat, mis., Pulsa di bawah 30 dan di atas 240) dan rata-rata dengan rata-rata bergerak. Perbandingan terakhir dengan monitor detak jantung analog di bawah ini. Perbedaan dalam pengukuran interval RR 0-2 ms, yang cukup dapat diterima.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/aa/rw/qw/aarwqwkdl2sg16sbflzjv2itsw0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dari fungsi yang bermanfaat, kemampuan untuk memperbarui firmware OTA (nama asli DFU OTA) telah ditambahkan. </font><font style="vertical-align: inherit;">Sekarang, setelah menjahit OTA-bootloader, Anda dapat dengan mudah memperbarui firmware jika Anda ingin mengubah sesuatu dalam kode. </font><font style="vertical-align: inherit;">Firmware dilakukan dari smartphone melalui utilitas milik nRFConnect. </font><font style="vertical-align: inherit;">Juga, jika saya tidak salah, Anda dapat membuat dukungan OTA di aplikasi Android Anda, ada perpustakaan untuk ini. </font><font style="vertical-align: inherit;">Sayangnya, untuk mengisi bootloader di memori, Anda harus terhubung melalui SWD, karena </font><font style="vertical-align: inherit;">OTA pada awalnya tidak disediakan oleh pabrikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Urutan firmware:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami menjahit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoftDevice310</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , itu adalah BLE dan ANT + setumpuk dari Nordic;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kami menjahit Kyto_DFU_bootloader.hex (kasing dapat dirakit);</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">melalui nRFConnect isi paket kyto_hr_dfu.zip yang sudah jadi</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dua file terakhir ada di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ada juga firmware tanpa OTA (KytoHR.hex).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id493374/index.html">Coronavirus - tips praktis dan sedikit teori</a></li>
<li><a href="../id493376/index.html">The Big Initiative Theory - Pengalaman Rusia dalam Transformasi Digital Perusahaan Industri</a></li>
<li><a href="../id493378/index.html">Steam memiliki Anda: bagaimana distribusi digital menghilangkan game kami</a></li>
<li><a href="../id493380/index.html">Julia dan komputasi kuantum</a></li>
<li><a href="../id493382/index.html">.NET Core Windows Bentuk Pembaruan Desainer</a></li>
<li><a href="../id493386/index.html">Bagaimana cara merawat coronavirus?</a></li>
<li><a href="../id493390/index.html">Memperkenalkan .NET 5 Pratinjau 1</a></li>
<li><a href="../id493392/index.html">Pembelajaran Mesin di Kazan, atau bagaimana spesialis pembelajaran mesin dilatih di Tatarstan</a></li>
<li><a href="../id493394/index.html">Sindrom Tuhan: kisah tentang bagaimana penyebaran penyakit utama spesialis koronavirus Wilayah Stavropol (a) *</a></li>
<li><a href="../id493396/index.html">Abstrak tentang metode peramalan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>