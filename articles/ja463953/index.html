<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😿 🍇 👲🏽 Unityでのコマンドデザインパターンの実装 🤾🏼 🧙🏽 🧥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Super Meat Boyの ようなゲームでリプレイ機能がどのように実装されているのか疑問に思ったことはありませんか？これを実装する方法の1つは、プレーヤーが行ったのと同じ方法で入力を実行することです。つまり、入力を何らかの方法で保存する必要があります。このためにコマンドパターンを使用できます。
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Unityでのコマンドデザインパターンの実装</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463953/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fef/cfb/edf/fefcfbedf0b2e0711f2e831b0d069ebf.gif" alt="画像"></div><br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Super Meat Boy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><font style="vertical-align: inherit;">
ようなゲームで</font><font style="vertical-align: inherit;">リプレイ機能が</font><font style="vertical-align: inherit;">どのように</font><font style="vertical-align: inherit;">実装されているのか</font><font style="vertical-align: inherit;">疑問に思った</font><font style="vertical-align: inherit;">ことはありませんか？</font><font style="vertical-align: inherit;">これを実装する方法の1つは、プレーヤーが行ったのと同じ方法で入力を実行することです。つまり、入力を何らかの方法で保存する必要があります。</font><font style="vertical-align: inherit;">このため</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">にコマンドパターン</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドテンプレートは、戦略ゲームで元に戻す機能とやり直し機能を作成する場合にも役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このチュートリアルでは、C＃でコマンドテンプレートを実装し、それを使用してボットキャラクターを3次元の迷路に案内します。</font><font style="vertical-align: inherit;">チュートリアルから次のことを学びます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドパターンの基本。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドパターンの実装方法</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力コマンドのキューを作成し、その実行を延期する方法。</font></font></li>
</ul><a name="habracut"></a><br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：読者はすでにUnityに精通しており、C＃の平均的な知識があることが前提です。</font><font style="vertical-align: inherit;">このチュートリアルでは、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unity 2019.1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C＃7を使用し</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">働き始める</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はじめに、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクト資料を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロードしてください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ファイルを解凍し、Unityで</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スターター</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロジェクトを開きます</font><font style="vertical-align: inherit;">。</font><em><font style="vertical-align: inherit;">RW / Scenesに</font></em></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
移動し</font><font style="vertical-align: inherit;">、</font><em><font style="vertical-align: inherit;">Main</font></em><font style="vertical-align: inherit;">シーンを開き</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">シーンは、ボットと迷路、および指示を表示するターミナルUIで構成されています。</font><font style="vertical-align: inherit;">レベルデザインはグリッドの形で作られています。これは、ボットを迷路内で視覚的に移動するときに役立ちます。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/53b/ab9/660/53bab9660bdd0a5017b570d43a57b2d9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再生</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]をクリックする</font><font style="vertical-align: inherit;">と、指示が機能しないことがわかります。</font><font style="vertical-align: inherit;">この機能をチュートリアルに追加するので、これは正常です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シーンの最も興味深い部分はGameObject </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bot</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">階層ウィンドウでクリックして選択します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/187/35e/acf/18735eacfd1f8df8920749ea80a12b8f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
インスペクタで、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボット</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネントがあることがわかります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このコンポーネントを使用するには、入力コマンドを発行します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2a5/2e3/2bc/2a52e32bc7feb6baafae6af958cc4910.png"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボットのロジックを理解している</font></font></h2><br><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RW / Scriptsに</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
移動し</font><font style="vertical-align: inherit;">、コードエディターで</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bot </font></font></em><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">スクリプト</font></em><font style="vertical-align: inherit;">を開きます</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボット</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトで何が起こっているかを知る必要はありません</font><font style="vertical-align: inherit;">。しかし、2つの方法を見てみましょう：</font></font><code>Move</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>Shoot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。繰り返しますが、これらのメソッド内で何が起こっているのかを理解する必要はありませんが、それらの使用方法を理解する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メソッド</font></font><code>Move</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が入力パラメーターを受け取る</font><font style="vertical-align: inherit;">ことに注意して</font><font style="vertical-align: inherit;">ください</font></font><code>CardinalDirection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>CardinalDirection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列挙です。列挙型の要素を</font></font><code>CardinalDirection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">することができ</font></font><code>Up</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Down</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Right</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>Left</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。選択した</font></font><code>CardinalDirection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボットに</font><font style="vertical-align: inherit;">応じ</font><font style="vertical-align: inherit;">て、グリッドに沿って対応する方向に正確に1マス移動します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02c/72e/8ca/02c72e8ca19f987e6e36774558242058.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法で</font></font><code>Shoot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ボットに</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">黄色の壁</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を破壊するが、</font><font style="vertical-align: inherit;">他の壁には役に立たない</font><font style="vertical-align: inherit;">シェルを発射させる</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b34/f18/2bb/b34f182bb9c0bb682606d0c5a1beb0fd.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、メソッドを見てください</font></font><code>ResetToLastCheckpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">彼が何をしているかを理解するには、迷路を見てください。</font><font style="vertical-align: inherit;">迷路には</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェックポイント</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる点があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">迷路を通過するには、ボットは</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">緑の</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コントロールポイント</font><font style="vertical-align: inherit;">に到達する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4c/d3b/fc9/e4cd3bfc9d59944e28d9a22206141888.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ボットが新しいコントロールポイントに進むと、それは彼にとって</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最後</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">になり</font><font style="vertical-align: inherit;">ます。</font></font><code>ResetToLastCheckpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボットの位置をリセットし、最後の制御点に移動します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/829/617/95a/82961795afe53c9b45f1f8037896783c.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの方法は使用できませんが、まもなく修正されます。</font><font style="vertical-align: inherit;">はじめに、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デザインパターンについて学ぶ必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドデザインパターンとは何ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドパターンは、「</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デザインパターン：再利用可能なオブジェクト指向ソフトウェアの要素」で</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明されている23のデザインパターンの1つで、</font><font style="vertical-align: inherit;">Erich Gamma、Richard Helm、Ralph Johnson、およびJohn Vlissides（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GoF</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Gang of Four）</font><font style="vertical-align: inherit;">によってGang of Fourによって書かれました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
著者は、「コマンドパターンはリクエストをオブジェクトとしてカプセル化するため、さまざまなリクエストを使用して他のオブジェクトをパラメーター化し、リクエストをキューまたはログに記録し、リバーシブル操作をサポートできる」と報告しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うわー！どんな感じ？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この定義はあまり単純ではないので、分析してみましょう。</font></font><br>
<br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カプセル化</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とは、メソッド呼び出しをオブジェクトとしてカプセル化できることを意味します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07d/5c3/214/07d5c32142de4fd36bd2cd73c543856a.png" width="50%" height="50%"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カプセル化されたメソッドは、入力パラメーターに応じて多くのオブジェクトに影響を与える可能性があります。これは</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のオブジェクトの</font><em><font style="vertical-align: inherit;">パラメーター化</font></em><font style="vertical-align: inherit;">と呼ばれ</font><em><font style="vertical-align: inherit;">ます</font></em><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果の「コマンド」は、実行されるまで他のチームと一緒に保存できます。これは</font><font style="vertical-align: inherit;">要求</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キュー</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/035/637/264/0356372640076e0829d2a427cf3552f1.png" width="50%" height="50%"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドキュー</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
最後に、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可逆性と</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、元に戻す機能を使用して操作を元に戻すことができることを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わかりましたが、これはコードにどのように反映されますか？</font><em><font style="vertical-align: inherit;">Command</font></em></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
クラス</font><font style="vertical-align: inherit;">には、</font><em><font style="vertical-align: inherit;">Receiver</font></em><font style="vertical-align: inherit;">と呼ばれる（コマンドを実行する）オブジェクトを入力パラメーターとして受け取る</font><em><font style="vertical-align: inherit;">Execute</font></em><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">があります</font><font style="vertical-align: inherit;">。つまり、実際には、Executeメソッドは</font><font style="vertical-align: inherit;">Commandクラスによって</font><em><font style="vertical-align: inherit;">カプセル化</font></em><font style="vertical-align: inherit;">されます。</font><font style="vertical-align: inherit;">
Commandクラスの多くのインスタンスは、通常のオブジェクトとして転送できます。つまり、キュー、スタックなどのデータ構造に格納できます。</font><font style="vertical-align: inherit;">
コマンドを実行するには、そのExecuteメソッドを呼び出す必要があります。実行を開始するクラスは</font><em><font style="vertical-align: inherit;">Invoker</font></em><font style="vertical-align: inherit;">と呼ばれ</font><font style="vertical-align: inherit;">ます。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現時点では、プロジェクトにはという空のクラスが含まれています</font></font><code>BotCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次のセクションでは、上記の実装を実装して、ボットがコマンドテンプレートを使用してアクションを実行できるようにします。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ボットを移動する</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドパターンの実装</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションでは、コマンドパターンを実装します。</font><font style="vertical-align: inherit;">それを実装するには多くの方法があります。</font><font style="vertical-align: inherit;">このチュートリアルでは、そのうちの1つを取り上げます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
はじめに、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RW / Scriptsに</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動</font><font style="vertical-align: inherit;">し、エディターで</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BotCommand</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトを開き</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">クラス</font></font><code>BotCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はまだ空ですが、長くはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のコードをクラスに挿入します。</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-comment">//1</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">string</span> commandName;<font></font>
<font></font>
    <span class="hljs-comment">//2</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BotCommand</span>(<span class="hljs-params">ExecuteCallback executeMethod, <span class="hljs-keyword">string</span> name</span>)</span><font></font>
    {<font></font>
        Execute = executeMethod;<font></font>
        commandName = name;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//3</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ExecuteCallback</span>(<span class="hljs-params">Bot bot</span>)</span>;<font></font>
<font></font>
    <span class="hljs-comment">//4</span>
    <span class="hljs-keyword">public</span> ExecuteCallback Execute { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }<font></font>
<font></font>
    <span class="hljs-comment">//5</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">string</span> <span class="hljs-title">ToString</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> commandName;<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで何が起こっているのですか？</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数は</font></font><code>commandName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、人間が読めるコマンドの名前を格納するためだけに使用され</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">テンプレートで使用する必要はありませんが、チュートリアルの後半で必要になります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクタ</font></font><code>BotCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は関数と文字列を取得します。</font><font style="vertical-align: inherit;">これは</font></font><code>Execute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Commandオブジェクトと</font><font style="vertical-align: inherit;">そのメソッドのメソッド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">カスタマイズするのに役立ち</font><font style="vertical-align: inherit;">ます</font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デリゲート</font></font><code>ExecuteCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、カプセル化されたメソッドのタイプを決定します。</font><font style="vertical-align: inherit;">カプセル化されたメソッドはvoidを返し、タイプ</font></font><code>Bot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bot</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンポーネント</font><font style="vertical-align: inherit;">）の</font><font style="vertical-align: inherit;">オブジェクトを入力パラメーターとして受け入れます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティ</font></font><code>Execute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はカプセル化されたメソッドを参照します。</font><font style="vertical-align: inherit;">これを使用して、カプセル化されたメソッドを呼び出します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このメソッドは</font></font><code>ToString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、文字列を返すようにオーバーライドされます</font></font><code>commandName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは、UIで使用する場合などに便利です。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更を保存してください、それだけです！</font><font style="vertical-align: inherit;">コマンドパターンを正常に実装しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それを使用することは残っています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チームビルディング</font></font></h3><br><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">RW / Scripts</font></em><font style="vertical-align: inherit;">フォルダー</font><font style="vertical-align: inherit;">
の</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BotInputHandler</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">開き</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
ここでは、5つのインスタンスを作成します</font><font style="vertical-align: inherit;">。これらのインスタンスは、GameObject Botを上下左右に移動するためのメソッドと、撮影のためのメソッドをカプセル化します。</font><font style="vertical-align: inherit;">
これを実装するには、このクラスに以下を挿入します。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>BotCommand</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-comment">//1</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> BotCommand MoveUp =
        <span class="hljs-keyword">new</span> BotCommand(<span class="hljs-keyword">delegate</span> (Bot bot) { bot.Move(CardinalDirection.Up); }, <span class="hljs-string">"moveUp"</span>);<font></font>
    <font></font>
    <span class="hljs-comment">//2</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> BotCommand MoveDown =
        <span class="hljs-keyword">new</span> BotCommand(<span class="hljs-keyword">delegate</span> (Bot bot) { bot.Move(CardinalDirection.Down); }, <span class="hljs-string">"moveDown"</span>);<font></font>
<font></font>
    <span class="hljs-comment">//3</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> BotCommand MoveLeft =
        <span class="hljs-keyword">new</span> BotCommand(<span class="hljs-keyword">delegate</span> (Bot bot) { bot.Move(CardinalDirection.Left); }, <span class="hljs-string">"moveLeft"</span>);<font></font>
<font></font>
    <span class="hljs-comment">//4</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> BotCommand MoveRight =
        <span class="hljs-keyword">new</span> BotCommand(<span class="hljs-keyword">delegate</span> (Bot bot) { bot.Move(CardinalDirection.Right); }, <span class="hljs-string">"moveRight"</span>);<font></font>
<font></font>
    <span class="hljs-comment">//5</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> BotCommand Shoot =
        <span class="hljs-keyword">new</span> BotCommand(<span class="hljs-keyword">delegate</span> (Bot bot) { bot.Shoot(); }, <span class="hljs-string">"shoot"</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの各インスタンスでは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、匿名メソッドが</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンストラクターに渡され</font><font style="vertical-align: inherit;">ます。この匿名メソッドは、対応するコマンドオブジェクト内にカプセル化されます。ご覧のように、各匿名メソッドのシグネチャは、デリゲートによって設定された要件を満たしています</font></font><code>ExecuteCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、コンストラクターの2番目のパラメーターは、コマンドの名前を示す文字列です。この名前は、</font></font><code>ToString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドインスタンス</font><font style="vertical-align: inherit;">メソッドによって返され</font><font style="vertical-align: inherit;">ます。後でUIに適用します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初の4つのインスタンスでは、匿名メソッドが</font></font><code>Move</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトの</font><font style="vertical-align: inherit;">メソッドを呼び出し</font><font style="vertical-align: inherit;">ます</font></font><code>bot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ただし、それらの入力パラメーターは異なります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チーム</font></font><code>MoveUp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>MoveDown</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>MoveLeft</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>MoveRight</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パス</font></font><code>Move</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ</font></font><code>CardinalDirection.Up</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>CardinalDirection.Down</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>CardinalDirection.Left</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><code>CardinalDirection.Right</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「コマンドデザインパターンとは」</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セクションで説明したように</font><font style="vertical-align: inherit;">、これらは、GameObject Botが移動するさまざまな方向を示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
無名メソッドの5番目のインスタンスは、オブジェクト</font></font><code>bot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font></font><code>Shoot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これにより、チームが実行するとボットは発射物を発射します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドを作成したので、ユーザーが入力を行ったときに何らかの方法でコマンドにアクセスする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行う</font></font><code>BotInputHandler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には、コマンドインスタンスの直後に次のコードを</font><font style="vertical-align: inherit;">挿入し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> BotCommand <span class="hljs-title">HandleInput</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.W))<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> MoveUp;<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.S))<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> MoveDown;<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.D))<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> MoveRight;<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.A))<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> MoveLeft;<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.F))<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> Shoot;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメソッド</font></font><code>HandleInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、ユーザーが押したキーに応じて、コマンドの1つのインスタンスを返します。</font><font style="vertical-align: inherit;">次に進む前に変更を保存してください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドの適用</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、作成したチームを使用する時が来ました。再度</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RW / Scriptsに</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移動し</font><font style="vertical-align: inherit;">、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SceneManager</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スクリプトをエディタで開き</font><font style="vertical-align: inherit;">ます。このクラスでは、</font></font><code>uiManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型</font><font style="vertical-align: inherit;">変数への参照に気付くでしょう</font></font><code>UIManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラス</font></font><code>UIManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、このシーンで使用する</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ターミナルUIの</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">便利なヘルパーメソッドを提供します</font><font style="vertical-align: inherit;">。からのメソッドを</font></font><code>UIManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用する</font><font style="vertical-align: inherit;">場合、</font><font style="vertical-align: inherit;">チュートリアルでは</font><font style="vertical-align: inherit;">その方法</font><font style="vertical-align: inherit;">について説明しますが、通常、この目的のために内部構造を知る必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、変数</font></font><code>bot</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はGameObject </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Botに</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アタッチされたボットコンポーネントを参照し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">次のコード</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
をクラス</font></font><code>SceneManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">追加</font><font style="vertical-align: inherit;">し、コメントに置き換えます</font></font><code>//1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-comment">//1</span>
    <span class="hljs-keyword">private</span> List&lt;BotCommand&gt; botCommands = <span class="hljs-keyword">new</span> List&lt;BotCommand&gt;();
    <span class="hljs-keyword">private</span> Coroutine executeRoutine;<font></font>
    <font></font>
    <span class="hljs-comment">//2</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Update</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Return))<font></font>
        {<font></font>
            ExecuteCommands();<font></font>
        }<font></font>
        <span class="hljs-keyword">else</span><font></font>
        {<font></font>
            CheckForBotCommands();<font></font>
        }           <font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//3</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">CheckForBotCommands</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">var</span> botCommand = BotInputHandler.HandleInput();
        <span class="hljs-keyword">if</span> (botCommand != <span class="hljs-literal">null</span> &amp;&amp; executeRoutine == <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
            AddToCommands(botCommand);<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//4</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddToCommands</span>(<span class="hljs-params">BotCommand botCommand</span>)</span><font></font>
    {<font></font>
        botCommands.Add(botCommand);<font></font>
        <span class="hljs-comment">//5</span><font></font>
        uiManager.InsertNewText(botCommand.ToString());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">//6</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ExecuteCommands</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (executeRoutine != <span class="hljs-literal">null</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
<font></font>
        executeRoutine = StartCoroutine(ExecuteCommandsRoutine());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> IEnumerator <span class="hljs-title">ExecuteCommandsRoutine</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        Debug.Log(<span class="hljs-string">"Executing..."</span>);
        <span class="hljs-comment">//7</span><font></font>
        uiManager.ResetScrollToTop();<font></font>
<font></font>
        <span class="hljs-comment">//8</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, count = botCommands.Count; i &lt; count; i++)<font></font>
        {<font></font>
            <span class="hljs-keyword">var</span> command = botCommands[i];<font></font>
            command.Execute(bot);<font></font>
            <span class="hljs-comment">//9</span><font></font>
            uiManager.RemoveFirstTextLine();<font></font>
            <span class="hljs-function"><span class="hljs-keyword">yield</span> return new <span class="hljs-title">WaitForSeconds</span>(<span class="hljs-params">CommandPauseTime</span>)</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-comment">//10</span><font></font>
        botCommands.Clear();<font></font>
        <font></font>
        bot.ResetToLastCheckpoint();<font></font>
<font></font>
        executeRoutine = <span class="hljs-literal">null</span>;<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うわー、どれだけのコード！</font><font style="vertical-align: inherit;">しかし、心配しないでください。</font><font style="vertical-align: inherit;">いよいよゲームウィンドウでプロジェクトを実際に起動する準備が整いました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードについては後で説明します。</font><font style="vertical-align: inherit;">変更を保存することを忘れないでください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゲームを実行してコマンドテンプレートをテストする</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
だから今こそ構築する時です。</font><font style="vertical-align: inherit;">Unityエディターで</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Play</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">クリックし</font><font style="vertical-align: inherit;">ます。</font><em><font style="vertical-align: inherit;">WASDキー</font></em></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を使用して移動コマンドを入力できるはず</font><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">撮影コマンドを入力するには、</font><em><font style="vertical-align: inherit;">F</font></em><font style="vertical-align: inherit;">キーを押します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">コマンドを実行するには、</font><em><font style="vertical-align: inherit;">Enterキーを</font></em><font style="vertical-align: inherit;">押します</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br>
<br>
<blockquote><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：実行プロセスが完了するまで、新しいコマンドを入力することはできません。</font></font></blockquote><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20b/ef8/483/20bef8483dd70829836bd9234178f5dd.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
端末のUIに行が追加されていることに注意してください。</font><font style="vertical-align: inherit;">UIのチームは、その名前で示されます。</font><font style="vertical-align: inherit;">これは変数によって可能になります</font></font><code>commandName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、実行前にUIが上にスクロールする方法と、実行中に行が削除される方法にも注意してください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちはチームをより綿密に研究します</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「コマンドの適用」セクションで追加したコードを学習します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストに</font></font><code>botCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はインスタンスへのリンクが含まれています</font></font><code>BotCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">メモリを節約するために作成できるコマンドのインスタンスは5つだけですが、1つのコマンドへの参照が複数ある場合があります。</font><font style="vertical-align: inherit;">さらに、変数</font></font><code>executeCoroutine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>ExecuteCommandsRoutine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、コマンドの実行を制御する</font><font style="vertical-align: inherit;">変数を</font><font style="vertical-align: inherit;">指し</font><font style="vertical-align: inherit;">ます。</font></font></li>
<li><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーがEnterキーを押したかどうかを確認します。</font><font style="vertical-align: inherit;">もしそうならそれはそれを呼び</font></font><code>ExecuteCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、さもなければそれは呼ばれる</font></font><code>CheckForBotCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><code>CheckForBotCommands</code>    <code>HandleInput</code>  <code>BotInputHandler</code>   ,    ,   ,   <em></em>.    <code>AddToCommands</code>.    , ..  <code>executeRoutine</code>   null,    ,    <code>AddToCommands</code>.       .</li>
<li><code>AddToCommands</code>     <em></em>    <code>botCommands</code>.</li>
<li> <code>InsertNewText</code>  <code>UIManager</code>   UI    .   —  string,    .       <code>commandName</code>.</li>
<li> <code>ExecuteCommands</code>  <code>ExecuteCommandsRoutine</code>.</li>
<li><code>ResetScrollToTop</code>  <code>UIManager</code>  UI  .      .</li>
<li> <code>ExecuteCommandsRoutine</code>   <code>for</code>,        <code>botCommands</code>      ,   <code>bot</code> ,   <code>Execute</code>.       <code>CommandPauseTime</code> .</li>
<li> <code>RemoveFirstTextLine</code>  <code>UIManager</code>       UI ,   .     ,     UI.</li>
<li>    <code>botCommands</code>      <code>ResetToLastCheckpoint</code>     .   <code>executeRoutine</code>  <code>null</code>      .</li>
</ol><br>
<h2>  Undo  Redo</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シーンをもう一度実行して、緑のコントロールポイントに到達してみます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力したコマンドはキャンセルできませんが、つまり、間違えた場合、入力したすべてのコマンドを完了するまで戻ることはできません。この問題は、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元に戻す</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能</font><font style="vertical-align: inherit;">と</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">やり直し</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">機能を追加することで修正できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
戻る</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SceneManager.cs</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とした直後に次の変数宣言を追加</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リスト</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宣言</font><font style="vertical-align: inherit;">のために</font></font><code>botCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="cs hljs">       <span class="hljs-keyword">private</span> Stack&lt;BotCommand&gt; undoStack = <span class="hljs-keyword">new</span> Stack&lt;BotCommand&gt;();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">元に戻すことができるコマンドへのすべての参照を格納する（Collectionsファミリの）</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタック</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">UndoとRedoを実行</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
する2つのメソッド</font></font><code>UndoCommandEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">メソッド</font></font><code>RedoCommandEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">クラスで</font></font><code>SceneManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次のコードをの後に挿入します</font></font><code>ExecuteCommandsRoutine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UndoCommandEntry</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-comment">//1</span>
        <span class="hljs-keyword">if</span> (executeRoutine != <span class="hljs-literal">null</span> || botCommands.Count == <span class="hljs-number">0</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
<font></font>
        undoStack.Push(botCommands[botCommands.Count - <span class="hljs-number">1</span>]);<font></font>
        botCommands.RemoveAt(botCommands.Count - <span class="hljs-number">1</span>);<font></font>
            <font></font>
        <span class="hljs-comment">//2</span><font></font>
        uiManager.RemoveLastTextLine();<font></font>
     }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">RedoCommandEntry</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-comment">//3</span>
        <span class="hljs-keyword">if</span> (undoStack.Count == <span class="hljs-number">0</span>)<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">var</span> botCommand = undoStack.Pop();<font></font>
        AddToCommands(botCommand);<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを分析しましょう：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドが実行されるか、リストが</font></font><code>botCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空の場合、メソッド</font></font><code>UndoCommandEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は何もしません。</font><font style="vertical-align: inherit;">それ以外の場合は、スタックに入力された最後のコマンドへのリンクを書き込みます</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これにより、コマンドへのリンクもリストから削除されます</font></font><code>botCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>RemoveLastTextLine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font><font style="vertical-align: inherit;">メソッド</font><font style="vertical-align: inherit;">は</font></font><code>UIManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、端末のUIからテキストの最後の行を削除して、UIがコンテンツと一致するようにします</font></font><code>botCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタックが</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空の</font><font style="vertical-align: inherit;">場合、</font></font><code>RedoCommandEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何も</font><font style="vertical-align: inherit;">し</font><font style="vertical-align: inherit;">ません。</font><font style="vertical-align: inherit;">それ以外の場合は、最後のコマンドを先頭から抽出</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、でリストに追加</font></font><code>botCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font></font><code>AddToCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、これらの機能を使用するためのキーボード入力を追加します。</font><font style="vertical-align: inherit;">クラス内で、</font></font><code>SceneManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド本体を</font></font><code>Update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のコード</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">置き換え</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.Return))<font></font>
    {<font></font>
        ExecuteCommands();<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.U)) <span class="hljs-comment">//1</span><font></font>
    {<font></font>
        UndoCommandEntry();<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Input.GetKeyDown(KeyCode.R)) <span class="hljs-comment">//2</span><font></font>
    {<font></font>
        RedoCommandEntry();<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        CheckForBotCommands();<font></font>
    }</code></pre><br>
<ol>
<li><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーを押す</font><font style="vertical-align: inherit;">と、メソッドが呼び出され</font></font><code>UndoCommandEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
<li><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーを押す</font><font style="vertical-align: inherit;">と、メソッドが呼び出され</font></font><code>RedoCommandEntry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エッジケースの取り扱い</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで完了です。</font><font style="vertical-align: inherit;">しかし、最初に、次のことを行う必要があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいコマンドを入力するときは、スタックをクリアする必要があります</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンドを実行する前に、スタックをクリアする必要があります</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを実装するには、まず</font></font><code>SceneManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいメソッド</font><font style="vertical-align: inherit;">に追加する必要があり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">の後に次のメソッドを挿入します</font></font><code>CheckForBotCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddNewCommand</span>(<span class="hljs-params">BotCommand botCommand</span>)</span><font></font>
    {<font></font>
        undoStack.Clear();<font></font>
        AddToCommands(botCommand);<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメソッドはクリーンアップして</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font><font style="vertical-align: inherit;">メソッドを</font><font style="vertical-align: inherit;">呼び出します</font></font><code>AddToCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、</font></font><code>AddToCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部</font><font style="vertical-align: inherit;">の呼び出し</font><font style="vertical-align: inherit;">を</font></font><code>CheckForBotCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のコードに</font><font style="vertical-align: inherit;">置き換え</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<pre><code class="cs hljs">    AddNewCommand(botCommand);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に</font></font><code>if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メソッド内の</font><font style="vertical-align: inherit;">ステートメントの後に次の行を挿入して</font></font><code>ExecuteCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、コマンドを実行する前にクリアします</font></font><code>undoStack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="cs hljs">    undoStack.Clear();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、ついに完成です！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作業を保存します。</font><font style="vertical-align: inherit;">プロジェクトをビルドし、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Play</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エディターをクリックします</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以前と同じようにコマンドを入力します。</font><font style="vertical-align: inherit;">コマンドをキャンセルするには、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">押し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">キャンセルされたコマンドを繰り返すには、</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キーを</font><font style="vertical-align: inherit;">押し</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fef/cfb/edf/fefcfbedf0b2e0711f2e831b0d069ebf.gif" width="1024" height="576"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
緑のチェックポイントに到達してみてください。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次はどこへ？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゲームプログラミングで使用されるデザインパターンの詳細については、</font><font style="vertical-align: inherit;">Robert Nistromの</font><font style="vertical-align: inherit;">著書「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Game Programming Patterns」を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読む</font><font style="vertical-align: inherit;">ことをお勧めします</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
高度なC＃テクニックの詳細については、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C＃コレクション、ラムダ、およびLINQ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コースを受講してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タスク</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクとして、迷路の終わりにある緑のコントロールポイントに到達してみてください。</font><font style="vertical-align: inherit;">解決策の1つをスポイラーの下に隠しました。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">決定</font></font></b><div class="spoiler_text"><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveUp×2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveRight×3</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveUp×2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveLeft</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シュート</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveLeft×2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveUp×2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveLeft×2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveDown×5</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveLeft</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シュート</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveLeft</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveUp×3</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シュート×2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveUp×5</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moveRight×3</font></font></li>
</ul><br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dab/f9e/05f/dabf9e05f3cb79ab20a6a663108295fe.png"></div></div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja463933/index.html">WhatsAppを通じて両親に毎日おはようと願う20行のPythonスクリプト</a></li>
<li><a href="../ja463937/index.html">隠すものは何もない</a></li>
<li><a href="../ja463939/index.html">SimbirSoftは保険会社向けのモバイルソリューションをリリースしました</a></li>
<li><a href="../ja463943/index.html">黒いユニコーンの冒険</a></li>
<li><a href="../ja463951/index.html">c.tech：Cassandra Meetup＃2</a></li>
<li><a href="../ja463955/index.html">IPプラットフォームを変更するためのコンセプトを開発する方法は？使用説明書</a></li>
<li><a href="../ja463957/index.html">単一リンクのインタビューリストを展開する方法</a></li>
<li><a href="../ja463961/index.html">マッパーを所有するか、ExpressionTreesについて少し</a></li>
<li><a href="../ja463963/index.html">建設現場での顔認識</a></li>
<li><a href="../ja463965/index.html">LaTeXでのアプリケーションの入力</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>