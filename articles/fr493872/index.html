<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☝🏻 📺 🕴🏾 NodeJS: démarrage rapide 👎 🍙 👩🏼‍✈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous! Très bientôt, le cours de développeur Node.js va commencer , dans le cadre duquel nous avons mené une leçon ouverte traditionnelle . L...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NodeJS: démarrage rapide</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/493872/"><img src="https://habrastorage.org/webt/s-/7a/cf/s-7acfzhsw55rupodlj9zl6_3m8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonjour à tous! </font><font style="vertical-align: inherit;">Très bientôt, le cours de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">développeur Node.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> va commencer </font><font style="vertical-align: inherit;">, dans le cadre duquel nous avons mené une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">leçon ouverte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> traditionnelle </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le webinaire a examiné les forces et les faiblesses de Node, et a également discuté pour quelles tâches cette plate-forme logicielle est la mieux adaptée et pour quels autres langages et cadres devraient être choisis. </font><font style="vertical-align: inherit;">Et, bien sûr, non sans pratique. </font><font style="vertical-align: inherit;">Pour exécuter les exemples et les </font><font style="vertical-align: inherit;">logiciels nécessaires à l' </font><font style="vertical-align: inherit;">installation </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.js</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conférencier - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexander Korzhikov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , Dev IT Engineer chez ING Group (Pays-Bas).</font></font><br>
<br>
<hr><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/webt/gy/xr/it/gyxritf2vnerlxqhnevsput7s4q.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelques mots sur Node.js</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node.js est un runtime JavaScript asynchrone basé sur des concepts tels que la boucle d'événements et l'architecture orientée événements. </font><font style="vertical-align: inherit;">La plateforme Node.js et le gestionnaire de packages NPM standard vous permettent de créer des applications efficaces pour divers domaines - du Web au Machine Learning. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'exemple de serveur Web le plus simple ( </font></font><code>node server.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>)
<span class="hljs-keyword">const</span> hostname = <span class="hljs-string">'127.0.0.1'</span>
<span class="hljs-keyword">const</span> port = <span class="hljs-number">3000</span>
<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {<font></font>
res.statusCode = <span class="hljs-number">200</span>
res.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain'</span>)<font></font>
res.end(<span class="hljs-string">'Hello World\n'</span>)<font></font>
})<font></font>
server.listen(port, hostname, () =&gt; {<font></font>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Server running at http://<span class="hljs-subst">${hostname}</span>:<span class="hljs-subst">${port}</span>/`</span>)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En regardant le code ci-dessus, les fonctionnalités suivantes de Node.js peuvent être notées:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous pouvons exécuter du code JavaScript directement sur le serveur, c'est-à-dire qu'il est possible d'exécuter des fichiers JavaScript à l'aide de la commande node. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le format CommonJS des modules pour le chargement des dépendances et des modules ES est pris en charge et les deux formats peuvent être utilisés.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une bibliothèque de modules standard est prise en charge, dont HTTP fait partie.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'API est basée sur le modèle de rappels asynchrones, mais Promise est également pris en charge. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La syntaxe ES2015 est prise en charge. </font><font style="vertical-align: inherit;">À propos, voici un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien utile</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec lequel vous pouvez toujours voir </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans quelle version de Node quelles fonctionnalités JS sont prises en charge</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">En cas de problème, vous pouvez comparer et comprendre le problème.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aussi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ne manquez pas la petite démo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (VSCode + Chrome Debug).</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Une brève excursion dans l'histoire</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La plateforme Node.js est apparue en 2009, le principal développeur et créateur du projet était Ryan Dahl. </font><font style="vertical-align: inherit;">Son idée principale était de créer une E / S non bloquante (entrée-sortie) pour le serveur, en plus, en utilisant JavaScript. </font><font style="vertical-align: inherit;">À cette époque, de telles approches n'étaient pas très courantes et JavaScript était l'une des meilleures solutions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Node.js utilise le moteur Chromium à l'intérieur de lui-même, ou plutôt, la partie de celui-ci qui interprète JavaScript - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Du fait que l'interprète s'est séparé à un moment donné dans un projet V8 distinct, il est devenu possible de simplement créer un écosystème autour de lui. </font><font style="vertical-align: inherit;">À proprement parler, c'est exactement ce qu'a fait le créateur de Node.js Ryan Dahl. </font><font style="vertical-align: inherit;">Soit dit en passant, il y a aujourd'hui la Fondation Node.js, une organisation qui soutient le projet.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sy/ia/yr/syiayrq85tpdajr8whmtfysla6c.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Structure</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, la bibliothèque est écrite en C ++ et JavaScript. </font><font style="vertical-align: inherit;">Le projet lui-même </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repose sur GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , donc si vous êtes curieux, vous pouvez vous familiariser avec son code source. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vous</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pouvez </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">vous plonger dans son étude pendant</font></a><font style="vertical-align: inherit;"> très longtemps)). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deuxièmement, comme déjà mentionné, il inclut V8 (la plate-forme d'exécution JavaScript de Google) et libuv dans le cadre de la boucle d'événement (boucle d'événement asynchrone). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bien sûr, il existe différents modules pour travailler avec le système d'exploitation qui vous permettent d'effectuer les tâches professionnelles dont vous avez besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient également de mentionner les principaux modèles de conception couramment utilisés dans Node.js:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rappel (il a déjà été mentionné);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observateur (modèle d'événement plus simple);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module (bien qu'il soit maintenant organisé dans le langage JavaScript lui-même, dans Node.js, il est toujours pertinent);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reactor (modèle d'interaction asynchrone avec certaines ressources lorsque vous ne bloquez pas le flux principal de code). </font><font style="vertical-align: inherit;">Ce modèle est familier aux développeurs JS. </font><font style="vertical-align: inherit;">Par exemple, si nous travaillons dans un navigateur et écrivons une interface, nous ne bloquons pas tout le travail du navigateur, mais nous nous abonnons simplement aux événements de l'utilisateur, et lorsque l'événement se produit (après un «clic», «entrée», etc.), nous exécutons notre code.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Soit dit en passant, voici un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">petit concours</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que nous avons eu lors du webinaire)). </font><font style="vertical-align: inherit;">Et avance.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modules de distribution standard de nœud</font></font></h3><br>
<img src="https://habrastorage.org/webt/lz/vc/dt/lzvcdthe1hqpmlr_jhnltxu2ewi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Savez-vous quels modules sont inclus dans la distribution standard des nœuds? </font><font style="vertical-align: inherit;">Autrement dit, nous parlons de modules qui sont déjà intégrés, par conséquent, ils ne peuvent pas être installés. </font><font style="vertical-align: inherit;">En général, il y en a environ 50, listons les principaux. </font><font style="vertical-align: inherit;">Pour faciliter la perception, nous les classons classiquement en 5 points: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Principal (pour les opérations ordinaires):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fs;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">minuteries;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streams (pour travailler avec des streams).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Utilitaires:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chemin (pour travailler avec des chemins);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">util;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zlib (archivage et décompression);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">crypto (pour les fonctions cryptographiques).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Processus (tout ce qui concerne le multitraitement et le parallélisme):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">child_process (le module principal pour le lancement de modules mineurs, offre de grandes opportunités pour démarrer et surveiller les processus);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cluster (similaire au premier, mais vous permet de paralléliser les tâches sur les cœurs de votre processeur);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">worker_threads (implémentation de threads ou de threads, mais ce n'est pas entièrement thread-safe, mais pourquoi, il est préférable de lire la documentation).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Protocoles (toutes sortes de protocoles):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http (s);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">net;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DNS.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Système (respectivement, modules système, y compris le débogage):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">os</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v8;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async_hooks;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perf_hooks;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trace_events</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quoi d'autre à ajouter: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- objet globals - analogue de window; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- tous les objets JavaScript disponibles dans le navigateur sont également disponibles dans Node.js; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- délais d'attente - presque comme dans un navigateur; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- processus - représentation du processus actuel; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- la console est disponible.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rappels</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappel - une fonction passée en argument au code, ce qui implique de l'exécuter à un moment donné. </font><font style="vertical-align: inherit;">Soit dit en passant, les gens pensent rarement que leur exécution peut être synchrone ou asynchrone.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {<font></font>
res.statusCode = <span class="hljs-number">200</span>
res.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain'</span>)<font></font>
res.end(<span class="hljs-string">'Hello World\n'</span>)<font></font>
})<font></font>
server.listen(port, hostname, () =&gt; {<font></font>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Server running at http://<span class="hljs-subst">${hostname}</span>:<span class="hljs-subst">${port}</span>/`</span>)<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans Node, par défaut, le rappel est exécuté avec une "erreur" et le résultat est asynchrone:</font></font><br>
<br>
<pre><code class="javascript hljs">fs.readFile(<span class="hljs-string">'/etc/passwd'</span>, (err, data) =&gt; {
<span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err
<span class="hljs-built_in">console</span>.log(data)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici à quoi ressemble l'antipattern - un bon exemple de la façon d'utiliser incorrectement les rappels. </font><font style="vertical-align: inherit;">Comme on dit, le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classique Callback Hell</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="javascript hljs">fs.readdir(source, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, files</span>) </span>{
<span class="hljs-keyword">if</span> (err) {
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Error finding files: '</span> + err)<font></font>
} <span class="hljs-keyword">else</span> {<font></font>
files.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">filename, fileIndex</span>) </span>{
<span class="hljs-built_in">console</span>.log(filename)<font></font>
gm(source + filename).size(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, values</span>) </span>{
<span class="hljs-keyword">if</span> (err) {
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Error identifying file size: '</span> + err)<font></font>
} <span class="hljs-keyword">else</span> {
<span class="hljs-built_in">console</span>.log(filename + <span class="hljs-string">' : '</span> + values)<font></font>
aspect = (values.width / values.height)<font></font>
widths.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">width, widthIndex</span>) </span>{<font></font>
height = <span class="hljs-built_in">Math</span>.round(width / aspect)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'resizing '</span> + filename + <span class="hljs-string">'to '</span> + height + <span class="hljs-string">'x'</span> + height)
<span class="hljs-keyword">this</span>.resize(width, height).write(dest + <span class="hljs-string">'w'</span> + width + <span class="hljs-string">'_'</span> + filename, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
<span class="hljs-keyword">if</span> (err) <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Error writing file: '</span> + err)<font></font>
})<font></font>
}.bind(<span class="hljs-keyword">this</span>))<font></font>
}<font></font>
})<font></font>
})<font></font>
}<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voyons maintenant comment </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">créer un serveur Web simple</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et rendre l'index HTML comme réponse du client:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>)
<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {<font></font>
res.statusCode = <span class="hljs-number">200</span>
res.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain'</span>)<font></font>
res.end(<span class="hljs-string">'Hello World\n'</span>)<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour lire le fichier html local:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)<font></font>
fs.readFile(<span class="hljs-string">'./index.html'</span>, (err, text) =&gt; {
<span class="hljs-built_in">console</span>.log(text)<font></font>
})</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En terminant le sujet des rappels, je voudrais mentionner les types de rappels. </font><font style="vertical-align: inherit;">Il existe des rappels qui ne renvoient qu'une erreur s'il y a une erreur:</font></font><br>
<br>
<pre><code class="plaintext hljs">fs.access('/etc/passwd', fs.constants.R_OK, (err) =&gt; {<font></font>
console.log(err ? 'no access!' : 'read')<font></font>
})<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, de plus en plus de modules et d'API utilisent des promesses prêtes à l'emploi, ce qui est bien. </font><font style="vertical-align: inherit;">Node prend en charge les promesses:</font></font><br>
<br>
<pre><code class="javascript hljs">util.promisify()<font></font>
fs.promises.*<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Type de retour:</font></font><br>
<br>
<pre><code class="javascript hljs">http.request(<span class="hljs-string">'https://example.com'</span>, (error, response, body) =&gt; {<font></font>
...<font></font>
})</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Questions et réponses sur les nœuds</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'écriture de serveurs Web, Express est souvent utilisé, bien qu'il existe de nombreuses autres bibliothèques et frameworks qui implémentent des fonctionnalités similaires. </font><font style="vertical-align: inherit;">Néanmoins, Express est le plus populaire et le plus stable. </font><font style="vertical-align: inherit;">On pourrait dire que c'est la norme pour écrire des serveurs.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">const</span> app = express();
<span class="hljs-keyword">const</span> port = <span class="hljs-number">3000</span>;<font></font>
app.get(<span class="hljs-string">"/"</span>, (req, res) =&gt; {<font></font>
res.send(<span class="hljs-string">"Hello World!"</span>);<font></font>
});<font></font>
app.listen(port, () =&gt; {<font></font>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Example app listening
});</span></code></pre><br>
<img src="https://habrastorage.org/webt/1x/ml/lo/1xmllok6fpyj1q_82zod2tzl5du.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, vous pouvez maintenant essayer de créer vous-même un serveur Web avec un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">générateur Express</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">utilisation de jade, cookie-session;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">faire une déconnexion de connexion naïve.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou regardez simplement comment le professeur l'a fait, qui a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">préparé la solution prête à l'emploi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans TypeScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est tout. </font><font style="vertical-align: inherit;">Enfin - quelques liens utiles:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation officielle</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guider</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cadres Node.js: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExpressJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NestJS</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et à bientôt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le parcours</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr493858/index.html">10 livres utiles sur la gestion des services informatiques</a></li>
<li><a href="../fr493862/index.html">Le modèle mis à jour Sauber Alfa Romeo F1 est équipé de 143 pièces imprimées sur une imprimante 3D</a></li>
<li><a href="../fr493864/index.html">Lettre aux startups de Sequoia Capital concernant le coronavirus</a></li>
<li><a href="../fr493866/index.html">Créez votre flux pour git à partir de zéro</a></li>
<li><a href="../fr493870/index.html">Biogelx et le rôle de sa bio-encre dans la bio-impression moderne</a></li>
<li><a href="../fr493880/index.html">BPF pour les petits, partie zéro: BPF classique</a></li>
<li><a href="../fr493882/index.html">Roboculture: intégration, mentorat et épuisement professionnel</a></li>
<li><a href="../fr493884/index.html">STM32MP1 - noyaux + Linux = microcontrôleur parfait</a></li>
<li><a href="../fr493890/index.html">L'histoire du genre roguelike: de Rogue à Binding of Isaac</a></li>
<li><a href="../fr493892/index.html">Comment travailler à domicile. Liste de vérification de Deletedman</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>