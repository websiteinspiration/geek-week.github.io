<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚄 ⛳️ 🎌 etcd 3.4.3：ストレージの信頼性とセキュリティの研究 📸 🚵🏾 👩🏼‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="注意ペレフ。：この記事の内容は、ブログの典型的なものではありません。しかし、多くの人が知っているように、etcdはKubernetesの中心部に位置しているため、信頼性の分野で独立コンサルタントが行ったこの調査は、このシステムを操作するエンジニアの間で興味深いことがわかりました。さらに、実稼働環境で...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>etcd 3.4.3：ストレージの信頼性とセキュリティの研究</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/487534/"><i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意ペレフ。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：この記事の内容は、ブログの典型的なものではありません。しかし、多くの人が知っているように、etcdはKubernetesの中心部に位置しているため、信頼性の分野で独立コンサルタントが行ったこの調査は、このシステムを操作するエンジニアの間で興味深いことがわかりました。さらに、実稼働環境ですでに実証されているオープンソースプロジェクトが、このように非常に「低い」レベルでさえ改善されている状況の中で興味深いことです。</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/xd/av/d3/xdavd35rjqklgnrnd-0wulkpayo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Key-Value（KV）</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などのボールト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、Raftコンセンサスアルゴリズムに基づく分散データベースです。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2014年</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">実施され</font></a><font style="vertical-align: inherit;">た分析</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">では</font></a><font style="vertical-align: inherit;">、etcd 0.4.1がデフォルトでいわゆる古い読み取りの影響を受けていることがわかりました</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（同期の遅延が原因で古い、無関係な値を返す読み取り操作-約変換）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。信頼性とセキュリティの分野での可能性を再度詳細に評価するために、etcd（今回はバージョン3.4.3）に戻ることにしました。</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「キーと値」のペアによる操作は厳密にシリアライズ可能であり、オブザーバー</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ウォッチ）の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセスが</font><font style="vertical-align: inherit;">注文キーのすべての変更に配信されること</font><font style="vertical-align: inherit;">がわかりました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、</font><font style="vertical-align: inherit;">etcdの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロック</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は基本的に安全ではなく、それらに関連するリスクはバグによって悪化します。その結果</font><font style="vertical-align: inherit;">、ロックの待機後</font><font style="vertical-align: inherit;">に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リース</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の関連性がチェックさ</font><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">ません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">etcd開発者のコ​​メントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、プロジェクトブログの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レポート</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">で</font></a><font style="vertical-align: inherit;">読むことができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この調査は</font><font style="vertical-align: inherit;">、The Linux Foundationの一部で</font><font style="vertical-align: inherit;">ある</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cloud Native Computing Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（CNCF）</font><font style="vertical-align: inherit;">が後援してい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジェプセンの倫理方針</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に完全に準拠して実施されました</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.背景</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その他KVリポジトリは、調整の基礎として使用するように設計された分散システムです。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zookeeper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consul</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同様に</font><font style="vertical-align: inherit;">、etcdはまれに更新される少量の状態（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトでは最大8 GB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）をキー値マップの形式で</font><font style="vertical-align: inherit;">格納し、データウェアハウス全体で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厳密にシリアル化可能な</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読み取り、書き込み、マイクロトランザクション、および</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロック</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、追跡</font><font style="vertical-align: inherit;">などの調整プリミティブ</font><font style="vertical-align: inherit;">を提供します</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（時計）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とリーダーの選択。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kubernetes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenStack</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などの多くの分散システムは、</font><font style="vertical-align: inherit;">etcdを使用してクラスターメタデータの保存、データの調整されたビューの調整、リーダーの選択などを行います。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2014年には、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etcd 0.4.1の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">評価をすでに実施してい</font><font style="vertical-align: inherit;">ます。次に、デフォルトでは、最適化のために読み取りが古くなる傾向があることがわかりました。一方で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いかだの原則に関する作業が</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">論じて分割する必要はスレッドへの操作を読み、生存能力を確保するために、コンセンサスシステムを介してそれらを通過し、etcdローカルで新しいリーダーの詳細、現在の状態をチェックせずに任意のリーダーで読み取ります。 etcd開発チームは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプションのクォーラムフラグを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装</font><font style="vertical-align: inherit;">し、etcdバージョン3.0 API </font><font style="vertical-align: inherit;">では、</font><font style="vertical-align: inherit;">追跡操作を除くすべての操作の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">線形</font></a><font style="vertical-align: inherit;">化可能性</font><font style="vertical-align: inherit;">が</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デフォルトで表示されました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
etcd 3.0 APIは、キーと値が不透明なKVフラットマップに集中しています</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不透明</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バイト配列。範囲クエリを使用すると、階層キーをシミュレートできます。ユーザーは、キーの読み取り、書き込み、削除を行うだけでなく、単一のキーまたはキーの範囲の更新フローを監視できます。 etcdツールキットは、リース（クライアントのハートビート要求によってアクティブ状態で維持される、有効期間が限定された変数オブジェクト）、ロック（リースにバインドされた専用の名前付きオブジェクト）、およびリーダーの選択によって補完されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バージョン3.0では、etcdは限定された</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">トランザクションAPIを</font></a><font style="vertical-align: inherit;">提供し</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くのキーを持つアトミック操作用。</font><font style="vertical-align: inherit;">このモデルでは、トランザクションは、述語、真の分岐、および偽の分岐を持つ条件式です。</font><font style="vertical-align: inherit;">述語は、1つのキーのバージョン、グローバルリビジョンetcd、または現在のキー値に応じて、いくつかのキー比較の組み合わせである可能性があります。</font><font style="vertical-align: inherit;">TrueおよびFalseブランチには、複数の読み取りおよび書き込み操作が含まれる場合があります。</font><font style="vertical-align: inherit;">これらはすべて、述語推定の結果に応じてアトミックに適用されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1ドキュメントの一貫性の保証</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2019年10月の時点で</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> etcd </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ドキュメントのドキュメントに</font></a><font style="vertical-align: inherit;">は、「すべてのAPI呼び出しは一貫した一貫性を示します—分散システムで利用できる最も強力な形式の一貫性保証」と記載されています。これはそうではありません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一貫した一貫性は</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">線形化可能</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">性</font></a><font style="vertical-align: inherit;">よりも厳密に弱いです</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および線形化可能性は、分散システムで確実に実現可能です。さらに、ドキュメントには「読み取り操作中、etcdは[クラスターのメンバーで利用可能な[最新（クエリの完了後に外部クロックで測定）]値」の転送を保証しないと述べています。これはあまりにも保守的なステートメントでもあります。etcdが線形化可能性を提供する場合、読み取り操作は常に、最新のコミットされた状態に線形化の順序で関連付けられます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドキュメントはまた、etcdが</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">シリアライズ可能な分離を</font></a><font style="vertical-align: inherit;">保証することを主張します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：すべての操作（複数のキーに影響する操作も含む）は、一般的な順序で実行されます。著者は、シリアライズ可能な分離を「分散システムで利用可能な最も強力な分離レベル」と表現しています。これも（「分離レベル」の意味によって異なります）、正しくありません。厳密な直列化可能性は単純な直列化可能性よりも強力ですが、前者は分散システムでも実現可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ドキュメントには、etcdのすべての操作（追跡を除く）がデフォルトで線形化可能であると記載されています。この場合、線形化可能性は、弱く同期されたグローバルクロックとの整合性として定義されます。このような定義は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、線形化</font></a><font style="vertical-align: inherit;">可能性の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">定義と</font></a><font style="vertical-align: inherit;">互換性がないだけではないことに注意してください</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Herlihy＆Wingは、因果関係の違反も意味します。時間帯が先行しているノードは、まだ開始されていない操作の結果を読み取ろうとします。 etcdはまだタイムマシンではないと想定します。これはRaftアルゴリズムに基づいているため、線形化可能性の一般に受け入れられている定義を適用する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
etcdのKV操作は直列化可能および線形化可能であるため、実際にはetcdはデフォルトで</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厳密な直列化を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供すると思います</font><font style="vertical-align: inherit;">。すべてのキーなどが単一のステートマシンにあり、Raftはこのステートマシン上のすべての操作の完全な順序付けを提供するため、これは理にかなっています。実際、etcdデータセット全体は単一の線形化可能なオブジェクトです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションのフラグが</font></font><code>serializable</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下がる</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">厳密なものから通常の直列化可能な一貫性までの読み取り操作のレベル。古いコミット状態の読み取りを可能にします。</font><font style="vertical-align: inherit;">フラグ</font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はストーリーのシリアライザビリティには影響しない</font><font style="vertical-align: inherit;">ことに注意してください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">KV操作etcdは、すべての場合でシリアライズ可能です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.テスト開発</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テストスイート</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
を作成</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">する</font></a><font style="vertical-align: inherit;">ために、適切な</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Jepsenライブラリ</font></a><font style="vertical-align: inherit;">を使用しました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。バージョンetcd 3.4.3（19年10月の時点で最新）が分析され、5つのノードで構成されるDebian Stretchクラスターで動作しました。これらのクラスターには、ネットワークパーティション、個々のノードの分離、クラスターの過半数と少数へのパーティション分割、および過半数が重複する非推移的なパーティションなど、いくつかの障害が実装されています。彼らはノードのランダムなサブセットを「ドロップ」して一時停止し、リーダーを故意に無効にしました。マルチ秒間隔とミリ秒間隔の両方で最大数百秒の一時的な歪みが発生しました（高速の「フリッカー」）。 etcdはコンポーネント数の動的な変更をサポートしているため、テスト中にノードをランダムに追加および削除しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストロードには、KVの操作をチェックするためのレジスター、セット、トランザクションテストのほか、ロックとウォッチの特殊なロードが含まれていました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1レジスタ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KV操作中のetcdの信頼性を評価する</font><font style="vertical-align: inherit;">ために、</font><font style="vertical-align: inherit;">ユニットのキー</font><font style="vertical-align: inherit;">に対してランダムな読み取り、書き込み、</font><i><font style="vertical-align: inherit;">比較および設定</font></i><font style="vertical-align: inherit;">操作が実行される</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レジスターテスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が開発され</font><font style="vertical-align: inherit;">ました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">結果は</font><font style="vertical-align: inherit;">、比較/インストールレジスタモデルとバージョン情報を使用して、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Knossos</font></a><font style="vertical-align: inherit;">線形化可能性ツール</font><font style="vertical-align: inherit;">を使用して</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">評価されました</font></a><font style="vertical-align: inherit;">。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2セット</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
古い読み取りを定量化する</font><font style="vertical-align: inherit;">ために、</font><i><font style="vertical-align: inherit;">比較と設定の</font></i><font style="vertical-align: inherit;">トランザクション</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して、単一のキーから整数のセットを読み取り、このセットに値を追加する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テスト</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が開発</font><font style="vertical-align: inherit;">されました。</font><font style="vertical-align: inherit;">テスト中に、セット全体の並行読み取りも実行しました。</font><font style="vertical-align: inherit;">試験終了後</font><font style="vertical-align: inherit;">、セットに存在</font><font style="vertical-align: inherit;">する</font><i><font style="vertical-align: inherit;">こと</font></i><font style="vertical-align: inherit;">がわかっている元素</font><font style="vertical-align: inherit;">が欠落している</font><font style="vertical-align: inherit;">場合の発生状況を分析した</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらのケースは、古い読み取りと失われた更新を定量化するために使用されました。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3テストを追加</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
厳密な直列化可能性を検証するために、</font><font style="vertical-align: inherit;">トランザクションが並行して読み取られ、一意の整数のセットで構成されるリストに値を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">追加テスト</font></a><font style="vertical-align: inherit;">が開発され</font><font style="vertical-align: inherit;">ました。各リストは1つのetcdキーに格納され、各トランザクション内で追加が行わ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、1つのトランザクションで</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">変更する必要がある各キーを</font></a><font style="vertical-align: inherit;">読み取り</font><font style="vertical-align: inherit;">、次に</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのキーが書き込まれ、</font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">保護さ</font></a><font style="vertical-align: inherit;">れた2番目のトランザクションで</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">読み取りが実行</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">されました</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最初の読み取り以降、記録されたキーが変更されていないことを確認します。</font><font style="vertical-align: inherit;">テストの最後に、リアルタイムの優先度に基づくトランザクション間の関係と、読み取り操作と追加操作の関係をプロットしました。</font><font style="vertical-align: inherit;">このグラフのループを確認すると、操作が厳密にシリアル化可能かどうかを判断できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
etcdはトランザクションが同じキーを複数回書き込むことを防ぎますが、キーごとに最大1つのレコードを持つトランザクションを作成できます。</font><font style="vertical-align: inherit;">また、同じトランザクション内の読み取り操作が、同じトランザクションからの以前の書き込み操作を反映するようにしました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.4ロック</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
調整サービスとして、etcd </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は分散ロックの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込み</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">サポートを</font></a><font style="vertical-align: inherit;">約束し</font><font style="vertical-align: inherit;">ます。これらのロックを2つの方法で調査しました。最初に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ランダムなロックおよびロック解除要求が</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成され</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各ロックのリースを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受け取り、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">解放さ</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code> keepalive</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れるまで</font><font style="vertical-align: inherit;">Javaクライアントの組み込み</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">etc</font></a><font style="vertical-align: inherit;">クライアントを使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">て開いたままに</font></a><font style="vertical-align: inherit;">しました</font><font style="vertical-align: inherit;">。結果をKnossosでテストして、ロックサービスの線形化された実装を形成するかどうかを確認しました。</font><font style="vertical-align: inherit;">
より実用的なテスト（およびロックの失敗の頻度を定量化）のために、ロックとetcdを使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">して、メモリ内のセットを更新するときに相互排除</font></a><font style="vertical-align: inherit;">を整理</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">しました</font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このセットで失われた更新を検索しました。</font><font style="vertical-align: inherit;">このテストにより、etcdをミューテックスとして使用するシステムが内部状態を安全に更新できるかどうかを直接確認できました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロックテストの3番目のバージョンでは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スキーを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ガードして</font></a><font style="vertical-align: inherit;">、etcdに保存されているセットを変更しました。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.5追跡</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時計が各キーの更新に関する情報を提供していることを確認するために、テストの一部として1つのキーが作成され、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">盲目的に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一意の整数値が</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">割り当てられました</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その間、顧客は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このキー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を一度に数秒間</font><font style="vertical-align: inherit;">共有</font><font style="vertical-align: inherit;">しました。</font><font style="vertical-align: inherit;">ウォッチを開始した後、クライアントは前回ストップしたリビジョンから始めました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロセスの最後に</font><font style="vertical-align: inherit;">、各クライアントが同じ一連の主要な変更を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認するように</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.結果</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1第0リビジョンからの追跡</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キーを追跡するとき、クライアントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期のリビジョンを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定できます</font><font style="vertical-align: inherit;">。これは、「追跡を開始する（包括的に）オプションのリビジョン」です。ユーザーが特定のキーで各操作を確認したい場合は、etcdの最初のリビジョンを指定できます。この監査とは何ですか？</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データモデル</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用語集</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、この質問に対する回答を提供していません。改訂は単調に増加する64ビットカウンターとして説明されていますが、etcdが0と1のどちらで始まるかは明確ではありません。カウントダウンが最初から行われていると想定することは妥当です（念のため）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
悲しいかな、これは間違っています。 0番目のリビジョンを要求すると、etcd </font><i><font style="vertical-align: inherit;">はサーバーの現在のリビジョンに1を加えたもの</font></i><font style="vertical-align: inherit;">から更新のブロードキャストを開始します。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、しかし最初ではありません。</font><font style="vertical-align: inherit;">1回目の改訂のリクエストには、すべての変更が含まれています。</font><font style="vertical-align: inherit;">この動作は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">どこにも記載されていません</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ほとんどのクラスターは最初のリビジョンに残っていないため、実際にはこの微妙な問題が本番環境で問題を引き起こす可能性は低いと考えています。</font><font style="vertical-align: inherit;">さらに、etcdはいずれにせよストーリーを圧縮するため、実際のアプリケーションでは、ほとんどの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、最初のリビジョンから始めて、すべてのバージョンを読み取る必要はありません。</font><font style="vertical-align: inherit;">このような動作は正当化されますが、ドキュメントの対応する説明を損なうことはありません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2神話上のロック</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロックのAPIドキュメントには、ロック</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">されたキーを「トランザクションと組み合わせて使用​​して、ロックが所有されている場合にのみetcdの更新が行われるようにすることができる」と記載されています。奇妙ですが、ロック自体の保証はなく、その目的は説明されていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、他の資料では、メンテナーなどがロックの使用に関する情報を共有しています。たとえば</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、etcd 3.2リリースの発表で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>etcdctl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ディスク上のファイル共有の変更をブロック</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">ため</font><font style="vertical-align: inherit;">のアプリケーションについて説明しています</font><font style="vertical-align: inherit;">。さらに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ロックの具体的な目的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に関する質問があるGitHubの問題</font><font style="vertical-align: inherit;">で、etcd開発者の1人が次のように答えました：</font></font><br>
<br>
<blockquote>     etcd  ,   (  )        ,     (        etcd), - :<br>
<br>
<ol>
<li>    etcd;</li>
<li>  - ( ,     etcd);</li>
<li>    .</li>
</ol></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのような例を以下に示し</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><code>  etcdctl</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。ロックはチームを保護するために使用されました</font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、ロックキーを更新にバインドしませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
悲しいかな、これは複数のクライアントが同時に同じロックを保持できるようになるため、安全ではありません。この問題は、プロセスの一時停止、ネットワークのクラッシュ、またはパーティションによって悪化しますが、外部障害のない完全に正常なクラスターでも発生する可能性があります。たとえば、この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テスト実行では、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロセス番号3がロックを正常に設定し、プロセス3がロックを削除する前に、プロセス1が同じロックを並行して取得します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ko/hy/lz/kohylznbfb8bh5a2m1l88kysrg4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ミューテックス違反は、TTLが短いリースで最も顕著でした。TTLが1、2、3秒の場合、数分間のテスト（相互に健全なクラスター内でも）後に相互排除を提供できませんでした。プロセスの一時停止とネットワークの分割により、問題がさらに早く発生しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ロックテストバリアントの1つでは、etcdミューテックスを使用して、一連の整数の共同更新を保護していました（ドキュメントetcdが示唆しています）。更新のたびに現在のメモリ内のサンプル値が読み取られ、約1秒後に、一意の要素を追加してこのコレクションが書き戻されます。 2秒のTTL、5つの並列プロセス、および5秒ごとにプロセスが一時停止するリースにより、確認された更新の約18％の安定した損失を引き起こすことができました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題は、etcdの内部ロックメカニズムによって悪化しました。クライアントが他のクライアントがロックを解除するのを待ってリースを失った後、ロックが解除された後、サーバー</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はリース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が有効であることを確認するために</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">リース</font></a><font style="vertical-align: inherit;">を再確認してから、ロックがその背後にあることをクライアントに通知</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">しませんでし</font></a><font style="vertical-align: inherit;">た。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
追加のリースチェックを含めること、およびより長いTTLを選択し、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">選挙の</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイムアウト</font><font style="vertical-align: inherit;">を注意深く設定</font><font style="vertical-align: inherit;">することで、この問題の頻度が減少します。ただし、分散ロックは基本的に非同期システムでは安全でないため、ミューテックス違反を完全に排除することはできません。マーティン・クレップマン博士は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">彼の記事で</font></a><font style="vertical-align: inherit;">これを説得力をもって説明し</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ています</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分散ロックについて。彼によると、非同期システムで実行可能性を維持するために、ブロッキングサービスは正確さを犠牲にする必要があります。ブロッキングの制御中にプロセスがクラッシュした場合、ブロッキングサービスはブロッキングを強制的にロック解除する何らかの方法を必要とします。ただし、プロセスが実際には低下せず、単に実行速度が遅いか、一時的に利用できない場合、ロックを解除すると、同時に複数の場所に保持される可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、分散ブロッキングサービスが何らかのマジック障害検出機能を使用していて、実際には相互排除を保証できる場合でも、一部の非ローカルリソースの場合は、その使用は依然として安全ではありません。ロックを保持している間に、プロセスAがデータベースDにメッセージを送信するとします。その後、プロセスAがクラッシュし、プロセスBがロックを受け取り、メッセージをベースDに送信します。問題は、プロセスAからのメッセージ（非同期のため）がプロセスBからのメッセージの後に来る可能性があり、ロックが提供しようとした相互の例外に違反していることです。 。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題を回避するには</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ストレージシステム自体</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">がトランザクションの正確さをサポートするか、またはロックサービスがこのようなメカニズムを提供する場合は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロックホルダーによって実行されるすべての操作に含まれる</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">「</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><i><font style="vertical-align: inherit;">フェンシング」</font></i></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">トークン</font></a><font style="vertical-align: inherit;">。これにより、現在のロック所有者の操作間で、前のロックホルダーの操作が突然発生しないことが保証されます。たとえば、</font><font style="vertical-align: inherit;">Googleの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャビーブロッキングサービスでは、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのトークンは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シーケンサー</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれ</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。 etcdでは、グローバルに順序付けされたブロッキングトークンとしてロックキーリビジョンを使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、etcdのロックキーを使用して、etcd自体のトランザクションの更新を保護できます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トランザクションの一部としてのロックキーバージョンの確認</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ロックが保持されなくなった場合（つまり、ロックキーのバージョンがゼロより大きい場合）、ユーザーはトランザクションを防止できます。</font><font style="vertical-align: inherit;">私たちのテストでは、このアプローチにより、書き込みがロックによって保護された唯一のトランザクションである読み取り-変更-書き込み操作を正常に分離できました。</font><font style="vertical-align: inherit;">このアプローチは、弾幕トークンと同様の分離を提供しますが、弾幕トークンのように原子性を保証しません。多くの操作で構成される更新中にプロセスがクラッシュしたり、ミューテックスを失ったりして、etcdが論理的に矛盾した状態になる場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロジェクトの問題における作業の結果：</font></font><br>
<ul>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リビジョン0から始まる時計は後で開始</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -未定。</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロックは所有権をチェックせずにブロックした後に戻り</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます-マスターで。</font></font></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロックは安全でないと文書化されていません</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -解決されていません。</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4。議論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのテストでは、etcd 3.4.3はKV操作に関する期待に応えました。プロセスの停止、クラッシュ、クロックとネットワークの操作、およびクラスターメンバーの数の変更にもかかわらず、読み取り、書き込み、さらにはマルチキートランザクションの厳密にシリアル化可能な一貫性を観察しました。</font><font style="vertical-align: inherit;">厳密にシリアライズ可能な動作は、デフォルトでKV操作に実装されました。</font><font style="vertical-align: inherit;">フラグを</font></font><code>serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設定</font><font style="vertical-align: inherit;">して読み取りを実行すると、</font><font style="vertical-align: inherit;">古い読み取りが表示されます（ドキュメントに記載されています）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モニター</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（時計）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が正しく機能するように-少なくとも個々のキーで。</font><font style="vertical-align: inherit;">履歴の圧縮によって古いデータが破壊されるまで、時計は各キーの更新を正常に発行しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、（すべての分散ロックと同様に）etcdのロックは相互排除を提供しないことが判明しました。異なるプロセスが同時にロックを保持する可能性があります-完全に同期されたクロックを持つ健全なクラスター内でもです。ロッキングAPIのドキュメントにはこれについて何も書かれておらず、提示されたロックの例は安全ではありませんでした。ただし、ロックに関する問題の一部は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このパッチの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リリース後でなければなりません</font><font style="vertical-align: inherit;">でした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
共同作業の結果、etcdチームはドキュメントにいくつかの修正を加えました（GitHubにすでに表示されており、プロジェクトのWebサイトの将来のバージョンで公開されます）。 GitHub Warranties APIページに、デフォルトでetcdが</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">厳密にシリアル化</font></a><font style="vertical-align: inherit;">可能であることが記載されています</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">そして、serialとserializableが分散システムで利用できる最も強力な一貫性のレベルであるという主張は削除されました。リビジョンに関しては、開始は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユニット（1）からである</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要があることが示されて</font><font style="vertical-align: inherit;">いますが、APIドキュメントには</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まだ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0番目のリビジョンから開始しようとすると「現在のリビジョン+ 1の後に発生したイベントが出力される」と</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">は</font></a><font style="vertical-align: inherit;">記載され</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ていません</font></a><font style="vertical-align: inherit;">予想される「すべてのイベントのディスパッチ」の代わりに。ロックのセキュリティ問題のドキュメントは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ゼロリビジョンから始めて、読み込もうとしたときのetcdの特別な動作の説明など、一部のドキュメントの変更には、まだ注意が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつものように、私たちはJepsenがセキュリティ検証に実験的なアプローチを好むことを強調します：バグの存在は確認できますが、バグがないことは確認できません。</font><font style="vertical-align: inherit;">問題を見つけるためにかなりの努力が払われていますが、etcdの一般的な正確さを証明することはできません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1推奨事項</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
etcdでロックを使用する場合、セキュリティのためにそれらを必要とするか、または同時実行性を確率的に制限することによって単にパフォーマンスを向上させるかを検討してください。 Etcdロックは、パフォーマンスを向上させるために使用できますが、セキュリティ目的で使用することは危険な場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特に、etcdロックを使用してファイル、データベース、サービスなどの共有リソースを保護する場合、このリソースは</font><font style="vertical-align: inherit;">ブロック</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">せずに</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セキュリティ</font><i><font style="vertical-align: inherit;">を</font></i><font style="vertical-align: inherit;">保証する必要があり</font><font style="vertical-align: inherit;">ます。これを達成する1つの方法は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単調な弾幕トークン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用すること</font><font style="vertical-align: inherit;">です。たとえば、現在保持されているロックキーに関連付けられているetcdリビジョンなどです。共有リソースは、クライアントがトークンを使用した後、</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">なんらかの操作を実行するために、トークンのある操作はすべて</font></font><code>x &lt; y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拒否されます。このアプローチでは原子性は保証されませんが、ロックのフレームワーク内の操作が断続的にではなく順序どおりに実行されることが保証されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常のユーザーがこの問題に遭遇する可能性は低いと思われます。ただし</font><font style="vertical-align: inherit;">、最初のリビジョンから始めてetcdからすべての変更を読み取る</font><font style="vertical-align: inherit;">ことに</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依拠</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">している場合は、パラメーターとして0ではなく1を渡す必要があることに注意してください。この場合のゼロリビジョンは「現在のリビジョン」であり、 「最も早い」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、ロックとetcd（すべての分散ロックと同様）はユーザーを誤解させます。通常のロックとして使用したいかもしれませんが、これらのロックが相互排除を提供しないことに気づくと、彼らは非常に驚かれます。</font><font style="vertical-align: inherit;">GitHubのAPIドキュメント、ブログ投稿、問題は、このリスクについて何も述べていません。</font><font style="vertical-align: inherit;">etcdドキュメントに、ロックによって相互排除が提供されないという情報を含めること、および更新が失われる可能性のある例ではなく、弾幕トークンを使用して共有リソースのステータスを更新する例を提供することをお勧めします。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2さらなる計画</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
etcdプロジェクトは数年前から安定していると考えられてきました。これに基づくRaftアルゴリズムはうまく機能し、KV操作用のAPIはシンプルで簡単です。最近、いくつかの追加機能に新しいAPIが追加されましたが、そのセマンティクスは比較的単純です。</font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>put</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、トランザクション、ブロッキング、トラッキング</font><font style="vertical-align: inherit;">などの</font><font style="vertical-align: inherit;">基本的なコマンドはすでに十分に学習していると思います</font><font style="vertical-align: inherit;">。ただし、実行する必要のある他のテストがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
現在のところ、</font><i><font style="vertical-align: inherit;">削除の</font></i><font style="vertical-align: inherit;">詳細な評価は行っていません</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：オブジェクトが常に作成および削除される場合、バージョンとリビジョンに関連付けられた境界ケースがある場合があります。今後のテストでは、削除操作をより慎重に調査する予定です。範囲クエリや複数のキーを使用した操作の追跡もテストしませんでしたが、それらのセマンティクスは単一のキーを使用した操作に似ていると思われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
テストでは、プロセスの停止、クラッシュ、クロックによる操作を使用しました。ネットワークが分割され、クラスターの構成が変更されました。舞台裏では</font><font style="vertical-align: inherit;">、1つのノードのレベルで</font><font style="vertical-align: inherit;">ディスクの損傷やその他の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビザンチン障害</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などの問題があり</font><font style="vertical-align: inherit;">ました。これらの機会は将来の研究で探求されるかもしれません。</font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この作業は、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Cloud Native Computing Foundation</font></a><font style="vertical-align: inherit;">によってサポートされました</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Linux Foundationの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一部で</font><font style="vertical-align: inherit;">あり、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jepsenの倫理規定に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">準拠してい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">etcdチーム、特に次の代表に感謝します。ChrisAniszczyk、Gyuho Lee、Xiang Li、Hitoshi Mitake、Jingyi Hu、Brandon Philips。</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">翻訳者からのPS</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのブログも読んでください：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TiKV-クラウドネイティブ向けの分散型Key-Valueデータベース</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CoreOSのZetcd：ZooKeeperを... storage etcdに置き換えます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ";</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redisの[潜在的]代替としてのKeyDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データベースとKubernetes（レビューとビデオレポート）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。」</font></font></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja487516/index.html">プリフェッチファイルを使用する攻撃者の狩猟手法と戦術</a></li>
<li><a href="../ja487518/index.html">放射性製品。ガンマ分光計。パート2</a></li>
<li><a href="../ja487522/index.html">ターミナルフライを作成します（パート1）</a></li>
<li><a href="../ja487524/index.html">ハードウェアスタートアップハッカソンが必要な理由</a></li>
<li><a href="../ja487528/index.html">Изменения в пользовательском соглашении и политике конфиденциальности на сервисах Хабра</a></li>
<li><a href="../ja487538/index.html">.NET Interactiveが登場！| .NETノートブックプレビュー2</a></li>
<li><a href="../ja487540/index.html">HighLoad ++、Anastasia Tsymbalyuk、Stanislav Tselovalnikov（Sberbank）：MDAになった経緯</a></li>
<li><a href="../ja487542/index.html">PRESENT-超軽量ブロック暗号（元のPRESENTの翻訳：超軽量ブロック暗号）</a></li>
<li><a href="../ja487544/index.html">.NETドキュメント：1月の新機能</a></li>
<li><a href="../ja487548/index.html">新しい実験：gRPC-Webを使用してブラウザーから.NET gRPCサービスを呼び出す</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>