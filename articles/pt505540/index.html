<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¢ üèõÔ∏è üñêüèº Reagir a arquitetura nativa redesenhada em 2020 ü§ò üë©üèº‚Äçü§ù‚Äçüë®üèæ üì∫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A estrutura React Native (RN) apareceu em 2015. Ele foi desenvolvido para desenvolver aplicativos m√≥veis de plataforma cruzada usando a biblioteca Rea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Reagir a arquitetura nativa redesenhada em 2020</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/505540/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A estrutura React Native (RN) apareceu em 2015. Ele foi desenvolvido para desenvolver aplicativos m√≥veis de plataforma cruzada usando a biblioteca React. Esses aplicativos suportam os recursos nativos das plataformas para as quais eles s√£o criados. A arquitetura original do React Native apresentava certas falhas. Mas, apesar disso, o RN recebeu um bom apoio da comunidade, sua popularidade estava aumentando gradualmente, n√£o menos importante - gra√ßas √† reputa√ß√£o do React.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/ka/ai/2b/kaai2bun5gnxmt-soerdq3iyzj8.png"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O projeto de arquitetura React Native foi abordado em 2018. </font><font style="vertical-align: inherit;">Este trabalho √© feito pela equipe do Facebook. </font><font style="vertical-align: inherit;">O objetivo do redesenho √© tornar a estrutura mais est√°vel e resolver os problemas mais comuns que se acumularam no RN ao longo dos anos de desenvolvimento. </font><font style="vertical-align: inherit;">O material, cuja tradu√ß√£o estamos publicando hoje, √© dedicado a considerar como o processamento da arquitetura do RN pode melhorar o desempenho do aplicativo e a velocidade dos programadores.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura antiga</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O React Native √© um exemplo de solu√ß√£o que pode ser chamada de plataforma independente. </font><font style="vertical-align: inherit;">Como resultado, verifica-se que o principal objetivo da estrutura √© permitir que os desenvolvedores escrevam c√≥digo JavaScript usando mecanismos React. </font><font style="vertical-align: inherit;">O objetivo do React Native √© transformar a √°rvore dos componentes do React em algo que funcione em v√°rias plataformas m√≥veis. </font><font style="vertical-align: inherit;">Isso significa o seguinte:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forma√ß√£o correta da interface.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fornecendo acesso aos recursos nativos de v√°rias plataformas.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Normalmente, nos ecossistemas Android / iOS, o mecanismo usado para realizar essas tarefas √© semelhante √† figura a seguir.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb7/270/553/eb7270553b52c21de9acda19fe7b7891.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arquitetura nativa do React existente ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">origem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em cada aplicativo React Native, os tr√™s segmentos a seguir s√£o executados em paralelo:</font></font><br>
<br>
<ul>
<li> JS.  ‚Äî ,       JavaScript-.       .  Metro   JS-   ,    JSX-  TS-.      JavaScriptCore,       .</li>
<li> Native.     .     JavaScript- ,         .       . , Native UI,       . , Native Modules,      ,    .       .  , ,  React Native  Bluetooth-,    ,    ,  ,   ,  .</li>
<li> Shadow.      .    Yoga,    Facebook.     ,     .     ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para organizar a intera√ß√£o entre encadeamentos JS e nativos, o m√≥dulo Bridge √© usado. Este m√≥dulo √© escrito em C ++ e √© baseado em uma fila ass√≠ncrona. Quando uma ponte recebe dados de uma das partes, ela serializa esses dados, convertendo-os em um formul√°rio de cadeia e os passa pela fila. Quando os dados chegam ao seu destino, eles s√£o desserializados. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso significa que todos os encadeamentos dependem de mensagens JSON ass√≠ncronas enviadas pela ponte. Cada parte envia essas mensagens, esperando (mas sem garantia) que, em algum momento no futuro, essas mensagens sejam respondidas. Com esse esquema de troca de dados, existe o risco de sobrecarga do canal de comunica√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um exemplo que geralmente √© dado para ilustrar como esse esquema de troca de dados pode causar problemas no desempenho do aplicativo. Suponha que um usu√°rio do aplicativo role uma lista enorme. Quando o evento onScroll ocorre no ambiente nativo, as informa√ß√µes s√£o transferidas de forma ass√≠ncrona para o ambiente JavaScript. Mas os mecanismos nativos n√£o esperam at√© que a parte JavaScript do aplicativo fa√ßa seu trabalho e os reporte a eles. Por esse motivo, existe um atraso, expresso na apar√™ncia da lista, antes de exibir seu conte√∫do, espa√ßo vazio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Da mesma forma, antes que os resultados do rec√°lculo do layout cheguem √† tela, o sistema deve executar v√°rias sess√µes de troca de dados. </font><font style="vertical-align: inherit;">Portanto, antes que os dados do layout entrem no ambiente nativo, eles precisam ser processados ‚Äã‚Äãno Yoga. </font><font style="vertical-align: inherit;">E isso, √© claro, significa que esses dados tamb√©m precisam ser transmitidos atrav√©s da ponte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, o envio de dados JSON usando mecanismos ass√≠ncronos, al√©m de serializar e desserializar esses dados, causa problemas de desempenho. </font><font style="vertical-align: inherit;">Este mecanismo √© imperfeito. </font><font style="vertical-align: inherit;">Mas de que outra forma voc√™ pode interagir entre mecanismos nativos e JavaScript? </font><font style="vertical-align: inherit;">Voc√™ pode responder a esta pergunta usando a tecnologia JSI.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nova arquitetura</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante o redesenho da arquitetura React Native, as fun√ß√µes da ponte s√£o eliminadas gradualmente, substitu√≠das por um novo mecanismo chamado Interface JavaScript (JSI). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O uso do JSI abre algumas grandes melhorias. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A primeira melhoria √© que o pacote JS n√£o depende mais do JSC. Em outras palavras, o mecanismo JSC agora pode ser facilmente substitu√≠do por outra coisa, possivelmente apresentando um desempenho mais alto. Por exemplo - para o motor V8.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A segunda melhoria √© a base da nova arquitetura React Native. Est√° no fato de que, gra√ßas ao uso de JSI, em JavaScript, voc√™ pode armazenar links para objetos C ++ (Host Objects) e chamar m√©todos desses objetos. Como resultado, verifica-se que a parte JavaScript do aplicativo e os mecanismos nativos saber√£o mais um do outro do que antes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em outras palavras, o JSI permite a intera√ß√£o completa entre todos os threads. Por meio do uso do conceito de propriedade compartilhada, o c√≥digo JavaScript pode executar m√©todos nativos diretamente do fluxo JS. N√£o h√° necessidade de usar JSON para transferir dados. Isso elimina os problemas t√≠picos do uso de uma ponte relacionada a poss√≠veis estouros de fila e transfer√™ncia de dados ass√≠ncrona.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34e/2fa/1bd/34e2fa1bdca25d1f878ee5295033dab2.jpg"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nova arquitetura nativa do React ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fonte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Al√©m do fato de que o esquema acima melhora significativamente a intera√ß√£o entre diferentes threads, a nova arquitetura tamb√©m permite o controle direto dos m√≥dulos nativos. </font><font style="vertical-align: inherit;">Isso significa que os m√≥dulos nativos podem ser usados ‚Äã‚Äãe, em seguida, s√£o necess√°rios, e n√£o para inicializar todos eles quando o aplicativo for iniciado. </font><font style="vertical-align: inherit;">Isso leva a um aumento s√©rio na velocidade de inicializa√ß√£o de aplicativos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse novo mecanismo pode abrir caminho para o desenvolvimento de novos projetos capazes do que n√£o estava dispon√≠vel para aplicativos antigos do RN. </font><font style="vertical-align: inherit;">O fato √© que agora √† nossa disposi√ß√£o estava o poder do C ++. </font><font style="vertical-align: inherit;">Isso significa que, com base no React Native, agora ser√° poss√≠vel criar muito mais variedades de aplicativos do que antes.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sum√°rio</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao longo dos anos de desenvolvimento, muitas coisas se acumularam na infraestrutura do React Native que hoje podem ser consideradas obsoletas e n√£o utilizadas. O desejo dos desenvolvedores do RN de remover desnecessariamente e melhorar a capacidade de suport√°-lo leva √† remo√ß√£o de alguns de seus recursos. Por exemplo, estamos falando sobre o fato de que seus m√≥dulos do kernel, como Webview e AsyncStorage, est√£o sendo gradualmente removidos da estrutura e criados como reposit√≥rios desenvolvidos pela comunidade React Native. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gra√ßas ao novo n√∫cleo compacto e aos impressionantes mecanismos de intera√ß√£o entre o c√≥digo JavaScript e o c√≥digo nativo, o redesenho da arquitetura React Native deve levar ao fato de que os aplicativos RN se tornar√£o mais produtivos e que ser√£o mais r√°pidos e convenientes para o desenvolvimento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reagir A reestrutura√ß√£o nativa dever√° ser conclu√≠da no quarto trimestre de 2020. </font><font style="vertical-align: inherit;">Estou encantado com as perspectivas de desempenho e usabilidade de aplicativos que acompanham o redesenho da arquitetura do RN. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ usa o React Native, conte-nos sobre as defici√™ncias dessa estrutura que voc√™ encontrou.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/gu/ab/cg/guabcgmwuqoopx1ar80sjpz6keq.png"></a> <br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/de/0y/l-/de0yl-6ppopvisr_a80b4yuhjj8.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt505522/index.html">Monetiza√ß√£o em jogos online: como usar a experi√™ncia de outra pessoa para suas pr√≥prias necessidades</a></li>
<li><a href="../pt505528/index.html">A coisa mais importante no Wi-Fi 6. N√£o, s√©rio</a></li>
<li><a href="../pt505530/index.html">Google faz seu processador e AMD est√° se preparando para destruir a Qualcomm</a></li>
<li><a href="../pt505532/index.html">Canais de telegrama sobre desenvolvimento de jogos: parte 2</a></li>
<li><a href="../pt505536/index.html">Como cozinhar o rastreamento de chamadas: experi√™ncia ciana</a></li>
<li><a href="../pt505546/index.html">Desenvolvimento de vibra√ß√£o e desktop</a></li>
<li><a href="../pt505548/index.html">Sem registro e SMS: sites "socialmente significativos" e uma lista do Minist√©rio de Assuntos Digitais</a></li>
<li><a href="../pt505554/index.html">Na competi√ß√£o ‚ÄúJovens T√©cnicos e Inventores‚Äù, n√£o s√£o necess√°rios verdadeiros jovens inventores</a></li>
<li><a href="../pt505556/index.html">Apple rastreia iPhones saqueados e d√° saqueadores da pol√≠cia</a></li>
<li><a href="../pt505558/index.html">C√¢mera de aprendizado profundo do Amazon DeepLens. Descompactando, Conectando e Implementando um Projeto</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>