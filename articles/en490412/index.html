<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèø üîÆ üà∑Ô∏è Maybe we should calm down a bit with JavaScript? üåç üë©‚Äçüë©‚Äçüë¶ üìñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have a very strange browser problem. The scripts on some pages simply do not work until about 20 seconds pass. 
 
 Whatever you were going to offer ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Maybe we should calm down a bit with JavaScript?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490412/"><img src="https://habrastorage.org/getpro/habr/post_images/23a/157/3ad/23a1573ad4ccc76f5cd1b64cfe43193b.png" align="left" width="60"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I have a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">very strange</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> browser problem. </font><font style="vertical-align: inherit;">The scripts on some pages simply do not work until about 20 seconds pass. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Whatever you were going to offer - yes, I already thought about it, and no, it did not help. </font><font style="vertical-align: inherit;">I talk about this not in the hope that someone will tell you with debugging, but because this incident made me </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acutely</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> aware of some, how to say ... quirks ... developments at the front. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(In fact, don‚Äôt even try to diagnose the problem by one sentence, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">don‚Äôt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , I heard and tried almost everything that you can imagine).</font></font><br>
<a name="habracut"></a><br>
<font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The article was written in March 2016, some examples are out of date - approx. </font><font style="vertical-align: inherit;">trans.</font></font></font> <br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Useless pages</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Look, here is a screenshot of the tweet. In it, those parts that </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do not work without JavaScript</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are highlighted in red </font><font style="vertical-align: inherit;">. I know this because, as before, I‚Äôve been looking at the page for which 20 seconds most of the code hasn‚Äôt worked yet. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/376/809/c43/376809c435042b0a54e6eeaa0db96379.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Something I can understand. For example, the ‚ÄúReply‚Äù button expands the text field at the bottom and puts focus on it. This can not be done without some scripts. The button </font></font><code>...</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opens a pop-up menu, which is </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doubtful</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , since you can also reproduce it using CSS. Similarly, a button with a heart performs an action in the background, which is also </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doubtful</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as it can be played back with full page loading. But these are non-trivial changes that will work in completely different ways with and without scripts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the other hand ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Is this button √ó in the upper right corner and all the empty surrounding space? Their only function is to send you to my profile, which is visible behind the tweet. They might as well be regular links, like left and right arrows for navigation. But this is done differently, so it does not work without JavaScript. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Or a small button with graphs, for analytics? Its only function is to load another page in an artificial pop-up window with a built-in frame. There could be a regular link that turns into a popup using a script. But this is done differently, so it does not work without JavaScript.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Text field? Of course, this is just a text box. But if you click on it before running JavaScript, a clumsy caption will remain in the field </font></font><code>Reply to @eevee</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. And when the script is still launched, it erases everything that you typed and inserts it again </font></font><code>Reply to @eevee</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, only now </font></font><code>@eevee</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it </font><font style="vertical-align: inherit;">is </font><font style="vertical-align: inherit;">written in blue letters, not gray ones. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The same thing happens on the Twitter search page, which is very strange because there is no text in the search field! If you start typing before the scripts finish, they will simply erase everything you typed. Not even to insert your placeholder text or apply a custom style. For no apparent reason, just like that.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Since NoScript works for me, I often notice strange design decisions on sites I visit for the first time. Of course, blank white pages are commonplace. For quite some time, articles on the Time website loaded fine without a script, but just didn't scroll - a property was used for the page </font></font><code>overflow: hidden;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for reasons that I can‚Äôt understand. Vox articles also load normally, except that in front of each image, blank space is displayed at the full height of the screen. Some particularly bad corporate sites are messy overlapping blocks of text. I think they abandoned CSS and wrote the layout in JavaScript.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are no good reasons for this. These are not advanced interactive applications; they are just text pages. We used to print them on paper, but as soon as we switched to information technology, it became impossible to put words on the screen without running a few megabytes of garbage for execution? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I directly hear how they call me a luddite, because I do not agree to surround five paragraphs of static text with thousands of lines of scripts. Well, let me answer in advance: go to the bathhouse. I think that web and interactive pages are great, I see great progress in the last decade. It‚Äôs just super that the web initially supported user settings, and I can pre-configure permissions for each site that it can run on my computer and what can‚Äôt.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But what‚Äôs not very cool is a group of highly paid and highly qualified specialists, each of whom has Chrome installed on the latest Mac Pro model, who work in the office at a distance of no more than a kilometer from each server they visit. </font><font style="vertical-align: inherit;">And now these guys are working, and then they turn and giggle at everyone else who does not have such a configuration. </font><font style="vertical-align: inherit;">Please note that any of the following conditions will interfere with your JavaScript:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Someone on a slow computer.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Someone on a slow connection.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Someone on the phone, that is, on a slow computer with a slow connection.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Someone is stuck with an old browser on a computer that he does not control - at work, at school, in the library, etc.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Someone is trying to write a small program that interacts with your site that does not have an API.</font></font><br>
</li>
<li>-     ,    .<br>
</li>
<li>-&nbsp;‚Äî   Google   .<br>
</li>
<li>-     Linux   ,   ,          Elinks.<br>
</li>
<li>-         ,      .<br>
</li>
<li>-  NoScript        .   ,   ,        .<br>
</li>
<li>-  NoScript      ,      ,   .         ,          .<br>
</li>
<li>     ,   ,           .<br>
</li>
<li> CDN .<br>
</li>
<li>  CDN   IPv6,        (,          ,    ).  -  IPv6,  ,  JS   .<br>
</li>
<li>    ,  JavaScript .<br>
</li>
<li>    ,         .   ,        .<br>
</li>
<li>    ,    ,      .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I'm not saying that interactive web applications such as Google Maps should be wiped off the face of the Earth, although even for Google Maps there was a backup without scripts for many years, up to the current version of WebGL! </font><font style="vertical-align: inherit;">I say that we turned off somewhere else when the basic functions of </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regular HTML</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suddenly stopped working without JavaScript. </font><font style="vertical-align: inherit;">Namely, without 40 megabytes of JavaScript, according to </font></font><code>about:memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;- this is data in memory, not the size of the download. </font><font style="vertical-align: inherit;">This may not seem like much (for a page that displays 140 characters?), But my browser often accumulates a dozen open Twitter tabs, that is, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">half a gigabyte of memory</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , allocated a maximum of 6 KB of text.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The invention of the square wheel</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You really need to try to achieve such a deplorable result. </font><font style="vertical-align: inherit;">I mean, if you need a link, you just write </font></font><code>&lt;a href="somewhere"&gt;label&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and </font><font style="vertical-align: inherit;">you're </font><font style="vertical-align: inherit;">done. </font><font style="vertical-align: inherit;">But if you start inventing this with JavaScript, you need a click handler, and it should work at the right time so that you know that the link really exists, and you may have to do some work to add the click handlers to the fake links, which adds Ajax. </font><font style="vertical-align: inherit;">Right? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No! </font><font style="vertical-align: inherit;">You will get only a pale, crappy imitation of a link. </font><font style="vertical-align: inherit;">Consider all the functions of native links:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I can follow the link.</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I can open the link in a new tab or window using the combination of the ctrl, shift keys and the mouse wheel (middle button).</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I can copy the link address and paste it somewhere or open in another browser, or something else.</font></font><br>
</li>
<li>   <code>'</code>  Firefox    .<br>
</li>
<li>  &nbsp;‚Äî Opera, Konqueror, uzbl, Firefox  vimperator?&nbsp;‚Äî   ,           ,       ¬´¬ª  ,    .<br>
</li>
<li> ,      .<br>
</li>
<li>      .<br>
</li>
<li>       ,        ,    .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The common thread here is that the tag </font></font><code>&lt;a href=...&gt;</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">means something</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . He says: "This is the path that you can go." Tons of tools rely on this information. If you replace it with </font></font><code>&lt;div onclick&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then yes, clicking on the div will do something, but the whole </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">point is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> completely lost. Conversely, if used </font></font><code>&lt;a href="javascript:void(0);"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then you are actually lying to these tools; you cause meaning, but give meaningless information. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
That's what people mean when they talk about "semantics" - that there is useful information that needs to be collected. If you start inventing the similarity of links, then the analysis of this synthetic construct will require either speculative execution of a large amount of arbitrary code, or writing </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extremely</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a smart static analyzer, or just training a human programmer. Declaring intentions is a much more powerful and flexible method than just doing the work, because in the first case, universal tools do useful things almost trivially. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another good example is drop-down forms </font></font><code>&lt;select&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Some developers sometimes completely from scratch create their replacement from non-native widgets. Probably to make them more beautiful? Noble goal. But did you know that in native drop-down forms, when you start typing, the first suitable position is automatically selected? Obviously, in most alternative implementations this is not supported. Visually, they look better (or just different), but functionally much worse for long lists.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A homemade Twitter text box is not a text box at all, but </font></font><code>contenteditable</code> <code>&lt;div&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. This </font></font><code>contenteditable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">means that most of the native controls work pretty well, but still, this object from time to time exhibits some strange behavior, for example, moves the cursor to the beginning of the text when I switch between tabs. Or sometimes the script has some problems with my typing speed and it starts to notice. The only reason why even put it instead of the usual &lt;textarea&gt;, it seems, is to tint </font></font><code>@handles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and links in blue? A homemade text box does not shorten links or replace Twitter emojis, so this is not really a preview of how your tweet will look.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Do you know that some sites have hotkeys? Nice, right? But actually </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it‚Äôs a built-in hotkey in Firefox that opens the quick search bar. Obviously, no one on Twitter or GitHub, or BitBucket, or Tumblr, or in a dozen other places knows about this, because they all assigned this key focus to their own search bar on the site. Which is completely different from the search on the current page (to the honor of GitHub, they fixed it when I complained on Twitter). For a long time, Google+ turned off the spacebar to scroll down. Why didn‚Äôt anyone in these huge companies stop and say: ‚ÄúHey, wait, this is a working function in the browser, and we are breaking it‚Äù? Do web developers use browsers themselves?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It was recalled that every Twitter page silently absorbs any keyboard events and mouse clicks until all scripts work out. This means that I can‚Äôt even change the tab until I wait these 20 seconds for the page to load: ctrl-t, ctrl-w, ctrl-tab, ctrl-pgup and ctrl-pgdn - all keyboard events are completely absorbed. This is how a mechanism called ‚Äúswift action queue‚Äù works. It sounds like this queue should play events at the end of the page loading, but (a) you cannot use the hot keys in the browser; (b) it looks like it still doesn't work. To fix this, I had to write a custom script to block the script tag with a specific identifier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I don't think I'm very picky. </font><font style="vertical-align: inherit;">These are the basic functions of the browser, and you violate them, often without a good reason. </font><font style="vertical-align: inherit;">I do not expect you to make Google Docs work without JavaScript. </font><font style="vertical-align: inherit;">I just hope you don't break my damn keyboard.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let me give you some advice.</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accept the fact that sometimes for some people your JavaScript will not work. Think what that means. When you have a choice, always choose existing HTML mechanisms. Maybe once a year your development team will turn off JavaScript and try to use the site. Start crying. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you are going to redefine or rethink what already exists, study this first. You cannot create a good replacement without understanding the original. Ask around. Hell, just try clicking </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on the browser before doing this with the hotkey on your website.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remember that with all the power that the Internet gives you, ultimately the control is still in the hands of the user. </font><font style="vertical-align: inherit;">The Internet is not a game console; act accordingly. </font><font style="vertical-align: inherit;">Create modules. </font><font style="vertical-align: inherit;">Consider possible or common settings in advance. </font><font style="vertical-align: inherit;">Maybe something to reduce a little when you reach 40 megabytes of scripts on the page. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en490400/index.html">Using the OpenCV library to recognize elliptical arcs in 2D sections of 3D point clouds</a></li>
<li><a href="../en490404/index.html">Why and how 5G will change everything: technology, phased implementation and element base for subscriber equipment</a></li>
<li><a href="../en490406/index.html">Inexpressibly attractive: how we created a haniot that cannot be exposed</a></li>
<li><a href="../en490408/index.html">FreeBSD: –≥–æ—Ä–∞–∑–¥–æ –ª—É—á—à–µ GNU/Linux</a></li>
<li><a href="../en490410/index.html">Live and artificial neurons connected via the Internet</a></li>
<li><a href="../en490416/index.html">Computer Science Club Lecture Video</a></li>
<li><a href="../en490418/index.html">Millennials and Generation Alpha VS Higher Education</a></li>
<li><a href="../en490420/index.html">Lifehacks to developers from a recruiter</a></li>
<li><a href="../en490424/index.html">Roboruk</a></li>
<li><a href="../en490430/index.html">On the way to plotting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>