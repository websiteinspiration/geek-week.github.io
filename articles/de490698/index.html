<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵🏿 🖖🏾 🚆 Funktionen für die Zusammenstellung und Bereitstellung von iOS-Anwendungen 🎛️ 👇🏼 📏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel berichtet Maxim Shestakov, DevOps-Ingenieur im Plarium Krasnodar-Studio, über seine Erfahrungen beim Erstellen und Bereitstellen von...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Funktionen für die Zusammenstellung und Bereitstellung von iOS-Anwendungen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/plarium/blog/490698/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Artikel berichtet Maxim Shestakov, DevOps-Ingenieur im Plarium Krasnodar-Studio, über seine Erfahrungen beim Erstellen und Bereitstellen von iOS-Anwendungen für Benutzer, die sich während des CI / CD-Debuggens angesammelt haben.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ls/eq/j8/lseqj8pl9g9h1yrdm-h-ekpzuno.jpeg"><a name="habracut"></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ausbildung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jeder, der mit der Entwicklung von Anwendungen für Apple-Geräte verbunden ist, hat es bereits geschafft, die umstrittene Benutzerfreundlichkeit der Infrastruktur zu würdigen. </font><font style="vertical-align: inherit;">Es gibt überall Schwierigkeiten: vom Entwicklerprofilmenü bis zu den Debugging- und Assembly-Tools. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt viele Artikel zu den Grundlagen im Internet, daher werden wir versuchen, die Hauptsache hervorzuheben. </font><font style="vertical-align: inherit;">Folgendes benötigen Sie, um die Anwendung erfolgreich zu erstellen:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklerkonto</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MacOS-basiertes Gerät, das als Build-Server fungiert;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das generierte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklerzertifikat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das dann zum Signieren der Anwendung verwendet wird;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erstellte Anwendung mit einer eindeutigen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (die Bedeutung der Bundle- </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">ID</font></a><font style="vertical-align: inherit;"> sollte beachtet werden, da die Verwendung der Platzhalter-ID die Verwendung vieler Funktionen der Anwendung unmöglich macht, z. B. zugeordnete Domänen, Push-Benachrichtigungen, Apple-Anmeldung und andere);</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anwendungssignatur </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Profil</font></a><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Entwicklerzertifikat sollte über den Schlüsselbund auf jedem MacOS-Gerät generiert werden. </font><font style="vertical-align: inherit;">Die Art des Zertifikats ist sehr wichtig. </font><font style="vertical-align: inherit;">Abhängig von der Anwendungsumgebung (Entwicklung, Qualitätssicherung, Bereitstellung, Produktion) unterscheiden sich diese (Entwicklung oder Verteilung) sowie die Art des Anwendungssignaturprofils. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Haupttypen von Profilen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklung - Entwickelt, um die Anwendung des Entwicklungsteams mithilfe des Entwicklungszertifikats zu signieren (Name des Formulars iPhone Entwickler: XXXXX)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ad-hoc - zum Signieren einer Testanwendung und zur internen Überprüfung durch die QS-Abteilung unter Verwendung des Distributionszertifikats des Entwicklers (Name des iPhone-Distributionstyps: XXXXX);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App Store - Release-Build für externe Tests über TestFlight und Hochladen in den App Store unter Verwendung des Distributionszertifikats des Entwicklers.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Generieren von Entwicklungs- und Ad-hoc-Profilen wird auch eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste der Geräte</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> angezeigt </font><font style="vertical-align: inherit;">, auf denen Sie den Build installieren können, sodass Sie den Zugriff für Benutzer weiter einschränken können. </font><font style="vertical-align: inherit;">Das App Store-Profil enthält keine Liste der Geräte, da TestFlight für die Zugriffskontrolle während der Closed Beta-Tests verantwortlich ist, die später erläutert werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aus Gründen der Übersichtlichkeit können Sie das Entwicklerprofil unten in Form eines Tablets darstellen. </font><font style="vertical-align: inherit;">Es ist einfacher zu verstehen, welche Parameter für die Baugruppe wir benötigen und wo sie erhältlich sind.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qd/dt/u9/qddtu9hfklorm9kmotcctpr-hoc.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Versammlung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Trennung von Assemblys nach Projekt und Umgebung zu vereinfachen, verwenden wir die Namen der Profile der Ansicht </font></font><code>${ProjectName}_${Instance}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, dh den Namen des Projekts + der Instanz (abhängig von der Anwendungsumgebung: Dev, QA, GD, Staging, Live usw.). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Importieren auf einen Build-Server ändert das Profil seinen Namen in eine eindeutige ID und wird in den Ordner verschoben </font></font><code>/Users/$Username/Library/MobileDevice/Provisioning Profiles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(in </font></font><code>$Username</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dem er dem Namen des Build-Server-Benutzerkontos entspricht). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt zwei Möglichkeiten, die * .ipa-Datei zu erstellen - veraltet (PackageApplication) und modern (durch Erstellen von XcAchive und Exportieren). </font><font style="vertical-align: inherit;">Die erste Methode gilt als veraltet, da ab Version 8.3 das App-Dateiverpackungsmodul aus der Xcode-Distribution entfernt wurde. </font><font style="vertical-align: inherit;">Um es zu verwenden, müssen Sie das Modul vom alten Xcode (Version 8.2 und früher) in den Ordner kopieren: </font></font><br>
<code>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/ </code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Führen Sie dann den folgenden Befehl aus:</font></font><br>
<br>
<pre><code class="bash hljs">chmod +x /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/*</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes müssen Sie die * .app-Datei der Anwendung sammeln:</font></font><br>
<br>
<pre><code class="bash hljs">xcodebuild \<font></font>
-workspace <span class="hljs-variable">$ProjectDir</span>/<span class="hljs-variable">$ProjectName</span>.xcworkspace \<font></font>
-scheme <span class="hljs-variable">$SchemeName</span> \<font></font>
-sdk iphoneos \<font></font>
build \<font></font>
-configuration Release \<font></font>
-derivedDataPath build \<font></font>
CODE_SIGN_IDENTITY=”<span class="hljs-variable">$DevAccName</span>”\<font></font>
PROVISIONING_PROFILE=”<span class="hljs-variable">$ProfileId</span>”<font></font>
DEPLOYMENT_POSTPROCESSING=YES \<font></font>
SKIP_INSTALL=YES \<font></font>
ENABLE_BITCODE=NO<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wobei: </font></font><br>
<br>
<code>-workspace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Pfad zur Projektdatei. </font></font><br>
<br>
<code>-scheme</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- verwendete Schaltung im Projekt angegeben. </font></font><br>
<br>
<code>-derivedDataPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Der Pfad zum Entladen der zusammengestellten Anwendung (* .app). </font></font><br>
<br>
<code>CODE_SIGN_IDENTITY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Der Name des Entwicklerkontos, das in Keychain überprüft werden kann (iPhone-Entwickler: XXXX XXXXXXX, ohne TeamID in Klammern). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pm/lk/fe/pmlkfeglfyjjkdndrmzvtzr8bsu.jpeg"><br>
<br>
<code>PROVISIONING_PROFILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Die Profil-ID zum Signieren der Anwendung, die mit dem folgenden Befehl abgerufen werden kann:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in">cd</span> <span class="hljs-string">"/Users/<span class="hljs-variable">$Username</span>/Library/MobileDevice/Provisioning Profiles/"</span> &amp;&amp; find *.mobileprovision -<span class="hljs-built_in">type</span> f | xargs grep -li <span class="hljs-string">"&gt;<span class="hljs-variable">${ProjectName}</span>_<span class="hljs-variable">${Instance}</span>&lt;"</span> | sed -e <span class="hljs-string">'s/.mobileprovision//'</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn die Anwendung ein zusätzliches Profil verwendet (z. B. für Push-Benachrichtigungen), geben Sie stattdessen </font></font><code>PROVISIONING_PROFILE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Folgendes an:</font></font><br>
<br>
<pre><code class="bash hljs">APP_PROFILE=”<span class="hljs-variable">$AppProfile</span>” \<font></font>
EXTENSION_PROFILE=”<span class="hljs-variable">$ExtProfile</span>” \</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes sollte die resultierende * .app-Datei in * .ipa gepackt werden. </font><font style="vertical-align: inherit;">Dazu können Sie einen Befehl des Formulars verwenden:</font></font><br>
<br>
<pre><code class="bash hljs">/usr/bin/xcrun --sdk iphoneos PackageApplication \<font></font>
-v $(find <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>/build/Build/Products/Release-iphoneos"</span> -name <span class="hljs-string">"*.app"</span>) \<font></font>
-o <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>/<span class="hljs-variable">$ProjectName_</span><span class="hljs-variable">$Instance</span>.ipa"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Methode wird jedoch aus Sicht von Apple als veraltet angesehen. </font><font style="vertical-align: inherit;">Es ist wichtig, * .ipa durch Exportieren aus dem Anwendungsarchiv zu erhalten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst müssen Sie das Archiv mit dem folgenden Befehl sammeln:</font></font><br>
<br>
<pre><code class="bash hljs">xcodebuild \<font></font>
-workspace <span class="hljs-variable">$ProjectDir</span>/<span class="hljs-variable">$ProjectName</span>.xcworkspace \<font></font>
-scheme <span class="hljs-variable">$SchemeName</span> \<font></font>
-sdk iphoneos \<font></font>
-configuration Release \<font></font>
archive \<font></font>
-archivePath <span class="hljs-variable">$ProjectDir</span>/build/<span class="hljs-variable">$ProjectName</span>.xcarchive \<font></font>
CODE_SIGN_IDENTITY=”<span class="hljs-variable">$DevAccName</span>” \<font></font>
PROVISIONING_PROFILE=”<span class="hljs-variable">$ProfileId</span>”<font></font>
ENABLE_BITCODE=NO \<font></font>
SYNCHRONOUS_SYMBOL_PROCESSING=FALSE</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Unterschiede liegen in der Assemblierungsmethode und der Option </font></font><code>SYNCHRONOUS_SYMBOL_PROCESSING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die das Entladen von Zeichen während der Assemblierung deaktiviert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes müssen wir eine Datei mit Exporteinstellungen generieren:</font></font><br>
<br>
<pre><code class="bash hljs">ExportSettings=<span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>/exportOptions.plist"</span><font></font>
<font></font>
cat &lt;&lt; EOF &gt; <span class="hljs-variable">$ExportSettings</span>
&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;<font></font>
&lt;!DOCTYPE plist PUBLIC <span class="hljs-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="hljs-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;<font></font>
&lt;plist version=<span class="hljs-string">"1.0"</span>&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;compileBitcode&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">false</span>/&gt;<font></font>
&lt;key&gt;uploadBitcode&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">false</span>/&gt;<font></font>
&lt;key&gt;uploadSymbols&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">false</span>/&gt;<font></font>
&lt;key&gt;method&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$Method</span>&lt;/string&gt;<font></font>
&lt;key&gt;provisioningProfiles&lt;/key&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;<span class="hljs-variable">$BundleID</span>&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$ProfileId</span>&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;key&gt;signingCertificate&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$DevAccName</span>&lt;/string&gt;<font></font>
&lt;key&gt;signingStyle&lt;/key&gt;<font></font>
&lt;string&gt;manual&lt;/string&gt;<font></font>
&lt;key&gt;stripSwiftSymbols&lt;/key&gt;<font></font>
&lt;<span class="hljs-literal">true</span>/&gt;<font></font>
&lt;key&gt;teamID&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$TeamID</span>&lt;/string&gt;<font></font>
&lt;key&gt;thinning&lt;/key&gt;<font></font>
&lt;string&gt;&lt;none&gt;&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/plist&gt;<font></font>
EOF<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wobei: </font></font><br>
<br>
<code>$Method</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- die Übermittlungsmethode dem Typ des Anwendungssignaturprofils entspricht, dh für die Entwicklung ist der Wert die Entwicklung, für Ad-hoc - Ad-hoc und für den App Store - App-Store. </font></font><br>
<br>
<code>$BundleID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Die Anwendungs-ID, die in den Anwendungseinstellungen angegeben ist. </font><font style="vertical-align: inherit;">Sie können mit dem Befehl überprüfen:</font></font><br>
<br>
<pre><code class="bash hljs">defaults <span class="hljs-built_in">read</span> <span class="hljs-variable">$ProjectDir</span>/Info CFBundleIdentifier</code></pre><br>
<code>$DevAccName  $ProfileId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Einstellungen für den Entwicklernamen und die Signaturprofil-ID, die zuvor verwendet wurden und mit den Werten in den Exporteinstellungen übereinstimmen müssen. </font></font><br>
<br>
<code>$TeamID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- zehnstellige ID in Klammern nach dem Namen des Entwicklers, Beispiel: iPhone-Entwickler: ....... (XXXXXXXXXX); </font><font style="vertical-align: inherit;">kann in Schlüsselbund einchecken. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes erhalten wir mit dem Exportbefehl die erforderliche * .ipa-Datei:</font></font><br>
<br>
<pre><code class="bash hljs">xcodebuild \<font></font>
-exportArchive \<font></font>
-archivePath <span class="hljs-variable">$ProjectDir</span>/build/<span class="hljs-variable">$ProjectName</span>.xcarchive \<font></font>
-exportPath <span class="hljs-variable">$ProjectDir</span> \<font></font>
-exportOptionsPlist <span class="hljs-variable">$ExportSettings</span></code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lieferung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt muss die zusammengestellte Datei an den Endbenutzer geliefert werden, dh auf dem Gerät installiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Verteilung von Entwicklungs- und Ad-hoc-Builds gibt es viele Dienste wie HockeyApp, AppBlade und andere. In diesem Artikel wird jedoch auf einen eigenständigen Server für die Verteilung von Anwendungen eingegangen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Installation der Anwendung für iOS erfolgt in zwei Schritten:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abrufen des Anwendungsinstallationsmanifests über den Elementdienst.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installieren der * .ipa-Datei gemäß den im Manifest angegebenen Informationen über HTTPS.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher müssen wir zunächst das Installationsmanifest (Dateityp * .plist) mit dem folgenden Befehl generieren:</font></font><br>
<br>
<pre><code class="bash hljs">cat &lt;&lt; EOF &gt; <span class="hljs-variable">$manifest</span>
&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;<font></font>
&lt;!DOCTYPE plist PUBLIC <span class="hljs-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="hljs-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;<font></font>
&lt;plist version=<span class="hljs-string">"1.0"</span>&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;items&lt;/key&gt;<font></font>
&lt;array&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;assets&lt;/key&gt;<font></font>
&lt;array&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;kind&lt;/key&gt;<font></font>
&lt;string&gt;software-package&lt;/string&gt;<font></font>
&lt;key&gt;url&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$ipaUrl</span>&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/array&gt;<font></font>
&lt;key&gt;metadata&lt;/key&gt;<font></font>
&lt;dict&gt;<font></font>
&lt;key&gt;bundle-identifier&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$BundleID</span>&lt;/string&gt;<font></font>
&lt;key&gt;bundle-version&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$AppVersion</span>&lt;/string&gt;<font></font>
&lt;key&gt;kind&lt;/key&gt;<font></font>
&lt;string&gt;software&lt;/string&gt;<font></font>
&lt;key&gt;title&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$ProjectName_</span><span class="hljs-variable">$Instance</span>&lt;/string&gt;<font></font>
&lt;key&gt;subtitle&lt;/key&gt;<font></font>
&lt;string&gt;<span class="hljs-variable">$Instance</span>&lt;/string&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/array&gt;<font></font>
&lt;/dict&gt;<font></font>
&lt;/plist&gt;<font></font>
EOF</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, enthält das Manifest fast alle Parameter, die an der Zusammenstellung der Anwendung beteiligt sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anwendungsversion ( </font></font><code>$AppVersion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) kann mit dem folgenden Befehl überprüft werden:</font></font><br>
<br>
<pre><code class="bash hljs">defaults <span class="hljs-built_in">read</span> <span class="hljs-variable">$ProjectDir</span>/Info CFBundleVersion</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Parameter </font></font><code>$ipaUrl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enthält einen direkten Link zum Herunterladen der * .ipa-Datei. </font><font style="vertical-align: inherit;">Ab der siebten Version von iOS muss die Anwendung über HTTPS installiert werden. </font><font style="vertical-align: inherit;">In der achten Version hat sich das Manifestformat geringfügig geändert: Blöcke mit Einstellungen für Anwendungssymbole des Formulars wurden entfernt</font></font><br>
<br>
<pre><code class="bash hljs">&lt;images&gt;<font></font>
   &lt;image&gt;...&lt;/image&gt;<font></font>
&lt;/images&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um die Anwendung zu installieren, reicht eine einfache HTML-Seite mit einem Link des Formulars aus:</font></font><br>
<br>
<pre><code class="bash hljs">itms-services://?action=download-manifest&amp;url=https://<span class="hljs-variable">$ServerUrl</span>/<span class="hljs-variable">$ProjectName</span>/<span class="hljs-variable">$Instance</span>/iOS/<span class="hljs-variable">$AppVersion</span>/manifest.plist</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für die Anforderungen der Entwicklungs- und Testabteilungen hat Plarium eine Build-Installationsanwendung erstellt, die uns Folgendes bietet:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autonomie und Unabhängigkeit,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zentralisierte Zugriffskontrolle und sichere Installation von Anwendungen über "temporäre", dynamisch erstellte Links,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">erweiterbare Funktionalität (dh das Entwicklungsteam kann bei Bedarf die fehlenden Funktionen in eine vorhandene Anwendung integrieren).</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werden wir über das Testen von Anwendungen vor der Veröffentlichung mit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TestFlight sprechen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voraussetzungen für das Herunterladen sind der Signaturprofiltyp des App Store und das Vorhandensein generierter API-Schlüssel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt verschiedene Möglichkeiten, die Anwendung herunterzuladen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">über Xcode (Organizer),</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">durch altool,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">über Application Loader für ältere Versionen von Xcode (jetzt Transporter).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum automatischen Laden wird altool verwendet, das auch zwei Autorisierungsmethoden hat:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">App-spezifisches Passwort,</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API-Schlüssel</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist vorzuziehen, die Anwendung mit dem API-Schlüssel herunterzuladen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um den API-Schlüssel zu erhalten, folgen Sie dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und generieren Sie den Schlüssel. </font><font style="vertical-align: inherit;">Zusätzlich zum Schlüssel selbst im * .p8-Format benötigen wir zwei Parameter: IssuerID und KeyID. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7j/el/tr/7jeltrm88wb-m74uokirbdw59xs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes importieren wir den heruntergeladenen Schlüssel auf den Build-Server:</font></font><br>
<br>
<pre><code class="bash hljs">mkdir -p ~/.appstoreconnect/private_keys<font></font>
mv ~/Downloads/AuthKey_<span class="hljs-variable">${KeyID}</span>.p8 ~/.appstoreconnect/private_keys/</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bevor Sie die Anwendung in TestFlight laden, müssen Sie die Anwendung validieren. Führen Sie dazu den folgenden Befehl aus:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool \<font></font>
--validate-app \<font></font>
-t ios \<font></font>
-f $(find <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>"</span> -name <span class="hljs-string">"*.ipa"</span>) \<font></font>
--apiKey “<span class="hljs-variable">$KeyID</span>” \<font></font>
--apiIssuer “<span class="hljs-variable">$IssuerID</span>” </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wo </font></font><code>apiKey</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>apiIssuer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haben Feldwerte von der Seite zur API-Schlüsselgenerierung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach erfolgreicher Validierung laden wir die Anwendung mit einem Befehl </font></font><code>--upload-app</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit denselben Parametern. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anwendung wird innerhalb von ein bis zwei Tagen von Apple getestet und steht danach externen Testern zur Verfügung: Sie erhalten E-Mail-Links zur Installation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine andere Möglichkeit, die Anwendung über altool herunterzuladen, besteht darin, das app-spezifische Kennwort zu verwenden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um das App-spezifische Passwort zu erhalten, müssen Sie dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> folgen </font><font style="vertical-align: inherit;">und es im Abschnitt Sicherheit generieren. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k6/3k/lk/k63klknhpg0dtwoukakdzmn02om.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstellen Sie als Nächstes einen Build-Server-Datensatz in Keychain mit diesem Kennwort. </font><font style="vertical-align: inherit;">Ab Version 11 von Xcode kann dies mit dem folgenden Befehl erfolgen:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool --store-password-in-keychain-item <span class="hljs-string">"Altool"</span> -u <span class="hljs-string">"<span class="hljs-variable">$DeveloperName</span>"</span> -p <span class="hljs-variable">$AppPswd</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wobei: </font></font><br>
<br>
<code>$DeveloperName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">der Name des iOS-Entwicklerkontos ist, mit dem Sie sich bei Apple-Diensten anmelden. </font></font><br>
<br>
<code>$AppPswd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- generiertes app-spezifisches Passwort. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Nächstes erhalten wir den Wert des Parameters asc-provider und überprüfen den Erfolg des Imports des Kennworts mit dem folgenden Befehl:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool --list-providers -u <span class="hljs-string">"<span class="hljs-variable">$DeveloperName</span>"</span> -p <span class="hljs-string">"@keychain:Altool"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir kommen zu dem Schluss:</font></font><br>
<br>
<pre><code class="bash hljs">Provider listing:<font></font>
- Long Name - - Short Name -<font></font>
XXXXXXX        XXXXXXXXX</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, stimmt der gewünschte Wert für Short Name (ASC-Provider) mit dem Parameter $ TeamID überein, den wir beim Erstellen der Anwendung verwendet haben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verwenden Sie den folgenden Befehl, um die Anwendung in TestFlight zu validieren und zu laden:</font></font><br>
<br>
<pre><code class="bash hljs">xcrun altool \<font></font>
--(validate|upload)-app \  <font></font>
-f $(find <span class="hljs-string">"<span class="hljs-variable">$ProjectDir</span>"</span> -name <span class="hljs-string">"*.ipa"</span>) \<font></font>
-u <span class="hljs-string">"<span class="hljs-variable">$DeveloperName</span>"</span> \<font></font>
-p <span class="hljs-string">"@keychain:Altool"</span> \</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als Parameterwert </font></font><code>-p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">können Sie den Wert </font></font><code>$AppPswd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in unverschlüsselter (expliziter) Form </font><font style="vertical-align: inherit;">annehmen </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie bereits erwähnt, ist es aus Sicht der Bedienbarkeit besser, den API-Schlüssel für das Autorisierungs-Altool auszuwählen, da in verschiedenen Xcode-Versionen verschiedene Probleme auftreten (Schlüsselbund, Autorisierungsfehler beim Entladen usw. werden nicht angezeigt). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ist in der Tat alles. </font><font style="vertical-align: inherit;">Ich wünsche allen Beteiligten erfolgreiche Builds und problemlose Releases im App Store.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de490684/index.html">Kabelauswahl für strukturierte Verkabelung</a></li>
<li><a href="../de490686/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 500 (11.02.2020-17.02.2020)</a></li>
<li><a href="../de490690/index.html">Wir erstellen das WEB-Adressverzeichnis von PHP + LDAP</a></li>
<li><a href="../de490694/index.html">Top Kommentare im Quellcode</a></li>
<li><a href="../de490696/index.html">So funktioniert Mail for Business - Online-Shops und Großsender</a></li>
<li><a href="../de490700/index.html">Kurs zur Verarbeitung natürlicher Sprache</a></li>
<li><a href="../de490704/index.html">Japanische und kalifornische Kano-Modelle</a></li>
<li><a href="../de490708/index.html">Finnische Fluggesellschaften Finnair: Wie die Besatzung trainiert und ein wenig über die Innenseiten der Küche</a></li>
<li><a href="../de490714/index.html">Wie bekomme ich 100.000 pro Code. Komplette Anleitung für Anfänger</a></li>
<li><a href="../de490716/index.html">Wie kann ein qualitativ hochwertiger Betrieb des lokalen Netzwerks eines kleinen Unternehmens sichergestellt werden?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>