<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧖🏼 👨🏿‍🎨 🧙🏼 Créer une boîte aux lettres VIP dans Zimbra Collaboration Open-Source Edition 👩🏽‍🚀 🦃 🤸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans les entreprises, une situation survient souvent lorsque la création d'une soi-disant boîte aux lettres VIP est requise, seul un certain cercle de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Créer une boîte aux lettres VIP dans Zimbra Collaboration Open-Source Edition</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/zimbra/blog/494948/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans les entreprises, une situation survient souvent lorsque la création d'une soi-disant boîte aux lettres VIP est requise, seul un certain cercle de personnes peut lui envoyer des lettres. Ces boîtes aux lettres sont typiques de tous les cadres supérieurs ayant des secrétaires personnels. Au lieu du responsable supérieur, tous les e-mails sont reçus par le secrétaire, qui sélectionne ensuite les messages vraiment importants et nécessaires dans le flux général et les redirige vers la boîte aux lettres de son responsable. Un employé ordinaire d'une entreprise, lorsqu'il essaie d'envoyer un message à une boîte aux lettres VIP, devrait recevoir une notification indiquant que son message n'a pas été remis. Une telle boîte aux lettres VIP peut être facilement implémentée dans Zimbra Open-Source Edition en utilisant les outils de filtrage de courrier intégrés appelés Amavis et cbpolicyd.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/webt/op/xi/ie/opxiieyaijocgswpkt2td6f4-u0.png" alt="image"></div><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Amavis coordonne les actions de l'agent de transfert de courrier Postfix, du filtre anti-spam Spam Assassin, de l'antivirus ClamAV et de plusieurs autres. Ensemble, tous ces utilitaires offrent une protection fiable contre le spam et les virus, ainsi que les e-mails de phishing, qui constituent une menace sérieuse pour la sécurité des informations de l'entreprise. Par défaut, Amavis filtre tous les e-mails sans exception, mais la fonctionnalité de restriction de stratégie intégrée permet non seulement de désactiver ce filtrage pour toutes les boîtes aux lettres, mais également de limiter la liste des personnes qui peuvent envoyer des e-mails aux boîtes aux lettres en principe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, prenez la boîte aux lettres du PDG ceo@example.ru, pour laquelle il est nécessaire de limiter le cercle des personnes qui peuvent envoyer des messages directement. La liste sera limitée aux cadres supérieurs de l'entreprise sous la forme de CTO, CIO et CFO, ainsi que d'un secrétaire personnel. Pour cela, nous profiterons des restrictions de la politique d'Amavis. En utilisant la commande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov ma ceo@example.ru + amavisWhitelistSender Secretary@example.ru cto@example.ru cio@example.ru cfo@example.ru</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous ajouterons à la liste blanche des adresses qui peuvent écrire des e-mails directement au PDG, et avec en utilisant la commande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov ma ceo@example.ru amavisBlacklistSender example.ru</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous ajoutons le reste à la liste noire. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Afin de vous assurer que tout est fait correctement, vous pouvez exécuter la commande</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov -l ga ceo@example.ru | grep amavis | expéditeur grep</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La sortie de l'équipe montrera à la fois ceux qui sont autorisés à envoyer des messages au PDG et ceux à qui l'envoi de messages à son adresse e-mail est interdit. Cependant, en plus des utilisateurs du domaine d'une entreprise, les lettres à la boîte aux lettres du PDG peuvent également provenir de domaines sur Internet externe. Par conséquent, une mesure raisonnable consisterait à introduire une interdiction inconditionnelle de recevoir des e-mails de l'Internet externe pour cette boîte aux lettres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces restrictions peuvent être introduites à l'aide de cbpolicyd, le service de stratégie intégré à Zimbra Collaboration Suite Open-Source Edition. Pour l'utiliser, vous devez d'abord activer le module correspondant dans Zimbra OSE. Pour ce faire, entrez la commande</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov ms mail.example.ru + zimbraServiceEnabled cbpolicyd</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Exécutez cette commande sur l'hôte MTA si votre Zimbra OSE s'exécute sur une infrastructure multiserveur. Vous devrez également ouvrir l'accès à cbpolicyd via l'interface Web. Pour ce faire, entrez la commande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ln -s / opt / zimbra / data / cbpolicyd / share / webui / opt / zimbra / httpd / htdocs /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui créera un lien symbolique dans le serveur Apache. De plus, vous devez ajouter les </font><font style="vertical-align: inherit;">informations sur la base de données à laquelle vous souhaitez vous connecter au </font><font style="vertical-align: inherit;">fichier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/opt/zimbra/cbpolicyd/share/webui/includes/config.php</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pour ce faire, dans n'importe quel éditeur de texte, ajoutez la ligne </font><b><font style="vertical-align: inherit;">$ DB_DSN = "sqlite: /opt/zimbra/data/cbpolicyd/db/cbpolicyd.sqlitedb"</font></b><font style="vertical-align: inherit;"> à ce fichier</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Après cela, il ne reste plus qu'à redémarrer Zimbra OSE et le serveur Web Apache à l'aide des commandes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmcontrol restart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmapachectl restart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, l'interface Web pour l'administration de cbpolicyd est disponible sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mail.example.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 7780 / webui / index.php, cependant, il convient de noter qu'elle peut ne pas être disponible en raison des paramètres du pare-feu. Configurez-le pour accéder à l'interface Web cbpolicyd. Après avoir accédé à l'interface Web cbpolicyd, vous devez créer deux groupes: </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">users_local_only</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour les utilisateurs qui peuvent recevoir du courrier uniquement des utilisateurs du domaine local, ainsi que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">local_domain</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour le domaine local et activez-les en décochant la case "Désactivé". Après cela, vous devez ajouter des participants aux groupes. Dans notre cas, nous ajouterons ceo@example.ru au groupe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">users_local_only</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et le domaine example.ru au groupe </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">local_domain</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/wr/qi/zrwrqig_whywr6pyw7fo7qdwkdg.png"><br>
<br>
<img src="https://habrastorage.org/webt/xa/fd/11/xafd11cwayuoukj5mh6moi7lpis.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Passons maintenant aux paramètres de stratégie. Nous appellerons notre «Réception locale uniquement» et y indiquerons les groupes d'utilisateurs auxquels il sera distribué et les domaines considérés comme locaux. Les groupes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_local_only</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font><b><font style="vertical-align: inherit;">local_domain</font></b><font style="vertical-align: inherit;"> doivent être spécifiés comme eux</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et indiquent également la priorité d'application de la politique. Cela est nécessaire dans les cas où plusieurs stratégies sont appliquées à la même boîte aux lettres à la fois. En fonction de la priorité, cbpolicyd décide quelle stratégie sera appliquée et laquelle sera ignorée. Dans notre cas, vous pouvez définir la priorité à 100 et à l'avenir, si des politiques supplémentaires se chevauchant apparaissent, ajustez-la. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/go/px/it/gopxits8bjhued_4dom3c3hyr2i.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre point important est la configuration de l'action lorsque la stratégie est déclenchée. En d'autres termes, si nous interdisons à la boîte aux lettres du PDG de recevoir des lettres de tout domaine externe, nous devons alors décider de ce qu'il adviendra des lettres qui continueront d'être envoyées à sa boîte aux lettres. Nous vous suggérons de simplement rejeter ces e-mails à l'aide de l'option </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REJETER</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Après avoir apporté les modifications, il ne reste plus qu'à appliquer les stratégies et redémarrer cbpolicyd à l'aide des commandes </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmprov ms mail.example.ru zimbraCBPolicydAccessControlEnabled TRUE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmcbpolicydctl restart</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, en utilisant les outils intégrés de Zimbra Collaboration Suite Open-Source Edition, nous avons créé une boîte aux lettres VIP, à laquelle seules quelques personnes peuvent envoyer des lettres. </font><font style="vertical-align: inherit;">À l'aide de ce modèle, vous pouvez augmenter le nombre de boîtes aux lettres VIP, ainsi que le nombre de comptes qui peuvent leur envoyer des lettres. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour toutes questions relatives à la Suite Zextras, vous pouvez contacter le représentant de la société "Zextras" Ekaterina Triandafilidi par e-mail katerina@zextras.com</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr494932/index.html">Exploitation d'un grand système distribué: ce que j'ai appris</a></li>
<li><a href="../fr494934/index.html">6 erreurs dans les mots anglais qui sont terriblement enrageantes</a></li>
<li><a href="../fr494938/index.html">Bonne journée de sauvegarde! Ne l'oublie pas</a></li>
<li><a href="../fr494940/index.html">DevOps - qu'est-ce que c'est, pourquoi et combien est-il demandé?</a></li>
<li><a href="../fr494942/index.html">CGI à la maison avec Unreal Engine et iPhone</a></li>
<li><a href="../fr494950/index.html">Quelques tendances de stockage à surveiller</a></li>
<li><a href="../fr494956/index.html">Durée de vie des octets de données</a></li>
<li><a href="../fr494964/index.html">Réseaux de neurones et trading. Mise en œuvre pratique</a></li>
<li><a href="../fr494966/index.html">SCRUM: un poème sur l'amour et la douleur</a></li>
<li><a href="../fr494968/index.html">Câbles Internet sous-marins: qui les achemine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>