<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌥️ 🚾 👩🏾‍⚖️ NSA、ギドラ、ユニコーン 🌺 💼 #⃣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="今回、PVS-Studioチームは、さまざまなバイナリファイルを分析してあらゆる種類の恐ろしいことを行うことができるリバースエンジニアリングのための大きくて邪悪なフレームワークであるGhidraに魅了されました。それについて最も興味深いことは、それがプラグインで自由に使用または拡張できるということで...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NSA、ギドラ、ユニコーン</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/504780/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/zb/b9/po/zbb9pocjsbhx8woze4xo8picks0.png" alt="NSA、ギドラ、ユニコーン"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回、PVS-Studioチームは、さまざまなバイナリファイルを分析してあらゆる種類の恐ろしいことを行うことができるリバースエンジニアリングのための大きくて邪悪なフレームワークであるGhidraに魅了されました。</font><font style="vertical-align: inherit;">それについて最も興味深いことは、それがプラグインで自由に使用または拡張できるということではなく、NSAで作成され、誰もがGitHubに投稿したことです。</font><font style="vertical-align: inherit;">一方で、NSAにはコードベースをクリーンに保つのに十分なリソースがあるようです。</font><font style="vertical-align: inherit;">そして、その一方で、あまり知られていない新しい寄稿者が最近、検出されていないバグを誤って追加した可能性があります。</font><font style="vertical-align: inherit;">したがって、静的分析を武器に、このプロジェクトの弱点を探すことにしました。</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレリュード</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
合計すると、PVS-Studio静的アナライザーは、ギドラプロジェクトのJava部分で、651高、904中、および909低の警告を発行しました（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リリース9.1.2、コミット687ce7f</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。その中で、高および中程度の応答の約半分は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">V6022</font></a><font style="vertical-align: inherit;">診断によって引き起こされました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータはメソッドの本体内では使用されません。これは通常、一部のパラメータが不要になったか、一部の機能がコメントによって一時的に無効にされたときに、リファクタリング後に表示されます。これらの警告を簡単に確認してください（警告が多すぎて、それぞれを外部オブザーバとして表示することができません）このプロジェクトでは、明らかに疑わしいものは何も明らかになりませんでした。おそらく、このプロジェクトがアナライザー設定でこの診断を一時的に無効にして、気が散らないようにすることは許容されます。実際には、セッターまたはコンストラクターパラメーターの名前にタイプミスが見られることがよくありますほとんどの読者は、少なくとも一度は同様の不愉快なパターンに出くわします。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>{
  <span class="hljs-keyword">private</span> String value;
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">A</span><span class="hljs-params">(String val)</span> </span>{ <span class="hljs-comment">// V6022</span>
    <span class="hljs-keyword">this</span>.value = value;<font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> value.hashCode(); <span class="hljs-comment">// NullPointerException</span><font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
低警告の半分以上が「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6008</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">潜在的な「変数」のnull逆参照」</font><font style="vertical-align: inherit;">診断によって生成されました。</font><font style="vertical-align: inherit;">たとえば、値</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File.getParentFile（）は</font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">をチェックせずに</font><font style="vertical-align: inherit;">使用される</font><font style="vertical-align: inherit;">こと</font><i><font style="vertical-align: inherit;">が</font></i><font style="vertical-align: inherit;">よくあり</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。このメソッドが呼び出されたファイルオブジェクトが絶対パスなしで作成され</font><font style="vertical-align: inherit;">た場合</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が返さ</font><font style="vertical-align: inherit;">れ、検証が行われないとアプリケーションが削除される可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
伝統的に、高レベルと中レベルの警告のみを分析します。これは、実際のエラーの大部分が含まれているためです。アナライザーレポートを使用する場合は、信頼性の高い順に警告を分析することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、アナライザーによって示された、疑わしいまたは興味深いと思われるいくつかのフラグメントを検討します。</font><font style="vertical-align: inherit;">プロジェクトのコードベースは印象的なサイズであることが判明し、そのような場所を手動で見つけることはほとんど不可能です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント1：無効な検証</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">parseDataTypeTextEntry</span><span class="hljs-params">()</span>
<span class="hljs-keyword">throws</span> InvalidDataTypeException </span>{<font></font>
  ...<font></font>
  <span class="hljs-keyword">try</span> {<font></font>
    newDataType = parser.parse(selectionField.getText(),<font></font>
                               getDataTypeRootForCurrentText());<font></font>
  }<font></font>
  <span class="hljs-keyword">catch</span> (CancelledException e) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (newDataType != <span class="hljs-keyword">null</span>) {
    <span class="hljs-keyword">if</span> (maxSize &gt;= <span class="hljs-number">0</span>
        &amp;&amp; newDataType.getLength() &gt; newDataType.getLength()) { <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidDataTypeException(<span class="hljs-string">"data-type larger than "</span>
                                         + maxSize + <span class="hljs-string">" bytes"</span>);<font></font>
    }<font></font>
    selectionField.setSelectedValue(newDataType);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio警告：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「&gt;」演算子の左側と右側に同じサブ式「newDataType.getLength（）」があります。 DataTypeSelectionEditor.java data66 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このクラスは、オートコンプリートをサポートするデータ型を選択するためのグラフィカルコンポーネントを提供します。このコンポーネントを使用する開発者は、選択されたデータ型の最大許容サイズを（</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maxSize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドを介して</font><font style="vertical-align: inherit;">）設定するか、負の値を設定することで無制限にすることができます。入力されたデータを検証するとき、制限を超えると例外がスローされ、それがコールスタックに追いつき、ユーザーにメッセージが表示されると想定されていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンポーネントの作成者は、このテストを書いている時点で気が散っていたようです、あるいはおそらく彼は人生の意味について考えていましたが、最終的には検証が実行されません。数がそれ自体より大きくなることはないため、この条件は無視されます。つまり、このコンポーネントは無効なデータを提供する可能性があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の同様のエラーがさらに2つのクラスで見つかりました：</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GuidUtil</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewGuid</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GuidUtil</span> </span>{<font></font>
  ...<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GuidInfo <span class="hljs-title">parseLine</span><span class="hljs-params">(...)</span> </span>{<font></font>
    ...<font></font>
    <span class="hljs-keyword">long</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[<span class="hljs-number">4</span>];<font></font>
    ...<font></font>
    <span class="hljs-keyword">if</span> (isOK(data)) {
      <span class="hljs-keyword">if</span> (!hasVersion) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GuidInfo(guidString, name, guidType);<font></font>
      }<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VersionedGuidInfo(guidString, version, name, guidType);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
  }<font></font>
  ...<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOK</span><span class="hljs-params">(<span class="hljs-keyword">long</span>[] data)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; data.length; i++) {
      <span class="hljs-keyword">if</span> ((data[i] != <span class="hljs-number">0</span>) || (data[i] != <span class="hljs-number">0xFFFFFFFFL</span>)) { <span class="hljs-comment">// &lt;=</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">V6007</font></a><font style="vertical-align: inherit;">式 'data [i]！= 0xFFFFFFFFL'は常にtrueです。 GuidUtil.java:200 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ザ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のループ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISOKの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法の</font><font style="vertical-align: inherit;">同じ値が同時に2つの異なる番号に等しくないことをチェックします。その場合、GUIDはすぐに有効であると認識されます。つまり、GUIDは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配列が</font><font style="vertical-align: inherit;">空の</font><font style="vertical-align: inherit;">場合にのみ無効になります。</font><font style="vertical-align: inherit;">これは、対応する変数の値が</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parseLine</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドの最初に1回だけ割り当てられるため、発生しません</font><font style="vertical-align: inherit;">。</font><i><font style="vertical-align: inherit;">IsOK</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
メソッド</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本体</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方のクラスで完全に一致しています。これは、間違ったコードの別のコピーと貼り付けのアイデアを示唆しています。</font><font style="vertical-align: inherit;">著者が正確に確認したかったことはわかりませんが、このメソッドは次のように修正する必要があると考えられます。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOK</span><span class="hljs-params">(<span class="hljs-keyword">long</span>[] data)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; data.length; i++) {
    <span class="hljs-keyword">if</span> ((data[i] == <span class="hljs-number">0</span>) || (data[i] == <span class="hljs-number">0xFFFFFFFFL</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント2：例外を隠す</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">putByte</span><span class="hljs-params">(<span class="hljs-keyword">long</span> offsetInMemBlock, <span class="hljs-keyword">byte</span> b)</span>
<span class="hljs-keyword">throws</span> MemoryAccessException, IOException </span>{
  <span class="hljs-keyword">long</span> offsetInSubBlock = offsetInMemBlock - subBlockOffset;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (ioPending) {
      <span class="hljs-keyword">new</span> MemoryAccessException(<span class="hljs-string">"Cyclic Access"</span>); <span class="hljs-comment">// &lt;=</span><font></font>
    }<font></font>
    ioPending = <span class="hljs-keyword">true</span>;<font></font>
    doPutByte(mappedAddress.addNoWrap(offsetInSubBlock / <span class="hljs-number">8</span>),<font></font>
              (<span class="hljs-keyword">int</span>) (offsetInSubBlock % <span class="hljs-number">8</span>), b);<font></font>
  }<font></font>
  <span class="hljs-keyword">catch</span> (AddressOverflowException e) {
    <span class="hljs-keyword">new</span> MemoryAccessException(<span class="hljs-string">"No memory at address"</span>); <span class="hljs-comment">// &lt;=</span><font></font>
  }<font></font>
  <span class="hljs-keyword">finally</span> {<font></font>
    ioPending = <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio警告：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6006</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクトは作成されましたが、使用されていません。 「throw」キーワードが欠落している可能性があります：「new MemoryAccessException（ "Cyclic Access"）」。 BitMappedSubMemoryBlock.java:99 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例外オブジェクト自体は、ご存じのとおり、何もしません（または、少なくとも何もすべきではありません）。ほとんどの場合、それらの新しいインスタンスはスローを通じて</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スローさ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れますが</font><font style="vertical-align: inherit;">、まれに、どこかに転送されるか、コレクションに配置される場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメソッドを含むクラスは、データの読み取りと書き込みを可能にするメモリブロックのラッパーです。ここでは、例外がスローされないため、</font><i><font style="vertical-align: inherit;">ioPending</font></i><font style="vertical-align: inherit;">フラグを使用して現在のメモリブロックへのアクセスに課せられた制限に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">違反する可能性があります</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddressOverflowExceptionは</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">無視され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">したがって、データは静かに破損する可能性があり、特定の場所でエラーを明示的に示す代わりに、開発者はデバッガーで分析する必要のある奇妙なアーティファクトを受け取ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの失われた例外は8つありました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BitMappedSubMemoryBlock.java：77、99、106、122行目</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ByteMappedSubMemoryBlock.java：52、73、92、114行目</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じファイル内に、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">throwが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在する非常に類似したメソッドがあるのが特徴です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ほとんどの場合、1つのメソッドは上記のフラグメントと同様に最初に記述された後、数回コピーされ、何らかの理由でエラーが見つかり、覚えている場所で修正されました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント3：地雷原</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processSelection</span><span class="hljs-params">(OptionsTreeNode selectedNode)</span> </span>{
  <span class="hljs-keyword">if</span> (selectedNode == <span class="hljs-keyword">null</span>) {<font></font>
    setViewPanel(defaultPanel, selectedNode); <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setViewPanel</span><span class="hljs-params">(JComponent component, OptionsTreeNode selectedNode)</span> </span>{<font></font>
  ...<font></font>
  setHelpLocation(component, selectedNode);<font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setHelpLocation</span><span class="hljs-params">(JComponent component, OptionsTreeNode node)</span> </span>{<font></font>
  Options options = node.getOptions();<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">V6008</font></a><font style="vertical-align: inherit;">関数「setViewPanel」の「selectedNode」のnull逆参照。 OptionsPanel.java:266 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アナライザーは少し嘘をつきました-現時点では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processSelection</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドを呼び出し</font><font style="vertical-align: inherit;">ても</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullPointerException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><i><font style="vertical-align: inherit;">発生</font></i><i><font style="vertical-align: inherit;">しませ</font></i><font style="vertical-align: inherit;">ん。</font><font style="vertical-align: inherit;">このメソッドが呼び出されるのは2回だけであり、それを呼び出す前に、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectedNodeが</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明示的に</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">についてチェックされているため</font><font style="vertical-align: inherit;">です。別の開発者はメソッドが</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectedNode == null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のケースを明示的に処理し、</font><font style="vertical-align: inherit;">これが有効な値であると判断してアプリケーションがクラッシュする</font><font style="vertical-align: inherit;">可能性があるため、これを行うべきではありません</font><font style="vertical-align: inherit;">。コードベースを知らない人が徹底的に参加しているため、特に危険なのはオープンプロジェクトだけのような驚きです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processSelection</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド全体</font><font style="vertical-align: inherit;">はかなり奇妙に見えます。</font><font style="vertical-align: inherit;">同じメソッドで、条件は異なりますが同じボディのifブロックが2回以上検出されるため、これはコピーと貼り付けのエラーである可能性があります。</font><font style="vertical-align: inherit;">ただし、この時点では、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectedNodeは</font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">なくなり</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setViewPanel-setHelpLocation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼び出しチェーン</font><font style="vertical-align: inherit;">は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullPointerExceptionを</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">引き起こし</font></i><font style="vertical-align: inherit;">ません</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント4：悪の自動補完</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span>[] UNSUPPORTED_OPCODES_LIST = { ... };
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Set&lt;Integer&gt; UNSUPPORTED_OPCODES = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<font></font>
<font></font>
<span class="hljs-keyword">static</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> opcode : UNSUPPORTED_OPCODES) {<font></font>
    UNSUPPORTED_OPCODES.add(opcode);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio警告：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6053</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反復の進行中にコレクションが変更されました。 ConcurrentModificationExceptionが発生する場合があります。 DWARFExpressionOpCodes.java:205 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、アナライザは再び少し嘘をつきました</font><font style="vertical-align: inherit;">。UNSUPPORTED_OPCODES </font><font style="vertical-align: inherit;">コレクション</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常に空であり、ループは実行されないため</font><font style="vertical-align: inherit;">、例外はスロー</font><font style="vertical-align: inherit;">されません。さらに、たまたまコレクションが多数であり、すでに存在する要素を追加しても変更されません。おそらく、著者は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for-each</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オートコンプリートによるコレクションの名前。間違ったフィールドが提案されたことに気づかなかった。</font><font style="vertical-align: inherit;">反復中にコレクションを変更することは不可能ですが、この場合のように、アプリケーションが適切に動作しない場合があります。</font><font style="vertical-align: inherit;">ここで、このタイプミスには間接的な影響があります。DWARFファイルを解析するマシンは、このコレクションに依存して、サポートされていないオペコードを見つけると分析を停止します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Java 9以降、定数コレクションの標準ライブラリのファクトリメソッドを使用する価値があります。たとえば、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Set.of（T ...要素）は</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はるかに便利であるだけでなく、作成されたコレクションをすぐに不変にして、コードの信頼性を高めます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント5：すべてがあります</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setValueAt</span><span class="hljs-params">(Object aValue, <span class="hljs-keyword">int</span> row, <span class="hljs-keyword">int</span> column)</span> </span>{<font></font>
  ...<font></font>
  <span class="hljs-keyword">int</span> index = indexOf(newName);
  <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {                  <span class="hljs-comment">// &lt;=</span><font></font>
    Window window = tool.getActiveWindow();<font></font>
    Msg.showInfo(getClass(), window, <span class="hljs-string">"Duplicate Name"</span>,
                 <span class="hljs-string">"Name already exists: "</span> + newName);
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  ExternalPath path = paths.get(row); <span class="hljs-comment">// &lt;=</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">indexOf</span><span class="hljs-params">(String name)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; paths.size(); i++) {<font></font>
    ExternalPath path = paths.get(i);<font></font>
    <span class="hljs-keyword">if</span> (path.getName().equals(name)) {
      <span class="hljs-keyword">return</span> i;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioの警告：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6007</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式 'index&gt; = 0'は常にtrueです。</font><font style="vertical-align: inherit;">ExternalNamesTableModel.java:105</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">V6019</a> Unreachable code detected. It is possible that an error is present. ExternalNamesTableModel.java:109</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
著者はそれについて考え、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font><i><font style="vertical-align: inherit;">で</font></i><font style="vertical-align: inherit;">は、 "index"の代わりに、不明な値に対して-1は0- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パス</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コレクションの最初の要素のインデックスを返します</font><font style="vertical-align: inherit;">。コレクションが空であっても。または、メソッドが生成されたものの、デフォルトの戻り値を変更するのを忘れていました。その結果、</font><font style="vertical-align: inherit;">既存の名前がない場合でも</font><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッド</font><i><font style="vertical-align: inherit;">は</font></i><font style="vertical-align: inherit;">渡された値</font><i><font style="vertical-align: inherit;">を</font></i><font style="vertical-align: inherit;">破棄し、「名前は既に存在します」エラーでユーザーを表示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は他では使用されておらず、その値は、探している要素が存在するかどうかを判断するためにのみ必要です。おそらく、個別のメソッドの代わりに、</font><i><font style="vertical-align: inherit;">set </font></i></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueAtに</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">for-eachを</font></i><font style="vertical-align: inherit;">直接</font><font style="vertical-align: inherit;">記述</font><i><font style="vertical-align: inherit;">して</font></i><font style="vertical-align: inherit;">、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">returnします。</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデックス付きのゲームではなく、一致するアイテムで。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：申し立てられたエラーを再現できませんでした。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドは</font><i><font style="vertical-align: inherit;">おそらく</font></i><font style="vertical-align: inherit;">使用されないか、特定の条件下でのみ呼び出されます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント6：沈黙を守る</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> Map&lt;Character, String&gt; DELIMITER_NAME_MAP = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(<span class="hljs-number">20</span>);
<span class="hljs-comment">// Any non-alphanumeric char can be used as a delimiter.</span>
<span class="hljs-keyword">static</span> {<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">' '</span>, <span class="hljs-string">"Space"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'~'</span>, <span class="hljs-string">"Tilde"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'`'</span>, <span class="hljs-string">"Back quote"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'@'</span>, <span class="hljs-string">"Exclamation point"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'@'</span>, <span class="hljs-string">"At sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'#'</span>, <span class="hljs-string">"Pound sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'$'</span>, <span class="hljs-string">"Dollar sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'%'</span>, <span class="hljs-string">"Percent sign"</span>);<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio警告：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6033</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じキー「@」のアイテムはすでに追加されています。 FilterOptions.java:45 Ghidra </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
は、さまざまなコンテキストでのデータのフィルタリングをサポートしています。たとえば、プロジェクトファイルのリストを名前でフィルタリングできます。さらに、一度に複数のキーワードによるフィルタリングが実装されています。「OR」モードがオンの場合、「。java、.c」は、名前に「.java」または「.c」のいずれかを含むすべてのファイルを表示します。単語の区切り文字として特殊文字を使用できることは理解されていますが（特定の区切り文字はフィルター設定で選択されています）、実際には感嘆符は使用できませんでした。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような初期化シートでは、コピーと貼り付けを使用して記述されることが多く、そのようなコードを見ると目がすぐにぼやけます。</font><font style="vertical-align: inherit;">そして、タイプミスが2つの隣接する行になかった場合は、手作業ではほとんど間違いなく誰も見なくなります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント7：除算の残りは常に0</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFactorys</span><span class="hljs-params">(FieldFactory[] fieldFactorys,
                 DataFormatModel dataModel, <span class="hljs-keyword">int</span> margin)</span> </span>{<font></font>
  factorys = <span class="hljs-keyword">new</span> FieldFactory[fieldFactorys.length];<font></font>
<font></font>
  <span class="hljs-keyword">int</span> x = margin;
  <span class="hljs-keyword">int</span> defaultGroupSizeSpace = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; factorys.length; i++) {<font></font>
    factorys[i] = fieldFactorys[i];<font></font>
    factorys[i].setStartX(x);<font></font>
    x += factorys[i].getWidth();<font></font>
    <span class="hljs-comment">// add in space between groups</span>
    <span class="hljs-keyword">if</span> (((i + <span class="hljs-number">1</span>) % defaultGroupSizeSpace) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// &lt;=</span><font></font>
      x += margin * dataModel.getUnitDelimiterSize();<font></font>
    }<font></font>
  }<font></font>
  width = x - margin * dataModel.getUnitDelimiterSize() + margin;<font></font>
  layoutChanged();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studioの警告：</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6007</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式 '（（i + 1）％defaultGroupSizeSpace）== 0'は常にtrueです。</font><font style="vertical-align: inherit;">ByteViewerLayoutModel.java:66</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6048</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この式は簡略化できます。</font><font style="vertical-align: inherit;">操作のオペランド「defaultGroupSizeSpace」は1です。ByteViewerLayoutModel.java:66</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
16進バイトビューアは、表示されるグループのサイズの選択をサポートします。たとえば、出力を「ffff ffff」または「ff ff ff ff」の形式で構成できます。</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setFactorys</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メソッドは、ユーザーインターフェイスでのこれらのグループの場所を管理します</font><font style="vertical-align: inherit;">。カスタマイズと表示が正しく機能するという事実にもかかわらず、この方法のサイクルは非常に疑わしく見えます。1による除算の残りは常に0であり、これは</font><font style="vertical-align: inherit;">各反復で</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">座標</font><font style="vertical-align: inherit;">が増加</font><font style="vertical-align: inherit;">することを意味し</font><font style="vertical-align: inherit;">ます。 Suspicionは</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">DataModelの</font></i><font style="vertical-align: inherit;">設定に</font><font style="vertical-align: inherit;">プロパティと可用性</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">groupSizeを</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
リファクタリング後に残ったゴミ？または、</font><i><font style="vertical-align: inherit;">defaultGroupSizeSpace</font></i><font style="vertical-align: inherit;">変数の計算が失われた可能性が</font><i><font style="vertical-align: inherit;">あり</font></i><font style="vertical-align: inherit;">ます</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？</font><font style="vertical-align: inherit;">いずれの場合でも、その値を</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dataModel.getGroupSize（）</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で置き換えようとする</font><font style="vertical-align: inherit;">とレイアウトが壊れ、おそらくこのコードの作成者だけが明確な答えを出すことができます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグメント8：検証の失敗、パート2</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">parseArrayDimensions</span><span class="hljs-params">(String datatype,
                                    List&lt;Integer&gt; arrayDimensions)</span> </span>{<font></font>
  String dataTypeName = datatype;<font></font>
  <span class="hljs-keyword">boolean</span> zeroLengthArray = <span class="hljs-keyword">false</span>;
  <span class="hljs-keyword">while</span> (dataTypeName.endsWith(<span class="hljs-string">"]"</span>)) {
    <span class="hljs-keyword">if</span> (zeroLengthArray) {                   <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// only last dimension may be 0</span><font></font>
    }<font></font>
    <span class="hljs-keyword">int</span> rBracketPos = dataTypeName.lastIndexOf(<span class="hljs-string">']'</span>);
    <span class="hljs-keyword">int</span> lBracketPos = dataTypeName.lastIndexOf(<span class="hljs-string">'['</span>);
    <span class="hljs-keyword">if</span> (lBracketPos &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">int</span> dimension;
    <span class="hljs-keyword">try</span> {<font></font>
      dimension = Integer.parseInt(dataTypeName.substring(lBracketPos + <span class="hljs-number">1</span>,<font></font>
                                                          rBracketPos));<font></font>
      <span class="hljs-keyword">if</span> (dimension &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// invalid dimension</span><font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">catch</span> (NumberFormatException e) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
    }<font></font>
    dataTypeName = dataTypeName.substring(<span class="hljs-number">0</span>, lBracketPos).trim();<font></font>
    arrayDimensions.add(dimension);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> dataTypeName;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio警告：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6007</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">式「zeroLengthArray」は常にfalseです。 PdbDataTypeParser.java:278 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このメソッドは、多次元配列の次元を解析し、解析後に残っているテキスト、または</font><font style="vertical-align: inherit;">無効なデータの</font><font style="vertical-align: inherit;">場合は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">返します</font><font style="vertical-align: inherit;">。検証チェックのいずれかの隣のコメントは、最後の読み取りサイズのみがゼロになることができることを示しています。分析は右から左に進むため、「[0] [1] [2]」は有効な入力テキストであり、「[2] [1] [0]」は有効ではないことがわかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、問題は次のサイズがゼロであるというチェックを誰も追加しなかったため、パーサーは不要な質問なしに無効なデータを食べてしまいました。おそらく次のようにtryブロックを修正する必要があります。</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">try</span> {<font></font>
  dimension = Integer.parseInt(dataTypeName.substring(lBracketPos + <span class="hljs-number">1</span>,<font></font>
                                                      rBracketPos));<font></font>
  <span class="hljs-keyword">if</span> (dimension &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// invalid dimension</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dimension == <span class="hljs-number">0</span>) {<font></font>
    zeroLengthArray = <span class="hljs-keyword">true</span>;<font></font>
  }<font></font>
}<font></font>
<span class="hljs-keyword">catch</span> (NumberFormatException e) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、この有効性の基準は時間の経過に伴って不要になる可能性があります。または、著者のコメントの意味が異なり、最初に読んだ次元を確認する必要があります。</font><font style="vertical-align: inherit;">いずれの場合でも、データの検証はすべてのアプリケーションの重要な部分であり、すべての責任を負う必要があります。</font><font style="vertical-align: inherit;">エラーが発生すると、アプリケーションの非常に無害なクラッシュのほか、セキュリティホール、データの漏洩、データの破損または損失につながる可能性があります（たとえば、クエリ検証中にSQLインジェクションをスキップした場合）。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残りの警告について少し</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
読者は多くの警告が出されたことに気づくかもしれませんが、いくつかは考慮されませんでした。プロジェクトであまりきれいに調整されていないclocは、約125万行のJavaコードをカウントしました（空でもコメントでもない）。実際、ほとんどすべての警告は非常によく似ています。ここでは、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を確認するのを忘れて</font><font style="vertical-align: inherit;">おり、未使用のレガシーコードを削除していません。同じことを挙げて読者を飽きさせたくないので、記事の冒頭でそのようなケースの一部について述べました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の例は</font><font style="vertical-align: inherit;">、</font><i><font style="vertical-align: inherit;">サブストリング</font></i><font style="vertical-align: inherit;">メソッドの不正確な使用のコンテキストで</font><font style="vertical-align: inherit;">の50の警告「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6009</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数が奇数の引数を受け取ります」です。</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（CParserUtils.java:280、ComplexName.java:48など）を使用して、区切り文字の後の残りの文字列を取得します。</font><font style="vertical-align: inherit;">多くの場合、開発者はこのセパレーターが文字列に存在することを望み、そうでない場合は</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が-1を返す</font><font style="vertical-align: inherit;">ことを忘れ</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これは</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">substringの</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不正な値です</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当然、データが外部からではなく検証または受信された場合、アプリケーションがクラッシュする可能性は大幅に減少します。</font><font style="vertical-align: inherit;">ただし、一般的に、これらは私たちが取り除くのを手助けしたい潜在的に危険な場所です。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、ギドラはコードの品質に満足しています-特別な悪夢は明白ではありません。</font><font style="vertical-align: inherit;">コードは適切にフォーマットされており、非常に一貫したスタイルを持っています。ほとんどの場合、変数、メソッド、その他すべてに明確な名前が付けられ、説明コメントが見つかり、多数のテストが存在します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然、問題はありませんでした。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ほとんどの場合、多数のリファクタリング後に残ったデッドコード。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多くのjavadocは絶望的に古くなっており、たとえば、存在しないパラメータを示しています。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IntelliJ IDEAを使用する場合</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、便利な開発の可能性はありません</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リフレクションを中心に構築されたモジュラーシステムは、プロジェクトのナビゲートとコンポーネント間の依存関係の検出をはるかに困難にします。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
開発者ツールをおろそかにしないでください。</font><font style="vertical-align: inherit;">シートベルトのような静的分析は万能薬ではありませんが、リリース前にいくつかの災害を防ぐのに役立ちます。</font><font style="vertical-align: inherit;">また、ログインしたソフトウェアを使いたくない人もいます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちのブログ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で他の証明されたプロジェクトについて読むことができます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">また、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">試用版ライセンス</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">、アナライザー</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用するために支払う必要のない</font><font style="vertical-align: inherit;">さまざまな</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">オプションもあります</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事を英語を話す視聴者と共有したい場合は、翻訳へのリンクを使用してください：Nikita Lazeba。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSA、ギドラ、ユニコーン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja504768/index.html">Yandexのアナリストインターンシップ：テストタスクの分析</a></li>
<li><a href="../ja504770/index.html">Linuxゲームディストリビューション</a></li>
<li><a href="../ja504772/index.html">6月1日から7日までのモスクワでのデジタルイベント</a></li>
<li><a href="../ja504774/index.html">ITサービスに対するニーズの変化に関するITエグゼクティブの調査</a></li>
<li><a href="../ja504776/index.html">初年度にゲームエンジンを書く：簡単！（ほとんど）</a></li>
<li><a href="../ja504784/index.html">SectigoのAddTrustルート証明書は2020年5月30日に期限切れとなり、OpenSSL 1.0.xおよびGnuTLSクライアントで問題が発生しました</a></li>
<li><a href="../ja504786/index.html">キャッシングについて知っておくべきことすべて</a></li>
<li><a href="../ja504790/index.html">機械学習に関する一連の記事：2020年5月の事例、ガイド、および研究</a></li>
<li><a href="../ja504792/index.html">デューティ下宿。NSPKが義務の部屋をコロナウイルスから救った方法</a></li>
<li><a href="../ja504796/index.html">ウダレンカはクールです。たぶん永遠にとどまるか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>