<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî± ü•í üòí How I learned not to worry and loved machine vision ‚úäüèΩ üëî üòû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! My name is Artyom Nagumanov, I have over 15 years of experience in software development, project management, teams, IT departments. I hav...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How I learned not to worry and loved machine vision</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/503880/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hello, Habr! My name is Artyom Nagumanov, I have over 15 years of experience in software development, project management, teams, IT departments. I have always been interested in the topic of artificial intelligence and machine vision. While developing software, I was always visited by the thought of why not add at least some piece of intelligence to the enterprise application in order to partially or completely refuse the user‚Äôs participation in any process that at first glance seems completely unformalized.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/la/wq/ig/lawqigtec33k7s0qm8f8iqydyky.png" alt="image"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To do this, each time I had to go all the way anew: study / recall the appropriate libraries, install on a Linux virtual machine to test free tools for creating and training neural networks, find network architectures that are currently the crown of human creation in the world artificial intelligence. </font><font style="vertical-align: inherit;">This process is quite laborious and not very fun. </font><font style="vertical-align: inherit;">Once, understanding the architecture of another neural network, I realized that it was time to put an end to this and create a universal tool that would take on the whole routine. </font><font style="vertical-align: inherit;">And I just need to press a few large glass buttons and get the result. </font><font style="vertical-align: inherit;">In the picture to attract attention (in the first paragraph of the article), an example of recognition of water jets from an irrigation machine is shown, but first things first.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We make recognition service</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 I had the following idea - to create a website where the user can upload any images, click the ‚ÄúRecognize‚Äù button and get the result in json format. But the fact is that there is no universal algorithm or neural network that can find any objects in the world. As a result, I decided to make it possible to train my own models of neural networks to recognize the objects we need, using only the site and sample images that need to be recognized. Before starting work, I analyzed what developments in the world exist on this topic. As it turned out, many giants of the IT industry are working in this direction: Yandex, Mail.ru, Amazon. The main disadvantage was that all these giants want money for their services. This was enough for me to start my own development.I already had background, and I knew how to find and classify objects on images well, all that was left was to put everything together and make a convenient interface.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the vast majority of cases, I use Microsoft technologies in my projects, which significantly affected the technologies used in this project:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASP.NET (C # language)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webpi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javascript jquery</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MSSQL Server</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tensorflow</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
First of all, I decided to create a REST service, which will be the brain of the entire system, which will allow us to accept commands through the API and do all the rough work. The architecture of the neural network, I chose Mask R-CNN, this network can find objects in the image and classify them. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Everything went more or less regularly, until I reached the realization of training my own models. The learning process was very costly and demanding on the hardware. Of course, I knew this before, but before that, I could afford to wait for the training of the model for a day or two, using the CPU for calculations. But since the idea was to create a convenient and quick tool, I could not put up with the long training of the model. So the question has ripened with the installation of a special server with a suitable video card that will support CUDA technology ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://ru.wikipedia.org/wiki/CUDA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) and will significantly reduce the time it takes to train the model. </font><font style="vertical-align: inherit;">In order not to inflate the project budget, I chose a non-expensive NVIDIA GeForce GTX 1050 Ti graphics card. </font><font style="vertical-align: inherit;">In parallel with the service, I made a client on Windows Forms that would allow testing. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the second stage, I made a website, which is essentially a client to the service. </font><font style="vertical-align: inherit;">I didn‚Äôt really bother with the design and didn‚Äôt even take the finished template, I wrote everything myself, using only what Visual Studio gives out of the box. </font><font style="vertical-align: inherit;">It took another three months to create and test the site. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I was incredibly happy when I uploaded the image, selected a ready-made model for recognition, clicked the ‚ÄúRecognize‚Äù button and got the first result.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yg/lx/by/yglxbyq1uowgnq7tvuca-pr6_nw.png" alt="image"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The real task of machine vision</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 While I was working on the recognition system, a real task flew in to me - to determine the position of the front shovel of a special machine that cleans snow on the road. To solve this problem, I was not limited in choosing an approach to the solution and from the beginning I wanted to use the installation of special sensors that determine the angle of the shovel, but quickly abandoned this idea. As it turned out, these sensors need to be constantly calibrated due to the fact that the shovel is periodically removed and another is put in, besides talking with colleagues installing such sensors, I found out that these sensors are on the street and are available for sabotage. The idea came to mind to analyze the working controls of the shovel, but as it turned out, in real life they go so far as to remove the shovel, and on the working bodies they signal that the shovel is lowered,in a word, again not a reliable option. Well, they left me no choice but to use the full power of the recognition service. I put the camera in the passenger compartment of the car, which is looking at the front spade, collected several hundred samples of the spade, marked them with the VGG tool, which I built into the site and started training. The process took about two hours and on the 30th era I got a quite acceptable recognition result, the recognition accuracy was around 95%.The process took about two hours and on the 30th era I got a quite acceptable recognition result, the recognition accuracy was around 95%.The process took about two hours and on the 30th era I got a quite acceptable recognition result, the recognition accuracy was around 95%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ir/lj/37/irlj371xska0xqhyvw2w7rc25xs.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So that the system could fully work on the car, I had to modify it: add the ability to upload photos via ftp, and not just through the API because </font><font style="vertical-align: inherit;">the camcorder allowed you to take a photo and send it to the specified ftp. </font><font style="vertical-align: inherit;">Added the ability to save the result in the database, and then through the API for the specified period of time to get the results, analyze them and write to the accounting system written in 1C, which by the way is a huge control system that analyzes thousands of cars at the same time and controls many parameters, such as mileage , machine hours, fuel in the tank, rides, idling, etc., but this is a completely different story. </font><font style="vertical-align: inherit;">The first version of the shovel control is ready, but in battle it will be tested only when snow falls.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How easy is it?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main idea of ‚Äã‚Äãthe recognition service is the simplicity of creating and training your own models. </font><font style="vertical-align: inherit;">To understand whether anyone can really create and train their own model, I asked my assistant to create a model for recognizing water jets from an irrigation machine. </font><font style="vertical-align: inherit;">The only input that I gave her was a video of the operation of the irrigation machine, taken from the cab, and the address of the recognition service, in the evening I set this task for her, and in the morning, going into the system, I saw a ready-made model that really worked. </font><font style="vertical-align: inherit;">Below is a screenshot of the window in which the model is trained. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/gl/-i/z2/gl-iz25k0skn6uti_aptt6as8ga.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you learn, the era of the model is preserved, and we can, without interrupting the learning process, test any era.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Development and use</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An example of how everything works live can be seen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the video clip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I thought for a long time that if anyone can create their own model, then why not make it possible to share this model with other users of the system. </font><font style="vertical-align: inherit;">As a result, I added a section where you can place a successful model with one click of the mouse and any participant can use it. </font><font style="vertical-align: inherit;">The service is completely free. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I myself use the service to solve my tasks of automating processes in enterprises in which machine vision can be used. </font><font style="vertical-align: inherit;">In the future I plan to add other recognition approaches, not just neural networks. </font><font style="vertical-align: inherit;">I will be very happy if someone else using this service can solve their problems.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en503860/index.html">Setting up the neural network environment Mask R-CNN</a></li>
<li><a href="../en503862/index.html">Psychological problems as a payment for success in creating breakthrough products</a></li>
<li><a href="../en503864/index.html">Flavors Organization at Flutter</a></li>
<li><a href="../en503866/index.html">Published Roadmap development Zextras Suite for 2020</a></li>
<li><a href="../en503876/index.html">Programming a game for an embedded device on ESP32: drive, battery, sound</a></li>
<li><a href="../en503884/index.html">How to learn to work asynchronously</a></li>
<li><a href="../en503888/index.html">AdaBoost Algorithm</a></li>
<li><a href="../en503890/index.html">The Tale of How I Configured Azure AD B2C on React and React Native Part 1 (Tutorial)</a></li>
<li><a href="../en503892/index.html">Mitap: Quarantine, Go away</a></li>
<li><a href="../en503894/index.html">Announcement of the online meeting NskTechTalks # 12: where can the front-end developer grow and what if nothing comes of it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>