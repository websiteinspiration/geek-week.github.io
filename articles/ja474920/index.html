<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤟 🗜️ 😬 好きな言語の静的アナライザーがない場合はどうなりますか？ 👍🏾 👩🏻‍🚒 📎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="まあ、あなたの好きな言語がロシア語、英語などを意味するなら、これは別のハブにあります。そして、プログラミング言語やマークアップ言語の場合は、もちろんアナライザーを自分で作成してください！一見すると非常に難しいですが、幸いなことに、新しい言語のサポートを比較的簡単に追加できる既製の多言語ツールがありま...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>好きな言語の静的アナライザーがない場合はどうなりますか？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474920/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まあ、あなたの好きな言語がロシア語、英語などを意味するなら、これは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別のハブにあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。そして、プログラミング言語やマークアップ言語の場合は、もちろんアナライザーを自分で作成してください！一見すると非常に難しいですが、幸いなことに、新しい言語のサポートを比較的簡単に追加できる既製の多言語ツールがあります。今日、私は追加する方法を示します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelicaの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">言語サポートを</font><font style="vertical-align: inherit;">する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMDアナライザ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">時間のかなり少量で</font><font style="vertical-align: inherit;">。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ところで、理想的なプルリクエストのシーケンスから取得したコードベースの品質を低下させるものを知っていますか？</font><font style="vertical-align: inherit;">サードパーティのプログラマが既存のプロジェクトコードの一部を文芸的な抽象化ではなくパッチにコピーしたという事実。</font><font style="vertical-align: inherit;">ある程度、質の悪いコードよりもそのようなバナリティを捉えるのはさらに難しいことを認めなければなりません。これは高品質で、</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すでに</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全にデバッグされているため、ここでローカル検証を行うだけでは不十分です。コードベース全体を覚えておく必要がありますが、これは人にとって簡単ではありません... Modelicaの完全なサポートを（特定のルールを作成せずに）「プリミティブチェックを実行できる」状態に追加するには、約1週間かかりました。その後、1日で追加できるのは、コピー/貼り付け検出機能のサポートのみです。</font></font></p><a name="habracut"></a><br>
<h2 id="kakaya-eschyo-modelica"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelicaとは何ですか？</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelicaは、その名前が示すように、物理システムのモデルを作成するための言語です。実際、物理的だけでなく、化学的プロセス、動物集団の定量的挙動などを記述することも可能です。これは、の形式の微分方程式のシステムによって記述されます</font><font style="vertical-align: inherit;">。</font></font><code>der(X) = f(X)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここ</font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、は未知数のベクトルです。命令型のコードもサポートされています。偏微分方程式は明示的にサポートされていませんが、研究領域を分割して（おそらく、いくつかの汎用言語で行ったように）、各要素の方程式を書き留めて、問題を前の方程式に減らすことができます。 Modelikaの秘訣は、これに対する解決策が</font></font><code>der(X) = f(X)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンパイラーにあるということです。</font><strong><font style="vertical-align: inherit;">設定で</font></strong><font style="vertical-align: inherit;">ソルバー</font><strong><font style="vertical-align: inherit;">を</font></strong><font style="vertical-align: inherit;">変更するだけです。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、方程式は線形などである必要はありません。要するに、プラス（教科書から数式を書いてそれが機能した）とマイナス（抽象化が進むと制御が弱くなる）の両方があります。</font><font style="vertical-align: inherit;">Modelikaの紹介は、別の記事（Habréですでに何度か掲載されています）のトピックであり、サイクル全体でさえ、今日はオープンでいくつかの実装があることに興味がありますが、残念ながら、まだ湿った標準です。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに、Modelikaには静的型付けがあります（これにより、意味のある分析をより迅速に記述できるようになります）。一方、モデルをインスタンス化する場合、コンパイラーはライブラリ全体を完全にチェックする必要はありません（したがって、静的アナライザーは「眠っている」ことを把握するのに非常に役立ちます。バグ）。</font><font style="vertical-align: inherit;">最後に、いくつかのC ++とは異なり、静的アナライザーとコンパイラーのクラウドが美しく、</font></font><del>  , . C++ templates</del>  ,       Internal compiler error,  ,         .</p><br>
<h2 id="a-chto-za-pmd">   PMD?</h2><br>
<p>  <del></del> . -    -  pull request     OpenModelica. ,        ,             ,   - .  ,       ,  ,           ,      ,       .  , , ,              …     ,      , ,   -     ,     . ,   Copy-paste Detector (CPD) —    PMD —     ,   .      OMEdit,          . -      (         ),  , ,        C++ .    ,           .      PR    —         !      ,  ,        .</p><br>
<p>, Program Mistake Detector (PMD) —     . ,  ,    ,     (   ...),           Java   -   !   ,    ,   ,  AST   .       ?    XML! ,      XPath  —   ,     .        !   , ,     Java   visitor-  AST.</p><br>
<p><em><strong></strong></em>: PMD         ,   Java-    ,     coding style —        ruleset.xml !</p><br>
<h2 id="uroven-1-nahodim-kopipast-avtomatizirovanno"> 1:   </h2><br>
<p> ,      CPD   .    « »    —   ,   .   —     .  ,      <em>(TLDR:  )</em>:</p><br>
<ul>
<li>  ( PMD,  CPD)      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">pmd/pmd</a></li>
<li>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">pmd/pmd-designer</a>.  ,   jar-    <em>PMD binary distribution</em>,     Gradle   ,   <code>pmd-designer</code>    .</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Developer Documentation</a>. ,   ,   . ,  ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> pull request-</a> :)</li>
</ul><br>
<p> ,      Ubuntu.  Windows      —    ,        .</p><br>
<p>,      CPD,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>...</p><br>
<ul>
<li><strong>:</strong>      PMD   PMD 7,       2,        Antlr- ,  ,     7,       (   ...)</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">pmd/pmd</a>.</li>
<li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">antlr/grammars-v4</a>       — ,   ,    ,   , ,  . , ,      —   , ,  ,   ,  .</li>
<li>     <code>pmd-&lt;your language name&gt;</code>,    Gradle     . ,     ,     Go  ,        <em>    ...</em></li>
<li>      ,   CPD    !     ?  : <em>   </em>.</li>
<li>PROFIT!    <em> ,    </em></li>
</ul><br>
<p>,     pmd,    <code>./mvnw clean verify</code>,    <code>pmd-dist/target</code>     binary distribution   zip-,        <code>./bin/run.sh cpd --minimum-tokens 100 --files /path/to/source/dir --language &lt;your language name&gt;</code>   .  ,   <code>../mvnw clean verify</code>    ,    ,       jar-   binary distribution (,      ).</p><br>
<h2 id="uroven-2-nahodim-oshibki-i-narusheniya-style-guide"> 2:     style guide</h2><br>
<p>   ,   Antlr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  PMD 7</a>.   ,   ,      ,   -       JJTree. ,        —   ,   , <em>  ,  </em>…       <code>modelica.g4</code>         Anltr,     JJTree. ,     ,  ,  ,    . . .</p><br>
<p>,  ,      ,     .     «»        parser combinator-  Scala.  ,  ,    : AST , ,  <code>modelica.g4</code> ,        «»:      ,      <strong></strong>,    ,    , , ,   <code>then</code>,   <code>else</code>.</p><br>
<p> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  JJTree</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> tutorial</a> —   , ,  ,      ,  ,        ,  ,     , ,   .    ,    :</p><br>
<ul>
<li>-, <strong>    JavaCC     Java,      </strong></li>
<li>   ,    AST   <code>[ Expression() ]</code>  ,      —  ,    .      PMD,   ,       — legacy, ...</li>
<li>   (   — <code>StoredDefinition</code>)    <code>void</code>   (  <code>ASTStoredDefiniton</code>)</li>
<li>   <code>#void</code>          (       ,    ,   ,      )</li>
<li>C    <code>void SimpleExpression() #SimpleExpression(&gt;1)</code>  ,       AST,      .            :  ,       <code>1</code>  -  <code>LogicExpression(AdditiveExpression(MultiplicativeExperssion(Constant(1))))</code> — <em>  n   </em> —      <code>Constant(1)</code></li>
<li>     <code>image</code> (.  <code>getImage</code>, <code>setImage</code>),     « »  : ,  ,    ,  <code>image</code>       (       ,       ,   ,   - ,     )</li>
<li><strong>LOOKAHEAD</strong> — ,   ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a>  <br>
<ul>
<li> ,  JavaCC    ,      -  ,       ,   </li>
<li>  ,   JavaCC, <del>     <code>LOOKAHEAD = n</code></del>     ,      , ,      (,  ,    , , ,   ,   ,     ...)</li>
<li>       ,       -    </li>
<li>       <strong></strong>  ,    « ,  ,    ,     —     »</li>
<li> :    JavaCC       <code>LOOKAHEAD</code> —   ,      ,   lookahead ...</li>
</ul></li>
</ul><br>
<p>,          JJTree, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  14 </a>     .      «      java  vm,  ».    ,       ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> pull request  </a>:</p><br>
<ul>
<li>        <code>alljavacc.xml</code> (    ),         <code>target/generated-sources</code>.    . ,       ,      :      ,    ,     ,  —      — <strong>  </strong>.      ,   ,         </li>
<li>,   «»  PMD,       JJTree-     CPD    Java   -  </li>
<li>   ,     XPath .           (   <code>toString</code>  ),    ,   -      PMD Designer  ,       </li>
<li>       <code>META-INF/services</code>    fully qualified class name  </li>
<li>,       (,      ),    ,   <code>category/&lt;language name&gt;/&lt;ruleset&gt;.xml</code> —         </li>
<li>…    ,  ,   , , ,  auto discovery, <br>
<ul>
<li>   «      » —   ,  «   ,    » — ,   auto discovery</li>
<li>         ,    <code>// no additional unit tests</code>,     ,         XML-      ,  :      .</li>
</ul></li>
</ul><br>
<h2 id="malenkiy-no-vazhnyy-kvest-dopili-pmd-designer">,   :  PMD Designer</h2><br>
<p>,       .  ? -,    . -,      ,    Java:     (     XPath),       PMD     ,     (   — style guide  «       p»).</p><br>
<p>    ,   ,   PMD Designer    :  ,   ,    Java     —   ,      O_o,     Modelica,    classpath       .      ,   ,   AST.   , ,  -  -,           —  ,  ,    —  ,          XPath…    ,     pull request-,        Java   -   PMD… !  !..    ! …  , ,             …  ,    JavaFX-      exception,   ,     ...</p><br>
<p> ,     --        .      <code>net.sourceforge.pmd.util.fxdesigner.util.codearea.syntaxhighlighting.ModelicaSyntaxHighlighter</code>,      <code>AvailableSyntaxHighlighters</code>.  ,        <code>pmd-designer</code>,         binary distribution.</p><br>
<p>      (   README   PMD Designer):</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/289/e3e/92b/289e3e92b353b29c696ed466434307ed.gif" alt="職場でのPMDデザイナー"></p><br>
<h2 id="promezhutochnyy-itog"> </h2><br>
<p>     ,     :</p><br>
<ul>
<li> </li>
<li>   </li>
<li>   AST         (   ,       !)</li>
<li>     XPath-,        PMD    Java (XPath, ,   BASIC,     ,     )</li>
</ul><br>
<p>,       ,      API     —    (        AST)   ,    ,    breaking change,    :  ,       ,    ,    ,      —   ,   ,   ...</p><br>
<p>    :     -  .</p><br>
<p>     : PMD   scopes  declarations.    AST  scope:  , , …  ,   !        (declarations),    .     ,       , ,  (   ,    pull request-,  , ).   scopes  declarations    visitor,  -  <code>ScopeAndDeclarationFinder</code>,           —  ,    ,  ,  - ,  read-only    AST.        ,    .</p><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ModelicaHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractLanguageVersionHandler</span> </span>{<font></font>
<font></font>
<span class="hljs-comment">// ...</span><font></font>
<font></font>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> VisitorStarter <span class="hljs-title">getSymbolFacade</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VisitorStarter() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">start</span><span class="hljs-params">(Node rootNode)</span> </span>{
                <span class="hljs-keyword">new</span> SymbolFacade().initializeWith((ASTStoredDefinition) rootNode);<font></font>
            }<font></font>
        };<font></font>
    }<font></font>
}</code></pre><br>
<h2 id="vyvod"></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMD Static Analyzerは用途が広く、簡単に拡張できます。</font><font style="vertical-align: inherit;">ほとんどの場合、特定の言語のClang Static Analyzerなどの特殊な「モンスター」に負けますが、新しい言語の静的分析を実装するのに非常に役立ちます。</font><font style="vertical-align: inherit;">しかし、アナライザーが既に使用可能であっても、言語サポートをCPDに追加でき（これはさらに簡単です）、プロジェクト内のコピーされたコードの断片を検索できます。</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja474906/index.html">Xamarin.Forms-SkiaSharpによる装飾的なQRCodeマッピング</a></li>
<li><a href="../ja474908/index.html">矢印が回る：一般化について、またはなぜ数学者プログラマーが</a></li>
<li><a href="../ja474910/index.html">学校の前に子供たちと遊ぶこと</a></li>
<li><a href="../ja474912/index.html">JSONを介したAndroidでのメッセージとアラート</a></li>
<li><a href="../ja474918/index.html">電気機械部品のジョイントデザインの改善</a></li>
<li><a href="../ja474922/index.html">VPSの選択方法</a></li>
<li><a href="../ja474924/index.html">良いマネージャーになるには？管理スキルのギャップを埋める4つの方法</a></li>
<li><a href="../ja474928/index.html">Vivaldiブラウザーの使い方を学ぶ</a></li>
<li><a href="../ja474930/index.html">Meetup Burning Leads：Get Streaming</a></li>
<li><a href="../ja474936/index.html">リンクを作成、保存、管理するための15の優れたツール（予算）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>