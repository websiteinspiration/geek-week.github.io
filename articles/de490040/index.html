<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕴🏾 👨🏻‍⚕️ 🙎🏾 Python-Sellerie in Windows mit Docker-Verwaltung 🏐 😣 👦🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Um Sellerie unter Windows " angemessen " zu debuggen, gibt es verschiedene Möglichkeiten:
 
 

> celery worker --app=demo_app.core --pool=solo --logle...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Python-Sellerie in Windows mit Docker-Verwaltung</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490040/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um </font><font style="vertical-align: inherit;">Sellerie unter Windows </font><font style="vertical-align: inherit;">" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">angemessen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " zu debuggen, gibt es verschiedene Möglichkeiten:</font></font><br>
<br>
<pre><code class="bash hljs">&gt; celery worker --app=demo_app.core --pool=solo --loglevel=INFO</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich benötigen Sie für eine normale Entwicklung ein Unix-System. Wenn Sie nicht die Möglichkeit haben, es als Muttersprachler zu verwenden, sollten Sie überlegen ...) Nun, um ehrlich zu sein, gibt es immer einen Ausweg, und dies ist Docker sowie WSL. Wenn Sie solche „coolen“ IDEs wie PyCharm verwenden, wird alles komplizierter, da Sie bei Verwendung des Interpreters mit einer Quelle aus WSL nach der Installation des Pakets über pip das Projektgerüst aufgrund von Indexierungsproblemen manuell aktualisieren müssen.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber mit </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker ist</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> alles anders. </font><font style="vertical-align: inherit;">Für eine coole Verwaltung benötigen wir Windows 10 Pro, da die Home-Version keine Virtualisierung unterstützt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installieren und testen Sie nun </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nachdem dies in der Taskleiste geschehen ist, wird das entsprechende Symbol angezeigt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pb/7i/ys/pb7iysypwuwvvmaleaamwqnxzvk.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes erstellen und führen wir das Projekt auf Django aus. </font><font style="vertical-align: inherit;">Hier verwende ich Version 2.2. </font><font style="vertical-align: inherit;">Es wird eine ähnliche Struktur geben: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yh/bt/8k/yhbt8kzaulz5qtme6j0bklias0m.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem wir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Celery</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> als Broker </font><font style="vertical-align: inherit;">installiert haben </font><font style="vertical-align: inherit;">. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fügen Sie nun einen Code hinzu, um Folgendes zu überprüfen:</font></font></b><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># core/settings.py </span>
CELERY_BROKER_URL = <span class="hljs-string">'redis://demo_app_redis:6379'</span>
CELERY_ACCEPT_CONTENT = [<span class="hljs-string">'json'</span>] <font></font>
CELERY_TASK_SERIALIZER = <span class="hljs-string">'json'</span>
</code></pre><br>
<pre><code class="python hljs"><span class="hljs-comment"># core/celery.py</span>
<span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> absolute_import, unicode_literals
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery<font></font>
<font></font>
os.environ.setdefault(<span class="hljs-string">'DJANGO_SETTINGS_MODULE'</span>, <span class="hljs-string">'core.settings'</span>)<font></font>
app = Celery(<span class="hljs-string">'core'</span>)<font></font>
app.config_from_object(<span class="hljs-string">'django.conf:settings'</span>, namespace=<span class="hljs-string">'CELERY'</span>)<font></font>
app.autodiscover_tasks()<font></font>
</code></pre><br>
<pre><code class="python hljs"><span class="hljs-comment"># core/__init__.py</span>
<span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> absolute_import, unicode_literals
<span class="hljs-keyword">from</span> .celery <span class="hljs-keyword">import</span> app <span class="hljs-keyword">as</span> celery_app<font></font>
<font></font>
__all__ = (<span class="hljs-string">'celery_app'</span>,)
</code></pre><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fügen Sie eine neue Django-Anwendung hinzu,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der unsere </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufgaben ausgeführt</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> werden, </font><font style="vertical-align: inherit;">und fügen Sie eine neue Datei hinzu:</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment"># app/tasks.py</span>
<span class="hljs-keyword">from</span> celery.task <span class="hljs-keyword">import</span> periodic_task
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> timedelta<font></font>
<font></font>
<span class="hljs-meta">@periodic_task(run_every=(timedelta(seconds=5)), name='hello')</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hello</span>():</span>
    print(<span class="hljs-string">"Hello there"</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als nächstes ein erstellen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dockerfile</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker-compose.yml</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in der Wurzel des Projektes:</font></font><br>
<br>
<pre><code class="xml hljs"># Dockerfile<font></font>
FROM python:3.7<font></font>
RUN pip install pipenv<font></font>
RUN mkdir /code<font></font>
WORKDIR /code<font></font>
COPY Pipfile* /code/<font></font>
RUN pipenv install --system --deploy --ignore-pipfile<font></font>
ADD core /code/<font></font>
</code></pre><br>
<pre><code class="xml hljs"># docker-compose.yml<font></font>
version: '3'<font></font>
<font></font>
services:<font></font>
  redis:<font></font>
    image: redis<font></font>
    restart: always<font></font>
    container_name: 'demo_app_redis'<font></font>
    command: redis-server<font></font>
    ports:<font></font>
      - '6379:6379'<font></font>
  web:<font></font>
    build: .<font></font>
    restart: always<font></font>
    container_name: 'demo_app_django'<font></font>
    command: python manage.py runserver 0.0.0.0:8000<font></font>
    volumes:<font></font>
      - .:/code<font></font>
    ports:<font></font>
      - '8000:8000'<font></font>
  celery:<font></font>
    build: .<font></font>
    container_name: 'demo_app_celery'<font></font>
    command: celery -A core worker -B<font></font>
    volumes:<font></font>
      - .:/code<font></font>
    links:<font></font>
      - redis<font></font>
    depends_on:<font></font>
      - web<font></font>
      - redis<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und Start! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/ns/gv/cqnsgvm4l-aipkp1xkzgv0vdfc0.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir warten auf die Installation aller Abhängigkeiten in der pipenv-Umgebung. </font><font style="vertical-align: inherit;">Am Ende sollte man so etwas sehen: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vt/s8/p1/vts8p1keajxsof32yd96qau9jcm.png" alt="Bild"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das heißt, alles ist cool</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ! </font><font style="vertical-align: inherit;">Sie können über die Befehlszeile steuern: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/da/of/4-/daof4-dwmegxrm6ifjnmxjigrqq.png" alt="Bild"><br>
<br>
<img src="https://habrastorage.org/webt/kk/ph/wq/kkphwqomnanzo_takxcjysjnwl0.png" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie Sie sehen können, haben 2 Bilder, die aus einer Docker-Datei erstellt wurden, eine ID. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie können Container aber auch über die GUI verwalten:</font></font></b><br>
<br>
<img src="https://habrastorage.org/webt/xp/99/v0/xp99v0yz_vca3vmzvbsdbdpq0k0.jpeg" alt="Bild"><br>
<br>
<img src="https://habrastorage.org/webt/g2/ik/gu/g2ikguy5eqeugm2p4madojn-b2i.jpeg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Auf diese Weise können Sie den Container einfach ein- und ausschalten, neu starten und löschen.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sm/e7/wg/sme7wgkzs7lq-is5wfxyymvmaes.png" alt="Bild"></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de490006/index.html">Ausbildungsprogramm für technische Spezifikationen</a></li>
<li><a href="../de490010/index.html">Prüfung des Typensystems zur Überprüfung der Richtigkeit von Musik</a></li>
<li><a href="../de490012/index.html">Warnungen und Speicherfehler, wie geht man damit um?</a></li>
<li><a href="../de490014/index.html">JavaScript-Baumschütteln, wie ein Profi</a></li>
<li><a href="../de490034/index.html">ML REPA Meetup bei der Raffeisenbank: Rundfunk weiter</a></li>
<li><a href="../de490042/index.html">Positive Technologies-Studie: 7 von 8 Finanzinstituten können über das Internet in das Netzwerk eintreten</a></li>
<li><a href="../de490044/index.html">CRM-Implementierung mit den Augen des Kunden</a></li>
<li><a href="../de490046/index.html">NDA für Entwicklung - „Restklausel“ und andere Möglichkeiten, sich zu schützen</a></li>
<li><a href="../de490050/index.html">Streaming von Spaltendaten mit Apache Arrow</a></li>
<li><a href="../de490052/index.html">iOS-Apps können Daten aus der Zwischenablage des Geräts + der MacOS-Umfrage zur Bedrohungsüberwachung stehlen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>