<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏖️ 👩‍❤️‍💋‍👩 🥂 チェックポイント：CPUとRAMの最適化 🛢️ 🤳🏻 🧜🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！今日は、多くのチェック・ポイント管理者に非常に関連するトピック「CPUとRAMの最適化」について説明したいと思います。ゲートウェイや管理サーバーが予期せずにこれらのリソースを大量に消費するケースが頻繁にあります。それらが「リーク」している場所を理解し、可能であれば、それらをより有効に活用...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>チェックポイント：CPUとRAMの最適化</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tssolution/blog/472864/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/6u/y8/jm/6uy8jmbqldp_mngqqxy-turj320.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんにちは！</font><font style="vertical-align: inherit;">今日は、多くのチェック・ポイント管理者に非常に関連するトピック「CPUとRAMの最適化」について説明したいと思います。</font><font style="vertical-align: inherit;">ゲートウェイや管理サーバーが予期せずにこれらのリソースを大量に消費するケースが頻繁にあります。それらが「リーク」している場所を理解し、可能であれば、それらをより有効に活用したいと考えています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.分析</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロセッサの負荷を分析するには、エキスパートモードで入力する次のコマンドを使用すると便利です。 </font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トップ</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ショーすべてのプロセス、リソースの量は割合、稼働時間、プロセスの優先度、およびとしてCPUとRAMが消費する</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアルタイム</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fe/p1/hg/fep1hgngxkxqjswbfztc5ubukno.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cpwd_adminリスト</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チェックポイントのウォッチドッグデーモン、ショーのすべてapplaynsaモジュール、そのPID、状態や起動回数</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/mu/_k/9p/mu_k9pbywkgtitb8-kzd59yvqiw.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cpstat -f CPU、OS </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の使用CPU、その数、およびパーセンテージとしてのCPU時間の分布</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/dw/3n/6c/dw3n6ckiwcg3eizdrmplqipllyi.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cpstat -fメモリos </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仮想RAMの使用量、アクティブなRAMの量、RAMの空き容量など</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/2j/sw/_r/2jsw_ru6diwo6tu2wszlj3dz5cy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
正しい結果は、すべてのcpstatコマンドが</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cpview</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーティリティを使用して表示できることです</font><font style="vertical-align: inherit;">。これを行うには、SSHセッションの任意のモードからcpviewコマンドを入力するだけです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ye/id/la/yeidlavvueauuv6nu3ax_y5gvro.png"><br>
<img src="https://habrastorage.org/webt/a8/zn/fd/a8znfdx1i2mpd2r_yq5-2cdlvpu.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ps auxwf</font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのプロセスの長いリスト、それらのID、使用中の仮想メモリ、RAM内のメモリ、CPU</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/cm/vb/cu/cmvbcubjo2xuzl9f_wzmqvqaidu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コマンドの別のバリエーション：</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ps -aF </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、最も高価なプロセス</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/5f/jm/o-/5fjmo-kbt3jeimvhefmmztldxme.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw ctl affinity -l -a </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイアウォールのさまざまなインスタンスのコアの分布、つまりCoreXL </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/u0/vj/jj/u0vjjj4cautcwo13ieksrote4xu.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw ctl pstat </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析</font></font></i><font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">テクノロジーを表示します</font></i><i><font style="vertical-align: inherit;">RAMおよび接続の一般的なインジケーター、Cookie、NAT </font></i></font><br>
<br>
<img src="https://habrastorage.org/webt/zt/fk/jr/ztfkjr_ydzzfr7qelfs6jjdwvcy.png"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フリー-m </font></font></b> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAMバッファー</font></font></i><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">netsat</font></b></font><br>
<br>
<img src="https://habrastorage.org/webt/aa/a0/t3/aaa0t36rlh3vlohpftc3w5h7giu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
コマンド</font><font style="vertical-align: inherit;">とそのバリエーションに</font><font style="vertical-align: inherit;">特別な注意が払われ</font><font style="vertical-align: inherit;">ます。たとえば、</font><b><font style="vertical-align: inherit;">netstat -i</font></b></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クリップボードの監視の問題を解決するのに役立ちます。このコマンドの出力のパラメーターRXドロップパケット（RX-DRP）は、原則として、不正なプロトコル（IPv6、不正/意図しないVLANタグなど）のドロップにより、それ自体で大きくなります。ただし、別の理由でドロップが発生した場合は、この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">て調査を開始し、このネットワークインターフェイスがパケットを破棄する理由を理解</font><font style="vertical-align: inherit;">する必要があり</font><font style="vertical-align: inherit;">ます。理由を学んだ後、付録の操作も最適化できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xa/vv/mu/xavvmul-vmexskc5qht156dijsk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
監視ブレードが有効になっている場合、オブジェクトをクリックして[デバイスとライセンス情報]を選択することにより、SmartConsoleでこれらのインジケーターをグラフィカルに表示できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
継続的にモニタリングブレードを含めることはお勧めしませんが、テスト当日は可能です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_c/ta/sc/_ctasc0tgxyziop6lv__gleyhiw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、監視用のパラメーターをさらに追加できます。そのうちの1つは非常に便利です-バイトスループット（付録のスループット）。</font><font style="vertical-align: inherit;">SNMPに基づく</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5e/yl/o8/5eylo8hkcfyiak2bxn_27bljk8g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
無料の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zabbix</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など、他の監視システムがある場合は、</font><font style="vertical-align: inherit;">これらの問題の特定にも適しています。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.時間の経過に伴うRAMの「リーク」</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
時間の経過とともに、ゲートウェイまたは管理サーバーがますます多くのRAMを消費し始めるという疑問がしばしば生じます。私は安心したいのですが、これはLinuxのようなシステムでは普通の話です。</font><font style="vertical-align: inherit;">付録</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">free -m</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cpstat -f memory os</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド</font><font style="vertical-align: inherit;">の出力を</font><font style="vertical-align: inherit;">エキスパートモードから確認すると、RAMに関連するすべてのパラメーターを計算して確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、現時点でゲートウェイで使用可能なメモリは</font><font style="vertical-align: inherit;">、原則として、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空きメモリ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">バッファメモリ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> + </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">キャッシュメモリ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ -1.5 GB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CPによると、時間の経過とともに、ゲートウェイ/管理サーバーは最適化され、ますます多くのメモリを使用し、使用の約80％に達して停止します。デバイスを再起動すると、インジケーターがリセットされます。ゲートウェイがすべてのタスクを完了するには1.5 GBの空きRAMで十分であり、管理者がこのようなしきい値に達することはほとんどありません。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、上記のコマンドの結論は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">低メモリ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ユーザー空間のRAM）と</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高メモリ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（カーネル空間のRAM）の使用量を示しています。</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
カーネルプロセス（Check Pointカーネルモジュールなどのアクティブモジュールを含む）は、低メモリのみを使用します。ただし、ユーザープロセスはローメモリとハイメモリの両方を使用できます。さらに、低メモリは</font><b><font style="vertical-align: inherit;">合計</font></b><font style="vertical-align: inherit;">メモリとほぼ同じです</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><b><font style="vertical-align: inherit;">「OOM（メモリ不足）が原因でメモリを解放するためにモジュールの再起動またはプロセスが強制終了される」</font></b></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
というエラーがログに</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注が</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">れる場合にのみ、心配する必要が</font><b><font style="vertical-align: inherit;">あります</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、ゲートウェイを再起動し、再起動しても問題が解決しない場合はサポートに連絡してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
詳しい説明は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sk99547</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sk99593にあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3.最適化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下は、CPUとRAMの最適化に関する質問と回答です。</font><font style="vertical-align: inherit;">彼らは正直に答え、推奨事項に耳を傾ける必要があります。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1。</font><font style="vertical-align: inherit;">アップライニングは正しいですか？</font><font style="vertical-align: inherit;">パイロットプロジェクトはありましたか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
適切なサイジングにもかかわらず、ネットワークは正常に成長する可能性があり、この機器は単に負荷に対応できません。</font><font style="vertical-align: inherit;">そのようなサイジングがなかった場合の2番目のオプション。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2。</font><font style="vertical-align: inherit;">HTTPS検査は有効ですか？</font><font style="vertical-align: inherit;">その場合、テクノロジーはベストプラクティス用に構成されていますか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちの顧客の場合</font><font style="vertical-align: inherit;">
は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照する</font><font style="vertical-align: inherit;">か、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sk108202を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照してください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HTTPS検査ポリシーのルールの順序は、HTTPSサイトのオープンを最適化する上で非常に重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ルールの推奨順序：</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カテゴリ/ URLでルールをバイパスする</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カテゴリ/ URLでルールを検査する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他のすべてのカテゴリのルールを検査する</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/ff/0t/hu/ff0thuldbet_ltz7rczpuxclz-m.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイアウォールポリシーと同様に、チェックポイントは一致するパケットを上から下に探します。したがって、このパッケージをスキップする必要がある場合、ゲートウェイはすべてのルールの実行にリソースを費やすことがないため、バイパスルールを上に配置することをお勧めします。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3アドレス範囲オブジェクトが使用されていますか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ネットワーク192.168.0.0-192.168.5.0などのアドレス範囲を持つオブジェクトは、5つのネットワークオブジェクトよりも大幅に多くのRAMを消費します。</font><font style="vertical-align: inherit;">一般に、ポリシーがインストールされるたびにゲートウェイと管理サーバーがリソースを消費し、最も重要なことには、ポリシーを確認して適用するために時間を費やすため、SmartConsoleで未使用のオブジェクトを削除することをお勧めします。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4。</font><font style="vertical-align: inherit;">脅威対策ポリシーはどのように構成されますか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、チェック・ポイントは、IPSを別のプロファイルに配置し、このブレード用に別のルールを作成することをお勧めします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、管理者は、DMZセグメントはIPSでのみ保護する必要があると考えています。</font><font style="vertical-align: inherit;">したがって、ゲートウェイが他のブレードでパケットを処理するリソースを浪費しないように、IPSのみが有効になっているプロファイルを使用して、このセグメント専用のルールを作成する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プロファイルの構成については、この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドキュメント</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（17〜20ページ）の</font><font style="vertical-align: inherit;">ベストプラクティスに従って構成することをお勧めします</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.5。</font><font style="vertical-align: inherit;">IPS設定で、検出モードのシグネチャはいくつありますか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
未使用の署名を無効にする必要があるという意味で、慎重に署名を処理することをお勧めします（たとえば、アドビ製品を操作するための署名には大量の計算能力が必要です。顧客がそのような製品を持っていない場合、署名を無効にすることは理にかなっています）。</font><font style="vertical-align: inherit;">次に、可能な場合はDetectの代わりにPreventを配置します。これは、ゲートウェイがDetectモードで接続全体の処理にリソースを費やすためです。Preventモードでは、ゲートウェイはすぐに接続をドロップし、パケットの完全な処理にリソースを費やしません。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6。</font><font style="vertical-align: inherit;">脅威エミュレーション、脅威抽出、ウイルス対策ブレードによって処理されるファイルは何ですか？</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ユーザーがダウンロードしない拡張ファイルをエミュレートして分析しても意味がありません。または、ネットワーク上で不要であると思われる場合（たとえば、bat、exeファイルはファイアウォールレベルでContent Awarenessブレードを使用して簡単にブロックできるため、ゲートウェイリソースの消費が少なくなります）。</font><font style="vertical-align: inherit;">さらに、脅威エミュレーション設定では、環境（オペレーティングシステム）を選択してサンドボックスで脅威をエミュレートし、すべてのユーザーがバージョン10で作業しているときに環境Windows 7をインストールすることもできます。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.7。</font><font style="vertical-align: inherit;">ファイアウォールルールとアプリケーションレベルのルールはベストプラクティスに従って配置されていますか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ルールに多数のヒット（一致）がある場合は、それらを最上部に配置し、ヒット数の少ないルールを最下部に配置することをお勧めします。主なことは、それらが互いに重なり合わないようにすることです。推奨されるファイアウォールポリシーアーキテクチャ：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/va/5n/48/va5n48yatdwjs-pchti8xshoba4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
説明：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のルール-最も一致する</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ルール</font><font style="vertical-align: inherit;">がここに配置されます</font><font style="vertical-align: inherit;">ノイズルール-スプリアストラフィックをドロップするための</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ルール（</font><font style="vertical-align: inherit;">NetBIOS </font><font style="vertical-align: inherit;">ステルスルールなど）-ルールで指定されたソース以外のすべてのユーザーへのゲートウェイおよび管理へのアクセスの禁止ゲートウェイルールの</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クリーンアップ、最後のルール、およびドロップルール</font><font style="vertical-align: inherit;">に対する認証</font><font style="vertical-align: inherit;">は、原則として、以前は許可されていなかったものを禁止するために1つのルールに結合</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
され</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.8 </font><font style="vertical-align: inherit;">管理者が作成したサービスの設定は何ですか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、ある種のTCPサービスが特定のポートで作成され、サービスの詳細設定で[Match for Any]をオフにすることは理にかなっています。</font><font style="vertical-align: inherit;">この場合、このサービスは特に表示されるルールに該当し、「サービス」列に「すべて」が含まれているルールには参加しません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/t4/y4/fk/t4y4fknmstrj4_wteuekk2pchxm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サービスについて言えば、タイムアウトを厳しくする必要があることもあります。</font><font style="vertical-align: inherit;">この設定により、大きなタイムアウトを必要としないプロトコルセッションのTCP / UDPセッションを維持しないように、ゲートウェイのリソースをより効率的に使用できます。</font><font style="vertical-align: inherit;">たとえば、次のスクリーンショットでは、domain-udpサービスのタイムアウトを40秒から30秒に変更しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7e/nj/gj/7enjgja3a5xc3sdy6uuqlwt1oss.png"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.9 </font><font style="vertical-align: inherit;">SecureXLが使用されていますか？加速のパーセンテージは何ですか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
SecureXLパフォーマンスの品質は、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fwaccel stat</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw accel stats -s </font></font></b><font style="vertical-align: inherit;"><b><font style="vertical-align: inherit;">ゲートウェイの</font></b><font style="vertical-align: inherit;">エキスパートモードの基本コマンドで確認でき</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">次に、加速しているトラフィックの種類、さらに作成できるテンプレート（テンプレート）を理解する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デフォルトでは、ドロップテンプレートは有効になっていません。これらを含めると、SecureXLの動作に影響します。</font><font style="vertical-align: inherit;">これを行うには、ゲートウェイの設定と[最適化]タブに移動します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hs/ne/bl/hsneblmfbdg7zrcge8pespi8hxk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、クラスターを使用してCPUを最適化する場合は、UDP DNS、ICMPなどの重要でないサービスの同期を無効にできます。</font><font style="vertical-align: inherit;">これを行うには、サービス設定→詳細設定→状態同期の接続の同期に移動して、クラスターで同期が有効になっています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/bq/me/_hbqme40i1z0j1lly_vl53myki8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてのベストプラクティスは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sk98348で</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.10。</font><font style="vertical-align: inherit;">CoreXlはどのように使用されますか？</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイアウォールインスタンス（ファイアウォールモジュール）に複数のCPUを使用できるCoreXLテクノロジーは、デバイスの動作を最適化するのに役立ちます。最初に、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fw ctl affinity -l -aコマンド</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、使用されているファイアウォールインスタンスとSND（ファイアウォールエンティティにトラフィックを分散するモジュール）に配信されたプロセッサを表示します。すべてのプロセッサが含まれていない場合は</font><font style="vertical-align: inherit;">、ゲートウェイで</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cpconfig</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コマンド</font><b><font style="vertical-align: inherit;">を使用して</font></b><font style="vertical-align: inherit;">追加できます</font><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ホットフィックス</font></a><font style="vertical-align: inherit;">を置くのも良い話です</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">マルチキューを有効にします。</font><font style="vertical-align: inherit;">マルチキューは、SNDを搭載したプロセッサが何パーセントも使用され、他のプロセッサのファイアウォールインスタンスがアイドル状態である場合の問題を解決します。</font><font style="vertical-align: inherit;">次に、SNDは1つのNICに多くのキューを作成し、カーネルレベルで異なるトラフィックに異なる優先順位を設定する機会があります。</font><font style="vertical-align: inherit;">その結果、CPUコアがより適切に使用されます。</font><font style="vertical-align: inherit;">テクニックは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sk98348に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も記載されてい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結論として、これはチェック・ポイントの作業を最適化するためのすべてのベスト・プラクティスではなく、最も人気があると言いたいと思います。</font><font style="vertical-align: inherit;">セキュリティポリシーの監査を注文する場合、またはチェックポイントに関連する問題を解決する場合は、sales @ tssolution.ruにお問い合わせください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご清聴ありがとうございました！</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja472854/index.html">Unity UIプロファイリング：誰が私のバッチ処理を台無しにするか？</a></li>
<li><a href="../ja472856/index.html">テーブルとスティックから品質管理サービスを作成する方法</a></li>
<li><a href="../ja472858/index.html">Pythonおよび高速HTTPクライアント</a></li>
<li><a href="../ja472860/index.html">カスケードキャッシュの無効化。パート1</a></li>
<li><a href="../ja472862/index.html">カスケードキャッシュの無効化。パート2</a></li>
<li><a href="../ja472866/index.html">安定したコミュニケーションのためのタリスマン</a></li>
<li><a href="../ja472868/index.html">電話サーバー管理：RUVDSモバイルクライアント</a></li>
<li><a href="../ja472870/index.html">アジャイルがアーキテクチャと開発ツールを変換せずに停止する理由-カンファレンスプレゼンテーション</a></li>
<li><a href="../ja472872/index.html">文化を失うことなくスタートアップを50人の従業員に増やす方法</a></li>
<li><a href="../ja472874/index.html">スターシップストーリー：給水塔から星まで</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>