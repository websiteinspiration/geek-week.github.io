<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛫 😚 💋 InterSystems API Managerの紹介 🍺 🤜 📁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近、InterSystems API Manager（IAM）をリリースしました。これは、ITインフラストラクチャ内のWeb APIとの間の監視、制御、およびトラフィック制御を提供するInterSystems IRISデータプラットフォームの新しいコンポーネントです。
 

この記事では、IAMを...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>InterSystems API Managerの紹介</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/475670/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近、InterSystems API Manager（IAM）をリリースしました。これは、ITインフラストラクチャ内のWeb APIとの間の監視、制御、およびトラフィック制御を提供するInterSystems IRISデータプラットフォームの新しいコンポーネントです。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この記事では、IAMを構成する方法を示し、IAMで使用できる多くの機能のいくつかを示します。</font><font style="vertical-align: inherit;">InterSystems API Managerを使用すると、次のことができます。</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIを観察し、誰がAPIを使用しているか、どのAPIが最も人気があり、改善が必要かを理解します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIを使用するユーザーを制御し、APIの使用を単純なアクセス制限からリクエストに応じた制限に制限します。カスタマイズ可能なコントロールがあり、API消費パターンの変更にすばやく対応できます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OAuth2.0、LDAP、キートークン認証などの一元化されたセキュリティメカニズムでAPIを保護します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開発者向けの特別なポータルを開くことにより、サードパーティ開発者の作業を簡素化し、APIの優れたエクスペリエンスを提供します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">APIをスケーリングし、応答の遅延を最小限に抑えます。</font></font></li>
</ul><br>
<p> API      SOA   ,     (),         .    API   ,   .</p><a name="habracut"></a><br>
<p>    InterSystems IRIS,        IAM.  IAM    InterSystems IRIS,     IAM    InterSystems   .</p><br>
<p>     InterSystems IRIS     InterSystems API Manager,   InterSystems.</p><br>
<h1 id="nachalo-raboty-i-ustanovka">   </h1><br>
<p> InterSystems  IAM     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">WRC</a>  "Software Distribution"    Docker .   :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Docker</a> 17.04.0+.</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Docker Compose</a> 1.12.0+.</li>
<li>InterSystems IRIS 2019.1.1+.</li>
</ul><br>
<p>   Docker  (!   WRC   Docker ,   ,  Docker ):</p><br>
<pre><code class="plaintext hljs">docker load -i iam_image.tar</code></pre><br>
<p>    IAM       . IAM    ,        InterSystems IRIS.   IAM    InterSystems IRIS   .</p><br>
<p> InterSystems IRIS:</p><br>
<ul>
<li> - <code>/api/IAM</code></li>
<li>  <code>IAM</code></li>
<li>   <code>IAM</code></li>
</ul><br>
<p>   IAM.      <code>iam-setup</code>  Windows  Unix ( Mac).        ,   IAM    InterSystems IRIS.      Mac:</p><br>
<pre><code class="plaintext hljs">source ./iam-setup.sh <font></font>
Welcome to the InterSystems IRIS and InterSystems API Manager (IAM) setup script.<font></font>
This script sets the ISC_IRIS_URL environment variable that is used by the IAM container to get the IAM license key from InterSystems IRIS.<font></font>
Enter the full image repository, name and tag for your IAM docker image: intersystems/iam:0.34-1-1<font></font>
Enter the IP address for your InterSystems IRIS instance. The IP address has to be accessible from within the IAM container, therefore, do not use "localhost" or "127.0.0.1" if IRIS is running on your local machine. Instead use the public IP address of your local machine. If IRIS is running in a container, use the public IP address of the host environment, not the IP address of the IRIS container. xxx.xxx.xxx.xxx               <font></font>
Enter the web server port for your InterSystems IRIS instance: 52773<font></font>
Enter the password for the IAM user for your InterSystems IRIS instance: <font></font>
Re-enter your password: <font></font>
Your inputs are:<font></font>
Full image repository, name and tag for your IAM docker image: intersystems/iam:0.34-1-1<font></font>
IP address for your InterSystems IRIS instance: xxx.xxx.xxx.xxx<font></font>
Web server port for your InterSystems IRIS instance: 52773<font></font>
Would you like to continue with these inputs (y/n)? y<font></font>
Getting IAM license using your inputs...<font></font>
Successfully got IAM license!<font></font>
The ISC_IRIS_URL environment variable was set to: http://IAM:****************@xxx.xxx.xxx.xxx:52773/api/iam/license<font></font>
WARNING: The environment variable is set for this shell only!<font></font>
To start the services, run the following command in the top level directory: docker-compose up -d<font></font>
To stop the services, run the following command in the top level directory: docker-compose down<font></font>
URL for the IAM Manager portal: http://localhost:8002</code></pre><br>
<p>    , IP-,  InterSystems IRIS     IAM — ,     .</p><br>
<p>       :</p><br>
<pre><code class="plaintext hljs">ISC_IAM_IMAGE=intersystems/iam:0.34-1-1<font></font>
ISC_IRIS_URL=http://IAM:&lt;PASS&gt;@&lt;IP&gt;:&lt;PORT&gt;/api/iam/license</code></pre><br>
<h1 id="zapusk"></h1><br>
<p>  IAM,  :</p><br>
<pre><code class="plaintext hljs">docker-compose up -d</code></pre><br>
<p>    IAM  ,     .      :</p><br>
<pre><code class="plaintext hljs">docker ps</code></pre><br>
<p>     <code>localhost:8002</code>.</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/feb/7c8/83c/feb7c883ce4240a907f3a16e40c5bd37.png"></p><br>
<p>   ,      .   . IAM     (workspaces)   API   / .     "default"       .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/92a/89f/ec2/92a89fec21308f5a8818a667f74124a4.png" alt="デフォルトのワークスペースツールバー"></p><br>
<p>      -  ,        IAM   .   :  (Services)   (Routes)  :</p><br>
<ul>
<li> (Service) — API,       .  , REST API  InterSystems IRIS  ,  , , Google API,     . </li>
<li> (Route) ,        .      ,    ,     . ,     IP,  , HTTP-,  URI    .</li>
</ul><br>
<h2 id="servis"></h2><br>
<p>   InterSystems IRIS,   :</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>iris</td>
<td> </td>
</tr>
<tr>
<td>host</td>
<td>IP</td>
<td>  ip  InterSystems IRIS</td>
</tr>
<tr>
<td>port</td>
<td>52773</td>
<td>-  InterSystems IRIS</td>
</tr>
<tr>
<td>path</td>
<td>/api/atelier</td>
<td> </td>
</tr>
<tr>
<td>protocol</td>
<td>http</td>
<td></td>
</tr>
</tbody>
</table></div><br>
<p>    .   <code>Create</code>   ID  .</p><br>
<h2 id="marshrut"></h2><br>
<p>   :</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td>/api/atelier</td>
<td> </td>
</tr>
<tr>
<td>protocol</td>
<td>http</td>
<td></td>
</tr>
<tr>
<td>service.id</td>
<td>guid from 3</td>
<td> (ID   )</td>
</tr>
</tbody>
</table></div><br>
<p>    .   <code>Create</code>   ID  .   IAM      8000.  ,   <code>http://localhost:8000</code>    <code>/api/atelier</code>   InterSystems IRIS. </p><br>
<h2 id="testirovanie"></h2><br>
<p>     REST  (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Postman</a>).</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/b83/f1c/480/b83f1c4808a89dc680168ae06248aefe.png" alt="PostmanでのRESTリクエスト"></p><br>
<p> GET   <code>http://localhost:8000/api/atelier/</code> (  <code>/</code>  )     InterSystems IRIS.     IAM   :</p><br>
<ul>
<li>  HTTP.</li>
<li>.</li>
<li> ( ).</li>
</ul><br>
<p>     (      ,   /api/atelier/est/),      :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/a88/413/318/a88413318fa2bfe01827af2d6ee3d925.png" alt="いくつかのメトリックを含むダッシュボード"></p><br>
<h1 id="rabota-s-plaginami">  </h1><br>
<p>,     ,     API.    ,    .</p><br>
<p>     API   .           IAM  ,      ,    ( ),   .      "Rate Limiting" (  )  .             (ID) .</p><br>
<h2 id="ogranichenie-kolichestva-zaprosov">  </h2><br>
<p> Plugins ( )     .        ,      IAM ,    .     ,  "New Plugin".</p><br>
<p>,   ,    "Traffic Control" ( )   "Rate Limiting" (  ).  .    ,     ,      :</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>route_id</td>
<td>ID</td>
<td>ID </td>
</tr>
<tr>
<td>config.minute</td>
<td>5</td>
<td>   </td>
</tr>
</tbody>
</table></div><br>
<p>  .    . ,       ,   ,   .    (, 1000       100   ).   ,        . </p><br>
<p>         Postman,  ,     2  :</p><br>
<ul>
<li>XRateLimit-Limit-minute: 5</li>
<li>XRateLimit-Remaining-minute: 4 </li>
</ul><br>
<p>  ,      5            4 .</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/78b/0af/c02/78b0afc0269baad6b56ea4059dbdefe7.png" alt="速度制限"></p><br>
<p>           ,                 HTTP 429    :</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/dcb/421/6bc/dcb4216bcf373f51ffe49d56d8bef8b4.png" alt="API超過"></p><br>
<p> ,      . </p><br>
<p>  , :</p><br>
<ul>
<li>    .</li>
<li> ,     .</li>
<li> API.</li>
</ul><br>
<p>            API     . ,   600      .    10   .        600     .  ,  ,  . ,         .    <code>config.minute</code>  20,  ,       20     600   .               10   ,           .      30 ,     .         , :</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th>HTTP </th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>X-RateLimit-Limit-hour</td>
<td>600</td>
</tr>
<tr>
<td>X-RateLimit-Remaining-hour</td>
<td>595</td>
</tr>
<tr>
<td>X-RateLimit-Limit-minute</td>
<td>20</td>
</tr>
<tr>
<td>X-RateLimit-Remaining-minute</td>
<td>16</td>
</tr>
</tbody>
</table></div><br>
<p>,           ,    .</p><br>
<h1 id="vyvody"></h1><br>
<p>    ,         InterSystems API Manager.        40 .     IAM    :</p><br>
<ul>
<li>       API.</li>
<li>       .</li>
<li>           .</li>
<li>       ,   API.</li>
<li>            .</li>
</ul><br>
<h1 id="ssylki"></h1><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">-</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   API Management</a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja475658/index.html">DevOpsDaysを選ぶ理由 そして、なぜこれが別のDevOpsカンファレンスではないのか</a></li>
<li><a href="../ja475660/index.html">バックパッキングの新しい言葉：ピクセルスクリーンモデルに会う-私のLED体験と印象</a></li>
<li><a href="../ja475662/index.html">プログラマーとしての私のキャリアの中で最も恥ずべき間違い（現時点）</a></li>
<li><a href="../ja475666/index.html">バーチャルリアリティに関する50のUXヒント</a></li>
<li><a href="../ja475668/index.html">燃え尽きる。回復します。最初からやり直してください。か否か？</a></li>
<li><a href="../ja475672/index.html">PythonとDjangoでチャットを書く</a></li>
<li><a href="../ja475674/index.html">ビーチからの写真なしで完全に遠隔作業の市場について</a></li>
<li><a href="../ja475676/index.html">「インサイト主導」：機械学習モデルの高度な分析とライフサイクル管理</a></li>
<li><a href="../ja475678/index.html">コンピューターリテラシーミルクプロバイダーの教育方法</a></li>
<li><a href="../ja475684/index.html">@Pythonetcのコンパイル、2019年10月</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>