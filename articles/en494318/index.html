<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üß• üéÑ üîµ How do you get 1024 colors in CGA? And are there really 1024? üçä üò∫ üçæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Launched in 2015, the translation ‚ÄúNew graphics mode: CGA in 1024 colors‚Äù impressed me very much, but from it I still did not understand how this tric...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>How do you get 1024 colors in CGA? And are there really 1024?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/494318/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/se/in/no/seinnoqnwz1ak6t-pmx4oplohg0.jpeg" align="right" width="320"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Launched in 2015, the translation </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúNew graphics mode: CGA in 1024 colors‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> impressed me very much, but from it I still did not understand how this trick works, because the article was written by a professional in the field of retro-computer graphics, and suggests that the reader already has some knowledge in this area. </font><font style="vertical-align: inherit;">Although my first computer ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúSearch‚Äù</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> was a Soviet clone of IBM PC / XT) had CGA, I didn‚Äôt find monitors with a composite input, so I had to google it and figure out how the composite video worked. </font><font style="vertical-align: inherit;">For those who are also interested in the ‚Äúinside‚Äù technologies of 1981, in which unexpected undocumented opportunities were discovered in 2015, I put together the material I found.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Native CGA Features</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For a layman, CGA is usually associated with 320x200 graphics and a four-color palette with acid-creepy colors, such as in the 1983 games </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alley Cat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J-bird</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lode Runner</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tapper</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/2f5/9c0/94f/2f59c094fe37d7cf942162fd31993c22.png"><img src="https://habrastorage.org/webt/ra/ix/38/raix38ccn3y1kxdrhppdsmeacmk.png"><br>
<img src="https://habrastorage.org/getpro/habr/post_images/a9a/8ac/ee8/a9a8acee803d7ee37bc48e82e22490e3.gif"><img src="https://habrastorage.org/getpro/habr/post_images/387/62d/fa0/38762dfa05c5b498ae6777a3d32f00a4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the 320x200x2bpp limit is imposed only by the amount of video memory available on the adapter (16 Kb) , in fact, it is capable of producing an image of 640x200x4bpp - with pixels strongly elongated vertically.</font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is used, for example, in 80x25 text mode with 16-color characters and a background, and a character matrix of 8x8 pixels. (We can assume that the screen buffer in this case only takes 80x25x2 = 4000 bytes.) But if the graphics are output in this ‚Äúhigh resolution‚Äù 640x200, then 16 KB of video memory is only enough for a black and white image. Such graphic mode was supported, for example, by Windows up to version 3.0 inclusive: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/si/qr/pnsiqrtfhkvghirc0zlblpp9jlu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the output, the CGA produced a digital signal for which the </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">RGBI</font></a><font style="vertical-align: inherit;"> interface was specially invented</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: two synchronization lines signal the beginning of the frame and the beginning of the scan line, and four lines of the video signal transmit the four-bit color of the current pixel. But monitors capable of receiving an RGBI digital signal at the input were rare in 1981; IBM itself began to produce such digital monitors only in 1983. For home users, CGA had a second conclusion - the very composite video signal with which the masters of the demo scene conjured. It could be connected via an </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RF modulator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to the antenna input of a conventional American TV, plus some televisions had a special composite input (for connecting, for example, a VCR) that allowed you to input a video signal bypassing the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tuner</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and avoid unnecessary modulation / demodulation.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/jn/ln/lg/jnlnlgz7cpmrgdaorwsfxsm2aku.jpeg"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The part of the video adapter strapping, which forms the composite </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NTSC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> signal from the digital output </font><font style="vertical-align: inherit;">(this is the American standard for color television), was intended only for the transitional stage until all PC users got digital monitors. </font><font style="vertical-align: inherit;">The next video adapter from IBM - EGA (1984) - supported only digital (already six-bit) output, using a pair of previously unused contacts in the RGBI interface. </font><font style="vertical-align: inherit;">In addition, the ‚Äúhigh resolution‚Äù modes were not recommended for use with composite video output, because 640 pixels in the scan line exceeded the capabilities of NTSC. </font><font style="vertical-align: inherit;">The next section explains why; </font><font style="vertical-align: inherit;">and Wikipedia </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">illustrates</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> how text was blurred in 80-column CGA mode on a composite input monitor:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/f8/32/8n/f8328n19vlr3d8_6dplrmzfcih0.png"><hr><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. TV features</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Black-and-white television was arranged in a very straightforward manner: an electron beam goes around the screen line by line, and the video signal level directly controls the power of the beam. During the flyback between the lines and between frames, the beam is turned off, and the video signal transmits synchronization pulses. Since the signal is completely analog, its horizontal resolution is not defined: the brightness can smoothly change throughout the line. On the other hand, the vertical resolution is hard-set by the horizontal scanning frequency (243 lines for NTSC).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The illustration, carefully drawn in MS Paint, shows how the video signal looks for a frame consisting of two vertical stripes: wide dark and narrow bright. At the top, a signal for one line is schematically shown, at the bottom, a signal for a sequence of lines. A </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sync pulse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> that is ‚Äúblacker than black‚Äù is </font><font style="vertical-align: inherit;">transmitted before each line </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">
When color television was created, it was important that existing black-and-white televisions accept acceptable color video. The Americans came up with the following trick: color information is transmitted by a </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">subcarrier </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">harmonic signal</font></a></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/r7/gr/p_/r7grp_807hl561heoxj-m753lea.png"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">added to the luminance signal. Then a black-and-white TV that does not know how to isolate and analyze the subcarrier harmonic will highlight each pixel with a brightness corresponding to the average signal value during the pixel transmission time. If the subcarrier frequency is large enough, then the additional signal will not affect the average value, i.e. on the displayed brightness. Now we agree that the phase shift of the subcarrier corresponds to the hue of the color, and its amplitude corresponds to the saturation; the division of color into brightness, hue and saturation corresponds to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YIQ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> color model </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second illustration schematically shows the video signal for one line of the frame, consisting of colored vertical stripes. An additional </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">color burst is</font></a><font style="vertical-align: inherit;"> transmitted between the clock and the beginning of the line.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which sets the receiver to the phase from which the subcarrier shifts will be measured. Now the flat sections of the signal (i.e., with zero amplitude of the subcarrier) will correspond to the gray bars (zero saturation); areas where the subcarrier corresponds in color burst phase to yellow bands with two different saturation values ‚Äã‚Äãdepending on the subcarrier amplitude; plot where the subcarrier is in antiphase relative to the color burst - the blue bar. Since the average signal level is the same in all areas, a black-and-white television receiver displays all the bands with the same shade of gray. </font><font style="vertical-align: inherit;">
NTSC requires that the auxiliary signal be sinusoidal, but this is not so important: the square wave shown in the illustration ( </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">meander</font></a></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/vw/jy/zw/vwjyzw_rjudntquo9srlo9beajw.png"></a><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) consists of harmonics with the desired frequency and phase, as well as higher-frequency additives ignored by the television receiver. </font><font style="vertical-align: inherit;">The amplitude of this harmonic is greater than the meander amplitude in</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>4</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>&amp;#x03C0;</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.657ex" height="2.634ex" viewBox="0 -809.3 1574.5 1134.2" role="img" focusable="false" style="vertical-align: -0.755ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2F" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-3C0" x="1001" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>œÄ</mi></math></span></span><script type="math/tex" id="MathJax-Element-1">4/\pi</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> times, but since the TV uses the amplitude of the subcarrier not in absolute value, but relative to the amplitude extracted from color burst, the color display is not affected by the replacement of a sinusoidal additive with a rectangular one. </font><font style="vertical-align: inherit;">CGA and other primitive digital devices generate exactly square waves.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to simplify the separation of the main signal (brightness) and the secondary (color), NTSC standardized the subcarrier frequency, 227.5 times higher than the horizontal frequency - i.e. for each row, along with the spacing between lines, there are 227.5 subcarrier periods. Thus, the American color TV has a certain horizontal resolution: the brightness can still change smoothly throughout the line, but the frequency of the color hue is limited by the subcarrier frequency. If a television receives a video signal with a horizontal resolution of 640 pixels, then approximately one third of the subcarrier period corresponds to each pixel, and a primitive hardware filter does not have time to correctly identify the phase shift and amplitude of the subcarrier from the signal for each pixel. This leads to unexpected results - from blurring,as shown in the example above, before creating</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Artifact" colors</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , unattainable by regular means of the video adapter. </font><font style="vertical-align: inherit;">(I really don't like the name "spurious colors" used</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SLY_G</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in translation of an article about 1024 colors; </font><font style="vertical-align: inherit;">The main meaning of the English word </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artifact</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - ‚Äúman-made, created artificially‚Äù - contrasts these colors with the ‚Äúnatural‚Äù for CGA, and has nothing to do with parasitism.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exactly with the horizontal resolution, a hardware bug in CGA was connected: in 640x200 modes (i.e. h. in 80-column text) the image on the composite monitor turned out to be black and white. </font><font style="vertical-align: inherit;">The workaround for this bug was well known: you need </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to set a brown frame around the image</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The fact is that the strapping that forms the clock signals sets their duration in clock cycles of the video adapter; </font><font style="vertical-align: inherit;">in 640x200 modes, these clocks are half as long as in 320x200 modes, so the clock between the lines of the frame is also twice as short as NTSC requires. </font><font style="vertical-align: inherit;">As a result, color burst just does not have time to be transmitted. </font><font style="vertical-align: inherit;">But if there is a brown frame around the image (brown has almost zero phase shift, low brightness, and saturation corresponds to an approximate amplitude for color burst), then the monitor takes the left side of the frame as color burst, does not draw it on the screen, and is correctly set to color subcarrier phase.</font></font><br>
<br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. CGA composite signal device</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Although the digital video signal produced by CGA can have a horizontal resolution of up to 640 pixels (ie 640 changes in the levels of digital signals in one line), a composite video signal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be thought of</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> as having a resolution of 1280 ‚Äúsubpixels‚Äù regardless of the video mode used, i.e. </font><font style="vertical-align: inherit;">for each pixel in 640x200 modes there are two subpixels, in 320x200 modes - four. </font><font style="vertical-align: inherit;">The signal level (in volts) output by the video adapter for the current subpixel is calculated by the formula</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>U</mi><mo>=</mo><mn>0.41</mn><mspace width=&quot;thinmathspace&quot; /><mo>+</mo><mspace width=&quot;thinmathspace&quot; /><mi>I</mi><mo>&amp;#x22C5;</mo><mn>0.3</mn><mspace width=&quot;thinmathspace&quot; /><mo>+</mo><mspace width=&quot;thinmathspace&quot; /><mi>C</mi><mo>&amp;#x22C5;</mo><mn>0.75</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.647ex" height="2.259ex" viewBox="0 -809.3 12764.5 972.7" role="img" focusable="false" style="vertical-align: -0.38ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-55" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-3D" x="1045" y="0"></use><g transform="translate(2101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-34" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-31" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="4270" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-49" x="5437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="6164" y="0"></use><g transform="translate(6665,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-33" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="8333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-43" x="9501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="10483" y="0"></use><g transform="translate(10984,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-37" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-35" x="1279" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>U</mi><mo>=</mo><mn>0.41</mn><mspace width="thinmathspace"></mspace><mo>+</mo><mspace width="thinmathspace"></mspace><mi>I</mi><mo>‚ãÖ</mo><mn>0.3</mn><mspace width="thinmathspace"></mspace><mo>+</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mo>‚ãÖ</mo><mn>0.75</mn></math></span></span><script type="math/tex" id="MathJax-Element-2">U = 0.41\,+\,I\cdot 0.3\,+\,C\cdot 0.75</script></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where the</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(intensity)</font><font style="vertical-align: inherit;">bit</font><font style="vertical-align: inherit;">is taken directly from the color of the current pixel, and the</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(chroma)</font><font style="vertical-align: inherit;">signal</font><font style="vertical-align: inherit;">is selected by the multiplexer depending on the other three color bits (</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R, G, B</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><div class="scrollable-table"><table>
<tbody><tr>
<th><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R</font></font></i></th>
<th><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G</font></font></i></th>
<th><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B</font></font></i></th>
<th><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></i></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colour</font></font></th>
<th rowspan="9"><img src="https://habrastorage.org/webt/w6/fk/aj/w6fkajaeqidycmhgbxspexd8uqm.png"></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><code>00000000‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the black</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><code>00001111‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blue (~ 180 ¬∞)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><code>11100001‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">green (~ 45 ¬∞)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><code>11000011‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">turquoise (~ 90 ¬∞)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><code>00111100‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">red (~ 270 ¬∞)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><code>00011110‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">magenta (~ 225 ¬∞)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><code>11110000‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">yellow (~ 0 ¬∞)</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><code>11111111‚Ä¶</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">white</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chromatic colors correspond to a chroma signal with a period of eight subpixels and with a phase shift close to a multiple of 45 ¬∞, i.e. </font><font style="vertical-align: inherit;">to an integer number of subpixels. </font><font style="vertical-align: inherit;">Thanks to the ingenious delay schemes in CGA, the phase shifts of the colors are slightly (within ¬± 10 ¬∞) different from the multiples of 45 ¬∞ to be closer to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standard NTSC colors</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, out of 227.5 subcarrier periods in a line, 160 are in the output image, and the rest are in the interval between lines (clock, color burst, and frame around the image). </font><font style="vertical-align: inherit;">It is important that a non-integer number of subcarrier periods passes from color burst to the first pixel of the line: the first pixel starts to be transmitted at 45 ¬∞, so if the line starts with four yellow pixels, the chroma signal will take values ‚Äã‚Äãduring the transmission of the corresponding eight sub-pixels </font></font><code>11100001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pixel brightness (luma), i.e. </font><font style="vertical-align: inherit;">the average value of the signal level for the period of the subcarrier, get</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi><mo>=</mo><mn>0.72</mn><mo>&amp;#x22C5;</mo><msub><mi>C</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub><mspace width=&quot;thinmathspace&quot; /><mo>+</mo><mspace width=&quot;thinmathspace&quot; /><mn>0.28</mn><mo>&amp;#x22C5;</mo><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.444ex" height="2.759ex" viewBox="0 -809.3 10955.2 1188" role="img" focusable="false" style="vertical-align: -0.88ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-3D" x="959" y="0"></use><g transform="translate(2015,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-37" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-32" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="4017" y="0"></use><g transform="translate(4518,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-43" x="0" y="0"></use><g transform="translate(715,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-76" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-67" x="1014" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="6780" y="0"></use><g transform="translate(7947,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-32" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-38" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="9949" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-49" x="10450" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi><mo>=</mo><mn>0.72</mn><mo>‚ãÖ</mo><msub><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub><mspace width="thinmathspace"></mspace><mo>+</mo><mspace width="thinmathspace"></mspace><mn>0.28</mn><mo>‚ãÖ</mo><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">L = 0.72\cdot C_{avg}\,+\,0.28\cdot I</script></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , where</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>C</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>R</mi><mo>&amp;#x2227;</mo><mi>G</mi><mo>&amp;#x2227;</mo><mi>B</mi><mspace width=&quot;thickmathspace&quot; /><mo>+</mo><mspace width=&quot;thickmathspace&quot; /><mi>R</mi><mo>&amp;#x2228;</mo><mi>G</mi><mo>&amp;#x2228;</mo><mi>B</mi></mrow><mn>2</mn></mfrac></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.811ex" height="3.634ex" viewBox="0 -1078.4 9821.5 1564.8" role="img" focusable="false" style="vertical-align: -1.13ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-43" x="0" y="0"></use><g transform="translate(715,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-76" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-67" x="1014" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-3D" x="2150" y="0"></use><g transform="translate(2929,0)"><g transform="translate(397,0)"><rect stroke="none" width="6374" height="60" x="0" y="220"></rect><g transform="translate(60,469)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2227" x="759" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-47" x="1427" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2227" x="2213" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-42" x="2881" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="4033" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-52" x="5204" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2228" x="5964" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-47" x="6631" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2228" x="7418" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-42" x="8085" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-32" x="4257" y="-542"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>R</mi><mo>‚àß</mo><mi>G</mi><mo>‚àß</mo><mi>B</mi><mspace width="thickmathspace"></mspace><mo>+</mo><mspace width="thickmathspace"></mspace><mi>R</mi><mo>‚à®</mo><mi>G</mi><mo>‚à®</mo><mi>B</mi></mrow><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-4">C_{avg} = \frac{R\land G\land B\;+\;R\lor G\lor B}{2}</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 0.5 for chromatic colors, 0 for black and 1 for white. </font><font style="vertical-align: inherit;">This means that on a black and white composite monitor, the first CGA (1981) model could only display six shades of gray. </font><font style="vertical-align: inherit;">In later CGA models (since 1983), the non-periodic addition to the subcarrier began to depend on all four color bits, so that the brightness corresponded to a more complex formula</font></font><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi><mo>=</mo><mn>0.29</mn><mo>&amp;#x22C5;</mo><msub><mi>C</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub><mspace width=&quot;thinmathspace&quot; /><mo>+</mo><mspace width=&quot;thinmathspace&quot; /><mn>0.1</mn><mo>&amp;#x22C5;</mo><mi>R</mi><mspace width=&quot;thinmathspace&quot; /><mo>+</mo><mspace width=&quot;thinmathspace&quot; /><mn>0.22</mn><mo>&amp;#x22C5;</mo><mi>G</mi><mspace width=&quot;thinmathspace&quot; /><mo>+</mo><mspace width=&quot;thinmathspace&quot; /><mn>0.07</mn><mo>&amp;#x22C5;</mo><mi>B</mi><mspace width=&quot;thinmathspace&quot; /><mo>+</mo><mspace width=&quot;thinmathspace&quot; /><mn>0.32</mn><mo>&amp;#x22C5;</mo><mi>I</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="57.92ex" height="2.759ex" viewBox="0 -809.3 24937.9 1188" role="img" focusable="false" style="vertical-align: -0.88ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-3D" x="959" y="0"></use><g transform="translate(2015,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-32" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-39" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="4017" y="0"></use><g transform="translate(4518,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-43" x="0" y="0"></use><g transform="translate(715,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-76" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-67" x="1014" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="6780" y="0"></use><g transform="translate(7947,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-31" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="9449" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-52" x="9950" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="11098" y="0"></use><g transform="translate(12265,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-32" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-32" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="14268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-47" x="14768" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="15944" y="0"></use><g transform="translate(17111,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-37" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="19113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-42" x="19614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2B" x="20763" y="0"></use><g transform="translate(21930,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-33" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-32" x="1279" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMAIN-22C5" x="23932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/494318/&amp;usg=ALkJrhieB4rQ63Eo9-MmvEFQcfAgRWuxDw#MJMATHI-49" x="24433" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi><mo>=</mo><mn>0.29</mn><mo>‚ãÖ</mo><msub><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mi>a</mi><mi>v</mi><mi>g</mi></mrow></msub><mspace width="thinmathspace"></mspace><mo>+</mo><mspace width="thinmathspace"></mspace><mn>0.1</mn><mo>‚ãÖ</mo><mi>R</mi><mspace width="thinmathspace"></mspace><mo>+</mo><mspace width="thinmathspace"></mspace><mn>0.22</mn><mo>‚ãÖ</mo><mi>G</mi><mspace width="thinmathspace"></mspace><mo>+</mo><mspace width="thinmathspace"></mspace><mn>0.07</mn><mo>‚ãÖ</mo><mi>B</mi><mspace width="thinmathspace"></mspace><mo>+</mo><mspace width="thinmathspace"></mspace><mn>0.32</mn><mo>‚ãÖ</mo><mi>I</mi></math></span></span><script type="math/tex" id="MathJax-Element-5">L = 0.29\cdot C_{avg}\,+\,0.1\cdot R\,+\,0.22\cdot G\,+\,0.07\cdot B\,+\,0.32\cdot I</script><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which allowed us to display our own shade of gray on a black and white monitor for each of the 16 color values. </font><font style="vertical-align: inherit;">As a result of this refinement, colors that differ in brightness and are closer to those displayed on the digital one also began to be displayed on the color composite monitor:</font><font style="vertical-align: inherit;">
Hardware bugs and flaws in the harness forming the composite signal from the digital output indicate that the CGA developers were not too worried about its use with a composite monitor, and even less worried about how the ‚Äúhigh resolution‚Äù modes would be displayed on the composite monitor. </font><font style="vertical-align: inherit;">However, it was this unsupported combination that allowed the demoscene masters to squeeze the unimaginable from the CGA!</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/ur/ni/nn/urninn_naso1rluvx3z8is3oa_i.png"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<hr><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Unexpected CGA Features ...</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4a) ... in graphic modes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As explained above, the part of the line, shaded in one color, in the composite video signal turns into a meander with a period of eight subpixels. The converse is also true: any composite signal repeating with a period of eight subpixels will be displayed as a single-color part of the line, because the harmonic subcarrier extracted from it will have a constant phase shift and constant amplitude. What exactly the phase shift will be used is more difficult to predict; The article about 1024 colors shows the result without any explanation: </font><font style="vertical-align: inherit;">
The Nybble column shows a repeating sequence of four pixels in 640x200x1bpp mode, i.e. of eight subpixels. Two of these sequences ( </font><font style="vertical-align: inherit;">and</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/bc/kb/zo/bckbzo9tytaspo29inkm6o9k0-4.png"></a><br>
<br><font style="vertical-align: inherit;"></font><code>0101</code><font style="vertical-align: inherit;"></font><code>1010</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) correspond to meanders with a period of four subpixels: there is no harmonic subcarrier in such a wave at all, so the resulting color is gray. Four more sequences ( </font></font><code>0011, 0110, 1001, 1100</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) correspond to pure subcarrier waves - with a shift of 135 ¬∞, 225 ¬∞, 45 ¬∞, and 315 ¬∞, respectively. Two of these waves set the standard purple and green colors, the remaining two - blue and orange, unattainable by regular means of CGA. </font><font style="vertical-align: inherit;">Signal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">filling</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> at 75% (sequence</font></font><code>0111, 1011, 1101, 1110</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) corresponds to a phase subcarrier shift by half a pixel, i.e. on one subpixel; but the result does not exactly match the phase of the standard colors - because of the very delay schemes that ‚Äúpull‚Äù standard CGA colors to standard NTSC colors. Thus, shades with a slight shift are obtained: turquoise blue, greenish turquoise, reddish brown, purple red. A filling of 75% increases the average signal level, i.e. color brightness; but does not affect saturation, because the wider ‚Äúedges‚Äù of the meander are created by high-frequency harmonics ignored by the television receiver. Finally, a signal with a 25% fill corresponds to the same hues as for 75%, but less brightness.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is even more difficult to predict what color will turn out when the sequence is repeated not from black and white pixels, but from color ones. In 640x200x1bpp mode, the background color is always black, but the second color can be selected from any of the 16 standard ones. In the 320x200x2bpp mode, on the contrary, the background color can be selected from any of the 16 standard ones, and the other three colors are determined by the palette selected from four options. The article on 1024 colors shows two such combinations, again without explanation. I asked for comments directly to </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reenigne</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , responsible for the technical part of the video output in 8088 MPH, as well as implementing CGA emulation in DOSBox; and he advised me </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cgaart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- autonomous CGA emulator written by him, capable of working in batch mode. </font><font style="vertical-align: inherit;">Adding a simple Python binding to cgaart, I generated a table from all possible 16-color sets of ‚Äúartifact colors‚Äù:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full table</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/t6/cy/pz/t6cypztkas2kxj4ytrpnzvnpsqq.png"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The code for each set consists of the number of the graphic mode ( </font></font><code>1A</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for 640x200x1bpp, </font></font><code>0A</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for 320x200x2bpp), the number of the palette ( </font></font><code>0‚Äì3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), and the number of freely selectable color ( </font></font><code>0‚ÄìF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). Each row of the table consists of 16 squares corresponding to a repeating sequence of pixels; each square consists of five bands - digital output, composite signal level and output on the composite monitor with the first CGA model, output on the composite monitor and composite signal level with the corrected CGA model. The composite signal level is shown as the average for two subpixels - cgaart calculates it only with such accuracy. Let us consider in more detail the lines corresponding to the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">two sets</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> shown in the article about 1024 colors - these are sets </font></font><code>1A0C</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and</font></font><code>0A01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; but before that, consider a simpler set </font></font><code>1A04</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/x_/zl/yx/x_zlyxtm7rrswtmmfigw2lqrm8q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A set </font></font><code>1A04</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- red pixels on a black background - corresponds to a signal with a 50% fill and a shift of 270 ¬∞, modulated by a periodic sequence of four pixels. The high level of the signal falls within the first three pixel sequences, so it is the fourth bit does not affect the resulting color: for example, </font></font><code>000x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>001x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">turn into pure black, and </font></font><code>111x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- in pure red. Sequences zeroed first pixel ( </font></font><code>010x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>011x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) correspond to the phase shift by one subpixel, i.e. -45 ¬∞ to magenta; Resettable second pixel ( </font></font><code>100x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>101x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) - shift of 45 ¬∞ to orange. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Set</font></font><code>1A0C</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- light red pixels on a black background - corresponds to the same signal, but with a non-periodic addition, so its low level is now higher than black. As a result of this sequence </font></font><code>0001</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>0010</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>0011</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">are converted to the same colors (green, turquoise, blue and biryuzovato blue) as in the case of white pixels, but now with a much lower brightness, because a low level signal source plays a role of a high level for the resulting. The remaining sequences maintain a high level of the original signal, and the corresponding color shades are obtained close to the set </font></font><code>1A04</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, although the brightness is now higher due to a higher average level. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Finally set</font></font><code>0A01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- a blue background, a green-red-brown palette, four subpixels in each pixel, two pixels in a repeating sequence - contains four standard colors (sequences </font></font><code>00, 11, 22, 33</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do not cause artifacts) and their pairwise mixtures: if you add two meanders, then the harmonic subcarrier shift in the resulting signal will be in the middle between the shifts of the terms. Nevertheless, the brightness and saturation of the result depend on the order of the terms: for example, red has a high level of subpixels 1‚Äì4, green has 6‚Äì1, so that the sequence </font></font><code>12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">completely cuts off the high level of the red term, and half green ; whereas the sequence</font></font><code>21</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fully retains a high level of the red term, and half - green. </font><font style="vertical-align: inherit;">The hue in both cases turns yellow, but for the sequence </font></font><code>12</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- saturated and very dark, while for </font></font><code>21</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- unsaturated and very light. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, there are 80 sets of 16 simultaneously available colors. </font><font style="vertical-align: inherit;">What is the actual resolution? </font><font style="vertical-align: inherit;">Color can only be changed between blocks of 8 subpixels, i.e. </font><font style="vertical-align: inherit;">160 times per line; </font><font style="vertical-align: inherit;">but brightness is set for each pixel independently. </font><font style="vertical-align: inherit;">An article about 1024 colors warns that these modes cannot be called ‚Äú16-color 160x200,‚Äù because </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äúhorizontal resolution is an open question, it depends on the sampling and filtering of the signal, and varies depending on what forms of the color signal you use‚Äù</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( transfer</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SLY_G</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Nevertheless, it is easy to make sure that even with a constant color tone, the composite monitor does not display brightness fluctuations within 8 sub-pixel blocks: pay attention, for example, to the set </font></font><code>0A0A</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the full table, and in it to the sequences </font></font><code>01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">corresponding to green pixels to light green background. Both the brightness and the hue of the color are analyzed block by block with the composite monitor, so instead of alternating green pixels of two brightness levels, monotonous pixels with an average brightness level are obtained. For a sequence, the </font></font><code>10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">result is less saturated than the terms, because this sequence cuts off the low level of the dark green term. Therefore, in my opinion, when using artifact colors, there is every reason to consider 160x200 as actual resolution.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4a) ... in text modes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As mentioned at the very beginning, CGA supports an 80x25 16-color text mode with an 8x8 pixel character matrix, and only a quarter of the video memory is used in this mode. </font><font style="vertical-align: inherit;">Craftsmen found an </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">undocumented way</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">switch the output to a new line of text every two lines of pixels, i.e. output from each character only the top two lines of pixels. In the resulting 100-line ‚Äúhalf-text‚Äù mode, all 16 KB of video memory is used, and the image is 16-color with a resolution of 640x200 pixels. But in comparison with graphic modes, in semi-text there are quite strict restrictions: firstly, in each familiarity of 8x2 pixels, only two different colors can be used; secondly, the sequence of "main" and "background" pixels in each familiarity should correspond to the two upper lines of one of 256 characters, flashed in the CGA ROM. Even with these limitations, combining the inconvenience of pixel art and text pseudo-graphics, the wizards manage to create incredible 16-color drawings:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ru/pn/aq/rupnaqsvvd1ow32ershfnireyps.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(In the article about 1024 colors, only a quarter of this picture is shown, but </font><font style="vertical-align: inherit;">its full version </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">was published</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> separately </font><font style="vertical-align: inherit;">- directly in the form of a video memory dump.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Without a 100-line hack - i.e. if the matrix of each character was completely rendered, the middle part of the picture would look like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qv/_m/sd/qv_msdu6s7zstjyy1okfol82pfa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the right is a character table stitched in ROM, where the top two lines of each character available for use in semi-text mode are highlighted in yellow. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For the first time, Macrocom decided to combine a 100-line hack and text pseudo-graphics, releasing the game "ICON: The Quest for the Ring" in 1984 with a resolution of 320x200x4bpp that seemed incredible for CGA. However, even </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">static screensavers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Macrocom was drawn much worse than VileR; and during the game the graphics were used even more primitive. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/4ec/327/311/4ec32731145671ae64239c532ff955fc.png" width="320"><img src="https://habrastorage.org/getpro/habr/post_images/b49/0e5/fa4/b490e5fa44c36f0d3ac8725dccbc913b.png" width="320"><br>
<img src="https://habrastorage.org/getpro/habr/post_images/7b3/604/93c/7b360493ceb48edb52391062bcd041be.png" width="320"><img src="https://habrastorage.org/getpro/habr/post_images/8b4/07b/5cf/8b407b5cf24b13cb284f5460dad5eb50.png" width="320"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(The paradox is that although this is a text mode, displaying text in it is very nontrivial: you have to collect each character from the ‚Äúscraps‚Äù of firmware in ROM.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another significant limitation of the semi-text mode is that the image on the composite monitor is blurred to a rather ugly appearance . For example, a VileR drawing would look like this:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qm/dn/bh/qmdnbhb7etr_sgbgqwffaxu98du.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But you can benefit from this blurring - to generate a huge number of artifact colors in semi-text mode! </font><font style="vertical-align: inherit;">As explained in the previous section, any repeating sequence of pixels with a period of 8 subpixels turns into a solid artifact color </font><font style="vertical-align: inherit;">half the character width in 80-column mode. </font><font style="vertical-align: inherit;">This means that in semi-text mode - when both the main and background colors for each character can be selected arbitrarily from 16 standard colors - to create artifact colors you need characters that have</font></font><img src="https://habrastorage.org/webt/_o/5m/ko/_o5mkohwymw4gkcjxkjyqp_c6by.png" align="right"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the top two rows of pixels are the same;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the left and right halves of these two lines are the same.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CGA ROM found characters suitable for two periodic sequences - </font></font><code>1100</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>0110</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. The first sequence allows you to get artifact colors corresponding to any two repeating pixels in 320x200 mode, i.e. any colors from the rows </font></font><code>0Axx</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in the full table; the second is the colors from the squares No. 6 and No. 9 in the lines </font></font><code>1A0x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, when the sequence </font></font><code>0110</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is displayed with colored symbols on a black background or black symbols on a colored background, respectively. In this case, the actual resolution is 80x100: the minimum area for which you can set the color corresponds to the "trimmed" familiarity.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, how many artifact colors can be displayed in semi-text mode at the same time? All combinations of 16 primary colors, 16 background colors, and two matching characters are available, so the author of this trick exclaims: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äú512 colors! Of course, there are actually fewer of them, there are duplicates and very slightly different shades. ‚Äù</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When the main and background colors coincide, it is obvious that with any symbol the result will be the same, therefore, at the digital output we have 496 different periodic sequences of eight pixels. Converting this output to composite leads to the fact that some sequences turn into the same video signal; for example, </font></font><code>0110</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gray on black, gray on purple, and light green on purple - turn into the same dark lilac shade:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ok/sj/zr/oksjzrrhed3bdzqr76q17sia1c0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compared to the full table, here the squares are doubled for clarity, which allowed us to sign the value of each strip inside the squares directly on the diagram. It can be seen that the sequence </font></font><code>0110</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">completely cuts off the high level of the magenta background, so that the background becomes indistinguishable from black. Green color differs in phase from magenta by 180 ¬∞, so this sequence cuts off a high level of green characters in the same way, and light green characters become indistinguishable from gray ones. On </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the color chart</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the article about 1024 colors, you can see that lines No. 0 and No. 5, corresponding to the black and purple background, are almost indistinguishable; columns 8 and 10, corresponding to gray and light green symbols, are also almost indistinguishable. According to cgaart calculations, dark lilac shades corresponding to the three named combinations of parameters coincide completely; with the corrected CGA model, as can be seen at the bottom of the squares on the diagram, these three shades are different. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In addition to these three combinations, the first CGA model equally displays the sequence in </font></font><code>0110</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">black in light magenta and gray; gray in light magenta gives the standard gray, and black in magenta gives the standard black. Finally, as shown on the right side of the diagram, the sequence</font></font><code>1100</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gray on light red gives the same - almost standard - shade of gray as the sequence is </font></font><code>0110</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">light green in light purple. In total, with the first CGA model, 490 different colors are available, but with the corrected one - all 496. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The climax of the article about 1024 colors is the invented reenigne way to display in semi-text mode only one top row of pixels for each character, but repeat this line twice. It's hard to call a ‚Äúnew graphics </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚Äù, Because it requires a constant ‚Äî at the beginning of each scan line ‚Äî change of the CGA settings, which occupies the 8088 processor completely, and leaves no opportunity to do anything else in parallel with displaying a 1024-color image, for example, to prepare an animation. But thanks to this trick, it becomes possible to use sequences </font></font><code>0010</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>0101</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in addition to the two shown above. Using four different symbols, it is possible to obtain 976 different periodic sequences of eight pixels at the digital output. And how many different colors will be obtained after conversion to a composite video signal? I counted 950 with the first CGA, and 973 with a fixed one. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In conclusion, I give a table of all the colors that can be obtained in semi-text mode. VileR has a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">similar table</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but grouped by monitor type, and not by the output sequence of pixels, like mine. </font><font style="vertical-align: inherit;">His table is convenient for an artist working with a specific device; </font><font style="vertical-align: inherit;">mine is for the theorist who wants to understand how this or that color appears on the monitor.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Full table</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/kv/q3/m7/kvq3m7rufndvpzbuv-xkgnxkihc.png"></div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en494306/index.html">No money. Who?</a></li>
<li><a href="../en494308/index.html">What awaits you in Space 2020</a></li>
<li><a href="../en494310/index.html">Issue # 34: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../en494314/index.html">‚ÄúScrolling through boring GOSTs ...‚Äù or requirements analysis when developing an LED driver</a></li>
<li><a href="../en494316/index.html">Pratt Parsers for Dummies</a></li>
<li><a href="../en494322/index.html">Competition: show your home office and win PS4 *</a></li>
<li><a href="../en494332/index.html">Hidden Threat - Vulnerability Analysis Using News Graph</a></li>
<li><a href="../en494334/index.html">Progressive web applications. Guide to action</a></li>
<li><a href="../en494336/index.html">Front-end toolkit: useful utilities and features to speed up development</a></li>
<li><a href="../en494338/index.html">Backups from WAL-G. What is there in 2019? Andrey Borodin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>