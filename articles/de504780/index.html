<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåüèø üò± üíÉüèø NSA, Ghidra und Einh√∂rner üëãüèΩ üßñüèæ üç†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieses Mal wurde das PVS-Studio-Team von Ghidra angezogen, einem gro√üen und b√∂sen Framework f√ºr das Reverse Engineering, mit dem Sie verschiedene Bin√§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NSA, Ghidra und Einh√∂rner</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/504780/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/zb/b9/po/zbb9pocjsbhx8woze4xo8picks0.png" alt="NSA, Ghidra und Einh√∂rner"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Mal wurde das PVS-Studio-Team von Ghidra angezogen, einem gro√üen und b√∂sen Framework f√ºr das Reverse Engineering, mit dem Sie verschiedene Bin√§rdateien analysieren und alle m√∂glichen be√§ngstigenden Dinge damit tun k√∂nnen. </font><font style="vertical-align: inherit;">Das Interessanteste daran ist nicht, dass es kostenlos verwendet werden kann oder gut mit Plugins erweitert werden kann, sondern dass es in der NSA geschrieben und f√ºr alle auf GitHub ver√∂ffentlicht wurde. </font><font style="vertical-align: inherit;">Einerseits scheint die NSA √ºber gen√ºgend Ressourcen zu verf√ºgen, um die Codebasis sauber zu halten. </font><font style="vertical-align: inherit;">Andererseits k√∂nnten neue Mitwirkende, die nicht sehr vertraut damit waren, in letzter Zeit versehentlich unentdeckte Fehler hinzugef√ºgt haben. </font><font style="vertical-align: inherit;">Ausgehend von einer statischen Analyse haben wir uns daher entschlossen, in diesem Projekt nach Schwachstellen zu suchen.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auftakt</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt gab der statische Analysator PVS-Studio im Java-Teil des Ghidra-Projekts 651 Warnungen f√ºr hohe, 904 mittlere und 909 niedrige Warnungen aus ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Release 9.1.2, Commit 687ce7f</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Unter diesen wurde etwa die H√§lfte der hohen und mittleren Reaktionen durch die </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">V6022-</font></a><font style="vertical-align: inherit;"> Diagnose ausgel√∂st.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parameter wird nicht im Hauptteil der Methode verwendet ", was normalerweise nach dem Refactoring angezeigt wird, wenn ein Parameter nicht mehr ben√∂tigt wurde oder eine Funktionalit√§t vor√ºbergehend durch Kommentare deaktiviert wurde. Ein kurzer Blick auf diese Warnungen (es gibt zu viele davon, um sie jeweils als externen Beobachter anzuzeigen ) In diesem Projekt wurde nichts offensichtlich Verd√§chtiges festgestellt. Es ist wahrscheinlich zul√§ssig, dass dieses Projekt diese Diagnose in den Einstellungen des Analysators vor√ºbergehend deaktiviert, um nicht davon abgelenkt zu werden. In der Praxis werden h√§ufig Tippfehler im Namen des Setter- oder Konstruktorparameters angezeigt, und dies sollte im Allgemeinen der Fall sein Ich bin sicher, dass die meisten Leser mindestens einmal auf ein √§hnliches unangenehmes Muster sto√üen:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>{
  <span class="hljs-keyword">private</span> String value;
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">A</span><span class="hljs-params">(String val)</span> </span>{ <span class="hljs-comment">// V6022</span>
    <span class="hljs-keyword">this</span>.value = value;<font></font>
  }<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> value.hashCode(); <span class="hljs-comment">// NullPointerException</span><font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mehr als die H√§lfte der niedrigen Warnungen wurde durch die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diagnose</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">V6008</font></a><font style="vertical-align: inherit;"> Potentielle Null-Dereferenzierung von 'Variablen'" </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ausgegeben.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Beispielsweise wird der Wert </font><i><font style="vertical-align: inherit;">File.getParentFile ()</font></i><font style="vertical-align: inherit;"> h√§ufig </font><font style="vertical-align: inherit;">ohne √úberpr√ºfung auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Null verwendet</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Wenn das Dateiobjekt, f√ºr das diese Methode aufgerufen wurde, ohne absoluten Pfad erstellt wurde, wird </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zur√ºckgegeben </font><font style="vertical-align: inherit;">und das Fehlen einer √úberpr√ºfung kann die Anwendung l√∂schen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traditionell werden wir nur Warnungen auf hohem und mittlerem Niveau analysieren, da der Gro√üteil der tats√§chlichen Fehler darin enthalten ist. Bei der Arbeit mit Analysatorberichten empfehlen wir immer, Warnungen in absteigender Reihenfolge ihrer Zuverl√§ssigkeit zu analysieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als n√§chstes betrachten wir einige vom Analysator angezeigte Fragmente, die mir verd√§chtig oder interessant erschienen. </font><font style="vertical-align: inherit;">Die Codebasis des Projekts erwies sich als beeindruckend gro√ü, und es ist fast unm√∂glich, solche Orte manuell zu finden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 1: fehlerhafte Validierung</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">parseDataTypeTextEntry</span><span class="hljs-params">()</span>
<span class="hljs-keyword">throws</span> InvalidDataTypeException </span>{<font></font>
  ...<font></font>
  <span class="hljs-keyword">try</span> {<font></font>
    newDataType = parser.parse(selectionField.getText(),<font></font>
                               getDataTypeRootForCurrentText());<font></font>
  }<font></font>
  <span class="hljs-keyword">catch</span> (CancelledException e) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">if</span> (newDataType != <span class="hljs-keyword">null</span>) {
    <span class="hljs-keyword">if</span> (maxSize &gt;= <span class="hljs-number">0</span>
        &amp;&amp; newDataType.getLength() &gt; newDataType.getLength()) { <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> InvalidDataTypeException(<span class="hljs-string">"data-type larger than "</span>
                                         + maxSize + <span class="hljs-string">" bytes"</span>);<font></font>
    }<font></font>
    selectionField.setSelectedValue(newDataType);<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Links und rechts vom Operator '&gt;' befinden sich identische Unterausdr√ºcke 'newDataType.getLength ()'. DataTypeSelectionEditor.java data66 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Klasse bietet eine grafische Komponente zur Auswahl eines Datentyps, der die automatische Vervollst√§ndigung unterst√ºtzt. Der Entwickler, der diese Komponente verwendet, kann die maximal zul√§ssige Gr√∂√üe des ausgew√§hlten Datentyps (√ºber das Feld </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maxSize</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><i><font style="vertical-align: inherit;">festlegen</font></i><font style="vertical-align: inherit;"> oder durch Festlegen eines negativen Werts unbegrenzt </font><i><font style="vertical-align: inherit;">festlegen</font></i><font style="vertical-align: inherit;"> . Es wurde angenommen, dass beim Validieren der eingegebenen Daten beim √úberschreiten des Grenzwerts eine Ausnahme ausgel√∂st wird, die dann im Aufrufstapel aufgefangen wird und dem Benutzer eine Nachricht angezeigt wird.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint, dass der Autor der Komponente zum Zeitpunkt des Schreibens dieses Tests abgelenkt war oder vielleicht √ºber den Sinn des Lebens nachgedacht hat, aber am Ende wird die Validierung einfach nicht durchgef√ºhrt, da die Anzahl niemals gr√∂√üer sein kann als sie selbst, und dementsprechend ignorieren wir diesen Zustand. Dies bedeutet, dass diese Komponente ung√ºltige Daten bereitstellen kann. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiterer √§hnlicher Fehler wurde in zwei weiteren Klassen gefunden: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GuidUtil</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewGuid</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GuidUtil</span> </span>{<font></font>
  ...<font></font>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> GuidInfo <span class="hljs-title">parseLine</span><span class="hljs-params">(...)</span> </span>{<font></font>
    ...<font></font>
    <span class="hljs-keyword">long</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-keyword">long</span>[<span class="hljs-number">4</span>];<font></font>
    ...<font></font>
    <span class="hljs-keyword">if</span> (isOK(data)) {
      <span class="hljs-keyword">if</span> (!hasVersion) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> GuidInfo(guidString, name, guidType);<font></font>
      }<font></font>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> VersionedGuidInfo(guidString, version, name, guidType);<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
  }<font></font>
  ...<font></font>
  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOK</span><span class="hljs-params">(<span class="hljs-keyword">long</span>[] data)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; data.length; i++) {
      <span class="hljs-keyword">if</span> ((data[i] != <span class="hljs-number">0</span>) || (data[i] != <span class="hljs-number">0xFFFFFFFFL</span>)) { <span class="hljs-comment">// &lt;=</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">V6007</font></a><font style="vertical-align: inherit;"> Ausdruck 'data [i]! = 0xFFFFFFFFL' ist immer wahr. GuidUtil.java:200 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Schleife </font><font style="vertical-align: inherit;">der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isOK-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">√ºberpr√ºft, ob derselbe Wert nicht zwei verschiedenen Zahlen gleichzeitig entspricht. Wenn ja, wird die GUID sofort als g√ºltig erkannt. Das hei√üt, wird die GUID ung√ºltig nur, wenn die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daten</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Array ist </font><font style="vertical-align: inherit;">leer, und das geschieht nie, da der Wert der entsprechenden Variablen nur einmal vergeben wird - zu Beginn der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parseLine</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">. </font><i><font style="vertical-align: inherit;">IsOK</font></i></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Methodenk√∂rper</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in beiden Klassen stimmt es vollst√§ndig √ºberein, was auf die Idee eines weiteren Kopierens und Einf√ºgens von falschem Code hindeutet. </font><font style="vertical-align: inherit;">Was genau der Autor √ºberpr√ºfen wollte, wei√ü ich nicht genau, aber ich kann davon ausgehen, dass diese Methode wie folgt behoben werden sollte:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOK</span><span class="hljs-params">(<span class="hljs-keyword">long</span>[] data)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; data.length; i++) {
    <span class="hljs-keyword">if</span> ((data[i] == <span class="hljs-number">0</span>) || (data[i] == <span class="hljs-number">0xFFFFFFFFL</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
}</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 2: Ausnahmen ausblenden</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">putByte</span><span class="hljs-params">(<span class="hljs-keyword">long</span> offsetInMemBlock, <span class="hljs-keyword">byte</span> b)</span>
<span class="hljs-keyword">throws</span> MemoryAccessException, IOException </span>{
  <span class="hljs-keyword">long</span> offsetInSubBlock = offsetInMemBlock - subBlockOffset;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (ioPending) {
      <span class="hljs-keyword">new</span> MemoryAccessException(<span class="hljs-string">"Cyclic Access"</span>); <span class="hljs-comment">// &lt;=</span><font></font>
    }<font></font>
    ioPending = <span class="hljs-keyword">true</span>;<font></font>
    doPutByte(mappedAddress.addNoWrap(offsetInSubBlock / <span class="hljs-number">8</span>),<font></font>
              (<span class="hljs-keyword">int</span>) (offsetInSubBlock % <span class="hljs-number">8</span>), b);<font></font>
  }<font></font>
  <span class="hljs-keyword">catch</span> (AddressOverflowException e) {
    <span class="hljs-keyword">new</span> MemoryAccessException(<span class="hljs-string">"No memory at address"</span>); <span class="hljs-comment">// &lt;=</span><font></font>
  }<font></font>
  <span class="hljs-keyword">finally</span> {<font></font>
    ioPending = <span class="hljs-keyword">false</span>;<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6006</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Das Objekt wurde erstellt, wird jedoch nicht verwendet. Das Schl√ºsselwort 'throw' k√∂nnte fehlen: 'new MemoryAccessException ("Cyclic Access")'. BitMappedSubMemoryBlock.java:99 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Ausnahmeobjekte selbst tun, wie Sie wissen, nichts (oder sollten zumindest nichts tun). Fast immer werden ihre neuen Instanzen durch den </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wurf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> geworfen </font><font style="vertical-align: inherit;">, in einigen seltenen F√§llen - irgendwo √ºbertragen oder vielleicht in einer Sammlung abgelegt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Klasse, die diese Methode enth√§lt, ist ein Wrapper √ºber einem Speicherblock, der das Lesen und Schreiben von Daten erm√∂glicht. Hier kann aufgrund der Tatsache, dass keine Ausnahmen ausgel√∂st werden, die auferlegte Einschr√§nkung des Zugriffs auf den aktuellen Speicherblock mit dem </font><i><font style="vertical-align: inherit;">ioPending-</font></i><font style="vertical-align: inherit;"> Flag </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">verletzt werden</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au√üerdem wird eine </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AddressOverflowException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ignoriert </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Somit k√∂nnen die Daten stillschweigend besch√§digt werden, und anstatt explizit einen Fehler an einer bestimmten Stelle anzuzeigen, erh√§lt der Entwickler seltsame Artefakte, die vom Debugger analysiert werden m√ºssen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gab acht dieser verlorenen Ausnahmen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BitMappedSubMemoryBlock.java: Zeilen 77, 99, 106, 122</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ByteMappedSubMemoryBlock.java: Zeilen 52, 73, 92, 114</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist charakteristisch, dass es in denselben Dateien √§u√üerst √§hnliche Methoden gibt, bei denen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">throw</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vorhanden ist. </font><font style="vertical-align: inherit;">H√∂chstwahrscheinlich wurde eine Methode urspr√ºnglich √§hnlich wie das obige Fragment geschrieben, danach wurde sie mehrmals kopiert, fand irgendwie einen Fehler und korrigierte ihn an den Stellen, an die sie sich erinnern konnten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 3: Minenfeld</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">processSelection</span><span class="hljs-params">(OptionsTreeNode selectedNode)</span> </span>{
  <span class="hljs-keyword">if</span> (selectedNode == <span class="hljs-keyword">null</span>) {<font></font>
    setViewPanel(defaultPanel, selectedNode); <span class="hljs-comment">// &lt;=</span>
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setViewPanel</span><span class="hljs-params">(JComponent component, OptionsTreeNode selectedNode)</span> </span>{<font></font>
  ...<font></font>
  setHelpLocation(component, selectedNode);<font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setHelpLocation</span><span class="hljs-params">(JComponent component, OptionsTreeNode node)</span> </span>{<font></font>
  Options options = node.getOptions();<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warnung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">V6008</font></a><font style="vertical-align: inherit;"> Null-Dereferenzierung von 'selectedNode' in der Funktion 'setViewPanel'. OptionsPanel.java:266 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Analysator hat ein bisschen gelogen - im Moment f√ºhrt der Aufruf der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processSelection-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">nicht zu einer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullPointerException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da diese Methode nur zweimal aufgerufen wird und </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectedNode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vor dem Aufruf </font><font style="vertical-align: inherit;">explizit auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √ºberpr√ºft wird </font><font style="vertical-align: inherit;">. Dies sollte nicht durchgef√ºhrt werden, da ein anderer Entwickler m√∂glicherweise erkennt, dass die Methode den Fall </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectedNode == null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> explizit behandelt </font><font style="vertical-align: inherit;">, und entscheidet, dass dies ein g√ºltiger Wert ist, der dann zum Absturz der Anwendung f√ºhrt. Solche √úberraschungen sind gerade in offenen Projekten besonders gef√§hrlich, da Leute, die die Codebasis nicht kennen, gr√ºndlich daran teilnehmen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen muss ich sagen, dass die gesamte </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processSelection-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">ziemlich seltsam aussieht. </font><font style="vertical-align: inherit;">Es ist wahrscheinlich, dass dies ein Fehler beim Kopieren und Einf√ºgen ist, da bei derselben Methode ein if-Block mit demselben Text zweimal h√§ufiger auftritt, wenn auch unter unterschiedlichen Bedingungen. </font><font style="vertical-align: inherit;">Zu diesem Zeitpunkt ist der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selectedNode jedoch</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht mehr </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , und die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aufrufkette setViewPanel-setHelpLocation</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºhrt nicht zu einer </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullPointerException</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 4: Automatische Vervollst√§ndigung f√ºr das B√∂se</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span>[] UNSUPPORTED_OPCODES_LIST = { ... };
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Set&lt;Integer&gt; UNSUPPORTED_OPCODES = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();<font></font>
<font></font>
<span class="hljs-keyword">static</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> opcode : UNSUPPORTED_OPCODES) {<font></font>
    UNSUPPORTED_OPCODES.add(opcode);<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6053</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Sammlung wird w√§hrend der Iteration ge√§ndert. ConcurrentModificationException kann auftreten. DWARFExpressionOpCodes.java:205 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In diesem Fall hat der Analysator erneut ein wenig gelogen - die Ausnahme wird nicht ausgel√∂st, da die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Auflistung UNSUPPORTED_OPCODES</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> immer leer ist und die Schleife einfach nicht ausgef√ºhrt wird. Au√üerdem ist die Sammlung eine Vielzahl, und das Hinzuf√ºgen eines bereits vorhandenen Elements √§ndert nichts daran. H√∂chstwahrscheinlich hat der Autor </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f√ºr jeden eingetragen</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">den Namen der Sammlung durch automatische Vervollst√§ndigung und bemerkte nicht, dass das falsche Feld vorgeschlagen wurde. </font><font style="vertical-align: inherit;">Eine √Ñnderung der Sammlung w√§hrend der Iteration ist nicht m√∂glich, aber unter guten Umst√§nden, wie in diesem Fall, kann die Anwendung nicht fallen. </font><font style="vertical-align: inherit;">Hier hat dieser Tippfehler einen indirekten Effekt: Der Computer, der DWARF-Dateien analysiert, verwendet diese Sammlung, um die Analyse zu stoppen, wenn nicht unterst√ºtzte Opcodes gefunden werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ab Java 9 lohnt es sich, die Factory-Methoden der Standardbibliothek f√ºr konstante Sammlungen zu verwenden: Beispielsweise ist </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Set.of (T ... elements)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nicht nur wesentlich praktischer, sondern macht die erstellte Sammlung auch sofort unver√§nderlich, was die Zuverl√§ssigkeit des Codes erh√∂ht.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 5: da ist alles</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setValueAt</span><span class="hljs-params">(Object aValue, <span class="hljs-keyword">int</span> row, <span class="hljs-keyword">int</span> column)</span> </span>{<font></font>
  ...<font></font>
  <span class="hljs-keyword">int</span> index = indexOf(newName);
  <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {                  <span class="hljs-comment">// &lt;=</span><font></font>
    Window window = tool.getActiveWindow();<font></font>
    Msg.showInfo(getClass(), window, <span class="hljs-string">"Duplicate Name"</span>,
                 <span class="hljs-string">"Name already exists: "</span> + newName);
    <span class="hljs-keyword">return</span>;<font></font>
  }<font></font>
<font></font>
  ExternalPath path = paths.get(row); <span class="hljs-comment">// &lt;=</span><font></font>
  ...<font></font>
}<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-title">indexOf</span><span class="hljs-params">(String name)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; paths.size(); i++) {<font></font>
    ExternalPath path = paths.get(i);<font></font>
    <span class="hljs-keyword">if</span> (path.getName().equals(name)) {
      <span class="hljs-keyword">return</span> i;<font></font>
    }<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio-Warnungen:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6007 Der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ausdruck 'index&gt; = 0' ist immer wahr. </font><font style="vertical-align: inherit;">ExternalNamesTableModel.java:105</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">V6019</a> Unreachable code detected. It is possible that an error is present. ExternalNamesTableModel.java:109</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Autor dar√ºber nachdachte, und in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><i><font style="vertical-align: inherit;">,</font></i><font style="vertical-align: inherit;"> anstelle von ‚ÄûIndex‚Äú -1 f√ºr einen unbekannten Wert 0 zur√ºck - der Index des ersten Elements der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pfad</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sammlung </font><font style="vertical-align: inherit;">. Auch wenn die Sammlung leer ist. Oder vielleicht wurde die Methode generiert, aber vergessen, den Standardr√ºckgabewert zu √§ndern. Infolgedessen </font><font style="vertical-align: inherit;">verwirft </font><font style="vertical-align: inherit;">die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode </font><font style="vertical-align: inherit;">alle an sie √ºbergebenen Werte und zeigt dem Benutzer den Fehler "Name existiert bereits" an, auch wenn kein Name vorhanden ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist nirgendwo anders, und sein Wert wird nur ben√∂tigt , </font><font style="vertical-align: inherit;">um festzustellen , </font><font style="vertical-align: inherit;">ob das Element Sie besteht suchen verwendet. Vielleicht schreiben Sie anstelle einer separaten Methode </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f√ºr jede</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> direkt in </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und geben Sie </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return zur√ºck</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf einem passenden Gegenstand anstelle von Spielen mit Indizes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hinweis: Ich konnte den angeblichen Fehler nicht reproduzieren. </font><font style="vertical-align: inherit;">Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setValueAt-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode wird </font><i><font style="vertical-align: inherit;">wahrscheinlich</font></i><font style="vertical-align: inherit;"> nicht mehr verwendet oder nur unter bestimmten Bedingungen aufgerufen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 6: Schweigen</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> Map&lt;Character, String&gt; DELIMITER_NAME_MAP = <span class="hljs-keyword">new</span> HashMap&lt;&gt;(<span class="hljs-number">20</span>);
<span class="hljs-comment">// Any non-alphanumeric char can be used as a delimiter.</span>
<span class="hljs-keyword">static</span> {<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">' '</span>, <span class="hljs-string">"Space"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'~'</span>, <span class="hljs-string">"Tilde"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'`'</span>, <span class="hljs-string">"Back quote"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'@'</span>, <span class="hljs-string">"Exclamation point"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'@'</span>, <span class="hljs-string">"At sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'#'</span>, <span class="hljs-string">"Pound sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'$'</span>, <span class="hljs-string">"Dollar sign"</span>);<font></font>
  DELIMITER_NAME_MAP.put(<span class="hljs-string">'%'</span>, <span class="hljs-string">"Percent sign"</span>);<font></font>
  ...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6033</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ein Element mit demselben Schl√ºssel '@' wurde bereits hinzugef√ºgt. FilterOptions.java:45 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ghidra unterst√ºtzt das Filtern von Daten in verschiedenen Kontexten: Sie k√∂nnen beispielsweise die Liste der Projektdateien nach Namen filtern. Au√üerdem wird das Filtern nach mehreren Schl√ºsselw√∂rtern gleichzeitig implementiert: '.java, .c' zeigt im aktivierten 'ODER'-Modus alle Dateien an, deren Name entweder' .java 'oder' .c 'enth√§lt. Es versteht sich, dass jedes Sonderzeichen als Worttrennzeichen verwendet werden kann (in den Filtereinstellungen ist ein bestimmtes Trennzeichen ausgew√§hlt), aber in Wirklichkeit war das Ausrufezeichen nicht verf√ºgbar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In solchen Initialisierungsbl√§ttern ist das Versiegeln sehr einfach, da sie h√§ufig durch Kopieren und Einf√ºgen geschrieben werden. Wenn Sie sich einen solchen Code ansehen, verschwimmen Ihre Augen schnell. </font><font style="vertical-align: inherit;">Und wenn der Tippfehler nicht in zwei benachbarten Zeilen war, dann wird er von Hand mit ziemlicher Sicherheit niemand sehen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 7: Der Rest der Teilung ist immer 0</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFactorys</span><span class="hljs-params">(FieldFactory[] fieldFactorys,
                 DataFormatModel dataModel, <span class="hljs-keyword">int</span> margin)</span> </span>{<font></font>
  factorys = <span class="hljs-keyword">new</span> FieldFactory[fieldFactorys.length];<font></font>
<font></font>
  <span class="hljs-keyword">int</span> x = margin;
  <span class="hljs-keyword">int</span> defaultGroupSizeSpace = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; factorys.length; i++) {<font></font>
    factorys[i] = fieldFactorys[i];<font></font>
    factorys[i].setStartX(x);<font></font>
    x += factorys[i].getWidth();<font></font>
    <span class="hljs-comment">// add in space between groups</span>
    <span class="hljs-keyword">if</span> (((i + <span class="hljs-number">1</span>) % defaultGroupSizeSpace) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// &lt;=</span><font></font>
      x += margin * dataModel.getUnitDelimiterSize();<font></font>
    }<font></font>
  }<font></font>
  width = x - margin * dataModel.getUnitDelimiterSize() + margin;<font></font>
  layoutChanged();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio-Warnungen:</font></font><br>
<br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6007</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ausdruck '((i + 1)% defaultGroupSizeSpace) == 0' ist immer wahr. </font><font style="vertical-align: inherit;">ByteViewerLayoutModel.java:66</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6048</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dieser Ausdruck kann vereinfacht werden. </font><font style="vertical-align: inherit;">Der Operand 'defaultGroupSizeSpace' in der Operation entspricht 1. ByteViewerLayoutModel.java:66</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Hex-Byte-Viewer unterst√ºtzt die Auswahl der Gr√∂√üe der angezeigten Gruppen: Sie k√∂nnen beispielsweise die Ausgabe im Format 'ffff ffff' oder 'ff ff ff ff' konfigurieren. Die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setFactorys-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Methode ist f√ºr den Speicherort dieser Gruppen in der Benutzeroberfl√§che verantwortlich </font><font style="vertical-align: inherit;">. Trotz der Tatsache, dass Anpassung und Anzeige korrekt funktionieren, sieht der Zyklus bei dieser Methode √§u√üerst verd√§chtig aus: Der Rest der Division durch Eins ist immer Null, was bedeutet, dass die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Koordinate </font><font style="vertical-align: inherit;">bei jeder Iteration zunimmt. Suspicion f√ºgt Eigenschaften und Verf√ºgbarkeit </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GRUPPEN</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in Einstellung </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Datamodel</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verbleibender M√ºll nach dem Refactoring? Oder m√∂glicherweise gingen die Berechnungen der </font><i><font style="vertical-align: inherit;">defaultGroupSizeSpace-</font></i><font style="vertical-align: inherit;"> Variablen verloren</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">In jedem Fall hat ein Versuch, seinen Wert durch </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dataModel.getGroupSize ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu ersetzen, </font><font style="vertical-align: inherit;">das Layout </font><i><font style="vertical-align: inherit;">besch√§digt</font></i><font style="vertical-align: inherit;"> , und m√∂glicherweise kann nur der Autor dieses Codes eine eindeutige Antwort geben.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fragment 8: gebrochene Validierung, Teil 2</font></font></h2><br>
<pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">parseArrayDimensions</span><span class="hljs-params">(String datatype,
                                    List&lt;Integer&gt; arrayDimensions)</span> </span>{<font></font>
  String dataTypeName = datatype;<font></font>
  <span class="hljs-keyword">boolean</span> zeroLengthArray = <span class="hljs-keyword">false</span>;
  <span class="hljs-keyword">while</span> (dataTypeName.endsWith(<span class="hljs-string">"]"</span>)) {
    <span class="hljs-keyword">if</span> (zeroLengthArray) {                   <span class="hljs-comment">// &lt;=</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// only last dimension may be 0</span><font></font>
    }<font></font>
    <span class="hljs-keyword">int</span> rBracketPos = dataTypeName.lastIndexOf(<span class="hljs-string">']'</span>);
    <span class="hljs-keyword">int</span> lBracketPos = dataTypeName.lastIndexOf(<span class="hljs-string">'['</span>);
    <span class="hljs-keyword">if</span> (lBracketPos &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">int</span> dimension;
    <span class="hljs-keyword">try</span> {<font></font>
      dimension = Integer.parseInt(dataTypeName.substring(lBracketPos + <span class="hljs-number">1</span>,<font></font>
                                                          rBracketPos));<font></font>
      <span class="hljs-keyword">if</span> (dimension &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// invalid dimension</span><font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">catch</span> (NumberFormatException e) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
    }<font></font>
    dataTypeName = dataTypeName.substring(<span class="hljs-number">0</span>, lBracketPos).trim();<font></font>
    arrayDimensions.add(dimension);<font></font>
  }<font></font>
  <span class="hljs-keyword">return</span> dataTypeName;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PVS-Studio Warnung: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6007 Der</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ausdruck 'zeroLengthArray' ist immer falsch. PdbDataTypeParser.java:278 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diese Methode analysiert die Dimension eines mehrdimensionalen Arrays und gibt entweder den nach dem Parsen verbleibenden Text oder </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f√ºr ung√ºltige Daten zur√ºck. Ein Kommentar neben einer der Validierungspr√ºfungen besagt, dass nur die letzte Lesegr√∂√üe Null sein kann. Die Analyse geht von rechts nach links, daher versteht es sich, dass '[0] [1] [2]' ein g√ºltiger Eingabetext ist und '[2] [1] [0]' nicht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber Problem: Niemand hat die √úberpr√ºfung hinzugef√ºgt, dass die n√§chste Gr√∂√üe Null ist, und der Parser isst ung√ºltige Daten ohne unn√∂tige Fragen. Sie sollten den try-Block wahrscheinlich wie folgt reparieren:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">try</span> {<font></font>
  dimension = Integer.parseInt(dataTypeName.substring(lBracketPos + <span class="hljs-number">1</span>,<font></font>
                                                      rBracketPos));<font></font>
  <span class="hljs-keyword">if</span> (dimension &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>; <span class="hljs-comment">// invalid dimension</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dimension == <span class="hljs-number">0</span>) {<font></font>
    zeroLengthArray = <span class="hljs-keyword">true</span>;<font></font>
  }<font></font>
}<font></font>
<span class="hljs-keyword">catch</span> (NumberFormatException e) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nat√ºrlich besteht die M√∂glichkeit, dass sich dieses Kriterium der G√ºltigkeit im Laufe der Zeit als unn√∂tig herausstellte oder der Kommentar des Autors eine andere Bedeutung hat und die erste gelesene Dimension √ºberpr√ºft werden muss. </font><font style="vertical-align: inherit;">In jedem Fall ist die Datenvalidierung ein kritischer Bestandteil jeder Anwendung, die mit voller Verantwortung √ºbernommen werden muss. </font><font style="vertical-align: inherit;">Fehler darin k√∂nnen zu harmlosen Abst√ºrzen der Anwendung sowie zu Sicherheitsl√ºcken, Datenlecks, Datenbesch√§digung oder -verlust f√ºhren (z. B. wenn Sie die SQL-Injection w√§hrend der Abfrage√ºberpr√ºfung √ºberspringen).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein bisschen √ºber den Rest der Warnungen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Leser kann feststellen, dass viele Warnungen ausgegeben wurden, aber nur wenige ber√ºcksichtigt wurden. Nicht sehr ordentlich abgestimmtes Cloc im Projekt z√§hlte ungef√§hr 1,25 Millionen Zeilen Java-Code (nicht leer und keine Kommentare). Tatsache ist, dass fast alle Warnungen sehr √§hnlich sind: Hier haben sie vergessen, auf </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Null</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu pr√ºfen </font><font style="vertical-align: inherit;">, sie haben den nicht verwendeten Legacy-Code dort nicht gel√∂scht. Ich m√∂chte den Leser nicht wirklich langweilen, indem ich dasselbe auff√ºhre, und ich habe einen Teil solcher F√§lle am Anfang des Artikels erw√§hnt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein weiteres Beispiel sind die f√ºnfzig Warnungen " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V6009-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Funktion erh√§lt ein ungerades Argument" im Zusammenhang mit der ungenauen Verwendung der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teilzeichenfolgenmethode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(CParserUtils.java:280, ComplexName.java:48 und andere), um den Rest der Zeichenfolge nach einem Trennzeichen abzurufen. </font><font style="vertical-align: inherit;">Entwickler hoffen oft, dass dieses Trennzeichen in der Zeichenfolge vorhanden ist, und vergessen, dass </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">indexOf</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> andernfalls </font><font style="vertical-align: inherit;">-1 </font><i><font style="vertical-align: inherit;">zur√ºckgibt</font></i><font style="vertical-align: inherit;"> , was ein falscher Wert f√ºr die </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teilzeichenfolge ist</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wenn die Daten validiert wurden oder nicht von au√üen empfangen wurden, verringert sich nat√ºrlich die Wahrscheinlichkeit eines Absturzes der Anwendung erheblich. </font><font style="vertical-align: inherit;">Im Allgemeinen sind dies jedoch potenziell gef√§hrliche Orte, die wir beseitigen m√∂chten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen war Ghidra mit der Qualit√§t des Codes zufrieden - es sind keine besonderen Albtr√§ume erkennbar. </font><font style="vertical-align: inherit;">Der Code ist gut formatiert und hat einen sehr konsistenten Stil: In den meisten F√§llen erhalten Variablen, Methoden und alles andere eindeutige Namen, es werden erkl√§rende Kommentare gefunden, es gibt eine Vielzahl von Tests. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nat√ºrlich gab es keine Probleme, darunter:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toter Code, der h√∂chstwahrscheinlich nach zahlreichen Umgestaltungen erhalten blieb;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Viele Javadocs sind hoffnungslos veraltet und weisen beispielsweise auf nicht vorhandene Parameter hin.</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei Verwendung von IntelliJ IDEA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> besteht keine M√∂glichkeit einer bequemen Entwicklung </font><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein modulares System, das auf Reflexion basiert, erschwert das Navigieren in einem Projekt und das Auffinden von Abh√§ngigkeiten zwischen Komponenten erheblich.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bitte vernachl√§ssigen Sie die Entwicklertools nicht. </font><font style="vertical-align: inherit;">Statische Analysen sind wie Sicherheitsgurte kein Allheilmittel, tragen jedoch dazu bei, einige Katastrophen vor der Freigabe zu verhindern. </font><font style="vertical-align: inherit;">Und niemand benutzt gerne die angemeldete Software. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Weitere bew√§hrte Projekte finden Sie in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unserem Blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Au√üerdem verf√ºgen wir √ºber eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testlizenz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und verschiedene </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optionen f√ºr die</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwendung des Analyseger√§ts, ohne daf√ºr bezahlen zu m√ºssen.</font></font><br>
<br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a></p><div style="text-align:center;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/eb2/f9c/3bb/eb2f9c3bb5f32f39239298d36431961c.png"></a></div><p></p><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie diesen Artikel einem englischsprachigen Publikum zug√§nglich machen m√∂chten, verwenden Sie bitte den Link zur √úbersetzung: Nikita Lazeba. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NSA, Ghidra und Einh√∂rner</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de504768/index.html">Analystenpraktikum in Yandex: Analyse von Testaufgaben</a></li>
<li><a href="../de504770/index.html">Linux-Gaming-Distributionen</a></li>
<li><a href="../de504772/index.html">Digitale Veranstaltungen in Moskau vom 1. bis 7. Juni</a></li>
<li><a href="../de504774/index.html">Befragung von IT-F√ºhrungskr√§ften zu sich √§ndernden Anforderungen an IT-Services</a></li>
<li><a href="../de504776/index.html">Schreiben Sie eine Spiel-Engine in Ihrem ersten Jahr: einfach! (Fast)</a></li>
<li><a href="../de504784/index.html">Das AddTrust-Stammzertifikat von Sectigo lief am 30. Mai 2020 ab, was zu Problemen bei OpenSSL 1.0.x- und GnuTLS-Clients f√ºhrte</a></li>
<li><a href="../de504786/index.html">Alles, was Sie √ºber Caching wissen m√ºssen</a></li>
<li><a href="../de504790/index.html">Eine Auswahl von Artikeln zum maschinellen Lernen: F√§lle, Leitf√§den und Studien f√ºr Mai 2020</a></li>
<li><a href="../de504792/index.html">Dienstpension. Wie NSPK seinen Dienstraum vor einem Coronavirus rettete</a></li>
<li><a href="../de504796/index.html">Udalenka ist cool. Vielleicht f√ºr immer bleiben?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>