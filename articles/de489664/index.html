<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤽 🍵 😱 NPS, Förderer, automatisches Rechnen und wieder ... Coroutinen 🐛 🧓🏼 💆🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Wieder über Coroutinen
 In meinem vorherigen Artikel, lieber Habr, habe ich nur die Probleme des Wissens über moderne Programmierung angesprochen. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>NPS, Förderer, automatisches Rechnen und wieder ... Coroutinen</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489664/"><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Wieder über Coroutinen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In meinem vorherigen Artikel, lieber Habr, habe ich nur die Probleme des Wissens über moderne Programmierung angesprochen. Die anschließende Diskussion bestätigte nur die spontanen Befürchtungen: Die berüchtigten „theoretischen Grundlagen“ wurden sofort zu einer Quelle von Meinungsverschiedenheiten. Die Tatsache, dass sie (Meinungsverschiedenheiten) möglicherweise nicht existieren oder von anderer Natur sind, scheint den Großteil der "echten" Programmierer nicht zu stören. Darüber hinaus ist es vielleicht nicht besonders interessant, weil Programmierer werden hauptsächlich durch ein Interesse stimuliert - Code, Code und nur Code. Na ja, fast "wie der Arzt es verschrieben hat" [1] ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als ich in meinem Artikel und in meinen Kommentaren auf das Thema Corutin einging, träumte ich überhaupt nicht davon, wie sehr sie im „aktuellen“ Trend sind. Erstaunt jedoch die "Backing Tracks" meiner Kommentare mit oder ohne. Für was, sagen sie, Programmierer? Es scheint mir jedoch, dass alles klar wurde, nachdem ich den Artikel über das neu genehmigte C ++ 20 und die Aussichten für seine weitere Entwicklung gelesen hatte [2]. Zu meinem Erstaunen stellte sich heraus, dass Coroutinen an der Spitze der gegenwärtigen und zukünftigen Innovationen meines geliebten C ++ stehen (siehe auch die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CppCoro-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bibliothek </font><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, sag mir, ist es möglich, eine Stirn ernst und / oder ruhig zu nehmen, die sich anscheinend als jemand vorstellt? Schlagen Sie, was heißt! :(</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Hintergrund meiner Bekanntschaft mit Coroutinen (ich werde sie auf die alte Weise alle gleich nennen) ist wie folgt. Es bestand die Notwendigkeit einer Parallelisierung, aber etwas Passendes war nicht. Ich musste erfinden und die verfügbare Literatur studieren. Infolgedessen wurden Coroutinen sofort und Threads später abgelehnt. Der Grund dafür ist, dass beide strukturelle Methoden zur Parallelisierung von Programmen und keine Rechenmodelle sind. Aber das wollte ich nicht.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Beschreibung dessen, worauf ich schließlich gekommen bin, ist in meinen vorherigen Artikeln über Habré enthalten. Dieses Gespräch ist noch lange nicht vorbei, aber wie wurden Coroutinen vorerst in Erinnerung gerufen, da sie bereits Gegenstand einer so hitzigen Diskussion geworden sind? Das einzige sind die „Punkte“ beim Stoppen / Umschalten von Prozessen. Im Gegensatz zu Threads ermöglichten sie die Vorhersage des Verhaltens von Prozessen, die den Parallelbetrieb simulieren. Theoretisch reduzierte dies auch die Systemverluste für die Implementierung von Parallelität. Aber insgesamt hat sich an all dem im Grunde nichts geändert. Und da die „Punkte“ einfach durch die Zustände des Automatenprogrammiermodells (AP) nachgeahmt wurden, war meine Bekanntschaft mit Coroutinen für sieben abgeschlossen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber ich konnte nicht davon ausgehen, dass die Inkarnation von Coroutinen, jetzt Coroutinen genannt, mich so überholen würde. Daraus und aus meinen möglicherweise ungerechtfertigten „Angriffen“ auf sie, für die ich mich bei den Apologeten von Corutin absolut aufrichtig entschuldige. Wahrscheinlich beeilt. Trotzdem hatten die neu entdeckten Umstände keinen Einfluss auf meine Einstellung zu Coroutinen. Für den neuen Code habe ich nie etwas grundlegend Neues gesehen, um zu ihren Gunsten zu argumentieren. Ich möchte jedoch darauf hinweisen, dass Coroutinen mir dennoch näher und klarer sind als Threads, weil enthalten, wie oben erwähnt, ein Analogon der Menge der internen Zustände endlicher Automaten (CA).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hör jedoch auf zu bereuen. </font><font style="vertical-align: inherit;">Kehren wir zu Automaten zurück, die das „Coroutine-Thema“ vollständig abdecken. </font><font style="vertical-align: inherit;">Als nächstes werde ich die Fähigkeiten des AP vorstellen, die mit der Modellierung paralleler Modelle verbunden sind, die in Theorie und Praxis recht bekannt sind - abgestufte parallele und Pipeline-Modelle von Algorithmen. </font><font style="vertical-align: inherit;">Ihre automatische Lösung sieht meiner Meinung nach visueller, natürlicher und einfacher aus, als sie auf denselben Coroutinen basieren würde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Tier-Parallel- und Pipeline-Formen von Algorithmen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Angenommen, Sie müssen den Ausdruck berechnen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
y = (((a + b) * (c + d)) + ((e * f) + (q + h))). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lassen Sie auch die Ausführungszeit der Operation definiert werden, definiert in willkürlichen Einheiten diskreter Zeit - Maßnahmen, bei denen die Addition 1 Maßnahme und die Multiplikation 5 Maßnahmen umfasst. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Basierend auf der Logik der Berechnung des Ausdrucks, der Ausführungszeit der Operationen und der Anzahl von Zwischenvariablen kann in einer Ausführungsform die Verteilung von Operationen nach Ebenen und die Anzahl von Ebenen selbst beispielsweise wie folgt aussehen: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
t1 = a + b; t2 = c + d; t3 = e * f; t4 = q + h; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tier0: t1; t2; t3; t4; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tier1: t5 = t1 * t2; t6 = t3 + t4; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tier2: t7 = t5 + t6;</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grafisch ist dies in Abb. 2 dargestellt. 1 zeigt zwei Optionen für die Verteilung von Berechnungen in Ebenen und die festgelegte Berechnungszeit in Ticks. Ihr Vergleich zeigt, dass im allgemeinen Fall eine Verringerung der Anzahl der Ebenen nicht automatisch eine Verringerung der Rechenzeit bedeutet. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mn/z8/3v/mnz83viq523btod82i4vgotp5yi.jpeg" alt="Bild"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. 1. Tierparallele Form der Berechnung eines Ausdrucks.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Es kann jedoch eine weitere Option in Betracht gezogen werden, die bereits durch eine Vielzahl von tierparallelen Formen dargestellt wird, die ein einzelnes Problem lösen. In Abb. Abbildung 2 zeigt eine solche Lösung. Die Rechenzeit hat sich verringert. Die Parallelisierung von NPS kann auch unter Berücksichtigung ihrer Ausführung auf Multiprozessorsystemen attraktiv sein. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ab/xq/kg/abxqkgiggx-qyvkm8jra-bo0xro.jpeg" alt="Bild"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. 2. Paralleler NPS</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie das JPF-Diagramm drehen, können Sie das Schema der Pipeline-Berechnung erhalten. </font><font style="vertical-align: inherit;">Darin sind die Elemente des Förderers Ebenen, deren Betriebszeit auf die langsamste Ebene reduziert wird. </font><font style="vertical-align: inherit;">In Abb. </font><font style="vertical-align: inherit;">Fig. 3 zeigt ein solches Pipelining-Schema des ursprünglichen Ausdrucks. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1r/um/ah/1rumah082yimeiqe0csndeauofy.jpeg" alt="Bild"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. </font><font style="vertical-align: inherit;">3. Pipeline-Modell</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Da in diesem Beispiel die diskrete Förderzeit 5 Taktzyklen beträgt, ist die Berechnungszeit noch schlechter als die schlechteste Version des NPS. </font><font style="vertical-align: inherit;">Vorteile der Pipeline nur in der Kontinuität der Berechnungen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Ein Automatenmodell zur Berechnung von Ausdrücken</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie die Einschränkungen für die Synchronisierung von Vorgängen aufheben, kann der NPS in eine Schaltung umgewandelt werden, die das Ergebnis als Pipeline generiert, jedoch ohne Einschränkungen in Bezug auf die Reihenfolge und den Zeitpunkt der Vorgänge. Ein solches logisches Netzwerkdiagramm mit einer Demonstration der Additionsoperation (die Implementierung der Multiplikation ist ähnlich) in Form eines Netzwerkmodells eines Raumfahrzeugs ist in Fig. 4 gezeigt. 4. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/tf/-4/-c/tf-4-cwnottehdr8cownolbacrm.jpeg" alt="Bild"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Abb. 4. Berechnungen von Ausdrücken basierend auf einem Netzwerk von Zustandsautomaten</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können sehen, dass das Netzwerk ständig ein Ergebnis mit einer Verzögerung von 7 Taktzyklen erzeugt, d. H. sowie das schnellste NPS-Modell (Abb. 7). Zu den Nachteilen gehört die mit Datenrennen verbundene Instabilität der Ausgabe. Beispielsweise führt eine gleichzeitige Änderung des Wertes von Variablen in Paaren von Variablen g, h und e, f zu einer Änderung von t4 beim nächsten Taktzyklus, nach einem Taktzyklus zu einer Änderung der Variablen t6 und einem weiteren Taktzyklus zur Ausgangsvariablen t7 (siehe Fig. 1 und Fig. 4). . Gleichzeitig ändert sich nach 5 Taktzyklen die Variable t3, was zu einer Änderung und Ausgabe der endgültig festgelegten Werte der Variablen t6, t7 führt. </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ju/yk/iz/juykiznycz_4f_o-fl62ce-snee.jpeg" alt="Bild"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feige. 5. Modellierung von NPS mit einem Netzwerk von Automaten</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In Abb. </font><font style="vertical-align: inherit;">Abbildung 5 zeigt, wie durch die Einführung eines zusätzlichen Blocks die Berechnung des NPS simuliert werden kann. </font><font style="vertical-align: inherit;">In ähnlicher Weise können Sie das Modell des Pipelined Computing simulieren und die mit Datenrennen verbundene Änderung der Ausgabe blockieren.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Schlussfolgerungen </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es wäre seltsam zu bezweifeln, dass die obigen „Bilder“ nicht mit Coroutinen realisiert werden können. Das ist nur, um ehrlich zu sein, ich würde das nicht tun wollen. Für mich ist es viel einfacher, Automaten zu erstellen, die die erforderlichen Operationen implementieren, und dann, wenn nur ihre Anzahl und die Beziehungen zwischen ihnen geändert werden, die Berechnung eines Ausdrucks zu implementieren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde nicht müde zu wiederholen, dass ich von dem Konzept der visuellen Programmierung angezogen bin, das im Stateflow-Paket in MATLAB implementiert ist. Hier können Sie auch die erforderlichen Automatenoperationen erstellen und dann wie Standardblöcke ein Berechnungsschema für jeden Ausdruck „zeichnen“, das nach der Kompilierung in ein Arbeitsprogramm umgewandelt wird (z. B. in demselben C ++). Gleichzeitig stehen während des Entwurfsprozesses Visualisierungs- und Debugging-Tools zur Verfügung, die für die automatisierte Programmiertechnologie spezifisch sind.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es kann sich die Frage stellen, warum dauerhafte Verbindungen zu einer bestimmten unbekannten Umgebung der KPdSU bestehen, wenn es einen Stateflow gibt. Aber wir werden noch separat darüber sprechen ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist undankbar, Vorhersagen zu treffen, aber dennoch werde ich aufgrund meiner Erfahrung einen aufrührerischen Gedanken ausdrücken: Als Hochsprachen, die zur Negation der Assembler-Programmierung verwendet werden, also visuelle Programmierung früher oder später und nicht weniger verdrängte Programmierung in Hochsprachen. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Literatur</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1. Programmierer, lassen Sie uns die Quellen klassischer Programme untersuchen. [Elektronische Ressource], Zugriffsmodus: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/de/post/488808</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kostenlos. Yaz. Russisch (Datum der Behandlung 22.02.2020). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. C ++ 20 genehmigt! Was Sie erwartet und was Sie für C ++ 23-Entwickler vorbereiten müssen. [Elektronische Ressource], Zugriffsmodus:</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habr.com/de/company/yandex/blog/488588</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> kostenlos. </font><font style="vertical-align: inherit;">Yaz. </font><font style="vertical-align: inherit;">Russisch </font><font style="vertical-align: inherit;">(Datum der Behandlung 02.20.2020).</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de489638/index.html">Interplanetares Dateisystem - Einfaches IPFS-Blog mit XSLT</a></li>
<li><a href="../de489640/index.html">Wissenschaftler des MIT haben es geschafft, mit bakteriellem Protein Strom aus der Luft zu gewinnen</a></li>
<li><a href="../de489642/index.html">Lustige Patente aus der Automobilindustrie</a></li>
<li><a href="../de489650/index.html">Automatisierung eines Journalisten. Teil 1: Aufgaben und Kalender</a></li>
<li><a href="../de489662/index.html">PHP Digest Nr. 174 (10. - 24. Februar 2020)</a></li>
<li><a href="../de489666/index.html">Überladen in C ++. Teil II Überlastung des Bedieners</a></li>
<li><a href="../de489668/index.html">CPU-Limits und aggressive Drosselung in Kubernetes</a></li>
<li><a href="../de489672/index.html">Wir beleben den Hexapod wieder. Zweiter Teil</a></li>
<li><a href="../de489674/index.html">Angular: eine klare Einführung in NGRX</a></li>
<li><a href="../de489676/index.html">Wir erstellen einen Klon des Lebensmittel-Lieferservices mit Nuxt.js, GraphQL, Strapi und Stripe. Teil 1/7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>