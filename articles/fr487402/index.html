<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîû üòà ü§µ R√©gulateur de d√©bit de gaz 5 fois moins cher que les solutions commerciales üë® ü¶ë ü§õüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les contr√¥leurs de d√©bit de gaz (RRG) sont con√ßus pour maintenir un d√©bit d√©fini par l'utilisateur. Les GTR sont utilis√©s dans l'industrie et les labo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>R√©gulateur de d√©bit de gaz 5 fois moins cher que les solutions commerciales</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487402/"><img src="https://habrastorage.org/webt/-h/ul/-l/-hul-lbhy5ca5cfsciofuph5xte.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les contr√¥leurs de d√©bit de gaz (RRG) sont con√ßus pour maintenir un d√©bit d√©fini par l'utilisateur. Les GTR sont utilis√©s dans l'industrie et les laboratoires de recherche pour organiser l'approvisionnement en gaz des bouteilles et des autoroutes. Les appareils d'Eltochpribor, MKS, Bronkhorst, etc. sont repr√©sent√©s sur le march√©. Le co√ªt de ces appareils est de 1000 √† 2500 USD. L'objectif de ce travail est de cr√©er un r√©gulateur de d√©bit de gaz √† partir de composants plus accessibles. L'id√©e est d'organiser un syst√®me de r√©troaction qui comprend une valve proportionnelle et un d√©bitm√®tre. Vous trouverez ci-dessous une br√®ve description du mat√©riel et des logiciels du syst√®me, ce qui permet de le reproduire √† tous ceux qui utilisent le RRG dans leurs activit√©s. Tous les codes source sont disponibles sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons utilis√© des produits SMC, des vannes de la s√©rie PVQ et des d√©bitm√®tres de la s√©rie PFM5 sans indication. </font><font style="vertical-align: inherit;">Deux RWG ont √©t√© assembl√©s avec des plages de d√©bit r√©glables de 0,2 √† 5 L / min (PVQ13 + PFM510) et de 1 √† 50 L / min (PVQ31 + PFM550), comme indiqu√© sur la figure. </font><font style="vertical-align: inherit;">Le co√ªt d'un r√©gulateur de d√©bit peut √™tre estim√© ci-dessus √† 100 USD (vanne PVQ31) + 80 USD (compteur PFM5) + 20 USD (microcontr√¥leur Arduino Nano, alimentation et composants radio) = 200 USD. </font><font style="vertical-align: inherit;">Tout ce qui est d√©crit ci-dessous s'applique au RWG 1-50 l / min. </font><font style="vertical-align: inherit;">La cr√©ation d'un r√©gulateur de 0,2 √† 5 l / min, ainsi que de tout autre r√©gulateur √† partir de composants similaires, suit le m√™me sch√©ma, mais peut diff√©rer dans des d√©tails mineurs.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mat√©riel</font></font></h4><br>
<img src="https://habrastorage.org/webt/ij/he/sy/ijhesyjtgz47jzjpquizlets53e.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mat√©riel est illustr√© dans la figure et se compose de:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vanne proportionnelle PVQ31 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©bitm√®tre PFM550 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filtre </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bloc d'alimentation (24V, 1A) </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Circuits de commande de courant </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microcontr√¥leur Arduino Nano et ses sch√©mas d'alimentation </font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/7t/3n/hc/7t3nhc2fexnzhtff08igsq7gw9q.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le sch√©ma de connexion √©lectrique des composants est illustr√© sur la figure. </font><font style="vertical-align: inherit;">Pour alimenter le circuit, une source 24 V, 1 A DC est utilis√©e, ce qui est plus que suffisant, compte tenu de la consommation de la vanne inf√©rieure √† 200 mA et d'un compteur inf√©rieur √† 35 mA. </font><font style="vertical-align: inherit;">Les vannes proportionnelles de la s√©rie PVQ sont contr√¥l√©es en courant. </font><font style="vertical-align: inherit;">Conform√©ment √† la documentation, il n'est pas recommand√© de les contr√¥ler par contr√¥le de tension. </font><font style="vertical-align: inherit;">Le contr√¥le du courant peut √™tre mis en ≈ìuvre en utilisant le circuit discut√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et plus en d√©tail </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Le circuit de commande de courant est mis en √©vidence sur le circuit √©lectrique g√©n√©ral (Fig. 3) par un rectangle en pointill√©s. </font><font style="vertical-align: inherit;">Les vannes de la s√©rie PVQ sont connect√©es par deux fils d'alimentation: rouge - DC +, noir - DC-.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'intensit√© du courant est r√©gul√©e √† l'aide du signal PWM produit par la broche analogique du microcontr√¥leur. Par d√©faut, les contr√¥leurs bas√©s sur ATmega328 (Arduino UNO / Nano / Pro Mini) g√©n√®rent un signal PWM 8 bits (valeur 0-255) √† une fr√©quence de 488 ou 976 Hz, selon la broche. Une faible largeur de signal PWM r√©duit la pr√©cision du contr√¥le de la vanne. Une basse fr√©quence entra√Æne son buzz. Ces valeurs peuvent √™tre augment√©es par programme √† 10 bits (0-1023) et 15,6 kHz, respectivement. Nous avons utilis√© une fr√©quence de 7,8 kHz. Une description des commandes qui doivent √™tre ins√©r√©es dans la fonction du </font></font><code>setup()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">firmware Arduino </font><font style="vertical-align: inherit;">est </font><font style="vertical-align: inherit;">donn√©e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les d√©bitm√®tres de la s√©rie PFM5 ont 2 fils de signal (noir - sortie analogique, blanc - r√©glage du temps de r√©ponse (non utilis√©)) et deux fils d'alimentation (marron - DC +, bleu - DC-). Aliment√© par une source de 24 V. DC Le d√©bitm√®tre fournit un signal analogique dans la plage de 1 √† 5 V. Une valeur de 1 V correspond √† un d√©bit de gaz nul, 5 V - le maximum pour ce compteur. Selon la documentation, la relation entre le d√©bit et la tension est lin√©aire. En attendant, il semble utile d'√©talonner r√©guli√®rement le d√©bitm√®tre. Le signal analogique du d√©bitm√®tre (fil noir) est re√ßu par une broche analogique Arduino 10 bits (0-1023) pour le traitement et l'affichage. Le fil blanc est con√ßu pour r√©gler le temps de r√©ponse, nous ne l'utilisons pas. Dans ce cas, le temps de r√©ponse est de 50 ms.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La carte Arduino doit √™tre aliment√©e via une broche 5 V, la tension d'alimentation ne doit pas d√©passer 5,5 V. Une telle alimentation peut √™tre fournie par le bloc d'alimentation de la valve et le d√©bitm√®tre via le stabilisateur L7805, comme indiqu√© sur le sch√©ma (Fig.3). Vous aurez probablement besoin d'un radiateur sur le stabilisateur. L'alimentation du port USB de l'ordinateur utilis√© pendant le test (Fig.2) n'est pas souhaitable car dans ce cas, la tension de r√©f√©rence est instable lors de l'utilisation de l'ADC. Pour plus d'informations sur l'alimentation de la carte, voir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
logicielle La </font><b><font style="vertical-align: inherit;">partie</font></b><font style="vertical-align: inherit;"> logicielle comprend le micrologiciel du microcontr√¥leur Arduino Nano et une interface utilisateur graphique qui s'ex√©cute sur un PC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le programme t√©l√©charg√© sur le microcontr√¥leur effectue cycliquement les actions suivantes:</font></font><br>
<br>
<ol>
<li>       ,   </li>
<li> ,        </li>
<li>   ,               - </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le syst√®me peut fonctionner en mode manuel et automatique. Pendant le fonctionnement manuel, la valeur de l'ouverture de vanne souhait√©e, exprim√©e par une variable </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>valve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023), </font><font style="vertical-align: inherit;">doit √™tre envoy√©e au port s√©rie </font><font style="vertical-align: inherit;">. La valeur de cette variable d√©termine l'occupation du signal PWM, qui est envoy√© via la sortie analogique du microcontr√¥leur au circuit de commande de courant et √† la commande de vanne proportionnelle </font></font><code>analogWrite(valvepin, valve)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Apr√®s ouverture, la vanne reste dans la position d√©finie jusqu'√† ce qu'une nouvelle commande soit re√ßue via le port s√©rie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour passer en fonctionnement automatique, un nombre n√©gatif doit √™tre envoy√© au port s√©rie </font></font><code>-targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Valeur variable</font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se situe dans la plage 0-1023 et d√©termine le d√©bit de gaz qui doit √™tre maintenu. Le d√©bit de gaz r√©el est d√©termin√© par les lectures du d√©bitm√®tre, qui sont lues √† partir de l'entr√©e analogique du microcontr√¥leur avec une commande </font></font><code>realflow = analogRead(fmpin)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(0 &lt;= </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;1023). En mode automatique, le syst√®me s'efforce de maintenir l'√©galit√© entre </font></font><code>targetflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et en </font></font><code>realflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contr√¥lant la vanne proportionnelle. La valeur d'ouverture de la vanne est calcul√©e √† l'aide du r√©gulateur de diff√©renciation proportionnelle int√©grale (PID). Vous pouvez lire sur le contr√¥leur PID </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La biblioth√®que </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">GyverPID</font></a><font style="vertical-align: inherit;"> est utilis√©e pour impl√©menter le contr√¥leur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec quelques modifications et ajouts. La biblioth√®que ayant √©t√© modifi√©e, utilisez la biblioth√®que jointe √† ce code et non t√©l√©charg√©e √† partir du lien ci-dessus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour utiliser le contr√¥leur PID, il est n√©cessaire de s√©lectionner les coefficients des </font><font style="vertical-align: inherit;">composants </font><font style="vertical-align: inherit;">proportionnels </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, int√©graux </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et diff√©rentiels </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ainsi que le temps d'it√©ration </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. La valeur de la variable </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doit √™tre s√©lectionn√©e en fonction de l'inertie du syst√®me. Plus le syst√®me est inerte, plus il devrait l'√™tre </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Sur la base des √©valuations et des r√©sultats des tests pour l'appareil en question, nous avons choisi des valeurs </font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 100-330 ms. Les coefficients </font></font><code>Kp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Ki</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Kd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sont choisis √† une valeur fixe</font></font><code>dtpid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et d√©pendent consid√©rablement du syst√®me. </font><font style="vertical-align: inherit;">Des recommandations sur la s√©lection des coefficients peuvent √™tre trouv√©es </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, l'algorithme ex√©cut√© cycliquement par le microcontr√¥leur est le suivant:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">if</span>(    )<font></font>
	   <span class="hljs-function">inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &gt;= <span class="hljs-number">0</span> &amp;&amp; inp &lt; <span class="hljs-number">1023</span>)</span>
		  
		    inp
	<span class="hljs-title">if</span><span class="hljs-params">(inp &lt;= <span class="hljs-number">0</span> &amp;&amp; inp &gt;= <span class="hljs-number">-1023</span>)</span>
		  
		     -inp 
<span class="hljs-title">if</span><span class="hljs-params">(  &amp;&amp;      dtpid )</span>
	      -
	    
<span class="hljs-title">if</span><span class="hljs-params">(     dt )</span>
	   
	   
	   
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'interface utilisateur graphique est √©crite en Python en utilisant le cadre graphique PyQt. </font><font style="vertical-align: inherit;">La conception a √©t√© cr√©√©e dans le programme Qt Designer, apr√®s quoi le code du fichier .ui a √©t√© converti en un fichier Python. </font><font style="vertical-align: inherit;">Pour une introduction au d√©veloppement de GUI et √† l'utilisation de PyQt, voir </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'interface graphique interagit avec le firmware Arduino via le port s√©rie en utilisant la biblioth√®que </font></font><code>pyserial</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le programme Python fait ce qui suit:</font></font><br>
<br>
<ol>
<li>      </li>
<li>          ,        ,     </li>
<li>     0-1023,   ,    </li>
<li>  .3     </li>
<li>    ,     ( 0-1023) </li>
<li>  .5            </li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le code de connexion au port s√©rie est emprunt√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le module est destin√© au transfert des unit√©s utilisateur vers la plage 0-1023 </font></font><code>units.py</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ce module facilite l'ajout de nouvelles unit√©s. </font><font style="vertical-align: inherit;">L'utilisateur doit indiquer le nom des unit√©s et la formule de conversion de 0-1023 aux nouvelles unit√©s. </font><font style="vertical-align: inherit;">Le module est fourni avec des commentaires d√©taill√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les donn√©es re√ßues du d√©bitm√®tre et transmises par le micrologiciel du microcontr√¥leur au port s√©rie sont lues √† partir du port par le programme Python et, apr√®s la conversion des unit√©s, sont affich√©es sous forme textuelle et graphique. </font><font style="vertical-align: inherit;">Une biblioth√®que est utilis√©e pour dessiner un graphique de la consommation actuelle </font></font><code>pyqtgraph</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour commencer √† travailler avec RRG, vous devez: flasher le microcontr√¥leur, connecter l'alimentation, ex√©cuter le programme Python, √©tablir une connexion au port s√©rie. Apr√®s cela, l'utilisateur peut s√©lectionner le mode de fonctionnement (manuel ou automatique) et d√©finir la valeur d'ouverture de vanne requise en mode de fonctionnement manuel ou la valeur de d√©bit prise en charge en mode automatique. Le d√©bit de gaz actuel est affich√© dans le champ correspondant et affich√© sur le graphique. Le graphique est mis √† jour cycliquement, apr√®s avoir atteint le nombre de points sp√©cifi√©, le graphique est effac√© et le dessin recommence. L'utilisateur peut s√©lectionner les unit√©s utilis√©es.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/1s/kd/jf/1skdjfks-dwbv2_4bxv5lko9rso.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La figure montre l'apparence de l'interface utilisateur graphique et un graphique du d√©bit de gaz obtenu en mode automatique et montrant la commutation du RGG entre diff√©rentes valeurs du d√©bit pris en charge. </font><font style="vertical-align: inherit;">Les r√©sultats sont donn√©s en unit√©s de 0-1023. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour d√©montrer les possibilit√©s de maintenir un d√©bit de gaz constant, nous avons consid√©r√© le cas o√π le d√©bit lorsque la vanne proportionnelle est ouverte par une valeur constante ¬´flotte¬ª, comme indiqu√© sur le c√¥t√© gauche du graphique (x &lt;950) dans la figure ci-dessous. </font><font style="vertical-align: inherit;">Le r√©sultat du fonctionnement de la maintenance automatique du d√©bit r√©gl√© est visible √† droite du graphique (x&gt; 1000). </font><font style="vertical-align: inherit;">Les tests ont montr√© que l'√©cart par rapport au d√©bit r√©gl√© en mode de maintien automatique ne d√©passe pas 2%.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/ni/5w/cgni5wyzma05n_8uxijteltnacu.png" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remarques</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisation du microcontr√¥leur Arduino Nano n'est pas n√©cessaire car seule une petite partie de ses broches est impliqu√©e. </font><font style="vertical-align: inherit;">D'un autre c√¥t√©, il serait pr√©f√©rable d'utiliser des microcontr√¥leurs avec une plus grande capacit√© en bits d'entr√©es / sorties analogiques pour augmenter la pr√©cision de la mesure et du r√©glage. </font><font style="vertical-align: inherit;">Lors du changement de type de microcontr√¥leur, il peut √™tre n√©cessaire d'impl√©menter votre propre contr√¥leur PID; cela ne devrait pas poser de probl√®me car l'algorithme est simple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au stade du d√©veloppement, le circuit √©lectrique a √©t√© assembl√© sur une planche √† pain (voir figure 2). </font><font style="vertical-align: inherit;">Pour une utilisation ult√©rieure, il est n√©cessaire de souder le circuit et de le placer dans le bo√Ætier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les auteurs de l'article ne sont ni des ing√©nieurs en √©lectronique ni des programmeurs, par cons√©quent, des conseils constructifs d'am√©lioration sont les bienvenus.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mat√©riaux additionnels</font></font></h4> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les codes source du firmware Arduino et des programmes Python, ainsi que la documentation des d√©bitm√®tres et des vannes proportionnelles utilis√©es, sont disponibles sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remerciements</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous remercions nos coll√®gues pour l'id√©e du syst√®me mis en ≈ìuvre dans ce travail. </font><font style="vertical-align: inherit;">AlexGyver et d'autres utilisateurs partagent g√©n√©reusement leurs exp√©riences pour les informations que nous avons utilis√©es dans notre travail.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilisation d'un syst√®me de r√©troaction compos√© d'une vanne proportionnelle, d'un d√©bitm√®tre et d'un microcontr√¥leur vous permet de faire RRG pour maintenir un d√©bit de gaz donn√©. </font><font style="vertical-align: inherit;">Les tests ont montr√© un √©cart par rapport au d√©bit requis en moins de 2%. </font><font style="vertical-align: inherit;">Le co√ªt du syst√®me √©tait inf√©rieur √† 200 USD. </font><font style="vertical-align: inherit;">Le prototype assembl√© a montr√© son op√©rabilit√© dans un large √©ventail de conditions. </font><font style="vertical-align: inherit;">Une utilisation ult√©rieure peut n√©cessiter un raffinement, y compris le c√¢blage des circuits, la fabrication du bo√Ætier, etc.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487388/index.html">D√©veloppement naturel: comment passer de l'e-learning √† la gestion des connaissances</a></li>
<li><a href="../fr487390/index.html">Composants Web sans Shadow DOM</a></li>
<li><a href="../fr487392/index.html">Qu'est-ce que Magnet veut savoir sur ses clients?</a></li>
<li><a href="../fr487394/index.html">Traduction du livre d'Andrew Un, Passion for Machine Learning, chapitres 34 et 35</a></li>
<li><a href="../fr487400/index.html">Ma√Ætre SCADA 4D. Y a-t-il de la vie sur ARM?</a></li>
<li><a href="../fr487404/index.html">GoLang et OpenCV (OpenVino && Cuda)</a></li>
<li><a href="../fr487406/index.html">Reverse engineering d'un routeur domestique √† l'aide de binwalk. Faites-vous confiance au logiciel de votre routeur?</a></li>
<li><a href="../fr487408/index.html">Cr√©ation d'une infrastructure informatique tol√©rante aux pannes. Partie 3. Organisation du routage sur les routeurs VyOS</a></li>
<li><a href="../fr487412/index.html">Ami COMMANDEZ avec des indices</a></li>
<li><a href="../fr487414/index.html">Les qu√™tes informatiques comme outil g√©nial pour apprendre les mots anglais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>