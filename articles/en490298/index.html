<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äç‚úàÔ∏è ü§¥ üóº Sealed types in Java üéÑ üèº üåÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Java language has recently begun to actively develop. The six-month release of Java versions cannot but please the Java developer with new feature...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sealed types in Java</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490298/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Java language has recently begun to actively develop. The six-month release of Java versions cannot but please the Java developer with new features. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the priority areas for Java development is pattern matching. Pattern matching reveals to the developer the ability to write code more flexibly and more beautifully, while leaving it clear. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The key blocks for pattern matching in Java are planning to record and sealed types. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Records</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> provide concise syntax for declaring classes that are simple carriers of constant, immutable data sets. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Will appear in Java 14 as a preview feature.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">record <span class="hljs-title">Person</span><span class="hljs-params">(String name, <span class="hljs-keyword">int</span> age)</span> </span>{ }
</code></pre><a name="habracut"></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sealed types</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> are classes or interfaces that impose restrictions on other classes or interfaces that can extend or implement them. With a high degree of probability they may appear in Java 15. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
They are enum types on steroids.</font></font><br>
<br>
<pre><code class="java hljs">sealed <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Color</span> <span class="hljs-title">permits</span> <span class="hljs-title">BiColor</span>, <span class="hljs-title">TriColor</span> </span>{ }<font></font>
	<font></font>
<span class="hljs-function">record <span class="hljs-title">BiColor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> g, <span class="hljs-keyword">int</span> b)</span> implements Color </span>{}
<span class="hljs-function">record <span class="hljs-title">TriColor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> g, <span class="hljs-keyword">int</span> b)</span> implements Color </span>{}
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A sealed modifier is used to declare a sealed class or interface. The list of subtypes can be listed at the declaration time of the sealed class or interface </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
after the permits keyword. If the subtypes are in the same package or module, then the compiler can display the list of subtypes and permits in the declaration of the sealed </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
class or interface can be omitted. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the subtype is abstract, then it becomes implicitly marked with a sealed modifier, unless explicitly marked with a non-sealed modifier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As you can see, Java introduces a new type of keywords called </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hyphenated keywords</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Such keywords will consist of two words separated by a dash.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Concrete subtypes implicitly become final unless explicitly marked with a non-sealed modifier. </font><font style="vertical-align: inherit;">Although it seems to me, it would be better to use non-final if you do not want to make it final. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In order to support sealed types, a new PermittedSubtypes attribute is added to class files, which stores a list of subtypes.</font></font><br>
<br>
<pre><code class="java hljs">PermittedSubtypes_attribute {<font></font>
	u2 attribute_name_index;<font></font>
	u4 attribute_length;<font></font>
	u2 permitted_subtypes_count;<font></font>
	u2 classes[permitted_subtypes_count];<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also, in order to work with sealed types through reflection, two methods are added to java.lang.Class.</font></font><br>
<br>
<pre><code class="java hljs">java.lang.constant.ClassDesc&lt;?&gt;[] getPermittedSubtypes()
<span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">isSealed</span><span class="hljs-params">()</span>
</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first method returns an array of java.lang.constant.ClassDesc objects that represent a list of subtypes if the class is marked with a sealed modifier. </font><font style="vertical-align: inherit;">If the class is not marked with a sealed modifier, an empty array is returned. </font><font style="vertical-align: inherit;">The second method returns true if the given class or interface is marked with a sealed modifier. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All this allows the compiler to determine if all subtypes are enumerated or not, when iterating over the list of subtypes in a switch expression.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">var</span> result = <span class="hljs-keyword">switch</span> (color) {
	<span class="hljs-keyword">case</span> BiColor bc -&gt; <span class="hljs-number">0x1</span>;
	<span class="hljs-keyword">case</span> TriColor tc -&gt; <span class="hljs-number">0x2</span>;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The default branch is optional, because the compiler defines all valid subtypes. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And if a new subtype is added, then the compiler will determine that not all subtypes are considered in switch, and it will throw an error in compilation time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The idea of ‚Äã‚Äãsealed types is not new. </font><font style="vertical-align: inherit;">For example, in the Kotlin language, there are sealed classes. </font><font style="vertical-align: inherit;">But there are no sealed interfaces.</font></font><br>
<br>
<pre><code class="kotlin hljs"><span class="hljs-keyword">sealed</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Color</span></span><font></font>
	<font></font>
<span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BiColor</span></span>(<span class="hljs-keyword">val</span> r: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> g: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> b: <span class="hljs-built_in">Int</span>) : Color 
<span class="hljs-keyword">data</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TriColor</span></span>(<span class="hljs-keyword">val</span> r: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> g: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">val</span> b: <span class="hljs-built_in">Int</span>) : Color
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kotlin sealed classes are implicitly abstract and have a private default constructor. </font><font style="vertical-align: inherit;">Accordingly, subtypes must be nested in the class. </font><font style="vertical-align: inherit;">In Java, it can be represented as follows.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Color</span> </span>{
	<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Color</span><span class="hljs-params">()</span> </span>{}<font></font>
	<font></font>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> class <span class="hljs-title">BiColor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> g, <span class="hljs-keyword">int</span> b)</span> extends Color </span>{}
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> class <span class="hljs-title">TriColor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> g, <span class="hljs-keyword">int</span> b)</span> extends Color </span>{}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In this case, it can be guaranteed that all subtypes can be determined at compile time. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is all well and good, but what if you want to try sealed classes, but they haven't come out yet. </font><font style="vertical-align: inherit;">Fortunately, nothing prevents the implementation of a simple visitor, just like the when-expression works in Kotlin.</font></font><br>
<br>
<pre><code class="java hljs"> matches(color).as(<font></font>
       Color.BiColor.class,  bc -&gt; System.out.println("bi color:  " + bc),<font></font>
       Color.TriColor.class, tc -&gt; System.out.println("tri color:  " + tc)<font></font>
 );<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Visitor implementation is very simple. </font><font style="vertical-align: inherit;">We take the type of the target object and, depending on the type of branch, we perform lambda expressions.</font></font><br>
<br>
<pre><code class="java hljs"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;V, T1, T2&gt;
 <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">matches</span><span class="hljs-params">(V value,
                Class&lt;T1&gt; firstClazz,  Consumer&lt;T1&gt; firstBranch,
                Class&lt;T2&gt; secondClazz, Consumer&lt;T2&gt; secondBranch)</span> </span>{<font></font>
        verifyExhaustiveness(value, <span class="hljs-keyword">new</span> Class&lt;?&gt;[]{ firstClazz, secondClazz });<font></font>
        Class&lt;?&gt; valueClass = value.getClass();<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (firstClazz == valueClass) {<font></font>
            firstBranch.accept((T1) value);<font></font>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (secondClazz == valueClass) {<font></font>
            secondBranch.accept((T2) value);<font></font>
        }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But in addition, we need to know the subtypes of the target object and compare with the types specified in the branches. </font><font style="vertical-align: inherit;">And if some subtype is not checked, we will throw an exception.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;V&gt; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">verifyExhaustiveness</span><span class="hljs-params">(V value, Class&lt;?&gt;[] inputClasses)</span> </span>{<font></font>
        SealedAttribute data = cacheSubclasses.computeIfAbsent(value.getClass(), SealedAttribute::<span class="hljs-keyword">new</span>);<font></font>
        Class&lt;?&gt;[] subClasses = data.getSubClasses();<font></font>
        StringBuilder builder = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (subClasses.length != inputClasses.length) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Require "</span> + inputClasses.length + <span class="hljs-string">" subclasses. "</span> +
                                       <span class="hljs-string">"But checked class has "</span> + subClasses.length + <span class="hljs-string">" subclasses."</span>);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">for</span> (Class&lt;?&gt; subClass : subClasses) {
            <span class="hljs-keyword">for</span> (Class&lt;?&gt; inputClass : inputClasses) {
                <span class="hljs-keyword">if</span> (subClass == inputClass) {<font></font>
                    flag = <span class="hljs-keyword">true</span>;
                    <span class="hljs-keyword">break</span>;<font></font>
                }<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (!flag) {<font></font>
                builder.append(subClass).append(<span class="hljs-string">","</span>);<font></font>
            }<font></font>
<font></font>
            flag = <span class="hljs-keyword">false</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (builder.length() &gt;= <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Must to be exhaustive, add necessary "</span> + builder.toString() +
                                       <span class="hljs-string">" branches or else branch instead"</span>);<font></font>
        }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, in order not to calculate class subtypes each time, we can cache. </font><font style="vertical-align: inherit;">In this case, we need to check that the target class is abstract, has a private constructor, and all nested classes inherited from the target class.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SealedAttribute</span> </span>{
    <span class="hljs-keyword">private</span> Class&lt;?&gt;[] subClasses;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SealedAttribute</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> </span>{<font></font>
        Class&lt;?&gt; sealedClass = clazz.getSuperclass();<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (!sealedClass.isAnnotationPresent(Sealed.class)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Checked class must to be mark as sealed"</span>);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (!Modifier.isAbstract(sealedClass.getModifiers())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Checked class must to be abstract"</span>);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">final</span> Constructor&lt;?&gt; constructor = sealedClass.getDeclaredConstructor();<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (!Modifier.isPrivate(constructor.getModifiers())) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Default constructor must to be private"</span>);<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">this</span>.subClasses = sealedClass.getClasses();<font></font>
<font></font>
            <span class="hljs-keyword">if</span> (subClasses.length == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Checked class must to has one or more visible subClasses"</span>);<font></font>
            }<font></font>
<font></font>
            <span class="hljs-keyword">for</span> (Class&lt;?&gt; subclass : subClasses) {
                <span class="hljs-keyword">if</span> (!Modifier.isStatic(subclass.getModifiers())) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Subclass must to be static"</span>);<font></font>
                }<font></font>
<font></font>
                <span class="hljs-keyword">if</span> (subclass.getSuperclass() != sealedClass) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Subclass must to inherit from checked class"</span>);<font></font>
                }<font></font>
            }<font></font>
        } <span class="hljs-keyword">catch</span> (NoSuchMethodException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PatternException(<span class="hljs-string">"Checked class must to has default constructor "</span> + e.getMessage());<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> Class&lt;?&gt;[] getSubClasses() {
        <span class="hljs-keyword">return</span> subClasses;<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's write a simple benchmark and measure on average how much the visitor‚Äôs execution speed and the code written in pure Java differ. </font><font style="vertical-align: inherit;">The full source benchmark can be viewed </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="java hljs">
<span class="hljs-meta">@Warmup(iterations = 3, time = 1)</span>
<span class="hljs-meta">@Measurement(iterations = 3, time = 1)</span>
<span class="hljs-meta">@Fork(3)</span>
<span class="hljs-meta">@State(Scope.Thread)</span>
<span class="hljs-meta">@BenchmarkMode(Mode.AverageTime)</span>
<span class="hljs-meta">@OutputTimeUnit(TimeUnit.NANOSECONDS)</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UnionPatternBenchmark</span> </span>{
     <span class="hljs-keyword">private</span> BiColor biColor;<font></font>
	<font></font>
    <span class="hljs-meta">@Setup</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{<font></font>
        biColor = <span class="hljs-keyword">new</span> BiColor.Red();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">matchesSealedBiExpressionPlain</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (biColor <span class="hljs-keyword">instanceof</span> BiColor.Red) {
               <span class="hljs-keyword">return</span> <span class="hljs-number">0x1</span>;<font></font>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (biColor <span class="hljs-keyword">instanceof</span> BiColor.Blue) {
               <span class="hljs-keyword">return</span> <span class="hljs-number">0x2</span>;<font></font>
        }<font></font>
<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0x0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-meta">@Benchmark</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">matchesSealedBiExpressionReflective</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> matches(biColor).as(<font></font>
                BiColor.Red.class,  r -&gt; <span class="hljs-number">0x1</span>,<font></font>
                BiColor.Blue.class, b -&gt; <span class="hljs-number">0x2</span><font></font>
        );<font></font>
    }<font></font>
}	<font></font>
<font></font>
UnionPatternBenchmark.matchesSealedBiExpressionPlain           avgt    <span class="hljs-number">9</span>   <span class="hljs-number">5</span>,<span class="hljs-number">992</span> ¬±  <span class="hljs-number">0</span>,<span class="hljs-number">332</span>  ns/op<font></font>
UnionPatternBenchmark.matchesSealedTriExpressionPlain          avgt    <span class="hljs-number">9</span>   <span class="hljs-number">7</span>,<span class="hljs-number">199</span> ¬±  <span class="hljs-number">0</span>,<span class="hljs-number">356</span>  ns/op<font></font>
<font></font>
UnionPatternBenchmark.matchesSealedBiExpressionReflective      avgt    <span class="hljs-number">9</span>  <span class="hljs-number">45</span>,<span class="hljs-number">192</span> ¬± <span class="hljs-number">11</span>,<span class="hljs-number">951</span>  ns/op<font></font>
UnionPatternBenchmark.matchesSealedTriExpressionReflective     avgt    <span class="hljs-number">9</span>  <span class="hljs-number">43</span>,<span class="hljs-number">413</span> ¬±  <span class="hljs-number">0</span>,<span class="hljs-number">702</span>  ns/op
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To summarize, we can say that sealed types are a very good feature, the use of which will simplify the writing of code and make the code more reliable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The full source code of the visitor can be viewed on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en490286/index.html">Seven known to all unpleasant rules of life, which few consider</a></li>
<li><a href="../en490290/index.html">Eight Important Programmer Habits</a></li>
<li><a href="../en490292/index.html">Big red-blue sell</a></li>
<li><a href="../en490294/index.html">Puddle interview</a></li>
<li><a href="../en490296/index.html">Window functions with a ‚Äúwindow‚Äù or how to use a frame</a></li>
<li><a href="../en490300/index.html">Let's Encrypt issued a billion certificates</a></li>
<li><a href="../en490302/index.html">Learning to deploy microservices. Part 3. Helm</a></li>
<li><a href="../en490306/index.html">How we made space technology mockups for the Moscow Aviation Institute</a></li>
<li><a href="../en490310/index.html">Faraday law or how a magnet gets stuck in a copper pipe</a></li>
<li><a href="../en490314/index.html">RE: 23 minutes. Justification of the slow-witted</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>