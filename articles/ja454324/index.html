<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🎤 👩🏻‍💻 👲🏻 Pythonのポインター：ポイントは何ですか？ 👐🏾 😶 👂🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="CやC ++などの低レベル言語を使用したことがある場合は、ポインターについて聞いたことがあるでしょう。これにより、さまざまなコードの効果を大幅に向上させることができます。しかし、初心者や経験豊富な開発者さえも混乱させ、メモリ管理のバグにつながる可能性もあります。 Pythonにはポインタがありますが...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Pythonのポインター：ポイントは何ですか？</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/454324/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/_i/vd/cj/_ivdcjv0itamifffxs0i1i-mqh4.jpeg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
CやC ++などの低レベル言語を使用したことがある場合は、ポインターについて聞いたことがあるでしょう。これにより、さまざまなコードの効果を大幅に向上させることができます。しかし、初心者や経験豊富な開発者さえも混乱させ、メモリ管理のバグにつながる可能性もあります。 Pythonにはポインタがありますが、どういうわけかそれらをエミュレートできますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポインターは、CおよびC ++で広く使用されています。実際、これらは他の変数が配置されているメモリアドレスを含む変数です。ポインタをブラッシュアップするには、この</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レビューを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">読んでください</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事のおかげで、Pythonのオブジェクトモデルをよりよく理解し、この言語では実際にはポインターが存在しない理由を理解できます。</font><font style="vertical-align: inherit;">ポインタの動作をシミュレートする必要がある場合は、メモリ管理の悪夢を伴わずにポインタをエミュレートする方法を学びます。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事で、あなたは：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonにポインターがない理由を学びましょう。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PythonでのC変数と名前の違いを学びます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonでポインターをエミュレートする方法を学びます。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>ctypes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのポインタを</font><font style="vertical-align: inherit;">使って</font><font style="vertical-align: inherit;">実験してください。</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：ここで、「Python」という用語は、CPythonとして知られるCのPython実装に適用されます。</font><font style="vertical-align: inherit;">言語デバイスのすべての議論はCPython 3.7に有効ですが、後続の反復に対応しない場合があります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonにポインタがないのはなぜですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は知らない。ポインターはPythonにネイティブに存在できますか？おそらく、しかし明らかに、ポインタ</font><font style="vertical-align: inherit;">は明示的な変更ではなく暗黙的な変更を引き起こすため</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zen of Pythonの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概念と矛盾し</font><font style="vertical-align: inherit;">ます。ポインタは、特に初心者にとって、しばしば非常に複雑です。さらに、それらはあなたを失敗した決定、またはあなたがそれを読むべきではなかったメモリ領域からの読み取りのような本当に危険な何かをするようにあなたを押します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonは、メモリアドレスなどの実装の詳細をユーザーから抽象化しようとします。この言語では、スピードではなく、使いやすさが重視されることがよくあります。したがって、Pythonのポインターはあまり意味がありません。ただし、心配する必要はありません。デフォルトでは、この言語はポインタを使用する利点のいくつかを提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonのポインターを理解するために、言語実装の機能について簡単に説明します。</font><font style="vertical-align: inherit;">特に、次のことを理解する必要があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可変オブジェクトと不変オブジェクトとは何ですか。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonの変数/名前はどうですか？</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたのメモリアドレスを握ってください、行きましょう！</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonのオブジェクト</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonのすべてがオブジェクトです。</font><font style="vertical-align: inherit;">たとえば、REPLを開いて、それがどのように使用されるかを確認します</font></font><code>isinstance()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>isinstance(<span class="hljs-number">1</span>, object)
<span class="hljs-literal">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>isinstance(list(), object)
<span class="hljs-literal">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>isinstance(<span class="hljs-literal">True</span>, object)
<span class="hljs-literal">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>():</span>
<span class="hljs-meta">... </span>   <span class="hljs-keyword">pass</span><font></font>
...<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>isinstance(foo, object)
<span class="hljs-literal">True</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは、Pythonのすべてが実際にはオブジェクトであることを示しています。</font><font style="vertical-align: inherit;">各オブジェクトには、少なくとも3種類のデータが含まれています。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照カウンター。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値。</font></font><br>
</li>
</ul><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照カウンタは、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリを管理するために使用されます。</font><font style="vertical-align: inherit;">この管理の詳細は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Pythonのメモリ管理に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記載されてい</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">この型はCPythonレベルで使用され、実行時の型の安全性を確保します。</font><font style="vertical-align: inherit;">そして、値はオブジェクトに関連付けられた実際の値です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、すべてのオブジェクトが同じというわけではありません。</font><font style="vertical-align: inherit;">重要な違いが1つあります。オブジェクトは変更可能で不変です。</font><font style="vertical-align: inherit;">オブジェクトのタイプ間のこの違いを理解すると、「Pythonのポインター」と呼ばれるタマネギの最初のレイヤーをよりよく理解するのに役立ちます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可変オブジェクトと不変オブジェクト</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonには2種類のオブジェクトがあります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不変オブジェクト（変更できません）;</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更可能なオブジェクト（変更可能）。</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この違いを認識することは、Pythonのポインターの世界を旅するための最初の鍵です。</font><font style="vertical-align: inherit;">次に、いくつかの一般的なタイプの不変性の特徴を示します。</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th width="400"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font></font><br>
</th>
<th width="400"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不変？</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浮く</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブール</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">繁雑</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タプル</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冷凍セット</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">str</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はい</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リスト</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">番号</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セットする</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">番号</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">口述</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">番号</font></font><br>
</td>
</tr>
</tbody></table></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご覧のとおり、よく使用されるプリミティブ型の多くは不変です。</font><font style="vertical-align: inherit;">これを確認するには、いくつかのPythonコードを記述します。</font><font style="vertical-align: inherit;">標準ライブラリの2つのツールが必要になります。</font></font><br>
<br>
<ol>
<li><code>id()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> オブジェクトのメモリアドレスを返します。</font></font><br>
</li>
<li><code>is</code><font style="vertical-align: inherit;"></font><code>True</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2つのオブジェクトが同じメモリアドレスを持つ場合にのみ</font><font style="vertical-align: inherit;">返し</font><font style="vertical-align: inherit;">ます。</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードはREPL環境で実行できます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">5</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>id(x)
<span class="hljs-number">94529957049376</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、変数に</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">を割り当てました</font></font><code>5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">追加機能を使用して値を変更しようとすると、新しいオブジェクトが取得されます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x += <span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>x
<span class="hljs-number">6</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>id(x)
<span class="hljs-number">94529957049408</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは値を変更するだけのように見えるかもしれませんが</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、実際には、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オブジェクト</font><font style="vertical-align: inherit;">を回答として取得します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイプ</font></font><code>str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">も不変です：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>s = <span class="hljs-string">"real_python"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>id(s)
<span class="hljs-number">140637819584048</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>s += <span class="hljs-string">"_rocks"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>s
<span class="hljs-string">'real_python_rocks'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>id(s)
<span class="hljs-number">140637819609424</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、</font></font><code>s</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作後、</font><b><font style="vertical-align: inherit;">別の</font></b><font style="vertical-align: inherit;">メモリアドレス</font></font><code>+=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を受け取り</font><font style="vertical-align: inherit;">ます。</font><b><font style="vertical-align: inherit;">ボーナス</font></b><font style="vertical-align: inherit;">：演算子は</font><font style="vertical-align: inherit;">さまざまなメソッド呼び出しに変換されます。</font><font style="vertical-align: inherit;">
リストなどの一部のオブジェクトでは、</font><font style="vertical-align: inherit;">（ローカル追加）に</font><font style="vertical-align: inherit;">変換され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">それ自体が変更され、同じIDが返されます。</font><font style="vertical-align: inherit;">ただし、</font><font style="vertical-align: inherit;">これらのメソッド</font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">あり</font><font style="vertical-align: inherit;">ません</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その結果、</font><font style="vertical-align: inherit;">代わり</font><font style="vertical-align: inherit;">に呼び出され</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
詳細については、</font><font style="vertical-align: inherit;">Python </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">データモデルのドキュメントをご覧ください</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">。</font></a><font style="vertical-align: inherit;">
文字列値を直接変更しようとすると</font><font style="vertical-align: inherit;">、エラーが発生します。</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><code>+=</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>+=</code><font style="vertical-align: inherit;"></font><code>__iadd__()</code><font style="vertical-align: inherit;"></font><code>str</code><font style="vertical-align: inherit;"></font><code>int</code><font style="vertical-align: inherit;"></font><code>__add__()</code><font style="vertical-align: inherit;"></font><code>__iadd__()</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><br>
<br><font style="vertical-align: inherit;"></font><code>s</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>s[<span class="hljs-number">0</span>] = <span class="hljs-string">"R"</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バックトレース（最新の呼び出しが最後に表示されます）：</font></font><br>
<br>
<pre><code class="python hljs">  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;mdule&gt;<font></font>
TypeError: <span class="hljs-string">'str'</span> object does <span class="hljs-keyword">not</span> support item assignment</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードはクラッシュし、Pythonは</font></font><code>str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この変更をサポート</font><font style="vertical-align: inherit;">して</font><font style="vertical-align: inherit;">いない</font><font style="vertical-align: inherit;">ことを報告します。これ</font><font style="vertical-align: inherit;">は、不変タイプの定義に対応しています</font></font><code>str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更可能なオブジェクト、たとえばリストと比較してください：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>id(my_list)
<span class="hljs-number">140637819575368</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>my_list.append(<span class="hljs-number">4</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>my_list<font></font>
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>id(my_list)
<span class="hljs-number">140637819575368</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは、2つのタイプのオブジェクトの主な違いを示しています。</font><font style="vertical-align: inherit;">最初</font></font><code>my_list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はIDがあります。</font><font style="vertical-align: inherit;">でも、リストに追加した後</font></font><code>4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>my_list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それはまだ持っている</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> IDを。</font><font style="vertical-align: inherit;">その理由は、型</font></font><code>list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が可変である</font><font style="vertical-align: inherit;">ためです</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、代入を使用したリストの可変性の別のデモを示します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>my_list[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>my_list<font></font>
[<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>id(my_list)
<span class="hljs-number">140637819575368</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードでは、変更</font></font><code>my_list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して最初の要素として設定しました</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、この操作の後、リストは同じIDを保持しました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">学習</font></a><font style="vertical-align: inherit;">するための次のステップは、</font><font style="vertical-align: inherit;">そのエコシステムを探索することです。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数を扱います</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonの変数は、CおよびC ++の変数とは根本的に異なります。</font><font style="vertical-align: inherit;">基本的に、それらはPythonには存在しません。</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数の代わりに名前があります</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それは奇妙に聞こえるかもしれません、そして大部分はそれです。</font><font style="vertical-align: inherit;">ほとんどの場合、Pythonでは名前を変数として使用できますが、違いを理解する必要があります。</font><font style="vertical-align: inherit;">これは、ポインタなどの難しいトピックを研究するときに特に重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
理解を容易にするために、Cで変数がどのように機能するか、変数が何を表すかを見て、Pythonでの名前の機能と比較してみましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cの変数</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変数を定義するコードを見てみましょう</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="python hljs">int x = <span class="hljs-number">2337</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この短い行の実行には、いくつかの異なる段階があります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数に対して十分なメモリを割り当てます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">価値のある記憶のこの場所への割り当て</font></font><code>2337</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この値</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">示す</font><font style="vertical-align: inherit;">ディスプレイ</font><font style="vertical-align: inherit;">。</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡略化されたメモリは次のように</font><font style="vertical-align: inherit;">なります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f13/e62/d71/f13e62d71774b73aecff45931b6db57f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、変数</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には偽のアドレス</font></font><code>0x7f1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と値があります</font></font><code>2337</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">後で値を変更する場合は</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次のようにします。</font></font><br>
<br>
<pre><code class="python hljs">x = <span class="hljs-number">2338</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは変数を</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい値に設定し</font></font><code>2338</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それによって</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">を上書きし</font><font style="vertical-align: inherit;">ます。これは、変数が</font></font><code>x</code> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可変である</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ことを意味します</font><font style="vertical-align: inherit;">。新しい値の更新されたメモリスキーム：</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/347/491/19b/34749119bcba5c4009861aa4e7c40c45.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
場所は</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更され</font><font style="vertical-align: inherit;">て</font><font style="vertical-align: inherit;">おらず、値自体のみが変更され</font><font style="vertical-align: inherit;">ていることに注意してください</font><font style="vertical-align: inherit;">。大事です。これ</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、これ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">単なる名前ではなく</font><b><font style="vertical-align: inherit;">、メモリ内の場所であること</font></b><font style="vertical-align: inherit;">を示しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この問題は、所有権の概念の一部と見なすこともできます。一方で</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、メモリ内の場所を所有しています。まず、</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは整数値を1つだけ格納できる空のボックスで、整数値を格納できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いつ割り当てますか</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある値では、に属するボックスに値を入力します</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">新しい変数を導入する</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合は、次の行を追加できます。</font></font><br>
<br>
<pre><code class="python hljs">int y = x;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードはという新しいボックスを作成し、</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から値をコピーします</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これで、メモリスキームは次のようになります</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/caa/74d/ed3/caa74ded301b1f527e1b94516f1b1196.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい場所に注意してください</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>0x7f5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">が、</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値がにコピーされた</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、変数が</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メモリ内の新しいアドレスを所有しています。</font><font style="vertical-align: inherit;">したがって、以下に</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影響を与えずに</font><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">上書きできます</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs">y = <span class="hljs-number">2339</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、メモリスキームは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/fcf/f8d/ed4/fcff8ded49647ad0053a45f0773cb4bb.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
繰り返します</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">値を変更しました</font><font style="vertical-align: inherit;">が、場所は</font><font style="vertical-align: inherit;">変更して</font><font style="vertical-align: inherit;">いません。</font><font style="vertical-align: inherit;">また、元の変数には何の影響もありませんでした</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonの名前では、状況はまったく異なります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonでの名前</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonには変数はなく、名前が代わりに使用されます。</font><font style="vertical-align: inherit;">「変数」という用語は自由に使用できますが、変数と名前の違いを理解することが重要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のCの例の同等のコードをPythonで記述してみましょう。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">2337</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cの場合と同様に、コードはこの実行中にいくつかの個別のステップを実行します。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyObjectが作成されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyObjectの番号にはタイプコードが割り当てられています。</font></font><br>
</li>
<li><code>2337</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PyObjectの値を割り当てました。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名前が作成され</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font></li>
<li><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 新しいPyObjectを指します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyObjectの参照カウントは1ずつ増加します。</font></font><br>
</li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyObject</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はPythonのオブジェクトと同じではありません。このエンティティはCPythonに固有であり、すべてのPythonオブジェクトの基本構造を表します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PyObjectはC構造体として定義されているので、タイプコードや参照カウンターを直接呼び出せないのはなぜかと疑問に思うなら、その理由は、構造体に直接アクセスできないためです。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sys.getrefcount（）の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ようなメソッドを</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">呼び出すと</font></a><font style="vertical-align: inherit;">、ある種の内部的なものを取得するのに役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メモリについて話すと、次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9d9/ad7/932/9d9ad79327405315461e3880fe3db256.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、メモリ回路は上記のCの回路とは大きく異なります。</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値が格納されるメモリブロック</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">所有する</font><font style="vertical-align: inherit;">代わりに</font></font><code>2337</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、新しく作成されたPythonオブジェクトが、それが存在するメモリを所有します</font></font><code>2337</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Pythonの名前が</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接所有していない</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任意の</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C変数が静的セルを所有しているのと同様に、メモリ内のアドレスを。</font><font style="vertical-align: inherit;">新しい値</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を割り当てる場合は</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次のコードを試してください。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">2338</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
システムの動作は、Cで行われる動作とは異なりますが、Pythonの元のバインドとあまり違いはありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードでは：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいPyObjectが作成されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PyObjectの番号にはタイプコードが割り当てられています。</font></font><br>
</li>
<li><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PyObjectの値を割り当てました。</font></font><br>
</li>
<li><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 新しいPyObjectを指します。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいPyObjectの参照カウントは1ずつ増加します。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">古いPyObjectの参照カウントは1減ります。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、メモリスキームは次のようになります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/712/860/996/712860996aa37da34fdb69a466cdf5de.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この図は、以前の</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ように、オブジェクトへの参照を指し、メモリ領域を所有していない</font><font style="vertical-align: inherit;">ことを示してい</font><font style="vertical-align: inherit;">ます。また、コマンド</font></font><code>x = 2338</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は割り当てではなく</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リンク</font><font style="vertical-align: inherit;">名へのバインドであることが</font><font style="vertical-align: inherit;">わかり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、以前のオブジェクト（値を含む</font></font><code>2337</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）は参照カウント0でメモリ内にあり</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ガベージコレクターによって</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">削除さ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">れ</font></a><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">Cの例の</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ように、新しい名前を入力できます</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>y = x</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しい名前がメモリに表示されますが、必ずしも新しい</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/958/adc/410/958adc41013bb5483f0526689a48a871.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オブジェクトではあり</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ません。</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいPythonオブジェクトが</font><font style="vertical-align: inherit;">作成</font><b><font style="vertical-align: inherit;">さ</font></b><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">て</font><b><font style="vertical-align: inherit;">おらず</font></b><font style="vertical-align: inherit;">、同じオブジェクトを指す新しい名前だけ</font><b><font style="vertical-align: inherit;">が</font></b><font style="vertical-align: inherit;">作成</font><b><font style="vertical-align: inherit;">さ</font></b><font style="vertical-align: inherit;">れ</font><font style="vertical-align: inherit;">ていることがわかり</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">さらに、オブジェクト参照カウンターが1増加しました。オブジェクトの同一性をチェックして、それらの同一性を確認できます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>y <span class="hljs-keyword">is</span> x
<span class="hljs-literal">True</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは、</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それら</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が1つのオブジェクトで</font><font style="vertical-align: inherit;">ある</font><font style="vertical-align: inherit;">こと</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">示して</font><font style="vertical-align: inherit;">い</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">しかし、間違いなく、</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それは不変です。</font><font style="vertical-align: inherit;">たとえば、次のようにして</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加算演算</font><font style="vertical-align: inherit;">を実行できます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>y += <span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>y <span class="hljs-keyword">is</span> x
<span class="hljs-literal">False</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
追加後、新しいPythonオブジェクトを返します。</font><font style="vertical-align: inherit;">これで、メモリは次のよう</font><font style="vertical-align: inherit;">になります。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/8bd/abc/3e7/8bdabc3e7576ab86b00ba9c2b43b57b4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しいオブジェクトが作成され、それを</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指します。</font><font style="vertical-align: inherit;">私たちが直接結ばれている場合、我々はまったく同じ最終状態になるだろうという好奇心である</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font></font><code>2339</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>y = <span class="hljs-number">2339</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この式の後、加算演算と同様に、このような最終的な記憶状態が得られます。</font><font style="vertical-align: inherit;">Pythonでは変数を割り当てるのではなく、名前をリンクにバインドすることを思い出してください。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonのインターンについて</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、Pythonで新しいオブジェクトを作成する方法と、オブジェクトに名前を付ける方法について理解できました。</font><font style="vertical-align: inherit;">インターンされたオブジェクトについて話す時が来ました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のPythonコードがあります。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">1000</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>y = <span class="hljs-number">1000</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>x <span class="hljs-keyword">is</span> y
<span class="hljs-literal">True</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前と同様、</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これら</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は同じPythonオブジェクトを指す名前です。</font><font style="vertical-align: inherit;">ただし、値を含むこのオブジェクトは、</font></font><code>1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常に同じメモリアドレスを持つことはできません。</font><font style="vertical-align: inherit;">たとえば、2つの数値を合計して1000を取得すると、別のアドレスが取得されます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">1000</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>y = <span class="hljs-number">499</span> + <span class="hljs-number">501</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>x <span class="hljs-keyword">is</span> y
<span class="hljs-literal">False</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今回は文字列</font></font><code>x is y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が返されます</font></font><code>False</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">恥ずかしくても心配しないでください。</font><font style="vertical-align: inherit;">このコードを実行すると、次のようになります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonオブジェクト（</font></font><code>1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が作成されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼は名前を与えられています</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonオブジェクト（</font></font><code>499</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が作成されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonオブジェクト（</font></font><code>501</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が作成されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これら2つのオブジェクトが加算されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいPythonオブジェクト（</font></font><code>1000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）が作成されます。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼は名前を与えられています</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
</li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">技術的な説明</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：このコードがREPL内で実行される場合にのみ、説明されている手順が実行されます。上記の例の場合、それをファイルに挿入して実行すると、行</font></font><code>x is y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はを返し</font></font><code>True</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その理由は、</font><font style="vertical-align: inherit;">コード実行ステップを可能な限り節約するのに役立つ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のぞき穴の最適化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を実行しようとするCPythonコンパイラーの独創</font><font style="vertical-align: inherit;">性です。詳細</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はpeypholeオプティマイザーCPythonのソースコードにあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それは無駄ではありませんか？ええ、そうですが、Pythonのすべての優れた利点に対してこの価格を支払う必要があります。このような中間オブジェクトの削除について考える必要はありません。また、それらの存在について知る必要すらありません。冗談は、これらの操作は比較的迅速に実行され、その瞬間までそれらについて知らないことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonの作成者はこのオーバーヘッドに賢明に気づき、いくつかの最適化を行うことにしました。彼らの結果は、初心者を驚かせるかもしれない行動です：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x = <span class="hljs-number">20</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>y = <span class="hljs-number">19</span> + <span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>x <span class="hljs-keyword">is</span> y
<span class="hljs-literal">True</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、コードは上記とほとんど同じですが、取得するコードは異なります</font></font><code>True</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それはすべて、抑留されたオブジェクトに関するものです。</font><font style="vertical-align: inherit;">Pythonは、オブジェクトの特定のサブセットをメモリ内に事前に作成し、日常的に使用できるようにグローバルネームスペースに保存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonの実装に依存するオブジェクトはどれですか？</font><font style="vertical-align: inherit;">CPython 3.7では、抑留者は次のとおりです。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から</font></font><code>-5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">までの</font><font style="vertical-align: inherit;">整数</font></font><code>256</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASCII文字、数字、またはアンダースコアのみを含む文字列。</font></font><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、これらの変数が多くのプログラムで頻繁に使用されるためです。</font><font style="vertical-align: inherit;">インテニングにより、Pythonは永続オブジェクトへのメモリ割り当てを防ぎます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サイズが20文字未満で、ASCII文字、数字、またはアンダースコアを含む行は、識別子として使用されることが想定されているため、インターンされます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>s1 = <span class="hljs-string">"realpython"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>id(s1)
<span class="hljs-number">140696485006960</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>s2 = <span class="hljs-string">"realpython"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>id(s2)
<span class="hljs-number">140696485006960</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>s1 <span class="hljs-keyword">is</span> s2
<span class="hljs-literal">True</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは</font></font><code>s1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それら</font></font><code>s2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はメモリ内の同じアドレス</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">指しています。</font><font style="vertical-align: inherit;">ASCII文字、数字、またはアンダースコアを挿入しなかった場合、別の結果が得られます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>s1 = <span class="hljs-string">"Real Python!"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>s2 = <span class="hljs-string">"Real Python!"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>s1 <span class="hljs-keyword">is</span> s2
<span class="hljs-literal">False</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では感嘆符を使用しているため、文字列はインターンされず、メモリ内の異なるオブジェクトになります。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おまけ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：これらのオブジェクトが同じインターンされたオブジェクトを参照するようにしたい場合は、それを使用できます</font></font><code>sys.intern()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この機能を使用する1つの方法は、ドキュメントで説明されています。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字列インターニングは、辞書検索のパフォーマンスをわずかに向上させるのに役立ちます。ディクショナリー内のキーと検索対象のキーがインターンされている場合、（ハッシュ後の）キー比較は、文字列ではなくポインターを比較することで実行できます。</font><font style="vertical-align: inherit;">（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出典</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
抑留者はしばしばプログラマーを混乱させます。</font><font style="vertical-align: inherit;">疑い始めたら、いつでも</font></font><code>id()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それ</font></font><code>is</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">し</font><font style="vertical-align: inherit;">てオブジェクトの等価性を判断</font><font style="vertical-align: inherit;">できることを覚えておいてください</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonポインターエミュレーション</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ポインターがPythonにネイティブに存在しないという事実は、ポインターを利用できないことを意味しません。</font><font style="vertical-align: inherit;">Pythonでポインタをエミュレートするには、実際にはいくつかの方法があります。</font><font style="vertical-align: inherit;">ここでは、そのうちの2つを見てみましょう。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変更可能な型へのポインタとして使用します。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特別に準備されたPythonオブジェクトを使用します。</font></font><br>
</li>
</ol><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可変型ポインタとして使用</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
変更可能な型はすでに知っています。</font><font style="vertical-align: inherit;">ポインタの動作をエミュレートできるのは、その可変性のおかげです。</font><font style="vertical-align: inherit;">このコードを複製する必要があるとしましょう：</font></font><br>
<br>
<pre><code class="python hljs">void add_one(int *x) {<font></font>
    *x += <span class="hljs-number">1</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードは、数値（</font></font><code>*x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">へのポインターを受け取り</font><font style="vertical-align: inherit;">、値を1ずつインクリメントします。コードを実行するための主な関数は次のとおりです。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#include &lt;stdi.h&gt;</span><font></font>
<font></font>
int main(void) {<font></font>
    int y = <span class="hljs-number">2337</span>;<font></font>
    printf(<span class="hljs-string">"y = %d\n"</span>, y);<font></font>
    add_one(&amp;y);<font></font>
    printf(<span class="hljs-string">"y = %d\n"</span>, y);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与えられたフラグメントでは、</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値</font><font style="vertical-align: inherit;">を割り当て</font></font><code>2337</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、現在の値を画面に表示し、値を1増やしてから、新しい値を表示しました。</font><font style="vertical-align: inherit;">画面に次のように表示されます。</font></font><br>
<br>
<pre><code class="python hljs">y = <span class="hljs-number">2337</span>
y = <span class="hljs-number">2338</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonでこの動作を再現する1つの方法は、可変型を使用することです。</font><font style="vertical-align: inherit;">たとえば、リストを適用して最初の要素を変更します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_one</span>(<span class="hljs-params">x</span>):</span>
<span class="hljs-meta">... </span>   x[<span class="hljs-number">0</span>] += <span class="hljs-number">1</span><font></font>
...<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>y = [<span class="hljs-number">2337</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>add_one(y)
<span class="hljs-meta">&gt;&gt;&gt; </span>y[<span class="hljs-number">0</span>]
<span class="hljs-number">2338</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで</font></font><code>add_one(x)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、最初の要素を参照し、その値を1増やします。リストを使用すると、結果として変更された値が取得されます。</font><font style="vertical-align: inherit;">Pythonにはポインタがありますか？</font><font style="vertical-align: inherit;">番号。</font><font style="vertical-align: inherit;">リストが変更可能なタイプであるため、説明されている動作が可能になりました。</font><font style="vertical-align: inherit;">タプルを使用しようとすると、エラーが発生します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>z = (<span class="hljs-number">2337</span>,)
<span class="hljs-meta">&gt;&gt;&gt; </span>add_one(z)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バックトレース（最新の呼び出しが最後になります）：</font></font><br>
<br>
<pre><code class="python hljs">  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<font></font>
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">2</span>, <span class="hljs-keyword">in</span> add_one<font></font>
TypeError: <span class="hljs-string">'tuple'</span> object does <span class="hljs-keyword">not</span> support item assignment</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードはタプルの不変性を示しているため、要素の割り当てはサポートされていません。</font></font><br>
<br>
<code>list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一の変更可能なタイプではなく、パーツポインターがエミュレートされ、を使用し</font></font><code>dict</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
興味深いイベントの発生を追跡するアプリケーションがあるとします。</font><font style="vertical-align: inherit;">これを行うには、辞書を作成し、その要素の1つをカウンターとして使用します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>counters = {<span class="hljs-string">"func_calls"</span>: <span class="hljs-number">0</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bar</span>():</span>
<span class="hljs-meta">... </span>   counters[<span class="hljs-string">"func_calls"</span>] += <span class="hljs-number">1</span><font></font>
...<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">foo</span>():</span>
<span class="hljs-meta">... </span>   counters[<span class="hljs-string">"func_calls"</span>] += <span class="hljs-number">1</span>
<span class="hljs-meta">... </span>   bar()<font></font>
...<font></font>
<span class="hljs-meta">&gt;&gt;&gt; </span>foo()
<span class="hljs-meta">&gt;&gt;&gt; </span>counters[<span class="hljs-string">"func_calls"</span>]
<span class="hljs-number">2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この例では、辞書はカウンターを使用して関数呼び出しの数を追跡します。</font><font style="vertical-align: inherit;">呼び出し後、</font></font><code>foo()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期待どおりにカウンターが2増加しました。</font><font style="vertical-align: inherit;">そしてすべては可変性のおかげです</font></font><code>dict</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
忘れないでください。これは単なる</font><font style="vertical-align: inherit;">ポインタ動作の</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エミュレーション</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">であり、CおよびC ++の実際のポインタとは何の関係もありません。</font><font style="vertical-align: inherit;">これらの操作は、CまたはC ++で実行された場合よりもコストがかかると言えます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonオブジェクトの使用</font></font></h3><br>
<code>dict</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pythonでポインタをエミュレートする優れた方法ですが、使用したキー名を覚えておくのは面倒な場合があります。</font><font style="vertical-align: inherit;">特に、アプリケーションのさまざまな部分で辞書を使用する場合。</font><font style="vertical-align: inherit;">ここではカスタムPythonクラスが役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アプリケーションのメトリックを追跡する必要があるとしましょう。</font><font style="vertical-align: inherit;">迷惑な詳細を無視する優れた方法は、クラスを作成することです。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Metrics</span>(<span class="hljs-params">object</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
        self._metrics = {<font></font>
            <span class="hljs-string">"func_calls"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"cat_pictures_served"</span>: <span class="hljs-number">0</span>,<font></font>
        }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードはクラスを定義し</font></font><code>Metrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">それでもディクショナリを使用して、メンバー変数にある実際のデータを格納します</font></font><code>_metrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これにより、必要な可変性が得られます。</font><font style="vertical-align: inherit;">これらの値にアクセスするだけで済みます。</font><font style="vertical-align: inherit;">これを行うには、プロパティを使用します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Metrics</span>(<span class="hljs-params">object</span>):</span>
    <span class="hljs-comment"># ...</span><font></font>
<font></font>
<span class="hljs-meta">    @property</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func_calls</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self._metrics[<span class="hljs-string">"func_calls"</span>]<font></font>
<font></font>
<span class="hljs-meta">    @property</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cat_pictures_served</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self._metrics[<span class="hljs-string">"cat_pictures_served"</span>]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@property</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">デコレーターが初めての場合は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Pythonデコレーター</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">入門</font></a><font style="vertical-align: inherit;">記事を</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ご覧</font></a><font style="vertical-align: inherit;">ください</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この場合、デコレータを</font></font><code>@property</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用する</font></font><code>func_calls</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>cat_pictures_served</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、属性であるかのように</font><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">にアクセスできます</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>metrics = Metrics()
<span class="hljs-meta">&gt;&gt;&gt; </span>metrics.func_calls
<span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>metrics.cat_pictures_served
<span class="hljs-number">0</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの名前を属性として参照できるという事実は、これらの値がディクショナリに格納されているという事実から抽象化されていることを意味します。</font><font style="vertical-align: inherit;">さらに、属性名をより明示的にします。</font><font style="vertical-align: inherit;">もちろん、値を増やすことができるはずです。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Metrics</span>(<span class="hljs-params">object</span>):</span>
    <span class="hljs-comment"># ...</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inc_func_calls</span>(<span class="hljs-params">self</span>):</span>
        self._metrics[<span class="hljs-string">"func_calls"</span>] += <span class="hljs-number">1</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inc_cat_pics</span>(<span class="hljs-params">self</span>):</span>
        self._metrics[<span class="hljs-string">"cat_pictures_served"</span>] += <span class="hljs-number">1</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つの新しい方法を導入しました。</font></font><br>
<br>
<ol>
<li><code>inc_func_calls()</code></li>
<li><code>inc_cat_pics()</code></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らは辞書の意味を変え</font></font><code>metrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">これで、ポインターと同じ方法で変更できるクラスができました。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>metrics = Metrics()
<span class="hljs-meta">&gt;&gt;&gt; </span>metrics.inc_func_calls()
<span class="hljs-meta">&gt;&gt;&gt; </span>metrics.inc_func_calls()
<span class="hljs-meta">&gt;&gt;&gt; </span>metrics.func_calls
<span class="hljs-number">2</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションのさまざまな部分に</font><font style="vertical-align: inherit;">
アクセス</font></font><code>func_calls</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して呼び出し</font></font><code>inc_func_calls()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Pythonでポインターをエミュレート</font><font style="vertical-align: inherit;">できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは</font></font><code>metrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、アプリケーションのさまざまな部分で頻繁に使用および更新する必要</font><font style="vertical-align: inherit;">があるような状況で役立ち</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：この場合、明示的に作成</font></font><code>inc_func_calls()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">して</font></font><code>inc_cat_pics()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用する代わりに</font></font><code>@property.setter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ユーザーがこれらの値を任意の</font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">値、または辞書のような誤った値</font><font style="vertical-align: inherit;">に設定することはできません</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここに完全なクラスのソースコードがあります</font></font><code>Metrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Metrics</span>(<span class="hljs-params">object</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><font></font>
        self._metrics = {<font></font>
            <span class="hljs-string">"func_calls"</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">"cat_pictures_served"</span>: <span class="hljs-number">0</span>,<font></font>
        }<font></font>
<font></font>
<span class="hljs-meta">    @property</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func_calls</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self._metrics[<span class="hljs-string">"func_calls"</span>]<font></font>
<font></font>
<span class="hljs-meta">    @property</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cat_pictures_served</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">return</span> self._metrics[<span class="hljs-string">"cat_pictures_served"</span>]<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inc_func_calls</span>(<span class="hljs-params">self</span>):</span>
        self._metrics[<span class="hljs-string">"func_calls"</span>] += <span class="hljs-number">1</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">inc_cat_pics</span>(<span class="hljs-params">self</span>):</span>
        self._metrics[<span class="hljs-string">"cat_pictures_served"</span>] += <span class="hljs-number">1</span></code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ctypesを使用した実際のポインタ</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多分、Python、特にCPythonにポインタがあるのでしょうか？</font><font style="vertical-align: inherit;">組み込みのctypesモジュールを使用すると、Cのように実際のポインターを作成できます。ctypesを初めて使用する場合は、記事</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「CライブラリによるPythonの拡張」および「ctypes」モジュール</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を読むことができます</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、ポインタが必要なCライブラリを呼び出す必要がある場合に必要になることがあります。</font><font style="vertical-align: inherit;">上記のC関数に戻りましょう</font></font><code>add_one()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="python hljs">void add_one(int *x) {<font></font>
    *x += <span class="hljs-number">1</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このコードにより値</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が1 </font><font style="vertical-align: inherit;">増えることを思い出させてください</font><font style="vertical-align: inherit;">。これを使用するには、まずコードを共有オブジェクトにコンパイルします。</font><font style="vertical-align: inherit;">ファイルはに保存されていると想定しています。</font></font><code>add.c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはgccで実行できます。</font></font><br>
<br>
<pre><code class="python hljs">$ gcc -c -Wall -Werror -fpic add.c<font></font>
$ gcc -shared -o libadd1.so add.o</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のコマンドは、Cソースファイルをオブジェクトにコンパイルします</font></font><code>add.o</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">2番目のコマンドは、この無関係なオブジェクトを受け取り、共通オブジェクトを作成します</font></font><code>libadd1.so</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<code>libadd1.so</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">現在のディレクトリにあるはずです。</font><font style="vertical-align: inherit;">ctypesを使用してそれをPythonにロードできます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> ctypes
<span class="hljs-meta">&gt;&gt;&gt; </span>add_lib = ctypes.CDLL(<span class="hljs-string">"./libadd1.so"</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>add_lib.add_one<font></font>
&lt;_FuncPtr object at <span class="hljs-number">0x7f9f3b8852a0</span>&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ctypes.CDLLコードは、共有オブジェクトを表すオブジェクトを返します</font></font><code>libadd1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">定義したので</font></font><code>add_one()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、他のPythonオブジェクトと同じようにこの関数にアクセスできます。</font><font style="vertical-align: inherit;">ただし、関数を呼び出す前に、そのシグネチャを決定する必要があります。</font><font style="vertical-align: inherit;">そのため、Pythonは正しい型を関数に渡していることを認識します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちの場合、関数のシグネチャは数値へのポインタです。ctypesを使用すると、次のコードを使用してこれを設定できます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>add_one = add_lib.add_one
<span class="hljs-meta">&gt;&gt;&gt; </span>add_one.argtypes = [ctypes.POINTER(ctypes.c_int)]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは、C。の期待に合うように関数のシグネチャを設定します。このコードを間違った型で呼び出そうとすると、予期しない動作ではなく、美しい警告が表示されます。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>add_one(<span class="hljs-number">1</span>)<font></font>
Traceback (most recent call last):<font></font>
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<font></font>
ctypes.ArgumentError: argument <span class="hljs-number">1</span>: &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> '<span class="hljs-title">TypeError</span>'&gt;:</span> \<font></font>
expected LP_c_int instance instead of int</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pythonはエラーをスローし</font></font><code>add_one()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、整数だけでなくポインタを取得</font><font style="vertical-align: inherit;">し</font><font style="vertical-align: inherit;">たい</font><font style="vertical-align: inherit;">ことを説明し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">幸いにも、ctypesにはそのような関数へのポインターを渡す方法があります。</font><font style="vertical-align: inherit;">まず、Cスタイルの整数を宣言します。</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>x = ctypes.c_int()
<span class="hljs-meta">&gt;&gt;&gt; </span>x<font></font>
c_int(<span class="hljs-number">0</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでは</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、値を</font><font style="vertical-align: inherit;">持つ整数を作成しました</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ctypesは、</font></font><code>byref()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照によって変数を渡すことができる</font><font style="vertical-align: inherit;">便利な関数</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">提供</font><font style="vertical-align: inherit;">します。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照による</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">句</font><font style="vertical-align: inherit;">は、変数</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を値</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で渡すことの反意語</font><b><font style="vertical-align: inherit;">です</font></b><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
参照渡しの場合は、元の変数へのリンクを渡すので、変更が反映されます。</font><font style="vertical-align: inherit;">値で渡すと、ソース変数のコピーが取得され、このソース変数を変更しても影響はありません。</font><font style="vertical-align: inherit;">このコード</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を</font></font><code>add_one()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">して呼び出すこと</font><font style="vertical-align: inherit;">ができます：</font></font><br>
<br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>add_one(ctypes.byref(x))
<span class="hljs-number">998793640</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>x<font></font>
c_int(<span class="hljs-number">1</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いいね！</font><font style="vertical-align: inherit;">あなたの数は1増加しました。おめでとうございます。Pythonで実際のポインターを正常に使用できました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、Pythonオブジェクトとポインタの関係がよくわかりました。</font><font style="vertical-align: inherit;">名前と変数に関するいくつかの改良点は、教訓の現れであるように見えますが、これらの重要な用語の本質を理解すると、Pythonで変数を処理するためのメカニズムを理解しやすくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、Pythonでポインターをエミュレートする方法をいくつか学びました。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーバーヘッドの少ないポインターとして可変オブジェクトを使用する。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使いやすいカスタムPythonオブジェクトを作成します。</font></font><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ctypesモジュールで実際のポインターのロックを解除します。</font></font><br>
</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのメソッドを使用すると、言語によって提供されるメモリセキュリティを犠牲にすることなく、Pythonでポインタをエミュレートできます。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja454314/index.html">すべての開発者が知っておくべきオブジェクト指向プログラミングの10の原則</a></li>
<li><a href="../ja454316/index.html">産業忍者の足跡をたどって：オンラインの産業安全コンテストにご参加ください</a></li>
<li><a href="../ja454318/index.html">過去の響き。データを音に変換する歴史家のためのガイド</a></li>
<li><a href="../ja454320/index.html">労働市場アナリストとデータ科学者</a></li>
<li><a href="../ja454322/index.html">意見があります：ブラウザーのDANEテクノロジーが失敗しました</a></li>
<li><a href="../ja454326/index.html">ムーアを除く-コンピューターシステムのスケーリングの法則を他に誰が策定したか</a></li>
<li><a href="../ja454330/index.html">TechTrain 2018の10のハイライト：大衆、インターフェースなどのためのAI</a></li>
<li><a href="../ja454332/index.html">Telegramボットがデザイナーの先延ばしを克服し、デジタル代理店の収益を増加させるのにどのように貢献したか</a></li>
<li><a href="../ja454334/index.html">モト。ウィープAWS</a></li>
<li><a href="../ja454336/index.html">クライアント：-Facebookのコピーの費用はいくらですか？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>