<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßï üàöÔ∏è üôéüèæ Creating an additional kube-scheduler with a custom set of planning rules üë®üèº‚ÄçüöÄ üë∞üèº ‚õπüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kube-scheduler Kubernetes, . , Kubernetes- , , kube-scheduler‚Äôa . , , :
 

1. kube-scheduler 
2. scheduler API-
 

 .
  kube-scheduler‚Äôa
 

 , kube-sc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Creating an additional kube-scheduler with a custom set of planning rules</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nixys/blog/495494/"><p><img src="https://habrastorage.org/webt/2v/5m/bg/2v5mbgdvftcn9gww9aacrexsgbu.jpeg"></p><br>
<p>Kube-scheduler    Kubernetes,            . ,    Kubernetes-      ,       ,      kube-scheduler‚Äôa     .   ,        ,        :</p><a name="habracut"></a><br>
<ol>
<li> kube-scheduler    </li>
<li>   scheduler       API-</li>
</ol><br>
<p>                    .</p><br>
<h2 id="kratkaya-vvodnaya-o-rabote-kube-schedulera">    kube-scheduler‚Äôa</h2><br>
<p>    ,  kube-scheduler       ‚Äî      ,     .  ,   kube-scheduler‚Äôa ‚Äî   ,    API-          .</p><br>
<p> kube-scheduler   ,           predicates.               priorites.    ,    .   ,    ,  .      predicates (filtering)  priorites (scoring)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</p><br>
<h2 id="opisanie-tela-problemy">  </h2><br>
<p>     Kubernetes     Nixys,         ,              (~100  CronJob).     ,      ,        cron-,     CPU.   cron-         (24 vCPU  ). </p><br>
<p>          CronJob,       .  ,    kube-scheduler‚Äôa,     3-4  ,   ~20-30%   CPU  :</p><br>
<p><img src="https://habrastorage.org/webt/8g/re/_j/8gre_jquaswwizmtlsmgatksf5m.png"></p><br>
<p>    ,    cron-       .  ,  -           ,         6-8    ~40-60%   CPU:</p><br>
<p><img src="https://habrastorage.org/webt/ie/yz/1k/ieyz1kgrv-5yu5o5skk9sz3ytia.png"></p><br>
<p>              .</p><br>
<p>   kube-scheduler‚Äôa  10  (-v=10)   ,         .           :</p><br>
<pre><code class="plaintext hljs">resource_allocation.go:78] cronjob-1574828880-mn7m4 -&gt; Node03: BalancedResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1387 millicores 4161694720 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574828880-mn7m4 -&gt; Node02: BalancedResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1347 millicores 4444810240 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574828880-mn7m4 -&gt; Node03: LeastResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1387 millicores 4161694720 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574828880-mn7m4 -&gt; Node01: BalancedResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1687 millicores 4790840320 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574828880-mn7m4 -&gt; Node02: LeastResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1347 millicores 4444810240 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574828880-mn7m4 -&gt; Node01: LeastResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1687 millicores 4790840320 memory bytes, score 9<font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node01: NodeAffinityPriority, Score: (0)                                                                                       <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node02: NodeAffinityPriority, Score: (0)                                                                                       <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node03: NodeAffinityPriority, Score: (0)                                                                                       <font></font>
interpod_affinity.go:237] cronjob-1574828880-mn7m4 -&gt; Node01: InterPodAffinityPriority, Score: (0)                                                                                                        <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node01: TaintTolerationPriority, Score: (10)                                                                                   <font></font>
interpod_affinity.go:237] cronjob-1574828880-mn7m4 -&gt; Node02: InterPodAffinityPriority, Score: (0)                                                                                                        <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node02: TaintTolerationPriority, Score: (10)                                                                                   <font></font>
selector_spreading.go:146] cronjob-1574828880-mn7m4 -&gt; Node01: SelectorSpreadPriority, Score: (10)                                                                                                        <font></font>
interpod_affinity.go:237] cronjob-1574828880-mn7m4 -&gt; Node03: InterPodAffinityPriority, Score: (0)                                                                                                        <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node03: TaintTolerationPriority, Score: (10)                                                                                   <font></font>
selector_spreading.go:146] cronjob-1574828880-mn7m4 -&gt; Node02: SelectorSpreadPriority, Score: (10)                                                                                                        <font></font>
selector_spreading.go:146] cronjob-1574828880-mn7m4 -&gt; Node03: SelectorSpreadPriority, Score: (10)                                                                                                        <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node01: SelectorSpreadPriority, Score: (10)                                                                                    <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node02: SelectorSpreadPriority, Score: (10)                                                                                    <font></font>
generic_scheduler.go:726] cronjob-1574828880-mn7m4_project-stage -&gt; Node03: SelectorSpreadPriority, Score: (10)                                                                                    <font></font>
generic_scheduler.go:781] Host Node01 =&gt; Score 100043                                                                                                                                                                        <font></font>
generic_scheduler.go:781] Host Node02 =&gt; Score 100043                                                                                                                                                                        <font></font>
generic_scheduler.go:781] Host Node03 =&gt; Score 100043</code></pre><br>
<p>..   ,   ,             .        :</p><br>
<pre><code class="plaintext hljs">resource_allocation.go:78] cronjob-1574211360-bzfkr -&gt; Node02: BalancedResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1587 millicores 4581125120 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574211360-bzfkr -&gt; Node03: BalancedResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1087 millicores 3532549120 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574211360-bzfkr -&gt; Node02: LeastResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1587 millicores 4581125120 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574211360-bzfkr -&gt; Node01: BalancedResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 987 millicores 3322833920 memory bytes, score 9<font></font>
resource_allocation.go:78] cronjob-1574211360-bzfkr -&gt; Node01: LeastResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 987 millicores 3322833920 memory bytes, score 9 <font></font>
resource_allocation.go:78] cronjob-1574211360-bzfkr -&gt; Node03: LeastResourceAllocation, capacity 23900 millicores 67167186944 memory bytes, total request 1087 millicores 3532549120 memory bytes, score 9<font></font>
interpod_affinity.go:237] cronjob-1574211360-bzfkr -&gt; Node03: InterPodAffinityPriority, Score: (0)                                                                                                        <font></font>
interpod_affinity.go:237] cronjob-1574211360-bzfkr -&gt; Node02: InterPodAffinityPriority, Score: (0)                                                                                                        <font></font>
interpod_affinity.go:237] cronjob-1574211360-bzfkr -&gt; Node01: InterPodAffinityPriority, Score: (0)                                                                                                        <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node03: TaintTolerationPriority, Score: (10)                                                                                   <font></font>
selector_spreading.go:146] cronjob-1574211360-bzfkr -&gt; Node03: SelectorSpreadPriority, Score: (10)                                                                                                        <font></font>
selector_spreading.go:146] cronjob-1574211360-bzfkr -&gt; Node02: SelectorSpreadPriority, Score: (10)                                                                                                        <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node02: TaintTolerationPriority, Score: (10)                                                                                   <font></font>
selector_spreading.go:146] cronjob-1574211360-bzfkr -&gt; Node01: SelectorSpreadPriority, Score: (10)                                                                                                        <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node03: NodeAffinityPriority, Score: (0)                                                                                       <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node03: SelectorSpreadPriority, Score: (10)                                                                                    <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node02: SelectorSpreadPriority, Score: (10)                                                                                    <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node01: TaintTolerationPriority, Score: (10)                                                                                   <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node02: NodeAffinityPriority, Score: (0)                                                                                       <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node01: NodeAffinityPriority, Score: (0)                                                                                       <font></font>
generic_scheduler.go:726] cronjob-1574211360-bzfkr_project-stage -&gt; Node01: SelectorSpreadPriority, Score: (10)                                                                                    <font></font>
generic_scheduler.go:781] Host Node03 =&gt; Score 100041                                                                                                                                                                        <font></font>
generic_scheduler.go:781] Host Node02 =&gt; Score 100041                                                                                                                                                                        <font></font>
generic_scheduler.go:781] Host Node01 =&gt; Score 100038</code></pre><br>
<p>  ,          ,        ,   .     ,       .</p><br>
<p>        ‚Äî  ,          ,  ,    kube-scheduler‚Äô.        :</p><br>
<ol>
<li>    (10)       .       ,    ,   ,          ,        .  ,   ,   -     ‚Äú ‚Äù,               .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">issue</a>  Kubernetes  Github.         ,        Kubernetes v1.15,1.16  1.17.</li>
<li>             kube-scheduler. ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>   ,             priorites.       kube-scheduler‚Äôa    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</li>
</ol><br>
<p> ,     ,        ImageLocalityPriority,    ,      ,    . . .       cron-     ,       docker registry,           . </p><br>
<p>    ,          ImageLocalityPriority, ,    ,          ,     .  -  ImageLocalityPriority     ,      - . - ,            priorites  kube-scheduler‚Äôa,          .</p><br>
<h2 id="postanovka-zadachi"> </h2><br>
<p> ,      ,     Kubernetes (    kube-scheduler)   .             .  ,       ,        ‚Äî   scheduler‚Äôa   .     cron- ‚Äî      .        kube-scheduler‚Äôa,           scheduler.</p><br>
<p>   Deployment  kube-scheduler‚Äôa   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>. ,  ,   Deployment           kube-scheduler,      kube-scheduler  Static Pod,      Kubelet.  ,        kube-scheduler‚Äô:</p><br>
<ol>
<li>     Static Pod    </li>
<li>          kube-scheduler‚Äô</li>
<li>           (LeastRequestedPriority)</li>
</ol><br>
<h2 id="realizaciya-resheniya"> </h2><br>
<p>  ,        Kubernetes v1.14.7, ..      .        kube-scheduler‚Äôa.      (/etc/kubernetes/manifests/kube-scheduler.yaml)      :</p><br>
<pre><code class="plaintext hljs">kind: Pod<font></font>
metadata:<font></font>
  labels:<font></font>
    component: scheduler<font></font>
    tier: control-plane<font></font>
  name: kube-scheduler-cron<font></font>
  namespace: kube-system<font></font>
spec:<font></font>
      containers:<font></font>
      - command:<font></font>
        - /usr/local/bin/kube-scheduler<font></font>
        - --address=0.0.0.0<font></font>
        - --port=10151<font></font>
        - --secure-port=10159<font></font>
        - --config=/etc/kubernetes/scheduler-custom.conf<font></font>
        - --authentication-kubeconfig=/etc/kubernetes/scheduler.conf<font></font>
        - --authorization-kubeconfig=/etc/kubernetes/scheduler.conf<font></font>
        - --v=2<font></font>
        image: gcr.io/google-containers/kube-scheduler:v1.14.7<font></font>
        imagePullPolicy: IfNotPresent<font></font>
        livenessProbe:<font></font>
          failureThreshold: 8<font></font>
          httpGet:<font></font>
            host: 127.0.0.1<font></font>
            path: /healthz<font></font>
            port: 10151<font></font>
            scheme: HTTP<font></font>
          initialDelaySeconds: 15<font></font>
          timeoutSeconds: 15<font></font>
        name: kube-scheduler-cron-container<font></font>
        resources:<font></font>
          requests:<font></font>
            cpu: '0.1'<font></font>
        volumeMounts:<font></font>
        - mountPath: /etc/kubernetes/scheduler.conf<font></font>
          name: kube-config<font></font>
          readOnly: true<font></font>
        - mountPath: /etc/localtime<font></font>
          name: localtime<font></font>
          readOnly: true<font></font>
        - mountPath: /etc/kubernetes/scheduler-custom.conf<font></font>
          name: scheduler-config<font></font>
          readOnly: true<font></font>
        - mountPath: /etc/kubernetes/scheduler-custom-policy-config.json<font></font>
          name: policy-config<font></font>
          readOnly: true<font></font>
      hostNetwork: true<font></font>
      priorityClassName: system-cluster-critical<font></font>
      volumes:<font></font>
      - hostPath:<font></font>
          path: /etc/kubernetes/scheduler.conf<font></font>
          type: FileOrCreate<font></font>
        name: kube-config<font></font>
      - hostPath:<font></font>
          path: /etc/localtime<font></font>
        name: localtime<font></font>
      - hostPath:<font></font>
          path: /etc/kubernetes/scheduler-custom.conf<font></font>
          type: FileOrCreate<font></font>
        name: scheduler-config<font></font>
      - hostPath:<font></font>
          path: /etc/kubernetes/scheduler-custom-policy-config.json<font></font>
          type: FileOrCreate<font></font>
        name: policy-config</code></pre><br>
<p>   :</p><br>
<ol>
<li>      kube-scheduler-cron</li>
<li>   10151  10159     <code>hostNetwork: true</code>        ,    kube-scheduler (10251  10259)</li>
<li>   --config        </li>
<li>    (scheduler-custom.conf)     (scheduler-custom-policy-config.json)  </li>
</ol><br>
<p> ,   kube-scheduler‚Äô  ,  .    :</p><br>
<pre><code class="plaintext hljs">kubectl edit clusterrole system:kube-scheduler</code></pre><br>
<pre><code class="plaintext hljs">...<font></font>
   resourceNames:<font></font>
    - kube-scheduler<font></font>
    - kube-scheduler-cron<font></font>
...</code></pre><br>
<p>   ,           :</p><br>
<ul>
<li>  (scheduler-custom.conf)<br>
    kube-scheduler‚Äôa    <code>--write-config-to</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.      /etc/kubernetes/scheduler-custom.conf     :</li>
</ul><br>
<pre><code class="plaintext hljs">apiVersion: kubescheduler.config.k8s.io/v1alpha1<font></font>
kind: KubeSchedulerConfiguration<font></font>
schedulerName: kube-scheduler-cron<font></font>
bindTimeoutSeconds: 600<font></font>
clientConnection:<font></font>
  acceptContentTypes: ""<font></font>
  burst: 100<font></font>
  contentType: application/vnd.kubernetes.protobuf<font></font>
  kubeconfig: /etc/kubernetes/scheduler.conf<font></font>
  qps: 50<font></font>
disablePreemption: false<font></font>
enableContentionProfiling: false<font></font>
enableProfiling: false<font></font>
failureDomains: kubernetes.io/hostname,failure-domain.beta.kubernetes.io/zone,failure-domain.beta.kubernetes.io/region<font></font>
hardPodAffinitySymmetricWeight: 1<font></font>
healthzBindAddress: 0.0.0.0:10151<font></font>
leaderElection:<font></font>
  leaderElect: true<font></font>
  leaseDuration: 15s<font></font>
  lockObjectName: kube-scheduler-cron<font></font>
  lockObjectNamespace: kube-system<font></font>
  renewDeadline: 10s<font></font>
  resourceLock: endpoints<font></font>
  retryPeriod: 2s<font></font>
metricsBindAddress: 0.0.0.0:10151<font></font>
percentageOfNodesToScore: 0<font></font>
algorithmSource:<font></font>
   policy:<font></font>
     file:<font></font>
       path: "/etc/kubernetes/scheduler-custom-policy-config.json"</code></pre><br>
<p>   :</p><br>
<ol>
<li>  schedulerName    kube-scheduler-cron.</li>
<li>  <code>lockObjectName</code>        ,   <code>leaderElect</code>    true ( ,     -,    false). </li>
<li>          <code>algorithmSource</code>.</li>
</ol><br>
<p>      ,       <code>leaderElection</code>.      (<code>leaderElect</code>)    ()    kube-scheduler‚Äôa       endpoint (<code>resourceLock</code>)   kube-scheduler-cron (<code>lockObjectName</code>)    kube-system (<code>lockObjectNamespace</code>).     Kubernetes      (   kube-scheduler)    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.</p><br>
<ul>
<li>   (scheduler-custom-policy-config.json)<br>
     ‚Äî        kube-scheduler      .            kube-scheduler‚Äô     .        /etc/kubernetes/scheduler-custom-policy-config.json  :</li>
</ul><br>
<pre><code class="plaintext hljs">{<font></font>
  "kind": "Policy",<font></font>
  "apiVersion": "v1",<font></font>
  "predicates": [<font></font>
    {<font></font>
      "name": "GeneralPredicates"<font></font>
    }<font></font>
  ],<font></font>
  "priorities": [<font></font>
    {<font></font>
      "name": "ServiceSpreadingPriority",<font></font>
      "weight": 1<font></font>
    },<font></font>
    {<font></font>
      "name": "EqualPriority",<font></font>
      "weight": 1<font></font>
    },<font></font>
    {<font></font>
      "name": "LeastRequestedPriority",<font></font>
      "weight": 1<font></font>
    },<font></font>
    {<font></font>
      "name": "NodePreferAvoidPodsPriority",<font></font>
      "weight": 10000<font></font>
    },<font></font>
    {<font></font>
      "name": "NodeAffinityPriority",<font></font>
      "weight": 1<font></font>
    }<font></font>
  ],<font></font>
  "hardPodAffinitySymmetricWeight" : 10,<font></font>
  "alwaysCheckAllPredicates" : false<font></font>
}</code></pre><br>
<p> , kube-scheduler    ,           GeneralPredicates (      PodFitsResources, PodFitsHostPorts, HostName  MatchNodeSelector).              priorities.       ,       . ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="></a>.                .</p><br>
<p>  kube-scheduler‚Äô,      ,  kube-scheduler-custom.yaml      /etc/kubernetes/manifests   -.    , Kubelet     ,      kube-scheduler‚Äô     ,       :</p><br>
<pre><code class="plaintext hljs">Creating scheduler from configuration: {{ } [{GeneralPredicates &lt;nil&gt;}] [{ServiceSpreadingPriority 1 &lt;nil&gt;} {EqualPriority 1 &lt;nil&gt;} {LeastRequestedPriority 1 &lt;nil&gt;} {NodePreferAvoidPodsPriority 10000 &lt;nil&gt;} {NodeAffinityPriority 1 &lt;nil&gt;}] [] 10 false}<font></font>
Registering predicate: GeneralPredicates<font></font>
Predicate type GeneralPredicates already registered, reusing.<font></font>
Registering priority: ServiceSpreadingPriority<font></font>
Priority type ServiceSpreadingPriority already registered, reusing.<font></font>
Registering priority: EqualPriority<font></font>
Priority type EqualPriority already registered, reusing.<font></font>
Registering priority: LeastRequestedPriority<font></font>
Priority type LeastRequestedPriority already registered, reusing.<font></font>
Registering priority: NodePreferAvoidPodsPriority<font></font>
Priority type NodePreferAvoidPodsPriority already registered, reusing.<font></font>
Registering priority: NodeAffinityPriority<font></font>
Priority type NodeAffinityPriority already registered, reusing.<font></font>
Creating scheduler with fit predicates 'map[GeneralPredicates:{}]' and priority functions 'map[EqualPriority:{} LeastRequestedPriority:{} NodeAffinityPriority:{} NodePreferAvoidPodsPriority:{} ServiceSpreadingPriority:{}]'</code></pre><br>
<p>     spec‚Äô  CronJob‚Äô,       pod‚Äô     kube-scheduler:</p><br>
<pre><code class="plaintext hljs">...<font></font>
 jobTemplate:<font></font>
    spec:<font></font>
      template:<font></font>
        spec:<font></font>
          schedulerName: kube-scheduler-cron<font></font>
...</code></pre><br>
<h2 id="zaklyuchenie"></h2><br>
<p>      kube-scheduler     ,      kubelet.           kube-scheduler‚Äô  ,     -   . </p><br>
<p>        kube-scheduler,   cron-    . ,  cron-,      . ,    cron-     ,     ,        -  .    kube-scheduler‚Äô,     cron-   .</p><br>
<h2 id="takzhe-chitayte-drugie-stati-v-nashem-bloge">      :</h2><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">   Kubernetes-  Calico</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">      Calico</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> Linux conntrack    </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">4  iota-</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="> Kubernetes-  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Zero Downtime Deployment   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=">Kubernetes:       ?</a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en495480/index.html">Creating Python bindings for C / C ++ libraries using SIP. Part 1</a></li>
<li><a href="../en495484/index.html">How Unix pipelines are implemented</a></li>
<li><a href="../en495486/index.html">New Threats to Confidential Data: Acronis Global Survey Results</a></li>
<li><a href="../en495490/index.html">Testing and QA section at the DUMP 2020 conference. What to expect this year? Spoiler: a pair of painkillers and cherries</a></li>
<li><a href="../en495492/index.html">Unreal Engine 4 iOS Game Release Features</a></li>
<li><a href="../en495500/index.html">Alexey Klyanin: ‚ÄúUntil 2018, I used OSM only as a substrate in my blog‚Äù</a></li>
<li><a href="../en495504/index.html">Kingston KC600 512GB: Solid Rocket</a></li>
<li><a href="../en495508/index.html">Does the browser need a voice?</a></li>
<li><a href="../en495512/index.html">What is the best way to warm up pizza?</a></li>
<li><a href="../en495516/index.html">The Visitor template is deprecated for Kotlin, but it's worth knowing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>