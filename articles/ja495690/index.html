<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤛🏽 🏤 🛸 Web Audio APIの概念 🧛🏽 👽 👨🏿‍🍳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは！
 
 この記事では、Web Audio API（WAA）が動作する音楽理論のいくつかの概念について説明します。これらの概念を知っていると、アプリケーションでオーディオを設計するときに情報に基づいた決定を行うことができます。この記事は、経験豊富なサウンドエンジニアにはなりませんが、WAA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Web Audio APIの概念</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/495690/"><img src="https://habrastorage.org/webt/_r/j3/qd/_rj3qdi2rvk5vwbvfskmddp8yic.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
こんにちは！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事では、Web Audio API（WAA）が動作する音楽理論のいくつかの概念について説明します。</font><font style="vertical-align: inherit;">これらの概念を知っていると、アプリケーションでオーディオを設計するときに情報に基づいた決定を行うことができます。</font><font style="vertical-align: inherit;">この記事は、経験豊富なサウンドエンジニアにはなりませんが、WAAが動作する理由を理解するのに役立ちます。</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーディオ回路</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAAの本質は、オーディオコンテキスト内でサウンドを使用していくつかの操作を実行することです。このAPIは、モジュラールーティング用に特別に設計されています。サウンドの基本的な操作は、相互接続されてルーティング図（オーディオルーティンググラフ）を形成するオーディオノードです。さまざまなタイプのチャネルを持ついくつかのソースは、単一のコンテキスト内で処理されます。このモジュラー設計は、動的な効果を持つ複雑な機能を作成するために必要な柔軟性を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オーディオノードは入力と出力を介して相互接続され、1つ以上のソースから始まり、1つ以上のノードを通過し、宛先で終わるチェーンを形成します。</font><font style="vertical-align: inherit;">原則として、たとえば一部のオーディオデータを視覚化するだけの場合は、宛先なしで実行できます。</font><font style="vertical-align: inherit;">典型的なWebオーディオワークフローは次のようになります。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーディオコンテキストを作成する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテキスト内で、&lt;audio&gt;、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オシレーター（サウンドジェネレーター）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ストリーム</font><font style="vertical-align: inherit;">などのソースを作成します。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リバーブ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、バイカッドフィルター、パンナー、コンプレッサー</font><font style="vertical-align: inherit;">などのエフェクトノードを作成</font><font style="vertical-align: inherit;">する</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーのコンピューターのスピーカーなど、オーディオの出力先を選択します</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目的地へのエフェクトを介してソース間の接続を確立する</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/76/wq/vv/76wqvvwgifik6zojizkg_dxxb9q.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">チャンネル指定</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多くの場合、使用可能なオーディオチャネルの数は数値形式で示されます（2.0や5.1など）。</font><font style="vertical-align: inherit;">これをチャネル指定といいます。</font><font style="vertical-align: inherit;">最初の桁は、信号に含まれる周波数の全範囲を示します。</font><font style="vertical-align: inherit;">2桁目は、低周波エフェクト出力- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サブウーファー用に</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">予約されているチャンネル数を示します</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各入力または出力は、特定のオーディオ回路に従って構築された1つ以上のチャネルで構成されます。</font><font style="vertical-align: inherit;">モノ、ステレオ、クワッド、5.1など、さまざまな個別のチャネル構造があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7z/rn/xy/7zrnxy_vaeyntkb3o5hgvbvs_k4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
音源はさまざまな方法で取得できます。</font><font style="vertical-align: inherit;">音は次のとおりです。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音声ノード（オシレーターなど）を介してJavaScriptによって生成されます</font></font></li>
<li><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">PCM（パルスコード変調）</font></a><font style="vertical-align: inherit;">を使用して生データから作成</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTMLメディア要素（&lt;video&gt;や&lt;audio&gt;など）から派生</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebRTCメディアストリーム（ウェブカメラやマイクなど）から派生</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーディオデータ：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプルの内容</font></font></a></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプリングと</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、連続信号を離散（分割）（アナログからデジタル）信号に変換することを意味します。</font><font style="vertical-align: inherit;">つまり、ライブコンサートなどの連続的な音波は、サンプルのシーケンスに変換されます。これにより、コンピューターはオーディオを個別のブロックで処理できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーディオバッファ：フレーム、サンプル、チャネル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AudioBufferは、パラメーターとしてチャネル数（1はモノ、2はステレオなど）、長さ-バッファー内のサンプルフレーム数、サンプリング周波数-1秒あたりのフレーム数を受け入れます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サンプルは、単純な32ビットの浮動小数点値（float32）です。これは、特定の時点および特定のチャネル（左または右など）でのオーディオストリームの値です。サンプルフレームまたはフレームは、特定の時点で再生されるすべてのチャネルの値のセットです：同時に再生されるすべてのチャネルのすべてのサンプル（ステレオ用に2つ、5.1用に6つなど）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
サンプリングレートは、ヘルツ（Hz）で測定された1秒で再生されるサンプル（またはフレーム内のすべてのサンプルが一度に再生されるため、フレーム）の数です。周波数が高いほど、音質が良くなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
44100 Hzの周波数で再生された、1秒の長さのモノラルおよびステレオバッファーを見てみましょう。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モノバッファーには44100サンプルと44100フレームがあります。</font><font style="vertical-align: inherit;">「length」プロパティの値は44100です</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステレオバッファーには88,200のサンプルがありますが、44,100フレームもあります。</font><font style="vertical-align: inherit;">“ length”プロパティの値は44100になります-長さはフレームの数と同じです</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/uq/hp/pq/uqhppqfp_yz_k_hk_axza9j7qgm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バッファの再生が始まると、最初にサンプルの左端のフレームが聞こえ、次に最も近い右のフレームが聞こえます。ステレオの場合、両方のチャンネルが同時に聞こえます。サンプルフレームはチャネル数に依存せず、非常に正確なオーディオ処理の機会を提供します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：フレーム数から時間を秒単位で取得するには、フレーム数をサンプリングレートで除算する必要があります。サンプル数からフレーム数を取得するには、後者をチャネル数で割ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> context = <span class="hljs-keyword">new</span> AudioContext()
<span class="hljs-keyword">let</span> buffer = context.createBuffer(<span class="hljs-number">2</span>, <span class="hljs-number">22050</span>, <span class="hljs-number">44100</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：デジタルオーディオでは、44100 Hzまたは44.1 kHzが標準のサンプリング周波数です。しかし、なぜ44.1 kHzなのか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、可聴周波数の範囲（人間の耳で識別できる周波数）が20〜20,000 Hzと異なるためです。コテルニコフの定理によれば、サンプリング周波数は信号スペクトルの最高周波数の2倍以上でなければなりません。したがって、サンプリング周波数は40 kHzより大きくする必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">ローパスフィルター</font></a><font style="vertical-align: inherit;">を使用して信号をフィルター処理する必要があります</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプリングする前に、そうしないと、スペクトルの「テール」（周波数スワッピング、周波数マスキング、エイリアシング）の重複が発生し、再構築された信号の形状が歪むことになります。理想的には、ローパスフィルターは20 kHz未満（減衰なし）の周波数を通過させ、20 kHzを超える周波数をドロップする必要があります。実際には、（通過帯域と抑制帯域の間に）周波数が部分的に減衰する遷移帯域が必要です。これを行うためのより簡単で経済的な方法は、交換防止フィルターを使用することです。 44.1 kHzのサンプリング周波数の場合、遷移帯域は2.05 kHzです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記の例では、44100 Hz（標準）、0.5秒の長さ（22050フレーム/ 44100 Hz = 0.5秒）の周波数でオーディオコンテキストで再生される2つのチャネルを持つステレオバッファーを取得します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> context = <span class="hljs-keyword">new</span> AudioContext()
<span class="hljs-keyword">let</span> buffer = context.createBuffer(<span class="hljs-number">1</span>, <span class="hljs-number">22050</span>, <span class="hljs-number">22050</span>)
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、1チャンネルのモノバッファーを取得し、周波数44100 Hzのオーディオコンテキストで再生すると、44100 Hzにオーバーサンプリングし（フレームを44100に増やし）、1秒の長さになります（44100フレーム/ 44100 Hz = 1秒）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：オーディオのリサンプリング（「リサンプリング」）は、画像のサイズ変更（「リサイズ」）とよく似ています。</font><font style="vertical-align: inherit;">16x16の画像があるが、この領域を32x32のサイズで塗りつぶしたいとします。</font><font style="vertical-align: inherit;">サイズ変更を行います。</font><font style="vertical-align: inherit;">結果の品質は低下しますが（ズームアルゴリズムによってはぼやけたり、破れたりする場合があります）、機能します。</font><font style="vertical-align: inherit;">リサンプリングされたオーディオも同じです。スペースを節約しますが、実際には高品質のサウンドを実現することはほとんどありません。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平面およびストライプバッファー</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAAは平面バッファー形式を使用します。</font><font style="vertical-align: inherit;">左右のチャネルは次のように相互作用します。</font></font><br>
<br>
<pre><code class="javascript hljs">LLLLLLLLLLLLLLLLRRRRRRRRRRRRRRRR ( ,   <span class="hljs-number">16</span> )
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この場合、各チャネルは他のチャネルから独立して動作します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の方法は、代替フォーマットを使用することです：</font></font><br>
<br>
<pre><code class="javascript hljs">LRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLR ( ,   <span class="hljs-number">16</span> )
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このフォーマットは、MP3デコードによく使用されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAAはサウンド処理により適しているため、平面フォーマットのみを使用します。</font><font style="vertical-align: inherit;">データが再生のためにサウンドカードに送信されると、プレーナーフォーマットは交互に変換されます。</font><font style="vertical-align: inherit;">MP3をデコードすると、その逆が変換されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オーディオチャンネル</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
異なるバッファーには、異なる数のチャネルが含まれます。単純なモノ（1チャネル）とステレオ（左と右のチャネル）から、各チャネルに異なる数のサンプルを持つクワッドや5.1などのより複雑なセットまで、豊かな（豊かな）サウンドを提供します。</font><font style="vertical-align: inherit;">チャネルは通常、略語で表されます。</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単核症</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：M：モノラル</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ステレオ</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：L：左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1：R：右</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quadro</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：L：左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1：R：右</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3：SL：追加の左（環境を作成する左チャネル、左サラウンド）</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4：SR：追加の右（サラウンド右）</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0：L：左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1：R：右</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2：C：中央</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3：LFE：サブウーファー</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4：SL：左左</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5：SR：右右</font></font><br>
 </td>
</tr>
</tbody></table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アップミキシングとダウンミキシング</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力と出力のチャンネル数が一致しない場合は、ミックスアップまたはダウンを適用します。</font><font style="vertical-align: inherit;">ミキシングはAudioNode.channelInterpretationプロパティによって制御されます。</font></font><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力チャンネル</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力チャンネル</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混合ルール</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">標準チャネルミキシングスキーム-スピーカー（スピーカー）にchannelInterpretationプロパティが設定されている場合に使用されます。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1（モノ）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2（ステレオ）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モノラルからステレオまでミックスアップ。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力チャネルMは、両方の出力チャネル（LおよびR）に使用されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
output.L = input.M </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
output.R = input.M</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1（モノ）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4（クワッド）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モノラルからクワッドまでミックスアップします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
入力チャンネルMは、メインチャンネル（LおよびR）に使用されます。</font><font style="vertical-align: inherit;">追加のチャンネルは消音されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
output.L = input.M </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
output.R = input.M </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
output.SL = 0 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
output.SR = 0</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1（モノ）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6（5.1）</font></font></td>
<td>     5.1.<br>
       ©.   (L, R, LFE, SL  SR) .<br>
output.L = 0<br>
output.R = 0<br>
output.C = input.M<br>
output.LFE = 0<br>
output.SL = 0<br>
output.SR = 0</td>
</tr>
<tr>
<td>2 ()</td>
<td>1 ()</td>
<td>     .<br>
   (L  R)     (M).<br>
output.M = 0.5 * (input.L + input.R)</td>
</tr>
<tr>
<td>2 ()</td>
<td>4 ()</td>
<td>     .<br>
  L  R      (L  R).   (SL  SR) .<br>
output.L = input.L<br>
output.R = input.R<br>
output.SL = 0<br>
output.SR = 0</td>
</tr>
<tr>
<td>2 ()</td>
<td>6 (5.1)</td>
<td>     5.1.<br>
  L  R      (L  R).    (SL  SR),   ©   (LFE) .<br>
output.L = input.L<br>
output.R = input.R<br>
output.C = 0<br>
output.LFE = 0<br>
output.SL = 0<br>
output.SR = 0</td>
</tr>
<tr>
<td>4 ()</td>
<td>1 ()</td>
<td>     .<br>
    (L, R, SL  SR)      (M).<br>
output.M = 0.25 * (input.L + input.R + input.SL + input.SR)</td>
</tr>
<tr>
<td>4 ()</td>
<td>2 ()</td>
<td>     .<br>
    (L  SL)       (L).   (R  SR) —   ®.<br>
output.L = 0.5 * (input.L + input.SL)<br>
output.R = 0.5 * (input.R + input.SR)</td>
</tr>
<tr>
<td>4 ()</td>
<td>6 (5.1)</td>
<td>     5.1.<br>
  L, R, SL  SR     .    ©   (LFE) .<br>
output.L = input.L<br>
output.R = input.R<br>
output.C = 0<br>
output.LFE = 0<br>
output.SL = input.SL<br>
output.SR = input.SR</td>
</tr>
<tr>
<td>6 (5.1)</td>
<td>1 ()</td>
<td>   5.1  .<br>
 (L  SL),  (R  SR)   ()     .   ,     ,       —      √2 / 2.  (LFE) .<br>
output.M = 0.7071 * (input.L + input.R) + input.C + 0.5 * (input.SL + input.SR)</td>
</tr>
<tr>
<td>6 (5.1)</td>
<td>2 ()</td>
<td>   5.1  .<br>
  ©       (SL  SR)         (L  R).             √2 / 2.  (LFE) .<br>
output.L = input.L + 0.7071 * (input.C + input.SL)<br>
output.R = input.R + 0.7071 * (input.C + input.SR)</td>
</tr>
<tr>
<td>6 (5.1)</td>
<td>4 ()</td>
<td>   5.1  .<br>
  ()      (L  R).           √2 / 2.     .  (LFE) .<br>
output.L = input.L + 0.7071 * input.C<br>
output.R = input.R + 0.7071 * input.C<br>
output.SL = input.SL<br>
output.SR = input.SR</td>
</tr>
<tr>
<td colspan="3">    — ,   channelInterpretation   discrete.</td>
</tr>
<tr>
<td> (x)</td>
<td> (y),  x&lt;y</td>
<td>  .<br>
        (   ). ,     , .</td>
</tr>
<tr>
<td> (x)</td>
<td> (y),  x&gt;y</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各出力チャネルは、（同じインデックスを持つ）その入力アナログと組み合わされます。</font><font style="vertical-align: inherit;">対応する出力チャネルがないチャネルは破棄されます。</font></font></td>
</tr>
</tbody>
</table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可視化</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
視覚化は、振幅や周波数に関するデータなどの出力オーディオデータの受信と、グラフィックテクノロジーを使用したその後の処理に基づいています。</font><font style="vertical-align: inherit;">WAAには、通過する信号を歪まないAnalyzerNodeがあります。</font><font style="vertical-align: inherit;">同時に、オーディオからデータを抽出して、さらに＆ltcanvas&gt;などに転送することもできます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w3/03/tk/w303tkjj1p7imhxsaegp0vtabyu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次のメソッドを使用してデータを抽出できます。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AnalyzerNode.getFloatByteFrequencyData（）-現在の周波数データをFloat32Arrayにコピーします</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AnalyzerNode.getByteFrequencyData（）-現在の周波数データをUint8Array（符号なしバイト配列）にコピーします</font></font></li>
<li>AnalyserNode.getFloatTimeDomainData() —            Float32Array</li>
<li>AnalyserNode.getByteTimeDomainData() —            Uint8Array</li>
</ul><br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オーディオ空間化（PannerNodeおよびAudioListenerによって処理される）を使用すると、空間内の特定のポイントでの信号の位置と方向、およびリスナーの位置をシミュレートできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
パンナーの位置は、右手デカルト座標を使用して記述されます。</font><font style="vertical-align: inherit;">モーションには</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ドップラー効果の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作成に必要な速度ベクトル</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">が使用され</font></a><font style="vertical-align: inherit;">、方向には、指向性コーンが使用されます。</font><font style="vertical-align: inherit;">このコーンは、多方向音源の場合、非常に大きくなる可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/mj/tz/rlmjtz9l-3elsukt6gdnd81xbe4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リスナーの位置は、次のように説明されます。動き-速度ベクトルを使用して、リスナーの頭の方向-前面と上面の2つの方向ベクトルを使用します。</font><font style="vertical-align: inherit;">スナップは、リスナーの頭と鼻の上部に直角に行われます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7q/-w/hk/7q-whktcaasufh9jfy8z6cigrbc.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ジャンクションと分岐</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
接続は、ChannelMergerNodeが複数の入力モノソースを受信し、それらを単一のマルチチャネル出力信号に結合するプロセスを記述します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vk/bv/qh/vkbvqhpvhnghgf55bx9umic_yhc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
分岐は逆のプロセスです（ChannelSplitterNodeを介して実装されます）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6d/9c/y7/6d9cy7_hiinrgqscxxdsbe3x-zy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WAAの使用例は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちらにあります</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例のソースコードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こちら</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここだ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それはすべてどのように機能するかについての記事。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
清聴ありがとうございました。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja495678/index.html">コンペティションVK Sup。MLを追跡します。4位。どうやって？</a></li>
<li><a href="../ja495682/index.html">AndroidアプリケーションのAPI逆</a></li>
<li><a href="../ja495684/index.html">エンドユーザーとのやり取りがコードを改善する5つの理由</a></li>
<li><a href="../ja495686/index.html">パーソナルラスベガス、またはブラウザー拡張機能のゲーム</a></li>
<li><a href="../ja495688/index.html">Active DirectoryベースのZimbraコラボレーションOSEユーザー同期</a></li>
<li><a href="../ja495692/index.html">医師を助けるDIYとオープンソース</a></li>
<li><a href="../ja495694/index.html">モバイルアプリ参考サービス</a></li>
<li><a href="../ja495696/index.html">プリンスオブペルシャクリエイターがApple IIのメモリ制限を克服する方法</a></li>
<li><a href="../ja495698/index.html">写真のクライアントサーバーアーキテクチャ</a></li>
<li><a href="../ja495700/index.html">ドゥームボーイESP32</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>