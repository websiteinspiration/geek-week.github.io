<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïù üçä üë®üèø‚Äçüíª Services Web dans Oracle üçØ üßùüèæ üìâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Services Weblargement utilis√© pour l'int√©gration entre les composants d'un syst√®me ou entre diff√©rents syst√®mes. La popularit√© des services Web comme ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Services Web dans Oracle</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/502030/"><img src="https://habrastorage.org/webt/bn/fa/9y/bnfa9ydnf9mlh7nubs0t86xfdm4.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services Web</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">largement utilis√© pour l'int√©gration entre les composants d'un syst√®me ou entre diff√©rents syst√®mes. La popularit√© des services Web comme moyen d'int√©gration est due √† leur polyvalence, ainsi qu'√† leur facilit√© de mise en ≈ìuvre et de d√©bogage. La polyvalence est associ√©e au transfert de donn√©es via Internet et le protocole HTTP. Les services Web facilitent relativement la cr√©ation d'int√©grations entre des composants √©crits dans diff√©rents langages qui s'ex√©cutent sur diff√©rents syst√®mes d'exploitation et plates-formes. La simplicit√© de la mise en ≈ìuvre des services Web est obtenue gr√¢ce aux outils et composants int√©gr√©s dans de nombreux IDE qui vous permettent de d√©velopper rapidement √† la fois le service Web (c√¥t√© fournisseur) et le code n√©cessaire pour appeler le service c√¥t√© client (c√¥t√© client). Les services de d√©bogage sont simplifi√©s par l'utilisation de formats d'√©change de donn√©es lisibles par l'homme - XML ‚Äã‚Äãet JSON. Outre,Il existe de nombreux utilitaires pour les services de d√©bogage et de test, y compris la charge.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous examinerons plusieurs fa√ßons de cr√©er des services Web directement √† partir d'Oracle DBMS, c'est-√†-dire sans utiliser d'outils tiers.</font></font><br>
<a name="habracut"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenu</font></font></b>
                        <div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Native Oracle XML DB Web Services</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> Oracle XML DB HTTP server</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   HTTP</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   -</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> Access List (ACL)</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> -    </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Oracle REST Data Service</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> 1:   POST-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">    WS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  HTTP-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CGI-</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> 2:     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">     ORDS</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">   </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Java Servlet</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Database Access Descriptor (PL/SQL Servlet)</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></div>
                    </div><br>
<a name="Introduction"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contexte</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âl√©ments fournis: syst√®me d'information commercial d'un grand r√©seau de distribution (environ un millier de magasins de d√©tail), compos√© de nombreux composants et sous-syst√®mes. </font><font style="vertical-align: inherit;">√Ä l'int√©rieur de chaque magasin, il y a un serveur principal - une base de donn√©es Oracle avec la logique m√©tier principale. </font><font style="vertical-align: inherit;">Les n≈ìuds de caisse sont g√©r√©s par un logiciel distinct de leur base de donn√©es locale. </font><font style="vertical-align: inherit;">Ce logiciel collecte p√©riodiquement les donn√©es du serveur principal (via WS SOAP) et rend les r√©sultats de la vente (√©change de fichiers).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les progr√®s ne se sont pas arr√™t√©s et de nouveaux √©quipements sont apparus dans les magasins. Les donn√©es de cet √©quipement doivent √™tre p√©riodiquement envoy√©es au serveur principal de la boutique (p√©riode - toutes les quelques minutes), l'int√©gration doit n√©cessairement passer par le service Web, le message doit avoir un certain format, l'authentification n'est pas n√©cessaire. Nous avons examin√© les contrats d'√©change de donn√©es et d√©couvert que la technologie utilis√©e des services Web ne permettrait pas l'int√©gration du b√¢timent avec un tel √©quipement. Et la recherche d'une solution a commenc√© ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, plusieurs options pour la mise en ≈ìuvre du service Web n√©cessaire ont √©t√© envisag√©es, jusqu'√† l'√©criture d'un composant distinct qui ouvrirait une fen√™tre pour la base de donn√©es Oracle pour la base de donn√©es Oracle: d'une part, il fournirait un service Web, d'autre part, il interagirait avec la base de donn√©es via JDBC. </font><font style="vertical-align: inherit;">La difficult√© est que le nouveau composant, d'une part, devrait √™tre install√© dans un millier de magasins, et, d'autre part, un autre lien serait apparu qu'il faudrait accompagner. </font><font style="vertical-align: inherit;">Par cons√©quent, la priorit√© √©tait toujours l'option d'impl√©menter un service Web avec les outils int√©gr√©s d'Oracle. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la suite des recherches, nous avons trouv√© quatre fa√ßons que nous consid√©rerons dans cet article:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services Web Oracle XML DB natifs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service de donn√©es Oracle REST</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servlet Java</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripteur d'acc√®s √† la base de donn√©es (servlet PL / SQL)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les deux premi√®res options seront examin√©es plus en d√©tail. </font><font style="vertical-align: inherit;">Les services Web Oracle XML DB natifs √©taient initialement utilis√©s dans notre syst√®me, c'est-√†-dire qu'ils √©taient h√©rit√©s, pour ainsi dire. </font><font style="vertical-align: inherit;">ORDS est devenu un remplacement pour cette technologie obsol√®te (malgr√© le fait que je devais encore travailler dur et installer ORDS dans un millier de magasins). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deux autres m√©thodes - Java Servlet et PL / SQL Servlet - nous avons consid√©r√© avec ORDS lors de la recherche d'une alternative √† Native Oracle WS, mais nous ne l'avons pas utilis√©e dans le projet. </font><font style="vertical-align: inherit;">Par cons√©quent, nous ne consid√©rerons pas ces approches en d√©tail et nous limiterons √† une br√®ve r√©f√©rence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'article pr√©sentera quelques exemples pratiques de mise en ≈ìuvre de services Web avec des instructions qui aideront √† cr√©er un service fonctionnel.</font></font><br>
<br>
<a name="NativeOracle"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services Web Oracle XML DB natifs</font></font></h2><br>
<a name="NativeOracleFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacit√©s</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous permet d'organiser l'acc√®s √† la base de donn√©es Oracle via HTTP √† l'aide de WS SOAP (version 1.1):</font></font><br>
<br>
<ul>
<li> SQL-  XQuery-  SOAP.</li>
<li>     (   ).</li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  -     :      ,   HTTP-.</li>
<li> -    (WSDL),          ,  -.</li>
<li>     -.  ,    ‚Äî    ,      ‚Äî        .</li>
<li>   XML-.   ,  ,        XML,            - ‚Äî   Oracle  .   ,      WS-    Oracle    ‚Äî    ,    - . </li>
</ul><br>
<b></b><br>
<br>
<ul>
<li>  WSDL   ,      ,    - .        ‚Äî       WSDL,      WSDL ,    .</li>
<li>       ( 50 ).          ,   ‚Äî  ,     . ,     - ‚Äî   ,  ,   .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que l'authentification est requise pour toutes les demandes au service Web (√† partir de la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Authentification de base: Oracle XML DB prend en charge l'authentification de base, o√π un client envoie le nom d'utilisateur et le mot de passe en texte clair dans l'en-t√™te d'autorisation). </font><font style="vertical-align: inherit;">Dans Oracle, vous pouvez configurer l'acc√®s anonyme aux ressources du serveur via HTTP - √† l'aide de la configuration du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">serveur de protocole Oracle XML DB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mais en fait, cela ne fonctionne que pour les demandes GET, et l'authentification est requise pour les demandes POST. </font><font style="vertical-align: inherit;">√âtant donn√© que Native Oracle WS ne fonctionne que par le biais de requ√™tes POST, il n'y a aucun moyen de configurer l'acc√®s anonyme pour cette technologie.</font></font><br>
<br>
<a name="NativeOracleSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personnalisation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour utiliser Native Oracle WS, vous aurez besoin de: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez le serveur HTTP int√©gr√© dans Oracle.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez l'acc√®s √† l'int√©rieur de la base de donn√©es Oracle (ouvrez le port HTTP).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez une servlet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez ACL (Access List).</font></font></li>
</ol><br>
<a name="NativeOracleSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer le serveur HTTP Oracle XML DB</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le serveur HTTP devrait d√©j√† fonctionner par d√©faut, mais dans certains cas, une configuration d'√©coute suppl√©mentaire peut √™tre requise - en ajoutant le bloc suivant √† DESCRIPTION_LIST:</font></font><br>
<br>
<pre><code class="sql hljs">(DESCRIPTION=<font></font>
  (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=8080))(Presentation=HTTP)(Session=RAW)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, vous devez red√©marrer l'√©couteur.</font></font><br>
<br>
<a name="NativeOracleSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer l'acc√®s HTTP</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√©rification du port actuel pour HTTP.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">SELECT</span> dbms_xdb.gethttpport() <span class="hljs-keyword">AS</span> http_port <span class="hljs-keyword">FROM</span> dual;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une valeur de "0" signifie que l'acc√®s HTTP est d√©sactiv√©.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration du port.</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--    web-services</span>
    dbms_xdb.setHttpPort(<span class="hljs-number">8080</span>);
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></li>
</ol><br>
<a name="NativeOracleSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'une servlet pour un service Web</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que le service Web fonctionne, l'enregistrement du servlet est requis dans la configuration de la base de donn√©es.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script pour cr√©er un servlet</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_servlet_name      <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'orawsv'</span>;
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--   orawsv   Native Web Services</span><font></font>
    DBMS_XDB.deleteServletMapping(l_servlet_name);<font></font>
    DBMS_XDB.deleteServlet(l_servlet_name);<font></font>
 <font></font>
    DBMS_XDB.addServlet( NAME     =&gt; l_servlet_name<font></font>
                       , LANGUAGE =&gt; 'C'<font></font>
                       , DISPNAME =&gt; 'Oracle Query Web Service'<font></font>
                       , DESCRIPT =&gt; 'Servlet for issuing queries as a Web Service'<font></font>
                       , SCHEMA   =&gt; 'XDB');<font></font>
 <font></font>
    DBMS_XDB.addServletSecRole( SERVNAME =&gt; l_servlet_name<font></font>
                              , ROLENAME =&gt; 'XDB_WEBSERVICES'<font></font>
                              , ROLELINK =&gt; 'XDB_WEBSERVICES');<font></font>
 <font></font>
    DBMS_XDB.addServletMapping( PATTERN =&gt; '/orawsv<span class="hljs-comment">/*'
                              , NAME    =&gt; l_servlet_name);
    COMMIT;
END;
/</span></code></pre></div>
                    </div><br>
<a name="NativeOracleSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer la liste d'acc√®s</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour acc√©der √† Oracle via HTTP, vous devez ajouter des r√®gles dans la configuration du SGBD. </font><font style="vertical-align: inherit;">Cela se fait √† l'aide des utilitaires SGBD int√©gr√©s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour configurer l'ACL, vous aurez besoin de:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">script d'√©dition de la configuration de la base de donn√©es (ci-dessous);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sch√©ma de base de donn√©es pour lequel la configuration est effectu√©e.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, le sch√©ma de base de donn√©es pour lequel ACL est configur√© doit d√©j√† √™tre cr√©√©. </font><font style="vertical-align: inherit;">Dans les exemples ci-dessous, il y aura des r√©f√©rences √† cette section, aux endroits o√π vous devez cr√©er de nouveaux sch√©mas de base de donn√©es - pour eux, vous devrez configurer l'ACL.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le sch√©ma SYS, nous ex√©cutons le script de configuration ACL:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">--   SYS</span>
<span class="hljs-keyword">DECLARE</span>
    l_ws_user       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>)  := <span class="hljs-string">'WS_SOAP_TEST'</span>; <span class="hljs-comment">--    ,        WS</span><font></font>
    l_acl           VARCHAR2(250) := 'acl_allow_all.xml';<font></font>
    l_tmp           VARCHAR2(250);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_OVER_HTTP TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;
    <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">IMMEDIATE</span> <span class="hljs-string">'GRANT XDB_WEBSERVICES_WITH_PUBLIC TO "'</span>||l_ws_user||<span class="hljs-string">'"'</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--       PL/SQL </span>
    <span class="hljs-keyword">BEGIN</span>
        dbms_network_acl_admin.drop_acl(acl =&gt; <span class="hljs-string">'/sys/acls/'</span>||l_acl);<font></font>
    EXCEPTION<font></font>
        WHEN dbms_network_acl_admin.acl_not_found THEN<font></font>
            NULL;<font></font>
    <span class="hljs-keyword">END</span>;<font></font>
 <font></font>
    <span class="hljs-comment">--  ACL</span><font></font>
    dbms_network_acl_admin.create_acl( acl         =&gt; l_acl<font></font>
                                     , description =&gt; 'Allow all connections'<font></font>
                                     , is_grant    =&gt; TRUE<font></font>
                                     , start_date  =&gt; SYSTIMESTAMP<font></font>
                                     , end_date    =&gt; NULL<font></font>
                                     , principal   =&gt; 'SYS'<font></font>
                                     , privilege   =&gt; 'connect');<font></font>
 <font></font>
    dbms_network_acl_admin.assign_acl( acl        =&gt; l_acl<font></font>
                                     , host       =&gt; '*'<font></font>
                                     , lower_port =&gt; NULL<font></font>
                                     , upper_port =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-comment">--    (resolve) </span><font></font>
    dbms_network_acl_admin.add_privilege( acl        =&gt; l_acl<font></font>
                                        , principal  =&gt; l_ws_user<font></font>
                                        , is_grant   =&gt; TRUE<font></font>
                                        , privilege  =&gt; 'resolve'<font></font>
                                        , POSITION   =&gt; NULL<font></font>
                                        , start_date =&gt; SYSTIMESTAMP<font></font>
                                        , end_date   =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter tout de suite que la configuration ACL est requise lors de l'utilisation non seulement de Native Oracle WS, mais √©galement de toutes les autres m√©thodes de cr√©ation de services Web d√©crites dans cet article.</font></font><br>
<br>
<a name="NativeOracleExample"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple de service Web √† l'aide d'une proc√©dure par lots</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous aurons besoin:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√©ma de base de donn√©es dans lequel se trouveront les objets de traitement des demandes de service Web.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tableau de journalisation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Package avec proc√©dure / fonction.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tout outil qui vous permet d'envoyer des demandes Web. </font><font style="vertical-align: inherit;">Dans ce cas, l'application </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SOAP UI a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©t√© utilis√©e </font><font style="vertical-align: inherit;">, mais vous pouvez choisir n'importe quel autre outil, jusqu'√† la ligne de commande.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fonctionnalit√©s: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les param√®tres de proc√©dure doivent avoir des types simples ou d'objet. </font><font style="vertical-align: inherit;">Sinon, la proc√©dure ne sera pas per√ßue comme une m√©thode de service Web et ne sera pas incluse dans la liste des m√©thodes de service.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour impl√©menter des structures complexes de donn√©es d'entr√©e ou de sortie, vous devez utiliser des types d'objets (les types de lots ne peuvent pas √™tre utilis√©s).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous cr√©ons les objets de base de donn√©es n√©cessaires:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sch√©ma </font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_SOAP_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_soap_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_soap_test;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez imm√©diatement un nouveau sch√©ma √† l'ACL. </font><font style="vertical-align: inherit;">Le script de la section pr√©c√©dente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le nouveau sch√©ma, cr√©ez une table pour la journalisation </font></font><code>T_WS_REQ_LOG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG<font></font>
(<font></font>
  id_log      <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message     <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  proc        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">128</span>),<font></font>
  dtm_request <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_REQ_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">' HTTP-'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.proc <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_REQ_LOG.dtm_request <span class="hljs-keyword">IS</span> <span class="hljs-string">'/ '</span>;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Package avec une proc√©dure simple:</font></font><br>
<br>
<pre><code class="sql hljs">
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    );<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/<font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_NATIVE_WS_TEST <span class="hljs-keyword">IS</span><font></font>
 <font></font>
<span class="hljs-keyword">PROCEDURE</span> proc_simple<font></font>
    ( a_id      <span class="hljs-built_in">INTEGER</span>
    , a_data    <span class="hljs-built_in">VARCHAR2</span>
    , o_result  <span class="hljs-keyword">OUT</span> <span class="hljs-built_in">VARCHAR2</span><font></font>
    )<font></font>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_req_log (message, proc)
    <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'ID='</span>||a_id||<span class="hljs-string">'; DATA='</span>||a_data, <span class="hljs-string">'proc_simple'</span>)
    <span class="hljs-keyword">RETURNING</span> id_log <span class="hljs-keyword">INTO</span> o_result;
<span class="hljs-keyword">END</span> proc_simple;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_NATIVE_WS_TEST;<font></font>
/</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le service Web le plus simple est cr√©√© et pr√™t √† l'emploi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour acc√©der au service, vous devez utiliser l'URL au format suivant:</font></font><br>
<br>
<pre><code class="sql hljs">http://[server]:[port]/[servlet_name]/[DB_SCHEMA]/[WS_OBJ]?wsdl</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O√π: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[serveur]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nom de domaine ou adresse IP du serveur de base de donn√©es Oracle </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[port]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - port d'acc√®s via HTTP sp√©cifi√© dans la section "Configuration de l'acc√®s via HTTP" </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[nom_servlet]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nom du servlet sp√©cifi√© dans la section "Cr√©ation d'une servlet pour le Web service ‚Äù </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[DB_SCHEMA]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nom du sch√©ma de base de donn√©es (en majuscules) </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[WS_OBJ]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - nom du service (en majuscules), qui est √©gal au nom de l'objet de base de donn√©es, dans notre cas - le nom du package </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Notez que l'URL est importante! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemple de lien:</font></font><br>
<br>
<pre><code class="sql hljs">http://my.server:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST?wsdl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si nous cliquons sur ce lien dans le navigateur, nous serons automatiquement cr√©√©s sur la base de notre package WSDL: </font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wsdl</font></font></b>
                        <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">definitions</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/"</span>
    <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
    <span class="hljs-attr">xmlns:xsd</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span>
    <span class="hljs-attr">xmlns:soap</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/wsdl/soap/"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">types</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">xsd:schema</span> <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://xmlns.oracle.com/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>
     <span class="hljs-attr">elementFormDefault</span>=<span class="hljs-string">"qualified"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_DATA-VARCHAR2-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"A_ID-NUMBER-IN"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:integer"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span><font></font>
 <font></font>
      <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutput"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">xsd:complexType</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xsd:sequence</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">xsd:element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"O_RESULT"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xsd:string"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:sequence</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:complexType</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:element</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">xsd:schema</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">types</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEInputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEInput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">message</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLEOutputMessage"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">part</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutput"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">portType</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEInputMessage"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span> <span class="hljs-attr">message</span>=<span class="hljs-string">"tns:PROC_SIMPLEOutputMessage"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">portType</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">binding</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTBinding"</span>
           <span class="hljs-attr">type</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTPortType"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">soap:binding</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"document"</span> <span class="hljs-attr">transport</span>=<span class="hljs-string">"http://schemas.xmlsoap.org/soap/http"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">operation</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PROC_SIMPLE"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">soap:operation</span>
 <span class="hljs-attr">soapAction</span>=<span class="hljs-string">"PROC_SIMPLE"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">input</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">output</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">soap:body</span> <span class="hljs-attr">parts</span>=<span class="hljs-string">"parameters"</span> <span class="hljs-attr">use</span>=<span class="hljs-string">"literal"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">output</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">operation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">binding</span>&gt;</span><font></font>
 <font></font>
  <span class="hljs-tag">&lt;<span class="hljs-name">service</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTService"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">documentation</span>&gt;</span>Oracle Web Service<span class="hljs-tag">&lt;/<span class="hljs-name">documentation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">port</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"PK_NATIVE_WS_TESTPort"</span> <span class="hljs-attr">binding</span>=<span class="hljs-string">"tns:PK_NATIVE_WS_TESTBinding"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-name">soap:address</span> 
             <span class="hljs-attr">location</span>=<span class="hljs-string">"http://******:8080/orawsv/WS_SOAP_TEST/PK_NATIVE_WS_TEST"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">service</span>&gt;</span><font></font>
 <font></font>
<span class="hljs-tag">&lt;/<span class="hljs-name">definitions</span>&gt;</span></code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour tester le service, cr√©ez un nouveau projet SOAP dans l'interface utilisateur SOAP. </font><font style="vertical-align: inherit;">En tant qu'URL, sp√©cifiez l'adresse dans l'exemple ci-dessus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä l'ouverture, </font></font><code>Request 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous voyons que le mod√®le de demande est d√©j√† g√©n√©r√© automatiquement par le WSDL sp√©cifi√©. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez imm√©diatement l'autorisation de base pour la demande - le login et le mot de passe sont les m√™mes que lors de la connexion √† la base de donn√©es. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qi/e_/re/qie_rezy1hizdhgrcy-y--2ghae.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemple de demande et de r√©ponse. </font><font style="vertical-align: inherit;">Veuillez noter qu'une ligne a √©t√© ajout√©e √† la demande g√©n√©r√©e automatiquement </font></font><code>&lt;pk:O_RESULT-VARCHAR2-OUT/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Le fait est qu'il y a un bogue dans Oracle 12c: les variables OUT ne sont pas ajout√©es au WSDL pour Native Oracle WS). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/j6/ch/em/j6chemtum0xqyl4tz6kmandwjdc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©sultat de l'appel est visible dans la table des journaux.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/be/5t/sy/be5tsyoz24pbltgramyceh86xf8.png"><br>
<br>
<a name="NativeOracleSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La technologie native Oracle XML DB Web Services peut √™tre utilis√©e comme une solution industrielle √† condition qu'il n'y ait pas de charge importante sur ce service Web (une demande en quelques secondes). </font><font style="vertical-align: inherit;">Cette option convient lorsque les consommateurs n'ont pas d'exigences strictes pour un service Web (ses attributs, structures de donn√©es, logique de traitement) et qu'il n'y a pas de contrat pr√©d√©termin√© strict. </font><font style="vertical-align: inherit;">Si vous devez cr√©er un service Web selon un WSDL pr√©d√©fini (comme dans notre cas avec un nouvel √©quipement), la technologie Native Oracle WS ne sera pas adapt√©e.</font></font><br>
<br>
<a name="OracleREST"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service de donn√©es Oracle REST</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä partir de la version 11.1, Oracle a introduit la prise en charge compl√®te de RESTful sous la forme d'un module distinct appel√© Oracle REST Data Service (ORDS). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS est une application Java qui vous permet de cr√©er une API RESTful pour une base de donn√©es Oracle √† l'aide de SQL et PL / SQL. C'est une alternative √† l'utilisation d'Oracle HTTP Server et de mod_plsql. En substance, ORDS est une interface HTTP entre le monde ext√©rieur et une base de donn√©es Oracle. Cette interface vous permet de fermer les requ√™tes HTTP entrantes √† n'importe quel objet de base de donn√©es - une table ou une proc√©dure PL / SQL. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il suffit d'installer, de configurer et d'ex√©cuter ORDS pour la base de donn√©es requise. Le processus suppl√©mentaire de cr√©ation de services REST se r√©sume √† l'√©criture de code en PL / SQL (ou m√™me en cliquant dans l'IDE si le code est trop paresseux pour √™tre √©crit). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aucune licence suppl√©mentaire n'est requise pour installer ORDS.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exigences:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java JDK 8 ou sup√©rieur;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oracle 11.1 ou version ult√©rieure (Oracle 11 XE Release 2 est √©galement pris en charge).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plusieurs options de d√©ploiement ORDS sont prises en charge:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mode autonome;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le serveur d'applications (Oracle WebLogic Server, Apache Tomcat).</font></font></li>
</ul><br>
<a name="OracleRESTFeatures"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Capacit√©s</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS vous permet de: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisez l'acc√®s aux ressources dans un style RESTful.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez une interaction dans le style "Appel de proc√©dure distante" (interaction de style RPC).</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En termes simples, avec l'aide d'ORDS, vous pouvez ouvrir l'acc√®s via HTTP √† certains objets de base de donn√©es - tables, proc√©dures, fonctions, packages. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le premier cas,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> nous avons affaire √† des ressources dans le sens o√π elles sont comprises dans le style architectural RESTful. Chaque ressource est d√©finie par un URI unique et les op√©rations avec des ressources (CRUD - cr√©er, lire, modifier, supprimer) sont d√©termin√©es par les op√©rations de la requ√™te HTTP: PUT, POST, GET, DELETE. Par exemple, si la ressource est une entr√©e dans la table des employ√©s, cette entr√©e sera disponible par un URI du formulaire:</font></font><br>
<br>
<pre><code class="sql hljs">GET https://server:port/ords/workspace/hr/employees/7369</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ici, le nom du sch√©ma de base de donn√©es, le nom de la table et l'ID d'enregistrement dans la table sont indiqu√©s dans l'URI. Ainsi, cette demande HTTP effectue en fait une op√©ration SELECT √† partir de la table sp√©cifi√©e. Avec d'autres op√©rations (ajout, modification, suppression), le principe de communication est le m√™me: le chemin d'acc√®s √† la ressource est indiqu√© dans l'URI, et des param√®tres suppl√©mentaires sont indiqu√©s dans le corps de la demande, par exemple, des valeurs de champ pour ins√©rer un enregistrement dans la table. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans le second cas,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au lieu d'acc√©der √† la ressource, un appel de proc√©dure est directement utilis√©, qui peut tout faire de la m√™me mani√®re que dans le premier cas (CRUD), ainsi que d'ex√©cuter toute autre logique qui impl√©mente le processus m√©tier n√©cessaire. Un appel de proc√©dure √† partir d'un package peut √™tre effectu√© √† l'aide d'une requ√™te HTTP de ce format:</font></font><br>
<br>
<pre><code class="sql hljs">http://localhost:8080/ords/my_schema/my_pkg/MY_PROC</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Les param√®tres de la proc√©dure sont transf√©r√©s dans le corps de la demande sous la forme de structures au format JSON </font></font><code>{"param" : "value"}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">La m√™me approche est utilis√©e lors de l'utilisation du WS Oracle natif, d√©crite ci-dessus, mais dans le cas des services REST, aucune restriction n'est impos√©e par le protocole SOAP. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avantages</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un m√©canisme flexible qui vous permet de mettre en ≈ìuvre des services Web de toute complexit√©.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simplicit√© de mise en ≈ìuvre: pour transformer une proc√©dure PL / SQL en service Web, vous devez ex√©cuter seulement quelques commandes typiques. </font><font style="vertical-align: inherit;">Et √† l'aide de SQL Developer, la cr√©ation d'une API REST se transforme en un clic de souris avec un minimum d'√©criture de code.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La possibilit√© d'impl√©menter un service Web sans authentification.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moins</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS n'est pas inclus dans le package Oracle standard - il doit √™tre install√© s√©par√©ment pour chaque serveur (des licences suppl√©mentaires, comme d√©j√† mentionn√©, ne sont pas n√©cessaires). </font><font style="vertical-align: inherit;">Cela peut √™tre un probl√®me si vous avez des milliers de serveurs de base de donn√©es.</font></font></li>
</ul><br>
<a name="OracleRESTSetup"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personnalisation</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS peut √™tre lanc√© en deux modes: via le serveur d'applications ou en mode autonome. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cet article traite uniquement de l'option √† ex√©cuter en mode autonome. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que ORDS fonctionne, vous avez besoin de:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez les param√®tres avant l'installation.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminez l'installation d'ODRS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancez ORDS.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurez ACL (pour le sch√©ma de base de donn√©es souhait√©).</font></font></li>
</ol><br>
<a name="OracleRESTSetup-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©glages</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La distribution ORDS a un fichier avec des param√®tres qui ressemble √† ceci par d√©faut:</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=<font></font>
db.port=<font></font>
db.servicename=<font></font>
db.sid=<font></font>
db.username=APEX_PUBLIC_USER<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8080<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une description des param√®tres peut √™tre trouv√©e dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Param√®tres pour le mode autonome:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Param√®tre</font></font></b></td>
<td><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La description</font></font></b></td>
</tr>
<tr>
<td><code>db.hostname</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom ou adresse IP du serveur de base de donn√©es Oracle </font></font></td>
</tr>
<tr>
<td><code>db.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port DB (par exemple 1521)</font></font></td>
</tr>
<tr>
<td><code>db.servicename</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Base de donn√©es de nom de service</font></font></td>
</tr>
<tr>
<td><code>db.username</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nom d'utilisateur de la passerelle PL / SQL. </font><font style="vertical-align: inherit;">Par d√©faut = APEX_PUBLIC_USER, mais l'exemple ne pr√©voit pas d'utiliser APEX, vous pouvez donc laisser ce param√®tre vide</font></font></td>
</tr>
<tr>
<td><code>db.password</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mot de passe utilisateur (√©galement √† ne pas remplir) </font></font></td>
</tr>
<tr>
<td><code>migrate.apex.rest</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transition des services APEX RESTful vers ORDS. </font><font style="vertical-align: inherit;">D√©fini sur false si APEX n'est pas utilis√©.</font></font></td>
</tr>
<tr>
<td><code>rest.services.apex.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer ORDS pour une utilisation dans APEX</font></font></td>
</tr>
<tr>
<td><code>rest.services.ords.add</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©finissez le sch√©ma de base de donn√©es pour ORDS (ORDS_PUBLIC_USER et ORDS_METADATA). </font><font style="vertical-align: inherit;">La valeur doit √™tre vraie</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace table par d√©faut pour le sch√©ma ORDS_METADATA</font></font></td>
</tr>
<tr>
<td><code>schema.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace disque logique temporaire pour le sch√©ma ORDS_METADATA</font></font></td>
</tr>
<tr>
<td><code>standalone.http.port</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Port sur lequel ORDS s'ex√©cutera. </font><font style="vertical-align: inherit;">Ce port sera utilis√© dans l'URI pour acc√©der √† WS.</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.default</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace table par d√©faut pour le sch√©ma ORDS_PUBLIC_USER</font></font></td>
</tr>
<tr>
<td><code>user.tablespace.temp</code></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espace table temporaire pour le sch√©ma ORDS_PUBLIC_USER</font></font></td>
</tr>
</tbody></table></div><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par cons√©quent, le contenu du fichier devrait ressembler √† ceci:</font></font><br>
<br>
<pre><code class="sql hljs">db.hostname=your_server_host_name<font></font>
db.port=1521<font></font>
db.servicename=your_db_servicename<font></font>
migrate.apex.rest=false<font></font>
rest.services.apex.add=false<font></font>
rest.services.ords.add=true<font></font>
schema.tablespace.default=SYSAUX<font></font>
schema.tablespace.temp=TEMP<font></font>
standalone.http.port=8888<font></font>
standalone.static.images=<font></font>
user.tablespace.default=USERS<font></font>
user.tablespace.temp=TEMP</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©glages n√©cessaires sont termin√©s, vous pouvez proc√©der √† l'installation.</font></font><br>
<br>
<a name="OracleRESTSetup-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ex√©cutons la commande dans l'OS:</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par d√©faut, le fichier de configuration est extrait du r√©pertoire </font></font><code>params</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">situ√© √† c√¥t√© de </font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Vous pouvez sp√©cifier explicitement le chemin d'acc√®s √† ce fichier √† l'aide du param√®tre </font></font><code>--parameterFile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="xml hljs">java -jar ords.war --parameterFile /path/to/params/myown_params.properties</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la bo√Æte de dialogue d'installation, proc√©dez comme suit: </font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous indiquons le chemin d'acc√®s au r√©pertoire pour enregistrer la configuration (dans l'exemple, il est indiqu√© </font></font><code>conf </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- en cons√©quence, dans le m√™me r√©pertoire o√π se trouve le fichier </font></font><code>ords.war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, un r√©pertoire sera cr√©√© </font></font><code>conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans lequel les fichiers avec la configuration ORDS seront cr√©√©s).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s que la commande Entrez le mot de passe de la base de donn√©es pour ORDS_PUBLIC_USER s'affiche, nous entrons le mot de passe pour le sch√©ma </font></font><code>ORDS_PUBLIC_USER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sous cet utilisateur, ORDS se connectera √† la base de donn√©es.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s que l'invite Entrez 1 si vous souhaitez utiliser PL / SQL Gateway ou 2 pour ignorer cette √©tape s'affiche, nous r√©pondons ¬´2¬ª, car nous n'allons pas utiliser APEX et nous n'avons pas besoin de migrer depuis </font></font><code>mod_plsql</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s que l'instruction Enter 1 si vous souhaitez d√©marrer en mode autonome ou 2 pour quitter [1] apparaisse, nous r√©pondons ¬´1¬ª.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s que l'instruction Enter 1 if using HTTP or 2 if using HTTPS [1] s'affiche, nous r√©pondons 1.</font></font></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bo√Æte de dialogue d'installation</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war install<br>
This Oracle REST Data Services instance has not yet been configured.<br>
Please complete the following prompts<br>
 <br>
 <br>
Enter the location to store configuration data: conf<br>
Enter the database password for ORDS_PUBLIC_USER:<br>
Confirm password:<br>
 03, 2019 2:47:49 PM oracle.dbtools.rt.config.setup.SchemaSetup getInstallOrUpgrade<br>
WARNING: Failed to connect to user ORDS_PUBLIC_USER jdbc:oracle:thin:@//***YOUR_HOST_NAME.DOMAIN***:1521/***YOUR_SERVICE_NAME.DOMAIN***<br>
 <br>
Enter 1 if you want to use PL/SQL Gateway or 2 to skip this step.<br>
If using Oracle Application Express or migrating from mod_plsql then you must enter 1 [1]:2<br>
 03, 2019 2:48:32 PM<br>
INFO: reloaded pools: []<br>
Enter 1 if you wish to start in standalone mode or 2 to exit [1]:<br>
Enter 1 if using HTTP or 2 if using HTTPS [1]:<br>
2019-09-03 14:48:49.754:INFO::main: Logging initialized @4276887ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 2:48:49 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 2:48:50 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
Exception in thread "main" java.lang.reflect.InvocationTargetException<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)<br>
 at oracle.dbtools.jarcl.Entrypoint.main(Entrypoint.java:89)<br>
Caused by: java.lang.OutOfMemoryError: Java heap space<br>
 at java.util.Arrays.copyOf(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)<br>
 at java.lang.AbstractStringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at java.util.AbstractMap.toString(Unknown Source)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.zip.ZipIndex.toString(ZipIndex.java:166)<br>
 at java.lang.String.valueOf(Unknown Source)<br>
 at java.lang.StringBuilder.append(Unknown Source)<br>
 at oracle.dbtools.jarcl.JarClassLoader.toString(JarClassLoader.java:51)<br>
 at org.eclipse.jetty.server.ClassLoaderDump.dump(ClassLoaderDump.java:67)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:225)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.server.handler.ContextHandler.dump(ContextHandler.java:259)<br>
 at org.eclipse.jetty.util.component.Dumpable.dumpObjects(Dumpable.java:162)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dumpObjects(ContainerLifeCycle.java:746)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:701)<br>
 at org.eclipse.jetty.util.component.Dumpable.dump(Dumpable.java:62)<br>
 at org.eclipse.jetty.util.component.ContainerLifeCycle.dump(ContainerLifeCycle.java:684)<br>
 at oracle.dbtools.standalone.StandaloneConfiguration.start(StandaloneConfiguration.java:241)<br>
 at oracle.dbtools.standalone.Standalone.execute(Standalone.java:508)<br>
 at oracle.dbtools.cmdline.DefaultCommand.execute(DefaultCommand.java:137)<br>
 at oracle.dbtools.cmdline.Commands.execute(Commands.java:207)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:163)<br>
 at oracle.dbtools.cmdline.Commands.main(Commands.java:368)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)<br>
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)<br>
 at java.lang.reflect.Method.invoke(Unknown Source)<br>
 at oracle.dbtools.jarcl.Entrypoint.invoke(Entrypoint.java:66)</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cons√©quence, un r√©pertoire avec la configuration ORDS sera cr√©√© et les sch√©mas d'utilitaires pour ORDS appara√Ætront dans la base de donn√©es. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voir </font><font style="vertical-align: inherit;">√©galement: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installez Oracle REST Data Services 3.0.X en moins de 5 minutes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<a name="OracleRESTSetup-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lancement</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le d√©marrage en mode autonome s'effectue par la commande:</font></font><br>
<br>
<pre><code class="sql hljs">java -jar ords.war standalone</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bo√Æte de dialogue de lancement</font></font></b>
                        <div class="spoiler_text"><code>D:\ords-19.2.0.199.1647&gt;java -jar ords.war standalone<br>
2019-09-03 15:52:45.825:INFO::main: Logging initialized @2079ms to org.eclipse.jetty.util.log.StdErrLog<br>
 03, 2019 3:52:45 PM<br>
INFO: HTTP and HTTP/2 cleartext listening on port: 8082<br>
 03, 2019 3:52:45 PM<br>
INFO: Disabling document root because the specified folder does not exist: D:\ords-19.2.0.199.1647\conf\ords\standalone\doc_root<br>
2019-09-03 15:52:47.124:INFO:oejs.Server:main: jetty-9.4.z-SNAPSHOT; built: 2019-05-02T09:46:34.874Z; git: 14f32d50076f2b706f41a33066eb364d8492e199; jvm 1.8.0_221-b11<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: DefaultSessionIdManager workerName=node0<br>
2019-09-03 15:52:47.179:INFO:oejs.session:main: No SessionScavenger set, using defaults<br>
2019-09-03 15:52:47.180:INFO:oejs.session:main: node0 Scavenging every 660000ms<br>
 03, 2019 3:52:48 PM<br>
INFO: Configuration properties for: |apex|pu|<br>
db.hostname=***YOUR_HOST_NAME.DOMAIN***<br>
db.password=******<br>
db.port=1521<br>
db.servicename=***YOUR_SERVICE_NAME.DOMAIN***<br>
db.username=ORDS_PUBLIC_USER<br>
resource.templates.enabled=true<br>
 <br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.MaxLimit in configuration |apex|pu| is using a value of 10, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:48 PM<br>
WARNING: *** jdbc.InitialLimit in configuration |apex|pu| is using a value of 3, this setting may not be sized adequately for a production environment ***<br>
 03, 2019 3:52:50 PM<br>
INFO: Oracle REST Data Services initialized<br>
Oracle REST Data Services version : 19.2.0.r1991647<br>
Oracle REST Data Services server info: jetty/9.4.z-SNAPSHOT<br>
 <br>
2019-09-03 15:52:50.484:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@d56d67{/ords,null,AVAILABLE}<br>
2019-09-03 15:52:50.658:INFO:oejs.AbstractConnector:main: Started ServerConnector@12325ad{HTTP/1.1,[http/1.1, h2c]}{0.0.<br>
0.0:8082}<br>
2019-09-03 15:52:50.659:INFO:oejs.Server:main: Started @6914ms</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, ORDS est op√©rationnel. </font><font style="vertical-align: inherit;">L'adresse du service Web sera http: // &lt;nom d'h√¥te&gt;: / ords / ..., o√π &lt;nom d'h√¥te&gt; est le nom de l'ordinateur ex√©cutant ORDS (il ne doit pas n√©cessairement correspondre au nom du serveur de base de donn√©es, c'est-√†-dire que ORDS peut √™tre ex√©cut√© sur un autre h√¥te ), &lt;port&gt; - le port sp√©cifi√© dans la configuration ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous le souhaitez, vous pouvez cr√©er un script pour ex√©cuter automatiquement ORDS au d√©marrage du syst√®me d'exploitation.</font></font><br>
<br>
<a name="OracleRESTSetup-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Param√®tre d'acc√®s</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et la derni√®re √©tape consiste √† configurer l'ACL. </font><font style="vertical-align: inherit;">Les √©tapes sont les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m√™mes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que pour l'utilisation d'Oracle WS natif. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez effectuer cette √©tape apr√®s la cr√©ation du sch√©ma de base de donn√©es, de sorte que les exemples ci-dessous indiquent s√©par√©ment quand vous devez effectuer cette configuration. </font><font style="vertical-align: inherit;">Jusqu'√† pr√©sent, nous pouvons supposer que toutes les √©tapes pr√©liminaires ont √©t√© achev√©es et poursuivre avec les exemples.</font></font><br>
<br>
<a name="OracleRESTExample1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple 1: gestionnaire d'une demande POST</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, consid√©rons l'option d'impl√©mentation d'interaction de style RPC, c'est-√†-dire que nous allons cr√©er une m√©thode de service Web, dont le gestionnaire sera une proc√©dure par lots. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En effet, c'est dans cette version que le travail avec ORDS a √©t√© impl√©ment√© dans notre projet de r√©seau de distribution, et le r√©sultat a r√©pondu √† ses attentes. </font><font style="vertical-align: inherit;">Il s'est av√©r√© un moyen rapide et universel de cr√©er de nouvelles m√©thodes de services Web pour diff√©rents processus m√©tier - du travail avec l'√©quipement √† l'API pour les sites. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme mentionn√© ci-dessus, le support ORDS est √©galement inclus dans SQL Developer (l'EDI de base de donn√©es d√©velopp√© par Oracle). </font><font style="vertical-align: inherit;">Dans SQL Developer, la cr√©ation de services Web est disponible directement √† partir des √©l√©ments de menu ou du menu contextuel.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, des exemples sont r√©alis√©s √† l'aide de SQL Developer (version 18), mais le code PL / SQL qui est ex√©cut√© dans la base de donn√©es √† la suite d'actions dans l'IDE est √©galement inclus. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La version de la base de donn√©es sur laquelle les exp√©riences ont √©t√© effectu√©es:</font></font><br>
<br>
<pre><code class="sql hljs">SQL&gt; <span class="hljs-keyword">SELECT</span> v.BANNER <span class="hljs-keyword">FROM</span> v$<span class="hljs-keyword">version</span> v;<font></font>
 <font></font>
BANNER<font></font>
<span class="hljs-comment">--------------------------------------------------------------------------------</span>
Oracle DATABASE 12c Enterprise Edition <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - <span class="hljs-number">64</span><span class="hljs-built_in">bit</span> Production<font></font>
PL/<span class="hljs-keyword">SQL</span> <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
CORE	<span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span>	Production<font></font>
TNS <span class="hljs-keyword">FOR</span> Linux: <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production<font></font>
NLSRTL <span class="hljs-keyword">Version</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> - Production</code></pre><br>
<a name="OracleRESTExample1-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'un utilisateur de test pour WS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, nous avons √† nouveau besoin d'un nouveau sch√©ma - cr√©ez-le:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> WS_TEST <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> ws_test <span class="hljs-keyword">QUOTA</span> <span class="hljs-number">200</span>M <span class="hljs-keyword">ON</span> <span class="hljs-keyword">USERS</span>;
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SESSION</span>, <span class="hljs-keyword">RESOURCE</span> <span class="hljs-keyword">TO</span> ws_test;</code></pre><br>
<a name="OracleRESTExample1-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration d'un sch√©ma de base de donn√©es</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois le diagramme cr√©√©, il est n√©cessaire de le rendre accessible via ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour √ßa:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans SQL Developer, cr√©ez une connexion pour </font></font><code>WS_TEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la liste des connexions, appelez le menu contextuel de la nouvelle connexion. </font><font style="vertical-align: inherit;">Choisissez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Services REST ‚Üí Activer les services REST ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/qy/yv/jqqyyveitff-wlvruwzfefp8bae.png"><br>
 </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la bo√Æte de dialogue, cochez la case √† c√¥t√© de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Activer le sch√©ma</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ici, vous pouvez √©galement modifier le param√®tre " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alias ‚Äã‚Äãde sch√©ma</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font><font style="vertical-align: inherit;">si vous souhaitez que le </font></font><code>ws_test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texte soit affich√© dans l'URI </font><font style="vertical-align: inherit;">au lieu du nom du sch√©ma </font><font style="vertical-align: inherit;">):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jc/0d/f-/jc0df-k8qea-djnenwxg4spe2xw.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En cliquant sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´Suivant¬ª</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous verrons le code PL / SQL qui sera √©ventuellement ex√©cut√© dans la base de donn√©es (et que vous pourrez √©crire vous-m√™me sans utiliser l'IDE):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wg/pd/pb/wgpdpbaxjzxzqv7ju6vf4yzp2i0.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©f√©rencement:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.ENABLE_SCHEMA( p_enabled             =&gt; <span class="hljs-literal">TRUE</span>
                      , p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>
                      , p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>
                      , p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>
                      , p_auto_rest_auth      =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
<a name="OracleRESTExample1-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'un module et d'un mod√®le</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, vous devez cr√©er un module et un mod√®le pour la ressource. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un module</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une unit√© structurelle qui vous permet de regrouper plusieurs mod√®les de ressources logiquement li√©s. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un mod√®le</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un service Web sp√©cifique servant un ensemble sp√©cifique de m√©thodes pour une ressource. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">module de ressources:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> unit√© organisationnelle utilis√©e pour regrouper les mod√®les de ressources associ√©s. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mod√®le de ressource:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> service RESTful individuel capable de traiter les demandes d'un certain ensemble d'URI (Universal Resource Identifiers). L'ensemble d'URI est d√©fini par le mod√®le d'URI du mod√®le de ressource.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Par exemple, pour une boutique en ligne, un module peut √™tre appel√©</font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- dans ce module, toutes les API du magasin seront combin√©es. </font><font style="vertical-align: inherit;">Les mod√®les peuvent √™tre des ressources sp√©cifiques, par exemple, une commande (mod√®le </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), un catalogue de produits (mod√®le </font></font><code>item</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), un paiement (mod√®le </font></font><code>payment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), etc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cr√©er un module et un mod√®le, vous devez effectuer les √©tapes suivantes:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans l'arborescence d'objets, ouvrez la section REST Data Services, appelez le menu contextuel dans la section </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modules</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , s√©lectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nouveau module ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ar/uv/ry/aruvrywejhtzq-3oigkirmjy0qy.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la bo√Æte de dialogue de cr√©ation de module, sp√©cifiez le nom du module ( </font></font><code>shop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), le pr√©fixe URI (nous sp√©cifions √©galement </font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- dans l'exemple ci-dessous, nous voyons imm√©diatement ce que sera le mod√®le d'adresse de service Web), mettez un daw devant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Publier</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Suivant&gt;"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/db/ak/mf/dbakmfibj3ir0cxttme-zjuz4qu.png"><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la bo√Æte de dialogue suivante, sp√©cifiez le nom du mod√®le, par exemple </font></font><code>order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et cliquez √† nouveau sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Suivant&gt;"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la derni√®re bo√Æte de dialogue, nous voyons tous les param√®tres saisis du module et du mod√®le. </font><font style="vertical-align: inherit;">Sous l'onglet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">vous pouvez voir le code PL / SQL qui sera ex√©cut√© dans la base de donn√©es lorsque vous cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terminer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yj/al/g0/yjalg0-ud3fp5x37qtx5nyemwxq.png"><br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cr√©er un module </font></font><code>shop </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vous pouvez ajouter plusieurs motifs - √©galement dans l'arborescence d'objets, le menu contextuel et en </font><font style="vertical-align: inherit;">s√©lectionnant </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le mod√®le ... Ajouter le</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste de code pour cr√©er un module et un mod√®le</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">BEGIN</span>
    ORDS.DEFINE_MODULE( p_module_name    =&gt; <span class="hljs-string">'shop'</span>
                      , p_base_path      =&gt; <span class="hljs-string">'shop'</span>
                      , p_items_per_page =&gt;  <span class="hljs-number">25</span>
                      , p_status         =&gt; <span class="hljs-string">'PUBLISHED'</span>
                      , p_comments       =&gt; <span class="hljs-literal">NULL</span>);<font></font>
 <font></font>
    ORDS.DEFINE_TEMPLATE( p_module_name    =&gt; 'shop'<font></font>
                        , p_pattern        =&gt; 'order'<font></font>
                        , p_priority       =&gt; 0<font></font>
                        , p_etag_type      =&gt; 'HASH'<font></font>
                        , p_etag_query     =&gt; NULL<font></font>
                        , p_comments       =&gt; NULL);<font></font>
 <font></font>
    <span class="hljs-keyword">COMMIT</span>;
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre></div>
                    </div><br>
<a name="OracleRESTExample1-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ation d'un gestionnaire de requ√™tes HTTP</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons maintenant cr√©er un gestionnaire de requ√™tes HTTP pour notre service. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, nous devons cr√©er des objets de base de donn√©es qui contiendront la logique de traitement des demandes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons besoin d'une table de journalisation et d'un package dans lequel il y aura un code de gestionnaire.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez une table √† l'aide d'un script:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG<font></font>
(<font></font>
  id_log          <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">GENERATED</span> <span class="hljs-keyword">ALWAYS</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span>,<font></font>
  message         <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_header  <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  request_body    <span class="hljs-keyword">CLOB</span>,<font></font>
  response_header <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>),<font></font>
  response_body   <span class="hljs-keyword">CLOB</span>,<font></font>
  dtz_log         <span class="hljs-built_in">TIMESTAMP</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">WITH</span> <span class="hljs-built_in">TIME</span> ZONE <span class="hljs-keyword">DEFAULT</span> SYSTIMESTAMP<font></font>
);<font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">IS</span> <span class="hljs-string">'  HTTP- (ORDS)'</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.id_log <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.message <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.request_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_header <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.response_body <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_WS_LOG.dtz_log <span class="hljs-keyword">IS</span> <span class="hljs-string">'/  '</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_WS_LOG <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_WS_LOG PRIMARY <span class="hljs-keyword">KEY</span> (ID_LOG) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©ez un package:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    );<font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/<font></font>
 <font></font>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PACKAGE</span> <span class="hljs-keyword">BODY</span> PK_ORDS_API <span class="hljs-keyword">IS</span><font></font>
 <font></font>
 <font></font>
<span class="hljs-keyword">FUNCTION</span> blob2clob<font></font>
    ( a_blob            <span class="hljs-built_in">BLOB</span>
    , a_from_charset    <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    , a_to_charset      <span class="hljs-built_in">VARCHAR2</span>  := <span class="hljs-string">'AMERICAN_AMERICA.AL32UTF8'</span>
    ) <span class="hljs-keyword">RETURN</span>            <span class="hljs-keyword">CLOB</span>
<span class="hljs-keyword">AS</span>
    l_clob      <span class="hljs-keyword">CLOB</span>;<font></font>
    l_amount    NUMBER := 2000;<font></font>
    l_offset    NUMBER := 1;<font></font>
    l_buffer    VARCHAR2(32767);<font></font>
    l_length    PLS_INTEGER := dbms_lob.getlength(a_blob);<font></font>
<span class="hljs-keyword">BEGIN</span>
    dbms_lob.createtemporary(l_clob, <span class="hljs-literal">TRUE</span>);<font></font>
    dbms_lob.OPEN(l_clob, dbms_lob.lob_readwrite);<font></font>
    WHILE l_offset &lt;= l_length LOOP<font></font>
        l_buffer := UTL_RAW.cast_to_varchar2(UTL_RAW.convert( r            =&gt; dbms_lob.substr(a_blob, l_amount, l_offset)<font></font>
                                                            , from_charset =&gt; a_from_charset<font></font>
                                                            , to_charset   =&gt; a_to_charset));<font></font>
        IF LENGTH(l_buffer) &gt; 0 THEN<font></font>
            dbms_lob.writeappend(l_clob, LENGTH(l_buffer), l_buffer);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_offset := l_offset + l_amount;<font></font>
        EXIT WHEN l_offset &gt; l_length;<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
    RETURN l_clob;<font></font>
<span class="hljs-keyword">END</span> blob2clob;<font></font>
 <font></font>
 <font></font>
PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp<font></font>
        );<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;<font></font>
 <font></font>
<span class="hljs-keyword">END</span> PK_ORDS_API;<font></font>
/</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, pour le mod√®le cr√©√©, vous devez ajouter un gestionnaire. </font><font style="vertical-align: inherit;">Ajoutez un gestionnaire pour la m√©thode HTTP </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ce faire, proc√©dez comme suit:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous appelons le menu contextuel du mod√®le, s√©lectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajouter un gestionnaire</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis s√©lectionnez la m√©thode HTTP:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gh/hs/2l/ghhs2llhlojihuhzkko_pcfm6bo.png"></li>
<li>     .   <b>SQL Worksheet</b>  PL/SQL-,         HTTP-   <code>POST</code>.     ,   <code>process_request</code>    .  ,     bind- <code>:body</code> ‚Äî    ORDS,          (    BLOB).       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"></a>.      <code>:body_text</code>,        CLOB.        ,   ,   ,       ORDS  .     <code>:body_text</code>   ,        ¬´¬ª .       <code>:body</code>,      CLOB    . ,     :<br>
<br>
<img src="https://habrastorage.org/webt/z7/jw/md/z7jwmdky6orqwntld4kwoy_lw7i.png"><br>
</li>
<li>  Save REST Handler ‚Äî      .<br>
<br>
   POST-:<br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si n√©cessaire, vous pouvez obtenir le code PL / SQL pour cr√©er un gestionnaire. </font><font style="vertical-align: inherit;">Pour ce faire, dans le menu contextuel du module ORDS, s√©lectionnez D√©finition REST puis sp√©cifiez o√π sortir le script de cr√©ation de module, par exemple, dans le presse-papiers:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6i/r4/ww/6ir4wwzdqbzg2zen2mmshbmmroq.png"></li>
</ol><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le code r√©sultant pour cr√©er le module</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-comment">-- Generated by Oracle SQL Developer REST Data Services 18.1.0.095.1630</span>
<span class="hljs-comment">-- Exported REST Definitions from ORDS Schema Version 18.4.0.r3541002</span>
<span class="hljs-comment">-- Schema: WS_TEST   Date: Wed Oct 23 20:19:54 MSK 2019</span>
<span class="hljs-comment">--</span>
<span class="hljs-keyword">BEGIN</span><font></font>
  ORDS.ENABLE_SCHEMA(<font></font>
      p_enabled             =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
      p_schema              =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
      p_url_mapping_type    =&gt; <span class="hljs-string">'BASE_PATH'</span>,<font></font>
      p_url_mapping_pattern =&gt; <span class="hljs-string">'ws_test'</span>,<font></font>
      p_auto_rest_auth      =&gt; <span class="hljs-literal">TRUE</span>);    <font></font>
 <font></font>
  ORDS.DEFINE_MODULE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_base_path      =&gt; '/shop/',<font></font>
      p_items_per_page =&gt;  25,<font></font>
      p_status         =&gt; 'PUBLISHED',<font></font>
      p_comments       =&gt; NULL);      <font></font>
  ORDS.DEFINE_TEMPLATE(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_priority       =&gt; 0,<font></font>
      p_etag_type      =&gt; 'HASH',<font></font>
      p_etag_query     =&gt; NULL,<font></font>
      p_comments       =&gt; NULL);<font></font>
  ORDS.DEFINE_HANDLER(<font></font>
      p_module_name    =&gt; 'shop',<font></font>
      p_pattern        =&gt; 'order',<font></font>
      p_method         =&gt; 'POST',<font></font>
      p_source_type    =&gt; 'plsql/block',<font></font>
      p_items_per_page =&gt;  0,<font></font>
      p_mimes_allowed  =&gt; '',<font></font>
      p_comments       =&gt; NULL,<font></font>
      p_source         =&gt; <font></font>
'<span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob));<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; ''application/json'');<font></font>
        htp.p(''{ "result" : "error", "message" : "''||SQLERRM||''" }'');<font></font>
<span class="hljs-keyword">END</span>;'<font></font>
      );<font></font>
 <font></font>
 <font></font>
  <span class="hljs-keyword">COMMIT</span>; 
<span class="hljs-keyword">END</span>;</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remarque: si vous ex√©cutez √† </font></font><code>ORDS.DEFINE_MODULE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nouveau la </font><font style="vertical-align: inherit;">proc√©dure de cr√©ation de module </font><font style="vertical-align: inherit;">, tous les mod√®les de ce module seront automatiquement supprim√©s et il n'y aura aucun avertissement √† ce sujet!</font></font><br>
<br>
<a name="OracleRESTExample1-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple d'appel</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est l√† que notre service Web est pr√™t. </font><font style="vertical-align: inherit;">Reste √† v√©rifier son travail. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour v√©rifier, nous ex√©cutons la demande:</font></font><br>
<br>
<pre><code class="xml hljs">POST http://****:8888/ords/ws_test/shop/order HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json<font></font>
Content-Length: 22<font></font>
Host: ****:8888<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{ "message" : "test" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En r√©ponse, nous obtenons:</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Wed, 23 Oct 2019 16:54:53 GMT<font></font>
Content-Type: application/json<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{ "result" : "success" }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©sultat de l'ex√©cution de la m√©thode est une entr√©e avec le corps de la demande et la r√©ponse dans la table du journal: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cj/89/tp/cj89tpjfzxvmdot-nsdr15nn49c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, la demande HTTP envoy√©e a √©t√© trait√©e avec succ√®s par la proc√©dure √† partir du paquet.</font></font><br>
<br>
<a name="OracleRESTExample1-Step6"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Param√®tres de la demande</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ci-dessus, nous avons d√©j√† vu le r√©sultat d'un simple service web. </font><font style="vertical-align: inherit;">Maintenant, compliquons un peu la t√¢che en ajoutant des param√®tres suppl√©mentaires √† la demande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe deux fa√ßons de transmettre des param√®tres: </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via l'URL. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les param√®tres sont d√©finis dans l'URL sous la forme standard:</font></font><br>
<br>
<pre><code class="sql hljs">http://...URI...?p1=val1&amp;p2=val2</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Via HEADER. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les param√®tres sont d√©finis dans l'en-t√™te de la demande comme </font></font><code>p1: val1</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ORDS dans le gestionnaire de demandes, les param√®tres sont d√©finis comme des variables de liaison. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ajoutons deux param√®tres √† l'exemple pr√©c√©dent: </font></font><code>prm1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- param√®tre dans l'URI, </font></font><code>prm2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- param√®tre dans l'en-t√™te de la requ√™te. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour traiter ces param√®tres, </font></font><code>PK_ORDS_API.process_request:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous ajoutons la </font><font style="vertical-align: inherit;">proc√©dure, </font><font style="vertical-align: inherit;">ajoutons les param√®tres </font></font><code>a_prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>a_prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, √† laquelle viendront les valeurs de nos param√®tres de la requ√™te.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proc√©dure de gestion des requ√™tes avec de nouveaux param√®tres</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PROCEDURE process_request<font></font>
    ( a_request     CLOB<font></font>
    , a_prm_uri     VARCHAR2 := NULL<font></font>
    , a_prm_hdr     VARCHAR2 := NULL<font></font>
    )<font></font>
AS<font></font>
    TYPE TStringHash IS TABLE OF VARCHAR2(256) INDEX BY VARCHAR2(256);<font></font>
    lh_hdr              TStringHash;<font></font>
    l_hdr               VARCHAR2(256);<font></font>
    l_resp              CLOB;<font></font>
    l_response_status   INTEGER := 200;<font></font>
    l_ccontent_type     VARCHAR2(64) := 'application/json';<font></font>
    l_in_headers        VARCHAR2(32767);<font></font>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">--      </span>
    lh_hdr(<span class="hljs-string">'SERVER_SOFTWARE'</span>)       := OWA_UTIL.get_cgi_env(<span class="hljs-string">'SERVER_SOFTWARE'</span>);<font></font>
    lh_hdr('SERVER_NAME')           := OWA_UTIL.get_cgi_env('SERVER_NAME');<font></font>
    lh_hdr('GATEWAY_INTERFACE')     := OWA_UTIL.get_cgi_env('GATEWAY_INTERFACE');<font></font>
    lh_hdr('SERVER_PROTOCOL')       := OWA_UTIL.get_cgi_env('SERVER_PROTOCOL');<font></font>
    lh_hdr('SERVER_PORT')           := OWA_UTIL.get_cgi_env('SERVER_PORT');<font></font>
    lh_hdr('REQUEST_METHOD')        := OWA_UTIL.get_cgi_env('REQUEST_METHOD');<font></font>
    lh_hdr('PATH_INFO')             := OWA_UTIL.get_cgi_env('PATH_INFO');<font></font>
    lh_hdr('PATH_TRANSLATED')       := OWA_UTIL.get_cgi_env('PATH_TRANSLATED');<font></font>
    lh_hdr('SCRIPT_NAME')           := OWA_UTIL.get_cgi_env('SCRIPT_NAME');<font></font>
    lh_hdr('QUERY_STRING')          := OWA_UTIL.get_cgi_env('QUERY_STRING');<font></font>
    lh_hdr('REMOTE_HOST')           := OWA_UTIL.get_cgi_env('REMOTE_HOST');<font></font>
    lh_hdr('REMOTE_ADDR')           := OWA_UTIL.get_cgi_env('REMOTE_ADDR');<font></font>
    lh_hdr('AUTH_TYPE')             := OWA_UTIL.get_cgi_env('AUTH_TYPE');<font></font>
    lh_hdr('REMOTE_USER')           := OWA_UTIL.get_cgi_env('REMOTE_USER');<font></font>
    lh_hdr('REMOTE_IDENT')          := OWA_UTIL.get_cgi_env('REMOTE_IDENT');<font></font>
    lh_hdr('CONTENT-TYPE')          := OWA_UTIL.get_cgi_env('CONTENT-TYPE');<font></font>
    lh_hdr('CONTENT-LENGTH')        := OWA_UTIL.get_cgi_env('CONTENT-LENGTH');<font></font>
    lh_hdr('HTTP_ACCEPT')           := OWA_UTIL.get_cgi_env('HTTP_ACCEPT');<font></font>
    lh_hdr('HTTP_ACCEPT_LANGUAGE')  := OWA_UTIL.get_cgi_env('HTTP_ACCEPT_LANGUAGE');<font></font>
    lh_hdr('HTTP_USER_AGENT')       := OWA_UTIL.get_cgi_env('HTTP_USER_AGENT');<font></font>
    lh_hdr('HTTP_COOKIE')           := OWA_UTIL.get_cgi_env('HTTP_COOKIE');<font></font>
    lh_hdr('a_prm_uri')             := a_prm_uri;<font></font>
    lh_hdr('a_prm_hdr')             := a_prm_hdr;<font></font>
 <font></font>
    l_hdr := lh_hdr.FIRST;<font></font>
    WHILE l_hdr IS NOT NULL LOOP<font></font>
        IF lh_hdr(l_hdr) IS NOT NULL THEN<font></font>
            l_in_headers := l_in_headers||CHR(10)||l_hdr||': '||lh_hdr(l_hdr);<font></font>
        <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<font></font>
        l_hdr := lh_hdr.NEXT(l_hdr);<font></font>
    <span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<font></font>
 <font></font>
    l_resp := '{ "result" : "success" }';<font></font>
 <font></font>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_ws_log<font></font>
        ( message<font></font>
        , request_header<font></font>
        , request_body<font></font>
        , response_header<font></font>
        , response_body)<font></font>
    <span class="hljs-keyword">VALUES</span>
        ( <span class="hljs-literal">NULL</span><font></font>
        , l_in_headers<font></font>
        , a_request<font></font>
        , <span class="hljs-string">'Content-Type: '</span>||l_ccontent_type<font></font>
        , l_resp);<font></font>
 <font></font>
    OWA_UTIL.STATUS_LINE(nstatus =&gt; l_response_status, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.MIME_HEADER(ccontent_type =&gt; l_ccontent_type, bclose_header =&gt; FALSE);<font></font>
    OWA_UTIL.HTTP_HEADER_CLOSE();<font></font>
    htp.p(l_resp);<font></font>
<span class="hljs-keyword">END</span> process_request;</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la proc√©dure, nous enregistrons simplement les valeurs des nouveaux param√®tres dans le journal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez de nouveaux param√®tres au gestionnaire de requ√™tes POST - sous la forme de variables de liaison </font></font><code>:prm_uri</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>:prm_hdr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gestionnaire de la demande de requ√™te POST avec de nouveaux param√®tres:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
    l_blob <span class="hljs-built_in">BLOB</span> := :<span class="hljs-keyword">body</span>;
<span class="hljs-keyword">BEGIN</span><font></font>
    PK_ORDS_API.process_request(a_request =&gt; PK_ORDS_API.blob2clob(l_blob), a_prm_uri =&gt; :prm_uri, a_prm_hdr =&gt; :prm_hdr);<font></font>
EXCEPTION<font></font>
    WHEN OTHERS THEN<font></font>
        OWA_UTIL.STATUS_LINE(nstatus =&gt; 500, bclose_header =&gt; FALSE);<font></font>
        OWA_UTIL.MIME_HEADER(ccontent_type =&gt; 'application/json');<font></font>
        htp.p('{ "result" : "error", "message" : "'||SQLERRM||'" }');<font></font>
<span class="hljs-keyword">END</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le gestionnaire, sous l'onglet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Param√®tres</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">d√©clarez les variables: sous </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mc/cx/mh/mccxmhpqkgnbkll850xmlojvy6e.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cette forme, le premier champ ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nom</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) contient le nom du param√®tre attendu dans la demande, le deuxi√®me champ ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">param√®tre</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de liaison) - le nom de la variable de liaison qui sera sp√©cifi√©e dans le gestionnaire de cette demande. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ex√©cutons la demande avec de nouveaux param√®tres: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k1/rj/e5/k1rje5cdkd9prfi8r-canaolczs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©sultat - les param√®tres de la demande ont √©t√© enregistr√©s dans le journal: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4y/vy/c6/4yvyc6zvhi_xkhod215lxywbdee.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veuillez noter que les param√®tres de l'URI peuvent √©galement √™tre r√©cup√©r√©s √† partir de la variable CGI </font></font><code>QUERY_STRING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, c'est-√†-dire que pour obtenir les param√®tres, il n'est pas n√©cessaire de d√©marrer les variables de liaison - vous pouvez les analyser dans la proc√©dure du gestionnaire demande.</font></font><br>
<br>
<a name="OracleRESTExample1-Step7"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variables CGI</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque vous travaillez avec HTTP dans Oracle, il est possible d'obtenir les valeurs des variables d'environnement qui refl√®tent le contexte de la demande HTTP. </font><font style="vertical-align: inherit;">Vous pouvez obtenir les valeurs des variables en utilisant la proc√©dure </font></font><code>OWA_UTIL.get_cgi_env</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste des variables CGI disponibles en PL / SQL</font></font></b>
                        <div class="spoiler_text"><code>APEX_LISTENER_VERSION<br>
GATEWAY_INTERFACE<br>
GATEWAY_IVERSION<br>
HTTP_ACCEPT_ENCODING<br>
HTTP_HOST<br>
HTTP_PORT<br>
HTTP_USER_AGENT<br>
PATH_ALIAS<br>
PATH_INFO<br>
PLSQL_GATEWAY<br>
QUERY_STRING<br>
REMOTE_ADDR<br>
REMOTE_USER<br>
REQUEST_CHARSET<br>
REQUEST_IANA_CHARSET<br>
REQUEST_METHOD<br>
REQUEST_PROTOCOL<br>
REQUEST_SCHEME<br>
SCRIPT_NAME<br>
SERVER_NAME<br>
SERVER_PORT<br>
SERVER_PROTOCOL<br>
SERVER_SOFTWARE<br>
WEB_AUTHENT_PREFIX<br>
host<br>
user-agent<br>
CONTENT-LENGTH<br>
CONTENT-TYPE</code></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voir aussi: En- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√™tes HTTP (OWA_UTIL) et Variables de liaison sp√©cifiques √† ORDS</font></font></a><br>
<br>
<a name="OracleRESTExample2"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple 2: acc√®s √† une table via ORDS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet exemple, nous consid√©rons l'organisation de l'acc√®s √† un objet de base de donn√©es (√† une table) via ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme dans l'exemple pr√©c√©dent, nous rendons l'acc√®s sans autorisation. </font><font style="vertical-align: inherit;">D√©couvrez comment s√©curiser l'acc√®s aux ressources dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour rendre un objet de base de donn√©es accessible via ORDS, vous devez effectuer une seule √©tape - la commande </font></font><code>ORDS.ENABLE_OBJECT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Apr√®s cela, l'objet est accessible par un URI de la forme:</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<a name="OracleRESTExample2-Step1"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©er un motif de test</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour un exemple nous allons cr√©er le tableau "Commandes". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Script de cr√©ation de table:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T_ORDER<font></font>
(<font></font>
  id_order   <span class="hljs-built_in">NUMBER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  <span class="hljs-keyword">NUM</span>        <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">32</span>),<font></font>
  buyer_name <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">256</span>),<font></font>
  dt_order   <span class="hljs-built_in">DATE</span>,<font></font>
  memo       <span class="hljs-built_in">VARCHAR2</span>(<span class="hljs-number">2000</span>)<font></font>
);<font></font>
 <font></font>
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.id_order <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.num <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.buyer_name <span class="hljs-keyword">IS</span> <span class="hljs-string">' '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.dt_order <span class="hljs-keyword">IS</span> <span class="hljs-string">'  '</span>;
<span class="hljs-keyword">COMMENT</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> T_ORDER.memo <span class="hljs-keyword">IS</span> <span class="hljs-string">''</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T_ORDER <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> PK_T_ORDER PRIMARY <span class="hljs-keyword">KEY</span> (ID_ORDER) <span class="hljs-keyword">USING</span> <span class="hljs-keyword">INDEX</span>;</code></pre><br>
<a name="OracleRESTExample2-Step2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acc√®s √† la table d'ouverture via ORDS</font></font></h4><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans SQL Developer Invoke le menu contextuel de la table n√©cessaire, s√©lectionnez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l'option Activer le service le reste ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/pe/iw/jmpeiwllpn8ailltyqp-zmyfxji.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la fen√™tre des param√®tres d'acc√®s, cochez la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">case Activer l'objet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , d√©cochez la case </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autorisation requise</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cliquez sur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Terminer"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ou </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Suivant"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour voir le code PL / SQL re√ßu):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/9q/fj/9e/9qfj9eql816su08ignjwhfbjp24.png"><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s avoir effectu√© ces √©tapes, la table </font></font><code>T_ORDER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">devient disponible via HTTP, l'URI de base pour acc√©der √† la ressource:</font></font><br>
<br>
<pre><code class="sql hljs">http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liste d'inclusion de table:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DECLARE</span>
  <span class="hljs-keyword">PRAGMA</span> AUTONOMOUS_TRANSACTION;
<span class="hljs-keyword">BEGIN</span><font></font>
 <font></font>
    ORDS.ENABLE_OBJECT(p_enabled =&gt; <span class="hljs-literal">TRUE</span>,<font></font>
                       p_schema =&gt; <span class="hljs-string">'WS_TEST'</span>,<font></font>
                       p_object =&gt; <span class="hljs-string">'T_ORDER'</span>,<font></font>
                       p_object_type =&gt; <span class="hljs-string">'TABLE'</span>,<font></font>
                       p_object_alias =&gt; <span class="hljs-string">'t_order'</span>,<font></font>
                       p_auto_rest_auth =&gt; <span class="hljs-literal">FALSE</span>);<font></font>
 <font></font>
    <span class="hljs-keyword">commit</span>;<font></font>
 <font></font>
<span class="hljs-keyword">END</span>;<font></font>
/</code></pre><br>
</li>
</ol><br>
<a name="OracleRESTExample2-Step3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cr√©er ou modifier un enregistrement</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'acc√®s √† la table est ouvert - nous v√©rifions comment vous pouvez cr√©er et modifier des enregistrements dans la table via ORDS. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour cr√©er un enregistrement, nous ex√©cutons la demande </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la documentation ORDS, la description suivante </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est sp√©cifi√©e </font><font style="vertical-align: inherit;">dans la description de la m√©thode </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Autrement dit, le champ </font></font><code>KeyValues</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(cl√© d'enregistrement) doit √™tre rempli m√™me pour un nouvel enregistrement en cours de cr√©ation. </font><font style="vertical-align: inherit;">La requ√™te elle-m√™me doit r√©pertorier tous les champs de la table (mais le champ cl√© peut √™tre omis).</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enqu√™te</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 157<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1"<font></font>
}</code></pre></div>
                    </div><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En r√©ponse, nous obtenons tous les champs de l'enregistrement qui vient d'√™tre cr√©√©:</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs"><font></font>
HTTP/1.1 200 OK<font></font>
Content-Type: application/json<font></font>
Content-Location: http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "  1",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous regardons le contenu du tableau - notre nouvel enregistrement est apparu: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/oy/sb/ud/oysbudug0wwzgn8u7rz5jacs4ng.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour changer l'enregistrement, nous appelons la m√™me m√©thode PUT. </font><font style="vertical-align: inherit;">Modifiez la note dans notre commande:</font></font><br>
<br>
<pre><code class="sql hljs">PUT http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25 HTTP/1.1<font></font>
Accept-Encoding: gzip,deflate<font></font>
Content-Type: application/json;charset=UTF-8<font></font>
Content-Length: 178<font></font>
Host: &lt;server&gt;:&lt;port&gt;<font></font>
Connection: Keep-Alive<font></font>
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)<font></font>
 <font></font>
{<font></font>
	"num" : "ords-3472634",<font></font>
	"buyer_name" : "Buyer Name",<font></font>
	"dt_order" : "2019-10-25T12:00:00Z",<font></font>
	"memo" : "  1.  "<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la r√©ponse, nous obtenons le m√™me JSON avec les param√®tres de l'enregistrement modifi√©. </font><font style="vertical-align: inherit;">Dans le tableau, nous voyons que la note a √©t√© mise √† jour:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gb/ba/ax/gbbaax7cmuudt8bd9osl3ugr6to.png"><br>
<br>
<a name="OracleRESTExample2-Step4"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©cup√©ration des enregistrements d'une table</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe trois modes d'interrogation des donn√©es d'une table:</font></font><br>
 <br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demande de page:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?offset=&lt;Offset&gt;&amp;limit=&lt;Limit&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demande de conditions:</font></font><br>
<br>
<pre><code class="sql hljs"> GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/?q=&lt;FilterClause&gt;</code></pre></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demande de cl√© primaire:</font></font><br>
 <br>
<pre><code class="sql hljs">GET http://&lt;HOST&gt;:&lt;PORT&gt;/ords/&lt;SchemaAlias&gt;/&lt;ObjectAlias&gt;/&lt;KeyValues&gt;</code></pre></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour obtenir tous les enregistrements, vous pouvez ex√©cuter la requ√™te sans sp√©cifier de param√®tres:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©ponse</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:39:58 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "items": [   {<font></font>
      "id_order": 25,<font></font>
      "num": "ords-3472634",<font></font>
      "buyer_name": "Buyer Name",<font></font>
      "dt_order": "2019-10-25T12:00:00Z",<font></font>
      "memo": "—û¬µ–É‚Äö—ï–Ü‚Äπ‚Ññ ¬∑¬∞—î¬∞¬∑ 1.  ¬∑—ò¬µ–Ö‚Äö–ä —ó–Ç—ò¬µ‚Ä°¬∞–Ö¬µ",<font></font>
      "links": [      {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      }]<font></font>
   }],<font></font>
   "hasMore": false,<font></font>
   "limit": 25,<font></font>
   "offset": 0,<font></font>
   "count": 1,<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/"<font></font>
      },<font></font>
            {<font></font>
         "rel": "first",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment demander √† Oracle d'ajouter un encodage √† l'en-t√™te Content-Type est une question ouverte.</font></font></i><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25</code></pre><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R√©ponse</font></font></b>
                        <div class="spoiler_text"><pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date: Fri, 25 Oct 2019 15:44:35 GMT<font></font>
Content-Type: application/json<font></font>
ETag: "..."<font></font>
Transfer-Encoding: chunked<font></font>
 <font></font>
{<font></font>
   "id_order": 25,<font></font>
   "num": "ords-3472634",<font></font>
   "buyer_name": "Buyer Name",<font></font>
   "dt_order": "2019-10-25T12:00:00Z",<font></font>
   "memo": "—û¬µ–É‚Äö—ï–Ü‚Äπ‚Ññ ¬∑¬∞—î¬∞¬∑ 1.  ¬∑—ò¬µ–Ö‚Äö–ä —ó–Ç—ò¬µ‚Ä°¬∞–Ö¬µ",<font></font>
   "links":    [<font></font>
            {<font></font>
         "rel": "self",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "edit",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/25"<font></font>
      },<font></font>
            {<font></font>
         "rel": "describedby",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/metadata-catalog/t_order/item"<font></font>
      },<font></font>
            {<font></font>
         "rel": "collection",<font></font>
         "href": "http://&lt;server&gt;:&lt;port&gt;/ords/ws_test/t_order/"<font></font>
      }<font></font>
   ]<font></font>
}</code></pre></div>
                    </div><br>
<a name="OracleRESTExample2-Step5"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supprimer l'enregistrement</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour supprimer, utilisez la m√©thode HTTP </font></font><code>DELETE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enqu√™te:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q={<span class="hljs-string">"id_order"</span>:<span class="hljs-number">25</span>}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La demande dans sa forme originale:</font></font><br>
<br>
<pre><code class="sql hljs"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">http</span>://&lt;<span class="hljs-keyword">server</span>&gt;:&lt;port&gt;/ords/ws_test/t_order/?q=%<span class="hljs-number">7</span>B%<span class="hljs-number">22</span>id_order%<span class="hljs-number">22</span>%<span class="hljs-number">3</span>A25%<span class="hljs-number">7</span>D</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
R√©ponse:</font></font><br>
<br>
<pre><code class="sql hljs">HTTP/1.1 200 OK<font></font>
Date=Fri, 25 Oct 2019 16:23:39 GMT<font></font>
Content-Type=application/json<font></font>
Transfer-Encoding=chunked<font></font>
 <font></font>
{"rowsDeleted":1}</code></pre><br>
<a name="OracleRESTSummary"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r√©sultats</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ORDS est un m√©canisme assez flexible et polyvalent pour travailler avec des services Web, qui vous permet de mettre en ≈ìuvre un REST √† part enti√®re. En termes de performances, il est de loin sup√©rieur √† Native Oracle WS avec sa lourde analyse XML interne. Pour impl√©menter un syst√®me tr√®s charg√©, cette approche ne convient pas: dans ce cas, une pile technologique diff√©rente est n√©cessaire - un serveur d'applications distinct, des requ√™tes de proxy, des bases de donn√©es en cluster, etc. Cependant, pour la mise en ≈ìuvre de syst√®mes avec un nombre relativement faible de requ√™tes HTTP (jusqu'√† 10-20 par seconde), ORDS est l'approche optimale en termes de performances et de flexibilit√©. ORDS est inf√©rieur √† Native Oracle WS uniquement en termes de g√©n√©ration d'une sp√©cification de service Web: ce dernier fournit une sp√©cification enti√®rement finalis√©e (WSDL) qui peut √™tre fournie ¬´telle quelle¬ª aux consommateurs du service. ORDS a √©galement la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacit√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g√©n√©rer une description, mais pour l'approche consid√©r√©e dans cet article avec un service enti√®rement universel (lorsqu'il existe une proc√©dure de traitement commune pour tous les services), la g√©n√©ration automatique de la sp√©cification devient impossible. </font><font style="vertical-align: inherit;">Oracle ne g√©n√©rera qu'une sp√©cification de niveau sup√©rieur et les pi√®ces (mod√®les de donn√©es) devront √™tre d√©crites manuellement.</font></font><br>
<br>
<a name="Alternatives"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Approches alternatives</font></font></h2><br>
<a name="JavaServlet"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Servlet Java</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette option de cr√©ation de services Web dans la m√©thode de configuration est similaire √† Native Oracle WS: elle n√©cessite √©galement l'utilisation du serveur HTTP int√©gr√© d'Oracle, ainsi que des param√®tres ACL (comme d'ailleurs toutes les autres m√©thodes). Mais, contrairement √† Native Oracle WS, cette option fonctionne avec HTTP pur. Les </font><font style="vertical-align: inherit;">gestionnaires des </font><font style="vertical-align: inherit;">demandes dans ce cas sont √©crits en Java et ne regarder que le type HTTP demande ( </font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>GET</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>POST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et ainsi de </font><font style="vertical-align: inherit;">suite, bien qu'il puisse √™tre fait et un gestionnaire pour tous les </font><font style="vertical-align: inherit;">types), et la </font><font style="vertical-align: inherit;">logique de </font><font style="vertical-align: inherit;">traitement reste enti√®rement √† la discr√©tion du promoteur. Vous pouvez transf√©rer le corps de la demande ¬´tel quel¬ª dans la logique de la base de donn√©es, le d√©sassembler et le traiter l√†-bas, vous pouvez laisser une partie de la logique du c√¥t√© du gestionnaire Java et appeler la proc√©dure souhait√©e √† partir de la base de donn√©es en fonction des donn√©es fournies dans la demande.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche de la mise en ≈ìuvre des services Web est assez universelle et ne n√©cessite pas non plus l'installation de composants suppl√©mentaires. </font><font style="vertical-align: inherit;">Nous n'avons pas r√©ussi √† l'appliquer uniquement en raison des exigences strictes du service: nous avions besoin d'un service Web qui ne n√©cessitait pas d'authentification. </font><font style="vertical-align: inherit;">Lors de la mise en ≈ìuvre de cette approche, l'authentification est requise et cette exigence n'a pas pu √™tre contourn√©e. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voir la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation Oracle pour</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> plus de d√©tails sur cette m√©thode </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<a name="DatabaseAccessDescriptor"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripteur d'acc√®s √† la base de donn√©es (servlet PL / SQL)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette option est compl√®tement similaire √† la pr√©c√©dente, seule la proc√©dure stock√©e PL / SQL agit comme gestionnaire de requ√™tes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemple d'URL - le nom du package, le nom de la proc√©dure, les param√®tres (requ√™te GET) sont indiqu√©s:</font></font><br>
<br>
<pre><code class="sql hljs">GET http://&lt;server&gt;:&lt;port&gt;/servlet_plsql/pi_test.test_serv?p_path=ppp </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas d'une requ√™te POST, les noms des param√®tres doivent √™tre saisis directement dans le corps de la requ√™te via le signe ¬´=¬ª, ce qui est plut√¥t g√™nant, car le type du contenu de la requ√™te (ContentType) dans ce cas ne peut √™tre que du texte. </font><font style="vertical-align: inherit;">Vous pouvez transf√©rer une structure xml ou json uniquement sous cette forme:</font></font><br>
<br>
<pre><code class="sql hljs">p_proc_param_name=&lt;xml_data&gt;‚Ä¶&lt;/xml_data&gt;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette version du service Web n'est applicable que dans les cas o√π nous traitons des demandes tr√®s simples - appels de proc√©dure avec des types de donn√©es simples. </font><font style="vertical-align: inherit;">La transmission de toute structure complexe √† plusieurs niveaux dans cette option ne fonctionnera pas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette approche est </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©crite</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en </font><font style="vertical-align: inherit;">d√©tail </font><font style="vertical-align: inherit;">sur le site Internet ORACLE-BASE.</font></font><br>
<br>
<a name="Conclusion"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La cr√©ation d'un service Web dans Oracle est une t√¢che assez simple qui ne n√©cessite pas d'√©crire n'importe quel type de code super complexe. Dans le m√™me temps, les d√©veloppeurs Oracle int√®grent dans leur arsenal un m√©canisme assez puissant qui vous permet d'int√©grer des syst√®mes h√©t√©rog√®nes ou des parties de syst√®mes via HTTP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cet article, nous avons examin√© quatre approches pour cr√©er des services Web. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Native Oracle WS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est une technologie obsol√®te qui a n√©anmoins ses avantages: WSDL g√©n√©r√© automatiquement, analyse automatique de XML, pas besoin d'installer de logiciel suppl√©mentaire. Le principal inconv√©nient est la faible performance et la limitation des types de donn√©es pris en charge. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ORDS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- √† mon avis, la fa√ßon pr√©f√©r√©e de cr√©er des services Web. Assez flexible et polyvalent. Parmi les inconv√©nients de cette m√©thode, nous pouvons seulement distinguer qu'elle n'est pas incluse dans le package Oracle standard, c'est-√†-dire qu'elle n√©cessite une installation distincte. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Servlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un moyen compl√®tement universel qui ne n√©cessite pas l'installation de logiciels suppl√©mentaires. Cependant, tout doit √™tre fait enti√®rement manuellement, car il n'y a aucune possibilit√© de services de g√©n√©ration automatique. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL / SQL Servlet</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est l'approche la moins r√©ussie. Parmi les avantages, nous pouvons distinguer que dans cette option, nous avons la possibilit√© d'appeler des proc√©dures stock√©es via HTTP sans avoir besoin d'installer de logiciel suppl√©mentaire, ou sans √©crire de code suppl√©mentaire dans d'autres langues: tout le code est √©crit uniquement en PL / SQL.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci √† tous pour votre attention! </font><font style="vertical-align: inherit;">J'esp√®re que l'article sera utile √† ceux qui sont en quelque sorte connect√©s aux produits Oracle et sont perplexes face aux probl√®mes d'int√©gration intra-syst√®me et intersyst√®mes.</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mat√©riaux additionnels</font></font></b>
                        <div class="spoiler_text"><b>Native Oracle XML DB Web Services </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Using Native Oracle XML DB Web Services</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Native Oracle XML DB Web Services in Oracle 11g Release 1</a><br>
<br>
<b>ORDS</b><br>
<br>
: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Installation, Configuration, and Development Guide</a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Install Oracle REST Data Services 3.0.X in under 5 minutes</a><br>
<br>
CGI-: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://oracle-base.com/articles/misc/oracle-rest-data-services-ords-">HTTP Headers (OWA_UTIL) and ORDS-Specific Bind Variables</a><br>
<br>
  ORDS: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Authentication</a><br>
<br>
ORDS  Open API (Swagger): <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Oracle REST Data Services (ORDS)&nbsp;: Open API 2.0 (Swagger) Support</a><br>
<br>
ORDS,  BLOB: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ORDS web services returning BLOBs</a> <br>
<br>
<b>Java Servlet </b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Writing Oracle XML DB HTTP Servlets in Java</a><br>
<br>
<b>Database Access Descriptor (PL/SQL Servlet)</b><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DBMS_EPG ‚Äî The Embedded PL/SQL Gateway in Oracle 10g Database Release 2</a> <br>
</div>
                    </div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr501998/index.html">Prix ‚Äã‚Äãcher des styles. Rapport Yandex</a></li>
<li><a href="../fr502000/index.html">12 cours en ligne d'ing√©nierie des donn√©es</a></li>
<li><a href="../fr502004/index.html">M√©thode Kanban: comprendre votre processus en tant que processus de renforcement des connaissances collectives - Partie 1 (recettes)</a></li>
<li><a href="../fr502008/index.html">Programmation aux masses</a></li>
<li><a href="../fr502028/index.html">Vanya va √† grand-m√®re ou adaptative JavaScript dynamique</a></li>
<li><a href="../fr502034/index.html">Les composants contr√¥l√©s et non contr√¥l√©s de React n'ont pas √† √™tre compliqu√©s</a></li>
<li><a href="../fr502038/index.html">√âlever un atome, approche 2.0.1</a></li>
<li><a href="../fr502040/index.html">√Ä propos des verbes Phrasal-5 (haut / bas)</a></li>
<li><a href="../fr502046/index.html">Cinq ans de rouille</a></li>
<li><a href="../fr502048/index.html">Comportement complexe sans r√©seaux neuronaux et sans entra√Ænement. La base philosophique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>