<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🦎 🙍🏼 🧓🏿 Buku "Terraform: infrastruktur di tingkat kode" 🛌🏾 🗺️ 👶🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, habrozhiteli! Buku ini ditujukan untuk semua orang yang bertanggung jawab atas kode yang sudah ditulis. Ini berlaku untuk administrator sistem, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Buku "Terraform: infrastruktur di tingkat kode"</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/503858/"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/el/eg/lp/eleglpt_bkgjd7cftgp1yrmg_gk.jpeg" align="left" alt="gambar"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo, habrozhiteli! Buku ini ditujukan untuk semua orang yang bertanggung jawab atas kode yang sudah ditulis. Ini berlaku untuk administrator sistem, spesialis operasi, rilis, SR, insinyur DevOps, pengembang infrastruktur, pengembang siklus penuh, pemimpin tim teknik dan direktur teknis. Apa pun posisi Anda, jika Anda terlibat dalam infrastruktur, menyebarkan kode, mengkonfigurasi server, cluster skala, mencadangkan data, memantau aplikasi, dan menjawab panggilan pada pukul tiga pagi, buku ini cocok untuk Anda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bersama-sama, tanggung jawab ini biasanya disebut sebagai kegiatan operasional (atau administrasi sistem). </font><font style="vertical-align: inherit;">Sebelumnya, pengembang yang tahu cara menulis kode tetapi tidak mengerti administrasi sistem sering bertemu; </font><font style="vertical-align: inherit;">administrator sistem cukup sering menjumpai tanpa kemampuan untuk menulis kode. </font><font style="vertical-align: inherit;">Setelah pemisahan ini dapat diterima, tetapi di dunia modern, yang tidak lagi dapat dibayangkan tanpa cloud computing dan pergerakan DevOps, hampir semua pengembang membutuhkan keterampilan administratif, dan setiap administrator sistem harus dapat memprogram.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda tidak hanya akan belajar bagaimana mengelola infrastruktur dalam bentuk kode menggunakan Terraform, tetapi juga belajar bagaimana hal itu cocok dengan konsep keseluruhan DevOps. </font><font style="vertical-align: inherit;">Berikut beberapa pertanyaan yang dapat Anda jawab dengan membaca buku ini.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa menggunakan IaC?</font></font></li>
<li>    , ,     ?</li>
<li>   Terraform, Chef, Ansible, Puppet, Salt, CloudFormation, Docker, Packer  Kubernetes?</li>
<li>   Terraform       ?</li>
<li>   Terraform,    ?</li>
<li>    Terraform,       ?</li>
<li>     Terraform?</li>
<li>  Terraform     ?</li>
<li>    Terraform   ?</li>
</ul><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title">    </b>
                        <div class="spoiler_text">    2017 .   2019-         ,      !                 .  ,        .<br>
<br>
        ,  ,     ,    Terraform,    .<br>
<br>
<ul>
<li>   Terraform.    ,   Terraform  0.8.     Terraform   0.12.       ,     .  ,   !</li>
<li>   .           Terraform.    , ,    ,  ,    ,  ,  ,    .</li>
<li>  .      Terraform   .  , ,               — ,      .</li>
<li>   .  8      ,      Terraform    . ,  ,      ,          : ,      .</li>
<li>HCL2.  Terraform 0.12   HCL   HCL2.        (       ${…}!),   ,     ,   null, for_each  for,    .          HCL2,         5  6.</li>
<li>   .  Terraform 0.9    .        Terraform    .  Terraform 0.9     ,       ;     0.10      .       3.</li>
<li>    Terraform.  Terraform 0.10         (    AWS, GCP, Azure  . .).         ,         .          terraform init  ,       .       2  7.</li>
<li>   .  2016   Terraform        (AWS, GCP  Azure).      100,  ,  ,   1.               (,     Alicloud, Oracle Cloud Infrastructure, VMware vSphere  .),       ,     (GitHub, GitLab  BitBucket),   (MySQL, PostreSQL  InfluxDB),     ( DataDog, New Relic  Grafana),   Kubernetes, Helm, Heroku, Rundeck  Rightscale   .  ,       : ,   AWS     ,        ,   CloudFormation!</li>
<li>  Terraform.  2017   HashiCorp    Terraform (registry.terraform.io) —  ,         Terraform,  .  2018          .  Terraform 0.11        .       « »  . 153.</li>
<li>  .  Terraform 0.9    :         ,    ,   errored.tfstate.  Terraform 0.12    .    ,            ,     .</li>
<li>   .      ,     (.  «  »  . 144),  « »         (,  «  Terraform»  . 242),  plan    apply (.  «  »  . 64),     create_before_destroy,    count,           (.  «»  . 160),    ,   provider   .</li>
</ul></div>
                    </div><br>
<h3>.    Terraform</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
(perhatian lebih banyak diberikan pada masalah pengujian otomatis dalam buku nanti) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dunia DevOps penuh dengan ketakutan yang berbeda: semua orang takut untuk membiarkan hal-hal bekerja, kehilangan data atau diretas. Saat melakukan perubahan, Anda selalu bertanya pada diri sendiri apa konsekuensi yang akan ditimbulkannya. Apakah akan berperilaku sama di semua lingkungan? Apakah akan menyebabkan pemadaman lagi? Dan, jika itu terjadi, berapa banyak Anda harus tetap bekerja saat ini untuk memperbaikinya? Seiring pertumbuhan perusahaan, semakin banyak yang dipertaruhkan, membuat proses penyebaran semakin buruk dan meningkatkan risiko kesalahan. Banyak perusahaan mencoba untuk meminimalkan risiko ini melalui penyebaran yang lebih jarang, tetapi sebagai hasilnya, setiap penyebaran individu menjadi lebih besar dan lebih rentan terhadap kesalahan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda mengelola infrastruktur Anda dalam bentuk kode, Anda memiliki cara yang lebih baik untuk meminimalkan risiko: tes. </font><font style="vertical-align: inherit;">Tujuan mereka adalah memberi Anda kepercayaan diri yang cukup untuk melakukan perubahan. </font><font style="vertical-align: inherit;">Kata kuncinya di sini adalah kepercayaan diri: tidak ada tes yang dapat menjamin tidak ada kesalahan, sehingga Anda lebih mungkin untuk menghadapi kemungkinan. </font><font style="vertical-align: inherit;">Jika Anda dapat menangkap semua infrastruktur dan proses penyebaran Anda sebagai kode, Anda dapat menguji kode ini di lingkungan pengujian. </font><font style="vertical-align: inherit;">Jika berhasil, ada kemungkinan besar bahwa kode yang sama akan bekerja di lingkungan industri. </font><font style="vertical-align: inherit;">Dalam dunia ketakutan dan ketidakpastian, probabilitas dan kepercayaan diri yang tinggi itu mahal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam bab ini, kita akan melalui proses pengujian kode infrastruktur, baik manual maupun otomatis, dengan penekanan pada yang terakhir. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes manual:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dasar-dasar pengujian manual;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sumber daya pembersihan setelah tes.</font></font></li>
</ul><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes otomatis:</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unit test;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tes integrasi;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tes end-to-end;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pendekatan pengujian lainnya.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes manual</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat berpikir tentang cara menguji kode Terraform, akan sangat berguna untuk menggambar beberapa persamaan dengan kode pengujian yang ditulis dalam bahasa pemrograman untuk tujuan umum seperti Ruby. </font><font style="vertical-align: inherit;">Bayangkan Anda sedang menulis server web Ruby sederhana di file web-server.rb:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebServer</span> &lt; <span class="hljs-title">WEBrick</span>::<span class="hljs-title">HTTPServlet</span>::<span class="hljs-title">AbstractServlet</span>
  <span class="hljs-title">def</span> <span class="hljs-title">do_GET</span>(<span class="hljs-title">request</span>, <span class="hljs-title">response</span>)
     <span class="hljs-title">case</span> <span class="hljs-title">request</span>.<span class="hljs-title">path</span>
     <span class="hljs-title">when</span> "/"
         <span class="hljs-title">response</span>.<span class="hljs-title">status</span> </span>= <span class="hljs-number">200</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Hello, World'</span>
     <span class="hljs-keyword">else</span>
         response.status = <span class="hljs-number">404</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Not Found'</span><font></font>
     end<font></font>
  end<font></font>
end</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode ini akan mengembalikan 200 tanggapan OK dengan badan Halo, Dunia untuk URL /; </font><font style="vertical-align: inherit;">untuk alamat lain jawabannya 404. Bagaimana Anda menguji kode ini secara manual? </font><font style="vertical-align: inherit;">Biasanya, beberapa kode ditambahkan untuk menjalankan server web secara lokal:</font></font><br>
<br>
<pre><code class="java hljs">#   ,      <font></font>
#  ,       <font></font>
<span class="hljs-keyword">if</span> __FILE__ == $<span class="hljs-number">0</span>
  #      <span class="hljs-number">8000</span>
  server = WEBrick::HTTPServer.new :Port =&gt; <span class="hljs-number">8000</span>
  server.mount <span class="hljs-string">'/'</span>, WebServer<font></font>
<font></font>
  #    Ctrl+C<font></font>
  trap <span class="hljs-string">'INT'</span> <span class="hljs-keyword">do</span> server.shutdown end<font></font>
<font></font>
  #  <font></font>
  server.start<font></font>
end</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda menjalankan file ini di terminal, itu akan memuat server web pada port 8000:</font></font><br>
<br>
<pre><code class="java hljs">$ ruby web-server.rb<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick <span class="hljs-number">1.3</span><span class="hljs-number">.1</span>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO ruby <span class="hljs-number">2.3</span><span class="hljs-number">.7</span> (<span class="hljs-number">2018</span>-<span class="hljs-number">03</span>-<span class="hljs-number">28</span>) [universal.x86_64-darwin17]<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick::HTTPServer#start: pid=<span class="hljs-number">19767</span> port=<span class="hljs-number">8000</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memeriksa operasi server ini, Anda dapat menggunakan browser atau ikal:</font></font><br>
<br>
<pre><code class="java hljs">$ curl localhost:<span class="hljs-number">8000</span>/<font></font>
Hello, World<font></font>
<font></font>
$ curl localhost:<span class="hljs-number">8000</span>/invalid-path<font></font>
Not Found</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang bayangkan kita mengubah kode ini dengan menambahkan titik masuk / api ke dalamnya yang mengembalikan 201 Dibuat dan sebuah badan dalam format JSON:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebServer</span> &lt; <span class="hljs-title">WEBrick</span>::<span class="hljs-title">HTTPServlet</span>::<span class="hljs-title">AbstractServlet</span>
  <span class="hljs-title">def</span> <span class="hljs-title">do_GET</span>(<span class="hljs-title">request</span>, <span class="hljs-title">response</span>)
     <span class="hljs-title">case</span> <span class="hljs-title">request</span>.<span class="hljs-title">path</span>
     <span class="hljs-title">when</span> "/"
         <span class="hljs-title">response</span>.<span class="hljs-title">status</span> </span>= <span class="hljs-number">200</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Hello, World'</span>
     when <span class="hljs-string">"/api"</span>
         response.status = <span class="hljs-number">201</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'application/json'</span>
         response.body = <span class="hljs-string">'{"foo":"bar"}'</span>
     <span class="hljs-keyword">else</span>
         response.status = <span class="hljs-number">404</span>
         response[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'text/plain'</span>
         response.body = <span class="hljs-string">'Not Found'</span><font></font>
     end<font></font>
  end<font></font>
end</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menguji secara manual kode yang diperbarui ini, tekan Ctrl + C dan restart server web dengan menjalankan skrip lagi:</font></font><br>
<br>
<pre><code class="java hljs">$ ruby web-server.rb<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick <span class="hljs-number">1.3</span><span class="hljs-number">.1</span>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO ruby <span class="hljs-number">2.3</span><span class="hljs-number">.7</span> (<span class="hljs-number">2018</span>-<span class="hljs-number">03</span>-<span class="hljs-number">28</span>) [universal.x86_64-darwin17]<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick::HTTPServer#start: pid=<span class="hljs-number">19767</span> port=<span class="hljs-number">8000</span><font></font>
^C<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">15</span>:<span class="hljs-number">54</span>] INFO going to shutdown ...<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">15</span>:<span class="hljs-number">54</span>] INFO WEBrick::HTTPServer#start done.<font></font>
<font></font>
$ ruby web-server.rb<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick <span class="hljs-number">1.3</span><span class="hljs-number">.1</span>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO ruby <span class="hljs-number">2.3</span><span class="hljs-number">.7</span> (<span class="hljs-number">2018</span>-<span class="hljs-number">03</span>-<span class="hljs-number">28</span>) [universal.x86_64-darwin17]<font></font>
[<span class="hljs-number">2019</span>-<span class="hljs-number">05</span>-<span class="hljs-number">25</span> <span class="hljs-number">14</span>:<span class="hljs-number">11</span>:<span class="hljs-number">52</span>] INFO WEBrick::HTTPServer#start: pid=<span class="hljs-number">19767</span> port=<span class="hljs-number">8000</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memeriksa versi baru, Anda dapat kembali menggunakan perintah curl:</font></font><br>
<br>
<pre><code class="java hljs">$ curl localhost:<span class="hljs-number">8000</span>/api<font></font>
{<span class="hljs-string">"foo"</span>:<span class="hljs-string">"bar"</span>}</code></pre><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dasar-Dasar Pengujian Manual</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti apakah pengujian manual ini nantinya di Terraform? </font><font style="vertical-align: inherit;">Misalnya, dari bab-bab sebelumnya, Anda masih memiliki kode untuk menggunakan ALB. </font><font style="vertical-align: inherit;">Berikut ini cuplikan dari file modules / networking / alb / main.tf:</font></font><br>
<br>
<pre><code class="java hljs">resource <span class="hljs-string">"aws_lb"</span> <span class="hljs-string">"example"</span> {<font></font>
   name                     = <span class="hljs-keyword">var</span>.alb_name<font></font>
   load_balancer_type = <span class="hljs-string">"application"</span>
   subnets                  = <span class="hljs-keyword">var</span>.subnet_ids<font></font>
   security_groups      = [aws_security_group.alb.id]<font></font>
}<font></font>
<font></font>
resource <span class="hljs-string">"aws_lb_listener"</span> <span class="hljs-string">"http"</span> {<font></font>
   load_balancer_arn = aws_lb.example.arn<font></font>
   port                      = local.http_port<font></font>
   protocol                = <span class="hljs-string">"HTTP"</span><font></font>
<font></font>
   #      <span class="hljs-number">404</span><font></font>
   default_action {<font></font>
      type = <span class="hljs-string">"fixed-response"</span><font></font>
<font></font>
      fixed_response {<font></font>
        content_type = <span class="hljs-string">"text/plain"</span>
        message_body = <span class="hljs-string">"404: page not found"</span>
        status_code = <span class="hljs-number">404</span><font></font>
      }<font></font>
    }<font></font>
}<font></font>
<font></font>
resource <span class="hljs-string">"aws_security_group"</span> <span class="hljs-string">"alb"</span> {<font></font>
   name = <span class="hljs-keyword">var</span>.alb_name<font></font>
}<font></font>
<font></font>
# (...)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda membandingkan cantuman ini dengan kode Ruby, Anda dapat melihat satu perbedaan yang sangat jelas: AWS ALB, grup target, pendengar, grup keamanan, dan sumber daya lainnya tidak dapat digunakan di komputer Anda sendiri. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesimpulan utama tentang pengujian No. 1 mengikuti dari ini: Pengujian kode Terraform tidak dapat dilakukan secara lokal. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini tidak hanya berlaku untuk Terraform, tetapi juga untuk sebagian besar alat IaC. Satu-satunya cara praktis untuk melakukan pengujian manual di Terraform adalah dengan menyebarkan kode di lingkungan nyata (mis. Di AWS). Dengan kata lain, meluncurkan terraform secara independen berlaku dan terraform menghancurkan perintah yang Anda kerjakan saat membaca buku ini adalah pengujian manual di Terraform.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah salah satu alasan mengapa sangat penting untuk memiliki contoh yang mudah digunakan dalam folder contoh masing-masing modul (lihat bab 6). </font><font style="vertical-align: inherit;">Untuk menguji modul alb, cara termudah adalah dengan menggunakan kode demo yang Anda buat dalam contoh / alb:</font></font><br>
<br>
<pre><code class="java hljs">provider <span class="hljs-string">"aws"</span> {<font></font>
   region = <span class="hljs-string">"us-east-2"</span><font></font>
<font></font>
   #     AWS  <span class="hljs-number">2</span>.x<font></font>
   version = <span class="hljs-string">"~&gt; 2.0"</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">module</span> <span class="hljs-string">"alb"</span> {<font></font>
    source = <span class="hljs-string">"../../modules/networking/alb"</span><font></font>
<font></font>
    alb_name = <span class="hljs-string">"terraform-up-and-running"</span>
    subnet_ids = data.aws_subnet_ids.<span class="hljs-keyword">default</span>.ids<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menerapkan contoh ini, Anda perlu menjalankan perintah terraform apply, seperti yang telah Anda lakukan berulang kali:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">$ terraform <span class="hljs-title">apply</span>

<span class="hljs-params">(...)</span>

Apply complete! Resources: 5 added, 0 changed, 0 destroyed.

Outputs:

alb_dns_name </span>= hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di akhir penyebaran, Anda dapat menggunakan alat seperti curl untuk, misalnya, memastikan bahwa ALB mengembalikan 404 secara default:</font></font><br>
<br>
<pre><code class="java hljs">$ curl \<font></font>
   -s \<font></font>
   -o /dev/<span class="hljs-keyword">null</span> \<font></font>
   -w <span class="hljs-string">"%{http_code}"</span> \<font></font>
hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com<font></font>
<font></font>
<span class="hljs-number">404</span></code></pre><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pemeriksaan infrastruktur</font></font><br>
<br>
      ,   HTTP, ,     ,   curl  HTTP-.        . ,        MySQL,       MySQL.      VPN-,      VPN.      ,      ,       SSH    - .    .   ,    ,      .       ,    .</blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Biarkan saya mengingatkan Anda: ALB mengembalikan 404 karena tidak adanya aturan pendengar lain dalam konfigurasi, dan tindakan default dalam modul alb memiliki respons 404:</font></font><br>
<br>
<pre><code class="java hljs">resource <span class="hljs-string">"aws_lb_listener"</span> <span class="hljs-string">"http"</span> {<font></font>
   load_balancer_arn = aws_lb.example.arn<font></font>
   port                      = local.http_port<font></font>
   protocol                = <span class="hljs-string">"HTTP"</span><font></font>
<font></font>
   #      <span class="hljs-number">404</span><font></font>
   default_action {<font></font>
      type = <span class="hljs-string">"fixed-response"</span><font></font>
<font></font>
      fixed_response {<font></font>
       content_type = <span class="hljs-string">"text/plain"</span>
       message_body = <span class="hljs-string">"404: page not found"</span>
       status_code = <span class="hljs-number">404</span><font></font>
      }<font></font>
   }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, Anda sudah tahu cara menjalankan dan menguji kode Anda. </font><font style="vertical-align: inherit;">Sekarang Anda dapat mulai membuat perubahan. </font><font style="vertical-align: inherit;">Setiap kali Anda mengubah sesuatu (sehingga, misalnya, tindakan default mengembalikan 401), Anda perlu menggunakan perintah terraform apply untuk menggunakan kode baru:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">$ terraform <span class="hljs-title">apply</span>

<span class="hljs-params">(...)</span>

Apply complete! Resources: 0 added, 1 changed, 0 destroyed.

Outputs:

alb_dns_name </span>= hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk memeriksa versi baru, Anda dapat memulai kembali ikal:</font></font><br>
<br>
<pre><code class="java hljs">$ curl \<font></font>
   -s \<font></font>
   -o /dev/<span class="hljs-keyword">null</span> \<font></font>
   -w <span class="hljs-string">"%{http_code}"</span> \<font></font>
   hello-world-stage-<span class="hljs-number">477699288</span>.us-east-<span class="hljs-number">2</span>.elb.amazonaws.com
<span class="hljs-number">401</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah selesai, jalankan perintah penghancuran terraform untuk menghapus sumber daya:</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-function">$ terraform <span class="hljs-title">destroy</span>

<span class="hljs-params">(...)</span>

Apply complete! Resources: 0 added, 0 changed, 5 destroyed.</span></code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan kata lain, ketika bekerja dengan Terraform, setiap pengembang membutuhkan sampel kode yang baik untuk pengujian dan lingkungan pengembangan nyata (seperti akun AWS), yang berfungsi sebagai setara dengan komputer lokal dan digunakan untuk menjalankan tes. Dalam proses pengujian manual, kemungkinan besar Anda harus membuat dan menghapus sejumlah besar komponen infrastruktur, dan ini dapat menyebabkan banyak kesalahan. Dalam hal ini, lingkungan harus sepenuhnya diisolasi dari lingkungan yang lebih stabil yang dimaksudkan untuk pengujian akhir dan khususnya untuk aplikasi industri.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengingat hal di atas, saya sangat menyarankan agar setiap tim pengembangan menyiapkan lingkungan yang terisolasi di mana Anda dapat membuat dan menghapus infrastruktur apa pun tanpa konsekuensi. </font><font style="vertical-align: inherit;">Untuk meminimalkan kemungkinan konflik antara pengembang yang berbeda (bayangkan bahwa dua pengembang sedang mencoba membuat penyeimbang beban dengan nama yang sama), solusi ideal adalah dengan memberikan masing-masing anggota tim lingkungan terpisah yang sepenuhnya terisolasi. </font><font style="vertical-align: inherit;">Misalnya, jika Anda menggunakan Terraform bersama dengan AWS, setiap pengembang idealnya memiliki akun sendiri di mana mereka dapat menguji semua yang mereka inginkan.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembersihan sumber daya setelah pengujian</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kehadiran banyak lingkungan yang terisolasi diperlukan untuk produktivitas pengembang yang tinggi, tetapi jika Anda tidak berhati-hati, Anda dapat mengumpulkan banyak sumber daya tambahan yang akan mengacaukan semua lingkungan Anda dan membuat Anda harus membayar sejumlah uang. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk menjaga agar biaya tetap terkendali, bersihkan media yang terisolasi secara rutin. Ini adalah </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kesimpulan utama tentang pengujian nomor 2</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Minimal, Anda harus membuat budaya seperti itu di tim ketika, setelah pengujian, pengembang menghapus semua yang mereka gunakan menggunakan perintah penghancuran terraform. Dimungkinkan untuk menemukan alat untuk membersihkan kelebihan atau sumber daya lama yang dapat dijalankan secara teratur (misalnya, menggunakan cron). Berikut adalah beberapa contoh untuk berbagai lingkungan penempatan.</font></font><br>
<br>
<ul>
<li>cloud-nuke (http://bit.ly/2OIgM9r).      ,         .        AWS ( Amazon EC2 Instances, ASG, ELB  . .).      (Google Cloud, Azure)   .    —    ,    . , cloud-nuke      cron,           .   ,   ,      ,      :<br>
<br>
<pre><code class="java hljs">$ cloud-nuke aws --older-than <span class="hljs-number">48</span>h</code></pre></li>
<li>Janitor Monkey (http://bit.ly/2M4GoLB).      ,   AWS  ,    (  —   ).    ,  ,    ,            .    Netflix Simian Army,      Chaos Monkey    .   ,    Simian Army    ,       : ,   Janitor Monkey   Swabbie (http://bit.ly/2OLrOLb).</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aws-nuke (http://bit.ly/2ZB8lOe). </font><font style="vertical-align: inherit;">Ini adalah alat open source untuk menghapus semua konten akun AWS. </font><font style="vertical-align: inherit;">Akun dan sumber daya yang akan dihapus ditentukan dalam file konfigurasi dalam format YAML:</font></font><br>
<br>
<pre><code class="java hljs">#   <font></font>
regions:<font></font>
- us-east-<span class="hljs-number">2</span><font></font>
<font></font>
#    <font></font>
accounts:<font></font>
   <span class="hljs-string">"111111111111"</span>: {}<font></font>
<font></font>
#    <font></font>
resource-types:<font></font>
   targets:<font></font>
   - S3Object<font></font>
   - S3Bucket<font></font>
   - IAMRole</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aws-nuke dimulai sebagai berikut:</font></font><br>
<br>
<pre><code class="java hljs">$ aws-nuke -<span class="hljs-number">5</span>c config.yml</code></pre></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes Otomatis</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konsep pengujian otomatis adalah bahwa tes ditulis untuk menguji perilaku kode nyata. </font><font style="vertical-align: inherit;">Dalam Bab 8, Anda akan belajar bahwa menggunakan server CI, tes ini dapat dijalankan setelah setiap individu melakukan. </font><font style="vertical-align: inherit;">Jika tidak selesai, fiksasi dapat segera dibatalkan atau diperbaiki. </font><font style="vertical-align: inherit;">Dengan demikian, kode Anda akan selalu operasional. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada tiga jenis tes otomatis.</font></font><br>
<br>
<ul>
<li> .       — .    ,             .   (,  , -    )   mock-.       (, mock-     ,  )    ,        .</li>
<li> .      .          ,          .      mock-: ,     ,     ,      ,   , ,  ,  mock-.</li>
<li> .      (, ,  ,  )       .          : , Selenium        .         - mock-,          (        ,  ).</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setiap jenis tes memiliki tujuannya sendiri, dan dengan bantuan mereka Anda dapat mengidentifikasi semua jenis kesalahan, sehingga harus digunakan bersama. Tes unit cepat dan memungkinkan Anda untuk segera mengetahui perubahan yang dibuat dan memeriksa berbagai kombinasi. Ini memberi Anda keyakinan bahwa komponen dasar kode Anda (modul individu) berperilaku seperti yang Anda harapkan. Namun, fakta bahwa modul bekerja dengan benar secara terpisah tidak berarti sama sekali bahwa mereka dapat bekerja bersama, oleh karena itu, untuk memastikan bahwa komponen dasar Anda kompatibel, tes integrasi diperlukan. Di sisi lain, perilaku yang benar dari berbagai bagian sistem tidak menjamin bahwa sistem ini akan berfungsi sebagaimana mestinya setelah ditempatkan di lingkungan industri, sehingga diperlukan pengujian untuk menguji kode Anda dalam kondisi yang dekat dengan yang asli.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
»Informasi lebih lanjut tentang buku ini dapat ditemukan di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">situs web penerbit</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isi</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
» </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kutipan</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Untuk Khabrozhiteley Diskon 25% untuk kupon - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terraform</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Setelah pembayaran versi kertas buku, sebuah buku elektronik dikirim melalui email.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id503842/index.html">Prostesis otak: sinkronisasi jaringan saraf tiruan dan biologis</a></li>
<li><a href="../id503844/index.html">Mempercepat Pengubahan MatTable dalam Beberapa Langkah</a></li>
<li><a href="../id503846/index.html">Flash, "Apakah dia mati lagi tidak diketahui, tetapi bunga-bunga menghilang ..."</a></li>
<li><a href="../id503848/index.html">Kami mengundang Anda untuk webinar gratis pada pencetakan SLS pada Sinterit 26.05 dan pemindai 3D Shining 28.05</a></li>
<li><a href="../id503854/index.html">Gunakan SIL secara maksimal</a></li>
<li><a href="../id503860/index.html">Menyiapkan lingkungan jaringan saraf Mask R-CNN</a></li>
<li><a href="../pt486176/index.html">Memorando de correspondência por e-mail corporativo</a></li>
<li><a href="../pt486178/index.html">FOSS News No. 1 - revisão de notícias gratuitas e de código aberto de 27 de janeiro a 2 de fevereiro de 2020</a></li>
<li><a href="../pt486180/index.html">Dicas e fontes para criar aplicativos sem servidor</a></li>
<li><a href="../pt486184/index.html">Como usar a pesquisa efetivamente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>