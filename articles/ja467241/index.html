<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚿 🧛🏾 🐌 ROSトラックトロリー。パート4. rvizおよびgazeboエディターを使用したロボットシミュレーションの作成 🈵 💇🏻 👎🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="シリーズの投稿：
 8. ROS制御電話、GPSノードから制御します
 。7.ロボットのローカリゼーション：マッピング、AMCL、ルームマップ上の基準点
 6.ホイールエンコーダー、ルームマップ、ライダーによる
 オドメトリ5. rvizとガゼボで作業します：xacro、新しいセンサー。 
 4. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ROSトラックトロリー。パート4. rvizおよびgazeboエディターを使用したロボットシミュレーションの作成</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467241/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シリーズの投稿：</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. ROS制御電話、GPSノードから制御します</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。7.ロボットのローカリゼーション：マッピング、AMCL、ルームマップ上の基準点</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.ホイールエンコーダー、ルームマップ、ライダーによる</font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オドメトリ5. rvizとガゼボで作業します：xacro、新しいセンサー。</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. rvizおよびgazeboエディターを使用してロボットシミュレーションを作成します。</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.加速、カメラの変更、歩行の修正</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.ソフトウェア</font></font></a> <br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.アイロン</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
小型ロボットの作成に関する一連の記事の続き。今回は、シミュレーションでロボットのコピーを作成することに焦点を当てます。これは、ビジュアルROS環境のrvizおよびgazebo（以下、「エディター」と呼びます）によって提供されます。エディターでの作業は、仮想マシンで実行されます。そのイメージは、以前にダウンロード</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">イメージ</font></a><font style="vertical-align: inherit;">用に提供されていました。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。シミュレーションとモデルの構築について話しているため、ロボットカート自体は必要ありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/18/wz/cj/18wzcjsvzmerc9hm5vka7bacteq.gif"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シリーズの以前の投稿：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート3</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
2. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート2</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
3. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パート1</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
基本的なurdfファイルの作成</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、簡略化されたロボットを作成するプロセスは、通常、次の段階で構成され</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。1.ロボットのモデルの作成。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.シミュレーションでモデルをテストします。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.実際のロボットモデルを作成します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4.実際のモデルをテストします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
モデルの構築と仮想世界でのテストの両方に大きな機会を提供するROSエディターと一緒に作業する場合、実際のロボットモデルが常に彼らの法人の兄弟のように動作するとは限らないことを認めなければなりません。ここで、仮想世界でモデルを操作する時間が、実際のモデルを完成させるのに必要な時間に追加されます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有名な人が言ったように、そのような時間の贈り物はすべてを買うだけではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これに関して、以前の投稿では、ロボット工学のシーケンスが中断されました。最初に、ロボットの実際のモデルが作成されました。</font><font style="vertical-align: inherit;">さて、いわば仮想化についてお話します。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">urdfを作成する</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gazeboでシミュレーションを完全に楽しんでロボットをテストするには、最初にロボットのURDFファイルを作成する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
URDFファイルは、視覚化の分野における一種のスケルトンスケルトンです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単に言うと、URDFファイルはロボットを記述するファイルです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前述のように、作業はROS（Ubuntu 16.04、ROS-Kinetic）とビジュアルエディターがすでにインストールされているVMWAREワークステーションイメージを使用して実行されます。したがって、このシステムではすべてのアクションが再現可能です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rosbots_descriptionというROSパッケージを作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、catkin_ws / srcを含むフォルダーに入り、コマンドを実行してROSにパッケージを作成する必要があります。</font></font><br>
<br>
<pre><code class="plaintext hljs">roscd; cd ..; cd src;<font></font>
catkin_create_pkg rosbots_description rospy<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* roscdコマンドを実行する場合; cd ..; cd src; catkin_wsに入らない場合は、このタイプの環境が複数ある可能性があります。必要なものをアクティブ化するには、catkin_wsフォルダーに移動し、コマンドを実行します：source devel / setup.bash。迷子にならないようにするために、画像を操作する場合は、ルートからこのフォルダーに移動できます。cd〜; cd catkin_ws。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてがうまくいけば、rosbots_descriptionフォルダーが作成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手動でcatkin_ws / srcにフォルダーを作成するのがなぜそれほど難しく簡単なのですか？そして、それはどのようなばかげたものですか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手動でフォルダーを作成することもできますが、ROSが動作するさらに2つのファイル（CMakeLists.txtとpackage.xml）を手動で書き込む必要もあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成後にフォルダに存在するのは</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ri/0_/nx/ri0_nxuublwiaj1eq57khrl5tmc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼らです。彼らのROSは独立して作成します。それらの内容については詳しく説明しません。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドの最後のrospyは、依存関係の作成、Pythonサポートを意味します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次へ。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しく作成されたrosbots_descriptionパッケージ内にurdfフォルダーを作成し、その中にrosbots.xacroファイルを作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">roscd rosbots_description<font></font>
<font></font>
mkdir urdf; cd urdf;<font></font>
<font></font>
touch rosbots.xacro<font></font>
<font></font>
chmod +x rosbots.xacro<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROSシステムの優れた点は、システムのどのフォルダーにも配置されないことです。行の先頭にあるroscdコマンドでその名前を入力するだけで、すぐにターゲットにアクセスできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
新しく作成したファイルに次のコードを挿入します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rosbots.xacro</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">&lt;?xml version="1.0" encoding="utf-8"?&gt;<font></font>
&lt;robot name="rosbots" xmlns:xacro="http://www.ros.org/wiki/xacro"&gt;<font></font>
    &lt;link name="base_footprint"/&gt;<font></font>
    &lt;joint name="base_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0 0 0.05" rpy="0 0 0" /&gt;<font></font>
      &lt;parent link="base_footprint"/&gt;<font></font>
      &lt;child link="base_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    <font></font>
    &lt;link name="base_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="-0.52 -0.4 0.43" rpy="0 0 0"/&gt;<font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="-0.52 -0.4 0.43" rpy="0 0 0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;inertial&gt;<font></font>
        &lt;origin xyz="0.0 0 0."/&gt;<font></font>
        &lt;mass value="0.5"/&gt; <font></font>
        &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.01" iyz="0.0" <font></font>
                 izz="0.03" /&gt;<font></font>
      &lt;/inertial&gt;<font></font>
    &lt;/link&gt;<font></font>
    <font></font>
    &lt;joint name="second_level_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0 0 0.68" rpy="0 0 0" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="base_second_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="base_second_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="-0.52 -0.4 0.0" rpy="0 0 0"/&gt;<font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/base.dae"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="-0.52 -0.4 0.0" rpy="0 0 0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;!--inertial&gt;<font></font>
        &lt;origin xyz="0.01 0 0.7"/&gt;<font></font>
        &lt;mass value="1.0"/&gt;<font></font>
        &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.01" iyz="0.0" <font></font>
                 izz="0.03" /&gt;<font></font>
      &lt;/inertial--&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
    &lt;joint name="mcu_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.02 0.12 0.73" rpy="0 0 0" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="mcu_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="mcu_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt;<font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;!-- inertial&gt;<font></font>
        &lt;origin xyz="0.01 0 0"/&gt;<font></font>
        &lt;mass value="1.0"/&gt;<font></font>
        &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.019995" iyz="0.0" <font></font>
                 izz="0.03675" /&gt;<font></font>
      &lt;/inertial--&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
   &lt;joint name="mcu_joint_1" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.02 0.12 0.83" rpy="0 0 0" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="mcu_link_1" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="mcu_link_1"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt;<font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/rasp.dae" scale="0.14 0.14 0.14"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="0.9 -1.25 0" rpy="0 0 1.57"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;!-- inertial&gt;<font></font>
        &lt;origin xyz="0.01 0 0"/&gt;<font></font>
        &lt;mass value="1.0"/&gt;<font></font>
        &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.019995" iyz="0.0" <font></font>
                 izz="0.03675" /&gt;<font></font>
      &lt;/inertial--&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
<font></font>
   &lt;joint name="stand_mcu1_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.02 0.25 0.78" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_mcu1_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_mcu1_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
   &lt;joint name="stand_mcu2_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.02 -0.1125 0.78" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_mcu2_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_mcu2_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
<font></font>
   &lt;joint name="stand_mcu3_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.25 0.25 0.78" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_mcu3_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_mcu3_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
   &lt;joint name="stand_mcu4_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.25 -0.1125 0.78" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_mcu4_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_mcu4_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.1" radius="0.01"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
    &lt;joint name="batery_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="1.2 0.2 0.43" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="batery_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="batery_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/battery.dae" scale="13.0 6.0 6.0"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="0 4.5 0.05" rpy="1.57 0 1.57"/&gt;    <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/battery.dae" scale="13.0 6.0 6.0"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin xyz="0 4.5 0.05" rpy="1.57 0 1.57"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;!-- inertial&gt;<font></font>
        &lt;origin xyz="0.01 0 0"/&gt;<font></font>
        &lt;mass value="1.0"/&gt;<font></font>
        &lt;inertia ixx="0.01" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.01" iyz="0.0" <font></font>
                 izz="0.03" /&gt;<font></font>
      &lt;/inertial--&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
   &lt;joint name="stand_1_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.5 0.4125 0.58" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_1_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_1_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;!--inertial&gt;<font></font>
        &lt;origin xyz="0.0 0 0"/&gt;<font></font>
        &lt;mass value="1.0"/&gt;<font></font>
        &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.019995" iyz="0.0" <font></font>
                 izz="0.03675" /&gt;<font></font>
      &lt;/inertial--&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
   &lt;joint name="stand_2_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="0.5 -0.2625 0.58" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_2_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_2_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;!--inertial&gt;<font></font>
        &lt;origin xyz="0.0 0 0"/&gt;<font></font>
        &lt;mass value="1.0"/&gt;<font></font>
        &lt;inertia ixx="0.019995" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.019995" iyz="0.0" <font></font>
                 izz="0.03675" /&gt;<font></font>
      &lt;/inertial--&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
    &lt;joint name="wheel_left_joint" type="continuous"&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="wheel_left_link"/&gt;<font></font>
      &lt;origin xyz="0.15 0.4125 0.30" rpy="-1.57 0 0"/&gt;<font></font>
      &lt;axis xyz="0 0 1"/&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="wheel_left_link"&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.23"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0.0 0" xyz="0 0 0.1"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;visual name="visual"&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;!-- cylinder length="0.0206" radius="0.0550"/--&gt;<font></font>
          &lt;!--cylinder length="0.20" radius="0.26"/--&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/wheel.dae" scale="8.0 8.0 8.0"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0"/&gt;<font></font>
      &lt;/visual&gt;<font></font>
      &lt;inertial&gt;<font></font>
        &lt;mass value="0.4" /&gt;<font></font>
        &lt;origin xyz="0 0 0" /&gt;<font></font>
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.001" iyz="0.0" <font></font>
                 izz="0.001" /&gt;<font></font>
      &lt;/inertial&gt;<font></font>
    &lt;/link&gt;<font></font>
    <font></font>
    &lt;joint name="wheel_right_joint" type="continuous"&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="wheel_right_link"/&gt;<font></font>
      &lt;origin xyz="0.15 -0.5625 0.30" rpy="-1.57 0 0"/&gt;<font></font>
      &lt;axis xyz="0 0 1"/&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="wheel_right_link"&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.23"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.195"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
      &lt;visual name="visual"&gt;<font></font>
        &lt;geometry&gt;<font></font>
      &lt;!--cylinder length="0.20" radius="0.26"/--&gt;<font></font>
          &lt;mesh filename="package://rosbots_description/meshes/wheel.dae" scale="8.0 8.0 8.0"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0"/&gt;<font></font>
      &lt;/visual&gt;<font></font>
      &lt;inertial&gt;<font></font>
        &lt;mass value="0.4" /&gt;<font></font>
        &lt;origin xyz="0 0.0 0.3" /&gt;<font></font>
        &lt;inertia ixx="0.001" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.001" iyz="0.0" <font></font>
                 izz="0.001" /&gt;<font></font>
      &lt;/inertial&gt;<font></font>
    &lt;/link&gt;<font></font>
   <font></font>
    &lt;joint name="caster_back_joint" type="fixed"&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="caster_back_link"/&gt;<font></font>
      &lt;origin xyz="-0.4 0.1 0.26" rpy="0 0 0"/&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="caster_back_link"&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;!-- cylinder length="0.05" radius="0.19"/--&gt;<font></font>
          &lt;sphere radius="0.19"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0 0 0" xyz="0 0 0"/&gt;<font></font>
      &lt;/collision&gt;    <font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
          &lt;!--cylinder length="0.05" radius="0.19"/--&gt;<font></font>
          &lt;sphere radius="0.19"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0 0 0" xyz="0 0 0"/&gt;<font></font>
      &lt;/visual&gt;   <font></font>
      &lt;inertial&gt;<font></font>
        &lt;mass value="0.1" /&gt;<font></font>
        &lt;origin xyz="0 0 0" /&gt;<font></font>
        &lt;inertia ixx="0.001023539" ixy="0.0" ixz="0.0"<font></font>
                 iyy="0.001023539" iyz="0.0" <font></font>
                 izz="0.001023539" /&gt;<font></font>
      &lt;/inertial&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
   &lt;joint name="stand_3_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="-0.4 0.4125 0.58" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_3_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_3_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
    &lt;/link&gt;<font></font>
<font></font>
   &lt;joint name="stand_4_joint" type="fixed"&gt;<font></font>
      &lt;origin xyz="-0.4 -0.2625 0.58" rpy="0 0 1.57" /&gt;<font></font>
      &lt;parent link="base_link"/&gt;<font></font>
      &lt;child link="stand_4_link" /&gt;<font></font>
    &lt;/joint&gt;<font></font>
    &lt;link name="stand_4_link"&gt;<font></font>
      &lt;visual&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;   <font></font>
      &lt;/visual&gt;<font></font>
      &lt;collision&gt;<font></font>
        &lt;geometry&gt;<font></font>
         &lt;cylinder length="0.20" radius="0.03"/&gt;<font></font>
        &lt;/geometry&gt;<font></font>
        &lt;origin rpy="0.0 0 0" xyz="0 0 0.0"/&gt;<font></font>
      &lt;/collision&gt;<font></font>
    &lt;/link&gt;<font></font>
&lt;/robot&gt;</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードが表示されない場合は、投稿の最後にすべてのファイルをダウンロードできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードでは、パッケージの起動時に読み込まれるセル（メッシュ）も必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mechesを撮影することができ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ここ</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
とrosbots_descriptionでフォルダアンパックmechesを置きます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを詳細に見ると、これはブロックで構成される標準のxmlファイルであることがわかります。- </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 ビジュアル</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -コリジョン</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -慣性</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各ブロックはその部分を説明します。衝突、慣性-外界と相互作用します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ジョイント-ロボットのパーツ間のリンク（リンク）を決定するのに役立つ要素。</font><font style="vertical-align: inherit;">たとえば、ホイール（ホイール）の動きはフレーム全体（シャーシ）に影響します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
origin xyz-これは、x、y、z軸に沿ったオブジェクトの初期位置です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
親リンクと子リンクは、それぞれ親リンクと子リンクであり、何から生まれるかです。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイプの存在も注目に値します：type = "continuous"、type = "fixed"。</font><font style="vertical-align: inherit;">回転できるものと回転できないものの定義です。</font><font style="vertical-align: inherit;">したがって、車輪は連続しています。</font><font style="vertical-align: inherit;">そして、例えば、batery_jointは修正されました。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードのインデントはpythonと同じくらい深く意味があり、タブやスペースを邪魔することはできません。</font><font style="vertical-align: inherit;">しかし、完璧主義者の楽園と可視性のために、それらを持っている方が良いです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のコードは基本的にロボットモデルです。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rvizで働く</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何が起きたのか見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、ROSパッケージを実行するスタートアップファイルを作成します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このために、いわゆる起動ファイルがROSで使用されます。</font><font style="vertical-align: inherit;">起動ファイルの本質は、ノード、コマンド、またはいくつかのノードを1つの短いコマンドで実行できるようにすることです。その際、すべての引数やその他の引数を指定する必要はありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
rviz.launchファイルを使用して、rosbots_descriptionに起動フォルダーを作成します。</font></font><br>
<br>
<pre><code class="plaintext hljs">roscd rosbots_description<font></font>
mkdir launch; cd launch;<font></font>
touch rviz.launch<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*これ以降、以前のようにROSパッケージを作成する必要がなくなりました。</font><font style="vertical-align: inherit;">これで、システム自体がパッケージ内のファイルを「参照」します。</font><font style="vertical-align: inherit;">したがって、ディレクトリを作成するだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルに内容を入力します-</font></font><div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rviz.launch</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"> <span class="hljs-meta">&lt;?xml version="1.0"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">launch</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"robot_description"</span> <span class="hljs-attr">command</span>=<span class="hljs-string">"cat '$(find rosbots_description)/urdf/rosbots.xacro'"</span>/&gt;</span>
   <span class="hljs-comment">&lt;!-- send fake joint values --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"joint_state_publisher"</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"joint_state_publisher"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"joint_state_publisher"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"use_gui"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"False"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">node</span>&gt;</span>
   <span class="hljs-comment">&lt;!-- Combine joint values --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"robot_state_publisher"</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"robot_state_publisher"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"state_publisher"</span>/&gt;</span>
   <span class="hljs-comment">&lt;!-- Show in Rviz   --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"rviz"</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"rviz"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"rviz"</span> /&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">launch</span>&gt;</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで、起動時にシステムがrosbots.xacroでモデルの説明を探すことがわかります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、3つのノード（joint_state_publisherパッケージのjoint_state_publisher、robot_state_publisherのrobot_state_publisher、rvizのrviz）を起動します。</font><font style="vertical-align: inherit;">typeはノードのタイプで、通常は同じ名前のPythonまたはCファイルに対応しますが、拡張子なしで指定されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実行：</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のターミナルで、ROSマスターを実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">roscore</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目の場合：</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rosbots_description rviz.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*エラーが発生した場合 </font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ROS_MASTER_URI [http：//192.168.1 ....：11311]ホストがこのマシンに設定されていません</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次にbashrcを確認する必要があります-どのROSが実行されているか：</font></font><br>
<br>
<pre><code class="plaintext hljs">nano ~/.bashrc</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仮想マシンのIPをbashrcファイル自体で指定します（たとえば、これ）。</font></font><br>
 <br>
 <pre><code class="plaintext hljs">export ROS_MASTER_URI=http://192.168.1.114:11311</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次にbashrc：を再読み込みする</font></font><br>
<br>
<code>source ~/.bashrc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か、再起動します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
** </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでもroslaunchが起動しない場合は、catkin_wsフォルダーに移動して次のコマンドを実行してください：source devel / setup.bash</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rvizに飛び込む</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コマンドが実行されると、Rvizエディターが起動し、グラフィカルシェルが開きます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
視覚的な表現は異なる場合がありますが、一般的には次のように表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nf/gm/fz/nfgmfzhzqb2prpwfuuqrzzoylwu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[表示]列の左側には、ROSノードと相互作用する特定の要素を表示するためのオプションが表示されます。中央にはロボットの画像があり、右側にはロボットビューカメラのある列があります。</font><font style="vertical-align: inherit;">ここではすべてのマウスボタンが関係しているので、3ホイールマウスでrvizを操作する方が良いとすぐに言っておく必要があります。</font><font style="vertical-align: inherit;">左を押し続けると、ロボットが表示されたウィンドウ内のスペースを回転でき、右を押したまま（ズームイン/ズームアウト、両方のキーを押したまま）、ロボットに対してスペースを移動できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エディターでの作業のほとんどは、最初の2列で実行されます。表示とロボットの視覚的表現です。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ロボットの外観で作業しましょう</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「固定フレーム」を選択-ラインで「ベースリンクを」：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sn/in/22/snin22raurfwpybmaainztvnrby.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
やディスプレイへのロボットの説明を追加します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クリックして「追加」し、リストで「RobotModel」を選択します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_s/sg/dv/_ssgdvg5wxuwnduiymjx7r2t1kk.png"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今、シミュレーションウィンドウであなたがrviz.xacroモデルから再生されたロボットを見ることができます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/k6/rt/j8/k6rtj8hn6g6lbznbxiqdhhnv__m.png"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すばらしい。</font><font style="vertical-align: inherit;">視覚的な表現で、すべてが明確です。</font><font style="vertical-align: inherit;">rvizは</font><font style="vertical-align: inherit;">シミュレーションの</font></font><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">視覚化で</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり、シミュレーション自体で</font><font style="vertical-align: inherit;">はないため、シミュレーションの実行方法を理解する必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、物理学はここでは機能しません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シミュレーション自体は、ガゼボと呼ばれるエディターにあります。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガゼボ</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成したモデルをGazeboに配置するには、プロジェクトの起動フォルダーに別の起動ファイル-spawn.launchを作成します。</font><font style="vertical-align: inherit;">これで2つの起動ファイルができました！</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spawn.launch</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">launch</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"robot_description"</span> <span class="hljs-attr">command</span>=<span class="hljs-string">"cat '$(find rosbots_description)/urdf/rosbots.xacro'"</span> /&gt;</span><font></font>
 <font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"x"</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"0"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"y"</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"0"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"z"</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"0.5"</span>/&gt;</span><font></font>
 <font></font>
    <span class="hljs-tag">&lt;<span class="hljs-name">node</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mybot_spawn"</span> <span class="hljs-attr">pkg</span>=<span class="hljs-string">"gazebo_ros"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"spawn_model"</span> <span class="hljs-attr">output</span>=<span class="hljs-string">"screen"</span>
          <span class="hljs-attr">args</span>=<span class="hljs-string">"-urdf -param robot_description -model rosbots -x $(arg x) -y $(arg y) -z $(arg z)"</span> /&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">launch</span>&gt;</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここでもモデルを読み取り、引数を使用して、x、y、z軸に沿って空間内の位置を渡します。</font><font style="vertical-align: inherit;">次に、1つのノードだけを実行します-gazebo_rosパッケージのmybot_spawn。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
*上記のパッケージを再インストールする必要はありません。</font><font style="vertical-align: inherit;">必要に応じて、同じコマンドroscdでこれらのパッケージを確認できます。</font><font style="vertical-align: inherit;">たとえば、roscd gazebo_ros。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ターミナル1でRos-masterを停止します。</font></font><br>
<br>
<pre><code class="plaintext hljs">CTRL+C</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gazeboエディターを実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch gazebo_ros empty_world.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のターミナルで、新しく作成したファイルを実行します。</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rosbots_description spawn.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、ロボットがGazeboエディターのシミュレーションに</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jt/fs/3f/jtfs3f9wsxuo9hgi-k1ziqpfbv0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
表示されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">*誤りがある場合：</font></font><code>Waiting for service /gazebo/spawn_urdf_model </code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、最初にGazeboを起動せずにモデルを起動したことを意味し、起動シーケンスが中断されます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ガゼボシミュレーションに行きましょう。</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、次のコードをrosbots.xacroの終了タグの前に追加します。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コード</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">gazebo</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"differential_drive_controller"</span> <span class="hljs-attr">filename</span>=<span class="hljs-string">"libgazebo_ros_diff_drive.so"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">legacyMode</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">legacyMode</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">alwaysOn</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">alwaysOn</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">publishWheelTF</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">publishWheelTF</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">publishTf</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">publishTf</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">publishWheelJointState</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">publishWheelJointState</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">updateRate</span>&gt;</span>100.0<span class="hljs-tag">&lt;/<span class="hljs-name">updateRate</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">leftJoint</span>&gt;</span>wheel_left_joint<span class="hljs-tag">&lt;/<span class="hljs-name">leftJoint</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">rightJoint</span>&gt;</span>wheel_right_joint<span class="hljs-tag">&lt;/<span class="hljs-name">rightJoint</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">wheelSeparation</span>&gt;</span>1.1<span class="hljs-tag">&lt;/<span class="hljs-name">wheelSeparation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">wheelDiameter</span>&gt;</span>0.52<span class="hljs-tag">&lt;/<span class="hljs-name">wheelDiameter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">wheelAcceleration</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">wheelAcceleration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">torque</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">torque</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">commandTopic</span>&gt;</span>/part2_cmr/cmd_vel<span class="hljs-tag">&lt;/<span class="hljs-name">commandTopic</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">odometryTopic</span>&gt;</span>odom<span class="hljs-tag">&lt;/<span class="hljs-name">odometryTopic</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">odometryFrame</span>&gt;</span>odom<span class="hljs-tag">&lt;/<span class="hljs-name">odometryFrame</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">robotBaseFrame</span>&gt;</span>base_link<span class="hljs-tag">&lt;/<span class="hljs-name">robotBaseFrame</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">gazebo</span>&gt;</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
編集中はシミュレータGazeboを閉じることができません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、Gazeboエディターからモデルを削除します。</font></font><br>
<br>
<pre><code class="plaintext hljs">rosservice call /gazebo/delete_model "model_name: 'rosbots'"</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
または、エディターを再起動します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Gazeboは仮想マシンでは不機嫌なので、閉じた後でも、ターミナルで追加のCTRL + Cを許すことがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
編集後、モデルをGazeboに再配置します。</font></font><br>
<br>
<pre><code class="plaintext hljs">roslaunch rosbots_description spawn.launch</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ROSトピックのリストを見ると、それらのトピックの中にあることがわかります。 </font></font><br>
<br>
<pre><code class="plaintext hljs">/part2_cmr/cmd_vel</code></pre><br>
<img src="https://habrastorage.org/webt/xv/lg/8n/xvlg8ngckkr7snj_lkmzeeyyxyk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、別のターミナルで制御を実行して、シミュレーションでロボットを制御してみましょう。</font></font><br>
<br>
<pre><code class="plaintext hljs">rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/part2_cmr/cmd_vel</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コントロールが実行されているウィンドウで、ターミナルウィンドウの「i」、「l」、「j」、「k」、「、」キーを押すと、Gazeboエディターのシミュレーションでロボットの動きを観察できます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/18/wz/cj/18wzcjsvzmerc9hm5vka7bacteq.gif"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コード- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンロード</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つづく。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467223/index.html">JavaScript Meetup SuperJobへようこそ10月10日</a></li>
<li><a href="../ja467227/index.html">通常のデプロイメント、CI、およびデモ（人生の喜びを失うことなく）でnpmパッケージを開く方法</a></li>
<li><a href="../ja467231/index.html">iOSアプリでのAppleでのサインインの紹介</a></li>
<li><a href="../ja467237/index.html">DNS-over-HTTPSサーバーを上げる</a></li>
<li><a href="../ja467239/index.html">スポーツカーにおけるデータサイエンティストとティーンエイジャーの違い</a></li>
<li><a href="../ja467245/index.html">Dmitry Matskevich、Dbrain：精神障害、AIおよび感情的安全保障としての起業家精神について</a></li>
<li><a href="../ja467247/index.html">V8、React、パフォーマンス低下の物語。パート1</a></li>
<li><a href="../ja467249/index.html">V8、React、パフォーマンス低下の物語。パート2</a></li>
<li><a href="../ja467251/index.html">COBOL人質と数学。パート1</a></li>
<li><a href="../ja467253/index.html">COBOL人質と数学。パート2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>