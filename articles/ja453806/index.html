<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤙🏽 👨🏼‍🎨 🌤️ Goでのエラー処理 🤐 🤷🏽 🛠️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="こんにちは、ハブロフスク市民！Golang開発者コースはすでにOTUSで既に始まっており、この機会にこのトピックに関する有用な投稿を共有することができます。今日はエラーに対するGoのアプローチについて話しましょう。始めましょう！
 
 
 
 Goコードで実用的なエラー処理をマスターする
 
 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Goでのエラー処理</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/453806/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、ハブロフスク市民！</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Golang開発者</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コースはすでにOTUSで既に始まっており</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、</font></a><font style="vertical-align: inherit;">この機会にこのトピックに関する有用な投稿を共有することができます。</font><font style="vertical-align: inherit;">今日はエラーに対するGoのアプローチについて話しましょう。</font><font style="vertical-align: inherit;">始めましょう！</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mr/8i/ch/mr8ichd887jvkbuzbf3dh_h5oc0.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goコードで実用的なエラー処理をマスターする</font></font></h3><br>
<img src="https://habrastorage.org/webt/gp/i3/ff/gpi3ffckknhyvkcqyfyk1dnbltc.png"><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この投稿は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Getting Started </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">シリーズの</font></a><font style="vertical-align: inherit;">一部です</font><font style="vertical-align: inherit;">。Golangの世界を探索し、Goでコードを書くときに知っておくべきヒントやアイデアを共有するため、独自のバンプを埋める必要はありません。</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
すでにGoの基本的な経験はあると思いますが、ある時点で話し合いのなじみのない素材に出くわしたと感じた場合は、ためらわずに立ち止まってトピックを調べ、戻ってください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
道を切り開いたので、行こう！</font></font><a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラー処理へのGoのアプローチは、最も物議を醸し、誤用されている機能の1つです。</font><font style="vertical-align: inherit;">この記事では、エラーに対するGoのアプローチを学び、「内部」でエラーがどのように機能するかを理解します。</font><font style="vertical-align: inherit;">いくつかの異なる方法を学び、Goのソースコードと標準ライブラリを確認して、エラーの処理方法とエラーの処理方法を見つけます。</font><font style="vertical-align: inherit;">タイプアサーションがそれらを処理する上で重要な役割を果たす理由を学習し、Go 2で導入する予定のエラー処理に対する今後の変更を確認します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/e3/0t/gk/e30tgk9zbbofawpffxugwstrhow.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず最初に：Goのエラーも例外ではありません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dave Cheney</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">これについて</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">叙事詩的なブログ投稿を</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">書いた</font><font style="vertical-align: inherit;">ので、それを紹介して要約します。他の言語では、関数が例外をスローできるかどうかはわかりません。例外をスローする代わりに、Go関数は</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">複数の戻り値を</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サポートし</font><b><font style="vertical-align: inherit;">ます</font></b><font style="vertical-align: inherit;">。慣例により、この機能は通常、関数の結果とエラー変数を返すために使用されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p5/nl/dw/p5nldwpihop5qjmlgz4f0h0v_yi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何らかの理由で関数が失敗する可能性がある場合は、以前に宣言したものを返す必要があります</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-タイプ。慣例により、エラーを返すと呼び出し元に問題が通知され、nilを返すとエラーとは見なされません。したがって、問題が発生したことを呼び出し元に理解させ、対処する必要があります。関数を呼び出す人は誰でも、エラーをチェックする前に結果に依存してはならないことを知っています。エラーがnilでない場合、彼はそれをチェックして処理する義務があります（ログ、戻り、維持、ある種の再試行/クリーンアップメカニズムの呼び出しなど）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/l2/u-/05/l2u-05npjr4ptcwn7woqyb20usg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3 //エラー処理</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 5 //続く）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
これらのスニペットはGoで非常に一般的であり、一部は定型コードと見なしています。コンパイラは未使用の変数をコンパイルエラーとして扱うため、エラーをチェックしない場合は、それらを割り当てる必要があります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空の識別子</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。しかし、それがどれほど便利であっても、エラーは無視されるべきではありません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fm/pq/rv/fmpqrvcl6_eh4tvwhq0ebxmd4qo.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（4 //エラーを無視することは安全ではなく、エラーをチェックする前に結果に依存するべきではありません）エラーをチェックする</font></font></i><br>
<i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">まで結果を信頼することはできません。</font></font></b></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
厳密なGoタイプシステムとともに結果とともに</font><i><b><font style="vertical-align: inherit;">エラーを</font></b></i><font style="vertical-align: inherit;">返すと、タグ付けされたコードの記述が大幅に複雑になります。関数の値が破損していると常に想定する必要があります。ただし、関数が返したエラーを確認し、エラーを空の識別子に割り当てた場合は、関数の値が破損している可能性があることを明示的に無視します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lm/xj/uh/lmxjuhxt8v8sdvillwvsbbuct5o.png"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空の識別子は暗く、恐怖に満ちています。</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Go </font></font><code>panic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>recover</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">メカニズムはあります。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">別の詳細なGoブログ投稿</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、これらは例外をシミュレートするためのものではありません。</font><font style="vertical-align: inherit;">デイブによると、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「囲碁でパニックを起こすと、本当にパニックになります。これは他人の問題ではなく、ゲーマーです。」</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">それらは致命的であり、プログラムのクラッシュにつながります。</font><font style="vertical-align: inherit;">Rob Pikeは、「パニックに陥らないでください」という言葉を思い付きました。それはそれ自体が意味します。おそらく、これらのメカニズムを回避してエラーを返す必要があります。</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「エラーは意味です。」</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「エラーをチェックするだけでなく、エレガントに処理して</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ください</font><font style="vertical-align: inherit;">。」</font><font style="vertical-align: inherit;">「パニックにならないでください」</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rob Pikeのすべてのことわざ</font></font></a><br>
</blockquote><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フードの下</font></font></h2><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーインターフェース</font></font></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
内部的には、エラータイプは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1つのメソッドを持つ単純なインターフェースで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり、よく知らない場合は</font><font style="vertical-align: inherit;">、Goの公式ブログで</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">この投稿</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を確認することを強くお勧めし</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n_/c3/ip/n_c3iptfnwohofkgwwhhxc-cwda.png"><br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコードからのインターフェイスエラー</font></font></i></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
独自のエラーを実装することは難しくありません。</font><font style="vertical-align: inherit;">メソッドを実装するユーザー構造にはさまざまなアプローチがあります</font></font><code>Error()</code> <code>string </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この単一のメソッドを実装するすべての構造は有効なエラー値と見なされ、そのように返すことができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのアプローチのいくつかを見てみましょう。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">組み込みのerrorString構造</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラーインターフェースの最も一般的に使用され、広く普及している実装は、組み込み構造</font></font><code>errorString </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font><font style="vertical-align: inherit;">これは、あなたが考えることができる最も簡単な実装です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uv/hj/by/uvhjbyzjh8cmovqpjdkda0ww5_c.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソース：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goのソースコードです。</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
簡略化された実装を</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ここで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">確認でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それが行うことはすべて含まれて</font></font><code>string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">おり、この文字列はメソッドによって返され</font></font><code>Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">この文字列エラーは、たとえばを使用して、一部のデータに基づいてフォーマットできます</font></font><code>fmt.Sprintf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">ただし、これ以外の機能は含まれていません。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">errors.New</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fmt.Errorf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を適用した</font><font style="vertical-align: inherit;">場合は、すでに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用されてい</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/br/6h/g5/br6hg5p3lozppuf98ry0g2ptsw4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（13 //出力:) </font></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">試す</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/pkg/errors</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の簡単な例は、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pkg / errors</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パッケージ</font><font style="vertical-align: inherit;">です。</font></font><code>errors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前に学習</font><font style="vertical-align: inherit;">した組み込みパッケージと混同しない</font><font style="vertical-align: inherit;">でください。このパッケージは、エラーの折り返し、展開、フォーマット、スタックトレースの記録などの重要な機能を提供します。を実行してパッケージをインストールできます</font></font><code>go get github.com/pkg/errors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bo/vs/f7/bovsf7dn4l2gvaesqbepogmjxrw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
スタックトレースまたは必要なデバッグ情報をエラーに添付する必要がある場合、関数</font></font><code>New</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>Errorf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このパッケージ</font><font style="vertical-align: inherit;">を使用する</font><font style="vertical-align: inherit;">と、スタックトレースに既に書き込まれているエラーが提供されます。また、フォーマット機能を使用して単純なメタデータを添付することもできます。 。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">fmt.Formatter</font></a></font><code>Errorf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターフェースを実装します</font><font style="vertical-align: inherit;">。つまり、パッケージのルーンを使用してフォーマットできます</font><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>fmt</code><font style="vertical-align: inherit;"></font><code>%s</code><font style="vertical-align: inherit;"></font><code>%v</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>%+v </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tz/r6/if/tzr6if2llu8ayda0lrnl1zblkju.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（// 6または代替）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
このパッケージは、関数</font></font><code>errors.Wrap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font><font style="vertical-align: inherit;">も表します</font></font><code>errors.Wrapf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これらの関数は、メッセージとそれらが呼び出された場所のスタックトレースを使用して、エラーにコンテキストを追加します。</font><font style="vertical-align: inherit;">したがって、単にエラーを返すのではなく、コンテキストと重要なデバッグデータでラップすることができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pa/pz/3t/papz3tu-dlhtdcb4r8lmldfxazu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
他のエラーによるエラーラッパー</font></font><code>Cause() error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、内部エラーを返すメソッドを</font><font style="vertical-align: inherit;">サポートして</font><font style="vertical-align: inherit;">います。</font><font style="vertical-align: inherit;">また</font></font><code>errors.Cause(err error) error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、ラッピングエラーの主な内部エラーを取得</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">関数で</font><font style="vertical-align: inherit;">も使用でき</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラー処理</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型式認証</font></font></h3><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
アサーション</font><font style="vertical-align: inherit;">は、エラーを処理するときに重要な役割を果たします。これらを使用して、インターフェース値から情報を抽出します。エラー処理はインターフェースのユーザー実装に関連付けられて</font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">いるため、エラーステートメントの実装は非常に便利なツールです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その構文はすべての目的で同じです-   </font><font style="vertical-align: inherit;">インターフェイスタイプがある</font></font><code>x.(T)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合</font></font><code> x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。   </font></font><code>x.(T)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等しくないこと</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、格納されている値</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の型はである</font><font style="vertical-align: inherit;">と主張して   </font><font style="vertical-align: inherit;">い</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。次のいくつかのセクションでは、型ステートメントを使用する2つの方法について説明し</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">特定の型</font><font style="vertical-align: inherit;">と型インターフェイスを使用します</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tb/fd/e2/tbfde2ne-8parkmkbsthfamc_ym.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2 //ブール変数okをスキップする省略構文</font></font><br>
3//:  :  {}  nil,   string<br>
6//     ok<br>
8// ,    ok false,   <br>
9//      s  )</i><br>
<br>
<b><i>: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">panic   </a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a></i></b><br>
<br>
<blockquote><i> ,  :         (    ),      (    OK     ).       ,       OK,     .</i></blockquote><br>
<br>
<h3>    T</h3><br><font style="vertical-align: inherit;"></font><code>x.(T)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型インターフェイスを使用し</font><font style="vertical-align: inherit;">
て型ステートメント</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">実行する</font><font style="vertical-align: inherit;">と、インターフェイス</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実装されて</font><font style="vertical-align: inherit;">いることが確認</font><font style="vertical-align: inherit;">されます</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。したがって、インターフェース値がインターフェースを実装することを保証でき、そうである場合にのみ、そのメソッドを使用できます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jl/ps/k7/jlpsk7f8m1bj-7jhwbgmzigsqea.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（5 ... // xがリゾルバーインターフェイスを実装していると主張する</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6 ... //ここでは、このメソッドを安全に使用</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
できます</font><i><font style="vertical-align: inherit;">）</font></i><font style="vertical-align: inherit;">これがどのように使用できるかを理解するために、を見てみましょう</font></font><code>pkg/errors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。あなたはすでにこのエラーパッケージを知っているので、</font></font><code>errors.Cause(err error) error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数を</font><font style="vertical-align: inherit;">掘り下げましょう</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この関数はエラーを受け取り、それが被る最も内側のエラー（別のエラーのラッパーとして機能しなくなったエラー）を抽出します。これは、原始的に見えるかもしれませんが、あなたは、この実装から学ぶことができる多くの素晴らしいものがあります：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kj/uy/rm/kjuyrm3rxxgtqt-8a6_cd1bvsqg.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソース：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PKG /エラー</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
関数はエラー値を受け取り、それは仮定することができない</font></font><code>err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引数</font><font style="vertical-align: inherit;">は、受信したが</font><font style="vertical-align: inherit;">（サポートされているラッパーの誤差である</font></font><code>Cause</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法によって）。したがって、メソッドを呼び出す前に、</font></font><code>Cause</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このメソッドを実装するエラーを処理していることを確認する必要があります。 forループの各反復でtypeステートメントを実行することにより、</font></font><code>cause</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数がメソッドをサポートし</font><font style="vertical-align: inherit;">ていることを確認できます</font></font><code>Cause</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、そうでないエラーが見つかるまで内部エラーを抽出し続けることができ</font></font><code>Cause</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なメソッドのみを含む単純なローカルインターフェースを作成し、それにアサーションを適用することにより、コードは他の依存関係から分離されます。あなたが受け取った議論は、既知の構造である必要はなく、それは単に誤りでなければなりません。メソッドを実装し</font></font><code>Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Cause</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">適切な</font><font style="vertical-align: inherit;">任意のタイプ</font><font style="vertical-align: inherit;">。したがって、</font></font><code>Cause</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーのタイプにメソッド</font><font style="vertical-align: inherit;">を実装する場合</font><font style="vertical-align: inherit;">、この関数をスローダウンなしで使用できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、注意が必要な小さな欠点が1つあります。インターフェイスが変更される可能性があるため、ステートメントに違反しないようにコードを慎重に保守する必要があります。</font><font style="vertical-align: inherit;">それらを使用する場所でインターフェースを定義し、それらをスリムできれいに保つことを忘れないでください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、必要なメソッドが1つだけの場合は、依存するメソッドのみを含む匿名インターフェイスでステートメントを作成する方が便利な場合があります</font></font><code>v, ok := x.(interface{ F() (int, error) })</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">匿名インターフェースを使用すると、コードを可能な依存関係から分離し、インターフェースで起こり得る変更からコードを保護できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプTおよびタイプスイッチの承認</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このセクションの前に、いくつかの欠陥と落とし穴に悩まされている2つの同様のエラー処理パターンを紹介します。これは、それらが一般的ではないという意味ではありません。どちらも小規模なプロジェクトでは便利なツールですが、拡張性が不十分です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1つ目は2つ目のタイプアサーションです。タイプアサーションは</font></font><code>x.(T)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のタイプで</font><font style="vertical-align: inherit;">実行さ</font><font style="vertical-align: inherit;">れ</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。彼は、値</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には型がある</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、または</font><font style="vertical-align: inherit;">型</font><font style="vertical-align: inherit;">に変換できると</font><font style="vertical-align: inherit;">主張しています</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/c5/qy/mhc5qyqfrrnhpct7wyfzhhpflju.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2 // vをmypkg.SomeErrorTypeとして使用できます）もう</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1つは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプスイッチ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パターン</font><font style="vertical-align: inherit;">です。タイプスイッチは、予約済みキーワードを使用して、スイッチステートメントとタイプステートメントを組み合わせたものです。</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。それらは、エラー処理で特に一般的であり、変数エラーの基本的なタイプを知ることは非常に役立ちます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/on/iz/ji/onizji38uqjzltxqord4icmmvoq.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3 //処理... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5 //処理...）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
両方のアプローチの大きな欠点は、どちらのアプローチも、依存関係を持つコードバインディングにつながることです。どちらの例も、構造</font></font><code>SomeErrorType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（当然エクスポートする必要がある）に</font><font style="vertical-align: inherit;">精通している</font><font style="vertical-align: inherit;">必要があり、パッケージをインポートする必要があります</font></font><code>mypkg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのアプローチでも、エラーを処理するときは、タイプに精通し、そのパッケージをインポートする必要があります。ラッパーでエラーを処理すると、状況は悪化します。エラーの原因は、知らないはずの内部依存関係に起因するエラーである可能性があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vz/xz/zq/vzxzzqe6qajcsroflsuy0mjt5jk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（7 //処理... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
9 //処理...）</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タイプスイッチはとを区別</font></font><code>*MyStruct</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font></font><code>MyStruct</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">したがって、ポインタと構造体の実際のインスタンスのどちらを扱っているのかわからない場合は、両方のオプションを指定する必要があります。</font><font style="vertical-align: inherit;">さらに、通常のスイッチの場合と同様に、タイプスイッチのケースは失敗しませんが、通常のタイプスイッチとは異なり、タイプスイッチでは使用</font></font><code>fallthrough</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">できません。そのため、カンマを使用して両方のオプションを指定する必要があるため、忘れがちです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pe/1y/g7/pe1yg7one8orth5kvcdguqtpteo.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要約する</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それで全部です！</font><font style="vertical-align: inherit;">これでバグに慣れたので、Goアプリケーションがパスにスローする（または実際に戻る）可能性のあるバグを修正する準備を整える必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どちらのパッケージも</font></font><code>errors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、Goのバグに対するシンプルですが重要なアプローチを提供します。ニーズに合っている場合は、優れた選択肢です。</font><font style="vertical-align: inherit;">独自のエラー構造を簡単に実装し、と組み合わせてGoエラー処理を利用できます</font></font><code>pkg/errors</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単純なエラーをスケーリングする場合、typeステートメントの正しい使用は、さまざまなエラーを処理するための優れたツールになります。</font><font style="vertical-align: inherit;">タイプスイッチを使用するか、エラーの動作を検証して、実装されているインターフェイスを確認します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次は何ですか？</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Goでのエラー処理は非常に重要です。</font><font style="vertical-align: inherit;">基本を理解したところで、Goエラーを処理するために何が待ち受けているのか疑問に思われるかもしれません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Go 2の次のバージョンでは、これに多くの注意が払われており、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ドラフトバージョンを</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すでに確認できます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">さらに、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dotGo 2019の</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期間中</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">、</font></a><font style="vertical-align: inherit;"> Marcel van Lojuizenは私がお勧めできないトピック</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「今日のGO 2エラー値」</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">について優れた会話をしました</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明らかに、他にも多くのアプローチ、ヒント、トリックがあり、それらすべてを1つの投稿に含めることはできません！</font><font style="vertical-align: inherit;">それにもかかわらず、楽しんでいただけたら幸いです。BeforeYou </font></font><i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Goの</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次のエピソードでお会いしましょ</font><font style="vertical-align: inherit;">う！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして今、伝統的にあなたのコメントを待っています。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja453790/index.html">「クライアントはなくなった-それは永遠ですか？」SaaSでの顧客チャーンをカウントする方法と基本的なメトリックの何が問題になっているのか</a></li>
<li><a href="../ja453792/index.html">推奨システム：アイデア、アプローチ、タスク</a></li>
<li><a href="../ja453796/index.html">人々は数学が必要ですか？</a></li>
<li><a href="../ja453800/index.html">「マインスイーパ」を解決する方法（およびそれを改善する方法）</a></li>
<li><a href="../ja453804/index.html">書籍「.NETプラットフォームでの競争力と並行性。効果的なデザインパターン”</a></li>
<li><a href="../ja453808/index.html">バイキングのビジネスモデルを分解します</a></li>
<li><a href="../ja453810/index.html">生体認証フィードバック</a></li>
<li><a href="../ja453812/index.html">テーマ、スタイルなど</a></li>
<li><a href="../ja453816/index.html">ダニ媒介性脳炎：無視されている危険</a></li>
<li><a href="../ja453818/index.html">GitLab 11.11：コンテナーのマージ要求と改善を担当するいくつかの人</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>