<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👩‍👧‍👦 🧕 😒 Selenium WebDriver ao serviço do desenvolvedor 👅 🙆🏼 🛀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Decodificação do relatório de Dmitry Kostichev com histórias de back-end // Versão do vídeo dentro 
 
 Se você precisar se integrar repentinamente em ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Selenium WebDriver ao serviço do desenvolvedor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alfa/blog/504886/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decodificação do relatório de Dmitry Kostichev com histórias de back-end // Versão do vídeo dentro </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se você precisar se integrar repentinamente em um recurso de Internet de terceiros e não tiver tempo para descobrir, o Selenium será útil. </font><font style="vertical-align: inherit;">Dmitry Kostichev contou no exemplo de seu projeto como automatizar o trabalho no navegador sem sair do seu serviço.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Olá pessoal. Meu nome é Dmitry e hoje vou compartilhar minha experiência de uso do Selenium no desenvolvimento de back-end. Para que serve isso? O selênio é necessário para automatizar a interação com alguns recursos da Internet, para nivelar os fatores humanos, preenchendo alguns dados, etc. Para o desenvolvimento, isso pode ser necessário nesses casos quando, por exemplo, não há API no recurso da Internet e assim por diante. E no exemplo do meu projeto, a tarefa era preencher os dados do cliente (antes disso o serviço precisava preparar corretamente todas as informações) e registrá-los neste site, neste caso a MasterCard.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/wd/pj/4c/wdpj4cshsqqjyvw3xc77kmq3bic.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Após uma análise mais aprofundada deste site, foi revelado que não há API para a qual possamos alcançar e fazer tudo. Todo o processamento é realizado em scripts JS, nos quais nada é claro e os dados são todos codificados. A decisão foi tomada - experimentar o Selenium para esses fins, ou seja, prenderemos ao Selenium todo o nosso serviço, que realizará esse registro em algum momento definido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, o que é Selenium e como trabalhar com ele? O projeto Selenium consiste em uma biblioteca que se comunica com a interface do driver da web para um navegador específico. Uma lista de bibliotecas e navegadores disponíveis é mostrada no slide. E agora vou mostrar como funciona aproximadamente no meu projeto. </font></font><br>
<br>
<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assista a um screencast</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou a um vídeo detalhado no final da postagem.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora o serviço irá gerar um arquivo, faça o upload imediatamente para este site e verifique se tudo foi registrado com sucesso. </font><font style="vertical-align: inherit;">Aqui, de fato, ele cola, carrega e assim por diante. </font><font style="vertical-align: inherit;">E agora ele provavelmente vai pular no fato de que tudo será bem sucedido. </font><font style="vertical-align: inherit;">A automação é rápida o suficiente e não requer grandes recursos. </font><font style="vertical-align: inherit;">Aparentemente, tudo estava perfeitamente registrado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como cozinhar tudo isso? </font><font style="vertical-align: inherit;">A biblioteca Selenium possui comandos básicos como:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um driver da Web de instância para um navegador específico;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cliques em links;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabalhar com elementos: cliques, etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O driver da web permite que você receba sessões e cookies como em um navegador normal. Você também pode alterá-los e personalizar por si mesmo. Você também pode executar scripts js na página. Existe uma biblioteca que estende essa funcionalidade do próprio Selenium, chamada Selenide. Sua principal característica é ocultar a criação de drivers de instância. Como exemplo, vemos que simplesmente chamamos o comando open, fornecemos algum tipo de link e o navegador já está iniciando, não há necessidade de configurar nada. E a biblioteca expande o trabalho com elementos, algumas predefinições adicionais. Tudo parece conveniente, você pode descobrir rapidamente e usar tudo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com recursos on-line e, finalmente, com o Selenium, existem alguns padrões de design. E um deles são objetos de página. Sua essência está no fato de descrevermos todos esses elementos em uma determinada classe. E então podemos reutilizá-lo e parece mais fácil. Aqui está algo como isto: chamamos o comando open, damos a classe de objetos de página e, em seguida, podemos usar todos os seus métodos, por exemplo, trabalhando com elementos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ll/b9/t0/llb9t0lu5zz2xydy1uq96zqh7ig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pesquisamos elementos pelo modelo DOM da página HTML por seletores como xpath, css e outros. Suas principais diferenças, por exemplo, entre xpath e css, são que o xpath pode ir "profundo", além de subir e descer. E css, pelo contrário, é apenas baixo. Ou seja, esses são os seletores mais usados.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gv/hn/ah/gvhnahxm1pi2zhrkaytqbmkxxvm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, precisamos de um navegador diretamente, o qual a Selenoid pode nos ajudar diretamente. Em essência, é uma estrutura que controla a criação e modificação desses contêineres com navegadores. Mas foi projetado mais para sistemas carregados em que esses navegadores são criados em grandes números. E em nossa situação, isso não é muito necessário, mas use apenas o próprio contêiner. E agora vou mostrar como isso já deve funcionar no servidor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, a interação da página se parece com isso, é um processamento de dados bastante linear. Nesse caso, eu dividi em etapas - transições para páginas. É aqui que os dados são preenchidos e, diretamente, baixados por arquivos. Em princípio, tudo é bastante simples. É assim que uma classe de objeto de página se parece, uma reminiscência de um DTO. Simplesmente descrevemos os elementos, por exemplo, aqui no caso atual do PCSS Selectum. Esta é a sintaxe do Selenide.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h4/kl/fw/h4klfwrq4elb5on7g9z5whhkfoa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que isso funcione, precisamos de uma descrição do driver Remoto para conectar-se ao contêiner do docker. As principais configurações que você precisa para chegar lá são o navegador que usaremos e, de fato, a resolução e outras linhas importantes para o navegador. Mas, para trabalhar com o contêiner do docker, você também precisará de configurações como o modo sem cabeça. Ou seja, em sua forma atual, ele girará no servidor. Este modo desativa os gráficos no navegador, para que ele funcione mais rápido e consuma menos recursos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Além disso, não haverá Sandbox, que é desativado pela segurança do Chromium nesse caso, e será possível executar seu próprio código, JS ou outro. O terceiro parâmetro é necessário para que o Chromium funcione normalmente em máquinas unix, grave corretamente os arquivos de andamento. E o quarto, de fato, é necessário para que possamos enviar arquivos. E o mais importante, o driver Remoto possui um sinalizador que permite baixar um arquivo do armazenamento local em que o aplicativo está sendo executado, já por meio do driver Remover.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/on/-d/baon-d0gi-xpyg4yxwdb5vfkd-y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vou mostrar como ele funciona com o contêiner do docker. Faça o download do contêiner do docker e do próprio aplicativo. Também será lançado aproximadamente da mesma maneira, ou seja, em princípio, nada de novo será. Somente aqui veremos a interação em algum tipo de log. Em princípio, eles também podem ser monitorados, trabalhar com eles e assim por diante. Portanto, você pode entender a interação que está acontecendo. Essa é a saída do contêiner do Docker com o Chromium diretamente onde o navegador está.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nm/bi/cn/nmbicntdhkeijq7qcffa4c7r5fk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em princípio, tudo funciona perfeitamente com o contêiner do docker. Além disso, tudo é verificado e o registro é concluído com êxito. Além disso, que problemas gerais poderiam ser encontrados nessa abordagem? Eu não tinha tanto problema quanto ignorância. As transferências de arquivos no contêiner do docker, como sempre, fazem tudo - a mudança de volume. Porém, nesse caso, se você ainda deseja executar localmente, precisará ter duas configurações para o projeto, mas, como se viu, o driver Remoto pode ser configurado através do sinalizador. Ele pode transferir esse arquivo diretamente através de si mesmo, e não são necessários gestos adicionais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você também terá que seguir a página com a qual trabalhamos - um recurso on-line. </font><font style="vertical-align: inherit;">Porque, no meu caso, esse é outro sistema, com o qual ninguém tem um relacionamento da minha equipe, e isso também precisa ser monitorado, monitorado por logs e assim por diante. </font><font style="vertical-align: inherit;">Como no navegador, ele é constantemente atualizado, você precisa monitorá-lo, o suporte pode cair. </font><font style="vertical-align: inherit;">Bem, em princípio, você pode configurar os logs de alguma forma e não haverá problemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, quão mais fácil se tornou? </font><font style="vertical-align: inherit;">Pareceu-me que eu era capaz de resolver o problema de interagir com este site muito mais rapidamente do que se soubesse o código js. </font><font style="vertical-align: inherit;">Ou seja, entender o Selenium e a interação pode ser mais rápido do que com o fato de os dados serem codificados e não se saber como transcodificá-los novamente. </font><font style="vertical-align: inherit;">O principal é a velocidade no desenvolvimento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Denunciar vídeo - a partir das 16h30</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VvAkcjimXK0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt504866/index.html">Investigação de incidentes de segurança da informação em estado selvagem: fontes inesperadas de informação</a></li>
<li><a href="../pt504868/index.html">Gateway de Internet Doméstico. Configuração inicial de um minicomputador de 6 portas no Ubuntu Server 20.04 LTS</a></li>
<li><a href="../pt504878/index.html">109 cursos gratuitos em Ciência de Dados</a></li>
<li><a href="../pt504880/index.html">Desenvolvimento, otimização e lançamento de jogos Synthety no Unity</a></li>
<li><a href="../pt504884/index.html">Periféricos Perigosos: Entendendo a Trovoada</a></li>
<li><a href="../pt504888/index.html">"Calma, apenas calma!" ou menos preocupação</a></li>
<li><a href="../pt504890/index.html">Retornar o valor do comando de chamada do powershell para o SQL-Server Agent</a></li>
<li><a href="../pt504894/index.html">GUI em russo ou terminal VKS faça você mesmo</a></li>
<li><a href="../pt504902/index.html">As 9 principais tendências em testes automatizados em 2020</a></li>
<li><a href="../pt504906/index.html">PHP - qual é o nicho da linguagem e o PHP8 ajudará a resolver problemas prementes (spoiler: IMHO não)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>