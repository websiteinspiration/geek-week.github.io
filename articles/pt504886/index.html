<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ üßï üòí Selenium WebDriver ao servi√ßo do desenvolvedor üëÖ üôÜüèº üõÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Decodifica√ß√£o do relat√≥rio de Dmitry Kostichev com hist√≥rias de back-end // Vers√£o do v√≠deo dentro 
 
 Se voc√™ precisar se integrar repentinamente em ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Selenium WebDriver ao servi√ßo do desenvolvedor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/alfa/blog/504886/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decodifica√ß√£o do relat√≥rio de Dmitry Kostichev com hist√≥rias de back-end // Vers√£o do v√≠deo dentro </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ precisar se integrar repentinamente em um recurso de Internet de terceiros e n√£o tiver tempo para descobrir, o Selenium ser√° √∫til. </font><font style="vertical-align: inherit;">Dmitry Kostichev contou no exemplo de seu projeto como automatizar o trabalho no navegador sem sair do seu servi√ßo.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ol√° pessoal. Meu nome √© Dmitry e hoje vou compartilhar minha experi√™ncia de uso do Selenium no desenvolvimento de back-end. Para que serve isso? O sel√™nio √© necess√°rio para automatizar a intera√ß√£o com alguns recursos da Internet, para nivelar os fatores humanos, preenchendo alguns dados, etc. Para o desenvolvimento, isso pode ser necess√°rio nesses casos quando, por exemplo, n√£o h√° API no recurso da Internet e assim por diante. E no exemplo do meu projeto, a tarefa era preencher os dados do cliente (antes disso o servi√ßo precisava preparar corretamente todas as informa√ß√µes) e registr√°-los neste site, neste caso a MasterCard.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/wd/pj/4c/wdpj4cshsqqjyvw3xc77kmq3bic.png"></a><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ap√≥s uma an√°lise mais aprofundada deste site, foi revelado que n√£o h√° API para a qual possamos alcan√ßar e fazer tudo. Todo o processamento √© realizado em scripts JS, nos quais nada √© claro e os dados s√£o todos codificados. A decis√£o foi tomada - experimentar o Selenium para esses fins, ou seja, prenderemos ao Selenium todo o nosso servi√ßo, que realizar√° esse registro em algum momento definido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, o que √© Selenium e como trabalhar com ele? O projeto Selenium consiste em uma biblioteca que se comunica com a interface do driver da web para um navegador espec√≠fico. Uma lista de bibliotecas e navegadores dispon√≠veis √© mostrada no slide. E agora vou mostrar como funciona aproximadamente no meu projeto. </font></font><br>
<br>
<i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assista a um screencast</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou a um v√≠deo detalhado no final da postagem.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora o servi√ßo ir√° gerar um arquivo, fa√ßa o upload imediatamente para este site e verifique se tudo foi registrado com sucesso. </font><font style="vertical-align: inherit;">Aqui, de fato, ele cola, carrega e assim por diante. </font><font style="vertical-align: inherit;">E agora ele provavelmente vai pular no fato de que tudo ser√° bem sucedido. </font><font style="vertical-align: inherit;">A automa√ß√£o √© r√°pida o suficiente e n√£o requer grandes recursos. </font><font style="vertical-align: inherit;">Aparentemente, tudo estava perfeitamente registrado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como cozinhar tudo isso? </font><font style="vertical-align: inherit;">A biblioteca Selenium possui comandos b√°sicos como:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando um driver da Web de inst√¢ncia para um navegador espec√≠fico;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cliques em links;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabalhar com elementos: cliques, etc.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O driver da web permite que voc√™ receba sess√µes e cookies como em um navegador normal. Voc√™ tamb√©m pode alter√°-los e personalizar por si mesmo. Voc√™ tamb√©m pode executar scripts js na p√°gina. Existe uma biblioteca que estende essa funcionalidade do pr√≥prio Selenium, chamada Selenide. Sua principal caracter√≠stica √© ocultar a cria√ß√£o de drivers de inst√¢ncia. Como exemplo, vemos que simplesmente chamamos o comando open, fornecemos algum tipo de link e o navegador j√° est√° iniciando, n√£o h√° necessidade de configurar nada. E a biblioteca expande o trabalho com elementos, algumas predefini√ß√µes adicionais. Tudo parece conveniente, voc√™ pode descobrir rapidamente e usar tudo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com recursos on-line e, finalmente, com o Selenium, existem alguns padr√µes de design. E um deles s√£o objetos de p√°gina. Sua ess√™ncia est√° no fato de descrevermos todos esses elementos em uma determinada classe. E ent√£o podemos reutiliz√°-lo e parece mais f√°cil. Aqui est√° algo como isto: chamamos o comando open, damos a classe de objetos de p√°gina e, em seguida, podemos usar todos os seus m√©todos, por exemplo, trabalhando com elementos. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ll/b9/t0/llb9t0lu5zz2xydy1uq96zqh7ig.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pesquisamos elementos pelo modelo DOM da p√°gina HTML por seletores como xpath, css e outros. Suas principais diferen√ßas, por exemplo, entre xpath e css, s√£o que o xpath pode ir "profundo", al√©m de subir e descer. E css, pelo contr√°rio, √© apenas baixo. Ou seja, esses s√£o os seletores mais usados.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gv/hn/ah/gvhnahxm1pi2zhrkaytqbmkxxvm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por fim, precisamos de um navegador diretamente, o qual a Selenoid pode nos ajudar diretamente. Em ess√™ncia, √© uma estrutura que controla a cria√ß√£o e modifica√ß√£o desses cont√™ineres com navegadores. Mas foi projetado mais para sistemas carregados em que esses navegadores s√£o criados em grandes n√∫meros. E em nossa situa√ß√£o, isso n√£o √© muito necess√°rio, mas use apenas o pr√≥prio cont√™iner. E agora vou mostrar como isso j√° deve funcionar no servidor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na verdade, a intera√ß√£o da p√°gina se parece com isso, √© um processamento de dados bastante linear. Nesse caso, eu dividi em etapas - transi√ß√µes para p√°ginas. √â aqui que os dados s√£o preenchidos e, diretamente, baixados por arquivos. Em princ√≠pio, tudo √© bastante simples. √â assim que uma classe de objeto de p√°gina se parece, uma reminisc√™ncia de um DTO. Simplesmente descrevemos os elementos, por exemplo, aqui no caso atual do PCSS Selectum. Esta √© a sintaxe do Selenide.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/h4/kl/fw/h4klfwrq4elb5on7g9z5whhkfoa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que isso funcione, precisamos de uma descri√ß√£o do driver Remoto para conectar-se ao cont√™iner do docker. As principais configura√ß√µes que voc√™ precisa para chegar l√° s√£o o navegador que usaremos e, de fato, a resolu√ß√£o e outras linhas importantes para o navegador. Mas, para trabalhar com o cont√™iner do docker, voc√™ tamb√©m precisar√° de configura√ß√µes como o modo sem cabe√ßa. Ou seja, em sua forma atual, ele girar√° no servidor. Este modo desativa os gr√°ficos no navegador, para que ele funcione mais r√°pido e consuma menos recursos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, n√£o haver√° Sandbox, que √© desativado pela seguran√ßa do Chromium nesse caso, e ser√° poss√≠vel executar seu pr√≥prio c√≥digo, JS ou outro. O terceiro par√¢metro √© necess√°rio para que o Chromium funcione normalmente em m√°quinas unix, grave corretamente os arquivos de andamento. E o quarto, de fato, √© necess√°rio para que possamos enviar arquivos. E o mais importante, o driver Remoto possui um sinalizador que permite baixar um arquivo do armazenamento local em que o aplicativo est√° sendo executado, j√° por meio do driver Remover.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/on/-d/baon-d0gi-xpyg4yxwdb5vfkd-y.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vou mostrar como ele funciona com o cont√™iner do docker. Fa√ßa o download do cont√™iner do docker e do pr√≥prio aplicativo. Tamb√©m ser√° lan√ßado aproximadamente da mesma maneira, ou seja, em princ√≠pio, nada de novo ser√°. Somente aqui veremos a intera√ß√£o em algum tipo de log. Em princ√≠pio, eles tamb√©m podem ser monitorados, trabalhar com eles e assim por diante. Portanto, voc√™ pode entender a intera√ß√£o que est√° acontecendo. Essa √© a sa√≠da do cont√™iner do Docker com o Chromium diretamente onde o navegador est√°.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nm/bi/cn/nmbicntdhkeijq7qcffa4c7r5fk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em princ√≠pio, tudo funciona perfeitamente com o cont√™iner do docker. Al√©m disso, tudo √© verificado e o registro √© conclu√≠do com √™xito. Al√©m disso, que problemas gerais poderiam ser encontrados nessa abordagem? Eu n√£o tinha tanto problema quanto ignor√¢ncia. As transfer√™ncias de arquivos no cont√™iner do docker, como sempre, fazem tudo - a mudan√ßa de volume. Por√©m, nesse caso, se voc√™ ainda deseja executar localmente, precisar√° ter duas configura√ß√µes para o projeto, mas, como se viu, o driver Remoto pode ser configurado atrav√©s do sinalizador. Ele pode transferir esse arquivo diretamente atrav√©s de si mesmo, e n√£o s√£o necess√°rios gestos adicionais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ tamb√©m ter√° que seguir a p√°gina com a qual trabalhamos - um recurso on-line. </font><font style="vertical-align: inherit;">Porque, no meu caso, esse √© outro sistema, com o qual ningu√©m tem um relacionamento da minha equipe, e isso tamb√©m precisa ser monitorado, monitorado por logs e assim por diante. </font><font style="vertical-align: inherit;">Como no navegador, ele √© constantemente atualizado, voc√™ precisa monitor√°-lo, o suporte pode cair. </font><font style="vertical-align: inherit;">Bem, em princ√≠pio, voc√™ pode configurar os logs de alguma forma e n√£o haver√° problemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, qu√£o mais f√°cil se tornou? </font><font style="vertical-align: inherit;">Pareceu-me que eu era capaz de resolver o problema de interagir com este site muito mais rapidamente do que se soubesse o c√≥digo js. </font><font style="vertical-align: inherit;">Ou seja, entender o Selenium e a intera√ß√£o pode ser mais r√°pido do que com o fato de os dados serem codificados e n√£o se saber como transcodific√°-los novamente. </font><font style="vertical-align: inherit;">O principal √© a velocidade no desenvolvimento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Denunciar v√≠deo - a partir das 16h30</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VvAkcjimXK0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt504866/index.html">Investiga√ß√£o de incidentes de seguran√ßa da informa√ß√£o em estado selvagem: fontes inesperadas de informa√ß√£o</a></li>
<li><a href="../pt504868/index.html">Gateway de Internet Dom√©stico. Configura√ß√£o inicial de um minicomputador de 6 portas no Ubuntu Server 20.04 LTS</a></li>
<li><a href="../pt504878/index.html">109 cursos gratuitos em Ci√™ncia de Dados</a></li>
<li><a href="../pt504880/index.html">Desenvolvimento, otimiza√ß√£o e lan√ßamento de jogos Synthety no Unity</a></li>
<li><a href="../pt504884/index.html">Perif√©ricos Perigosos: Entendendo a Trovoada</a></li>
<li><a href="../pt504888/index.html">"Calma, apenas calma!" ou menos preocupa√ß√£o</a></li>
<li><a href="../pt504890/index.html">Retornar o valor do comando de chamada do powershell para o SQL-Server Agent</a></li>
<li><a href="../pt504894/index.html">GUI em russo ou terminal VKS fa√ßa voc√™ mesmo</a></li>
<li><a href="../pt504902/index.html">As 9 principais tend√™ncias em testes automatizados em 2020</a></li>
<li><a href="../pt504906/index.html">PHP - qual √© o nicho da linguagem e o PHP8 ajudar√° a resolver problemas prementes (spoiler: IMHO n√£o)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>