<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öíÔ∏è üÜì üòÅ Angular: a clear introduction to NGRX ‚ò¶Ô∏è üíñ üî∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this article is to give a clean and clear view of ngrx . To do this, I will explain what you need to know and understand about ngrx, an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Angular: a clear introduction to NGRX</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489674/"><img src="https://habrastorage.org/webt/rz/7h/ee/rz7heen5ey-lo47udm7sn4owfzg.png" alt="image"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The purpose of this article is to give a clean and clear view of </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ngrx</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">To do this, I will explain what you need to know and understand about ngrx, and then we will see it in action with simple and clear code examples. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here is a list of topics that we will discuss in this article:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benefits of Using ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disadvantages of using ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When to use ngrx</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actions, Gearboxes, Selectors, Storage and Effects</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continued article with an example use: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Angular: an example of using NGRX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">"</font></a></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is NGRX</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
NGRX is a group of libraries ‚Äúinspired‚Äù by the Redux pattern, which, in turn, is ‚Äúinspired‚Äù by the Flux pattern. </font><font style="vertical-align: inherit;">Simply put, this means that the Redux pattern is a simplified version of the Flux pattern, and NGRX is the angular / rxjs version of the Redux pattern.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What I mean by the "angular / rxjs" version of redux ... the "angular" part is that ngrx is a library for use in angular applications. </font><font style="vertical-align: inherit;">Part of the ‚Äúrxjs‚Äù is that the ngrx implementation works around the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rxjs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> stream </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">This means that it works using observable and various observable operators provided by rxjs.</font></font></blockquote><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The main goal of this scheme is to ensure the predictable state of the container based on three basic principles.</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at the three principles of the Redux model and point out the most important benefits they provide.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The only source of truth</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the case of the redux / ngrx architecture, this means that the state of your entire application is stored in the object tree within the same repository.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In one store? </font><font style="vertical-align: inherit;">We will talk about repositories later, but for a general understanding, they are responsible for maintaining the state and applying changes to it when they are told about it (when the action is sent, we will also talk about them later).</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The benefits of having one source of truth are numerous, but for me the most interesting (because this is what will affect any angular application) is the following:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When you create an Angular application, you usually split the state and handle several services. </font><font style="vertical-align: inherit;">As your application grows, tracking changes in your state becomes more and more difficult and as a result it becomes messy, it is difficult to debug and maintain. Having a single source of truth solves this problem, because the state is processed only in one object and in one location, so debugging or adding changes becomes much easier.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read-only state</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You will never change the state directly, instead you will send actions that describe actions with the object (these can be things like getting, adding, removing, or updating the state).</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Submit an action? .. We will talk about actions later, but for a general understanding, these are the identifiers of the operation on your application, and they can be launched (or sent) to tell the application to perform the operation that the action represents.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By avoiding updating status from different places and having a centralized place for making changes that responds to specific actions, you get many benefits. </font><font style="vertical-align: inherit;">Not to mention the most important:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You know that any change in state will occur in only one place. </font><font style="vertical-align: inherit;">This has a big impact on debugging and testing.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You know that if a certain action is sent, then the operation in the state is always the same. </font><font style="vertical-align: inherit;">Again, this directly affects debugging and testing.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changes are made with simple features.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
An operation initiated by the dispatch of an action will be a simple function called reducers within the framework of the redux architecture. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These reducers (remember that they are simple functions) receive an action and state, depending on the action sent (usually with the switch statement), they perform the operation and return a new state object. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The state in the redux application is unchanged! Therefore, when a reducer changes something in a state, it returns a new state object. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The benefits of using pure functions are well known, such as the fact that they can be tested immediately if you pass the same arguments that you get as a result.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This approach also allows us to move between different instances of our state using the Redux / ngrx development tools and see what has changed between the instances and who has changed it, among other things. </font><font style="vertical-align: inherit;">Thus, using pure functions and returning new state instances also has a big impact on debugging. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
But the main advantage, in my opinion, is that by binding all the input data of our components to the state properties, we can change the strategy for detecting changes to push, and this will increase application performance.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Great ... So, what are the benefits of using NGRX?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We already mentioned most of them when we talked about the principles of redux template. </font><font style="vertical-align: inherit;">But let's note the most important advantages of using redux template in the application (in my opinion):</font></font><br>
<br>
<ul>
<li>      ,       ,     .</li>
<li> redux      ,  .</li>
<li>   ,         ,   ,  , ngrx  rxjs,      .</li>
<li>        ngrx,           .</li>
</ul><br>
<h2>‚Ä¶  </h2><br>
<ul>
<li> NGRX, ,   .   ,       ,   ,           .         ,        .</li>
<li>     .   ,    -   ,    , ,       , ,   ,  .      () rxjs    .</li>
<li>NGRX          Google,   , ,     Angular   ngrx.   - ,     ,       .</li>
</ul><br>
<h2>   NGRX</h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, it is generally agreed that ngrx should be used in medium / large projects when state management becomes difficult to maintain. Some more fanatical people will say something like "if you have a fortune, then you have NGRX." </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I agree that it should be used in medium or large projects when you have significant state and many components that use this state, but you should consider that Angular itself provides many state management solutions, and if you have a strong Angular development team, then maybe you do not need to worry about ngrx.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
At the same time, I believe that a strong Angular development team can also decide to include ngrx in the solution, because they know the full power of the redux template, as well as the strength added by the rxjs operators, and they feel comfortable working with both ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you were expecting a simple answer, to decide when to use ngrx, you won‚Äôt get it and don‚Äôt trust anyone who gives you this answer outside of your organization or group. </font><font style="vertical-align: inherit;">The decision depends on studying the pros and cons, understanding your team and taking their opinions into account.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NGRX Actions, Gearboxes, Selectors, Storage, and Effects</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
These are the basic building blocks of the ngrx stream. </font><font style="vertical-align: inherit;">Each of them takes on a part of the process of starting an operation to change our state and obtain data. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0p/ms/zd/0pmszdg8q_8lifpdv5uw3j3cahc.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the image we see the ngrx stream. </font><font style="vertical-align: inherit;">Let's explain it ...</font></font><br>
<br>
<ol>
<li>        .  ,  ,    ,    <b></b>.<br>
<blockquote>‚Ä¶<br>
<br>
  ¬´¬ª    () .  ‚Äî  ,   NGRX Action.    Action'    (        GetUserName):<br>
<br>
<b>type</b> ():     , ,   . : '[User] Get User Login''.<br>
<br>
<b>payload</b> ( ):      ,     .       ,   .       .<br>
</blockquote></li>
<li>      , <b>    </b> (    switch)    ,        ,    .<br>
<blockquote><b>...</b><br>
<br>
 ‚Äî   ,   :    .    ngrx    ,        ,   ,     ,   ,       .<br>
</blockquote></li>
<li>      ,    - ,        . ,    -    HTTP   .<br>
<blockquote><b>...</b><br>
<br>
    ngrx       ,          ngrx.<br>
<br>
Effects ,  -  , ,  ,  ,        ,    .<br>
<br>
   ,       API.<br>
<br>
  ,      ,        (success, error  ..),     ,        ngrx.<br>
</blockquote> <b> ,    (  ),   ¬´-¬ª   </b> ( ,     ).<br>
</li>
<li>     .      ,  <b>ngrx  ,        ,      .</b><br>
<blockquote><b>...</b><br>
<br>
   ,       ,          ,      .<br>
<br>
 NGRX    ¬´¬ª     .  ,         ,      .<br>
<br>
   .           .   ¬´store¬ª      ,     .<br>
<br>
<b> ...</b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A store is an object (an instance of the Store ngrx class) that combines the things we mentioned earlier (actions, reducers, selectors). </font><font style="vertical-align: inherit;">For example, when an action is sent (using the send function of the storage object), the storage is the one that finds and executes the corresponding reducer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
He is also an application state holder.</font></font><br>
</blockquote></li>
</ol><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Continued article with examples of use: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Angular: an example of using NGRX</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;">"</font></a></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489662/index.html">PHP Digest No. 174 (February 10 - 24, 2020)</a></li>
<li><a href="../en489664/index.html">NPS, conveyor, automatic computing and again ... coroutines</a></li>
<li><a href="../en489666/index.html">Overloading in C ++. Part II Operator Overload</a></li>
<li><a href="../en489668/index.html">CPU limits and aggressive throttling in Kubernetes</a></li>
<li><a href="../en489672/index.html">We revive the hexapod. Part two</a></li>
<li><a href="../en489676/index.html">We make a clone of the food delivery service using Nuxt.js, GraphQL, Strapi and Stripe. Part 1/7</a></li>
<li><a href="../en489678/index.html">Indestructible memory, indestructible processes</a></li>
<li><a href="../en489682/index.html">Cross-Origin Read Blocking (CORB) in Chrome Extensions</a></li>
<li><a href="../en489684/index.html">This is the norm - 4: solving problems with normal maps</a></li>
<li><a href="../en489688/index.html">OData + RxJava + Retrofit 2 for android application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>