<!doctype html>
<html class="no-js" lang="ar">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕳️ 🐃 🐫 رفرفة تحت غطاء المحرك ♐️ 🤠 👨🏻‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="تحية للجميع! اسمي ميخائيل زوتييف ، أعمل كمطوّر Flutter في Surf. أنا ، على الأرجح مثل غالبية المطورين الآخرين الذين يعملون مع Flutter ، والأهم من ذلك ك...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>رفرفة تحت غطاء المحرك</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/surfstudio/blog/501862/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تحية للجميع! اسمي ميخائيل زوتييف ، أعمل كمطوّر Flutter في Surf. أنا ، على الأرجح مثل غالبية المطورين الآخرين الذين يعملون مع Flutter ، والأهم من ذلك كله هو مدى سهولة إنشاء تطبيقات جميلة ومريحة بمساعدتها. يستغرق الأمر القليل من الوقت للوصول إلى تطوير Flutter. لقد عملت مؤخرًا في تطوير اللعبة ، والآن تحولت تمامًا إلى تطوير الجوّال عبر الأنظمة الأساسية على Flutter.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ما هي البساطة؟ </font><font style="vertical-align: inherit;">باستخدام عشرات الأدوات الأساسية ، يمكنك إنشاء واجهات مستخدم لائقة جدًا. </font><font style="vertical-align: inherit;">وبمرور الوقت ، عندما تكون الأمتعة المستخدمة لائقة تمامًا ، فمن غير المحتمل أن يؤدي نوع من المهام إلى توقفك: سواء كان تصميمًا غير عادي أو رسوم متحركة متطورة. </font><font style="vertical-align: inherit;">والأكثر إثارة للاهتمام - على الأرجح يمكنك استخدامه دون التفكير في السؤال: "كيف يعمل على الإطلاق؟" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نظرًا لأن Flutter مفتوح المصدر ، فقد قررت معرفة ما تحت غطاء المحرك (على جانب Dart من القوة) ومشاركته معك.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/lg/ln/q6/lglnq6t8sbc8gq-emifhx1dxjwu.png"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القطعة</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد سمعنا جميعًا العبارة من فريق تطوير إطار العمل أكثر من مرة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"كل شيء في Flutter عبارة عن أدوات</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><i><font style="vertical-align: inherit;">" </font></i><font style="vertical-align: inherit;">دعونا نرى ما إذا كان الأمر كذلك بالفعل. </font><font style="vertical-align: inherit;">للقيام بذلك ، ننتقل إلى فئة </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القطعة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (فيما يلي - القطعة) ونبدأ في التعرف تدريجياً على المحتويات. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
أول شيء سنقرأه في وثائق الفصل:</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يصف تكوين [عنصر].</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
اتضح أن الأداة نفسها هي مجرد وصف لبعض </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">العناصر</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (فيما يلي - العنصر).</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحاجيات هي التسلسل الهرمي للفئة المركزية في إطار Flutter. </font><font style="vertical-align: inherit;">عنصر واجهة المستخدم هو وصف ثابت لجزء من واجهة المستخدم. </font><font style="vertical-align: inherit;">يمكن تضخم عناصر واجهة المستخدم في عناصر ، والتي تدير شجرة التجسيد الأساسية.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">للتلخيص ، عبارة </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"كل شيء في Flutter هو عنصر واجهة مستخدم"</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> هو الحد الأدنى لفهم كيفية ترتيب كل شيء لاستخدام Flutter. </font><font style="vertical-align: inherit;">الأداة هي الطبقة المركزية في تسلسل Flutter. </font><font style="vertical-align: inherit;">في الوقت نفسه ، هناك العديد من الآليات الإضافية حوله التي تساعد الإطار على التعامل مع مهمته. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لذا ، تعلمنا بعض الحقائق الإضافية:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القطعة - وصف ثابت لجزء من واجهة المستخدم ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القطعة مرتبطة ببعض العرض المتقدم يسمى عنصر ؛ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عنصر يتحكم في بعض كيانات شجرة التجسيد.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لابد أنك لاحظت شيئًا غريبًا. </font><font style="vertical-align: inherit;">واجهة المستخدم والغير قابلة للربط معًا بشكل سيئ جدًا ، بل أود أن أقول إن هذه مفاهيم غير متوافقة تمامًا. </font><font style="vertical-align: inherit;">ولكن سنعود إلى ذلك عندما تظهر صورة أكثر اكتمالاً لجهاز Flutter العالمي ، ولكن في الوقت الحالي ، سنستمر في التعرف على وثائق الأداة.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الحاجيات نفسها ليس لها حالة قابلة للتغيير (يجب أن تكون جميع حقولها نهائية). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
إذا كنت ترغب في ربط حالة قابلة للتغيير بعنصر واجهة مستخدم ، ففكر في استخدام [StatefulWidget] ، الذي ينشئ كائن [State] (عبر [StatefulWidget.createState]) كلما تم تضخيمه في عنصر ودمجه في الشجرة.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تكمل هذه الفقرة الفقرة الأولى قليلاً: إذا احتجنا إلى تكوين قابل للتغيير ، فإننا نستخدم كيان </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">الدولة</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> الخاص </font><font style="vertical-align: inherit;">(المشار إليه فيما يلي باسم الحالة) ، والذي يصف الحالة الحالية لهذه الأداة. </font><font style="vertical-align: inherit;">ومع ذلك ، لا ترتبط الدولة بالقطعة ، ولكن بتمثيلها الأولي.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن تضمين عنصر واجهة مستخدم معين في الشجرة صفرًا أو أكثر. </font><font style="vertical-align: inherit;">على وجه الخصوص يمكن وضع عنصر واجهة مستخدم معين في الشجرة عدة مرات. </font><font style="vertical-align: inherit;">في كل مرة يتم وضع عنصر واجهة تعامل في الشجرة ، يتم نفخه في [عنصر] ، مما يعني أن عنصر واجهة تعامل مدمج في الشجرة عدة مرات سيتم تضخيمه عدة مرات.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن تضمين نفس الأداة في شجرة الأدوات عدة مرات ، أو لا يتم تضمينها على الإطلاق. </font><font style="vertical-align: inherit;">ولكن في كل مرة يتم تضمين عنصر واجهة مستخدم في شجرة عنصر واجهة المستخدم ، يتم تعيين عنصر لها. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لذا ، في هذه المرحلة ، تم تقريب الأدوات ، دعنا نلخص:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القطعة - الطبقة المركزية من التسلسل الهرمي ؛</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القطعة بعض التكوين. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">القطعة - وصف ثابت لجزء من واجهة المستخدم ؛ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يرتبط عنصر واجهة المستخدم بعنصر يتحكم في العرض بطريقة ما ؛ </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يمكن لبعض الكيانات وصف الحالة المتغيرة للأداة ، ولكنها ليست مرتبطة بالأداة ، ولكن بالعنصر الذي يمثل هذه الأداة.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">جزء</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
من ما تعلمناه ، يطرح السؤال: "ما هذه العناصر التي تحكم كل شيء؟" </font><font style="vertical-align: inherit;">افعل نفس الشيء - افتح الوثائق لفئة العنصر.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">إنشاء مثيل لـ [Widget] في موقع معين في الشجرة.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">العنصر هو بعض تمثيل القطعة في مكان معين في شجرة.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">تصف التطبيقات المصغرة كيفية تكوين شجرة فرعية ولكن يمكن استخدام نفس الأداة لتكوين أشجار فرعية متعددة في نفس الوقت لأن الأدوات غير قابلة للتغيير. </font><font style="vertical-align: inherit;">يمثل [عنصر] استخدام عنصر واجهة المستخدم لتكوين موقع محدد في الشجرة. </font><font style="vertical-align: inherit;">بمرور الوقت ، يمكن أن تتغير الأداة المصاحبة لعنصر معين ، على سبيل المثال ، إذا قامت الأداة الرئيسية بإعادة إنشاء وإنشاء أداة جديدة لهذا الموقع.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">يصف عنصر واجهة المستخدم تكوين جزء من واجهة المستخدم ، ولكن كما نعلم بالفعل ، يمكن استخدام نفس الأداة في أماكن مختلفة من الشجرة. سيتم تمثيل كل مكان من هذا القبيل من قبل عنصر المقابلة. ولكن بمرور الوقت ، قد تتغير الأداة المصاحبة للعنصر. هذا يعني أن العناصر أكثر عنادا وتستمر في استخدامها ، فقط تحديث اتصالاتها. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
هذا قرار عقلاني إلى حد ما. كما سبق أن حددنا أعلاه ، تعد الأدوات عبارة عن تكوين غير قابل للتغيير يصف ببساطة جزءًا محددًا من الواجهة ، مما يعني أنها يجب أن تكون خفيفة للغاية. والعناصر في المنطقة التي يكون التحكم فيها أثقل بكثير ، ولكن لا يتم إعادة إنشائها دون داع. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لفهم كيفية القيام بذلك ، ضع في اعتبارك دورة حياة العنصر:</font></font><br>
<br>
<ul>
<li>     Widget.createElement    ,     .</li>
<li>   mount        .              .</li>
<li>       .</li>
<li>   ,    (,    ),     .       runtimeType  key,     .   ,     ,           .</li>
<li> ,       ,    ,             ,      (  deactivate).</li>
<li>   ,     .           ,       ,   (unmount),           .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">عندما تقوم بإعادة تضمين عناصر في الشجرة ، على سبيل المثال ، إذا كان العنصر أو أسلافه يحتوي على مفتاح عام ، فستتم إزالته من قائمة العناصر غير النشطة ، وسيتم استدعاء طريقة التنشيط ، وسيتم دمج الكائن المرتبط بهذا العنصر مرة أخرى في شجرة التجسيد. </font><font style="vertical-align: inherit;">هذا يعني أن العنصر يجب أن يظهر على الشاشة مرة أخرى.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في إعلان الفئة ، نرى أن العنصر يطبق واجهة BuildContext. </font><font style="vertical-align: inherit;">BuildContext هو شيء يتحكم في موضع عنصر واجهة المستخدم في شجرة عنصر واجهة مستخدم ، كما يلي من وثائقه. </font><font style="vertical-align: inherit;">يتطابق تقريبًا مع وصف العنصر. </font><font style="vertical-align: inherit;">يتم استخدام هذه الواجهة لتجنب التلاعب المباشر للعنصر ، ولكن في نفس الوقت منح الوصول إلى أساليب السياق الضرورية. </font><font style="vertical-align: inherit;">على سبيل المثال ، findRenderObject ، الذي يسمح لك بالعثور على كائن شجرة التجسيد المطابق لهذا العنصر.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Renderderbject</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يبقى للتعامل مع الرابط الأخير لهذا الثالوث - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RenderObject</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . كما يوحي الاسم ، هذا هو كائن شجرة التصور. يحتوي على كائن أصل ، بالإضافة إلى حقل بيانات يستخدمه الكائن الأصل لتخزين معلومات محددة تتعلق بهذا الكائن نفسه ، على سبيل المثال ، موقعه. هذا الكائن مسؤول عن تنفيذ بروتوكولات العرض والتخطيط الأساسية.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لا يحد RenderObject من نموذج استخدام الكائنات الفرعية: قد لا يكون هناك شيء واحد أو أكثر. </font><font style="vertical-align: inherit;">أيضا ، لا يقتصر نظام تحديد المواقع على: النظام الديكارتي ، الإحداثيات القطبية ، كل هذا وأكثر متاحة للاستخدام. </font><font style="vertical-align: inherit;">لا توجد قيود على استخدام بروتوكولات الموقع: ضبط العرض أو الارتفاع ، تحديد الحجم ، تحديد حجم وموقع الأصل أو ، إذا لزم الأمر ، استخدام بيانات الكائن الأصل.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flutter World Picture</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
دعونا نحاول بناء صورة كبيرة لكيفية عمل كل شيء معًا. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد أشرنا من قبل إلى أن عنصر واجهة المستخدم عبارة عن وصف ثابت ، ولكن واجهة المستخدم ليست ثابتة على الإطلاق. </font><font style="vertical-align: inherit;">تتم إزالة هذا التناقض عن طريق التقسيم إلى 3 مستويات من الأشياء وتقسيم مناطق المسؤولية.</font></font><br>
<br>
<ul>
<li> ,          . </li>
<li> ,               . </li>
<li>  ,   — ,     .</li>
</ul><br>
<img src="https://habrastorage.org/webt/j_/n_/og/j_n_ogui1a0iawbuoq5vxclsnne.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
دعونا نلقي نظرة على كيف تبدو هذه الأشجار بمثال بسيط: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u7/0o/wk/u70owkgirs6krcos85rwn-acli8.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذه الحالة ، لدينا بعض StatelessWidget ملفوفة في عنصر واجهة مستخدم Padding وتحتوي على نص بداخلها. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
دعونا نضع أنفسنا مكان Flutter - لقد تم إعطاؤنا شجرة الأدوات هذه. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
رفرفة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"مهلا، الحشو، ولست بحاجة عنصر بك"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
حشوة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"بطبيعة الحال، عقد SingleChildRenderObjectElement"</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/jj/u7/zn/jju7znfat7skocfex74adc4cu7o.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
رفرفة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"العنصر، وهنا مكانك، يستقر"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
SingleChildRenderObjectElement: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"يا شباب، طيب كل شيء، ولكني في حاجة RenderObject"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
رفرفة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"الحشو، مثل لجذبك على الإطلاق؟ "</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
الحشو: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Hold it، RenderPadding"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
SingleChildRenderObjectElement: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Great، get to work"</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/zk/ty/se/zktyse7pgo6jdd6x7impyivfhy0.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Flutter:</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"إذن من التالي؟" StatelessWidget، والآن يمكنك السماح للعنصر »</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
StatelessWidget: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">« هنا StatelessElement »</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
الرفرفة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">« StatelessElement، سوف تكون في الخضوع لSingleChildRenderObjectElement، وهنا المكان، الشروع »</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
StatelessElement: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">« موافق »</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/7w/tb/ke/7wtbkebtfn_xeq1ieqxqbarpkro.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
الرفرفة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">« لRichText والحاضر elementik، الرجاء »</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
لRichText يعطي MultiChildRenderObjectElement </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
الرفرفة: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"MultiChildRenderObjectElement ، ها أنت ذا ، ابدأ"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
MultiChildRenderObjectElement: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"أحتاج إلى تقديم للعمل"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Flutter: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"RichText ، نحن بحاجة إلى كائن تقديم"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
RichText: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Here is a RenderParagraph" Flutter</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
:</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"RenderParagraph ستتلقى تعليمات RenderPadding وسيتحكم في MultiChildRenderObjectElement"</font></font></i><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
MultiChildRenderObjectElement: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"الآن كل شيء على ما يرام ، أنا جاهز"</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/s4/24/fn/s424fnivo4j2tb4sv9pcirmxov0.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
بالتأكيد ستطرح سؤالًا منطقيًا: "أين هو كائن التقديم لـ StatelessWidget ، لماذا لم يكن هناك ، قررنا أعلاه أن العناصر تربط بين التكوينات مع العرض؟ " </font><font style="vertical-align: inherit;">دعونا ننتبه إلى التنفيذ الأساسي لطريقة التحميل ، التي تمت مناقشتها في هذا القسم من وصف دورة الحياة.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">void</span> mount(Element parent, dynamic newSlot) {<font></font>
    assert(_debugLifecycleState == _ElementLifecycle.initial);<font></font>
    assert(widget != <span class="hljs-literal">null</span>);<font></font>
    assert(_parent == <span class="hljs-literal">null</span>);<font></font>
    assert(parent == <span class="hljs-literal">null</span> || parent._debugLifecycleState == _ElementLifecycle.active);<font></font>
    assert(slot == <span class="hljs-literal">null</span>);<font></font>
    assert(depth == <span class="hljs-literal">null</span>);<font></font>
    assert(!_active);<font></font>
    _parent = parent;<font></font>
    _slot = newSlot;<font></font>
    _depth = _parent != <span class="hljs-literal">null</span> ? _parent.depth + <span class="hljs-number">1</span> : <span class="hljs-number">1</span>;<font></font>
    _active = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (parent != <span class="hljs-literal">null</span>)<font></font>
        _owner = parent.owner;<font></font>
    <span class="hljs-keyword">if</span> (widget.key is GlobalKey) {<font></font>
        final GlobalKey key = widget.key;<font></font>
        key._register(<span class="hljs-keyword">this</span>);<font></font>
    }<font></font>
    _updateInheritance();<font></font>
    assert(() {<font></font>
        _debugLifecycleState = _ElementLifecycle.active;<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
    }());<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لن نرى فيه إنشاء كائن عرض. </font><font style="vertical-align: inherit;">لكن العنصر يقوم بتطبيق BuildContext ، والذي يحتوي على طريقة بحث عن كائن تصور findRenderObject ، والتي ستقودنا إلى المُشغل التالي:</font></font><br>
<br>
<pre><code class="javascript hljs">RenderObject get renderObject {<font></font>
    RenderObject result;<font></font>
    <span class="hljs-keyword">void</span> visit(Element element) {<font></font>
        assert(result == <span class="hljs-literal">null</span>); 
        <span class="hljs-keyword">if</span> (element is RenderObjectElement)<font></font>
            result = element.renderObject;<font></font>
        <span class="hljs-keyword">else</span><font></font>
            element.visitChildren(visit);<font></font>
    }<font></font>
    visit(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> result;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في الحالة الأساسية ، لا يجوز للعنصر إنشاء كائن عرض ؛ فقط RenderObjectElement ونسله مطلوبون للقيام بذلك ، ومع ذلك ، في هذه الحالة ، يجب أن يحتوي العنصر في بعض مستويات التداخل على عنصر فرعي يحتوي على كائن عرض. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يبدو لماذا كل هذه الصعوبات. ما يصل إلى 3 أشجار ، مناطق مسؤولية مختلفة ، إلخ. الجواب بسيط للغاية - هذا هو المكان الذي يتم فيه بناء أداء Flutter. الأدوات عبارة عن تكوينات غير قابلة للتغيير ، لذلك ، غالبًا ما يتم إعادة إنشائها ، ولكن في نفس الوقت فهي خفيفة الوزن تمامًا ، والتي لا تؤثر على الأداء. لكن Flutter يحاول إعادة استخدام العناصر الثقيلة قدر الإمكان. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تأمل في مثال. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">نص في منتصف الشاشة. سيبدو الرمز في هذه الحالة كالتالي:</font></font></i><br>
<br>
<pre><code class="javascript hljs">body: Center(<font></font>
    child: Text(“Hello world!”)<font></font>
),</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذه الحالة ، ستبدو شجرة الأدوات </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lc/wt/fa/lcwtfazdhkpaprcu9tqvhssvck4.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
على النحو التالي </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">بعد أن يقوم Flutter ببناء الأشجار الثلاثة ، نحصل على الصورة التالية: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/uc/vx/ph/ucvxphu5r2ds-6_kmoizgyoczo8.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ماذا يحدث إذا قمنا بتغيير النص الذي سنعرضه؟ </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_u/8b/do/_u8bdowthfzx9jshpbprfnpj1ai.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لدينا الآن شجرة القطعة الجديدة. أعلاه تحدثنا عن أقصى قدر ممكن من إعادة استخدام العناصر. نلقي نظرة على طريقة فئة القطعة ، تحت اسم الحديث يمكن </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">التحديث</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">static</span> bool canUpdate(Widget oldWidget, Widget newWidget) {
    <span class="hljs-keyword">return</span> oldWidget.runtimeType == newWidget.runtimeType &amp;&amp; oldWidget.key == newWidget.key;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
نتحقق من نوع الأداة السابقة والأخرى ، بالإضافة إلى مفاتيحها. إذا كانت هي نفسها ، فلا حاجة لتغيير العنصر. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لذا ، قبل الترقية ، العنصر الأول هو Center ، بعد الترقية ، Center أيضًا. كلاهما ليس لديهم مفاتيح ، صدفة كاملة. يمكننا تحديث ارتباط العنصر إلى عنصر واجهة مستخدم جديد. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/he/tr/s4/hetrs4cgzrimhibqeilfoja5xzi.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ولكن بالإضافة إلى النوع والمفتاح ، فإن عنصر واجهة المستخدم عبارة عن وصف وتكوين ، ويمكن أن تتغير قيم المعلمات الضرورية للعرض. هذا هو السبب في أن العنصر ، بعد تحديث الرابط إلى عنصر واجهة المستخدم ، يجب أن يبدأ التحديثات على كائن العرض. في حالة المركز ، لم يتغير شيء ، ونستمر في المقارنة أكثر. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
مرة أخرى ، يخبرنا النوع والمفتاح أنه من غير المنطقي إعادة إنشاء العنصر. النص من سلالة StatelessWidget ؛ ليس له كائن عرض مباشر.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dp/yy/6m/dpyy6mckv6cddryb0_yu5asy_uy.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
انتقل إلى RichText. لم يغير عنصر واجهة المستخدم نوعه أيضًا ، ولا توجد اختلافات في المفاتيح. يقوم العنصر بتحديث ارتباطه بعنصر واجهة المستخدم الجديد. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hw/vh/95/hwvh952jekjwhudyj6czju3hq6a.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
تم تحديث الاتصال ، يبقى فقط لتحديث الخصائص. نتيجة لذلك ، سيعرض RenderParagraph قيمة النص الجديدة. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/lv/_p/g-/lv_pg-n6wlmcmlunokumb60nqw0.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
وبمجرد أن يحين الوقت لإطار الرسم التالي ، سنرى النتيجة التي نتوقعها. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بفضل هذا النوع من العمل ، يحقق Flutter مثل هذا الأداء العالي. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
يصف المثال أعلاه الحالة عندما لا تتغير بنية الأداة نفسها. ولكن ماذا يحدث إذا تغير الهيكل؟ سيواصل Flutter ، بالطبع ، محاولة زيادة استخدام الكائنات الموجودة إلى أقصى حد ، كما فهمنا من وصف دورة الحياة ، ولكن سيتم إنشاء عناصر جديدة لجميع الأدوات الجديدة ، وسيتم حذف العناصر القديمة وغير الضرورية في نهاية الإطار.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
دعونا نلقي نظرة على بضعة أمثلة. </font><font style="vertical-align: inherit;">وللتأكد مما سبق ، نستخدم أداة Android Studio - Flutter Inspector.</font></font><br>
<br>
<pre><code class="javascript hljs">@override<font></font>
Wid<span class="hljs-keyword">get</span> <span class="hljs-title">build</span>(<span class="hljs-params">BuildContext context</span>) {
    <span class="hljs-keyword">return</span> Scaffold(<font></font>
        body: Center(<font></font>
            child: _isFirst ? first() : second(),<font></font>
        ),<font></font>
        <span class="hljs-attr">floatingActionButton</span>: FloatingActionButton(<font></font>
            child: Text(<span class="hljs-string">"Switch"</span>),
            <span class="hljs-attr">onPressed</span>: () {<font></font>
                setState(() {<font></font>
                    _isFirst = !_isFirst;<font></font>
                });<font></font>
            },<font></font>
        ),<font></font>
    );<font></font>
}<font></font>
<font></font>
Wid<span class="hljs-keyword">get</span> <span class="hljs-title">first</span>() =&gt; <span class="hljs-title">Row</span>(<span class="hljs-params">
    mainAxisAlignment: MainAxisAlignment.center,
    children: &lt;Widget&gt;[
        Text(
            <span class="hljs-string">"test"</span>,
            style: TextStyle(fontSize: <span class="hljs-number">25</span></span>),<font></font>
        ),<font></font>
        <span class="hljs-title">SizedBox</span>(<span class="hljs-params">
            width: <span class="hljs-number">5</span>,
        </span>),
        <span class="hljs-title">Icon</span>(<span class="hljs-params">
            Icons.error,
        </span>),<font></font>
    ],<font></font>
);<font></font>
<font></font>
<span class="hljs-title">Widget</span> <span class="hljs-title">second</span>() =&gt; <span class="hljs-title">Row</span>(<span class="hljs-params">
    mainAxisAlignment: MainAxisAlignment.center,
    children: &lt;Widget&gt;[
        Text(
            <span class="hljs-string">"one more test"</span>,
            style: TextStyle(fontSize: <span class="hljs-number">25</span></span>),<font></font>
        ),<font></font>
        <span class="hljs-title">Padding</span>(<span class="hljs-params">
            padding: EdgeInsets.only(left: <span class="hljs-number">5</span></span>),<font></font>
        ),<font></font>
        <span class="hljs-title">Icon</span>(<span class="hljs-params">
            Icons.error,
        </span>),<font></font>
    ],<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
في هذه الحالة ، بالضغط على الزر ، ستتغير إحدى الأدوات. </font><font style="vertical-align: inherit;">دعونا نرى ما يظهره لنا المفتش. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wi/vt/vt/wivtvtojhv4uq3l7ouoje3le-u0.png" alt="صورة"><br>
<br>
<img src="https://habrastorage.org/webt/f4/rb/0a/f4rb0avn7pombux2ct6pkap2edi.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
كما نرى ، قام Flutter بإعادة إنشاء العرض للحشو فقط ، والباقي أعيد استخدامه للتو. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ضع في اعتبارك خيارًا واحدًا آخر يتغير فيه الهيكل بطريقة أكثر عالمية - نغير مستويات التداخل.</font></font><br>
<br>
<pre><code class="javascript hljs">Wid<span class="hljs-keyword">get</span> <span class="hljs-title">second</span>() =&gt; <span class="hljs-title">Container</span>(<span class="hljs-params">child: first(</span>),);</code></pre><br>
<img src="https://habrastorage.org/webt/yt/8i/gs/yt8igsxt3r3b-ofhkrlcyjaqryc.png" alt="صورة"><br>
<br>
<img src="https://habrastorage.org/webt/j7/na/qw/j7naqwq6060sh-tw_atxna_umpa.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
على الرغم من حقيقة أن الشجرة لم تتغير بصريًا على الإطلاق ، فقد تم إعادة إنشاء عناصر وكائنات شجرة التقديم. </font><font style="vertical-align: inherit;">حدث هذا لأن Flutter يقارن حسب المستوى (في هذه الحالة ، لا يهم أن معظم الشجرة لم تتغير) ، تم غربلة هذا الجزء في وقت مقارنة الحاوية والصف. </font><font style="vertical-align: inherit;">ومع ذلك ، يمكن للمرء الخروج من هذا الوضع. </font><font style="vertical-align: inherit;">هذا سوف يساعدنا GlobalKey. </font><font style="vertical-align: inherit;">أضف مثل هذا المفتاح للصف.</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">var</span> _key = GlobalKey(debugLabel: <span class="hljs-string">"testLabel"</span>);<font></font>
<font></font>
Wid<span class="hljs-keyword">get</span> <span class="hljs-title">first</span>() =&gt; <span class="hljs-title">Row</span>(<span class="hljs-params">
    key: _key,
    …
</span>);</code></pre><br>
<img src="https://habrastorage.org/webt/gg/jp/zj/ggjpzjlpox-ijhgtwxy-i6rvcsk.png" alt="صورة"><br>
<br>
<img src="https://habrastorage.org/webt/zy/br/zy/zybrzywy-_ixs_apl7j1fiqsrco.png" alt="صورة"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
بمجرد أن أخبرنا Flutter أنه يمكن إعادة استخدام الجزء ، استغل الفرصة.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">استنتاج </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
لقد اقتربنا أكثر قليلاً من سحر Flutter ونعرف الآن أنه ليس فقط في الحاجيات. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Flutter هي آلية منسقة جيدًا ومدروسة جيدًا مع التسلسل الهرمي الخاص بها ، ومناطق المسؤولية ، والتي لا يمكنك من خلالها إنشاء تطبيقات جميلة فحسب ، بل أيضًا إنتاجية. </font><font style="vertical-align: inherit;">بالطبع ، قمنا بفحص جزء صغير فقط ، وإن كان مهمًا إلى حد ما من جهازه ، لذلك سنستمر في تحليل الجوانب المختلفة للعمل الداخلي للإطار في المقالات المستقبلية. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
آمل أن تكون المعلومات الواردة في هذه المقالة مفيدة في فهم كيفية عمل Flutter داخليًا ومساعدتك في العثور على حلول أنيقة ومنتجة أثناء التطوير. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
شكرا للانتباه!</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">مصادر</font></font></h4><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flutter </font></font></i><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"كيف يصنع Flutter Widgets" بقلم أندرو فيتز جيبون ، مات سوليفان</font></font></i></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar501850/index.html">نقوم بتفكيك خوارزمية EM إلى طوب صغير</a></li>
<li><a href="../ar501854/index.html">كيفية إنهاء البرمجة والبدء في الأداء</a></li>
<li><a href="../ar501856/index.html">تارانتول: نظرة المحلل</a></li>
<li><a href="../ar501858/index.html">وضع كل النقاط على "psi"</a></li>
<li><a href="../ar501860/index.html">15 مايو قد يضيف لك RU-Center خدمة مدفوعة بدون مشاركتك</a></li>
<li><a href="../ar501864/index.html">مساعد أو مفتش: لمن يتصل الروبوت؟</a></li>
<li><a href="../ar501866/index.html">كم عدد الوظائف الروبوتات سوف تدمر</a></li>
<li><a href="../ar501868/index.html">كيف لا تدع المحاسب يرمي نفسه أو ننقل 1C إلى السحابة. تعليمات خطوة بخطوة</a></li>
<li><a href="../ar501870/index.html">العدد الأقصى للقيم في تعداد الجزء الثاني</a></li>
<li><a href="../ar501872/index.html">مكان الدراسة في أنظمة علم التحكم الآلي</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>