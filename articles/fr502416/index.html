<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😞 🅱️ 🚊 Compléter SQL. Partie 1. La complexité de l'analyse. Histoires sur la finalisation du fichier ANTLR 🙆🏻 🙋🏾 👨🏽‍💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je publie l'article original sur Habr, dont la traduction est publiée sur le blog Codingsight .
 
 Que se passera-t-il dans cet article?
 Je travaille...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Compléter SQL. Partie 1. La complexité de l'analyse. Histoires sur la finalisation du fichier ANTLR</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502416/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je publie l'article original sur Habr, dont la traduction est publiée sur le blog </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codingsight</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Que se passera-t-il dans cet article?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je travaille dans l'entreprise depuis plus de cinq ans, qui développe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la ligne</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> IDE pour travailler avec des bases de données. Lorsque j'ai commencé à travailler sur cet article, je ne pouvais pas imaginer combien d'histoires intéressantes je pouvais me souvenir, car lorsque j'ai terminé, j'ai reçu plus de 30 pages de texte. Après un peu de réflexion, j'ai regroupé les histoires par sujet et divisé l'article en plusieurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fur et à mesure de ma publication, j'ajouterai des liens vers les parties suivantes: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Partie 1. La complexité de l'analyse. Histoires sur la finalisation d'ANTLR avec un fichier</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Partie 2. Optimisation du travail avec des chaînes et l'ouverture de fichiers </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Partie 3. Durée de vie des extensions pour Visual Studio. Travaillez avec IO. Utilisation inhabituelle de SQL </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Partie 4. Travailler avec des exceptions, l'impact des données sur le processus de développement. Utilisation de ML.NET</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beaucoup de choses intéressantes se sont produites pendant le travail: nous avons trouvé plusieurs bogues dans .NET, optimisé plusieurs fois certaines fonctions, et certaines seulement en pourcentage, fait quelque chose de très cool la première fois, et quelque chose que nous n'avons pas réussi même après quelques tentatives. </font><font style="vertical-align: inherit;">Mon équipe développe et prend en charge les fonctionnalités du langage IDE, la principale étant l'achèvement du code. </font><font style="vertical-align: inherit;">D'où le nom de la série d'articles. </font><font style="vertical-align: inherit;">Dans chacune de leurs parties, je raconterai plusieurs histoires: certaines sur les succès, d'autres sur les échecs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette partie, je me concentrerai sur les problèmes d'analyse syntaxique de SQL, la lutte contre ces problèmes et les erreurs commises dans ce combat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hg/xl/vm/hgxlvmyga2eic3ul4c_i72mrxma.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour ceux qui ne sont intéressés que par une partie de cela et juste pour une navigation facile, le contenu de l'article:</font></font><br>
<br>
<h3><u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contenu</font></font></u></h3><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qui suis je?</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelles sont les difficultés?</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Développement de bureau</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyse SQL et dialectes</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guerres de prédicat</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solutions de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vélo</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cool</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Héritage grammatical</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre post-traitement ANTLR</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erreurs</font></font></a><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyse sans arbre</font></font></a></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></a></li>
</ul><br>
<a name="Who"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Qui suis je?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je suis arrivé à ce poste en juin avec très peu d'expérience. </font><font style="vertical-align: inherit;">Comme beaucoup, je suis venu à la programmation parce que je voulais faire des jouets. </font><font style="vertical-align: inherit;">Plusieurs ont même réussi. </font><font style="vertical-align: inherit;">J'ai même écrit sur le développement d'un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Récemment, au fait, il l'a ressuscitée sur un autre serveur. Il restait une douzaine de jeux créés ou abandonnés à différents stades de préparation. En plus des jeux, avant de décrocher ce travail, j'ai réussi à réaliser plusieurs projets en freelance. Le plus important d'entre eux était l'application de médias sociaux, qui était un portail de football avec des tables de tournois, des données de joueurs et la possibilité d'informer les utilisateurs du score final ou des buts marqués par SMS. Cela a été fait il y a près de 10 ans. À cette époque, tout le monde n'était pas allé avec des smartphones, et qui se rendait plus souvent sans Internet ou avec le EDGE à trois maudits sur lequel ouvrir un site de texte n'était pas toujours possible. L'idée m'a donc semblé bonne.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'une manière ou d'une autre, il s'est avéré qu'en plus des jeux, j'étais également amené à créer différents réglages pour moi-même ou d'autres développeurs. Parfois, il était proche de ce que je devais faire au travail un peu plus tard. Par exemple, l'un des projets que j'ai réalisés en étudiant l'API Win32 était un programme mettant en évidence le code XML dans Rich Edit Control. De plus, il était possible de télécharger du code rétro-éclairé sur des codes BMP, HTML ou BB qui étaient à la mode alors sur différents forums.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre projet qui s'est avéré très proche de ce que je faisais au travail était un programme qui analyse le code C / C ++ et en construit un diagramme. L'organigramme était strictement conforme aux exigences d'un enseignant de l'université. Il a été fait maladroitement, dans le front, sans aucune connaissance de la théorie de l'analyse syntaxique, et a travaillé exclusivement sur mon caractère merdique. Quelques années plus tard, tout en nettoyant l'ordinateur de vieux déchets, je suis tombé dessus et je ne pouvais pas le retirer, alors je l'ai posté sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour l'histoire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ces expériences, couplées à du freelance, ont donné une assez bonne expérience et ont permis d'obtenir un emploi. </font><font style="vertical-align: inherit;">Au fil du temps, après une douzaine de revues trempées de sang et de larmes, je commence même à bénéficier à l'entreprise et au produit. </font><font style="vertical-align: inherit;">Revenir en arrière, c’est plutôt drôle de comprendre qu’à la suite de plusieurs accidents, j’ai commencé à faire exactement ce qui m’attirait.</font></font><br>
<a name="difficulties"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quelles sont les difficultés?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce bloc est nécessaire pour plonger le lecteur dans le contexte de ce que nous faisons réellement.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bp/sh/st/bpshstukfseasxycc6eyk1epb3s.jpeg"><br>
<a name="desktop"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Développement de bureau</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est peut-être même pas de la complexité, car c'est déjà un domaine très mature dans lequel il n'y a pas grand-chose d'inconnu, les bibliothèques sont stables, les meilleures pratiques sont connues. </font><font style="vertical-align: inherit;">Cette fonctionnalité de notre projet est ici, parce que moi, comme beaucoup d'autres programmeurs, j'ai tendance à la nouveauté, et la nouveauté a maintenant disparu sur le Web. </font><font style="vertical-align: inherit;">Il y a eu des jours où, sous la pluie, je suis monté sur le rebord de la fenêtre, recouvert d'une couverture, avec une tasse de cacao, et j'ai pensé à redis, réagir, charger et systèmes distribués qui sont développés quelque part sans moi en ce moment. </font><font style="vertical-align: inherit;">L'autre côté de ce problème est qu'il n'est pas facile de décrire la complexité du projet à des développeurs familiers par rapport à la bière, et lorsque vous travaillez sur des applications qui fonctionnent selon des lois fondamentalement différentes, cela devient encore plus difficile.</font></font><br>
<br>
<a name="dialects"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyse SQL et dialectes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai également écrit de petits analyseurs pour différentes langues avant ce travail. Pendant un certain temps, j'ai enseigné des cours .NET. Pour certains groupes, en tant que tâche supplémentaire, dans le cadre du sujet «chaîne», ils ont suggéré d'écrire leur propre analyseur JSON simple. Seuls SQL et ses variantes sont loin d'être XML ou JSON conçus pour être également compréhensibles par les analyseurs et les utilisateurs. De plus, SQL est syntaxiquement plus complexe que C / C ++, avec ses nombreuses fonctions accumulées sur une longue histoire. SQL est structuré différemment, ils ont essayé de le faire ressembler à un langage naturel, avec succès, soit dit en passant. La langue a plusieurs milliers de mots-clés (selon le dialecte). Souvent, pour distinguer une expression d'une autre, vous devez jeter un œil à deux mots ou plus (jetons). Cette approche est appelée l'anticipation. Il existe une classification des analyseurs selonjusqu'où ils peuvent regarder en avant: LA (1), LA (2) ou LA (*), ce qui signifie que l'analyseur peut regarder aussi loin que possible pour déterminer la branche correcte. Parfois, la fin facultative d'une clause à l'intérieur d'une instruction SQL coïncide avec le début d'une autre, qui est également facultative: de telles situations rendent les analyseurs beaucoup plus compliqués. T-SQL verse de l'eau dans le feu, dans lequel le point-virgule est facultatif, et la fin possible, mais non obligatoire, de certaines instructions SQL peut entrer en conflit avec le début d'autres.de telles situations compliquent grandement les analyseurs. T-SQL verse de l'eau dans le feu, dans lequel le point-virgule est facultatif, et la fin possible, mais non obligatoire, de certaines instructions SQL peut entrer en conflit avec le début d'autres.de telles situations compliquent grandement les analyseurs. T-SQL verse de l'eau dans le feu, dans lequel le point-virgule est facultatif, et la fin possible, mais non obligatoire, de certaines instructions SQL peut entrer en conflit avec le début d'autres.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous ne croyez toujours pas? Il existe un mécanisme pour décrire les langages formels à travers les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grammaires</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . La grammaire est un code dans une langue qui en décrit une autre. À partir d'une grammaire, vous pouvez souvent générer un analyseur à l'aide d'un outil. Les outils et langages de description de grammaire les plus connus sont </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YACC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANTLR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Les analyseurs générés par YACC sont utilisés directement dans les moteurs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MariaDB</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PostgreSQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Vous pouvez essayer de les prendre directement à partir de l'open source et de développer la complétion de code et d'autres fonctions basées sur l'analyse SQL basée sur eux. De plus, une telle implémentation recevrait des mises à jour gratuites en termes de développement, et l'analyseur se comporterait garanti d'être identique au moteur de base de données. Alors pourquoi utilisons-nous ANTLR? Il supporte qualitativement C # /. NET, il existe de bons outils pour travailler avec lui, sa syntaxe est beaucoup plus facile à lire et à écrire. La syntaxe ANTLR s'est avérée si pratique que Microsoft l'a récemment utilisée dans la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> officielle </font><font style="vertical-align: inherit;">C #.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revenons à ma preuve de la complexité de SQL, par rapport à d'autres langages, en termes d'analyse. Pour ce faire, je veux comparer les tailles de grammaire pour différentes langues disponibles publiquement. Dans dbForge, nous utilisons nos propres grammaires, elles sont plus complètes que celles disponibles publiquement, mais, malheureusement, sont très obstruées par des insertions de code C # pour prendre en charge différentes fonctions, plus à ce sujet dans la section «Analyse sans arborescence» dans la section «Erreurs». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici les tailles de grammaire pour différentes langues: </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - analyseur de 475 lignes + 273 lexer = 748 lignes </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - analyseur de 615 lignes + 211 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 826 lignes </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - analyseur de 1159 lignes + 433 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 1592 lignes </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 1933 lignes </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- analyseur 2515 lignes + 1189 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 3704 lignes </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T-SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 4035 lignes analyseur + 896 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyseurs lexicaux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 4931 lignes </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PL SQL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 6719 lignes analyseur + 2366 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lexer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 9085 lignes </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A la fin de certains lexers il y a une énumération des caractères Unicode dans la langue, cela est inutile dans évaluation de la complexité de la langue. J'ai pris le nombre de lignes avant de commencer de tels transferts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il peut y avoir des questions concernant la complexité de l'analyse d'une langue en fonction du nombre de lignes dans sa grammaire. Les questions peuvent également porter sur la plénitude des grammaires ouvertes par rapport à la syntaxe réelle des langues. Malgré cela, je considère toujours utile de donner ces chiffres, car l'écart est trop important.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ce n'est pas tout, car nous n'avons pas seulement besoin d'analyser plusieurs fichiers en SQL. Nous faisons un IDE, ce qui signifie que nous devons travailler sur des scripts incomplets ou invalides. Même si vous écrivez vos scripts sans erreurs, peut-être que vous les écrivez de manière incohérente, il est peu probable que le script soit valide tout au long du processus de développement. Par exemple, j'écris d'abord «SELECT FROM», après quoi je serai heureux de voir la liste des tables disponibles. Lorsque je sélectionne une table, je réorganise le chariot sur SELECT, j'appuie sur la barre d'espace et j'attends la liste des colonnes de cette table particulière. Il s'agit d'un exemple très simple, mais il montre que l'analyseur fournissant la complétion de code dans l'EDI ne peut pas planter, à l'exception de rencontrer un script non valide. Nous avons dû trouver de nombreuses astuces pour nous assurer que l'infobulle fonctionne correctement dans de nombreux scénarios de ce type,mais les utilisateurs envoient toujours différents scénarios pour travailler avec des scripts inachevés, ce qui signifie que nous devons trouver de nouvelles astuces.</font></font><br>
<a name="predicates"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guerres de prédicat</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'analyse du code, il existe parfois des situations où le mot suivant ne précise pas laquelle des deux alternatives choisir. </font><font style="vertical-align: inherit;">Parfois, il suffit de jeter un œil à un nombre strictement défini de mots à l'avance et vous pouvez certainement choisir une alternative. </font><font style="vertical-align: inherit;">Le mécanisme de résolution de ce type d'inexactitude est appelé l'anticipation ANTLR. </font><font style="vertical-align: inherit;">Dans ce cas, la méthode de l'analyseur syntaxique est construite comme une chaîne imbriquée d'if, dont chacun regarde un mot plus loin. </font><font style="vertical-align: inherit;">Ci-dessous, un exemple de grammaire générant une telle incertitude.</font></font><br>
<br>
<pre><code class="lisp hljs">rule1:<font></font>
    'a' rule2 | rule3<font></font>
    <span class="hljs-comment">;</span><font></font>
<font></font>
rule2:<font></font>
    'b' 'c' 'd'<font></font>
    <span class="hljs-comment">;</span><font></font>
<font></font>
rule3:<font></font>
    'b' 'c' 'e'<font></font>
    <span class="hljs-comment">;</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au milieu de la règle 1, ayant déjà passé le jeton 'a', l'analyseur devra regarder 2 jetons devant pour choisir la règle à suivre. Encore une fois, cette vérification se fera à l'intérieur de la règle. Cette grammaire peut être réécrite de sorte que cette anticipation n'existe pas, malheureusement la structure souffre souvent de telles optimisations, et le gain de performances est relativement peu élevé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Des mécanismes plus complexes existent pour résoudre des incertitudes plus complexes. L'un d'eux est le mécanisme de prédicat de syntaxe (synpred) dans ANTLR3.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il vient à la rescousse dans les cas où, par exemple, l'achèvement facultatif d'une clause recoupe le début de l'autre optionnel suivant. </font><font style="vertical-align: inherit;">Le prédicat, en termes ANTLR3, est la méthode générée, qui effectue un passage virtuel à travers le texte conformément à l'une des alternatives et, en cas de succès, retourne vrai, cet achèvement du prédicat est appelé réussi. </font><font style="vertical-align: inherit;">La passe virtuelle est également appelée passe de retour en arrière. </font><font style="vertical-align: inherit;">Si le prédicat a fonctionné avec succès, une véritable passe est effectuée. </font><font style="vertical-align: inherit;">Cela devient un problème lorsqu'un autre prédicat commence à l'intérieur d'un prédicat, puis une section peut être parcourue cent mille fois. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Prenons un exemple simplifié. </font><font style="vertical-align: inherit;">Il y a 3 points d'incertitude (A, B, C).</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'analyseur saisit A, se souvient de la position dans le texte, commence un passage virtuel du 1er niveau.</font></font></li>
<li>   B,    ,    2- .</li>
<li>   C,    ,    3- .</li>
<li>     3- ,   2    .</li>
<li>     2 ,   1   B   .</li>
<li>    ,       A, B  .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, tous les contrôles à l'intérieur de C seront effectués 4 fois, B - 3 fois, A - 2 fois. Mais que faire si l'alternative appropriée est deuxième ou troisième de la liste? Ensuite, à un certain stade de l'un des prédicats, il échouera, la position dans le texte sera annulée et un autre prédicat commencera à s'exécuter. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En analysant à plusieurs reprises la cause du gel de l'application, nous sommes tombés sur des cas où la «queue» synpred a été exécutée plusieurs milliers de fois. Les synpreds sont particulièrement problématiques dans les règles récursives. Malheureusement, de par sa nature, SQL est récursif, ce qui est au moins la possibilité d'utiliser une sous-requête presque partout. Parfois, à l'aide de divers trucs et astuces, il s'avère que la règle est éliminée de sorte que le prédicat a disparu.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De toute évidence, synpred a un effet négatif sur les performances. À un moment donné, il a fallu mettre leur population sous contrôle strict. Le seul problème est que lors de l'écriture de code de grammaire, l'apparence de synpred peut ne pas être évidente. De plus, parfois, un changement dans une règle entraîne l'apparition d'un prédicat dans une autre. Cela ne peut pas être contrôlé manuellement. Pour contrôler le nombre de prédicats, nous avons écrit un simple régulier, qui a été appelé par une tâche MsBuild spéciale. Si le nombre de prédicats était différent du nombre spécifié dans un fichier séparé, la tâche a interrompu l'assembly et signalé une erreur. Voyant une telle erreur, le développeur a dû réécrire le code de règle plusieurs fois, essayant de se débarrasser des prédicats inutiles, impliquant éventuellement d'autres développeurs dans le problème. Si un prédicat est inévitable,puis le développeur met à jour le nombre de prédicats dans le fichier correspondant. Une modification de ce fichier attire davantage l'attention sur la révision.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans de rares cas, nous avons même écrit nos propres prédicats en C # pour contourner ceux générés par ANTLR. </font><font style="vertical-align: inherit;">Heureusement, un tel mécanisme existe également.</font></font><br>
<a name="bikes"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solutions de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vélo</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cool</font></font></h2><br>
<img src="https://habrastorage.org/webt/r2/sr/zk/r2srzksxi_3aseqm2bv50nwjfby.jpeg"><br>
<a name="inheritance"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Héritage grammatical</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après l'annonce de tout changement dans chacun des SGBD que nous prenons en charge, notre travail pour les prendre en charge commence. Presque toujours, le point de départ est de prendre en charge les constructions syntaxiques dans la grammaire. Pour chaque dialecte SQL, nous écrivons notre propre grammaire, cela génère une certaine répétition du code, mais finalement c'est plus facile que de chercher un commun entre eux. Il y a quelques années à peine, MySQL et MariaDB étaient très similaires, il n'était pas pratique d'écrire des grammaires séparées. Parce que ces quelques constructions qui étaient dans MariaDB, mais qui n'étaient pas dans MySQL, nous avons pris en charge dans la grammaire MySQL. Ce fut un moment désagréable: pour l'utilisateur MySQL, nous pouvions suggérer des constructions qui ne seraient pas valides. Ces dernières années, MariaDB et MySQL sont devenus très divergents en termes de syntaxe et plus encore. Il est devenu évidentqu'il est faux de prendre en charge deux langues différentes dans la même grammaire.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une solution possible pourrait être une copie complète de la grammaire, après quoi chacune est prise en charge séparément. À la suite d'une longue discussion, nous avons pris une décision audacieuse. Je suis très content que nous n'ayons pas copié le code, chaque cellule en moi a résisté à cette décision. Il a été décidé d'écrire votre propre préprocesseur de grammaire ANTLR, qui implémente le mécanisme d'héritage grammatical. Il y a quelque temps, je suis tombé sur une grammaire ANTLR3 dans le référentiel officiel des grammaires ANTLR4. Je pense que cette phrase doit être lue plusieurs fois pour réaliser la profondeur de la folie.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En discutant de l'idée d'hérédité, nous avons rapidement réalisé que nous aimerions avoir un mécanisme pour le polymorphisme. La capacité dans la grammaire de l'héritier non seulement de redéfinir la règle, mais aussi d'appeler la base. De plus, je veux contrôler la position de l'appel de la règle de base: début, milieu ou fin. Nous avons décidé que toutes les règles peuvent être redéfinies, pour cela vous n'avez pas besoin de spécifier quoi que ce soit de plus. Pour redéfinir une règle, il suffit de déclarer une règle du même nom dans la grammaire suivante. Après cela, la règle de la grammaire parent sera disponible sous un nom différent.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ANTLR est un outil de développement agréable en optimisant - il existe une extension pour VS, il y a ANTLRWorks. En introduisant le mécanisme d'héritage, je ne voudrais pas perdre cette opportunité. Mais comment alors indiquer la grammaire de base? Vous pouvez trouver une sorte de convention pour nommer les fichiers, mais ce n'est pas du tout évident. Une autre option pourrait être d'indiquer ces informations supplémentaires dans un fichier séparé, mais même maintenant, en tapant ces lignes, je sentais la puanteur de cette solution. Le résultat était une indication de la grammaire de base dans la grammaire de l'héritier sous la forme d'un commentaire ANTLR. Tous les outils ignoreront simplement ce texte, et nous pouvons facilement extraire le code qui nous intéresse.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les exigences ont été formées, il est temps de les mettre en œuvre. Nous avons écrit la tâche MsBuild, qui a été intégrée au système de build général en tant qu'action de pré-build. La tâche a effectué le travail du préprocesseur de grammaire ANTLR, générant la grammaire résultante à partir de la base et héritée. La grammaire résultante a déjà été traitée par ANTLR lui-même. Si une règle portant le même nom que dans le parent a été trouvée dans la grammaire suivante, la règle de base a été renommée: le nom de la grammaire parent a été ajouté à son nom après le trait de soulignement. Par ce nom, il pouvait être contacté chez l'héritier.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mécanisme du préprocesseur lui-même n'a pas pris beaucoup de temps, mais avec la génération de l'analyseur, il s'est avéré qu'il ralentissait chaque réassemblage du projet de 10 à 20 secondes. </font><font style="vertical-align: inherit;">À un moment donné, cela a cessé de nous convenir. </font><font style="vertical-align: inherit;">Nous avons décidé de réfléchir à la manière d'optimiser cela. </font><font style="vertical-align: inherit;">La solution a été d'ajouter le hachage de la somme de toutes les grammaires dont il dépend sous forme de commentaire à l'en-tête du fichier analyseur CS. </font><font style="vertical-align: inherit;">Avant de faire quoi que ce soit, le préprocesseur a comparé ces hachages avec les hachages de fichiers sur le disque, et s'ils ne diffèrent pas, le fichier analyseur a été considéré comme pertinent. </font><font style="vertical-align: inherit;">Au stade de développement initial, nous avons dû marcher plusieurs fois sur le rake d'analyseurs et de grammaires invalides collectés par la version obsolète du préprocesseur. </font><font style="vertical-align: inherit;">Par conséquent, la somme de hachage de l'assembly avec le préprocesseur est apparue dans le commentaire d'en-tête.</font></font><br>
<a name="postprocessing"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un autre post-traitement ANTLR</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans de nombreux langages de programmation, si le mot est la clé, il ne peut plus être utilisé comme nom d'objet. En SQL, selon le dialecte, de 800 à 3000 mots-clés. La plupart d'entre eux sont étroitement liés au domaine, en outre, ils n'ont pas tous été introduits immédiatement, de sorte qu'une interdiction de les utiliser tous comme noms d'objet se heurterait à une vague d'indignation. SQL introduit le concept de mots clés réservés et non réservés. Vous ne pouvez pas nommer un objet de la même manière qu'un mot clé réservé (SELECT, FROM, etc.) sans le citer, car ce n'est pas un mot clé réservé (CONVERSATION, DISPONIBILITÉ, etc.) - vous le pouvez. Ce comportement complique le développement de l'analyseur. Au moment de l'analyse lexicale, le contexte est inconnu, mais l'analyseur requiert des numéros différents pour l'identifiant et le mot-clé. Pour résoudre ce problème, nous avons ajouté un post-traitement supplémentaire à l'analyseur ANTLR.Le post-traitement remplace toutes les vérifications explicites par un identifiant, avec un appel à une méthode spéciale. Cette méthode implémente une vérification plus délicate. Si un identifiant est entré et qu'un identifiant est attendu plus loin, alors tout va bien, mais si un mot clé non réservé est fourni à l'entrée, il doit être vérifié en plus. Une vérification supplémentaire est que la méthode est examinée dans le contexte actuel dans la recherche de branches, où ce mot-clé non réservé peut être utilisé précisément comme mot-clé, et s'il n'y a pas de telles branches, alors il peut être utilisé comme identifiant.mais si un mot clé non réservé est entré, il doit être vérifié en plus. Une vérification supplémentaire est que la méthode est examinée dans le contexte actuel dans la recherche de branches, où ce mot-clé non réservé peut être utilisé précisément comme mot-clé, et s'il n'y a pas de telles branches, alors il peut être utilisé comme identifiant.mais si un mot clé non réservé est entré, il doit être vérifié en plus. Une vérification supplémentaire est que la méthode est examinée dans le contexte actuel dans la recherche de branches, où ce mot-clé non réservé peut être utilisé précisément comme mot-clé, et s'il n'y a pas de telles branches, alors il peut être utilisé comme identifiant.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À strictement parler, ce problème ne peut être résolu qu'au moyen d'ANTLR, mais une telle solution ne sera pas optimale. </font><font style="vertical-align: inherit;">Une solution classique à ce problème consiste à créer une règle qui répertorie tous les mots clés non réservés et un jeton d'identification. </font><font style="vertical-align: inherit;">De plus, partout où il est permis d'utiliser un identifiant, il n'est plus utilisé le jeton identifiant de l'identifiant, mais il s'agit d'une règle spéciale. </font><font style="vertical-align: inherit;">Une telle solution vous fait non seulement penser à ajouter le mot-clé lorsque vous le saisissez, non seulement là où il est utilisé, mais également dans cette règle spéciale, cela fonctionne également beaucoup plus lentement.</font></font><br>
<a name="mistakes"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erreurs</font></font></h2><br>
<a name="trees"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyse sans arbre</font></font></h3><br>
<img src="https://habrastorage.org/webt/g1/ty/qw/g1tyqwxs43omgbkeozhr5ygvxw0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat de l'analyseur, en règle générale, est un arbre de syntaxe. </font><font style="vertical-align: inherit;">Un arbre de syntaxe ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abstrait</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">concret</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) est une structure de données qui reflète le texte du programme à travers le prisme de la grammaire formelle. </font><font style="vertical-align: inherit;">Si vous souhaitez implémenter un éditeur de code avec saisie semi-automatique pour la langue que vous avez récemment trouvée, après avoir étudié le problème, vous êtes susceptible d'implémenter approximativement l'algorithme suivant:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyser le texte dans l'éditeur. </font><font style="vertical-align: inherit;">Obtenez l'arbre de syntaxe.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trouvez le nœud sous le chariot. </font><font style="vertical-align: inherit;">Associez-le à la grammaire. </font><font style="vertical-align: inherit;">Découvrez quels mots-clés et types d'objets seront disponibles sur le point.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, la grammaire est représentée de manière pratique sous la forme d'un graphique ou d'une machine à états finis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, au début du développement, l'IDE ANTLR existait dans sa troisième version. La quatrième version a été réécrite à partir de zéro et est fondamentalement différente de la troisième; en passant le code, l'analyseur génèrera automatiquement un arbre d'analyse sans une seule ligne supplémentaire. Dans la troisième version, il y avait un mécanisme par lequel on pouvait dire à ANTLR comment construire un arbre, mais ce n'était pas très agréable de l'utiliser. De plus, de nombreux exemples et articles sur ce sujet suggèrent d'utiliser le mécanisme d'actions pour exécuter du code au moment où l'analyseur passe la règle. Ce mécanisme est incroyablement pratique et vous permet d'obtenir rapidement des résultats. Malheureusement, cette solution a entraîné des problèmes architecturaux majeurs avec le développement du produit et une augmentation de la complexité de la prise en charge de nouvelles fonctionnalités. Le fait est que dans un fichier, dans un fichier de grammaire,les actions ont commencé à s'accumuler associées à un grand nombre de fonctionnalités différentes, ce qui serait bien de se propager à différents assemblages. À l'avenir, nous avons pu distribuer les gestionnaires des actions eux-mêmes pour différents assemblages, mettant en œuvre une version assez délicate du modèle d'abonné-notifiant, mais les appels eux-mêmes, avec la transmission des informations nécessaires, encombrent toujours notre grammaire, compliquent le support de nouvelles fonctionnalités et imposent des restrictions sérieuses et désagréables à l'architecture.compliquer le support de nouvelles fonctionnalités et imposer des restrictions sérieuses et désagréables à l'architecture.compliquer le support de nouvelles fonctionnalités et imposer des restrictions sérieuses et désagréables à l'architecture.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais tout n'est pas aussi évident qu'il y paraît. </font><font style="vertical-align: inherit;">Le fait est que ANTLR3 est beaucoup plus rapide que ANTLR4. </font><font style="vertical-align: inherit;">Selon nos mesures, les différences sont environ 6 fois. </font><font style="vertical-align: inherit;">De plus, l'arborescence de syntaxe pour les gros scripts peut prendre beaucoup d'espace RAM, et tant que nous devons survivre dans l'espace d'adressage 32 bits des studios Visual et SqlServer Management, cela peut être critique.</font></font><br>
<a name="end"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les sous-totaux peuvent être les suivants:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANTLR un outil puissant pour construire des analyseurs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Son avantage sur les autres est les outils, la syntaxe pratique, un grand nombre de langues prises en charge</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ANTLR4 a été réécrit à partir de zéro et implique de travailler avec l'analyseur différent de la troisième version</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Il y a toujours un moyen d'obtenir un peu plus des bibliothèques ThirdParty qu'elles n'en donnent</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langage spécifique à SQL, construire des analyseurs n'est pas une tâche facile</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'analyse du code pour les tâches liées à la construction d'un IDE a ses propres particularités: vous devez envisager de travailler sur des scripts non chiffrés ou invalides</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rendez-vous dans la prochaine partie!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr502406/index.html">Antiquités: une seconde approche de la vidéo VHS, stéréo stéréo et savonneuse</a></li>
<li><a href="../fr502408/index.html">Fakes et théories du complot. Comment ne pas devenir fou et sauver les autres?</a></li>
<li><a href="../fr502410/index.html">29e lancement réussi de l'année. ETATS-UNIS. Lancement militaire. "Space Plane" X-37</a></li>
<li><a href="../fr502412/index.html">Guilloche d'une manière différente</a></li>
<li><a href="../fr502414/index.html">FOSS News n ° 16 - une revue des logiciels libres et open source du 11 au 17 mai 2020</a></li>
<li><a href="../fr502418/index.html">Moniteur d'images 3D</a></li>
<li><a href="../fr502420/index.html">Découvertes CSS intéressantes dans la conception de Twitter</a></li>
<li><a href="../fr502432/index.html">Le condensé de matières fraîches du monde du front-end de la dernière semaine n ° 415 (11-17 mai 2020)</a></li>
<li><a href="../fr502436/index.html">CI TeamCity - Automatisation des processus de construction de tests Android et UI</a></li>
<li><a href="../fr502438/index.html">Matériel Python. Cartes personnalisées avec effets OpenGL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>