<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🎤 📉 🎑 コボットDobot M1と連携します 🐍 🍩 🐮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1年前のHabré で、デスクトップロボットDobot Magicianのレビューが公開されました。この記事では、兄のDobot M1の動作を評価することを提案します。また、プロジェクトでこの特定のモデルを選択した理由を説明しようとします。Qt/ c ++でのデモの開発プロセス、および開発プロセス中...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>コボットDobot M1と連携します</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467407/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1年前のHabré </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デスクトップロボット</font><font style="vertical-align: inherit;">Dobot Magicianの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">レビューが</font></a><font style="vertical-align: inherit;">公開されました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">この記事では、兄のDobot M1の動作を評価することを提案します。</font><font style="vertical-align: inherit;">また、プロジェクトでこの特定のモデルを選択した理由を説明しようとします。Qt/ c ++でのデモの開発プロセス、および開発プロセス中に遭遇したいくつかの不愉快な瞬間について説明します。</font></font><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
今年、私は最も一般的な研究所の1つで働いていました。最初は、すべてが非常にカジュアルで、今年は興味深いことは何も約束されませんでした。ある日、集会で太陽電池のタイル張りのアセンブリ（屋根板太陽電池）を作成する方法についての議論が始まりました。このアプローチは新しいものではない、と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼らは言う</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、これは宇宙衛星用のパネルを組み立てる最初の方法の1つです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事や特許を見たことがないので、これがどれほど本当かはわかりません。しかし、この決定への国民の関心は高まっています。これは、数年前にSunPowerが新しい</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">シリーズ</font></a><font style="vertical-align: inherit;">を発表したことも一因</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。太陽光発電の世界で起こったのは、サンパワーが何かをしているので、誰もがこのこともしなければならないということです。ありました。すべてが簡単です。基板を準備し、それらをストリップにカットして組み立てます。その時、私は自分の手には特に均一性の違いがなかったので、個人的には絶対に手動で何も収集しないだろうと述べました。それ以外の場合、結果は</font><font style="vertical-align: inherit;">YouTubeの</font><font style="vertical-align: inherit;">1つの</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビデオの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ようなものになる可能性があります</font><font style="vertical-align: inherit;">。結局のところ、私たちは組織全体です。私たちが本当に何かをするなら、それはそれほど集団農場ではありません。私はロボットを購入して希望のプロセスに合わせて構成することを提案し、彼らは私に許可を与えました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
簡単に始めてミニパネルを集めることにしたことに注意してください。ミニパネルは、標準よりも小さい任意のソーラーパネルです。これは、技術プロセスを解決するために行われます。最初に、2 x 2のパネルへのスケーリング計画を備えた1つの標準的な太陽電池のサイズのパネルに導かれました。1つの太陽電池の側面のサイズは16 cmです。したがって、32 x 32 cmのアクセスフィールドでロボットが必要でした。より正確な精度が必要で、価格が安かったです。そこで、検索バーを装備して、文章の勉強を始めました。このプロジェクトでは6軸は必要なく、4軸で十分であると判断したので、傷のようなロボットに選択肢を絞りました。産業用ロボットの購入には、安全な作業スペースの設計やアプリケーションエンジニアの設置場所への派遣などの追加費用が伴うことがわかりました。あなたのタスクのためにロボットをプログラムします。良い産業用ロボットは原理的には高価であり、エンジニアのサービスはさらに値札を上げるでしょう、さらに、プロジェクトを自分で実装することは興味深いものでした。したがって、選択肢は、セキュリティ要件が低く、セルフプロトタイピングに適したコボット、協調ロボットに絞り込まれました。それで、私はすぐにDobot会社を見つけました。サイズと精度が100ミクロンなので、すぐにDobot Magicianを落としました。私は彼らにスペックを与え、どこで買うべきかを言うためのリクエストを書きました。 APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけ、VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。優れた産業用ロボットは原則として高価であり、エンジニアのサービスはさらに値札を上げるでしょう、さらに、プロジェクトを自分で実装することは興味深いものでした。したがって、選択肢は、セキュリティ要件が低く、セルフプロトタイピングに適したコボット、協調ロボットに絞り込まれました。それで、私はすぐにDobot会社を見つけました。サイズと精度が100ミクロンなので、すぐにDobot Magicianを落としました。私は彼らにスペックを与え、どこで買うべきかを言うためのリクエストを書きました。 APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけました。VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。良い産業用ロボットは原理的には高価であり、エンジニアのサービスはさらに値札を上げるでしょう、さらに、プロジェクトを自分で実装することは興味深いものでした。そのため、セキュリティ要件が低く、セルフプロトタイピングに適したコボット、協調ロボットに選択肢が絞り込まれました。それで、私はすぐにDobot会社を見つけました。サイズと精度が100ミクロンなので、すぐにDobot Magicianを落としました。私は彼らにスペックを与え、どこで買うべきかを言うためのリクエストを書きました。 APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけ、VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。また、自分でプロジェクトを実装するのも面白かったです。そのため、セキュリティ要件が低く、セルフプロトタイピングに適したコボット、協調ロボットに選択肢が絞り込まれました。それで、私はすぐにDobot会社を見つけました。サイズと精度が100ミクロンなので、すぐにDobot Magicianを落としました。私は彼らにスペックを与え、どこで買うべきかを言うためのリクエストを書きました。 APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけ、VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。また、自分でプロジェクトを実装するのも面白かったです。したがって、選択肢は、セキュリティ要件が低く、セルフプロトタイピングに適したコボット、協調ロボットに絞り込まれました。それで、私はすぐにDobot会社を見つけました。サイズと精度が100ミクロンなので、すぐにDobot Magicianを落としました。私は彼らにスペックを与え、どこで買うべきかを言うためのリクエストを書きました。 APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけ、VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。セキュリティ要件が低く、セルフプロトタイピングに適しています。それで、私はすぐにDobot会社を見つけました。サイズと精度が100ミクロンなので、すぐにDobot Magicianを落としました。私は彼らにスペックを与え、どこで買うべきかを言うためのリクエストを書きました。 APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけました。VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。セキュリティ要件が低く、セルフプロトタイピングに適しています。それで、私はすぐにDobot会社を見つけました。サイズと精度が100ミクロンなので、すぐにDobot Magicianを落としました。私は彼らにスペックを与え、どこで買うべきかを言うためのリクエストを書きました。 APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけ、VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけました。VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。APIにはAPIがあり、C ++でプログラムできることがわかりました。それは私に適していましたが、直接購入することはできませんでした。幸いなことに、私はオランダからサプライヤーを1人見つけ、VATで2個を8700ユーロで中国からの配達で販売し、同時にすべての通関手続きを引き継ぎました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">良さの特徴</font></font></h1><br>
<img src="https://habrastorage.org/webt/eq/li/v_/eqliv_l21t5_qnph5vis0kjci9m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dobot M1は、手頃な価格のプロフェッショナル4軸協調ロボットとして位置付けられています。</font><font style="vertical-align: inherit;">最大1.5 kgの負荷（テストされていません）に耐えることができ、最大400 mm（すべての場所ではありません）の範囲と最大20ミクロン（チェック済み）の精度があります。</font><font style="vertical-align: inherit;">優しさのワークスペースを下図に示します。</font><font style="vertical-align: inherit;">設計上の特徴により、半径15センチ弱のブラインドゾーンが正面にあることに気づくことは難しくありません。</font><font style="vertical-align: inherit;">さらに、この空間マップは手の向きを考慮していません。</font><font style="vertical-align: inherit;">Dobotは右利きでも左利きでもかまいませんが、追加のキャリブレーションをせずに外出先でこれを切り替える方法についてはまだわかりません。</font><font style="vertical-align: inherit;">デフォルトでは、Dobotは右利きです。つまり、最初のジョイントが右を向いている場合、右ゾーンは2番目のジョイントのアクセス領域によって制限されます。</font><font style="vertical-align: inherit;">したがって、ワークスペースの実際の面積は、公式の図面に示されているものの約2/3です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qf/bv/dp/qfbvdpisi2sc2pbc62vg38miyko.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GoodnessにはI / Oポートがあります。デジタル入力と24 Vレベルの出力（デフォルトレベルは高）、およびアナログ入力です。どんなADCがあるのか​​、わかりません。ポートは、スタンドの背面パネルと手元にあり、ノズルを操作できます。腕のコネクターの写真を忘れていましたが、これはCAAの一種です。追加料金を購入できる拡張インターフェースもあります。 Dobotは、RS-232またはネットワーク経由でPCに接続します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wx/jp/tx/wxjptxd8lxcgzk7z7orkbmi-hri.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ハウジングの材料：ポリカーボネート、明らかに、黒で塗装された金属製のスタンド。このデザインは高級感だけでなく、職人技も感じさせます。満載の1つとベースに1つ購入しました。レーザーノズルと3Dプリントはテストしていません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
優しさの良さをテストするために、会社のウェブサイトからダウンロードしたWindows用のM1Studioプログラムを使用しました。</font><font style="vertical-align: inherit;">しかし、それだけです。</font><font style="vertical-align: inherit;">さらに、api、Qt、および基本的なハチを備えたワークステーションで武装して、私はいくつかのdosで動作するデモを書くために座りました。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">デモを書いています</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
実際、デモはすでに</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">githubで</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入手できます</font><font style="vertical-align: inherit;">。 APIおよび通信プロトコルのドキュメントは、製造元のWebサイトからダウンロードできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、APIのSearchDobot（）メソッドを使用しましたが、これはLinuxでは何も出力せず、dobotがRS-232経由で接続されている場合にのみWindowsで機能しました。 M1Studiyaがネットワーク上でdobotovを完全に定義しているため、これは奇妙です。既知のIPアドレスでは、ConnectDobot（）メソッドは問題なく機能します。大丈夫だと思いました。ルーターをセットアップし、IPアドレスをポピーにアタッチします。翌日、優しさが反応しないことに驚きました。オンにすると、Dobotはランダムなポピーアドレスを持っていることがわかりました。これはファームウェアのそのような機能であり、5月の新しいバージョンで修正されましたが、私はインストールを恐れていました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ネットワークパケットを分析するためのプログラムで武装して、Dobotがポート6000へのUDP要求に、モデルDobot番号を含むテキストを含む「WhoisDobotM1」UDP応答で応答することを発見しました。これに基づいて、サブネット全体にリクエストを送信し、応答の場合は親切性を初期化するカスタムメソッドが作成されました。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MainWindow::on_buttonSearch_clicked</span><span class="hljs-params">()</span>
</span>{<font></font>
    QHostAddress host;<font></font>
<font></font>
    QList&lt;QHostAddress&gt; <span class="hljs-built_in">list</span> = QNetworkInterface::allAddresses();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-built_in">list</span>.count(); i++) {
        <span class="hljs-keyword">if</span> ((!<span class="hljs-built_in">list</span>.at(i).isLoopback()) &amp;&amp; (<span class="hljs-built_in">list</span>.at(i).protocol() == QAbstractSocket::IPv4Protocol))<font></font>
            host = <span class="hljs-built_in">list</span>.at(i);<font></font>
    }<font></font>
<font></font>
    QString subnet = host.toString().section(<span class="hljs-string">'.'</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>) + <span class="hljs-string">"."</span>;<font></font>
<font></font>
    QByteArray data = <span class="hljs-string">"WhoisDobotM1"</span>;<font></font>
<font></font>
    QUdpSocket udpSocketSend;<font></font>
<font></font>
    udpSocketSend.writeDatagram(data);<span class="hljs-comment">//need tocall it otherwise in Win get socket doesn't open</span>
    udpSocketSend.bind(host, <span class="hljs-number">54321</span>, QAbstractSocket::ShareAddress);<font></font>
<font></font>
    udpSocketGet.bind(host, udpSocketSend.localPort(), QAbstractSocket::ShareAddress);<font></font>
    connect(&amp;udpSocketGet, &amp;QUdpSocket::readyRead, <span class="hljs-keyword">this</span>, &amp;MainWindow::readUdpData);<font></font>
<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>; i&lt;<span class="hljs-number">255</span>; i++)<font></font>
        udpSocketSend.writeDatagram(data, <span class="hljs-number">32</span>, QHostAddress(subnet + QString::number(i)), <span class="hljs-number">6000</span>);<font></font>
}<font></font>
</code></pre><br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MainWindow::readUdpData</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">while</span> (udpSocketGet.hasPendingDatagrams()) {<font></font>
        QNetworkDatagram data = udpSocketGet.receiveDatagram();<font></font>
        QByteArray ip = data.senderAddress().toString().toUtf8();<font></font>
        QString name = QString(data.data()).section(<span class="hljs-string">'_'</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>); <span class="hljs-comment">// cuts "dobotM1" from "dobotM1_Dobot M1_0033\x00"</span>
        <span class="hljs-keyword">if</span> (name == <span class="hljs-string">"dobotM1"</span>) {<font></font>
            MyDobot* a = <span class="hljs-keyword">new</span> MyDobot();<font></font>
            dobot-&gt;push_back(a);<font></font>
            dobot-&gt;last()-&gt;initDobot(ip);<font></font>
            ui-&gt;listDobots-&gt;addItem(ip);<font></font>
            on_listDobots_activated(ui-&gt;listDobots-&gt;currentIndex());<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
デモインターフェイスは非常にシンプルで、下の図に示されています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/p1/t1/ym/p1t1ym-u5v1th1j0qwacwvrc3w8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
優しさを初期化して制御するために、私は必要な機能を実装したクラスを作成しました：軸制御、直線および曲線内の点から点への移動、初期位置への戻り、エアポンプの制御、および位置とエラーの監視。交代しましょう。クラスが初期化されると、親切のIPアドレスが変数に格納され、クラスへの最初の接続が発生し、キューが空であってもコマンドのキュー全体がクリーンアップされ、モーターの加速と速度のパラメーターが設定されます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyDobot</span> :</span> <span class="hljs-keyword">public</span> QObject<font></font>
{<font></font>
    Q_OBJECT<font></font>
<font></font>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">MyDobot</span><span class="hljs-params">(QObject *parent = <span class="hljs-literal">nullptr</span>)</span></span>;<font></font>
    ~MyDobot();<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initDobot</span><span class="hljs-params">(QByteArray IPaddress)</span></span>;
    <span class="hljs-function">Pose <span class="hljs-title">getCurrentPosition</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">goHomeSafe</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">goHome</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">goSafe</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">goPosition</span><span class="hljs-params">(<span class="hljs-keyword">float</span> x, <span class="hljs-keyword">float</span> y, <span class="hljs-keyword">float</span> z, <span class="hljs-keyword">float</span> r)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">goPositionStraight</span><span class="hljs-params">(<span class="hljs-keyword">float</span> x, <span class="hljs-keyword">float</span> y, <span class="hljs-keyword">float</span> z, <span class="hljs-keyword">float</span> r)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">goJog</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span></span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setAirPump</span><span class="hljs-params">(<span class="hljs-keyword">int</span> status, <span class="hljs-keyword">int</span> direction)</span></span>; <span class="hljs-comment">//status 1 off 0 on; direction 0 suck 1 push</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setOutput</span><span class="hljs-params">(<span class="hljs-keyword">uint8_t</span> address, <span class="hljs-keyword">uint8_t</span> level)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setMotor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> velocity, <span class="hljs-keyword">int</span> acceleration)</span></span>;<font></font>
<font></font>
    <span class="hljs-function">alarmState <span class="hljs-title">getAlarms</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">clearAlarms</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">clearQueue</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-function">QString <span class="hljs-title">getName</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
<span class="hljs-keyword">public</span> slots:<font></font>
<font></font>
<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">char</span> deviceSN[<span class="hljs-number">64</span>];
    <span class="hljs-keyword">char</span> deviceName[<span class="hljs-number">64</span>];<font></font>
    QByteArray thisDobotIP;<font></font>
    Pose currentPosition, futurePosition;<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は、クラスの要素を持つベクターを使用して、その数が1より大きい場合にDobotを制御することにしました。ベクターの各要素には、DobotのIPアドレスを格納する変数があります。なぜならライブラリは1つで、いくつかのdobotovがあり、クラスの各メソッドでは、最初に特定のdobotに接続するメソッドを呼び出す必要があります。曲がって見えるかもしれませんが、すべて内部にあり、このクラスでの作業は非常に便利です。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">MyDobot::setAirPump</span><span class="hljs-params">(<span class="hljs-keyword">int</span> status, <span class="hljs-keyword">int</span> direction)</span>
</span>{<font></font>
    ConnectDobot(thisDobotIP, <span class="hljs-number">115200</span>, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);<font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
API Goodnessのポイントからポイントへの移動は、いくつかの方法で実装されます：直線、曲線、および私が覚えていない他の方法で。次の図は、2点間の2つの軌跡を示しています。 1つは直線で、デバイスを適切に調整すると、前後に移動しても分岐しません。優しさのファームウェアがモーターを順次調整して目的の座標を実現するため、2番目の軌跡は得られる曲線です。直線での移動は常に可能であるとは限らないことに注意してください。関節の位置によっては、直線でA点からB点に到達できない場合があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/px/i2/ke/pxi2keh8edb25v9jos_b508trha.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dobot位置監視は、Qtimerクラスを使用して実装されます。Qtimer::タイムアウト信号は、MainWindow :: on_getPoseTimerメソッドに関連付けられています。私が認めなければならないのは、これはまあまあのソリューションです。なぜなら、1000ミリ秒のタイムアウトを設定した場合にのみ、upsを使用したアプリケーションの応答作業が可能だからです。タイミングが短いと、アップを管理するときにジャークが感じられ始めます。私は、コマンドを受信したときにdobotがしばらくの間愚かになることがあることに気付きました。コマンドを頻繁に送信すると、愚かになる確率が高くなります。これはおそらく、このデモでは不必要に思えるかもしれないConnectDobotへの絶え間ない呼び出しが原因ですが、デモはメインプロジェクトと並行して記述されており、メインプロジェクトでは本当にそのような実装が必要です。ただし、接続を監視することが毎回呼び出されるわけではありませんが、一時停止の問題は残ります。残念ながら、タイムアウトが1秒の場合、空間内の優しさの位置をスムーズに測定できません。たとえば、M1 Studioに実装されていますが、これは重要ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同じ方法で、エラーの要求が発生します。 APIの親切では、エラーコードの送信は、AlarmState構造を介して実装されます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">alarmState</span> {</span>
    <span class="hljs-keyword">uint8_t</span> value[<span class="hljs-number">32</span>];<font></font>
};<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この構造は8ビット要素の配列であり、エラーコードは配列のいくつかの要素の1つのバイナリ表現でエンコードされます。エラーコードを計算するには、要素で「1」を見つけ、値の配列の前にその排出数（単位）を8 * n要素（他のエラーを含むか含まない）に追加する必要があります。はい、一度に複数の間違いが発生する可能性があります。次に、エラーコードをドキュメントに記載する必要があります。ドキュメントは、製造元のWebサイトからダウンロードできます。 pdfkの内容がテキストファイルにコピーされ、リソースとしてプロジェクトにボルトで固定されました。エラーコードが8 * 32と異なる場合（つまり、エラーがない場合）、このコードはエラーフィールドに表示され、[アラーム]ボタンをクリックすると、その説明がファイルで解析され、テキストフィールドに表示されます。ちなみに、エラーのデコードと解析はupsを制御するクラスの外で行われます。今のところ、それはまったく正しい考えではないようです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
キットにはエアポンプが含まれており、取扱説明書ではデジタル出力17および18への接続を推奨しています。1つの出力はポンプのオン/オフを制御し、2番目の出力は空気の移動方向を制御します。</font><font style="vertical-align: inherit;">したがって、例えば、空気圧グリッパが作動し、これも供給される。</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">雑草</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dobotを悪用する過程で、私はいくつかの問題に遭遇しました。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スタンドの穴は、標準の光学ブレッドボードの穴のピッチには対応していません。</font><font style="vertical-align: inherit;">一方、誤って自分の良さがぶつかると、そのうちの1つが固定ボルトの軸を中心にスクロールするだけだったので、大きなダメージはなかったと思います。</font></font></li>
<li> 1-   .   ,   .     , .&nbsp;.        .     3.</li>
<li>          .    ,     .    -             ,   .        90 .        .   ,    ,    .</li>
<li>    .     -,         ,      .</li>
<li>   ,         .   ,    ,      . -       .     ,       ,      «» .   ,     .     ,         4 .     .</li>
<li>     3  ,    .   ,    .        ,        15 ,       .   ,          .</li>
</ol><br>
<h1></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
親切さにより、タイル張りのミニソケットに太陽電池を組み立てるプロジェクトを実装することができました。ビデオで見ることができます。位置決め精度は同じシリコンウェーハで確認され、1つの軸で1ピクセル、別の軸で10ピクセルの制限内でした。このプロジェクトのカメラは20 MPの解像度で使用され、長辺に沿ったカメラのカバレッジフィールドは約17 cmでした。1ピクセルが約30ミクロンの線形サイズに対応することを計算することは難しくありません。たまたま使用された光学系は、高品質であるにもかかわらず、ウェーハの中心のみをはっきりと観察できるようにし、ウェーハのエッジは非常にぼやけて、短辺に沿った面の決定に不確実性をもたらし、したがってウェーハの中心を決定する不確実性につながります。軸を調整した後、カメラの焦点をプレートの短辺に設定しました。原則として、視野の中心のようにそこに焦点を合わせるのは不可能でしたが、それでもなお注意が必要です。この影響により、太陽電池の長辺に沿った軸に沿った位置合わせ誤差は10ピクセルの制限でしたが、短辺では1ピクセルのみでした。これは約300および30ミクロンに相当します。これにより、仕様の正確性を検証することができました。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/j7SNzEHzecM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja467393/index.html">NX Bootcampは10月に始まります</a></li>
<li><a href="../ja467395/index.html">Habr Weekly＃18 /新しいApple Gadgets、完全にモジュール式のスマートフォン、ベラルーシのプログラマーの村、XY現象</a></li>
<li><a href="../ja467399/index.html">持ち込みを禁止することはできません：BYODの概念を実装し、情報セキュリティに害を与えない方法</a></li>
<li><a href="../ja467401/index.html">テスラモデルSとポルシェタイカンの比較</a></li>
<li><a href="../ja467403/index.html">Webコンポーネントから絞り出すことができるものとできないもの</a></li>
<li><a href="../ja467409/index.html">シリコンバレーでビジネスを行うには、自分で行動する必要があります</a></li>
<li><a href="../ja467419/index.html">Jakarta EE 8最終リリースがリリースされました</a></li>
<li><a href="../ja467421/index.html">C ++でリモートメモリの表現力豊かなスマートポインタを作成する</a></li>
<li><a href="../ja467423/index.html">Xamarin.Forms-アプリケーションでのアイコンフォントの便利な使用法</a></li>
<li><a href="../ja467425/index.html">STEM集中学習アプローチ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>