<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ•‘ ğŸ… ğŸ‘°ğŸ» ãƒŸãƒ‹ãƒ©ã‚¤ãƒˆã¨ã‚·ãƒ§ãƒƒã‚¯ã‚»ãƒ³ã‚µãƒ¼| nRF52840 ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘ğŸ¼ â° ğŸ’½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä»Šæ—¥ã®è¨˜äº‹ã§ã¯ã€æ–°ã—ã„å…‰ã¨æŒ¯å‹•ã‚»ãƒ³ã‚µãƒ¼ã«ã¤ã„ã¦ãŠè©±ã—ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚»ãƒ³ã‚µãƒ¼ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«E73-2Gâ€‹â€‹4M08S1Cï¼ˆnRF52840ï¼‰ã§å‹•ä½œã—ã¾ã™ã€‚MKãŒé–‹ç™ºã•ã‚ŒãŸç†ç”±ã¯ã€Sandeep Mistryãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«åŸºã¥ãArduino IDEã¸ã®ã‚µãƒãƒ¼ãƒˆã®è¿½åŠ ã€ä½ã‚³ã‚¹ãƒˆã€å„ªã‚ŒãŸæ©Ÿèƒ½ã€ãŠã‚ˆã³MyS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ãƒŸãƒ‹ãƒ©ã‚¤ãƒˆã¨ã‚·ãƒ§ãƒƒã‚¯ã‚»ãƒ³ã‚µãƒ¼| nRF52840</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478960/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä»Šæ—¥ã®è¨˜äº‹ã§ã¯ã€æ–°ã—ã„å…‰ã¨æŒ¯å‹•ã‚»ãƒ³ã‚µãƒ¼ã«ã¤ã„ã¦ãŠè©±ã—ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</font><font style="vertical-align: inherit;">ã‚»ãƒ³ã‚µãƒ¼ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«E73-2Gâ€‹â€‹4M08S1Cï¼ˆnRF52840ï¼‰ã§å‹•ä½œã—ã¾ã™ã€‚</font><font style="vertical-align: inherit;">MKãŒé–‹ç™ºã•ã‚ŒãŸç†ç”±ã¯ã€Sandeep Mistryãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«åŸºã¥ãArduino IDEã¸ã®ã‚µãƒãƒ¼ãƒˆã®è¿½åŠ ã€ä½ã‚³ã‚¹ãƒˆã€å„ªã‚ŒãŸæ©Ÿèƒ½ã€ãŠã‚ˆã³MySensorsã‹ã‚‰ZigBeeã¸ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªåˆ‡ã‚Šæ›¿ãˆã‚’ç¶™ç¶šã§ãã‚‹ã“ã¨ãªã©ã§ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/b0/dt/dmb0dtvbakfgj_pgye8k_wjlmdc.jpeg"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ã‚ˆã†ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¿…è¦æ€§ã¯ã€ç§ã®å®¶ã«ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ãŒç™»å ´ã—ãŸã“ã¨ã‹ã‚‰ç”Ÿã¾ã‚Œã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒã‚«ãƒ¼ãƒ†ãƒ³ã‚’åˆ¶å¾¡ã™ã‚‹çª“ã‹ã‚‰ç›´æ¥ã€ç…§æ˜ã®ãƒ¬ãƒ™ãƒ«ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æœ€åˆã¯ã€BH1750FVIã‚»ãƒ³ã‚µãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹äºˆå®šã§ã—ãŸãŒã€ã“ã®ã‚»ãƒ³ã‚µãƒ¼ã®ç‰¹æ€§ã¯è‰¯å¥½ã§ã€ä»–ã®DIYãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è¤‡æ•°å›ä½¿ç”¨ã•ã‚Œã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ã‚ã‚‹æ™‚ç‚¹ã§ã€ã™ã¹ã¦ã®ç¨®é¡ã®ã‚»ãƒ³ã‚µãƒ¼ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹ã¨ãã€èª°ã‹ãŒMAX44009ã‚»ãƒ³ã‚µãƒ¼ã‚’è©³ã—ãæ¤œè¨ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ç§ã¯ã‚ˆãè¦‹ã¦ã€ãã®ç¬é–“ã‹ã‚‰BH1750FVIã‚’æ€ã„å‡ºã—ã¾ã›ã‚“ã§ã—ãŸã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/d7/bg/a_/d7bga_4sti9_x359xlgirab0egk.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX44009ã®ä»•æ§˜ï¼š</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾›çµ¦é›»åœ§ç¯„å›²1.7-3.6 Vã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¶…ä½å‹•ä½œé›»æµ-0.65Î¼Aï¼ˆå¤šãã®é¡ä¼¼è£½å“ã®ãƒ‘ãƒ¯ãƒ¼ãƒ€ã‚¦ãƒ³ãƒ¢ãƒ¼ãƒ‰ã®é›»æµã‚ˆã‚Šã‚‚ä½ã„ï¼‰ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22ãƒ“ãƒƒãƒˆã®åºƒã„ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸0.045-188000ã€</font></font></li>
<li>  ,     ,          .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã¾ãŸã€æ™®éæ€§ã‚„ã€æ‹¡å¼µæ©Ÿèƒ½ã®ã‚ˆã†ãªã‚‚ã®ã‚‚æ¬²ã—ã‹ã£ãŸã®ã§ã€æŒ¯å‹•ã‚»ãƒ³ã‚µãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹åŠ é€Ÿåº¦è¨ˆã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚’å°‘ã—è€ƒãˆã¾ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã“ã‚Œã«ã‚ˆã‚Šã€ã‚»ãƒ³ã‚µãƒ¼ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚</font><font style="vertical-align: inherit;">ç§ã®å ´åˆã€ã‚¤ãƒ™ãƒ³ãƒˆã«åŸºã¥ã„ã¦ã€UDã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã€å®¶ã®å­˜åœ¨ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¾ã™ï¼ˆéƒ¨å±‹ã®ãƒ©ã‚¤ãƒˆã‚’ã‚ªãƒ³ã«ã—ã¾ã™ï¼‰ã€‚ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ã¨ã€èª°ã‚‚å®¶ã«ã„ã¾ã›ã‚“ã€‚</font><font style="vertical-align: inherit;">ä¸€èˆ¬ã«ã€ã‚»ãƒ³ã‚µãƒ¼ã¯ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã®æŒ¯å‹•ãŠã‚ˆã³è¡æ’ƒã‚»ãƒ³ã‚µãƒ¼ã¨ã—ã¦ã‚‚ä½¿ç”¨ã§ãã€å…‰ã‚»ãƒ³ã‚µãƒ¼ã®ã¿ã¾ãŸã¯åŠ é€Ÿåº¦è¨ˆã®ã¿ã‚’ã¯ã‚“ã ä»˜ã‘ã§ãã¾ã™ã€‚</font><font style="vertical-align: inherit;">åŠ é€Ÿåº¦è¨ˆã¯ã€ã‚¿ãƒ‘ã‚¹ã€ã‚¿ãƒ¼ãƒ³ãªã©ã‚’èªè­˜ã™ã‚‹ã‚ˆã†ã«å†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
åŠ é€Ÿåº¦è¨ˆã¨ã—ã¦LIS2DW12ã‚»ãƒ³ã‚µãƒ¼ãŒé¸æŠã•ã‚Œã¾ã—ãŸãŒã€ã“ã‚Œã¯å¸‚å ´ã§æœ€ã‚‚çµŒæ¸ˆçš„ã§ã¯ãªã„ã¨ã—ã¦ã‚‚ã€æœ€ã‚‚çµŒæ¸ˆçš„ãªåŠ é€Ÿåº¦è¨ˆã®1ã¤ã§ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ex/jc/op/exjcop6l77shvd-ietzkuksg5hq.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIS2DW12ã®æ©Ÿèƒ½ï¼š</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¾›çµ¦é›»åœ§ç¯„å›²1.62-3.6 Vã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ã‚¿ãƒ³ãƒã‚¤ãƒ¢ãƒ¼ãƒ‰ã§50 nA</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½é›»åŠ›ãƒ¢ãƒ¼ãƒ‰ã§1Î¼Aã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‰²ã‚Šè¾¼ã¿æ©Ÿèƒ½ã®å­˜åœ¨ã€ã‚»ãƒ³ã‚µãƒ¼ã®é€£ç¶šå‹•ä½œã®å¯èƒ½æ€§ã€ãŠã‚ˆã³æŒ‡å®šã•ã‚ŒãŸã—ãã„å€¤ã‚’è¶…ãˆãŸã¨ãã®MCã¸ã®å‰²ã‚Šè¾¼ã¿ä¿¡å·ã®å½¢æˆã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LIS2DW12ç”¨ã®æ—¢è£½ã®Arduinoãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå®Œå…¨ã«ä¸è¶³ã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã®åŠ é€Ÿåº¦è¨ˆãƒ¢ãƒ‡ãƒ«ã®ç«‹ã¡ä¸Šã’ã§Arduinoå…„å¼Ÿã«èµ·ã“ã‚Šã†ã‚‹å•é¡Œã‚’äºˆæ¸¬ã—ã€åŒæ§˜ã®ç‰¹æ€§ã‚’æŒã¤LIS2DH12åŠ é€Ÿåº¦è¨ˆã®åˆ¥ã®ãƒ¢ãƒ‡ãƒ«ã®ã‚µãƒãƒ¼ãƒˆãŒå¾Œã«è¿½åŠ ã•ã‚Œã¾ã—ãŸãŒã€ä½é›»åŠ›ãƒ¢ãƒ¼ãƒ‰ã§ã®æ¶ˆè²»é‡ãŒé«˜ããªã‚Šã¾ã™-2Î¼Aã€‚</font><font style="vertical-align: inherit;">LIS2DH12åŠ é€Ÿåº¦è¨ˆã«ã¯ã€éå¸¸ã«å„ªã‚ŒãŸArduinoãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å…‰ã‚»ãƒ³ã‚µãƒ¼ã¯CR2032ãƒãƒƒãƒ†ãƒªãƒ¼ã§é§†å‹•ã—ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bd/z3/lf/bdz3lfe167cepe3m-5vvg0fc5-0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MySensorsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã—ã¦ã‚¹ãƒãƒ¼ãƒˆãƒ›ãƒ¼ãƒ ã‚’æ§‹ç¯‰ã—ãŸã“ã¨ã®ã‚ã‚‹äººã®å¤šãã¯ã€ãƒãƒƒãƒ†ãƒªãƒ¼ãƒ‡ãƒã‚¤ã‚¹ã§ã®MySensorsã®éæœ€é©ãªãƒ­ã‚¸ãƒƒã‚¯ã«ã¤ã„ã¦ãŠãã‚‰ãçŸ¥ã£ã¦ã„ã¾ã™ã€‚ãƒ‡ãƒã‚¤ã‚¹ã®å†èµ·å‹•æ™‚ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¶™ç¶šçš„ãªé€ä¿¡ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã®ãƒ‡ãƒã‚¤ã‚¹ã®è‡ªå‹•å›å¾©ã®æ¬¡å–„ã®ãƒ¢ãƒ¼ãƒ‰ã€ã‚¹ãƒªãƒ¼ãƒ—æ©Ÿèƒ½ã®ä¸­æ–­ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ã•ã‚ŒãŸæ¬¡å–„ã®æ¶ˆè²»ã€ä¸€èˆ¬çš„ã«ã€å¤¢ã«ã¯2ã¤ã ã‘ã®ä¸­æ–­ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã™ã¹ã¦ã®çŠ¶æ³ã¯ã€Maysensorsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å‰µè¨­è€…ãŒé›»æ± ã«å¯¾ã—ã¦æ‚ªã„æ…‹åº¦ã‚’æŒã£ã¦ã„ã‚‹ã¨ã„ã†äº‹å®Ÿã‚’å…·ä½“çš„ã«ç¤ºå”†ã—ã¦ã„ã¾ã™:) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ç§ã¯ã“ã‚Œã‚‰ã®æ¬ ç‚¹ã‚’æœ€å°é™ã«ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ç§ãŒå¯¾å‡¦ã—ãŸã‹ã£ãŸæœ€ã‚‚åŸºæœ¬çš„ãªã“ã¨ã¯ã€ä¸­æ–­ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">é€šå¸¸ã€ã‚¹ãƒªãƒ¼ãƒ—æ©Ÿèƒ½ã§å‰²ã‚Šè¾¼ã¿ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚‹ã¨ã€MK nRF52ã¯+ 10mKAã‚’æ¶ˆè²»ã—å§‹ã‚ã€MKè‡ªä½“ã‚’æ¶ˆè²»ã—ã¾ã™ï¼ˆnRF52810-52811ã®å ´åˆã¯1.4Î¼Aã€nRF52832-52840ã®å ´åˆã¯æœ€å¤§4.7Î¼Aï¼‰ã€‚</font><font style="vertical-align: inherit;">åˆè¨ˆ2ã¤ã®å‰²ã‚Šè¾¼ã¿ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int8_t</span> <span class="hljs-title">sleep</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> interrupt1, <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> mode1, <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> interrupt2, <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> mode2, <span class="hljs-keyword">const</span> <span class="hljs-keyword">uint32_t</span> sleepingMS = <span class="hljs-number">0</span>, <span class="hljs-keyword">const</span> <span class="hljs-keyword">bool</span> smartSleep = <span class="hljs-literal">false</span>)</span></span>;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ä»¥å‰ã¯ã€ã‚¹ãƒªãƒ¼ãƒ—æ¶ˆè²»ã‚’æœ€é©åŒ–ã™ã‚‹ãŸã‚ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ¢ã—ã¦ã€çµ„ã¿è¾¼ã¿ã®ä½æ¶ˆè²»ã‚³ãƒ³ãƒ‘ãƒ¬ãƒ¼ã‚¿ã§å‰²ã‚Šè¾¼ã¿ã‚’ä½¿ç”¨ã™ã‚‹å¯èƒ½æ€§ãŒå®Ÿç¾ã—ã¾ã—ãŸã€‚ã‚¹ãƒªãƒ¼ãƒ—æ¶ˆè²»ã¯+ 10Î¼Aã§ã¯ãªãã€+ 1Î¼Aã®é ˜åŸŸã§ã—ãŸãŒã€å‰²ã‚Šè¾¼ã¿ã«ä½¿ç”¨ã§ãã‚‹ã®ã¯1ã¤ã ã‘ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">åŸå‰‡ã¨ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã®ä¸ä¾¿ã•ï¼ˆè¿½åŠ ã®ãƒ”ãƒ³ã‹ã‚‰ã®ä¿¡å·ã®å‡¦ç†ï¼‰ã¨ãƒœãƒ¼ãƒ‰ä¸Šã®è¿½åŠ ã®è¦ç´ ï¼ˆãƒ€ã‚¤ã‚ªãƒ¼ãƒ‰ï¼‰ã¯åˆ¥ã¨ã—ã¦ã€ã“ã‚Œã¯è‰¯ã„è§£æ±ºç­–ã§ã—ãŸã€‚</font><font style="vertical-align: inherit;">ã—ã‹ã—ã€ç§ã¯ãã‚Œã‚’ã‚‚ã£ã¨è‰¯ãã—ãŸã‹ã£ãŸã®ã§ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã“ã®æ™‚ã¾ã§ã«ã€ç§ã¯ã™ã§ã«nRF5 SDKã«å°‘ã—æ…£ã‚Œè¦ªã—ã‚“ã§ã„ãŸã®ã§ã€mysensors.orgãƒ•ã‚©ãƒ¼ãƒ©ãƒ ï¼ˆãƒ’ãƒ³ãƒˆã€ãƒ’ãƒ³ãƒˆ:)ï¼‰ã‚’èª¿ã¹ãŸå¾Œã€nRF5 SDKã§è§£æ±ºç­–ã‚’æ¢ã™ã“ã¨ã«æ±ºã‚ã€ãã‚Œã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚ç¾åœ¨ã€ç„¡åˆ¶é™ã®æ•°ã®å‰²ã‚Šè¾¼ã¿ãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚Šã€å®Ÿè³ªçš„ã«ä½™åˆ†ãªã‚‚ã®ã‚’æ¶ˆè²»ã—ã¾ã›ã‚“ã€‚ä¸»ãªã“ã¨ã¯ã€WInterruptsãƒ•ã‚¡ã‚¤ãƒ«ã®Sandeepmistry nRF5ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ¼ãƒ‰ã«å°ã•ãªå¤‰æ›´ã‚’åŠ ãˆã‚‹ã“ã¨ã§ã™ã€‚GPIOTE_IRQHandlerï¼ˆï¼‰é–¢æ•°ã®å‰ã«å±æ€§ã€Œweakã€ã‚’è¿½åŠ ã™ã‚‹ã¨ã€ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–¢æ•°ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ¼ãƒ‰ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã§ãã¾ã™-__attribute__ï¼ˆï¼ˆweakï¼‰ï¼‰</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s5/sf/oy/s5sfoy5fdmvjiu16afhtkcrxkjg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ‘ã‚¹ã«ã‚ã‚Šã¾ã™- Cï¼š\ Users \ USER_COMPA \ AppData \ Local \ Arduino15 \ packages \ sandeepmistry \ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
hardware \ nRF5 \ 0.6.0 \ cores \ nRF5 \</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Gitaã®EFEKTA-LIS2DW12-MAX44009-E73C / SOURCE CODE / ARDUINO /ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã«ã‚ã‚Šã¾ã™ã€‚ä½¿ç”¨ä¾‹ã¯ã€ã‚¹ã‚±ãƒƒãƒEFEKTA-LIS2DW12-MAX44009-E73C / SOURCE CODE / ARDUINO / vibro_ambi1_inoã«ã‚ã‚Šã¾ã™</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
æ¬¡ã«ãƒ•ã‚¡ã‚¤ãƒŠãƒ©ã‚¤ã‚ºã—ãŸã„ã®ã¯ã€Sandeepmistry nRF5ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè‡ªä½“ã§ã—ãŸã€‚ãã®ãŸã‚ã€æ–°ã—ã„MK nRF52840ã€nRF52811ã€ãŠã‚ˆã³oldã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒä¾¿åˆ©ã§ã™ãŒã€ä½•ã‚‰ã‹ã®ç†ç”±ã§ã€nRF52810ãŒä¸å½“ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼ˆçµå±€ã®ã¨ã“ã‚ã€å¤¢ã®1.4Î¼Aã¯ã‚ãªãŸã®ãŸã‚ã§ã¯ã‚ã‚Šã¾ã›ã‚“:)ï¼‰ã€‚ã‚‚ã¡ã‚ã‚“ã€Arduino IDEã¨nRF52832ã®ä¸‹ã‹ã‚‰nRF52840ã‚’æ“ä½œã§ãã¾ã™ãŒã€ã‚‚ã£ã¨å¿«é©ã«ã—ãŸã‹ã£ãŸã®ã§ã™ã€‚ä¸Šè¨˜ã§ã€Nordic SDKã§ä½•ã‹ã‚’ã™ã‚‹ã“ã¨ã«é–¢å¿ƒãŒã‚ã‚‹ã¨æ›¸ãã¾ã—ãŸã€‚ç‰¹ã«ã€MK nRF5ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€Segger Embedded Studioã¯ç„¡æ–™ã§ã™ã€‚ç§ã«ã¨ã£ã¦èˆˆå‘³æ·±ã„ã™ã¹ã¦ã®ãƒœãƒ¼ãƒ‰ã®ã‚µãƒãƒ¼ãƒˆã¯KFORã‹ã‚‰å–å¾—ã•ã‚Œã€Arduinoã«è»¢é€ã•ã‚Œã¾ã—ãŸï¼ˆã“ã‚Œã¾ã§ã®ã¨ã“ã‚ã€softdeviceãŒãªã‘ã‚Œã°ã€mysensorsã§ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚ MySensorsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ–°ã—ã„ãƒœãƒ¼ãƒ‰ã‚‚è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xc/hy/dy/xchydy8gbj0ld1tcvtyjiqbu70o.png"><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/smartboxchannel/arduino-nRF5 </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/smartboxchannel/MySensors</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
èª­è€…ã®1äººãŒç§ã®ä»¥å‰ã®è¨˜äº‹ã«æ—¢ã«ç²¾é€šã—ã¦ã„ã‚‹å ´åˆã¯ã€ä»¥å‰ã¨åŒã˜ã‚ˆã†ã«ã€å…‰ã‚»ãƒ³ã‚µãƒ¼ã®ã‚±ãƒ¼ã‚¹ã¨ã—ã¦SLAã§æ¶²ä½“ãƒãƒªãƒãƒ¼ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã“ã¨ã«é©šã‹ãªã„ã§ã—ã‚‡ã†ã€‚ã“ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã§ã®å°åˆ·ã®åˆ©ç‚¹ã¯ã€ãã®é«˜ç²¾åº¦ã§ã™ã€‚ã—ã‹ã—ã€ã‚‚ã¡ã‚ã‚“ã€ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚å®¶åº­ç”¨SLAãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã§ä½¿ç”¨ã§ãã‚‹ãƒãƒªãƒãƒ¼ã¯ã€FDMã®ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯ã‚ˆã‚Šã‚‚å¼·åº¦ãŒåŠ£ã£ã¦ã„ã¾ã™ã€‚ã‚±ãƒ¼ã‚¹ã®3Dãƒ¢ãƒ‡ãƒ«ã¯2ã¤ã®ãƒ‘ãƒ¼ãƒ„ã§æ§‹æˆã•ã‚Œã€å„åŠåˆ†ãŒ40åˆ†é–“å°åˆ·ã•ã‚Œã¾ã—ãŸï¼ˆå±¤ã®åšã•50ãƒŸã‚¯ãƒ­ãƒ³ï¼‰ã€‚ç‰¹ã«ã“ã“ã§æ­¢ã‚ã‚‹å¿…è¦ã¯ãŠãã‚‰ããªã„ã§ã—ã‚‡ã†ã€‚3Dã‚¨ãƒ‡ã‚£ã‚¿ã§ã®é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã®å†™çœŸã‚’æ•°æšã ã‘ã§ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/a0/x0/qt/a0x0qtl5jiglsmcidmbjibr_5wi.png"><br>
<br>
<img src="https://habrastorage.org/webt/by/cz/rk/byczrkmuesyuzijn5yyvv71uroa.png"><br>
<br>
<img src="https://habrastorage.org/webt/i4/ct/qc/i4ctqcrbeduw2p4an1a1jpkie9s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ã‚»ãƒ³ã‚µãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡ã›ãšã«ãƒ‡ãƒã‚¤ã‚¹ã®å†èµ·å‹•ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚ãƒ‡ãƒã‚¤ã‚¹ãŒæ–°ã—ããƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«è¿½åŠ ã•ã‚Œã¦ã„ãªã„å ´åˆã€æœ€åˆã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«è¿½åŠ ã•ã‚ŒãŸã¨ãã«ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒç™»éŒ²ãŠã‚ˆã³å®Œäº†ã—ã¾ã™ã€‚ç™»éŒ²ãŒæˆåŠŸã™ã‚‹ã¨ã€è­˜åˆ¥å­ã‚’å—ä¿¡ã—ãŸãƒ‡ãƒã‚¤ã‚¹ã¯ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†åº¦é€ä¿¡ã—ãªããªã‚Šã¾ã™ãŒã€ã‚»ãƒ³ã‚µãƒ¼ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é€ä¿¡ã§ãã¾ã™ï¼ˆã“ã‚Œã¯ãŸã¨ãˆã°ã€ã™ã¹ã¦ã®ã‚»ãƒ³ã‚µãƒ¼ãŒã™ãã«æ­£å¸¸ã«æç¤ºã•ã‚Œãªã‹ã£ãŸå ´åˆãªã©ï¼‰ã€‚ã¾ãŸã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã®ä½œæ¥­ã®æ¨™æº–çš„ãªè‡ªå‹•å›å¾©ã®å¯èƒ½æ€§ã‚’ç„¡åŠ¹ã«ã—ã¾ã™ï¼ˆã‚»ãƒ³ã‚µãƒ¼ãŒãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’å¤±ã£ãŸå ´åˆï¼‰ã€ç‹¬è‡ªã®éæ¨™æº–ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç™ºæ˜ã•ã‚Œã¾ã—ãŸ:)ã€‚ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚ã‚»ãƒ³ã‚µãƒ¼ãŒ5ã¤ä»¥ä¸Šï¼ˆã“ã‚Œã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™ï¼‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¶šã‘ã¦é€ä¿¡ã—ã‚ˆã†ã¨ã—ã¦å¤±æ•—ã—ãŸã“ã¨ã‚’æ¤œå‡ºã—ãŸå ´åˆã€æ¬¡ã«ã€ãƒ‡ãƒã‚¤ã‚¹ã¯ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®é€ä¿¡ã‚’åœæ­¢ã—ã€æœ€åˆã«/ 2ã‚»ãƒ³ã‚µãƒ¼ã‹ã‚‰ã®é€ä¿¡é–“éš”ã¨ç­‰ã—ã„é–“éš”ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ¤œç´¢ã«é–¢ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡ã‚’é–‹å§‹ã—ã€é€ä¿¡ã®ãŸã³ã«ã“ã®é–“éš”ã‚’å®šæœŸçš„ã«å¢—ã‚„ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒãƒƒãƒ†ãƒªãƒ¼ã®é›»åŠ›ã‚’å¤§å¹…ã«ç¯€ç´„ã§ãã¾ã™ã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰</font></font></b><div class="spoiler_text"><pre><code class="css hljs">// <span class="hljs-selector-tag">SDK</span> <span class="hljs-selector-tag">PORT</span>
<span class="hljs-selector-tag">extern</span> "<span class="hljs-selector-tag">C</span>" {<font></font>
#include "app_gpiote.h"<font></font>
#include "nrf_gpio.h"<font></font>
}<font></font>
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">APP_GPIOTE_MAX_USERS</span> 1
<span class="hljs-selector-id">#include</span> &lt;<span class="hljs-selector-tag">LIS2DW12Sensor</span><span class="hljs-selector-class">.h</span>&gt;
<span class="hljs-selector-id">#include</span> &lt;<span class="hljs-selector-tag">MAX44009</span><span class="hljs-selector-class">.h</span>&gt;<font></font>
//<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">MY_DEBUG</span>
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">MY_RADIO_NRF5_ESB</span>
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">MY_DISABLED_SERIAL</span>
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">mtwr</span>;
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">MY_TRANSPORT_WAIT_READY_MS</span> (<span class="hljs-selector-tag">mtwr</span>)
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">MY_NRF5_ESB_PA_LEVEL</span> (<span class="hljs-selector-tag">NRF5_PA_MAX</span>)
<span class="hljs-selector-id">#include</span> &lt;<span class="hljs-selector-tag">MySensors</span><span class="hljs-selector-class">.h</span>&gt;
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">SN</span> "<span class="hljs-selector-tag">LUX</span> &amp; <span class="hljs-selector-tag">VIBRO</span> <span class="hljs-selector-tag">SENS</span>"
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">SV</span> "1<span class="hljs-selector-class">.0</span>"
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">V_SENS_CHILD_ID</span> 1
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">LUX_SENS_CHILD_ID</span> 2
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">WPM_SENS_CHILD_ID</span> 3
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">INTERVAL_R_LUX_CHILD_ID</span> 220
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">LEVEL_SENSIV_V_SENS_CHILD_ID</span> 230
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">ENABLE_WPM_SENS_CHILD_ID</span> 240
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">SIGNAL_Q_ID</span> 253
<span class="hljs-selector-id">#define</span> <span class="hljs-selector-tag">TEMP_CHILD_ID</span> 254 //<span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">any</span> <span class="hljs-selector-tag">tests</span>
<span class="hljs-selector-id">#include</span> &lt;<span class="hljs-selector-tag">MySensors</span><span class="hljs-selector-class">.h</span>&gt;
<span class="hljs-selector-tag">MyMessage</span> <span class="hljs-selector-tag">vibroMsg</span>(<span class="hljs-selector-tag">V_SENS_CHILD_ID</span>, <span class="hljs-selector-tag">V_TRIPPED</span>);
<span class="hljs-selector-tag">MyMessage</span> <span class="hljs-selector-tag">brightMsg</span>(<span class="hljs-selector-tag">LUX_SENS_CHILD_ID</span>, <span class="hljs-selector-tag">V_LEVEL</span>);
<span class="hljs-selector-tag">MyMessage</span> <span class="hljs-selector-tag">wpmMsg</span>(<span class="hljs-selector-tag">WPM_SENS_CHILD_ID</span>, <span class="hljs-selector-tag">V_LEVEL</span>);
<span class="hljs-selector-tag">MyMessage</span> <span class="hljs-selector-tag">conf_wpmMsg</span>(<span class="hljs-selector-tag">ENABLE_WPM_SENS_CHILD_ID</span>, <span class="hljs-selector-tag">V_VAR1</span>);
<span class="hljs-selector-tag">MyMessage</span> <span class="hljs-selector-tag">conf_vsensMsg</span>(<span class="hljs-selector-tag">LEVEL_SENSIV_V_SENS_CHILD_ID</span>, <span class="hljs-selector-tag">V_VAR1</span>);
<span class="hljs-selector-tag">MyMessage</span> <span class="hljs-selector-tag">conf_interv_rluxMsg</span>(<span class="hljs-selector-tag">INTERVAL_R_LUX_CHILD_ID</span>, <span class="hljs-selector-tag">V_VAR1</span>);
<span class="hljs-selector-tag">MyMessage</span> <span class="hljs-selector-tag">tempMsg</span>(<span class="hljs-selector-tag">TEMP_CHILD_ID</span>, <span class="hljs-selector-tag">V_VAR1</span>); //<span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">any</span> <span class="hljs-selector-tag">tests</span>
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">nosleep</span> = 0;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">button_flag</span> = 0;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">configMode</span> = 0;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">wpm_enable</span> = 0;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">onoff</span> = 1;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">flag_update_transport_param</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">flag_sendRoute_parent</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">flag_no_present</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">flag_nogateway_mode</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">flag_find_parent_process</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">flag_fcount</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">Ack_TL</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">Ack_FP</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">PRESENT_ACK</span>;
<span class="hljs-selector-tag">byte</span> <span class="hljs-selector-tag">conf_vibro_set</span> = 1;
<span class="hljs-selector-tag">byte</span> <span class="hljs-selector-tag">interval_reading_lux</span> = 10;
<span class="hljs-selector-tag">byte</span> <span class="hljs-selector-tag">err_delivery_beat</span>;
<span class="hljs-selector-tag">byte</span> <span class="hljs-selector-tag">problem_mode_count</span>;
<span class="hljs-selector-tag">uint8_t</span>  <span class="hljs-selector-tag">countbatt</span> = 0;
<span class="hljs-selector-tag">uint8_t</span> <span class="hljs-selector-tag">batt_cap</span>;
<span class="hljs-selector-tag">uint8_t</span> <span class="hljs-selector-tag">old_batt_cap</span> = 100;<font></font>
//<span class="hljs-selector-tag">unsigned</span> <span class="hljs-selector-tag">long</span> <span class="hljs-selector-tag">BATT_TIME</span> = 43200000; //12 <span class="hljs-selector-tag">hours</span>
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">BATT_TIME</span> = 7200000; //12 <span class="hljs-selector-tag">hours</span>
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">SLEEP_TIME_TEMP</span> = 60000; //1 <span class="hljs-selector-tag">minute</span>
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">SLEEP_TIME</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">C_BATT_TIME</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">oldmillis</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">newmillis</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">previousMillis</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">lightMillisR</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">configMillis</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">interrupt_time</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">SLEEP_TIME_W</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">axel_time</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">result</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">brightness</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">lastbrightness</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">brightThreshold</span> = 25;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">myid</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">mypar</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">old_mypar</span> = <span class="hljs-selector-tag">-1</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">master_id</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">Wpm</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">ODR_1Hz6_LP_ONLY</span> = 1<span class="hljs-selector-class">.6f</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">ODR_12Hz5</span> = 12<span class="hljs-selector-class">.5f</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">ODR_25Hz</span> = 25<span class="hljs-selector-class">.0f</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">ODR_50Hz</span> = 50<span class="hljs-selector-class">.0f</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">ODR_100Hz</span> = 100<span class="hljs-selector-class">.0f</span>;
<span class="hljs-selector-tag">float</span> <span class="hljs-selector-tag">ODR_200Hz</span> = 200<span class="hljs-selector-class">.0f</span>;
<span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">vibro</span> = 1;
<span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">app_gpiote_user_id_t</span> <span class="hljs-selector-tag">m_gpiote_user_id</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">PIN_BUTTON1_MASK</span>;
<span class="hljs-selector-tag">uint32_t</span> <span class="hljs-selector-tag">AXEL_INT1_MASK</span>;
<span class="hljs-selector-tag">volatile</span> <span class="hljs-selector-tag">byte</span> <span class="hljs-selector-tag">axelInt1Status</span> = 0;
<span class="hljs-selector-tag">volatile</span> <span class="hljs-selector-tag">byte</span> <span class="hljs-selector-tag">buttInt1Status</span> = 0;
<span class="hljs-selector-tag">uint16_t</span> <span class="hljs-selector-tag">batteryVoltage</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">linkQuality</span>;
<span class="hljs-selector-tag">int16_t</span> <span class="hljs-selector-tag">old_linkQuality</span>;
<span class="hljs-selector-tag">LIS2DW12Sensor</span> *<span class="hljs-selector-tag">lis2</span>;
<span class="hljs-selector-tag">MAX44009</span> <span class="hljs-selector-tag">light</span>;<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">preHwInit</span>() {<font></font>
  board_Init();<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">before</span>() {<font></font>
  blinky(1, 1, GREEN_LED);<font></font>
  wait(1000);<font></font>
  nRF_Init();<font></font>
  device_Conf();<font></font>
  happy_init();<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">setup</span>() {<font></font>
  interrupt_Init();<font></font>
  sensors_Init();<font></font>
  config_Happy_node();<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">presentation</span>()<font></font>
{<font></font>
  if (!sendSketchInfo(SN, SV)) {<font></font>
    _transportSM.failedUplinkTransmissions = 0;<font></font>
    sleep(1000);<font></font>
    wait(50);<font></font>
    if (!sendSketchInfo(SN, SV)) {<font></font>
      _transportSM.failedUplinkTransmissions = 0;<font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-selector-tag">present</span>(<span class="hljs-selector-tag">V_SENS_CHILD_ID</span>, <span class="hljs-selector-tag">S_VIBRATION</span>, "<span class="hljs-selector-tag">STATUS</span> <span class="hljs-selector-tag">VIBRO</span>", 1);
  <span class="hljs-selector-tag">wait</span>(2500, <span class="hljs-selector-tag">C_PRESENTATION</span>, <span class="hljs-selector-tag">S_VIBRATION</span>);
  <span class="hljs-selector-tag">CORE_DEBUG</span>(<span class="hljs-selector-tag">PSTR</span>("<span class="hljs-selector-tag">MyS</span>: <span class="hljs-selector-tag">TEST</span> <span class="hljs-selector-tag">WAIT</span> <span class="hljs-selector-tag">AFTER</span> <span class="hljs-selector-tag">PRESENT</span> <span class="hljs-selector-tag">SENSOR</span>\<span class="hljs-selector-tag">n</span>"));
  <span class="hljs-selector-tag">if</span> (<span class="hljs-selector-tag">PRESENT_ACK</span> == 0) {<font></font>
    _transportSM.failedUplinkTransmissions = 0;<font></font>
    sleep(1500);<font></font>
    wait(50);<font></font>
    present(V_SENS_CHILD_ID, S_VIBRATION, "STATUS VIBRO", 1);<font></font>
    wait(2500, C_PRESENTATION, S_VIBRATION);<font></font>
    CORE_DEBUG(PSTR("<span class="hljs-attribute">MyS</span>: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    PRESENT_ACK = 0;
  }

  present(LUX_SENS_CHILD_ID, S_LIGHT_LEVEL, "</span>LUX<span class="hljs-string">", 1);
  wait(2500, C_PRESENTATION, S_LIGHT_LEVEL);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
  if (PRESENT_ACK == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    present(LUX_SENS_CHILD_ID, S_LIGHT_LEVEL, "</span>LUX<span class="hljs-string">", 1);
    wait(2500, C_PRESENTATION, S_LIGHT_LEVEL);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    PRESENT_ACK = 0;
  }

  present(WPM_SENS_CHILD_ID, S_LIGHT_LEVEL, "</span>W/M^<span class="hljs-number">2</span><span class="hljs-string">", 1);
  wait(2500, C_PRESENTATION, S_LIGHT_LEVEL);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
  if (PRESENT_ACK == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    present(WPM_SENS_CHILD_ID, S_LIGHT_LEVEL, "</span>W/M^<span class="hljs-number">2</span><span class="hljs-string">", 1);
    wait(2500, C_PRESENTATION, S_LIGHT_LEVEL);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    PRESENT_ACK = 0;
  }

  present(SIGNAL_Q_ID, S_CUSTOM, "</span>SIGNAL QUALITY<span class="hljs-string">", 1);
  wait(2500, C_PRESENTATION, S_CUSTOM);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
  if (PRESENT_ACK == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    present(SIGNAL_Q_ID, S_CUSTOM, "</span>SIGNAL QUALITY<span class="hljs-string">", 1);
    wait(2500, C_PRESENTATION, S_CUSTOM);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    PRESENT_ACK = 0;
  }

  present(ENABLE_WPM_SENS_CHILD_ID, S_CUSTOM, "</span>ON|OFF WPM<span class="hljs-string">", 1);
  wait(2500, C_PRESENTATION, S_CUSTOM);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
  if (PRESENT_ACK == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    present(ENABLE_WPM_SENS_CHILD_ID, S_CUSTOM, "</span>ON|OFF WPM<span class="hljs-string">", 1);
    wait(2500, C_PRESENTATION, S_CUSTOM);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    PRESENT_ACK = 0;
  }

  present(LEVEL_SENSIV_V_SENS_CHILD_ID, S_CUSTOM, "</span>SENS LEVEL VIBRO<span class="hljs-string">", 1);
  wait(2500, C_PRESENTATION, S_CUSTOM);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
  if (PRESENT_ACK == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    present(LEVEL_SENSIV_V_SENS_CHILD_ID, S_CUSTOM, "</span>SENS LEVEL VIBRO<span class="hljs-string">", 1);
    wait(2500, C_PRESENTATION, S_CUSTOM);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    PRESENT_ACK = 0;
  }

  present(INTERVAL_R_LUX_CHILD_ID, S_CUSTOM, "</span>INTERVAL RLUX|MIN<span class="hljs-string">", 1);
  wait(2500, C_PRESENTATION, S_CUSTOM);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
  if (PRESENT_ACK == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    present(INTERVAL_R_LUX_CHILD_ID, S_CUSTOM, "</span>INTERVAL RLUX|MIN<span class="hljs-string">", 1);
    wait(2500, C_PRESENTATION, S_CUSTOM);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER PRESENT SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    PRESENT_ACK = 0;
  }

  send(conf_wpmMsg.set(wpm_enable), 1);
  wait(2500, C_SET, V_VAR1);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER SEND CONF SENSOR\n<span class="hljs-string">"));
  if (Ack_TL == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    send(conf_wpmMsg.set(wpm_enable), 1);
    wait(2500, C_SET, V_VAR1);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER SEND CONF SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    Ack_TL = 0;
  }

  send(conf_vsensMsg.set(conf_vibro_set), 1);
  wait(2500, C_SET, V_VAR1);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER SEND CONF SENSOR\n<span class="hljs-string">"));
  if (Ack_TL == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    send(conf_vsensMsg.set(conf_vibro_set), 1);
    wait(2500, C_SET, V_VAR1);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER SEND CONF SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    Ack_TL = 0;
  }

  send(conf_interv_rluxMsg.set(interval_reading_lux), 1);
  wait(2500, C_SET, V_VAR1);
  CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER SEND CONF SENSOR\n<span class="hljs-string">"));
  if (Ack_TL == 0) {
    _transportSM.failedUplinkTransmissions = 0;
    sleep(1500);
    wait(50);
    send(conf_interv_rluxMsg.set(interval_reading_lux), 1);
    wait(2500, C_SET, V_VAR1);
    CORE_DEBUG(PSTR("</span>MyS: TEST WAIT AFTER SEND CONF SENSOR\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
  } else {
    Ack_TL = 0;
  }
}



void loop()
{
  if (flag_update_transport_param == 1) {
    update_Happy_transport();
  }
  if (flag_sendRoute_parent == 1) {
    present_only_parent();
  }

  if (isTransportReady() == true) {
    if (flag_nogateway_mode == 0) {
      if (flag_find_parent_process == 1) {
        find_parent_process();
      }
      if (configMode == 0) {
        if ((axelInt1Status == AXEL_INT1) || (buttInt1Status == PIN_BUTTON1)) {
          if (axelInt1Status == AXEL_INT1) {
            nosleep = 1;
            send_Axel();
            axelInt1Status = 0;
            newmillis = millis();
            interrupt_time = newmillis - oldmillis;
            SLEEP_TIME_W = SLEEP_TIME_W - interrupt_time;
            if (SLEEP_TIME_W &lt; 5000) {
              SLEEP_TIME_W = SLEEP_TIME;
              send_Brigh(1);
              countbatt++;
              if (countbatt == C_BATT_TIME) {
                sendBatteryStatus(1);
                countbatt = 0;
              }
            }
            nosleep = 0;
          }
          if (buttInt1Status == PIN_BUTTON1) {
            if (digitalRead(PIN_BUTTON1) == 0 &amp;&amp; button_flag == 0) {
              button_flag = 1;
              nosleep = 1;
              previousMillis = millis();
              ledsOff();
            }
            if (digitalRead(PIN_BUTTON1) == 0 &amp;&amp; button_flag == 1) {
              if ((millis() - previousMillis &gt; 0) &amp;&amp; (millis() - previousMillis &lt;= 1750)) {
                if (millis() - lightMillisR &gt; 25) {
                  lightMillisR = millis();
                  onoff = !onoff;
                  digitalWrite(GREEN_LED, onoff);
                }
              }
              if ((millis() - previousMillis &gt; 1750) &amp;&amp; (millis() - previousMillis &lt;= 2000)) {
                ledsOff();
              }
              if ((millis() - previousMillis &gt; 2000) &amp;&amp; (millis() - previousMillis &lt;= 4000)) {
                if (millis() - lightMillisR &gt; 25) {
                  lightMillisR = millis();
                  onoff = !onoff;
                  digitalWrite(BLUE_LED, onoff);
                }
              }
              if ((millis() - previousMillis &gt; 4000) &amp;&amp; (millis() - previousMillis &lt;= 4250)) {
                ledsOff();
              }
              if ((millis() - previousMillis &gt; 4250) &amp;&amp; (millis() - previousMillis &lt;= 6250)) {
                if (millis() - lightMillisR &gt; 25)    {
                  lightMillisR = millis();
                  onoff = !onoff;
                  digitalWrite(RED_LED, onoff);
                }
              }
              if ((millis() - previousMillis &gt; 6250) &amp;&amp; (millis() - previousMillis &lt;= 6500)) {
                ledsOff();
              }
              if ((millis() - previousMillis &gt; 6500) &amp;&amp; (millis() - previousMillis &lt;= 8500)) {
                if (millis() - lightMillisR &gt; 50)    {
                  lightMillisR = millis();
                  onoff = !onoff;
                  digitalWrite(RED_LED, onoff);
                }
              }
              if (millis() - previousMillis &gt; 8500) {
                ledsOff();
              }
            }
            if (digitalRead(PIN_BUTTON1) == 1 &amp;&amp; button_flag == 1) {
              if (millis() - previousMillis &lt;= 2000)
              {
                ledsOff();
                send_Brigh(0);
                nosleep = 0;
                button_flag = 0;
                buttInt1Status = 0;
              }
              if ((millis() - previousMillis &gt; 2000) &amp;&amp; (millis() - previousMillis &lt;= 4000))
              {
                ledsOff();
                configMode = 1;
                button_flag = 0;
                configMillis = millis();
              }
              if ((millis() - previousMillis &gt; 4250) &amp;&amp; (millis() - previousMillis &lt;= 6250))
              {
                ledsOff();
                blinky(2, 2, RED_LED);
                button_flag = 0;
                buttInt1Status = 0;
                presentation();
                nosleep = 0;
              }
              if ((millis() - previousMillis &gt; 6500) &amp;&amp; (millis() - previousMillis &lt;= 8500))
              {
                ledsOff();
                blinky(3, 3, RED_LED);
                new_device();
              }
              if (((millis() - previousMillis &gt; 1750) &amp;&amp; (millis() - previousMillis &lt;= 2000)) || ((millis() - previousMillis &gt; 4000) &amp;&amp; (millis() - previousMillis &lt;= 4250)) || ((millis() - previousMillis &gt; 6250) &amp;&amp; (millis() - previousMillis &lt;= 6500)) || ((millis() - previousMillis &gt; 8500)))
              {
                ledsOff();
                blinky(1, 2, GREEN_LED);
                nosleep = 0;
                button_flag = 0;
                buttInt1Status = 0;
              }
            }
          }
        } else {
          SLEEP_TIME_W = SLEEP_TIME;
          send_Brigh(1);
          countbatt++;
          if (countbatt == C_BATT_TIME) {
            sendBatteryStatus(1);
            countbatt = 0;
          }
          nosleep = 0;
        }
      } else {
        if (millis() - configMillis &gt; 30000) {
          blinky(3, 3, GREEN_LED);
          configMode = 0;
          nosleep = 0;
          button_flag = 0;
          buttInt1Status = 0;
        }
      }
    } else {
      if (buttInt1Status == PIN_BUTTON1) {

        if (digitalRead(PIN_BUTTON1) == 0 &amp;&amp; button_flag == 0) {
          button_flag = 1;
          nosleep = 1;
          previousMillis = millis();
          ledsOff();
        }

        if (digitalRead(PIN_BUTTON1) == 0 &amp;&amp; button_flag == 1) {
          if ((millis() - previousMillis &gt; 0) &amp;&amp; (millis() - previousMillis &lt;= 500))
          {
            ledsOff();
          }
          if ((millis() - previousMillis &gt; 500) &amp;&amp; (millis() - previousMillis &lt;= 2500))
          {
            lightMillisR = millis();
            onoff = !onoff;
            digitalWrite(BLUE_LED, onoff);
          }
          if ((millis() - previousMillis &gt; 2500) &amp;&amp; (millis() - previousMillis &lt;= 2750))
          {
            ledsOff();
          }
          if ((millis() - previousMillis &gt; 2750) &amp;&amp; (millis() - previousMillis &lt;= 4750)) {
            if (millis() - lightMillisR &gt; 50) {
              lightMillisR = millis();
              onoff = !onoff;
              digitalWrite(RED_LED, onoff);
            }
          }

          if (millis() - previousMillis &gt; 4750) {
            ledsOff();
            blinky(3, 1, GREEN_LED);
            button_flag = 0;
            nosleep = 0;
            buttInt1Status = 0;
          }
        }

        if (digitalRead(PIN_BUTTON1) == 1 &amp;&amp; button_flag == 1) {
          if (millis() - previousMillis &lt;= 500)
          {
            ledsOff();
            button_flag = 0;
            nosleep = 0;
            buttInt1Status = 0;
          }
          if ((millis() - previousMillis &gt; 500) &amp;&amp; (millis() - previousMillis &lt;= 2500))
          {
           ledsOff();
            blinky(1, 1, BLUE_LED);
            check_parent();
            button_flag = 0;
            nosleep = 0;
            buttInt1Status = 0; 
          }

          if ((millis() - previousMillis &gt; 2500) &amp;&amp; (millis() - previousMillis &lt;= 2750))
          {
           ledsOff();
            button_flag = 0;
            nosleep = 0;
            buttInt1Status = 0; 
          }

          if ((millis() - previousMillis &gt; 2750) &amp;&amp; (millis() - previousMillis &lt;= 4750))
          {
            ledsOff();
            blinky(3, 3, RED_LED);
            new_device();
          }

          if (millis() - previousMillis &gt; 4750)
          {
            ledsOff();
            button_flag = 0;
            nosleep = 0;
            buttInt1Status = 0;
          }
        }
      } else {
        check_parent();
      }
    }
  }

  if (_transportSM.failureCounter &gt; 0)
  {
    _transportConfig.parentNodeId = loadState(101);
    _transportConfig.nodeId = myid;
    _transportConfig.distanceGW = loadState(103);
    mypar = _transportConfig.parentNodeId;
    nosleep = 0;
    flag_fcount = 1;
    err_delivery_beat = 5;
    happy_node_mode();
    gateway_fail();
  }

  if (configMode == 0) {
    if (nosleep == 0) {
      oldmillis = millis();
      axelInt1Status = 0;
      buttInt1Status = 0;
      wait(100);
      sleep(SLEEP_TIME_W, false);
      wait(50);
      nosleep = 1;
    }
  }
}



float GetWpm()
{
  float SunLuxCoef = 0.0079;
  float Wpm_temp = 0;
  Wpm_temp = (float)brightness;
  Wpm_temp *= SunLuxCoef;
  return Wpm_temp;
}



void blinky(uint8_t pulses, uint8_t repit, uint8_t ledColor) {
  for (int x = 0; x &lt; repit; x++) {
    if (x &gt; 0) {
      sleep(300);
    }
    for (int i = 0; i &lt; pulses; i++) {
      if (i &gt; 0) {
        sleep(80);
      }
      digitalWrite(ledColor, LOW);
      sleep(20);
      digitalWrite(ledColor, HIGH);
    }
  }
}



void ledsOff() {
  digitalWrite(RED_LED, HIGH);
  digitalWrite(GREEN_LED, HIGH);
  digitalWrite(BLUE_LED, HIGH);
}



void nRF_Init() {
  NRF_POWER-&gt;DCDCEN = 1;
  NRF_NFCT-&gt;TASKS_DISABLE = 1;
  NRF_NVMC-&gt;CONFIG = 1;
  NRF_UICR-&gt;NFCPINS = 0;
  NRF_NVMC-&gt;CONFIG = 0;
  NRF_SAADC -&gt;ENABLE = 0;
  NRF_PWM0  -&gt;ENABLE = 0;
  NRF_PWM1  -&gt;ENABLE = 0;
  NRF_PWM2  -&gt;ENABLE = 0;
  NRF_TWIM1 -&gt;ENABLE = 0;
  NRF_TWIS1 -&gt;ENABLE = 0;
  NRF_RADIO-&gt;TXPOWER = 8;
}



void sensors_Init() {
  Wire.begin();
  wait(100);
  light.begin();
  wait(100);
  lis2 = new LIS2DW12Sensor (&amp;Wire);
  vibro_Init();
  if (isTransportReady() == true) {
    blinky(3, 1, BLUE_LED);
    wait(200);
    blinky(3, 1, GREEN_LED);
    wait(200);
    blinky(3, 1, RED_LED);
    SLEEP_TIME_W = SLEEP_TIME;
    send_Brigh(0);
    wait(50);
    sendBatteryStatus(0);
    axel_time = millis();
  } else {
    blinky(5, 3, RED_LED);
  }
}



void vibro_Init() {
  if (conf_vibro_set == 1) {
    lis2-&gt;ODRTEMP = ODR_1Hz6_LP_ONLY;
  }
  if (conf_vibro_set == 2) {
    lis2-&gt;ODRTEMP = ODR_12Hz5;
  }
  if (conf_vibro_set == 3) {
    lis2-&gt;ODRTEMP = ODR_25Hz;
  }
  if (conf_vibro_set == 4) {
    lis2-&gt;ODRTEMP = ODR_100Hz;
  }
  if (conf_vibro_set == 5) {
    lis2-&gt;ODRTEMP = ODR_200Hz;
  }
  lis2-&gt;Enable_X();
  wait(50);
  lis2-&gt;Enable_Wake_Up_Detection();
  wait(50);
}



void board_Init() {
  pinMode(PIN_BUTTON1, INPUT);
  pinMode(AXEL_INT1, INPUT);
  pinMode(AXEL_INT2, INPUT);
  pinMode(AMBI_INT, INPUT);
  pinMode(RED_LED, OUTPUT);
  pinMode(GREEN_LED, OUTPUT);
  pinMode(BLUE_LED, OUTPUT);
  ledsOff();
}



void send_Axel() {
  if (millis() - axel_time &gt;= 5000) {
    blinky(6, 1, RED_LED);
    lis2-&gt;Disable_Wake_Up_Detection();
    wait(100);
    if (_transportConfig.parentNodeId == 0) {
      if (send(vibroMsg.set(vibro))) {
        wait(100);
        err_delivery_beat = 0;
        if (flag_nogateway_mode == 1) {
          flag_nogateway_mode = 0;
          CORE_DEBUG(PSTR("</span>MyS: NORMAL GATEWAY MODE\n<span class="hljs-string">"));
          err_delivery_beat = 0;
        }
      } else {
        _transportSM.failedUplinkTransmissions = 0;
        if (err_delivery_beat &lt; 5) {
          err_delivery_beat++;
        }
        if (err_delivery_beat == 4) {
          if (flag_nogateway_mode == 0) {
            gateway_fail();
            CORE_DEBUG(PSTR("</span>MyS: LOST GATEWAY MODE\n<span class="hljs-string">"));
          }
        }
      }
      lis2-&gt;Enable_Wake_Up_Detection();
      wait(100);
      axel_time = millis();
      nosleep = 0;
    }
    if (_transportConfig.parentNodeId &gt; 0) {
      send(vibroMsg.set(vibro), 1);
      wait(2500, C_SET, V_TRIPPED);
      if (Ack_TL == 1) {
        Ack_TL = 0;
        err_delivery_beat = 0;
        //sleep_flag = 0;
        if (flag_nogateway_mode == 1) {
          flag_nogateway_mode = 0;
          CORE_DEBUG(PSTR("</span>MyS: NORMAL GATEWAY MODE\n<span class="hljs-string">"));
          err_delivery_beat = 0;
        }
      } else {
        _transportSM.failedUplinkTransmissions = 0;
        if (err_delivery_beat &lt; 5) {
          err_delivery_beat++;
        }
        if (err_delivery_beat == 4) {
          if (flag_nogateway_mode == 0) {
            gateway_fail();
            CORE_DEBUG(PSTR("</span>MyS: LOST GATEWAY MODE\n<span class="hljs-string">"));
          }
        }
      }
      lis2-&gt;Enable_Wake_Up_Detection();
      wait(100);
      axel_time = millis();
      nosleep = 0;
    }
  } else {
    nosleep = 0;
  }
}



void send_Brigh(bool start) {
  brightness = light.get_lux() * 2;
  wait(50);
  if (start == 1) {
    if (abs(brightness - lastbrightness) &gt;= brightThreshold) {
      if (_transportConfig.parentNodeId == 0) {
        if (send(brightMsg.set(brightness, 0))) {
          err_delivery_beat = 0;
          if (flag_nogateway_mode == 1) {
            flag_nogateway_mode = 0;
            CORE_DEBUG(PSTR("</span>MyS: NORMAL GATEWAY MODE\n<span class="hljs-string">"));
            err_delivery_beat = 0;
          }
          lastbrightness = brightness;
          if (wpm_enable == 1) {
            Wpm = GetWpm();
            wait(100);
            send(wpmMsg.set(Wpm, 0));
          }
          wait(50);
          blinky(2, 2, BLUE_LED);
        } else {
          _transportSM.failedUplinkTransmissions = 0;
          if (err_delivery_beat &lt; 5) {
            err_delivery_beat++;
          }
          if (err_delivery_beat == 4) {
            if (flag_nogateway_mode == 0) {
              gateway_fail();
              CORE_DEBUG(PSTR("</span>MyS: LOST GATEWAY MODE\n<span class="hljs-string">"));
            }
          }
        }
      }
      if (_transportConfig.parentNodeId &gt; 0) {
        send(brightMsg.set(brightness, 0), 1);
        wait(2500, C_SET, V_LEVEL);
        if (Ack_TL == 1) {
          Ack_TL = 0;
          err_delivery_beat = 0;
          if (flag_nogateway_mode == 1) {
            flag_nogateway_mode = 0;
            CORE_DEBUG(PSTR("</span>MyS: NORMAL GATEWAY MODE\n<span class="hljs-string">"));
            err_delivery_beat = 0;
          }
          lastbrightness = brightness;
          if (wpm_enable == 1) {
            Wpm = GetWpm();
            wait(100);
            send(wpmMsg.set(Wpm, 0));
          }
          wait(50);
          blinky(2, 2, BLUE_LED);
        } else {
          _transportSM.failedUplinkTransmissions = 0;
          if (err_delivery_beat &lt; 5) {
            err_delivery_beat++;
          }
          if (err_delivery_beat == 4) {
            if (flag_nogateway_mode == 0) {
              gateway_fail();
              CORE_DEBUG(PSTR("</span>MyS: LOST GATEWAY MODE\n<span class="hljs-string">"));
            }
          }
        }
      }
    }
  } else {
    send(brightMsg.set(brightness, 0));
    lastbrightness = brightness;
    if (wpm_enable == 1) {
      Wpm = GetWpm();
      wait(100);
      send(wpmMsg.set(Wpm, 0));
    }
    wait(50);
    blinky(2, 2, BLUE_LED);
  }
}



void interrupt_Init() {
  //***
  //SET
  //NRF_GPIO_PIN_NOPULL
  //NRF_GPIO_PIN_PULLUP
  //NRF_GPIO_PIN_PULLDOWN
  //***
  nrf_gpio_cfg_input(PIN_BUTTON1, NRF_GPIO_PIN_PULLUP);
  nrf_gpio_cfg_input(AXEL_INT1, NRF_GPIO_PIN_NOPULL);
  APP_GPIOTE_INIT(APP_GPIOTE_MAX_USERS);
  PIN_BUTTON1_MASK = 1 &lt;&lt; PIN_BUTTON1;
  AXEL_INT1_MASK = 1 &lt;&lt; AXEL_INT1;
  //  app_gpiote_user_register(p_user_id, pins_low_to_high_mask, pins_high_to_low_mask, event_handler)
  app_gpiote_user_register(&amp;m_gpiote_user_id, AXEL_INT1_MASK, PIN_BUTTON1_MASK, gpiote_event_handler);
  app_gpiote_user_enable(m_gpiote_user_id);
  axelInt1Status = 0;
  buttInt1Status = 0;
}



void gpiote_event_handler(uint32_t event_pins_low_to_high, uint32_t event_pins_high_to_low)
{
  MY_HW_RTC-&gt;CC[0] = (MY_HW_RTC-&gt;COUNTER + 2);

  if (PIN_BUTTON1_MASK &amp; event_pins_high_to_low) {
    if ((buttInt1Status == 0) &amp;&amp; (axelInt1Status == 0)) {
      buttInt1Status = PIN_BUTTON1;
    }
  }
  if (flag_nogateway_mode == 0) {
    if (configMode == 0) {
      if (AXEL_INT1_MASK &amp; event_pins_low_to_high) {
        if ((axelInt1Status == 0) &amp;&amp; (buttInt1Status == 0)) {
          axelInt1Status = AXEL_INT1;
        }
      }
    }
  }

  /***
    if ((PIN_BUTTON_MASK &amp; event_pins_low_to_high) || (PIN_BUTTON1_MASK &amp; event_pins_high_to_low))
  ***/
}



void device_Conf() {
  conf_vibro_set = loadState(230);
  if ((conf_vibro_set &gt; 5) || (conf_vibro_set == 0)) {
    conf_vibro_set = 1;
    saveState(230, conf_vibro_set);
  }

  wpm_enable = loadState(240);
  if (wpm_enable &gt; 1) {
    wpm_enable = 0;
    saveState(240, wpm_enable);
  }

  interval_reading_lux  = loadState(220);
  if (interval_reading_lux &gt; 60) {
    interval_reading_lux = 60;
    saveState(230, interval_reading_lux);
  } else if (interval_reading_lux &lt; 1) {
    interval_reading_lux = 1;
    saveState(230, interval_reading_lux);
  }

  SLEEP_TIME = SLEEP_TIME_TEMP * interval_reading_lux;
  C_BATT_TIME = BATT_TIME / SLEEP_TIME;
}



void sendBatteryStatus(bool start) {
  sleep(5000);
  wait(200);
  batteryVoltage = hwCPUVoltage();
  wait(10);
  batt_cap = battery_level_in_percent(batteryVoltage);
  if (start == 1) {
    if (batt_cap &lt; old_batt_cap) {
      sendBatteryLevel(battery_level_in_percent(batteryVoltage), 1);
      wait(2500, C_INTERNAL, I_BATTERY_LEVEL);
      old_batt_cap = batt_cap;
    }
  } else {
    sendBatteryLevel(battery_level_in_percent(batteryVoltage), 1);
    wait(2500, C_INTERNAL, I_BATTERY_LEVEL);
  }

  linkQuality = calculationRxQuality();
  if (linkQuality != old_linkQuality) {
    wait(10);
    sendSignalStrength(linkQuality);
    wait(50);
    old_linkQuality = linkQuality;
  }
}



bool sendSignalStrength(const int16_t level, const bool ack)
{
  return _sendRoute(build(_msgTmp, GATEWAY_ADDRESS, SIGNAL_Q_ID, C_SET, V_VAR1,
                          ack).set(level));
}
int16_t calculationRxQuality() {
  int16_t nRFRSSI_temp = transportGetReceivingRSSI();
  int16_t nRFRSSI = map(nRFRSSI_temp, -85, -40, 0, 100);
  if (nRFRSSI &lt; 0) {
    nRFRSSI = 0;
  }
  if (nRFRSSI &gt; 100) {
    nRFRSSI = 100;
  }
  return nRFRSSI;
}



void happy_init() {
  //hwWriteConfig(EEPROM_NODE_ID_ADDRESS, 255); // ******************** checking the node config reset *************************

  if (hwReadConfig(EEPROM_NODE_ID_ADDRESS) == 0) {
    hwWriteConfig(EEPROM_NODE_ID_ADDRESS, 255);
  }
  if (loadState(100) == 0) {
    saveState(100, 255);
  }
  CORE_DEBUG(PSTR("</span>EEPROM NODE ID: %d\n<span class="hljs-string">"), hwReadConfig(EEPROM_NODE_ID_ADDRESS));
  CORE_DEBUG(PSTR("</span>USER MEMORY SECTOR NODE ID: %d\n<span class="hljs-string">"), loadState(100));

  if (hwReadConfig(EEPROM_NODE_ID_ADDRESS) == 255) {
    mtwr = 0;
  } else {
    mtwr = 10000;
    no_present();
  }
  CORE_DEBUG(PSTR("</span>MY_TRANSPORT_WAIT_MS: %d\n<span class="hljs-string">"), mtwr);

}



void new_device() {
  hwWriteConfig(EEPROM_NODE_ID_ADDRESS, 255);
  saveState(100, 255);
  wdt_enable(WDTO_15MS);
}



void config_Happy_node() {
  if (mtwr == 0) {
    myid = getNodeId();
    saveState(100, myid);
    mypar = _transportConfig.parentNodeId;
    old_mypar = mypar;
    master_id = 0; // *************************** master slave mode is not initialized in this example, ..stub *******************************
    saveState(101, mypar);
    saveState(102, _transportConfig.distanceGW);
  }
  if (mtwr != 0) {
    myid = getNodeId();
    if (myid != loadState(100)) {
      saveState(100, myid);
    }
    if (isTransportReady() == true) {
      mypar = _transportConfig.parentNodeId;
      master_id = 0; // *************************** master slave mode is not initialized in this example, ..stub *******************************
      if (mypar != loadState(101)) {
        saveState(101, mypar);
      }
      if (_transportConfig.distanceGW != loadState(102)) {
        saveState(102, _transportConfig.distanceGW);
      }
      present_only_parent();
    }
    if (isTransportReady() == false)
    {
      no_present();
      flag_fcount = 1;
      err_delivery_beat = 5;
      _transportConfig.nodeId = myid;
      _transportConfig.parentNodeId = loadState(101);
      _transportConfig.distanceGW = loadState(102);
      mypar = _transportConfig.parentNodeId;
      happy_node_mode();
      gateway_fail();
    }
  }
}



void no_present() {
  _coreConfig.presentationSent = true;
  _coreConfig.nodeRegistered = true;
}



void happy_node_mode() {
  _transportSM.findingParentNode = false;
  _transportSM.transportActive = true;
  _transportSM.uplinkOk = true;
  _transportSM.pingActive = false;
  transportSwitchSM(stReady);
  _transportSM.failureCounter = 0;
}



void gateway_fail() {
  flag_nogateway_mode = 1;
  flag_update_transport_param = 0;
  SLEEP_TIME_W = SLEEP_TIME / 2;
  lis2-&gt;Disable_Wake_Up_Detection();
}



void find_parent_process() {
  flag_update_transport_param = 1;
  flag_find_parent_process = 0;
  CORE_DEBUG(PSTR("</span>MyS: STANDART TRANSPORT MODE IS RESTORED\n<span class="hljs-string">"));
  err_delivery_beat = 0;
  lis2-&gt;Enable_Wake_Up_Detection();
}



void update_Happy_transport() {
  CORE_DEBUG(PSTR("</span>MyS: UPDATE TRANSPORT CONFIGURATION\n<span class="hljs-string">"));
  mypar = _transportConfig.parentNodeId;
  master_id = 0; // *************************** master slave mode is not initialized in this example, ..stub *******************************
  if (mypar != loadState(101))
  {
    saveState(101, mypar);
  }
  if (_transportConfig.distanceGW != loadState(102))
  {
    saveState(102, _transportConfig.distanceGW);
  }
  present_only_parent();
  wait(50);
  nosleep = 0;
  flag_update_transport_param = 0;
}



void present_only_parent() {
  if (old_mypar != mypar) {
    CORE_DEBUG(PSTR("</span>MyS: SEND LITTLE PRESENT:) WITH PARENT ID\n<span class="hljs-string">"));
    if (_sendRoute(build(_msgTmp, 0, NODE_SENSOR_ID, C_INTERNAL, 6).set(mypar))) {
      flag_sendRoute_parent = 0;
      old_mypar = mypar;
    } else {
      flag_sendRoute_parent = 1;
    }
  }
}



void check_parent() {
  _transportSM.findingParentNode = true;
  CORE_DEBUG(PSTR("</span>MyS: SEND FIND PARENT REQUEST, WAIT RESPONSE\n<span class="hljs-string">"));
  _sendRoute(build(_msg, 255, NODE_SENSOR_ID, C_INTERNAL, 7).set("</span><span class="hljs-string">"));
  wait(1500, C_INTERNAL, 8);
  if (_msg.sensor == 255) {
    if (mGetCommand(_msg) == 3) {
      if (_msg.type == 8) {
        Ack_FP = 1;
        CORE_DEBUG(PSTR("</span>MyS: PARENT RESPONSE FOUND\n<span class="hljs-string">"));
      }
    }
  }
  if (Ack_FP == 1) {
    CORE_DEBUG(PSTR("</span>MyS: FIND PARENT PROCESS\n<span class="hljs-string">"));
    Ack_FP = 0;
    transportSwitchSM(stParent);
    flag_nogateway_mode = 0;
    flag_find_parent_process = 1;
    SLEEP_TIME_W = SLEEP_TIME;
    problem_mode_count = 0;
  } else {
    _transportSM.findingParentNode = false;
    CORE_DEBUG(PSTR("</span>MyS: PARENT RESPONSE NOT FOUND\n<span class="hljs-string">"));
    _transportSM.failedUplinkTransmissions = 0;
    nosleep = 0;
    if (problem_mode_count &lt; 24) {
      CORE_DEBUG(PSTR("</span>PROBLEM MODE COUNTER: %d\n<span class="hljs-string">"), problem_mode_count);
      problem_mode_count++;
      SLEEP_TIME_W = SLEEP_TIME / 100 * 120;
    } else if (problem_mode_count == 24) {
      SLEEP_TIME_W = SLEEP_TIME * 30;
      CORE_DEBUG(PSTR("</span>PROBLEM MODE COUNTER: %d\n<span class="hljs-string">"), problem_mode_count);
    }
  }
}



void receive(const MyMessage &amp; message)
{
  if (message.sensor == ENABLE_WPM_SENS_CHILD_ID) {
    if (message.type == V_VAR1) {
      if (mGetCommand(message) == C_SET) {
        if (message.isEcho()) {
          Ack_TL = 1;
        } else {
          wpm_enable = message.getBool();
          saveState(240, wpm_enable);
          wait(10);
          send(conf_wpmMsg.set(wpm_enable));
          wait(50);
          blinky(3, 3, GREEN_LED);
          configMode = 0;
          nosleep = 0;
          button_flag = 0;
          buttInt1Status = 0;
        }
      }
    }
  }

  if (message.sensor == LEVEL_SENSIV_V_SENS_CHILD_ID) {
    if (message.type == V_VAR1) {
      if (mGetCommand(message) == C_SET) {
        if (message.isEcho()) {
          Ack_TL = 1;
        } else {
          conf_vibro_set = message.getByte();
          vibro_Init();
          saveState(230, conf_vibro_set);
          wait(10);
          send(conf_vsensMsg.set(conf_vibro_set));
          wait(50);
          blinky(3, 3, GREEN_LED);
          configMode = 0;
          nosleep = 0;
          button_flag = 0;
          buttInt1Status = 0;
        }
      }
    }
  }

  if (message.sensor == INTERVAL_R_LUX_CHILD_ID) {
    if (message.type == V_VAR1) {
      if (mGetCommand(message) == C_SET) {
        if (message.isEcho()) {
          Ack_TL = 1;
        } else {
          interval_reading_lux = message.getByte();
          SLEEP_TIME = SLEEP_TIME_TEMP * interval_reading_lux;
          C_BATT_TIME = BATT_TIME / SLEEP_TIME;
          saveState(220, interval_reading_lux);
          wait(10);
          send(conf_interv_rluxMsg.set(interval_reading_lux));
          wait(50);
          blinky(3, 3, GREEN_LED);
          configMode = 0;
          nosleep = 0;
          button_flag = 0;
          buttInt1Status = 0;
        }
      }
    }
  }

  if (message.sensor == LUX_SENS_CHILD_ID) {
    if (message.type == V_LEVEL) {
      if (mGetCommand(message) == C_SET) {
        if (message.isEcho()) {
          Ack_TL = 1;
        }
      }
    }
  }

  if (message.sensor == V_SENS_CHILD_ID) {
    if (message.type == V_TRIPPED) {
      if (mGetCommand(message) == C_SET) {
        if (message.isEcho()) {
          Ack_TL = 1;
        }
      }
    }
  }

  if (mGetCommand(message) == 0) {
    PRESENT_ACK = 1;
    CORE_DEBUG(PSTR("</span>MyS: !!!ACK OF THE PRESENTATION IN THE FUNCTION RECEIVE RECEIVED!!!\n<span class="hljs-string">"));
  }
}
</span></code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆgithubï¼ˆè¿½åŠ ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚½ãƒ¼ã‚¹ã€ã‚¹ã‚­ãƒ¼ãƒ ã€ã‚¬ãƒ¼ãƒ™ãƒ©ã€BOMï¼‰ï¼š</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/smartboxchannel/EFEKTA-LIS2DW12-MAX44009-E73C </font></font></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚»ãƒ³ã‚µãƒ¼ã®ç‰¹æ€§ï¼š</font></font></b><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‹•ä½œé›»åœ§ç¯„å›²2-3 Vã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚¹ãƒªãƒ¼ãƒ—ãƒ¢ãƒ¼ãƒ‰ã§6.7Î¼Aã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§8mAã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E73-2Gâ€‹â€‹4M08S1C nRF52840ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX44009å‘¨å›²å…‰ã‚»ãƒ³ã‚µãƒ¼ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIS2DW12 \ LIS2DH12 3è»¸MEMSåŠ é€Ÿåº¦è¨ˆã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RGB LED</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒœã‚¿ãƒ³ã€</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒãƒ¼ãƒˆSWD +ã‚·ãƒªã‚¢ãƒ«ã€‚</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Majordomo UDã‚·ã‚¹ãƒ†ãƒ ã§ã®ã‚»ãƒ³ã‚µãƒ¼æ“ä½œã®ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã¯ã€MySensorsãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ã‚µãƒãƒ¼ãƒˆãŒè¿½åŠ ã•ã‚ŒãŸã™ã¹ã¦ã®UDã§è‡ªç„¶ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚ã“ã‚Œã¯ã»ã¨ã‚“ã©ã™ã¹ã¦ã®ã“ã¨ãŒã‚ã‹ã£ã¦ã„ã¾ã™ã€‚</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bm/xj/zj/bmxjzjfpzn0wuvccte-w5xqtn3e.png"><br>
<br>
<img src="https://habrastorage.org/webt/5t/9k/xr/5t9kxrdt4agswilm1yukte51m4g.jpeg"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒœãƒ¼ãƒ‰ã®å†…éƒ¨ã®ãƒ“ãƒ‡ã‚ªã€ã‚»ãƒ³ã‚µãƒ¼ã®ä¾‹ã€è¨­å®šã®ä¾‹</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/I2ywIxp-RsE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã‚»ãƒ³ã‚µãƒ¼å†™çœŸ</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/webt/wc/xl/hk/wcxlhkb-zb-paorsmpqx4jwkg-4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/mh/f-/ak/mhf-akawv5xgbnuijpdv0edgcoo.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/ie/1q/ig/ie1qign_51mb0ya5ysfiurmdgkm.jpeg"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ãŠãã‚‰ãã“ã‚Œã§å››æ¨äº”å…¥ã—ã¾ã™ã€‚</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MYSENSORSï¼ˆãƒœãƒ¼ãƒ‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€Arduino IDEç’°å¢ƒã§ã®nRF5ãƒã‚¤ã‚¯ãƒ­ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®æ“ä½œã€mysensorsãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ä½¿ç”¨ã«é–¢ã™ã‚‹ãƒ’ãƒ³ãƒˆã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦ã®è­°è«–-ãƒ†ãƒ¬ã‚°ãƒ©ãƒ ãƒãƒ£ãƒƒãƒˆ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@mysensors_rus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
å¹¸é‹ã¨å¹¸é‹ã‚’ç¥ˆã‚Šã¾ã™ï¼</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS /ã‚·ã‚§ã‚¢ã™ãã«è¨ˆç”»ãŒã‚ã‚Š</font><font style="vertical-align: inherit;">ã€é›»å­ã‚¤ãƒ³ã‚¯ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚’å‚™ãˆãŸç§ã®æ¸©åº¦ã¨æ¹¿åº¦ã‚»ãƒ³ã‚µãƒ¼ã®</font><font style="vertical-align: inherit;">æ›´æ–°ã•ã‚ŒãŸ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒ‰ãƒ©ãƒ•ãƒˆ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã«é–¢ã™ã‚‹è¨˜äº‹ãŒã¾ã‚‚ãªãå…¬é–‹ã•ã‚Œ</font><font style="vertical-align: inherit;">ã¾ã™ã€‚æœ€å¾Œã«ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ãªãå®Œæˆã—ãŸãƒ‡ãƒã‚¤ã‚¹ã«ãªã‚Šã¾ã—ãŸã€‚ãƒªãƒ¼ãƒ‰ã‚¹ã‚¤ãƒƒãƒã€åŠ é€Ÿåº¦è¨ˆã€ç£å ´ã‚»ãƒ³ã‚µãƒ¼ã¨ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãƒ¼ã‚’å‚™ãˆãŸé–‹é–‰ã‚»ãƒ³ã‚µãƒ¼ã«é–¢ã™ã‚‹è¨˜äº‹ã‚‚ã‚ã‚Šã¾ã™ã€‚ nRF52811ã®å†™çœŸã¨ã‚¹ãƒã‚¤ãƒ©ãƒ¼ã®ãƒ“ãƒ‡ã‚ªã€‚</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ãƒã‚¿ãƒãƒ¬</font></font></b><div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/T66y83lF-xg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<img src="https://habrastorage.org/webt/rg/dh/u2/rgdhu2htxcazyavpoh5mgf71hfo.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/uz/mx/_n/uzmx_nvuyazh3nihtfjxgb_tkpi.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/xn/7s/a2/xn7sa2lbrn3g2jvje5mr1wbcuh8.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/4y/-s/la/4y-slajjmwr_ydmqdq0v2vcify4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/90/ub/i7/90ubi72wfku6mlf7dshkfl2nqfo.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/p9/fe/9e/p9fe9ehr29jqggmkhutdipmqygu.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/sn/gm/ou/sngmou0381zr6ias3gbtsfez3lg.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/o5/t2/j-/o5t2j-gncldts6gsxg7kxl26dce.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/jt/vl/ro/jtvlrov-l3qclnkgilhu7aqpls4.jpeg"><br>
<br>
<img src="https://habrastorage.org/webt/be/3v/je/be3vjejo_xhuxhpc_hyg9fmz4ns.jpeg"><br>
</div></div></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja478950/index.html">ä»Šé€±ã®çµæœï¼šHuaweiãŒåˆ¶è£ã«é©å¿œã—ã€ãƒ—ãƒ¼ãƒãƒ³å¤§çµ±é ˜ãŒã‚»ãƒ³ã‚»ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãªæ³•å¾‹ã«ç½²åã—ã€ãƒ­ã‚·ã‚¢ã§ShutterStockãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ</a></li>
<li><a href="../ja478952/index.html">Onyx Boox Note Proã§1ã‹æœˆ</a></li>
<li><a href="../ja478954/index.html">REï¼šITã«å¯¾ã™ã‚‹æã‚Œã¨å«Œæ‚ª</a></li>
<li><a href="../ja478956/index.html">Androidç”¨Chrome VoIPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ãƒ“ãƒ‡ã‚ªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‚™ãˆãŸ3CX V16 Update 4ãƒ™ãƒ¼ã‚¿ç‰ˆã®ç´¹ä»‹</a></li>
<li><a href="../ja478958/index.html">ã‚ã‚‰ã‚†ã‚‹è¦æ¨¡ã®ä¼æ¥­å‘ã‘ã®å®Œå…¨ãªWindows 10ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰</a></li>
<li><a href="../ja478962/index.html">Ilya Yakyamsevï¼šåŠ¹ç‡ãŒä¸ŠãŒã‚‰ãªã„</a></li>
<li><a href="../ja478966/index.html">ç¾ä»£ã®ä¸–ç•Œã§ç”Ÿãæ®‹ã‚Šã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºè€…ã«ãªã‚‹ã«ã¯ï¼Ÿ</a></li>
<li><a href="../ja478968/index.html">SpaceXãŒNanorackã‚’ç™ºè¡¨ã—ã¦å®‡å®™ãƒ‡ãƒ–ãƒªè»Œé“ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ</a></li>
<li><a href="../ja478970/index.html">DIYé€šè©±ãƒœã‚¿ãƒ³ãƒ‘ãƒ¼ãƒˆ2. Raspberry Piã®ãƒ†ãƒ¬ãƒ“é›»è©±</a></li>
<li><a href="../ja478972/index.html">Miroãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ã‚¹ãƒˆã®å‹è€…</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>