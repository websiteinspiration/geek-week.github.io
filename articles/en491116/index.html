<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüé® üë® ü¶ê Modern Identification Standards: OAuth 2.0, OpenID Connect, WebAuthn üó®Ô∏è ‚õÖÔ∏è üõ£Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To let or not to let? That is the question‚Ä¶
 
 Now on many sites we see the opportunity to register or log in using social networks, and some sites of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Modern Identification Standards: OAuth 2.0, OpenID Connect, WebAuthn</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491116/"><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To let or not to let? </font><font style="vertical-align: inherit;">That is the question‚Ä¶</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now on many sites we see the opportunity to register or log in using social networks, and some sites offer the use of external security keys or fingerprints. What is it? Well-designed security standards or proprietary implementations? Can we trust these technologies and use them for website development and in everyday life? Let's get it right. So, now there are several standards and technologies for identifying users of OAuth 2.0, OpenID Connect, WebAuthn, SAML 2.0, Credential Management API, etc. In this article I will talk about the three most promising protocols OAuth 2.0, OpenID Connect and WebAuthn. And in order to understand how to put them into practice, we will do three laboratory work. We‚Äôll use GitHub and Google as platforms for identifying users.on which most have accounts.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gr/ue/zz/gruezz06ldvs0qknw9wpmjkfwuy.jpeg" alt="image"><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OAuth 2.0</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's start with the most famous OAuth 2.0 protocol. </font><font style="vertical-align: inherit;">It was published in 2012 as RFC 6749: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The OAuth 2.0 Authorization Framework</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Using OAuth 2.0, a user allows a specific site to receive their private data from social networks, but without transferring their logins / passwords to the site. </font><font style="vertical-align: inherit;">For example, when you register on a site through Facebook, then you just give this site permission to get your name, e-mail address and other private data from Facebook. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's deal with the technical implementation. </font><font style="vertical-align: inherit;">For simplicity, I will call any site that stores user credentials on the Social Network. </font><font style="vertical-align: inherit;">And MySite will name any site or application that wants to get user data from the Social Network. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rm/ea/-i/rmea-i9jk6jazdlwkiltnftc5_i.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The standard defines the following roles:</font></font><br>
<br>
<ul>
<li>Resource Owner ‚Äî ,    MySite          . </li>
<li>Client (  MySite) ‚Äî    ,        Authorization Server  Resource Server     .</li>
<li>Authorization Server ‚Äî    / ,   .</li>
<li>Resource Server ‚Äî    ,      API. Authorization Server  Resource Server      .</li>
</ul><br>
<h3>Authorization flow</h3><br>
<ul>
<li>     MySite  :</li>
<li> MySite  Name ( ), Homepage (   MySite)  Callback (,        ) </li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The social network gives out Client ID (sometimes called AppID) and Client Secret. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The developer ID must be registered in the Client ID and Client Secret.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now the process itself. </font><font style="vertical-align: inherit;">The details of specific implementations may vary, but the general logic will always be as follows:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/8u/pw/wi/8upwwi59teredqa6a2qxfuwfcag.png" alt="image"><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resource Owner logs on to Client (MySite), selects the option ‚Äúlog in using the Social Network‚Äù, the site redirects the user to the Social Network on the Authorization Server.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Authorization Server checks if the user has an active session and, if not, then displays the login form.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resource Owner enters his username / password and confirms that certain private data can be used by MySite, such as username or e-mail address.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authorization Server verifies the user and redirects to the Callback address with the authentication result and the ‚ÄúAuthorization Code‚Äù</font></font></li>
<li>  Client  ‚ÄúAuthorization Code‚Äù, Client ID  Client Secret.</li>
<li>Authorization Server      ‚Äúaccess token‚Äù   JWT (JSON Web Token),    .    JWT    ‚Äúrefresh token‚Äù, c        .</li>
<li>  Client         API,    ‚Äúaccess token‚Äù.</li>
<li>Resource Server  ‚Äúaccess token‚Äù (,    Authorization Server)      . </li>
</ol><br>
<h3>OAuth 2.0   (GitHub)</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are many instructions on how to implement OAuth 2.0 authorization using social networks. </font><font style="vertical-align: inherit;">I personally liked the following article: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authentication using GitHub OAuth 2.0 with NodeJS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It details the steps and provides a test program. </font><font style="vertical-align: inherit;">But in order to really understand the algorithm, it is better to go through all the steps with your hands (http requests from the browser or calls to curl). </font><font style="vertical-align: inherit;">Go. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To get started, register your application on GitHub: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/settings/applications/new</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Set the parameters:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Home page: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySite / home</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Callback: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MySite / callback</font></font></a></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For authorization to work within its own site, the addresses must be real, but this is not necessary for laboratory work. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Get from GitHub:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client ID: ab8ec08a620c2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client Secret: e6fdd52b0a99e8fbe76b05c1b7bb93c1e</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of course, in all laboratory work all the values ‚Äã‚Äãare fake. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is how getting the Client ID and Secret on the GitHub website looks like: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/2b/vz/uo/2bvzuofpefaonhdqppk9cvinmac.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now we start authorization. </font><font style="vertical-align: inherit;">We believe that Step 1 has already been completed: the user logged onto MySite and selected ‚ÄúLog in using GitHub‚Äù. </font><font style="vertical-align: inherit;">Step 2 of call flow is a call in REST format:</font></font><br>
<br>
<pre><code class="xml hljs">https://github.com/login/oauth/authorize?client_id=ab8ec08a620c2</code></pre><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the address is the login point on github</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">client_id is the Client ID issued during registration</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result of this call, GitHub displays a window for authorization: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fh/0f/uq/fh0fuqockmtpmm2yrqkdxlf3gok.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 3: Enter the login / password to access GitHub </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 4: GitHub redirects the request to the Homepage, in this request we see code:</font></font><br>
<br>
<pre><code class="xml hljs">http://MySite/home?code=a29b348f63d21</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is no working site at this address, but the main thing for us is to know the code sent to form the next Step 5:</font></font><br>
<br>
<pre><code class="xml hljs">https://github.com/login/oauth/access_token?client_id=ab8ec08a620c2&amp;<font></font>
client_secret=e6fdd52b0a99e8fbe76b05c1b7bb93c1e&amp;<font></font>
code=a29b348f63d21</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the address is the access token receiving point on GitHub</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">client_id is the Client ID issued during registration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">client_secret is a Client Secret issued during registration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code is the code just sent</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 6: In response received access token:</font></font><br>
<br>
<pre><code class="json hljs">access_token=<span class="hljs-number">31</span>b71cbd372acdbb20ec1644b824f3dd0&amp;scope=&amp;token_type=bearer</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 7: Insert the access_token into the request header and call the GitHub API: </font></font><br>
<br>
<pre><code class="xml hljs">curl -H "Authorization: token 31b71cbd372acdbb20ec1644b824f3dd0" https://api.github.com/user</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 8: In response, we get JSON with useful information about me that you can use to create a profile on MySite:</font></font><br>
<br>
<pre><code class="json hljs">{
  <span class="hljs-attr">"login"</span>: <span class="hljs-string">"AlexeySushkov"</span>,
  <span class="hljs-attr">"html_url"</span>: <span class="hljs-string">"https://github.com/AlexeySushkov"</span>,
  <span class="hljs-attr">"repos_url"</span>: <span class="hljs-string">"https://api.github.com/users/AlexeySushkov/repos"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Alexey Sushkov"</span>,
  <span class="hljs-attr">"blog"</span>: <span class="hljs-string">"http://sushkov.ru"</span>,
  <span class="hljs-attr">"location"</span>: <span class="hljs-string">"St.Petersburg, Russia"</span>,
  <span class="hljs-attr">"email"</span>: <span class="hljs-string">"alexey.p.sushkov@gmail.com"</span>,<font></font>
 ..<font></font>
}  <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In fact, we examined only one OAuth 2.0 scenario. </font><font style="vertical-align: inherit;">There are several scenarios, each of which is used depending on the application, security considerations, deployment method, etc. </font><font style="vertical-align: inherit;">A description of all the scenarios can be found, for example, here: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OAuth 2.0 in a Nutshell</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Openid connect</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With OAuth 2.0 a little understood. </font><font style="vertical-align: inherit;">Now let's find out why we need OpenID Connect, which is an add-on for OAuth 2.0:</font></font><br>
<br>
<ul>
<li>C  OAuth 2.0     ..      access token,         .  access token                       MySite. OpenID Connect ‚Äî        (identity).        . </li>
<li>OpenID Connect         ‚Äúservice discovery‚Äù.      SSO (Single Sign-On),            .</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Let's look at the standard from the technical side. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
OpenID Connect (OIDC) is an open OpenID standard developed by the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenID Foundation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> consortium </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">OIDC extends OAuth 2.0 with the following key features:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authorization Server, in addition to access token and refresh token, returns an ‚Äúidentity token‚Äù (ID Token). </font><font style="vertical-align: inherit;">It is contained in the same JWT. </font><font style="vertical-align: inherit;">The following information can be extracted from ID Token: username, login time, ID Token expiration date. </font><font style="vertical-align: inherit;">Token IDs can be transferred between participants.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OIDC provides an additional API that allows you to request information about the user and his current sessions.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The interaction diagram in OpenID Connect looks the same as with OAuth. </font><font style="vertical-align: inherit;">The only difference in the content of the requests:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the initial request for code, an additional attribute, scope = openid, is added.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result of the algorithm, Client, in addition to access and refresh token, receives an Token ID.</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenID Connect: Lab (Google)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's see what Google will please us on this topic. </font><font style="vertical-align: inherit;">There are detailed instructions for configuring and using </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenID Connect from Google</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and a sandbox for using the Google API: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google OAuth 2.0 Playground</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here, as in the case of OAuth 2.0, we will go through the steps and look at the incoming data. </font><font style="vertical-align: inherit;">Similarly, we believe that the application is registered, Client ID and Client Secret are received, Step 1 is passed. </font><font style="vertical-align: inherit;">Step 2 of call flow is a call in REST format:</font></font><br>
<br>
<pre><code class="xml hljs">https://accounts.google.com/o/oauth2/v2/auth?<font></font>
response_type=code&amp;<font></font>
client_id=140797064495-b8b79j42m97nkkrlndfstikv8.apps.googleusercontent.com&amp;<font></font>
scope=openid%20email&amp;<font></font>
redirect_uri=http%3A//c18529.shared.hc.ru/wp-login.php&amp;<font></font>
state=765439764<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Google is a little more complicated, because </font><font style="vertical-align: inherit;">they pay more attention to safety:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">address is the login point on Google </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">response_type = code - expect to receive code in response</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">client_id - Client ID issued during registration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scope = openid email - what data do we want to access</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redirect_uri - redirect_uri specified during application registration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">state - the number generated by the Client, which is transmitted between Client and AS to protect against intruder interference.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 3: There is no password entry form, as </font><font style="vertical-align: inherit;">I was already logged in to Google. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 4: Google redirects the request to the Homepage, in this request we see code:</font></font><br>
<br>
<pre><code class="xml hljs">http://MySite?state=123&amp;code=4/xAFkcMzhyJhUErRJYwIyntSYN-WeJjfZHLiwWL4IaT-WkHzMU18xABlPmev-M_87wVbqTkQ1y93w6GB5&amp;scope=email+openid+https://www.googleapis.com/auth/userinfo.email&amp;authuser=0&amp;prompt=none
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As in the case of GitHub, there is no working website at this address, but this is not necessary, the main thing for us is to know the code in order to form the next Step 5. This is also a bit more complicated, because </font><font style="vertical-align: inherit;">Google requires a POST request, not a GET:</font></font><br>
<br>
<pre><code class="xml hljs">curl -d "code=4/xAFkcMzhyJhUErRJYwIyntSYN-WeJjfZHLiwWL4IaT-WkHzMU18xABlPmev-M_87wVbqTkQ1y93w6GB5&amp;client_id=140797064495-b8b79j42m97nkkrlndfstikv8.apps.googleusercontent.com&amp;<font></font>
client_secret=HMVctrTicW6RC1Q8T&amp;<font></font>
redirect_uri=http%3A//c18529.shared.hc.ru/wp-login.php&amp;<font></font>
grant_type=authorization_code" <font></font>
-H "Content-Type: application/x-www-form-urlencoded" -X POST https://oauth2.googleapis.com/token<font></font>
</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">address is the token receiving point on Google</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code is the code just sent</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">client_id is the Client ID issued during registration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">client_secret is a Client Secret issued during registration</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">grant_type = authorization_code - the only valid value from the standard</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 6: In response received access_token and id_token:</font></font><br>
<br>
<pre><code class="json hljs">{
  <span class="hljs-attr">"access_token"</span>: <span class="hljs-string">"ya29.Il_AB0KeKnjBJx0dhjm2nCLt1B-Mq0aQBW5T302JnlZfsxW1AXqLFfDJZRMi2R2WKG4OX4msKLjx4E4CSl4G_4ajAy3aqrf4pM0ic0jJr092pA67H9aktJktCbx"</span>,
  <span class="hljs-attr">"expires_in"</span>: <span class="hljs-number">3327</span>,
  <span class="hljs-attr">"scope"</span>: <span class="hljs-string">"openid https://www.googleapis.com/auth/userinfo.email"</span>,
  <span class="hljs-attr">"token_type"</span>: <span class="hljs-string">"Bearer"</span>,
  <span class="hljs-attr">"id_token"</span>: <span class="hljs-string">"eyJhbGciOiJSUzI1NiIsImtpZCI6IjE3ZDU1ZmY0ZTEwOTkxZDZiMGVmZDM5MmI5MWEzM2U1
‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶_‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.._4mUTiMNSAHljap1hLD2hAzgOZWuQ"</span>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What to do now with this wealth? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 7: With access_token everything is clear: we include it in an API call, for example GMail:</font></font><br>
 <br>
<pre><code class="xml hljs">curl -H "Authorization: Bearer ya29.a0Adw1xeWvFoxHKNICHnV6vFFj5TZdPQVlYD98h8wjW95ZEbHVui_pk7HGRoq3Q7MlVLV23xkVM0yyjSP8ClSlvfUy3b_IqvKQW5Lvwj38QzJhee-aH1grerB4pRpMzn_FGueigG_RGI56pKPgFBTr49cpynQy" https://www.googleapis.com/gmail/v1/users/alexey.p.sushkov@gmail.com/profile</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Step 8: In response, we get JSON with useful information:</font></font><br>
<br>
<pre><code class="json hljs">{
 <span class="hljs-attr">"emailAddress"</span>: <span class="hljs-string">"alexey.p.sushkov@gmail.com"</span>,
 <span class="hljs-attr">"messagesTotal"</span>: <span class="hljs-number">372543</span>,<font></font>
...<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now let's check the statement that id_token contains information for authenticating the user and maintaining the session. </font><font style="vertical-align: inherit;">To do this, you need to decrypt the contents. </font><font style="vertical-align: inherit;">The easiest way to do this is to contact the Google API at </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oauth2.googleapis.com/tokeninfo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and specify the received id_token as a parameter:</font></font><br>
<br>
<pre><code class="xml hljs">https://oauth2.googleapis.com/tokeninfo?id_token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjE3ZDU1ZmY0ZTEwOTkxZDZiMGVmZDM5MmI5MWEzM2U1NGMwZTIxOGIiLCJ0eXAiOi<font></font>
‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶_‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶...<font></font>
SVQ5GQni3irfOzOXYEiqijp6TjGa_a-3jKcEsU5TbasZmAIejsdVcNy2_4mUTiMNSAHljap1hLD2hAzgOZWuQ</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Got JSON:</font></font><br>
<pre><code class="json hljs">{
  <span class="hljs-attr">"iss"</span>: <span class="hljs-string">"https://accounts.google.com"</span>,
  <span class="hljs-attr">"email"</span>: <span class="hljs-string">"alexey.p.sushkov@gmail.com"</span>,
  <span class="hljs-attr">"email_verified"</span>: <span class="hljs-string">"true"</span>,
  <span class="hljs-attr">"iat"</span>: <span class="hljs-string">"1583257010"</span>,
  <span class="hljs-attr">"exp"</span>: <span class="hljs-string">"1583260610"</span>,
  <span class="hljs-attr">"typ"</span>: <span class="hljs-string">"JWT"</span><font></font>
...<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We see that id_token contains information about the user's login, time of receipt and lifetime of the token. </font><font style="vertical-align: inherit;">We can conclude that OpenID Connect from Google is working, and it can be used for relevant scenarios.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Webauthn</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web Authentication API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (also known as WebAuthn):</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The standard allows users to identify themselves on sites and in applications using external security keys (for example, USB keys) or by fingerprint and, subsequently, by other biometric data: face, retina. </font></font></li>
<li>   ‚Äî     /             ¬´Public key cryptography¬ª. Public key cryptography ‚Äî   ,     . Private key ( )      ,  public key ( )    .</li>
<li>    W3C (World Wide Web Consortium)  FIDO,   Google, Mozilla, Microsoft, Yubico. W3C    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow">HTTP, HTML, XML   </a>.          WebAuthn. WebAuthn    : Chrome, Firefox, Edge, Safari.</li>
</ul><br>
<h3></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compared to OAuth 2.0, the following roles are added to WebAuthn: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authenticator</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : an external security key (physical media or fingerprint scanner) that authenticates the user using various technologies, such as BlueTooth / NFC / USB. </font><font style="vertical-align: inherit;">Serves for:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generation of public key credentials (public / private key pairs). </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authenticator securely stores the private key in its memory</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passes the public key to external systems</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Signs data with a private key and transfers the result to external systems </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Authenticator uses the CTAP protocol (Client to Authenticator Protocols) to interact with the browser. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relying Party</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : performs the same function as the ‚ÄúAuthorization Server‚Äù in OAuth 2.0, namely, verifies the identity of the user. </font><font style="vertical-align: inherit;">Only in OAuth 2.0 it was the username / password, and in WenAuthn it was the public key credentials. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User Agent</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : integrates the browser and the network application, serves the same purposes as the Client in OAuth 2.0, namely, on the one hand, interacts with the user and provides him with a GUI, and on the other hand, interacts with systems that store user credentials .</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authorization flow</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Before starting the authentication process, just like in OAuth 2.0, you need to perform preparatory steps, only in OAuth 2.0 we registered the application, and in WebAuth 2.0 we register the user. </font><font style="vertical-align: inherit;">The Web Authentication API specifies two calls:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navigator.credentials.create - to create user credentials</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navigator.credentials.get - verifies user credentials </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, to register, you must call navigator.credentials.create. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result of this, the user‚Äôs Authenticator will store the private key for a specific site, and the public key will be stored in the Relying Party. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n3/lp/44/n3lp44opraxnvlnfnn4cf8ycoiq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, the authentication process will be as follows:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/g-/or/oeg-ormuycpydsvjdmueignudf8.png" alt="image"><br>
<br>
<ol>
<li>             ‚ÄúWebAuthn‚Äù.    , ,  WebAuthn,  ‚Äú   ‚Äù  ‚Äú    ‚Äù.    Relying Party  Challenge. Challenge ‚Äî    ,   Code  OAuth 2.0.</li>
<li>Relying Party  Challenge.     ,     REST API. </li>
<li>   Authenticator-    CTAP (Client to Authenticator Protocols).   navigator.credentials.get c :<br>
<br>
<ul>
<li>Challenge</li>
<li> </li>
</ul></li>
<li>Authenticator    ,     ,    .</li>
<li>   ,  Authenticator     .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The application sends the signed data to the Relying Party.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relying Party decrypts the data using the public key, checks the Challenge and authorizes the user.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To fix the material we do laboratory work:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WebAuthn: Lab (Google)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To implement WebAuthn, only http requests cannot be dispensed with, as you need to call the browser API to interact with the Authenticator. But here Google is happy, made a sandbox with step-by-step instructions: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Your first WebAuthn</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result of the work, we get a JS client-server application that implements fingerprint authentication. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A working deme is located at</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you run it on a smartphone with a fingerprint sensor, you can see the result of work. As usual, first preparation - register the user: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jb/kk/kt/jbkkkt1mdwiu_ymyjlsazwnz5ti.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Create a username / password and then attach the fingerprint: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pk/mk/ck/pkmkckm1ly_ggv10dag6h4kg444.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After that, the program shows which public key is attached to this fingerprint:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/ba/c1/twbac1dgahkkwyszwitwcnheuti.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now you can start the authentication script. </font><font style="vertical-align: inherit;">As usual, we believe that Step 1 has been completed and we are on the site. </font><font style="vertical-align: inherit;">To go to Step 2, click ‚ÄúTry Reauth‚Äù. </font><font style="vertical-align: inherit;">The browser will perform Step 3 and will interact with the Authenticator, which in Step 4 will ask you to attach your finger: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/gn/e-/sjgne-txsfiph3qxxojrdq8uhkq.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And if the registered finger is attached, then Steps 5 and 6 will pass successfully and in Step 7 the application will again show the window with the corresponding public key:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fr/nw/h5/frnwh5fjkq0xo6mrlvikq7wyctc.png" alt="image"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So, we examined the three most common and promising protocols for user identification: OAuth 2.0, OpenID Connect, WebAuthn. </font><font style="vertical-align: inherit;">We understood the scope of their applicability:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OAuth 2.0 - used to register and login users to sites using social networks. </font><font style="vertical-align: inherit;">And also to get user data from social networks.</font></font></li>
<li>OpenID Connect ‚Äî               .  OpenID Connect         SSO .</li>
<li>WebAuthn ‚Äî               .</li>
</ul><br>
<h3></h3><br>
<ul>
<li>,           ,      .</li>
<li>      ,     ,        .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It makes sense to authenticate users to cloud platforms such as Facebook or Google, as </font><font style="vertical-align: inherit;">they employ the best security experts who can provide all the nuances of security.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I suggest optimistic about the future, because </font><font style="vertical-align: inherit;">WebAuthn protocol - a real chance to get rid of the password hell of our time!</font></font></li>
</ul><br>
<b><font color="#B22222"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It's only the beginning!</font></font></font></b><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appendix: other authentication protocols</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For completeness, I will list the other relevant protocols and technologies used to identify users:</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAML 2.0 (Security Assertion Markup Language)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The mature protocol of 2005, but has a limited set of scenarios for building SSO systems. </font><font style="vertical-align: inherit;">Uses an XML-based data format. </font><font style="vertical-align: inherit;">More details can be found in the article: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúWho uses the SAML 2.0 authentication protocol‚Äù</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Credential Management API</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The development is carried out by the same organization as WebAuthn - W3C. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Credential Management standard</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> allows you to:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Store the identity of subscribers, which allows users to access sites without entering passwords, but use passwords from the store.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Select the necessary accounts to enter certain sites. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allows you to use logins / passwords entered on one device on other devices.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A common implementation example of the Credential Management API is Google‚Äôs password manager: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">passwords.google.com</font></font></a> <br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Initiative for Open Authentication (OATH)</font></font></h3><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oath resources</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A Complete List of OAuth 2.0-Based Protocols</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenID Connect - previously reviewed in detail</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UMA 1.0 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User-Managed Access (UMA) Profile of OAuth 2.0</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UMA 2.0 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User-Managed Access (UMA) 2.0 Grant for OAuth 2.0 Authorization</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IndieAuth </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Link to W3C Standard</font></font></a></li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en491106/index.html">Why may you need semi-synchronous replication?</a></li>
<li><a href="../en491108/index.html">Organizing deployments to many k8s environments using helmfile</a></li>
<li><a href="../en491110/index.html">Convert rtf to xml in C #</a></li>
<li><a href="../en491112/index.html">The Path to Network Innocence - Cisco DNA</a></li>
<li><a href="../en491114/index.html">Smart relocation or how to choose a company for work and not regret it</a></li>
<li><a href="../en491118/index.html">Developer Heart: Devkits of the 5th generation of consoles (Part 1)</a></li>
<li><a href="../en491120/index.html">$ mol: 4 years later</a></li>
<li><a href="../en491122/index.html">Forensic analysis of HiSuite backups</a></li>
<li><a href="../en491130/index.html">Vue Features to Remember</a></li>
<li><a href="../en491132/index.html">When the bloom filter does not fit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>