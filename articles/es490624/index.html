<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè§ üë©üèø‚Äçü§ù‚Äçüë®üèº üñ®Ô∏è Encabezado HTTP de caracter√≠stica-pol√≠tica y control del navegador web üåπ üë©üèΩ‚Äçüöí ‚ù§Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existe una t√©cnica completamente incomparable que le permite mantener el rendimiento de un proyecto web bajo control. Consiste en introducir mecanismo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Encabezado HTTP de caracter√≠stica-pol√≠tica y control del navegador web</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/490624/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Existe una t√©cnica completamente incomparable que le permite mantener el rendimiento de un proyecto web bajo control. Consiste en introducir mecanismos en el proceso de desarrollo, cuyos resultados son claramente visibles. Estos mecanismos est√°n dise√±ados para recordar siempre al programador la importancia del rendimiento. Hay algo en este contexto que realmente me gusta. Este es el encabezado HTTP </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feature-Policy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">
Este t√≠tulo es una caracter√≠stica relativamente nueva que permite que un desarrollador active y desactive ciertas funciones del navegador mientras navega por su sitio. </font><font style="vertical-align: inherit;">
Por ejemplo, puede decirle al navegador que no debe permitir el uso de la API de geolocalizaci√≥n pas√°ndole el siguiente encabezado:</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/_a/mh/zz/_amhzzcwmae7goctptz7hobpnwa.jpeg"></a><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="plaintext hljs">Feature-Policy: geolocation 'none'</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">muchas ventajas al </font><font style="vertical-align: inherit;">usar un encabezado </font><font style="vertical-align: inherit;">en t√©rminos de seguridad y rendimiento. </font><font style="vertical-align: inherit;">Pero ahora me gusta especialmente c√≥mo </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede usarlo para hacer que los problemas de rendimiento del sitio web que generalmente son f√°ciles de pasar por alto sean m√°s notorios. </font><font style="vertical-align: inherit;">Esto se puede comparar con algo as√≠ como el "rendimiento de revestimiento". </font><font style="vertical-align: inherit;">En particular, estamos hablando de identificar problemas con im√°genes utilizadas en proyectos web.</font></font><br>
<a name="habracut"></a><br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica de im√°genes de gran tama√±o</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la imagen se transmite al navegador en un formato compatible, se mostrar√° dicha imagen. Este es el comportamiento est√°ndar del navegador. El navegador, que trata de ayudar a quienes est√°n viendo la p√°gina, tambi√©n escala autom√°ticamente dichas im√°genes. Por lo tanto, se ven bien incluso si est√°n representados por grandes archivos gr√°ficos. Como resultado, si usa im√°genes que son m√°s grandes que los tama√±os que necesita la p√°gina, esto es, a primera vista, invisible. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pol√≠tica</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directiva</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><code>oversized-images</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le dice al navegador que no debe permitir el uso de im√°genes cuyo tama√±o exceda, en un n√∫mero espec√≠fico de veces, el tama√±o de sus contenedores. </font><font style="vertical-align: inherit;">La imagen, de acuerdo con la restricci√≥n est√°ndar, no puede ser m√°s de 2 veces el contenedor. </font><font style="vertical-align: inherit;">Pero este valor, si es necesario, se puede redefinir. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, si el navegador recibe el siguiente encabezado, no le permitir√° mostrar im√°genes tomadas de ninguna fuente (esto se establece gracias </font></font><code>none</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), cuyas dimensiones son m√°s de 2 veces el tama√±o de sus contenedores (en ancho o alto).</font></font><br>
<br>
<pre><code class="plaintext hljs">Feature-Policy: oversized-images 'none';</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si necesita m√°s flexibilidad, puede decirle al navegador que no debe mostrar im√°genes que sean m√°s de 3 veces m√°s grandes que los contenedores:</font></font><br>
<br>
<pre><code class="plaintext hljs">Feature-Policy: oversized-images *(3) 'none';</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cualquier caso, si la imagen no se ajusta a los l√≠mites especificados, se mostrar√° un c√≥digo auxiliar en lugar de esta imagen, y se enviar√° un mensaje de error a la consola.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c98/1e3/169/c981e3169d9219c226c13236f198c222.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si el sitio utiliza la pol√≠tica de im√°genes de gran tama√±o, se cargar√°n im√°genes de gran tama√±o, pero se mostrar√° un trozo en su lugar y se mostrar√° un mensaje de error en la consola</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im√°genes sin optimizar</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro problema com√∫n con los gr√°ficos es el uso de im√°genes no optimizadas. Muy a menudo puede encontrar im√°genes que no se comprimieron adecuadamente. Su tama√±o, sin embargo, se puede seleccionar correctamente. Entonces, a los archivos con fotos, al dispararlos y crearlos, se pueden agregar muchos metadatos innecesarios, que a menudo permanecen en los archivos y cuando se usan en los navegadores. Un ejemplo particularmente molesto de esto son las im√°genes, cuyos metadatos contienen sus propias miniaturas para la vista previa. Muchas veces vi c√≥mo la miniatura incrustada en la imagen (cuya presencia los dise√±adores y desarrolladores ni siquiera sab√≠an), "pesaba" m√°s que la imagen misma.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entre otras cosas, aqu√≠ puede recuperar la compresi√≥n de imagen habitual, compatible con muchos formatos, que le permite lograr el equilibrio perfecto entre la calidad de la imagen y el tama√±o del archivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pol√≠ticas de im√°genes </font></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin p√©rdida optimizadas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y de </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">im√°genes </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">sin p√©rdida no optimizadas le</font></a><font style="vertical-align: inherit;"> permiten al navegador saber que coincide con el tama√±o del archivo y el tama√±o de la imagen en p√≠xeles.</font></font><br>
<br>
<pre><code class="plaintext hljs">Feature-Policy: unoptimized-lossy-images 'none';<font></font>
Feature-Policy: unoptimized-lossless-images 'none';</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si el n√∫mero de bytes por p√≠xel (Byte por p√≠xel, BPP) es demasiado alto, el navegador mostrar√° un c√≥digo auxiliar en lugar de la imagen y mostrar√° un mensaje de error en la consola.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/347/215/e57/347215e574f0574312eff1d6737b8d9e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La aplicaci√≥n de pol√≠ticas no optimizadas * hace que se muestre un trozo en lugar de im√°genes inapropiadas; al igual que con la pol√≠tica de im√°genes de gran tama√±o, el</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
nivel recomendado de BPP para im√°genes comprimidas con p√©rdida es 0.5 y 1 para im√°genes comprimidas sin p√©rdida. Adem√°s, al analizar im√°genes, se permite una ligera desviaci√≥n de su tama√±o total de estos niveles. Ahora, esta desviaci√≥n para las im√°genes comprimidas con p√©rdida es de 1 Kb, para las im√°genes comprimidas sin p√©rdida: 10 Kb.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, supongamos que tenemos una imagen JPEG de 200x200 p√≠xeles. JPEG es un formato de compresi√≥n de imagen con p√©rdida, lo que resulta en un nivel recomendado de BPP de 0.5. Al mismo tiempo, el tama√±o total de la imagen puede superar el tama√±o recomendado en solo 1 Kb. Para saber qu√© tama√±o debe adaptarse una imagen similar a un navegador, debe multiplicar las dimensiones de los lados de la imagen en p√≠xeles entre s√≠ y por BPP, y luego agregar la desviaci√≥n permitida a lo que sucede. </font></font><br>
<br>
<code>(200 x 200 x .5) + 1024 = 21,024</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">byte o </font></font><code>20.5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kb </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si la imagen se comprime sin p√©rdida, se permite una desviaci√≥n del tama√±o "ideal" de 10 Kb, mientras que el BPP de dicha imagen ser√° 1. De lo contrario, los c√°lculos se ver√°n exactamente iguales: </font></font><br>
<br>
<code>(200 x 200 x 1) + 10,240 = 50,240</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">byte o </font></font><code>49.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kb</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es probable que el tama√±o de la desviaci√≥n permitida cambie en el futuro. </font><font style="vertical-align: inherit;">De hecho, aunque Blink, por defecto, usa este indicador para im√°genes comprimidas sin p√©rdida, igual a 10 Kb, ya se est√°n realizando experimentos con una pol√≠tica </font></font><code>unoptimized-lossless-images-strict</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que cambia este indicador, baj√°ndolo al nivel de 1 Kb.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medios no especificados</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lo nuevo es lo viejo y olvidado. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante mucho tiempo el uso de atributos de imagen </font></font><code>height</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, y </font></font><code>width</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fue m√°s o menos com√∫n. Sin estos atributos, el navegador no sab√≠a cu√°nto espacio deber√≠a ocupar la imagen hasta el momento en que se carg√≥ la imagen. Esto condujo a cambios en los dise√±os de p√°gina. Se mostr√≥ la p√°gina y, luego, cuando lleg√≥ la imagen, su contenido cambi√≥. El navegador una vez m√°s tuvo que volver a contar el dise√±o para asignar espacio para la imagen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando lleg√≥ el momento de los dise√±os en los que los tama√±os de las im√°genes ten√≠an que redimensionarse de manera flexible utilizando CSS, la presencia o ausencia de estos atributos ya no desempe√±aba un papel especial. Como resultado, muchos simplemente dejaron de usar estos atributos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero gracias al </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trabajo reciente</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iniciado por Jen Simmons, Firefox y Chrome pueden calcular la relaci√≥n de aspecto de las im√°genes en funci√≥n de sus atributos </font></font><code>height</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>width</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Cuando este enfoque se combina con los estilos aplicados a las im√°genes, resulta que los navegadores pueden reservar espacio para las im√°genes durante el paso inicial del dise√±o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pol√≠tica de medios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> no </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">dimensionados</font></a><font style="vertical-align: inherit;"> le dice al navegador que todos los elementos multimedia deben tener atributos que especifiquen los tama√±os de estos elementos. Si no hay tales atributos, el navegador debe usar los valores predeterminados. Todo, de hecho, es un poco m√°s complicado, pero la conclusi√≥n es que si la imagen no tiene los atributos apropiados, el navegador usa el valor de </font></font><code>300x150</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√≠xel </font><font style="vertical-align: inherit;">est√°ndar </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="plaintext hljs">Feature-Policy: unsized-media 'none';</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se aplica esta pol√≠tica, se mostrar√°n las im√°genes, pero si su tama√±o no se especifica en HTML, el desarrollador notar√° r√°pidamente que las im√°genes se muestran en el tama√±o predeterminado. Y, como de costumbre, se enviar√° un mensaje de error a la consola.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4b/b8a/4c5/a4bb8a4c52a7267ef162a8a8244c0f9a.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La aplicaci√≥n de la pol√≠tica de medios sin tama√±o lleva al hecho de que se muestran im√°genes y videos sin los atributos de alto y ancho, pero el navegador establece sus tama√±os en 300x150 p√≠xeles.</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Probablemente, vale la pena mencionar una caracter√≠stica que al principio me pareci√≥ inusual. </font><font style="vertical-align: inherit;">Ella se muestra al compartir pol√≠ticas</font></font><code>unsized-media</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font><code>oversized-images</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">En esta situaci√≥n, uno no deber√≠a sorprenderse por la aparici√≥n de m√°s que antes, la cantidad de mensajes sobre im√°genes demasiado grandes. </font><font style="vertical-align: inherit;">El hecho es que debido a la aplicaci√≥n de la pol√≠tica, el</font></font><code>unsized-media</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">navegador cambia</font><font style="vertical-align: inherit;">el</font><font style="vertical-align: inherit;">tama√±o de las im√°genes que no tienen atributos</font></font><code>height</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font><code>width</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hasta</font></font><code>300x150</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p√≠xeles. </font><font style="vertical-align: inherit;">Despu√©s de lo cual es este tama√±o el que utiliza el navegador como punto de referencia para determinar si la imagen coincide con su contenedor.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atraer la atenci√≥n a problemas menos visibles</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En las pol√≠ticas relacionadas con la imagen, me gusta el hecho de que, en el proceso de desarrollo de proyectos, hacen posible hacer visible lo que generalmente est√° oculto. Como resultado, el desarrollador descubre que no se encarg√≥ de optimizar las im√°genes, o que olvid√≥ establecer sus atributos </font></font><code>height</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y </font></font><code>width</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Todos estos errores se reflejan inmediatamente en la apariencia de las p√°ginas. De hecho, la principal ventaja de usar las pol√≠ticas anteriores es que permiten que el desarrollador descubra r√°pidamente los problemas con las im√°genes. Mientras la pol√≠tica</font></font><code>unsized-media</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">puede conducir a una disminuci√≥n en el n√∫mero de situaciones en las que ocurren "cambios" de dise√±os de p√°gina; el uso de otras pol√≠ticas no impide la carga de im√°genes inapropiadas. Como resultado, el √∫nico punto fuerte de la aplicaci√≥n de estas pol√≠ticas es que llaman la atenci√≥n de los desarrolladores sobre los problemas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existen varias pol√≠ticas m√°s que pueden ser √∫tiles en t√©rminos de an√°lisis de p√°ginas para determinar el impacto de algo en su rendimiento. Aqu√≠ es donde las pol√≠ticas como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sync-script</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vienen a la mente </font><font style="vertical-align: inherit;">(esta pol√≠tica bloquea la ejecuci√≥n de scripts s√≠ncronos), </font></font><code>sync-xhr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(bloquea solicitudes AJAX s√≠ncronas) y </font></font><code>document-write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(bloquea llamadas </font></font><code>document.write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Estas pol√≠ticas son excelentes herramientas para controlar ciertos aspectos del rendimiento de la p√°gina, pero no proporcionan a los desarrolladores la misma retroalimentaci√≥n notable que muchas de las pol√≠ticas anteriores proporcionan en forma de im√°genes faltantes. Por supuesto, si la p√°gina tiene una secuencia de comandos s√≠ncrona, sin la cual no se muestra, entonces no es f√°cil pasarla por alto (y esas p√°ginas no son tan dif√≠ciles de encontrar). Pero estas pol√≠ticas generalmente indican errores en forma de mensajes que se muestran en la consola. Y para ser honesto, sospecho que la mayor√≠a de los desarrolladores no prestan mucha atenci√≥n a la consola (creo que todos deber√≠amos tener m√°s cuidado con la consola). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero, sin embargo, podemos hacer que los errores detectados por las pol√≠ticas "invisibles" sean mucho m√°s notorios usando la API</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReportingObserver</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para monitorear violaciones y para mostrar notificaciones relevantes en la p√°gina. </font><font style="vertical-align: inherit;">Dichas notificaciones pueden hacerse muy notables.</font></font><br>
<br>
<pre><code class="plaintext hljs">let reportingAlerts = document.createElement('ul');<font></font>
&nbsp;&nbsp;reportingAlerts.setAttribute('id','reportingAlerts');<font></font>
&nbsp;&nbsp;document.body.appendChild(reportingAlerts);<font></font>
<font></font>
const alertBox = document.getElementById('reportingAlerts');<font></font>
<font></font>
new ReportingObserver((reports, observer) =&gt; {<font></font>
&nbsp;&nbsp;let fragment = document.createDocumentFragment();<font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;Object.keys(reports).forEach(function(item) {<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;let li = document.createElement('li');<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;li.textContent = reports[item].body.message + ': ' + reports[item].body.featureId;<font></font>
&nbsp;&nbsp;&nbsp;&nbsp;fragment.appendChild(li);<font></font>
&nbsp;&nbsp;});<font></font>
&nbsp;&nbsp;<font></font>
&nbsp;&nbsp;alertBox.appendChild(fragment)<font></font>
}, {types: ['feature-policy-violation'], buffered: true}).observe();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esboc√© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un ejemplo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en CodePen </font><font style="vertical-align: inherit;">de c√≥mo se ver√≠a esto.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2bd/c18/c8a/2bdc18c8a9bb20db1f18a9e095be4b8e.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un ejemplo de c√≥mo puede mostrar notificaciones de infracciones de pol√≠ticas especificadas por el encabezado Feature-Policy. </font><font style="vertical-align: inherit;">Dichas notificaciones est√°n dise√±adas para la producci√≥n en el entorno de desarrollo, o donde el proyecto est√° preparado para la producci√≥n.</font></font></font></i><br>
 <br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menos uso del encabezado Feature-Policy</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La gran desventaja de usar el encabezado </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">es su soporte por parte de los navegadores. </font><font style="vertical-align: inherit;">Aparentemente, ahora solo es compatible con navegadores basados ‚Äã‚Äãen Blink (Opera, Edge, Chrome, Samsung). </font><font style="vertical-align: inherit;">Los navegadores Firefox y Safari admiten el atributo </font></font><code>allow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de elementos </font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero incluso donde sea </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compatible, para garantizar el buen estado de muchas de las pol√≠ticas, debe habilitar la bandera </font></font><code>Experimental Web Platform features</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(puede encontrarla en la direcci√≥n </font></font><code>about:flags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C√≥mo uso el encabezado de caracter√≠stica-pol√≠tica</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ese menos del t√≠tulo </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que se menciona anteriormente, para m√≠ personalmente no es un problema particular. Prefiero usar las pol√≠ticas definidas por este encabezado como un verificador de p√°gina basado en navegador. Por lo tanto, no necesito esforzarme para aplicar </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en producci√≥n, o para asegurar que las pol√≠ticas funcionen para todos mis usuarios. Solo los necesito yo, as√≠ como aquellos que est√°n desarrollando el sitio. Yo, en cualquier caso, uso Chrome como el navegador principal en el proceso de desarrollo. Por lo tanto, garantizar el rendimiento </font></font><code>Feature-Police</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en mi entorno de trabajo es habilitar el indicador apropiado. Despu√©s de esto, los pol√≠ticos trabajan sin ninguna intervenci√≥n adicional de mi parte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descubr√≠ que la forma m√°s f√°cil de usar el encabezado es </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">con una extensi√≥n de navegador</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ModHeader</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esta extensi√≥n le permite establecer sus propios encabezados que se pasan a las p√°ginas cuando se visualizan.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9c9/ec2/33b/9c9ec233b6a3913a5e584335ac43a344.png"></div><br>
<i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La extensi√≥n ModHeader le permite configurar las opciones del encabezado Feature-Policy. </font><font style="vertical-align: inherit;">Se pueden activar y desactivar, si lo desea</font></font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
. Tengo tres conjuntos de valores de encabezado</font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que uso peri√≥dicamente:</font></font><br>
<br>
<ul>
<li><code>oversized-images 'none'; unoptimized-lossy-images 'none'; unoptimized-lossless-images 'none';</code></li>
<li><code>unsized-media 'none'; oversized-images 'none'; unoptimized-lossy-images 'none'; unoptimized-lossless-images 'none';</code></li>
<li><code>script-sync 'none'; unsized-media 'none'; oversized-images 'none'; unoptimized-lossy-images 'none'; unoptimized-lossless-images 'none';</code></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A menudo mantengo el primero encendido. Es muy emocionante viajar a trav√©s de p√°ginas web a las que se aplican las pol√≠ticas utilizadas. Da miedo ver cu√°n grandes son algunas im√°genes. Hay muchas cosas en la web moderna que podr√≠an mejorarse. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, la pol√≠tica a menudo se desencadena en las p√°ginas </font></font><code>unsized-media</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(y tambi√©n peco por esto), por lo que su uso durante el trabajo normal en Internet es inconveniente. Es por eso que lo destaco en una pol√≠tica separada, que puedo activar y desactivar. Lo mismo se aplica a las pol√≠ticas </font></font><code>sync-scripts</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, cuya aplicaci√≥n "rompe" muchos sitios.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algunos de los equipos con los que trabaj√© comenzaron a usar las pol√≠ticas que describ√≠ durante el desarrollo. </font><font style="vertical-align: inherit;">Esto les permite prestar atenci√≥n r√°pidamente a problemas previamente invisibles. </font><font style="vertical-align: inherit;">Por supuesto, recomiendo incluir todas las pol√≠ticas </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en el entorno de desarrollo, lo que le permite identificar y corregir errores r√°pidamente.</font></font><br>
<br>
<h2><font color="#3AC1EF"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espero que el soporte </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aparezca, como resultado, no solo en Chrome. </font><font style="vertical-align: inherit;">Aunque este es mi navegador principal, tambi√©n tengo que usar otros navegadores. </font><font style="vertical-align: inherit;">Ser√≠a √∫til si lo apoyaran </font></font><code>Feature-Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pero aqu√≠, sin embargo, vemos esa rara situaci√≥n en la que incluso el apoyo experimental de una determinada oportunidad es suficiente para que sea realmente beneficioso. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los problemas sutiles de rendimiento tambi√©n son problemas. </font><font style="vertical-align: inherit;">Y la capacidad de hacer que tales problemas sean m√°s visibles es uno de los mejores m√©todos que un desarrollador puede usar para identificarlos y solucionarlos. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Queridos lectores! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPlanea utilizar el encabezado Feature-Policy para identificar problemas discretos en proyectos web?</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es490612/index.html">Enfoque funcional para transacciones en Scala o escriba su propia m√≥nada √∫til</a></li>
<li><a href="../es490616/index.html">El resumen de materiales frescos del mundo del front-end para la √∫ltima semana No. 404 (24 de febrero - 1 de marzo de 2020)</a></li>
<li><a href="../es490618/index.html">Tampones de pila de goroutina</a></li>
<li><a href="../es490620/index.html">Cuando escucho las palabras "restaur√≥ la red neuronal", subo para verificar las copias de seguridad</a></li>
<li><a href="../es490622/index.html">Combatir p√©rdidas de memoria en aplicaciones web</a></li>
<li><a href="../es490626/index.html">Una gu√≠a completa de datos- * atributos HTML</a></li>
<li><a href="../es490628/index.html">¬øQu√© hacer cuando CSS bloquea el an√°lisis de p√°ginas?</a></li>
<li><a href="../es490630/index.html">Carga de matrices NumPy desde disco: comparaci√≥n de memmap () y Zarr / HDF5</a></li>
<li><a href="../es490634/index.html">Eventos digitales en Mosc√∫ del 2 al 8 de marzo.</a></li>
<li><a href="../es490636/index.html">Eventos digitales en San Petersburgo del 2 al 8 de marzo.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>