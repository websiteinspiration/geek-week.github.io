<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§í üèà üëº Trabalho pr√°tico com FPGAs no conjunto de Redd. Dominando o DMA para o √¥nibus Avalon-ST e alternando entre os √¥nibus Avalon-MM üë®üèΩ‚ÄçüöÄ üò´ üòî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos a avan√ßar em dire√ß√£o √† cria√ß√£o de dispositivos reais baseados no complexo Redd FPGA. Para outro projeto de All-Hardware, preciso de um ana...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Trabalho pr√°tico com FPGAs no conjunto de Redd. Dominando o DMA para o √¥nibus Avalon-ST e alternando entre os √¥nibus Avalon-MM</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500016/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuamos a avan√ßar em dire√ß√£o √† cria√ß√£o de dispositivos reais baseados no complexo Redd FPGA. </font><font style="vertical-align: inherit;">Para outro projeto de All-Hardware, preciso de um analisador l√≥gico simples, para que possamos seguir nessa dire√ß√£o. </font><font style="vertical-align: inherit;">Sorte - e acesse o analisador de barramento USB (mas isso ainda √© a longo prazo). </font><font style="vertical-align: inherit;">O cora√ß√£o de qualquer analisador √© a RAM e uma unidade que primeiro carrega dados para ele e depois os recupera. </font><font style="vertical-align: inherit;">Hoje vamos projet√°-lo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer isso, dominaremos o bloco DMA. </font><font style="vertical-align: inherit;">Em geral, o DMA √© o meu t√≥pico favorito. </font><font style="vertical-align: inherit;">Eu at√© fiz um √≥timo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo sobre DMA em alguns controladores ARM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A partir desse artigo, fica claro que o DMA obt√©m ciclos de rel√≥gio do barramento. </font><font style="vertical-align: inherit;">No artigo atual, consideraremos como est√£o as coisas com o sistema de processador baseado em FPGA.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cg/77/ve/cg77velzruiaao4svcvahmuumse.png"><br>
<a name="habracut"></a><br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artigos anteriores do ciclo</font></font></b>
                        <div class="spoiler_text"><ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  ¬´¬ª  ,   Redd,      .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  ¬´¬ª  ,   Redd.  2.  .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">          .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     Redd     .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">              Redd.</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> ,       .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    Redd.  1:  .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    Redd.  2:      .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  :        .</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    Redd,    FTDI</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">     Redd</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">       Redd</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> USB-  Windows 10   </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   Nios II    Nios II</a></li>
</ol><br>
</div>
                    </div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cria√ß√£o de Hardware</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come√ßamos a criar o hardware. Para entender o quanto o bloco DMA entra em conflito com os ciclos do rel√≥gio, precisamos fazer medi√ß√µes precisas com alta carga no barramento Avalon-MM (Avalon Memory-Mapped). J√° </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descobrimos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que a ponte Altera JTAG para Avalon-MM n√£o pode fornecer altas cargas de √¥nibus. Portanto, hoje temos que adicionar um n√∫cleo de processador ao sistema para que ele acesse o barramento em alta velocidade. Como isso √© feito foi descrito </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Para otimizar, vamos desativar os dois caches do n√∫cleo do processador, mas criar um barramento fortemente conectado, como fizemos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4z/a8/xx/4za8xxe_btr14mdgfjmzhpwxusi.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicione 8 kilobytes de mem√≥ria de programa e mem√≥ria de dados. Lembre-se que a mem√≥ria deve ser dual-port e ter um endere√ßo em uma linha especial (para evitar que ele jumping, bloque√°-lo, discutimos as raz√µes para isso </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/kp/km/3v/kpkm3vhuov70qf9zgfl89njhqum.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J√° criamos o projeto mil vezes, portanto, n√£o h√° nada particularmente interessante no pr√≥prio processo de cria√ß√£o (se houver, todas as etapas para sua cria√ß√£o s√£o descritas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A base est√° pronta. Agora precisamos de uma fonte de dados que colocaremos na mem√≥ria. O ideal √© um cron√¥metro constantemente. Se durante alguma medida o bloco DMA n√£o foi capaz de processar os dados, veremos isso imediatamente pelo valor ausente. Bem, isto √©, se na mem√≥ria houver valores 1234 e 1236, significa que no rel√≥gio, quando o timer emitiu 1235, o bloco DMA n√£o transferiu dados. Crie um arquivo</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Timer_ST.sv</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> com um contador t√£o simples:</font></font><br>
<br>
<pre><code class="plaintext hljs">module Timer_ST (<font></font>
  input              clk,<font></font>
  input              reset,<font></font>
	<font></font>
  input  logic       source_ready,<font></font>
  output logic       source_valid,<font></font>
  output logic[31:0] source_data<font></font>
	<font></font>
);<font></font>
    logic [31:0] counter;<font></font>
    always @ (posedge clk, posedge reset)<font></font>
    if (reset == 1)<font></font>
    begin<font></font>
        counter &lt;= 0;<font></font>
    end else<font></font>
    begin<font></font>
        counter &lt;= counter + 1;<font></font>
    end<font></font>
<font></font>
    assign source_valid = 1;<font></font>
    assign source_data [31:24] = counter [7:0];<font></font>
    assign source_data [23:16] = counter [15:8];<font></font>
    assign source_data [15:8] = counter [23:16];<font></font>
    assign source_data [7:0] = counter [31:24];<font></font>
<font></font>
endmodule<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este contador √© como um pioneiro: est√° sempre pronto (na sa√≠da </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source_valid √©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sempre um) e sempre conta (exceto nos momentos do estado de redefini√ß√£o). </font><font style="vertical-align: inherit;">Por que o m√≥dulo possui exatamente esses sinais - discutimos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">neste artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora criamos nosso pr√≥prio componente (como isso √© feito √© descrito </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">A automa√ß√£o escolheu erroneamente o barramento Avalon_MM para n√≥s. </font><font style="vertical-align: inherit;">Substitua-o por </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avalon_streaming_source</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e mapeie os sinais como mostrado abaixo: </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/to/u1/fb/tou1fbktluymact4id-sxeca5qq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√ìtimo. </font><font style="vertical-align: inherit;">Adicione nosso componente ao sistema. </font><font style="vertical-align: inherit;">Agora estamos procurando o bloco DMA ... E n√£o encontramos um, mas tr√™s. </font><font style="vertical-align: inherit;">Todos eles est√£o descritos no documento </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Embedded Peripheral IP User Guide</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da Altera (como sempre, dou nomes, mas n√£o links, pois os links sempre mudam).</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/0q/a9/lo/0qa9lo90au55qrl5-02u3py-bb8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qual usar? Eu n√£o posso resistir √† nostalgia. Em 2012, eu criei um sistema baseado no barramento PCIe. Todos os manuais da Altera continham um exemplo baseado no primeiro desses blocos. Mas ele com o componente PCIe deu uma velocidade de n√£o mais de 4 megabytes por segundo. Naqueles dias, cuspi e escrevi meu bloco de DMA. Agora, n√£o me lembro da velocidade dele, mas ele dirigiu os dados das unidades SATA at√© o limite dos recursos de unidades e SSDs da √©poca. Ou seja, afiei um dente neste bloco. Mas n√£o irei fazer uma compara√ß√£o dos tr√™s blocos. O fato √© que hoje temos que trabalhar com uma fonte baseada no Avalon-ST (Avalon Streaming Interface), e apenas o bloco </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modular Scatter-Gather DMA</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suporta essas fontes </font><font style="vertical-align: inherit;">. Aqui n√≥s colocamos no diagrama. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nas configura√ß√µes do bloco, selecione o modo</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Streaming para a mem√≥ria mapeada</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Al√©m disso - quero direcionar os dados desde o in√≠cio at√© o preenchimento da SDRAM, substituindo a unidade m√°xima de transfer√™ncia de dados de 1 kilobyte para 4 megabytes. √â verdade que fui avisado que, no final, o par√¢metro FMax n√£o ser√° t√£o quente (mesmo se voc√™ substituir o bloco m√°ximo por 2 kilobytes). Hoje, por√©m, o FMax √© aceit√°vel (104 MHz), e ent√£o vamos descobrir. Eu deixei os par√¢metros restantes inalterados. Voc√™ tamb√©m pode definir o modo de transmiss√£o como Somente acesso total √† palavra, isso aumentar√° o FMax para 109 MHz. Mas n√£o vamos lutar por desempenho hoje.</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/u6/1y/8-/u61y8-h-wpei03u3xgkjsjtuurs.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Assim. A fonte √©, DMA √©. Receptor ... SDRAM? Em futuras condi√ß√µes de combate, sim. Hoje, por√©m, precisamos de uma mem√≥ria com caracter√≠sticas conhecidas. Infelizmente, a SDRAM precisa enviar periodicamente comandos que levam v√°rios ciclos de clock, al√©m disso, essa mem√≥ria pode ser ocupada pela regenera√ß√£o. Portanto, em vez disso, agora usaremos a mem√≥ria FPGA incorporada. Tudo est√° funcionando para ela em uma √∫nica etapa, sem atrasos imprevis√≠veis.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como o controlador SDRAM √© de porta √∫nica, a mem√≥ria interna tamb√©m pode ser usada exclusivamente no modo de porta √∫nica. √â importante. O fato √© que queremos gravar na mem√≥ria usando o mestre do bloco DMA, mas, por outro lado, queremos ler essa mem√≥ria usando o n√∫cleo do processador ou o bloco Altera JTAG-to-Avalon-MM. A m√£o estende a m√£o e conecta os blocos de grava√ß√£o e leitura a duas portas diferentes ... Mas voc√™ n√£o pode! Pelo contr√°rio, √© proibido pelas condi√ß√µes do problema. Porque hoje √© poss√≠vel, mas amanh√£ substituiremos a mem√≥ria por uma exclusivamente de porta √∫nica. Em geral, temos um bloco de tr√™s componentes (timer, DMA e mem√≥ria):</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vb/ws/rv/vbwsrvdbjsns34syktoliarkudy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, e apenas por uma quest√£o de proforma, adicionarei UT e sysid ao sistema JTAG (embora o segundo n√£o tenha ajudado, eu ainda precisava conjur√°-lo com um adaptador JTAG). </font><font style="vertical-align: inherit;">O que √© e como sua adi√ß√£o resolve pequenos problemas, j√° estudamos. </font><font style="vertical-align: inherit;">N√£o vou pintar os pneus, est√° tudo claro com eles. </font><font style="vertical-align: inherit;">Apenas mostre como tudo fica no meu projeto: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/t5/xk/qv/t5xkqv474idlwer3fnklkz5whbs.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√© isso. </font><font style="vertical-align: inherit;">O sistema est√° pronto. </font><font style="vertical-align: inherit;">Atribu√≠mos endere√ßos, atribu√≠mos vetores de processador, geramos um sistema (n√£o esque√ßa que voc√™ precisa salvar com o mesmo nome que o pr√≥prio projeto, depois ele ir√° para o n√≠vel superior da hierarquia), adicione-o ao projeto. </font><font style="vertical-align: inherit;">Torne a perna de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redefini√ß√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> virtual, conecte </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clk</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† perna </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pin_25</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Estamos montando o projeto, despejando-o no equipamento ... Como est√°, coitadinho, no escrit√≥rio vazio por causa da localiza√ß√£o remota total? ... √â solit√°rio e assustador para ela, provavelmente, sozinho ... Mas fiquei distra√≠do.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criando uma pe√ßa de software</font></font></h2><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Treinamento</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No Editor do BSP, com o movimento usual da m√£o, ative o suporte ao C ++. </font><font style="vertical-align: inherit;">Inseri tantas vezes uma captura de tela deste caso que paro de faz√™-lo. </font><font style="vertical-align: inherit;">Mas outra captura de tela, embora j√° tenha sido vista, ainda √© t√£o comum. </font><font style="vertical-align: inherit;">Ent√£o, vamos discutir mais uma vez. </font><font style="vertical-align: inherit;">Lembramos que o sistema est√° tentando colocar dados no maior peda√ßo de mem√≥ria. </font><font style="vertical-align: inherit;">E esse √© o </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Portanto, for√ßamos tudo para </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ck/ge/g_/ckgeg_tcmcuz0oa8retrmdrfiiw.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Experi√™ncia do programa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√≥s criamos um c√≥digo que simplesmente enche a mem√≥ria com o conte√∫do da fonte (no papel do contador).</font></font><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ver c√≥digo</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">#include "sys/alt_stdio.h"<font></font>
#include &lt;altera_msgdma.h&gt;<font></font>
#include &lt;altera_msgdma_descriptor_regs.h&gt;<font></font>
#include &lt;system.h&gt;<font></font>
#include &lt;string.h&gt;<font></font>
<font></font>
int main()<font></font>
{ <font></font>
  alt_putstr("Hello from Nios II!\n");<font></font>
<font></font>
  memset (BUFFER_BASE,0,BUFFER_SIZE_VALUE);<font></font>
<font></font>
  //  ,   <font></font>
  IOWR_ALTERA_MSGDMA_CSR_CONTROL(MSGDMA_0_CSR_BASE,<font></font>
      ALTERA_MSGDMA_CSR_STOP_DESCRIPTORS_MASK);<font></font>
<font></font>
  //   ,      ,<font></font>
  //    ,   .  .<font></font>
<font></font>
  //    FIFO<font></font>
  IOWR_ALTERA_MSGDMA_DESCRIPTOR_READ_ADDRESS(MSGDMA_0_DESCRIPTOR_SLAVE_BASE,<font></font>
      (alt_u32)0);<font></font>
  IOWR_ALTERA_MSGDMA_DESCRIPTOR_WRITE_ADDRESS(MSGDMA_0_DESCRIPTOR_SLAVE_BASE,<font></font>
      (alt_u32)BUFFER_BASE);<font></font>
  IOWR_ALTERA_MSGDMA_DESCRIPTOR_LENGTH(MSGDMA_0_DESCRIPTOR_SLAVE_BASE,<font></font>
      BUFFER_SIZE_VALUE);<font></font>
  IOWR_ALTERA_MSGDMA_DESCRIPTOR_CONTROL_STANDARD(MSGDMA_0_DESCRIPTOR_SLAVE_BASE,<font></font>
      ALTERA_MSGDMA_DESCRIPTOR_CONTROL_GO_MASK);<font></font>
<font></font>
   //  ,    <font></font>
   IOWR_ALTERA_MSGDMA_CSR_CONTROL(MSGDMA_0_CSR_BASE,<font></font>
       ALTERA_MSGDMA_CSR_STOP_ON_ERROR_MASK<font></font>
       &amp; (~ALTERA_MSGDMA_CSR_STOP_DESCRIPTORS_MASK)<font></font>
       &amp;(~ALTERA_MSGDMA_CSR_GLOBAL_INTERRUPT_MASK)) ;<font></font>
<font></font>
<font></font>
   //   <font></font>
   static const alt_u32 errMask = ALTERA_MSGDMA_CSR_STOPPED_ON_ERROR_MASK |<font></font>
           ALTERA_MSGDMA_CSR_STOPPED_ON_EARLY_TERMINATION_MASK |<font></font>
           ALTERA_MSGDMA_CSR_STOP_STATE_MASK |<font></font>
           ALTERA_MSGDMA_CSR_RESET_STATE_MASK;<font></font>
<font></font>
  volatile alt_u32 status;<font></font>
  do<font></font>
  {<font></font>
     status = IORD_ALTERA_MSGDMA_CSR_STATUS(MSGDMA_0_CSR_BASE);<font></font>
  } while (!(status &amp; errMask) &amp;&amp;(status &amp; ALTERA_MSGDMA_CSR_BUSY_MASK));     <font></font>
<font></font>
  alt_putstr("You can play with memory!\n");<font></font>
<font></font>
  /* Event loop never exits. */<font></font>
  while (1);<font></font>
<font></font>
  return 0;<font></font>
}<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Come√ßamos, aguardamos a mensagem </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Voc√™ pode brincar com a mem√≥ria!"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , coloque o programa em pausa e observe a mem√≥ria, come√ßando no endere√ßo 0. No come√ßo, fiquei com muito medo: no </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rw/yd/kb/rwydkbfypprtgoj5wspybiq3sv8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
endere√ßo 0x80, o contador altera seu valor acentuadamente. Al√©m disso, uma quantidade muito grande. Mas acabou que est√° tudo bem. Em nosso local, o contador nunca para e est√° sempre pronto, e o DMA tem sua pr√≥pria fila de leitura antecipada. Deixe-me lembr√°-lo das configura√ß√µes do bloco DMA:</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/ty/hk/-6/tyhk-610qcr5r-jpmrr2dnxz4wg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0x80 bytes s√£o 0x20 palavras de trinta e dois bits. </font><font style="vertical-align: inherit;">Apenas 32 decimais. </font><font style="vertical-align: inherit;">Tudo se encaixa. </font><font style="vertical-align: inherit;">Nas condi√ß√µes de depura√ß√£o, isso n√£o √© assustador. </font><font style="vertical-align: inherit;">Em condi√ß√µes de combate, a fonte funcionar√° mais corretamente (sua prontid√£o ser√° redefinida). </font><font style="vertical-align: inherit;">Portanto, simplesmente ignoramos esta se√ß√£o. </font><font style="vertical-align: inherit;">Em outras √°reas, o medidor conta sequencialmente. </font><font style="vertical-align: inherit;">Vou mostrar apenas o fragmento de despejo em largura. </font><font style="vertical-align: inherit;">Pegue uma palavra que eu examinei na √≠ntegra. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/pw/hg/eq/pwhgeqyxbian3_fg-m46yliilrk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o confiando em meus olhos, escrevi um c√≥digo que verifica automaticamente os dados:</font></font><br>
<br>
<pre><code class="plaintext hljs">  volatile alt_u32* pData = (alt_u32*)BUFFER_BASE;<font></font>
  volatile alt_u32 cur = pData[0x10];<font></font>
  int nLine = 0;<font></font>
  for (volatile int i=0x11;i&lt;BUFFER_SIZE_VALUE/4;i++)<font></font>
  {<font></font>
	  if (pData[i]!=cur+1)<font></font>
	  {<font></font>
		  alt_printf("Problem at 0x%x\n",i*4);<font></font>
		  if (nLine++ &gt; 10)<font></font>
		  {<font></font>
			  break;<font></font>
		  }<font></font>
	  }<font></font>
	  cur = pData[i];<font></font>
  }<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ele tamb√©m n√£o revela nenhum problema.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentando encontrar pelo menos alguns problemas</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De fato, a aus√™ncia de problemas nem sempre √© boa. </font><font style="vertical-align: inherit;">Como parte do artigo, eu precisava encontrar os problemas e depois mostrar como eles foram corrigidos. </font><font style="vertical-align: inherit;">Afinal, os problemas s√£o √≥bvios. </font><font style="vertical-align: inherit;">Um √¥nibus ocupado n√£o pode transmitir dados sem atrasos! </font><font style="vertical-align: inherit;">Deve haver atrasos! </font><font style="vertical-align: inherit;">Mas vamos verificar por que tudo acontece t√£o bem. </font><font style="vertical-align: inherit;">Primeiro de tudo, pode acontecer que tudo esteja no FIFO do bloco DMA. </font><font style="vertical-align: inherit;">Reduza ao m√≠nimo o tamanho: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/z3/vm/9i/z3vm9igmqgqcgynhiyzu-9dr7ss.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
tudo continua funcionando! </font><font style="vertical-align: inherit;">Boa. </font><font style="vertical-align: inherit;">Certifique-se de provocar o n√∫mero de acessos ao barramento mais do que a dimens√£o FIFO. </font><font style="vertical-align: inherit;">Adicione um contador de visitas:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fa/f4/iq/faf4iqvpkc4ezbvhdz4uhpnrbjo.png"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesmo texto:</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">  volatile alt_u32 status;<font></font>
  volatile int n = 0;<font></font>
  do<font></font>
  {<font></font>
	  status = IORD_ALTERA_MSGDMA_CSR_STATUS(MSGDMA_0_CSR_BASE);<font></font>
	  n += 1;<font></font>
  } while (!(status &amp; errMask) &amp;&amp;(status &amp; ALTERA_MSGDMA_CSR_BUSY_MASK));  <font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final do trabalho, s√£o 29. S√£o mais de 16. Ou seja, o FIFO deve estourar. </font><font style="vertical-align: inherit;">Por precau√ß√£o, vamos adicionar mais leituras de registro de status. </font><font style="vertical-align: inherit;">N√£o ajuda. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Com tristeza, desconectei-me do complexo remoto Redd, refiz o projeto para minha t√°bua de p√£o existente, √† qual posso me conectar com um oscilosc√≥pio agora (no escrit√≥rio, ningu√©m est√° √† dist√¢ncia, n√£o consigo alcan√ßar o oscilosc√≥pio). </font><font style="vertical-align: inherit;">Adicionadas duas portas ao timer:</font></font><br>
<br>
<pre><code class="plaintext hljs">   output    clk_copy,<font></font>
   output    ready_copy<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E os nomeou:</font></font><br>
<br>
<pre><code class="plaintext hljs">    assign clk_copy = clk;<font></font>
    assign ready_copy = source_ready;<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, o m√≥dulo come√ßou a ficar assim:</font></font><br>
<br>
<pre><code class="plaintext hljs">module Timer_ST (<font></font>
   input           clk,<font></font>
   input           reset,<font></font>
	<font></font>
   input logic     source_ready,<font></font>
   output logic    source_valid,<font></font>
   output logic[31:0] source_data,<font></font>
<font></font>
   output    clk_copy,<font></font>
   output    ready_copy<font></font>
	<font></font>
);<font></font>
    logic [31:0] counter;<font></font>
    always @ (posedge clk, posedge reset)<font></font>
    if (reset == 1)<font></font>
    begin<font></font>
        counter &lt;= 0;<font></font>
    end else<font></font>
    begin<font></font>
        counter &lt;= counter + 1;<font></font>
    end<font></font>
<font></font>
    assign source_valid = 1;<font></font>
    assign source_data [31:24] = counter [7:0];<font></font>
    assign source_data [23:16] = counter [15:8];<font></font>
    assign source_data [15:8] = counter [23:16];<font></font>
    assign source_data [7:0] = counter [31:24];<font></font>
<font></font>
    assign clk_copy = clk;<font></font>
    assign ready_copy = source_ready;<font></font>
<font></font>
endmodule<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em casa, tenho um modelo menor com um cristal, ent√£o tive que reduzir o apetite da mem√≥ria. E aconteceu que meu programa primitivo n√£o caberia em uma se√ß√£o de 4 kilobytes. Portanto, o t√≥pico levantado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no √∫ltimo artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©, oh, qu√£o relevante. Mem√≥ria no sistema - apenas o suficiente! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando o programa √© iniciado, obtemos um aumento </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imediato</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de </font><font style="vertical-align: inherit;">16 ou 17 medidas. Isso √© preenchido com o FIFO do bloco DMA. O mesmo efeito que me assustou no come√ßo. S√£o esses dados que formar√£o o preenchimento de buffer muito falso. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/i6/wy/-a/i6wy-a4xsnbwej_o9indj_plneg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, temos uma imagem bonita em 40960 nanossegundos, ou seja, 2048 ciclos (com um cristal dom√©stico, o buffer teve que ser reduzido para 8 kilobytes, ou seja, 2048 palavras de trinta e dois bits). Aqui est√° o come√ßo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/9h/c5/1d/9hc51dpo8ur2_1whymyreqkvzre.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° o fim:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5l/3y/le/5l3ylew4zpty3b9xf6bn_zjunlc.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, e por toda parte - nem um √∫nico fracasso. </font><font style="vertical-align: inherit;">N√£o, estava claro que isso iria acontecer, mas havia alguma esperan√ßa ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Talvez dev√™ssemos tentar escrever no √¥nibus, e n√£o apenas ler a partir dele? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rj/lg/o8/rjlgo8iyaj30cxjr8jhkc1njap4.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicionei um </font><font style="vertical-align: inherit;">bloco GPIO ao sistema: adicionei </font><font style="vertical-align: inherit;">uma entrada enquanto aguardava a prepara√ß√£o:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j4/ci/vp/j4civpmja0ccaz_9qinqqc247wu.png"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesmo texto</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">  volatile alt_u32 status;<font></font>
  volatile int n = 0;<font></font>
  do<font></font>
  {<font></font>
	status = IORD_ALTERA_MSGDMA_CSR_STATUS(MSGDMA_0_CSR_BASE);<font></font>
       IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x01);<font></font>
       IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x00);<font></font>
<font></font>
       n += 1;<font></font>
  } while (!(status &amp; errMask) &amp;&amp;(status &amp; ALTERA_MSGDMA_CSR_BUSY_MASK));  <font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
N√£o h√° problemas e √© isso! </font><font style="vertical-align: inherit;">Quem √© o culpado?</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o h√° milagres, mas h√° coisas inexploradas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quem √© o culpado? Com tristeza, comecei a estudar todos os menus da ferramenta </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Platform Designer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, ao que parece, encontrei uma pista. Como √© geralmente um pneu? O conjunto de fios aos quais os clientes est√£o conectados. Assim? Parece t√£o. Vemos isso nas figuras do editor. Apenas, o segundo objetivo do artigo era mostrar como o √¥nibus pode ser dividido em dois segmentos independentes, cada um dos quais funciona sem interferir no outro. </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas vamos ver as mensagens que aparecem quando o sistema √© gerado. Destaque palavras-chave:</font></font><br>
 <br>
<img src="https://habrastorage.org/webt/di/ri/c1/diric1mrzwztjmu2bcw3nrxg5du.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E h√° muitas mensagens semelhantes: √© adicionada, √© adicionada. Acontece que ap√≥s a edi√ß√£o com canetas, muitas coisas adicionais s√£o adicionadas ao sistema. Como voc√™ olharia para um esquema em que tudo isso j√° est√° dispon√≠vel? Ainda estou nadando nisto, mas podemos obter a resposta mais prov√°vel na estrutura do artigo escolhendo este item de menu: a </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/7s/k_/vv7sk_blrrjycf7wfixijjcdzus.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
imagem aberta √© impressionante por si s√≥, mas n√£o vou dar. E imediatamente selecionarei esta guia: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/y-/ub/dv/y-ubdvljrhcecquyc0rg5u5t16e.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E a√≠ vemos o seguinte: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/18/zk/_9/18zk_94hudf6j0r9lfliuu9wjy8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mostrarei maior o mais importante:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gy/1u/if/gy1uifa4ln0x8_axbm4t9_juypq.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os pneus n√£o est√£o combinados! </font><font style="vertical-align: inherit;">Eles s√£o segmentados! </font><font style="vertical-align: inherit;">N√£o posso justificar (talvez os especialistas me corrijam nos coment√°rios), mas parece que o sistema inseriu as op√ß√µes para n√≥s! </font><font style="vertical-align: inherit;">S√£o esses switches que criam os segmentos de barramento isolados, e o sistema principal pode trabalhar em paralelo com a unidade DMA, que neste momento pode acessar a mem√≥ria sem conflito!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provocamos problemas reais</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tendo recebido todo esse conhecimento, conclu√≠mos que podemos muito bem provocar problemas. </font><font style="vertical-align: inherit;">Isso √© necess√°rio para garantir que o sistema de teste possa cri√°-los, o que significa que o ambiente de desenvolvimento realmente os resolve independentemente. </font><font style="vertical-align: inherit;">N√£o nos referiremos a dispositivos abstratos no barramento, mas √† mesma mem√≥ria Buffer, para que o bloco </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmd_mux_005</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> distribua o barramento entre o n√∫cleo do processador e o bloco DMA. </font><font style="vertical-align: inherit;">Reescrevemos a fun√ß√£o de longa espera da seguinte maneira:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zm/ww/4n/zmww4n1xt_p-eo_2hqrfufgtmis.png"><br>
<br>
<div class="spoiler" role="button" tabindex="0">
                        <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesmo texto</font></font></b>
                        <div class="spoiler_text"><pre><code class="plaintext hljs">  volatile alt_u32 status;<font></font>
  volatile int n = 0;<font></font>
  volatile alt_u32* pBuf = (alt_u32*)BUFFER_BASE;<font></font>
  volatile alt_u32 sum = 0;<font></font>
  do<font></font>
  {<font></font>
	  status = IORD_ALTERA_MSGDMA_CSR_STATUS(MSGDMA_0_CSR_BASE);<font></font>
	  sum += pBuf[n];<font></font>
<font></font>
	  n += 1;<font></font>
  } while (!(status &amp; errMask) &amp;&amp;(status &amp; ALTERA_MSGDMA_CSR_BUSY_MASK));<font></font>
</code></pre><br>
</div>
                    </div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E finalmente, mergulhos apareceram na forma de onda! </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/po/rc/vvporcmhdl2i9julycbcib6vnfe.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A fun√ß√£o de verifica√ß√£o de mem√≥ria tamb√©m encontrou muitas omiss√µes: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xf/pf/8y/xfpf8ytbjo3wqlxsgqprx6eqnj0.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, e vemos muito bem que os dados s√£o alterados de uma linha para </font></font><br>
<br>
<img src="https://habrastorage.org/webt/eu/eh/uu/euehuuf9rp-ilidebmcy_zsdcuq.png"> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
outra </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">e aqui est√° um exemplo de um ponto ruim espec√≠fico (6CCE488F est√° ausente): </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v_/5e/rj/v_5erjk_wbxw9ujfrhptcxpeudy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vemos que o experimento foi feito corretamente, apenas o ambiente de desenvolvimento realizado otimiza√ß√£o para n√≥s. </font><font style="vertical-align: inherit;">√â esse o caso quando pronuncio a frase ‚Äútodos machucam com intelig√™ncia todo o a√ßo‚Äù n√£o com zombaria, mas com gratid√£o. </font><font style="vertical-align: inherit;">Obrigado aos desenvolvedores do Quartus por esse assunto!</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aprendemos como inserir um bloco DMA no sistema para transferir dados de streaming para a mem√≥ria. </font><font style="vertical-align: inherit;">Tamb√©m garantimos que o processo de download de outros dispositivos no barramento n√£o interfira no processo de download. </font><font style="vertical-align: inherit;">O ambiente de desenvolvimento criar√° automaticamente um segmento isolado que ser√° executado em paralelo com outras se√ß√µes do barramento. </font><font style="vertical-align: inherit;">Obviamente, se algu√©m se volta para o mesmo segmento, os conflitos e o tempo gasto para resolv√™-los s√£o inevit√°veis, mas o programador pode muito bem prever tais coisas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No pr√≥ximo artigo, substituiremos a RAM por um controlador SDRAM e o temporizador por uma "cabe√ßa" real e faremos o primeiro analisador l√≥gico. </font><font style="vertical-align: inherit;">Vai funcionar? Ainda n√£o sei. </font><font style="vertical-align: inherit;">Espero que os problemas n√£o apare√ßam.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500002/index.html">Especialistas em TI versus vendedores: e o mundo rachou ao meio</a></li>
<li><a href="../pt500008/index.html">Conhe√ßa upscalers</a></li>
<li><a href="../pt500010/index.html">Hist√≥ria de hidrog√™nio sujo</a></li>
<li><a href="../pt500012/index.html">Entidade da estrutura da entidade</a></li>
<li><a href="../pt500014/index.html">Design totalmente responsivo √© mais do que apenas consultas de m√≠dia</a></li>
<li><a href="../pt500018/index.html">Imita√ß√£o de desenho √† m√£o livre no exemplo do RoughJS</a></li>
<li><a href="../pt500020/index.html">Google Earth Engine - Plataforma √∫nica de an√°lise de grandes dados geogr√°ficos</a></li>
<li><a href="../pt500022/index.html">Por que participar da vida comunit√°ria e como isso ajuda no crescimento profissional?</a></li>
<li><a href="../pt500026/index.html">Bobagem neste setor * simplesmente inacredit√°vel</a></li>
<li><a href="../pt500028/index.html">Plataformas de gerenciamento de dados: perif√©ricos para a nuvem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>