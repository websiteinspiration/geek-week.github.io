<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚🏼 🤡 🚣🏾 HighLoad ++, Mikhail Raichenko (ManyChat): almost without magic, or how easy it is to distribute terabit video stream 🚆 🧕🏾 🔫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The next HighLoad ++ conference will be held on April 6 and 7, 2020 in St. Petersburg. Details and tickets here . HighLoad ++ Moscow 2018. Hall “Delhi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>HighLoad ++, Mikhail Raichenko (ManyChat): almost without magic, or how easy it is to distribute terabit video stream</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/488148/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The next HighLoad ++ conference will be held on April 6 and 7, 2020 in St. Petersburg. </font><font style="vertical-align: inherit;">Details and tickets </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">HighLoad ++ Moscow 2018. Hall “Delhi + Calcutta”. </font><font style="vertical-align: inherit;">November 8, 2 p.m. </font><font style="vertical-align: inherit;">Abstracts and </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ym/ji/ba/ymjiba---vkcs5ibbqbk9kcz8ny.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I work in the VKontakte team and am developing a video broadcasting system. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In the report, I will share the features of the development of the backend, how our system has evolved, and the technical solutions that we have come to: </font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">how we did the video broadcast backend, and the evolution process as it is;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the impact of business and operational requirements on architecture;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Wait” and “try again” will fail;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">how the simplest tasks are complicated by the number of users;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">how to reduce latency without UDP;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We conduct stress tests 2 times a day, or what Clover helped us with.</font></font></li>
</ul><a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikhail Raichenko (hereinafter - MR):</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - A little excursion. </font><font style="vertical-align: inherit;">I’ll tell you about the people who stream us, about the live (live), about which platforms we receive the video stream and which we distribute. </font><font style="vertical-align: inherit;">In the end, I’ll talk about the current architecture of live, about its limitations and capabilities, as well as how the current architecture survived such an effect as “Clover”.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_h/bm/lt/_hbmlt0c2ek74zfr89jdff3wtsw.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">About live broadcasts. </font><font style="vertical-align: inherit;">Report outline</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, I’ll talk a little about the live broadcasts and streamers themselves, sending us video content that we show to other viewers.</font></font></li>
<li>         .    ?     ,     , , ,   -  - , - , .   ,        :   ,  – .</li>
<li>    . ,      .     .     ,      ,     .</li>
<li>  ,     ,   .   ,         .  ,   ,   ,  , ,   2014-2015 .     ,      .</li>
<li>       .  ,                    .</li>
<li>,    .          ,    . ,    .</li>
<li>    ,    .      .</li>
<li>  ,    ,      «»,    .</li>
</ul><br>
<img src="https://habrastorage.org/webt/lz/mm/jw/lzmmjwth6qvdlryupzhegpftal0.jpeg"><br>
<br>
<h3>     </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All broadcast services look something like this: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/dt/2r/va/dt2rvaddozkmjrcp-1ojlaixmr0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have some streamer, it sends an RTMP stream to us, and we show the audience - nothing surprising, nothing supernatural. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ee/fx/kq/eefxkq8vknyi57vz-y-_ekw5pd0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Where does the video stream come from? A significant source of traffic for us is our mobile application VKlife. What's good about him? In it, we can fully control how we encode the video. We can make many optimizations on the client side, so that later, with minimal delays, show it to our viewers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of the minuses: mobile applications work on top of networks. It can be 3G ... In any case, it is almost always mobile networks, which introduces some lags - you need to additionally buffer the data on the application side, so that the stream runs as smoothly as possible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second source is streamers with OBS, Wirecast or those who stream from other desktop applications. </font><font style="vertical-align: inherit;">This is a fairly large audience. </font><font style="vertical-align: inherit;">Sometimes these are seminars, sometimes - game streams (there are especially a lot of them from such applications). </font><font style="vertical-align: inherit;">From the positive: there are few such applications, we can give our streamers good tuning recommendations. </font><font style="vertical-align: inherit;">But at the same time there are a lot of settings and send not quite the stream that we want. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The third category is the RTMP stream from media servers. </font><font style="vertical-align: inherit;">These can be very small media servers, that is, a home format: a person streams a view of the street or something else. </font><font style="vertical-align: inherit;">Or quite serious broadcasts from our partners: there can be anything, there are not very many such streams, but basically they are very important for us.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Who's watching?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again, this is a mobile application - everything is clear here. The biggest problem is network latency. From the pros: we can customize the player - it’s convenient for us, good, but not everywhere it turns out 100%. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Web player at vk.com. Here, too, everything is simple - it is a regular web player that you can open to watch. A sufficiently large audience at vk.com, a lot of viewers on the broadcasts. Some broadcasts hang in our “Video” section - there can be tens of thousands (sometimes without any PR), especially if this is interesting content. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, the channels are large enough for viewers who are sitting on a web player. Therefore, there is a lot of traffic, including for one broadcast.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The third is the VKontakte web player on some third-party site. </font><font style="vertical-align: inherit;">You can start streaming everything you want, and hang a VKontakte web player on your website. </font><font style="vertical-align: inherit;">You can become our partner if you have interesting content: you can hang it on your own, you can hang with us - as you wish. </font><font style="vertical-align: inherit;">You can organize your broadcasts in this way, and everything will work.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparison with video calls</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In video calls, some image distortion will be forgiven. Video calls are simpler: we can significantly degrade the image, but at the same time we must maintain a very good latency. With a long delay, the service will be absolutely impossible to use. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In broadcasts in this sense, it’s a little vice versa: we must maintain high image quality, but at the same time we can increase latency due to many factors. For example, the player buffers its flow one way or another (it can be a second, two to survive the degradation of the network, for example), so there are no second, millisecond delays in most cases. You can strive for this, but food is not a prerequisite.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/j0/7o/o6/j07oo6ceqiizh_lzdgjsgvgfwtq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With ordinary video, the situation is exactly the opposite. </font><font style="vertical-align: inherit;">We need very good quality. </font><font style="vertical-align: inherit;">At the same time, it is desirable to minimize the video size, the ratio of bitrate and quality, so that with the minimum flow, give the best solution. </font><font style="vertical-align: inherit;">From the pros: we are not limited in time: at the time of downloading the video, we have enough time to optimize the video, see how to compress it in the best way, do something, drag it to caches, if necessary - in general, everything is enough OK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/jf/r-/cc/jfr-cco9dozhxgqqnuw57opkqjk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In live, the situation is, again, the opposite: we have very little time for transcoding. </font><font style="vertical-align: inherit;">At the same time, there are few opportunities, but there are no expectations for the broadcast. </font><font style="vertical-align: inherit;">The audience will forgive us if we have support or the quality is not very good.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Very first version</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It’s quite expected: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3f/gt/bw/3fgtbwzvl3uf680sfzsf8kjette.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, it’s a little different: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/vu/9r/zu/vu9rzujgkidpvrb66qzgbvapljo.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“Streamer - media server - cache level - viewers”. </font><font style="vertical-align: inherit;">In principle, this version allows you to scale quite strongly. </font><font style="vertical-align: inherit;">I would say that it should already withstand tens of thousands of spectators. </font><font style="vertical-align: inherit;">It has other drawbacks ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For example, if you look at this circuit (previous slide), you can see that it is not fault tolerant. </font><font style="vertical-align: inherit;">We must guess with the media server in order to balance the audience well. </font><font style="vertical-align: inherit;">We cannot hang many caches on each server - it is simply expensive. </font><font style="vertical-align: inherit;">Therefore, we looked, realized that it was simple and clear, there were some possibilities for scaling, but obviously something was missing ... And we began to formulate requirements.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infrastructure requirements</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What's important?</font></font><br>
<br>
<ul>
<li> .     , ,    .            (       ).       (,  ).</li>
<li>.     : -,    (,    )      ; -,     –      ,    ,       .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Delivery to the regions. </font><font style="vertical-align: inherit;">Also an important point! </font><font style="vertical-align: inherit;">It’s stupid to drag all the video content from Petersburg or Moscow to some kind of Novosibirsk, Yekaterinburg, or even from St. Petersburg to Moscow. </font><font style="vertical-align: inherit;">This is not very good, since the network delay will be long - there will be lags, everything will lag, and this is not good. </font><font style="vertical-align: inherit;">Therefore, our infrastructure must take into account that we deliver content to the regions.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convenience of operation and monitoring. </font><font style="vertical-align: inherit;">An important property. </font><font style="vertical-align: inherit;">Since the system is large, there are many viewers, it is important to send alerts to administrators in time in case of any problems, including monitoring product and technical metrics.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/km/n1/e_/kmn1e_0ii74m9xilh_5rsic9l5a.jpeg"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What does the broadcast infrastructure look like now?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As a result, we came to a fairly simple but effective infrastructure ...</font></font><br>
<br>
<ul>
<li> – ,       ( ,  ).   RTMP-,    .        ,  .</li>
<li> ,      ,     ,  ,   .       .  ,   ,   ,   – : , -,  (. .       ); -,     .</li>
<li>      .     –    ,   .        ,    ,    .      ,         (    ,  ).</li>
<li>         ,         (edge-).     ,  .    !</li>
<li>   –  edge-,      ,   .   :      ,   –    .</li>
</ul><br>
<img src="https://habrastorage.org/webt/2e/cu/qp/2ecuqpdeldwtxd6qjyi-x4q0_ke.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interestingly? </font><font style="vertical-align: inherit;">Balancing! </font><font style="vertical-align: inherit;">In this scheme, we choose balancing, try to send viewers who watch the same stream to each edge server. </font><font style="vertical-align: inherit;">The cache locality is very important here, because there can be many edge servers; </font><font style="vertical-align: inherit;">and if we do not observe both the temporary and the locality of the cache from the point of view of the stream, then we will overload the inner layer. </font><font style="vertical-align: inherit;">We would not like that either.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Therefore, we balance in the following way: we select a certain edge server for the region to which we are sending spectators, and we are sending until we begin to understand that some filling has occurred and should be sent to another server. </font><font style="vertical-align: inherit;">The circuit is simple and works very reliably. </font><font style="vertical-align: inherit;">Naturally, for different streams you choose a different sequence of edge-servers (the sequence in which we send out spectators). </font><font style="vertical-align: inherit;">Accordingly, balancing works quite simply.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We also give the client a link to an available edge server. </font><font style="vertical-align: inherit;">This is done so that in case of edge-server failure, we can redirect the viewer to another. </font><font style="vertical-align: inherit;">That is, when the viewer watches the broadcast, he receives a link to the desired server once every few seconds. </font><font style="vertical-align: inherit;">If he understands that the link must be different, he switches (the player switches) and continues to watch the broadcast from another server. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another important role of edge servers is content protection. </font><font style="vertical-align: inherit;">All content protection essentially takes place there. </font><font style="vertical-align: inherit;">We have our own nginx module for this. </font><font style="vertical-align: inherit;">It is somewhat similar to Security Link.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scaling and balancing</font></font></h3><br>
<ul>
<li>   . ,        :     ,       .          edge-,        .     .     .    …   ,     –    ,  --    – ,  – , , ,   –  !   –        .</li>
<li>      .  ,  ,         ,    ,       :     .       (   )    ,    –   ,   . ,    ,     ,      edge-.</li>
<li>   ,   ,       ,     .</li>
</ul><br>
<img src="https://habrastorage.org/webt/19/nj/i8/19nji8vwkh_kjrrsm9d698hf5ji.jpeg"><br>
<br>
<h3>   ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the main protocols we had was RTMP (not only for input, but also for content distribution). The main advantage is low latency. It can be half a second, second, two seconds. In fact, the benefits end there ... </font></font><br>
<br>
<img src="https://habrastorage.org/webt/u7/fv/al/u7fvaloyunlxmyavp5rjemer4sw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This streaming protocol is difficult to monitor - it is closed in a sense, despite the fact that there is a specification. The Flash player no longer works (in fact, it is “already everything”). Need support at the CDN level - you need special nginx modules or your own software in order to transfer the stream normally. There are also some difficulties with mobile clients. Out of the box in mobile clients it is supported very poorly - special improvements are needed, and all this is very difficult.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second protocol we used is HLS. </font><font style="vertical-align: inherit;">It looks quite simple: it is a text file, the so-called index file. </font><font style="vertical-align: inherit;">It contains links to index files with different permissions, and the files themselves contain links to media segments. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/w-/hl/vf/w-hlvfylbcsu1n6ksqlv7uy5e5a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How is he good? </font><font style="vertical-align: inherit;">It is very simple, despite being a bit old. </font><font style="vertical-align: inherit;">It allows you to use CDN, that is, you only need nginx to distribute the HLS protocol. </font><font style="vertical-align: inherit;">It is understandable in terms of monitoring. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Here are its advantages:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ease of operation - nginx as a proxy server;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it’s easy to monitor and take metrics (it’s enough for you to monitor about the same as what you monitor on your website);</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now this protocol is the main one for content delivery.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Significant minus:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">high latency.</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/fa/ko/2_/fako2_ysvwvhaguijmddcna20eu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
HLS latency is actually nested in the protocol itself; </font><font style="vertical-align: inherit;">since a long buffering time is required, the player is forced to wait at least when one chunk is loaded, but in a good way, he must wait until two chunks (two media segments) are loaded, otherwise in case of a lag the client will have the player load, and this does not very well affect user experience. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second point that gives a delay in HLS is caching. </font><font style="vertical-align: inherit;">The playlist is cached on the inner layer and on the edge servers. </font><font style="vertical-align: inherit;">Even if we cache, relatively speaking, for a second or half a second, then this is approximately plus 2-3 seconds of delay. </font><font style="vertical-align: inherit;">In total, it turns out from 12 to 18 seconds - this is not very pleasant, obviously it is better.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Improving HLS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
With these thoughts, we began to improve HLS. We improved it in a rather simple way: let's give the last, not yet recorded media segment of the playlist a little earlier. That is, as soon as we started writing the last media segment, we immediately announce it in the playlist. What is happening at this moment? .. The </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
buffering time in the players is reduced. The player believes that he has already downloaded everything, and calmly starts downloading the desired segments. This way we “cheat” the player in this way, but if we monitor the “steel” (loads in the player) well, it doesn’t scare us - we can stop giving the segment in advance and everything will return to normal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second point: we win a total of about 5-8 seconds. Where do they come from? This segment time is from 2 to 4 seconds per segment, plus the time to cache the playlist (this is another 2-3 seconds). Our delay is decreasing, moreover, significantly. The delay is reduced from 12-15 seconds to 5-7. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What else is good in this approach? It is actually free! We only need to check whether the players are compatible with this approach. Those that are incompatible, we send to the old URLs, and we send compatible players to the new URLs. We do not need to upgrade old clients that support this, which is also important. We actually do not need to modify, release players in mobile clients. We do not need to develop a web player. It looks good enough!</font></font><br>
<br>
<img src="https://habrastorage.org/webt/0f/gm/tt/0fgmttjysv2w8rg8bmzdgzcdtz4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Of the minuses - the need to control the incoming video stream. </font><font style="vertical-align: inherit;">In the case of a mobile client, we can do this quite easily (when the stream comes from a mobile client), or transcode without fail, since the player must know how long it takes for one media segment of time. </font><font style="vertical-align: inherit;">And since we are announcing it before it is actually recorded, we need to know how much time it will take when we record it.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quality metrics</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thus, we have improved HLS. </font><font style="vertical-align: inherit;">Now I want to tell how we monitor and what quality metrics we shoot: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3h/_y/iz/3h_yizx3clxbb18dzi-urr-oylq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
One of the main quality metrics is the start time. </font><font style="vertical-align: inherit;">Ideally, this is when you scroll through the mobile client before the broadcast, press the button, and it starts immediately. </font><font style="vertical-align: inherit;">It would be ideal if it starts before you press the button, but, unfortunately, only when you press.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second point is signal delay. We believe that a few seconds is very good, 10 seconds is tolerable, 20-30 seconds is very bad. Why is it important? For example, for concerts and some public events this is an absolutely unimportant metric, there is no feedback; we just show the stream - it’s better not to lag than a slight delay. And for a stream where some kind of conference is going on or a person tells something and they ask him questions, this starts to be important, because they ask a lot of questions in the comments and I want the audience to get feedback as early as possible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Another important metric is buffering and lags. </font><font style="vertical-align: inherit;">In fact, this metric is important not so much from the point of view of the client and quality, but from the point of view of how much we can “stretch” HLS delivery, how much we can squeeze data from our servers. </font><font style="vertical-align: inherit;">Therefore, we monitor both the average buffer time in the players and the “steel”. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The choice of quality in the players is understandable: unexpected changes are always annoying. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Accordingly, this is also an important metric.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitoring</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We have many monitoring metrics, but here I chose those metrics that always work if something went wrong:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ir/wy/me/irwymelifaedclj13razr83a85i.jpeg"><br>
<br>
<ul>
<li>-,    .   -   ,    .  ,  – ,              ( ,  –  ).</li>
<li> /     .  , ,  ,      ,        ,    .     .</li>
<li>  edge-.  ,       ,     edge-       .</li>
</ul><br>
<br>
<h3>  «»,       ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Now I’ll tell you how we handled an application such as “Player” when we used our infrastructure to broadcast a video stream with questions and answers. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clover is an online quiz. The host says something, asks: questions fall out - you answer. 12 questions, 10 minutes of the game, at the end - some kind of prize. What's so complicated? This is growth! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
On the right is this graph: The </font></font><br>
<br>
<img src="https://habrastorage.org/webt/hw/i8/_e/hwi8_er_sdcw_gxczrgk3z41en0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
peak [on the graph] is the load on the servers in terms of the API at the time of the start of “Clover”. The rest of the time is the usual stream of broadcasts. This cannot be equated to the number of viewers. Perhaps this is the number of requests and the load.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It's hard: in 5 minutes a million spectators came to us at the peak. </font><font style="vertical-align: inherit;">They begin to watch the broadcast, register, perform some kind of action, request a video ... It would seem to be a very simple game, but it happens in a very short period of time (all actions, including the final game) - this gives a fairly high load.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What questions and challenges did we face?</font></font></h3><br>
<img src="https://habrastorage.org/webt/pd/ci/xh/pdcixhln_tmsracssi9qfy5ra5y.jpeg"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fast growth. </font><font style="vertical-align: inherit;">Sometimes it was + 50% per week. </font><font style="vertical-align: inherit;">If, for example, you have 200 thousand people on Wednesday, then on Saturday or Sunday there could already have been 300. That's a lot! </font><font style="vertical-align: inherit;">Problems begin to surface that were not previously visible.</font></font></li>
<li>    2   .       .      ,  .       ,  , ,          ,         ,    .<br>
 12         . ,    ,     ,    , ,    -      ,     ,  …</li>
<li>      ,       .     , ,  200-300 ,         400-500.</li>
<li>- ,    ,   ,           3-5 .   ?    «»,    ,    ,         ,     .<br>
<br>
       (   3   ,   ),          ,       3-5 .    ?  –  ,  –     exponential backoff,        .<br>
<br>
  exponential on backoff:  – ,       2 ,   4,  8.             backend-.</li>
</ul><br>
<h3>    «»?</h3><br>
<img src="https://habrastorage.org/webt/-h/c_/gn/-hc_gnjjd-m7ujstbxa9edwnoms.jpeg"><br>
<ul>
<li>-,         .      ,    –   .</li>
<li>   « ».  ,     ,    ,      ,     «».      ,   , -,    ,  -,     .</li>
<li> ,         –   ,     «»    .      «».     ,  ,   ,    …     – . 10% «» – , 10% «»  100  –  .</li>
<li> «»   ,     ,    «»      .       –     -  .    100    –  ,  1    15  –   .</li>
<li>   .  «»   , , ,  .   ,      ,     .</li>
<li>   .                   ,    .         ,   latency,    .</li>
<li>   .    –     ,       .</li>
<li>  «»       1           . ,  ,   .      .    ,     ,     .      .</li>
</ul><br>
<h3>  ?</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Architecture completely suits us, and I can safely recommend it. HLS will remain with us the main protocol for at least the website and at least the backup protocol for everything else. Perhaps we will switch to MPEG-DASH. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abandoned RTMP. Despite the fact that it gives a lower delay, we decided that we would tune the HLS. Perhaps consider other delivery vehicles, including DASH as an alternative. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qz/ut/oq/qzutoqnu3adqhxx0rivblxx9izq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We will improve the incoming balance. We also want to make a seamless failover for inbound balancing, so that in case of problems on one of the media servers for the client, the switching would be completely invisible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhaps we will develop delivery systems from edge servers to the client. Most likely, it will be some kind of UDP. Which one - we are now thinking and are in the research stage.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Actually, that's all. </font><font style="vertical-align: inherit;">Thanks to all!</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Questions</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Question from the audience (hereinafter - A): - Thank you very much for the report! </font><font style="vertical-align: inherit;">Only the speaker from Odnoklassniki spoke, and he said that they had to rewrite the streamer, the encoder, the encoder ... Do you use such solutions or use the stock ones that are on the market (like Harmonic, etc.)? </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1_/mt/qb/1_mtqbmuiapdtajkn5at3emzwtm.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Now we have spinning third-party solutions. </font><font style="vertical-align: inherit;">Of the open source solutions we used, we had nginx, the RTMP module (for a long time). </font><font style="vertical-align: inherit;">On the one hand, he pleased us because he worked, quite simple. </font><font style="vertical-align: inherit;">We fought for a very long time so that he would work stably. </font><font style="vertical-align: inherit;">Now he is moving from Nginx-RTMP to his own solution. </font><font style="vertical-align: inherit;">We are thinking with a transcoder now. </font><font style="vertical-align: inherit;">The receiver, namely the receiving part, has also been rewritten from Nginx-RTMP to its solution. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AND:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- I wanted to ask a question about slicing RTMP on HLS, but as I understand it, you already answered ... Tell me, are your solutions open-source? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - We are considering releasing it in opensource. We would rather want to release it, but the question is the time of release in open source. Just put the source on the Internet - this is not enough. You need to think, make some examples of deployment. And for what purpose are you asking? Want to use? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Because I also came across Nginx-RTMP! It is, to put it mildly, not supported for a very long time. The author doesn’t even answer particularly questions ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - If you want, you can write to the mail. Give for own use? We can agree. We really plan to open it up. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AND:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- You also said that you can move from HLS to DASH. HLS does not suit? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - This is a question about what we can, or maybe not. It greatly depends on what we will come to in terms of researching alternative delivery methods (i.e. UDP). If we find something “completely” good, then we probably won't touch HLS. If it seems that MPEG-DASH is more comfortable - maybe we’ll move it. It does not seem to be very difficult, but we are not sure whether it is necessary or not. The synchronization between streams, between qualities and other things is clearly better there. There are pluses. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Regarding alerts. You talked about the fact that if streams stop streaming, then this is immediately an alert. And you didn’t catch something independent of you: the provider fell, Megafon fell, and people stopped streaming? .. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Let's just say that something independent of us is basically all kinds of holidays and so on. Yes, they did. Well, they did, yes. Administrators looked - today is the holidays, the rest of the characteristics are all right - they calmed down. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - And about scaling. At what level does it scale? For example, I asked for a stream from the phone - will I immediately receive a certain link with the correct ash-server? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - A link will come immediately and, if necessary, will switch you (if there are problems on a specific server). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xz/tn/rq/xztnrqvvbr73gu61lqgpvdt5c-e.jpeg"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Who will switch? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Mobile player or web player. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - He will restart the stream or what? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - A new link will come to him where he should go live stream. He will go there and re-ask the stream. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AND:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- At what level do you have caches? And playlists, and chunks, or just that? .. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - And playlists, chunks! It caches a little differently, both in terms of time and in terms of the return of time, but we cache both. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Regarding the creation of ash-servers? Did you have such a situation that you watch 2 million viewers on one broadcast, do not have time for something and quickly pick up some ash-server? Or do you raise everything in advance with a margin? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mr:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Perhaps this was not. Firstly, the stock is always small or large - it does not matter. Secondly, it doesn’t happen that a broadcast suddenly becomes super popular. We can predict the number of viewers well. Basically, in order to have a lot of people, we must make an effort. Accordingly, we can adjust the number of viewers of the broadcast, depending on what efforts are made. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - You said that you measure instrumental delays on the part of the player. How? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Very simple. In chunks (in the media segments) we have a timestamp, in the name of the media segment - in the player we just return it. If he is not explicitly at all, he returns. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - I remember trying to run peering on WebRTC. Why refused? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mr:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“I cannot answer this question for you — it happened without me.” I can’t say why I tried it and I can’t say why I refused. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Regarding the receiver and the media server. As I understand it, you used to have Nginx-RTMP, now both there and there you have self-made solutions. In fact, this is one media server that proxies other media servers, and they are already in the cache and on the edge. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - So, not really. This is a self-made solution, but it is different both in terms of a media server and in terms of a receiver. Nginx-RTMP - it was some kind of harvester that could do both. Our interiors of the receiver and the media server are very different - both by code and throughout. The only thing that unites them is RTMP processing. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Regarding the balancing between the edges. How does this happen?</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - We measure traffic, send it to the desired server. I didn’t understand the question a little ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - I’ll explain: the user requests a playlist through the player - he returns the relative paths to manifests and chunks or absolute paths, for example, by IP or domain? .. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - The paths are relative. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - That is, there is no balancing when viewing a stream by one user? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - It happens. Tricky enough. We can use the 301st redirect when overloading the server. If we see that everything is completely bad there, for segments we can send it to another server. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - But it should be wired into the logic of the player? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mr:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- No, just this part should not be sewn up. 301st redirect! Simply, the player should be able to exit the 301st link. We can send it to another server from the server side at the time of overload. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - That is, he asks the server, and the server gives it to him? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Yes. This is not very good, therefore, the player’s logic is used to retweet links to the case of failure of one of the servers - this is already in the player’s logic. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - And you didn’t try to work not in relative, but in absolute ways: when you request the player to do some magic, find out where there are resources and where not, and already give playlists indicating a specific server? </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mr:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Actually, it looks like a working solution. </font><font style="vertical-align: inherit;">If you had come then, we would have weighed both! </font><font style="vertical-align: inherit;">But the current solution is also working, so I don’t really want to jump from one to the other, although, perhaps, this also looks like a working solution. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Tell me, is this somehow friendly with multicast? </font><font style="vertical-align: inherit;">HLS, as I understand it, absolutely nothing ... </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MR:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - In the current implementation, we probably have nothing in the system with the multicast in live. </font><font style="vertical-align: inherit;">We do not include the concept of multicast there. </font><font style="vertical-align: inherit;">Perhaps somewhere in the depths of admin magic, there is something inside the network, but it is hidden from everyone at all and nobody knows ...</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qr/va/s2/qrvas2mhyryhgck9t6n8ffc1pai.jpeg"><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/bA-Y_BfTZZY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A bit of advertising :)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Thank you for staying with us. Do you like our articles? Want to see more interesting materials? Support us by placing an order or recommending to your friends, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cloud VPS for developers from $ 4.99</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , a </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unique analog of entry-level servers that was invented by us for you: </font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The whole truth about VPS (KVM) E5-2697 v3 (6 Cores) 10GB DDR4 480GB SSD 1Gbps from $ 19 or how to divide the server?</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (options are available with RAID1 and RAID10, up to 24 cores and up to 40GB DDR4). </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R730xd 2 times cheaper at the Equinix Tier IV data center in Amsterdam?</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Only we have </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV from $ 199</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the Netherlands!</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - from $ 99! </font></font></b></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read about</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> How to Build Infrastructure Bldg. </font><font style="vertical-align: inherit;">class c using Dell R730xd E5-2650 v4 servers costing 9,000 euros for a penny?</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en488138/index.html">Small Capacitance Measurements (analog capacitive sensor)</a></li>
<li><a href="../en488140/index.html">How to simplify life with the help of the Pareto law</a></li>
<li><a href="../en488142/index.html">Pensive Avalonia</a></li>
<li><a href="../en488144/index.html">Java Version and Feature Guide</a></li>
<li><a href="../en488146/index.html">[Discussion]: Are IT engineers, are IT engineers?</a></li>
<li><a href="../en488150/index.html">Antiquities: ThinkPad X200 and closed source</a></li>
<li><a href="../en488152/index.html">A prototype multiplayer game for 3 pm?</a></li>
<li><a href="../en488154/index.html">We get into the shoes of the office manager. Basic Supply Algorithms</a></li>
<li><a href="../en488160/index.html">Windows Server 2019 vs. VMware Snapshots with quiescing: an elegant solution to the problem</a></li>
<li><a href="../en488162/index.html">The higher the rating, the more money and vice versa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>