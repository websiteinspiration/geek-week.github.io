<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤣 ✳️ 👨🏽‍⚖️ Combineを使用してSwift 5でHTTPリクエストを作成し、SwiftUIで使用するための最新のコード。パート1 💆🏿 👨🏾‍🚀 🐖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="クエリHTTPは、iOSアプリケーション開発時に取得する必要がある最も重要なスキルの1つです。以前のバージョンSwift（バージョン5まで）では、これらのリクエストを「ゼロから」生成したのか、よく知られたAlamofireフレームワークを使用したのかに関係なく、複雑でわかりにくいcallback 型...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Combineを使用してSwift 5でHTTPリクエストを作成し、SwiftUIで使用するための最新のコード。パート1</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/488442/"><img src="https://habrastorage.org/webt/uk/tq/y4/uktqy4xvl1cqefjbmvzdzydqj-g.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クエリ</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><code>iOS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーション</font><font style="vertical-align: inherit;">開発時に取得する必要がある最も重要なスキルの1つ</font><font style="vertical-align: inherit;">です。以前のバージョン</font></font><code>Swift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（バージョン5まで）では、これらのリクエストを「ゼロから」生成したのか、よく知られた</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alamofire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フレームワークを使用したのかに関係なく、</font><font style="vertical-align: inherit;">複雑で</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">わかり</font></a><font style="vertical-align: inherit;">にくい</font></font><code>callback </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型&nbsp; </font><font style="vertical-align: inherit;">コードになってしまいました</font></font><code>completionHandler: @escaping(Result&lt;T, APIError&gt;) -&gt; Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">既存のと連動し</font><font style="vertical-align: inherit;">た関数型反応型プログラミングの新しいフレームワークに</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
登場し</font></font><code>Swift 5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">非常にコンパクトなコードを独立して記述してインターネットからデータをフェッチするために必要なすべてのツール</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">提供します。</font><font style="vertical-align: inherit;">
この記事では、コンセプトに沿って、</font><font style="vertical-align: inherit;">「出版社」を作成します</font></font><code>Combine</code><font style="vertical-align: inherit;"></font><code>URLSession</code><font style="vertical-align: inherit;"></font><code>Codable</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>Combine</code><font style="vertical-align: inherit;"></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インターネットからデータを選択します。これは、将来的に簡単に「サブスクライブ」して、設計</font><font style="vertical-align: inherit;">と支援の</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方で&nbsp; </font><font style="vertical-align: inherit;">使用でき</font></font><code>UIKit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">それは「発行者」のアクションがあるため、より効果的に、より簡潔で見える&nbsp; </font><font style="vertical-align: inherit;">だけのサンプルデータに限定されるものではなく、ユーザインタフェース制御へのさらなるアップを拡張します（</font><font style="vertical-align: inherit;">）。実際のところ、</font><font style="vertical-align: inherit;">データの分離は&nbsp; </font><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">を持つ</font><font style="vertical-align: inherit;">クラスを</font><font style="vertical-align: inherit;">使用して実行され</font><font style="vertical-align: inherit;">、その変更は&nbsp; </font><font style="vertical-align: inherit;">自動的に監視され、完全に再描画され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
これらの&nbsp; </font><font style="vertical-align: inherit;">クラスでは、アプリケーションの特定のビジネスロジックを非常に簡単に配置できます。</font></font><br>
<br><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code>Publisher</code><font style="vertical-align: inherit;"></font><code>UI</code><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code>View </code><font style="vertical-align: inherit;"></font><code>ObservableObject</code><font style="vertical-align: inherit;"></font><code>@Published</code><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code>View</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>ObservableObject</code><font style="vertical-align: inherit;"></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;特性は、同期および/または非同期変換他の結果で</font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;直接（ユーザー・インターフェースのような「能動的」要素を変更することができるプロパティ</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のテキストボックスとして）</font></font><code>TextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Stepper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Toggle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
何が問題になっているのかを明確にするために、具体的な例を挙げます。現在、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;や</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">などの多くのサービス</font><font style="vertical-align: inherit;">は、</font><font style="vertical-align: inherit;">ニュースアグリゲータを&nbsp; </font><font style="vertical-align: inherit;">提供して、ユーザーが興味のある内容に応じてさまざまな記事のセットを選択できるようにしています。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニュース</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アグリゲータ</font></a><font style="vertical-align: inherit;">の場合&nbsp; </font><font style="vertical-align: inherit;">、最新のニュース、または特定のカテゴリのニュース-「スポーツ」、「健康」、「科学」、「テクノロジー」、「ビジネス」、または特定の情報ソース「CNN」からのニュース、ABCニュース、ブルームバーグなどユーザーは通常</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、必要な</font><font style="vertical-align: inherit;">サービスを形成</font><font style="vertical-align: inherit;">する形</font><font style="vertical-align: inherit;">で、サービスへの要望を「表現」</font><font style="vertical-align: inherit;">し</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、フレームワークを使用すると&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、次のことができます</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「パッシブ」</font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティから「アクティブ」</font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">への「</font><font style="vertical-align: inherit;">サブスクリプション」の形式で</font><font style="vertical-align: inherit;">記事のリストの同期および/または非同期の依存関係を形成するために、非常にコンパクトなコード（ほとんどの場合、10〜12行以下）を一度使用するクラス&nbsp; </font><font style="vertical-align: inherit;">。この「サブスクリプション」は、</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラス</font><font style="vertical-align: inherit;">インスタンスの「ライフサイクル」全体を通じて有効です&nbsp; </font><font style="vertical-align: inherit;">。次に</font><font style="vertical-align: inherit;">、フォーム内の</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;「アクティブな」</font></font><code>@Published </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">のみを管理する機会をユーザーに提供します。つまり、ユーザー</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が見たいもの、つまり、最新のニュースを含む記事か、「健康」セクションの記事かを管理します。あなたの「健康」セクションの最新ニュースや記事を含む記事自体の外観は、</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;これらの</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスとその「パッシブ」@Publishedプロパティ</font><font style="vertical-align: inherit;">によって自動的に提供され&nbsp; </font><font style="vertical-align: inherit;">ます。コードで</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">役割を果たしているクラスが</font><font style="vertical-align: inherit;">&nbsp;画面に正しく同期表示</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">責任</font><font style="vertical-align: inherit;">がある</font><font style="vertical-align: inherit;">ため、記事の選択を明示的に要求する必要はありません&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;"> &nbsp;と</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Hacker News</font></a><font style="vertical-align: inherit;">、および</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">TMDb</font></a><font style="vertical-align: inherit;">映画</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">データベース</font></a><font style="vertical-align: inherit;">で</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これがどのように機能するかを&nbsp; </font><font style="vertical-align: inherit;">一連の記事で</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">紹介します</font></a><font style="vertical-align: inherit;">。 3つのケースすべてで、ほぼ同じ使用パターンが機能&nbsp; </font><font style="vertical-align: inherit;">します。この種のアプリケーションでは、常にフィルムまたは記事のリストを作成する必要があるため、それらに付随する「写真」（画像）を選択し、検索バーを使用して必要なフィルムまたは記事のデータベースを検索します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>Combine</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そのようなサービスにアクセスするとき、たとえば、間違ったキーを指定した</font></font><code>API-key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か、許容されるリクエスト数を超えた</font><font style="vertical-align: inherit;">などの理由でエラーが発生する可能性があり</font><font style="vertical-align: inherit;">ます。この種のエラーを処理する必要があります。そうしないと、画面に何も表示されずにユーザーを完全に失う危険性があります。したがって、を使用</font></font><code>&nbsp;Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;してインターネットからデータを</font><font style="vertical-align: inherit;">選択できるだけでなく</font><font style="vertical-align: inherit;">、サンプリング中に発生する可能性のあるエラーを報告し、画面上のその外観を制御できる必要があります。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ニュース</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アグリゲータ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とやり取りするアプリケーションを開発することから、戦略の開発を開始します&nbsp; </font><font style="vertical-align: inherit;">。このアプリケーションで</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、フリルなし</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、「パブリッシャー」との関係</font><font style="vertical-align: inherit;">を示すためだけに、最小限の範囲で使用する</font><font style="vertical-align: inherit;">こと</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">言わなければなりません</font><font style="vertical-align: inherit;">。</font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および「サブスクリプション」が</font></font><code>Subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">影響を受け</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Webサイトに登録し</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">サービスへのリクエストを完了するために必要な</font><font style="vertical-align: inherit;">キー</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">受け取る</font><font style="vertical-align: inherit;">ことをお勧めします</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">構造体の</font><i><font style="vertical-align: inherit;">NewsAPI.swift</font></i><font style="vertical-align: inherit;">ファイル</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">配置する必要があります</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
この記事のアプリケーションコードは</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Githubにあり</font></a><font style="vertical-align: inherit;">ます。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>API</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><code>APIConstants</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br>
<h2><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">サービスデータモデルとAPI</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サービスを&nbsp; </font><font style="vertical-align: inherit;">使用</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">する</font></a></font><code> [Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、</font><font style="vertical-align: inherit;">現在のニュース記事</font><font style="vertical-align: inherit;">とそのソース&nbsp; </font><font style="vertical-align: inherit;">に関する情報を選択でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちのデータモデルは非常にシンプルで、</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Articles.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルにあります&nbsp; </font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">import</span> Foundation<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NewsResponse</span>: <span class="hljs-title">Codable</span> </span>{
    <span class="hljs-keyword">let</span> status: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> totalResults: <span class="hljs-type">Int?</span>
    <span class="hljs-keyword">let</span> articles: [<span class="hljs-type">Article</span>]<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Article</span>: <span class="hljs-title">Codable</span>, <span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id = <span class="hljs-type">UUID</span>()
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> description: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> author: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> urlToImage: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> publishedAt: <span class="hljs-type">Date?</span>
    <span class="hljs-keyword">let</span> source: <span class="hljs-type">Source</span><font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SourcesResponse</span>: <span class="hljs-title">Codable</span> </span>{
    <span class="hljs-keyword">let</span> status: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> sources: [<span class="hljs-type">Source</span>]<font></font>
}<font></font>
<font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Source</span>: <span class="hljs-title">Codable</span>,<span class="hljs-title">Identifiable</span> </span>{
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> name: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> description: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> country: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> category: <span class="hljs-type">String?</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">String?</span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事</font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には、識別子</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、タイトル</font></font><code> title</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、説明</font></font><code>&nbsp;description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、作成者</font></font><code>author</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、「画像」のURL </font></font><code>urlToImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、発行日、</font></font><code>publishedAt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">および</font><font style="vertical-align: inherit;">発行</font><font style="vertical-align: inherit;">元が含まれ</font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。記事の上には、記事</font><font style="vertical-align: inherit;">の配列である</font><font style="vertical-align: inherit;">プロパティのみに関心</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があるアドイン</font></font><code>NewsResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があります</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ルート構造</font></font><code>NewsResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と構造</font></font><code>&nbsp;Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はです</font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これにより、</font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データをモデルに</font><font style="vertical-align: inherit;">デコードする2行のコードを文字通り使用でき</font><font style="vertical-align: inherit;">ます。構造は&nbsp; </font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;またあるべき</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々はそれが簡単に自分の記事の配列を表示するためにしたい場合は、</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リストとして&nbsp; </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;の中で</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。プロトコルに</font></font><code>Identifiable </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はプロパティの存在が必要です</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人工的な一意の識別子を提供します</font></font><code>UUID()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
情報ソース&nbsp; </font></font><code>Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には、識別子</font></font><code> id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、名前</font></font><code> name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、説明&nbsp; </font></font><code>description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、国</font></font><code> country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、出版ソースのカテゴリ</font></font><code>category</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、サイトのURL </font><font style="vertical-align: inherit;">が含まれ</font><font style="vertical-align: inherit;">ます</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。情報ソースの上には、情報ソース&nbsp; </font><font style="vertical-align: inherit;">の配列</font><font style="vertical-align: inherit;">であるプロパティのみに関心</font></font><code>[Source] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">があるアドインがあり&nbsp; </font><font style="vertical-align: inherit;">ます。ルート構造</font><font style="vertical-align: inherit;">と構造&nbsp; </font><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">なので、</font><font style="vertical-align: inherit;">データをモデル</font><font style="vertical-align: inherit;">に非常に簡単にデコードでき</font><font style="vertical-align: inherit;">ます。構造は&nbsp; </font><font style="vertical-align: inherit;">&nbsp;またあるべき</font><font style="vertical-align: inherit;">、我々は情報源のアレイの表示を容易にしたい場合は、</font><font style="vertical-align: inherit;">リストの形で</font><font style="vertical-align: inherit;">&nbsp;で</font></font><code>SourcesResponse</code><font style="vertical-align: inherit;"></font><code>sources</code><font style="vertical-align: inherit;"></font><code>SourcesResponse</code><font style="vertical-align: inherit;"></font><code>Source</code><font style="vertical-align: inherit;"></font><code>Codable</code><font style="vertical-align: inherit;"></font><code> JSON</code><font style="vertical-align: inherit;"></font><code>Source</code><font style="vertical-align: inherit;"></font><code>Identifiable</code><font style="vertical-align: inherit;"></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"></font><code>&nbsp;List</code><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">プロトコルに</font></font><code>Identifiable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、</font></font><code>id</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すでに</font><font style="vertical-align: inherit;">所有</font><font style="vertical-align: inherit;">して</font><font style="vertical-align: inherit;">いるプロパティ</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">存在</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">必要がある</font><font style="vertical-align: inherit;">ため、追加の作業は必要ありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここ</font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サービスに&nbsp; </font><font style="vertical-align: inherit;">必要なものを検討&nbsp; </font><font style="vertical-align: inherit;">し、それを</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.swift</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ファイルに</font><i><font style="vertical-align: inherit;">配置し</font></i><font style="vertical-align: inherit;">ます&nbsp; </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちの中心的な部分は</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">ニュース</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アグリゲーター</font></a><font style="vertical-align: inherit;">からデータを選択するための2つのメソッド（</font><font style="vertical-align: inherit;">記事&nbsp; </font><font style="vertical-align: inherit;">と情報源）</font><font style="vertical-align: inherit;">を提供</font></font><code>API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;するクラス</font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です&nbsp;&nbsp; </font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>[Article]</code><font style="vertical-align: inherit;"></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"></font><br>
<br>
<ul>
<li><code>fetchArticles (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp; - </font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">パラメータ</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">基づく</font><font style="vertical-align: inherit;">記事の選択&nbsp; </font><font style="vertical-align: inherit;">、</font></font></li>
<li><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の国の</font><font style="vertical-align: inherit;">情報源の選択</font></font><code> country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのメソッドは、記事</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;の配列や情報ソースの配列</font><font style="vertical-align: inherit;">だけでなく</font></font><code>&nbsp;[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Publisher </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しいフレームワークの</font><font style="vertical-align: inherit;">対応する「発行元」も&nbsp; </font><font style="vertical-align: inherit;">返し&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">どちらのパブリッシャーもエラーを返しません。</font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サンプリングエラーまたはコーディングエラーが引き続き発生する場合は、記事</font></font><code>[Article]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;または情報のソースの</font><font style="vertical-align: inherit;">空の配列</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">返され</font></font><code>[Source]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ますが、これらの配列が空である理由はメッセージなし</font><font style="vertical-align: inherit;">で&nbsp; </font><font style="vertical-align: inherit;">返さ&nbsp; </font><font style="vertical-align: inherit;">れます。&nbsp;</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サーバーから選択する記事または情報のソース。</font><font style="vertical-align: inherit;">列挙を使用して示します。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>enum Endpoint:</code><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Endpoint</span> </span>{
    <span class="hljs-keyword">case</span> topHeadLines
    <span class="hljs-keyword">case</span> articlesFromCategory(<span class="hljs-number">_</span> category: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> articlesFromSource(<span class="hljs-number">_</span> source: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> search (searchFilter: <span class="hljs-type">String</span>)
    <span class="hljs-keyword">case</span> sources (country: <span class="hljs-type">String</span>)<font></font>
    <font></font>
    <span class="hljs-keyword">var</span> baseURL:<span class="hljs-type">URL</span> {<span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://newsapi.org/v2/"</span>)!}<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">path</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">String</span> {
        <span class="hljs-keyword">switch</span> <span class="hljs-keyword">self</span> {
        <span class="hljs-keyword">case</span> .topHeadLines, .articlesFromCategory:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"top-headlines"</span>
        <span class="hljs-keyword">case</span> .search,.articlesFromSource:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"everything"</span>
        <span class="hljs-keyword">case</span> .sources:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"sources"</span><font></font>
        }<font></font>
    }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それ：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最新ニュース&nbsp; </font></font><code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定のカテゴリのニュース（スポーツ、健康、科学、ビジネス、テクノロジー）&nbsp; </font></font><code>.articlesFromCategory(_ category: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の情報源（CNN、ABCニュース、フォックスニュースなど）</font></font><code>&nbsp;.articlesFromSource(_ source: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">からの</font><font style="vertical-align: inherit;">ニュース</font><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>.search (searchFilter: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の条件を満たす</font><font style="vertical-align: inherit;">ニュース&nbsp; </font></font><code>searchFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>.sources (country:String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定の国の</font><font style="vertical-align: inherit;">情報源</font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
必要なオプションの初期化を容易にするため</font><font style="vertical-align: inherit;">に、インデックス</font><font style="vertical-align: inherit;">とstring </font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">応じて、記事と情報ソースのさまざまなリストの</font><font style="vertical-align: inherit;">列挙に</font></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初期化子</font><font style="vertical-align: inherit;">を追加</font><font style="vertical-align: inherit;">します</font><font style="vertical-align: inherit;">。これは、列挙オプションによって意味が異なります。</font></font><code>init?</code><font style="vertical-align: inherit;"></font><code>index&nbsp;</code><font style="vertical-align: inherit;"></font><code> text</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-keyword">init</span>? (index: <span class="hljs-type">Int</span>, text: <span class="hljs-type">String</span> = <span class="hljs-string">"sports"</span>) {
        <span class="hljs-keyword">switch</span> index {
        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-keyword">self</span> = .topHeadLines
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">self</span> = .search(searchFilter: text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">self</span> = .articlesFromCategory(text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">self</span> = .articlesFromSource(text)
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <span class="hljs-keyword">self</span> = .sources (country: text)
        <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><font></font>
        }<font></font>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスに戻って</font><font style="vertical-align: inherit;">、パラメータに基づいて</font><font style="vertical-align: inherit;">記事</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">選択</font><font style="vertical-align: inherit;">し、</font><font style="vertical-align: inherit;">エラーを返さない</font></font><code> NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;最初のメソッドを詳しく見て&nbsp; </font><font style="vertical-align: inherit;">みましょう</font><font style="vertical-align: inherit;">- </font><font style="vertical-align: inherit;">：</font></font><code>fetchArticles (from endpoint: Endpoint)-&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"></font><code>[Article]</code><font style="vertical-align: inherit;"></font><code>endpoint</code><font style="vertical-align: inherit;"></font><code>Never</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticles</span><span class="hljs-params">(from endpoint: Endpoint)</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = endpoint.absoluteURL <span class="hljs-keyword">else</span> {              <span class="hljs-comment">// 0</span>
                    <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Article</span>]()).eraseToAnyPublisher()<font></font>
        }<font></font>
           <span class="hljs-keyword">return</span>
            <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>:url)        <span class="hljs-comment">// 1</span>
            .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.data}                                       <span class="hljs-comment">// 2</span>
            .decode(type: <span class="hljs-type">NewsResponse</span>.<span class="hljs-keyword">self</span>,                    <span class="hljs-comment">// 3</span>
                    decoder: <span class="hljs-type">APIConstants</span> .jsonDecoder)<font></font>
            .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.articles}                                   <span class="hljs-comment">// 4</span>
            .replaceError(with: [])                             <span class="hljs-comment">// 5</span>
            .receive(on: <span class="hljs-type">RunLoop</span>.main)                          <span class="hljs-comment">// 6</span>
            .eraseToAnyPublisher()                              <span class="hljs-comment">// 7</span>
    }</code></pre><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リクエスト</font><font style="vertical-align: inherit;">の</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;フォームに</font><font style="vertical-align: inherit;">基づいて</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、必要な記事のリスト、</font></font><code>endpoint.absoluteURL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これが実行できない場合は、記事の空の配列を返します</font></font><code>[Article]()</code></li>
<li> «» <code>dataTaskPublisher(for:)</code>,     <code>Output </code>  <code>(data: Data, response: URLResponse)</code>, &nbsp; <code>Failure</code>&nbsp;-&nbsp;<code>URLError</code>,</li>
<li>  <code>map { }</code>       <code>(data: Data, response: URLResponse)</code>  &nbsp;<code>data</code>,&nbsp;</li>
<li> <code>JSON </code>&nbsp;<code>data</code>   ,   &nbsp;<code>NewsResponse</code>,    <code>articles:&nbsp;[Atricle]</code></li>
<li>  <code>map { }&nbsp;</code>        -&nbsp;<code>articles</code>,&nbsp;</li>
<li>  -        <code>[ ]</code>,</li>
<li>   <code>main </code>,          <code>UI</code>,</li>
<li>«»  «»   <code>eraseToAnyPublisher()</code>    <code>AnyPublisher</code>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
情報源を選択するタスクは2番目の方法に割り当てられます。</font></font><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これは最初の方法の正確なセマンティックコピーですが、今回は記事</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ではなく情報源を選択します</font></font><code>[Source]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchSources</span><span class="hljs-params">()</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Source</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">Endpoint</span>.sources.absoluteURL <span class="hljs-keyword">else</span> {      <span class="hljs-comment">// 0</span>
                       <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Source</span>]()).eraseToAnyPublisher()<font></font>
           }<font></font>
              <span class="hljs-keyword">return</span>
               <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>:url)      <span class="hljs-comment">// 1</span>
               .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.data}                                     <span class="hljs-comment">// 2</span>
               .decode(type: <span class="hljs-type">SourcesResponse</span>.<span class="hljs-keyword">self</span>,               <span class="hljs-comment">// 3</span>
                       decoder: <span class="hljs-type">APIConstants</span> .jsonDecoder)<font></font>
               .<span class="hljs-built_in">map</span>{$<span class="hljs-number">0</span>.sources}                                  <span class="hljs-comment">// 4</span>
               .replaceError(with: [])                           <span class="hljs-comment">// 5</span>
               .receive(on: <span class="hljs-type">RunLoop</span>.main)                        <span class="hljs-comment">// 6</span>
               .eraseToAnyPublisher()                            <span class="hljs-comment">// 7</span>
    }</code></pre><br><font style="vertical-align: inherit;"></font><code>AnyPublisher &lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報ソースの配列の形式の値</font></font><code>[Source] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とエラーのない状態で</font><font style="vertical-align: inherit;">
「発行元」</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">返し</font><font style="vertical-align: inherit;">ます</font></font><code>&nbsp;Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;（エラーの場合、ソースの空の配列が返されます&nbsp; </font></font><code>[ ]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これら2つのメソッドの共通部分</font><font style="vertical-align: inherit;">を選び出し、以下に</font><font style="vertical-align: inherit;">基づい</font><font style="vertical-align: inherit;">て</font><font style="vertical-align: inherit;">「パブリッシャー」</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">返す</font></font><code>Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">関数</font><font style="vertical-align: inherit;">として配置</font></font><code>fetch(_ url: URL) -&gt; AnyPublisher&lt;T, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">します&nbsp; </font><font style="vertical-align: inherit;">。</font></font><code>Generic</code><font style="vertical-align: inherit;"></font><code>AnyPublisher&lt;T, Error&gt;</code><font style="vertical-align: inherit;"></font><code>URL</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//     URL</span>
     <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetch</span>&lt;T: Decodable&gt;<span class="hljs-params">(<span class="hljs-number">_</span> url: URL)</span></span> -&gt; <span class="hljs-type">AnyPublisher</span>&lt;<span class="hljs-type">T</span>, <span class="hljs-type">Error</span>&gt; {
                   <span class="hljs-type">URLSession</span>.shared.dataTaskPublisher(<span class="hljs-keyword">for</span>: url)             <span class="hljs-comment">// 1</span>
                    .<span class="hljs-built_in">map</span> { $<span class="hljs-number">0</span>.data}                                          <span class="hljs-comment">// 2</span>
                    .decode(type: <span class="hljs-type">T</span>.<span class="hljs-keyword">self</span>, decoder: <span class="hljs-type">APIConstants</span>.jsonDecoder) <span class="hljs-comment">// 3</span>
                    .receive(on: <span class="hljs-type">RunLoop</span>.main)                               <span class="hljs-comment">// 4</span>
                    .eraseToAnyPublisher()                                   <span class="hljs-comment">// 5</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これにより、前の2つの方法が簡略化されます。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-comment">//   </span>
     <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticles</span><span class="hljs-params">(from endpoint: Endpoint)</span></span>
                                     -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">Never</span>&gt; {
         <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = endpoint.absoluteURL <span class="hljs-keyword">else</span> {
                     <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Article</span>]()).eraseToAnyPublisher() <span class="hljs-comment">// 0</span><font></font>
         }<font></font>
         <span class="hljs-keyword">return</span> fetch(url)                                          <span class="hljs-comment">// 1</span>
             .<span class="hljs-built_in">map</span> { (response: <span class="hljs-type">NewsResponse</span>) -&gt; [<span class="hljs-type">Article</span>] <span class="hljs-keyword">in</span>        <span class="hljs-comment">// 2</span>
                             <span class="hljs-keyword">return</span> response.articles }<font></font>
                .replaceError(with: [<span class="hljs-type">Article</span>]())                    <span class="hljs-comment">// 3</span>
                .eraseToAnyPublisher()                              <span class="hljs-comment">// 4</span><font></font>
     }<font></font>
    <font></font>
    <span class="hljs-comment">//    </span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchSources</span><span class="hljs-params">(<span class="hljs-keyword">for</span> country: String)</span></span>
                                       -&gt; <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Source</span>], <span class="hljs-type">Never</span>&gt; {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url = <span class="hljs-type">Endpoint</span>.sources(country: country).absoluteURL
            <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-type">Just</span>([<span class="hljs-type">Source</span>]()).eraseToAnyPublisher() <span class="hljs-comment">// 0</span><font></font>
        }<font></font>
        <span class="hljs-keyword">return</span> fetch(url)                                         <span class="hljs-comment">// 1</span>
            .<span class="hljs-built_in">map</span> { (response: <span class="hljs-type">SourcesResponse</span>) -&gt; [<span class="hljs-type">Source</span>] <span class="hljs-keyword">in</span>     <span class="hljs-comment">// 2</span><font></font>
                            response.sources }<font></font>
               .replaceError(with: [<span class="hljs-type">Source</span>]())                    <span class="hljs-comment">// 3</span>
               .eraseToAnyPublisher()                             <span class="hljs-comment">// 4</span>
    }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようにして得られた「発行者」は、誰かが「購読」するまで何も配信しません。</font><font style="vertical-align: inherit;">設計時にこれを行うことができます</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「出版社」</font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など</font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の中で</font></font><code> SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">記事のリスト。</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、機能のロジックについて少し説明します</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">&nbsp;彼らが対応する「外部の変化」</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一の抽象概念は</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「出版社」</font></font><code>Publisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。 「外部変更」は、タイマー</font></font><code> Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>NotificationCenter </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデルオブジェクト、またはモデルオブジェクト</font><font style="vertical-align: inherit;">としての</font><font style="vertical-align: inherit;">通知</font><font style="vertical-align: inherit;">として理解でき</font><font style="vertical-align: inherit;">、プロトコルを使用し</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">て、外部の単一の「真のソース」（真のソース）に変えることができます。&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常の「パブリッシャー」に入力する</font></font><code>Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">か</font></font><code>NotificationCenter</code> <code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、メソッドを使用して反応し</font></font><code>onReceive (_: perform:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">Hacker Newsの</font></a></font><code>Timer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーションの作成に関する3番目の記事の後半で紹介</font><font style="vertical-align: inherit;">する「発行元」の使用例</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
この記事では、モデルの作成方法に焦点を当てます&nbsp;</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部の「真実の源」（真実の源）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さまざまなタイプの記事を表示する特定の例で</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">結果の「パブリッシャー」が</font><font style="vertical-align: inherit;">どのように</font><font style="vertical-align: inherit;">機能する</font><font style="vertical-align: inherit;">かを見てみましょう</font></font><br>
<br>
<code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。-最新のニュース&nbsp; </font></font><code>.articlesFromCategory(_ category: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;-特定のカテゴリの</font></font><code>&nbsp;.articlesFromSource(_ source: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ニュース-特定の情報源の</font></font><code>.search (searchFilter: String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ニュース-特定の条件で選択されたニュース</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zr/ua/uv/zruauv9msu2nulm2ksuflhtxusi.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どの</font></font><code> Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーが選択するかに</font><font style="vertical-align: inherit;">応じて</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から選択した</font><font style="vertical-align: inherit;">記事のリストを更新する必要があり</font><font style="vertical-align: inherit;">ます。これを行うには</font><font style="vertical-align: inherit;">&nbsp;、3つの</font><font style="vertical-align: inherit;">プロパティを</font></font><code>&nbsp;ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持つプロトコル</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を&nbsp; </font><font style="vertical-align: inherit;">実装する</font><font style="vertical-align: inherit;">非常に単純なクラス</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成し</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
&nbsp;<br>
<img src="https://habrastorage.org/webt/ty/xj/cs/tyxjcsfctbxerl9oiyr6ljvda8c.png"><br>
<br>
<ul>
<li><code>@Published var indexEndpoint: Int</code> —   <code>Endpoint</code> (    «»,        <code>View</code>),&nbsp;&nbsp;</li>
<li><code>@Published var searchString: String</code> —  ,             &nbsp;&nbsp;(     «»,        <code>View</code>&nbsp;    <code>TextField</code>),</li>
<li><code>@Published var articles: [Article]</code>&nbsp;-    ( «»,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">NewsAPI.org</a>,  «»).</li>
</ul><br><font style="vertical-align: inherit;"></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;プロパティ</font></font><code>indexEndpoint&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font><font style="vertical-align: inherit;">
を設定</font><font style="vertical-align: inherit;">すると</font><font style="vertical-align: inherit;">すぐに、&nbsp; </font></font><code> searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">単純なプロパティとして</font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;と&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、および「パブリッシャー」&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">との</font><font style="vertical-align: inherit;">両方としてそれらを使用できるように&nbsp; </font><font style="vertical-align: inherit;">なり&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラス&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">では、関心のあるプロパティを宣言するだけでなく、それらの相互作用のビジネスロジックを指定することもできます。クラスのインスタンスを初期化するときは、この目的のために、&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;で、</font></font><code>init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは、クラスのインスタンスの全体の「ライフサイクル」を通じて行動する「サブスクリプション」を作成することができます&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、記事のリストの依存再現</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指標に&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;し、検索文字列を</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うために、</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々は「発行者」のチェーンを拡張</font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;し、</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力「出版社」へ</font></font><code>AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その値は記事のリストです&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。次に、演算子</font></font><code>assign&nbsp;(to: \.articles, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">使用してサブスクライブし、</font><font style="vertical-align: inherit;">必要な記事のリストを、</font><font style="vertical-align: inherit;">&nbsp;を定義</font></font><code>articles </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する「出力」</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">として&nbsp; </font><font style="vertical-align: inherit;">取得します</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、プロパティからではなく、単純にチェーンを引く必要があります&nbsp; </font></font><code>indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、つまり「出版」から</font></font><code> $indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">創造に参加</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の助けを借りて</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々はユーザーインターフェイス要素使用してそれらをそこに変更されます&nbsp; </font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とを</font></font><code>TextField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これをどうやって行うのでしょうか？</font><font style="vertical-align: inherit;">クラスに&nbsp; </font><font style="vertical-align: inherit;">あり</font><font style="vertical-align: inherit;">、値に応じて</font><font style="vertical-align: inherit;">"publisher"を返す</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
関数が既に武器庫</font><font style="vertical-align: inherit;">にあります</font></font><code>fetchArticles (from: Endpoint)</code><font style="vertical-align: inherit;"></font><code>NewsAPI</code><font style="vertical-align: inherit;"></font><code>AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"></font><code>Endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、と私たちは何とか「の出版社」の値を使用することができる&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の引数にそれらを回すために</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、この機能。&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、「パブリッシャー」</font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;とを&nbsp; </font><font style="vertical-align: inherit;">組み合わせ&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。これを行うには、</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オペレーターが存在します</font></font><code>Publishers.CombineLatest </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ci/pg/wd/cipgwdfx2fxmlevrmkf8nnkc6u4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
前の「パブリッシャー」から受信したデータに基づいて新しい「パブリッシャー」を作成する</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;には、オペレーターを使用し&nbsp; </font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ln/s7/ur/lns7urzc9l64o8mswhliuggsyp4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、非常に簡単な「サブスクライバー」を使用してこの新しく受信した「パブリッシャー」に「サブスクライブ」&nbsp; </font></font><code>assign (to: \.articles, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、受信した「パブリッシャー「</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;配列の&nbsp; </font><font style="vertical-align: inherit;">値&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">非同期の」パブリッシャーを</font></font><br>
<br>
<img src="https://habrastorage.org/webt/su/io/xi/suioxibgc3t31oewzgkbfaljina.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成</font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、その結果としてサブスクライブしました。</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「サブスクリプション」と、これは我々が一定で私たちの「サブスクリプション」を続けるかどうかを確認するのは簡単です</font></font><code>let subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gw/ig/ml/gwigml-zqpprclh76lzfnjhvzda.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の主なプロパティ</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「サブスクリプション」それはその範囲を離れるとすぐに、それが自動的に解放されることで、メモリが占有ということです。したがって、</font></font><code>init( ) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完了</font><font style="vertical-align: inherit;">するとすぐに</font><font style="vertical-align: inherit;">、この「サブスクリプション」は削除され</font><font style="vertical-align: inherit;">ます。</font></font><code>ARC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遅延した受信した非同期情報をアレイに割り当てる時間はありません</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。非同期情報は、「地球」がその足元から消えたという文字通りの意味で、単に「着陸」する場所がありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このような「サブスクリプション」</font><font style="vertical-align: inherit;">を保存するに</font><font style="vertical-align: inherit;">は、クラスインスタンスの「ライフサイクル」全体を通じてこの変数に「サブスクリプション」</font><font style="vertical-align: inherit;">を保存</font><font style="vertical-align: inherit;">するイニシャライザ</font><font style="vertical-align: inherit;">を&nbsp; </font><font style="vertical-align: inherit;">超えた</font></font><code> init() </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">を作成する必要があり</font><font style="vertical-align: inherit;">ます&nbsp;  </font><font style="vertical-align: inherit;">。&nbsp;</font></font><code>var&nbsp;cancellableSet</code><font style="vertical-align: inherit;"></font><code>AnyCancellable</code><font style="vertical-align: inherit;"></font><code>ArticlesViewMode</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、我々は定数を削除</font></font><code>let subscription</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、私たちを覚えて</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、変数に「サブスクリプション」を&nbsp; </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演算子使用して</font></font><code>.store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/my/gt/xw/mygtxwz7uhcurfyfnblva9irfku.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我々が作成したことを非同期「パブリッシャー」と「サブスクリプション」</font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスのインスタンスの全体の「ライフサイクル」全体で保存されます&nbsp; </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「パブリッシャー」</font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font><font style="vertical-align: inherit;">「</font><font style="vertical-align: inherit;">あるいはその両方&nbsp; </font><font style="vertical-align: inherit;">」の意味を任意に変更でき</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。作成された「サブスクリプション」のおかげで、</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">追加の作業を行わなくても</font><font style="vertical-align: inherit;">、これら2つのパブリッシャーの価値に対応する一連の記事&nbsp; </font><font style="vertical-align: inherit;">を入手でき&nbsp; </font><font style="vertical-align: inherit;">ます。この&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスは通常と呼ばれ&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検索文字列を入力するときにサーバーへの呼び出し回数を減らすために</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、検索文字列自体の「発行元」を使用しないでください&nbsp;</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、およびその変更されたバージョン</font></font><code>validString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">記事</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/ir/2z/khir2z1rrmou-hks2rtfuq31bnm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
の</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">準備ができたので、ユーザーインターフェイス（</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）の</font><font style="vertical-align: inherit;">作成を開始し</font><font style="vertical-align: inherit;">ましょう</font><font style="vertical-align: inherit;">。では</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">&nbsp;モデル</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と同期</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">するために</font><font style="vertical-align: inherit;">、このモデルのクラスのインスタンスを参照</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数が</font><font style="vertical-align: inherit;">使用され</font><font style="vertical-align: inherit;">ています。</font><font style="vertical-align: inherit;">のユーザーインターフェイス（</font><font style="vertical-align: inherit;">）の</font><font style="vertical-align: inherit;">変更を制御するの</font><font style="vertical-align: inherit;">は、このペア（&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;クラスと</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このクラスのインスタンスを参照</font><font style="vertical-align: inherit;">する&nbsp; </font><font style="vertical-align: inherit;">変数</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）です&nbsp; </font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、構造に追加する</font></font><code>ContentView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;クラスのインスタンスを</font></font><code>ArticleViewModel </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数の形で</font></font><code>var articleViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、それを交換する</font></font><code>Text ("Hello, World!")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事のリストに</font></font><code>ArticlesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々は記事を置いている&nbsp; </font></font><code>articlesViewModel.articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から得た当社&nbsp;</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。その結果、固定およびデフォルトのインデックス</font></font><code>indexEndpoint = 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、つまり</font></font><code>.topHeadLines</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;最新のニュース</font><font style="vertical-align: inherit;">の記事のリストを取得&nbsp; </font><font style="vertical-align: inherit;">し</font></font><br>
<br>
<img src="https://habrastorage.org/webt/je/_f/j-/je_fj-0m2xews-ih7vptprkdpoy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ます。画面</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に要素を</font><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">て</font><font style="vertical-align: inherit;">、表示&nbsp; </font><font style="vertical-align: inherit;">する記事のセットを制御します。</font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデックス変更</font><font style="vertical-align: inherit;">を使用し&nbsp; </font><font style="vertical-align: inherit;">ます</font></font><code>$articlesViewModel.indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。シンボルの存在は&nbsp; </font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必須です。これは、</font></font><code>@Published&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「発行者」</font><font style="vertical-align: inherit;">によって提供される値の変更を意味するため&nbsp; </font><font style="vertical-align: inherit;">です。この「パブリッシャー」への「サブスクリプション」がすぐにトリガーされ</font></font><code>init ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、で</font><font style="vertical-align: inherit;">開始し</font><font style="vertical-align: inherit;">た「出力」&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「パブリッシャー」</font></font><code>&nbsp;articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;が変更</font><font style="vertical-align: inherit;">さ</font><font style="vertical-align: inherit;">れ、画面に記事の異なるリストが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zx/sd/pp/zxsdppfkp5y0nuk-j99uhovvmu8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このようにして、「topHeadLines」、「検索」の3つのオプションすべての記事の配列を受け取ることができます「そして」カテゴリーから：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jm/yc/a_/jmyca_mvm0n2___cswvcamuuqqm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...しかし、固定されたデフォルトの検索文字列の場合</font></font><code>searchString = "sports"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（必要な場合）：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zq/pi/tw/zqpitwdhh3fsnciz9p2scvn1sas.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ただし、オプションの&nbsp; </font></font><code>"search"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;場合は</font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、検索文字列を入力するための</font><font style="vertical-align: inherit;">テキストフィールド</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">ユーザーに提供する必要があり</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/xk/d1/uu/xkd1uu0tmepthmsjlkzu--wlwse.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、ユーザーは入力された検索文字列でニュースを検索できます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x4/ch/5a/x4ch5apliuwesqxjzeds58ab1t8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
オプションの場合、&nbsp; </font></font><code>"from category"&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーザーに提供する必要があります機会がカテゴリを選択するために、我々はカテゴリで始まる</font></font><code>science</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2i/8e/3v/2i8e3vvly1r_ipfuflxwbtepglq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果として、ユーザは、ニュースの選択したカテゴリにすべてのニュースを検索することができます- 、</font></font><code>science</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code> health</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、&nbsp; </font><font style="vertical-align: inherit;">：</font></font><code>business</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> </font><font style="vertical-align: inherit;">
私たちが見ることができますどのように非常に単純な&nbsp; </font><font style="vertical-align: inherit;">&nbsp;2つのユーザ制御持っているモデル</font><font style="vertical-align: inherit;">の特徴を- </font><font style="vertical-align: inherit;">&nbsp;と、</font></font><code>technology</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/p_/pn/li/p_pnli0chxenoalmms3ltch-iwo.png"><br>
<br><font style="vertical-align: inherit;"></font><code>ObservableObject</code><font style="vertical-align: inherit;"></font><code>@Published </code><font style="vertical-align: inherit;"></font><code>indexEndpoint</code><font style="vertical-align: inherit;"></font><code>searchString</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Webサイトから幅広い情報を選択できます&nbsp; </font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報源のリスト</font></font></h2><br><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;NewsAPIクラスで受信した情報ソースの「発行元」が</font><font style="vertical-align: inherit;">
どのように機能するかを見てみましょう</font></font><code>fetchSources (for country: String)&nbsp;-&gt; AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さまざまな国の情報源のリストを取得します：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hr/oh/le/hrohle3hq8pkyhnjf6frali7yao.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...およびそれらを名前で検索する機能：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kg/ea/ll/kgeallzwaxnkvekct18th7knkyo.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...選択した情報源に関する詳細情報：名前、カテゴリ、国、短い説明、サイトへのリンク：リンクを&nbsp; </font></font><br>
<br>
<img src="https://habrastorage.org/webt/k_/b7/9w/k_b79wirynz07feigtlhgdeyik4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クリックすると、このWebサイトに移動します情報源。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてこのために仕事に、あなたは非常に簡単な必要がある&nbsp; </font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一の2つのユーザ制御持っているモデル</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の特性を- </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;と&nbsp; </font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rs/id/4b/rsid4bb5xmkjdkwuptkmwvhi-yc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして再び、私たちは同じスキームを使用しますが、クラスのインスタンスの初期化時</font></font><code>SourcesViewModel </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">におけるクラス</font></font><code> init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスインスタンスの「ライフサイクル」全体にわたって動作する「サブスクリプション」を作成し、</font></font><code>&nbsp;SourcesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報ソースのリストが</font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">国</font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と検索文字列に</font><font style="vertical-align: inherit;">依存するよう&nbsp; </font><font style="vertical-align: inherit;">にし&nbsp; </font><font style="vertical-align: inherit;">ます</font></font><code>&nbsp;searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
助けを借りて&nbsp; </font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私たちは「発行者」からチェーンを引く</font></font><code>$searchString </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>$country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、出力「発行者」に</font></font><code>AnyPublisher&lt;[Source], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その値が情報源のリストです。オペレーターを使用してサブスクライブし、</font></font><code>assign&nbsp;(to: \.sources, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要な情報ソースのリストを取得します&nbsp; </font></font><code>sources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">演算子を使用</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font><font style="vertical-align: inherit;">て、受け取った</font><font style="vertical-align: inherit;">「サブスクリプション」を変数に&nbsp; </font><font style="vertical-align: inherit;">記憶します&nbsp; </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">情報源が</font><font style="vertical-align: inherit;">
揃った</font><font style="vertical-align: inherit;">ので、作成を始め</font><font style="vertical-align: inherit;">ましょう</font><font style="vertical-align: inherit;">。 B </font><font style="vertical-align: inherit;">で同期</font><font style="vertical-align: inherit;">c</font></font><code>cancellableSet</code><font style="vertical-align: inherit;"></font><code>.store ( in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>View Model</code><font style="vertical-align: inherit;"></font><code> UI</code><font style="vertical-align: inherit;"></font><code>SwiftUI</code><font style="vertical-align: inherit;"></font><code> View</code><font style="vertical-align: inherit;"></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;モデルは、</font></font><code>@ObservedObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このモデルのクラスのインスタンスを参照</font><font style="vertical-align: inherit;">する</font><font style="vertical-align: inherit;">変数を</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">変数の形式で</font><font style="vertical-align: inherit;">&nbsp;クラスインスタンス</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を構造</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">追加し</font><font style="vertical-align: inherit;">、3つの</font><font style="vertical-align: inherit;">プロパティの</font><font style="vertical-align: inherit;">それぞれに&nbsp; </font><font style="vertical-align: inherit;">&nbsp;独自の</font></font><code>ContentViewSources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インスタンス</font><font style="vertical-align: inherit;">を&nbsp; </font><font style="vertical-align: inherit;">削除&nbsp; </font><font style="vertical-align: inherit;">して配置します</font><font style="vertical-align: inherit;">&nbsp;。</font></font><code>SourcesViewModel</code><font style="vertical-align: inherit;"></font><code>var sourcesViewModel</code><font style="vertical-align: inherit;"></font><code>Text ("Hello, World!")</code><font style="vertical-align: inherit;"></font><code>View</code><font style="vertical-align: inherit;"></font><code>@Published</code><font style="vertical-align: inherit;"></font><code>&nbsp;sourcesViewModel</code><font style="vertical-align: inherit;"></font><br>
<br>
&nbsp;<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">テキストボックス&nbsp; </font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">検索バーのための&nbsp; </font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li>&nbsp;<code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;国のために</font></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>SourcesList&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報源の</font><font style="vertical-align: inherit;">リスト&nbsp;</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/td/tk/kn/tdtkknev57l3b5avb8y0uheu7fa.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その結果、必要なものが得られます</font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jw/gg/ly/jwgglycniqr2e-jhpifypfzx4m8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この画面では、テキストボックス</font></font><code>SearchView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と「国」を&nbsp; </font><font style="vertical-align: inherit;">使用して検索文字列を管理するだけ</font></font><code>Picker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、残りは自動的に行われます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
情報源のリストは、</font></font><code>SourcesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各ソースについての最小限の情報が含まれ-名前</font></font><code>source.name </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と簡単な説明を</font></font><code>source.description</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sj/zi/1z/sjzi1zh-7leadeujwarkuka_ii8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...しかし、あなたは、リンク使用して、選択したソースに関する詳細な情報を入手することを可能に</font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">した</font></font><code>destination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私達は示す&nbsp; </font></font><code>DetailSourceView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースデータは、情報の源である&nbsp; </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と、クラスの目的のインスタンスを</font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">許可します、彼の記事のリストを取得します</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ix/j_/uh/ixj_uheqhclwopwidsihztunn5e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ソースのリストで、情報ソースの選択されたソースの記事のリストをエレガントに取得する方法をご覧ください&nbsp; </font></font><code>SourcesList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちの旧友は私たちを助けてくれます- </font></font><code>ArticlesViewModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両方の「入力」</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティを</font><font style="vertical-align: inherit;">設定しなければならない&nbsp; </font><font style="vertical-align: inherit;">クラス&nbsp; </font><font style="vertical-align: inherit;">：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">インデックス&nbsp; </font></font><code>indexEndpoint = 3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、つまり</font></font><code>.articlesFromSource (_source:String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、固定ソースの記事の選択に対応</font><font style="vertical-align: inherit;">するオプション&nbsp; </font></font><code>source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ソース自体（またはその識別子）としての</font><font style="vertical-align: inherit;">文字列&nbsp; </font></font><code>source.id&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/ia/xi/lr/iaxilr4rlcyippxuvkbd46kequ4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsApp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アプリケーション全体を見ると</font><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Webサイトから記事や情報源の選択を明示的に要求する場所はどこにもありません&nbsp; </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">私たちは</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;データ</font><font style="vertical-align: inherit;">を管理するだけ&nbsp; </font></font><code>View Model </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ですが、私たちの仕事をします。必要な記事と情報源を選択します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">記事の</font><font style="vertical-align: inherit;">画像</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">ダウンロード</font><font style="vertical-align: inherit;">してください</font></font><code>Article</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事のモデルには、&nbsp; </font><font style="vertical-align: inherit;">それに</font><font style="vertical-align: inherit;">付随</font></font><code>Article&nbsp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">する</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像</font></font><code>urlToImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">含まれて</font><font style="vertical-align: inherit;">い&nbsp; </font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/om/ny/fv/omnyfvhlcegrhltunqvjvyaq6l4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これに基づいて&nbsp; </font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、将来的に</font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;は</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Webサイトから</font><font style="vertical-align: inherit;">画像自体</font><font style="vertical-align: inherit;">を&nbsp; </font><font style="vertical-align: inherit;">取得する必要があります</font><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはすでにこのタスクに精通しています。</font><font style="vertical-align: inherit;">クラス</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、関数を使用</font><font style="vertical-align: inherit;">して、画像の値</font><font style="vertical-align: inherit;">&nbsp;とエラーのない</font></font><code>fetchImage(for url: URL?) -&gt; AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「パブリッシャー」</font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を&nbsp; </font><font style="vertical-align: inherit;">作成し&nbsp;  </font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます&nbsp; </font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（実際、エラーが発生した場合、画像が返されます</font></font><code> nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">この「パブリッシャー」に「サブスクライブ」して</font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;、ユーザーインターフェイスのデザイン時に</font><font style="vertical-align: inherit;">画像を受け取る&nbsp; </font><font style="vertical-align: inherit;">ことができます（</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">関数のソースデータが</font></font><code>fetchImage(for url: URL?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">あり&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々が持っています：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/do/a-/hg/doa-hg5idk0ukdghj0snu0-nubm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちが</font><font style="vertical-align: inherit;">知っている場合</font><font style="vertical-align: inherit;">、</font></font><code> Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「出版社」の</font><font style="vertical-align: inherit;">助けを借りて形成がどのように行われているのかを詳しく考えてみましょう</font><font style="vertical-align: inherit;">：</font></font><code>AnyPublisher &lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">もし</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等しい</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、リターン</font></font><code>Just(nil)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力値</font><font style="vertical-align: inherit;">がタプル</font><font style="vertical-align: inherit;">とエラー</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">である「パブリッシャー」の形式に</font><font style="vertical-align: inherit;">基づく</font><font style="vertical-align: inherit;">-&nbsp; </font><font style="vertical-align: inherit;">、</font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"></font><code>Output</code><font style="vertical-align: inherit;"></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"></font><code>&nbsp;Failure</code><font style="vertical-align: inherit;"></font><code>URLError</code><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"></font><code>map {}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タプルから</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データのみ</font><font style="vertical-align: inherit;">を取り出し</font><font style="vertical-align: inherit;">てさらに処理し&nbsp; </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、フォーム</font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前の手順でエラーが発生した場合は</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">設計</font></font><code>UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">さらに使用すると想定</font><font style="vertical-align: inherit;">して、結果を</font><font style="vertical-align: inherit;">ストリームに</font><font style="vertical-align: inherit;">配信し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「発行者」のタイプを「消去」して、コピーを返します</font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードは非常にコンパクトで読みやすく、何もありません</font></font><code>callbacks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">&nbsp;画像の</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作成</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">始めましょう&nbsp; </font></font><code>UIImage?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これは</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトコルを実装</font><font style="vertical-align: inherit;">するクラス</font></font><code>ObservableObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">で、2つの&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティがあります。</font></font><br>
<br>
<ul>
<li><code>@Published url: URL?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;ある</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イメージは、</font></font></li>
<li><code>@Published var image: UIImage?</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;の画像そのもの</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">です</font></a><font style="vertical-align: inherit;">。</font></font></li>
</ul><br>
<img src="https://habrastorage.org/webt/li/o6/kr/lio6krhn0v1eyeiwg_cgpwcigia.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスのインスタンスを初期化するときと、再び、&nbsp; </font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;我々は、入力「出版社」からチェーンを伸ばす必要があり&nbsp; </font></font><code>$url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;、出力「パブリッシャー」に</font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちはなる、</font><font style="vertical-align: inherit;">&nbsp;「購読」</font><font style="vertical-align: inherit;">、後に、私たちが必要とする画像を取得</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ba/gi/2s/bagi2swivajzz0pkgqzzsswudww.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、演算子を使用</font></font><code>&nbsp;flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、非常に単純な「加入者」&nbsp; </font></font><code>assign (to: \image, on: self)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「出版社」から受信し、それを割り当てることを「プロパティへの値</font></font><code>@Published image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eq/3k/4-/eq3k4-0pbruhk4qbcu8hmyinfmg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして変数&nbsp; </font><font style="vertical-align: inherit;">「サブスクリプション」にも、演算子を使用して&nbsp; </font></font><code>cancellableSet </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格納され</font><font style="vertical-align: inherit;">ます。</font><font style="vertical-align: inherit;">
この「イメージダウンローダー」のロジックは、</font><font style="vertical-align: inherit;">プリロードしなかっ</font><font style="vertical-align: inherit;">たもの以外のイメージをダウンロードする</font><font style="vertical-align: inherit;">ことです。</font></font><code>AnyCancellable</code><font style="vertical-align: inherit;"></font><code>store(in: &amp;self.cancellableSet)</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code> nil URL</code><font style="vertical-align: inherit;"></font><code>image == nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ダウンロードプロセス中にエラーが検出された場合、そのイメージは存在しません。つまり、イメージは</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同じまま</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
では</font><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">&nbsp;クラスの</font><font style="vertical-align: inherit;">インスタンスがthisに使用</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">するヘルプ</font></font><code>ArticleImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><font style="vertical-align: inherit;">て画像を表示し</font><font style="vertical-align: inherit;">ます</font><font style="vertical-align: inherit;">。彼の画像が等しくない場合は</font><font style="vertical-align: inherit;">、を使用して表示されます</font><font style="vertical-align: inherit;">が、等しい場合は</font><font style="vertical-align: inherit;">、何に等しいかに応じて</font><font style="vertical-align: inherit;">、何も表示されない</font><font style="vertical-align: inherit;">か、</font><font style="vertical-align: inherit;">テキストTが回転し</font><font style="vertical-align: inherit;">た長方形</font><font style="vertical-align: inherit;">が</font><font style="vertical-align: inherit;">表示されます</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
このロジックは、この場合にうまく機能しますあなたは確かに知ったときのためにということ&nbsp; </font><font style="vertical-align: inherit;">以外に、&nbsp; </font><font style="vertical-align: inherit;">あなたが画像を取得し</font><font style="vertical-align: inherit;">、として映画データベースの場合であります&nbsp;</font></font><code>imageLoader</code><font style="vertical-align: inherit;"></font><code>ImageLoader</code><font style="vertical-align: inherit;"></font><code>nil</code><font style="vertical-align: inherit;"></font><code> Image (...)</code><font style="vertical-align: inherit;"></font><code>nil</code><font style="vertical-align: inherit;"></font><code>url </code><font style="vertical-align: inherit;"></font><code>EmptyView()</code><font style="vertical-align: inherit;"></font><code>Rectangle</code><font style="vertical-align: inherit;"></font><code>ext("Loading...")</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/mh/nq/yi/mhnqyirurke0w6yibfxm86gap1i.png"><br>
<br><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><code>nil</code><font style="vertical-align: inherit;"></font><code>image</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMDb</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.orgでは、</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニュースアグリゲーター&nbsp; </font><font style="vertical-align: inherit;">&nbsp; は異なります。情報のいくつかのソースの記事は異なる1与える&nbsp; </font></font><code>nil&nbsp;URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像を、それへのアクセスが閉じられ、そして私たちは、四角形を取得し</font></font><code>Rectangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">たテキストの回転で</font></font><code>Text("Loading...")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：置き換えることはありません</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sh/tq/lp/shtqlpz4wx-iobt19-wv9j2pb7w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。このような状況では、場合</font></font><code>&nbsp;URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像は異なるが&nbsp; </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その後の平等、&nbsp; </font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">画像は&nbsp; </font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">イメージがロードされることを意味します読み込み中にエラーが発生したため、画像を取得できません</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。これら2つの状況を区別するために、クラスの</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;2つの既存の</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティ</font><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">もう1つ</font><font style="vertical-align: inherit;">追加し&nbsp; </font><font style="vertical-align: inherit;">ます。&nbsp;</font></font><br>
<br>
<code>&nbsp;@Published var noData = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;-これはブール値で、選択時のエラーが原因で画像データが存在しないことを示します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kp/jc/sq/kpjcsqugrsfzyghmefnge0unscy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「サブスクリプション」を作成</font><font style="vertical-align: inherit;">する場合、画像の読み込み時に発生する</font></font><code> init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">すべてのエラー</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">キャッチ</font></font><code> Error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、その存在を</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティに</font><font style="vertical-align: inherit;">蓄積し&nbsp; </font><font style="vertical-align: inherit;">ます</font></font><code>self.noData = true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ダウンロードが成功した場合、イメージを取得します</font></font><code>image</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
私たちは、作成</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「パブリッシャー」&nbsp; </font></font><code>AnyPublisher&lt;UIImage?, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;に基づいて&nbsp; </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;機能を</font></font><code>fetchImageErr (for url: URL?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/7f/ek/jf/7fekjfrbihaieypuxaovub1-op8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">私たちは、メソッドの作成を開始する</font></font><code>fetchImageErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「出版社」初期化することによって&nbsp; </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非同期的に単一のTYPE値を取得するために使用することができ、</font></font><code>Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロージャを使用します。クロージャには1つのパラメータがあります。</font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これはTYPEの関数です&nbsp; </font></font><code>(Result&lt;Output, Failure&gt;) → Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iu/ch/_u/iuch_uvhdkz42-mfyuiuq3jiosg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
結果</font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は次のように</font><font style="vertical-align: inherit;">なり</font><font style="vertical-align: inherit;">ます。</font></font><code>AnyPublisher &lt;UIImage?, Error&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「タイプの消去」演算子の助けを借りて</font></font><code>eraseToAnyPublisher()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、考えられるすべてのエラーを考慮して、次の手順を実行します（エラーを特定するわけではありません。エラーがあることを知ることは単に重要です）</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。0。チェック</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font></font><code>nil</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;て&nbsp; </font></font><code>noData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オンに</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">します。そうであれば、エラーを返します。そうでなければ、</font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">さらに</font><font style="vertical-align: inherit;">転送</font><font style="vertical-align: inherit;">します。鎖、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.「パブリッシャ」を作成</font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入力です- </font></font><code>url</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font><font style="vertical-align: inherit;">及び出力値が</font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タプルであり</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">且つエラー&nbsp; </font></font><code>URLError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2は、使用分析</font></font><code> tryMap { }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;結果のタプルを</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：それは場合</font></font><code>response.statusCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">範囲であり</font></font><code>200...299</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その後、更なる処理のために、我々は、データを取ります&nbsp; </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。それ以外の場合は、（何があっても）エラーを「破棄」します。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3.私たちがします</font></font><code>map { }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データを変換</font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し</font></font><code>UIImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
に結果をお届け4. </font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々は設計の後半でそれを使用することを前提とするので、ストリーム</font></font><code>UI</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -私たちが使用して、受信した「パブリッシャー」に「購読」</font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の閉鎖</font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 我々があれば5 -を</font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;誤りを見つけ</font><font style="vertical-align: inherit;">閉鎖で&nbsp; </font></font><code>error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私たちのレポートそれを使用して</font></font><code>promise (.failure(error)))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 -閉鎖で6は、&nbsp; </font></font><code>receiveValue </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々が使用して記事の配列を正常に受信を知らせる</font></font><code> promise (.success($0))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7我々は変数で受信した「サブスクリプション」を覚えている&nbsp; </font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスのインスタンスの「寿命」の中にその実行可能性を確保するために</font></font><code>ImageLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8私たちは、「消去」「出版社」TYPEそして、インスタンスを返します</font></font><code>AnyPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"></font><code>ArticleImage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新しい</font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数</font><font style="vertical-align: inherit;">を使用</font><font style="vertical-align: inherit;">
する</font><font style="vertical-align: inherit;">場所に&nbsp; </font><font style="vertical-align: inherit;">戻り</font><font style="vertical-align: inherit;">ます</font></font><code>noData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">何の画像データが存在しない場合、我々は何も表示されません、それはです</font></font><code>EmptyView ()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3k/wr/v_/3kwrv_cecjy2f8jea3rgnnpkzri.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後に、私たちは、からのデータを表示するすべての私たちの可能性を梱包します</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.orgの</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニュース</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アグリゲータ</font></a><font style="vertical-align: inherit;">には</font></font><code>TabView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yq/xb/ra/yqxbraupq1d0tgeygy2lb05o4xo.png"><br>
<br>
<h2><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーからJSONデータをフェッチしてデコードするときにエラーを表示します&nbsp; </font><font style="vertical-align: inherit;">。</font></font></h2><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
サーバーにアクセスするとき</font><font style="vertical-align: inherit;">、たとえば、間違ったキーを指定した、</font></font><code>API-key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または何の費用も</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">かから</font></a><font style="vertical-align: inherit;">ない開発者の関税がある</font><font style="vertical-align: inherit;">などの理由で</font><font style="vertical-align: inherit;">、&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">エラー</font></a><font style="vertical-align: inherit;">が発生</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">する</font></a><font style="vertical-align: inherit;">可能性があり</font><font style="vertical-align: inherit;">ます。許可されたリクエスト数またはその他の数を超えました。同時に、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー&nbsp; </font><font style="vertical-align: inherit;">&nbsp;から</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードと対応するメッセージが</font><font style="vertical-align: inherit;">提供されます</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_f/2n/zv/_f2nzv5bndlu8auo9cygjyk9fta.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。この種のサーバーエラーを処理する必要があります。そうしないと、アプリケーションのユーザーが突然理由もなく</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバー</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">が</font></a><font style="vertical-align: inherit;"> &nbsp;リクエストの処理</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">を</font></a><font style="vertical-align: inherit;">停止し、画面が空白になってユーザーが完全に途方に暮れる</font><font style="vertical-align: inherit;">状況に陥り&nbsp; </font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これまで</font><font style="vertical-align: inherit;">、</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">サーバーから&nbsp; </font><font style="vertical-align: inherit;">記事</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と情報源を&nbsp; </font><font style="vertical-align: inherit;">選択するとき&nbsp;</font></font><code>[Source]</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;すべてのエラーを無視しましたが、エラーが発生した場合は空の配列</font></font><code>[Article]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を&nbsp; </font><font style="vertical-align: inherit;">返し、結果としてを返しました&nbsp; </font></font><code>[Source]()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
エラー処理から始めて、既存の</font></font><code>fetchArticles (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;記事選択</font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;メソッドに</font><font style="vertical-align: inherit;">基づいて、</font><font style="vertical-align: inherit;">クラスの</font><font style="vertical-align: inherit;">別のメソッド</font><font style="vertical-align: inherit;">を作成</font><font style="vertical-align: inherit;">して、</font><font style="vertical-align: inherit;">記事&nbsp; </font></font><code>fetchArticlesErr (from endpoint: Endpoint) -&gt; AnyPublisher&lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の配列だけ</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">でなく、考えられるエラーも</font><font style="vertical-align: inherit;">返し</font><font style="vertical-align: inherit;">ます&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">fetchArticlesErr</span><span class="hljs-params">(from endpoint: Endpoint)</span></span> -&gt;
                            <span class="hljs-type">AnyPublisher</span>&lt;[<span class="hljs-type">Article</span>], <span class="hljs-type">NewsError</span>&gt; {<font></font>
<font></font>
. . . . . . . .<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この方法は、同様の方法</font></font><code>fetchArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、受け入れ</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;と返し、「パブリッシャー」</font><font style="vertical-align: inherit;">入力での</font><font style="vertical-align: inherit;">記事の配列の形式で値を持つ</font></font><code>[Article]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が、その代わりに誤りがないことを</font></font><code>Never</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私たちは、列挙によって定義されたエラーを有することができる</font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/es/ey/x9eseyq8jbapjkmgdoj7aggc6f0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、「パブリッシャー」を初期化することにより、新しいメソッドの作成を開始&nbsp; </font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、これ</font></font><code>Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クロージャを使用して</font><font style="vertical-align: inherit;">単一のTYPE値</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">非同期的に取得するために使用します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">閉鎖は一つのパラメータがある- </font></font><code>Promise</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TYPEの関数である&nbsp; </font></font><code>(Result&lt;Output, Failure&gt;) -&gt; Void</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">我々は変わり</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/bw/ct/3wbwctuso0qweiz3a8qk_h1aiom.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
受け</font></font><code>Future</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私たちが必要とする「出版社」の中に&nbsp; </font></font><code>AnyPublisher &lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「TYPE消去」演算子を使用して</font></font><code>eraseToAnyPublisher()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに新しいメソッドで</font></font><code>fetchArticlesErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font><font style="vertical-align: inherit;">、メソッドで</font><font style="vertical-align: inherit;">実行したすべてのステップを繰り返します&nbsp;</font></font><code>fetchArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、しかしすべての可能なエラーを考慮に入れます：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pb/xz/i0/pbxzi0rn5-cuandt3rtu74ofj8s.png"><br>
<br>
<ul>
<li>0.   endpoint&nbsp; <code>URL endpoint.absoluteURL </code>    , <code> url </code> <code>nil</code>:  <code>nil</code>,    <code>.urlError</code>,   —  <code>url</code>   ,</li>
<li>1.  «» <code>dataTaskPublisher(for:)</code>,     — <code>url</code>,    <code>Output</code>   <code>(data: Data, response: URLResponse)</code>  &nbsp;<code>URLError</code>,</li>
<li>2.    <code>tryMap { }</code>&nbsp;  <code>(data: Data, response: URLResponse)</code>:  <code>response.statusCode</code>    <code>200...299</code>,       &nbsp;<code>data</code>.    «»  <code>.responseError</code>,  &nbsp;&nbsp;<code>data</code>,    <code>String</code>,    ,</li>
<li>3. <code> JSON</code>    ,   &nbsp;<code>NewsResponse</code>,</li>
<li>4.    <code>main</code> ,         <code>UI</code></li>
<li>«»   «»   <code>sink</code>    <code>receiveCompletion</code>  <code>receiveValue</code>,<br>
 <ul>
<li>5.&nbsp; &nbsp;&nbsp;<code>receiveCompletion</code>&nbsp;  <code>error</code>,       <code>promise (.failure(...)))</code>,</li>
<li> 6.&nbsp;&nbsp;&nbsp;<code>receiveValue</code>         <code>promise (.success($0.articles))</code>,</li>
</ul>&nbsp;</li>
<li>7.&nbsp;  «»  &nbsp;<code>var subscriptions</code>,       « »   <code>NewsAPI</code>,</li>
<li>8. «»  «»    <code>AnyPublisher</code>.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「パブリッシャー」&nbsp; </font></font><code>dataTaskPublisher(for:)</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">が</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロトタイプ</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">と異なるの</font></a></font><code>dataTask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、サーバーエラー</font></font><code>response.statusCode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;が範囲外の</font></font><code>200...299</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合に、成功した値をタプルの形式で配信し、フォームの</font></font><code>(data: Data, response: URLResponse)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーではない点</font></font><code>(Error, URLResponse?)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">です。この場合、実サーバーのエラー情報はに含まれてい</font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。 「パブリッシャー」</font></font><code>dataTaskPublisher(for:)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;は</font></font><code>URLError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、クライアント側でエラーが発生した場合にエラーを</font><font style="vertical-align: inherit;">配信します&nbsp; </font><font style="vertical-align: inherit;">（サーバーに接続できない、セキュリティシステムの禁止</font></font><code>ATS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">など）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
でエラーを表示する場合は</font></font><code>SwiftUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、対応するもの</font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を呼び出す</font><font style="vertical-align: inherit;">必要</font><font style="vertical-align: inherit;">があります</font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">これを次のように呼び出します&nbsp; </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">プロトコルを実装する</font></font><br>
<br>
<img src="https://habrastorage.org/webt/em/1o/qy/em1oqy5ob60o8xzmz_-kpdvzs4a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
クラスに</font></font><code>&nbsp;ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は</font></font><code>ObservableObject </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、今度は4つの&nbsp; </font></font><code>@Published</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロパティがあります。</font></font><br>
<br>
<ol>
<li><code>@Published var indexEndpoint: Int</code> —   <code>Endpoint</code> (    «»,     <code> View</code>),&nbsp;</li>
<li><code>@Published var searchString: String</code> —   ,    &nbsp;<code>Endpoint</code>:    «» ,       (      «»,        <code>View</code>),&nbsp;</li>
<li>&nbsp;<code>@Published var articles: [Article]</code>&nbsp;-    ( «»,        &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">NewsAPI.org&nbsp;</a>)</li>
<li>&nbsp;&nbsp;<code>@Published var articlesError: NewsError?</code>&nbsp;-  ,      &nbsp;    &nbsp;<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">NewsAPI.org&nbsp;</a>.</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
あなたはクラスのインスタンスを初期化するとき</font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々は再び入力「の出版社」からチェーンを拡張しなければなりません</font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">し、</font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出力に「出版社」&nbsp; </font></font><code>AnyPublisher&lt;[Article],NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、私たちは「加入者」と「署名」これに</font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々は多くの記事を取得</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはエラーを&nbsp; </font></font><code>articlesError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちのクラスでは、</font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我々はすでに機能を構築している&nbsp; </font></font><code>fetchArticlesErr (from endpoint: Endpoint)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">戻り「パブリッシャー」という&nbsp; </font></font><code>AnyPublisher&lt;[Article], NewsError&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、値に応じて</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、我々は唯一何とか「の出版社」の値を使用する必要がある&nbsp; </font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、この関数の引数にそれらを有効にします</font></font><code>endpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。&nbsp; </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、「パブリッシャー」</font></font><code>$indexEndpoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;と&nbsp; </font><font style="vertical-align: inherit;">を組み合わせ&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。これを行う</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">には、演算子があります</font></font><code>Publishers.CombineLatest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/5i/lz/zh/5ilzzh6h5_aity8uvzd6eladg7q.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、エラータイプTYPE "publisher"をrequiredに設定する必要があります&nbsp; </font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/oe/85/tt/oe85tthmperdfzf6yqiy5fmy2b4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、</font></font><code>fetchArticlesErr (from endpoint: Endpoint) </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クラスの</font><font style="vertical-align: inherit;">関数を使用します&nbsp; </font></font><code>NewsAPI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。いつものように、</font></font><code>flatMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前の「パブリッシャー」から受信したデータに基づいて新しい「パブリッシャー」を作成</font><font style="vertical-align: inherit;">するオペレーターの助けを借りてこれを行います&nbsp; </font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/bu/kx/bhbukxfbhg2q9otl4rp-ksponec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、「サブスクライバー」</font></font><code>sink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用し</font><font style="vertical-align: inherit;">てこの新しく受信した「パブリッシャー」に「サブスクライブ」し</font><font style="vertical-align: inherit;">、そのクロージャー</font></font><code>receiveCompletion</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と</font></font><code>receiveValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「出版社」のどちらかの記事の配列の値から受信するために、&nbsp; </font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">またはエラー</font></font><code>articlesError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/x8/iy/cqx8iyvnwanwmv1vselki10ytv4.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、いくつかの外部で得られた「サブスクリプション」を覚えておくことが必要である</font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">変数を</font></font><code>cancellableSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。そうしないと、非同期で値を取得できません</font></font><code>articles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">または</font></font><code>articlesError </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完了後</font><font style="vertical-align: inherit;">のエラー</font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kh/wh/_a/khwh_ao98y7zy9cdpenc0nzvntq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
検索文字列を入力するときにサーバーへの呼び出し回数を減らすために</font></font><code>searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、検索バー自体の「パブリッシャー」を使用するのではなく&nbsp; </font></font><code>$searchString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、その修正バージョン</font></font><code>validString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/fl/op/ss/flopssp-pjixvbtesqabmpp1h2s.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
で作成したASYNCHRONOUS「パブリッシャー」に「サブスクライブ」し</font></font><code>init( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。クラスインスタンスの「ライフサイクル」全体を通じて持続する</font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">データサンプリングエラーの可能性を表示するために</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nt/iw/k4/ntiwk4eju6aneam-1wlymjqyu9a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
、修正に進み</font><font style="vertical-align: inherit;">ます&nbsp; </font></font><code> UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。では</font></font><code>SwiftU</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I、既存の構造では、我々は&nbsp; </font></font><code>ContentVieArticles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;ただ得られ、別の1、使用&nbsp; </font></font><code>View Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">のみ名に文字「のErr」を追加することによりを、。これはクラスのインスタンスです。&nbsp;&nbsp;</font></font><code>ArticlesViewModelErr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">サーバーからの記事データの選択やデコードのエラーを「キャッチ」します&nbsp; </font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/kw/vy/uv/kwvyuvbthb08tcalkcdpnucqfbq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また</font></font><code>Alert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;、エラーが発生した場合の</font><font style="vertical-align: inherit;">緊急メッセージの表示も追加し&nbsp; </font><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、APIキーが間違っている場合：</font></font><br>
<br>
<pre><code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">APIConstants</span> </span>{
    <span class="hljs-comment">// News  API key url: https://newsapi.org</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> apiKey: <span class="hljs-type">String</span> = <span class="hljs-string">"API_KEY"</span> <font></font>
    <font></font>
   .  .  .  .  .  .  .  .  .  .  .  .  .<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
...次に、次のメッセージを受け取ります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/nb/ws/si/nbwssihj8ldlqqtcbti4tjwcv7o.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
リクエストの制限を使い果たした場合、次のメッセージを受け取ります。</font><font style="vertical-align: inherit;">エラーの可能性がある</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cz/de/ux/czdeuxquiscc-6qklciy5a0w3jm.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
記事</font></font><code>[Article] </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">選択するメソッドに戻り&nbsp; </font><font style="vertical-align: inherit;">、セットに基づいて&nbsp; </font><font style="vertical-align: inherit;">非同期</font><font style="vertical-align: inherit;">で情報</font><font style="vertical-align: inherit;">を受け取り</font><font style="vertical-align: inherit;">、直接配置する</font><font style="vertical-align: inherit;">&nbsp;「パブリッシャー」</font></font><code>NewsError</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用すると、コードを簡略化</font><font style="vertical-align: inherit;">できます&nbsp; </font><font style="vertical-align: inherit;">。&nbsp; </font><font style="vertical-align: inherit;">モデル</font><font style="vertical-align: inherit;">内で</font><font style="vertical-align: inherit;">&nbsp;エラーを報告する&nbsp; </font><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">
ご存知のように、このコードは、ソースデータ</font><font style="vertical-align: inherit;">が</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">NewsAPI.org</font></a><font style="vertical-align: inherit;">ニュース&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アグリゲータ</font></a><font style="vertical-align: inherit;"> &nbsp;または国である&nbsp; </font><font style="vertical-align: inherit;">場合、特定の「発行元」を取得するために非常に簡単に使用できます。</font></font><code>Generic</code><font style="vertical-align: inherit;"></font><code>AnyPublisher&lt;T,NewsError&gt;,</code><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><code>JSON</code><font style="vertical-align: inherit;"></font><code>Codable</code><font style="vertical-align: inherit;"></font><code>T</code><font style="vertical-align: inherit;"></font><code>NewsError</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/lc/v7/m9/lcv7m9fmdbq20ih5phivj7hl1go.png"><br>
<br><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><code>Endpoint</code><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>country</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 情報源、および出力にはさまざまなモデルが必要です-たとえば、記事または情報源のリスト：</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ig/ff/4q/igff4qjqmxcxloixsshjbc36uxy.png"><br>
<br>
<img src="https://habrastorage.org/webt/bh/o_/7n/bho_7nbyxpl5yxth1ihweasjbec.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">結論</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、それが果たすことがいかに簡単であるかを学んだ</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の助けを借りて、リクエスト</font></font><code> Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の</font></font><code>URLSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「発行者」</font></font><code>dataTaskPublisher</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">とします</font></font><code>Codable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。エラーを追跡する必要がない場合</font></font><code> Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">は、「パブリッシャー」の</font><font style="vertical-align: inherit;">非常にシンプルな</font><font style="vertical-align: inherit;">5行のコード</font><font style="vertical-align: inherit;">
を取得します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このコードは</font></font><code>AnyPublisher&lt;T, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、非同期で</font></font><code>JSON </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">情報を</font><font style="vertical-align: inherit;">受け取り、指定</font><font style="vertical-align: inherit;">された</font><font style="vertical-align: inherit;">情報に</font><font style="vertical-align: inherit;">&nbsp;基づい&nbsp; </font><font style="vertical-align: inherit;">て</font></font><code>Codable </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モデル</font><font style="vertical-align: inherit;">に直接配置します</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">このコードは、特定のパブリッシャーを取得するために非常に簡単に使用できます</font><font style="vertical-align: inherit;">。たとえば</font><font style="vertical-align: inherit;">、出力にはさまざまなモデルが必要です。たとえば、一連の記事や情報源のリストなどです。</font><font style="vertical-align: inherit;">
エラーを考慮する必要がある場合、</font><font style="vertical-align: inherit;">「パブリッシャー」の</font><font style="vertical-align: inherit;">コード&nbsp; </font><font style="vertical-align: inherit;">はもう少し複雑になりますが、それでもコールバックのない非常に単純なコードになります。</font></font><code>T</code><font style="vertical-align: inherit;"></font><code>url</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/2i/r_/6w/2ir_6wkuga1u9jcxsmqijle480e.png"><br>
<br><font style="vertical-align: inherit;"></font><code>url </code><font style="vertical-align: inherit;"></font><code>Endpoint</code><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><code>Generic</code><font style="vertical-align: inherit;"></font><br>
<br>
<img src="https://habrastorage.org/webt/fi/4d/ep/fi4depxf-hbngki4p5y3ktunbny.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
を使用した</font></font><code>HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">クエリ</font><font style="vertical-align: inherit;">実行のテクノロジーを使用して、</font><font style="vertical-align: inherit;">非同期でデータを選択してUIImageイメージを受信する</font></font><code>Combine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「パブリッシャー」</font></font><code>AnyPublisher&lt;UIImage?, Never&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">作成できます</font><font style="vertical-align: inherit;">か？に基づいてい</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。画像</font></font><code>ImageLoade</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ダウンローダーrは、非同期データの繰り返し取得を回避するためにメモリにキャッシュされます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
取得したあらゆる種類の「パブリッシャー」は、@ Publishedプロパティを使用してSwiftUIを使用して設計されたUIを制御するObservableObjectクラスで非常に簡単に「機能させる」ことができます。これらのクラスは、アクティブなUI要素（TextField、Stepper、Pickerテキストボックス、Toggleラジオボタンなど）および「output」@Publishedプロパティに対応するいわゆる「入力」@Publishedプロパティを持っているため、通常はビューモデルの役割を果たします。 、主にパッシブUI要素（Text、Image、Image、Circle（）、Rectangle（）など）で構成されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このアイデア</font><font style="vertical-align: inherit;">は、この記事で紹介した</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NewsAPI.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニュースアグリゲーター</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アプリケーション</font></a><font style="vertical-align: inherit;">全体に浸透</font><font style="vertical-align: inherit;">しています。非常に普遍的であり、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"></font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMDb </font></font></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">映画</font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">データベース</font></a><font style="vertical-align: inherit;">と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hacker News</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ニュースアグリゲータの&nbsp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">アプリケーションの開発</font></a><font style="vertical-align: inherit;">。これについては、今後の記事で説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この記事のアプリケーションコードは</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Githubにあり</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1.この記事で紹介したアプリケーションにシミュレータを使用する場合、シミュレータが</font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">エラーで動作する</font><font style="vertical-align: inherit;">ことを知って</font><font style="vertical-align: inherit;">いる</font><font style="vertical-align: inherit;">という事実に注意を向けたいと思い</font><font style="vertical-align: inherit;">ます。使用できます</font></font><code>NavigationLink</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シミュレータでのみ1回。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">リンクを使用して戻って、同じリンクをクリックしました-何も起こりません。</font><font style="vertical-align: inherit;">別のリンクを使用するまで、最初のリンクは機能しませんが、2番目のリンクはアクセスできなくなります。</font><font style="vertical-align: inherit;">しかし、これはシミュレータでのみ観察され、実際のデバイスではすべてが正常に機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.一部の情報源</font><font style="vertical-align: inherit;">は、記事の「写真」の</font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代わり</font></font><code>https</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">に</font><font style="vertical-align: inherit;">使用し</font><font style="vertical-align: inherit;">ています。</font><font style="vertical-align: inherit;">これらの「画像」を確実に表示したいが、外観のソースを制御できない場合は、</font></font><code>ATS ( App Transport Security)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらの</font></font><code>http</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「画像」</font><font style="vertical-align: inherit;">を受信</font><font style="vertical-align: inherit;">するようにセキュリティシステム</font><font style="vertical-align: inherit;">を</font><font style="vertical-align: inherit;">構成する必要があります</font><font style="vertical-align: inherit;">が、これはもちろん</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">良い方法</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ではありません</font><font style="vertical-align: inherit;">。</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">より安全なオプション</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">を使用でき</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">ます</font></a><font style="vertical-align: inherit;">。</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照：</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    HTTP   Swift 5   Combine     SwiftUI.  1 .</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Modern Networking in Swift 5 with URLSession, Combine and Codable.</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">URLSession.DataTaskPublisher’s failure type</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Combine: Asynchronous Programming with Swift</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">«SwiftUI &amp; Combine:  »</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Introducing Combine — WWDC 2019 — Videos — Apple Developer. session 722</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">(  722 «  Combine»   )</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Combine in Practice — WWDC 2019 — Videos — Apple Developer. session 721</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">(  721 «  Combine»   )</a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja488428/index.html">Yandex検索の将来をどのように予測するか：バグ修正から発見クエリまで</a></li>
<li><a href="../ja488432/index.html">Snoop Projectは、RuNetユーザーが長い間待ち望んでいた、インターネットインテリジェンスのための素晴らしいツールです。</a></li>
<li><a href="../ja488436/index.html">オープンソースのチップチューン音楽をすばやく作成</a></li>
<li><a href="../ja488438/index.html">フィルムオーディオ形式の歴史：コンパクトカセットに対するドイツの回答-開発の運命はどうでしたか</a></li>
<li><a href="../ja488440/index.html">Lords of DOOM：2人の男がカルトシューティングゲームを作成し、ビデオゲーム業界を揺るがした方法</a></li>
<li><a href="../ja488446/index.html">ロシアの計装：私たちはあなたのデザインを指で変えました</a></li>
<li><a href="../ja488448/index.html">ITMO大学で体験する：マスタークラス、ワークショップ、講義、学生コンテスト</a></li>
<li><a href="../ja488450/index.html">新世代のオンラインバンキングの仕組み</a></li>
<li><a href="../ja488452/index.html">ダイソンと抗コロナウイルス空気清浄機：予期しないコンセプトの特許を取得した会社</a></li>
<li><a href="../ja488456/index.html">大学でのプロジェクト活動とそれが提供する利点</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>