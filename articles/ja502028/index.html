<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📢 👨🏼‍🚒 🔊 Vanyaは祖母または動的JavaScriptアダプティブに行く 🔱 👐 👨🏿‍💼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="アダプティブに取り組んでいる間、時々オブジェクトの外観を変更する必要があります。通常、いくつかのメディアクエリを登録するだけで十分です。場合によっては、要素の順序を変更する必要があります。たとえば、ここでは、Flexboxまたはグリッドテクノロジーのorderプロパティが役に立ちます。しかし、これが...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Vanyaは祖母または動的JavaScriptアダプティブに行く</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/502028/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アダプティブに取り組んでいる間、時々オブジェクトの外観を変更する必要があります。</font><font style="vertical-align: inherit;">通常、いくつかのメディアクエリを登録するだけで十分です。</font><font style="vertical-align: inherit;">場合によっては、要素の順序を変更する必要があります。たとえば、ここでは、Flexboxまたはグリッドテクノロジーのorderプロパティが役に立ちます。</font><font style="vertical-align: inherit;">しかし、これが役に立たない場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダイナミックアダプティブのアイデアは、レイアウトデザイナーの生活を簡素化し、複雑なレイアウト要素をすばやく適応させるように設計されています。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/QKuMr575vlQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
たとえば、このケースを見てください。ここには次の構造があります：見出しとテキスト。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jd/hs/i8/jdhsi8bq-3u7lszevxzxd9mmgxq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、一定の許可を得て、設計者は見出しの下にあったテキストが構造内の完全に別の場所にあるはずであることを示しました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cy/e4/u6/cye4u6m9mmoop_qysyp4mzfxinq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通常、レイアウト設計者はこの問題を2つの方法のいずれかで解決しました。すぐに思い出します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
シティボーイのバニャが本当に夏に祖母に来たかった生活状況の例として紹介します。しかし、祖母を恋しく思ったからではなく、少女オリヤと一緒に川に行きたかったからです。そして、これを992px未満の解像度で実行したいと考えていました。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/x9/ev/nj/x9evnjtlgrzdje2vpbxvajitcw8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
バニの問題をどのように解決しますか？</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは次のことを行うことができます：この許可で都市でVanyaを非表示にし、Olyaと一緒に川でVanyaを見せます。しかし、これにはヴァニのクローンを作る必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これが都市（オリジナル）のバンヤです。しかし、実際には、バニャはすでにオリヤと一緒に川沿いにいます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cq/34/hu/cq34hu8vfdlpqmc5nqsniftrdxw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、最初はこのVanya川はCSSに隠されています。必要なパラメーターを使用してメディアクエリを記述します。ここでは、新しいVanyaを表示し、古いVanya（市）を非表示にします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2t/i0/id/2ti0idhaphwbdm9kelpifg0ndec.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてがうまくいった-必要な許可で、ヴァンヤはオリヤの下にいる。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vv/hz/i6/vvhzi6fnhiti6hed2t5ojkq42wg.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
したがって、解像度が992pxを超えると、Vanyaはすぐに都市に戻ります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vd/s1/q7/vds1q743_a221midfog7xtlodtq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、すべてが大丈夫であるように見えます。あなたは分散させることができます...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、それほど単純ではありません。実際、一部の顧客はコンテンツの複製に非常に反対しています。これは、SEOに関するいくつかの問題、および原則として、不要なブロックの作成が原因です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
幸運なことに、私たちの状況では、Vanyaは少し小さいですが、Vanyaはたまたま非常に大きく、大規模で、非常に多くのコード行を必要とします。そして、この状況では、顧客を含め、JavaScriptを使用してDOMオブジェクトを移動するように求められます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは、おおよそ次のように行うことができます。まず、クローンであるVanyaをHTMLから削除し、Vanyaをオリジナルのままにする必要があります。 CSSで、別の折り返しオプションのために元々持っていたすべての行をコメント化します。そして、ここにそのような単純なJSコードを追加します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-keyword">const</span> parent_original = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__blocks_city'</span>);
<span class="hljs-keyword">const</span> parent = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__column_river'</span>);
<span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.content__block_item'</span>);<font></font>
<font></font>
<span class="hljs-comment">//   </span>
<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'resize'</span>, move);<font></font>
<font></font>
<span class="hljs-comment">//</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span>(<span class="hljs-params"></span>)</span>{
	<span class="hljs-keyword">const</span> viewport_width = <span class="hljs-built_in">Math</span>.max(<span class="hljs-built_in">document</span>.documentElement.clientWidth, <span class="hljs-built_in">window</span>.innerWidth || <span class="hljs-number">0</span>);
	<span class="hljs-keyword">if</span> (viewport_width &lt;= <span class="hljs-number">992</span>) {
		<span class="hljs-keyword">if</span> (!item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent.insertBefore(item, parent.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.add(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">if</span> (item.classList.contains(<span class="hljs-string">'done'</span>)) {<font></font>
			parent_original.insertBefore(item, parent_original.children[<span class="hljs-number">2</span>]);<font></font>
			item.classList.remove(<span class="hljs-string">'done'</span>);<font></font>
		}<font></font>
	}<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">// </span><font></font>
move();<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、市、川、元のバニに「ダイヤル」する変数を宣言します。次に、Vanyaを移動する必要がある瞬間を捉えるために、画面の幅を「リッスン」し始めます。幅を取得し、幅が992px以下であることを確認する条件を設定した後。 Vanyaを移動するときは、クラスを割り当てて、クラスの存在を確認します。これにより、この移動が常に発生することはありません（Vanyaが一度移動しただけであり、それを常に転送する必要はありません）。そして、親の中（川へ）への転送自体を実行します。ここでは、DOMツリー内でVanya（Olyaの下、Olyaの上）を移動する必要がある位置を示します。そして、解像度が992pxを超える場合は、Vanyaをその場所に戻す必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちは、ヴァンヤが再びオリヤの下に移動したことを確認します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、すべてがOKです。重複するコンテンツはありません。すべてがうまく機能し、顧客は満足しています。誰もが満足しています。しかし、この方法には、jsコード自体の書き込みに関連する多くの問題があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単一のケースではこれは正常であると理解しています。しかし、私はこのプロセスを自動化するというアイデアを得ました。 5-6個の完全に異なる要素をページにスローする必要があるとします。このタスクでは、このメソッドを使用してjsコードを作成するのは非常に面倒で時間がかかります。そして2つ目のポイントは、当然、多くの人に負担をかけていますが、ユーザーのPCへの負荷です。ここでは、常に画面の幅に「耳を傾けています」。この瞬間も最適化したかった。このコードでも最適化できますが、</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">「動的適応」</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">と呼ばれる自動化</font><b><font style="vertical-align: inherit;">ツール</font></b><font style="vertical-align: inherit;">を</font><b><font style="vertical-align: inherit;">作成したため</font></b><font style="vertical-align: inherit;">、そこで最適化しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、すべてがどのように機能するかを説明します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ダイナミックアダプティブを接続したら、HTMLファイルを操作するだけで済み、JavaScriptにアクセスする必要はありません。これを行うには、data-da属性（daはダイナミックアダプティブの略）を記述し、コンマで区切られた3つのパラメーターを引用符で囲んで指定する必要があります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最初のパラメーターはwhereです。バンヤを動かしたいオブジェクトのユニークなクラスを取ります。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目のパラメーターはwhich（行）です。私のオブジェクトには2つの要素があります。ゼロと最初の要素です（JavaScriptではすべてがゼロから始まることを知っています）。 「1」オブジェクトの後にVanyaを挿入する必要があるため、「2」パラメータを記述しています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3番目のパラメーターはいつですか。 3番目のパラメーターでは、私は「992」と書きます。これは、Vanyaが実際にOlyaに到達したい解像度未満です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2番目と3番目のパラメーターはオプションです。デフォルトでは、オブジェクトは768px未満の解像度でブロックの最後に移動されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/s6/aw/an/s6awan4diwfqltbtcyvt7nkkg-k.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チェックします。すべてが以前のバージョンと同じように機能しますが、コンテンツの重複がなく、すべて自動化されています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
アメニティを検討してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、VanyaをOlyaの上に移動するには、2番目の属性パラメーターのシリアル番号を変更する必要があります。そして、VanyaはすでにOlyaの上にいます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cl/w1/it/clw1it_jfjybuy4wewk8bwxdbio.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
便利でしょ？ 3番目のブレークポイントパラメーターでも同じことができます。たとえば、1280pxを指定できます。 （data-da = "content__column_river、1,1280"）。したがって、Vanyaは少し早く、正確にはこの値に達したときにOlyaに行きます。そして最もクールなことは、Vanyaが完全に自動的に彼の場所に戻るということです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
追加の快適さのために、属性の2番目のパラメーターのシリアル番号の代わりに、最初または最後の2つの値のいずれかを指定できます。私が最初に書くとき、ヴァンヤは「私は川です」という見出しの上を移動します。送信先のオブジェクトの一番最初に配置されます。したがって、最後に指定した場合、Vanyaはオブジェクトの一番下になります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hx/kb/l4/hxkbl42bvvf9aqvsnffcqhpkq0w.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらにいくつかの例を見てみましょう。 Kolyaをロタの庭に送り、Anyaを川に送ってVanとOlaにも送れるとしたら、もっと楽しいでしょう。 Kolyaには、パラメーター</font></font><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data-da = "content__column_garden、2,992"を</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持つ属性を書き込みます</font><font style="vertical-align: inherit;">。 Aniの</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">場合、data-da =“ content__column_river、1.1280”</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
と</font><font style="vertical-align: inherit;">記述し</font><i><font style="vertical-align: inherit;">ます</font></i><font style="vertical-align: inherit;">。川の上のAnya、Olya、Vanyaです。コリャは少し後にロタに行きます。戻ったとき、すべての男は彼らの場所にいます。すべてが素晴らしいです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CodePenで遊んでみてください：</font></font></b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codepen.io/FreelancerLifeStyle/project/full/ZmWOPm</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
もちろん、疑問があるかもしれません。たとえば、最初にAnyaをクリックすると、「すべてが問題ありません」と書かれたウィンドウが表示されます。彼女がみんなと一緒に川に移動するとどうなるか見てみましょう。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
移動してクリックしてください-すべてが正常に動作し、ウィンドウも表示されます。移動しても、イベントはオブジェクトとともに残ります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/pn/yp/9w/pnyp9wq5kdlt6nl5ypa-rgx3uhw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして2番目のエキサイティングな質問は負荷です。次に、動的アダプティブのフードの下に隠されているコードについて少し説明することで、これを示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、配列の作成を含むいくつかの変数を宣言します。これらは以下に記入します。属性を取得して分離し、配列に変換して個々の要素を取得します。次に、オブジェクトの元の位置を記入して、（都市の）親の場所に戻せるようにします。その後、要素自体の配列に入力して、正しい操作のために並べ替えられるようにします。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword">let</span> originalPositions = [];
<span class="hljs-keyword">let</span> daElements = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">'[data-da]'</span>);
<span class="hljs-keyword">let</span> daElementsArray = [];
<span class="hljs-keyword">let</span> daMatchMedia = [];
<span class="hljs-comment">// </span>
<span class="hljs-keyword">if</span> (daElements.length &gt; <span class="hljs-number">0</span>) {
	<span class="hljs-keyword">let</span> number = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElements.length; index++) {
		<span class="hljs-keyword">const</span> daElement = daElements[index];
		<span class="hljs-keyword">const</span> daMove = daElement.getAttribute(<span class="hljs-string">'data-da'</span>);
		<span class="hljs-keyword">if</span> (daMove != <span class="hljs-string">''</span>) {
			<span class="hljs-keyword">const</span> daArray = daMove.split(<span class="hljs-string">','</span>);
			<span class="hljs-keyword">const</span> daPlace = daArray[<span class="hljs-number">1</span>] ? daArray[<span class="hljs-number">1</span>].trim() : <span class="hljs-string">'last'</span>;
			<span class="hljs-keyword">const</span> daBreakpoint = daArray[<span class="hljs-number">2</span>] ? daArray[<span class="hljs-number">2</span>].trim() : <span class="hljs-string">'767'</span>;
			<span class="hljs-keyword">const</span> daDestination = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim())
			<span class="hljs-keyword">if</span> (daArray.length &gt; <span class="hljs-number">0</span> &amp;&amp; daDestination) {<font></font>
				daElement.setAttribute(<span class="hljs-string">'data-da-index'</span>, number);
				<span class="hljs-comment">//   </span><font></font>
				originalPositions[number] = {<font></font>
					<span class="hljs-string">"parent"</span>: daElement.parentNode,
					<span class="hljs-string">"index"</span>: indexInParent(daElement)<font></font>
				};<font></font>
				<span class="hljs-comment">//   </span><font></font>
				daElementsArray[number] = {<font></font>
					<span class="hljs-string">"element"</span>: daElement,
					<span class="hljs-string">"destination"</span>: <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.'</span> + daArray[<span class="hljs-number">0</span>].trim()),
					<span class="hljs-string">"place"</span>: daPlace,
					<span class="hljs-string">"breakpoint"</span>: daBreakpoint<font></font>
				}<font></font>
				number++;<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	dynamicAdaptSort(daElementsArray);<font></font>
<font></font>
	<span class="hljs-comment">//    </span>
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daType = <span class="hljs-string">"max"</span>; <span class="hljs-comment">// MobileFirst   min</span><font></font>
<font></font>
		daMatchMedia.push(<span class="hljs-built_in">window</span>.matchMedia(<span class="hljs-string">"("</span> + daType + <span class="hljs-string">"-width: "</span> + daBreakpoint + <span class="hljs-string">"px)"</span>));<font></font>
		daMatchMedia[index].addListener(dynamicAdapt);<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして最後に、私が話した最適化が実装されます。ウィンドウのサイズ変更（ウィンドウのすべての変更をリッスンする）の代わりに、ウィンドウのmatchMediaを使用してブレークポイントでのみ変更をリッスンします。</font><font style="vertical-align: inherit;">このようにして、オブジェクトの属性で示したいくつかのポイントでのみブラウザーの応答を取得します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、これらのブレークポイントの配列を収集し、各ブレークポイントのイベントをハングさせます。</font><font style="vertical-align: inherit;">メインのdynamic_adapt関数では、収集して並べ替えた配列内のすべてを展開し、ブレークポイントの存在を確認し、要素を移動するか、要素を元の場所に戻します。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">// </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdapt</span>(<span class="hljs-params">e</span>) </span>{
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; daElementsArray.length; index++) {
		<span class="hljs-keyword">const</span> el = daElementsArray[index];
		<span class="hljs-keyword">const</span> daElement = el.element;
		<span class="hljs-keyword">const</span> daDestination = el.destination;
		<span class="hljs-keyword">const</span> daPlace = el.place;
		<span class="hljs-keyword">const</span> daBreakpoint = el.breakpoint;
		<span class="hljs-keyword">const</span> daClassname = <span class="hljs-string">"_dynamic_adapt_"</span> + daBreakpoint;<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (daMatchMedia[index].matches) {
			<span class="hljs-comment">// </span>
			<span class="hljs-keyword">if</span> (!daElement.classList.contains(daClassname)) {
				<span class="hljs-keyword">let</span> actualIndex = indexOfElements(daDestination)[daPlace];
				<span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'first'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[<span class="hljs-number">0</span>];<font></font>
				} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (daPlace === <span class="hljs-string">'last'</span>) {<font></font>
					actualIndex = indexOfElements(daDestination)[indexOfElements(daDestination).length];<font></font>
				}<font></font>
				daDestination.insertBefore(daElement, daDestination.children[actualIndex]);<font></font>
				daElement.classList.add(daClassname);<font></font>
			}<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (daElement.classList.contains(daClassname)) {<font></font>
				dynamicAdaptBack(daElement);<font></font>
				daElement.classList.remove(daClassname);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	customAdapt();<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
原点復帰機能：</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//   </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptBack</span>(<span class="hljs-params">el</span>) </span>{
	<span class="hljs-keyword">const</span> daIndex = el.getAttribute(<span class="hljs-string">'data-da-index'</span>);
	<span class="hljs-keyword">const</span> originalPlace = originalPositions[daIndex];
	<span class="hljs-keyword">const</span> parentPlace = originalPlace[<span class="hljs-string">'parent'</span>];
	<span class="hljs-keyword">const</span> indexPlace = originalPlace[<span class="hljs-string">'index'</span>];
	<span class="hljs-keyword">const</span> actualIndex = indexOfElements(parentPlace, <span class="hljs-literal">true</span>)[indexPlace];<font></font>
	parentPlace.insertBefore(el, parentPlace.children[actualIndex]);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然、多くの人がモバイルファーストについて質問しています。</font><font style="vertical-align: inherit;">問題はありません-コード内の一部の変数のみを変更する必要があります（HTMLでこの設定を削除しても既に機能しています）。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブレークポイントの配列を収集するとき、ここで「max」を「min」に変更する必要があります。</font><font style="vertical-align: inherit;">また、イベントはmax-widthではなくmin-widthによって「リッスン」されます。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">また、ブレークポイントで並べ替えるときに配列内のオブジェクトが異なる順序で整列されるように、並べ替えを変更する必要もあります。 </font></font></li>
</ol><br>
<pre><code class="javascript hljs">	<span class="hljs-comment">// </span>
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dynamicAdaptSort</span>(<span class="hljs-params">arr</span>) </span>{<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.breakpoint &gt; b.breakpoint) { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-comment">// MobileFirst </span><font></font>
		});<font></font>
		arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
			<span class="hljs-keyword">if</span> (a.place &gt; b.place) { <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> } <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> }<font></font>
		});<font></font>
	}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、動的適応では、オブジェクトを転送するときに特定の方法でインデックスを取得します。</font><font style="vertical-align: inherit;">そして、ここに最初の欠陥があります-転送されたオブジェクトを除外する必要があります。</font><font style="vertical-align: inherit;">それら。</font><font style="vertical-align: inherit;">オブジェクトを同じ場所に転送すると、すべてが適切になり、オブジェクトが希望する順序で整列します。転送するときは、以前に転送したオブジェクトを同じポイントに除外する必要があります。</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment">//       </span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indexOfElements</span>(<span class="hljs-params">parent, back</span>) </span>{
	<span class="hljs-keyword">const</span> children = parent.children;
	<span class="hljs-keyword">const</span> childrenArray = [];
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; children.length; i++) {
		<span class="hljs-keyword">const</span> childrenElement = children[i];
		<span class="hljs-keyword">if</span> (back) {<font></font>
			childrenArray.push(i);<font></font>
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">//  </span>
			<span class="hljs-keyword">if</span> (childrenElement.getAttribute(<span class="hljs-string">'data-da'</span>) == <span class="hljs-literal">null</span>) {<font></font>
				childrenArray.push(i);<font></font>
			}<font></font>
		}<font></font>
	}<font></font>
	<span class="hljs-keyword">return</span> childrenArray;<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、別のソート問題が伴います。たとえば、男性を同時に同じ位置に移動すると、彼らの順序を制御できなくなります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このダイナミックアダプティブを開発する方法の1つは、たとえば、いくつかのブレークポイントの作成です。たとえば、Vanyaを1280pxでOlaに移動し、992pxで庭に移動するか、その場所に戻る必要があります。この機能は現在利用できないため、まだやるべきことが残っています。一般に、アダプティブで日常的なタスクの95％をカバーするには、今では十分な機能で十分です。アイテムを別の場所に移動する問題を解決するために、属性を書き込むのに数秒を費やす必要があります。そして、私は必要な結果を得るでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、ダイナミックアダプティブを好んだすべての人に、コード自体の機能と最適化の両方のテスト、開発、改善に参加することを強くお勧めします。</font><font style="vertical-align: inherit;">そして、私たちのコール、アニ、ヴァニ、オリヤが彼らが望むときに一緒になるようにするためです。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHubのリポジトリに</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/FreelancerLifeStyle/dynamic_adapt</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ビデオ「に基づいて、</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScriptで複雑なオブジェクトの動的適応//高速適応</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ユーチューブチャンネル」オン「</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">の生命のためのフリーランサー</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">」</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja502012/index.html">Azure for Everyone：入門コース</a></li>
<li><a href="../ja502014/index.html">雇用主：フリーランサーデーを祝おう</a></li>
<li><a href="../ja502018/index.html">モバイルデバイスのセキュリティとそれらの保護ソリューションの開発に関するポッドキャスト</a></li>
<li><a href="../ja502020/index.html">RoadHunters.io-世界中のモーターサイクリストを紹介します</a></li>
<li><a href="../ja502024/index.html">Androidでのクライアントサーバーアプリケーションの宣言型プログラミング。パート2</a></li>
<li><a href="../ja502030/index.html">OracleのWebサービス</a></li>
<li><a href="../ja502034/index.html">Reactの制御および非制御コンポーネントは複雑である必要はありません</a></li>
<li><a href="../ja502038/index.html">アトムを上げる、2.0.1に近づく</a></li>
<li><a href="../ja502040/index.html">句動詞-5について（上/下）</a></li>
<li><a href="../ja502042/index.html">アナリストへのインタビュー-Alexer Sibrikov、AppMetricaのプロダクトマネージャー</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>