<!doctype html>
<html class="no-js" lang="hi">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЫПя╕П ЁЯТГЁЯП┐ ЁЯСйЁЯП╛тАНЁЯдЭтАНЁЯСиЁЯП╜ RangeAmp - рдПрдХ рдирдИ рднреЗрджреНрдпрддрд╛ DDoS рд╣рдорд▓реЛрдВ рдХреЛ рд╣рдЬрд╝рд╛рд░реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкреНрд░рд╡рд░реНрдзрди рдХрд╛рд░рдХ рдХреЗ рд╕рд╛рде рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ тШФя╕П ЁЯШШ тЖкя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЕрднреА рдХреБрдЫ рджрд┐рдиреЛрдВ рдкрд╣рд▓реЗ, рдЪреАрдиреА рд╡реИрдЬреНрдЮрд╛рдирд┐рдХреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдиреЗ рдПрдХ рднреЗрджреНрдпрддрд╛ рдХреА рдЦреЛрдЬ рдХреА рдЬреЛ рдкреНрд░рд╡рд░реНрдзрди рдХреЗ рд╕рд╛рде DDoS рд╣рдорд▓реЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд▓реЗрдЦрдХ 43,000 рдХреЗ рдПрдХ рдХрд╛рд░рдХ рдХреЗ рд╕рд╛рде...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>RangeAmp - рдПрдХ рдирдИ рднреЗрджреНрдпрддрд╛ DDoS рд╣рдорд▓реЛрдВ рдХреЛ рд╣рдЬрд╝рд╛рд░реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкреНрд░рд╡рд░реНрдзрди рдХрд╛рд░рдХ рдХреЗ рд╕рд╛рде рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ddosguard/blog/504228/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрднреА рдХреБрдЫ рджрд┐рдиреЛрдВ рдкрд╣рд▓реЗ, рдЪреАрдиреА рд╡реИрдЬреНрдЮрд╛рдирд┐рдХреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдиреЗ рдПрдХ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рднреЗрджреНрдпрддрд╛ рдХреА </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рдЦреЛрдЬ рдХреА рдЬреЛ</font></a><font style="vertical-align: inherit;"> рдкреНрд░рд╡рд░реНрдзрди рдХреЗ рд╕рд╛рде DDoS рд╣рдорд▓реЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд▓реЗрдЦрдХ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43,000 рдХреЗ</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рдХрд╛рд░рдХ рдХреЗ рд╕рд╛рде рдПрдХ рд╣рдорд▓реЗ рдХреЛ рдЕрдВрдЬрд╛рдо рджреЗрдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣реЗ </font><strong><font style="vertical-align: inherit;">!</font></strong><font style="vertical-align: inherit;"> рдПрдХ рдирдпрд╛ рд╣рдорд▓рд╛ рди рдХреЗрд╡рд▓ рд▓рдХреНрд╖реНрдп рд╡реЗрдм рд╕рд░реНрд╡рд░ рдХреЗ рдЖрдЙрдЯрдЧреЛрдЗрдВрдЧ рдЪреИрдирд▓ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдмрд▓реНрдХрд┐ рд╕реАрдбреАрдПрди рдиреЛрдбреНрд╕ рдХреЗ рдЪреИрдирд▓ рднреА рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЕрдХрд╛рдорд╛рдИ, рдлрд╛рд╕реНрдЯрд▓реА рдФрд░ рдХреНрд▓рд╛рдЙрдбрдлреНрд▓реЗрдпрд░ рд╕рд╣рд┐рдд рд╕рднреА 13 рд╕рдмрд╕реЗ рдмрдбрд╝реЗ рд╕реАрдбреАрдПрди рдкреНрд░рджрд╛рддрд╛рдУрдВ рдореЗрдВ рд╕реЗ 13 рдХрдордЬреЛрд░ рдереЗред рдХрдЯреМрддреА рдХреЗ рддрд╣рдд, рд╣рдорд▓рд╛ рддрдВрддреНрд░ рдФрд░ рд▓реЗрдЦрдХреЛрдВ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдЙрдкрд╛рдпреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред</font></font></p><br>
<p><img src="https://habrastorage.org/webt/77/qk/ko/77qkkofmuznqo1elqpmasginwba.jpeg" alt="рдЕрдВрдЧреВрдард╛"></p><a name="habracut"></a><br>
<p> ,    ,  Range-based Amplification ttack   RangeAmp.     CDN    range request  HTTP,      - .   тАФ    . , ,  Akamai  ~15-30%  -   .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">RFC</a>    range request      ,  CDN    .      .</p><br>
<h1 id="kak-provodilos-issledovanie">  </h1><br>
<p>  13  CDN : Akamai, Alibaba Cloud, Azure, CDN77, CDNsun, CloudямВare, CloudFront, Fastly, G-Core Labs, Huawei Cloud, KeyCDN, StackPath  Tencent Cloud.</p><br>
<p>   -   Linux  c 2.4GHz CPU, 16G DDR  1000 Mbps . </p><br>
<p> -   Apache/2.4.18   .  CDN     .</p><br>
<h1 id="range-request">Range request</h1><br>
<p>  range request      -.                .    ,               . </p><br>
<p>    ,      <em>Range</em>.   ,     .     ,         .     ,      <em>Accept-Ranges</em>   "bytes".</p><br>
<p>   range    CDN  -   <em>Range</em>.     :</p><br>
<ol>
<li>Laziness () тАФ   .</li>
<li>Deletion () тАФ   .</li>
<li>Expansion () тАФ   ,  .</li>
</ol><br>
<p>   CDN   <strong>2</strong>  <strong>3</strong>.  , ,       ,   ,          .</p><br>
<p> ,      ? RFC7233  <strong>, </strong>  <strong> range       </strong>.   , 4  13  CDN   .</p><br>
<p>    ,    тАФ      . ..    ,  !     .</p><br>
<h1 id="ataka-na-kanal-celevogo-servera">    </h1><br>
<p> Deletion  Expansion CDN       ,     ,   CDN      .    .          <em>Range</em>,  CDN         -   .    Small Byte Range Attack  SBR RangeAmp.     DDoS-,         . , ,  ,  ""  CDN, ..,  CDN     .</p><br>
<p><img src="https://habrastorage.org/webt/jc/ze/lx/jczelxturerywpant3iwrff9vpm.png" alt="SBR"></p><br>
<p>  ,     .     25 MB   Akamai  <strong>43000</strong>!</p><br>
<p><img src="https://habrastorage.org/webt/oi/wm/pu/oiwmpuobqsr4lzevyknxyv2tsyg.png" alt="AMP_SBR"></p><br>
<p> 13  CDN     : Akamai, Alibaba Cloud, Azure, CDN77, CDNsun, CloudямВare, CloudFront, Fastly, G-Core Labs, Huawei Cloud, KeyCDN, StackPath  Tencent Cloud.</p><br>
<h1 id="ataka-na-kanaly-cdn">   CDN</h1><br>
<p>   ,       . CDN,         CDN  ,   Frontend CDN  FCDN. CDN,     -,   Backend CDN (.  ).</p><br>
<p><img src="https://habrastorage.org/webt/yk/m-/uu/ykm-uu9mkayv8ecsnqobwzvzq0i.png" alt="OBR"></p><br>
<p> ,    :</p><br>
<ol>
<li>FCDN  Laziness     <em>Range</em> " ".</li>
<li>BCDN  ,       <em>Range</em> .</li>
</ol><br>
<p>,      <strong>n</strong>  ,    BCDN    <strong>n</strong> * (  ).    ,      .        TCP Receive Window,           .</p><br>
<p>,      ,    . ..       <em>Range</em>.</p><br>
<p>,   RFC   ,     , 4 : CloudFlare, CDN77, CDNsun, StackPath.             1KB (, <strong>n тАФ     </strong>):</p><br>
<p><img src="https://habrastorage.org/webt/z1/bo/gy/z1bogy6koxnf4q6py3ogni6gpik.png" alt="AMP_OBR"></p><br>
<h1 id="chto-v-itoge">  ?</h1><br>
<p>           ,     .        -  (SBR RangeAmp),  тАФ    CDN  (OBR RangeAmp)     HTTP/1.1,   HTTP/2.</p><br>
<p>        CDN     RFC.</p><br>
<p>CDN      :</p><br>
<ul>
<li>, ,  RFC7233      .</li>
<li>     <em>Range</em>   Laziness    ,   Expansion,     .</li>
</ul><br>
<p>Source:<br>
CDN BackямБred: AmpliямБcation Attacks Based on HTTP Range Requests, <em>Weizhong Li, Kaiwen Shen, Run Guo, Baojun Liu, Jia Zhang, Haixin Duan, Shuang Hao, Xiarun Chen, Yao Wan.</em></p><br>
<p>      .</p><br>
<h1 id="ps">P.S.</h1><br>
<p>    CloudFlare   ,         ,   ,         . </p><br>
<p>"They thought that the SBR attack relies on constantly triggering a cache-miss and a customer can add a page rule to ignore query strings. But this does not solve the problem fundamentally. The malicious customers and some normal customers will not follow this suggestion. Unfortunately, they wonтАЩt implement our mitigation solutions because CloudямВare does not want to cache partial responses of certain resources."</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi504218/index.html">рдЙрддреНрдкрд╛рджрдХрддрд╛, рдЗрдВрдЯрд░реНрди, рд╡рд░рд┐рд╖реНрда рдФрд░ рд╕рд┐рд▓рд┐рдХреЙрди рд╡реИрд▓реА рдХреА рднрд╛рд╡рдирд╛ рдХрд╛ рдиреБрдХрд╕рд╛рдиред рд░рд┐рдореЛрдЯ рд╡рд░реНрдХ рдкрд░ рдЬреБрдХрд░рдмрд░реНрдЧ рдХрд╛ рд╢рд╛рдирджрд╛рд░ рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░</a></li>
<li><a href="../hi504220/index.html">рд╕рд░реНрд╡рд░ HTTP рд╣реИрдбрд░ рд╕рддреНрдпрд╛рдкрди рд╕реЗрд╡рд╛</a></li>
<li><a href="../hi504222/index.html">рд╣рд╛рдЗрдбреНрд░реЛрдЬрди рд╣рд░ рдЪреАрдЬ рдХрд╛ рдкреНрд░рдореБрдЦ рд╣реИ: рдЬрд╛рдкрд╛рдиреА рд╣реЛрдЯрд▓ рдХреЗ рд▓рд┐рдП рдкреНрд▓рд╛рд╕реНрдЯрд┐рдХ рдХреЗ рдорд▓рдмреЗ рд╕реЗ рдКрд░реНрдЬрд╛ рдХреИрд╕реЗ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИ</a></li>
<li><a href="../hi504224/index.html">рд╣рдо рджреВрд░рд╕реНрде рд╕рд╛рдЗрдЯ рдкрд░ x10 рдХреЗ рднрд╛рд░ рдореЗрдВ рддреЗрдЬ рд╡реГрджреНрдзрд┐ рд╕реЗ рдХреИрд╕реЗ рдмрдЪреЗ рдФрд░ рдирд┐рд╖реНрдХрд░реНрд╖ рдХреНрдпрд╛ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi504226/index.html">рдЬреВрди 2020 рдореЗрдВ рдПрдЪрдЖрд░ рдФрд░ рдЖрдИрдЯреА рд░рд┐рдХреНрд░реВрдЯрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдЗрд╡реЗрдВрдЯреНрд╕ рдбрд╛рдЗрдЬреЗрд╕реНрдЯ</a></li>
<li><a href="../hi504230/index.html">NextDNS рдмреАрдЯрд╛ рд╕реЗ рдмрд╛рд╣рд░ - рдЧреЛрдкрдиреАрдпрддрд╛ рд╕реБрд░рдХреНрд╖рд╛, рд░рд╛рдЬреНрдп рд╕реЗрдВрд╕рд░рд╢рд┐рдк рдХреА рдкрд░рд┐рдзрд┐ рдФрд░ рдкреВрд░реЗ рдШрд░реЗрд▓реВ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд▓рд┐рдП рд╡рд┐рдЬреНрдЮрд╛рдкрди рдЕрд╡рд░реБрджреНрдз</a></li>
<li><a href="../hi504232/index.html">рдПрдХ рдЗрдВрдЬреАрдирд┐рдпрд░ рдХреИрд╕реЗ рдЯреЗрдХрд▓рд┐рдбрд╛ рдореЗрдВ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддрд╛ рд╣реИ</a></li>
<li><a href="../hi504236/index.html">рдбреЙрдХреНрдпреВ рдЫрд╡рд┐ рдХреЛ рдбреЙрдХреНрдпреВ рдХреЛ рдПрдВрдмрд┐рдмрд▓ рдХреЗ рд╕рд╛рде рддреИрдирд╛рдд рдХрд░реЗрдВ</a></li>
<li><a href="../hi504240/index.html">рднрд╛рдЧ 6. рдХреИрд░рд┐рдпрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ред рдЦреБрдж рдХрд╛ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк</a></li>
<li><a href="../hi504242/index.html">рд╕рд╛рдорд╛рдиреНрдп рдпреЛрдЬрдирд╛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>