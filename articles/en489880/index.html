<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•¢ üëàüèæ ‚ö™Ô∏è Code review - improving the process üßõüèª üö£üèΩ üëãüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine a team where Code review is not conducted. Developers write code, and without checking make all the changes to the main branch. After a while,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Code review - improving the process</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/489880/"><img src="https://habrastorage.org/webt/sp/0-/-o/sp0--oxfpaybg7u2tha-n6p4mcg.jpeg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imagine a team where Code review is not conducted. </font><font style="vertical-align: inherit;">Developers write code, and without checking make all the changes to the main branch. </font><font style="vertical-align: inherit;">After a while, the functionality expands or bugs are found, they return to the source code, and there all the variables are named with one letter, there is no following the architecture, and the quality is not the best. </font><font style="vertical-align: inherit;">This poor-quality code will accumulate and one day the moment will come when, with any little innovation, the project will begin to fall apart: in the best case, the development time will increase, in the worst, the project support will become impossible. </font><font style="vertical-align: inherit;">And this despite the fact that once upon a time the task was completed and everything worked well. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
How can this be avoided?</font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The answer to the question in the title is Code review.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code review is a code check for errors that improves the stability and quality of the code.</font></font><br>
<br>
</blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now imagine a team where Code review is already underway, but in the process the developers swear among themselves, Pull request is not approved for a long time, tasks begin to freeze. </font><font style="vertical-align: inherit;">The process from the beginning of the task to its appearance in the project is stretched, and with it all work is slowed down.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pull request / Merge request is a request to the project team (person or group of people) for approval and application of changes to the selected branch. </font><font style="vertical-align: inherit;">As soon as the Pull request is created, a discussion of the written code takes place before approval. </font><font style="vertical-align: inherit;">Changes may be suggested during the discussion. </font><font style="vertical-align: inherit;">After approval, the current changes fall into the selected branch.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listed below are recommendations to help speed up Code review and improve its quality. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We divide the question into three parts and consider each separately:</font></font><br>
 <br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Technical part: how to check the code and what to look for when checking? </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Communication part: how to prevent disputes and reduce stress during the discussion?</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organizational part: what can be done to make the Code review process efficient?</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 1. Checking the code</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run the author code at home</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Run the code on your own and see how the changes work in conjunction with the rest of the code. </font><font style="vertical-align: inherit;">This helps to find problem areas that are not visible in the web-based interface. </font><font style="vertical-align: inherit;">Try to see the code comprehensively, avoid focusing only on local changes. </font><font style="vertical-align: inherit;">So you will quickly figure out the code and quickly find architectural inaccuracies, if any.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remember user experience</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pay attention to how changes in the code will affect the end user. </font><font style="vertical-align: inherit;">Even the most beautifully written code can be useless for users, which will lead to additional tasks, bugs, and can also strike a blow at the reputation of the company and the product.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We look at the general logic</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Developers can successfully solve their problem, but break the work of other pieces of code. </font><font style="vertical-align: inherit;">To prevent this from happening, look not only at how a specific task is being solved, but also at how changes will affect the work of other services, modules and the entire project as a whole.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We look at the code architecture</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The architecture of the code determines how much time in the future we will spend on expanding, adding functionality or editing a bug. </font><font style="vertical-align: inherit;">Also, the architecture of the code can affect the potential appearance of bugs in case of changes in the project. </font><font style="vertical-align: inherit;">Ideally, expanding and adding new functionality should not lead to refactoring.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We write easier</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pay attention to the code re-complication: the simpler the code, the easier it is to read and easier to maintain. </font><font style="vertical-align: inherit;">Get rid of complex pieces of code.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multithreading</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If the project implies work in several threads, then see what happens if there is a delay during the execution of the code in one of the threads, and how such cases are worked out.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excessive optimization</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As classic Donald Knuth wrote, premature optimization is the root of all evil. </font><font style="vertical-align: inherit;">It‚Äôs better to optimize only what is needed here and now.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We work out errors</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pay attention to how the project will behave if it was not possible to execute a line of code, a block of code or a request to the server. </font><font style="vertical-align: inherit;">Often, developers interrupt the execution of a function without error output, but such cases need to be worked out.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compliance</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The code must comply with the agreement, the code style. </font><font style="vertical-align: inherit;">The uniformity of the code is not a whim, but a necessity: such a code is easier to maintain, and it is easier to understand this code.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Names and appearance</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remember other programmers who will have to understand your code. </font><font style="vertical-align: inherit;">Readable code simplifies its further support. </font><font style="vertical-align: inherit;">Names must be understandable and accurately describe the class, object, function, etc.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Code Comments</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comments should answer the question: ‚Äúwhy is this done?‚Äù, And not ‚Äúhow is this done?‚Äù. </font><font style="vertical-align: inherit;">Remember this.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 2. We discuss</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The main rule of discussion: any comment should be aimed at the code, and not at the person who wrote it. </font><font style="vertical-align: inherit;">It works in the opposite direction - do not take comments as criticism of you personally. </font><font style="vertical-align: inherit;">The task of code review is to make your code better, because what you have not noticed may be noticed by others. </font><font style="vertical-align: inherit;">Colleagues can propose alternative solutions, and this is the potential for professional growth. </font><font style="vertical-align: inherit;">It is important to remember that the discussion of the code is not a contest in wit or a show of ‚Äúwho knows more‚Äù, therefore sarcasm, hidden aggression and rudeness are inappropriate in it.</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a rule, pull request is carried out on special web hosting services (github.com, bitbucket.org, gitlab.com, etc.), where it is possible to view the changes and leave a comment on a specific piece of code.</font></font></blockquote><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We comply with the agreement</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Again, the code must comply with the agreement. </font><font style="vertical-align: inherit;">However, if such an agreement does not exist, you should not ask a colleague to add a space or indent in the code. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In controversial moments, you can agree with the whole team right in the code review process, but asking to follow these rules is better at the following code review, so it will be easier for everyone to accept them. </font><font style="vertical-align: inherit;">By the way, a documented guideline in writing style removes almost all disputes.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We offer an alternative</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avoid statements like ‚Äúyou did wrong ...‚Äù, ‚Äúwhy, why do you write like that?‚Äù </font><font style="vertical-align: inherit;">and others. They are perceived as criticism and lead to excuses. </font><font style="vertical-align: inherit;">It is better to write a comment about the content of the code, without resorting to the identity of the author. </font><font style="vertical-align: inherit;">Also try to avoid orders and coercion: people do not like when someone orders them, and perceive such comments negatively. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can proceed as follows:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We write what is wrong with the code </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why is it better not to write</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We offer alternative options</font></font></li>
</ol><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We remain within the framework of the problem</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Often you can see comments on the code that was before and did not touch. </font><font style="vertical-align: inherit;">No need to comment on what is not relevant to the task. </font><font style="vertical-align: inherit;">Any third-party edits can take a lot of time, and can be perceived negatively, so it‚Äôs better to look at how a person completed the current task, and not ask him to refactor the project.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praise</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If you see an interesting or cool solution, feel free to give praise. </font><font style="vertical-align: inherit;">In addition, it is a great motivation for your colleagues to continue to write good code in the future.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All comments are equal.</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It often happens that one programmer technically knows more than the other, as evidenced by the gradation of junior, middle, senior, team lead. </font><font style="vertical-align: inherit;">It is not worth highlighting the comments of one group as more important. </font><font style="vertical-align: inherit;">This devalues ‚Äã‚Äãthe opinion of some developers, which can lead to indifference and formal participation in code review. </font><font style="vertical-align: inherit;">When everyone's opinions are equally important, code review is more productive.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clearly express your thoughts</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
For productive communication, write as detailed as possible and explain every detail. </font><font style="vertical-align: inherit;">Everyone has a different level of knowledge, and so far no one has learned to read minds.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asking questions</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Feel free to ask your colleagues why their proposed option is better than your current one. </font><font style="vertical-align: inherit;">This is a great opportunity to learn something new and grow professionally.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We resolve conflicts</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It happens that a person does not accept all the arguments and cannot offer his own, refuses to do something. </font><font style="vertical-align: inherit;">A few practical tips for this case:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Most conflict situations can be resolved by speaking in person, in a friendly tone. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can concede, since you cannot write code while you are at war.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can attract the whole team and decide together how best to write the code.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the current code review, leave everything as it is, and make the controversial issues separate tasks for refactoring, tasks, because the words ‚Äúthen fix‚Äù, as a rule, never come to life.</font></font></li>
</ul><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part 3. Improving the process</font></font></h2><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We describe what they did</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
We describe the essence of the task in the pull request header (or make a separate comment) and what steps have been taken to complete it. </font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Divide the pull request into parts</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A large chunk will be watched for a long time, discussed for a long time and corrected for a long time. </font><font style="vertical-align: inherit;">Divide the code into small logical parts - this way the process will go much faster.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Reply to all comments</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It is advisable to respond to each comment so that the team does not have any ambiguities. </font><font style="vertical-align: inherit;">Other developers should understand that you read their comment, did the necessary work, and made corrections. </font><font style="vertical-align: inherit;">Constantly opening a pull request and looking at what has been fixed and what is not is very inconvenient and time-consuming.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Search all?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There are different approaches - to look for the maximum out of the possible or first to comment on important architectural moments, and after correction, pay attention to the little things. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Both methods have the right to life. </font><font style="vertical-align: inherit;">I believe that the second option is more time-consuming: imagine that after the correction you need to fully review the code again, comment and wait for the corrections again. </font><font style="vertical-align: inherit;">It‚Äôs much faster to carefully go through the code once, leave comments and then check the corrections. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there are architectural inaccuracies and it is clear that minor errors themselves will disappear after fixing the architecture, you should not waste time commenting on details in this section of the code.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Waiting for everyone?</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can not wait until everyone approves the pull request and agree that the approval of 80% of the reviewers is enough to close the task. </font><font style="vertical-align: inherit;">This will speed up code getting into the main branch, which is undoubtedly more beneficial for business processes, but can lead to disagreement in the team and indifference to code review. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The second option is to wait for the approval of all involved developers. </font><font style="vertical-align: inherit;">The quality of the code will increase, but the process itself will slow down significantly. </font><font style="vertical-align: inherit;">The choice in favor of speed or quality, each team should make their own.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Little things</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
If there are no serious comments on the code, then you do not need to wait until all small inaccuracies are removed. </font><font style="vertical-align: inherit;">They can be indicated in the comments and immediately approve the pull request - the author of the code will feel calmer, his loyalty to the team will increase, he will feel that he is trusted. </font><font style="vertical-align: inherit;">And, of course, the speed of pull request will increase.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Code review is an important part of the development process, which affects the project as a whole, so it is dangerous to ignore it. </font><font style="vertical-align: inherit;">Some of these recommendations will help speed up code review, some of them will make it better. </font><font style="vertical-align: inherit;">I hope my experience and knowledge will be useful to readers of this article.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en489870/index.html">Free offline intensive by Node.js in Nizhny Novgorod</a></li>
<li><a href="../en489872/index.html">How the DLP system and the OCR module prevented employees from falsifying passport scans</a></li>
<li><a href="../en489874/index.html">Cross compiling Rust for Windows executables from Linux</a></li>
<li><a href="../en489876/index.html">How we solved the problem of three monoliths</a></li>
<li><a href="../en489878/index.html">How to help find an organization and not spend a week on it</a></li>
<li><a href="../en489882/index.html">Reducing the response time when transmitting data over UDP</a></li>
<li><a href="../en489884/index.html">Cross-platform OpenCV optimizations</a></li>
<li><a href="../en489886/index.html">We analyze the resume of lawyers on hh.ru without api</a></li>
<li><a href="../en489888/index.html">Generate URLs with parameters on the knee and best practice</a></li>
<li><a href="../en489892/index.html">How we at Luxoft built internal IT communities</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>