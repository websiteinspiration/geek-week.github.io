<!doctype html>
<html class="no-js" lang="es">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé¶ ‚óæÔ∏è üëêüèæ Mec√°nica del lenguaje de pilas y punteros. üë©üèΩ‚Äçüé§ üíå üõèÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preludio
 Este es el primero de cuatro art√≠culos de la serie que proporcionar√° informaci√≥n sobre la mec√°nica y el dise√±o de punteros, pilas, montones,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Mec√°nica del lenguaje de pilas y punteros.</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/496846/"><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Preludio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Este es el primero de cuatro art√≠culos de la serie que proporcionar√° informaci√≥n sobre la mec√°nica y el dise√±o de punteros, pilas, montones, an√°lisis de escape y sem√°ntica de Go / puntero. </font><font style="vertical-align: inherit;">Esta publicaci√≥n trata sobre pilas y punteros. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tabla de contenido:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mec√°nica del lenguaje en pilas y punteros</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mec√°nica del lenguaje en el an√°lisis de escape</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traducci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mec√°nica del lenguaje en perfiles de memoria</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filosof√≠a de dise√±o sobre datos y sem√°ntica</font></font></a></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Introducci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No voy a disimular, los punteros son dif√≠ciles de entender. </font><font style="vertical-align: inherit;">Si se usa incorrectamente, los punteros pueden causar errores desagradables e incluso problemas de rendimiento. </font><font style="vertical-align: inherit;">Esto es especialmente cierto cuando se escriben programas competitivos o multiproceso. </font><font style="vertical-align: inherit;">No es sorprendente que muchos idiomas intenten ocultar los punteros de los programadores. </font><font style="vertical-align: inherit;">Sin embargo, si escribe en Go, no puede escapar de los punteros. </font><font style="vertical-align: inherit;">Sin una comprensi√≥n clara de los punteros, ser√° dif√≠cil para usted escribir c√≥digo limpio, simple y eficiente.</font></font><br>
<a name="habracut"></a><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bordes del marco</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las funciones se realizan dentro de los l√≠mites de los marcos que proporcionan un espacio de memoria separado para cada funci√≥n correspondiente. Cada marco permite que la funci√≥n funcione en su propio contexto, y tambi√©n proporciona control de flujo. Una funci√≥n tiene acceso directo a la memoria dentro de su marco a trav√©s de un puntero, pero el acceso a la memoria fuera del marco requiere acceso indirecto. Para que una funci√≥n acceda a la memoria fuera de su marco, esta memoria debe usarse junto con esta funci√≥n. La mec√°nica y las limitaciones establecidas por estos l√≠mites deben entenderse y estudiarse primero.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se llama a una funci√≥n, se produce una transici√≥n entre dos cuadros. El c√≥digo va del marco de la funci√≥n de llamada al marco de la funci√≥n llamada. Si se necesitan los datos para llamar a la funci√≥n, estos datos deben transferirse de una trama a otra. La transferencia de datos entre dos cuadros en Go se realiza "por valor". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La ventaja de la transmisi√≥n de datos "por valor" es la legibilidad. El valor que ve en la llamada de funci√≥n es lo que se copia y acepta en el otro lado. Es por eso que asocio "pasar por valor" con WYSIWYG, porque lo que ves es lo que obtienes. Todo esto le permite escribir c√≥digo que no oculta el costo de cambiar entre dos funciones. Esto ayuda a mantener un buen modelo mental de c√≥mo cada llamada de funci√≥n afectar√° el programa durante la transici√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mire este peque√±o programa que llama a una funci√≥n pasando datos enteros "por valor": </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 1:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">01</span> <span class="hljs-keyword">package</span> main
<span class="hljs-number">02</span>
<span class="hljs-number">03</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
<span class="hljs-number">04</span>
<span class="hljs-number">05</span>    <span class="hljs-comment">// Declare variable of type int with a value of 10.</span>
<span class="hljs-number">06</span>    count := <span class="hljs-number">10</span>
<span class="hljs-number">07</span>
<span class="hljs-number">08</span>    <span class="hljs-comment">// Display the "value of" and "address of" count.</span>
<span class="hljs-number">09</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"count:\tValue Of["</span>, count, <span class="hljs-string">"]\tAddr Of["</span>, &amp;count, <span class="hljs-string">"]"</span>)
<span class="hljs-number">10</span>
<span class="hljs-number">11</span>    <span class="hljs-comment">// Pass the "value of" the count.</span>
<span class="hljs-number">12</span>    increment(count)
<span class="hljs-number">13</span>
<span class="hljs-number">14</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"count:\tValue Of["</span>, count, <span class="hljs-string">"]\tAddr Of["</span>, &amp;count, <span class="hljs-string">"]"</span>)
<span class="hljs-number">15</span> }
<span class="hljs-number">16</span>
<span class="hljs-number">17</span> <span class="hljs-comment">//go:noinline</span>
<span class="hljs-number">18</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">increment</span><span class="hljs-params">(inc <span class="hljs-keyword">int</span>)</span></span> {
<span class="hljs-number">19</span>
<span class="hljs-number">20</span>    <span class="hljs-comment">// Increment the "value of" inc.</span>
<span class="hljs-number">21</span>    inc++
<span class="hljs-number">22</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"inc:\tValue Of["</span>, inc, <span class="hljs-string">"]\tAddr Of["</span>, &amp;inc, <span class="hljs-string">"]"</span>)
<span class="hljs-number">23</span> }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cuando se inicia el programa Go, el tiempo de ejecuci√≥n crea la rutina principal para comenzar a ejecutar todo el c√≥digo, incluido el c√≥digo dentro de la funci√≥n principal. Gorutin es la ruta de ejecuci√≥n que encaja en el hilo del sistema operativo, que finalmente se ejecuta en alg√∫n n√∫cleo. A partir de la versi√≥n 1.8, cada rutina se proporciona con un bloque inicial de memoria continua de 2048 bytes de tama√±o, que forma el espacio de la pila. Este tama√±o de pila inicial ha cambiado con los a√±os y puede cambiar en el futuro. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pila es importante porque proporciona espacio de memoria f√≠sica para los l√≠mites de trama que se asignan a cada funci√≥n individual. Para cuando la rutina principal realice la funci√≥n principal en el Listado 1, la pila de programas (en un nivel muy alto) se ver√° as√≠: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 1:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/z4/7w/l0/z47wl0tm16nh5u-gf8u9m0kemba.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la Figura 1, puede ver que parte de la pila estaba "enmarcada" para la funci√≥n principal. </font><font style="vertical-align: inherit;">Esta secci√≥n se llama " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">marco de pila</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", y es este marco el que denota el l√≠mite de la funci√≥n principal en la pila. </font><font style="vertical-align: inherit;">El marco se establece como parte del c√≥digo que se ejecuta cuando se llama a la funci√≥n. </font><font style="vertical-align: inherit;">Tambi√©n puede ver que la memoria para la variable de recuento se asign√≥ a 0x10429fa4 dentro del marco para main. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay otro punto interesante, ilustrado en la Figura 1. Toda la memoria de la pila bajo el marco activo no es v√°lida, pero la memoria del marco activo y superior es v√°lida. </font><font style="vertical-align: inherit;">Debe comprender claramente el l√≠mite entre la parte v√°lida e inv√°lida de la pila.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direcciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las variables se utilizan para asignar un nombre a una celda de memoria espec√≠fica para mejorar la legibilidad del c√≥digo y ayudarlo a comprender con qu√© datos est√° trabajando. </font><font style="vertical-align: inherit;">Si tiene una variable, entonces tiene un valor en la memoria, y si tiene un valor en la memoria, entonces debe tener una direcci√≥n. </font><font style="vertical-align: inherit;">En la l√≠nea 09, la funci√≥n principal llama a la funci√≥n println incorporada para mostrar el "valor" y la "direcci√≥n" de la variable de conteo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 2:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">09</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"count:\tValue Of["</span>, count, <span class="hljs-string">"]\tAddr Of["</span>, &amp;count, <span class="hljs-string">"]"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Usar el signo "&amp;" para obtener la direcci√≥n de la ubicaci√≥n de una variable no es nuevo, otros idiomas tambi√©n usan este operador. </font><font style="vertical-align: inherit;">La salida de la l√≠nea 09 deber√≠a verse como la salida a continuaci√≥n si est√° ejecutando c√≥digo en una arquitectura de 32 bits como Go Playground: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 3:</font></font><br>
<br>
<pre><code class="go hljs">count:  Value Of[ <span class="hljs-number">10</span> ]  Addr Of[ <span class="hljs-number">0x10429fa4</span> ]</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llamada de funci√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego, en la l√≠nea 12, la funci√≥n principal llama a la funci√≥n de incremento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 4:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">12</span>    increment(count)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hacer una llamada de funci√≥n significa que el programa debe crear una nueva secci√≥n de memoria en la pila. Sin embargo, todo es un poco m√°s complicado. Para completar con √©xito una llamada de funci√≥n, se espera que los datos se transfieran a trav√©s del l√≠mite del marco y se coloquen en un nuevo marco durante la transici√≥n. En particular, se espera copiar y transmitir un valor entero durante la llamada. Puede ver este requisito mirando la declaraci√≥n de la funci√≥n de incremento en la l√≠nea 18. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 5:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">18</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">increment</span><span class="hljs-params">(inc <span class="hljs-keyword">int</span>)</span></span> {</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vuelve a mirar la llamada a la funci√≥n de incremento en la l√≠nea 12, ver√° que el c√≥digo pasa el "valor" de la cuenta variable. Este valor se copiar√°, transferir√° y colocar√° en un nuevo marco para la funci√≥n de incremento. Recuerde que la funci√≥n de incremento solo puede leer y escribir en la memoria en su propio marco, por lo que necesita la variable inc para obtener, almacenar y acceder a su propia copia del valor del contador transmitido. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Justo antes de que el c√≥digo dentro de la funci√≥n de incremento comience a ejecutarse, la pila de programas (a un nivel muy alto) se ver√° as√≠: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 2:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/2g/jw/n9/2gjwn96mbhikaxys6ftv3cf4s14.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede ver que ahora hay dos cuadros en la pila: uno para el principal y otro para el incremento. </font><font style="vertical-align: inherit;">Dentro del marco para el incremento, puede ver la variable inc que contiene el valor 10, que se copi√≥ y pas√≥ durante la llamada a la funci√≥n. </font><font style="vertical-align: inherit;">La direcci√≥n variable inc es 0x10429f98, y est√° menos en la memoria porque los marcos se insertan en la pila, que son solo detalles de implementaci√≥n que no significan nada. </font><font style="vertical-align: inherit;">Lo importante es que el programa recuper√≥ el valor de conteo del marco para main y coloc√≥ una copia de este valor en el marco para aumentar usando la variable inc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El resto del c√≥digo dentro del incremento incrementa y muestra el "valor" y la "direcci√≥n" de la variable inc. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 6:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">21</span>    inc++
<span class="hljs-number">22</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"inc:\tValue Of["</span>, inc, <span class="hljs-string">"]\tAddr Of["</span>, &amp;inc, <span class="hljs-string">"]"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La salida de la l√≠nea 22 en el patio de recreo deber√≠a verse as√≠: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 7:</font></font><br>
<br>
<pre><code class="go hljs">inc:    Value Of[ <span class="hljs-number">11</span> ]  Addr Of[ <span class="hljs-number">0x10429f98</span> ]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ es como se ve la pila despu√©s de ejecutar las mismas l√≠neas de c√≥digo: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 3: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/59/1o/kv/591okvkseze5gjqum4k8hp-qv34.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Despu√©s de ejecutar las l√≠neas 21 y 22, la funci√≥n de incremento finaliza y devuelve el control a la funci√≥n principal. </font><font style="vertical-align: inherit;">Luego, la funci√≥n principal muestra nuevamente el "valor" y la "direcci√≥n" del recuento de variables locales en la l√≠nea 14. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 8:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">14</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"count:\tValue Of["</span>,count, <span class="hljs-string">"]\tAddr Of["</span>, &amp;count, <span class="hljs-string">"]"</span>)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La salida completa del programa en el patio de recreo deber√≠a verse as√≠: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 9:</font></font><br>
<br>
<pre><code class="go hljs">count:  Value Of[ <span class="hljs-number">10</span> ]  Addr Of[ <span class="hljs-number">0x10429fa4</span> ]<font></font>
inc:    Value Of[ <span class="hljs-number">11</span> ]  Addr Of[ <span class="hljs-number">0x10429f98</span> ]<font></font>
count:  Value Of[ <span class="hljs-number">10</span> ]  Addr Of[ <span class="hljs-number">0x10429fa4</span> ]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El valor de recuento en el marco para main es el mismo antes y despu√©s de la llamada al incremento.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regreso de funciones</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© le sucede realmente a la memoria en la pila cuando la funci√≥n sale y el control vuelve a la funci√≥n de llamada? La respuesta corta es nada. As√≠ es como se ve la pila despu√©s de que regresa la funci√≥n de incremento: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 4: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/ve/-n/qqve-nygmg0jnhsnwrubpchwfky.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La pila se ve exactamente igual que en la Figura 3, excepto que el marco asociado con la funci√≥n de incremento ahora se considera memoria no v√°lida. Esto se debe a que el marco para main ahora est√° activo. La memoria creada para la funci√≥n de incremento ha permanecido intacta.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Borrar el marco de memoria de la funci√≥n de retorno ser√° una p√©rdida de tiempo, porque no se sabe si esta memoria volver√° a ser necesaria alguna vez. </font><font style="vertical-align: inherit;">Entonces el recuerdo permaneci√≥ como estaba. </font><font style="vertical-align: inherit;">Durante cada llamada de funci√≥n, cuando se toma un marco, se borra la memoria de la pila para este marco. </font><font style="vertical-align: inherit;">Esto se realiza inicializando cualquier valor que se ajuste al marco. </font><font style="vertical-align: inherit;">Como todos los valores se inicializan como su "valor cero", las pilas se borran correctamente con cada llamada a la funci√≥n.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compartir valor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQu√© pasar√≠a si fuera importante para la funci√≥n de incremento trabajar directamente con la variable de conteo que existe dentro del marco para main? </font><font style="vertical-align: inherit;">Aqu√≠ es donde llega el momento de los punteros. </font><font style="vertical-align: inherit;">Los punteros tienen un prop√≥sito: compartir un valor con una funci√≥n para que la funci√≥n pueda leer y escribir este valor, incluso si el valor no existe directamente dentro de su marco. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si no cree que necesita "compartir" el valor, entonces no necesita usar un puntero. </font><font style="vertical-align: inherit;">Al aprender punteros, es importante pensar que usar un diccionario limpio, no operadores o sintaxis. </font><font style="vertical-align: inherit;">Recuerde que los punteros est√°n destinados a ser compartidos y cuando lea el c√≥digo, reemplace el operador &amp; con la frase "compartir".</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipos de punteros</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para cada tipo que declar√≥, o que fue declarado directamente por el propio lenguaje, obtendr√° un tipo de puntero gratuito que puede usar para compartir. Ya hay un tipo incorporado llamado int, por lo que hay un tipo de puntero llamado * int. Si declara un tipo llamado Usuario, obtendr√° un tipo de puntero llamado * Usuario de forma gratuita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todos los tipos de punteros tienen dos caracter√≠sticas id√©nticas. Primero, comienzan con el car√°cter *. En segundo lugar, todos tienen el mismo tama√±o en memoria y una representaci√≥n que ocupa 4 u 8 bytes que representan la direcci√≥n. En arquitecturas de 32 bits (por ejemplo, en el patio de recreo), los punteros requieren 4 bytes de memoria, y en arquitecturas de 64 bits (por ejemplo, su computadora) requieren 8 bytes de memoria. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la especificaci√≥n, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tipos de puntero</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se consideran </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">literales de tipo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , lo que significa que son tipos sin nombre formados por un tipo existente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acceso indirecto a memoria</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mire este peque√±o programa que realiza una llamada a la funci√≥n, pasando la direcci√≥n "por valor". </font><font style="vertical-align: inherit;">Esto dividir√° la variable de conteo del marco de la pila de main con la funci√≥n de incremento: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 10:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">01</span> <span class="hljs-keyword">package</span> main
<span class="hljs-number">02</span>
<span class="hljs-number">03</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
<span class="hljs-number">04</span>
<span class="hljs-number">05</span>    <span class="hljs-comment">// Declare variable of type int with a value of 10.</span>
<span class="hljs-number">06</span>    count := <span class="hljs-number">10</span>
<span class="hljs-number">07</span>
<span class="hljs-number">08</span>    <span class="hljs-comment">// Display the "value of" and "address of" count.</span>
<span class="hljs-number">09</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"count:\tValue Of["</span>, count, <span class="hljs-string">"]\t\tAddr Of["</span>, &amp;count, <span class="hljs-string">"]"</span>)
<span class="hljs-number">10</span>
<span class="hljs-number">11</span>    <span class="hljs-comment">// Pass the "address of" count.</span>
<span class="hljs-number">12</span>    increment(&amp;count)
<span class="hljs-number">13</span>
<span class="hljs-number">14</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"count:\tValue Of["</span>, count, <span class="hljs-string">"]\t\tAddr Of["</span>, &amp;count, <span class="hljs-string">"]"</span>)
<span class="hljs-number">15</span> }
<span class="hljs-number">16</span>
<span class="hljs-number">17</span> <span class="hljs-comment">//go:noinline</span>
<span class="hljs-number">18</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">increment</span><span class="hljs-params">(inc *<span class="hljs-keyword">int</span>)</span></span> {
<span class="hljs-number">19</span>
<span class="hljs-number">20</span>    <span class="hljs-comment">// Increment the "value of" count that the "pointer points to". (dereferencing)</span>
<span class="hljs-number">21</span>    *inc++
<span class="hljs-number">22</span>    <span class="hljs-built_in">println</span>(<span class="hljs-string">"inc:\tValue Of["</span>, inc, <span class="hljs-string">"]\tAddr Of["</span>, &amp;inc, <span class="hljs-string">"]\tValue Points To["</span>, *inc, <span class="hljs-string">"]"</span>)
<span class="hljs-number">23</span> }</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se hicieron tres cambios interesantes al programa original. </font><font style="vertical-align: inherit;">El primer cambio est√° en la l√≠nea 12: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 11:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">12</span>    increment(&amp;count)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vez, en la l√≠nea 12, el c√≥digo no copia y pasa el "valor" a la variable de conteo, sino que pasa su "direcci√≥n" en lugar de la variable de conteo. Ahora puede decir: "Estoy compartiendo" el recuento de variables con el incremento de la funci√≥n. Esto es lo que dice el operador &amp;: "compartir". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comprenda que esto sigue siendo "pasar por valor", y la √∫nica diferencia es que el valor que pasa es la direcci√≥n, no el n√∫mero entero. Las direcciones tambi√©n son valores; Esto es lo que se copia y se pasa a trav√©s del borde del marco para llamar a la funci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que el valor de la direcci√≥n se copia y se pasa, necesita una variable dentro del marco de incremento para obtener y guardar esta direcci√≥n entera. Una declaraci√≥n de variable de puntero entero est√° en la l√≠nea 18. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 12:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">18</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">increment</span><span class="hljs-params">(inc *<span class="hljs-keyword">int</span>)</span></span> {</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si pas√≥ la direcci√≥n del valor de tipo Usuario, la variable deber√≠a declararse como * Usuario. A pesar de que todas las variables de puntero almacenan valores de direcci√≥n, no se les puede pasar ninguna direcci√≥n, solo direcciones asociadas con el tipo de puntero. El principio b√°sico de compartir un valor es que la funci√≥n receptora debe leer o escribir en ese valor. Necesita informaci√≥n sobre el tipo de cualquier valor para leer y escribir en √©l. El compilador se asegurar√° de que solo los valores asociados con el tipo de puntero correcto se utilicen con esta funci√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As√≠ es como se ve la pila despu√©s de llamar a la funci√≥n de incremento: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 5:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/uk/ak/zj/ukakzj1mpr_9m3thjmv2i04e_hw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La Figura 5 muestra el aspecto de la pila cuando se realiza "pasar por valor" utilizando la direcci√≥n como valor. La variable de puntero dentro del marco para la funci√≥n de incremento ahora apunta a la variable de conteo, que se encuentra dentro del marco para main. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora, usando la variable de puntero, la funci√≥n puede realizar una operaci√≥n indirecta de lectura y cambio para la variable de conteo ubicada dentro del marco para main. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 13:</font></font><br>
<br>
<pre><code class="go hljs"><span class="hljs-number">21</span>    *inc++</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta vez, el car√°cter * act√∫a como operador y se aplica a la variable de puntero. Usar * como operador significa "el valor al que apunta el puntero". Una variable de puntero proporciona acceso indirecto a la memoria fuera del marco de la funci√≥n que la utiliza. A veces, esta lectura o escritura indirecta se llama desreferencia de puntero. La funci√≥n de incremento a√∫n necesita tener una variable de puntero en su marco, que puede leer directamente para realizar un acceso indirecto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La Figura 6 muestra c√≥mo se ve la pila despu√©s de la l√≠nea 21. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 6: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rn/ph/vi/rnphvi1x69rrhspljslmvxilauq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ est√° el resultado final de este programa: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Listado 14:</font></font><br>
<br>
<pre><code class="go hljs">count:  Value Of[ <span class="hljs-number">10</span> ]              Addr Of[ <span class="hljs-number">0x10429fa4</span> ]<font></font>
inc:    Value Of[ <span class="hljs-number">0x10429fa4</span> ]      Addr Of[ <span class="hljs-number">0x10429f98</span> ]   Value Points To[ <span class="hljs-number">11</span> ]<font></font>
count:  Value Of[ <span class="hljs-number">11</span> ]              Addr Of[ <span class="hljs-number">0x10429fa4</span> ]</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puede observar que el "valor" de la variable de puntero inc coincide con la "direcci√≥n" de la variable de conteo. </font><font style="vertical-align: inherit;">Esto establece una relaci√≥n de intercambio que permite el acceso indirecto a la memoria fuera del marco. </font><font style="vertical-align: inherit;">Tan pronto como la funci√≥n de incremento escribe a trav√©s del puntero, el cambio es visible para la funci√≥n principal cuando se le devuelve el control.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las variables de puntero no son especiales</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las variables de puntero no son especiales porque son las mismas variables que cualquier otra variable. </font><font style="vertical-align: inherit;">Tienen una asignaci√≥n de memoria y contienen significado. </font><font style="vertical-align: inherit;">Dio la casualidad de que todas las variables de puntero, independientemente del tipo de valor al que puedan apuntar, siempre tienen el mismo tama√±o y presentaci√≥n. </font><font style="vertical-align: inherit;">Lo que puede ser confuso es que el car√°cter * act√∫a como un operador dentro del c√≥digo y se usa para declarar un tipo de puntero. </font><font style="vertical-align: inherit;">Si puede distinguir una declaraci√≥n de tipo de una operaci√≥n de puntero, esto puede ayudar a eliminar cierta confusi√≥n.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusi√≥n</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esta publicaci√≥n describe el prop√≥sito de los punteros, el funcionamiento de la pila y la mec√°nica de los punteros en Go. </font><font style="vertical-align: inherit;">Este es el primer paso para comprender la mec√°nica, los principios de dise√±o y las t√©cnicas de uso necesarias para escribir c√≥digo coherente y legible. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al final, esto es lo que aprendiste:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las funciones se realizan dentro de los l√≠mites del marco, que proporcionan un espacio de memoria separado para cada funci√≥n correspondiente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando se llama a una funci√≥n, se produce una transici√≥n entre dos cuadros.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La ventaja de la transmisi√≥n de datos "por valor" es la legibilidad.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La pila es importante porque proporciona espacio de memoria f√≠sica para los l√≠mites de trama que se asignan a cada funci√≥n individual.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Toda la memoria de la pila debajo del marco activo no es v√°lida, pero la memoria del marco activo y superior es v√°lida.</font></font></li>
<li>   ,         .</li>
<li>    ,   ,      .</li>
<li>    ‚Äî    ,        ,         .</li>
<li>   ,  ,   ,     ,      .</li>
<li>-          ,   .</li>
<li>-   - ,      ,     .     ,    .</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es496832/index.html">Recorrido fotogr√°fico: ¬øqu√© est√°n haciendo en el laboratorio de nanofot√≥nica h√≠brida y optoelectr√≥nica del New Physics Institute ITMO?</a></li>
<li><a href="../es496836/index.html">QSerializer: soluci√≥n para la serializaci√≥n JSON / XML simple</a></li>
<li><a href="../es496838/index.html">Metodolog√≠a de implementaci√≥n del proyecto utilizada por Slack</a></li>
<li><a href="../es496840/index.html">Musk cree que 12 mil sat√©lites no interferir√°n con los astr√≥nomos. Su opini√≥n no es consistente con el modelo.</a></li>
<li><a href="../es496842/index.html">Un modelo epid√©mico simple con herramientas b√°sicas de Python.</a></li>
<li><a href="../es496848/index.html">El resumen de materiales interesantes para el desarrollador m√≥vil # 340 (del 6 al 12 de abril)</a></li>
<li><a href="../es496850/index.html">Complemento Maven para JPackage de Java 14</a></li>
<li><a href="../es496852/index.html">Clasificaci√≥n suave</a></li>
<li><a href="../es496856/index.html">Hogar inteligente sin control remoto, pero con un cubo.</a></li>
<li><a href="../es496858/index.html">FOSS News No. 11: una revisi√≥n del software gratuito y de c√≥digo abierto del 6 al 12 de abril de 2020</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>