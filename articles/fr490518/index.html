<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏾‍🤝‍🧑🏻 😺 🤚🏼 Une introduction au cadre architectural d'analyse de données Lena 💣 🕺🏼 💪🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! Je vais parler du cadre architectural que je développe.
 

L'architecture détermine la structure la plus générale du programme et l'int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Une introduction au cadre architectural d'analyse de données Lena</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/490518/"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour, Habr! </font><font style="vertical-align: inherit;">Je vais parler du cadre architectural que je développe.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'architecture détermine la structure la plus générale du programme et l'interaction de ses composants. </font><font style="vertical-align: inherit;">Lena en tant que framework implémente une architecture spécifique pour l'analyse des données (plus à ce sujet ci-dessous) et fournit à l'utilisateur des classes et des fonctions qui peuvent être utiles (en tenant compte de cette architecture).</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lena est écrite dans le langage Python populaire et fonctionne avec les versions de Python 2, 3 et PyPy. </font><font style="vertical-align: inherit;">Il est publié sous la licence gratuite Apache (version 2) </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pour le moment, il est encore en cours de développement, mais les fonctionnalités décrites dans ce manuel sont déjà utilisées, testées (la couverture totale de l'ensemble du framework est d'environ 90%) et il est peu probable qu'elles soient modifiées. </font><font style="vertical-align: inherit;">Lena est née dans l'analyse des données expérimentales en physique des neutrinos et porte le nom du grand fleuve sibérien.</font></font></p><br>
<p><img src="https://habrastorage.org/webt/wc/yf/3b/wcyf3biciwr6uccqjcz26vfdn-c.jpeg" title="Rivière Lena (Wikipedia)"></p><a name="habracut"></a><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les problèmes d'architecture se posent, en règle générale, dans les grands et moyens projets. </font><font style="vertical-align: inherit;">Si vous songez à utiliser ce cadre, voici un bref aperçu de ses tâches et de ses avantages.</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Du point de vue de la programmation:</font></font></p><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modularité, faible engagement. </font><font style="vertical-align: inherit;">Les algorithmes peuvent être facilement ajoutés, remplacés ou réutilisés.</font></font></li>
<li> (      ).          .   PyPy   " ".</li>
<li> .    .        .</li>
<li> .      ,   .         .     .</li>
<li> ,    .</li>
</ul><br>
<p>,       Python,        ,         .</p><br>
<p>    :</p><br>
<ul>
<li>      (        ).</li>
<li>     (, ,        ).</li>
<li> .           ,   ,         .</li>
<li>     .</li>
</ul><br>
<p>  (tutorial) –     Lena.   ,  ,         ,      ,         .            .      .</p><br>
<hr><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  Lena</a></p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a></li>
</ul><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a></p><br>
<p>          . ,   ,              .           .</p><br>
<p>   ,             .  Lena  ,        ,    .    ,   ,          .</p><br>
<h1><br>
  Lena</h1><br>
<h2><br>
  </h2><br>
<p>  Lena —     <em></em>.    .</p><br>
<p>  Lena   .      ,  :</p><br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> print_function
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> lena.core <span class="hljs-keyword">import</span> Sequence
<span class="hljs-meta">&gt;&gt;&gt; </span>s = Sequence(
<span class="hljs-meta">... </span>    <span class="hljs-keyword">lambda</span> i: pow(<span class="hljs-number">-1</span>, i) * (<span class="hljs-number">2</span> * i + <span class="hljs-number">1</span>),
<span class="hljs-meta">... </span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>results = s.run([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> res <span class="hljs-keyword">in</span> results:
<span class="hljs-meta">... </span>    print(res)
<span class="hljs-number">1</span> <span class="hljs-number">-3</span> <span class="hljs-number">5</span> <span class="hljs-number">-7</span></code></pre><br>
<p> Lena     Python 2  3,        <em>print</em>.     .</p><br>
<p><em>Sequence</em>      .         <em>run</em>.      (      ).</p><br>
<p>   ,      <em>for</em>.</p><br>
<p>    .     -   ,     - .       <em>Source</em>:</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> lena.core <span class="hljs-keyword">import</span> Sequence, Source
<span class="hljs-keyword">from</span> lena.flow <span class="hljs-keyword">import</span> CountFrom, ISlice<font></font>
<font></font>
s = Sequence(<font></font>
    <span class="hljs-keyword">lambda</span> i: pow(<span class="hljs-number">-1</span>, i) * (<span class="hljs-number">2</span> * i + <span class="hljs-number">1</span>),<font></font>
)<font></font>
spi = Source(<font></font>
    CountFrom(<span class="hljs-number">0</span>),<font></font>
    s,<font></font>
    ISlice(<span class="hljs-number">10</span>**<span class="hljs-number">6</span>),
    <span class="hljs-keyword">lambda</span> x: <span class="hljs-number">4.</span>/x,<font></font>
    Sum(),<font></font>
)<font></font>
results = list(spi())<font></font>
<span class="hljs-comment"># [3.1415916535897743]</span></code></pre><br>
<p>  <em>Source</em>     <em>__call__</em>,        .    :         ,       .</p><br>
<p><em>CountFrom</em> —  ,     . <em></em>     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¹</a>.      <em>CountFrom</em>     (   ).    <em>CountFrom</em> — <em>start</em> (  )  <em>step</em> (  1).</p><br>
<p>  <em>Source</em> (  )    (<em>callable</em>)       <em>run</em>.      <em>Sequence</em>.</p><br>
<p>    .         <em>s</em>    <em>Source</em>.    ,       <em>s</em>  <em>s</em>.</p><br>
<p><em>Sequence</em>    ,     <em>Sequence</em>. <em>Sequence</em>      <em>Source</em>,        (<em>flow</em>).</p><br>
<blockquote><strong>:</strong>      <em>Sequence</em>  <em>Source</em>  ,       <em>LenaTypeError</em> ( <em>TypeError</em>  <em>Python</em>).<br>
<br>
  <em>Lena</em> —  <em>LenaException</em>.      (  ,       ).</blockquote><p>        ,     - .        <em>ISlice</em>. <em>ISlice</em>  <em>CountFrom</em>    <em>islice</em>  <em>count</em>   <em>itertools</em>   Python. <em>ISlice</em>        <em>start, stop[, step]</em>,          (  )    <em>step</em>  ( <em>step</em>  ,       ).</p><br>
<p>        ,    .</p><br>
<p>            .</p><br>
<h2><br>
 </h2><br>
<p>     .     <em>run</em>,     <em>flow</em>:</p><br>
<br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sum</span>():</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self, flow</span>):</span>
        s = <span class="hljs-number">0</span>
        <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> flow:<font></font>
            s += val<font></font>
        <span class="hljs-keyword">yield</span> s</code></pre><br>
<p>,         <em>return</em>,  <em>yield</em>. <em>Yield</em> —    <em>Python</em>,      <em></em>. </p><br>
<p> —   <em> </em>  Python.       </p><br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span>results = s.run([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])</code></pre><br>
<p> <em>Sequence</em> <em>run</em>  .    ,   ,        ,       .     ,    .        (    )   :</p><br>
<pre><code class="python hljs"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> res <span class="hljs-keyword">in</span> results:
<span class="hljs-meta">... </span>    print(res)</code></pre><br>
<p>  :</p><br>
<ul>
<li>.             .          ,      ,  ,      .           ,        .</li>
<li>  .       -.       ,   ,     <em></em>.</li>
</ul><br>
<p>      Python     <em>yield</em>.         Lena.       <em>run</em>,    . ,   ,  ,   ,   -    .</p><br>
<p>   (<em>yield</em>)      .       <em></em> (<em>flow</em>) .       ,      <em></em> (<em>value</em>).</p><br>
<h2><br>
</h2><br>
<p> Lena        .    —   ,     .</p><br>
<p>Lena    ,     .    <em>Jinja</em>    .  Lena      ,      .     LaTeX:</p><br>
<pre><code class="tex hljs"><span class="hljs-comment">% histogram_1d.tex</span>
<span class="hljs-tag">\<span class="hljs-name">documentclass</span><span class="hljs-string">{standalone}</span></span>
<span class="hljs-tag">\<span class="hljs-name">usepackage</span><span class="hljs-string">{tikz}</span></span>
<span class="hljs-tag">\<span class="hljs-name">usepackage</span><span class="hljs-string">{pgfplots}</span></span>
<span class="hljs-tag">\<span class="hljs-name">pgfplotsset</span><span class="hljs-string">{compat=1.15}</span></span><font></font>
<font></font>
<span class="hljs-tag">\<span class="hljs-name">begin</span><span class="hljs-string">{document}</span></span>
<span class="hljs-tag">\<span class="hljs-name">begin</span><span class="hljs-string">{tikzpicture}</span></span>
<span class="hljs-tag">\<span class="hljs-name">begin</span><span class="hljs-string">{axis}</span><span class="hljs-string">[]</span></span>
<span class="hljs-tag">\<span class="hljs-name">addplot</span></span> [<font></font>
    const plot,<font></font>
]<font></font>
table [col sep=comma, header=false] {<span class="hljs-tag">\<span class="hljs-name">VAR</span><span class="hljs-string">{ output.filepath }</span></span>};
<span class="hljs-tag">\<span class="hljs-name">end</span><span class="hljs-string">{axis}</span></span>
<span class="hljs-tag">\<span class="hljs-name">end</span><span class="hljs-string">{tikzpicture}</span></span>
<span class="hljs-tag">\<span class="hljs-name">end</span><span class="hljs-string">{document}</span></span></code></pre><br>
<p>  TikZ ,    : <em> \VAR{ output.filepath }</em>. <em>\VAR{ var }</em>     <em>var</em>   .        ,          .     <em>output.filepath</em>   <em></em> .</p><br>
<p>     :</p><br>
<pre><code class="tex hljs"><span class="hljs-tag">\<span class="hljs-name">BLOCK</span><span class="hljs-string">{ set var = variable if variable else '' }</span></span>
<span class="hljs-tag">\<span class="hljs-name">begin</span><span class="hljs-string">{tikzpicture}</span></span>
<span class="hljs-tag">\<span class="hljs-name">begin</span><span class="hljs-string">{axis}</span><span class="hljs-string">[
    \BLOCK{ if var.latex_name }
        xlabel = { $\VAR{ var.latex_name }$
        \BLOCK{ if var.unit }
            [$\mathrm{\VAR{ var.unit }}$]</span></span>
        <span class="hljs-tag">\<span class="hljs-name">BLOCK</span><span class="hljs-string">{ endif }</span></span><font></font>
        },<font></font>
    <span class="hljs-tag">\<span class="hljs-name">BLOCK</span><span class="hljs-string">{ endif }</span></span><font></font>
]<font></font>
...</code></pre><br>
<p>  <em></em>  <em>variable</em>,   <em>var</em>  .     <em>latex_name</em>  <em>unit</em> (),          <em>x</em>. ,    <em>x [m]</em>  <em>E [keV]</em>  .       ,     ,       .</p><br>
<p><em>Jinja</em>      .    ,     .    <em>Jinja</em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">²</a>  .</p><br>
<p>  <em>Jinja</em>  <em>LaTeX</em>, Lena     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">³</a>:       <em>\BLOCK</em>  <em>\VAR</em> .</p><br>
<p><em></em> —    Python   . <em>Flow</em>  Lena     <em>(data, context)</em>.     <em>dataflow</em>,       .    ,      Lena.             .     <em></em>,          :</p><br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReadData</span>():</span>
    <span class="hljs-string">"""Read data from CSV files."""</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self, flow</span>):</span>
        <span class="hljs-string">"""Read filenames from flow and yield vectors.

        If vector component could not be cast to float,
        *ValueError* is raised.
        """</span>
        <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> flow:
            <span class="hljs-keyword">with</span> open(filename, <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> fil:
                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> fil:<font></font>
                    vec = [float(coord)<font></font>
                           <span class="hljs-keyword">for</span> coord <span class="hljs-keyword">in</span> line.split(<span class="hljs-string">','</span>)]
                    <span class="hljs-comment"># (data, context) pair</span>
                    <span class="hljs-keyword">yield</span> (vec, {<span class="hljs-string">"data"</span>: {<span class="hljs-string">"filename"</span>: filename}})</code></pre><br>
<p>      <em>flow</em>    .        <em>data</em> ( ).  <em>filename</em>       <em>data["filename"]</em>   <em>data.filename</em>.</p><br>
<p>        -,     HTML   LaTeX ,      , .    ,          .    —  ,     -        (   ).</p><br>
<p>   <em>   </em>  Lena.      ,              .</p><br>
<p>       ,   ,        .         ,  ,       .</p><br>
<h1><br>
  </h1><br>
<p>      .          <em>x</em>.</p><br>
<blockquote>             <em>docs/examples/tutorial</em>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>.</blockquote><p>main.py</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> print_function<font></font>
<font></font>
<span class="hljs-keyword">import</span> os<font></font>
<font></font>
<span class="hljs-keyword">from</span> lena.core <span class="hljs-keyword">import</span> Sequence, Source
<span class="hljs-keyword">from</span> lena.math <span class="hljs-keyword">import</span> mesh
<span class="hljs-keyword">from</span> lena.output <span class="hljs-keyword">import</span> HistToCSV, Writer, LaTeXToPDF, PDFToPNG
<span class="hljs-keyword">from</span> lena.output <span class="hljs-keyword">import</span> MakeFilename, RenderLaTeX
<span class="hljs-keyword">from</span> lena.structures <span class="hljs-keyword">import</span> Histogram<font></font>
<font></font>
<span class="hljs-keyword">from</span> read_data <span class="hljs-keyword">import</span> ReadData<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span>
    data_file = os.path.join(<span class="hljs-string">".."</span>, <span class="hljs-string">"data"</span>, <span class="hljs-string">"normal_3d.csv"</span>)<font></font>
    s = Sequence(<font></font>
        ReadData(),<font></font>
        <span class="hljs-keyword">lambda</span> dt: (dt[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], dt[<span class="hljs-number">1</span>]),<font></font>
        Histogram(mesh((<span class="hljs-number">-10</span>, <span class="hljs-number">10</span>), <span class="hljs-number">10</span>)),<font></font>
        HistToCSV(),<font></font>
        MakeFilename(<span class="hljs-string">"x"</span>),<font></font>
        Writer(<span class="hljs-string">"output"</span>),<font></font>
        RenderLaTeX(<span class="hljs-string">"histogram_1d.tex"</span>),<font></font>
        Writer(<span class="hljs-string">"output"</span>),<font></font>
        LaTeXToPDF(),<font></font>
        PDFToPNG(),<font></font>
    )<font></font>
    results = s.run([data_file])<font></font>
    print(list(results))<font></font>
<font></font>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<font></font>
    main()</code></pre><br>
<p>    ,           <em>output/</em>,       :</p><br>
<pre><code class="bash hljs">$ python main.py<font></font>
pdflatex -halt-on-error -interaction batchmode -output-directory output output/x.tex<font></font>
pdftoppm output/x.pdf output/x -png -singlefile<font></font>
[(‘output/x.png’, {‘output’: {‘filetype’: ‘png’}, ‘data’: {‘filename’: ‘../data/normal_3d.csv’}, ‘histogram’: {‘ranges’: [(-10, 10)], ‘dim’: 1, ‘nbins’: [10]}})]</code></pre><br>
<p>    <em>LaTeXToPDF</em>  <em>pdflatex</em>,  <em>PDFToPNG</em>   <em>pdftoppm</em>.     ,        LaTeX  ,          <em>output/x.tex</em>    (   ).</p><br>
<p>   —    ,   (<em>run</em>) . ,   ,    <em>(  , )</em>.       ,     (  )   <em>output/x.png</em>.</p><br>
<p>        .  <em>s</em>     (     ).   <em>ReadData</em>   <em>(data, context)</em>,  lambda    ,        (   <em>(data, context)</em>).</p><br>
<p>  lambda   ,            .   ,  <em></em>          .</p><br>
<p> <em>x</em>    <em>Histogram</em>,      (<em>edges</em>),   (<em>mesh</em>)  <em>-10</em>  <em>10</em>   .</p><br>
<p> ,       <em></em>,     <em>CSV</em> (,  ).    (  <em>pdflatex</em>)    ,      .</p><br>
<p><em>MakeFilename</em>      <em>context["output"]</em>. <em>Context.output.filename</em> —        (         :    <em>csv</em>,      <em>pdf</em>  ..).     ,      <em>x</em>.</p><br>
<p> <em>Writer</em>      .         .    ,      <em>"output"</em>.</p><br>
<p>      <em>csv</em>,      LaTeX <em>histogram_1d.tex</em>     <em></em>,     <em>pdf</em>  <em>png</em>.   , <em>RenderLaTeX</em>  ,         .</p><br>
<p>:        ,     .          Lena,      .</p><br>
<h1><br>
  </h1><br>
<p>           :</p><br>
<pre><code class="python hljs"><span class="hljs-keyword">from</span> lena.context <span class="hljs-keyword">import</span> Context
<span class="hljs-keyword">from</span> lena.flow <span class="hljs-keyword">import</span> Cache, End, Print<font></font>
<font></font>
s = Sequence(<font></font>
    Print(),<font></font>
    ReadData(),<font></font>
    <span class="hljs-comment"># Print(),</span>
    ISlice(<span class="hljs-number">1000</span>),
    <span class="hljs-keyword">lambda</span> val: val[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>], <span class="hljs-comment"># data.x</span>
    Histogram(mesh((<span class="hljs-number">-10</span>, <span class="hljs-number">10</span>), <span class="hljs-number">10</span>)),<font></font>
    Context(),<font></font>
    Cache(<span class="hljs-string">"x_hist.pkl"</span>),
    <span class="hljs-comment"># End(),</span><font></font>
    HistToCSV(),<font></font>
    <span class="hljs-comment"># ...</span>
)</code></pre><br>
<p><em>Print</em>  ,      <em></em>.       ,       ,       <em>Print</em>  .            <em>print</em>      .</p><br>
<p><em>ISlice</em>,    ,    ,      .    ,     ,       ,   .</p><br>
<p><em>Context</em> —  ,   <em></em>,        <em></em>,    .    <em>Context</em>   ,        ,     (   ,   ).          .</p><br>
<p><em>Cache</em>        .    —  ,     .   ,  <em>Cache</em>  ,   ,          .         ,      . <em>Cache</em>  <em>pickle</em>,        Python (  ).            (,   ,    ),   <em>Cache</em>.      <em>Cache</em>,   ,     .</p><br>
<p><em>End</em>          .        , <em>Cache</em>      (    <em>End</em>),       <em>HistToCSV</em>  . <em>End</em>     ,        .</p><br>
<hr><br>
<p><strong></strong></p><br>
<p>Lena       <em></em>,    <em></em>.   ,        <em></em>   ,       . <em></em>     ,    <em></em>.</p><br>
<p><em></em>    (<em>callable</em>)  <em></em>.            <em></em>,        <em></em>,       .     ,              .</p><br>
<p>      <em></em>.   —       .           ,         .</p><br>
<p>    . <em>Sequence</em>   ,     . <em>Source</em>   <em>Sequence</em>,        .</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Sequence</td>
<td>   <em>__call__(value)</em>  <em>run(flow)</em> ( )</td>
<td>s.run(<em>flow</em>)</td>
</tr>
<tr>
<td>Source</td>
<td>    <em>__call__()</em> ( ),   <em>Sequence</em></td>
<td>s()</td>
</tr>
</tbody>
</table></div><br>
<p>     ,     ,   ,         .                      .</p><br>
<p><strong></strong></p><br>
<ol>
<li><p>        <em>End</em>.    :</p><br>
<pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">End</span>(<span class="hljs-params">object</span>):</span>
    <span class="hljs-string">"""Stop sequence here."""</span><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self, flow</span>):</span>
        <span class="hljs-string">"""Exhaust all preceding flow and stop iteration."""</span>
        <span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> flow:
            <span class="hljs-keyword">pass</span>
        <span class="hljs-keyword">raise</span> StopIteration()</code></pre><br>
<p>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">main.py</a> .    ,  </p><br>
<pre><code class="plaintext hljs">Traceback (most recent call last):<font></font>
File “main.py”, line 46, in &lt;module&gt;<font></font>
main()<font></font>
File “main.py”, line 42, in main<font></font>
results = s.run([data_file])<font></font>
File “lena/core/sequence.py”, line 70, in run<font></font>
flow = elem.run(flow)<font></font>
File “main.py”, line 24, in run<font></font>
raise StopIteration()<font></font>
StopIteration</code></pre><br>
<p>,    , ,   .   ,  <em>StopIteration</em>            .     ?</p><br>
</li>
<li><p>  ,          .   ,   .</p><br>
</li>
<li><p><em>Count</em>  ,   .        ,      .       ?     ,      .</p><br>
</li>
<li><p>  ,      .</p><br>
<p>"  -           ",-  . "  CSV, , ,  ,…       ,          ,   code bloat ( )."</p><br>
<p>        ?       ?</p><br>
</li>
<li><p>**   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sum</a> . ,          ,                .</p><br>
<p>  <em>Sum</em>  , ?     ?        .</p><br>
</li>
</ol><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les réponses aux exercices sont données à la fin du manuel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Notes de bas de page</font></font></strong></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Cette fonctionnalité pourrait être ajoutée à l'avenir. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation Jinja</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
3. L'utilisation de Jinja pour la mise en page LaTeX a été proposée </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://web.archive.org/web/20121024021221/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , la syntaxe des modèles a été tirée de l'article d'origine.</font></font></p><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternatives</font></font></h2><br>
<p><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruffus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est un </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pipeline de calcul</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour Python utilisé en science et en bioinformatique. </font><font style="vertical-align: inherit;">Il connecte les composants du programme via l'écriture et la lecture de fichiers.</font></font></p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr490498/index.html">Comme j'ai écrit une crypto-monnaie semi-décentralisée en PHP. (Partie 2 - Développement)</a></li>
<li><a href="../fr490502/index.html">Ansible vs Puppet</a></li>
<li><a href="../fr490510/index.html">Les entreprises dépensent 16 milliards de dollars en drones pour conquérir 8000 milliards de marchés</a></li>
<li><a href="../fr490512/index.html">(Presque) Couleurs générées automatiquement</a></li>
<li><a href="../fr490516/index.html">L'IA existe, mais n'est-ce pas ce que nous pensions?</a></li>
<li><a href="../fr490520/index.html">Les origines des mathématiques: les idées logiques</a></li>
<li><a href="../fr490524/index.html">Récupération séquentielle et 5 façons de résoudre</a></li>
<li><a href="../fr490526/index.html">Plusieurs façons d'optimiser une application React-Redux</a></li>
<li><a href="../fr490528/index.html">7 cours gratuits pour les professionnels des données (DS et DE)</a></li>
<li><a href="../fr490530/index.html">DNS sur HTTPS et les risques pour les données personnelles - discuter des opinions d'experts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>