<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§•ğŸ¿ â™ ï¸ ğŸ¥ Bekerja dengan cookie dalam JavaScript murni tanpa sakit kepala ğŸ¤” âœ–ï¸ ğŸ’ƒğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr!
 

Baru-baru ini saya menemukan kebutuhan untuk bekerja dengan cookie menggunakan JavaScript. Ketika saya melihat betapa mengerikannya bek...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Bekerja dengan cookie dalam JavaScript murni tanpa sakit kepala</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/501724/"><h1 id="privet-habr"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo, Habr!</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Baru-baru ini saya menemukan kebutuhan untuk bekerja dengan cookie menggunakan JavaScript. </font><font style="vertical-align: inherit;">Ketika saya melihat betapa mengerikannya bekerja dengan </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">document.cookie</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dalam JavaScript murni, saya pergi mencari perpustakaan untuk kenyamanan bekerja dengan cookie. </font><font style="vertical-align: inherit;">Ternyata, beberapa perpustakaan untuk bekerja dengan cookie, meskipun pada pandangan pertama tampak sederhana dan nyaman, dalam proses bekerja dengan mereka banyak jebakan yang ditemukan.</font></font><a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inilah beberapa di antaranya:</font></font></p><br>
<ul>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menerima cookie pada jalur yang ditentukan</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - beberapa perpustakaan yang diuji memiliki masalah dalam mengakses cookie dengan jalur: misalnya, saya tidak bisa mendapatkan cookie dengan jalur dari halaman situs web, </font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atau sebaliknya, berada di "root" dari situs yang saya terima beberapa kali </font></font><code>undefined</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ketika saya mencoba untuk mendapatkan cookie pada jalur tertentu jalan</font></font><code>/order</code></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dukungan JSON</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - itu terjadi, tetapi bekerja bengkok: misalnya, ketika menerima cookie yang menyimpan JSON, Anda akan mendapatkan string yang dikodekan-URI yang perlu Anda decode dan parsing sendiri. </font><font style="vertical-align: inherit;">Menghubungkan pustaka ke dalam kode Anda dan menambahkan fungsi untuk menyelesaikan masalah ini entah bagaimana salah.</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menghapus cookie</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - semua perpustakaan memiliki masalah dengan menghapus cookie. </font><font style="vertical-align: inherit;">Hampir semua orang menghapus nilai cookie, tetapi tidak menghapusnya. </font><font style="vertical-align: inherit;">Masalah terpisah ada pada cookie sesi: beberapa perpustakaan tidak melihatnya "menunjuk kosong", dan tidak ada yang bisa menghapus cookie sesi.</font></font><br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya tidak akan menyebutkan nama perpustakaan yang saya coba, karena saya pikir ini tidak benar dalam kaitannya dengan pengembang mereka, tetapi saya akan mengklarifikasi bahwa saya mencoba perpustakaan paling populer (menurut </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">npm</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) untuk bekerja dengan cookie.</font></font><br>
</blockquote></li>
</ul><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Masalah terakhir benar-benar membuat saya marah, dan saya memutuskan sudah waktunya untuk menulis perpustakaan saya sendiri untuk bekerja dengan cookie.</font></font></p><br>
<h2 id="cookiejs-npm---cookielibhttpsgithubcomunsstrennencookiejs"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cookie.js (npm - cookielib)</font></font></a></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perpustakaan ini menyelesaikan semua masalah di atas, mempertahankan ukuran kecil pendahulunya dan kemudahan penggunaan fungsi.</font></font></p><br>
<h3 id="pochemu-sleduet-ispolzovat-eyo"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mengapa Anda harus menggunakannya?</font></font></h3><br>
<ul>
<li>  ,  ,       .</li>
<li>  â€”  <strong>707 </strong></li>
<li>   -,     </li>
<li>  <strong>JSON</strong> " " (<strong>  JSON,     ,   JSON-,     JSON-</strong>)</li>
<li>      -</li>
<li>  <strong></strong>  (<strong> ES6!</strong>)</li>
<li>   JS (<strong> </strong>)</li>
<li>     <strong>npm</strong>,   <strong>CDN</strong>,         </li>
</ul><br>
<h3 id="nemnogo-o-rabote-s-bibliotekoy">    </h3><br>
<p>  :</p><br>
<pre><code class="javascript hljs">setCookie(<span class="hljs-string">'name'</span>, <span class="hljs-string">'value'</span>);  <span class="hljs-comment">//  </span>
setCookie(<span class="hljs-string">'name'</span>, {<span class="hljs-string">'key'</span>: <span class="hljs-string">'value'</span>});  <span class="hljs-comment">// json </span></code></pre><br>
<p> "" :</p><br>
<pre><code class="javascript hljs">setCookie(<span class="hljs-string">'name'</span>, <span class="hljs-string">'value'</span>, {<span class="hljs-attr">expires</span>: <span class="hljs-built_in">Date</span>(<span class="hljs-number">3</span>)});  <span class="hljs-comment">//   </span>
setCookie(<span class="hljs-string">'name'</span>, {<span class="hljs-string">'key'</span>: <span class="hljs-string">'value'</span>}, {<span class="hljs-attr">expires</span>: <span class="hljs-built_in">Date</span>(<span class="hljs-number">3</span>)});  <span class="hljs-comment">// json  </span></code></pre><br>
<h4 id="s-funkciey-setcookie-mozhno-zadat-lyubye-parametry-kuki-parametry-mozhno-nayti-nizheoptions">  <code>setCookie()</code>     .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>.</h4><br>
<p> :</p><br>
<pre><code class="javascript hljs">getCookie(<span class="hljs-string">'name'</span>)  <span class="hljs-comment">//  </span>
getCookie(<span class="hljs-string">'name'</span>, json=<span class="hljs-literal">true</span>)  <span class="hljs-comment">//   json,    json.   JSON</span></code></pre><br>
<p> :</p><br>
<pre><code class="javascript hljs">deleteCookie(<span class="hljs-string">'name'</span>);  <span class="hljs-comment">// json   -  !</span></code></pre><br>
<h3 id="a-nameoptionsaparametry-kuki"> </h3><br>
<p>   ,   <code>setCookie(name, value, dict)</code>,  <strong>dict</strong>    " ": " "</p><br>
<h4 id="spisok-klyuchey-znacheniy"> -:</h4><br>
<ul>
<li><strong>path</strong> (str) â€” URL,    </li>
<li><strong>domain</strong> (str) â€” ,    </li>
<li><strong>expires</strong> (Date object) â€”  ""  (/   Date-)</li>
<li><strong>max-age</strong> (int) â€”      (  <strong>expires</strong>)</li>
<li><strong>secure</strong> (bool) â€”  true,     HTTPS. <strong>   false </strong></li>
<li><strong>samesite</strong> (str) â€” ,     XSRF-â€¦    strict  lax.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">  </a>,           .<br>
<ul>
<li><strong>httpOnly</strong> (bool) â€”  true,           JavaScript. <strong>   false </strong></li>
</ul></li>
</ul><br>
<h3 id="zaklyuchenie"></h3><br>
<p>          ,     . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><strong>  GitHub</strong></a>.    .</p><br>
<h3 id="primechaniya"></h3><br>
<p>  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">printf</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">RekGRpth</a>.   !</p></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id501710/index.html">Untuk itulah ceruk krisis 2020 adalah waktu terbaik untuk pembangunan</a></li>
<li><a href="../id501712/index.html">Berbicara tentang tes: beberapa cerita dan survei</a></li>
<li><a href="../id501714/index.html">Sekolah 42 sebagai jawaban utama untuk kehidupan TI, semesta pemrograman dan semua itu</a></li>
<li><a href="../id501716/index.html">Tantangan diterima atau tugas apa yang dipecahkan insinyur Lamoda</a></li>
<li><a href="../id501722/index.html">Kerangka Comet - PHP untuk API REST cepat</a></li>
<li><a href="../id501730/index.html">ProxySQL - alat untuk koneksi demultiplexing</a></li>
<li><a href="../id501734/index.html">[Geektimes-style] Masa depan teknologi kami: prediksi dari para ahli</a></li>
<li><a href="../id501736/index.html">Bagaimana kami beralih ke udalenka enam bulan lalu karena optik cincang</a></li>
<li><a href="../id501738/index.html">13 Mei Java Digest</a></li>
<li><a href="../id501742/index.html">Transportasi pada 13 Mei: uiiii, kami mengambil tempat kedua dalam hal jumlah pasien, saatnya untuk menghilangkan pembatasan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>