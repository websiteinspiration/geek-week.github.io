<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔨 👩‍❤️‍👩 🧚🏾 Execute formiga. Corre 🛄 🔓 👴🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo discute o processo de criação de um modelo de simulação do comportamento de uma colônia de formigas (pode ser lido na Wikipedia ) no ambie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Execute formiga. Corre</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/500994/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este artigo discute o processo de criação de um modelo de simulação do comportamento de uma colônia de formigas (pode ser lido na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) no ambiente de simulação "AnyLogic". </font><font style="vertical-align: inherit;">Este artigo é prático. </font><font style="vertical-align: inherit;">Ele considerará o uso do algoritmo formiga para resolver o problema do vendedor ambulante (você pode </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ler aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ca/-m/xy/ca-mxya2npzn6aynp21dpuepx2g.gif"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Brevemente sobre a essência</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A essência do problema do vendedor ambulante é que o vendedor ambulante (vendedor) deve visitar N cidades depois de visitar cada uma delas apenas uma vez no caminho mais curto. Como essa tarefa é complexa em NP e o número de opções para todas as rotas possíveis entre N cidades é calculado como “N!”, O menor tempo de busca de rotas aumentará exponencialmente com um aumento de N. Assim, o menor tempo de busca de rotas (solução) usando o algoritmo "Pesquisa exaustiva" (que fornece uma solução exata) com o número de cidades N&gt; 16 aumenta acentuadamente (é exponencial). Portanto, não procuraremos a rota mais curta em comprimento, mas aproximar-nos (racionalmente) em um tempo finito usando o “algoritmo ant”.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Algumas palavras sobre o AnyLogic é uma ferramenta poderosa que permite criar modelos de simulação de complexidade variável. </font><font style="vertical-align: inherit;">Ele implementa várias abordagens de simulação. </font><font style="vertical-align: inherit;">Analisaremos apenas uma das abordagens, a modelagem “agente”. </font><font style="vertical-align: inherit;">É implementado na linguagem de programação Java, que complementa as ferramentas existentes. </font><font style="vertical-align: inherit;">A principal desvantagem do “AnyLogic” é a limitação da versão gratuita do número de agentes criados; seu número não pode exceder 50.000. “Agent” é a unidade básica do sistema de simulação AnyLogic. </font><font style="vertical-align: inherit;">Mais informações podem ser encontradas no site </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.anylogic.ru</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ferramentas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Anylogic - faça o download da versão gratuita aqui </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.anylogic.ru/downloads</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Introdução inicial do </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
AnyLogic </font><font style="vertical-align: inherit;">: </font><font style="vertical-align: inherit;">A interface do AnyLogic é mostrada na Figura 1. Inclui:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a área verde é o espaço do agente no qual criaremos;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">área vermelha - propriedades do objeto que está em foco;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">paleta - ferramentas que você pode usar ao criar um modelo;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">projetos - a estrutura do modelo desenvolvido.</font></font></li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/ni/-d/kx/ni-dkxyorpukg5a6xkitxe7nwpm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">1- Janela pop-up do AnyLogic</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criação de projeto</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo é simples aqui. </font><font style="vertical-align: inherit;">Clique no item de menu “Arquivo” ao lado de “Criar” e depois em “Modelo”, digite o nome do modelo e clique no botão “Concluir” (Fig. 2). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ej/5e/96/ej5e96ohohjgxmygsj2teeedt1q.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">2- Criando um modelo</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Criar cidades</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bem, vamos começar. A primeira coisa que faremos é criar as chamadas cidades (partes superiores do gráfico) que a formiga visitará. Por que abrimos a guia "Agente" na paleta e arrastamos o círculo vermelho com o homenzinho para o agente "Principal" a partir daí, como mostra a Figura 3. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v9/2x/nb/v92xnbu57t8ulh_cttg_i6p1e_0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 3- Criando cidades</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Após soltar o botão do mouse, uma caixa de diálogo é exibida ("Etapa 1"), solicitando a criação de um agente. Onde será necessário selecionar o item "Agent Population" e clicar no botão "Next". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/bb/jm/h5bbjm3eyfyzggqc_ixb7bikqoi.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 4- Criando cidades</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A seguinte caixa de diálogo é exibida (Etapa 2), na qual você precisará digitar o nome do novo tipo de agente e o nome da população de agentes. Digite o tipo "MyTown" e o nome da população "myTowns" e clique no botão "Next". </font></font><br>
<br>
<img src="https://habrastorage.org/webt/0k/fi/ak/0kfiaknzozrmlyjkzpgnkdrtp2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 4a - Digite o nome do novo agente</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, a seguinte janela aparecerá (Etapa 4.). Aqui, selecionamos “2D Agent Animation” e o ícone com a inscrição “Plant” e clique no botão “Finish” (Fig. 5). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/si/73/l7/si73l7efxqaj4-lsibjaq23bo5o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 5- Adicione animação para o agente</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora crie uma variável que determinará o número inicial de cidades em nosso modelo. Por que, na "Paleta", arraste o ícone com a inscrição "Variável" para o agente "Principal" e digite o nome "numberTown". Em seguida, clique no ícone da nossa variável e, na guia Propriedades, insira seu valor inicial igual a, por exemplo, 10 e selecione o tipo “int” (Fig. 6). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/xg/ox/6o/xgox6ohlkcyugq_8bndgxeqe7pe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 6- Criando uma variável</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora, definimos o valor inicial da população da nossa cidade “myTowns”, para o qual clicamos em seu ícone e na guia “Propriedades” no campo “Número inicial de agentes”, escreva o nome da variável que criamos anteriormente (Fig. 7).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/n2/wn/wr/n2wnwrzolah44a3oiblzp0uitvw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">7 - Alterando as propriedades da população “myTowns” A seguir, traçaremos a</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
conclusão de nossas cidades no agente “Main” em um local aleatório. </font><font style="vertical-align: inherit;">O espaço é limitado a um quadrado de 400x400 pixels. </font><font style="vertical-align: inherit;">Por que, na guia "Projetos", selecione o agente "Principal" com o mouse e na guia "Propriedades", no campo "Na inicialização", adicione o seguinte código Java (Fig. 7a):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {<font></font>
	myTowns.get(i).setXY(uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>), uniform(<span class="hljs-number">0</span>,<span class="hljs-number">400</span>));<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size () - o número de cidades criadas;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get (i) .setXY (uniforme (0,400), uniforme (0,400)) - defina as coordenadas X e Y para a i-ésima cidade;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">uniforme (0,400) - uma função que retorna um número aleatório no intervalo de 0 a 400, de acordo com a lei de distribuição igualmente provável de uma variável aleatória. </font><font style="vertical-align: inherit;">O ambiente AnyLogic possui um extenso kit de ferramentas para trabalhar com várias distribuições de variáveis ​​aleatórias. </font><font style="vertical-align: inherit;">Existe um construtor interno de distribuições de probabilidade, que está disponível na barra de ferramentas.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Onde:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.size () - o número de cidades criadas;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">myTowns.get (i) .setXY (uniforme (0,400), uniforme (0,400)) - defina as coordenadas X e Y para a i-ésima cidade;</font></font></li>
<li>uniform(0,400) – ,        0  400      .   AnyLogic          .              . </li>
</ul><br>
<br>
<img src="https://habrastorage.org/webt/cx/9s/uh/cx9suhbif3brjkqje09vjpp0wos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">7a - Organizamos as cidades,</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
depois já podemos ver o que fizemos e iniciar nosso modelo. </font><font style="vertical-align: inherit;">Para fazer isso, use a tecla "F5", clique nela e a janela para iniciar o experimento é iniciada, como mostra a Figura 8. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/e7/w9/0j/e7w90jfs3sz6flkkxvkmhksfysk.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">8 - Inicie o experimento</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em seguida, clique no botão "Executar" no canto inferior esquerdo da janela e o experimento inicia. </font><font style="vertical-align: inherit;">Você deve obter uma janela com o conteúdo na tela, como mostra a Figura 9. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/h5/hj/rw/h5hjrw2oona5nb5oxamr7wk1kro.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">9 - O resultado do experimento</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Então, nesta etapa, criamos 10 cidades e as colocamos em um local aleatório (estocástico) em nossa tela. </font><font style="vertical-align: inherit;">Agora vamos à criação de nossas "formigas"</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crie uma formiga</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, a principal unidade de combate do nosso modelo será uma formiga. Em primeiro lugar, devemos criá-lo e depois modelar seu comportamento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Criar uma formiga é semelhante a criar uma cidade. Na "Paleta", selecione "Agente" e arraste-o para "Principal". Selecione "População de agentes", depois "Quero criar um novo tipo de agente", digite "Nome do novo tipo" e "Nome da população" "MyAnt" "myAnts" e clique em "Avançar". Depois disso, selecionamos a animação “2D” e, por exemplo, o ícone com a inscrição “Fighter” pressiona “Finish” e deve aparecer como mostra a Figura 10. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pb/wj/q-pbwj-wzsom4meb0xjebt8f6e0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 10 - Crie formigas</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Concordo, o avião não se parece com uma formiga, então vamos consertá-lo. Entramos no mecanismo de busca à procura de uma imagem que retrate uma formiga e mudamos o avião para uma formiga. Por que clicamos duas vezes no círculo vermelho próximo a "myAnts". Depois disso, a aba “myAnt” abrirá onde você precisa remover o avião e colocar a formiga em seu lugar (Fig. 11). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/v-/5a/tp/v-5atplfehtp9oii49ogb4zarx4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 11 - Guia MyAnt</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Selecione o avião com o mouse e pressione "Del". Em seguida, vá para a guia "Apresentação" e arraste o elemento "Imagem" de lá. Depois disso, uma caixa de diálogo será aberta automaticamente para selecionar um arquivo. Selecione o arquivo com a nossa formiga (Fig. 12) e clique em OK. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3u/cv/jo/3ucvjoiromyqmon5c0gg8rnitps.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 12 - Guia MyAnt com formiga e já sem avião</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ir em frente. </font><font style="vertical-align: inherit;">Escale a formiga e mova-a para o local onde o avião costumava estar. </font><font style="vertical-align: inherit;">Ele deve aparecer como mostrado na Figura 12a. </font><font style="vertical-align: inherit;">Todas essas operações são executadas usando o mouse. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bh/rr/n_/bhrrn_45uobnz9cpfxyxfmgpajm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">12a - guia MyAnt com formiga</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Revivemos a formiga</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora precisamos ensinar nossa formiga recém-assada a rastejar entre as cidades. </font><font style="vertical-align: inherit;">É verdade, até agora sem levar em conta o modelo matemático, mas ainda assim deixá-lo funcionar. </font><font style="vertical-align: inherit;">E assim, abra o diagrama “State diagram” na “Palette” e continue. </font><font style="vertical-align: inherit;">Transferimos os seguintes blocos e os conectamos:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O início do diagrama de estados é o ponto de partida do ciclo de vida da nossa formiga;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estado - este bloco irá caracterizar o estado do ciclo de vida da nossa formiga. </font><font style="vertical-align: inherit;">Esses blocos são necessários em pedaços.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transição - uma flecha que conectará nossos "Estados" e realizará a transição de um "Estado" para outro "Estado" sob certas condições.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, deve aparecer algo como mostrado na Figura 13. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/xk/ry/rlxkrykh7gpd6ujcc5aetxfldxm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">13 - A lógica do comportamento da formiga</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora vamos escrever a lógica inicial do diagrama da formiga. </font><font style="vertical-align: inherit;">Selecionamos com o mouse a seta que sai do bloco com o nome "Selecionar cidade" e adicionamos o seguinte código no campo "Ação" na guia "Propriedades" (Fig. 14):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.5</span>)) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui tudo é muito simples, percorremos o ciclo em todas as cidades e jogamos uma moeda (geramos uma variável aleatória com probabilidade 0,5) se seu valor é verdadeiro (águia), enviamos a formiga para essa cidade que sai do ciclo. A expressão "this.moveTo (main.myTowns.get (i))" é uma função que envia um agente para outro. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/sc/ql/7y/scql7yplmodnhdrldsc6tvb3l2m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 14 - Defina a lógica inicial do movimento da formiga.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em seguida, clique na seta que sai do bloco "Movimento" e, na guia "Propriedades", no campo "Ocorre", defina o valor "Ao receber uma mensagem" e selecione "Ao receber a mensagem especificada" no campo "Ocorre". »Como mostrado na Figura 15. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ks/hh/g9/kshhg9m8nyxvzqz9d1dj2xnrgtc.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 15 - Defina a lógica para a transição entre "Movimento" e "Ignorou tudo"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora configure a última seta que sai do bloco "Motion". </font><font style="vertical-align: inherit;">Nós o selecionamos com o mouse e, na guia "Propriedades", no campo de transição, definimos "Na chegada do agente". </font><font style="vertical-align: inherit;">A vista final do "Diagrama de estado" deve ser mostrada na Figura 16. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/os/kv/af/oskvafwwsgpitd36rnozrirob9m.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">16 - Diagrama de estado com transições configuradas entre blocos</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Então, vejamos como o "Diagrama de estado" do comportamento da formiga funciona:</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O primeiro estado em que a formiga cai é "Vybor_city", até agora nenhuma ação foi especificada.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Então ele vai para o próximo estado após a transição. </font><font style="vertical-align: inherit;">Nesta transição, adicionamos um código que inicia um ciclo por todas as montanhas e faz as formigas correrem pelas cidades.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O bloco "Movimento" é o local em que a formiga fica localizada até chegar à cidade selecionada anteriormente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Além disso, ele tem duas maneiras. </font><font style="vertical-align: inherit;">Primeiro, ele volta ao bloco "City_Choice" e tudo se repete novamente. </font><font style="vertical-align: inherit;">No segundo caminho, ele terá que seguir quando já tiver visitado todas as cidades. </font><font style="vertical-align: inherit;">Até agora, o segundo caminho não está configurado conosco. </font><font style="vertical-align: inherit;">Nós vamos lidar com eles um pouco mais tarde.</font></font></li>
</ol><br>
<br>
<img src="https://habrastorage.org/webt/3z/aj/md/3zajmdqorvjpondmi8k03fmmz94.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">17 - Operação do diagrama de estados</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora podemos pressionar "F5" para ver o que aconteceu (Fig. 18). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/fr/cg/us/frcgusj3llqem0vaf8rxjngwwii.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">18 - O renascimento das formigas</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Definir os critérios</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então, quais são esses critérios (regras):</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma formiga deve visitar cada cidade apenas uma vez.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ant, quando ele visitou todas as cidades, encerra seu movimento na última cidade.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esses critérios são ditados a nós pela condição do problema do vendedor ambulante. Cada formiga estará conosco um tipo de vendedor ambulante que viaja pelas cidades. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos ensinar a formiga a cumprir essas regras. Por que, na "Paleta", na guia "Agente", transfira a "Coleção" e "Variável" para a guia "MyAnt" e chame-as de primeira como "isVisited" e a segunda como "distância". O primeiro levará em conta as cidades que já visitamos e o segundo a distância percorrida pela formiga. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/-k/s-/a_/-ks-a_2igqbcyxzgzxiwlrbn9fe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 19 - Adicionar variáveis</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Configure a coleção isVisited. Por que o selecionamos com o mouse e configuramos o "Tipo" dos elementos "int" na guia "Propriedades", como mostra a Figura 20. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para a variável "distance" em suas propriedades, no campo "Valor inicial", defina "0" e o tipo de variável "double" " </font></font><br>
<br>
<img src="https://habrastorage.org/webt/cm/2v/te/cm2vte4vjkzqycf0r58qz8itz7u.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 20 - Coleção do tipo "int"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora selecione a seta que sai do bloco "City_block" e altere o código no campo "Ação" para o abaixo:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (randomTrue(<span class="hljs-number">0.9</span>) &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));<font></font>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));<font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No código acima, adicionamos uma verificação das cidades nas quais já conseguimos visitar, levando em consideração as cidades que visitamos e também consideramos a distância percorrida. </font><font style="vertical-align: inherit;">O código é bastante simples, acho que não será difícil para você entender. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Você pode tentar lançar “F5” nosso modelo e ver o que aconteceu. </font><font style="vertical-align: inherit;">Agora as formigas passarão por todas as cidades apenas uma vez e completarão seu movimento no quarteirão.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alterar o posicionamento inicial das formigas</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta etapa, determinaremos para cada formiga escolheremos aleatoriamente uma cidade da qual ele começará sua jornada. </font><font style="vertical-align: inherit;">Por que, na guia "Projetos", selecione o agente "Principal" com o mouse e, na guia "Propriedades", adicione o seguinte código ao campo "Na inicialização" (Fig. 20a):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.size(); i++) {
	<span class="hljs-comment">//        </span>
	<span class="hljs-keyword">int</span> startTown = uniform_discr(<span class="hljs-number">0</span>,myTowns-<span class="hljs-number">1</span>);
	<span class="hljs-comment">//     </span><font></font>
	myAnts.get(i).setPosition(myTowns.get(startTown));<font></font>
	<span class="hljs-comment">//      </span><font></font>
	myAnts.get(i).isVisited.add(startTown);<font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/2i/et/cg/2ietcgzx9lkptrnj5rainnljcig.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">20a - Organizando formigas por cidade</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
, apliquei uma seleção aleatória da cidade inicial. </font><font style="vertical-align: inherit;">Você pode identificar inicialmente todas as formigas em apenas uma cidade.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tornar as formigas imprevisíveis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos introduzir a seguinte fórmula em nosso modelo: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/kd/ld/xz/kdldxzse05ththx-oipffhru9oq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
onde Pi é a probabilidade de transição ao longo do caminho do i-ésimo caminho, li é o comprimento da i-ésima transição, fi é a quantidade de feromônio na i-ésima transição, q é o valor que determina a “ganância” do algoritmo, p - o valor que determina o "rebanho" do algoritmo, com q + p = 1. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peguei emprestada essa fórmula do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em termos simples, essa fórmula permite calcular a probabilidade com que a formiga terá que fazer a transição para uma cidade específica. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora precisamos adicionar várias variáveis ​​sem as quais não podemos fazer. Por que voltar para a guia “Principal”, figura 21. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zk/ba/cv/zkbacvaft1obpjrs1kw9hblkjos.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 21 - Guia "Principal"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então, adicionamos a variável "numberAnt", na qual armazenaremos o tamanho da colônia de formigas. Definimos seu tipo como "int" e o valor inicial é 100. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/80/o2/w4/80o2w43ra-j_fwfabeunywmjkbm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 21 - Variável “numberAnt” A</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
seguir, selecione a população “myAnts” e defina o campo “Número inicial de agentes” para “numberAnt”. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A variável "p", que determinará a reorganização do algoritmo. Seu tipo é duplo e o valor inicial é 0,5. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A variável "q", que determinará a ganância do algoritmo. Seu tipo é duplo e o valor inicial é 0,5. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ge/m7/n0/gem7n0dj3rlhd_uu6aac3rrqyby.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 22 - Variáveis ​​"q e p"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Então, agora vamos definir um valor de feromônio aleatório para cada aresta (estrada) entre as cidades. Por que criar uma variável (matriz bidimensional) "matrixF". Defina-o na guia “Propriedades” no campo “Tipo”, selecione o valor “Outros” e escreva “duplo [] []” no campo o valor inicial “novo duplo [numberTown] [numberTown]” (Fig. 23). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/4d/oi/wq4doiphuc28xcg1a3vcveng4ms.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 23 - Criando uma matriz bidimensional "matrixF". Matriz de Feromônios</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em seguida, precisamos inicializar essa matriz. Em outras palavras, preencha-o com valores aleatórios. Tomamos o valor de feromônio aleatoriamente no intervalo de 0,1 a </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Para isso, na guia "Projetos", selecione o agente "Principal" com o mouse e, na guia "Propriedades", adicione o seguinte código ao campo "Na inicialização" (Fig. 23a):</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=uniform(<span class="hljs-number">0.1</span>,<span class="hljs-number">1</span>);<font></font>
	}<font></font>
} <font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/ob/an/ta/obanta0s5kb7vqnsc3wsn-qmbgg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">23a - Código de inicialização da matriz de feromônios</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora retornamos à guia “MyAnt” e procedemos ao cálculo da probabilidade de transição de acordo com a fórmula acima. </font><font style="vertical-align: inherit;">Selecione a transição entre "City_Choice" e "Motion" e altere o código no campo Action para o seguinte (Fig. 24):</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//       </span>
<span class="hljs-keyword">double</span> denominator=<span class="hljs-number">0</span>; 
<span class="hljs-comment">//          </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {	<span class="hljs-comment">//     </span>
	    <span class="hljs-comment">//  i   </span>
		denominator=denominator+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p));<font></font>
	} <font></font>
}<font></font>
<span class="hljs-comment">//      i </span>
<span class="hljs-keyword">double</span> Pi=<span class="hljs-number">0</span>;
<span class="hljs-comment">//    </span>
<span class="hljs-keyword">double</span> probility=uniform(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;main.myTowns.size(); i++) {
	<span class="hljs-comment">//        Pi</span>
	<span class="hljs-keyword">if</span> (isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//     i-      </span>
		Pi=Pi+(Math.pow(<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i)), main.q)*Math.pow(main.myTowns.get(i).f, main.p))/denominator;<font></font>
	}<font></font>
	<span class="hljs-comment">//      Pi      probility</span>
	<span class="hljs-keyword">if</span> (probility&lt;Pi &amp;&amp; isVisited.indexOf(i)==-<span class="hljs-number">1</span>) {
		<span class="hljs-comment">//       i  </span>
		<span class="hljs-keyword">this</span>.moveTo(main.myTowns.get(i));
		<span class="hljs-comment">//     </span>
		distance=distance+<span class="hljs-keyword">this</span>.distanceTo(main.myTowns.get(i));
		<span class="hljs-comment">//           </span><font></font>
		isVisited.add(i);<font></font>
		<span class="hljs-keyword">break</span>;<font></font>
	} <font></font>
}<font></font>
</code></pre><br>
<br>
<img src="https://habrastorage.org/webt/7u/gr/re/7ugrreytqo1mjwh43xeaagissqm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">24 - Definimos o comportamento da formiga com base na expressão analítica do item acima.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora </font><i><font style="vertical-align: inherit;">, vou</font></i><font style="vertical-align: inherit;"> explicar um pouco o que é o que:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">li - this.distanceTo (main.myTowns.get (i)), o valor do comprimento entre a posição atual da formiga e a cidade “i”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fi - main.matrixF [currentPos] [i], o valor do nível de feromônio entre a cidade atual e a cidade “i”;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">denominador - denominador + (Math.pow (this.distanceTo (main.myTowns.get (i)), main.q) * Math.pow (main.matrixF [currentPos] [i], main.p)); Pi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi - Pi + (Math.pow (this.distanceTo (main.myTowns.get (i)), main.q) * Math.pow (main.myTowns.get (i) .f, main.p)) / denominador, a probabilidade da formiga se mover da cidade atual para a cidade “i”.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, selecionamos a transição entre os blocos "Movimento" e "Todos ignorados" com o mouse e selecionamos "Quando a condição for atendida" no campo "Ocorre" e, no campo de condição, escrevemos a condição para a formiga parar "isVisited.size () == main.myTowns.size ()" (fig. 25). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/1w/qz/ag/1wqzagqllmjga_yqm5a8-9c_crg.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">25 - Determine as condições para parar a formiga e, em</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
seguida, execute o modelo “F5” e veja o que aconteceu. </font><font style="vertical-align: inherit;">As formigas viajam entre cidades com uma probabilidade calculada de acordo com a expressão analítica acima.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atualizando o valor do feromônio</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos fazer duas coisas. A primeira ação é aumentar o valor de feromônio na borda entre as cidades pelas quais a formiga passou. O segundo é a evaporação do feromônio nas bordas entre as cidades, que consiste em reduzir o valor dos feromônios em relação ao tempo de simulação.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Portanto, para começar com a primeira ação, atualizaremos o valor do feromônio da costela entre a cidade em que a formiga está localizada e aonde ele irá. O valor pelo qual aumentaremos o valor atual das bordas dos feromônios entre as cidades será calculado muito, muito simples. Tomamos nosso valor inicial máximo do valor de feromônio = 1 cu e divida-o pela distância entre a cidade em que a formiga está localizada e a cidade para onde ele irá. Consequentemente, quanto menor a distância, entre as cidades, maior será o valor pelo qual o nível do feromônio da costela será aumentado. Por que selecionamos o agente MyAnt na guia Projetos, use o mouse para selecionar a transição entre os blocos "City_title" e "Movement" e adicione o seguinte código ao campo de ação: "main.matrixF [currentPos] [i] = main.matrixF [currentPos] [i ] + 1 / this.distanceTo (main.myTowns.get (i); ”.O resultado deve ser como mostrado na Figura 26</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wr/zi/jb/wrzijbuaavovmagcktbz4yrhkw0.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 26 - Atualize o valor do nível de feromônios das costelas que a formiga passou:</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora vamos para o </font><i><font style="vertical-align: inherit;">passo</font></i><font style="vertical-align: inherit;"> 2 e criamos um evento que simula a evaporação do feromônio nas costelas entre as cidades. Por que, na guia Projetos, selecione o agente "Principal" e crie mais algumas variáveis ​​lá. A primeira é a "intensidade" - determinará a taxa (intensidade) de evaporação dos feromônios (valor inicial "0,5", tipo "duplo"). A segunda "Parte" - caracterizará a fração pela qual o valor do feromônio na borda diminuirá (Valor inicial "0,9", digite "duplo"). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rh/_8/ly/rh_8lydcrbmm7pkkitihtmsszi4.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. 27 - Crie as variáveis ​​"intensidade" e "Parte"</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, pegamos o elemento "Event" na "Palette" da guia "Agent" e transferimos para o agente "Main" e chamamos de "evaporação" - esse elemento simula a evaporação do feromônio nas bordas. </font><font style="vertical-align: inherit;">Clique nele com o mouse e, em "Propriedades", no campo "Tipo de evento", selecione o valor "Com uma determinada intensidade" no campo "Intensidade", escreva o nome da variável que armazena o valor de intensidade "intensidade". </font><font style="vertical-align: inherit;">O tempo de resposta é de segundos. </font><font style="vertical-align: inherit;">Em seguida, adicione o código abaixo à ação:</font></font><br>
<pre><code class="java hljs"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myTowns.size(); i++) {
	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j&lt;myTowns.size(); j++) {<font></font>
		matrixF[i][j]=matrixF[i][j]*Part;<font></font>
		<span class="hljs-keyword">if</span> (matrixF[i][j]&lt;<span class="hljs-number">0.1</span>) matrixF[i][j]=<span class="hljs-number">0.1</span>;<font></font>
	}<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando o evento "evaporação" é acionado, os níveis de feromônio na matriz matrixF serão atualizados. </font><font style="vertical-align: inherit;">Como resultado, você deve conseguir fazer o que é mostrado na Figura 28. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/p9/dl/qqp9dljysgcl9xg7jvydl74oees.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">28 - Crie o evento "evaporação"</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Determinar o vencedor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesta etapa, adicionaremos um código que determinará o vencedor da nossa maratona de formigas. O vencedor será aquele que formou a rota mais curta. Além de tudo, após o final da maratona, traçamos essa rota na tela. Para conseguir isso, criaremos três variáveis ​​"bestAnt", "bestDistance" e "numberFinish" no agente "Main". Na variável "bestAnt", armazenaremos o índice da formiga "mais rápida", o tipo da variável será "int" e o valor inicial será definido como "-1". Na variável "bestDistance", armazenaremos o valor atual da melhor extensão de rota entre cidades, o tipo da variável será "double" e o valor inicial será definido como infinito "infinito". Na variável "numberFinish", armazenaremos o número de formigas que terminaram em nossa maratona,o tipo da variável será "int" e o valor inicial é "0" (Fig. 29).</font></font><br>
<br>
<img src="https://habrastorage.org/webt/zd/2a/yw/zd2ayw0tmj6_wuft2sl2qz8tevu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">29 - Criar um evento de variáveis ​​A</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
seguir, criamos uma função que, após finalizar todas as formigas, traçará as linhas da melhor rota entre as cidades. </font><font style="vertical-align: inherit;">Por que a partir da "Paleta" arrastamos para o agente "Principal" um elemento com a função de nome. </font><font style="vertical-align: inherit;">Defina o nome da função como drawPath e, na guia Propriedades, no campo Corpo da função, adicione o seguinte código:</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//        </span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>; i++) {
	<span class="hljs-comment">//    </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();
	<span class="hljs-comment">//            i</span><font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i)).getY());<font></font>
	<span class="hljs-comment">//            i+1</span>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(i+<span class="hljs-number">1</span>)).getY());
	<span class="hljs-comment">//    ""</span><font></font>
	myLine.setColor(blue);<font></font>
	<span class="hljs-comment">//   </span><font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	<span class="hljs-comment">//   </span>
	myLine.setLineWidth(<span class="hljs-number">1</span>);
	<span class="hljs-comment">//    </span><font></font>
	presentation.add(myLine);	<font></font>
}<font></font>
	<span class="hljs-comment">//           </span>
	ShapeLine myLine = <span class="hljs-keyword">new</span> ShapeLine();<font></font>
	myLine.setX(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getX());<font></font>
	myLine.setY(myTowns.get(myAnts.get(bestAnt).isVisited.get(myAnts.get(bestAnt).isVisited.size()-<span class="hljs-number">1</span>)).getY());<font></font>
	myLine.setEndX(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getX());<font></font>
	myLine.setEndY(myTowns.get(myAnts.get(bestAnt).isVisited.get(<span class="hljs-number">0</span>)).getY());<font></font>
	myLine.setColor(blue);<font></font>
	myLine.setLineStyle(LINE_STYLE_SOLID );<font></font>
	myLine.setLineWidth(<span class="hljs-number">1</span>);<font></font>
	presentation.add(myLine);<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como resultado, você deve conseguir fazer o que é mostrado na Figura 29a. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/am/eq/1b/ameq1bhejnkldupsbngygcqqndw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">29a - Crie a função “drawPath”</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Agora voltamos às nossas formigas e adicionamos um código que determinará a formiga do vencedor, o comprimento da melhor rota e traçamos essa rota entre as cidades. </font><font style="vertical-align: inherit;">Por que, na guia "Projetos", selecione o agente "MyAnt", selecione o bloco "Todos ignorados" e adicione o seguinte código ao campo "Ação de logon":</font></font><br>
<pre><code class="java hljs"><span class="hljs-comment">//    </span><font></font>
main.numberFinish++;<font></font>
<span class="hljs-comment">//      </span>
<span class="hljs-keyword">if</span> (main.bestDistance&gt;distance) {
	<span class="hljs-comment">//           </span>
	<span class="hljs-comment">//      </span><font></font>
	main.bestDistance=distance;<font></font>
	<span class="hljs-comment">//    </span>
	main.bestAnt = <span class="hljs-keyword">this</span>.getIndex();<font></font>
}<font></font>
<span class="hljs-comment">//         Main   </span>
<span class="hljs-keyword">if</span> (main.numberFinish==main.myAnts.size()) main.drawPath();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ele deve sair como mostrado na Figura 30. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/68/ss/7c/68ss7cvbvbfbwkz26u6abdvwit8.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">30 - Adicionando lógica ao bloco “All Bypassed”.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Depois, você pode pressionar “F5” e executar o modelo. </font><font style="vertical-align: inherit;">As formigas correm em busca de rotas e, quando as cidades terminam, a linha azul se conecta, qual é a melhor rota.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adicionar um histograma ao modelo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para que o modelo se torne mais científico, você deve adicionar um gráfico. Portanto, adicionaremos não apenas um gráfico e um histograma que nos mostrem a distribuição do comprimento das rotas que as formigas superaram. Por que, na guia "Projetos", selecione o agente "Principal" e vá para o seu espaço. Além disso, na "Paleta", vamos para a guia "Estatísticas" e, de lá, para o agente "Principal", transferimos o elemento "Dados do histograma" e diretamente o próprio "Histograma". Em seguida, selecionamos os histogramas com o mouse e, na guia "Propriedades", no campo "Dados", especificamos o nome dos nossos "Dados do histograma", ou seja, "Dados". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ele deve aparecer como mostrado na Figura 31 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7v/bz/6i/7vbz6ikwgs7t0iintfnp2jz6wyw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. 31 - Construindo um cronograma</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois disso, teremos que retornar novamente à nossa formiga e fazê-la preencher o "Histograma" com os valores do comprimento da rota. </font><font style="vertical-align: inherit;">Por que, na guia Projetos, selecione o agente "MyAnt" e vá para o seu espaço. </font><font style="vertical-align: inherit;">Em seguida, selecione o bloco "All Bypass" e adicione uma linha a ele "main.data.add (distance);". </font><font style="vertical-align: inherit;">Ele deve sair como mostrado na Figura 32. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/bf/wa/zl/bfwazly38mrpwolpx4awmowj10o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">32 - Construindo um gráfico</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Em seguida, pressione "F5" e prossiga para estudar o comportamento do algoritmo ant. </font><font style="vertical-align: inherit;">Deverá resultar em algo, como mostrado na Figura 33. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/3w/8w/is/3w8wissyoccebi-8ona5px-cop0.gif"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">33 - Modelagem</font></font></i><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusão</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, no final, recomendo adicionar mais imprevisibilidade ao modelo. </font><font style="vertical-align: inherit;">Para isso, na guia "Projetos", selecione o elemento "Simulação: principal" com o mouse e defina o parâmetro "Aleatoriedade" como "Número inicial aleatório (execuções únicas)" na guia de propriedades - isso fará com que cada modelo seja único (Fig. 34). </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ie/ow/i6/ieowi6e32wykpsao8owpxbwzwzu.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FIG. </font><font style="vertical-align: inherit;">34 - Fazendo execuções aleatórias</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Obrigado pela atenção! </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O código-fonte pode ser baixado no GitHub</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt500978/index.html">Retrays atrasados ​​por RabbitMQ</a></li>
<li><a href="../pt500980/index.html">Brain rx</a></li>
<li><a href="../pt500984/index.html">Apple ruim ou feliz dia da rádio, geeks</a></li>
<li><a href="../pt500986/index.html">Monitoramento no data center: como alteramos o antigo BMS para um novo. Parte 3</a></li>
<li><a href="../pt500992/index.html">Como está o Gerenciamento de Desempenho nas melhores empresas de TI</a></li>
<li><a href="../pt500996/index.html">Como se tornar um engenheiro de DevOps em seis meses ou até mais rápido. Parte 1. Introdução</a></li>
<li><a href="../pt501002/index.html">Umka: nova linguagem de script estaticamente tipada</a></li>
<li><a href="../pt501004/index.html">Faça. Trabalhos</a></li>
<li><a href="../pt501006/index.html">Somos amigos STM32 com display LCD 1604 no barramento I2C (biblioteca HAL)</a></li>
<li><a href="../pt501008/index.html">Pavimentação de dominós</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>