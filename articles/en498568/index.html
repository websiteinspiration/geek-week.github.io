<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßöüèæ üõ´ üë™ Inside AMD's 1970s Am2901 multi-chip sectional microprocessor üõ§Ô∏è üë®üèº‚Äçüíª üë©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inside the 1970s AMD Am2901 multi-chip sectional microprocessor, 
 
 you may be familiar with the advanced processors manufactured by Advanced Micro D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Inside AMD's 1970s Am2901 multi-chip sectional microprocessor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/498568/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the 1970s AMD Am2901 multi-chip sectional microprocessor, </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
you may be familiar with the advanced processors manufactured by Advanced Micro Devices. But AMD started producing processors back in 1975 when it first introduced its Am2901. It was the so-called multi-chip sectional processor: each chip processed 4 bits, and to increase the word size, several chips were used simultaneously. This approach was used in the 1970s and 1980s to create 16, 32 or 64 bit processors (for example), when they could not place the whole processor on one fast chip. There were processors on the same chip, but their </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MOS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transistors Worked Slower. Over time, CMOS processors became faster than bipolar transistor processors, and when their speed grew enough, almost all manufacturers switched to them. </font><i><font style="vertical-align: inherit;">Photo of a crystal with an Am2901 chip. The metal layers of the chip are visible; silicon is at the bottom. At the edges of the crystal, tiny conductors connect the chip with external contacts.</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/pu/kb/yt/pukbytzadj8mboqwhicko7mpdia.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Am2901 chip gained great popularity, it was used in a variety of systems, from the Battlezone video game to the VAX-11/730 minicomputer, from the Xerox Star workstation to the on-board Magic 372 computer of the F-16 fighter. A faster version of this processor, Am2901C, used </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emitter-coupled logic</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ESL) to improve performance. In this article, I dissect Am2901C, examine its crystal under a microscope and explain how ESL circuits make it possible to implement an arithmetic logic unit (ALU).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
By the way, in the documentation for Atari Battlezone there is no mention of a specific model of the Am2901 chip, however there is a footnote for the part number 137004-001, which they call the ‚Äútransistor array‚Äù. </font><font style="vertical-align: inherit;">Moreover, intentional distortions were made in the given pinout diagram of the chip, and 20 address pins and 8 data pins are shown to make the chip look like ROM (unlike, for example, the 7400 series chips described exactly). </font><font style="vertical-align: inherit;">Atari may have tried to prevent the cloning of its video games by hiding the models of some key chips. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A popular alternative for Am2901 in many microcomputers was the </font><font style="vertical-align: inherit;">ALU </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">74181</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> chip </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">It provided the same arithmetic and logic functions as Am2901, but not its registers.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multi-chip sectional microprocessor</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You might be wondering how several processor chips can work together and support words of arbitrary length. The bottom line is that the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microprocessor section</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (MS) is a building brick, not the entire processor, and it needs separate circuits to decode instructions and manage the system. The MS had registers, they performed arithmetic and logical operations with data, and the control chip (such as Am2901) told the MS what to do. Each machine instruction was divided into smaller steps, micro-instructions stored in the ROM microcode. In this case, the set of instructions was determined by the microcode, and not Am2901, so </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">almost any set of instructions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> could be supported </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Due to the fact that sections in such a processor are not completely independent from each other, certain difficulties arise during the operation of the processor. For example, when adding two numbers, the transfer from one section must be transferred to another. Also, joint work of several sections requires operations such as checking a sign or checking for a zero result. The Am2901 chip has special outputs to support these functions. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Is Am2901 a microprocessor? From my point of view, Am2901 is only a part of the processor, but it all depends on how to determine the ‚Äúmicroprocessor" (I described my thoughts on this in detail in a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">separate article</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Interestingly, in the USSR they were more inclined towards sectional microprocessors than in the USA. And if in the West the word ‚Äúmicroprocessor‚Äù usually means a processor on a single chip, in the USSR processors on a single chip or from several sections were </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usually not distinguished</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Multi-chip sectional microprocessors (MSMs) were somewhere in the middle between microprocessor chips and a computer made from simple </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TTLs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chips. </font><font style="vertical-align: inherit;">At that time, assembling a computer from TTL chips was much faster than making a microprocessor, but this required a lot of boards with chips. </font><font style="vertical-align: inherit;">The use of MSM allowed to maintain the advantage in speed, while reducing the number of chips used. </font><font style="vertical-align: inherit;">MSM also provided greater flexibility compared to the microprocessor, allowing the designer to customize the set of instructions and other architectural features.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Crystal overview</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The photo below shows the Am2901 crystal and highlights the key functional blocks. For this photo, I removed the metal layers so that silicon and transistors can be seen. The largest functional block of the chip is the register memory in the center. The chip has 16 4-bit registers (you can see 16 columns and 4 rows in the memory array). To the left and right of the memory block are the memory driver circuits that control writing and reading. </font><i><font style="vertical-align: inherit;">Photo crystal Am2901; Key function blocks are marked. External circuits mainly consist of buffers that convert signals between external TTLs and internal ESLs. </font></i><i><font style="vertical-align: inherit;">Am2901 Complete Flowchart</font></i></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/yo/3q/wx/yo3qwxlpuizsyweaio3_r95owtm.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><img src="https://habrastorage.org/webt/dp/m4/x8/dpm4x8wwtf1uv6-_6-shxaqnpzk.jpeg"></a><br>
<i><font style="vertical-align: inherit;"></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The arithmetic logic device (ALU) of the chip is engaged in arithmetic (addition and subtraction) and logical operations (AND, OR, excluding OR). The first section of the ALU is a large block at the bottom left; it consists of four rows, since it is a 4-bit ALU. ALU also has logic that generates a carry output for addition, and uses a quick technique called ‚Äúcarry lookahead‚Äù. Then, the ALU uses the transferred values ‚Äã‚Äãto generate the sum in parallel. Finally, the output circuits process and buffer the amount, and send it to the output contact.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A transfer with a preview uses the Generate and Propagate signals to determine if a bit at each position produces its own transfer or passes the incoming one. For example, if you add 0 + 0 + C (C is the transfer), the transfer cannot be eliminated from this addition, regardless of its size. On the other hand, if you add 1 + 1 + C, the transfer will appear anyway, regardless of what C is. Finally, in the cases 0 + 1 + C (or 1 + 0 + C), the transfer will be transferred further if C was nonzero. As a result, simple logic gates create a G (Generate) signal for each bit if both bits are equal to 1, and a P (Propagate) signal if both bits are not equal to 0.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The transfer formula depends on the location of the bit. For example, consider transferring from bit 0 to bit 1. It will happen if the P0 flag is set (that is, the transfer has arisen or is being transmitted), and if its transfer has appeared in this bit, or it has come to it from other bits. Then C1 = P0 AND (Cin OR G0). In higher order hyphenation, the number of options is growing, and their complexity is constantly increasing. For example, consider a transfer to bit 2. First, P1 must be cocked so that the transfer goes from bit 1. In addition, the transfer was either created by bit 1 or transferred from bit 0. Finally, the first transfer also had to come from somewhere take it: it was either a transfer that came from bit 0, or a transfer generated by bit 1. If you put all this into a formula, you get the function used in Am2901: C2 = P1 AND (G1 OR P0) AND (C0 OR G0 OR G1).The formulas for the different transfers and the external P and G are given in</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">specifications</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , fig. </font><font style="vertical-align: inherit;">9. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Empty rectangles at the edges of the chip are areas for connecting the chip to the outside world. </font><font style="vertical-align: inherit;">Next to them are schemes for sending and receiving signals. </font><font style="vertical-align: inherit;">In particular, since the chip communicates with external circuits using TTL signals, but uses ESL internally, these circuits convert between TTL and ESL voltages. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The chip has two shift registers capable of shifting the word one bit to the right or left. </font><font style="vertical-align: inherit;">Register Q - A 4-bit register based on triggers. </font><font style="vertical-align: inherit;">Finally, the reference voltage circuit generates the exact reference voltages necessary for the operation of the ESL.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to see a crystal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To look inside the chip, you usually have to dissolve its plastic case in hazardous acids. However, I did not buy the Am2901 chip in a plastic case, but in a ceramic case. I just walked along the seam of the chip with a chisel and disconnected the two halves, which allowed me to get to the crystal inside. A silicon crystal is a small rectangle in the center of the chip. Thin conductors connect the crystal pads to the lead frame, which leads to 40 external chip contacts. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/99c/129/fc7/99c129fc7bb08492909208f99eac8fea.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Am2901 after disconnecting the two halves of the ceramic body.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
To obtain high-resolution photos of the chip, I used a special metallographic microscope. In the photo below you can see the AMD logo. Above is a conductor soldered to the site. The chip has two metal layers that create an electrical circuit, visible in the photo on the right.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a44/50c/7ed/a4450c7edec0f7da45e3ae37c0feedd6.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Close-up photo of the chip - the inscription 4301X (probably the part number) and ‚Äú1983 AMD‚Äù are visible.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
I collected a large high-resolution photo from several small microscope images (read more about the process of creating crystal photos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Then I removed the metal layers and took another set of silicon photographs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The close-up photo below shows four transistors and three resistors. Different areas of silicone have different impurities, giving them different properties, and these areas are visible under a microscope. The chip is based on </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bipolar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPN transistors different from MOS transistors of modern computers. </font><font style="vertical-align: inherit;">The base transistor (p-type silicon), emitter (n-type silicon) and collector (n-type silicon) are marked on the left transistor [B, E, C]. </font><font style="vertical-align: inherit;">Light rectangles are the contacts of silicon and the metal layer that used to be on top. </font><font style="vertical-align: inherit;">The two transistors on the right have one common large collector. </font><font style="vertical-align: inherit;">On this chip, transistors with a common collector are often found. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/93f/bb8/ea9/93fbb8ea97a759777c91b35f81cac472.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Below are three resistors. </font><font style="vertical-align: inherit;">A resistor is obtained by adding impurities to silicon that increase its resistance. </font><font style="vertical-align: inherit;">The accuracy of resistors in ICs is usually poor. </font><font style="vertical-align: inherit;">They also turn out to be relatively large - here they are the same size with transistors, while others are much larger. </font><font style="vertical-align: inherit;">Therefore, when designing ICs, they try to minimize the number of resistors.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Emitter-related logic</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Logic schemes can be created in very different ways. Almost all modern computers use the CMOS logic system (a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">complementary metal-oxide-semiconductor structure</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), where the valves are made up of MOS transistors. In the era of minicomputers, TTL was very popular. ESL was a faster, but less common scheme. The disadvantage of ESL was greater energy consumption (the 1985 Cray-2 supercomputer used ESL valves to increase its speed, but it had to be cooled with liquid freon).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Most of the advantages of ESL in speed were due to the fact that the transistors were not fully turned on. This allowed the transistors to very quickly change the current paths. In addition, the difference between the voltage for values ‚Äã‚Äã0 and 1 was small (of the order of 0.8 V), so the signals could switch back and forth quite quickly. For example, in TTL valves, the voltage difference is about 3.2 V (the signals can switch at a speed of about 1 V per nanosecond, so with a large voltage difference there are delays of several nanoseconds). On the other hand, a small voltage difference led to an increase in the sensitivity of ESL to electrical noise.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The first versions of Am2901 used TTL, but in 1979 AMD introduced its faster version, Am2901C. The Am2901C internally used ESL for speed, but on the outside it maintained TTL voltage, making it easy to use in TTL computers. This post describes the Am2901C variant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESL is based on a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">differential pair</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> system </font><font style="vertical-align: inherit;">- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operational amplifiers</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> work in a similar way </font><font style="vertical-align: inherit;">. The idea of ‚Äã‚Äãa differential pair (see below) is that a fixed sense flows according to the scheme. If the voltage at the input on the left is greater than on the right, then the left transistor will turn on and most of the current will go through the left branch. And vice versa (note that transistor emitters are connected - hence the name of emitter-coupled logic.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/6a8/0d4/cd6/6a80d4cd63452c64136a0eccfbd6f019.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Differential pair. If the voltage at the left input (red) is higher, most of the current will go along the left path, and vice versa.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Some modifications allow you to turn a differential pair into an ESL valve. Firstly, the voltage in one branch is fixed and becomes reference, somewhere in the interval between levels 0 and 1. Then, if the input is higher than the reference voltage, it will be considered as 1, and if lower - as 0. Then, the output is connected to the branch transistor (green), which gives the output signal by buffering the voltage of the branch. The inverter circuit is shown below, because if the input voltage is high, the current through the left resistor will pull the output down. To increase performance, the lower resistor was replaced by a drain (magenta), consisting of a transistor and a resistor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The drain at the bottom of the ESL valve gives, in fact, a constant current controlled by the incoming voltage V </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CS</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . This option is better than a simple resistor, because the current through the resistor varies depending on the voltage, depending on the input voltages. Also, such a circuit saves space, since it uses a smaller resistor. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a50/362/b74/a50362b747b4d72ac7a32878ea505b38.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESL inverter. The upper right resistor can be omitted because it is not connected anywhere.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
You can build a more complex ESL valve by adding more inputs. In the diagram below, a second input transistor (2) is added parallel to the first (1). Current will flow through resistor R1 if there is 1 at input A or B (that is, the voltage will be higher than the reference). In this case, the output is pulled down, and we get the NOR valve. Using other configurations, you can make AND, XOR valves or more complex circuits. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/c59/97e/883/c5997e883d922023dc92fc0984dfbb74.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESL NOR valve</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The diagram above shows a NOR gate - such as it is implemented on a chip. The photo below shows the corresponding physical diagram of the valve. On the left is a silicon crystal layer, where transistors and resistors are visible. On the right are metal tracks in the same part of the chip. Above are transistors 1 and 2, receiving an input signal. Each of them has a base on top, and an emitter in the middle. Transistors have a common collector - a white rectangle below. Resistors R1 and R2 are rectangles of silicon. All transistors in the middle (including 3 and 4) have a common collector connected twice to the plus (non-numbered transistors and resistors belong to other valves). </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/838/b90/f81/838b90f8170aa8d5b1be9d84a55fa103.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NOR valve implemented on Am2901 crystal</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
It can be seen from the conductors on the right that the top layer provides the connection of horizontal conductors to the plus, reference voltages, VCS drain and to the minus (it can be seen that the plus and minus are made wider to support high currents). </font><font style="vertical-align: inherit;">Underneath are the conductors connecting the transistors. </font><font style="vertical-align: inherit;">From above, inputs A and B are connected to the bases of transistors. </font><font style="vertical-align: inherit;">The rest of the wiring is more difficult to trace, since it is covered by the top layer. </font><font style="vertical-align: inherit;">But you can, for example, see the connection between transistor 4, the collector of transistors 1 and 2, and R1. </font><font style="vertical-align: inherit;">By carefully studying the photographs of the crystal, you can understand all the wiring and reverse engineer the chip logic.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arithmetic logic unit (ALU)</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Arithmetic Logic Unit (ALU) in the Am2901 chip performs 4-bit arithmetic or logic operations. It supports 8 different operations: addition, subtraction and bitwise logical operations (it does not deal with multiplication and division). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The block diagram below shows the structure of the AL29 Am2901. First, the selector (multiplexer) selects two inputs from potential sources. The value of D is transmitted to the data contacts of the chip, usually to the processor data bus. A - this is the value of one of the 16 entries in the chip register file, selected by contacts A0-A3; B works in a similar way. A constant value of 0 can be fed to ALU. Finally, Q is the contents of the Q register (optional separate register). Many data sources give the chip more flexibility.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/d9a/9aa/586/d9a9aa586257e3e6db1eae6c243ac345.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Block diagram of the ALU Am2901 from the chip specification. ALU performs one of eight functions on two 4-bit inputs, R and S. On the right are various outputs from the chip: G, P, carry output, sign, overflow, zero test.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Two selected values, R and S, are fed to the ALU, which performs the selected operation and outputs the result to F. Also, the ALU accepts the carry-in amount and transfers the carry-out value (CN + 4) ; this allows you to combine several ALUs to handle longer words. The outputs G and P are used for transferring with a preview, and the sign, overflow and test of zeros can be used as conditional processor codes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Briefly describe the ALU circuit, starting with the selector. The first two boxes of the selector below (D and A) select the first argument of ALU, and the last three (A, Q and B) select the second argument. Each selector implements the Select ‚Ä¢ (Value ‚äï Invert) function, where Value is the potential input value, Select is 1 to select this value, and Invert is 1 to invert the value (since ALU is 4-bit, 4 bits are selected; each selector is implemented using four ESL valves). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The desired value is selected by including one of the Select lines. If none of them is turned on, then the value coming to the ALU will be 0. Also, the selector can invert the input; the chip performs subtraction by adding the inverted value. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/323/a63/462/323a6346266c7a1116638ebd7e18f7fe.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first part of ALU consists of four horizontal layers, one per bit</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The diagram below shows the AND-XOR circuit used in ALU AM2901, which implements operation A '‚Ä¢ (B ‚äï C). I will briefly describe how it works. If the voltage at input A is high, current flows through the left transistors, pulling the output down. If B and C are high voltage, the current through the left transistors B and C draws the output down. If the voltage on V and C is low, the current through the transistors V </font></font><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> draws the output down. If B and C have a different voltage, the current goes from transistors +, and the output remains high voltage. The bottom line is that a single ESL valve can implement complex functionality. With most logic gates, XOR is harder to implement. To me personally, the ESL logic resembles the relay of the 1920s, because it switches between the two current paths, and not just turns on and off.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/3j/oq/iu/3joqiu-d6qnv7rewldbmxg0m000.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
After selecting two inputs for the ALU, it calculates the ‚ÄúPropagate‚Äù (P) and ‚ÄúGenerate‚Äù (G) bits for each pair of incoming bits. This is part of the preview transfer procedure used for quick addition. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The photo below shows the remaining parts of the ALU circuit (for a change, this photo has a metal layer, unlike previous photos, where there was only silicon). Signals P and G from the previous circuit pass into two transfer computation blocks. The lower transfer unit calculates the external P, G, and transfer signal with a preview for several chips; this allows you to quickly add long words.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The transfer technique with preview can be implemented on several chips to quickly add numbers larger than 4 bits. Each chip generates Generate and Propagate signals, telling whether it will generate a transfer or transmit an incoming transfer. These signals are combined with a transfer generator chip with a preview - such as that of Am2902. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The upper transfer unit calculates the internal transfers. The ‚Äúsum‚Äù scheme calculates the sum of each bit using hyphenation, and the values ‚Äã‚Äãof P and G. It is important that due to the hyphenation hyphenation, the sum of each bit can be calculated in parallel. Finally, the output circuit converts the internal ESL signals to TTL signals and controls the four output contacts. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/f4c/aff/c1f/f4caffc1fc927034efc1e722d61e98a2.jpg"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The rest of the ALU circuit</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The chip uses some interesting techniques that allow you to use the adder for eight operations. The selector circuit described earlier can optionally complement its input. This is used for subtraction, as well as for some of the logical functions. When calculating logical functions (instead of adding / subtracting), transfer calculation is disabled. During logical operations, bits are not affected by what happens to other bits. Finally, the XOR circuit of the adder turns into the AND circuit by increasing the P signals to the maximum. Thus, instead of using eight different circuits for eight ALU operations, the chip uses a single circuit with some carefully selected tweaks.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The chip uses the values ‚Äã‚Äãof P and G to generate the sum of the inputs R and S with the carry C. The sum (R ‚äï S ‚äï C) ', is calculated as ((P' ‚à® G) ‚äï C) ', where P = R‚à®S, and G = R ‚Ä¢ S. If P equals 1, then (P '‚à® G) reduces to G equal to R ‚Ä¢ S. It turns out that, by changing P, the same circuit can be used to calculate AND from the input values ‚Äã‚Äãof R and S.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The table below shows the 8 operations performed by ALU. Three bits of instructions are fed to the chip and used to select the operation: I5, I4 and I3. The ‚Äúfunction‚Äù column shows the functions according to the documentation, and the ‚Äúcalculation‚Äù column shows how each of the bits is calculated. Note that all operations are ultimately reduced to exclusive OR (‚äï) or AND (‚àß). Addition is done by the bitwise XOR of the two arguments and carry bits. Subtraction is carried out through the addition of the argument and subsequent addition. For example, adding the complement R (R ') is the same as subtracting R. Bit I3 complements R, and bit I4 complements S. Operations with exclusive OR (EXOR and EXNOR) use the same elements as addition, but with transfer calculation lock. The AND operation is performed by blocking the signal G. Finally, OR is calculated according to de Morgan law, R '‚àß S'= (R ‚à® S) '. The point is that Am2901 does not require separate elements for addition, subtraction, AND, OR and EXOR - most of the elements are used in each of the operations.</font></font><br>
<br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Symbolic notation</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I5</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I4</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I3</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Function</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculation</font></font></th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADD</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R plus s</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R ‚äï S ‚äï Carry</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SUBR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S minus r</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R '‚äï S ‚äï Carry</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SUBS</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R minus s</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R ‚äï S '‚äï Carry</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R OR S</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(R '‚àß S') ‚äï 1</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AND</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R AND S</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R ‚àß S</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NOTRS</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R 'AND S</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R '‚àß S</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXOR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R EX OR S</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R ‚äï S '‚äï 1</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXNOR</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R EX NOR S</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R '‚äï S' ‚äï 1</font></font></td>
</tr>
</tbody></table></div><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The Am2901C chip is of interest as an example of high-speed ESL, a relatively rare logical family. </font><font style="vertical-align: inherit;">The ALU chip is distributed on the bottom of the chip, implements eight different functions, and uses preview transfer to speed up the work. </font><font style="vertical-align: inherit;">Although the chip is quite complex, careful examination under a microscope helps to understand its work.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Multi-chip sectional processors, such as the Am2901, were used in microcomputers and many other systems in the 1970s and 1980s. </font><font style="vertical-align: inherit;">However, in the end, improvements in CMOS technology enabled the implementation of a fast processor on a single chip, which made this technology obsolete. </font><font style="vertical-align: inherit;">And although the Am2901 probably contains about a thousand transistors, and it runs at 16 MHz, today AMD manufactures processors containing billions of transistors and operating at 4 GHz.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en498556/index.html">Hans Peter Lun and the birth of the hash algorithm</a></li>
<li><a href="../en498560/index.html">Web components in a real project</a></li>
<li><a href="../en498562/index.html">Contrary to quarantine: how we transferred our internships to a remote format</a></li>
<li><a href="../en498564/index.html">Rendering optimization for Mobile, part 2. The main families of modern mobile GPUs</a></li>
<li><a href="../en498566/index.html">Resilience Engineering: Notes from the REDeploy Conference</a></li>
<li><a href="../en498572/index.html">Freaky discounts? Shares of CRM vendors on the occasion of the transition to udalenka</a></li>
<li><a href="../en498574/index.html">Why did I decide to develop games, or a nostalgic trip for zero</a></li>
<li><a href="../en498576/index.html">How we developed the field for entering new messages in our messenger (Gem4me)</a></li>
<li><a href="../en498580/index.html">Quantification of the "bowl effect" on tomographic images</a></li>
<li><a href="../en498582/index.html">Get and switch WebVTT subtitles in ExoPlayer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>