<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≠ üë©üèæ‚Äçüåæ üôÖüèª Detalhes sobre o pacote Provider for Flutter üëÄ üîî üßëüèΩ‚Äçü§ù‚ÄçüßëüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° Habr! 
 
 Nossos planos de m√©dio prazo incluem o lan√ßamento do livro Flutter. Em rela√ß√£o √† linguagem do Dart como t√≥pico, ainda assumimos uma posi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Detalhes sobre o pacote Provider for Flutter</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/503074/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ol√° Habr! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nossos planos de m√©dio prazo incluem o lan√ßamento do livro Flutter. </font><font style="vertical-align: inherit;">Em rela√ß√£o √† linguagem do Dart como t√≥pico, ainda assumimos uma posi√ß√£o mais cautelosa, portanto, tentaremos avaliar sua relev√¢ncia de acordo com os resultados deste artigo. </font><font style="vertical-align: inherit;">Ele se concentrar√° no pacote </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provider</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e, portanto, no gerenciamento de estado no Flutter.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O Provider √© um pacote de gerenciamento de estado escrito por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remy Rusle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e adotado pelo Google e pela comunidade Flutter. </font><font style="vertical-align: inherit;">Mas o que √© gerenciamento de estado? </font><font style="vertical-align: inherit;">Para iniciantes, o que √© uma condi√ß√£o? </font><font style="vertical-align: inherit;">Deixe-me lembr√°-lo de que o estado s√£o apenas dados para representar a interface do usu√°rio no seu aplicativo. </font><font style="vertical-align: inherit;">O gerenciamento de estado √© uma abordagem para criar esses dados, acessando, manipulando e descartando-os. </font><font style="vertical-align: inherit;">Para entender melhor o pacote do provedor, descrevemos brevemente o hist√≥rico do gerenciamento de estado em Flutter.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. StatefulWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatelessWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um componente simples da interface do usu√°rio que √© exibido apenas quando h√° dados. N√£o </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h√° "mem√≥ria"; √© criado e destru√≠do conforme necess√°rio. O Flutter tamb√©m possui um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatefulWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , no qual h√° uma mem√≥ria, gra√ßas a ele um sat√©lite de longa dura√ß√£o - o objeto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">State</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Essa classe possui um m√©todo </font></font><code>setState()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, quando chamado, √© lan√ßado um widget que reconstr√≥i o estado e o exibe em um novo formul√°rio. Essa √© a forma mais simples de gerenciamento de estado do Flutter, fornecida imediatamente. Aqui est√° um exemplo com um bot√£o que sempre exibe a hora em que foi pressionado pela √∫ltima vez:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyWidgetState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyWidget</span>&gt; </span>{
  <span class="hljs-built_in">DateTime</span> _time = <span class="hljs-built_in">DateTime</span>.now();  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(_time.toString()),<font></font>
      onPressed: () {<font></font>
        setState(() =&gt; _time = <span class="hljs-built_in">DateTime</span>.now());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, qual √© o problema dessa abordagem? </font><font style="vertical-align: inherit;">Suponha que seu aplicativo tenha algum estado global armazenado na raiz </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ele cont√©m dados destinados ao uso em v√°rias partes da interface do usu√°rio. </font><font style="vertical-align: inherit;">Esses dados s√£o compartilhados e passados ‚Äã‚Äãpara cada widget filho na forma de par√¢metros. </font><font style="vertical-align: inherit;">Quaisquer eventos nos quais se planeja alterar esses dados ser√£o exibidos na forma de retornos de chamada. </font><font style="vertical-align: inherit;">Assim, atrav√©s de todos os widgets intermedi√°rios, muitos par√¢metros e retornos de chamada s√£o transmitidos, o que pode levar a confus√£o em breve. </font><font style="vertical-align: inherit;">Pior, quaisquer atualiza√ß√µes na raiz mencionada anteriormente levar√£o a uma reconstru√ß√£o de toda a √°rvore de widgets, o que √© ineficiente.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. InheritedWidget</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InheritedWidget</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um widget especial cujos descendentes podem acess√°-lo sem um link direto. </font><font style="vertical-align: inherit;">Apenas ao voltar para </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um widget consumidor pode se registrar para uma reconstru√ß√£o autom√°tica, o que ocorrer√° ao reconstruir um widget ancestral. </font><font style="vertical-align: inherit;">Essa t√©cnica permite organizar com mais efici√™ncia a atualiza√ß√£o da interface do usu√°rio. </font><font style="vertical-align: inherit;">Em vez de reconstruir grandes partes do aplicativo em resposta a uma pequena mudan√ßa de estado, voc√™ pode selecionar seletivamente apenas os widgets espec√≠ficos que precisam ser reconstru√≠dos. </font><font style="vertical-align: inherit;">Voc√™ j√° trabalhou </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sempre que usou </font></font><code>MediaQuery.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ou </font></font><code>Theme.of(context)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">√â verdade que √© menos prov√°vel que voc√™ tenha implementado seu pr√≥prio InheritedWidget com preserva√ß√£o de estado. </font><font style="vertical-align: inherit;">O fato √© que implement√°-los corretamente n√£o √© f√°cil.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. ScopedModel</font></font></h4><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© um pacote criado em 2017 por Brian Egan, que facilita o uso </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para armazenar o estado do aplicativo. </font><font style="vertical-align: inherit;">Primeiro, voc√™ precisa criar um objeto de estado que herda de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Model</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e depois cham√°- </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lo quando suas propriedades mudarem. </font><font style="vertical-align: inherit;">A situa√ß√£o √© remanescente da implementa√ß√£o da interface </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PropertyChangeListener</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> em Java.</font></font><br>
<br>
<pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span> </span>{<font></font>
  String _foo;  String get foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-function"><span class="hljs-keyword">void</span> set <span class="hljs-title">foo</span><span class="hljs-params">(String value)</span> </span>{<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fornecer nosso objeto de estado, envolvemos esse objeto em um widget </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na raiz do nosso aplicativo:</font></font><br>
<br>
<pre><code class="java hljs">ScopedModel&lt;MyModel&gt;(<font></font>
  model: MyModel(),<font></font>
  child: MyApp(...)<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, qualquer </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">widget </font><font style="vertical-align: inherit;">descendente poder√° acessar </font><font style="vertical-align: inherit;">usando o widget </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ScopedModelDescendant</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">A inst√¢ncia do modelo √© passada para o par√¢metro </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> ScopedModelDescendant&lt;MyModel&gt;(<font></font>
      builder: (context, child, model) =&gt; Text(model.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qualquer widget descendente tamb√©m poder√° atualizar o modelo, o que provocar√° automaticamente uma reconstru√ß√£o de qualquer </font></font><code>ScopedModelDescendants</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(desde que nosso modelo chame corretamente </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = ScopedModel.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ganhou popularidade no Flutter como uma ferramenta para gerenciamento de estado, mas seu uso √© limitado ao fornecimento de objetos que herdam a classe </font></font><code>Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e usam esse padr√£o de notifica√ß√£o de altera√ß√µes.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. BLoC</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Na confer√™ncia do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google I / O '18</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , o </font><font style="vertical-align: inherit;">padr√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Business Logic Component</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (BLoC) </font><font style="vertical-align: inherit;">foi introduzido </font><font style="vertical-align: inherit;">, que serve como mais uma ferramenta para extrair o estado dos widgets. As classes BLoC s√£o componentes de longa dura√ß√£o que n√£o s√£o da interface do usu√°rio que preservam o estado e o exp√µem como fluxos e receptores. Levando a l√≥gica de estado e de neg√≥cios al√©m da interface do usu√°rio, voc√™ pode implementar o widget como simples </font></font><code>StatelessWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e usar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamBuilder</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para reconstru√ß√£o autom√°tica. Como resultado, o widget "fica burro" e fica mais f√°cil testar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Exemplo de classe BLoC:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBloc</span> </span>{
  <span class="hljs-keyword">final</span> _controller = StreamController&lt;MyType&gt;();  Stream&lt;MyType&gt; <span class="hljs-keyword">get</span> stream =&gt; _controller.stream;<font></font>
  StreamSink&lt;MyType&gt; <span class="hljs-keyword">get</span> sink =&gt; _controller.sink;<font></font>
  <font></font>
  myMethod() {<font></font>
    <span class="hljs-comment">//  </span><font></font>
    sink.add(foo);<font></font>
  }  dispose() {<font></font>
    _controller.close();<font></font>
  }<font></font>
}<font></font>
 ,   BLoC:<font></font>
<span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
 <span class="hljs-keyword">return</span> StreamBuilder&lt;MyType&gt;(<font></font>
  stream: myBloc.stream,<font></font>
  builder: (context, asyncSnapshot) {<font></font>
    <span class="hljs-comment">//  </span><font></font>
 });<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O problema com o padr√£o BLoC √© que n√£o √© √≥bvio como criar e destruir objetos BLoC. </font><font style="vertical-align: inherit;">Como a inst√¢ncia foi criada </font></font><code>myBloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no exemplo acima? </font><font style="vertical-align: inherit;">Como ligamos </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">para nos livrar dele? </font><font style="vertical-align: inherit;">Os fluxos requerem uso </font></font><code>StreamController</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que deve ser </font></font><code>closed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assim que se tornar desnecess√°rio - isso √© feito para evitar vazamentos de mem√≥ria. </font><font style="vertical-align: inherit;">(N√£o existe tal coisa como um destruidor de classe no dardo; apenas uma classe </font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no </font></font><code>StatefulWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tem um m√©todo </font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">Al√©m disso, n√£o est√° claro como compartilhar esse BLoC entre v√°rios widgets. </font><font style="vertical-align: inherit;">Geralmente, √© dif√≠cil para os desenvolvedores dominar o BLoC. </font><font style="vertical-align: inherit;">Existem v√°rios pacotes que tentam simplificar isso.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Fornecedor</font></font></h4><br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â um pacote escrito em 2018 por Remy Rusle, semelhante a </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas cujas fun√ß√µes n√£o se limitam a, fornecendo uma subclasse de Model. Esse tamb√©m √© um wrapper que √© conclu√≠do </font></font><code>InheritedWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas o provedor pode fornecer qualquer objeto de estado, incluindo BLoC, fluxos, futuros e outros. Como o provedor √© t√£o simples e flex√≠vel, o Google anunciou na </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">confer√™ncia Google I / O '19</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que no futuro </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√° o pacote preferido para gerenciar o estado. Claro, outros pacotes tamb√©m s√£o permitidos, mas se voc√™ tiver alguma d√∫vida, o Google recomenda parar </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br>
<code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">constru√≠do "com widgets, para widgets".</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permite colocar qualquer objeto com um estado na √°rvore de widgets e abrir acesso a ele para qualquer outro widget (filho). </font><font style="vertical-align: inherit;">Ele tamb√©m </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajuda a gerenciar a vida √∫til dos objetos de estado, inicializando-os com dados e executando uma limpeza ap√≥s a remo√ß√£o da √°rvore de widgets. </font><font style="vertical-align: inherit;">Portanto, </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© adequado mesmo para a implementa√ß√£o de componentes BLoC ou pode servir de base para outras solu√ß√µes de gerenciamento de estado! </font><font style="vertical-align: inherit;">Ou simplesmente usado para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementar depend√™ncias</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - um termo sofisticado que significa transferir dados para widgets de uma maneira que permita que voc√™ afrouxe a conex√£o e melhore a testabilidade do c√≥digo. </font><font style="vertical-align: inherit;">Finalmente,</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vem com um conjunto de aulas especializadas, gra√ßas √†s quais √© ainda mais conveniente de usar. </font><font style="vertical-align: inherit;">A seguir, examinaremos mais de perto cada uma dessas classes.</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fornecedor b√°sico</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Futureprovider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proxyprovider</font></font></li>
</ul><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instala√ß√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para us√°-lo </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, primeiro adicione uma depend√™ncia ao nosso arquivo </font></font><code>pubspec.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<code>provider: ^3.0.0</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois importamos o pacote </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onde for necess√°rio: </font></font><br>
<br>
<code>import 'package:provider/provider.dart';</code><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Provedor de base</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Crie a base </font></font><code>Provide</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r na raiz do nosso aplicativo; </font><font style="vertical-align: inherit;">isso conter√° uma inst√¢ncia do nosso modelo:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O par√¢metro </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cria uma inst√¢ncia </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Se voc√™ deseja passar uma inst√¢ncia existente para ela, use o construtor aqui </font></font><code><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Provider.value</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, voc√™ pode consumir esta inst√¢ncia do modelo em qualquer lugar </font></font><code>MyApp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, usando o widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;MyModel&gt;(<font></font>
      builder: (context, value, child) =&gt; Text(value.foo),<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No exemplo acima, a classe </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">obt√©m uma inst√¢ncia </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usando o widget </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consumidor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Este elemento nos d√° </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contendo nosso objeto no par√¢metro </font></font><code>value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, o que devemos fazer se quisermos atualizar os dados em nosso modelo? Digamos que temos outro widget em que, quando um bot√£o √© clicado, a propriedade deve ser atualizada </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.foo = <span class="hljs-string">'bar'</span>;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe a sintaxe espec√≠fica usada para acessar a inst√¢ncia </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Funcionalmente, isso √© equivalente a acessar o widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. O widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© √∫til nos casos em que o c√≥digo n√£o pode obter facilmente o link </font></font><code>BuildContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que voc√™ acha que acontecer√° com o widget original </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que criamos anteriormente? Um novo significado ser√° exibido nele </font></font><code>bar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infelizmente n√£o</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . N√£o √© poss√≠vel ouvir altera√ß√µes em objetos antigos antigos do Dart (pelo menos sem reflex√£o, o que n√£o √© fornecido no Flutter). Portanto, </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√£o ser√° poss√≠vel "ver" que atualizamos corretamente a propriedade </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e solicitamos que o widget seja </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atualizado em resposta. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeNotifierProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas h√° esperan√ßa! </font><font style="vertical-align: inherit;">Voc√™ pode fazer nossa classe </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementar uma impureza </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Demorar√° um pouco para alterar a implementa√ß√£o do nosso modelo e chamar um m√©todo especial </font></font><code>notifyListeners()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sempre que uma de nossas propriedades for alterada. </font><font style="vertical-align: inherit;">Funciona aproximadamente da mesma maneira </font></font><code>ScopedModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mas, nesse caso, √© bom que voc√™ n√£o precise herdar de uma classe de modelo espec√≠fica. </font><font style="vertical-align: inherit;">√â o suficiente para perceber a mistura </font></font><code>ChangeNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Aqui est√° o que parece:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> <span class="hljs-title">with</span> <span class="hljs-title">ChangeNotifier</span> </span>{
  <span class="hljs-built_in">String</span> _foo;  <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> foo =&gt; _foo;<font></font>
  <font></font>
  <span class="hljs-keyword">void</span> <span class="hljs-keyword">set</span> foo(<span class="hljs-built_in">String</span> value) {<font></font>
    _foo = value;<font></font>
    notifyListeners();  <font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver, substitu√≠mos nossa propriedade </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">por </font></font><code>getter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font><code>setter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, apoiada pela vari√°vel privada _foo. </font><font style="vertical-align: inherit;">Dessa forma, podemos "interceptar" quaisquer altera√ß√µes feitas na propriedade foo e informar nossos ouvintes que nosso objeto mudou. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora, de fora </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, podemos mudar nossa implementa√ß√£o para que ela use uma classe diferente chamada </font></font><code> ChangeNotifierProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs">ChangeNotifierProvider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: MyApp(...),<font></font>
)</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como isso! </font><font style="vertical-align: inherit;">Agora, quando nossas </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atualiza√ß√µes da propriedade </font></font><code>foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na inst√¢ncia </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, elas </font></font><code>MyWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ser√£o atualizadas automaticamente para refletir essa altera√ß√£o. </font><font style="vertical-align: inherit;">Legal certo? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A prop√≥sito. </font><font style="vertical-align: inherit;">Voc√™ provavelmente notou um manipulador de bot√£o </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">com o qual usamos a seguinte sintaxe:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por padr√£o, essa sintaxe far√° com que a inst√¢ncia seja reconstru√≠da automaticamente </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assim que o modelo for alterado </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Talvez n√£o precisemos disso. </font><font style="vertical-align: inherit;">No final, ele </font></font><code>OtherWidget</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simplesmente cont√©m um bot√£o que n√£o muda quando o valor muda </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Para evitar a reconstru√ß√£o, voc√™ pode usar a seguinte sintaxe para acessar nosso modelo sem se registrar na reconstru√ß√£o:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context, listen: <span class="hljs-keyword">false</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esse √© outro encanto fornecido no pacote </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exatamente assim. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StreamProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
√Ä primeira vista, n√£o est√° claro por que √© necess√°rio </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">No final, voc√™ pode usar o habitual </font></font><code>StreamBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">se precisar consumir um fluxo no Flutter. </font><font style="vertical-align: inherit;">Por exemplo, aqui ouvimos o fluxo </font></font><code>onAuthStateChanged</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fornecido por </font></font><code>FirebaseAuth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context {<font></font>
  <span class="hljs-keyword">return</span> StreamBuilder(<font></font>
   stream: FirebaseAuth.instance.onAuthStateChanged, <font></font>
   builder: (BuildContext context, AsyncSnapshot snapshot){ <font></font>
     ...<font></font>
   });<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para fazer o mesmo com a ajuda </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, poder√≠amos fornecer nosso fluxo </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">na raiz do nosso aplicativo:</font></font><br>
<br>
<pre><code class="dart hljs">StreamProvider&lt;FirebaseUser&gt;.value(<font></font>
  stream: FirebaseAuth.instance.onAuthStateChanged,<font></font>
  child: MyApp(...),<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, consuma o widget filho, como geralmente √© feito com </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-meta">@override</span><font></font>
Widget build(BuildContext context) {<font></font>
  <span class="hljs-keyword">return</span> Consumer&lt;FirebaseUser&gt;(<font></font>
    builder: (context, value, child) =&gt; Text(value.displayName),<font></font>
  );<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nosso c√≥digo de widget n√£o apenas se tornou muito mais limpo, como tamb√©m abstrai o fato de que os dados vieram do fluxo. Se algum dia decidirmos alterar a implementa√ß√£o base, por exemplo, para </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ent√£o nenhuma altera√ß√£o no c√≥digo do widget ser√° necess√°ria. Como voc√™ ver√°, isso se aplica a todos os outros provedores mostrados abaixo. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FutureProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Semelhante ao exemplo acima, </font></font><code>FutureProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√© uma alternativa ao padr√£o </font></font><code> FutureBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ao trabalhar com widgets. Aqui est√° um exemplo:</font></font><br>
<br>
<pre><code class="plaintext hljs">FutureProvider&lt;FirebaseUser&gt;.value(<font></font>
  value: FirebaseAuth.instance.currentUser(),<font></font>
  child: MyApp(...),<font></font>
);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para consumir esse valor no widget filho, usamos a mesma implementa√ß√£o </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que no exemplo </font></font><code>StreamProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">acima. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenableProvider </font></font></i><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueListenable</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma interface Dart implementada pela classe </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ValueNotifier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que pega um valor e notifica os ouvintes quando muda para outro valor. </font><font style="vertical-align: inherit;">√â poss√≠vel, por exemplo, agrupar um contador inteiro em uma classe de modelo simples:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span> </span>{
  <span class="hljs-keyword">final</span> ValueNotifier&lt;<span class="hljs-built_in">int</span>&gt; counter = ValueNotifier(<span class="hljs-number">0</span>);  <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao trabalhar com tipos complexos, ele </font></font><code>ValueNotifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">usa o operador do </font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objeto armazenado nele para determinar se o valor foi alterado. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vamos criar o mais simples </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, que conter√° o nosso modelo principal, e ser√° seguido por uma </font><font style="vertical-align: inherit;">propriedade de escuta </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aninhada </font><font style="vertical-align: inherit;">:</font></font><code>ValueListenableProvider</code><font style="vertical-align: inherit;"></font><code>counter</code><font style="vertical-align: inherit;"></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;MyModel&gt;(<font></font>
  builder: (context) =&gt; MyModel(),<font></font>
  child: Consumer&lt;MyModel&gt;(builder: (context, value, child) {<font></font>
    <span class="hljs-keyword">return</span> ValueListenableProvider&lt;<span class="hljs-built_in">int</span>&gt;.value(<font></font>
      value: value.counter,<font></font>
      child: MyApp(...)<font></font>
    }<font></font>
  }<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observe que esse provedor aninhado √© do tipo </font></font><code>int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Pode haver outros. </font><font style="vertical-align: inherit;">Se voc√™ tiver v√°rios provedores do mesmo tipo registrados, o Provedor retornar√° o ‚Äúmais pr√≥ximo‚Äù (ancestral mais pr√≥ximo). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja como ouvir uma propriedade </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de qualquer widget filho:</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> Consumer&lt;<span class="hljs-built_in">int</span>&gt;(<font></font>
      builder: (context, value, child) {<font></font>
        <span class="hljs-keyword">return</span> Text(value.toString());<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas aqui est√° como atualizar uma propriedade </font></font><code>counter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de outro widget. </font><font style="vertical-align: inherit;">Aten√ß√£o: precisamos acessar a c√≥pia original </font></font><code>MyModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OtherWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span><font></font>
  Widget build(BuildContext context) {<font></font>
    <span class="hljs-keyword">return</span> FlatButton(<font></font>
      child: Text(<span class="hljs-string">'Update'</span>),<font></font>
      onPressed: () {<font></font>
        <span class="hljs-keyword">final</span> model = Provider.of&lt;MyModel&gt;(context);<font></font>
        model.counter.value++;<font></font>
      },<font></font>
    );<font></font>
  }<font></font>
}</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MultiProvider</font></font></i></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Se voc√™ usa muitos widgets</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, na raiz do aplicativo voc√™ obt√©m uma estrutura feia de muitos anexos:</font></font><br>
<br>
<pre><code class="dart hljs">Provider&lt;Foo&gt;.value( <font></font>
  value: foo, <font></font>
  child: Provider&lt;Bar&gt;.value( <font></font>
    value: bar, <font></font>
    child: Provider&lt;Baz&gt;.value( <font></font>
      value: baz , <font></font>
      child: MyApp(...)<font></font>
    ) <font></font>
  ) <font></font>
)</code></pre><br>
<code>MultiProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Permite declarar todos eles no mesmo n√≠vel. </font><font style="vertical-align: inherit;">√â apenas a√ß√∫car sint√°tico: no n√≠vel intra-sistema, todos permanecem aninhados de qualquer maneira.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt;.value(value: foo), <font></font>
    Provider&lt;Bar&gt;.value(value: bar), <font></font>
    Provider&lt;Baz&gt;.value(value: baz), <font></font>
  ], <font></font>
  child: MyApp(...), <font></font>
)<font></font>
</code></pre><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProxyProvider</font></font></i></a><br>
<br>
<code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma classe interessante adicionada na terceira vers√£o do pacote</font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Ele permite que voc√™ declare fornecedores que podem depender de outros fornecedores, at√© seis em um. </font><font style="vertical-align: inherit;">Neste exemplo, a classe Bar √© espec√≠fica da inst√¢ncia</font></font><code>Foo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Isso √© √∫til ao compilar um conjunto raiz de servi√ßos que dependem um do outro.</font></font><br>
<br>
<pre><code class="dart hljs">MultiProvider ( <font></font>
  providers: [ <font></font>
    Provider&lt;Foo&gt; ( <font></font>
      builder: (context) =&gt; Foo(),<font></font>
    ), <font></font>
    ProxyProvider&lt;Foo, Bar&gt;(<font></font>
      builder: (context, value, previous) =&gt; Bar(value),<font></font>
    ), <font></font>
  ], <font></font>
  child: MyApp(...),<font></font>
)<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro argumento de tipo gen√©rico √© o tipo do qual o seu depende </font></font><code>ProxyProvider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e o segundo √© o tipo que ele retorna.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como ouvir muitos provedores ao mesmo tempo</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E se quisermos que um √∫nico widget escute muitos provedores e reconstrua-os quando algum deles mudar? </font><font style="vertical-align: inherit;">Voc√™ pode ouvir at√© 6 fornecedores ao mesmo tempo usando as op√ß√µes do widget </font></font><code>Consumer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Receberemos inst√¢ncias como par√¢metros de m√©todo adicionais </font></font><code>builder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<pre><code class="dart hljs">Consumer2&lt;MyModel, <span class="hljs-built_in">int</span>&gt;(<font></font>
  builder: (context, value, value2, child) {<font></font>
    <span class="hljs-comment">//value  MyModel</span>
    <span class="hljs-comment">//value2  int</span><font></font>
  },<font></font>
);</code></pre><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√£o</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quando usado, </font></font><code>InheritedWidget</code> <code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">permite gerenciar o estado como √© habitual no Flutter. </font><font style="vertical-align: inherit;">Ele permite que os widgets acessem objetos de estado e os ou√ßam de maneira que o mecanismo de notifica√ß√£o subjacente seja abstra√≠do. </font><font style="vertical-align: inherit;">√â mais f√°cil gerenciar a vida √∫til dos objetos de estado criando pontos de ancoragem para criar esses objetos conforme necess√°rio e se livrar deles quando necess√°rio. </font><font style="vertical-align: inherit;">Esse mecanismo pode ser usado para implementar facilmente depend√™ncias e at√© como base para op√ß√µes de gerenciamento de estado mais avan√ßadas. </font><font style="vertical-align: inherit;">Com a b√™n√ß√£o do Google e o crescente apoio da comunidade Flutter, </font></font><code>Provider</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tornou-se um pacote que vale a pena tentar sem demora!</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt503062/index.html">–†–µ–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∂–∏–∑–Ω–∏ –≤ –ö—Ä–µ–º–Ω–∏–µ–≤–æ–π –î–æ–ª–∏–Ω–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</a></li>
<li><a href="../pt503064/index.html">IoT onde voc√™ n√£o esperou (parte 3). Construindo um modelo de simula√ß√£o</a></li>
<li><a href="../pt503068/index.html">Na encruzilhada entre tecnologia e neg√≥cios: l√≠deres de TI abrem uma nova universidade na Su√≠√ßa</a></li>
<li><a href="../pt503070/index.html">Caneca el√©trica. Construindo uma scooter el√©trica louca / bicicleta el√©trica</a></li>
<li><a href="../pt503072/index.html">Apenas mais uma ferramenta: conhecer a configura√ß√£o do servi√ßo com a Configura√ß√£o do estado desejado¬†</a></li>
<li><a href="../pt503082/index.html">Telegrama como NAS / FTP</a></li>
<li><a href="../pt503084/index.html">Revis√£o do Curso Lightbend Academy - Arquitetura Reativa</a></li>
<li><a href="../pt503086/index.html">Os servi√ßos de transcri√ß√£o online s√£o seguros e confidenciais?</a></li>
<li><a href="../pt503088/index.html">Como selecionamos carga para transportadoras</a></li>
<li><a href="../pt503096/index.html">Por que os gerentes querem que os trabalhadores reciclem?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>