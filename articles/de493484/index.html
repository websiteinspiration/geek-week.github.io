<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📅 👉 🤚🏾 Ihr C # ist bereits "funktionsfähig", lassen Sie es einfach. ⛹🏽 💠 🧗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Originalartikels "Ihr C # ist bereits funktionsfähig, aber nur, wenn Sie es zulassen" von Igal T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Ihr C # ist bereits "funktionsfähig", lassen Sie es einfach.</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/493484/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hallo Habr! Ich präsentiere Ihnen die Übersetzung des Originalartikels </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Ihr C # ist bereits funktionsfähig, aber nur, wenn Sie es zulassen"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> von Igal Tabachnik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vor einigen Tagen habe ich </font><font style="vertical-align: inherit;">ein C # -Code-Snippet </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">getwittert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FizzBuzz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> implementiert </font><font style="vertical-align: inherit;">und einige der neuen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Funktionen in C # 8.0 verwendet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Der Tweet wurde „viral“, einige Leute bewunderten seine Prägnanz und Funktionalität, während andere mich fragten, warum ich ihn nicht in F # geschrieben habe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mehr als 4 Jahre sind vergangen, seit ich das letzte Mal in C # geschrieben habe, und die Tatsache, dass ich normalerweise funktionale Programmierung verwende, hat die Art und Weise, wie ich heute Code schreibe, eindeutig beeinflusst. </font><font style="vertical-align: inherit;">Das Snippet, das ich geschrieben habe, scheint sehr ordentlich und natürlich zu sein, aber einige Leute haben Bedenken geäußert, dass es nicht wie C # -Code aussieht.</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Es sieht zu funktional aus." </font><font style="vertical-align: inherit;">Sie haben mir geschrieben.</font></font></blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je nachdem, wen Sie fragen, bedeutet „funktionale Programmierung“ für verschiedene Personen unterschiedliche Dinge. </font><font style="vertical-align: inherit;">Anstatt die Semantik zu diskutieren, möchte ich erklären, warum diese FizzBuzz-Implementierung funktionsfähig zu sein scheint.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schauen wir uns zunächst an, was dieser Code bewirkt:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)</span><font></font>
{<font></font>
      <span class="hljs-function"><span class="hljs-keyword">string</span> <span class="hljs-title">FizzBuzz</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> x</span>)</span> =&gt; <font></font>
            (x % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>, x % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) <span class="hljs-keyword">switch</span><font></font>
            {  <font></font>
                  (<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>) =&gt; <span class="hljs-string">"FizzBuzz"</span>, <font></font>
                  (<span class="hljs-literal">true</span>, _) =&gt; <span class="hljs-string">"Fizz"</span>, <font></font>
                  (_, <span class="hljs-literal">true</span>) =&gt; <span class="hljs-string">"Buzz"</span>, <font></font>
                  _ =&gt; x.ToString()<font></font>
            };<font></font>
    <font></font>
      Enumerable.Range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span> ) <font></font>
            .Select(FizzBuzz).ToList() <font></font>
            .ForEach(Console.WriteLine); <font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier erstellen wir eine lokale Methode, die durch einen Lambda-Ausdruck dargestellt wird, dessen Ergebnis mit einem Tupel berechnet wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Neuheit hier ist die Verwendung eines Tupels (Paares), um mit dem Ergebnis der gemeinsamen Berechnung von zwei Ausdrücken zu arbeiten (x% 3 = = 0 und x% 5 = = 0). Auf diese Weise können Sie den Mustervergleich verwenden, um das Endergebnis zu ermitteln. Wenn keine der Optionen übereinstimmt, wird standardmäßig eine Zeichenfolgendarstellung der Nummer zurückgegeben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keine der vielen "funktionalen" "Funktionen", die in diesem Code verwendet werden (einschließlich foreach-Schleifen im LINQ-Stil), macht diesen Code an sich funktionsfähig. Was es funktionsfähig macht, ist die Tatsache, dass mit Ausnahme der Ausgabe des Ergebnisses an die Konsole alle in diesem Programm verwendeten Methoden Ausdrücke sind.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Einfach ausgedrückt ist Ausdruck eine Frage, die immer eine Antwort hat. In Bezug auf die Programmierung ist ein Ausdruck eine Kombination von Konstanten, Variablen, Operatoren und Funktionen, die von der Laufzeit berechnet werden, um einen Wert zu berechnen ("zurückzugeben"). Um den Unterschied zu Anweisungen zu veranschaulichen, schreiben wir eine bekanntere Version von FizzBuzz für C # -Programmierer:</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)</span> <font></font>
{<font></font>
      <span class="hljs-keyword">foreach</span>( <span class="hljs-keyword">int</span> x <span class="hljs-keyword">in</span> Enumerable.Range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)) <font></font>
      {<font></font>
             FizzBuzz(x);<font></font>
      }<font></font>
} <font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">FizzBuzz</span>(<span class="hljs-params"> <span class="hljs-keyword">int</span> x</span>)</span> <font></font>
{<font></font>
      <span class="hljs-keyword">if</span> (x % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>  &amp;&amp; x % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>) <font></font>
             Console.WriteLine(<span class="hljs-string">"FizzBuzz"</span>); <font></font>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> ) <font></font>
             Console.WriteLine(<span class="hljs-string">"Fizz"</span>); <font></font>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x % <span class="hljs-number">5</span> == <span class="hljs-number">0</span> ) <font></font>
             Console.WriteLine(<span class="hljs-string">"Buzz"</span>); <font></font>
      <span class="hljs-keyword">else</span><font></font>
             Console.WriteLine(x);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Natürlich ist dies kein "sauberer" Code, und er kann verbessert werden, aber man kann nur zustimmen, dass dies gewöhnlicher C # -Code ist. Bei näherer Betrachtung der FizzBuzz-Methode werden trotz ihrer Einfachheit einige Designprobleme deutlich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Erstens verstößt dieses Programm gegen das erste der Prinzipien von SOLID - das Prinzip der Einzelverantwortung. Es mischt die Logik der Berechnung des Ausgabewerts basierend auf der Anzahl und der Ausgabe dieses Werts an die Konsole. Infolgedessen verstößt es gegen das Prinzip der Abhängigkeitsinversion (das letzte von SOLID) und ist eng mit der Ausgabe des Ergebnisses an die Konsole verbunden. Schließlich macht es eine solche Implementierung des Programms schwierig, Code wiederzuverwenden und zu sandboxen. Natürlich für ein </font><font style="vertical-align: inherit;">solches einfaches Programm wie dieses, macht es keinen Sinn , </font><font style="vertical-align: inherit;">in die Feinheiten des Designs zu gehen, sonst so etwas wie </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">diese</font></a><font style="vertical-align: inherit;"> drehen kann aus</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle oben genannten Probleme können gelöst werden, indem der Empfang von Werten und die Ausgabe an die Konsole getrennt werden. </font><font style="vertical-align: inherit;">Auch ohne die Verwendung ausgefallener Sprachkonstrukte entbindet uns die einfache Rückgabe des resultierenden Werts an den aufrufenden Code von der Verantwortung für die Verwendung dieses Werts.</font></font><br>
<br>
<pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">string</span> <span class="hljs-title">FizzBuzz</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> x</span>)</span><font></font>
{<font></font>
      <span class="hljs-keyword">if</span> (x % <span class="hljs-number">3</span> == <span class="hljs-number">0</span> &amp;&amp; x % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>)<font></font>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"FizzBuzz"</span>;<font></font>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<font></font>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Fizz"</span>;<font></font>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>)<font></font>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Buzz"</span>;<font></font>
      <span class="hljs-keyword">else</span><font></font>
            <span class="hljs-keyword">return</span> x.ToString();<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das sind natürlich keine radikalen Veränderungen, aber das reicht schon:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die FizzBuzz-Methode ist jetzt ein Ausdruck, der einen numerischen Wert annimmt und eine Zeichenfolge zurückgibt.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es hat keine anderen Verantwortlichkeiten und versteckten Effekte, was es zu einer reinen Funktion macht.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es kann unabhängig und ohne zusätzliche Abhängigkeiten und Einstellungen verwendet und getestet werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Code, der diese Funktion aufruft, kann mit dem Ergebnis nichts anfangen - dies liegt nun nicht in unserer Verantwortung.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und das ist die Essenz der funktionalen Programmierung - das Programm besteht aus Ausdrücken, die zu beliebigen Werten führen, und diese Werte werden an den aufrufenden Code zurückgegeben. Diese Ausdrücke sind in der Regel völlig unabhängig und das Ergebnis ihres Aufrufs hängt nur von den Eingabedaten ab. Ganz oben, am Einstiegspunkt (oder manchmal als "Ende der Welt" bezeichnet), sammeln sich die von den Funktionen zurückgegebenen Werte und interagieren mit dem Rest der Welt. Im objektorientierten Jargon wird dies manchmal als "Zwiebelarchitektur" (oder "Ports und Adapter") bezeichnet - ein sauberer Kern, der aus Geschäftslogik und einer zwingenden Außenhülle besteht, die für die Interaktion mit der Außenwelt verantwortlich ist.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Verwendung von Ausdrücken anstelle von Anweisungen wird zum Teil von allen Programmiersprachen verwendet. C # wurde im Laufe der Zeit weiterentwickelt, um Funktionen einzuführen, die das Arbeiten mit Ausdrücken erleichtern: LINQ, ausdrucksbasierte Methoden, Mustervergleich und mehr. Diese "Merkmale" werden oft als "funktional" bezeichnet, weil sie existieren - in Sprachen wie F # oder Haskell, in denen die Existenz von etwas anderem als Ausdrücken fast unmöglich ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tatsächlich wird dieser Programmierstil jetzt vom C # -Team unterstützt. In einer kürzlich bei NDC London gehaltenen Rede fordert Bill Wagner die Entwickler auf, ihre (imperativen) Gewohnheiten zu ändern und moderne Methoden anzuwenden:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/aUbXGs7YTGo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C # (und andere wichtige Sprachen wie Java) können funktional verwendet werden, erfordern jedoch viel Aufwand. </font><font style="vertical-align: inherit;">Diese Sprachen machen den funktionalen Stil zu einer Ausnahme, nicht zur Norm. </font><font style="vertical-align: inherit;">Ich ermutige Sie, funktionale Programmiersprachen zu lernen, um ein erstklassiger Spezialist zu werden.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de493468/index.html">Hab keine Angst tief zu atmen</a></li>
<li><a href="../de493470/index.html">Wissenschaftler finden neue Kleinplaneten außerhalb von Neptun</a></li>
<li><a href="../de493478/index.html">Hack The Box - Walkthrough Forest. AS-REP-Röst-, DCSync- und Pass-The-Hash-Angriffe</a></li>
<li><a href="../de493480/index.html">Architektur für Anfänger oder warum Sie keine Flagge in den Schwertkämpfer einfügen müssen</a></li>
<li><a href="../de493482/index.html">Lernen Sie die kybernetische Schildkröte kennen, den Vorgänger von Roomba</a></li>
<li><a href="../de493486/index.html">Die interessantesten Automobil-Startups 2019-2020</a></li>
<li><a href="../de493488/index.html">Einheit + Git = Freundschaft: Teil 1 Gentleman-Set</a></li>
<li><a href="../de493496/index.html">ReactJS. Warnung: Es kann keine Aktualisierung des Reaktionsstatus für eine nicht gemountete Komponente durchgeführt werden. Dies ist ein No-Op, aber es zeigt ein Memo an</a></li>
<li><a href="../de493504/index.html">Unsere Remote-Arbeitserfahrung bei der Erstellung von Online-Shops</a></li>
<li><a href="../de493506/index.html">Warum glauben Geophysiker im 21. Jahrhundert an die Theorie der flachen Erde?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>