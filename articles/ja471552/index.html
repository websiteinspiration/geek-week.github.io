<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📢 🌾 🤪 Doomエンジンのクローンの作成：マップ情報の読み取り 🚪 ↙️ 👉🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="前書き
 このプロジェクトの目標は、Ultimate DOOM（Steamのバージョン）でリリースされたリソースを使用して、DOOMエンジンのクローンを作成することです。
 
 それはチュートリアルの形で提示されます-コードで最大のパフォーマンスを達成したくはありませんが、実際に機能するバージョンを...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Doomエンジンのクローンの作成：マップ情報の読み取り</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471552/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c2f/423/35b/c2f42335b751d3bd9acec03251204977.png" alt="画像"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前書き</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロジェクトの目標は、Ultimate DOOM（</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Steamのバージョン</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）で</font><font style="vertical-align: inherit;">リリースされたリソースを使用して、DOOMエンジンのクローンを作成すること</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それはチュートリアルの形で提示されます-コードで最大のパフォーマンスを達成したくはありませんが、実際に機能するバージョンを作成するだけです。後でそれを改善および最適化し始めます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はゲームやゲームエンジンの作成経験がなく、記事を書く経験もほとんどないので、独自の変更を提案したり、コードを完全に書き直したりすることもできます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにリソースとリンクのリストがあります。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブックゲームエンジンブラックブック：DOOM Fabien Sanglar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">DOOMの内部に関する最高の本の1つ。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doom Wiki </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコードDOOM </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコードChocolate Doom</font></font></a><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必要条件</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visual Studio：どのIDEでも実行できます。</font><font style="vertical-align: inherit;">Visual Studio 2017で作業します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SDL2：ライブラリ。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOOM：Ultimate DOOMのSteamバージョンのコピー。必要なのはWADファイルだけです。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">オプション</font></font></h3><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slade3：作業をテストするための優れたツール。</font></font></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考え</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
わかりません。このプロジェクトを完了することはできますが、最善を尽くします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Windowsがターゲットプラットフォームになりますが、私はSDLを使用しているため、他のプラットフォームでエンジンを機能させるだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それまでの間、Visual Studioをインストールしてください！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
このプロジェクトは、「Handmade」と呼ばれる他のプロジェクトと混同されないように、Handmade DOOMからSLD（DIY Doom）を使用したDo It Yourself Doomに名前が変更されました。</font><font style="vertical-align: inherit;">チュートリアルには、Handmade DOOMと呼ばれているスクリーンショットがいくつかあります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WADファイル</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コーディングに着手する前に、目標を設定し、達成したいことについて考えましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、DOOMリソースファイルを読み取れるかどうかを確認します。</font><font style="vertical-align: inherit;">すべてのDOOMリソースはWADファイルにあります。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WADファイルとは</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
「すべての私のデータはどこにありますか」？</font><font style="vertical-align: inherit;">（「私のデータはどこにありますか？」）それらはWADにあります！</font><font style="vertical-align: inherit;">WADは、単一のファイルにあるすべてのDOOMリソース（およびDOOMベースのゲーム）のアーカイブです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Doomの開発者は、ゲームの修正の作成を簡素化するためにこのフォーマットを思いつきました。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WADファイルの構造</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WADファイルは、ヘッダー、ランプ、ディレクトリの3つの主要部分で構成されています。</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘッダー-WADファイルとディレクトリオフセットに関する基本情報が含まれています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">しこり-ここには、ゲームリソース、マップのデータ、スプライト、音楽などが格納されています。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ディレクトリ-一括セクションでデータを検索するための組織構造。</font></font></li>
</ol><br>
<br>
<code><pre>                       &lt;---- 32 bits  ----&gt;          
                       /------------------\          
            ---&gt;  0x00 |  ASCII WAD Type  | 0X03     
            |          |------------------|          
    Header -|     0x04 | # of directories | 0x07     
            |          |------------------|          
            ---&gt;  0x08 | directory offset | 0x0B --  
            ---&gt;       |------------------| &lt;--    | 
            |     0x0C |     Lump Data    |    |   | 
            |          |------------------|    |   | 
    Lumps - |          |        .         |    |   | 
            |          |        .         |    |   | 
            |          |        .         |    |   | 
            ---&gt;       |        .         |    |   | 
            ---&gt;       |------------------| &lt;--|---  
            |          |    Lump offset   |    |     
            |          |------------------|    |     
 Directory -|          | directory offset | ---      
    List    |          |------------------|          
            |          |    Lump Name     |   
            |          |------------------| 
            |          |        .         |        
            |          |        .         | 
            |          |        .         | 
            ---&gt;       \------------------/          
</pre></code><br>
<h3> </h3><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th> </th>
<th> </th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00-0x03</td>
<td>4  ASCII</td>
<td> ASCII (  «IWAD»  «PWAD»).</td>
</tr>
<tr>
<td>0x04-0x07</td>
<td>unsigned int</td>
<td>  .</td>
</tr>
<tr>
<td>0x08-0x0b</td>
<td>unsigned int</td>
<td>      WAD.</td>
</tr>
</tbody>
</table></div><br>
<h3> </h3><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th> </th>
<th> </th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00-0x03</td>
<td>unsigned int</td>
<td>    lump-   WAD.</td>
</tr>
<tr>
<td>0x04-0x07</td>
<td>unsigned int</td>
<td> «» (lump)  .</td>
</tr>
<tr>
<td>0x08-0x0f</td>
<td>8  ASCII</td>
<td>ASCII,   «».</td>
</tr>
</tbody>
</table></div><br>
<h2></h2><br>
<ol>
<li> .</li>
<li>  WAD.</li>
<li> .</li>
<li>       .</li>
</ol><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まだ何も複雑にしないでください。</font><font style="vertical-align: inherit;">WADを単に開いて読み込むクラスを作成し、WADLoaderと呼びます。</font><font style="vertical-align: inherit;">次に、形式に応じてデータを読み取るクラスを作成し、WADReaderと呼びます。</font></font><code>main</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">これらのクラスを呼び出す</font><font style="vertical-align: inherit;">単純な関数も必要</font><font style="vertical-align: inherit;">です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
注：このアーキテクチャは最適ではない可能性があるため、必要に応じて変更します。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コードにアクセスする</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
空のC ++プロジェクトを作成することから始めましょう。</font><font style="vertical-align: inherit;">Visual Studioで、「ファイル」-&gt;「新規」-&gt;「プロジェクト」をクリックします。</font><font style="vertical-align: inherit;">それをDIYDoomと呼びましょう。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bdc/753/755/bdc7537557888a7ece9738204ecb457d.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WADLoaderとWADReaderの2つの新しいクラスを追加しましょう。</font><font style="vertical-align: inherit;">WADLoaderの実装から始めましょう。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WADLoader</span>
{</span>
<span class="hljs-keyword">public</span>:<font></font>
    WADLoader(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> sWADFilePath); <span class="hljs-comment">// We always want to make sure a WAD file is passed</span>
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">LoadWAD</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">// Will call other helper functions to open and load the WAD file</span><font></font>
<font></font>
    ~WADLoader();   <span class="hljs-comment">// Clean up!</span><font></font>
<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">OpenAndLoad</span><span class="hljs-params">()</span></span>;     <span class="hljs-comment">// Open the file and load it to memory</span>
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">ReadDirectories</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">// A function what will iterate though the directory section </span><font></font>
<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> m_sWADFilePath; <span class="hljs-comment">// Sore the file name passed to the constructor </span>
    <span class="hljs-built_in">std</span>::ifstream m_WADFile;    <span class="hljs-comment">// The file stream that will pint to the WAD file.</span>
    <span class="hljs-keyword">uint8_t</span> *m_WADData;         <span class="hljs-comment">// let's load the file and keep it in memory! It is just a few MBs!</span>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Directory&gt; m_WADDirectories; <span class="hljs-comment">//let's store all the directories in this vector.</span>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コンストラクターの実装は簡単です。データポインターを初期化し、転送されたパスのコピーをWADファイルに保存します。</font></font><br>
<br>
<pre><code class="cpp hljs">WADLoader::WADLoader(<span class="hljs-built_in">string</span> sWADFilePath) : m_WADData(<span class="hljs-literal">NULL</span>), m_sWADFilePath(sWADFilePath)<font></font>
{<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、補助ダウンロード機能の実装に取り​​掛かります</font></font><code>OpenAndLoad</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。ファイルをバイナリとして開き、失敗した場合はエラーを表示してください。</font></font><br>
<br>
<pre><code class="cpp hljs">m_WADFile.open(m_sWADFilePath, ifstream::binary);
<span class="hljs-keyword">if</span> (!m_WADFile.is_open())<font></font>
{<font></font>
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Error: Failed to open WAD file"</span> &lt;&lt; m_sWADFilePath &lt;&lt; <span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべてがうまくいき、ファイルを見つけて開くことができる場合、ファイルをコピーするためのメモリを割り当てるために、ファイルサイズを知る必要があります。</font></font><br>
<br>
<pre><code class="cpp hljs">m_WADFile.seekg(<span class="hljs-number">0</span>, m_WADFile.end);
<span class="hljs-keyword">size_t</span> length = m_WADFile.tellg();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、WAD全体に必要なスペースがわかりました。必要な量のメモリを割り当てます。</font></font><br>
<br>
<pre><code class="cpp hljs">m_WADData = <span class="hljs-keyword">new</span> <span class="hljs-keyword">uint8_t</span>[length]; </code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルの内容をこのメモリにコピーします。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-comment">// remember to know the file size we had to move the file pointer all the way to the end! We need to move it back to the beginning.</span><font></font>
m_WADFile.seekg(ifstream::beg);<font></font>
m_WADFile.read((<span class="hljs-keyword">char</span> *)m_WADData, length); <span class="hljs-comment">// read the file and place it in m_WADData</span><font></font>
<font></font>
m_WADFile.close();</code></pre><br><font style="vertical-align: inherit;"></font><code>m_WADData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">タイプ</font><font style="vertical-align: inherit;">
のデータ</font><font style="vertical-align: inherit;">タイプ</font><font style="vertical-align: inherit;">として使用したことに気づいたかもしれません</font></font><code>unint8_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。つまり、1バイトの正確な配列（1バイト*長さ）が必要です。 unint8_tを使用すると、サイズが確実にバイト（8ビット、型名から理解できる）に等しくなります。 2バイト（16ビット）を割り当てる場合は、後で説明するunint16_tを使用します。これらのタイプのコードを使用することにより、コードはプラットフォームに依存しなくなります。説明します。「int」を使用する場合、メモリ内のintの正確なサイズはシステムによって異なります。 32ビット構成で「int」をコンパイルすると、4バイト（32ビット）のメモリサイズが得られ、64ビット構成で同じコードをコンパイルすると、8バイト（64ビット）のメモリサイズが得られます。さらに悪いことに、16ビットプラットフォーム（おそらくDOSファン）でコードをコンパイルすると、2バイト（16ビット）になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを簡単にチェックして、すべてが機能することを確認しましょう。</font><font style="vertical-align: inherit;">しかし、最初にLoadWADを実装する必要があります。</font><font style="vertical-align: inherit;">LoadWADが「OpenAndLoad」を呼び出す間</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">WADLoader::LoadWAD</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">if</span> (!OpenAndLoad())<font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、クラスのインスタンスを作成してWADをロードしようとするメイン関数コードに追加しましょう</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function">WADLoader <span class="hljs-title">wadloader</span><span class="hljs-params">(<span class="hljs-string">"D:\\SDKs\\Assets\\Doom\\DOOM.WAD"</span>)</span></span>;<font></font>
    wadloader.LoadWAD();<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<font></font>
}</code></pre><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WADファイルへの正しいパスを入力する必要があります。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">実行してみましょう！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ああ！</font><font style="vertical-align: inherit;">数秒間開くだけのコンソールウィンドウが表示されました。</font><font style="vertical-align: inherit;">特に有用なものは何もありません...プログラムは機能しますか？</font><font style="vertical-align: inherit;">考え！</font><font style="vertical-align: inherit;">メモリーを見て、何が入っているか見てみましょう！</font><font style="vertical-align: inherit;">多分そこに私たちは特別な何かを見つけるでしょう！</font><font style="vertical-align: inherit;">まず、行番号の左側をダブルクリックしてブレークポイントを配置します。</font><font style="vertical-align: inherit;">次のようなものが表示されます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44b/c5c/760/44bc5c7609610c9f8f1efd2c2e2046ef.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ファイルからすべてのデータを読み取った直後にブレークポイントを配置して、メモリアレイを調べ、何がロードされているかを確認しました。</font><font style="vertical-align: inherit;">コードをもう一度実行してください！</font><font style="vertical-align: inherit;">自動ウィンドウに、最初の数バイトが表示されます。</font><font style="vertical-align: inherit;">最初の4バイトは「IWAD」と言っています！</font><font style="vertical-align: inherit;">すばらしいです。</font><font style="vertical-align: inherit;">この日が来るなんて思ってもみなかった！</font><font style="vertical-align: inherit;">だから、さて、あなたは落ち着く必要があります、まだ先の多くの仕事があります！</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c4/1a3/ddb/4c41a3ddb26bfa88f350435ca4792c31.png" alt="デバッグ"></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ヘッダーを読む</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ヘッダーの合計サイズは12バイト（0x00から0x0bまで）で、これらの12バイトは3つのグループに分けられます。最初の4バイトはWADのタイプで、通常は「IWAD」または「PWAD」です。 IWADはID Softwareによってリリースされた公式のWADである必要があり、 "PWAD"は改造に使用する必要があります。言い換えれば、これはWADファイルが公式リリースであるか、モダーによってリリースされているかを判断するための方法にすぎません。文字列はNULLで終了しないので注意してください。次の4バイトはunsigned intであり、ファイルの最後にあるディレクトリの総数が含まれています。次の4バイトは、最初のディレクトリのオフセットを示します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
情報を格納する構造を追加してみましょう。新しいヘッダーファイルを追加して、「DataTypes.h」という名前を付けます。その中で、必要なすべての構造体について説明します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Header</span>
{</span>
    <span class="hljs-keyword">char</span> WADType[<span class="hljs-number">5</span>]; <span class="hljs-comment">// I added an extra character to add the NULL</span>
    <span class="hljs-keyword">uint32_t</span> DirectoryCount; <span class="hljs-comment">//uint32_t is 4 bytes (32 bits)</span>
    <span class="hljs-keyword">uint32_t</span> DirectoryOffset; <span class="hljs-comment">// The offset where the first directory is located.</span>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ロードされたWADバイト配列からデータを読み取るWADReaderクラスを実装する必要があります。</font><font style="vertical-align: inherit;">ああ！</font><font style="vertical-align: inherit;">ここにトリックがあります-WADファイルはビッグエンディアン形式です。つまり、バイトをシフトしてリトルエンディアンにする必要があります（今日、ほとんどのシステムはリトルエンディアンを使用しています）。</font><font style="vertical-align: inherit;">これを行うには、2つの関数を追加します。1つは2バイト（16ビット）を処理し、もう1つは4バイト（32ビット）を処理します。</font><font style="vertical-align: inherit;">1バイトだけを読み取る必要がある場合は、何もする必要はありません。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">uint16_t</span> <span class="hljs-title">WADReader::bytesToShort</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> *pWADData, <span class="hljs-keyword">int</span> offset)</span>
</span>{
    <span class="hljs-keyword">return</span> (pWADData[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">8</span>) | pWADData[offset];<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">uint32_t</span> <span class="hljs-title">WADReader::bytesToInteger</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> *pWADData, <span class="hljs-keyword">int</span> offset)</span>
</span>{
    <span class="hljs-keyword">return</span> (pWADData[offset + <span class="hljs-number">3</span>] &lt;&lt; <span class="hljs-number">24</span>) | (pWADData[offset + <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-number">16</span>) | (pWADData[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">8</span>) | pWADData[offset];<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これでヘッダーを読み取る準備ができました。最初の4バイトをcharとしてカウントし、次にNULLを追加して作業を簡略化します。</font><font style="vertical-align: inherit;">ディレクトリの数とそのオフセットの場合は、補助関数を使用して、それらを正しい形式に変換できます。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">WADReader::ReadHeaderData</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> *pWADData, <span class="hljs-keyword">int</span> offset, Header &amp;header)</span>
</span>{
    <span class="hljs-comment">//0x00 to 0x03</span>
    header.WADType[<span class="hljs-number">0</span>] = pWADData[offset];<font></font>
    header.WADType[<span class="hljs-number">1</span>] = pWADData[offset + <span class="hljs-number">1</span>];<font></font>
    header.WADType[<span class="hljs-number">2</span>] = pWADData[offset + <span class="hljs-number">2</span>];<font></font>
    header.WADType[<span class="hljs-number">3</span>] = pWADData[offset + <span class="hljs-number">3</span>];<font></font>
    header.WADType[<span class="hljs-number">4</span>] = <span class="hljs-string">'\0'</span>;<font></font>
<font></font>
    <span class="hljs-comment">//0x04 to 0x07</span>
    header.DirectoryCount = bytesToInteger(pWADData, offset + <span class="hljs-number">4</span>);<font></font>
<font></font>
    <span class="hljs-comment">//0x08 to 0x0b</span>
    header.DirectoryOffset = bytesToInteger(pWADData, offset + <span class="hljs-number">8</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まとめて、これらの関数を呼び出して結果を出力しましょう</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">WADLoader::ReadDirectories</span><span class="hljs-params">()</span>
</span>{<font></font>
    WADReader reader;<font></font>
<font></font>
    Header header;<font></font>
    reader.ReadHeaderData(m_WADData, <span class="hljs-number">0</span>, header);<font></font>
<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; header.WADType &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; header.DirectoryCount &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; header.DirectoryOffset &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プログラムを実行して、すべてが機能するかどうかを確認してください！</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfa/693/d03/dfa693d039ab66df047768c209561ac2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いいね！</font><font style="vertical-align: inherit;">IWADラインははっきりと見えますが、他の2つの数値は正しいですか？</font><font style="vertical-align: inherit;">これらのオフセットを使用してディレクトリを読み取って、機能するかどうか確認してみましょう！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のオプションに対応するディレクトリを処理するために、新しい構造体を追加する必要があります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Directory</span>
{</span>
    <span class="hljs-keyword">uint32_t</span> LumpOffset;
    <span class="hljs-keyword">uint32_t</span> LumpSize;
    <span class="hljs-keyword">char</span> LumpName[<span class="hljs-number">9</span>];<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、ReadDirectories関数を追加しましょう。オフセットをカウントして、それらを取り出します！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
各反復で、i * 16を乗算して、次のディレクトリのオフセット増分に移動します。</font></font><br>
<br>
<pre><code class="cpp hljs">Directory directory;<font></font>
<font></font>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; header.DirectoryCount; ++i)<font></font>
{<font></font>
    reader.ReadDirectoryData(m_WADData, header.DirectoryOffset + i * <span class="hljs-number">16</span>, directory);<font></font>
<font></font>
    m_WADDirectories.push_back(directory);<font></font>
<font></font>
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; directory.LumpOffset &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; directory.LumpSize &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; directory.LumpName &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを実行し、何が起こるかを確認します。</font><font style="vertical-align: inherit;">うわー！</font><font style="vertical-align: inherit;">ディレクトリの大きなリスト。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fb/7b5/af6/8fb7b5af6df0d44303c11d5bd005e93d.png" alt="実行2"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
塊の名前から判断すると、データを正しく読み取ることができたと想定できますが、これを確認するより良い方法があるかもしれません。</font><font style="vertical-align: inherit;">Slade3を使用してWADディレクトリエントリを見てみましょう。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d1c/6b7/21c/d1c6b721c04575fe71785efe1f2bdbd3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しこりの名前とサイズは、コードを使用して取得したデータに対応しているようです。</font><font style="vertical-align: inherit;">今日は素晴らしい仕事をしました！</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他の注意事項</font></font></h2><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ある時点で、ディレクトリを格納するためにベクターを使用するのが良いと思いました。</font><font style="vertical-align: inherit;">マップを使用しないのはなぜですか？</font><font style="vertical-align: inherit;">これは、線形ベクトル検索でデータを取得するよりも高速です。</font><font style="vertical-align: inherit;">それは悪い考えです。</font><font style="vertical-align: inherit;">マップを使用する場合、ディレクトリエントリの順序は追跡されませんが、正しいデータを取得するにはこの情報が必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてもう1つの誤解：C ++でのマップは、O（ログN）検索時間の赤黒ツリーとして実装されており、マップを反復すると、常にキーの順序が増加します。</font><font style="vertical-align: inherit;">平均時間O（1）と最悪時間O（N）を提供するデータ構造が必要な場合は、順序付けられていないマップを使用する必要があります。</font></font></li>
<li><s>   WAD   —   .        ,      WAD     . , -     .</s><br>
<br>
<strong>DOOMReboot</strong>: <em> . 15      —  ,       ,   fseek,      ,   .      ,   -  (       20 ). fseek  .         ,     .     ,           WAD     .  ,          WAD  ,     L3  ,    .</em></li>
</ul><br>
<h2> </h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Source code</a><br>
<br>
<h2>  </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
WADファイルの読み取りを学習したので、読み取ったデータを使用してみましょう。</font><font style="vertical-align: inherit;">ミッションデータ（世界/レベル）を読み取って適用する方法を学ぶのは素晴らしいことです。</font><font style="vertical-align: inherit;">これらのミッション（ミッションランプ）の「チャンク」は、複雑で扱いにくいものにする必要があります。</font><font style="vertical-align: inherit;">したがって、徐々に知識を動かし、発展させる必要があります。</font><font style="vertical-align: inherit;">最初の小さなステップとして、Automap関数のようなものを作成しましょう：トップビューのある地図の2次元平面。</font><font style="vertical-align: inherit;">まず、ミッションランプの内部を見てみましょう。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">カードの解剖学</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度始めましょう。DOOMレベルの説明は、壁が線でマークされている2D図面によく似ています。ただし、3D座標を取得するために、各壁は床と天井の高さを使用します（XYは水平方向に移動する平面であり、Zは、たとえばエレベーターで持ち上げたり、プラットフォームから降りたりして上下に移動できる高さです。これら3つ座標コンポーネントはミッションを3Dワールドとしてレンダリングするために使用されますが、良好なパフォーマンスを確保するために、エンジンには特定の制限があります。レベルの上下に部屋が配置されておらず、プレイヤーは上下を見ることができません。別の興味深い機能：ロケットなどのプレイヤーの砲弾、高いプラットフォームにあるターゲットを攻撃するには、垂直に登ります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらの奇妙な機能により、DOOMが2Dエンジンであるか3Dエンジンであるかについて、無限のホリバーが発生しています。徐々に外交上の妥協点に達し、多くの命が救われました。当事者は両方に受け入れられる「2.5D」の指定に同意しました。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
タスクを簡略化してトピックに戻るために、この2Dデータを読み取って、何らかの形で使用できるかどうか確認してみましょう。後でそれらを3Dでレンダリングしようとしますが、ここではエンジンの個々の部分がどのように連携するかを理解する必要があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
調査の結果、各ミッションは「ピース」のセットで構成されていることがわかりました。これらの「ランプ」は、常に同じ順序でDOOMゲームのWADファイルに表示されます。</font></font><br>
<br>
<ol>
<li><strong> (VERTEXES):</strong>     2D.   VERTEX   LINEDEF.   VERTEX    /LINEDEF,   .           . (,      «Vertices»,      .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow">merriam-webster</a>,   .</li>
<li><strong>LINEDEFS:</strong> ,       .    ()   ,  ,    .</li>
<li><strong>SIDEDDEFS:</strong>         —    ,     .       ,  SIDEDEFS —  lump,       (LINEDEF).</li>
<li><strong>SECTORS:</strong>  —  «»,   LINEDEF.     ,     , ,  ,  , ,  //.          , ,       .</li>
<li><strong>SSECTORS:</strong> ()      ,        BSP,    ,      .            .  SSECTOR     , ,  ,  .   ,  «»,     Lump  ...</li>
<li><strong>SEGS:</strong>  /LINEDEF;  ,  «» /LINEDEF.    BSP-   ,     (  — ).     ,   linedefs       SEG.  SEG       LINEDEF.   SSECTOR     segs.</li>
<li><strong>NODES:</strong>  BSP —     ,   .      ,  SSECTOR ( SEG)   .  SEG,   ,   ,       SEGs,     .</li>
<li><strong>THINGS:</strong> Lump   THINGS —       (,   ..).    lump      /, ,  ,  , ,   .</li>
<li><strong>REJECT:</strong>  lump    ,      .    ,  ,      .          , , .        ,     .  REJECT         .</li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ブロックマップ：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレーヤーの衝突認識情報とTHINGモーション。</font><font style="vertical-align: inherit;">ミッション全体のジオメトリをカバーするグリッドで構成されています。</font><font style="vertical-align: inherit;">各グリッドセルには、その内部または交差するLINEDEFのリストが含まれています。</font><font style="vertical-align: inherit;">これは、衝突の認識を大幅に高速化するために使用されます。衝突チェックは、プレーヤーごとに数個のLINEDEF / THINGに対してのみ必要であり、計算能力を大幅に節約します。</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2Dマップを生成するときは、VERTEXESとLINEDEFSに焦点を当てます。</font><font style="vertical-align: inherit;">頂点を描画し、それらをlinedefで指定された線に接続できる場合は、マップの2Dモデルを生成する必要があります。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f4/dd4/a3b/3f4dd4a3b79fab0d47e7f1212a73df83.png" alt="デモマップ"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上記のデモカードには、次の特性があります。</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4つのピーク</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点1（10.10）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（10,100）のトップ2</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（100、10）のトップ3</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（100,100）のピーク4</font></font></li>
</ul></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4ライン</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上1から2までの線</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上1から3までの線</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上2から4までの線</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">トップ3から4までのライン</font></font></li>
</ul></li>
</ul><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点フォーマット</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご想像のとおり、頂点データは非常に単純です-一部の座標のxとy（点）だけです。</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドサイズ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ・タイプ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x00-0x01</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">短い署名</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xの位置</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x02-0x03</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">短い署名</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y位置</font></font></td>
</tr>
</tbody>
</table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linedefフォーマット</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linedefには詳細情報が含まれ、2つの頂点を結ぶ線と、この線のプロパティ（後で壁になる）が記述されています。</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フィールドサイズ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">データ・タイプ</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コンテンツ</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x00-0x01</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未署名のショート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">開始ピーク</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x02-0x03</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未署名のショート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最終ピーク</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x04-0x05</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未署名のショート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フラグ（詳細は以下を参照）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x06-0x07</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未署名のショート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">線種/アクション</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x08-0x09</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未署名のショート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">セクターラベル</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x10-0x11</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未署名のショート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">フロントsidedef（0xFFFF-サイドなし）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x12-0x13</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未署名のショート</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リアsidedef（0xFFFF-サイドなし）</font></font></td>
</tr>
</tbody>
</table></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linedefフラグの値</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
すべての線（壁）が描かれているわけではありません。</font><font style="vertical-align: inherit;">それらのいくつかは特別な動作をします。</font></font><br>
<br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ビット</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">説明</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プレイヤーとモンスターの道を塞ぐ</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">モンスターをブロック</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">両面</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">３</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上部のテクスチャは無効になっています（これについては後で説明します）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下のテクスチャは無効になっています（これについては後で説明します）。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">シークレット（片面の壁として地図に表示）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">音を遮る</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自動カードに表示されない</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常にオートカードに表示されます</font></font></td>
</tr>
</tbody>
</table></div><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ゴール</font></font></h2><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapクラスを作成します。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">頂点データを読み取ります。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linedefデータを読み取ります。</font></font></li>
</ol><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建築</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、クラスを作成してマップと呼びましょう。</font><font style="vertical-align: inherit;">その中に、カードに関連するすべてのデータを保存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
とりあえず、頂点とlinedefだけをベクトルとして保存し、後で適用できるようにする予定です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、WADLoaderとWADReaderを補完して、これら2つの新しい情報を読み取れるようにします。</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">コーディング</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードはWAD読み取りコードに似ています。構造を追加するだけで、それらにWADからのデータを入力します。</font><font style="vertical-align: inherit;">新しいクラスを追加し、マップ名を渡すことから始めましょう。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Map</span>
{</span>
<span class="hljs-keyword">public</span>:<font></font>
    Map(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> sName);<font></font>
    ~Map();<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> <span class="hljs-title">GetName</span><span class="hljs-params">()</span></span>; <span class="hljs-comment">// Incase someone need to know the map name</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">AddVertex</span><span class="hljs-params">(Vertex &amp;v)</span></span>; <span class="hljs-comment">// Wrapper class to append to the vertexes vector</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">AddLinedef</span><span class="hljs-params">(Linedef &amp;l)</span></span>; <span class="hljs-comment">// Wrapper class to append to the linedef vector</span><font></font>
<font></font>
<span class="hljs-keyword">protected</span>:
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> m_sName;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Vertex&gt; m_Vertexes;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;Linedef&gt; m_Linedef;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、これらの新しいフィールドを読み取るための構造を追加します。</font><font style="vertical-align: inherit;">これはすでに数回行っているので、一度に追加します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Vertex</span>
{</span>
    <span class="hljs-keyword">int16_t</span> XPosition;
    <span class="hljs-keyword">int16_t</span> YPosition;<font></font>
};<font></font>
  <font></font>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Linedef</span>
{</span>
    <span class="hljs-keyword">uint16_t</span> StartVertex;
    <span class="hljs-keyword">uint16_t</span> EndVertex;
    <span class="hljs-keyword">uint16_t</span> Flags;
    <span class="hljs-keyword">uint16_t</span> LineType;
    <span class="hljs-keyword">uint16_t</span> SectorTag;
    <span class="hljs-keyword">uint16_t</span> FrontSidedef;
    <span class="hljs-keyword">uint16_t</span> BackSidedef;<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、WADReaderからそれらを読み取るための関数が必要です。これは、以前に行ったものに近いものになります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">WADReader::ReadVertexData</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> *pWADData, <span class="hljs-keyword">int</span> offset, Vertex &amp;vertex)</span>
</span>{<font></font>
    vertex.XPosition = Read2Bytes(pWADData, offset);<font></font>
    vertex.YPosition = Read2Bytes(pWADData, offset + <span class="hljs-number">2</span>);<font></font>
}<font></font>
  <font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">WADReader::ReadLinedefData</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">uint8_t</span> *pWADData, <span class="hljs-keyword">int</span> offset, Linedef &amp;linedef)</span>
</span>{<font></font>
    linedef.StartVertex = Read2Bytes(pWADData, offset); <font></font>
    linedef.EndVertex = Read2Bytes(pWADData, offset + <span class="hljs-number">2</span>);<font></font>
    linedef.Flags = Read2Bytes(pWADData, offset + <span class="hljs-number">4</span>);<font></font>
    linedef.LineType = Read2Bytes(pWADData, offset + <span class="hljs-number">6</span>);<font></font>
    linedef.SectorTag = Read2Bytes(pWADData, offset + <span class="hljs-number">8</span>);<font></font>
    linedef.FrontSidedef = Read2Bytes(pWADData, offset + <span class="hljs-number">10</span>);<font></font>
    linedef.BackSidedef = Read2Bytes(pWADData, offset + <span class="hljs-number">12</span>);<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここには何も新しいことはないと思います。</font><font style="vertical-align: inherit;">そして今、これらの関数をWADLoaderクラスから呼び出す必要があります。</font><font style="vertical-align: inherit;">事実を述べさせてください。ここでは、塊のシーケンスが重要です。マップの名前が塊ディレクトリにあり、その後、マップに関連付けられているすべての塊が指定の順序で続きます。</font><font style="vertical-align: inherit;">タスクを単純化し、ランプインデックスを個別に追跡しないようにするために、マジックナンバーを取り除くことができる列挙型を追加します。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> EMAPLUMPSINDEX<font></font>
{<font></font>
    eTHINGS = <span class="hljs-number">1</span>,<font></font>
    eLINEDEFS,<font></font>
    eSIDEDDEFS,<font></font>
    eVERTEXES,<font></font>
    eSEAGS,<font></font>
    eSSECTORS,<font></font>
    eNODES,<font></font>
    eSECTORS,<font></font>
    eREJECT,<font></font>
    eBLOCKMAP,<font></font>
    eCOUNT<font></font>
};</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
また、ディレクトリリストで名前でマップを検索する機能を追加します。</font><font style="vertical-align: inherit;">ここにはかなりの数のレコードがあるため、後でマップデータ構造を使用してこのステップのパフォーマンスを向上させる可能性が高く、特にテクスチャ、スプライト、サウンドなどのリソースのロードの開始時に、それらを頻繁に通過する必要があります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">WADLoader::FindMapIndex</span><span class="hljs-params">(Map &amp;<span class="hljs-built_in">map</span>)</span>
</span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m_WADDirectories.size(); ++i)<font></font>
    {<font></font>
        <span class="hljs-keyword">if</span> (m_WADDirectories[i].LumpName == <span class="hljs-built_in">map</span>.GetName())<font></font>
        {<font></font>
            <span class="hljs-keyword">return</span> i;<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うわー、ほぼ完成です！</font><font style="vertical-align: inherit;">さて、VERTEXESを数えましょう！</font><font style="vertical-align: inherit;">繰り返しますが、これは以前に行ったことがあるので、これを理解する必要があります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">WADLoader::ReadMapVertex</span><span class="hljs-params">(Map &amp;<span class="hljs-built_in">map</span>)</span>
</span>{
    <span class="hljs-keyword">int</span> iMapIndex = FindMapIndex(<span class="hljs-built_in">map</span>);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (iMapIndex == <span class="hljs-number">-1</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    iMapIndex += EMAPLUMPSINDEX::eVERTEXES;<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(m_WADDirectories[iMapIndex].LumpName, <span class="hljs-string">"VERTEXES"</span>) != <span class="hljs-number">0</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">int</span> iVertexSizeInBytes = <span class="hljs-keyword">sizeof</span>(Vertex);
    <span class="hljs-keyword">int</span> iVertexesCount = m_WADDirectories[iMapIndex].LumpSize / iVertexSizeInBytes;<font></font>
<font></font>
    <font></font>
<font></font>
    Vertex vertex;<font></font>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; iVertexesCount; ++i)<font></font>
    {<font></font>
        m_Reader.ReadVertexData(m_WADData, m_WADDirectories[iMapIndex].LumpOffset + i * iVertexSizeInBytes, vertex);<font></font>
<font></font>
        <span class="hljs-built_in">map</span>.AddVertex(vertex);<font></font>
<font></font>
        <span class="hljs-built_in">cout</span> &lt;&lt; vertex.XPosition &lt;&lt; <span class="hljs-built_in">endl</span>;
        <span class="hljs-built_in">cout</span> &lt;&lt; vertex.YPosition &lt;&lt; <span class="hljs-built_in">endl</span>;
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うーん、同じコードを常にコピーしているようです。</font><font style="vertical-align: inherit;">将来的に最適化する必要があるかもしれませんが、今のところは自分でReadMapLinedefを実装します（またはリンクからのソースコードを見てください）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最後の仕上げ-この関数を呼び出して、マップオブジェクトを渡す必要があります。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">WADLoader::LoadMapData</span><span class="hljs-params">(Map &amp;<span class="hljs-built_in">map</span>)</span>
</span>{
    <span class="hljs-keyword">if</span> (!ReadMapVertex(<span class="hljs-built_in">map</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Error: Failed to load map vertex data MAP: "</span> &lt;&lt; <span class="hljs-built_in">map</span>.GetName() &lt;&lt; <span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
<font></font>
        <span class="hljs-keyword">if</span> (!ReadMapLinedef(<span class="hljs-built_in">map</span>))<font></font>
    {<font></font>
        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Error: Failed to load map linedef data MAP: "</span> &lt;&lt; <span class="hljs-built_in">map</span>.GetName() &lt;&lt; <span class="hljs-built_in">endl</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<font></font>
}</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、メイン関数を変更して、すべてが機能するかどうかを確認します。</font><font style="vertical-align: inherit;">E1M1マップをロードしたいのですが、マップオブジェクトに転送します。</font></font><br>
<br>
<pre><code class="cpp hljs">    <span class="hljs-function">Map <span class="hljs-title">map</span><span class="hljs-params">(<span class="hljs-string">"E1M1"</span>)</span></span>;<font></font>
    wadloader.LoadMapData(<span class="hljs-built_in">map</span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでは、すべてを実行してみましょう。</font><font style="vertical-align: inherit;">うわー、面白い数字がたくさんありますが、本当ですか？</font><font style="vertical-align: inherit;">確認しよう！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sladeがこれに役立つかどうか見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sladeメニューでマップを見つけ、しこりの詳細を確認できます。</font><font style="vertical-align: inherit;">数値を比較してみましょう。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/48b/3ec/439/48b3ec43988e25260d45a4abd1999c91.png" alt="バーテックス"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いいね！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Linedefはどうですか？</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/96f/93d/ecd/96f93decd409dad0b8b6836726345a08.png" alt="Linedef"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
マップをレンダリングするときに使用するこの列挙も追加しました。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword">enum</span> ELINEDEFFLAGS<font></font>
{<font></font>
    eBLOCKING      = <span class="hljs-number">0</span>,<font></font>
    eBLOCKMONSTERS = <span class="hljs-number">1</span>,<font></font>
    eTWOSIDED      = <span class="hljs-number">2</span>,<font></font>
    eDONTPEGTOP    = <span class="hljs-number">4</span>,<font></font>
    eDONTPEGBOTTOM = <span class="hljs-number">8</span>,<font></font>
    eSECRET        = <span class="hljs-number">16</span>,<font></font>
    eSOUNDBLOCK    = <span class="hljs-number">32</span>,<font></font>
    eDONTDRAW      = <span class="hljs-number">64</span>,<font></font>
    eDRAW          = <span class="hljs-number">128</span>
};</code></pre><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">その他の注意事項</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
コードを書く過程で、必要以上のバイトを誤って読み、誤った値を受け取りました。</font><font style="vertical-align: inherit;">デバッグのために、私はメモリ内のWADオフセットを調べ始め、正しいオフセットになっているかどうかを確認しました。</font><font style="vertical-align: inherit;">これは、バイトまたはメモリを追跡するための非常に便利なツールであるVisual Studioメモリウィンドウを使用して実行できます（このウィンドウでブレークポイントを設定することもできます）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
メモリウィンドウが表示されない場合は、[デバッグ]&gt; [メモリ]&gt; [メモリ]に移動します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27d/cba/0d3/27dcba0d33094493822f4444a4c0d8c8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これで、メモリ内の値が16進数で表示されます。</font><font style="vertical-align: inherit;">これらの値は、任意のランプを右クリックし、それを16進数として表示することにより、スレードでの16進数表示と比較できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1cc/159/757/1cc15975726f8a1204bf674aa0824fc6.png" alt="スレイド"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それらをメモリにロードされたWADのアドレスと比較します。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/970/2af/c96/9702afc96be99794e7d9f01e4d6d89bb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして今日の最後のこと：これらのすべての頂点値を見ましたが、コードを書かずにそれらを視覚化する簡単な方法はありますか？</font><font style="vertical-align: inherit;">私はこれに時間を無駄にしたくありません。私たちが間違った方向に進んでいることを知るだけです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
確かに誰かがすでにプロッタを作成している。</font><font style="vertical-align: inherit;">「グラフに点を描く」と</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ググったところ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、最初の結果は</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">プロットポイントの</font></a><font style="vertical-align: inherit;"> Webサイト</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">-Desmosでした</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">その上にクリップボードから数字を貼り付けることができ、彼はそれらを描画します。</font><font style="vertical-align: inherit;">それらは "（x、y）"の形式でなければなりません。</font><font style="vertical-align: inherit;">それを取得するには、表示機能を少し変更するだけです。</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"("</span>  &lt;&lt; vertex.XPosition &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; vertex.YPosition &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
うわー！</font><font style="vertical-align: inherit;">すでにE1M1のようです！</font><font style="vertical-align: inherit;">私たちは何かを達成しました！</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/499/ce6/36b/499ce636b2dbd6bd3e158bff07304b37.png" alt="E1M1プロットポイント"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うのが面倒な場合は、点線グラフへのリンクを</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次に示し</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、もう1つステップを踏んでみましょう。少し作業した後、linedefsに基づいてこれらのポイントを接続できます。</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c2f/423/35b/c2f42335b751d3bd9acec03251204977.png" alt="E1M1プロット頂点"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにリンクがあります：</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E1M1プロット頂点</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソース</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ソースコード</font></font></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考資料</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Doom Wiki </font></font></a><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZDoom Wiki</font></font></a></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja471538/index.html">モバイルアプリケーションのアイデアから投資家が投資するMVPまで</a></li>
<li><a href="../ja471542/index.html">OCRテキスト認識</a></li>
<li><a href="../ja471544/index.html">愛について、またはなぜコサックセンチュリオンは彼のユニフォームをウズベクのローブに変えたのか</a></li>
<li><a href="../ja471548/index.html">アーティストが読むべき本トップ5</a></li>
<li><a href="../ja471550/index.html">ゲーム開発やその他の商用プロジェクト用のオーディオはどこで入手できますか？自然の音が聞こえる図書館</a></li>
<li><a href="../ja471554/index.html">アプリケーションとコンテンツの販売からの税請求のリスクを減らす方法は？</a></li>
<li><a href="../ja471556/index.html">富士通ワールドツアー2019。最大のカンファレンスはどうでしたか</a></li>
<li><a href="../ja471558/index.html">ママ、私はテレビにいます。デジタルブレイクスルーコンテストのフィナーレはどうでしたか</a></li>
<li><a href="../ja471562/index.html">重複感染2：問題のルビコン、テクノロジーの大失敗、新しい希望</a></li>
<li><a href="../ja471564/index.html">TP-Link TL-WN727Nを使用したRaspberryPiのフレンド</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>