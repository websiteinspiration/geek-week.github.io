<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🚀 🙎🏿 🧝🏽 単語で書かれた数のスマートパーサー 🎪 🛎️ 👆🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="プロローグ
 

こんにちは、親愛なる読者。この記事では、ロシア語で書かれた数を解析する方法について説明します。
 

このパーサーは賢いので、誤った入力の結果として、または画像からの光学式テキスト認識の結果として（OCR）エラーが発生したテキストから数値を抽出できます。
 

レイジーの場合：
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>単語で書かれた数のスマートパーサー</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453642/"><img src="https://habrastorage.org/webt/x_/al/d2/x_ald2dbs-mrb8gyk1v9z7fzk9w.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">プロローグ</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">こんにちは、親愛なる読者。</font><font style="vertical-align: inherit;">この記事では、ロシア語で書かれた数を解析する方法について説明します。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このパーサーは賢いので、誤った入力の結果として、または画像からの光学式テキスト認識の結果として（OCR）エラーが発生したテキストから数値を抽出できます。</font></font></p><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">レイジーの場合：</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
githubプロジェクト</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">へのリンク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;">link</font></a><font style="vertical-align: inherit;">。</font></font></p><br>
<a name="habracut"></a><br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">アルゴリズムから結果へ</font></font></h1><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">このセクションでは、使用されるアルゴリズムについて説明します。</font><font style="vertical-align: inherit;">注意、たくさんの手紙！</font></font></p><br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">問題の定式化</font></font></h2><br>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">職場で、スマートフォン/タブレットカメラで撮影した印刷文書のテキストを認識する必要があります。</font><font style="vertical-align: inherit;">守秘義務の関係上、写真の例は出せませんが、ある表にはある指標を数字や言葉で表記した表があり、このデータは必ず読まなければなりません。</font><font style="vertical-align: inherit;">数値が正しく認識されるようにするには、追加の検証ツールとして、テキストを単語で解析する必要があります。</font><font style="vertical-align: inherit;">ただし、ご存じのとおり、OCRは正確なテキスト認識を保証しません。</font><font style="vertical-align: inherit;">たとえば、単語で書かれた20番は、「dvupat」または「dvupat」とさえ認識できます。</font><font style="vertical-align: inherit;">これを考慮して最大量の情報を抽出し、起こり得るエラーの値を評価する必要があります。</font></font></p><br>
<p><b>.</b>      tesseract 4.  .NET   NuGet-  ,        ,   : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">Genesis.Tesseract4</a>.</p><br>
<br>
<h2>   </h2><br>
<p>  ,      ,  ,   .      ,    .</p><br>
<p>     ,          . ,    , .. ,  ,     .      .</p><br>
<p>,   ,  «  ».      (<i></i>),     ,    :</p><br>
<code>"  " =  +  +  = 100 + 20 + 3 = 123</code><br>
<br>
<p>  ,   ,    «    ».</p><br>
<code>"    " = ( + ) ×  + ( + ) = 212 * 1.000 + 105 = 212.105.</code><br>
<br>
<p> ,      (      ),    ,     ,    – 212,   (1000).     ,       , ,          .        ,       ,    — ,   « » . ,      ,  <i></i>, ,  «»  «»   ,   ,    «».</p><br>
<p>      .      (<i></i>),       ,     –    .</p><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th></th>
<th></th>
<th></th>
<th>?</th>
</tr>
<tr>
<td><br>
</td>
<td>0<br>
</td>
<td>1<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>/<br>
</td>
<td>1<br>
</td>
<td>1<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>/<br>
</td>
<td>2<br>
</td>
<td>1<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>…<br>
</td>
<td>…<br>
</td>
<td>1<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>19<br>
</td>
<td>1<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>20<br>
</td>
<td>2<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>…<br>
</td>
<td>…<br>
</td>
<td>2<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>90<br>
</td>
<td>2<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>100<br>
</td>
<td>3<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>…<br>
</td>
<td>…<br>
</td>
<td>3<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>900<br>
</td>
<td>3<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>//<br>
</td>
<td>1.000<br>
</td>
<td>4<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>//<br>
</td>
<td>1.000.000<br>
</td>
<td>5<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>…<br>
</td>
<td>…<br>
</td>
<td>…<br>
</td>
<td><br>
</td>
</tr>
<tr>
<td>//<br>
</td>
<td>1.000.000.000.000.000<br>
</td>
<td>8<br>
</td>
<td><br>
</td>
</tr>
</tbody></table></div><br>
<p>  ,         ,      ,   ,      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">  </a>.</p><br>
<p>   .   :</p><br>
<ol>
<li><i> </i> (globalLevel). ,      .       .    -,       ,   .</li>
<li><i> </i> (globalValue).  ,         .</li>
<li><i> </i> (localLevel). ,      .   ,    ,     .</li>
<li><i> </i> (localValue).  ,   , ..   999.</li>
</ol><br>
<p>   :</p><br>
<ol>
<li>       "\s+".</li>
<li>  ,      .</li>
<li>  :<br>
<ul>
<li>   ,  ,       .   –  ,  .</li>
<li>      .</li>
<li>           .</li>
<li>    .</li>
</ul></li>
<li>   :<br>
<ul>
<li>   ,  ,       .   –  ,  .</li>
<li>      .</li>
<li>     .</li>
</ul></li>
<li>       .</li>
</ol><br>
<p>    «       ».</p><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th><br>
</th>
<th>globalLevel<br>
</th>
<th>globalValue<br>
</th>
<th>localLevel<br>
</th>
<th>localValu<br>
</th>
</tr>
<tr>
<td></td>
<td>–<br>
</td>
<td>–<br>
</td>
<td>–<br>
</td>
<td>–<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>–<br>
</td>
<td>–<br>
</td>
<td>1<br>
</td>
<td>2<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>5<br>
</td>
<td>2.000.000<br>
</td>
<td>–<br>
</td>
<td>–<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>5<br>
</td>
<td>2.000.000<br>
</td>
<td>3<br>
</td>
<td>200<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>5<br>
</td>
<td>2.000.000<br>
</td>
<td>1<br>
</td>
<td>212<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>4<br>
</td>
<td>2.212.000<br>
</td>
<td>–<br>
</td>
<td>–<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>4<br>
</td>
<td>2.212.000<br>
</td>
<td>3<br>
</td>
<td>100<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>4<br>
</td>
<td>2.212.000<br>
</td>
<td>2<br>
</td>
<td>180<br>
</td>
</tr>
<tr>
<td><br>
</td>
<td>4<br>
</td>
<td>2.212.000<br>
</td>
<td>1<br>
</td>
<td>185<br>
</td>
</tr>
</tbody></table></div><p>  2.212.185.</p><br>
<h2> </h2><br>
<p>       ,      ,          .</p><br>
<p>     .   ,        ,    OCR.     ,        .</p><br>
<p>    ,      :</p><br>
<ol>
<li>      . ,  «» -   «»,  «»  «»  .     tesseract    «»  .  , ,  ,       .     tesseract  3  4   ,      .<br>
</li>
<li> .     (   ).          «».     .<br>
</li>
<li> –      .  ,        ,        .<br>
</li>
</ol><br>
<p>    ,  ,   ,       .</p><br>
<p>         .  33           20,   <i> </i>:</p><br>
<code></code><br>
<br>
<p> 13, ,  <i> </i>.       12  (13    ).       .</p><br>
<p>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="> -</a>,        .     ,        .  ,        ,   .</p><br>
<p> :   –    -,   ,     .      . ,        ,      ,        .  , ,      .</p><br>
<p>   ,        : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">    </a>.       (, , ),         OCR,       .       NumeralLevenshteinData.txt,           Ctrl+A, Ctrl+C  Ctrl+V.</p><br>
<p>     , , ,          ,      –  ,         «»,       tesseract,                 «».</p><br>
<p>,    -  ,         .        ,         :</p><br>
<ul>
<li><i> </i>.    0 ( )  1 ( ), ,       .<br>
</li>
<li><i>  </i>.      ,    ,       .              .<br>
</li>
</ul><br>
<p>  :</p><br>
<ol>
<li>      .   –  ,  .</li>
<li> ,     :</li>
<li><p>        -.       ( )      ,    .</p><br>
<b>:</b>  «»    «»,     0.5, ..     «»   «»  0.5.       0.5 / 4 = 0.125.<br>
</li>
<li><p>    (   6 ),         3   .    6     : 3+3 .    7  –   , 3+4  4+3,  ..           ,     .</p><br>
<p>    ,    .  ,           (,   0.1),       .    , ..   «»     «»  «»,     «». ,    .</p><br>
<p><b>:</b>  «»      «»,  0.25.  ,     «» + «»  0.25 ( «»  «»),    0.35,       «».</p><br>
</li>
<li>             .  .</li>
</ol><br>
<p> ,        ,        (,   0.67).       ,     .</p><br>
<h2>     ,      </h2><br>
<p> ,           \s+,        -      ,     .     ,    ,          ,   .</p><br>
<h2>    </h2><br>
<p>       ,       «»  .  ,  , , ,   -,      « », « »   «    ». ,        .</p><br>
<h2> </h2><br>
<p>     :</p><br>
<ol>
<li><b> .</b>  « »  « »       2000.       ,   ,      ,       ,     .<br>
</li>
<li><b> .</b>    «»   .  ,   ,   «»  ,     ,        ,       OCR.<br>
</li>
<li><b> .</b>    long  double    «», «»  .…     .<br>
</li>
<li><b> ,  .</b> ..         ,    ,       -.<br>
</li>
<li><b>  .</b>   ,   .<br>
</li>
<li><b> .</b>       ,     ,     .       ,   - . ,        –      OCR.           ,      .     ,       ,     -     .          ,   , ,   .<br>
</li>
</ol><br>
<h1>   ?</h1><br>
<p>     ,    samples.txt    .   :</p><br>
<img src="https://habrastorage.org/webt/fq/ed/ac/fqedacgduf7tewa8tvg-tn6zv3s.png"><br>
<br>
<p>   ,    ,  .         0.25,         , ,      .</p><br>
<p>   ,    ,    – «».       ,      (  ,   )        «».  ,       ,     ,   ,     =)</p><br>
<h1>   </h1><br>
<p>       ,       .     ,    ,    , ..         ,   .</p><br>
<p>    .NET Standart 2.0  C# 7.x,       .</p><br>
<p>            (  Genesis.CV.NumberUtils):</p><br>
<ul>
<li>RussianNumber.cs –  </li>
<li>RussianNumber.Data.cs –    </li>
<li>RussianNumber.ToString.cs –     </li>
<li>RussianNumberParserOptions.cs –  </li>
<li>NumeralLevenshtein.cs –   -</li>
<li>NumeralLevenshteinData.txt – ,   </li>
</ul><br>
<p>:</p><br>
<ul>
<li>RussianNumber.ToString(value) –    </li>
<li>RussianNumber.Parse(value, [options]) –    </li>
</ul><br>
<h1></h1><br>
<p> ,           .        ,    ,     ,         .    , , ?    , ,     ?</p><br>
<p> ?  :</p><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">   JavaScript    </a><br>
</li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u=">      .   .NET      - (IL)</a><br>
</li>
</ul></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja453618/index.html">アイデアの取り扱い方とLANBIXの誕生</a></li>
<li><a href="../ja453622/index.html">G-Shieldチッププログラマー：製造段階でチップにデジタル証明書を書き込む</a></li>
<li><a href="../ja453626/index.html">別のスレッドでの冒険。Yandexレポート</a></li>
<li><a href="../ja453628/index.html">あなたは20年で何を支払いますか？</a></li>
<li><a href="../ja453634/index.html">システム分析のアルファ銀行学校</a></li>
<li><a href="../ja453644/index.html">インタビュー-Swiftに関する10の質問。パート3</a></li>
<li><a href="../ja453650/index.html">F-35ユニファイドストライクファイターソフトウェアオンボードサイバーインフラストラクチャ</a></li>
<li><a href="../ja453652/index.html">LogRock：ロギングによるテスト</a></li>
<li><a href="../ja453656/index.html">静的ウェブ：基本に戻りますか？</a></li>
<li><a href="../ja453660/index.html">Intelは、コアあたり5 GHzのターボ周波数を備えた新しいi9-9900KSプロセッサーを示しました</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>