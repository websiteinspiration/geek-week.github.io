<!doctype html>
<html class="no-js" lang="ja">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤬 🤰 #⃣ 箱のような写真-中には何がありますか？Yandexでのレポート ☑️ 🖕🏼 👊🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="写真とビデオは「ブラックボックス」であり、その中には興味深く理解できないものがたくさんあります。しかし、いくつかのフォーマットの内部を調べ、そこですべてを変更して、何が起こるかを確認できます。
 
 Evil Martians社のPolina Gurtovaya が2月のI   フロントエンド会議で...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>箱のような写真-中には何がありますか？Yandexでのレポート</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/493616/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">写真とビデオは「ブラックボックス」であり、その中には興味深く理解できないものがたくさんあります。</font><font style="vertical-align: inherit;">しかし、いくつかのフォーマットの内部を調べ、そこですべてを変更して、何が起こるかを確認できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Evil Martians社のPolina Gurtovaya </font><font style="vertical-align: inherit;">が2月の</font></font><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I&nbsp; </font></font><img src="https://habrastorage.org/webt/jq/7k/7w/jq7k7wi7p_23g0_clzmrmlgri7y.jpeg" width="20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&nbsp;フロントエンド</font></font></nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会議</font><font style="vertical-align: inherit;">で</font><font style="vertical-align: inherit;">講演しました</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">実験の助けを借りて、ポリーナは簡単な写真をメトリックで「効果的な画像」に変える方法を見つけました。</font><font style="vertical-align: inherit;">私たちのためにこれを行うことができるツールであるポリーナは、レポートの終わり近くを調べました。</font><font style="vertical-align: inherit;">その結果、PNGやJPEGからAV1やエキゾチックまで、さまざまなフォーマットの内部と動作原理への素晴らしいエクスカーションが生まれました。</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/CMlXUS6e46w" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- みなさん、こんにちは。</font><font style="vertical-align: inherit;">私の名前はポリーナです。「悪の火星人」という会社の最前線です。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
多分あなたは私たちの多くのオープンソースからの火星人を知っています。後で彼について少しお話します。そしておそらく私は、オープンソースを切り開くだけでなく、まだ製品を開発していると言わざるを得ません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ck/cs/gx/ckcsgxe6gmebfvkdo2rux-lwwgy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
レポートの資料は、</font><font style="vertical-align: inherit;">GitHubのリポジトリに</font><font style="vertical-align: inherit;">あるすばらしい</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">リンク</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">から入手でき</font><font style="vertical-align: inherit;">ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/km/90/d2/km90d2teg2yhoqpn4y7xs9x1ryq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最適化について少し話しましょう。私たちがそれらに対処する場合、問題は、私たちが何をしているかを理解していればうまく機能することです。私たちが理解しなければ、それはひどくわかります。画像の最適化に関して言えば、残念ながら、ここにあるすべてのものは本当に、本当にクールではありません。画像をまったく最適化しない可能性があり、製品に2メートルのモンスターが存在することになります。それはすべて悲しいことです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最適化した場合、何をしているのですか？私たちは考えます：ここに画像があります。これはある種の神秘的なブラックボックスであり、オプティマイザプログラムはこの画像、ある種の黒いシャーマニズムで何かを行います。私たちが得る最適化の品質は少し疑わしいです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/4g/hr/bv/4ghrbv-nnuqbug7iz0qavj4frma.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
例を見てみましょう。私はPNG形式の猫を飼っています。それを最適化する必要があると思います。私は何をやっている？ WebPバージョンを作成し、両方の画像を慎重に&lt;picture&gt;タグに入れます。私はここでうまくやったと思いますか？なぜそれほど手が少ないのですか？本当に元気です！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はすべてを正しく行いましたが、WebPバージョンは元のバージョンより2キロバイト多いことがわかりました。これは私が欲しかったものではありません。 </font></font><br>
<br>
<img src="https://habrastorage.org/webt/li/4r/hc/li4rhcov7blg4uquvq54dhmrrk8.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
別の最適化、試行番号2。ページに小さなコンテナと大きな大きな猫がいます。大きな猫を小さな容器に入れたいです。私は何をやっている？コンテナーのサイズが小さい場合、ネットワーク経由でバイトをドライブするのは愚かなので、サイズ変更を行っています。もちろん、デバイスのデバイスピクセル比を考慮に入れています。私がここでうまくやっていると思いますか？私はこれで終わりです！そして私がしたことを見てください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私はlibvipsライブラリーを使用しています。彼女はとてもかっこよくて人気があります、そして私の巨大ですが幸せな軽い猫から私は小さくて非常に重い猫を手に入れました。シールは、サイズ変更（ピクセル単位）中に2.5倍（バイト単位）増加しました。かっこいい？</font></font><br>
<br>
<img src="https://habrastorage.org/webt/rv/81/vf/rv81vftipmbdmz3opezzn42k6yw.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、これが私たちに起こらないように、私たちが自分のタスクのために画像を最適化する方法を理解し、そして一般的に、少なくとも何が起こっているのかを理解するために、ボックスを調べて中身を理解しましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ur/8y/tn/ur8ytn4gri-ezcgsvsxsulwbc10.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、PNGのような興味深いフォーマットから見ていきましょう。各サイトの周りには、小さなpeengshechkaがどこかに隠されています。今回。したがって、それらを理解する必要があります。 2番目：PNG-可逆圧縮形式。これは、元のピクセルと完全に一致することを保証することを意味しますが、同時に、悲しいことに、本質的に制限があり、どれだけ圧縮するかはできません。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-2/sp/r0/-2spr0e9x6o0qirw1n5fg__zkkk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Peengeshkaは、他の画像形式と同様に、コンテナーに折りたたまれます。プログラムがすべてを読み取る場合、プログラムに最初に伝える必要があるのは、内部にあるものです。あなたのデコーダーが拡張子によって画像を決定すると仮定すると、これはそうではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengashkaは、それがPNGであり、コンテナの最初の8バイトであると報告しています。 「PNG」と書いてあります。さらに、これもコンテナの特徴です-チャンクのレイアウトがいくつかあります。つまり、情報はチャンクにパックされ、何らかの形で配置されます。方法-コンテナを定義します。 PNGでは、次のようになります。長さを担当する4バイトと、チャンクのタイプを担当する4バイトがあります。どのようなタイプ-少し後で話します。  </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャンクの長さがゼロ以外の場合、ペイロードがあります。また、チェックサムなどもあります。何かが暴行されたかどうかを確認しています。次に以下のチャンクが来ます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/tw/-1/49/tw-1499ut7u6w6fl6rhas8tyk3m.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PNGファイルだけでなく、ほとんどすべてのファイルを解析するのは非常に簡単です。 FileReaderを取り上げてください。これはブラウザAPIです。 FileReaderを使用してファイルを読み取ります。読んだらすぐに、このファイルをチャンクに切り分けます。ここでは、チャンク分割関数のコードは示しませんが、ifとforの複雑な組み合わせがあると推測できます。  </font></font><br>
<br>
<img src="https://habrastorage.org/webt/n7/bg/sb/n7bgsbtsscwv-prpt2atx7a18d4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、私たちはそれを切りました、私たちは何が起こるかを見ていきます。チャンクにはいくつかのタイプがあり、それらはほとんどすべてのフォーマットの非常に、非常に特徴的なものです。 1つ目はIHDRと呼ばれます。 IDATと呼ばれるいくつかのチャンクがあります。これらの名前は少し奇妙に思えるかもしれませんが、これが何であるかを理解します。すべて終了すると、最後のチャンクが表示されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/y0/pc/b6/y0pcb6n_4f4uiuakytlvwzla3ao.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
チャンクの内部を詳しく見てみましょう。 IHDRはメタチャンクであり、ほとんどすべての画像にそのようなメタチャンクがあります。呼び方が異なり、配置が異なりますが、そうである可能性が高いです。これがないと、デコンプレッサー（peengeshkiまたはnon-peengeshkiを示すもの）は何も表示できません。このチャンクには何がありますか？繰り返しますが、コンテンツはほとんどのフォーマットで一般的です。これは高さと幅です。高さと幅はあなたのファイルに縫い付けられます、それはあなたに来ます。次は、典型的なパナッシュフラグです：bitDepth、colorType、インターレース。  </font></font><br>
<img src="https://habrastorage.org/webt/cj/ry/k3/cjryk3bpfhzf--zu_vofzg1vdcc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これらのフラグの意味と、フラグが非常に重要である理由について説明する前に、どのようにしてピクセルをpangshesに格納するかを見てみましょう。 peaneshsでは、ピクセルはIDATと呼ばれるチャンク内に格納されます。適切なシナリオでは、ピクセルはチャンクにパックされる特定の数の数値であり、このチャンクはDeflate圧縮アルゴリズムによって圧縮されます。誰がDeflate圧縮アルゴリズムを使用しましたか？わかりました、最後に何かを圧縮したのはいつですか？ Deflateがgzipであることを知っていますか？だから私は思う-多くはそれを使用した。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、peengeshahでは、非常に多くのフォーマットで使用されている別の興味深いものが表示されますが、おそらくすべてのフォーマットで使用されています。このギズモは予測コーディングと呼ばれます。実際のところ、画像はランダムなピクセルではありません。私たちの小さな絵に描かれているものは、どういうわけか互いに関連しています。いくつかの暗い領域、明るい領域などがあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私たちはこの事実を利用しようとしています。これらの青いセルにピクセル値を格納する代わりに、以前のピクセルに基づいてこれらのピクセルを予測しようとしています。 PNGでは、これらの予測は非常に単純で、ピクセルのある行の前の非常に最初のバイトにパッケージ化されています。予測は次のようになります。たとえば、何も予測せず、すべてをそのままにしてみましょう。または、たとえば、次のように言うことができます。ただし、現在のピクセルと前のピクセルの違いのみを保持します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ラインに同じ色がある場合、すべてゼロになり、すべてが完全に圧縮されます。これは非常にクールです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/ut/zh/jqutzhlx2vsbyxrbpbuogts9vbq.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、今ピクセルが実際に何を意味するかについて話しましょう。ピクセルは、peengeshにいくつかの数として表示されます。存在する数値の数を操作することで、PNGを3倍に非常に強く圧縮できます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのようなオプションがありますか？ 1つ目はTrue Colorとアルファです。 3つのチャネル、3つの色、色ごとに3つの数値があります。さらに、透明性を担当するチャネル。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この数値のビット単位のサイズはbitDepthであり、IHDRチャンクで確認したのと同じフラグです。 bitDepthが小さいほどファイルは小さくなりますが、表示できる色は少なくなります。典型的な数は8です。いくらですか。私の意見では、1千6百万は何かあります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、あなたができる最初の最適化はあなたのpeengeshのアルファチャンネルを捨てることです。これは別のcolorTypeになります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに最適化して、4つの数値ではなく1つの数値を使用できます。しかし問題は、あなたのペエンゲシュカは白黒でなければならないということです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それでも1つの数値だけが必要で、色を残している場合は、これも行うことができます。何が起きてる？ peengeshka内のすべての色を取り、それらを別のチャンクにカットします。それをパレットと呼びます。 IDATチャンク内のピクセルを担当するサンプルのさらに内側では、このパレットのインデックスを格納するだけです。複雑な背景や描画のないスクリーンショットがある場合、これは完璧です。彼女はすごいpeengeshkiを絞ります！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう1つ重要なことは、インターレースです。インターレースとは何ですか？これは、peengeshkaを徐々に出荷するときです。 peengeshkaは1つではなく、いくつかの画像があります。各画像はスキャンと呼ばれます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gq/u5/50/gqu550y52cqmqi9k14skfsy-bg0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、paengashka内で、いくつかのピクセルが写真から切り離されるようにピクセルを並べ替えます。1つの画像は特別な場所から取得されます。次の部分は別のものです。プログレッシブJPEGのような一見クールなテクニック。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
でもこんな感じです。ユーザーにこれを表示するかどうかはわかりませんが、タスクに役立つ場合があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Interlaced PNGの2番目の非常に深刻な問題は、peengeshkaをインターレースするとすぐに、peengeshkaのサイズが大きくなることです。そして、それほど弱くはありません。インターレースをオフにすると、数キロバイトのどこかで、6キロバイトのペエンゲスカが大きくなります。したがって、必要かどうかを慎重に検討してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/vg/p6/rq/vgp6rqgvogzln5frkfs5lmtcy4y.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここではPNGについてのみ説明しましたが、このことから重要で有用な結論を導き出すことができます。最初の結論：ファイルのサイズ、信じられないほど、そこに何が描かれているかによって異なります。黒い四角は猫よりもよく縮むので、ここでは何もお勧めしません。次に、より重要です。ファイルのサイズは、エンコーダーと転送するパラメーターに大きく依存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
恐ろしいエンコーダがどのように機能するかを確認したい場合は、ブラウザのエンコーダを使用してください。それはどのように行われますか？ PNGファイルを取得してキャンバスに描画し、[名前を付けて保存]をクリックして、何が起こったかを比較します。一般に、Chromeではファイルサイズが2.5倍、Firefoxでは1.6倍になります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ちなみに、これは常にフォーマットにも依存します。つまり、PNGだけを使用する必要はありません。それがすべてフォーマットに依存している理由と、私たちがまだ持っている興味深いオプションを理解しましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dk/z9/jd/dkz9jdpv9uy9ivtiqcl-f5nyzhk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これを行うには、古代の技術、JPEGについて説明します。もちろん、JPEGの重要性を軽視することはできません。彼らは至る所に見られます。それらはとてもかっこよくて良いです、そしてさらにもっと、JPEGのシールはかなり一般的な話です。しかし、JPEGはかなり複雑なものであり、JPEGは不可逆圧縮であるために複雑です。さらに、JPEGは常に非可逆圧縮です。 JPEG 100％の品質でも、損失はありますが圧縮されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どのように不可逆圧縮を行うのですか？とても簡単です。いくつかのソースを取得し、そこからデータを破棄して、損失なしに圧縮します。つまり、プラス1ステップです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ct/k7/pb/ctk7pba6jjplst_3mcqx-4r5xno.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEGでどのように損失が発生するかを見てみましょう。それで、サイズが32 x 32の猫を飼っています。損失を出して最初の一歩を踏み出すには、チャネルを変更する必要があります。通常、RGBの観点から画像について話します。しかし、色は少し複雑に見えます。私たちの脳は一般的に大きな問題ですが、JPEGの圧縮には非常に役立ちます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私達は白黒を非常によく知覚します。よく見ても、白黒画像の細部がはっきりとわかるでしょう。この白黒の画像を別のチャネルに配置するだけです。それはYと呼ばれます。実際には、Yバーです。私たちは彼とは何もしていません。彼をそのままにします。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
色を担当するチャネルがさらに2つあります。これらはCBとCRです。これらのチャネルを使用すると、もう少し楽しいことができます。ここでこれらのチャネルを使用して、ダウンサンプリングと呼ばれるこのようなクールな手順を生成します。私たちはこのチャンネルの解像度を取り、減らします。 JPEGの場合、半分にするのが一般的です。つまり、実際には、3枚の写真が得られます。1枚はオリジナルで、残りの半分は2枚です。やったー！</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は何をするの？ファイル全体ではなく、JPEGを圧縮しません。ブロックに分割してさらに圧縮します。すでにブロックを開始しています。 JPEGのブロックのサイズは8 x 8で、それらに何が起こるかを確認します。チャンネルYを見てみましょう。CBとCRはすべて同じです。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/gm/zo/yg/gmzoyg2byoms9jzzncnxvauwiic.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、ブロックは絵ではなく数字です。 JPEGで損失を出す必要があります。このブロックは8 x 8、64ピクセルですが、どれを捨てますか？左側のもの、右側のもの、真ん中のもの？はっきりしない。しかし、この問題を解決できる数学があります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
この数学は呼び出されます-今、誰かがひどい制度上の過去を覚えているなら、神経質にならないでください-離散コサイン変換。したがって、この離散コサイン変換の助けを借りて、ブロック内のこれらの数値を変換して、それらの間で重要かつ重要でないようにすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
重要：変換後、重要な数字はブロックの左上部分に残ります。右下には重要でない数字が残っています。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、JPEGを失う必要があります。これも非常に簡単です。このトリックは量子化と呼ばれます。あなたが今寝たいなら申し訳ありませんが、これは重要です、私を信じてください。したがって、この非常に量子化はかなり単純な方法で機能します。あなたはあなたのブロックと特別に設計されたプレートを取ります。このプレートは、エンコーダプログラムによって決定されます。あなたのブロックで判明したそれらの数は、あなたはこのプレートタームで数と整数で割ります。結果として何が得られますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
プレートの右下部分の数値が大きいため、ゼロのみになります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cw/ak/a4/cwaka4z7wsiu0agcr4d6say3ddc.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
同時に、JPEG、ブロックは完全に圧縮されます。あなたはそのような複雑なジグザグでバイパスする少数の数値を持ち、ゼロはすべて消え、そして乾杯、私たちのブロックは圧縮の準備ができています。次に、それを可逆圧縮アルゴリズムで圧縮するだけです。 JPEGは、ハフマンコーディングを使用します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jv/f9/lr/jvf9lrka6wigwi-l09lcfejpf6a.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
どうやってコンテナに詰めますか？ JPEGコンテナは少し馬鹿げているように見えます。最初の2バイトが表示されており、これはJPEGである可能性が高いためです。しかし、これまでのところ明確ではありません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、2つのメタチャンクを探す必要があります。なぜ二人？ JPEGは、さまざまな規格の非常に大きなセットであるためです。 JPEGは、標準でJIFFと呼ばれています。これは、JPEG標準の特別な拡張です。これ以上続けません。通常、メタチャンクは2つあります。信頼してください。これらのメタチャンクには、ファイルの幅と高さ、およびJPEGのバージョンに関する情報が含まれています。 JPEGにはもっと多くのバージョンがあります。さらに、プログレッシブJPEGですか？これは重要なフラグです。彼はあなたのブロックがさらに分散される方法について話します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEGがプログレッシブでない場合、ブロックをデコードするには何が必要ですか？ JPEG品質、これこそまさにプレートです。ブロックを分割するプレートは品質です。しかし、JPEGには2つの性質があります。 1番目の品質はチャネルY、2番目は品質を決定します。チャネルCBおよびCRでは、これが色を決定します。品質をファイルに入れ、すべてを可逆圧縮アルゴリズムに圧縮したので、これを拡張するための特別なハフマンテーブル辞書も必要です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次にあなたのブロックが来て、それからあなたのJPEGが終わります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/hj/qz/ap/hjqzaprqwxahztq8enqtwzq5cce.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、進歩的な物語。すべてがまったく同じです。最初はメタチャンクがあります。次に、64桁の数字と64桁の数字の形で品質が決まります。そして、同じブロックですが、分散された数値では少し異なります。ブロックの最初の部分、次に別の部分、別の部分など。これらのブロックを受信すると、実際にはこれらの数値はファイルの一部の近似値であるため、ブラウザーはJPEGの近似値を描画します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/qq/uq/x3/qquqx3mnyg-nx0pn8a0lgmjufpa.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
完成したJPEGについては、息を吐くことができます。 JPEG 2000のような興味深いものについて話しましょう。本番環境でJPEG 2000を使用している人はいますか？わかりました、これを聞いたことがありますか？そして、あなたはライトハウスで「モダンフォーマットを使用する」を読んだことがありますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般的に、JPEG 2000はクールで興味深いフォーマットであり、まずJPEGよりも効果的です。第二に、あなたはそれを信じないでしょう、いくつかのケースでは、後で説明するWebPよりも効果的です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
彼は透明性を保つ方法を知っており、損失なく圧縮する方法を知っています。ちょうど完璧なフォーマット。しかし残念ながら、はい、それはサファリでのみ機能します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEG 2000は非常に複雑な方法で設計されており、ウェーブレット変換と呼ばれるクールな数学に取り組んでいることに言及する価値があります。あなたが突然興味を持っているなら、グーグル、そして私たちはさらに進みます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/li/b8/qw/lib8qwt1s_r7xowxervhr6yaay0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、突然ビデオについて話す必要があります。このレポート全体は、画像の最適化と画像に関するものです。しかし、ここのビデオは非常に重要であり、今すぐその理由がわかります。ビデオについて考えるとき、最初に頭に浮かぶのは「コーデック」です。ビデオはなんらかの方法でエンコードする必要があり、ビデオを表示するには、デコードする必要があります。ビデオストリームをデコードすると、何が得られますか？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まず、フレームのセットがあります。ただし、これらのフレームをGIFの画像と考えないでください。すべてが間違っています。どのフレームがコーデックに大きく依存しているか。ただし、一般的なケースでは、キーフレームがあると想定できます。あなたはキーフレームから猫を得ることができます-ある意味では、このキーフレームにあるどんな写真でも。そして、依存するフレームがあります。依存フレームには画像に関する情報だけでなく、前または前のフレームのブロックがこの上でどのように移動したかに関する情報も格納されるため、依存フレームから猫を出すことは不可能です。したがって、少しデコードするまで、依存フレームの画像を取得できません。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これからお話しするのは、キーフレームとフレーム内圧縮です。これは、キーフレーム内の画像を圧縮する方法です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
真空で抽象的なコーデックを見て、JPEGと比較してみましょう。これまでのところそうです-なぜこれをするのですか？すべてが明確になるでしょう、私を信頼してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/i9/vh/7y/i9vh7ygfkhjucwtefchjamthm3u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
もう一度、JPEGと同じことを繰り返します。写真を撮り、それをチャネルに分割し、チャネルにダウンサンプリングします。ここで同じ話。次に、この画像をブロックに分割します。しかし、すでに機能があります。まず、割り込むブロックのサイズは、コーデックによって異なります。そして、これらのブロックは非常に大きくなる可能性があります。 JPEGの場合-8 x8。ビデオコーデックの場合-たとえば、128 x 128にすることができます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
遠く。注意が必要な非常に小さな詳細が画像に表示された場合でも、ブロックを少し、約4 x 4のサイズに細分割できます。ブロックを分割する方法、このパーティションアルゴリズムはコーデックに依存します。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そして、最新の-最大ブロックサイズは、あなたのコーデックに固有です。エンコーダはコーデックの一部であり、用語で理解されます。ここでもJPEGに似ています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/r0/la/y3/r0lay3m2i5yjdu-sx9by6lsyhpi.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
JPEGのように見えないのは、予測コーディングです。私たちは彼について、部分的にペエンゲスキについて話しました。このため、フレーム内ビデオの圧縮は非常にクールで効果的です。何が起きてる？</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以前のブロックに基づいて各ブロックのピクセルを予測しようとしています。つまり、ピクセルを生の形式で保存するのではなく、予測します。予測オプションはたくさんあります。 1つのコーデック内で、予測のさまざまなバリアントを使用できます。さらに、これらのオプションのあらゆる種類の複雑なコーデックについては、たとえば35もの数です。どうすればこれを行うことができます。いくつかの例を見てみましょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここにブロックがあります。あなたは言う：私はそこでピクセルを予測したい。あなたは左に目を向け、見上げて、何が左上にあるかを思い出します。次に、見つけたすべてのピクセル値を取り、平均化してブロックで埋め、次のように言います：私は予測しました。正解で、ちなみに青い矢印のある小さな画像で正解だったとしたら、正解です。それであなたは他に何もする必要はありません。しかし、推測していない場合は、実際のものと予測したものの違いを保存する必要があります。この違いは、純粋なピクセル値よりもはるかによく圧縮されます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dx/mb/cg/dxmbcg7w-imsyuamimesxnxi3s0.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
その後、すべてがJPEGとまったく同じです。結果のブロックを変換します。しかし、あらゆる種類のコーデックの特徴は、DCT（離散コサイン変換）ではなく、他のものを使用できることです。使用するものはコーデックによって異なります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/_k/sj/7x/_ksj7xbki-d-hjam59vm-ovudtk.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次に、同じプレートですが、JPEGとは異なり、ファイル全体に複数のプレートを使用でき、ブロックごとに複数の異なるプレートを使用できます。想像してみてください-たとえば、空に対して人がいるとします。おそらく、空は青なので、特別な品質は必要ありません。空に対して1つの品質、1つのプレートを使用できます。そして、どんな風合い、服を持っている人にとっても、異なる品質を使用してください、そしてそれはクールで効果的であることがわかります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ax/lh/mc/axlhmcjhw3u18r0v826se8n74me.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最新のものは、JPEGにはないもので、JPEGには非常に欠けているものがあります。これはフィルターの使用です。私たち全員が刈り取ったとき、圧縮後にそのような厄介なアーティファクトを取得します。これまでにJPEGを低品質に圧縮したことがある場合は、JPEGが悪夢のようなひどいブロックに単純に分解されるのを確認する必要があります。一般に、これらのアーティファクトを取り除くために、ビデオコーデックは特別なものを使用します。それらはフィルターを適用し、これらのブロックのエッジは滑らかになります。 JPEGで同じことを可能にした古代の技術は、そのようなものでした。あなたはあなたのJPEGを取り、それを非常に、非常に強く圧縮し、そして何も目立たないようにこのようにそれを曲げます。一般的に、これはほぼ同じですが、コーデックレベルで既に行われています。すごい。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/eu/kn/oe/euknoewgg9xovgain172cbr03eu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当然のことながら、これをすべて試した後、受信したブロックを損失することなく圧縮する必要があります。圧搾しました。圧縮アルゴリズムはJPEGに似ていますが、それでも異なります。ここで、可逆圧縮は自然の制限によって制限されることを理解する必要があります。私たちは本当にそれに近づきたいと思っています。それに近づくための最良の方法は、算術符号化と呼ばれるアルゴリズムを使用することです。そして、あらゆる種類のバリエーションもあります。これもまたエンコーダーに依存しますが、ロスレス圧縮があると仮定してみましょう。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/li/9q/ej/li9qej4dyf4w1tqxuu0kdyma1pe.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
私は長い間、これらの抽象的なコーデックを適切な名前で真空で呼び出したかったのです。歴史的な小旅行。 20年後に何が起こったのですか？私は、少なくとも何らかの形でWebでサポートされているビデオコーデックについてのみ話しています。 H.264は、あらゆるものをサポートするコーデックです。これは、ビデオ全体のデフォルトのソリューションです。しばらくすると、数年後、VP8ビデオコーデックが表示されます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここで野生の戦争が始まり、これらのコーデックのどちらが優れているかというトピックに関するホリバール。私は非常に長い間グーグルしました-答えはありません。これについては素晴らしい科学記事が書かれていますが、平均して、今私が同じことを言うと、トマトが飛来します。しかし、大丈夫、それらは同じです。平均。では、なぜ秒が必要なのでしょうか。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2つ目は無料であるため必要です。 H.264を使用する場合、状況によってはMPEGマネーを運ぶ必要があります。 VP8の場合、お金を運ぶ必要はありません。それは良いです。 VP8キーフレーム-これはWebPです。実際、なぜ新しい画像形式を発明する必要があるのでしょうか。私たちはキーフレームを取って、一生懸命頑張って、すべてを絞りました。私たちはそれをすべて新しい形式の写真と呼んでいます。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は何が起こる？その後、数年後、MPEGとGoogleのさらに2つのクールなビデオコーデックがほぼ同時に登場します。 Googleから-VP9、MPEGから-H.265。 H.265の隣に、HEIFと呼ばれる新しい画像標準があります。ブラウザーではサポートされておらず、ブラウザーではサポートされていません。しかし、それはあなたのAppleデバイスによってサポートされています。 HEIF標準は、このアイデアを抽象化したものにすぎないので、めちゃくちゃ面白いです。 HEIFコンテナでは、ほとんどすべてのコーデックからキーフレームを詰め込むことができます。つまり、VP8は最新の形式ではありません。しかし、HEIFは最新のものです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
次は何が起こる？現在、MozillaとGoogleを含む非常に大規模な組織で、AV1と呼ばれるビデオコーデックが登場しています。この組織はAlliance for Open Mediaと呼ばれています。 AV1ビデオの品質は、以前のものより何倍も高いです。彼は無料で、ロイヤリティは無料で、とてもクールです。このような素晴らしいHEIFコンテナがあります。あとは、AV1キーフレームを押し込むだけです。そしてそれが行われます。 AV1キーフレームをHEIFコンテナーにプッシュするための新しいフォーマットはAVIFと呼ばれます。これが私たちの未来を待っています。多分いつか私たちはそれをネイティブで使うでしょう。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、今はそれを使用できます。ページの動画から1フレームだけを配置して、次のように言います。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/jq/k0/cm/jqk0cmtzq6oafsae-uvllieobks.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これはwebpでどのように行われますか？私が言ったように、WebPは、riffと呼ばれるコンテナーにパッケージ化されたVP8キーフレームです。リフコンテナーにそのようなヘッダーがあります。そこには、信じられない、これがWebPであると書かれています。誰がそれを疑うでしょう。 PNGは、PNG WebPであると言っていますが、あります。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
しかし、WebPには興味深い機能があります。VP8キーフレームはその中に置くことができ、これは通常WebPと呼ばれるものです。しかし、VP8キーフレームはそうではないかもしれません。一般に、WebPはロスレス圧縮をサポートしています。 WebPロスレスは、VP8、非可逆圧縮などとはまったく関係のない完全に異なる形式です。したがって、誰かがWebPが他のものよりも効果的であると言うとき、最初に尋ねる質問は何ですかWebP何か？ロスレス圧縮について言えば、私たちが努力できる自然な通路があるからです。 「...より60％効果的」なこれらの違いは、おそらくロスレスではなく、ロスのあるWebPです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さて、十分な理論、うんざり、すでに何かを見てみましょう。</font><b><sup><sub><font style="vertical-align: inherit;">クリック可能</font></sub></sup></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/y3/5q/ut/y35qutrwbylxwzjo_dj17alkys8.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これから始めましょう。プロのカメラで撮った写真を撮ります。それから1000 x 1000ピクセルの部分を切り取ります。これは、偶然にも、プロジェクターで非常にクールに見えます。細部の検討を始めます。同時に、この部分を圧縮して正確に15キロバイトを取得します。</font><b><sup><sub><font style="vertical-align: inherit;">クリック可能</font></sub></sup></b><font style="vertical-align: inherit;"> 
何が起こるかを参照してください。 JPEGはすぐにブロックに陥りました。確かに、低品質、私たちはこれを期待していました。</font><font style="vertical-align: inherit;">
これはWebPの外観です。それもブロックに落ちましたが、これらのブロックはそれほどはっきりとは見えません。 WebPエンコーダーを使用して手で制御すると、WebPで使用されるフィルターの強度を制御できます。そして、このフィルターを強く外すと、多数のブロックアーティファクトを取り除くことができます。したがって、純粋に理論的には、これらのブロックも削除できます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/9q/c_/jp/9qc_jpasvkhbwiz3zjpxhsgsgji.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
そしてAV1です。ただ黙って観賞しましょう。彼がいかにクールか見てください。 AV1はFirefox、Chromeでサポートされているため、突然必要になった場合は、画像の代わりにAV1ビデオを使用できます。</font><b><sup><sub><font style="vertical-align: inherit;">クリック可能</font></sub></sup></b><font style="vertical-align: inherit;"> 
スポイラーがあり、無駄に追加しました。 PNGがWebPを打ち負かす状況。はい、この場合のPNGはWebPよりも効果的です。これは、損失の多いWebPを使用したためです。</font><b><sup><sub><font style="vertical-align: inherit;">Clickable</font></sub></sup></b><font style="vertical-align: inherit;"> 
私は</font><b><sup><sub><font style="vertical-align: inherit;">peengeshkaで</font></sub></sup></b><font style="vertical-align: inherit;">何をしましたか？インデックス付きカラーモードを作成しました。つまり、パレットを16色にカットしました。白黒写真にとても効果的です。結構、結構縮んだ。高品質の損失のあるWebPの場合、サイズを大きくしました。ただし、ロスレスの場合、これは予想されることであり、peengeshkaよりも効率的です。勝ちました。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/z5/5e/bs/z55ebsmfycy45l6beelixuwfz2k.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/cl/yu/ua/clyuuarpr6mv6byxk2x_wlya7z4.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
まとめます。非常にクールな埋め込み式のパンギングは、不可逆圧縮形式を無効にし、無損失WebPを無効にしません。悲しいことに、悲しいことに。</font><b><sup><sub><font style="vertical-align: inherit;">クリック可能</font></sub></sup></b><font style="vertical-align: inherit;"> 
多分あなたは質問に苦しめられています：なぜあなたはこれをしているのですか、SVGが何か知っていますか？そして、私は知っていますが、サイズによっては、PNGの方が効率的です。この画像は、サイズが200 x 200の場合、SVGよりも効果的であることがわかります。もちろん、SVGが優先されます。</font><b><sup><sub><font style="vertical-align: inherit;">Clickable</font></sub></sup></b><font style="vertical-align: inherit;"> 
Nowマイクを見てみましょう。これはマイクです。サイズは3000 x 3000ピクセルです。 JPEG対WebP。ここで、JPEGが優勢であることは明らかでした。しかし、この場合、ほぼ同じ視覚品質で約6％の勝利を収めました。これは写真の特徴であり、私がこの写真をどのように準備したかです。その後、私にそれをどのようにしたかを尋ねることができます。</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/mk/br/bx/mkbrbxyyxxkfbft-22mssst0thk.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/io/5j/lq/io5jlqupl72tvqohsbyd0qqowmm.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/y2/0y/a_/y20ya_ybbu1hlmeqsp_b7ii3iv8.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clickable。</font></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
それでも、すべては非常にエンコーダーのパラメーターに依存します。非常に頑張ってエンコーダパラメータを特別な方法で緩めると、JPEGは同じ視覚品質を実現するためにサイズがWebPに勝ち始めます。猫はJPEGよりも縮小率が高いと結論付けたいが、そうではない。これは、必要に応じてねじを緩める方法のほんの一例です。</font><b><sup><sub><font style="vertical-align: inherit;">クリック可能</font></sub></sup></b><font style="vertical-align: inherit;"> 
これは非常に低品質です。 JPEGはブロックに分類されます。これは特にプロジェクターで明白です-鼻は犬で青くなり、正方形になりました。 WebPはそれほど病気ではありません。すべてがクールで良いように見えますが、非常に低い品質の場合、WebPはJPEGの約2倍、またはおそらく3倍のファイルサイズを提供します。したがって、ここでは、どのような品質が必要かについても考える必要があります。</font><b><sup><sub><font style="vertical-align: inherit;">クリック可能</font></sub></sup></b></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/3g/hr/06/3ghr06olqwqeom_ru2i0xvlki-u.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/9q/-f/xp/9q-fxpk1zj_xq3yjvdunqa2trrm.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
これは最も正直な比較です。 H.264とWebPは似ているため、比較する必要があります。ここで誰が勝ったと思いますか？ H.264。しかし、正直に言うと、実験は完全にクリーンではありませんでした。良い意味で、WebPとH.264の両方で、ビデオフレームはほぼ明確です。</font><b><sup><sub><font style="vertical-align: inherit;">Clickable</font></sub></sup></b><font style="vertical-align: inherit;"> 
しかし、AV1を使用すると、すべてが完全に明確になります。同じ視覚的品質で30％が勝ちます。やったー！</font><b><sup><sub><font style="vertical-align: inherit;">クリック</font></sub></sup></b><font style="vertical-align: inherit;"> 
可能どのような画像を配置するか、およびこの形式またはその形式が画像の品質にどのように応答するかを理解することは非常に重要です。ここで、WebP形式の犬の品質は79キロバイトで、JPEGの56キロバイトに対して約75％です。なんでこんなことが起こっているの？</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/zn/yd/1u/znyd1unstrzgknbpbc_3w_flga0.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><img src="https://habrastorage.org/webt/gg/b9/pf/ggb9pfrw4c1vcjdjeb1g8qeyeum.jpeg"></a><br>
<b><sup><sub><font style="vertical-align: inherit;"></font></sub></sup></b><br>
<br><font style="vertical-align: inherit;"></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
単一のビデオコーデックではないため、単一のフォーマットではノイズを適切に圧縮できません。画像にこのような鋭い歪み、ドットなどがたくさんある場合、おそらく圧縮に問題があります。他の写真を撮ってこのノイズを取り除くことができる場合は、取り除いてください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
つまり、写真は複雑なものです。彼らはあなたのインターフェースを遅くすることができますか？重要で良い質問です。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/wq/ss/ux/wqssux2vgg3zjhog3chbctkuwxy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
回答：おそらくそうではありません。なぜそれが起こるのですか？画像がデコードされると、別のストリームで発生するためです。ただし、例外があります。キャンバスに何かを描画する場合、画像のデコードがメインストリームで発生し、その時点ではボタンが押されない場合があることを覚えておく必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yb/3-/x3/yb3-x3j8yz_y4lpg9i-zwlwhbjm.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本当に取引したい場合は、Chromeを開き、対応するラスタライズスレッドと画像デコードイベントを探してください。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/cz/hi/na/czhinaou_xikxzzjk8i_kzdvx3u.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非常に好奇心が強い場合は、[トレース]タブに移動して、画像のデコード時に何が起こるかを詳細に確認できます。</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最適化ツール </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最も重要なことは、最適化ツールです。これで、必要なものがおおまかにわかりました。これをどのように行うかを理解する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/w5/o9/s1/w5o9s1vjdbzscsb_tr513umrqbu.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
いかに奇妙に聞こえても、最も重要な画像最適化ツールはデザイナーです。このすばらしい人だけが、あなたが彼と一緒に解決したい問題を知っています。ページを最適化するために画像を追加するのではなく、ユーザーを感動させるためのものです。最適化の度合いとユーザーエクスペリエンスのバランスを維持するには、多くのことを支援するデザイナーを使用します。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/dm/da/rj/dmdarj1ouin679hqaw075cozmiw.jpeg"><br>
<b><sup><sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">スライドからのリンク</font></font></a></sub></sup></b><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
2番目のツールは火星のオープンソースです。これはimgproxyと呼ばれ、一般的に私たちのすべての問題を解決します。私のプロジェクトでは、imgproxyのみを使用しています。これで、ほぼすべてのことができます。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ex/9a/fz/ex9afzkiiywmkkknxjrndj4svhs.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使い方？その絵に何か希望はありますか。特定の最適化を行った特定のサイズの画像が必要です。そして、どこか遠くにあなたはどんな解像度の写真も持っています-多分ローカルコンピュータ上に、あるいは多分ユーザーのどこかにまたは一般的にどこにでも。特別なURLを作成し、imgproxyに画像のサイズ変更を依頼するだけです。これはそのようなサービスであり、クラウドまたは他の場所にある可能性があります。つまり、巨大な猫がいて、imgproxyに特別なURLを送信します。彼はあなたがその場であなたが望むすべてをします。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/de/9x/up/de9xupjotbsna-qdrecbjjixlz4.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
それが明確に聞こえない場合は、imgproxyへのリクエストがどのように見えるか見てみましょう。まず、imgproxyの場所を通知する必要があります。第2に、積極的に吸い込まれたくない場合は、求めているURLがデジタル署名されると便利です。これを行うことはできません。これは追加の保護手段です。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
さらに、サイズを変更する場合は、URLに直接、サイズ変更パラメーターを渡します。あなたが最適化したい場合-同じこと。あなただけのあなたの写真の元のアドレスを転送する必要があります。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/iq/ij/zq/iqijzqvjy98twszsumxw5j-g_ds.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
手動による最適化が必要な場合は、ツールの膨大なセットがあります。ここではそれらすべてについては説明しません。</font><font style="vertical-align: inherit;">送付するレポート</font><font style="vertical-align: inherit;">の</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">資料</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">はすべて揃っています。</font></font><br>
<br>
<img src="https://habrastorage.org/webt/sm/gb/1v/smgb1vvmd2kwmpgmtivk2var9dy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ここが最もクールで便利です。</font><font style="vertical-align: inherit;">これらすべての画像はそれほど複雑ではありません。</font><font style="vertical-align: inherit;">なんとかお伝えできたと思います。</font><font style="vertical-align: inherit;">興味がある場合は、お気に入りのプログラミング言語（おそらくJavaScriptですが、事実には程遠い）を取り上げて、すべてを整理してください。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ブラウザでこれを実行したい場合は、ください。</font><font style="vertical-align: inherit;">おそらくプラスまたはCで記述されたバインディングがおそらく必要です。しかし、これをすべてWebAssemblyでコンパイルできないのはなぜですか。</font><font style="vertical-align: inherit;">Squooshと呼ばれる素晴らしいアプリケーションがあります。</font><font style="vertical-align: inherit;">それはまさにそれを行います。</font><font style="vertical-align: inherit;">あなたもできます、試してみてください。</font><font style="vertical-align: inherit;">本当に好きです。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ご清聴ありがとうございました。</font><font style="vertical-align: inherit;">レポートの資料- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ja&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参照</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ja493598/index.html">電話番号の一部を非表示にする</a></li>
<li><a href="../ja493604/index.html">3月23日から29日までのモスクワでのデジタルイベント</a></li>
<li><a href="../ja493606/index.html">サイバーパンクで味わうクラウドサービスの歴史</a></li>
<li><a href="../ja493610/index.html">DispmanX APIを使用してRaspberry Piでビデオレイヤーをプログラミングする</a></li>
<li><a href="../ja493614/index.html">Keras、TensorFlow、Deep Learningを使用してX線でCOVID-19を検出</a></li>
<li><a href="../ja493618/index.html">（ない）TwitterのOSINTは明らか</a></li>
<li><a href="../ja493620/index.html">ロジスティック曲線。流行はいつ終わりますか？</a></li>
<li><a href="../ja493622/index.html">AngularにRetrowaveを書き込む</a></li>
<li><a href="../ja493626/index.html">Selenoid-何百もの並列UIテストを簡単かつ高速に。パベル・セニン</a></li>
<li><a href="../ja493630/index.html">リモートでの作業のためにWindows 10からUSBポートを転送する</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>