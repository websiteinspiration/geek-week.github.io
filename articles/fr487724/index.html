<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëé üë®üèΩ‚Äçüé§ üèÆ BlazingPizza: application Blazor du d√©but √† la fin. Partie 2. Ajouter un composant üîù üå•Ô∏è üë©üèº‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour tous le monde! √Ä tous ceux qui veulent en savoir un peu plus sur Blazor. Aujourd'hui, nous continuerons √† cr√©er notre site pour une pizzeria, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BlazingPizza: application Blazor du d√©but √† la fin. Partie 2. Ajouter un composant</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487724/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour tous le monde! </font><font style="vertical-align: inherit;">√Ä tous ceux qui veulent en savoir un peu plus sur Blazor. </font><font style="vertical-align: inherit;">Aujourd'hui, nous continuerons √† cr√©er notre site pour une pizzeria, √† savoir, nous allons cr√©er un contr√¥leur web api et essayer d'afficher les donn√©es qui en d√©coulent sur le composant Blazor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√âtant donn√© que notre application concerne la pizza, il serait logique d'ajouter imm√©diatement une classe repr√©sentant notre produit principal. </font><b><font style="vertical-align: inherit;">Appelez-</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et ajoutez-le au projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">√Ä mon avis, l'ajout d'une nouvelle classe est tr√®s cool impl√©ment√© dans Rider, une bo√Æte de dialogue non bloquante appara√Æt, nous entrons le nom de la classe et nous pouvons ensuite choisir ce que nous devons cr√©er:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pl/95/q-pl95jcw5o2sdhgzzduaxzotke.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, une bo√Æte de dialogue appara√Ætra avec une demande d'ajout d'un fichier √† git, nous vous r√©pondrons par l'affirmative. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contenu du cours:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizza</span><font></font>
{<font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est un mod√®le pour certains types de pizza, plus tard, il peut √™tre configur√© comme nous le souhaitons, redimensionner, ajouter des garnitures et plus encore. Le nom des champs me semble parler de lui-m√™me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainPizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous aurons des classes repr√©sentant le domaine d'activit√© de notre application. Autrement dit, ils ne devraient pas savoir et ne sauront rien sur la fa√ßon dont nos donn√©es sont stock√©es ou comment elles sont affich√©es. Seules des informations sur l'objet m√©tier, c'est-√†-dire la pizza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous avons besoin de quelque chose pour transmettre ces donn√©es au client. Pour ce faire, acc√©dez au projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font><font style="vertical-align: inherit;">ajoutez le </font><b><font style="vertical-align: inherit;">PizzasController</font></b><font style="vertical-align: inherit;"> au dossier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contr√¥leurs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">Controller</span><font></font>
{<font></font>
    <span class="hljs-comment">// GET</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">Index</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> View();<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons besoin d'une m√©thode qui nous donne une liste de toutes les bases de la pizza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus d'ajouter une m√©thode, vous devez effectuer quelques √©tapes simples:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marquons</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le contr√¥leur avec l'attribut </font><b><font style="vertical-align: inherit;">[ApiController]</font></b><font style="vertical-align: inherit;"> qui donne certains avantages, notamment le retour automatique de 400 code si le mod√®le n'a pas pass√© la validation, sans lui c'est un </font><font style="vertical-align: inherit;">contr√¥leur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal </font><font style="vertical-align: inherit;">qui donne View.</font></font></li>
<li>  <b>[Route(¬´pizzas¬ª)]</b>.     Attribute Routing,        ,      <b>Conventional Routing</b>,    .   ‚Äúpizzas‚Äù   ?        <b>http{s}://hostName/pizzas/{}</b><br>
      .</li>
<li>    <b>Controller</b>  <b>ControllerBase</b>,      MVC .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, par exemple, nous avons fait une </font><font style="vertical-align: inherit;">demande </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas dans l'espoir d'obtenir une liste de toutes les pizzas et rien ne s'est pass√©. Encore une fois, l'accord est dans les accords. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il s'agissait d'une </font><font style="vertical-align: inherit;">demande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alors nous devons soit avoir une m√©thode ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en termes d' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asp.Net</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) marqu√©e avec l'attribut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HttpGet]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou, encore plus √©vident, juste une m√©thode appel√©e </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et c'est tout! Tout le reste .Net et la r√©flexion feront pour nous. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et renommez ainsi la seule m√©thode Index en Get. </font><b><font style="vertical-align: inherit;">Remplacez le</font></b><font style="vertical-align: inherit;"> type de la valeur de retour par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, n'oubliez pas d'ajouter le n√©cessaire en utilisant. </font><font style="vertical-align: inherit;">Eh bien, ins√©rez temporairement un stub que la m√©thode n'est pas impl√©ment√©e afin de compiler le code et assurez-vous qu'il n'y a pas d'erreurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, PizzasController.cs ressemblera √† ceci:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
<span class="hljs-keyword">using</span> BlazingPizza.DomainModels;<font></font>
<font></font>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">BlazingPizza.Server.Controllers</span><font></font>
{<font></font>
    [<span class="hljs-meta">ApiController</span>]<font></font>
    [<span class="hljs-meta">Route(<span class="hljs-meta-string">"pizzas"</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">ControllerBase</span><font></font>
    {<font></font>
        <span class="hljs-comment">// GET</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException();<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le moment, lancez l'application de d√©bogage, un bouton avec un bug vert. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nl/p6/pp/nlp6ppjxbnbnhjiwxb1_qbtgwsw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et assurez-vous que les itin√©raires sont correctement configur√©s. </font><font style="vertical-align: inherit;">Le port sur lequel vous devez effectuer des requ√™tes est visible sur l'onglet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Console</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/i0/hp/ypi0hpgkoc9cv68k8zvi9zsthnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans notre cas, il s'agit de 5000, si vous effectuez une requ√™te le long du chemin </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas, nous entrons dans l'action Get et capturons une exception NotImplementedException. </font><font style="vertical-align: inherit;">Autrement dit, alors que notre contr√¥leur ne fait rien d'utile, il accepte simplement les demandes et √©choue avec une erreur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous renvoyons les donn√©es du contr√¥leur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps que notre code fasse quelque chose d'utile, comme retourner des pizzas. </font><font style="vertical-align: inherit;">Jusqu'√† pr√©sent, nous n'avons pas mis en place de couche de donn√©es, nous retournons donc simplement quelques pizzas de notre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pour ce faire, renvoyez un tableau compos√© de deux objets </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ressemblera √† l'exemple ci-dessous:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-comment">// GET</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>[]<font></font>
    {<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">500</span>,<font></font>
            Description = <span class="hljs-string">"     "</span>,<font></font>
            Id = <span class="hljs-number">0</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/pepperoni.jpg"</span><font></font>
        },<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">400</span>,<font></font>
            Description = <span class="hljs-string">"   "</span>,<font></font>
            Id = <span class="hljs-number">1</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/meaty.jpg"</span><font></font>
        },<font></font>
    };<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le r√©sultat de la demande dans le navigateur sera le suivant:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/ep/f0/-cepf0dkn90kagmz-gul-dib42u.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer la page d'accueil</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La partie visible de l'application se trouve dans les composants </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.razor du</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> projet </font><b><font style="vertical-align: inherit;">BlazingPizza.Client</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous sommes int√©ress√©s par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans le dossier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pages</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ouvrez-le et supprimez tout son contenu que nous avons h√©rit√© du projet par d√©faut. </font><font style="vertical-align: inherit;">Et commen√ßons √† ajouter ce dont nous avons vraiment besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Ajoutez:</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cette directive est utilis√©e pour configurer le routage client et indique que ce contr√¥le sera charg√© par d√©faut, c'est-√†-dire si nous allons simplement √† l'adresse de l'application </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sans aucun / Index, / Pizzas ou autre chose. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">injecter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisant la directive</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">injecter</font></font></a> </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajoutez un service comme HttpClient √† notre page et appelez √©galement l'objet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Un objet de type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d√©j√† configur√© pour nous par le framework Blazor, nous pouvons donc simplement faire les requ√™tes dont nous avons besoin. </font><font style="vertical-align: inherit;">Ce type d'injection s'appelle </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Property Injection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , une impl√©mentation plus famili√®re via le constructeur n'est pas prise en charge, et comme le disent les d√©veloppeurs, il est peu probable qu'elle apparaisse un jour, mais est-elle n√©cessaire ici? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Ajoutez une directive</font></font><br>
<br>
<b><pre><code class="cs hljs"> @code{<font></font>
<font></font>
 }<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est sp√©cifiquement n√©cessaire pour h√©berger le code client C #, le m√™me qui remplace JavaScript. </font><font style="vertical-align: inherit;">√Ä l'int√©rieur de ce bloc, nous </font><b><font style="vertical-align: inherit;">pla√ßons</font></b><font style="vertical-align: inherit;"> une collection d'objets de type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><br>
<br>
<b><pre><code class="cs hljs">IEnumerable&lt;BasePizzaViewModel&gt; PizzaViewModels;</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Comme vous l'avez d√©j√† compris, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'existe pas, il est temps de le cr√©er, ce mod√®le sera compl√®tement analogue au mod√®le de domaine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">sauf qu'il aura le corps d'expression </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetFormattedBasePrice qui</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> retourne le prix de la pizza de base dans le format dont nous avons besoin. </font><font style="vertical-align: inherit;">Le mod√®le s'ajoutera √† la racine du projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.ViewModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fichier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel.cs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizzaViewModel</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">GetFormattedBasePrice</span>(<span class="hljs-params"></span>)</span> =&gt; BasePrice.ToString(<span class="hljs-string">"0.00"</span>);<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Retour √† notre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et bloc</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ajoutez un code pour obtenir toutes les pizzas disponibles. </font><font style="vertical-align: inherit;">Nous </font><b><font style="vertical-align: inherit;">placerons</font></b><font style="vertical-align: inherit;"> ce code dans la </font><font style="vertical-align: inherit;">m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">override</span> Task <span class="hljs-title">OnInitializedAsync</span>(<span class="hljs-params"></span>)</span> {<font></font>
	<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette m√©thode est appel√©e apr√®s l'initialisation du composant et au moment de l'appel, tous ses param√®tres sont d√©j√† initialis√©s par le composant parent. Dans ce document, vous pouvez effectuer certaines op√©rations asynchrones, apr√®s quoi une mise √† jour d'√©tat est requise. Plus tard, j'en parlerai plus en d√©tail. La m√©thode n'est appel√©e qu'une seule fois lors de la cr√©ation du composant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, ajoutez les pizzas √† obtenir dans cette m√©thode:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">var</span> queryResult = <span class="hljs-keyword">await</span> HttpClient.GetJsonAsync&lt;IEnumerable&lt;BasePizza&gt;&gt;(<span class="hljs-string">"pizzas"</span>);
</code></pre></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pizzas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un chemin relatif qui est ajout√© √† la base et qui a d√©j√† √©t√© d√©fini pour nous par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Comme suit √† partir de la signature de la m√©thode, les donn√©es sont demand√©es par la </font><font style="vertical-align: inherit;">demande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis le client essaie de les s√©rialiser en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. Puisque nous avons re√ßu des donn√©es du mauvais type que nous voulons afficher dans le composant, nous devons obtenir des objets de type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et sa m√©thode Select les utiliseront pour convertir les objets de la collection entrante en objets du type que nous pr√©voyons d'utiliser. Ajoutez la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† la fin </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<b><pre><code class="cs hljs">PizzaViewModels = queryResult.Select(i =&gt; <span class="hljs-keyword">new</span> BasePizzaViewModel()<font></font>
{<font></font>
    BasePrice = i.BasePrice,<font></font>
    Description = i.Description,<font></font>
    Id = i.Id,<font></font>
    ImageUrl = i.ImageUrl,<font></font>
    Name = i.Name<font></font>
});<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus tard, je montrerai comment faire sans √©crire ce code de mod√®le, mais pour l'instant, laissons-le tel quel. </font><font style="vertical-align: inherit;">Il semble que nous ayons tout ce dont nous avons besoin et nous pouvons proc√©der √† l'affichage des donn√©es re√ßues. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. Au-dessus de la directive </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">ajoutez le </font><font style="vertical-align: inherit;">code </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , √† l'int√©rieur duquel se trouveront les pizzas elles-m√™mes:</font></font><br>
<br>
<b><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pizza-cards"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, la liste ul avec le nom de la classe parlante ¬´pizza-cards¬ª est vide jusqu'√† pr√©sent, nous allons corriger cette erreur:</font></font><br>
<br>
<b><pre><code class="cs hljs">@foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
{<font></font>
    &lt;li style=<span class="hljs-string">"background-image: url('@pizza.ImageUrl')"</span>&gt;<font></font>
        &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"pizza-info"</span>&gt;<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"title"</span>&gt;@pizza.Name&lt;/span&gt;<font></font>
                @pizza.Description<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"price"</span>&gt;@pizza.GetFormattedBasePrice()&lt;/span&gt;                    <font></font>
        &lt;/div&gt;<font></font>
    &lt;/li&gt;<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout le plaisir ici est √† l'int√©rieur de la boucle. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour chaque</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(var {item} in {items})</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il s'agit d'un </font><font style="vertical-align: inherit;">balisage </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> typique </font><font style="vertical-align: inherit;">qui nous permet d'utiliser la puissance de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur la m√™me page que le </font><font style="vertical-align: inherit;">code </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal </font><font style="vertical-align: inherit;">. L'essentiel est de placer le symbole </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬´@¬ª</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devant les mots cl√©s et les variables de la langue </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä l'int√©rieur de la boucle, nous acc√©dons simplement aux propri√©t√©s de l'objet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au final, nous </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">affichons</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le prix de base format√© de la pizza √† l'aide de la m√©thode </font><b><font style="vertical-align: inherit;">GetFormattedBasePrice</font></b><font style="vertical-align: inherit;"> . C'est d'ailleurs la diff√©rence entre le mod√®le de domaine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et son </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> repr√©sentations, car cette m√©thode contient la logique la plus simple pour afficher le prix dans le format requis, dont nous n'avons pas besoin au niveau du service, o√π nous manipulons en quelque sorte le prix, mais ne le montrons nulle part. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous affichons les donn√©es re√ßues dans le navigateur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons obtenu toutes les donn√©es n√©cessaires √† afficher. Il est temps de lancer notre application et de vous assurer que tout fonctionne. Nous cliquons sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©boguer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rider,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ex√©cuter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lance simplement l'application sans capacit√© de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©bogage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ooh-ho, rien ne fonctionne non plus :) Ouvrez la console ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F12</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et voyez que tout est rouge, quelque chose s'est √©videmment mal pass√©. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor n'est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pas si d√©sesp√©r√© dans le d√©bogage et toute la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pile d'appels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut √™tre vue dans la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">console</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et √† mon avis, cela se fait encore mieux que dans le m√™me </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angular</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pas besoin de deviner par des signes indirects o√π l'erreur s'est produite, il suffit de regarder la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pile des appels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g-/4f/m5/g-4fm5pnokogbwv_c7vy3ru-5zk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un message </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException s'est produit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lors du rendu de la page </font><font style="vertical-align: inherit;">. Comment cela peut-il arriver, car nous avons initialis√© la </font><font style="vertical-align: inherit;">seule collection que nous utilisons </font><font style="vertical-align: inherit;">dans la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour mieux comprendre, ins√©rez la sortie de temps aux bons endroits pour voir le calendrier de ce qui s'est pass√©:</font></font><br>
<br>
<b><ol>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from markup block: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from cycle: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, before await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, after await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>); </code></pre></li>
</ol></b><br>
<img src="https://habrastorage.org/webt/oi/va/ch/oivachjfzw1mfopljcqmxwhurvy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la capture d'√©cran ci-dessous, dans la console, ce qui s'est pass√© au moment du rendu de la page. On peut voir que la page commence √† s'afficher avant m√™me la fin des m√©thodes asynchrones. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la premi√®re passe, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PizzaViewModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'√©tait pas encore initialis√© et nous avons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©tect√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> une </font><b><font style="vertical-align: inherit;">exception NullReferenceException</font></b><font style="vertical-align: inherit;"> . Ensuite, comme pr√©vu apr√®s que la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t√¢che a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> renvoy√© </font><font style="vertical-align: inherit;">la m√©thode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† l' </font><font style="vertical-align: inherit;">√©tat </font><b><font style="vertical-align: inherit;">RanToCompletion</font></b><font style="vertical-align: inherit;"> , le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contr√¥le a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©t√© </font><b><font style="vertical-align: inherit;">repens√©</font></b><font style="vertical-align: inherit;"> . Ce qui est remarquable, lors de la deuxi√®me passe, nous sommes entr√©s dans un cycle, comme le montrent les messages dans la console. Mais √† ce stade, l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface utilisateur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'est plus mise √† jour et nous ne voyons aucun changement visible.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/_r/yx/ki_ryxdxd-8xizlytgtgtb5lhpk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, le probl√®me est tr√®s facile √† r√©soudre, il vous suffit d'ex√©cuter une v√©rification </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulle de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mani√®re asynchrone avant d'ex√©cuter la boucle </font><font style="vertical-align: inherit;">, puis l'exception ne se produira pas pour la premi√®re fois et lors de la deuxi√®me passe, nous verrons les donn√©es dont nous avons besoin.</font></font><br>
<b><pre><code class="cs hljs">@if (PizzaViewModels != <span class="hljs-literal">null</span>)<font></font>
{<font></font>
    @foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
    {<font></font>
        ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. <span class="hljs-comment">//    </span><font></font>
    }<font></font>
}</code></pre><br>
</b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela semble un peu mieux maintenant, il n'y a plus de messages d'erreur dans la console et vous pouvez voir les informations qui nous sont parvenues du serveur: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/sj/zt/edsjztoc2aqa_wibm2mpdwvm2hy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c'est beaucoup mieux, mais il n'y a pas assez de styles et de ressources, en particulier des images, remplacez le contenu du dossier wwwroot par le contenu du dossier "~ / Articles / Part2 /BlazingPizza.Client/wwwroot "(lien √† la fin de l'article) et relancez le projet, tant mieux. </font><font style="vertical-align: inherit;">Bien que loin d'√™tre id√©al:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/ar/f-/mkarf-kymgsseuioay24uwx0wui.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√âv√©nements de la vie des composants</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque nous avons d√©j√† rencontr√© l'un des √©v√©nements de la vie du composant OnInitializedAsync, il serait logique de mentionner les autres:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©thodes d'initialisation</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oninitialized</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appel√© lorsque le composant est d√©j√† initialis√© et que ses param√®tres sont d√©j√† d√©finis par le composant parent. </font><font style="vertical-align: inherit;">Pendant la dur√©e de vie d'un composant, il est appel√© une fois apr√®s son initialisation.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version asynchrone de la premi√®re m√©thode, apr√®s ex√©cution, le composant est restitu√©. </font><font style="vertical-align: inherit;">Par cons√©quent, lors de l'√©criture de code, vous devez tenir compte du fait que certains objets peuvent √™tre nuls.</font></font><br>
</td>
</tr>
<tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©thode ex√©cutable avant de d√©finir les valeurs des param√®tres</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetParametersAsync</font></font><br>
</td>
<td> ,      .    <b>ParameterView</b>      .<br>
<br>
              <b>[Parameter]</b>  <b>[CascadingParameter]</b>    <b>ParameterView</b>.      ,    .        ,               )<br>
</td>
</tr>
<tr>
<th colspan="2">    <br>
</th>
</tr>
<tr>
<td>OnParametersSet<br>
</td>
<td>           .      ,      <br>
<br>
 ‚Äî             .<br>
 ‚Äî    ,                    .<br>
</td>
</tr>
<tr>
<td>OnParametersSetAsync</td>
<td>  OnParametersSet</td>
</tr>
<tr>
<th colspan="2">    </th>
</tr>
<tr>
<td>OnAfterRender</td>
<td>      .        .     JavaScript     DOM      .    bool  firstRender   true     .<br>
</td>
</tr>
<tr>
<td>OnAfterRenderAsync<br>
</td>
<td>   ,     Task   ,        -          .<br>
</td>
</tr>
<tr>
<th colspan="2">  <br>
</th>
</tr>
<tr>
<td>ShouldRender<br>
</td>
<td>          UI,     -  .      .             .<br>
</td>
</tr>
<tr>
<td>StateHasChanged<br>
</td>
<td>      ,    Blazor        .<br>
</td>
</tr>
<tr>
<td>Dispose<br>
</td>
<td>   ,       UI.  <b>StateHasChanged</b>  <b>Dispose</b>  .   Dispose     <b>IDisposable</b>,       <b>@implements IDisposable</b><br>
</td>
</tr>
</tbody></table></div><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette partie, nous avons appris √† recevoir des donn√©es du contr√¥leur et √† les afficher √† l'utilisateur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la partie suivante, nous allons ranger la disposition et ajouter une couche d'acc√®s aux donn√©es pour afficher les donn√©es r√©elles sur la page principale. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vers le r√©f√©rentiel de cette s√©rie d'articles. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vers la source d'origine.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487702/index.html">Une s√©lection d'articles sur l'apprentissage automatique: √©tudes de cas, guides et recherches pour janvier 2020</a></li>
<li><a href="../fr487704/index.html">Comment nous avons cr√©√© des rapports dynamiques au SSRS 2014</a></li>
<li><a href="../fr487706/index.html">D√©couverte de service dans les syst√®mes distribu√©s √† l'aide de l'exemple Consul. Alexander Sigachev</a></li>
<li><a href="../fr487716/index.html">Parfait SAST. Analyseur</a></li>
<li><a href="../fr487720/index.html">Sur le corutinisme concurrentiel (en utilisant la programmation r√©active comme exemple)</a></li>
<li><a href="../fr487728/index.html">@Pythonetc compilation, janvier 2020</a></li>
<li><a href="../fr487730/index.html">Traitement du langage naturel. R√©sultats 2019 et tendances 2020</a></li>
<li><a href="../fr487734/index.html">Acc√©l√©ration du noyau Entity Framework</a></li>
<li><a href="../fr487738/index.html">Animation de sch√©ma dans SCADA</a></li>
<li><a href="../fr487740/index.html">Assemblage d'un magn√©tom√®tre portable</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>