<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👎 👨🏽‍🎤 🏮 BlazingPizza: application Blazor du début à la fin. Partie 2. Ajouter un composant 🔝 🌥️ 👩🏼‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour tous le monde! À tous ceux qui veulent en savoir un peu plus sur Blazor. Aujourd'hui, nous continuerons à créer notre site pour une pizzeria, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>BlazingPizza: application Blazor du début à la fin. Partie 2. Ajouter un composant</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/487724/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bonjour tous le monde! </font><font style="vertical-align: inherit;">À tous ceux qui veulent en savoir un peu plus sur Blazor. </font><font style="vertical-align: inherit;">Aujourd'hui, nous continuerons à créer notre site pour une pizzeria, à savoir, nous allons créer un contrôleur web api et essayer d'afficher les données qui en découlent sur le composant Blazor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Étant donné que notre application concerne la pizza, il serait logique d'ajouter immédiatement une classe représentant notre produit principal. </font><b><font style="vertical-align: inherit;">Appelez-</font></b></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et ajoutez-le au projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">À mon avis, l'ajout d'une nouvelle classe est très cool implémenté dans Rider, une boîte de dialogue non bloquante apparaît, nous entrons le nom de la classe et nous pouvons ensuite choisir ce que nous devons créer:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/q-/pl/95/q-pl95jcw5o2sdhgzzduaxzotke.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, une boîte de dialogue apparaîtra avec une demande d'ajout d'un fichier à git, nous vous répondrons par l'affirmative. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contenu du cours:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizza</span><font></font>
{<font></font>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est un modèle pour certains types de pizza, plus tard, il peut être configuré comme nous le souhaitons, redimensionner, ajouter des garnitures et plus encore. Le nom des champs me semble parler de lui-même. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.DomainPizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , nous aurons des classes représentant le domaine d'activité de notre application. Autrement dit, ils ne devraient pas savoir et ne sauront rien sur la façon dont nos données sont stockées ou comment elles sont affichées. Seules des informations sur l'objet métier, c'est-à-dire la pizza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, nous avons besoin de quelque chose pour transmettre ces données au client. Pour ce faire, accédez au projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.Server</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font><font style="vertical-align: inherit;">ajoutez le </font><b><font style="vertical-align: inherit;">PizzasController</font></b><font style="vertical-align: inherit;"> au dossier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contrôleurs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">Controller</span><font></font>
{<font></font>
    <span class="hljs-comment">// GET</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> IActionResult <span class="hljs-title">Index</span>(<span class="hljs-params"></span>)</span><font></font>
    {<font></font>
        <span class="hljs-keyword">return</span> View();<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons besoin d'une méthode qui nous donne une liste de toutes les bases de la pizza. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus d'ajouter une méthode, vous devez effectuer quelques étapes simples:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marquons</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le contrôleur avec l'attribut </font><b><font style="vertical-align: inherit;">[ApiController]</font></b><font style="vertical-align: inherit;"> qui donne certains avantages, notamment le retour automatique de 400 code si le modèle n'a pas passé la validation, sans lui c'est un </font><font style="vertical-align: inherit;">contrôleur </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal </font><font style="vertical-align: inherit;">qui donne View.</font></font></li>
<li>  <b>[Route(«pizzas»)]</b>.     Attribute Routing,        ,      <b>Conventional Routing</b>,    .   “pizzas”   ?        <b>http{s}://hostName/pizzas/{}</b><br>
      .</li>
<li>    <b>Controller</b>  <b>ControllerBase</b>,      MVC .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ok, par exemple, nous avons fait une </font><font style="vertical-align: inherit;">demande </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas dans l'espoir d'obtenir une liste de toutes les pizzas et rien ne s'est passé. Encore une fois, l'accord est dans les accords. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il s'agissait d'une </font><font style="vertical-align: inherit;">demande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , alors nous devons soit avoir une méthode ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en termes d' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asp.Net</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) marquée avec l'attribut </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[HttpGet]</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou, encore plus évident, juste une méthode appelée </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et c'est tout! Tout le reste .Net et la réflexion feront pour nous. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et renommez ainsi la seule méthode Index en Get. </font><b><font style="vertical-align: inherit;">Remplacez le</font></b><font style="vertical-align: inherit;"> type de la valeur de retour par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, n'oubliez pas d'ajouter le nécessaire en utilisant. </font><font style="vertical-align: inherit;">Eh bien, insérez temporairement un stub que la méthode n'est pas implémentée afin de compiler le code et assurez-vous qu'il n'y a pas d'erreurs. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par conséquent, PizzasController.cs ressemblera à ceci:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.Collections.Generic;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
<span class="hljs-keyword">using</span> BlazingPizza.DomainModels;<font></font>
<font></font>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">BlazingPizza.Server.Controllers</span><font></font>
{<font></font>
    [<span class="hljs-meta">ApiController</span>]<font></font>
    [<span class="hljs-meta">Route(<span class="hljs-meta-string">"pizzas"</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">PizzasController</span> : <span class="hljs-title">ControllerBase</span><font></font>
    {<font></font>
        <span class="hljs-comment">// GET</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
        {<font></font>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> NotImplementedException();<font></font>
        }<font></font>
    }<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le moment, lancez l'application de débogage, un bouton avec un bug vert. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nl/p6/pp/nlp6ppjxbnbnhjiwxb1_qbtgwsw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et assurez-vous que les itinéraires sont correctement configurés. </font><font style="vertical-align: inherit;">Le port sur lequel vous devez effectuer des requêtes est visible sur l'onglet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Console</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/webt/yp/i0/hp/ypi0hpgkoc9cv68k8zvi9zsthnu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans notre cas, il s'agit de 5000, si vous effectuez une requête le long du chemin </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 / pizzas, nous entrons dans l'action Get et capturons une exception NotImplementedException. </font><font style="vertical-align: inherit;">Autrement dit, alors que notre contrôleur ne fait rien d'utile, il accepte simplement les demandes et échoue avec une erreur.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous renvoyons les données du contrôleur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps que notre code fasse quelque chose d'utile, comme retourner des pizzas. </font><font style="vertical-align: inherit;">Jusqu'à présent, nous n'avons pas mis en place de couche de données, nous retournons donc simplement quelques pizzas de notre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">action</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Pour ce faire, renvoyez un tableau composé de deux objets </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">La méthode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ressemblera à l'exemple ci-dessous:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-comment">// GET</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;BasePizza&gt;  <span class="hljs-title">Get</span>(<span class="hljs-params"></span>)</span><font></font>
{<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span>[]<font></font>
    {<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">500</span>,<font></font>
            Description = <span class="hljs-string">"     "</span>,<font></font>
            Id = <span class="hljs-number">0</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/pepperoni.jpg"</span><font></font>
        },<font></font>
        <span class="hljs-keyword">new</span> BasePizza()<font></font>
        {<font></font>
            BasePrice = <span class="hljs-number">400</span>,<font></font>
            Description = <span class="hljs-string">"   "</span>,<font></font>
            Id = <span class="hljs-number">1</span>,<font></font>
            ImageUrl = <span class="hljs-string">"img/pizzas/meaty.jpg"</span><font></font>
        },<font></font>
    };<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le résultat de la demande dans le navigateur sera le suivant:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-c/ep/f0/-cepf0dkn90kagmz-gul-dib42u.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer la page d'accueil</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La partie visible de l'application se trouve dans les composants </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.razor du</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> projet </font><b><font style="vertical-align: inherit;">BlazingPizza.Client</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Nous sommes intéressés par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans le dossier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pages</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ouvrez-le et supprimez tout son contenu que nous avons hérité du projet par défaut. </font><font style="vertical-align: inherit;">Et commençons à ajouter ce dont nous avons vraiment besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Ajoutez:</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"/"</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cette directive est utilisée pour configurer le routage client et indique que ce contrôle sera chargé par défaut, c'est-à-dire si nous allons simplement à l'adresse de l'application </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">localhost</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : 5000 /</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sans aucun / Index, / Pizzas ou autre chose. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2.</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">injecter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> utilisant la directive</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">injecter</font></font></a> </b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ajoutez un service comme HttpClient à notre page et appelez également l'objet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Un objet de type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HttpClient est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> déjà configuré pour nous par le framework Blazor, nous pouvons donc simplement faire les requêtes dont nous avons besoin. </font><font style="vertical-align: inherit;">Ce type d'injection s'appelle </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Property Injection</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , une implémentation plus familière via le constructeur n'est pas prise en charge, et comme le disent les développeurs, il est peu probable qu'elle apparaisse un jour, mais est-elle nécessaire ici? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Ajoutez une directive</font></font><br>
<br>
<b><pre><code class="cs hljs"> @code{<font></font>
<font></font>
 }<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est spécifiquement nécessaire pour héberger le code client C #, le même qui remplace JavaScript. </font><font style="vertical-align: inherit;">À l'intérieur de ce bloc, nous </font><b><font style="vertical-align: inherit;">plaçons</font></b><font style="vertical-align: inherit;"> une collection d'objets de type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><br>
<br>
<b><pre><code class="cs hljs">IEnumerable&lt;BasePizzaViewModel&gt; PizzaViewModels;</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Comme vous l'avez déjà compris, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'existe pas, il est temps de le créer, ce modèle sera complètement analogue au modèle de domaine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">sauf qu'il aura le corps d'expression </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetFormattedBasePrice qui</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> retourne le prix de la pizza de base dans le format dont nous avons besoin. </font><font style="vertical-align: inherit;">Le modèle s'ajoutera à la racine du projet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BlazingPizza.ViewModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fichier </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel.cs</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BasePizzaViewModel</span><font></font>
{<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> Id { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">decimal</span> BasePrice { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> ImageUrl { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }<font></font>
    <font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">GetFormattedBasePrice</span>(<span class="hljs-params"></span>)</span> =&gt; BasePrice.ToString(<span class="hljs-string">"0.00"</span>);<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Retour à notre </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Index.razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et bloc</font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, ajoutez un code pour obtenir toutes les pizzas disponibles. </font><font style="vertical-align: inherit;">Nous </font><b><font style="vertical-align: inherit;">placerons</font></b><font style="vertical-align: inherit;"> ce code dans la </font><font style="vertical-align: inherit;">méthode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async </font></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">override</span> Task <span class="hljs-title">OnInitializedAsync</span>(<span class="hljs-params"></span>)</span> {<font></font>
	<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette méthode est appelée après l'initialisation du composant et au moment de l'appel, tous ses paramètres sont déjà initialisés par le composant parent. Dans ce document, vous pouvez effectuer certaines opérations asynchrones, après quoi une mise à jour d'état est requise. Plus tard, j'en parlerai plus en détail. La méthode n'est appelée qu'une seule fois lors de la création du composant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin, ajoutez les pizzas à obtenir dans cette méthode:</font></font><br>
<br>
<b><pre><code class="cs hljs"><span class="hljs-keyword">var</span> queryResult = <span class="hljs-keyword">await</span> HttpClient.GetJsonAsync&lt;IEnumerable&lt;BasePizza&gt;&gt;(<span class="hljs-string">"pizzas"</span>);
</code></pre></b><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pizzas</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - un chemin relatif qui est ajouté à la base et qui a déjà été défini pour nous par </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Comme suit à partir de la signature de la méthode, les données sont demandées par la </font><font style="vertical-align: inherit;">demande </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , puis le client essaie de les sérialiser en </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnumerable &lt;BasePizza&gt;</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. Puisque nous avons reçu des données du mauvais type que nous voulons afficher dans le composant, nous devons obtenir des objets de type </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizzaViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linq</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et sa méthode Select les utiliseront pour convertir les objets de la collection entrante en objets du type que nous prévoyons d'utiliser. Ajoutez la méthode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à la fin </font><font style="vertical-align: inherit;">:</font></font><br>
<br>
<b><pre><code class="cs hljs">PizzaViewModels = queryResult.Select(i =&gt; <span class="hljs-keyword">new</span> BasePizzaViewModel()<font></font>
{<font></font>
    BasePrice = i.BasePrice,<font></font>
    Description = i.Description,<font></font>
    Id = i.Id,<font></font>
    ImageUrl = i.ImageUrl,<font></font>
    Name = i.Name<font></font>
});<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plus tard, je montrerai comment faire sans écrire ce code de modèle, mais pour l'instant, laissons-le tel quel. </font><font style="vertical-align: inherit;">Il semble que nous ayons tout ce dont nous avons besoin et nous pouvons procéder à l'affichage des données reçues. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. Au-dessus de la directive </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">ajoutez le </font><font style="vertical-align: inherit;">code </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , à l'intérieur duquel se trouveront les pizzas elles-mêmes:</font></font><br>
<br>
<b><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pizza-cards"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, la liste ul avec le nom de la classe parlante «pizza-cards» est vide jusqu'à présent, nous allons corriger cette erreur:</font></font><br>
<br>
<b><pre><code class="cs hljs">@foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
{<font></font>
    &lt;li style=<span class="hljs-string">"background-image: url('@pizza.ImageUrl')"</span>&gt;<font></font>
        &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"pizza-info"</span>&gt;<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"title"</span>&gt;@pizza.Name&lt;/span&gt;<font></font>
                @pizza.Description<font></font>
            &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"price"</span>&gt;@pizza.GetFormattedBasePrice()&lt;/span&gt;                    <font></font>
        &lt;/div&gt;<font></font>
    &lt;/li&gt;<font></font>
}<font></font>
</code></pre></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout le plaisir ici est à l'intérieur de la boucle. </font></font><b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour chaque</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(var {item} in {items})</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Il s'agit d'un </font><font style="vertical-align: inherit;">balisage </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Razor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> typique </font><font style="vertical-align: inherit;">qui nous permet d'utiliser la puissance de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C #</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur la même page que le </font><font style="vertical-align: inherit;">code </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">html</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal </font><font style="vertical-align: inherit;">. L'essentiel est de placer le symbole </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">«@»</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> devant les mots clés et les variables de la langue </font><font style="vertical-align: inherit;">. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'intérieur de la boucle, nous accédons simplement aux propriétés de l'objet </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au final, nous </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">affichons</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le prix de base formaté de la pizza à l'aide de la méthode </font><b><font style="vertical-align: inherit;">GetFormattedBasePrice</font></b><font style="vertical-align: inherit;"> . C'est d'ailleurs la différence entre le modèle de domaine </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasePizza</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et son </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ViewModel</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> représentations, car cette méthode contient la logique la plus simple pour afficher le prix dans le format requis, dont nous n'avons pas besoin au niveau du service, où nous manipulons en quelque sorte le prix, mais ne le montrons nulle part. </font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous affichons les données reçues dans le navigateur</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons obtenu toutes les données nécessaires à afficher. Il est temps de lancer notre application et de vous assurer que tout fonctionne. Nous cliquons sur le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Déboguer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (dans </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rider,</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> le bouton </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exécuter</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lance simplement l'application sans capacité de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">débogage</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et ooh-ho, rien ne fonctionne non plus :) Ouvrez la console ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F12</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et voyez que tout est rouge, quelque chose s'est évidemment mal passé. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blazor n'est</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pas si désespéré dans le débogage et toute la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pile d'appels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut être vue dans la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">console</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , et à mon avis, cela se fait encore mieux que dans le même </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Angular</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pas besoin de deviner par des signes indirects où l'erreur s'est produite, il suffit de regarder la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pile des appels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/g-/4f/m5/g-4fm5pnokogbwv_c7vy3ru-5zk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un message </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NullReferenceException s'est produit</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lors du rendu de la page </font><font style="vertical-align: inherit;">. Comment cela peut-il arriver, car nous avons initialisé la </font><font style="vertical-align: inherit;">seule collection que nous utilisons </font><font style="vertical-align: inherit;">dans la méthode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour mieux comprendre, insérez la sortie de temps aux bons endroits pour voir le calendrier de ce qui s'est passé:</font></font><br>
<br>
<b><ol>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from markup block: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from cycle: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, before await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>);</code></pre></li>
<li> <pre><code class="cs hljs">Console.WriteLine(<span class="hljs-string">$"Time from code block, after await: <span class="hljs-subst">{DateTime.Now.ToString()}</span>:<span class="hljs-subst">{DateTime.Now.Millisecond.ToString()}</span>"</span>); </code></pre></li>
</ol></b><br>
<img src="https://habrastorage.org/webt/oi/va/ch/oivachjfzw1mfopljcqmxwhurvy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la capture d'écran ci-dessous, dans la console, ce qui s'est passé au moment du rendu de la page. On peut voir que la page commence à s'afficher avant même la fin des méthodes asynchrones. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la première passe, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PizzaViewModels</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'était pas encore initialisé et nous avons </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">détecté</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> une </font><b><font style="vertical-align: inherit;">exception NullReferenceException</font></b><font style="vertical-align: inherit;"> . Ensuite, comme prévu après que la </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tâche a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> renvoyé </font><font style="vertical-align: inherit;">la méthode </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à l' </font><font style="vertical-align: inherit;">état </font><b><font style="vertical-align: inherit;">RanToCompletion</font></b><font style="vertical-align: inherit;"> , le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contrôle a</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> été </font><b><font style="vertical-align: inherit;">repensé</font></b><font style="vertical-align: inherit;"> . Ce qui est remarquable, lors de la deuxième passe, nous sommes entrés dans un cycle, comme le montrent les messages dans la console. Mais à ce stade, l' </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface utilisateur</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n'est plus mise à jour et nous ne voyons aucun changement visible.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/ki/_r/yx/ki_ryxdxd-8xizlytgtgtb5lhpk.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En fait, le problème est très facile à résoudre, il vous suffit d'exécuter une vérification </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nulle de</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> manière asynchrone avant d'exécuter la boucle </font><font style="vertical-align: inherit;">, puis l'exception ne se produira pas pour la première fois et lors de la deuxième passe, nous verrons les données dont nous avons besoin.</font></font><br>
<b><pre><code class="cs hljs">@if (PizzaViewModels != <span class="hljs-literal">null</span>)<font></font>
{<font></font>
    @foreach (<span class="hljs-keyword">var</span> pizza <span class="hljs-keyword">in</span> PizzaViewModels)<font></font>
    {<font></font>
        ……………………….. <span class="hljs-comment">//    </span><font></font>
    }<font></font>
}</code></pre><br>
</b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cela semble un peu mieux maintenant, il n'y a plus de messages d'erreur dans la console et vous pouvez voir les informations qui nous sont parvenues du serveur: </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ed/sj/zt/edsjztoc2aqa_wibm2mpdwvm2hy.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
c'est beaucoup mieux, mais il n'y a pas assez de styles et de ressources, en particulier des images, remplacez le contenu du dossier wwwroot par le contenu du dossier "~ / Articles / Part2 /BlazingPizza.Client/wwwroot "(lien à la fin de l'article) et relancez le projet, tant mieux. </font><font style="vertical-align: inherit;">Bien que loin d'être idéal:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/mk/ar/f-/mkarf-kymgsseuioay24uwx0wui.png"><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Événements de la vie des composants</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Puisque nous avons déjà rencontré l'un des événements de la vie du composant OnInitializedAsync, il serait logique de mentionner les autres:</font></font><br>
<div class="scrollable-table"><table>
<tbody><tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Méthodes d'initialisation</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oninitialized</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Appelé lorsque le composant est déjà initialisé et que ses paramètres sont déjà définis par le composant parent. </font><font style="vertical-align: inherit;">Pendant la durée de vie d'un composant, il est appelé une fois après son initialisation.</font></font><br>
</td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OnInitializedAsync</font></font><br>
</td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Version asynchrone de la première méthode, après exécution, le composant est restitué. </font><font style="vertical-align: inherit;">Par conséquent, lors de l'écriture de code, vous devez tenir compte du fait que certains objets peuvent être nuls.</font></font><br>
</td>
</tr>
<tr>
<th colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Méthode exécutable avant de définir les valeurs des paramètres</font></font><br>
</th>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetParametersAsync</font></font><br>
</td>
<td> ,      .    <b>ParameterView</b>      .<br>
<br>
              <b>[Parameter]</b>  <b>[CascadingParameter]</b>    <b>ParameterView</b>.      ,    .        ,               )<br>
</td>
</tr>
<tr>
<th colspan="2">    <br>
</th>
</tr>
<tr>
<td>OnParametersSet<br>
</td>
<td>           .      ,      <br>
<br>
 —             .<br>
 —    ,                    .<br>
</td>
</tr>
<tr>
<td>OnParametersSetAsync</td>
<td>  OnParametersSet</td>
</tr>
<tr>
<th colspan="2">    </th>
</tr>
<tr>
<td>OnAfterRender</td>
<td>      .        .     JavaScript     DOM      .    bool  firstRender   true     .<br>
</td>
</tr>
<tr>
<td>OnAfterRenderAsync<br>
</td>
<td>   ,     Task   ,        -          .<br>
</td>
</tr>
<tr>
<th colspan="2">  <br>
</th>
</tr>
<tr>
<td>ShouldRender<br>
</td>
<td>          UI,     -  .      .             .<br>
</td>
</tr>
<tr>
<td>StateHasChanged<br>
</td>
<td>      ,    Blazor        .<br>
</td>
</tr>
<tr>
<td>Dispose<br>
</td>
<td>   ,       UI.  <b>StateHasChanged</b>  <b>Dispose</b>  .   Dispose     <b>IDisposable</b>,       <b>@implements IDisposable</b><br>
</td>
</tr>
</tbody></table></div><br>
<h2></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette partie, nous avons appris à recevoir des données du contrôleur et à les afficher à l'utilisateur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans la partie suivante, nous allons ranger la disposition et ajouter une couche d'accès aux données pour afficher les données réelles sur la page principale. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vers le référentiel de cette série d'articles. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vers la source d'origine.</font></font></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr487702/index.html">Une sélection d'articles sur l'apprentissage automatique: études de cas, guides et recherches pour janvier 2020</a></li>
<li><a href="../fr487704/index.html">Comment nous avons créé des rapports dynamiques au SSRS 2014</a></li>
<li><a href="../fr487706/index.html">Découverte de service dans les systèmes distribués à l'aide de l'exemple Consul. Alexander Sigachev</a></li>
<li><a href="../fr487716/index.html">Parfait SAST. Analyseur</a></li>
<li><a href="../fr487720/index.html">Sur le corutinisme concurrentiel (en utilisant la programmation réactive comme exemple)</a></li>
<li><a href="../fr487728/index.html">@Pythonetc compilation, janvier 2020</a></li>
<li><a href="../fr487730/index.html">Traitement du langage naturel. Résultats 2019 et tendances 2020</a></li>
<li><a href="../fr487734/index.html">Accélération du noyau Entity Framework</a></li>
<li><a href="../fr487738/index.html">Animation de schéma dans SCADA</a></li>
<li><a href="../fr487740/index.html">Assemblage d'un magnétomètre portable</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>