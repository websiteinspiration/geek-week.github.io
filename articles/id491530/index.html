<!doctype html>
<html class="no-js" lang="id">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🅰️ 🐝 🧑🏿‍🤝‍🧑🏿 Sekali lagi sekitar 433 MHz pemancar dan penerima 🤚🏿 🤚🏻 🚮</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perangkat penerima dan pemancar ISM 433 MHz yang paling sederhana telah mendapatkan popularitas yang layak di kalangan pecinta elektronik. Kitnya mura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Sekali lagi sekitar 433 MHz pemancar dan penerima</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/491530/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perangkat penerima dan pemancar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISM</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 433 MHz yang </font><font style="vertical-align: inherit;">paling sederhana telah </font><font style="vertical-align: inherit;">mendapatkan popularitas yang layak di kalangan pecinta elektronik. Kitnya murah (bahkan di Chip-Deep Anda bisa membelinya seharga 300 rubel, dan pada Ali, kata mereka, umumnya seharga lima puluh dolar), mereka sederhana dan dapat diandalkan. Selain itu (yang mungkin Anda tidak curigai), ini adalah metode pertukaran data nirkabel jarak-jauh dan penembus - sinyal pada frekuensi 433 MHz melewati jauh lebih baik melalui rintangan dan beroperasi pada jarak yang lebih jauh daripada di band 2,4 GHz populer (433) MHz </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">benar tertunda oleh</font></a><font style="vertical-align: inherit;"> dinding beton setinggi setengah meter, dan Wi-Fi sudah sekarat 10 sentimeter). Saya akui bahwa baru-baru ini muncul modul </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MBee-868</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dilengkapi dengan antena (directional) yang sesuai, mereka "menembak" lebih jauh, tetapi mereka setidaknya merupakan urutan besarnya lebih mahal, lebih sulit untuk terhubung, memerlukan manajemen hemat energi dan pra-konfigurasi. </font><font style="vertical-align: inherit;">Dan di samping itu, frekuensi 868 MHz melewati rintangan dua kali lebih buruk (walaupun, tentu saja, itu jauh lebih baik daripada frekuensi 2,4 GHz). </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a04/2bb/c3c/a042bbc3ca312c739041b507e7ca4b5e.png" width="500"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sudah banyak yang ditulis tentang 433 MHz pemancar dan penerima (termasuk di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hub)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tentu saja. </font><font style="vertical-align: inherit;">Namun, tampaknya tidak ada yang tahu cara memasukkan kit ini dengan benar di sirkuit karena alasan yang aneh. </font><font style="vertical-align: inherit;">Ketika saya sekali lagi membaca di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bahwa kit “ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mengambil 8 meter dalam garis pandang, meter ke-9 tidak dapat dikuasai</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", Kesabaran saya membentak. </font><font style="vertical-align: inherit;">Apa lagi 8 meter ?! </font><font style="vertical-align: inherit;">Pada 40-50 saya akan percaya, meskipun dalam kenyataannya, mungkin, jangkauannya bahkan lebih besar.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu dicatat bahwa saya lebih lanjut memecahkan masalah membuat garis untuk mentransfer data sewenang-wenang, dan tidak hanya mengendalikan soket pintar atau perahu model motor. Tugas saya lebih rumit, tetapi jarak operasi yang dapat diandalkan masih jauh lebih besar. Selain itu, dalam tugas seperti itu, penting bukan hanya dan tidak terlalu jauh dalam garis pandang (dapat berfungsi hanya sebagai perbandingan), tetapi kemampuan untuk menembus berbagai hambatan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kit saya bekerja di luar kota pada jarak sekitar 25-30 meter pada sudut tajam ke dinding kayu, sehingga sekitar satu meter (total) dinding dan partisi, sebagian terlindung oleh isolasi foil, berada di jalur sinyal. Pada jarak yang jauh lebih pendek, hampir tepat di belakang dinding, WiFi sudah sepenuhnya kehilangan sinyal. Di kota, sinyal selesai dari satu ujung apartemen kota tiga kamar ke yang lain melalui dua partisi interior, serta dari balkon, di mana dalam garis lurus antara pemancar dan penerima setidaknya 80 sentimeter dari tembok dan partisi plester. Saya tidak menggunakan opsi kit yang lebih mahal yang disebutkan dalam ulasan di atas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kelebihan tambahan kit adalah bahwa dalam jeda pemancar tidak mengkonsumsi apa pun, dan tanpa mode Tidur khusus, hanya dengan prinsip perangkatnya (arus konsumsi saat ini sebanding dengan arus kebocoran kolektor dari transistor yang terkunci, yaitu sekitar 100 nA). </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mari kita lihat apa jebakan itu.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koneksi Pemancar</font></font></h2> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pemancar (disebut FS1000A), seperti yang kita lihat dari diagram di bawah, adalah generator paling sederhana yang didasarkan pada resonator SAW 433 MHz. </font><font style="vertical-align: inherit;">Generator dirakit pada transistor Q1, dan transistor Q2, berdasarkan data digital yang disediakan, hanyalah kunci yang menghubungkan generator ke daya (ke bus GND) di hadapan tingkat tinggi (unit logis) pada input. </font><font style="vertical-align: inherit;">Daya dapat dari 5 hingga 12 volt, dan, menurut pabrikan, semakin tinggi daya, semakin jauh koneksi berfungsi.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/a21/50c/737/a2150c737eb648ed465e060aa2d178ae.png" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya belum memperhatikan manfaat mendasar dari peningkatan nutrisi sebagai bagian dari tugas saya. Namun demikian, orang tidak boleh mengabaikan fakta bahwa tidak ada persyaratan daya khusus di sini, dan dengan meningkatnya voltase perangkat hanya akan bekerja lebih baik. Lebih mudah untuk menghubungkan pemancar langsung ke tegangan dari adaptor 9-12 volt, baterai atau satu set 6 baterai (pin Vin Arduino). Dengan catu daya yang tidak stabil, yang dapat melebihi 12 volt (seperti, misalnya, dengan baterai), saya biasanya memisahkan pemancar dari sirkuit utama dengan stabilizer 9-volt yang terpisah (yang paling sederhana adalah 78L09), dan saya tidak melihat perbedaan operasi antara catu daya 9 dan 12 volt. Dengan Uno atau Nano, Anda dapat menggunakan stabilizer 5-volt bawaan untuk memberi daya pada pengontrol itu sendiri dan sirkuit lain (misalnya, sensor)dan untuk Mini (terutama klon murahnya), saya akan menyarankan Anda untuk meletakkan stabilizer 5-volt terpisah, menghubungkannya ke pin 5V.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perlu dicatat bahwa pemancar baru-baru ini telah muncul yang terlihat agak tidak standar (lihat Gambar di bawah). Ternyata tidak adanya throttle L1 (tiga putaran), dari yang hanya lubang - fiksi, itu hanya digantikan oleh komponen SMD yang sesuai. Lebih buruk dalam opsi ini berbeda: pencetakan ceroboh dapat menyesatkan mengenai koneksi pin data dan daya. Koneksi yang benar ditunjukkan pada gambar, itu sama untuk semua opsi:</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/db4/cfc/e17/db4cfce176c768cc5f3504edfbf91513.png" width="250"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hal yang paling mencolok dalam hal ini adalah ketika data dan daya bercampur, pemancar terus bekerja dalam jarak pendek! </font><font style="vertical-align: inherit;">Jika Anda melihat rangkaian, Anda akan mengerti apa itu: basis Q2 melalui resistor terhubung ke catu daya, transistor selalu terbuka, dan tidak mempengaruhi operasi rangkaian. </font><font style="vertical-align: inherit;">Tingkat logis yang tinggi pada bus daya hanya memberi daya pada generator pada waktu yang tepat. </font><font style="vertical-align: inherit;">Absurditas dimulai pada jarak tertentu - jelas bahwa dari kesimpulan logis, sumber daya buruk.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Koneksi penerima</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saat membeli receiver (mungkin disebut MX-RM-5V atau XD-RF-5V), perhatikan panjang terminal - entah bagaimana saya menemukan seluruh batch dengan pin yang diperpendek, yang menyebabkan </font><font style="vertical-align: inherit;">receiver jatuh </font><font style="vertical-align: inherit;">dari konektor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PBS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> standar </font><font style="vertical-align: inherit;">dengan sedikit distorsi dan Saya harus secara khusus melampirkan ke papan tulis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sirkuit penerima jauh lebih rumit (saya tidak akan memutarnya, tetapi Anda dapat menemukannya, misalnya, di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Ini harus menerima dan memperkuat sinyal frekuensi tinggi, menyaring frekuensi 433 MHz, mengisolasi semburan dan mengubahnya menjadi tingkat logis. Penerima memiliki choke penyetelan (di tengah papan), tetapi tanpa instrumen yang akurat untuk mengukur karakteristik frekuensi amplitudo, saya tidak merekomendasikan memuntirnya - kemungkinan besar, Anda tidak akan meningkatkan apa pun, tetapi hanya merusaknya.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena pada jarak yang kecil sinyalnya akan jauh lebih sedikit gangguan, jelaslah bahwa kita harus berurusan dengan gangguan di semua lini: dan metode sirkuit dan perangkat lunak. Perpustakaan melakukan hal terakhir untuk kita, tetapi tidak peduli apa matematika yang digunakan dalam pemrosesan perangkat lunak, disarankan untuk melakukan semuanya terlebih dahulu sehingga unit logis pada output hanya muncul ketika sinyal yang berguna meledak dan tidak muncul di hadapan gangguan. Dengan kata lain, alangkah baiknya untuk mendengarkan secara maksimal terlebih dahulu dari gangguan selama penerimaan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Metode standar pengurangan noise, yang dikenal di zaman saya kepada setiap siswa yang telah mengumpulkan setidaknya satu radio atau amplifier, adalah bahwa untuk node yang peka terhadap gangguan, perlu membuat catu daya yang terpisah, diisolasi secara maksimal dari sirkuit lain. Anda dapat melakukannya dengan cara yang berbeda: begitu Anda menginstal dioda zener terpisah, sekarang mereka sering mengisolasi kekuatan simpul masalah dengan filter LC (ini disarankan, misalnya, untuk ADC, lihat lembar data untuk pengontrol AVR). Tetapi dalam kondisi kami, ketika komponen modern kecil dan murah, lebih mudah untuk hanya meletakkan stabilizer terpisah dari yang lain pada receiver.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/habr/post_images/bd3/85b/94a/bd385b94af583fa8c188053297965c1b.png" width="400"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stabilizer, misalnya, dari tipe LP2950-5.0 ditambah dua kapasitor yang diperlukan untuk itu dalam opsi termurah (ketika kedua kapasitor keramik, dalam kisaran 1-3 mikrofarad) akan menambah maksimal enam puluh untuk biaya sirkuit Anda. Tapi saya lebih suka tidak menyimpan: pada output saya meletakkan keramik biasa, dan pada input saya meletakkan elektrolit (10-100 mikrofarad), apalagi, solid-state (polimer) atau tantalum. Kapasitor keramik dapat disalurkan baik di sana maupun di sana, jika tegangan input 7-12 volt berasal dari baterai-baterai atau dari stabilizer analog lainnya. Sumber berdenyut yang distabilkan dan penyearah tidak stabil yang paling sederhana membutuhkan penyaringan tambahan. Anda dapat menggunakan elektrolit aluminium murah jika Anda meletakkan keramik 0,1 mikrofarad sejajar dengannya,bahkan lebih baik untuk menempatkan serangkaian induktansi pada input dari beberapa fraksi atau unit milligenri.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Stabilizer harus dipasang langsung di dekat penerima, panjang konduktor harus minimal. Alih-alih LP2950, ​​Anda dapat mengambil LM2931 atau serupa dengan tegangan pass-through kecil (ini sangat penting jika rangkaian ini ditenagai oleh baterai - untuk LM78L05 biasa, tegangan input harus minimal 7,5, dan lebih disukai 8-9 volt).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dibandingkan dengan kasus powering receiver langsung dari Arduino, seperti yang direkomendasikan dalam semua publikasi (saya belum melihat pengecualian), Anda akan kagum dengan efek yang diperoleh - jangkauan dan kemampuan untuk menembus dinding segera meningkat secara signifikan. Penerima, bersama dengan stabilizer, dapat dilakukan dalam kotak kecil terpisah untuk kenyamanan. Anda dapat menghubungkan outputnya ke pengontrol di badan utama dengan kabel tiga kawat apa saja (dua catu daya dan konduktor sinyal) hingga 3 meter, dan mungkin lebih. Ini lebih nyaman karena antena masih diperlukan, dan menurut aturan akan lebih baik jika mereka sejajar satu sama lain dalam ruang, dan kasing besar tidak selalu dapat ditempatkan sehingga antena menonjol dalam orientasi yang benar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam versi paling sederhana, sebagai antena, Anda dapat melakukannya dengan memo kawat inti tunggal dengan penampang setidaknya 0,5 mm dan panjang 17 cm ± 1-3 mm. </font><font style="vertical-align: inherit;">Jangan gunakan kawat pemasangan yang terdampar! </font><font style="vertical-align: inherit;">Antena spiral kompak lebih banyak dijual, tetapi saya pribadi belum menguji keefektifannya. </font><font style="vertical-align: inherit;">Ujung antena pemancar dan penerima disegel ke dalam lubang yang sesuai di sudut papan (jangan salah dalam versi pemancar yang ditingkatkan - kata ANT juga tidak pada tempatnya, lihat gambar Di atas).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pembuatan dan pemrosesan data yang dikirimkan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini adalah kelemahan utama kedua dari sebagian besar ulasan pada topik kami: penulis membatasi diri pada beberapa masalah lokal, tanpa merumuskannya secara umum, seperti mentransfer data sewenang-wenang dalam satu paket. Seperti yang Anda pahami dari uraian di atas, hanya urutan bit sederhana yang dapat dikirimkan oleh perangkat kami. Pustaka </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VirtualWire</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> standar </font><font style="vertical-align: inherit;">mengkodekannya dengan cara khusus (setiap tetrad dikodekan dengan 6 bit, header sinkronisasi ditambahkan di depan, dan checksum untuk seluruh paket ditambahkan) dan mengubah output menjadi urutan byte yang lebih akrab. Tetapi programmer sudah harus menghadapinya sendiri.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih lanjut, kami berasumsi bahwa pemancar dan penerima terhubung ke Arduino. Selain VirtualWire, sehubungan dengan booming "rumah pintar", ada banyak hal lain seperti RC-Switch atau RemoteSwitch, tetapi mereka berfokus pada tugas-tugas lain, dan jelas tidak layak menggunakan mereka untuk mentransfer data sewenang-wenang. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Panjang maksimum satu pesan di VirtualWire adalah 27 byte (lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dokumentasi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Transmisi satu pesan lengkap (secara otomatis dilengkapi dengan tanda tangan 0xb38, nilai panjang pesan dan checksum) pada kecepatan yang saya pilih 1200 bps adalah 0,35 detik.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semakin banyak, kecepatan transmisi yang dipilih, jangkauan transmisi akan lebih sedikit. Dari pengalaman menggunakan RS-232, diketahui bahwa dengan meningkatnya jangkauan, kecepatan transmisi yang diizinkan menurun secara eksponensial: pada kecepatan 19.200 saluran tanpa selip berjalan selama 15 meter, pada 9600 - 150 meter, dan pada kecepatan 1200 - lebih dari satu kilometer. Akan menarik untuk secara eksperimental mengetahui sifat ketergantungan ini untuk kasus kami, karena banyak di sini tergantung pada matematika yang digunakan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menginisialisasi pemancar di VirtualWire terlihat seperti ini:</font></font><br>
<br>
<pre><code class="cpp hljs">. . . . .
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;VirtualWire.h&gt;</span></span><font></font>
. . . . .<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{<font></font>
  vw_setup(<span class="hljs-number">1200</span>); <span class="hljs-comment">//   VirtualWire</span>
  vw_set_tx_pin(<span class="hljs-number">10</span>);   <span class="hljs-comment">//   VirtualWire D10</span><font></font>
. . . . .<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan menganalisis prinsip-prinsip pembuatan data menggunakan contoh spesifik. Mari kita memiliki sensor suhu-kelembaban jarak jauh. Ini memberikan nilai (variabel suhu dan kelembaban) dalam bentuk bilangan real dengan tanda (float). Untuk membuatnya lebih mudah untuk dipahami pada sisi penerima, kita semua akan mengurangi menjadi bilangan bulat positif dengan jumlah tempat desimal setidaknya 4, menerjemahkan bit secara individu ke dalam karakter ASCII, mentransfer string yang dihasilkan, dan melakukan operasi terbalik di sisi penerima. Tentu saja, Anda dapat menyederhanakan tugas (misalnya, lakukan tanpa konversi ke ASCII dan mempersingkat angkanya), tetapi dalam formulir ini ternyata seragam untuk hampir semua jenis data digital, yang menyederhanakan pembongkaran selama penerimaan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam praktiknya, lebih mudah menggunakan tipe String untuk menulis pesan, kira-kira seperti ini:</font></font><br>
<br>
<pre><code class="cpp hljs">. . . . .
<span class="hljs-comment">//    </span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ledPin 13 <span class="hljs-comment">//  (D13,  19 ATmega) </span></span>
<span class="hljs-keyword">char</span> msg[<span class="hljs-number">13</span>];
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> tmpr=<span class="hljs-number">0</span>;
<span class="hljs-keyword">volatile</span> <span class="hljs-keyword">int</span> hum=<span class="hljs-number">0</span>;<font></font>
. . . . .<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
  delay(<span class="hljs-number">1000</span>); <span class="hljs-comment">// 1 c</span>
<span class="hljs-keyword">float</span> temperature;
<span class="hljs-keyword">float</span> humidity;<font></font>
. . . . .  <span class="hljs-comment">//   temperature  humidity  </span>
<span class="hljs-comment">//       4 :</span>
  tmpr = temperature*<span class="hljs-number">10</span>+<span class="hljs-number">2731</span>; <span class="hljs-comment">//2731 =     </span>
<span class="hljs-comment">//    4 :</span>
  hum = humidity*<span class="hljs-number">10</span>+<span class="hljs-number">1000</span>; 
<span class="hljs-comment">//  :</span>
  digitalWrite (ledPin,HIGH); <span class="hljs-comment">//  —  </span>
  String strMsg=<span class="hljs-string">"DAH"</span>; <span class="hljs-comment">// - </span>
  strMsg+=tmpr; <span class="hljs-comment">//  </span>
  strMsg+=hum; <span class="hljs-comment">// </span>
  strMsg.toCharArray(msg,<span class="hljs-number">12</span>); <span class="hljs-comment">//   , 12 –  </span>
<span class="hljs-comment">//  :</span>
  vw_send((<span class="hljs-keyword">uint8_t</span> *)msg, <span class="hljs-built_in">strlen</span>(msg)); <span class="hljs-comment">//  </span>
  vw_wait_tx(); <span class="hljs-comment">//   </span>
  delay(<span class="hljs-number">500</span>); <span class="hljs-comment">// 500 </span>
  digitalWrite (ledPin, LOW); <span class="hljs-comment">//  —  </span><font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika Anda perlu mentransfer angka yang lebih akurat dengan jumlah digit yang besar, maka Anda cukup menambah panjang array pesan. Variabel global "volatile" tmpr dan hum diperlukan jika Anda rata-rata beberapa bacaan, jika tidak mereka juga dapat dinyatakan lokal dalam fungsi loop (). Pesannya, seperti yang Anda lihat, terdiri dari nilai suhu dan kelembaban yang dikonversi, dalam string ASCII masing-masing empat byte, didahului oleh serangkaian tiga karakter "DAH" (karakter dapat berupa karakter lain dari tabel ASCII). Ini adalah tanda tangan yang memungkinkan Anda untuk membedakan pesan ini dari yang lainnya yang dikirim oleh perangkat serupa. Jangan abaikan tanda tangan, bahkan jika Anda percaya bahwa perangkat lain di dekatnya dalam kisaran ini tidak diharapkan, pada saat yang sama berfungsi sebagai jaminan tambahan untuk integritas data yang diterima.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perhatikan juga bahwa ketika mengkonversi string ke array, Anda harus menentukan satu karakter lebih dari total panjang pesan (3 + 4 + 4 = 11), ini memperhitungkan karakter nol yang menutup string. </font><font style="vertical-align: inherit;">Dan ukuran larik msg [] harus ditentukan dengan margin dan dapat berupa apa saja, dalam hal ini dari 13 hingga 27 byte. </font><font style="vertical-align: inherit;">Saat mentransfer, itu masih akan dikirim persis seperti fungsi strlen (msg) akan kembali, yaitu, 11 byte + karakter nol. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bagian penerima, array kode ASCII yang dihasilkan harus diuraikan. </font><font style="vertical-align: inherit;">Tetapi pertama-tama Anda harus menerimanya. </font><font style="vertical-align: inherit;">Untuk menginisialisasi penerimaan, tindakan berikut dilakukan:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;VirtualWire.h&gt;</span></span>
<span class="hljs-keyword">char</span> str[<span class="hljs-number">5</span>];     ASCII  
  <span class="hljs-keyword">uint8_t</span> buf [VW_MAX_MESSAGE_LEN];  <span class="hljs-comment">//    </span>
  <span class="hljs-keyword">uint8_t</span> buflen = VW_MAX_MESSAGE_LEN;  <span class="hljs-comment">// max   </span><font></font>
. . . . .<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>{<font></font>
  vw_set_rx_pin(<span class="hljs-number">2</span>); <span class="hljs-comment">//D2   VirtualWire</span>
  vw_setup(<span class="hljs-number">1200</span>); <span class="hljs-comment">//   VirtualWire</span><font></font>
. . . . .<font></font>
} <font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebenarnya, teknik dengan menguraikan garis adalah ini:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">loop</span><span class="hljs-params">()</span> </span>{<font></font>
  vw_rx_start();  <span class="hljs-comment">//  </span>
  buflen = VW_MAX_MESSAGE_LEN; <span class="hljs-comment">//    </span>
 <span class="hljs-keyword">if</span> (vw_have_message()) { <span class="hljs-comment">// </span>
 <span class="hljs-keyword">if</span> (vw_get_message(buf, &amp;buflen)) <span class="hljs-comment">//   </span><font></font>
  {<font></font>
    vw_rx_stop(); <span class="hljs-comment">//   :</span>
        <span class="hljs-keyword">for</span> (byte i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">3</span>; i++)  <span class="hljs-comment">//    </span>
                str[i]= buf[i]; <span class="hljs-comment">// </span>
                str[<span class="hljs-number">3</span>]=<span class="hljs-string">'\0'</span>;
      <span class="hljs-keyword">if</span> ((str[<span class="hljs-number">0</span>]==<span class="hljs-string">'D'</span>)&amp;&amp;(str[<span class="hljs-number">1</span>]==<span class="hljs-string">'A'</span>)&amp;&amp;(str[<span class="hljs-number">2</span>]==<span class="hljs-string">'H'</span>)) {
<span class="hljs-comment">// ,  </span>
       <span class="hljs-keyword">for</span> (byte i=<span class="hljs-number">3</span>;i&lt;<span class="hljs-number">7</span>;i++)  <span class="hljs-comment">//    </span>
                str[i<span class="hljs-number">-3</span>]= buf[i]; <span class="hljs-comment">//    </span>
      <span class="hljs-keyword">int</span> tmpr=atoi(str); <span class="hljs-comment">//   </span>
      tmpr=tmpr<span class="hljs-number">-2731</span>; <span class="hljs-comment">// 2731,     </span>
. . . . .<span class="hljs-comment">//    10    float,  </span>
. . . . . <span class="hljs-comment">//    -</span>
<span class="hljs-comment">// :</span>
      <span class="hljs-keyword">for</span> (byte i=<span class="hljs-number">7</span>;i&lt;<span class="hljs-number">11</span>;i++)  <span class="hljs-comment">//    </span>
                str[i<span class="hljs-number">-7</span>]= buf[i]; <span class="hljs-comment">//    </span>
      <span class="hljs-keyword">int</span> hh = atoi(str); <span class="hljs-comment">//   </span>
      hh=(hh<span class="hljs-number">-1000</span>)/<span class="hljs-number">10</span>;
      <span class="hljs-keyword">if</span> (hh&gt;<span class="hljs-number">99</span>) hh=<span class="hljs-number">99</span>; <span class="hljs-comment">//   %,  </span>
. . . . . <span class="hljs-comment">// -</span>
   } <span class="hljs-comment">//end   DAT</span>
  } <span class="hljs-comment">//end  </span>
 } <span class="hljs-comment">// </span>
} <span class="hljs-comment">// end loop</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harap Anda sekarang memiliki lebih sedikit pertanyaan tentang penggunaan perangkat yang murah dan mudah digunakan ini.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id491518/index.html">Berita dari dunia OpenStreetMap No. 501 (02/18/2020/24/02/2020)</a></li>
<li><a href="../id491520/index.html">Ubah xls menjadi xlsx dan xml dalam C #</a></li>
<li><a href="../id491522/index.html">Mengapa wanita hidup lebih lama</a></li>
<li><a href="../id491524/index.html">Stas Afanasyev. Juno. Pipa berdasarkan pada io.Reader / io.Writer. Bagian 2</a></li>
<li><a href="../id491528/index.html">Pengalaman saya melakukan 1000 wawancara. Sinopsis laporan oleh Yegor Bugaenko</a></li>
<li><a href="../id491532/index.html">Laravel + Docker + Gitlab. Di mana untuk memulai</a></li>
<li><a href="../id491534/index.html">Panduan Singkat untuk Menggunakan GDB</a></li>
<li><a href="../id491536/index.html">YouTube - Kesalahan. Silakan coba lagi nanti. ID pemutaran: <...></a></li>
<li><a href="../id491538/index.html">Sprawl Lemmas untuk Bahasa Biasa dan Bebas Konteks</a></li>
<li><a href="../id491540/index.html">Jaringan untuk spesialis IT pemula. Basis wajib</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>