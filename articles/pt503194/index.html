<!doctype html>
<html class="no-js" lang="pt">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äç‚öñÔ∏è üèª üçº ISA n√£o perdoa erros üôéüèª üîÅ üôÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄìX86 √© um mal-entendido hist√≥rico, - o mestre e em 80 n√£o perderam o entusiasmo pol√™mico. 
 "Na verdade, ela √© propriet√°ria de 95% do mercado de servi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>ISA n√£o perdoa erros</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/huawei/blog/503194/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄìX86 √© um mal-entendido hist√≥rico, - o mestre e em 80 n√£o perderam o entusiasmo pol√™mico. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Na verdade, ela √© propriet√°ria de 95% do mercado de servidores", respondi lentamente. Eu n√£o queria discutir um t√≥pico cem vezes banal </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- e j√° estou confuso com esses prefixos -, o acad√™mico n√£o cedeu. - 15 bytes por instru√ß√£o, isso √© impens√°vel! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Bem, n√£o gelo, √© claro. Mas quem √© melhor? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Sim, algu√©m, pelo menos ARM-a. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Eu ainda n√£o entendo." Adi√ß√µes com multiplica√ß√µes devem ser? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Devemos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- E muda com opera√ß√µes l√≥gicas? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Sim. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- E downloads com salva tamb√©m. Qual √© a diferen√ßa em como eles s√£o chamados e codificados?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como sempre, percebi a corre√ß√£o do professor muito mais tarde. Quando me sentei para escrever um decodificador de comandos em uma noite sombria de inverno para me divertir de alguma forma. Consegui retratar um decodificador simples para ARM em VHDL (e eu sei mais ou menos) em alguns dias. √â verdade que me arrependo, tive uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">folha de dicas.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :) </font></font><br>
<br>
<img src="https://habrastorage.org/webt/zz/6g/sh/zz6gsh4coxuhsz_nnnip5wxlgsi.png" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para o X86, n√£o foi poss√≠vel por uma semana, duas ou um m√™s ... Mesmo para o conjunto b√°sico.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferen√ßa aqui n√£o est√° apenas no RISC (Reduced Instruction Set Computing) para ARM e no CISC (Complex Instruction Set) para X86. A diferen√ßa est√° antes no caminho do desenvolvimento hist√≥rico. Mais de 40 anos atr√°s, e tudo come√ßou em 1978, o X86 ISA (Instruction Set Architecture) era um conjunto bastante compacto de comandos com sua pr√≥pria l√≥gica interna. Mas o tempo passou, a capacidade de barramento aumentou, os registros expandidos (incluindo o SIMD), o n√∫mero de equipes em constante crescimento. Ent√£o, um cara fez uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tentativa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> interessante </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">de</font></a><font style="vertical-align: inherit;"> simplesmente contar o n√∫mero de instru√ß√µes no X86. Se ele estava com pregui√ßa de abrir o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manual</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e conte-os, ou ele sabia da exist√™ncia de c√≥digos secretos "sem nome" (equipes que nem sequer t√™m nome) ou acreditava na onipot√™ncia da l√≥gica. √â f√°cil entender que a l√≥gica acabou sendo impotente. :) A prop√≥sito, tentei encontrar um gr√°fico do crescimento no n√∫mero de instru√ß√µes do X86 por ano (ou por gera√ß√£o). Ainda n√£o consegui (talvez algu√©m tenha?). Mas eu achei aqui uma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">foto assim</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/-v/t6/ni/-vt6ni8guqbh8kv0obshqd5dnnm.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para ser sincero, n√£o sei quantas instru√ß√µes existem no X86 ISA. Mas eu me lembro bem de todos aqueles que investi no desenvolvimento, sem perceber que cada novo peda√ßo do ISA √© rotulado como "keep forever". E havia v√°rios milhares de "criadores" como eu na Intel. E os bits para codificar todas as suas fantasias estavam constantemente ausentes. :) Todos os novos prefixos foram adicionados ao conjunto de comandos existente: REX, VEX ... A √∫ltima extens√£o de quatro bytes (EVEX) foi introduzida para o AVX-512. A prop√≥sito, todo o conjunto de comandos do ARM (mesmo levando em considera√ß√£o o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SVE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) √© removido nesses mesmos 4 bytes. A ARM inicialmente seguiu o caminho contr√°rio, construindo seu sistema de comando com os princ√≠pios b√°sicos de simplicidade, compacidade e extensibilidade.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A diferen√ßa pode ser entendida se mudarmos do ponto de vista do programador para o ponto de vista do projetista de circuitos. E √© sabido que o transistor √© uma grande coisa, mas ele alterna lentamente e dissipa a energia descaradamente. E, sendo outras coisas iguais, seria melhor se houvesse menos delas. Agora, d√™ uma olhada no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritmo de decodifica√ß√£o para obter instru√ß√µes x86</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (o problema que eu estava tentando resolver). </font></font><br>
 <br>
<img src="https://habrastorage.org/webt/lk/0v/3s/lk0v3s92ryuppxkgwwd2h1yvaak.jpeg" alt="imagem"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E como eles dizem, sinta a diferen√ßa nos caminhos de entrada (front end) para ARM e X86. Aqui pode-se argumentar que o front end √© uma parte muito pequena do kernel, apenas cerca de 10%. Sim, mas n√£o esque√ßa que toda essa l√≥gica √© multiplicada pelo n√∫mero de n√∫cleos no chip. E isso √© s√©rio.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra considera√ß√£o √© que o front end √© apenas a parte respons√°vel pela compatibilidade com vers√µes anteriores. Voc√™ pode p√° com seguran√ßa ou at√© mesmo jogar de volta. A prop√≥sito, a Intel tirou vantagem disso no in√≠cio dos anos 2000, substituindo a arquitetura NetBurst (P4) pelo Core-M (P3). Mas o front end n√£o pode ser muito reduzido. Embora √†s vezes eu realmente queira, devido ao ISA X86 existente, agora cerca de 20% √© usado. O resto s√£o remanescentes do passado.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outra desvantagem do enorme comprimento de instru√ß√µes s√£o as falhas relativamente frequentes no cache de instru√ß√µes. Grosso modo, com um tamanho igual de caches, o n√∫mero de erros ser√° maior, maior a dura√ß√£o da instru√ß√£o. Obviamente, o tamanho dos caches pode ser aumentado. Mas, novamente, esses s√£o transistores que poderiam n√£o ter sido se as instru√ß√µes fossem mais curtas. Pelo mesmo motivo, sou muito cauteloso com os v√°rios tipos de arquiteturas VLIW (Very Long Instruction World). No entanto, eles tamb√©m t√™m a desvantagem de que √© muito dif√≠cil para eles desenvolver compiladores. At√© agora, evitava deliberadamente o t√≥pico dos compiladores, pois nunca os desenvolvi. Gostaria de ouvir o que as pessoas informadas dir√£o sobre as del√≠cias de desenvolver compiladores para RISC, CISC e VLIW.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, no entanto, apesar da enorme carga acumulada de legado e, talvez gra√ßas a ele, os desenvolvedores do X86 estavam certos. </font><font style="vertical-align: inherit;">O princ√≠pio da compatibilidade com vers√µes anteriores foi respeitado na arquitetura desde o in√≠cio. </font><font style="vertical-align: inherit;">Todo o software existente funciona no novo hardware pronto para uso. </font><font style="vertical-align: inherit;">Foi isso que tornou poss√≠vel construir um ecossistema t√£o profundo e desenvolvido em torno da arquitetura. </font><font style="vertical-align: inherit;">E resta apenas tirar o chap√©u na frente dos engenheiros da Intel e AMD, que, apesar do design nada perfeito do ISA, mant√™m a lideran√ßa no segmento de servidores h√° muitos anos. </font><font style="vertical-align: inherit;">No entanto, a carga herdada est√° ficando mais dif√≠cil.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt503176/index.html">Implementa√ß√£o de um algoritmo para determinar a largura de um objeto usando um rangefinder ultrass√¥nico e codificadores na linguagem RobotC</a></li>
<li><a href="../pt503178/index.html">Apple Mac e dispositivos sofisticados. LTO, SAS, Fibre Channel, eSATA</a></li>
<li><a href="../pt503182/index.html">"Sou o primeiro desenvolvedor cego da minha empresa." Parte 1</a></li>
<li><a href="../pt503184/index.html">Convidamos voc√™ para a reuni√£o on-line do Zabbix</a></li>
<li><a href="../pt503192/index.html">oVirt em 2 horas. Parte 4. Opera√ß√µes B√°sicas</a></li>
<li><a href="../pt503196/index.html">450 cursos gratuitos da Ivy League</a></li>
<li><a href="../pt503200/index.html">YOLOv4 - a rede neural em tempo real mais precisa no conjunto de dados Microsoft COCO</a></li>
<li><a href="../pt503204/index.html">Como flash Xiaomi Redmi 4 Prime / Pro / Premium no Android 10</a></li>
<li><a href="../pt503208/index.html">Quando √© o melhor momento para investir?</a></li>
<li><a href="../pt503210/index.html">Os sites de phishing podem ser erradicados?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>