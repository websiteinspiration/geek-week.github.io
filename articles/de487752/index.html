<!doctype html>
<html class="no-js" lang="de">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👙 🤳🏾 👩🏻‍🚀 Speicher optimieren: Ein Fall von Vereinheitlichung und niedrigeren Betriebskosten 👩🏾‍🏫 💚 🌲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Artikel beschreibt den Prozess der Optimierung der Speicherinfrastruktur eines mittelständischen Unternehmens. 
 
 Begründungen für einen solchen ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Speicher optimieren: Ein Fall von Vereinheitlichung und niedrigeren Betriebskosten</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/icl_services/blog/487752/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Artikel beschreibt den Prozess der Optimierung der Speicherinfrastruktur eines mittelständischen Unternehmens. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Begründungen für einen solchen Übergang und eine kurze Beschreibung des Prozesses zur Einrichtung eines neuen Speichersystems werden berücksichtigt. </font><font style="vertical-align: inherit;">Wir geben ein Beispiel für die Vor- und Nachteile des Wechsels zum ausgewählten System.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einführung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Infrastruktur eines unserer Kunden bestand aus vielen heterogenen Speichersystemen unterschiedlicher Ebenen: von SOHO-Systemen QNAP, Synology für Benutzerdaten bis hin zu Entry- und Mid-Range-Speichersystemen Eternus DX90 und DX600 für iSCSI und FC für Servicedaten und Virtualisierungssysteme. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All dies unterschied sich sowohl in den Generationen als auch in den verwendeten Festplatten. Teil der Systeme waren Legacy-Geräte ohne Herstellerunterstützung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein separates Problem war die Verwaltung des freien Speicherplatzes, da der gesamte verfügbare Speicherplatz auf vielen Systemen stark fragmentiert war. Infolgedessen die Unannehmlichkeiten der Verwaltung und die hohen Kosten für die Wartung einer Systemflotte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir standen vor der Herausforderung, die Speicherinfrastruktur zu optimieren, um die Betriebskosten und die Vereinheitlichung zu senken.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Aufgabe wurde von unseren Unternehmensexperten unter Berücksichtigung der Kundenanforderungen an Datenverfügbarkeit, IOPS, RPO / RTO sowie der Möglichkeit der Aufrüstung der vorhandenen Infrastruktur umfassend analysiert.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementierung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptakteure auf dem Markt für Midrange-Speichersysteme (und höher) sind IBM mit Storwize. Fujitsu, vertreten durch die Eternus-Linie, und NetApp mit der FAS-Serie. Als Speichersystem, das die angegebenen Anforderungen erfüllt, wurden folgende Systeme in Betracht gezogen: IBM Storwize V7000U, Fujitsu Eternus DX100, NetApp FAS2620. Alle drei sind Unified-SHD, dh sie bieten sowohl Blockzugriff als auch Dateizugriff und bieten enge Leistungsindikatoren. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Storwize V7000U wird der Dateizugriff jedoch über einen separaten Controller organisiert - ein Dateimodul, das eine Verbindung zum Hauptblock-Controller herstellt. Dies ist ein zusätzlicher Fehlerpunkt. Darüber hinaus ist dieses System relativ schwierig zu verwalten und bietet keine ordnungsgemäße Isolierung von Diensten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Eternus DX100-Speichersystem, das ebenfalls ein Unified-Speichersystem ist, unterliegt schwerwiegenden Einschränkungen hinsichtlich der Anzahl der erstellten Dateisysteme, ohne die erforderliche Isolation zu gewährleisten. Darüber hinaus dauert das Erstellen eines neuen Dateisystems sehr lange (bis zu einer halben Stunde). Beide beschriebenen Systeme erlauben keine gemeinsame Nutzung von CIFS / NFS-Servern, die auf Netzwerkebene verwendet werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter Berücksichtigung aller Parameter, einschließlich der Gesamtbetriebskosten des Systems, wurde NetApp FAS2620 ausgewählt, das aus zwei Controllern besteht, die im Aktiv-Aktiv-Modus arbeiten und die Last auf die Controller verteilen können. In Kombination mit den integrierten Mechanismen der Online-Deduplizierung und -Komprimierung kann der Platzbedarf für Daten auf Datenträgern erheblich gesenkt werden. Diese Mechanismen werden beim Aggregieren von Daten auf einem System viel effektiver als in der Ausgangssituation, als sich potenziell identische Daten auf verschiedenen Speichersystemen befanden und es unmöglich war, sie untereinander zu deduplizieren.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein solches System ermöglichte es, alle Arten von Diensten unter die Kontrolle eines einzelnen Failoverclusters zu stellen: SAN in Form von Blockgeräten für die Virtualisierung und NAS in Form von CIFS, NFS-Freigaben für Windows-Benutzerdaten und * nix-Systeme. Gleichzeitig blieb dank der SVM-Technologie (Storage Virtual Machine) die Möglichkeit einer sicheren logischen Trennung dieser Dienste bestehen: Die für verschiedene Komponenten verantwortlichen Dienste wirken sich nicht auf die „Nachbarn“ aus und erlauben keinen Zugriff auf diese. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt auch möglich, Dienste auf Festplattenebene zu isolieren, um Leistungseinbußen bei starker Belastung durch die "Nachbarn" zu vermeiden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für Dienste, die schnelles Lesen / Schreiben erfordern, können Sie einen hybriden RAID-Array-Typ verwenden und dem Festplattenaggregat mehrere SSDs hinzufügen. </font><font style="vertical-align: inherit;">Das System selbst platziert "heiße" Daten auf ihnen, wodurch die Latenz beim Lesen häufig verwendeter Daten verringert wird. </font><font style="vertical-align: inherit;">Dies gilt zusätzlich zum NVRAM-Cache, der bei einem plötzlichen Stromausfall neben der hohen Schreibgeschwindigkeit (Daten werden im NVRAM gespeichert, der von der Batterie gespeist wird, bis die Bestätigung der vollständigen Aufzeichnung vom Dateisystem empfangen wird) auch dessen Atomizität und Integrität gewährleistet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Datenmigration auf ein neues Speichersystem kann der Cache-Speicherplatz effizienter genutzt werden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Positive Seiten</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wie oben erwähnt, ermöglichte die Verwendung dieses Systems die gleichzeitige Lösung von zwei Problemen: </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Vereinheitlichung</font></font></b><br>
<br>
<ul>
<li>     ,    ,     ,   .</li>
<li>       .    ,     LUN,            .</li>
<li>   .    ,     .     ,    Ethernet  Fiber Channel   .</li>
<li>          ,     ,     .         .</li>
</ul><br>
<b>— </b><br>
<br>
<ul>
<li>   NetApp  SVM (Storage Virtual Machine),     ,   ,     .        SVM,     .          /.</li>
<li>    .<br>
 SVM      ,       ,  VLAN-.  ,              SVM,      VLAN’.  ,     trunk-.<br>
    iSCSI-,     SAN-      ,        , « »    .<br>
</li>
<li>     .<br>
      - RAID- (     RAID-   ),          Volume. Volume  SVM’,       SVM’   .     «»  , «»  SVM’  .<br>
        RAID-    ,        .<br>
</li>
</ul><br>
<b>— </b><br>
<br>
<ul>
<li>                .          RAID-,    .</li>
<li>           (CPU, RAM).           storage-,     ,   IO-,      .</li>
<li> NetApp  S3-       ,          on-premise    , .</li>
</ul><br>
<h4> </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Nachdem wir alle Dienste unter der Kontrolle eines Systems reduziert haben, wird die Deaktivierung einer Komponente (1 von 2 Controllern gegenüber 1 von 10+ in der alten Infrastruktur) voraussichtlich eine größere Auswirkung haben. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- Verminderte Verteilung der Speicherinfrastruktur. </font><font style="vertical-align: inherit;">Wenn sich frühere Lagersysteme auf verschiedenen Etagen / in verschiedenen Gebäuden befinden könnten, ist jetzt alles in einem Rack konzentriert. </font><font style="vertical-align: inherit;">Dieser Posten kann durch den Kauf eines weniger effizienten Systems und die Verwendung der synchronen / asynchronen Replikation bei Situationen höherer Gewalt ausgeglichen werden.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schritt für Schritt einrichten</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aufgrund der Vertraulichkeit von Informationen ist es unmöglich, Screenshots aus der realen Kundenumgebung zu demonstrieren. Daher werden die Konfigurationsschritte in der Testumgebung angezeigt und die in der produktiven Umgebung des Kunden ausgeführten Schritte vollständig wiederholt. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/f1/ko/1t/f1ko1tluxp7grrcm0vfi6iwe1vw.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Anfangszustand des Clusters. Zwei Aggregate für Root-Partitionen der entsprechenden Clusterknoten clus01_01, clus01_02 </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/5f/-n/k1/5f-nk1hym-z5y7v92zqlvmnjgwe.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellen von Aggregaten für Daten. Jeder Knoten verfügt über ein eigenes Aggregat, das aus einem RAID-DP-Array besteht. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/d8/id/5w/d8id5wywwsh0fpnjof0ag10ucyq.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ergebnis: Es wurden zwei Aggregate erstellt: rg0_node02, rg1_node01. Es gibt noch keine Daten dazu. </font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/pb/7q/xz/pb7qxz8bpdoyxxvh76b_ud8vwis.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erstellung von SVM als CIFS-Server. Für SVM muss ein Root-Volume erstellt werden, für das das Root-Aggregat ausgewählt ist - rg1_node01. Auf diesem Volume werden einzelne SVM-Einstellungen gespeichert.</font></font></i><br>
<br>
<img src="https://habrastorage.org/webt/pp/jv/_b/ppjv_brwqb09psalyq0cue4ftru.png"><br>
<i> CIFS-  SVM.   IP-   .,      .       VLAN-,   LACP .      Volume   ,   ,       .</i><br>
<br>
<img src="https://habrastorage.org/webt/vj/9w/tm/vj9wtmzdhhm0brl9s7fr2vrz8ro.png"><br>
<i>      ,        .        4,9  ,    .        .</i><br>
<br>
<img src="https://habrastorage.org/webt/ha/sy/2h/hasy2hzg7gzbn3p486hoivjwk0i.png"><br>
<i> SVM   iSCSI-.   ,     Root Volume  .         CIFS-  IP-   iSCSI-, .  ,     (LUN),    .</i><br>
<br>
<img src="https://habrastorage.org/webt/lw/ui/or/lwuiorx2n-cxtgehsnkes7dvjj4.png"><br>
<i> LUN  10 .     ,     .</i><br>
<br>
<img src="https://habrastorage.org/webt/if/p1/og/ifp1ogwj-7c84uv6jr5f7vsotws.png"><br>
<i>     Hyper-V Server    iqn.</i><br>
<br>
<img src="https://habrastorage.org/webt/tg/mj/35/tgmj35rac-x-uswp0sttjp8int4.png"><br>
<i>   Hyper-V Server LUN         Linux.       Volume,   ,   ,    .     LUN     ,        .</i></div>
      
    </div><p class="reference-to-source js-reference-to-source">Source: https://habr.com/ru/post/undefined/</p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de487742/index.html">Arbitrage-Handel (Bellman-Ford-Algorithmus)</a></li>
<li><a href="../de487744/index.html">FARO stellt den FOCUS S 70 Laser 3D Scanner vor</a></li>
<li><a href="../de487746/index.html">Ewig</a></li>
<li><a href="../de487748/index.html">$ 3 Hardware-Verschlüsselungsschlüssel - ist das möglich?</a></li>
<li><a href="../de487750/index.html">Einige Feinheiten der Injektionskollektionen im Frühjahr</a></li>
<li><a href="../de487754/index.html">Organisation des Intranets (Automatisierung der IT-Produktion). Teil 1 - Benutzer und Mail</a></li>
<li><a href="../de487756/index.html">RIT, Maxim Lapshin (Erlyvideo): Wie ein Programmierer ein Unternehmen aufbauen kann</a></li>
<li><a href="../de487764/index.html">Ich bin 14 und verbinde Schule mit IT-Arbeit</a></li>
<li><a href="../de487768/index.html">Öffnen der Ports 4321 und 9898 auf Xiaomi Gateway 2</a></li>
<li><a href="../de487772/index.html">Lernen Sie die Tschuwaschische Sprache in Yandex kennen. Übersetzen: Wie wir das Hauptproblem der maschinellen Übersetzung lösen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>