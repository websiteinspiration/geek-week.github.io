<!doctype html>
<html class="no-js" lang="fr">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👇🏿 ㊗️ 🌗 Tout ce que vous devez savoir sur la mise en cache 🕷️ 🙍🏽 💪🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonne journée. 
 
 Je vous présente la traduction de l'article "Tout ce que vous devez savoir sur la mise en cache - Conception de systèmes" par Anime...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Tout ce que vous devez savoir sur la mise en cache</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/504786/"><img src="https://habrastorage.org/webt/yb/dy/sz/ybdyszmr39n1ymqep4omiofuhfy.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonne journée. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je vous présente la traduction de l'article </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Tout ce que vous devez savoir sur la mise en cache - Conception de systèmes"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> par Animesh Gaitonde.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">introduction</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avez-vous remarqué que lorsque vous parcourez une page Web avec une mauvaise connexion Internet, du texte est chargé devant des images de haute qualité? Cependant, lorsque vous visitez à nouveau la même page, elle se charge beaucoup plus rapidement. Lorsque vous visitez un nouveau site, il faut beaucoup plus de temps pour le télécharger que pour télécharger des sites fréquemment visités tels que Facebook ou Amazon. Savez-vous pourquoi cela se produit? Il s'agit de mise en cache.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/bc/uo/xx/bcuoxxd5lqtpswaic_oncu82tlc.png"><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici à quoi ressemble ma page Instagram avec une connexion lente. Comme vous pouvez le voir, le texte s'affiche alors que les images n'ont pas encore été chargées. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est très important de fournir la meilleure expérience d'utilisation de l'application pour fidéliser et engager les utilisateurs. Dans un monde moderne où règne l'esprit de concurrence, les affaires souffrent grandement en raison de la mauvaise expérience utilisateur. Imaginez que vous regardez votre série ou vidéo en streaming préférée sur un site Web, mais la vidéo est constamment arrêtée pour un chargement supplémentaire (mise en mémoire tampon). Combien de temps durerez-vous une telle «attitude» et reviendrez-vous sur un tel site?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La mise en cache fonctionne sur le principe de la «localisation des liens». </font><font style="vertical-align: inherit;">Le cache est un entrepôt de données local pour accélérer la récupération d'informations et la récupération de données. </font><font style="vertical-align: inherit;">L'objectif principal du cache est de réduire le délai de lecture des données et d'augmenter le débit de l'application. </font><font style="vertical-align: inherit;">Regardons quelques exemples réels.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Utilisation du cache</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que vous prépariez le dîner tous les jours. </font><font style="vertical-align: inherit;">Pour cuisiner, vous avez besoin de divers ingrédients, légumes, épices, etc. </font><font style="vertical-align: inherit;">Cependant, allez-vous au magasin tous les jours pour cela? </font><font style="vertical-align: inherit;">Cela peut être assez lourd et long. </font><font style="vertical-align: inherit;">Bien sûr, la première chose que vous regardez dans le placard de la cuisine ou du réfrigérateur. </font><font style="vertical-align: inherit;">Cela permet d'éviter un voyage inutile au supermarché. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/mg/y6/i6/mgy6i6dasy2xuqop18mtldzoqpq.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Votre réfrigérateur est une sorte de cache pour les légumes. </font><font style="vertical-align: inherit;">L'avantage évident de cette cache est une économie significative de temps de préparation du dîner.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comment fonctionne le cache?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les applications serveur stockent généralement les données dans une base de données. Lorsqu'un client demande des données, l'application envoie une demande à la base de données, en reçoit des données et les envoie au client. Le serveur de base de données est hors ligne et peut se trouver sur un ordinateur différent de celui sur lequel se trouve le serveur d'applications. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/5f/qg/e4/5fqge4lmt8q5yigsx4kj5gmqksw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lecture des données de la base de données est un processus très lent, car vous devez envoyer une demande et effectuer des E / S pour obtenir des données du système de fichiers. Si les données sont stockées dans le cache, l'opération de lecture sera très rapide. Lorsqu'un client demande à plusieurs reprises les mêmes données, il est judicieux de renvoyer les données du cache au lieu de la base de données.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple: si un tweet est viral, tous les clients demanderont des données pour le même tweet. </font><font style="vertical-align: inherit;">Parce que Twitter compte des millions d'utilisateurs, l'utilisation d'un cache évite des millions de requêtes de base de données. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, le cache réduit la charge sur la base de données. </font><font style="vertical-align: inherit;">Si les données demandées sont dans le cache, la demande de base de données sera redirigée (interceptée). </font><font style="vertical-align: inherit;">Vous pouvez faire une analogie avec une table de hachage qui stocke des paires clé-valeur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le diagramme suivant montre le processus de lecture des données du cache:</font></font><br>
<br>
<img src="https://habrastorage.org/webt/u4/4x/6a/u44x6annynx7u794dgoq-0a6s-g.png"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Concepts de cache clé</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temps de vivre (TTL)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il s'agit de limites sur la quantité de données pouvant être stockées dans le cache. </font><font style="vertical-align: inherit;">Vous devez supprimer les entrées du cache dont le serveur d'applications n'a plus besoin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le cas de Netflix, le serveur mettra en cache les émissions les plus vues ou les plus populaires. </font><font style="vertical-align: inherit;">Il n'est pas nécessaire de mettre en cache les émissions que personne ne regarde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple: la mise en cache de la série Paper House est plus rationnelle que le film Indiana Jones.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supprimer la politique</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À un moment donné, le cache est plein. </font><font style="vertical-align: inherit;">D'où la nécessité de supprimer les anciennes données (non pertinentes) et de les remplacer par de nouvelles informations (pertinentes). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe plusieurs stratégies pour vider le cache, telles que «ancien (le moins récemment utilisé)» (le moins récemment utilisé, LRU), «rarement demandé (le moins utilisé)» (le moins fréquemment utilisé, LFU), «dernier (le plus récemment utilisé)» ( Dernière utilisation, MRU). </font><font style="vertical-align: inherit;">Ces politiques suppriment les données du cache selon un principe spécifique.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vieux</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les données qui n'ont pas été demandées depuis longtemps sont supprimées du cache. </font><font style="vertical-align: inherit;">Dès que le cache est plein, les anciennes données sont supprimées, de nouvelles données sont ajoutées. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Supposons que Facebook cache des photos de célébrités. </font><font style="vertical-align: inherit;">L'analyse des demandes des abonnés indique la pertinence des nouvelles photos. </font><font style="vertical-align: inherit;">Lorsque le cache est plein, la photo la plus ancienne en sera supprimée.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rarement demandé</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le LFU suit la fréquence ou le nombre de demandes de données. </font><font style="vertical-align: inherit;">Lorsque la taille du cache approche de la valeur seuil, les données les plus rarement demandées seront supprimées. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lorsque nous entrons le texte, le téléphone commence à offrir diverses options pour terminer le mot, dont l'une peut être sélectionnée à la place de l'ensemble complet (saisie semi-automatique). </font><font style="vertical-align: inherit;">Le logiciel du smartphone met en cache les mots les plus fréquemment saisis. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/rl/vi/r8/rlvir8pfmzflt3mri6oauh81nmu.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les mots rarement tapés sont ensuite supprimés de ce cache. </font><font style="vertical-align: inherit;">Dans l'exemple ci-dessus, si vous utilisez les mots «fonctionnalité», «fonctionnalités», «plume», etc., après un certain temps, le téléphone cessera de vous proposer «feat», car il sera supprimé du cache.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dernier</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette politique, les dernières données sont sujettes à suppression, la préférence est donnée aux anciennes données stockées dans le cache. </font><font style="vertical-align: inherit;">Cette stratégie est utilisée si le modèle d'acquisition de données est tel que l'utilisateur est le moins intéressé à récupérer les dernières données. </font><font style="vertical-align: inherit;">Prenons un exemple. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/_y/r7/dw/_yr7dwecmhrodbvoellhw14qvau.jpeg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les applications de rencontres telles que Tinder mettent généralement en cache tous les partenaires potentiels (correspondances ou préférences potentielles) de l'utilisateur. </font><font style="vertical-align: inherit;">Lorsqu'un utilisateur parcourt un flux en déplaçant un profil spécifique d'un partenaire potentiel vers la gauche ou la droite, l'application ne devrait plus lui recommander ce profil. </font><font style="vertical-align: inherit;">Si cela se produit, cela entraînera une mauvaise expérience utilisateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, il est nécessaire de supprimer les dernières données. </font><font style="vertical-align: inherit;">L'application doit supprimer les profils affichés dans le cache.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Types de cache</font></font></h3><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enregistrement en cache</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme son nom l'indique, les données sont écrites d'abord dans le cache, puis dans la base de données. </font><font style="vertical-align: inherit;">Cela garantit la cohérence des données dans le cache et la base de données. </font><font style="vertical-align: inherit;">Chaque lecture de données du cache correspond à l'enregistrement le plus récent. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/ji/ih/ix/jiihixkutm0lpxxdrff0l3q4tby.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'inconvénient de cette approche est l'augmentation du temps d'enregistrement. </font><font style="vertical-align: inherit;">Il ne convient pas aux systèmes fortement chargés avec des opérations d'écriture de données fréquentes. </font><font style="vertical-align: inherit;">Cependant, il est idéal pour les applications qui relisent souvent les données stockées dans la base de données. </font><font style="vertical-align: inherit;">Une écriture lente est compensée par une lecture et une cohérence rapides.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entrée de cache</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une alternative à la première approche consiste à écrire des données dans le cache et à ajouter une note sur les modifications de données pour leur mise à jour ultérieure dans la base de données. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/co/td/_l/cotd_ldfasg4f4xhgyzl4of1ncw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À l'aide d'opérations asynchrones périodiques, vous pouvez lire les données mises à jour dans le cache et apporter des modifications aux données correspondantes dans la base de données. Cette approche n'augmente pas les opérations de lecture / écriture. Le seul inconvénient ici est le retard de synchronisation entre le cache et la base de données. Cela peut conduire au fait que les applications qui s'appuient sur la base de données comme source de vérité liront des données obsolètes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Youtube, par exemple, utilise cette approche pour stocker des informations sur le nombre de vues d'une vidéo particulière. La mise à jour de la base de données pour chaque vue de la vidéo virale sera très coûteuse. La meilleure solution consiste à écrire des données dans le cache, puis à les synchroniser avec la base de données.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enregistrement de contournement du cache</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plusieurs applications serveur ne relisent pas souvent les dernières données. </font><font style="vertical-align: inherit;">Dans ce cas, une entrée de contournement de cache est utilisée. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/7w/d0/6p/7wd06ph2okntw0mjrqpwyet_ptw.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans cette approche, la base de données est mise à jour sans cache. </font><font style="vertical-align: inherit;">Cela évite de charger des données non réclamées dans le cache. </font><font style="vertical-align: inherit;">Cependant, si l'application demande toujours les dernières données qui ne sont pas dans le cache, cela entraînera le chargement de ces données à partir de la base de données avec toutes les conséquences qui en découlent.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemples d'utilisation du cache distribué</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Liste des projets de cache ouvert:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Redis</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memcached</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voltdb</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aerospike dbs</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache s'enflammer</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Merci de votre attention.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr504772/index.html">Événements numériques à Moscou du 1er au 7 juin</a></li>
<li><a href="../fr504774/index.html">Sondage auprès des responsables informatiques sur l'évolution des besoins en services informatiques</a></li>
<li><a href="../fr504776/index.html">Écrire un moteur de jeu dès votre première année: facile! (Presque)</a></li>
<li><a href="../fr504780/index.html">NSA, Ghidra et licornes</a></li>
<li><a href="../fr504784/index.html">Le certificat racine AddTrust de Sectigo a expiré le 30 mai 2020, ce qui a provoqué des problèmes dans les clients OpenSSL 1.0.x et GnuTLS</a></li>
<li><a href="../fr504790/index.html">Une sélection d'articles sur l'apprentissage automatique: cas, guides et études pour mai 2020</a></li>
<li><a href="../fr504792/index.html">Pensionnat de service. Comment NSPK a sauvé sa salle de travail d'un coronavirus</a></li>
<li><a href="../fr504796/index.html">Udalenka est cool. Peut-être rester pour toujours?</a></li>
<li><a href="../fr504798/index.html">Plaintes concernant l'intelligence artificielle</a></li>
<li><a href="../fr504800/index.html">dracut + systemd + LUKS + usbflash = déverrouillage automatique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>