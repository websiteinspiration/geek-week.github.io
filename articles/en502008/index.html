<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-13');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåüèæ üë®‚Äçüë©‚Äçüëß ü§∑üèæ Programming to the masses üòñ üîÇ üëáüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Understanding even the basics of programming can simplify human activities. In addition to the obvious things, such as the development of abstract thi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://geek-week.github.io/index.html"></a>
    <div class="page-header-text">Get best of the week</div>
  </header>
  <section class="page js-page"><h1>Programming to the masses</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/manychat/blog/502008/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Understanding even the basics of programming can simplify human activities. In addition to the obvious things, such as the development of abstract thinking or the ability to divide the task into smaller parts, I propose to go even further and use the basic approaches to development. Using the example of creating a classic logic game, drawing an analogy between visual and traditional programming, I want to show how development skills can help in solving an applied problem. Those wishing to debate on the topic or play "Bulls and Cows" and win a prize - a call to cat.</font></font><br>
<br>
<img src="https://habrastorage.org/webt/yd/cm/ek/ydcmekfeub5vsbn_xefs8nhl49y.png"><br>
<br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">My name is Zhenya and I am a backend developer at ManyChat. </font><font style="vertical-align: inherit;">Some time ago, the HR team approached me with a request to implement the game ‚ÄúBulls and Cows‚Äù, familiar to many from childhood, on the basis of our product. </font><font style="vertical-align: inherit;">Let me add a little context. </font><font style="vertical-align: inherit;">ManyChat is a tool for automating the interaction between businesses and their customers, allowing you to answer common questions via Facebook, and more recently SMS and Email. </font><font style="vertical-align: inherit;">‚ÄúBulls and Cows‚Äù is a logical game, during which, for several attempts, it is necessary to guess the guessed number. </font><font style="vertical-align: inherit;">Many can know it from the game Fallout, where you need to hack a computer terminal. </font><font style="vertical-align: inherit;">More details about the rules can be found at the end of the article.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Visualization</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What do we do before writing code for a complex task? We go to the blackboard with a marker or pick up a pencil and paper and draw a block diagram or UML diagram, because visualization is the most natural way for people to present and perceive information. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flow Builder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the heart of our system, based on various objects, graphic elements and the rules by which they interact with each other. I would say that this is a logical continuation of object-oriented programming. So I discarded the usual tools and immediately proceeded to designing the logic of communication between the bot and the player. </font></font><br>
<img src="https://habrastorage.org/webt/nn/ua/t5/nnuat59tmxuxvgdjlepl0himnze.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flow of the Bulls and Cows game</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
This is very convenient, since the UML diagram and Flow Builder are almost identical. </font><font style="vertical-align: inherit;">At this step, design and programming are already combined. </font><font style="vertical-align: inherit;">For several iterations, I threw flow and designated the places of interaction with the user and with the API. </font><font style="vertical-align: inherit;">The result obtained was somewhat different from the original representation in my head - visualization provided an opportunity to look at the task from a different perspective. </font><font style="vertical-align: inherit;">This is good, since changes to the diagram are easier and cheaper than to code. </font><font style="vertical-align: inherit;">It seems to me that the meaning of this approach is rooted in the proverb ‚Äúmeasure seven times, cut one‚Äù. </font><font style="vertical-align: inherit;">Engineers should be especially familiar and understandable.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Division of responsibility</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
What should be implemented on the side of ManyChat, and what on the side of code? The answer to this question at first did not seem obvious to me. There are two tools for interaction on our platform: Dynamic Block and External Request. They are almost identical except that the first one executes the request to the remote server and moves on to the next instruction, and the second one allows you to first compare the response data with the bot variables. In one of the first versions, I used the Dynamic block and implemented sending the standings from the API method directly to Facebook. It would seem that there is nothing wrong with this approach. But if you look a little further and assume that the player wants to play using SMS, the code will have to find out about the communication channel of a specific player. It does not seem necessary. In the next version, I switched flow to work with External Request,added a response record to user variables and removed any mention of the channel from the code. Now the game code can be used in another application and implement any desired interaction interface: from the console to the mobile application. Whether it was separating the view from the control logic according to the MVC pattern or highlighting the limited contexts according to the DDD approach - decide for yourself. The main thing here is that despite the lack of requirements, on a subconscious level, I identified a potentially bottleneck in the system that could create problems in the future.Whether it was separating the view from the control logic according to the MVC pattern or highlighting the limited contexts according to the DDD approach - decide for yourself. The main thing here is that despite the lack of requirements, on a subconscious level, I identified a potentially bottleneck in the system that could create problems in the future.Whether it was separating the view from the control logic according to the MVC pattern or highlighting the limited contexts according to the DDD approach - decide for yourself. The main thing here is that despite the lack of requirements, on a subconscious level, I identified a potentially bottleneck in the system that could create problems in the future.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Variable naming</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Variable naming is one of two major programming problems. </font><font style="vertical-align: inherit;">In addition to variables, block naming is equally important. </font><font style="vertical-align: inherit;">Many users do not attach importance to this, do not have time to look around as flow turns into a set of Copy 1, Copy 2, and so on. </font><font style="vertical-align: inherit;">This greatly complicates the understanding. </font><font style="vertical-align: inherit;">Everything is like with a bad class - it is impossible to figure out what he is doing without going inside. </font><font style="vertical-align: inherit;">In more detail this thought was revealed by my colleague. </font><font style="vertical-align: inherit;">If you are interested, I suggest that you read </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">his post</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Steve McConnell in his book "Perfect Code" wrote that the name should fully and accurately describe the represented entity. I think it's hard to argue with that. For example, for boolean variables, I prefer to use the is prefix. In this case, the reader can already understand what he is dealing with by the first two letters. As for the length, it is desirable that it does not exceed 20 characters (Gorla, Benander, and Benander, 1990). The smaller the scope of a variable, the shorter its name can be. But since all the variables in ManyChat have a global scope, it is worth using the namespace. For Bulls and Cows, I used the starting segment in the form of two BC capital letters derived from Bulls and Cows. Given the above, I got the variable name </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BC Is Victory</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - quite unique and comprehensive, in my opinion.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRY, KISS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The game works and, it would seem, you can exhale with a sense of accomplishment. </font><font style="vertical-align: inherit;">But we know that the next step is self-review and refactoring. </font><font style="vertical-align: inherit;">With a more detailed analysis, you can see how stop word processing and victory lead to similar blocks - player calls for some actions. </font><font style="vertical-align: inherit;">At the same time, the loss, for some unknown reason, lives its own life. </font><font style="vertical-align: inherit;">Combining these places into one seems to be a logical step to avoid duplication, which in turn leads to increased consistency of behavior and ease of maintenance. </font><font style="vertical-align: inherit;">Now, if changes are necessary, you need to make them in the only unit of the system without changes in others, which indicates that the principle </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Don‚Äôt repeat yourself</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is applied successfully. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/nx/x6/tj/nxx6tjf0wantdjfmxy2sisi8gjm.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flow with DRY</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
However, do not stop there. Complex solutions are difficult to maintain. When an error occurs, it will not be easy to localize it, especially after a time when you fall out of context. A new person will take a lot of energy to figure out what's what. And you will have to familiarize yourself with each node, so as not to miss anything important. Therefore, it is worth using the principle of </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keep it simple, stupid</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and spread all the possible actions into separate places. After decomposition, I got 5 fairly easy to understand flow. As a pleasant bonus, this refactoring satisfied </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Single responsibility</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">principle. </font><font style="vertical-align: inherit;">Each flow has one responsibility and this responsibility is completely encapsulated in it. </font><font style="vertical-align: inherit;">The appeal is a la Black box, and by the nature of the problem it can be localized faster. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/4w/_j/n0/4w_jn03cyior-xvnlqrohhwtf2o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KISS-compliant Flow</font></font></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">YAGNI</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In one of the first versions of automation, there were achievements in sending reminders of an abandoned game and instructions for receiving gifts by the winners. The implementation of the first idea was complicated by restrictions on the part of Facebook - recently the conditions for sending messages outside the window at 24 hours have become tougher. The second turned out to be insufficiently trivial for implementation by the code. Both issues are resolved, but the amount of effort needed was not justified by the needs of a one-time campaign. In addition, sprint tasks stepped on the heels, so it was decided not to implement this functionality. And here came to the rescue </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You aren't gonna need it</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a principle whose purpose is to abstain from excessive functionality. </font><font style="vertical-align: inherit;">This is a normal situation when conditions change and dead, more unnecessary parts appear in the product. </font><font style="vertical-align: inherit;">Removing the corresponding blocks facilitated an understanding of the purpose of flow and once again reminded the importance of timely refusal to add new functionality, which is not directly needed. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Experienced developers know that any feature needs constant support, from code refactoring to updating documentation and working with user feedback. </font><font style="vertical-align: inherit;">Therefore, the addition of new functionality should always be regarded with suspicion, asking the question, is it really necessary? </font><font style="vertical-align: inherit;">Ultimately, at this stage, you can save a lot of resources.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">let's play</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The stages of self-review and refactoring are passed, there is no unnecessary functionality, and the meaning of all flow is transparent for understanding. This means that the game is ready and it is time to compete for prizes. According to the terms of the competition, the top 10 players who score the most points before May 22, 2020 will receive prizes from the ManyChat team. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A bit about the rules. In our implementation, the game is designed for one person. The bot makes a 4-digit sequence with non-repeating numbers. The player makes an attempt to guess the number. The bot reports in response to how many numbers were guessed without coincidence with their positions, that is, the number of cows, and how many were guessed right up to the position, that is, the number of bulls. As a result, the game scenario may look something like this: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The number 1234 is guessed. The </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
participant makes the first assumption: 4321</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gets the answer: 0 bulls and 4 cows. The </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
participant makes the second assumption: 1678 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
And receives the answer: 1 bull and 0 cows. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
To try, </font><font style="vertical-align: inherit;">follow the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and follow the prompts. </font><font style="vertical-align: inherit;">Let me remind you that the game goes through Facebook Messenger. </font><font style="vertical-align: inherit;">We offer 2 difficulty levels: a game for a limited and unlimited number of moves. </font><font style="vertical-align: inherit;">Victory in a difficult one will bring you 3 points, in a simple one - 2. Losing, regardless of level, will take 1 point. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
The game was implemented on a standard technology stack: Nginx 1.17, PHP 7.4, PostgreSQL 12.1. </font><font style="vertical-align: inherit;">If you wish, you can clone the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">repository</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to your server, install the </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> on your ManyChat page and arrange your own tournament.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">findings</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚ÄúEveryone in this country needs to learn how to program on a computer because it teaches you to think.‚Äù I think that the relevance of this statement has long gone beyond the borders of only one country. Programming is not secret characters in the terminal, difficult for an uninitiated person to perceive, and a programmer is not an elected one. First of all, it is a way of thinking and a set of skills for solving problems. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Turning to the title of the article and the original slogan, I want to rephrase it: ‚ÄúProgramming belongs to the people. It must have its deepest roots in the very depths of the broad working masses. It must be understood by these masses and loved by them. ‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I would never have thought that in one article I would quote Steve Jobs and Lenin.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
I am sure that the thoughts presented here came to my mind not only to me. Some will even consider them captains. But I know for myself that sometimes you need to hear the same information several times in order to start using it. The banal principle is to simplify things as simple as they seem. Every programmer knows that the project code quickly and easily gets out of hand if not given due attention. But sometimes you have to remind yourself of this again.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Something was not lit at all. </font><font style="vertical-align: inherit;">For example, extreme programming techniques such as pair programming, frequent small releases, and the game of scheduling were not addressed in this article. </font><font style="vertical-align: inherit;">Although flexible methodologies have common roots with systems for organizing offline, physical production, they are still often used for software development. </font><font style="vertical-align: inherit;">Although their potential is not limited to the industry. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
There is probably something that I never thought about. </font><font style="vertical-align: inherit;">Each of us has his own experience and vision. </font><font style="vertical-align: inherit;">Therefore, I urge you to share your thoughts on this subject in the comments.</font></font></div>
      
    </div>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../en501994/index.html">Orchestrator for MySQL: why a fail-safe project cannot be built without it</a></li>
<li><a href="../en501996/index.html">Zen Go (Pocket Version)</a></li>
<li><a href="../en501998/index.html">Expensive price of styles. Yandex Report</a></li>
<li><a href="../en502000/index.html">12 Data Engineering Online Courses</a></li>
<li><a href="../en502004/index.html">Kanban Method: Understanding Your Process as a Collective Knowledge Process - Part 1 (recipes)</a></li>
<li><a href="../en502012/index.html">Azure for Everyone: Introductory Course</a></li>
<li><a href="../en502018/index.html">Podcast on the security of mobile devices and the development of protective solutions for them</a></li>
<li><a href="../en502028/index.html">Vanya goes to grandmother or dynamic JavaScript adaptive</a></li>
<li><a href="../en502030/index.html">Web Services in Oracle</a></li>
<li><a href="../en502034/index.html">Controlled and uncontrolled components in React don't have to be complicated</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter63335242 = new Ya.Metrika({
                  id:63335242,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/63335242" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-13', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Geek Week | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2020</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=i62cJ2037o_BACd40gCrIso3niu0Sjx2sDFYJkeYdRk&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>